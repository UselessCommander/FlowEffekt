const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C3FxZ4wa.js","assets/vite-D9Bl2idj.js","assets/WatchlistSelections-1uDN_mUz.js","assets/vendors-C5Yb_vOP.js","assets/i18n-e-V71OMz.js","assets/icons-CiTTPXKc.js","assets/platform-V-LZuMYq.js","assets/AppDownloadQR-DkYjOQ2x.js","assets/emoji-picker-react.esm-BCf4US33.js","assets/FileUploadModal-BJrw3NQw.js","assets/SourcesTable-CSrz6Q_F.js","assets/FilesTableHeader-BnMq9EGQ.js","assets/CometDownloadInstructionsModal-7VQky9O7.js","assets/CollectionCreateEditModal-D4DdkbMy.js","assets/getMaybeTranslatedCollectionTitle-A0ZANMLz.js","assets/CollectionSelectModal-D3oQHGGV.js","assets/OnboardingModal-Dx5RO5Hb.js","assets/MarkdownStreamer-D5S7SCBd.js","assets/useHandleClickPricing-0Oz4A5-v.js","assets/useReferralCode-DP8ejUVR.js","assets/PlatformOptions-DsIAW0aS.js","assets/IntlPhoneInput-B6gdcpbo.js","assets/IntlPhoneInput-C5Iq5FTb.css","assets/notificationQueries-CbW0UbSu.js","assets/phoneNumberUtils-BDcRU5bn.js","assets/CombinedPaywall-DJz_WIX_.js","assets/StudentReferralsContent-CPih9cyV.js","assets/CanonicalPattern-BdKmZL1f.js","assets/useStudentReferralRewards-DRe_3qAe.js","assets/PurchaseConfirmationToast-DVI1v-Tz.js","assets/use-unmount-effect-UcfN_I6S.js","assets/CompanyDataPrivacyModal-cOA_jShT.js","assets/SpaceVideoModal-BzEEMxii.js","assets/PricingTableModal-CLETVjtX.js","assets/FreeTrialModal-DU3eG_vp.js","assets/MapModal-C4qPnSeD.js","assets/PerplexityMap-Cua5_JhL.js","assets/PulsingDot-C8eWvjWe.js","assets/InputPaymentModal-B_u-G045.js","assets/useStripePromise-BLokwQfT.js","assets/ShoppingPaymentModal-H05y35SS.js","assets/useCreateFirmlyCart-Bw6CVklc.js","assets/DiscountTag-C0CK8Gsn.js","assets/ShoppingOptionRow-DDB-68QZ.js","assets/useStripeAppearance-Btw2biEa.js","assets/useCreateSetupIntentAndCheckoutSession-Cye4mb8v.js","assets/EntityItemImageCarousel-BSH69bXV.js","assets/Carousel-BXcHd4Mm.js","assets/embla-carousel-react.esm-m7CJ5XOl.js","assets/ShoppingPaymentBillingBox-Dp7HuPpl.js","assets/ShoppingOnboardingModal-NoOh8ngf.js","assets/PurchaseDetailsModal-BmaQCvj4.js","assets/PurchaseStatus-hSaTE4J_.js","assets/ReservationDetailsModal-BX_BsHUT.js","assets/utils-BiNMd2Q5.js","assets/util-Bdv7FccR.js","assets/SpaceSettingsModal-BkRmno5o.js","assets/UsernameModal-CSMdvjBB.js","assets/FullNameModal-DaXvSq2V.js","assets/KeyboardShortcutEditorModal-BYNPXTTg.js","assets/VoiceToVoiceModal-DbBF6pDF.js","assets/constants-AJwyPqgV.js","assets/SearchStepsAssetsModal-BKJh7jk1.js","assets/GeneratedVideoCard-DUbXCcaK.js","assets/CodeFileContentRenderer-D6phdt1F.js","assets/XlsxViewer-CxpPYCHH.js","assets/PDFViewerCore-DQ6B4uwS.js","assets/MemoryListModal-H2ky0O5f.js","assets/MemoryList-3ccvAkLb.js","assets/MemoryDetailModal-B9yNwlcD.js","assets/HotelRoomDetailsModal-Bi96LFup.js","assets/MaybeAdjustedPrice-C6q_rNcA.js","assets/ImagePagedCarousel-CwOWJopj.js","assets/PaymentModal-CgtGxs0m.js","assets/ProReferralModal-DQSY_wZi.js","assets/MeetingDefaultsModal-Cc3UfnfM.js","assets/AvailabilityModal-BngwaKxX.js","assets/ComboBox-MmSLL-RT.js","assets/ProMessageModal-DMCq-6rs.js","assets/MemorySearchHistoryIntroModal--8_DHdwG.js","assets/SubSuccessModal-DxK6BMN2.js","assets/PerksList-C3di8zP3.js","assets/ReferralErrorModal-CjYs_3LT.js","assets/ReferralSuccessModal-Df8PRfJT.js","assets/IncentiveProModal-DkoCISee.js","assets/StudentReferralsModal-CBlZsqHv.js","assets/SheerIDModal-BG5Bbo7t.js","assets/BraintreeSubscriptionModal-DzFKLtBl.js","assets/RestaurantBookingModal-CarApcwY.js","assets/SheerIdRedirectModal-DrxjGLXn.js","assets/EnterprisePremiumSecureUpgradeModal-Dg94BWHw.js","assets/useOrgPremiumSecureFeatures-Dy9YBrnN.js","assets/ShortcutModal-DQG4GUGf.js","assets/PlatformOptionsModal-Dfpx1cjm.js","assets/SharepointSiteModal-CCNGGCh4.js","assets/MCPServerModal-BPssxBnV.js","assets/MemberSetTierModal-CICSVqVx.js","assets/MCPServiceToolsModal-C43SYfpE.js","assets/index-DS3HnOeq.js","assets/RenderToolbar-o-iI3E91.js","assets/DebugModeActivator-BVToKrqP.js","assets/_restricted/restricted-feature-debug-Cj9bUfgD.js","assets/LexicalClearEditorPlugin.prod-DTmk1W38.js","assets/LexicalHistoryPlugin.prod-DviiX6lM.js","assets/OnChangePlugin-CKTIqjwy.js","assets/LexicalEditorRefPlugin.prod-Bp0aUw8p.js","assets/AutoLinkPlugin-CrmoIWQ5.js","assets/LinkPlugin-CqZgK-l8.js","assets/LexicalMarkdownShortcutPlugin.prod-DSgMAtst.js","assets/WelcomeOverlay-Cd9ZE4RE.js","assets/ShoppingDetailsModal-lzPr9UKf.js","assets/ShoppingWidget-DYOGJ9e0.js","assets/EntityItemReviewSummary-DWdVblLT.js","assets/ThreadEntryVideo-RESC0vVe.js","assets/useSponsoredImpressionTracking-3-wgTmND.js","assets/useViewportDwellObserver-DzoYl5iu.js","assets/CitationTrendingList-BBWbw8vl.js","assets/useNewFileViewer-bmjH3bBP.js","assets/useIsShoppingtryOnEnabled-B-OiGoE4.js","assets/ShopifyPurchaseModal-C_UGRk67.js","assets/ShopifyPurchaseModalMobile-DLu1F_sL.js","assets/ShoppingViewMoreModal-CpV_BaLl.js","assets/useSearchForAdditionalProducts-CxRbwZIg.js","assets/ShoppingOverviewItem-B6gKPM0O.js","assets/SplitModal-B9now6uS.js","assets/qrcode-DzQwd33t.js","assets/index-CS1gb-Pa.js","assets/CharityWidget-DPsbT5Cm.js","assets/BrandPopoverContent-D_L9MV1u.js","assets/cdn-CgsX5lp-.js","assets/SideCanvasViewer-CM_HORwV.js","assets/AssetsMode-DJPaKms4.js","assets/abap-xXO2ZNBr.js","assets/abnf-Cpr-RfZc.js","assets/actionscript-7IoedjRX.js","assets/ada-DvJpapMr.js","assets/agda-CXQhj6q_.js","assets/al-Dn94UNn4.js","assets/antlr4-D_WJe1oO.js","assets/apacheconf-BxdI37fF.js","assets/apex-DSxd3UGl.js","assets/sql-CJATM1Qp.js","assets/apl-BhX0_fkh.js","assets/applescript-mDtPbSw7.js","assets/aql-CCmuoNOQ.js","assets/arduino-BOTCtVXt.js","assets/cpp-PR_WB-PF.js","assets/c-kgVuzdLE.js","assets/arff-LHIGEhob.js","assets/asciidoc-DUL3t6uM.js","assets/asm6502-B_69y3yN.js","assets/asmatmel-LW8Eoafy.js","assets/aspnet-3TSffHQD.js","assets/csharp-Cd5Udg29.js","assets/autohotkey-DDP9Pz17.js","assets/autoit-B6rX58wf.js","assets/avisynth-Dm_4mu0N.js","assets/avro-idl-UlEGCRi0.js","assets/bash-BDr8_71o.js","assets/bash-CefCgV5_.js","assets/basic-BBt5kyDw.js","assets/basic-DBS9NaGG.js","assets/batch-Cj3BSbMY.js","assets/bbcode-DpxtQw0_.js","assets/bicep-CmgEE0U9.js","assets/birb-Dars3CuK.js","assets/bison-DX1VDlfk.js","assets/bnf-B6-zmMw4.js","assets/brainfuck-EZxQTWZ8.js","assets/brightscript-MwC7Espe.js","assets/bro-JV1z53-B.js","assets/bsl-Cd53xDCy.js","assets/c-CxGDiPNH.js","assets/cfscript-B9mkrBpQ.js","assets/chaiscript-Dof1nfTW.js","assets/cil-Bn3Q2E1W.js","assets/clike-DDqLwGhR.js","assets/clike-B5tY_8Hg.js","assets/clojure-C8Cgr9xq.js","assets/cmake-BO229LM_.js","assets/cobol-ncmGEesi.js","assets/coffeescript-D_XUmKs0.js","assets/concurnas-TfeVZMOZ.js","assets/coq-B5z9RsQ6.js","assets/cpp-Chcfrze0.js","assets/crystal-Dynhbd61.js","assets/ruby-DYsn9XfW.js","assets/csharp-BhqpJkpq.js","assets/cshtml-BWGfxKn4.js","assets/csp-BoPMW3Ei.js","assets/css-extras-Hsmrym8x.js","assets/css-DY8FYVYE.js","assets/css-CF9HHZb0.js","assets/csv-C7m4DnSA.js","assets/cypher-l75AB8hd.js","assets/d-CDO8utOJ.js","assets/dart-PPmz7K9W.js","assets/dataweave-DSq9Bs2g.js","assets/dax-Ql7iF31E.js","assets/dhall-D8AlcFmH.js","assets/diff-DxjKD27r.js","assets/django-DdNzo2Lw.js","assets/markup-templating-BxAVv-bL.js","assets/dns-zone-file-CPg1_KvB.js","assets/docker-CVuCFm8y.js","assets/dot-Cv30q0-0.js","assets/ebnf-D4d3p3sx.js","assets/editorconfig-svCLfWhT.js","assets/eiffel-DhOhlUP9.js","assets/ejs-CuszUXEo.js","assets/elixir-CZtOXY6s.js","assets/elm-BcYqZUmH.js","assets/erb-D4Jx3m2Q.js","assets/erlang-Bs9TEZ3l.js","assets/etlua-C0lc7-1S.js","assets/lua-DER4jxlW.js","assets/excel-formula-CzIhBLjN.js","assets/factor-WaebLdn4.js","assets/false-ShlVddT_.js","assets/firestore-security-rules-4moqVYWI.js","assets/flow-CXLXbYk5.js","assets/fortran-BND3_knE.js","assets/fsharp-BFha84XY.js","assets/ftl-GB7jbcGS.js","assets/gap-Dpz_lRLC.js","assets/gcode-C7ldqsmu.js","assets/gdscript-B9Bfhib1.js","assets/gedcom-btzlAVde.js","assets/gherkin-DXkOYSMV.js","assets/git-Bi1kQND6.js","assets/glsl-BYO0fWe4.js","assets/gml-Dcj75dEM.js","assets/gn-C5jCMEGg.js","assets/go-module-DS88Hgar.js","assets/go-Bb8GlO4U.js","assets/graphql-BqELzFSN.js","assets/groovy-CZHQRD2T.js","assets/haml-D4Cu9GWy.js","assets/handlebars-C4Zm0IB3.js","assets/haskell-qrj8ifSK.js","assets/haskell-Ds42Eazu.js","assets/haxe-ChRoPNLt.js","assets/hcl-DW5WNCe3.js","assets/hlsl-BedTSN1F.js","assets/hoon-BwAkIC7V.js","assets/hpkp-KfxxGNng.js","assets/hsts-BSN3uVd1.js","assets/http-FRE2So_Y.js","assets/ichigojam-68yjR9qP.js","assets/icon-DMVM2VVb.js","assets/icu-message-format-D6wK9nFS.js","assets/idris-DVPeRJob.js","assets/iecst-CVU0L1v2.js","assets/ignore-CWbAeMHy.js","assets/inform7-D7YCc5AS.js","assets/ini-DTjpb4oT.js","assets/io-DyJVvRKM.js","assets/j-B1KsJ8Lh.js","assets/java-C8KDVoMm.js","assets/java-BxMbkJZ_.js","assets/javadoc-Be5z3uxJ.js","assets/javadoclike-myFApC35.js","assets/javadoclike-AcPh5e5A.js","assets/javascript-C1hWj-gL.js","assets/javascript-D8vYUPHd.js","assets/javastacktrace-l5DDWqnd.js","assets/jexl-CPewgw8R.js","assets/jolie-oDW4xHAj.js","assets/jq-DCybKO55.js","assets/js-extras-Dt3p3jFp.js","assets/js-templates-C36cwUgG.js","assets/jsdoc-D9b2eQCX.js","assets/typescript-CVO-8GEc.js","assets/json-DxuiKECE.js","assets/json-BESjz4hO.js","assets/json5-xjq_y-Ab.js","assets/jsonp-O-R2QEUD.js","assets/jsstacktrace-AwxS9N4y.js","assets/jsx-oDQJXXbV.js","assets/jsx-CWP8P1mH.js","assets/julia-CSbapaXD.js","assets/keepalived-QNLh4sKY.js","assets/keyman-Dekq-H3g.js","assets/kotlin-luLWldVW.js","assets/kumir-gJ2eR1Bt.js","assets/kusto-B8-0f2WS.js","assets/latex-naZEwrIf.js","assets/latte-CuYvwG6d.js","assets/php-DWsP2mkx.js","assets/less-IPZUooSX.js","assets/lilypond-Ca27w2l1.js","assets/scheme-Cscf027c.js","assets/liquid-CqfwnlE8.js","assets/lisp-DS6a9sOI.js","assets/livescript-BtvwBPLA.js","assets/llvm-DJuz_f_4.js","assets/log-vpDuJ6s7.js","assets/lolcode-D7zlseNY.js","assets/lua-CrdnDpZs.js","assets/magma-CXc54FID.js","assets/makefile-TgER5D3-.js","assets/markdown-BBUfvsG3.js","assets/markup-templating-DkjQpHey.js","assets/markup-DvUfpNsN.js","assets/markup-BONeskWm.js","assets/matlab-D8KyOrZZ.js","assets/maxscript-BLMZLNdj.js","assets/mel-Ck2zZU6-.js","assets/mermaid-BbVwv4sI.js","assets/mizar-C5pIb6PU.js","assets/mongodb-BP-_FLZQ.js","assets/monkey-CJMClX9N.js","assets/moonscript-B3F4_gd_.js","assets/n1ql-DEwy8oY_.js","assets/n4js-DosTxUWO.js","assets/nand2tetris-hdl-BaEjoK_-.js","assets/naniscript-CwUM2gJ6.js","assets/nasm-BBm4hQNa.js","assets/neon-D7ky2QYE.js","assets/nevod-ytlw2XDY.js","assets/nginx-BAoSqL21.js","assets/nim-vhNCNa0d.js","assets/nix-UkDV490L.js","assets/nsis-CB_gSgbd.js","assets/objectivec-COnIeXKs.js","assets/ocaml-p7XlZdCt.js","assets/opencl-DpkpHOKT.js","assets/openqasm-BUO-RrFI.js","assets/oz-BKi7Vu9u.js","assets/parigp-Q2v1bPZv.js","assets/parser-CuIfV_M8.js","assets/pascal-BiB8a1yc.js","assets/pascaligo-Bbe6k1sN.js","assets/pcaxis-Cjwjh94y.js","assets/peoplecode-hzUErX2R.js","assets/perl-B1D9cLJK.js","assets/php-extras-CZ7KxjqE.js","assets/php-Dk7MEIvs.js","assets/phpdoc-FxciP3cA.js","assets/plsql-DvVXY7wu.js","assets/powerquery-Btcc8rhQ.js","assets/powershell-AWIxkKNB.js","assets/processing-B76ABtt6.js","assets/prolog-BkajrflI.js","assets/promql-NkmAc1R6.js","assets/properties-Xjh-xSf6.js","assets/protobuf-BI4CAp9r.js","assets/psl-aZe3ORrd.js","assets/pug-CoMAP1Jj.js","assets/puppet-D22HavK3.js","assets/pure-BCQxrhr5.js","assets/purebasic-CS3SBoo5.js","assets/purescript-kPZQhZXw.js","assets/python-dI9O2OOO.js","assets/q-BM_OsTRZ.js","assets/qml-6uNzUUZ_.js","assets/qore-CT2dtVvu.js","assets/qsharp-CUW6Vzvu.js","assets/r-CxoAQyfy.js","assets/racket-Ce6iEwSg.js","assets/reason-C3OtRNQn.js","assets/regex-24inC6Mm.js","assets/rego-DIGNi3rm.js","assets/renpy-2_7A_zWP.js","assets/rest-DhkPHUyy.js","assets/rip-NrUmeF-B.js","assets/roboconf-BemhCpww.js","assets/robotframework-53wxIqzy.js","assets/ruby-C6pGL11I.js","assets/rust-BHPZBpz7.js","assets/sas-yB8mv_pf.js","assets/sass-DgOtzGEh.js","assets/scala-c85IbDKx.js","assets/scheme-DujsssZ_.js","assets/scss-N9CyGJ1A.js","assets/shell-session-CfJU-2jh.js","assets/smali-7KK8MopY.js","assets/smalltalk-DJTW1rgy.js","assets/smarty-CswuHGTf.js","assets/sml-4a7AgiKJ.js","assets/solidity-DEN_xXGX.js","assets/solution-file-DWy8oS52.js","assets/soy-BX0S4Ybl.js","assets/sparql-B-dncyn2.js","assets/turtle-Ro1R6Je7.js","assets/splunk-spl-BL9M6RFD.js","assets/sqf-B-w3EaXj.js","assets/sql-CSwhl0T2.js","assets/squirrel-C5_0fEts.js","assets/stan-BkKsrDj5.js","assets/stylus-2Q_1bI5O.js","assets/swift-d0VCk99T.js","assets/systemd-B69haCtV.js","assets/t4-cs-CLTzhrWu.js","assets/t4-templating-B5EzSFYT.js","assets/t4-templating-CInlPI0-.js","assets/t4-vb-CEKPTSWr.js","assets/vbnet-BhrUc4aD.js","assets/tap-3j2EobdJ.js","assets/yaml-pHjxJgpq.js","assets/tcl-zimK4Rb-.js","assets/textile-7onSDWIs.js","assets/toml-B0WKHIUt.js","assets/tremor-DTcir1gV.js","assets/tsx-C2pKQQQ0.js","assets/tt2-C4s6UOud.js","assets/turtle-BYwbX2lo.js","assets/twig-DALNrbqc.js","assets/typescript-hEHsyI9-.js","assets/typoscript-C_RZnLUi.js","assets/unrealscript-DO0UKSEs.js","assets/uorazor-Cw2oyUim.js","assets/uri-Cla3Mizl.js","assets/v-BsukdtQB.js","assets/vala-C185s0T4.js","assets/vbnet-CJSJpYVN.js","assets/velocity-CyQirldx.js","assets/verilog-DM4rVBaH.js","assets/vhdl-B2ul-nke.js","assets/vim-D2bsD5Qn.js","assets/visual-basic-DNYvyv_b.js","assets/warpscript-DjoJn5rp.js","assets/wasm-BbdpnjqR.js","assets/web-idl-BniNXYF8.js","assets/wiki-mlk-5nnD.js","assets/wolfram-qZAo5rwv.js","assets/wren-BqEZDn1c.js","assets/xeora-Cnf6lXKg.js","assets/xml-doc-Bt7GfDs3.js","assets/xojo-DJ-XOrAn.js","assets/xquery-DijxsTGH.js","assets/yaml-uyIc--AI.js","assets/yang-BSK0EYb5.js","assets/zig-C5U7OOzb.js","assets/core-Ce8M0wN-.js","assets/index-DI_kragw.js","assets/SidePDFViewer-CWh5C5zO.js","assets/ConnectorAuthorizationPrompt-KkaiPjBy.js","assets/AgentWorkflow-DM54QpJ1.js","assets/MarkdownResponse-fLg5Tzjd.js","assets/ThreadEntryFooter-l3_pXUqp.js","assets/StructuredAnswerInlineBlock-CPieAa9m.js","assets/PlaceInlineCard-594x-L42.js","assets/MapboxURLs-4yEd9e3N.js","assets/CardCarouselV2-BpHqJ1R2.js","assets/useGenerateShoppingReviewSummary-Bb8x62tW.js","assets/ImagesModePreview-BHwUi-SN.js","assets/utils-CNycpV_1.js","assets/CanonicalContainer-DfazSIFR.js","assets/CanonicalPatternBackground-BYk8sx_D.js","assets/WithSidebar-BjhS6cMF.js","assets/QueryComponents-fBL9p0EJ.js","assets/NotFound-BQjzqQia.js","assets/BigNumber-fgBsNpgM.js","assets/TimeAgoTooltip-BCCFo_sC.js","assets/ReportModal-DlGt4lor.js","assets/CopyOutputButton-ztQvrgTS.js","assets/Related-BG3S7pZe.js","assets/RelatedPrompts-CZuta3qh.js","assets/RelatedQueryList-gJ0dEX2C.js","assets/index-Uek-meVs.js","assets/StudyModeRelated-Bicio9gU.js","assets/MapsPreview-B4miSUlT.js","assets/ThreadContentResponse-BVYUhvqy.js","assets/SourcesModePreview-qI9ULXjL.js","assets/AnswerComparisonModal-BBIXZpQA.js","assets/MobileCitationList-DnKLPJji.js","assets/ThreadEntryDebugTiming-MUqRESRr.js","assets/ShoppingMode-qVmJOv_2.js","assets/ShoppingFeaturedWidget-CBSMaI2b.js","assets/ModesNullState-D3tcoMvO.js","assets/HotelsMode-t9w5842o.js","assets/GuestInput-DCoC5zOm.js","assets/SharedAnswerModeMap-DuASdm7u.js","assets/JobsMode-CCY0-BPW.js","assets/VideosMode-BimtKs43.js","assets/useMediaSearch-BnSArP2B.js","assets/ImagesMode-DM4iDxox.js","assets/ImageGeneratorLoader-DPSBtAC9.js","assets/MapsMode-SS9_bbxU.js","assets/TasksMode-DXuRtHyA.js","assets/index-B8H0Eb4z.js","assets/search-loading-component-DQmCWSyo.js","assets/CometZenMode-BTO8q0ic.js","assets/index.module-eLTWrSA_.js","assets/TryAssistantPage-CA832_6H.js","assets/library-CDffsBfy.js","assets/useScrollPositionPersistence-BSllKH7x.js","assets/ArticleListItem-DRMRPxhc.js","assets/index-DVzkneuj.js","assets/useSpacesBookmarking-DhhFDnV1.js","assets/templates-IS6sP-ZZ.js","assets/slug-Cx3OxW6m.js","assets/useOrgUsers-BsGX3PeM.js","assets/slug-DYxiMDjr.js","assets/DiscoverTrending-BYoyk706.js","assets/loading-BloOErsO.js","assets/academic-DBLFF22n.js","assets/VerticalSearchContainer-CppjaVzL.js","assets/VerticalLandingWrapper-Bb1VGjQ0.js","assets/shopping-BiQkFeh7.js","assets/hotels-3uOk6q03.js","assets/not-found-CdMVTc7E.js","assets/perplexify_me-CScGGCSU.js","assets/travel-CO5HW2MT.js","assets/discover-Bm8tNF1o.js","assets/TaskStarterCards-BNW0HcNv.js","assets/index-CSx_zpqT.js","assets/F1Header-XIAhlS46.js","assets/MonthTabs-BzYR-KeJ.js","assets/SportsTournamentOdds-D44gHm-N.js","assets/SportsCanonicalContainer-CEf6iMb8.js","assets/events-VDzHn1We.js","assets/index-CIVzfaG_.js","assets/common-ClrGXI69.js","assets/MultiTeamSchedule-qMeLM3N3.js","assets/SportsConferenceList-DqFmUFDW.js","assets/SingleTeamEventRow-CltX0fGS.js","assets/TeamPicker-BoEZ_1rP.js","assets/BaseSportsBracket-BIgHgj_9.js","assets/SportsBracket-n89rIIdy.js","assets/SportsTeamStandings-B30m3aUV.js","assets/stats-CKKNinx8.js","assets/events-BCuMDk_r.js","assets/EventLiveOdds-DxwJxnPT.js","assets/utils-eq-MqoRh.js","assets/NBAGameLeadersStats-Dh2dT4EA.js","assets/SportsGameRelatedGames-Bj11tDns.js","assets/SportsInjuryReport-CoASFgY-.js","assets/player-C8EgX8V7.js","assets/SportsMultiTeamSeasonLeadersStats-D-UhW9La.js","assets/NBASportsTeamSeasonComparison-_f5K0aPr.js","assets/SportsTeamSeasonComparison-DiNumbuR.js","assets/SportsDataTableComparison-nRi37h9B.js","assets/SportsTeamGameComparison-7hQhmmDN.js","assets/teams-DPF5kIS_.js","assets/SportsBlazeVideoHighlights-BVnMFra6.js","assets/players-w_GDCEhq.js","assets/RelatedPlayers-B8KAmIdT.js","assets/index-CvEgH3S9.js","assets/events-BMtmBUFo.js","assets/teams-DQHpEBLI.js","assets/players-B6ymc3k6.js","assets/index-CHGCKY9a.js","assets/tournament-DSzY2zth.js","assets/events-CFUqGUMZ.js","assets/EventV2LiveOdds-BJi8vdvn.js","assets/index-BgojAbdb.js","assets/MLBEventSchedule-w77nOTGH.js","assets/scheduleUtils-BD4W-1Eg.js","assets/events-CgCHBmfH.js","assets/CricketMatchStats-ChMaV-BN.js","assets/events-DH_aOSLe.js","assets/useShowIccCricketVariation-C7gT249U.js","assets/index-Bj5-qdFD.js","assets/index-CMSP73GL.js","assets/index-B183XTpu.js","assets/GolfHeader-BC_-9xih.js","assets/TennisLeagueSchedule-CrsU472P.js","assets/events-DSE_Kxsm.js","assets/index-BjKv-OPy.js","assets/events-DcbAwDVg.js","assets/events-BOXnhhHg.js","assets/index-oikJ78i2.js","assets/index-DM7_e6KQ.js","assets/TennisHeader-C0W8SEsq.js","assets/useTennis2025Variation-CU67c3_g.js","assets/events-D0zRkKGA.js","assets/TennisTournamentBracket-CcPjAQbt.js","assets/tournaments-yDDvtVTS.js","assets/sub-router-D0lPqbWu.js","assets/WhatsHappeningHorizontal-DF55emIy.js","assets/index-ecxH1_FJ.js","assets/details-BSDsL00R.js","assets/group-AS-nnt4l.js","assets/settingsAccess-CFHPsAmE.js","assets/ProtectedSettingsPageGate-BqPnEpsm.js","assets/useAPIAdmin-JGL6UGJC.js","assets/apiPortalQueries-jgq_5P60.js","assets/APIPortalBillingBanner-Cgl45GWX.js","assets/constants-BHbsVMes.js","assets/CreateAPIGroupModal-BgERu7N9.js","assets/members-XCcfJ_dG.js","assets/MembersTablePagination-PA5Fm0xo.js","assets/billing-Ch7u2V5i.js","assets/keys-2jVlOzga.js","assets/limits-Dtg9kdst.js","assets/files-DaJwpDkM.js","assets/files-repo-CBGbSutF.js","assets/index-BTD5fPDF.js","assets/pro-perks-Bb62U8Lh.js","assets/utils-CZvV-3jC.js","assets/pro-perks-detail-CuRsBYae.js","assets/index-2sKHiMeh.js","assets/access-CGmLY7fS.js","assets/index-DUo-uovz.js","assets/useOrgMutations-Cn5f5FVR.js","assets/useEnterprisePremiumSecureEnabled-BoUbNcq4.js","assets/useIsThreadRetentionEnabled-n4KerCcW.js","assets/members-C57UHc4q.js","assets/insights-CEW_m44B.js","assets/user-access-CfbTW4Xi.js","assets/permissions-BunJPLIg.js","assets/files-nIk1TzW_.js","assets/FileData-CawglzbK.js","assets/connectors-CHCGF9Zh.js","assets/purchases-DQSVMM2J.js","assets/useMutationState-CpHt_vB7.js","assets/reservations-BNFN0Gdn.js","assets/index-C9by2feX.js","assets/TaskListItem-BSUFy6jp.js","assets/task-DUDLMrpH.js","assets/shortcuts-CtHFqg6e.js","assets/site-instructions-B2KnjdgR.js","assets/preferences-mo_HbFCH.js","assets/personalize-B84SEJoN.js","assets/assistant-SlybqJ78.js","assets/memories-JERbv_n1.js","assets/notifications-C3w6JXXs.js","assets/files-6dC3GK2o.js","assets/connectors-DUYFi-kV.js","assets/index-BDGb-AK3.js","assets/ask-input-BunjU3nn.js","assets/playground-CvcxwBLW.js"])))=>i.map(i=>d[i]);
import{g as Fn,s as rn,l as ne,S as Oe,a as lue,r as Yt,u as Ut,b as Ft,c as _t,L as Ye,P as Jb,d as TOe,e as Pm,f as jo,h as NOe,i as Er,j as rc,R as Gr,n as jOe,k as cu,F as dP,m as cue,o as _l,p as AOe,t as IOe,q as Xs,v as ROe,w as POe,x as OOe,y as ya,z as Pg,A as fP,B as lD,C as uue,$ as Qr,D as LOe,E as DOe,G as FOe,H as UOe,I as BOe,J as VOe,K as $Oe,M as we,N as Ak,O as WOe,Q as HOe,T as zOe,U as GOe,V as qOe,W as KOe,X as YOe,Y as QOe,Z as XOe,_ as qG,a0 as KG,a1 as ZOe,a2 as Ik,a3 as g1,a4 as JOe,a5 as eLe,a6 as tLe,a7 as nLe,a8 as yu,a9 as Rk,aa as cD,ab as uD,ac as rLe,ad as uu,ae as sLe,af as JN,ag as Jp}from"./platform-V-LZuMYq.js";import{r as f,e as Fy,k as aLe,l as ys,R,j as o,f as V,i as Qs,$ as dD,m as due,n as Pn,o as fue,_ as Cr,b as fD,c as tt,a as mD,p as iLe,q as Po,t as oLe,u as mue,v as Js,w as pue,x as lLe,y as YG,z as Uy,A as cLe,B as hue,C as e_,D as wv,E as QG,F as Gi,G as lE,H as uLe}from"./vendors-C5Yb_vOP.js";import{T as le,I as Ar,a as Bn,b as mP,c as It,d as pD,e as Pk,f as hD,g as dLe,h as Hs,i as Og,j as yi,k as io,l as By,m as Ok,n as Cv,o as fLe,p as gue,q as mLe,r as pLe,s as Zn,t as hp,u as yue,v as wu,w as Lk,x as Vd,y as gD,z as $d,A as xa,B as pP,C as cE,D as xue,E as gp,F as Dk,G as hLe,H as Om,J as yp,K as vue,L as yD,M as bue,N as gLe,O as yLe,P as hP,Q as _ue,R as wue,S as xLe,U as Cue,V as Lg,W as vLe,X as bLe,Y as Sue,Z as Eue,_ as _Le,$ as ur,a0 as cf,a1 as Lm,a2 as wLe,a3 as CLe,a4 as Vu,a5 as Mue,a6 as xp,a7 as SLe,a8 as ELe,a9 as MLe,aa as xD,ab as vD,ac as gP,ad as vp,ae as uf,af as Dm,ag as df,ah as kLe,ai as TLe,aj as NLe,ak as t_,al as Fi,am as jLe,an as ALe,ao as kue,ap as ILe,aq as RLe,ar as Tue,as as PLe,at as OLe,au as bp,av as Nue,aw as sc,ax as Fk,ay as LLe,az as DLe,aA as bD,aB as uE,aC as jue,aD as Aue,aE as Iue,aF as Rue,aG as FLe,aH as Pue,aI as Cu,aJ as Oue,aK as ULe,aL as y1,aM as Lue,aN as Sv,aO as Due,aP as _D,aQ as BLe,aR as yP,aS as VLe,aT as x1,aU as Fue,aV as $Le,aW as c2,aX as WLe,aY as wD,aZ as Uk,a_ as HLe,a$ as zLe,b0 as Uue,b1 as Bue,b2 as CD,b3 as xP,b4 as GLe,b5 as Vue,b6 as n_,b7 as qLe,b8 as r_,b9 as KLe,ba as wi,bb as s_,bc as SD,bd as Nd,be as YLe,bf as a_,bg as QLe,bh as $ue,bi as Wue,bj as XLe,bk as ED,bl as ZLe,bm as JLe,bn as Hue,bo as e7e,bp as zue,bq as XG,br as t7e,bs as Bk,bt as u2,bu as n7e,bv as r7e,bw as Gue,bx as s7e,by as MD,bz as Vk,bA as kD,bB as TD,bC as ND,bD as v1,bE as ZG,bF as jD,bG as AD,bH as que,bI as a7e,bJ as i7e,bK as JG,bL as o7e,bM as l7e,bN as c7e,bO as u7e,bP as d7e,bQ as f7e,bR as m7e,bS as p7e,bT as h7e,bU as g7e,bV as y7e,bW as x7e,bX as v7e,bY as b7e,bZ as _7e,b_ as eq,b$ as tq,c0 as w7e,c1 as i_,c2 as C7e,c3 as Kue,c4 as _p,c5 as ID,c6 as S7e,c7 as b1,c8 as nq,c9 as E7e,ca as o_,cb as M7e,cc as k7e,cd as Yue,ce as T7e,cf as N7e,cg as vP,ch as Que,ci as j7e,cj as Xue,ck as A7e,cl as I7e,cm as R7e,cn as Zue,co as P7e,cp as O7e,cq as L7e,cr as D7e,cs as _1,ct as F7e,cu as U7e,cv as B7e,cw as Jue,cx as V7e,cy as bP,cz as $7e,cA as e4,cB as W7e,cC as $k,cD as H7e,cE as z7e,cF as G7e,cG as q7e,cH as Wk,cI as Hk,cJ as K7e,cK as Y7e,cL as Q7e,cM as Vy,cN as X7e,cO as ede,cP as Ha,cQ as Z7e,cR as J7e,cS as tde,cT as nde,cU as rde,cV as sde,cW as RD,cX as ade,cY as ide,cZ as eDe,c_ as tDe,c$ as ode,d0 as nDe,d1 as rq,d2 as rDe,d3 as sDe,d4 as aDe,d5 as iDe,d6 as PD,d7 as oDe,d8 as lDe,d9 as cDe,da as lde,db as cde,dc as uDe,dd as dDe,de as fDe,df as mDe,dg as pDe,dh as sq,di as hDe,dj as gDe,dk as yDe,dl as ude,dm as xDe,dn as vDe,dp as bDe,dq as _De,dr as dde,ds as fde,dt as mde,du as wDe,dv as CDe,dw as aq,dx as OD,dy as SDe,dz as EDe,dA as MDe,dB as kDe,dC as _P,dD as iq,dE as t4,dF as wP,dG as CP,dH as n4,dI as r4,dJ as oq,dK as rm,dL as TDe,dM as NDe,dN as pde,dO as jDe,dP as zk,dQ as ADe,dR as IDe,dS as RDe,dT as PDe,dU as ODe,dV as hde,dW as LD,dX as gde,dY as LDe,dZ as DDe,d_ as yde,d$ as FDe,e0 as UDe,e1 as BDe,e2 as DD,e3 as VDe,e4 as $De,e5 as WDe,e6 as lq,e7 as HDe,e8 as cq,e9 as uq,ea as zDe,eb as GDe,ec as qDe,ed as dC,ee as dq,ef as KDe,eg as YDe,eh as QDe,ei as XDe,ej as ZDe,ek as JDe,el as xde,em as eFe,en as tFe,eo as vde,ep as bde,eq as nFe,er as rFe,es as _de,et as sFe,eu as aFe}from"./icons-CiTTPXKc.js";import{u as Z,m as iFe,d as pt,M as he,a as ee,c as oFe,F as SP,I as lFe,b as cFe,e as EP,f as wde,g as s4}from"./i18n-e-V71OMz.js";import{_ as Q,c as qi,a as Ka,g as $y}from"./vite-D9Bl2idj.js";function uFe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const dFe=["grey","teal","brown","maroon","red","orange","gold","yellow","green","blue","purple"],Cde=e=>{if(!e)return null;try{const n=JSON.parse(e)?.name;if(n&&dFe.includes(n))return n}catch{}return null};function fFe(){const e=Fn("colorSchemeTheme"),t=Fn("colorScheme"),n=Cde(e);n&&(document.documentElement.dataset.theme=n),t&&(document.documentElement.dataset.colorScheme=t)}fFe();var mFe={};const fq="/rest/event/analytics",dE="pplx.visitor-id",MP="pplx.session-id",w1="pplx.trackingAllowed",pFe="http://default-analytics-service:8000",hFe=()=>mFe.ANALYTICS_SERVICE_URL||pFe,gFe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Sde(e){return typeof e=="string"&&gFe.test(e)}const Bs=[];for(let e=0;e<256;++e)Bs.push((e+256).toString(16).slice(1));function yFe(e,t=0){return(Bs[e[t+0]]+Bs[e[t+1]]+Bs[e[t+2]]+Bs[e[t+3]]+"-"+Bs[e[t+4]]+Bs[e[t+5]]+"-"+Bs[e[t+6]]+Bs[e[t+7]]+"-"+Bs[e[t+8]]+Bs[e[t+9]]+"-"+Bs[e[t+10]]+Bs[e[t+11]]+Bs[e[t+12]]+Bs[e[t+13]]+Bs[e[t+14]]+Bs[e[t+15]]).toLowerCase()}let a4;const xFe=new Uint8Array(16);function vFe(){if(!a4){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a4=crypto.getRandomValues.bind(crypto)}return a4(xFe)}const bFe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mq={randomUUID:bFe};function Ir(e,t,n){if(mq.randomUUID&&!e)return mq.randomUUID();e=e||{};const r=e.random??e.rng?.()??vFe();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,yFe(r)}const _Fe=365;function wFe(){try{Fn(dE)||rn(dE,Ir(),{expires:_Fe})}catch{}try{Fn(MP)||rn(MP,Ir())}catch{}}wFe();const CFe=["Europe/Vienna","Europe/Brussels","Europe/Sofia","Europe/Zagreb","Asia/Famagusta","Asia/Nicosia","Europe/Prague","Europe/Copenhagen","Europe/Tallinn","Europe/Helsinki","Europe/Paris","Europe/Berlin","Europe/Busingen","Europe/Athens","Europe/Budapest","Europe/Dublin","Europe/Rome","Europe/Riga","Europe/Vilnius","Europe/Luxembourg","Europe/Malta","Europe/Amsterdam","Europe/Warsaw","Atlantic/Azores","Atlantic/Madeira","Europe/Lisbon","Europe/Bucharest","Europe/Bratislava","Europe/Ljubljana","Africa/Ceuta","Atlantic/Canary","Europe/Madrid","Europe/Stockholm"];function pq(){try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;return CFe.includes(e)||e.includes("Europe")}catch(e){return ne.warn("Error detecting user timezone:",e),!0}}function Ede(){const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[s,a]=f.useState(!1);f.useEffect(()=>{const l=c=>{c?.detail?.consent==="ALLOW"?t(!0):t(!1)};return window.addEventListener("consentChange",l),()=>{window.removeEventListener("consentChange",l)}},[]),f.useEffect(()=>{if(!pq()){t(!0),r(!0);return}Fn(w1)==="true"&&t(!0),r(!0)},[]),f.useEffect(()=>{!Fn(w1)&&pq()&&a(!0)},[]);const i=()=>{a(!1)};return f.useMemo(()=>({hasConsent:e,checkedConsent:n,showCookieConsentPopup:s,closeCookieConsentPopup:i}),[n,e,s])}var i4={},o4={exports:{}},hq;function Gk(){return hq||(hq=1,function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(o4)),o4.exports}var l4={exports:{}},gq;function l_(){return gq||(gq=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(l4)),l4.exports}var c4={exports:{}},yq;function SFe(){return yq||(yq=1,function(e){var t=l_().default;function n(){e.exports=n=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var r,s={},a=Object.prototype,i=a.hasOwnProperty,l=Object.defineProperty||function(B,D,W){B[D]=W.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function p(B,D,W){return Object.defineProperty(B,D,{value:W,enumerable:!0,configurable:!0,writable:!0}),B[D]}try{p({},"")}catch{p=function(W,z,$){return W[z]=$}}function h(B,D,W,z){var $=D&&D.prototype instanceof w?D:w,X=Object.create($.prototype),q=new I(z||[]);return l(X,"_invoke",{value:O(B,W,q)}),X}function g(B,D,W){try{return{type:"normal",arg:B.call(D,W)}}catch(z){return{type:"throw",arg:z}}}s.wrap=h;var y="suspendedStart",x="suspendedYield",v="executing",b="completed",_={};function w(){}function C(){}function S(){}var E={};p(E,u,function(){return this});var M=Object.getPrototypeOf,k=M&&M(M(U([])));k&&k!==a&&i.call(k,u)&&(E=k);var N=S.prototype=w.prototype=Object.create(E);function P(B){["next","throw","return"].forEach(function(D){p(B,D,function(W){return this._invoke(D,W)})})}function L(B,D){function W($,X,q,Y){var G=g(B[$],B,X);if(G.type!=="throw"){var J=G.arg,K=J.value;return K&&t(K)=="object"&&i.call(K,"__await")?D.resolve(K.__await).then(function(te){W("next",te,q,Y)},function(te){W("throw",te,q,Y)}):D.resolve(K).then(function(te){J.value=te,q(J)},function(te){return W("throw",te,q,Y)})}Y(G.arg)}var z;l(this,"_invoke",{value:function(X,q){function Y(){return new D(function(G,J){W(X,q,G,J)})}return z=z?z.then(Y,Y):Y()}})}function O(B,D,W){var z=y;return function($,X){if(z===v)throw Error("Generator is already running");if(z===b){if($==="throw")throw X;return{value:r,done:!0}}for(W.method=$,W.arg=X;;){var q=W.delegate;if(q){var Y=A(q,W);if(Y){if(Y===_)continue;return Y}}if(W.method==="next")W.sent=W._sent=W.arg;else if(W.method==="throw"){if(z===y)throw z=b,W.arg;W.dispatchException(W.arg)}else W.method==="return"&&W.abrupt("return",W.arg);z=v;var G=g(B,D,W);if(G.type==="normal"){if(z=W.done?b:x,G.arg===_)continue;return{value:G.arg,done:W.done}}G.type==="throw"&&(z=b,W.method="throw",W.arg=G.arg)}}}function A(B,D){var W=D.method,z=B.iterator[W];if(z===r)return D.delegate=null,W==="throw"&&B.iterator.return&&(D.method="return",D.arg=r,A(B,D),D.method==="throw")||W!=="return"&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+W+"' method")),_;var $=g(z,B.iterator,D.arg);if($.type==="throw")return D.method="throw",D.arg=$.arg,D.delegate=null,_;var X=$.arg;return X?X.done?(D[B.resultName]=X.value,D.next=B.nextLoc,D.method!=="return"&&(D.method="next",D.arg=r),D.delegate=null,_):X:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,_)}function j(B){var D={tryLoc:B[0]};1 in B&&(D.catchLoc=B[1]),2 in B&&(D.finallyLoc=B[2],D.afterLoc=B[3]),this.tryEntries.push(D)}function T(B){var D=B.completion||{};D.type="normal",delete D.arg,B.completion=D}function I(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(j,this),this.reset(!0)}function U(B){if(B||B===""){var D=B[u];if(D)return D.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var W=-1,z=function $(){for(;++W<B.length;)if(i.call(B,W))return $.value=B[W],$.done=!1,$;return $.value=r,$.done=!0,$};return z.next=z}}throw new TypeError(t(B)+" is not iterable")}return C.prototype=S,l(N,"constructor",{value:S,configurable:!0}),l(S,"constructor",{value:C,configurable:!0}),C.displayName=p(S,m,"GeneratorFunction"),s.isGeneratorFunction=function(B){var D=typeof B=="function"&&B.constructor;return!!D&&(D===C||(D.displayName||D.name)==="GeneratorFunction")},s.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,S):(B.__proto__=S,p(B,m,"GeneratorFunction")),B.prototype=Object.create(N),B},s.awrap=function(B){return{__await:B}},P(L.prototype),p(L.prototype,d,function(){return this}),s.AsyncIterator=L,s.async=function(B,D,W,z,$){$===void 0&&($=Promise);var X=new L(h(B,D,W,z),$);return s.isGeneratorFunction(D)?X:X.next().then(function(q){return q.done?q.value:X.next()})},P(N),p(N,m,"Generator"),p(N,u,function(){return this}),p(N,"toString",function(){return"[object Generator]"}),s.keys=function(B){var D=Object(B),W=[];for(var z in D)W.push(z);return W.reverse(),function $(){for(;W.length;){var X=W.pop();if(X in D)return $.value=X,$.done=!1,$}return $.done=!0,$}},s.values=U,I.prototype={constructor:I,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!D)for(var W in this)W.charAt(0)==="t"&&i.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=r)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var W=this;function z(J,K){return q.type="throw",q.arg=D,W.next=J,K&&(W.method="next",W.arg=r),!!K}for(var $=this.tryEntries.length-1;$>=0;--$){var X=this.tryEntries[$],q=X.completion;if(X.tryLoc==="root")return z("end");if(X.tryLoc<=this.prev){var Y=i.call(X,"catchLoc"),G=i.call(X,"finallyLoc");if(Y&&G){if(this.prev<X.catchLoc)return z(X.catchLoc,!0);if(this.prev<X.finallyLoc)return z(X.finallyLoc)}else if(Y){if(this.prev<X.catchLoc)return z(X.catchLoc,!0)}else{if(!G)throw Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return z(X.finallyLoc)}}}},abrupt:function(D,W){for(var z=this.tryEntries.length-1;z>=0;--z){var $=this.tryEntries[z];if($.tryLoc<=this.prev&&i.call($,"finallyLoc")&&this.prev<$.finallyLoc){var X=$;break}}X&&(D==="break"||D==="continue")&&X.tryLoc<=W&&W<=X.finallyLoc&&(X=null);var q=X?X.completion:{};return q.type=D,q.arg=W,X?(this.method="next",this.next=X.finallyLoc,_):this.complete(q)},complete:function(D,W){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&W&&(this.next=W),_},finish:function(D){for(var W=this.tryEntries.length-1;W>=0;--W){var z=this.tryEntries[W];if(z.finallyLoc===D)return this.complete(z.completion,z.afterLoc),T(z),_}},catch:function(D){for(var W=this.tryEntries.length-1;W>=0;--W){var z=this.tryEntries[W];if(z.tryLoc===D){var $=z.completion;if($.type==="throw"){var X=$.arg;T(z)}return X}}throw Error("illegal catch attempt")},delegateYield:function(D,W,z){return this.delegate={iterator:U(D),resultName:W,nextLoc:z},this.method==="next"&&(this.arg=r),_}},s}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(c4)),c4.exports}var u4,xq;function qk(){if(xq)return u4;xq=1;var e=SFe()();u4=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return u4}var d4={exports:{}},f4={exports:{}},m4={exports:{}},vq;function EFe(){return vq||(vq=1,function(e){var t=l_().default;function n(r,s){if(t(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var i=a.call(r,s||"default");if(t(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(m4)),m4.exports}var bq;function Mde(){return bq||(bq=1,function(e){var t=l_().default,n=EFe();function r(s){var a=n(s,"string");return t(a)=="symbol"?a:a+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(f4)),f4.exports}var _q;function Kk(){return _q||(_q=1,function(e){var t=Mde();function n(r,s,a){return(s=t(s))in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(d4)),d4.exports}var p4={exports:{}},wq;function Yk(){return wq||(wq=1,function(e){function t(r,s,a,i,l,c,u){try{var d=r[c](u),m=d.value}catch(p){return void a(p)}d.done?s(m):Promise.resolve(m).then(i,l)}function n(r){return function(){var s=this,a=arguments;return new Promise(function(i,l){var c=r.apply(s,a);function u(m){t(c,i,l,u,d,"next",m)}function d(m){t(c,i,l,u,d,"throw",m)}u(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(p4)),p4.exports}var h4={exports:{}},g4={exports:{}},Cq;function MFe(){return Cq||(Cq=1,function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(g4)),g4.exports}var y4={exports:{}},Sq;function kFe(){return Sq||(Sq=1,function(e){function t(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,i,l,c,u=[],d=!0,m=!1;try{if(l=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=l.call(s)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(p){m=!0,i=p}finally{try{if(!d&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(m)throw i}}return u}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(y4)),y4.exports}var x4={exports:{}},v4={exports:{}},Eq;function TFe(){return Eq||(Eq=1,function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var s=0,a=Array(r);s<r;s++)a[s]=n[s];return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(v4)),v4.exports}var Mq;function NFe(){return Mq||(Mq=1,function(e){var t=TFe();function n(r,s){if(r){if(typeof r=="string")return t(r,s);var a={}.toString.call(r).slice(8,-1);return a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set"?Array.from(r):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(r,s):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(x4)),x4.exports}var b4={exports:{}},kq;function jFe(){return kq||(kq=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(b4)),b4.exports}var Tq;function AFe(){return Tq||(Tq=1,function(e){var t=MFe(),n=kFe(),r=NFe(),s=jFe();function a(i,l){return t(i)||n(i,l)||r(i,l)||s()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(h4)),h4.exports}var If={},sr={},_4={exports:{}},Nq;function IFe(){return Nq||(Nq=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_4)),_4.exports}var w4={exports:{}},jq;function RFe(){return jq||(jq=1,function(e){var t=Mde();function n(s,a){for(var i=0;i<a.length;i++){var l=a[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(s,t(l.key),l)}}function r(s,a,i){return a&&n(s.prototype,a),i&&n(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(w4)),w4.exports}var C4={exports:{}},S4={exports:{}},Aq;function PFe(){return Aq||(Aq=1,function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(S4)),S4.exports}var Iq;function OFe(){return Iq||(Iq=1,function(e){var t=l_().default,n=PFe();function r(s,a){if(a&&(t(a)=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(s)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(C4)),C4.exports}var E4={exports:{}},Rq;function kde(){return Rq||(Rq=1,function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(E4)),E4.exports}var M4={exports:{}},k4={exports:{}},Pq;function FD(){return Pq||(Pq=1,function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(k4)),k4.exports}var Oq;function LFe(){return Oq||(Oq=1,function(e){var t=FD();function n(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&t(r,s)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(M4)),M4.exports}var T4={exports:{}},N4={exports:{}},Lq;function DFe(){return Lq||(Lq=1,function(e){function t(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(N4)),N4.exports}var j4={exports:{}},A4={exports:{}},Dq;function FFe(){return Dq||(Dq=1,function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(A4)),A4.exports}var Fq;function UFe(){return Fq||(Fq=1,function(e){var t=FFe(),n=FD();function r(s,a,i){if(t())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,a);var c=new(s.bind.apply(s,l));return i&&n(c,i.prototype),c}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(j4)),j4.exports}var Uq;function BFe(){return Uq||(Uq=1,function(e){var t=kde(),n=FD(),r=DFe(),s=UFe();function a(i){var l=typeof Map=="function"?new Map:void 0;return e.exports=a=function(u){if(u===null||!r(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(u))return l.get(u);l.set(u,d)}function d(){return s(u,arguments,t(this).constructor)}return d.prototype=Object.create(u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),n(d,u)},e.exports.__esModule=!0,e.exports.default=e.exports,a(i)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(T4)),T4.exports}var Bq;function VFe(){if(Bq)return sr;Bq=1;var e=Gk();Object.defineProperty(sr,"__esModule",{value:!0}),sr.UnsupportedStrategy=sr.UnknownError=sr.OAuthCallbackError=sr.MissingSecret=sr.MissingAuthorize=sr.MissingAdapterMethods=sr.MissingAdapter=sr.MissingAPIRoute=sr.InvalidCallbackUrl=sr.AccountNotLinkedError=void 0,sr.adapterErrorHandler=x,sr.capitalize=g,sr.eventsErrorHandler=y,sr.upperSnake=h;var t=e(qk()),n=e(Yk()),r=e(Kk()),s=e(IFe()),a=e(RFe()),i=e(OFe()),l=e(kde()),c=e(LFe()),u=e(BFe());function d(v,b,_){return b=(0,l.default)(b),(0,i.default)(v,m()?Reflect.construct(b,_||[],(0,l.default)(v).constructor):b.apply(v,_))}function m(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m=function(){return!!v})()}var p=sr.UnknownError=function(v){function b(_){var w,C;return(0,s.default)(this,b),C=d(this,b,[(w=_?.message)!==null&&w!==void 0?w:_]),C.name="UnknownError",C.code=_.code,_ instanceof Error&&(C.stack=_.stack),C}return(0,c.default)(b,v),(0,a.default)(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,u.default)(Error));sr.OAuthCallbackError=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","OAuthCallbackError"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),sr.AccountNotLinkedError=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","AccountNotLinkedError"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),sr.MissingAPIRoute=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAPIRouteError"),(0,r.default)(_,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),sr.MissingSecret=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingSecretError"),(0,r.default)(_,"code","NO_SECRET"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),sr.MissingAuthorize=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAuthorizeError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),sr.MissingAdapter=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAdapterError"),(0,r.default)(_,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),sr.MissingAdapterMethods=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAdapterMethodsError"),(0,r.default)(_,"code","MISSING_ADAPTER_METHODS_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),sr.UnsupportedStrategy=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","UnsupportedStrategyError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),sr.InvalidCallbackUrl=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","InvalidCallbackUrl"),(0,r.default)(_,"code","INVALID_CALLBACK_URL_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p);function h(v){return v.replace(/([A-Z])/g,"_$1").toUpperCase()}function g(v){return"".concat(v[0].toUpperCase()).concat(v.slice(1))}function y(v,b){return Object.keys(v).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function C(){var S,E=arguments;return t.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,S=v[w],k.next=4,S.apply(void 0,E);case 4:return k.abrupt("return",k.sent);case 7:k.prev=7,k.t0=k.catch(0),b.error("".concat(h(w),"_EVENT_ERROR"),k.t0);case 10:case"end":return k.stop()}},C,null,[[0,7]])})),_},{})}function x(v,b){if(v)return Object.keys(v).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function C(){var S,E,M,k,N,P=arguments;return t.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:for(O.prev=0,S=P.length,E=new Array(S),M=0;M<S;M++)E[M]=P[M];return b.debug("adapter_".concat(w),{args:E}),k=v[w],O.next=6,k.apply(void 0,E);case 6:return O.abrupt("return",O.sent);case 9:throw O.prev=9,O.t0=O.catch(0),b.error("adapter_error_".concat(w),O.t0),N=new p(O.t0),N.name="".concat(g(w),"Error"),N;case 15:case"end":return O.stop()}},C,null,[[0,9]])})),_},{})}return sr}var Vq;function $Fe(){if(Vq)return If;Vq=1;var e=Gk();Object.defineProperty(If,"__esModule",{value:!0}),If.default=void 0,If.proxyLogger=m,If.setLogger=d;var t=e(qk()),n=e(Kk()),r=e(Yk()),s=VFe();function a(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);h&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),g.push.apply(g,y)}return g}function i(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?a(Object(g),!0).forEach(function(y){(0,n.default)(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):a(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}function l(p){if(p instanceof Error&&!(p instanceof s.UnknownError))return{message:p.message,stack:p.stack,name:p.name};if(c(p)){var h;p.error=l(p.error),p.message=(h=p.message)!==null&&h!==void 0?h:p.error.message}return p}function c(p){return!!(p!=null&&p.error)}var u={error:function(h,g){g=l(g),console.error("[next-auth][error][".concat(h,"]"),`
https://next-auth.js.org/errors#`.concat(h.toLowerCase()),g.message,g)},warn:function(h){console.warn("[next-auth][warn][".concat(h,"]"),`
https://next-auth.js.org/warnings#`.concat(h.toLowerCase()))},debug:function(h,g){console.log("[next-auth][debug][".concat(h,"]"),g)}};function d(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;h||(u.debug=function(){}),p.error&&(u.error=p.error),p.warn&&(u.warn=p.warn),p.debug&&(u.debug=p.debug)}If.default=u;function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u,h=arguments.length>1?arguments[1]:void 0;try{if(typeof window>"u")return p;var g={},y=function(b){g[b]=function(){var _=(0,r.default)(t.default.mark(function w(C,S){var E,M;return t.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(u[b](C,S),b==="error"&&(S=l(S)),S.client=!0,E="".concat(h,"/_log"),M=new URLSearchParams(i({level:b,code:C},S)),!navigator.sendBeacon){N.next=8;break}return N.abrupt("return",navigator.sendBeacon(E,M));case 8:return N.next=10,fetch(E,{method:"POST",body:M,keepalive:!0});case 10:return N.abrupt("return",N.sent);case 11:case"end":return N.stop()}},w)}));return function(w,C){return _.apply(this,arguments)}}()};for(var x in p)y(x);return g}catch{return u}}return If}var fC={},$q;function WFe(){if($q)return fC;$q=1,Object.defineProperty(fC,"__esModule",{value:!0}),fC.default=e;function e(t){var n;const r=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);const s=new URL((n=t)!==null&&n!==void 0?n:r),a=(s.pathname==="/"?r.pathname:s.pathname).replace(/\/$/,""),i=`${s.origin}${a}`;return{origin:s.origin,host:s.host,path:a,base:i,toString:()=>i}}return fC}var Rf={},Wq;function HFe(){if(Wq)return Rf;Wq=1;var e=Gk();Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.BroadcastChannel=m,Rf.apiBaseUrl=u,Rf.fetchData=l,Rf.now=d;var t=e(qk()),n=e(Kk()),r=e(Yk());function s(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);h&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),g.push.apply(g,y)}return g}function a(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?s(Object(g),!0).forEach(function(y){(0,n.default)(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):s(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}var i=3;function l(p,h,g){return c.apply(this,arguments)}function c(){return c=(0,r.default)(t.default.mark(function p(h,g,y){var x,v,b,_,w,C,S,E,M,k,N=arguments;return t.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:x=N.length>3&&N[3]!==void 0?N[3]:{},v=x.ctx,b=x.req,_=b===void 0?v?.req:b,w="".concat(u(g),"/").concat(h),C=0;case 3:if(!(C<i)){L.next=28;break}return L.prev=4,E={headers:a({"Content-Type":"application/json"},_!=null&&(S=_.headers)!==null&&S!==void 0&&S.cookie?{cookie:_.headers.cookie}:{})},_!=null&&_.body&&(E.body=JSON.stringify(_.body),E.method="POST"),L.next=9,fetch(w,E);case 9:return M=L.sent,L.next=12,M.json();case 12:if(k=L.sent,M.ok){L.next=15;break}throw k;case 15:return L.abrupt("return",Object.keys(k).length>0?k:null);case 18:if(L.prev=18,L.t0=L.catch(4),C++,C!==i){L.next=24;break}throw y.error("CLIENT_FETCH_ERROR",{error:L.t0,url:w}),L.t0;case 24:return L.next=26,new Promise(function(O){return setTimeout(O,Math.pow(2,C)*100)});case 26:L.next=3;break;case 28:return L.abrupt("return",null);case 29:case"end":return L.stop()}},p,null,[[4,18]])})),c.apply(this,arguments)}function u(p){return typeof window>"u"?"".concat(p.baseUrlServer).concat(p.basePathServer):p.basePath}function d(){return Math.floor(Date.now()/1e3)}function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"nextauth.message";return{receive:function(g){var y=function(v){var b;if(v.key===p){var _=JSON.parse((b=v.newValue)!==null&&b!==void 0?b:"{}");_?.event!=="session"||!(_!=null&&_.data)||g(_)}};return window.addEventListener("storage",y),function(){return window.removeEventListener("storage",y)}},post:function(g){if(!(typeof window>"u"))try{localStorage.setItem(p,JSON.stringify(a(a({},g),{},{timestamp:d()})))}catch{}}}}return Rf}var I4={},Hq;function zFe(){return Hq||(Hq=1,Object.defineProperty(I4,"__esModule",{value:!0})),I4}var zq;function GFe(){return zq||(zq=1,function(e){var t={},n=Gk(),r=l_();Object.defineProperty(e,"__esModule",{value:!0});var s={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};e.SessionContext=void 0,e.SessionProvider=X,e.getCsrfToken=T,e.getProviders=U,e.getSession=A,e.signIn=D,e.signOut=z,e.useSession=O;var a=n(qk()),i=n(Kk()),l=n(Yk()),c=n(AFe()),u=C(Fy()),d=C($Fe()),m=n(WFe()),p=HFe(),h=aLe(),g=zFe();Object.keys(g).forEach(function(q){q==="default"||q==="__esModule"||Object.prototype.hasOwnProperty.call(s,q)||q in e&&e[q]===g[q]||Object.defineProperty(e,q,{enumerable:!0,get:function(){return g[q]}})});var y,x,v,b,_;function w(q){if(typeof WeakMap!="function")return null;var Y=new WeakMap,G=new WeakMap;return(w=function(K){return K?G:Y})(q)}function C(q,Y){if(q&&q.__esModule)return q;if(q===null||r(q)!="object"&&typeof q!="function")return{default:q};var G=w(Y);if(G&&G.has(q))return G.get(q);var J={__proto__:null},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in q)if(te!=="default"&&{}.hasOwnProperty.call(q,te)){var re=K?Object.getOwnPropertyDescriptor(q,te):null;re&&(re.get||re.set)?Object.defineProperty(J,te,re):J[te]=q[te]}return J.default=q,G&&G.set(q,J),J}function S(q,Y){var G=Object.keys(q);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(q);Y&&(J=J.filter(function(K){return Object.getOwnPropertyDescriptor(q,K).enumerable})),G.push.apply(G,J)}return G}function E(q){for(var Y=1;Y<arguments.length;Y++){var G=arguments[Y]!=null?arguments[Y]:{};Y%2?S(Object(G),!0).forEach(function(J){(0,i.default)(q,J,G[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(G)):S(Object(G)).forEach(function(J){Object.defineProperty(q,J,Object.getOwnPropertyDescriptor(G,J))})}return q}var M={baseUrl:(0,m.default)((y=t.NEXTAUTH_URL)!==null&&y!==void 0?y:t.VERCEL_URL).origin,basePath:(0,m.default)(t.NEXTAUTH_URL).path,baseUrlServer:(0,m.default)((x=(v=t.NEXTAUTH_URL_INTERNAL)!==null&&v!==void 0?v:t.NEXTAUTH_URL)!==null&&x!==void 0?x:t.VERCEL_URL).origin,basePathServer:(0,m.default)((b=t.NEXTAUTH_URL_INTERNAL)!==null&&b!==void 0?b:t.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},k=(0,p.BroadcastChannel)(),N=(0,d.proxyLogger)(d.default,M.basePath);function P(){var q=u.useState(typeof navigator<"u"?navigator.onLine:!1),Y=(0,c.default)(q,2),G=Y[0],J=Y[1],K=function(){return J(!0)},te=function(){return J(!1)};return u.useEffect(function(){return window.addEventListener("online",K),window.addEventListener("offline",te),function(){window.removeEventListener("online",K),window.removeEventListener("offline",te)}},[]),G}var L=e.SessionContext=(_=u.createContext)===null||_===void 0?void 0:_.call(u,void 0);function O(q){if(!L)throw new Error("React Context is unavailable in Server Components");var Y=u.useContext(L),G=q??{},J=G.required,K=G.onUnauthenticated,te=J&&Y.status==="unauthenticated";return u.useEffect(function(){if(te){var re="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));K?K():window.location.href=re}},[te,K]),te?{data:Y.data,update:Y.update,status:"loading"}:Y}function A(q){return j.apply(this,arguments)}function j(){return j=(0,l.default)(a.default.mark(function q(Y){var G,J;return a.default.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,p.fetchData)("session",M,N,Y);case 2:return J=te.sent,(!((G=Y?.broadcast)!==null&&G!==void 0)||G)&&k.post({event:"session",data:{trigger:"getSession"}}),te.abrupt("return",J);case 5:case"end":return te.stop()}},q)})),j.apply(this,arguments)}function T(q){return I.apply(this,arguments)}function I(){return I=(0,l.default)(a.default.mark(function q(Y){var G;return a.default.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,p.fetchData)("csrf",M,N,Y);case 2:return G=K.sent,K.abrupt("return",G?.csrfToken);case 4:case"end":return K.stop()}},q)})),I.apply(this,arguments)}function U(){return B.apply(this,arguments)}function B(){return B=(0,l.default)(a.default.mark(function q(){return a.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,p.fetchData)("providers",M,N);case 2:return G.abrupt("return",G.sent);case 3:case"end":return G.stop()}},q)})),B.apply(this,arguments)}function D(q,Y,G){return W.apply(this,arguments)}function W(){return W=(0,l.default)(a.default.mark(function q(Y,G,J){var K,te,re,se,me,oe,ge,xe,ye,_e,be,Ne,Ee,Re,Ae,st,it;return a.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return K=G??{},te=K.callbackUrl,re=te===void 0?window.location.href:te,se=K.redirect,me=se===void 0?!0:se,oe=(0,p.apiBaseUrl)(M),ue.next=4,U();case 4:if(ge=ue.sent,ge){ue.next=8;break}return window.location.href="".concat(oe,"/error"),ue.abrupt("return");case 8:if(!(!Y||!(Y in ge))){ue.next=11;break}return window.location.href="".concat(oe,"/signin?").concat(new URLSearchParams({callbackUrl:re})),ue.abrupt("return");case 11:return xe=ge[Y].type==="credentials",ye=ge[Y].type==="email",_e=xe||ye,be="".concat(oe,"/").concat(xe?"callback":"signin","/").concat(Y),Ne="".concat(be).concat(J?"?".concat(new URLSearchParams(J)):""),ue.t0=fetch,ue.t1=Ne,ue.t2={"Content-Type":"application/x-www-form-urlencoded"},ue.t3=URLSearchParams,ue.t4=E,ue.t5=E({},G),ue.t6={},ue.next=25,T();case 25:return ue.t7=ue.sent,ue.t8=re,ue.t9={csrfToken:ue.t7,callbackUrl:ue.t8,json:!0},ue.t10=(0,ue.t4)(ue.t5,ue.t6,ue.t9),ue.t11=new ue.t3(ue.t10),ue.t12={method:"post",headers:ue.t2,body:ue.t11},ue.next=33,(0,ue.t0)(ue.t1,ue.t12);case 33:return Ee=ue.sent,ue.next=36,Ee.json();case 36:if(Re=ue.sent,!(me||!_e)){ue.next=42;break}return st=(Ae=Re.url)!==null&&Ae!==void 0?Ae:re,window.location.href=st,st.includes("#")&&window.location.reload(),ue.abrupt("return");case 42:if(it=new URL(Re.url).searchParams.get("error"),!Ee.ok){ue.next=46;break}return ue.next=46,k.post({event:"session",data:{trigger:"signin"}}),M._getSession({event:"storage"});case 46:return ue.abrupt("return",{error:it,status:Ee.status,ok:Ee.ok,url:it?null:Re.url});case 47:case"end":return ue.stop()}},q)})),W.apply(this,arguments)}function z(q){return $.apply(this,arguments)}function $(){return $=(0,l.default)(a.default.mark(function q(Y){var G,J,K,te,re,se,me,oe,ge,xe;return a.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return J=Y??{},K=J.callbackUrl,te=K===void 0?window.location.href:K,re=(0,p.apiBaseUrl)(M),_e.t0={"Content-Type":"application/x-www-form-urlencoded"},_e.t1=URLSearchParams,_e.next=6,T();case 6:return _e.t2=_e.sent,_e.t3=te,_e.t4={csrfToken:_e.t2,callbackUrl:_e.t3,json:!0},_e.t5=new _e.t1(_e.t4),se={method:"post",headers:_e.t0,body:_e.t5},_e.next=13,fetch("".concat(re,"/signout"),se);case 13:return me=_e.sent,_e.next=16,me.json();case 16:if(oe=_e.sent,k.post({event:"session",data:{trigger:"signout"}}),!(!((G=Y?.redirect)!==null&&G!==void 0)||G)){_e.next=23;break}return xe=(ge=oe.url)!==null&&ge!==void 0?ge:te,window.location.href=xe,xe.includes("#")&&window.location.reload(),_e.abrupt("return");case 23:return _e.next=25,M._getSession({event:"storage"});case 25:return _e.abrupt("return",oe);case 26:case"end":return _e.stop()}},q)})),$.apply(this,arguments)}function X(q){if(!L)throw new Error("React Context is unavailable in Server Components");var Y=q.children,G=q.basePath,J=q.refetchInterval,K=q.refetchWhenOffline;G&&(M.basePath=G);var te=q.session!==void 0;M._lastSync=te?(0,p.now)():0;var re=u.useState(function(){return te&&(M._session=q.session),q.session}),se=(0,c.default)(re,2),me=se[0],oe=se[1],ge=u.useState(!te),xe=(0,c.default)(ge,2),ye=xe[0],_e=xe[1];u.useEffect(function(){return M._getSession=(0,l.default)(a.default.mark(function Re(){var Ae,st,it,Se=arguments;return a.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(Ae=Se.length>0&&Se[0]!==void 0?Se[0]:{},st=Ae.event,ke.prev=1,it=st==="storage",!(it||M._session===void 0)){ke.next=10;break}return M._lastSync=(0,p.now)(),ke.next=7,A({broadcast:!it});case 7:return M._session=ke.sent,oe(M._session),ke.abrupt("return");case 10:if(!(!st||M._session===null||(0,p.now)()<M._lastSync)){ke.next=12;break}return ke.abrupt("return");case 12:return M._lastSync=(0,p.now)(),ke.next=15,A();case 15:M._session=ke.sent,oe(M._session),ke.next=22;break;case 19:ke.prev=19,ke.t0=ke.catch(1),N.error("CLIENT_SESSION_ERROR",ke.t0);case 22:return ke.prev=22,_e(!1),ke.finish(22);case 25:case"end":return ke.stop()}},Re,null,[[1,19,22,25]])})),M._getSession(),function(){M._lastSync=0,M._session=void 0,M._getSession=function(){}}},[]),u.useEffect(function(){var Re=k.receive(function(){return M._getSession({event:"storage"})});return function(){return Re()}},[]),u.useEffect(function(){var Re=q.refetchOnWindowFocus,Ae=Re===void 0?!0:Re,st=function(){Ae&&document.visibilityState==="visible"&&M._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",st,!1),function(){return document.removeEventListener("visibilitychange",st,!1)}},[q.refetchOnWindowFocus]);var be=P(),Ne=K!==!1||be;u.useEffect(function(){if(J&&Ne){var Re=setInterval(function(){M._session&&M._getSession({event:"poll"})},J*1e3);return function(){return clearInterval(Re)}}},[J,Ne]);var Ee=u.useMemo(function(){return{data:me,status:ye?"loading":me?"authenticated":"unauthenticated",update:function(Ae){return(0,l.default)(a.default.mark(function st(){var it;return a.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!(ye||!me)){ue.next=2;break}return ue.abrupt("return");case 2:return _e(!0),ue.t0=p.fetchData,ue.t1=M,ue.t2=N,ue.next=8,T();case 8:return ue.t3=ue.sent,ue.t4=Ae,ue.t5={csrfToken:ue.t3,data:ue.t4},ue.t6={body:ue.t5},ue.t7={req:ue.t6},ue.next=15,(0,ue.t0)("session",ue.t1,ue.t2,ue.t7);case 15:return it=ue.sent,_e(!1),it&&(oe(it),k.post({event:"session",data:{trigger:"getSession"}})),ue.abrupt("return",it);case 19:case"end":return ue.stop()}},st)}))()}}},[me,ye]);return(0,h.jsx)(L.Provider,{value:Ee,children:Y})}}(i4)),i4}var c_=GFe();const UD="pplx-next-auth-session";let mC=null;const qFe=()=>{try{const e=Oe.getItem(UD);return e?JSON.parse(e):null}catch{return null}},kP=e=>{e&&Oe.setItem(UD,JSON.stringify(e))},KFe=()=>{Oe.removeItem(UD)},YFe=(e=!1)=>{mC??=c_.getSession().then(n=>(kP(n),n)).catch(n=>{throw kP(null),n}).finally(()=>{mC=null});const t=qFe();return t&&(e||new Date(t.expires)>new Date)?{cachedSession:t,sessionFetchPromise:mC}:{cachedSession:null,sessionFetchPromise:mC}},Nt=()=>{const{data:e,status:t,update:n}=c_.useSession(),[r,s]=f.useState(e),a=f.useCallback(async()=>{const i=await n();return s(l=>ys(i?.user,l?.user)?l:i),i},[n]);return f.useEffect(()=>{t!=="loading"&&(s(i=>ys(e?.user,i?.user)?i:e),e?kP(e):KFe())},[e,t]),f.useMemo(()=>({session:r,update:a,status:t}),[r,a,t])};function Tde(){const{session:e}=Nt(),t=["pplx-dev@example.com","pplx-dev-pro@example.com","pplx-dev-enterprise@example.com","fe-test-user@example.com"],n=e?.user?.email??"none";return n.endsWith("@perplexity.ai")||t.includes(n)}function lt(){const{session:e}=Nt(),t=e!==null&&typeof e<"u";return f.useEffect(()=>{t&&lue()},[t]),t}function QFe(){if(typeof window>"u")return!1;const e=window;return!!(e?.webkit?.messageHandlers?.pplx?.postMessage||e?.Android?.pplx?.postMessage)}function Qk({type:e,data:t}){if(typeof window>"u")return!1;const n=window,r={type:e,data:t};return n?.webkit?.messageHandlers?.pplx?.postMessage?(n.webkit.messageHandlers.pplx.postMessage(r),!0):n?.Android?.pplx?.postMessage?(n.Android.pplx.postMessage(r),!0):!1}function XFe({query:e}){return Qk({type:"pplx.ask",data:{query:e}})}function Nde(e,t){const n=e.split(".").map(Number),r=t.split(".").map(Number);for(let s=0;s<3;s++){const a=n[s],i=r[s];if(a===void 0||i===void 0)return 0;if(a>i)return 1;if(a<i)return-1}return 0}function ZFe(e,t){try{return!e||!t?!0:Nde(e,t)===-1}catch(n){return ne.error("Error comparing canonical page semver",{e:n}),!0}}function Hon(e,t,n){try{if(!e||!t)return!1;const r=n[t];return r?Nde(e,r)>=0:!0}catch(r){return ne.error("Error comparing canonical page semver",{e:r}),!1}}const jde=Yt("CanonicalPageContext",{inApp:!1,preferredColorScheme:null,deviceId:null,appVersion:null,isIOS:!1,isAndroid:!1,client:null}),JFe=R.memo(({children:e,inApp:t})=>{const n=Ut(),r=Ft(),s=n?.get("mobile.deviceId")||null,a=n?.get("mobile.appVersion")||null,i=n?.get("mobile.preferredColorScheme")||null,l=n?.get("mobile.client")||null,c=l==="ios",u=l==="android";return f.useEffect(()=>{if(!r?.startsWith("/app")||!n)return;const d=["mobile.","version"],m=new URL(window.location.href.replace("/app",""));m.searchParams.forEach((p,h)=>{d.includes(h)&&m.searchParams.delete(h)}),m.searchParams.set("referrer","canonical"),Qk({type:"pplx.url.share",data:{url:m.href}})},[r,n]),o.jsx(jde.Provider,{value:{inApp:t,preferredColorScheme:i,deviceId:s,appVersion:a,isIOS:c,isAndroid:u,client:l},children:e})});JFe.displayName="CanonicalPageProvider";function wl(){return f.useContext(jde)}const C1=f.createContext({});function u_(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const BD=typeof window<"u",Xk=BD?f.useLayoutEffect:f.useEffect,Zk=f.createContext(null);function VD(e,t){e.indexOf(t)===-1&&e.push(t)}function d_(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Su=(e,t,n)=>n>t?t:n<e?e:n;let $D=()=>{};const Eu={},Ade=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Ide(e){return typeof e=="object"&&e!==null}const Rde=e=>/^0[^.\s]+$/u.test(e);function WD(e){let t;return()=>(t===void 0&&(t=e()),t)}const ko=e=>e,eUe=(e,t)=>n=>t(e(n)),f_=(...e)=>e.reduce(eUe),Dg=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class HD{constructor(){this.subscriptions=[]}add(t){return VD(this.subscriptions,t),()=>d_(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sl=e=>e*1e3,ac=e=>e/1e3;function Pde(e,t){return t?e*(1e3/t):0}const tUe=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e},Ode=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,nUe=1e-7,rUe=12;function sUe(e,t,n,r,s){let a,i,l=0;do i=t+(n-t)/2,a=Ode(i,r,s)-e,a>0?n=i:t=i;while(Math.abs(a)>nUe&&++l<rUe);return i}function Ci(e,t,n,r){if(e===t&&n===r)return ko;const s=a=>sUe(a,0,1,e,n);return a=>a===0||a===1?a:Ode(s(a),t,r)}const Lde=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Dde=e=>t=>1-e(1-t),Fde=Ci(.33,1.53,.69,.99),zD=Dde(Fde),Ude=Lde(zD),GD=e=>(e*=2)<1?.5*zD(e):.5*(2-Math.pow(2,-10*(e-1))),qD=e=>1-Math.sin(Math.acos(e)),Bde=Dde(qD),Vde=Lde(qD),$de=Ci(.42,0,1,1),va=Ci(0,0,.58,1),fi=Ci(.42,0,.58,1),Wde=e=>Array.isArray(e)&&typeof e[0]!="number";function Hde(e,t){return Wde(e)?e[tUe(0,e.length,t)]:e}const zde=e=>Array.isArray(e)&&typeof e[0]=="number",aUe={linear:ko,easeIn:$de,easeInOut:fi,easeOut:va,circIn:qD,circInOut:Vde,circOut:Bde,backIn:zD,backInOut:Ude,backOut:Fde,anticipate:GD},iUe=e=>typeof e=="string",Gq=e=>{if(zde(e)){$D(e.length===4);const[t,n,r,s]=e;return Ci(t,n,r,s)}else if(iUe(e))return aUe[e];return e},pC=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oUe(e,t){let n=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,m=!1,p=!1)=>{const g=p&&s?n:r;return m&&i.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(l=d,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const lUe=40;function Gde(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=pC.reduce((_,w)=>(_[w]=oUe(a),_),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:m,preRender:p,render:h,postRender:g}=i,y=()=>{const _=Eu.useManualTiming?s.timestamp:performance.now();n=!1,Eu.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,lUe),1)),s.timestamp=_,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),m.process(s),p.process(s),h.process(s),g.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(y))},x=()=>{n=!0,r=!0,s.isProcessing||e(y)};return{schedule:pC.reduce((_,w)=>{const C=i[w];return _[w]=(S,E=!1,M=!1)=>(n||x(),C.schedule(S,E,M)),_},{}),cancel:_=>{for(let w=0;w<pC.length;w++)i[pC[w]].cancel(_)},state:s,steps:i}}const{schedule:cr,cancel:Mu,state:$s,steps:R4}=Gde(typeof requestAnimationFrame<"u"?requestAnimationFrame:ko,!0);let d2;function cUe(){d2=void 0}const mi={now:()=>(d2===void 0&&mi.set($s.isProcessing||Eu.useManualTiming?$s.timestamp:performance.now()),d2),set:e=>{d2=e,queueMicrotask(cUe)}},qde=e=>t=>typeof t=="string"&&t.startsWith(e),KD=qde("--"),uUe=qde("var(--"),YD=e=>uUe(e)?dUe.test(e.split("/*")[0].trim()):!1,dUe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wy={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},S1={...Wy,transform:e=>Su(0,1,e)},hC={...Wy,default:1},Ev=e=>Math.round(e*1e5)/1e5,QD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fUe(e){return e==null}const mUe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,XD=(e,t)=>n=>!!(typeof n=="string"&&mUe.test(n)&&n.startsWith(e)||t&&!fUe(n)&&Object.prototype.hasOwnProperty.call(n,t)),Kde=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,i,l]=r.match(QD);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},pUe=e=>Su(0,255,e),P4={...Wy,transform:e=>Math.round(pUe(e))},lm={test:XD("rgb","red"),parse:Kde("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+P4.transform(e)+", "+P4.transform(t)+", "+P4.transform(n)+", "+Ev(S1.transform(r))+")"};function hUe(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const TP={test:XD("#"),parse:hUe,transform:lm.transform},m_=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),cd=m_("deg"),ic=m_("%"),Vt=m_("px"),gUe=m_("vh"),yUe=m_("vw"),qq={...ic,parse:e=>ic.parse(e)/100,transform:e=>ic.transform(e*100)},Bh={test:XD("hsl","hue"),parse:Kde("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ic.transform(Ev(t))+", "+ic.transform(Ev(n))+", "+Ev(S1.transform(r))+")"},ns={test:e=>lm.test(e)||TP.test(e)||Bh.test(e),parse:e=>lm.test(e)?lm.parse(e):Bh.test(e)?Bh.parse(e):TP.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?lm.transform(e):Bh.transform(e),getAnimatableNone:e=>{const t=ns.parse(e);return t.alpha=0,ns.transform(t)}},xUe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vUe(e){return isNaN(e)&&typeof e=="string"&&(e.match(QD)?.length||0)+(e.match(xUe)?.length||0)>0}const Yde="number",Qde="color",bUe="var",_Ue="var(",Kq="${}",wUe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function E1(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=t.replace(wUe,c=>(ns.test(c)?(r.color.push(a),s.push(Qde),n.push(ns.parse(c))):c.startsWith(_Ue)?(r.var.push(a),s.push(bUe),n.push(c)):(r.number.push(a),s.push(Yde),n.push(parseFloat(c))),++a,Kq)).split(Kq);return{values:n,split:l,indexes:r,types:s}}function Xde(e){return E1(e).values}function Zde(e){const{split:t,types:n}=E1(e),r=t.length;return s=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],s[i]!==void 0){const l=n[i];l===Yde?a+=Ev(s[i]):l===Qde?a+=ns.transform(s[i]):a+=s[i]}return a}}const CUe=e=>typeof e=="number"?0:ns.test(e)?ns.getAnimatableNone(e):e;function SUe(e){const t=Xde(e);return Zde(e)(t.map(CUe))}const Wd={test:vUe,parse:Xde,createTransformer:Zde,getAnimatableNone:SUe};function O4(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function EUe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,i=0;if(!t)s=a=i=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=O4(c,l,e+1/3),a=O4(c,l,e),i=O4(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}function fE(e,t){return n=>n>0?t:e}const jr=(e,t,n)=>e+(t-e)*n,L4=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},MUe=[TP,lm,Bh],kUe=e=>MUe.find(t=>t.test(e));function Yq(e){const t=kUe(e);if(!t)return!1;let n=t.parse(e);return t===Bh&&(n=EUe(n)),n}const Qq=(e,t)=>{const n=Yq(e),r=Yq(t);if(!n||!r)return fE(e,t);const s={...n};return a=>(s.red=L4(n.red,r.red,a),s.green=L4(n.green,r.green,a),s.blue=L4(n.blue,r.blue,a),s.alpha=jr(n.alpha,r.alpha,a),lm.transform(s))},NP=new Set(["none","hidden"]);function TUe(e,t){return NP.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function NUe(e,t){return n=>jr(e,t,n)}function ZD(e){return typeof e=="number"?NUe:typeof e=="string"?YD(e)?fE:ns.test(e)?Qq:IUe:Array.isArray(e)?Jde:typeof e=="object"?ns.test(e)?Qq:jUe:fE}function Jde(e,t){const n=[...e],r=n.length,s=e.map((a,i)=>ZD(a)(a,t[i]));return a=>{for(let i=0;i<r;i++)n[i]=s[i](a);return n}}function jUe(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=ZD(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function AUe(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][r[a]],l=e.values[i]??0;n[s]=l,r[a]++}return n}const IUe=(e,t)=>{const n=Wd.createTransformer(t),r=E1(e),s=E1(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?NP.has(e)&&!s.values.length||NP.has(t)&&!r.values.length?TUe(e,t):f_(Jde(AUe(r,s),s.values),n):fE(e,t)};function efe(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?jr(e,t,n):ZD(e)(e,t)}const RUe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>cr.update(t,n),stop:()=>Mu(t),now:()=>$s.isProcessing?$s.timestamp:mi.now()}},tfe=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},mE=2e4;function JD(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<mE;)t+=n,r=e.next(t);return t>=mE?1/0:t}function nfe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(JD(r),mE);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:ac(s)}}const PUe=5;function rfe(e,t,n){const r=Math.max(t-PUe,0);return Pde(n-e(r),t-r)}const Fr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xq=.001;function OUe({duration:e=Fr.duration,bounce:t=Fr.bounce,velocity:n=Fr.velocity,mass:r=Fr.mass}){let s,a,i=1-t;i=Su(Fr.minDamping,Fr.maxDamping,i),e=Su(Fr.minDuration,Fr.maxDuration,ac(e)),i<1?(s=u=>{const d=u*i,m=d*e,p=d-n,h=jP(u,i),g=Math.exp(-m);return Xq-p/h*g},a=u=>{const m=u*i*e,p=m*n+n,h=Math.pow(i,2)*Math.pow(u,2)*e,g=Math.exp(-m),y=jP(Math.pow(u,2),i);return(-s(u)+Xq>0?-1:1)*((p-h)*g)/y}):(s=u=>{const d=Math.exp(-u*e),m=(u-n)*e+1;return-.001+d*m},a=u=>{const d=Math.exp(-u*e),m=(n-u)*(e*e);return d*m});const l=5/e,c=DUe(s,a,l);if(e=sl(e),isNaN(c))return{stiffness:Fr.stiffness,damping:Fr.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:e}}}const LUe=12;function DUe(e,t,n){let r=n;for(let s=1;s<LUe;s++)r=r-e(r)/t(r);return r}function jP(e,t){return e*Math.sqrt(1-t*t)}const FUe=["duration","bounce"],UUe=["stiffness","damping","mass"];function Zq(e,t){return t.some(n=>e[n]!==void 0)}function BUe(e){let t={velocity:Fr.velocity,stiffness:Fr.stiffness,damping:Fr.damping,mass:Fr.mass,isResolvedFromDuration:!1,...e};if(!Zq(e,UUe)&&Zq(e,FUe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Su(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Fr.mass,stiffness:s,damping:a}}else{const n=OUe(e);t={...t,...n,mass:Fr.mass},t.isResolvedFromDuration=!0}return t}function M1(e=Fr.visualDuration,t=Fr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:m,velocity:p,isResolvedFromDuration:h}=BUe({...n,velocity:-ac(n.velocity||0)}),g=p||0,y=u/(2*Math.sqrt(c*d)),x=i-a,v=ac(Math.sqrt(c/d)),b=Math.abs(x)<5;r||(r=b?Fr.restSpeed.granular:Fr.restSpeed.default),s||(s=b?Fr.restDelta.granular:Fr.restDelta.default);let _;if(y<1){const C=jP(v,y);_=S=>{const E=Math.exp(-y*v*S);return i-E*((g+y*v*x)/C*Math.sin(C*S)+x*Math.cos(C*S))}}else if(y===1)_=C=>i-Math.exp(-v*C)*(x+(g+v*x)*C);else{const C=v*Math.sqrt(y*y-1);_=S=>{const E=Math.exp(-y*v*S),M=Math.min(C*S,300);return i-E*((g+y*v*x)*Math.sinh(M)+C*x*Math.cosh(M))/C}}const w={calculatedDuration:h&&m||null,next:C=>{const S=_(C);if(h)l.done=C>=m;else{let E=C===0?g:0;y<1&&(E=C===0?sl(g):rfe(_,C,S));const M=Math.abs(E)<=r,k=Math.abs(i-S)<=s;l.done=M&&k}return l.value=l.done?i:S,l},toString:()=>{const C=Math.min(JD(w),mE),S=tfe(E=>w.next(C*E).value,C,30);return C+"ms "+S},toTransition:()=>{}};return w}M1.applyToOptions=e=>{const t=nfe(e,100,M1);return e.ease=t.ease,e.duration=sl(t.duration),e.type="keyframes",e};function AP({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:l,max:c,restDelta:u=.5,restSpeed:d}){const m=e[0],p={done:!1,value:m},h=M=>l!==void 0&&M<l||c!==void 0&&M>c,g=M=>l===void 0?c:c===void 0||Math.abs(l-M)<Math.abs(c-M)?l:c;let y=n*t;const x=m+y,v=i===void 0?x:i(x);v!==x&&(y=v-m);const b=M=>-y*Math.exp(-M/r),_=M=>v+b(M),w=M=>{const k=b(M),N=_(M);p.done=Math.abs(k)<=u,p.value=p.done?v:N};let C,S;const E=M=>{h(p.value)&&(C=M,S=M1({keyframes:[p.value,g(p.value)],velocity:rfe(_,M,p.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:M=>{let k=!1;return!S&&C===void 0&&(k=!0,w(M),E(M)),C!==void 0&&M>=C?S.next(M-C):(!k&&w(M),p)}}}function VUe(e,t,n){const r=[],s=n||Eu.mix||efe,a=e.length-1;for(let i=0;i<a;i++){let l=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||ko:t;l=f_(c,l)}r.push(l)}return r}function sfe(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if($D(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=VUe(t,r,s),c=l.length,u=d=>{if(i&&d<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(d<e[m+1]);m++);const p=Dg(e[m],e[m+1],d);return l[m](p)};return n?d=>u(Su(e[0],e[a-1],d)):u}function afe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Dg(0,t,r);e.push(jr(n,1,s))}}function ife(e){const t=[0];return afe(t,e.length-1),t}function $Ue(e,t){return e.map(n=>n*t)}function WUe(e,t){return e.map(()=>t||fi).splice(0,e.length-1)}function Mv({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Wde(r)?r.map(Gq):Gq(r),a={done:!1,value:t[0]},i=$Ue(n&&n.length===t.length?n:ife(t),e),l=sfe(i,t,{ease:Array.isArray(s)?s:WUe(t,s)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const HUe=e=>e!==null;function eF(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(HUe),l=s<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const zUe={decay:AP,inertia:AP,tween:Mv,keyframes:Mv,spring:M1};function ofe(e){typeof e.type=="string"&&(e.type=zUe[e.type])}class tF{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const GUe=e=>e/100;class Jk extends tF{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==mi.now()&&this.tick(mi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ofe(t);const{type:n=Mv,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:l}=t;const c=n||Mv;c!==Mv&&typeof l[0]!="number"&&(this.mixKeyframes=f_(GUe,efe(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=JD(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:p,repeatDelay:h,type:g,onUpdate:y,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,w=r;if(m){const M=Math.min(this.currentTime,s)/l;let k=Math.floor(M),N=M%1;!N&&M>=1&&(N=1),N===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(p==="reverse"?(N=1-N,h&&(N-=h/l)):p==="mirror"&&(w=i)),_=Su(0,1,N)*l}const C=b?{done:!1,value:d[0]}:w.next(_);a&&(C.value=a(C.value));let{done:S}=C;!b&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&g!==AP&&(C.value=eF(d,this.options,x,this.speed)),y&&y(C.value),E&&this.finish(),C}then(t,n){return this.finished.then(t,n)}get duration(){return ac(this.calculatedDuration)}get time(){return ac(this.currentTime)}set time(t){t=sl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(mi.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ac(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=RUe,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function qUe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const cm=e=>e*180/Math.PI,IP=e=>{const t=cm(Math.atan2(e[1],e[0]));return RP(t)},KUe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:IP,rotateZ:IP,skewX:e=>cm(Math.atan(e[1])),skewY:e=>cm(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},RP=e=>(e=e%360,e<0&&(e+=360),e),Jq=IP,eK=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),tK=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),YUe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eK,scaleY:tK,scale:e=>(eK(e)+tK(e))/2,rotateX:e=>RP(cm(Math.atan2(e[6],e[5]))),rotateY:e=>RP(cm(Math.atan2(-e[2],e[0]))),rotateZ:Jq,rotate:Jq,skewX:e=>cm(Math.atan(e[4])),skewY:e=>cm(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function PP(e){return e.includes("scale")?1:0}function OP(e,t){if(!e||e==="none")return PP(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=YUe,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=KUe,s=l}if(!s)return PP(t);const a=r[t],i=s[1].split(",").map(XUe);return typeof a=="function"?a(i):i[a]}const QUe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return OP(n,t)};function XUe(e){return parseFloat(e.trim())}const Hy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zy=new Set(Hy),nK=e=>e===Wy||e===Vt,ZUe=new Set(["x","y","z"]),JUe=Hy.filter(e=>!ZUe.has(e));function eBe(e){const t=[];return JUe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const vm={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>OP(t,"x"),y:(e,{transform:t})=>OP(t,"y")};vm.translateX=vm.x;vm.translateY=vm.y;const bm=new Set;let LP=!1,DP=!1,FP=!1;function lfe(){if(DP){const e=Array.from(bm).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=eBe(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,i])=>{r.getValue(a)?.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}DP=!1,LP=!1,bm.forEach(e=>e.complete(FP)),bm.clear()}function cfe(){bm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(DP=!0)})}function tBe(){FP=!0,cfe(),lfe(),FP=!1}class nF{constructor(t,n,r,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(bm.add(this),LP||(LP=!0,cr.read(cfe),cr.resolveKeyframes(lfe))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,i);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}qUe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),bm.delete(this)}cancel(){this.state==="scheduled"&&(bm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nBe=e=>e.startsWith("--");function rBe(e,t,n){nBe(t)?e.style.setProperty(t,n):e.style[t]=n}const sBe=WD(()=>window.ScrollTimeline!==void 0),aBe={};function iBe(e,t){const n=WD(e);return()=>aBe[t]??n()}const ufe=iBe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),X0=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,rK={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:X0([0,.65,.55,1]),circOut:X0([.55,0,1,.45]),backIn:X0([.31,.01,.66,-.59]),backOut:X0([.33,1.53,.69,.99])};function dfe(e,t){if(e)return typeof e=="function"?ufe()?tfe(e,t):"ease-out":zde(e)?X0(e):Array.isArray(e)?e.map(n=>dfe(n,t)||rK.easeOut):rK[e]}function oBe(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const m=dfe(l,s);Array.isArray(m)&&(d.easing=m);const p={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(d,p)}function rF(e){return typeof e=="function"&&"applyToOptions"in e}function lBe({type:e,...t}){return rF(e)&&ufe()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class cBe extends tF{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,$D(typeof t.type!="string");const u=lBe(t);this.animation=oBe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=eF(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):rBe(n,r,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ac(Number(t))}get time(){return ac(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=sl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&sBe()?(this.animation.timeline=t,ko):n(this)}}const ffe={anticipate:GD,backInOut:Ude,circInOut:Vde};function uBe(e){return e in ffe}function dBe(e){typeof e.ease=="string"&&uBe(e.ease)&&(e.ease=ffe[e.ease])}const sK=10;class fBe extends cBe{constructor(t){dBe(t),ofe(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...i}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new Jk({...i,autoplay:!1}),c=sl(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-sK).value,l.sample(c).value,sK),l.stop()}}const aK=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Wd.test(e)||e==="0")&&!e.startsWith("url("));function mBe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function pBe(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=aK(s,t),l=aK(a,t);return!i||!l?!1:mBe(e)||(n==="spring"||rF(n))&&r}function UP(e){e.duration=0,e.type}const hBe=new Set(["opacity","clipPath","filter","transform"]),gBe=WD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yBe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return gBe()&&n&&hBe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&i!=="inertia"}const xBe=40;class vBe extends tF{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:l,name:c,motionValue:u,element:d,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mi.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:i,name:c,motionValue:u,element:d,...m},h=d?.KeyframeResolver||nF;this.keyframeResolver=new h(l,(g,y,x)=>this.onKeyframesResolved(g,y,p,!x),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=mi.now(),pBe(t,a,i,l)||((Eu.instantAnimations||!c)&&d?.(eF(t,r,n)),t[0]=t[t.length-1],UP(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>xBe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},h=!u&&yBe(p)?new fBe({...p,element:p.motionValue.owner.current}):new Jk(p);h.finished.then(()=>this.notifyFinished()).catch(ko),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),tBe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}class bBe{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t){const n=this.animations.map(r=>r.attachTimeline(t));return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class _Be extends bBe{then(t,n){return this.finished.finally(t).then(()=>{})}}const wBe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CBe(e){const t=wBe.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function mfe(e,t,n=1){const[r,s]=CBe(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const i=a.trim();return Ade(i)?parseFloat(i):i}return YD(s)?mfe(s,t,n+1):s}function sF(e,t){return e?.[t]??e?.default??e}const pfe=new Set(["width","height","top","left","right","bottom",...Hy]),SBe={test:e=>e==="auto",parse:e=>e},hfe=e=>t=>t.test(e),gfe=[Wy,Vt,ic,cd,yUe,gUe,SBe],iK=e=>gfe.find(hfe(e));function EBe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Rde(e):!0}const MBe=new Set(["brightness","contrast","saturate","opacity"]);function kBe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(QD)||[];if(!r)return e;const s=n.replace(r,"");let a=MBe.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const TBe=/\b([a-z-]*)\(.*?\)/gu,BP={...Wd,getAnimatableNone:e=>{const t=e.match(TBe);return t?t.map(kBe).join(" "):e}},oK={...Wy,transform:Math.round},NBe={rotate:cd,rotateX:cd,rotateY:cd,rotateZ:cd,scale:hC,scaleX:hC,scaleY:hC,scaleZ:hC,skew:cd,skewX:cd,skewY:cd,distance:Vt,translateX:Vt,translateY:Vt,translateZ:Vt,x:Vt,y:Vt,z:Vt,perspective:Vt,transformPerspective:Vt,opacity:S1,originX:qq,originY:qq,originZ:Vt},aF={borderWidth:Vt,borderTopWidth:Vt,borderRightWidth:Vt,borderBottomWidth:Vt,borderLeftWidth:Vt,borderRadius:Vt,radius:Vt,borderTopLeftRadius:Vt,borderTopRightRadius:Vt,borderBottomRightRadius:Vt,borderBottomLeftRadius:Vt,width:Vt,maxWidth:Vt,height:Vt,maxHeight:Vt,top:Vt,right:Vt,bottom:Vt,left:Vt,padding:Vt,paddingTop:Vt,paddingRight:Vt,paddingBottom:Vt,paddingLeft:Vt,margin:Vt,marginTop:Vt,marginRight:Vt,marginBottom:Vt,marginLeft:Vt,backgroundPositionX:Vt,backgroundPositionY:Vt,...NBe,zIndex:oK,fillOpacity:S1,strokeOpacity:S1,numOctaves:oK},jBe={...aF,color:ns,backgroundColor:ns,outlineColor:ns,fill:ns,stroke:ns,borderColor:ns,borderTopColor:ns,borderRightColor:ns,borderBottomColor:ns,borderLeftColor:ns,filter:BP,WebkitFilter:BP},yfe=e=>jBe[e];function xfe(e,t){let n=yfe(e);return n!==BP&&(n=Wd),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const ABe=new Set(["auto","none","0"]);function IBe(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!ABe.has(a)&&E1(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=xfe(n,s)}class RBe extends nF{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),YD(u))){const d=mfe(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!pfe.has(r)||t.length!==2)return;const[s,a]=t,i=iK(s),l=iK(a);if(i!==l)if(nK(i)&&nK(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else vm[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||EBe(t[s]))&&r.push(s);r.length&&IBe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vm[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=vm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function iF(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const vfe=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function bfe(e){return Ide(e)&&"offsetHeight"in e}const lK=30,PBe=e=>!isNaN(parseFloat(e)),kv={current:void 0};class OBe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=mi.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=mi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=PBe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new HD);const r=this.events[t].add(n);return t==="change"?()=>{r(),cr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return kv.current&&kv.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=mi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lK)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lK);return Pde(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fm(e,t){return new OBe(e,t)}const{schedule:oF}=Gde(queueMicrotask,!1),qo={x:!1,y:!1};function _fe(){return qo.x||qo.y}function LBe(e){return e==="x"||e==="y"?qo[e]?null:(qo[e]=!0,()=>{qo[e]=!1}):qo.x||qo.y?null:(qo.x=qo.y=!0,()=>{qo.x=qo.y=!1})}function wfe(e,t){const n=iF(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function cK(e){return!(e.pointerType==="touch"||_fe())}function DBe(e,t,n={}){const[r,s,a]=wfe(e,n),i=l=>{if(!cK(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=m=>{cK(m)&&(u(m),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",i,s)}),a}const Cfe=(e,t)=>t?e===t?!0:Cfe(e,t.parentElement):!1,lF=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,FBe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function UBe(e){return FBe.has(e.tagName)||e.tabIndex!==-1}const f2=new WeakSet;function uK(e){return t=>{t.key==="Enter"&&e(t)}}function D4(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const BBe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=uK(()=>{if(f2.has(n))return;D4(n,"down");const s=uK(()=>{D4(n,"up")}),a=()=>D4(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function dK(e){return lF(e)&&!_fe()}function VBe(e,t,n={}){const[r,s,a]=wfe(e,n),i=l=>{const c=l.currentTarget;if(!dK(l))return;f2.add(c);const u=t(c,l),d=(h,g)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),f2.has(c)&&f2.delete(c),dK(h)&&typeof u=="function"&&u(h,{success:g})},m=h=>{d(h,c===window||c===document||n.useGlobalTarget||Cfe(c,h.target))},p=h=>{d(h,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",p,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",i,s),bfe(l)&&(l.addEventListener("focus",u=>BBe(u,s)),!UBe(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function cF(e){return Ide(e)&&"ownerSVGElement"in e}function Sfe(e){return cF(e)&&e.tagName==="svg"}function $Be(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=e[1+n],a=e[2+n],i=e[3+n],l=sfe(s,a,i);return t?l(r):l}const as=e=>!!(e&&e.getVelocity);function WBe(e,t,n){const r=e.get();let s=null,a=r,i;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,c=()=>{s&&(s.stop(),s=null)},u=()=>{c(),s=new Jk({keyframes:[mK(e.get()),mK(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:i})};if(e.attach((d,m)=>(a=d,i=p=>m(fK(p,l)),cr.postRender(u),e.get()),c),as(t)){const d=t.on("change",p=>e.set(fK(p,l))),m=e.on("destroy",d);return()=>{d(),m()}}return c}function fK(e,t){return t?e+t:e}function mK(e){return typeof e=="number"?e:parseFloat(e)}const HBe=[...gfe,ns,Wd],zBe=e=>HBe.find(hfe(e)),p_=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class GBe extends f.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=bfe(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qBe({children:e,isPresent:t,anchorX:n,root:r}){const s=f.useId(),a=f.useRef(null),i=f.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=f.useContext(p_);return f.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:m,right:p}=i.current;if(t||!a.current||!c||!u)return;const h=n==="left"?`left: ${m}`:`right: ${p}`;a.current.dataset.motionPopId=s;const g=document.createElement("style");l&&(g.nonce=l);const y=r??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${h}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),o.jsx(GBe,{isPresent:t,childRef:a,sizeRef:i,children:f.cloneElement(e,{ref:a})})}const KBe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i,anchorX:l,root:c})=>{const u=u_(YBe),d=f.useId();let m=!0,p=f.useMemo(()=>(m=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:h=>{u.set(h,!0);for(const g of u.values())if(!g)return;r&&r()},register:h=>(u.set(h,!1),()=>u.delete(h))}),[n,u,r]);return a&&m&&(p={...p}),f.useMemo(()=>{u.forEach((h,g)=>u.set(g,!1))},[n]),f.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),i==="popLayout"&&(e=o.jsx(qBe,{isPresent:n,anchorX:l,root:c,children:e})),o.jsx(Zk.Provider,{value:p,children:e})};function YBe(){return new Map}function Efe(e=!0){const t=f.useContext(Zk);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=f.useId();f.useEffect(()=>{if(e)return s(a)},[e]);const i=f.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const gC=e=>e.key||"";function pK(e){const t=[];return f.Children.forEach(e,n=>{f.isValidElement(n)&&t.push(n)}),t}const Je=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:l="left",root:c})=>{const[u,d]=Efe(i),m=f.useMemo(()=>pK(e),[e]),p=i&&!u?[]:m.map(gC),h=f.useRef(!0),g=f.useRef(m),y=u_(()=>new Map),[x,v]=f.useState(m),[b,_]=f.useState(m);Xk(()=>{h.current=!1,g.current=m;for(let S=0;S<b.length;S++){const E=gC(b[S]);p.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[b,p.length,p.join("-")]);const w=[];if(m!==x){let S=[...m];for(let E=0;E<b.length;E++){const M=b[E],k=gC(M);p.includes(k)||(S.splice(E,0,M),w.push(M))}return a==="wait"&&w.length&&(S=w),_(pK(S)),v(m),null}const{forceRender:C}=f.useContext(C1);return o.jsx(o.Fragment,{children:b.map(S=>{const E=gC(S),M=i&&!u?!1:m===b||p.includes(E),k=()=>{if(y.has(E))y.set(E,!0);else return;let N=!0;y.forEach(P=>{P||(N=!1)}),N&&(C?.(),_(g.current),i&&d?.(),r&&r())};return o.jsx(KBe,{isPresent:M,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:M?void 0:k,anchorX:l,children:S},E)})})},QBe=f.createContext(null);function XBe(){const e=f.useRef(!1);return Xk(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ZBe(){const e=XBe(),[t,n]=f.useState(0),r=f.useCallback(()=>{e.current&&n(t+1)},[t]);return[f.useCallback(()=>cr.postRender(r),[r]),t]}const JBe=e=>!e.isLayoutDirty&&e.willUpdate(!1);function hK(){const e=new Set,t=new WeakMap,n=()=>e.forEach(JBe);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);const s=t.get(r);s&&(s(),t.delete(r)),n()},dirty:n}}const Mfe=e=>e===!0,eVe=e=>Mfe(e===!0)||e==="id",jc=({children:e,id:t,inherit:n=!0})=>{const r=f.useContext(C1),s=f.useContext(QBe),[a,i]=ZBe(),l=f.useRef(null),c=r.id||s;l.current===null&&(eVe(n)&&c&&(t=t?c+"-"+t:c),l.current={id:t,group:Mfe(n)&&r.group||hK()});const u=f.useMemo(()=>({...l.current,forceRender:a}),[i]);return o.jsx(C1.Provider,{value:u,children:e})},kfe=f.createContext({strict:!1}),gK={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fg={};for(const e in gK)Fg[e]={isEnabled:t=>gK[e].some(n=>!!t[n])};function tVe(e){for(const t in e)Fg[t]={...Fg[t],...e[t]}}const nVe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pE(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||nVe.has(e)}let Tfe=e=>!pE(e);function rVe(e){typeof e=="function"&&(Tfe=t=>t.startsWith("on")?!pE(t):e(t))}try{rVe(require("@emotion/is-prop-valid").default)}catch{}function sVe(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Tfe(s)||n===!0&&pE(s)||!t&&!pE(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const e3=f.createContext({});function t3(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function k1(e){return typeof e=="string"||Array.isArray(e)}const uF=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dF=["initial",...uF];function n3(e){return t3(e.animate)||dF.some(t=>k1(e[t]))}function Nfe(e){return!!(n3(e)||e.variants)}function aVe(e,t){if(n3(e)){const{initial:n,animate:r}=e;return{initial:n===!1||k1(n)?n:void 0,animate:k1(r)?r:void 0}}return e.inherit!==!1?t:{}}function iVe(e){const{initial:t,animate:n}=aVe(e,f.useContext(e3));return f.useMemo(()=>({initial:t,animate:n}),[yK(t),yK(n)])}function yK(e){return Array.isArray(e)?e.join(" "):e}const T1={};function oVe(e){for(const t in e)T1[t]=e[t],KD(t)&&(T1[t].isCSSVariable=!0)}function jfe(e,{layout:t,layoutId:n}){return zy.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!T1[e]||e==="opacity")}const lVe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cVe=Hy.length;function uVe(e,t,n){let r="",s=!0;for(let a=0;a<cVe;a++){const i=Hy[a],l=e[i];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(i.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=vfe(l,aF[i]);if(!c){s=!1;const d=lVe[i]||i;r+=`${d}(${u}) `}n&&(t[i]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function fF(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,l=!1;for(const c in t){const u=t[c];if(zy.has(c)){i=!0;continue}else if(KD(c)){s[c]=u;continue}else{const d=vfe(u,aF[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(t.transform||(i||n?r.transform=uVe(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const mF=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Afe(e,t,n){for(const r in t)!as(t[r])&&!jfe(r,n)&&(e[r]=t[r])}function dVe({transformTemplate:e},t){return f.useMemo(()=>{const n=mF();return fF(n,t,e),Object.assign({},n.vars,n.style)},[t])}function fVe(e,t){const n=e.style||{},r={};return Afe(r,n,e),Object.assign(r,dVe(e,t)),r}function mVe(e,t){const n={},r=fVe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const pVe={offset:"stroke-dashoffset",array:"stroke-dasharray"},hVe={offset:"strokeDashoffset",array:"strokeDasharray"};function gVe(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?pVe:hVe;e[a.offset]=Vt.transform(-r);const i=Vt.transform(t),l=Vt.transform(n);e[a.array]=`${i} ${l}`}function Ife(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...l},c,u,d){if(fF(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p}=e;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=d?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&gVe(m,s,a,i,!1)}const Rfe=()=>({...mF(),attrs:{}}),Pfe=e=>typeof e=="string"&&e.toLowerCase()==="svg";function yVe(e,t,n,r){const s=f.useMemo(()=>{const a=Rfe();return Ife(a,t,Pfe(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};Afe(a,e.style,e),s.style={...a,...s.style}}return s}const xVe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pF(e){return typeof e!="string"||e.includes("-")?!1:!!(xVe.indexOf(e)>-1||/[A-Z]/u.test(e))}function vVe(e,t,n,{latestValues:r},s,a=!1){const l=(pF(e)?yVe:mVe)(t,r,s,e),c=sVe(t,typeof e=="string",a),u=e!==f.Fragment?{...c,...l,ref:n}:{},{children:d}=t,m=f.useMemo(()=>as(d)?d.get():d,[d]);return f.createElement(e,{...u,children:m})}function xK(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function hF(e,t,n,r){if(typeof t=="function"){const[s,a]=xK(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=xK(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function m2(e){return as(e)?e.get():e}function bVe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:_Ve(n,r,s,e),renderState:t()}}function _Ve(e,t,n,r){const s={},a=r(e,{});for(const p in a)s[p]=m2(a[p]);let{initial:i,animate:l}=e;const c=n3(e),u=Nfe(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const m=d?l:i;if(m&&typeof m!="boolean"&&!t3(m)){const p=Array.isArray(m)?m:[m];for(let h=0;h<p.length;h++){const g=hF(e,p[h]);if(g){const{transitionEnd:y,transition:x,...v}=g;for(const b in v){let _=v[b];if(Array.isArray(_)){const w=d?_.length-1:0;_=_[w]}_!==null&&(s[b]=_)}for(const b in y)s[b]=y[b]}}}return s}const Ofe=e=>(t,n)=>{const r=f.useContext(e3),s=f.useContext(Zk),a=()=>bVe(e,t,r,s);return n?a():u_(a)};function gF(e,t,n){const{style:r}=e,s={};for(const a in r)(as(r[a])||t.style&&as(t.style[a])||jfe(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const wVe=Ofe({scrapeMotionValuesFromProps:gF,createRenderState:mF});function Lfe(e,t,n){const r=gF(e,t,n);for(const s in e)if(as(e[s])||as(t[s])){const a=Hy.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}const CVe=Ofe({scrapeMotionValuesFromProps:Lfe,createRenderState:Rfe}),SVe=Symbol.for("motionComponentSymbol");function Vh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function EVe(e,t,n){return f.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Vh(n)&&(n.current=r))},[t])}const yF=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MVe="framerAppearId",Dfe="data-"+yF(MVe),Ffe=f.createContext({});function kVe(e,t,n,r,s){const{visualElement:a}=f.useContext(e3),i=f.useContext(kfe),l=f.useContext(Zk),c=f.useContext(p_).reducedMotion,u=f.useRef(null);r=r||i.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,m=f.useContext(Ffe);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&TVe(u.current,n,s,m);const p=f.useRef(!1);f.useInsertionEffect(()=>{d&&p.current&&d.update(n,l)});const h=n[Dfe],g=f.useRef(!!h&&!window.MotionHandoffIsComplete?.(h)&&window.MotionHasOptimisedAnimation?.(h));return Xk(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),f.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(h)}),g.current=!1),d.enteringChildren=void 0)}),d}function TVe(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Ufe(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||l&&Vh(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function Ufe(e){if(e)return e.options.allowProjection!==!1?e.projection:Ufe(e.parent)}function F4(e,{forwardMotionProps:t=!1}={},n,r){n&&tVe(n);const s=pF(e)?CVe:wVe;function a(l,c){let u;const d={...f.useContext(p_),...l,layoutId:NVe(l)},{isStatic:m}=d,p=iVe(l),h=s(l,m);if(!m&&BD){jVe();const g=AVe(d);u=g.MeasureLayout,p.visualElement=kVe(e,h,d,r,g.ProjectionNode)}return o.jsxs(e3.Provider,{value:p,children:[u&&p.visualElement?o.jsx(u,{visualElement:p.visualElement,...d}):null,vVe(e,l,EVe(h,p.visualElement,c),h,m,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=f.forwardRef(a);return i[SVe]=e,i}function NVe({layoutId:e}){const t=f.useContext(C1).id;return t&&e!==void 0?t+"-"+e:e}function jVe(e,t){f.useContext(kfe).strict}function AVe(e){const{drag:t,layout:n}=Fg;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function IVe(e,t){if(typeof Proxy>"u")return F4;const n=new Map,r=(a,i)=>F4(a,i,e,t),s=(a,i)=>r(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?r:(n.has(i)||n.set(i,F4(i,void 0,e,t)),n.get(i))})}function Bfe({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function RVe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function PVe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function U4(e){return e===void 0||e===1}function VP({scale:e,scaleX:t,scaleY:n}){return!U4(e)||!U4(t)||!U4(n)}function Qf(e){return VP(e)||Vfe(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Vfe(e){return vK(e.x)||vK(e.y)}function vK(e){return e&&e!=="0%"}function hE(e,t,n){const r=e-n,s=t*r;return n+s}function bK(e,t,n,r,s){return s!==void 0&&(e=hE(e,s,r)),hE(e,n,r)+t}function $P(e,t=0,n=1,r,s){e.min=bK(e.min,t,n,r,s),e.max=bK(e.max,t,n,r,s)}function $fe(e,{x:t,y:n}){$P(e.x,t.translate,t.scale,t.originPoint),$P(e.y,n.translate,n.scale,n.originPoint)}const _K=.999999999999,wK=1.0000000000001;function OVe(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,i;for(let l=0;l<s;l++){a=n[l],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Wh(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,$fe(e,i)),r&&Qf(a.latestValues)&&Wh(e,a.latestValues))}t.x<wK&&t.x>_K&&(t.x=1),t.y<wK&&t.y>_K&&(t.y=1)}function $h(e,t){e.min=e.min+t,e.max=e.max+t}function CK(e,t,n,r,s=.5){const a=jr(e.min,e.max,s);$P(e,t,n,a,r)}function Wh(e,t){CK(e.x,t.x,t.scaleX,t.scale,t.originX),CK(e.y,t.y,t.scaleY,t.scale,t.originY)}function Wfe(e,t){return Bfe(PVe(e.getBoundingClientRect(),t))}function LVe(e,t,n){const r=Wfe(e,n),{scroll:s}=t;return s&&($h(r.x,s.offset.x),$h(r.y,s.offset.y)),r}const SK=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hh=()=>({x:SK(),y:SK()}),EK=()=>({min:0,max:0}),Dr=()=>({x:EK(),y:EK()}),gE={current:null},xF={current:!1};function Hfe(){if(xF.current=!0,!!BD)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>gE.current=e.matches;e.addEventListener("change",t),t()}else gE.current=!1}const N1=new WeakMap;function DVe(e,t,n){for(const r in t){const s=t[r],a=n[r];if(as(s))e.addValue(r,s);else if(as(a))e.addValue(r,Fm(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(r);e.addValue(r,Fm(i!==void 0?i:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const MK=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zfe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nF,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=mi.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,cr.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=n3(n),this.isVariantNode=Nfe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const h=m[p];c[p]!==void 0&&as(h)&&h.set(c[p])}}mount(t){this.current=t,N1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xF.current||Hfe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gE.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Mu(this.notifyUpdate),Mu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=zy.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&cr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Fg){const n=Fg[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<MK.length;r++){const s=MK[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=DVe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Fm(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Ade(r)||Rde(r))?r=parseFloat(r):!zBe(r)&&Wd.test(n)&&(r=xfe(t,n)),this.setBaseTarget(t,as(r)?r.get():r)),as(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=hF(this.props,n,this.presenceContext?.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!as(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new HD),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){oF.render(this.render)}}class Gfe extends zfe{constructor(){super(...arguments),this.KeyframeResolver=RBe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;as(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function qfe(e,{style:t,vars:n},r,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,r);for(i in n)a.setProperty(i,n[i])}function FVe(e){return window.getComputedStyle(e)}class Kfe extends Gfe{constructor(){super(...arguments),this.type="html",this.renderInstance=qfe}readValueFromInstance(t,n){if(zy.has(n))return this.projection?.isProjecting?PP(n):QUe(t,n);{const r=FVe(t),s=(KD(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Wfe(t,n)}build(t,n,r){fF(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return gF(t,n,r)}}const Yfe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UVe(e,t,n,r){qfe(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Yfe.has(s)?s:yF(s),t.attrs[s])}class Qfe extends Gfe{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(zy.has(n)){const r=yfe(n);return r&&r.default||0}return n=Yfe.has(n)?n:yF(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Lfe(t,n,r)}build(t,n,r){Ife(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){UVe(t,n,r,s)}mount(t){this.isSVGTag=Pfe(t.tagName),super.mount(t)}}const BVe=(e,t)=>pF(e)?new Qfe(t):new Kfe(t,{allowProjection:e!==f.Fragment});function ag(e,t,n){const r=e.getProps();return hF(r,t,n!==void 0?n:r.custom,e)}const WP=e=>Array.isArray(e);function VVe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Fm(n))}function $Ve(e){return WP(e)?e[e.length-1]||0:e}function WVe(e,t){const n=ag(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){const l=$Ve(a[i]);VVe(e,i,l)}}function HVe(e){return!!(as(e)&&e.add)}function HP(e,t){const n=e.getValue("willChange");if(HVe(n))return n.add(t);if(!n&&Eu.WillChange){const r=new Eu.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Xfe(e){return e.props[Dfe]}const zVe=e=>e!==null;function GVe(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(zVe),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[a]}const qVe={type:"spring",stiffness:500,damping:25,restSpeed:10},KVe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),YVe={type:"keyframes",duration:.8},QVe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XVe=(e,{keyframes:t})=>t.length>2?YVe:zy.has(e)?e.startsWith("scale")?KVe(t[1]):qVe:QVe;function ZVe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const vF=(e,t,n,r={},s,a)=>i=>{const l=sF(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-sl(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:p=>{t.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:s};ZVe(l)||Object.assign(d,XVe(e,d)),d.duration&&(d.duration=sl(d.duration)),d.repeatDelay&&(d.repeatDelay=sl(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(UP(d),d.delay===0&&(m=!0)),(Eu.instantAnimations||Eu.skipAnimations)&&(m=!0,UP(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,m&&!a&&t.get()!==void 0){const p=GVe(d.keyframes,l);if(p!==void 0){cr.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new Jk(d):new vBe(d)};function JVe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function bF(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...l}=t;r&&(a=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const m=e.getValue(d,e.latestValues[d]??null),p=l[d];if(p===void 0||u&&JVe(u,d))continue;const h={delay:n,...sF(a||{},d)},g=m.get();if(g!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===g&&!h.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const v=Xfe(e);if(v){const b=window.MotionHandoffAnimation(v,d,cr);b!==null&&(h.startTime=b,y=!0)}}HP(e,d),m.start(vF(d,m,p,e.shouldReduceMotion&&pfe.has(d)?{type:!1}:h,e,y));const x=m.animation;x&&c.push(x)}return i&&Promise.all(c).then(()=>{cr.update(()=>{i&&WVe(e,i)})}),c}function Zfe(e,t,n,r=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,l=(i-1)*r;return typeof n=="function"?n(a,i):s===1?a*r:l-a*r}function zP(e,t,n={}){const r=ag(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(bF(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:m}=s;return e$e(e,t,c,u,d,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[a,i]:[i,a];return c().then(()=>u())}else return Promise.all([a(),i(n.delay)])}function e$e(e,t,n=0,r=0,s=0,a=1,i){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(zP(c,t,{...i,delay:n+(typeof r=="function"?0:r)+Zfe(e.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function t$e(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>zP(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=zP(e,t,n);else{const s=typeof t=="function"?ag(e,t,n.custom):t;r=Promise.all(bF(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Jfe(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const n$e=dF.length;function eme(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?eme(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<n$e;n++){const r=dF[n],s=e.props[r];(k1(s)||s===!1)&&(t[r]=s)}return t}const r$e=[...uF].reverse(),s$e=uF.length;function a$e(e){return t=>Promise.all(t.map(({animation:n,options:r})=>t$e(e,n,r)))}function i$e(e){let t=a$e(e),n=kK(),r=!0;const s=c=>(u,d)=>{const m=ag(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(m){const{transition:p,transitionEnd:h,...g}=m;u={...u,...g,...h}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,d=eme(e.parent)||{},m=[],p=new Set;let h={},g=1/0;for(let x=0;x<s$e;x++){const v=r$e[x],b=n[v],_=u[v]!==void 0?u[v]:d[v],w=k1(_),C=v===c?b.isActive:null;C===!1&&(g=x);let S=_===d[v]&&_!==u[v]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...h},!b.isActive&&C===null||!_&&!b.prevProp||t3(_)||typeof _=="boolean")continue;const E=o$e(b.prevProp,_);let M=E||v===c&&b.isActive&&!S&&w||x>g&&w,k=!1;const N=Array.isArray(_)?_:[_];let P=N.reduce(s(v),{});C===!1&&(P={});const{prevResolvedValues:L={}}=b,O={...L,...P},A=I=>{M=!0,p.has(I)&&(k=!0,p.delete(I)),b.needsAnimating[I]=!0;const U=e.getValue(I);U&&(U.liveStyle=!1)};for(const I in O){const U=P[I],B=L[I];if(h.hasOwnProperty(I))continue;let D=!1;WP(U)&&WP(B)?D=!Jfe(U,B):D=U!==B,D?U!=null?A(I):p.add(I):U!==void 0&&p.has(I)?A(I):b.protectedKeys[I]=!0}b.prevProp=_,b.prevResolvedValues=P,b.isActive&&(h={...h,...P}),r&&e.blockInitialAnimation&&(M=!1);const j=S&&E;M&&(!j||k)&&m.push(...N.map(I=>{const U={type:v};if(typeof I=="string"&&r&&!j&&e.manuallyAnimateOnMount&&e.parent){const{parent:B}=e,D=ag(B,I);if(B.enteringChildren&&D){const{delayChildren:W}=D.transition||{};U.delay=Zfe(B.enteringChildren,e,W)}}return{animation:I,options:U}}))}if(p.size){const x={};if(typeof u.initial!="boolean"){const v=ag(e,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(x.transition=v.transition)}p.forEach(v=>{const b=e.getBaseTarget(v),_=e.getValue(v);_&&(_.liveStyle=!0),x[v]=b??null}),m.push({animation:x})}let y=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(m):Promise.resolve()}function l(c,u){if(n[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(m=>m.animationState?.setActive(c,u)),n[c].isActive=u;const d=i(c);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:i,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=kK(),r=!0}}}function o$e(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Jfe(t,e):!1}function Pf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kK(){return{animate:Pf(!0),whileInView:Pf(),whileHover:Pf(),whileTap:Pf(),whileDrag:Pf(),whileFocus:Pf(),exit:Pf()}}class ff{constructor(t){this.isMounted=!1,this.node=t}update(){}}class l$e extends ff{constructor(t){super(t),t.animationState||(t.animationState=i$e(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();t3(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let c$e=0;class u$e extends ff{constructor(){super(...arguments),this.id=c$e++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const d$e={animation:{Feature:l$e},exit:{Feature:u$e}};function j1(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function h_(e){return{point:{x:e.pageX,y:e.pageY}}}const f$e=e=>t=>lF(t)&&e(t,h_(t));function Tv(e,t,n,r){return j1(e,t,f$e(n),r)}const tme=1e-4,m$e=1-tme,p$e=1+tme,nme=.01,h$e=0-nme,g$e=0+nme;function Ba(e){return e.max-e.min}function y$e(e,t,n){return Math.abs(e-t)<=n}function TK(e,t,n,r=.5){e.origin=r,e.originPoint=jr(t.min,t.max,e.origin),e.scale=Ba(n)/Ba(t),e.translate=jr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=m$e&&e.scale<=p$e||isNaN(e.scale))&&(e.scale=1),(e.translate>=h$e&&e.translate<=g$e||isNaN(e.translate))&&(e.translate=0)}function Nv(e,t,n,r){TK(e.x,t.x,n.x,r?r.originX:void 0),TK(e.y,t.y,n.y,r?r.originY:void 0)}function NK(e,t,n){e.min=n.min+t.min,e.max=e.min+Ba(t)}function x$e(e,t,n){NK(e.x,t.x,n.x),NK(e.y,t.y,n.y)}function jK(e,t,n){e.min=t.min-n.min,e.max=e.min+Ba(t)}function jv(e,t,n){jK(e.x,t.x,n.x),jK(e.y,t.y,n.y)}function go(e){return[e("x"),e("y")]}const rme=({current:e})=>e?e.ownerDocument.defaultView:null,AK=(e,t)=>Math.abs(e-t);function v$e(e,t){const n=AK(e.x,t.x),r=AK(e.y,t.y);return Math.sqrt(n**2+r**2)}class sme{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=V4(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,g=v$e(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!h&&!g)return;const{point:y}=p,{timestamp:x}=$s;this.history.push({...y,timestamp:x});const{onStart:v,onMove:b}=this.handlers;h||(v&&v(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,h)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=B4(h,this.transformPagePoint),cr.update(this.updatePoint,!0)},this.handlePointerUp=(p,h)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=V4(p.type==="pointercancel"?this.lastMoveEventInfo:B4(h,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,v),y&&y(p,v)},!lF(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=i,this.contextWindow=s||window;const l=h_(t),c=B4(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=$s;this.history=[{...u,timestamp:d}];const{onSessionStart:m}=n;m&&m(t,V4(c,this.history)),this.removeListeners=f_(Tv(this.contextWindow,"pointermove",this.handlePointerMove),Tv(this.contextWindow,"pointerup",this.handlePointerUp),Tv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Mu(this.updatePoint)}}function B4(e,t){return t?{point:t(e.point)}:e}function IK(e,t){return{x:e.x-t.x,y:e.y-t.y}}function V4({point:e},t){return{point:e,delta:IK(e,ame(t)),offset:IK(e,b$e(t)),velocity:_$e(t,.1)}}function b$e(e){return e[0]}function ame(e){return e[e.length-1]}function _$e(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=ame(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>sl(t)));)n--;if(!r)return{x:0,y:0};const a=ac(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function w$e(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?jr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?jr(n,e,r.max):Math.min(e,n)),e}function RK(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function C$e(e,{top:t,left:n,bottom:r,right:s}){return{x:RK(e.x,n,s),y:RK(e.y,t,r)}}function PK(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function S$e(e,t){return{x:PK(e.x,t.x),y:PK(e.y,t.y)}}function E$e(e,t){let n=.5;const r=Ba(e),s=Ba(t);return s>r?n=Dg(t.min,t.max-r,e.min):r>s&&(n=Dg(e.min,e.max-s,t.min)),Su(0,1,n)}function M$e(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const GP=.35;function k$e(e=GP){return e===!1?e=0:e===!0&&(e=GP),{x:OK(e,"left","right"),y:OK(e,"top","bottom")}}function OK(e,t,n){return{min:LK(e,t),max:LK(e,n)}}function LK(e,t){return typeof e=="number"?e:e[t]||0}const T$e=new WeakMap;class N$e{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(h_(m).point)},i=(m,p)=>{const{drag:h,dragPropagation:g,onDragStart:y}=this.getProps();if(h&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LBe(h),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),go(v=>{let b=this.getAxisMotionValue(v).get()||0;if(ic.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[v];w&&(b=Ba(w)*(parseFloat(b)/100))}}this.originPoint[v]=b}),y&&cr.postRender(()=>y(m,p)),HP(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},l=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p;const{dragPropagation:h,dragDirectionLock:g,onDirectionLock:y,onDrag:x}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=p;if(g&&this.currentDirection===null){this.currentDirection=j$e(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,v),this.updateAxis("y",p.point,v),this.visualElement.render(),x&&x(m,p)},c=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p,this.stop(m,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>go(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new sme(t,{onSessionStart:a,onStart:i,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:rme(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&cr.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!yC(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=w$e(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Vh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=C$e(r.layoutBox,t):this.constraints=!1,this.elastic=k$e(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&go(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=M$e(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Vh(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=LVe(r,s.root,this.visualElement.getTransformPagePoint());let i=S$e(s.layout.layoutBox,a);if(n){const l=n(RVe(i));this.hasMutatedConstraints=!!l,l&&(i=Bfe(l))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=go(d=>{if(!yC(d,n,this.currentDirection))return;let m=c&&c[d]||{};i&&(m={min:0,max:0});const p=s?200:1e6,h=s?40:1e7,g={type:"inertia",velocity:r?t[d]:0,bounceStiffness:p,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return HP(this.visualElement,t),r.start(vF(t,r,0,n,this.visualElement,!1))}stopAnimation(){go(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){go(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){go(n=>{const{drag:r}=this.getProps();if(!yC(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:l}=s.layout.layoutBox[n];a.set(t[n]-jr(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Vh(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};go(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const c=l.get();s[i]=E$e({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),go(i=>{if(!yC(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];l.set(jr(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;T$e.set(this.visualElement,this);const t=this.visualElement.current,n=Tv(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Vh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),cr.read(r);const i=j1(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(go(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())});return()=>{i(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=GP,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:l}}}function yC(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function j$e(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class A$e extends ff{constructor(t){super(t),this.removeGroupControls=ko,this.removeListeners=ko,this.controls=new N$e(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ko}unmount(){this.removeGroupControls(),this.removeListeners()}}const DK=e=>(t,n)=>{e&&cr.postRender(()=>e(t,n))};class I$e extends ff{constructor(){super(...arguments),this.removePointerDownListener=ko}onPointerDown(t){this.session=new sme(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rme(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:DK(t),onStart:DK(n),onMove:r,onEnd:(a,i)=>{delete this.session,s&&cr.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=Tv(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const p2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function FK(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const t0={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Vt.test(e))e=parseFloat(e);else return e;const n=FK(e,t.target.x),r=FK(e,t.target.y);return`${n}% ${r}%`}},R$e={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Wd.parse(e);if(s.length>5)return r;const a=Wd.createTransformer(e),i=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+i]/=l,s[1+i]/=c;const u=jr(l,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let $4=!1;class P$e extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;oVe(O$e),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),$4&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),p2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:i}=r;return i&&(i.isPresent=a,$4=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||cr.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),oF.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;$4=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ime(e){const[t,n]=Efe(),r=f.useContext(C1);return o.jsx(P$e,{...e,layoutGroup:r,switchLayoutGroup:f.useContext(Ffe),isPresent:t,safeToRemove:n})}const O$e={borderRadius:{...t0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:t0,borderTopRightRadius:t0,borderBottomLeftRadius:t0,borderBottomRightRadius:t0,boxShadow:R$e};function ome(e,t,n){const r=as(e)?e:Fm(e);return r.start(vF("",r,t,n)),r.animation}const L$e=(e,t)=>e.depth-t.depth;class D$e{constructor(){this.children=[],this.isDirty=!1}add(t){VD(this.children,t),this.isDirty=!0}remove(t){d_(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(L$e),this.isDirty=!1,this.children.forEach(t)}}function F$e(e,t){const n=mi.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(Mu(r),e(a-t))};return cr.setup(r,!0),()=>Mu(r)}const lme=["TopLeft","TopRight","BottomLeft","BottomRight"],U$e=lme.length,UK=e=>typeof e=="string"?parseFloat(e):e,BK=e=>typeof e=="number"||Vt.test(e);function B$e(e,t,n,r,s,a){s?(e.opacity=jr(0,n.opacity??1,V$e(r)),e.opacityExit=jr(t.opacity??1,0,$$e(r))):a&&(e.opacity=jr(t.opacity??1,n.opacity??1,r));for(let i=0;i<U$e;i++){const l=`border${lme[i]}Radius`;let c=VK(t,l),u=VK(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||BK(c)===BK(u)?(e[l]=Math.max(jr(UK(c),UK(u),r),0),(ic.test(u)||ic.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=jr(t.rotate||0,n.rotate||0,r))}function VK(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const V$e=cme(0,.5,Bde),$$e=cme(.5,.95,ko);function cme(e,t,n){return r=>r<e?0:r>t?1:n(Dg(e,t,r))}function $K(e,t){e.min=t.min,e.max=t.max}function mo(e,t){$K(e.x,t.x),$K(e.y,t.y)}function WK(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function HK(e,t,n,r,s){return e-=t,e=hE(e,1/n,r),s!==void 0&&(e=hE(e,1/s,r)),e}function W$e(e,t=0,n=1,r=.5,s,a=e,i=e){if(ic.test(t)&&(t=parseFloat(t),t=jr(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=jr(a.min,a.max,r);e===a&&(l-=t),e.min=HK(e.min,t,n,l,s),e.max=HK(e.max,t,n,l,s)}function zK(e,t,[n,r,s],a,i){W$e(e,t[n],t[r],t[s],t.scale,a,i)}const H$e=["x","scaleX","originX"],z$e=["y","scaleY","originY"];function GK(e,t,n,r){zK(e.x,t,H$e,n?n.x:void 0,r?r.x:void 0),zK(e.y,t,z$e,n?n.y:void 0,r?r.y:void 0)}function qK(e){return e.translate===0&&e.scale===1}function ume(e){return qK(e.x)&&qK(e.y)}function KK(e,t){return e.min===t.min&&e.max===t.max}function G$e(e,t){return KK(e.x,t.x)&&KK(e.y,t.y)}function YK(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function dme(e,t){return YK(e.x,t.x)&&YK(e.y,t.y)}function QK(e){return Ba(e.x)/Ba(e.y)}function XK(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class q$e{constructor(){this.members=[]}add(t){VD(this.members,t),t.scheduleRender()}remove(t){if(d_(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function K$e(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=n?.z||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:p,skewX:h,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),m&&(r+=`rotateX(${m}deg) `),p&&(r+=`rotateY(${p}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const W4=["","X","Y","Z"],Y$e=1e3;let Q$e=0;function H4(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function fme(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Xfe(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",cr,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&fme(r)}function mme({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},l=t?.()){this.id=Q$e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(J$e),this.nodes.forEach(rWe),this.nodes.forEach(sWe),this.nodes.forEach(eWe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new D$e)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new HD),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=cF(i)&&!Sfe(i),this.instance=i;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,m=0;const p=()=>this.root.updateBlockedByResize=!1;cr.read(()=>{m=window.innerWidth}),e(i,()=>{const h=window.innerWidth;h!==m&&(m=h,this.root.updateBlockedByResize=!0,d&&d(),d=F$e(p,250),p2.hasAnimatedSinceResize&&(p2.hasAnimatedSinceResize=!1,this.nodes.forEach(eY)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||cWe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=u.getProps(),v=!this.targetLayout||!dme(this.targetLayout,h),b=!m&&p;if(this.options.layoutRoot||this.resumeFrom||b||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...sF(g,"layout"),onPlay:y,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(d,b)}else m||eY(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Mu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aWe),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fme(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ZK);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(JK);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nWe),this.nodes.forEach(X$e),this.nodes.forEach(Z$e)):this.nodes.forEach(JK),this.clearAllSnapshots();const l=mi.now();$s.delta=Su(0,1e3/60,l-$s.timestamp),$s.timestamp=l,$s.isProcessing=!0,R4.update.process($s),R4.preRender.process($s),R4.render.process($s),$s.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,oF.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tWe),this.sharedNodes.forEach(iWe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ba(this.snapshot.measuredBox.x)&&!Ba(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ume(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(l||Qf(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),uWe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Dr();const l=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(dWe))){const{scroll:u}=this.root;u&&($h(l.x,u.offset.x),$h(l.y,u.offset.y))}return l}removeElementScroll(i){const l=Dr();if(mo(l,i),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:m}=u;u!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&mo(l,i),$h(l.x,d.offset.x),$h(l.y,d.offset.y))}return l}applyTransform(i,l=!1){const c=Dr();mo(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Wh(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Qf(d.latestValues)&&Wh(c,d.latestValues)}return Qf(this.latestValues)&&Wh(c,this.latestValues),c}removeTransform(i){const l=Dr();mo(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Qf(u.latestValues))continue;VP(u.latestValues)&&u.updateSnapshot();const d=Dr(),m=u.measurePageBox();mo(d,m),GK(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Qf(this.latestValues)&&GK(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$s.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=$s.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dr(),this.relativeTargetOrigin=Dr(),jv(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),mo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dr(),this.targetWithTransforms=Dr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),x$e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mo(this.target,this.layout.layoutBox),$fe(this.target,this.targetDelta)):mo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dr(),this.relativeTargetOrigin=Dr(),jv(this.relativeTargetOrigin,this.target,p.target),mo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||VP(this.parent.latestValues)||Vfe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),l=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===$s.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;mo(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;OVe(this.layoutCorrected,this.treeScale,this.path,l),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Dr());const{target:h}=i;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WK(this.prevProjectionDelta.x,this.projectionDelta.x),WK(this.prevProjectionDelta.y,this.projectionDelta.y)),Nv(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!XK(this.projectionDelta.x,this.prevProjectionDelta.x)||!XK(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hh(),this.projectionDelta=Hh(),this.projectionDeltaWithTransform=Hh()}setAnimationOrigin(i,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=Hh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=Dr(),h=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=h!==g,x=this.getStack(),v=!x||x.members.length<=1,b=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(lWe));this.animationProgress=0;let _;this.mixTargetDelta=w=>{const C=w/1e3;tY(m.x,i.x,C),tY(m.y,i.y,C),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jv(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oWe(this.relativeTarget,this.relativeTargetOrigin,p,C),_&&G$e(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Dr()),mo(_,this.relativeTarget)),y&&(this.animationValues=d,B$e(d,u,this.latestValues,C,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Mu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cr.update(()=>{p2.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Fm(0)),this.currentAnimation=ome(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Y$e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=i;if(!(!l||!c||!u)){if(this!==i&&this.layout&&u&&pme(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Dr();const m=Ba(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+m;const p=Ba(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+p}mo(l,c),Wh(l,d),Nv(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new q$e),this.sharedNodes.get(i).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&H4("z",i,u,this.animationValues);for(let d=0;d<W4.length;d++)H4(`rotate${W4[d]}`,i,u,this.animationValues),H4(`skew${W4[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=m2(l?.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=m2(l?.pointerEvents)||""),this.hasProjected&&!Qf(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=K$e(this.projectionDeltaWithTransform,this.treeScale,d);c&&(m=c(d,m)),i.transform=m;const{x:p,y:h}=this.projectionDelta;i.transformOrigin=`${p.origin*100}% ${h.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in T1){if(d[g]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:v}=T1[g],b=m==="none"?d[g]:y(d[g],u);if(x){const _=x.length;for(let w=0;w<_;w++)i[x[w]]=b}else v?this.options.visualElement.renderState.vars[g]=b:i[g]=b}this.options.layoutId&&(i.pointerEvents=u===this?m2(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(ZK),this.root.sharedNodes.clear()}}}function X$e(e){e.updateLayout()}function Z$e(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?go(d=>{const m=a?t.measuredBox[d]:t.layoutBox[d],p=Ba(m);m.min=n[d].min,m.max=m.min+p}):pme(s,t.layoutBox,n)&&go(d=>{const m=a?t.measuredBox[d]:t.layoutBox[d],p=Ba(n[d]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+p)});const i=Hh();Nv(i,n,t.layoutBox);const l=Hh();a?Nv(l,e.applyTransform(r,!0),t.measuredBox):Nv(l,n,t.layoutBox);const c=!ume(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:p}=d;if(m&&p){const h=Dr();jv(h,t.layoutBox,m.layoutBox);const g=Dr();jv(g,n,p.layoutBox),dme(h,g)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=h,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:i,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function J$e(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eWe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tWe(e){e.clearSnapshot()}function ZK(e){e.clearMeasurements()}function JK(e){e.isLayoutDirty=!1}function nWe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function eY(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rWe(e){e.resolveTargetDelta()}function sWe(e){e.calcProjection()}function aWe(e){e.resetSkewAndRotation()}function iWe(e){e.removeLeadSnapshot()}function tY(e,t,n){e.translate=jr(t.translate,0,n),e.scale=jr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function nY(e,t,n,r){e.min=jr(t.min,n.min,r),e.max=jr(t.max,n.max,r)}function oWe(e,t,n,r){nY(e.x,t.x,n.x,r),nY(e.y,t.y,n.y,r)}function lWe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const cWe={duration:.45,ease:[.4,0,.1,1]},rY=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),sY=rY("applewebkit/")&&!rY("chrome/")?Math.round:ko;function aY(e){e.min=sY(e.min),e.max=sY(e.max)}function uWe(e){aY(e.x),aY(e.y)}function pme(e,t,n){return e==="position"||e==="preserve-aspect"&&!y$e(QK(t),QK(n),.2)}function dWe(e){return e!==e.root&&e.scroll?.wasRoot}const fWe=mme({attachResizeListener:(e,t)=>j1(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),z4={current:void 0},hme=mme({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!z4.current){const e=new fWe({});e.mount(window),e.setOptions({layoutScroll:!0}),z4.current=e}return z4.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),mWe={pan:{Feature:I$e},drag:{Feature:A$e,ProjectionNode:hme,MeasureLayout:ime}};function iY(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&cr.postRender(()=>a(t,h_(t)))}class pWe extends ff{mount(){const{current:t}=this.node;t&&(this.unmount=DBe(t,(n,r)=>(iY(this.node,r,"Start"),s=>iY(this.node,s,"End"))))}unmount(){}}class hWe extends ff{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=f_(j1(this.node.current,"focus",()=>this.onFocus()),j1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oY(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&cr.postRender(()=>a(t,h_(t)))}class gWe extends ff{mount(){const{current:t}=this.node;t&&(this.unmount=VBe(t,(n,r)=>(oY(this.node,r,"Start"),(s,{success:a})=>oY(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qP=new WeakMap,G4=new WeakMap,yWe=e=>{const t=qP.get(e.target);t&&t(e)},xWe=e=>{e.forEach(yWe)};function vWe({root:e,...t}){const n=e||document;G4.has(n)||G4.set(n,{});const r=G4.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(xWe,{root:e,...t})),r[s]}function bWe(e,t,n){const r=vWe(t);return qP.set(e,n),r.observe(e),()=>{qP.delete(e),r.unobserve(e)}}const _We={some:0,all:1};class wWe extends ff{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:_We[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),p=u?d:m;p&&p(c)};return bWe(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(CWe(t,n))&&this.startObserver()}unmount(){}}function CWe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SWe={inView:{Feature:wWe},tap:{Feature:gWe},focus:{Feature:hWe},hover:{Feature:pWe}},EWe={layout:{ProjectionNode:hme,MeasureLayout:ime}},MWe={...d$e,...SWe,...mWe,...EWe},ve=IVe(MWe,BVe);function Av(e){const t=u_(()=>Fm(e)),{isStatic:n}=f.useContext(p_);if(n){const[,r]=f.useState(e);f.useEffect(()=>t.on("change",r),[])}return t}function gme(e,t){const n=Av(t()),r=()=>n.set(t());return r(),Xk(()=>{const s=()=>cr.preRender(r,!1,!0),a=e.map(i=>i.on("change",s));return()=>{a.forEach(i=>i()),Mu(r)}}),n}function kWe(e){kv.current=[],e();const t=gme(kv.current,e);return kv.current=void 0,t}function Xf(e,t,n,r){if(typeof e=="function")return kWe(e);const s=typeof t=="function"?t:$Be(t,n,r);return Array.isArray(e)?lY(e,s):lY([e],([a])=>s(a))}function lY(e,t){const n=u_(()=>[]);return gme(e,()=>{n.length=0;const r=e.length;for(let s=0;s<r;s++)n[s]=e[s].get();return t(n)})}function eh(e,t={}){const{isStatic:n}=f.useContext(p_),r=()=>as(e)?e.get():e;if(n)return Xf(r);const s=Av(r());return f.useInsertionEffect(()=>WBe(s,e,t),[s,JSON.stringify(t)]),s}function Gy(){!xF.current&&Hfe();const[e]=f.useState(gE.current);return e}function _F(e){return typeof e=="object"&&!Array.isArray(e)}function yme(e,t,n,r){return typeof e=="string"&&_F(t)?iF(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function TWe(e,t,n){return e*(t+1)}function cY(e,t,n,r){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):r.get(t)??e}function NWe(e,t,n){for(let r=0;r<e.length;r++){const s=e[r];s.at>t&&s.at<n&&(d_(e,s),r--)}}function jWe(e,t,n,r,s,a){NWe(e,s,a);for(let i=0;i<t.length;i++)e.push({value:t[i],at:jr(s,a,r[i]),easing:Hde(n,i)})}function AWe(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function IWe(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const RWe="easeInOut";function PWe(e,{defaultTransition:t={},...n}={},r,s){const a=t.duration||.3,i=new Map,l=new Map,c={},u=new Map;let d=0,m=0,p=0;for(let h=0;h<e.length;h++){const g=e[h];if(typeof g=="string"){u.set(g,m);continue}else if(!Array.isArray(g)){u.set(g.name,cY(m,g.at,d,u));continue}let[y,x,v={}]=g;v.at!==void 0&&(m=cY(m,v.at,d,u));let b=0;const _=(w,C,S,E=0,M=0)=>{const k=OWe(w),{delay:N=0,times:P=ife(k),type:L="keyframes",repeat:O,repeatType:A,repeatDelay:j=0,...T}=C;let{ease:I=t.ease||"easeOut",duration:U}=C;const B=typeof N=="function"?N(E,M):N,D=k.length,W=rF(L)?L:s?.[L||"keyframes"];if(D<=2&&W){let q=100;if(D===2&&FWe(k)){const J=k[1]-k[0];q=Math.abs(J)}const Y={...T};U!==void 0&&(Y.duration=sl(U));const G=nfe(Y,q,W);I=G.ease,U=G.duration}U??(U=a);const z=m+B;P.length===1&&P[0]===0&&(P[1]=1);const $=P.length-k.length;if($>0&&afe(P,$),k.length===1&&k.unshift(null),O){U=TWe(U,O);const q=[...k],Y=[...P];I=Array.isArray(I)?[...I]:[I];const G=[...I];for(let J=0;J<O;J++){k.push(...q);for(let K=0;K<q.length;K++)P.push(Y[K]+(J+1)),I.push(K===0?"linear":Hde(G,K-1))}AWe(P,O)}const X=z+U;jWe(S,k,I,P,z,X),b=Math.max(B+U,b),p=Math.max(X,p)};if(as(y)){const w=uY(y,l);_(x,v,dY("default",w))}else{const w=yme(y,x,r,c),C=w.length;for(let S=0;S<C;S++){x=x,v=v;const E=w[S],M=uY(E,l);for(const k in x)_(x[k],LWe(v,k),dY(k,M),S,C)}}d=m,m+=b}return l.forEach((h,g)=>{for(const y in h){const x=h[y];x.sort(IWe);const v=[],b=[],_=[];for(let C=0;C<x.length;C++){const{at:S,value:E,easing:M}=x[C];v.push(E),b.push(Dg(0,p,S)),_.push(M||"easeOut")}b[0]!==0&&(b.unshift(0),v.unshift(v[0]),_.unshift(RWe)),b[b.length-1]!==1&&(b.push(1),v.push(null)),i.has(g)||i.set(g,{keyframes:{},transition:{}});const w=i.get(g);w.keyframes[y]=v,w.transition[y]={...t,duration:p,ease:_,times:b,...n}}}),i}function uY(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function dY(e,t){return t[e]||(t[e]=[]),t[e]}function OWe(e){return Array.isArray(e)?e:[e]}function LWe(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const DWe=e=>typeof e=="number",FWe=e=>e.every(DWe);function UWe(e,t){return e in t}class BWe extends zfe{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(UWe(n,t)){const r=t[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return Dr()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function VWe(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=cF(e)&&!Sfe(e)?new Qfe(t):new Kfe(t);n.mount(e),N1.set(e,n)}function $We(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new BWe(t);n.mount(e),N1.set(e,n)}function WWe(e,t){return as(e)||typeof e=="number"||typeof e=="string"&&!_F(t)}function xme(e,t,n,r){const s=[];if(WWe(e,t))s.push(ome(e,_F(t)&&t.default||t,n&&(n.default||n)));else{const a=yme(e,t,r),i=a.length;for(let l=0;l<i;l++){const c=a[l],u=c instanceof Element?VWe:$We;N1.has(c)||u(c);const d=N1.get(c),m={...n};"delay"in m&&typeof m.delay=="function"&&(m.delay=m.delay(l,i)),s.push(...bF(d,{...t,transition:m},{}))}}return s}function HWe(e,t,n){const r=[];return PWe(e,t,n,{spring:M1}).forEach(({keyframes:a,transition:i},l)=>{r.push(...xme(l,a,i))}),r}function zWe(e){return Array.isArray(e)&&e.some(Array.isArray)}function GWe(e){function t(n,r,s){let a=[];zWe(n)?a=HWe(n,r,e):a=xme(n,r,s,e);const i=new _Be(a);return e&&(e.animations.push(i),i.finished.then(()=>{d_(e.animations,i)})),i}return t}const fY=GWe(),qWe={some:0,all:1};function KWe(e,t,{root:n,margin:r,amount:s="some"}={}){const a=iF(e),i=new WeakMap,l=u=>{u.forEach(d=>{const m=i.get(d.target);if(d.isIntersecting!==!!m)if(d.isIntersecting){const p=t(d.target,d);typeof p=="function"?i.set(d.target,p):c.unobserve(d.target)}else typeof m=="function"&&(m(d),i.delete(d.target))})},c=new IntersectionObserver(l,{root:n,rootMargin:r,threshold:typeof s=="number"?s:qWe[s]});return a.forEach(u=>c.observe(u)),()=>c.disconnect()}function YWe(e,{root:t,margin:n,amount:r,once:s=!1,initial:a=!1}={}){const[i,l]=f.useState(a);return f.useEffect(()=>{if(!e.current||s&&i)return;const c=()=>(l(!0),s?void 0:()=>l(!1)),u={root:t&&t.current||void 0,margin:n,amount:r};return KWe(e.current,c,u)},[t,e,n,s,r]),i}const QWe=()=>{const{base:e}=_t(),t=Ft();return t===(e||"/")||t?.startsWith("/search")},XWe={micro:"font-sans text-2xs font-normal",tiny:"font-sans text-xs font-medium",tinyRegular:"font-sans text-xs font-normal",tinyBold:"font-sans text-xs font-bold",extraSmall:"font-sans text-[13px]",small:"font-sans text-sm",smallBold:"font-sans text-sm font-medium leading-[1.125rem]",smallExtraBold:"font-sans text-sm font-extrabold leading-[1.125rem]",base:"font-sans text-base",baseSemi:"font-sans text-base font-medium",tinyMono:"font-mono text-2xs md:text-xs",smallMono:"font-mono text-sm",smallCaps:"text-2xs md:text-xs tracking-wide font-mono leading-none uppercase","section-title":"font-display text-lg font-medium","page-title":"font-display font-medium text-2xl",display:"font-display text-4xl lg:text-[2.8rem] !leading-[1.2]","entry-title":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-100":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-200":"font-display text-lg lg:text-xl font-medium","entry-title-300":"font-sans text-pretty font-medium"},ZWe={default:"text-foreground",defaultInverted:"text-inverse",light:"text-quiet ",ultraLight:"text-quietest",red:"text-caution",yellow:"text-yellow-600 dark:text-yellow-400",super:"text-super",white:"text-white",positive:"text-positive",negative:"text-negative",max:"text-max"},JWe=(e,t,n)=>t||(e==="page-title"?"h1":e==="entry-title"?"h2":n?"span":"div"),eHe=(e,t,n,r,s)=>{const a=XWe[e],i=ZWe[t];return V(s,a,i,n?"text-center block":"",r?"hover:text-super":"","selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super")},F=R.memo(({children:e,variant:t="base",color:n="default",textCenter:r,className:s,inline:a,superHover:i,testId:l,as:c,ref:u,...d})=>{const m=f.useMemo(()=>JWe(t,c,a),[t,c,a]),p=f.useMemo(()=>eHe(t,n,r,i,s),[s,n,r,t,i]);return R.createElement(m,{className:p,"data-testid":l,ref:u,...d},e)});F.displayName="TextBlock";const Qt={tiny:"tiny",small:"small",regular:"regular",large:"large",xl:"xl",none:"none"};var De;(function(e){e.RETRY_BUTTON="retryButton",e.PRO_PAGE="proPage",e.SHARE_DROPDOWN="shareDropdown",e.PRICING_TABLE="pricingTable",e.TRY_COPILOT="tryCopilot",e.TRY_RESEARCH="tryResearch",e.TRY_LABS="tryLabs",e.PRO_HOVER_CARD_BUTTON="proHoverCardButton",e.PRO_REASONING_SELECTOR="proReasoningSelector",e.LIBRARY_PAGE="libraryPage",e.SPACES_PAGE="spacesPage",e.SPACES_LANDING="spacesLanding",e.SPACES_TEMPLATES="spacesTemplates",e.DISCOVER_TOPICS="discoverTopics",e.COLLECTIONS="collections",e.SPACES="spaces",e.THREAD_SOCIAL="threadSocial",e.MOBILE_SIGNUP="mobileSignup",e.RELATED_QUERIES="relatedQueries",e.FILE_UPLOAD="fileUpload",e.SPACES_FILE_UPLOAD="spacesFileUpload",e.TRY_PRO="tryPro",e.HOMEPAGE_FREE_PLAN_UPSELL="homepageFreePlanUpsell",e.LOGIN_BUTTON="loginButton",e.SIGNUP_BUTTON="signupButton",e.LOGIN_BUTTON_HEADER="loginButtonHeader",e.SIGNUP_BUTTON_HEADER="signupButtonHeader",e.FLOATING_SIGNUP="floatingSignup",e.SIDEBAR_LOGIN_AD="sidebarLoginAd",e.SIDEBAR_PRO_UPSELL="sidebarProUpsell",e.SIDE_TEXT_PRO_UPSELL="sideTextProUpsell",e.VISITOR_GATE="visitorGate",e.SHARED_THREAD_LOGIN_GATE="sharedThreadLoginGate",e.SHARED_THREAD_INSTALL_GATE="sharedThreadInstallGate",e.REQUEST_ACCESS_LOGIN_GATE="requestAccessLoginGate",e.GENERATE_IMAGE="generateImage",e.PPLX_API_PAGE="pplxApiPage",e.FILES_PAGE="filesPage",e.PURCHASES_PAGE="purchasesPage",e.GOOGLE_ONETAP_HOME="oneTapHome",e.GOOGLE_ONETAP_THREAD="oneTapThread",e.GOOGLE_ONETAP_PAGE="oneTapPage",e.GOOGLE_ONETAP_DISCOVER="oneTapDiscover",e.GOOGLE_ONETAP_UNKNOWN="oneTap",e.ONBOARDING="onboarding",e.EMAIL_ASSISTANT_ONBOARDING="emailAssistantOnboarding",e.NEXTAUTH_SIGNIN_PAGE="nextauthSignInPage",e.DISCOUNT_CODE_BANNER="discountCodeBanner",e.PARTNER_CODE="partnerCode",e.ARTICLE_NEW="articleNew",e.THREAD_TO_ARTICLE="threadToArticle",e.ORG_CREATE="orgCreate",e.ORG_PANEL="orgPanel",e.LOSS_AVERSION_MODAL="lossAversionModal",e.NEW_THREAD_BUTTON="newThreadButton",e.NEW_THREAD_SHORTCUT="newThreadShortcut",e.DISCOVER_BUTTON="discoverButton",e.THREAD_BOOKMARK_BUTTON="threadBookmarkButton",e.PAGE_BOOKMARK_BUTTON="pageBookmarkButton",e.DISCOVER_FEED_BOOKMARK_BUTTON="discoverFeedBookmarkButton",e.BACK_TO_SCHOOL="backToSchool",e.WELCOME_BACK="welcomeBack",e.LEFT_HAND_NAV="leftHandNav",e.SETTINGS="settings",e.PRO_FEATURE_LIMIT_BANNER="proFeatureLimitBanner",e.BUY_WITH_PRO_BUTTON="buyWithProButton",e.FINANCE_WATCHLIST="financeWatchlist",e.DOWNLOAD_COMET="downloadComet",e.GROW_COMET="growComet",e.GROW_COMET_STUDENTS="growCometStudents",e.GROW_COMET_STUDENTS_COUNTRY="growCometStudentsCountry",e.COMET_ONBOARDING="cometOnboarding",e.PROMO_REDEMPTION="promoRedemption",e.CONNECTORS_PAGE="connectorsPage",e.MARKETING_LANDING_PAGE="marketingLandingPage",e.FINANCE_TRANSCRIPT="financeTranscript",e.FINANCE_RESEARCH="financeResearch",e.LJJ_LANDING_PAGE="ljjLandingPage",e.STUDENT_REFERRAL_LANDING_PAGE="studentReferralLandingPage",e.VOICE_TO_VOICE_BUTTON="voiceToVoiceButton",e.PRO_PERKS="proPerks",e.REFERRAL_PAGE="referralPage",e.HOTEL_BOOKING_PAGE="hotelBookingPage",e.SOURCES_VIEW_MORE="sourcesViewMore",e.SPORTS_WATCHLIST="sportsWatchlist",e.IMAGE_GENERATION_IN_THREAD="imageGenerationInThread",e.AUTO_UPGRADE_TO_PRO="autoUpgradeToPro",e.UNSPECIFIED_GENERALIZED_UPSELL="unspecifiedGeneralizedUpsell",e.MILESTONE_ACHIEVED="milestoneAchieved",e.PRO_PERKS_PARTNER_PAGE="proPerksPartnerPage",e.STUDENT_LANDING_PAGE="studentLandingPage",e.TASKS_PAGE="tasksPage",e.MAX_URL_PAYWALL="maxUrlPaywall",e.MODEL_SELECTOR="modelSelector",e.DISCOVER_FEED_LIKE_BUTTON="discoverFeedLikeButton",e.DISCOVER_FEED_DISLIKE_BUTTON="discoverFeedDislikeButton",e.DISCOVER_FEED_TASK_WIDGET="discoverFeedTaskWidget",e.SIDEBAR_BOTTOM_POPOVER="sidebarBottomPopover",e.HOME_SIDEBAR="homeSidebar",e.WHATSAPP_LINK="whatsappLink",e.UPGRADE_MODAL="upgradeModal",e.MAX_PAGE="maxPage",e.COMET_INVITE="cometInvite",e.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD="loginForCometAgentQueriesInThread",e.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD="cometAgentQueriesRateLimitedInThread",e.PRO_UPGRADE_IN_SIDE_HOMEPAGE="proUpgradeInSideHomepage",e.MISSING_OUT_ON_PRO_IN_THREAD="missingOutOnProInThread",e.VIDEO_GENERATION_IN_THREAD="videoGenerationInThread",e.STUDENT_VERIFICATION_UPSELL="studentVerificationUpsell",e.STUDENT_VERIFICATION_PAGE="studentVerificationPage",e.TRY_ASSISTANT_BUTTON="tryAssistantButton",e.COMET_NTP="cometNTP",e.EMAIL_ASSISTANT_GATE="emailAssistantGate",e.ENTERPRISE_BILLING_BANNER="enterpriseBillingBanner",e.ENTERPRISE_MAX_UPSELL="enterpriseMaxUpsell"})(De||(De={}));var Ct;(function(e){e[e.OWNER_ONLY=0]="OWNER_ONLY",e[e.PRIVATE_READ=1]="PRIVATE_READ",e[e.PUBLIC_READ=2]="PUBLIC_READ",e[e.PUBLIC_PUBLISHED=3]="PUBLIC_PUBLISHED",e[e.ORG_READ=4]="ORG_READ",e[e.COLLECTION_READ=5]="COLLECTION_READ"})(Ct||(Ct={}));const tHe={[Qt.tiny]:"xs",[Qt.small]:"sm",[Qt.regular]:"base",[Qt.large]:"lg",[Qt.xl]:"xl",[Qt.none]:"base"},Iv=R.memo(({icon:e,showClicked:t=!1,buttonSize:n,iconClassName:r})=>o.jsx(le,{icon:t?Ar:e,size:tHe[n]||"base",className:r}));Iv.displayName="BaseIcon";const Zr=R.memo(({size:e=16,className:t,...n})=>o.jsx("div",{className:V("p-two aspect-square shrink-0 animate-spin rounded-full",t),style:{width:e,backgroundImage:"conic-gradient(from 270deg, transparent 0%, currentColor 99%)",mask:`radial-gradient(transparent 0%, transparent ${e/2-2}px, black ${e/2-2}px, black) center center`},...n}));Zr.displayName="Spinner";function Wt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function mY(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function vme(...e){return t=>{let n=!1;const r=e.map(s=>{const a=mY(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():mY(e[s],null)}}}}function Hn(...e){return f.useCallback(vme(...e),e)}function nHe(e,t){const n=f.createContext(t),r=a=>{const{children:i,...l}=a,c=f.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(a){const i=f.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Mi(e,t=[]){let n=[];function r(a,i){const l=f.createContext(i),c=n.length;n=[...n,i];const u=m=>{const{scope:p,children:h,...g}=m,y=p?.[e]?.[c]||l,x=f.useMemo(()=>g,Object.values(g));return o.jsx(y.Provider,{value:x,children:h})};u.displayName=a+"Provider";function d(m,p){const h=p?.[e]?.[c]||l,g=f.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(i=>f.createContext(i));return function(l){const c=l?.[e]||a;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,rHe(s,...t)]}function rHe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(a)[`__scope${u}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function A1(e){const t=sHe(e),n=f.forwardRef((r,s)=>{const{children:a,...i}=r,l=f.Children.toArray(a),c=l.find(iHe);if(c){const u=c.props.children,d=l.map(m=>m===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...i,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}function sHe(e){const t=f.forwardRef((n,r)=>{const{children:s,...a}=n;if(f.isValidElement(s)){const i=lHe(s),l=oHe(a,s.props);return s.type!==f.Fragment&&(l.ref=r?vme(r,i):i),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bme=Symbol("radix.slottable");function aHe(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=bme,t}function iHe(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bme}function oHe(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function lHe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var cHe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],mn=cHe.reduce((e,t)=>{const n=A1(`Primitive.${t}`),r=f.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function uHe(e,t){e&&Qs.flushSync(()=>e.dispatchEvent(t))}function di(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>t.current?.(...n),[])}function dHe(e,t=globalThis?.document){const n=di(e);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var fHe="DismissableLayer",KP="dismissableLayer.update",mHe="dismissableLayer.pointerDownOutside",pHe="dismissableLayer.focusOutside",pY,_me=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),g_=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=f.useContext(_me),[d,m]=f.useState(null),p=d?.ownerDocument??globalThis?.document,[,h]=f.useState({}),g=Hn(t,E=>m(E)),y=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(x),b=d?y.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,w=b>=v,C=yHe(E=>{const M=E.target,k=[...u.branches].some(N=>N.contains(M));!w||k||(s?.(E),i?.(E),E.defaultPrevented||l?.())},p),S=xHe(E=>{const M=E.target;[...u.branches].some(N=>N.contains(M))||(a?.(E),i?.(E),E.defaultPrevented||l?.())},p);return dHe(E=>{b===u.layers.size-1&&(r?.(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),f.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(pY=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),hY(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=pY)}},[d,p,n,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),hY())},[d,u]),f.useEffect(()=>{const E=()=>h({});return document.addEventListener(KP,E),()=>document.removeEventListener(KP,E)},[]),o.jsx(mn.div,{...c,ref:g,style:{pointerEvents:_?w?"auto":"none":void 0,...e.style},onFocusCapture:Wt(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Wt(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Wt(e.onPointerDownCapture,C.onPointerDownCapture)})});g_.displayName=fHe;var hHe="DismissableLayerBranch",gHe=f.forwardRef((e,t)=>{const n=f.useContext(_me),r=f.useRef(null),s=Hn(t,r);return f.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(mn.div,{...e,ref:s})});gHe.displayName=hHe;function yHe(e,t=globalThis?.document){const n=di(e),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){wme(mHe,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function xHe(e,t=globalThis?.document){const n=di(e),r=f.useRef(!1);return f.useEffect(()=>{const s=a=>{a.target&&!r.current&&wme(pHe,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function hY(){const e=new CustomEvent(KP);document.dispatchEvent(e)}function wme(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?uHe(s,a):s.dispatchEvent(a)}var ku=globalThis?.document?f.useLayoutEffect:()=>{},vHe=dD[" useId ".trim().toString()]||(()=>{}),bHe=0;function ig(e){const[t,n]=f.useState(vHe());return ku(()=>{n(r=>r??String(bHe++))},[e]),t?`radix-${t}`:""}const _He=["top","right","bottom","left"],cl=Math.min,ua=Math.max,yE=Math.round,xC=Math.floor,oc=e=>({x:e,y:e}),wHe={left:"right",right:"left",bottom:"top",top:"bottom"},CHe={start:"end",end:"start"};function YP(e,t,n){return ua(e,cl(t,n))}function gc(e,t){return typeof e=="function"?e(t):e}function ul(e){return e.split("-")[0]}function qy(e){return e.split("-")[1]}function wF(e){return e==="x"?"y":"x"}function CF(e){return e==="y"?"height":"width"}function Tu(e){return["top","bottom"].includes(ul(e))?"y":"x"}function SF(e){return wF(Tu(e))}function SHe(e,t,n){n===void 0&&(n=!1);const r=qy(e),s=SF(e),a=CF(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=xE(i)),[i,xE(i)]}function EHe(e){const t=xE(e);return[QP(e),t,QP(t)]}function QP(e){return e.replace(/start|end/g,t=>CHe[t])}function MHe(e,t,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?a:i;default:return[]}}function kHe(e,t,n,r){const s=qy(e);let a=MHe(ul(e),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(QP)))),a}function xE(e){return e.replace(/left|right|bottom|top/g,t=>wHe[t])}function THe(e){return{top:0,right:0,bottom:0,left:0,...e}}function EF(e){return typeof e!="number"?THe(e):{top:e,right:e,bottom:e,left:e}}function Ug(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function gY(e,t,n){let{reference:r,floating:s}=e;const a=Tu(t),i=SF(t),l=CF(i),c=ul(t),u=a==="y",d=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let h;switch(c){case"top":h={x:d,y:r.y-s.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:m};break;case"left":h={x:r.x-s.width,y:m};break;default:h={x:r.x,y:r.y}}switch(qy(t)){case"start":h[i]-=p*(n&&u?-1:1);break;case"end":h[i]+=p*(n&&u?-1:1);break}return h}const NHe=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:m}=gY(u,r,c),p=r,h={},g=0;for(let y=0;y<l.length;y++){const{name:x,fn:v}=l[y],{x:b,y:_,data:w,reset:C}=await v({x:d,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});d=b??d,m=_??m,h={...h,[x]:{...h[x],...w}},C&&g<=50&&(g++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(u=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:d,y:m}=gY(u,p,c)),y=-1)}return{x:d,y:m,placement:p,strategy:s,middlewareData:h}};async function I1(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:p=!1,padding:h=0}=gc(t,e),g=EF(h),x=l[p?m==="floating"?"reference":"floating":m],v=Ug(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(x)))==null||n?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=m==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),w=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},C=Ug(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:_,strategy:c}):b);return{top:(v.top-C.top+g.top)/w.y,bottom:(C.bottom-v.bottom+g.bottom)/w.y,left:(v.left-C.left+g.left)/w.x,right:(C.right-v.right+g.right)/w.x}}const jHe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=gc(e,t)||{};if(u==null)return{};const m=EF(d),p={x:n,y:r},h=SF(s),g=CF(h),y=await i.getDimensions(u),x=h==="y",v=x?"top":"left",b=x?"bottom":"right",_=x?"clientHeight":"clientWidth",w=a.reference[g]+a.reference[h]-p[h]-a.floating[g],C=p[h]-a.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let E=S?S[_]:0;(!E||!await(i.isElement==null?void 0:i.isElement(S)))&&(E=l.floating[_]||a.floating[g]);const M=w/2-C/2,k=E/2-y[g]/2-1,N=cl(m[v],k),P=cl(m[b],k),L=N,O=E-y[g]-P,A=E/2-y[g]/2+M,j=YP(L,A,O),T=!c.arrow&&qy(s)!=null&&A!==j&&a.reference[g]/2-(A<L?N:P)-y[g]/2<0,I=T?A<L?A-L:A-O:0;return{[h]:p[h]+I,data:{[h]:j,centerOffset:A-j-I,...T&&{alignmentOffset:I}},reset:T}}}),AHe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...x}=gc(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=ul(s),b=Tu(l),_=ul(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=p||(_||!y?[xE(l)]:EHe(l)),S=g!=="none";!p&&S&&C.push(...kHe(l,y,g,w));const E=[l,...C],M=await I1(t,x),k=[];let N=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&k.push(M[v]),m){const A=SHe(s,i,w);k.push(M[A[0]],M[A[1]])}if(N=[...N,{placement:s,overflows:k}],!k.every(A=>A<=0)){var P,L;const A=(((P=a.flip)==null?void 0:P.index)||0)+1,j=E[A];if(j)return{data:{index:A,overflows:N},reset:{placement:j}};let T=(L=N.filter(I=>I.overflows[0]<=0).sort((I,U)=>I.overflows[1]-U.overflows[1])[0])==null?void 0:L.placement;if(!T)switch(h){case"bestFit":{var O;const I=(O=N.filter(U=>{if(S){const B=Tu(U.placement);return B===b||B==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(B=>B>0).reduce((B,D)=>B+D,0)]).sort((U,B)=>U[1]-B[1])[0])==null?void 0:O[0];I&&(T=I);break}case"initialPlacement":T=l;break}if(s!==T)return{reset:{placement:T}}}return{}}}};function yY(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function xY(e){return _He.some(t=>e[t]>=0)}const IHe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=gc(e,t);switch(r){case"referenceHidden":{const a=await I1(t,{...s,elementContext:"reference"}),i=yY(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:xY(i)}}}case"escaped":{const a=await I1(t,{...s,altBoundary:!0}),i=yY(a,n.floating);return{data:{escapedOffsets:i,escaped:xY(i)}}}default:return{}}}}};function Cme(e){const t=cl(...e.map(a=>a.left)),n=cl(...e.map(a=>a.top)),r=ua(...e.map(a=>a.right)),s=ua(...e.map(a=>a.bottom));return{x:t,y:n,width:r-t,height:s-n}}function RHe(e){const t=e.slice().sort((s,a)=>s.y-a.y),n=[];let r=null;for(let s=0;s<t.length;s++){const a=t[s];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map(s=>Ug(Cme(s)))}const PHe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:a,strategy:i}=t,{padding:l=2,x:c,y:u}=gc(e,t),d=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),m=RHe(d),p=Ug(Cme(d)),h=EF(l);function g(){if(m.length===2&&m[0].left>m[1].right&&c!=null&&u!=null)return m.find(x=>c>x.left-h.left&&c<x.right+h.right&&u>x.top-h.top&&u<x.bottom+h.bottom)||p;if(m.length>=2){if(Tu(n)==="y"){const N=m[0],P=m[m.length-1],L=ul(n)==="top",O=N.top,A=P.bottom,j=L?N.left:P.left,T=L?N.right:P.right,I=T-j,U=A-O;return{top:O,bottom:A,left:j,right:T,width:I,height:U,x:j,y:O}}const x=ul(n)==="left",v=ua(...m.map(N=>N.right)),b=cl(...m.map(N=>N.left)),_=m.filter(N=>x?N.left===b:N.right===v),w=_[0].top,C=_[_.length-1].bottom,S=b,E=v,M=E-S,k=C-w;return{top:w,bottom:C,left:S,right:E,width:M,height:k,x:S,y:w}}return p}const y=await a.getElementRects({reference:{getBoundingClientRect:g},floating:r.floating,strategy:i});return s.reference.x!==y.reference.x||s.reference.y!==y.reference.y||s.reference.width!==y.reference.width||s.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}};async function OHe(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=ul(n),l=qy(n),c=Tu(n)==="y",u=["left","top"].includes(i)?-1:1,d=a&&c?-1:1,m=gc(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof g=="number"&&(h=l==="end"?g*-1:g),c?{x:h*d,y:p*u}:{x:p*u,y:h*d}}const LHe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await OHe(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},DHe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:v,y:b}=x;return{x:v,y:b}}},...c}=gc(e,t),u={x:n,y:r},d=await I1(t,c),m=Tu(ul(s)),p=wF(m);let h=u[p],g=u[m];if(a){const x=p==="y"?"top":"left",v=p==="y"?"bottom":"right",b=h+d[x],_=h-d[v];h=YP(b,h,_)}if(i){const x=m==="y"?"top":"left",v=m==="y"?"bottom":"right",b=g+d[x],_=g-d[v];g=YP(b,g,_)}const y=l.fn({...t,[p]:h,[m]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:a,[m]:i}}}}}},FHe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=gc(e,t),d={x:n,y:r},m=Tu(s),p=wF(m);let h=d[p],g=d[m];const y=gc(l,t),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=p==="y"?"height":"width",w=a.reference[p]-a.floating[_]+x.mainAxis,C=a.reference[p]+a.reference[_]-x.mainAxis;h<w?h=w:h>C&&(h=C)}if(u){var v,b;const _=p==="y"?"width":"height",w=["top","left"].includes(ul(s)),C=a.reference[m]-a.floating[_]+(w&&((v=i.offset)==null?void 0:v[m])||0)+(w?0:x.crossAxis),S=a.reference[m]+a.reference[_]+(w?0:((b=i.offset)==null?void 0:b[m])||0)-(w?x.crossAxis:0);g<C?g=C:g>S&&(g=S)}return{[p]:h,[m]:g}}}},UHe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=gc(e,t),d=await I1(t,u),m=ul(s),p=qy(s),h=Tu(s)==="y",{width:g,height:y}=a.floating;let x,v;m==="top"||m==="bottom"?(x=m,v=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(v=m,x=p==="end"?"top":"bottom");const b=y-d.top-d.bottom,_=g-d.left-d.right,w=cl(y-d[x],b),C=cl(g-d[v],_),S=!t.middlewareData.shift;let E=w,M=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(M=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=b),S&&!p){const N=ua(d.left,0),P=ua(d.right,0),L=ua(d.top,0),O=ua(d.bottom,0);h?M=g-2*(N!==0||P!==0?N+P:ua(d.left,d.right)):E=y-2*(L!==0||O!==0?L+O:ua(d.top,d.bottom))}await c({...t,availableWidth:M,availableHeight:E});const k=await i.getDimensions(l.floating);return g!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function r3(){return typeof window<"u"}function Ky(e){return Sme(e)?(e.nodeName||"").toLowerCase():"#document"}function Xi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ac(e){var t;return(t=(Sme(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Sme(e){return r3()?e instanceof Node||e instanceof Xi(e).Node:!1}function Va(e){return r3()?e instanceof Element||e instanceof Xi(e).Element:!1}function yc(e){return r3()?e instanceof HTMLElement||e instanceof Xi(e).HTMLElement:!1}function vY(e){return!r3()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Xi(e).ShadowRoot}function y_(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Ao(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function BHe(e){return["table","td","th"].includes(Ky(e))}function s3(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function MF(e){const t=kF(),n=Va(e)?Ao(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function VHe(e){let t=Hd(e);for(;yc(t)&&!Bg(t);){if(MF(t))return t;if(s3(t))return null;t=Hd(t)}return null}function kF(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Bg(e){return["html","body","#document"].includes(Ky(e))}function Ao(e){return Xi(e).getComputedStyle(e)}function a3(e){return Va(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hd(e){if(Ky(e)==="html")return e;const t=e.assignedSlot||e.parentNode||vY(e)&&e.host||Ac(e);return vY(t)?t.host:t}function Eme(e){const t=Hd(e);return Bg(t)?e.ownerDocument?e.ownerDocument.body:e.body:yc(t)&&y_(t)?t:Eme(t)}function R1(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Eme(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=Xi(s);if(a){const l=XP(i);return t.concat(i,i.visualViewport||[],y_(s)?s:[],l&&n?R1(l):[])}return t.concat(s,R1(s,[],n))}function XP(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Mme(e){const t=Ao(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=yc(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=yE(n)!==a||yE(r)!==i;return l&&(n=a,r=i),{width:n,height:r,$:l}}function TF(e){return Va(e)?e:e.contextElement}function og(e){const t=TF(e);if(!yc(t))return oc(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=Mme(t);let i=(a?yE(n.width):n.width)/r,l=(a?yE(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const $He=oc(0);function kme(e){const t=Xi(e);return!kF()||!t.visualViewport?$He:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function WHe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Xi(e)?!1:t}function Um(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=TF(e);let i=oc(1);t&&(r?Va(r)&&(i=og(r)):i=og(e));const l=WHe(a,n,r)?kme(a):oc(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,m=s.height/i.y;if(a){const p=Xi(a),h=r&&Va(r)?Xi(r):r;let g=p,y=XP(g);for(;y&&r&&h!==g;){const x=og(y),v=y.getBoundingClientRect(),b=Ao(y),_=v.left+(y.clientLeft+parseFloat(b.paddingLeft))*x.x,w=v.top+(y.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,m*=x.y,c+=_,u+=w,g=Xi(y),y=XP(g)}}return Ug({width:d,height:m,x:c,y:u})}function NF(e,t){const n=a3(e).scrollLeft;return t?t.left+n:Um(Ac(e)).left+n}function Tme(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:NF(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function HHe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=Ac(r),l=t?s3(t.floating):!1;if(r===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=oc(1);const d=oc(0),m=yc(r);if((m||!m&&!a)&&((Ky(r)!=="body"||y_(i))&&(c=a3(r)),yc(r))){const h=Um(r);u=og(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const p=i&&!m&&!a?Tme(i,c,!0):oc(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function zHe(e){return Array.from(e.getClientRects())}function GHe(e){const t=Ac(e),n=a3(e),r=e.ownerDocument.body,s=ua(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=ua(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+NF(e);const l=-n.scrollTop;return Ao(r).direction==="rtl"&&(i+=ua(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:l}}function qHe(e,t){const n=Xi(e),r=Ac(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const u=kF();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l,y:c}}function KHe(e,t){const n=Um(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=yc(e)?og(e):oc(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:l,x:c,y:u}}function bY(e,t,n){let r;if(t==="viewport")r=qHe(e,n);else if(t==="document")r=GHe(Ac(e));else if(Va(t))r=KHe(t,n);else{const s=kme(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ug(r)}function Nme(e,t){const n=Hd(e);return n===t||!Va(n)||Bg(n)?!1:Ao(n).position==="fixed"||Nme(n,t)}function YHe(e,t){const n=t.get(e);if(n)return n;let r=R1(e,[],!1).filter(l=>Va(l)&&Ky(l)!=="body"),s=null;const a=Ao(e).position==="fixed";let i=a?Hd(e):e;for(;Va(i)&&!Bg(i);){const l=Ao(i),c=MF(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||y_(i)&&!c&&Nme(e,i))?r=r.filter(d=>d!==i):s=l,i=Hd(i)}return t.set(e,r),r}function QHe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?s3(t)?[]:YHe(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,d)=>{const m=bY(t,d,s);return u.top=ua(m.top,u.top),u.right=cl(m.right,u.right),u.bottom=cl(m.bottom,u.bottom),u.left=ua(m.left,u.left),u},bY(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function XHe(e){const{width:t,height:n}=Mme(e);return{width:t,height:n}}function ZHe(e,t,n){const r=yc(t),s=Ac(t),a=n==="fixed",i=Um(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=oc(0);if(r||!r&&!a)if((Ky(t)!=="body"||y_(s))&&(l=a3(t)),r){const p=Um(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=NF(s));const u=s&&!r&&!a?Tme(s,l):oc(0),d=i.left+l.scrollLeft-c.x-u.x,m=i.top+l.scrollTop-c.y-u.y;return{x:d,y:m,width:i.width,height:i.height}}function q4(e){return Ao(e).position==="static"}function _Y(e,t){if(!yc(e)||Ao(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ac(e)===n&&(n=n.ownerDocument.body),n}function jme(e,t){const n=Xi(e);if(s3(e))return n;if(!yc(e)){let s=Hd(e);for(;s&&!Bg(s);){if(Va(s)&&!q4(s))return s;s=Hd(s)}return n}let r=_Y(e,t);for(;r&&BHe(r)&&q4(r);)r=_Y(r,t);return r&&Bg(r)&&q4(r)&&!MF(r)?n:r||VHe(e)||n}const JHe=async function(e){const t=this.getOffsetParent||jme,n=this.getDimensions,r=await n(e.floating);return{reference:ZHe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eze(e){return Ao(e).direction==="rtl"}const tze={convertOffsetParentRelativeRectToViewportRelativeRect:HHe,getDocumentElement:Ac,getClippingRect:QHe,getOffsetParent:jme,getElementRects:JHe,getClientRects:zHe,getDimensions:XHe,getScale:og,isElement:Va,isRTL:eze};function Ame(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function nze(e,t){let n=null,r;const s=Ac(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:m,width:p,height:h}=u;if(l||t(),!p||!h)return;const g=xC(m),y=xC(s.clientWidth-(d+p)),x=xC(s.clientHeight-(m+h)),v=xC(d),_={rootMargin:-g+"px "+-y+"px "+-x+"px "+-v+"px",threshold:ua(0,cl(1,c))||1};let w=!0;function C(S){const E=S[0].intersectionRatio;if(E!==c){if(!w)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!Ame(u,e.getBoundingClientRect())&&i(),w=!1}try{n=new IntersectionObserver(C,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,_)}n.observe(e)}return i(!0),a}function Ime(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=TF(e),d=s||a?[...u?R1(u):[],...R1(t)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const m=u&&l?nze(u,n):null;let p=-1,h=null;i&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let g,y=c?Um(e):null;c&&x();function x(){const v=Um(e);y&&!Ame(y,v)&&n(),y=v,g=requestAnimationFrame(x)}return n(),()=>{var v;d.forEach(b=>{s&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),m?.(),(v=h)==null||v.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const rze=LHe,sze=DHe,aze=AHe,ize=UHe,oze=IHe,wY=jHe,Gon=PHe,lze=FHe,cze=(e,t,n)=>{const r=new Map,s={platform:tze,...n},a={...s.platform,_c:r};return NHe(e,t,{...s,platform:a})};var h2=typeof document<"u"?f.useLayoutEffect:f.useEffect;function vE(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!vE(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!vE(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Rme(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function CY(e,t){const n=Rme(e);return Math.round(t*n)/n}function K4(e){const t=f.useRef(e);return h2(()=>{t.current=e}),t}function Pme(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,m]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=f.useState(r);vE(p,r)||h(r);const[g,y]=f.useState(null),[x,v]=f.useState(null),b=f.useCallback(U=>{U!==S.current&&(S.current=U,y(U))},[]),_=f.useCallback(U=>{U!==E.current&&(E.current=U,v(U))},[]),w=a||g,C=i||x,S=f.useRef(null),E=f.useRef(null),M=f.useRef(d),k=c!=null,N=K4(c),P=K4(s),L=K4(u),O=f.useCallback(()=>{if(!S.current||!E.current)return;const U={placement:t,strategy:n,middleware:p};P.current&&(U.platform=P.current),cze(S.current,E.current,U).then(B=>{const D={...B,isPositioned:L.current!==!1};A.current&&!vE(M.current,D)&&(M.current=D,Qs.flushSync(()=>{m(D)}))})},[p,t,n,P,L]);h2(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,m(U=>({...U,isPositioned:!1})))},[u]);const A=f.useRef(!1);h2(()=>(A.current=!0,()=>{A.current=!1}),[]),h2(()=>{if(w&&(S.current=w),C&&(E.current=C),w&&C){if(N.current)return N.current(w,C,O);O()}},[w,C,O,N,k]);const j=f.useMemo(()=>({reference:S,floating:E,setReference:b,setFloating:_}),[b,_]),T=f.useMemo(()=>({reference:w,floating:C}),[w,C]),I=f.useMemo(()=>{const U={position:n,left:0,top:0};if(!T.floating)return U;const B=CY(T.floating,d.x),D=CY(T.floating,d.y);return l?{...U,transform:"translate("+B+"px, "+D+"px)",...Rme(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:D}},[n,l,T.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:O,refs:j,elements:T,floatingStyles:I}),[d,O,j,T,I])}const uze=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?wY({element:r.current,padding:s}).fn(n):{}:r?wY({element:r,padding:s}).fn(n):{}}}},jF=(e,t)=>({...rze(e),options:[e,t]}),Ome=(e,t)=>({...sze(e),options:[e,t]}),Lme=(e,t)=>({...lze(e),options:[e,t]}),Dme=(e,t)=>({...aze(e),options:[e,t]}),Fme=(e,t)=>({...ize(e),options:[e,t]}),dze=(e,t)=>({...oze(e),options:[e,t]}),Ume=(e,t)=>({...uze(e),options:[e,t]});var fze="Arrow",Bme=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return o.jsx(mn.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Bme.displayName=fze;var mze=Bme;function i3(e){const[t,n]=f.useState(void 0);return ku(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var AF="Popper",[Vme,Yy]=Mi(AF),[pze,$me]=Vme(AF),Wme=e=>{const{__scopePopper:t,children:n}=e,[r,s]=f.useState(null);return o.jsx(pze,{scope:t,anchor:r,onAnchorChange:s,children:n})};Wme.displayName=AF;var Hme="PopperAnchor",zme=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=$me(Hme,n),i=f.useRef(null),l=Hn(t,i),c=f.useRef(null);return f.useEffect(()=>{const u=c.current;c.current=r?.current||i.current,u!==c.current&&a.onAnchorChange(c.current)}),r?null:o.jsx(mn.div,{...s,ref:l})});zme.displayName=Hme;var IF="PopperContent",[hze,gze]=Vme(IF),Gme=f.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:g,...y}=e,x=$me(IF,n),[v,b]=f.useState(null),_=Hn(t,G=>b(G)),[w,C]=f.useState(null),S=i3(w),E=S?.width??0,M=S?.height??0,k=r+(a!=="center"?"-"+a:""),N=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],L=P.length>0,O={padding:N,boundary:P.filter(xze),altBoundary:L},{refs:A,floatingStyles:j,placement:T,isPositioned:I,middlewareData:U}=Pme({strategy:"fixed",placement:k,whileElementsMounted:(...G)=>Ime(...G,{animationFrame:h==="always"}),elements:{reference:x.anchor},middleware:[jF({mainAxis:s+M,alignmentAxis:i}),c&&Ome({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Lme():void 0,...O}),c&&Dme({...O}),Fme({...O,apply:({elements:G,rects:J,availableWidth:K,availableHeight:te})=>{const{width:re,height:se}=J.reference,me=G.floating.style;me.setProperty("--radix-popper-available-width",`${K}px`),me.setProperty("--radix-popper-available-height",`${te}px`),me.setProperty("--radix-popper-anchor-width",`${re}px`),me.setProperty("--radix-popper-anchor-height",`${se}px`)}}),w&&Ume({element:w,padding:l}),vze({arrowWidth:E,arrowHeight:M}),p&&dze({strategy:"referenceHidden",...O})]}),[B,D]=Yme(T),W=di(g);ku(()=>{I&&W?.()},[I,W]);const z=U.arrow?.x,$=U.arrow?.y,X=U.arrow?.centerOffset!==0,[q,Y]=f.useState();return ku(()=>{v&&Y(window.getComputedStyle(v).zIndex)},[v]),o.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:I?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(hze,{scope:n,placedSide:B,onArrowChange:C,arrowX:z,arrowY:$,shouldHideArrow:X,children:o.jsx(mn.div,{"data-side":B,"data-align":D,...y,ref:_,style:{...y.style,animation:I?void 0:"none"}})})})});Gme.displayName=IF;var qme="PopperArrow",yze={top:"bottom",right:"left",bottom:"top",left:"right"},Kme=f.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=gze(qme,r),i=yze[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(mze,{...s,ref:n,style:{...s.style,display:"block"}})})});Kme.displayName=qme;function xze(e){return e!==null}var vze=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,i=s.arrow?.centerOffset!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=Yme(n),m={start:"0%",center:"50%",end:"100%"}[d],p=(s.arrow?.x??0)+l/2,h=(s.arrow?.y??0)+c/2;let g="",y="";return u==="bottom"?(g=i?m:`${p}px`,y=`${-c}px`):u==="top"?(g=i?m:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,y=i?m:`${h}px`):u==="left"&&(g=`${r.floating.width+c}px`,y=i?m:`${h}px`),{data:{x:g,y}}}});function Yme(e){const[t,n="center"]=e.split("-");return[t,n]}var RF=Wme,o3=zme,PF=Gme,OF=Kme,bze="Portal",x_=f.forwardRef((e,t)=>{const{container:n,...r}=e,[s,a]=f.useState(!1);ku(()=>a(!0),[]);const i=n||s&&globalThis?.document?.body;return i?due.createPortal(o.jsx(mn.div,{...r,ref:t}),i):null});x_.displayName=bze;function _ze(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var wa=e=>{const{present:t,children:n}=e,r=wze(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),a=Hn(r.ref,Cze(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:a}):null};wa.displayName="Presence";function wze(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),a=f.useRef("none"),i=e?"mounted":"unmounted",[l,c]=_ze(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=vC(r.current);a.current=l==="mounted"?u:"none"},[l]),ku(()=>{const u=r.current,d=s.current;if(d!==e){const p=a.current,h=vC(u);e?c("MOUNT"):h==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&p!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ku(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,m=h=>{const y=vC(r.current).includes(CSS.escape(h.animationName));if(h.target===t&&y&&(c("ANIMATION_END"),!s.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},p=h=>{h.target===t&&(a.current=vC(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function vC(e){return e?.animationName||"none"}function Cze(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Sze=dD[" useInsertionEffect ".trim().toString()]||ku;function Cl({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=Eze({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const m=d.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=f.useCallback(d=>{if(l){const m=Mze(d)?d(e):d;m!==e&&i.current?.(m)}else a(d)},[l,e,a,i]);return[c,u]}function Eze({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),s=f.useRef(n),a=f.useRef(t);return Sze(()=>{a.current=t},[t]),f.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}function Mze(e){return typeof e=="function"}var kze=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Tze="VisuallyHidden",v_=f.forwardRef((e,t)=>o.jsx(mn.span,{...e,ref:t,style:{...kze,...e.style}}));v_.displayName=Tze;var LF=v_,[l3,qon]=Mi("Tooltip",[Yy]),c3=Yy(),Qme="TooltipProvider",Nze=700,ZP="tooltip.open",[jze,DF]=l3(Qme),FF=e=>{const{__scopeTooltip:t,delayDuration:n=Nze,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,i=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(jze,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};FF.displayName=Qme;var P1="Tooltip",[Aze,b_]=l3(P1),Xme=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:i,delayDuration:l}=e,c=DF(P1,e.__scopeTooltip),u=c3(t),[d,m]=f.useState(null),p=ig(),h=f.useRef(0),g=i??c.disableHoverableContent,y=l??c.delayDuration,x=f.useRef(!1),[v,b]=Cl({prop:r,defaultProp:s??!1,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(ZP))):c.onClose(),a?.(E)},caller:P1}),_=f.useMemo(()=>v?x.current?"delayed-open":"instant-open":"closed",[v]),w=f.useCallback(()=>{window.clearTimeout(h.current),h.current=0,x.current=!1,b(!0)},[b]),C=f.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b(!1)},[b]),S=f.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{x.current=!0,b(!0),h.current=0},y)},[y,b]);return f.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),o.jsx(RF,{...u,children:o.jsx(Aze,{scope:t,contentId:p,open:v,stateAttribute:_,trigger:d,onTriggerChange:m,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayedRef.current?S():w()},[c.isOpenDelayedRef,S,w]),onTriggerLeave:f.useCallback(()=>{g?C():(window.clearTimeout(h.current),h.current=0)},[C,g]),onOpen:w,onClose:C,disableHoverableContent:g,children:n})})};Xme.displayName=P1;var JP="TooltipTrigger",UF=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=b_(JP,n),a=DF(JP,n),i=c3(n),l=f.useRef(null),c=Hn(t,l,s.onTriggerChange),u=f.useRef(!1),d=f.useRef(!1),m=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(o3,{asChild:!0,...i,children:o.jsx(mn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Wt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Wt(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Wt(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Wt(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Wt(e.onBlur,s.onClose),onClick:Wt(e.onClick,s.onClose)})})});UF.displayName=JP;var BF="TooltipPortal",[Ize,Rze]=l3(BF,{forceMount:void 0}),VF=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,a=b_(BF,t);return o.jsx(Ize,{scope:t,forceMount:n,children:o.jsx(wa,{present:n||a.open,children:o.jsx(x_,{asChild:!0,container:s,children:r})})})};VF.displayName=BF;var Vg="TooltipContent",$F=f.forwardRef((e,t)=>{const n=Rze(Vg,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=b_(Vg,e.__scopeTooltip);return o.jsx(wa,{present:r||i.open,children:i.disableHoverableContent?o.jsx(Zme,{side:s,...a,ref:t}):o.jsx(Pze,{side:s,...a,ref:t})})}),Pze=f.forwardRef((e,t)=>{const n=b_(Vg,e.__scopeTooltip),r=DF(Vg,e.__scopeTooltip),s=f.useRef(null),a=Hn(t,s),[i,l]=f.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:m}=r,p=f.useCallback(()=>{l(null),m(!1)},[m]),h=f.useCallback((g,y)=>{const x=g.currentTarget,v={x:g.clientX,y:g.clientY},b=Fze(v,x.getBoundingClientRect()),_=Uze(v,b),w=Bze(y.getBoundingClientRect()),C=$ze([..._,...w]);l(C),m(!0)},[m]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&d){const g=x=>h(x,d),y=x=>h(x,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",y)}}},[c,d,h,p]),f.useEffect(()=>{if(i){const g=y=>{const x=y.target,v={x:y.clientX,y:y.clientY},b=c?.contains(x)||d?.contains(x),_=!Vze(v,i);b?p():_&&(p(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,i,u,p]),o.jsx(Zme,{...e,ref:a})}),[Oze,Lze]=l3(P1,{isInside:!1}),Dze=aHe("TooltipContent"),Zme=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=b_(Vg,n),u=c3(n),{onClose:d}=c;return f.useEffect(()=>(document.addEventListener(ZP,d),()=>document.removeEventListener(ZP,d)),[d]),f.useEffect(()=>{if(c.trigger){const m=p=>{p.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,d]),o.jsx(g_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:o.jsxs(PF,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(Dze,{children:r}),o.jsx(Oze,{scope:n,isInside:!0,children:o.jsx(LF,{id:c.contentId,role:"tooltip",children:s||r})})]})})});$F.displayName=Vg;var Jme="TooltipArrow",bE=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=c3(n);return Lze(Jme,n).isInside?null:o.jsx(OF,{...s,...r,ref:t})});bE.displayName=Jme;function Fze(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Uze(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Bze(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function Vze(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,d=l.y,m=c.x,p=c.y;d>r!=p>r&&n<(m-u)*(r-d)/(p-d)+u&&(s=!s)}return s}function $ze(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Wze(t)}function Wze(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Hze=FF,epe=Xme,zze=UF,Gze=VF,qze=$F,Kze=bE;const tpe=new Proxy(Object.freeze([]),{set(){throw new Error("Cannot modify default array")}}),fe=tpe,npe=new Proxy(Object.freeze({}),{set(){throw new Error("Cannot modify default object")}}),rpe=R.memo(({className:e,textClassName:t,text:n,shortcut:r=fe,...s})=>o.jsxs("div",{className:V("gap-x-sm bg-dark dark:border-subtler flex max-w-[280px] items-center rounded-md px-2 py-1.5 shadow-sm dark:border",e),...s,children:[typeof n=="string"?o.jsx(F,{variant:"tiny",color:"white",className:t,children:n}):n,r.length>0&&o.jsx("div",{className:"gap-xs flex",children:r.map(a=>o.jsx(F,{variant:"smallCaps",className:"border-subtlest bg-subtle px-xs py-two min-w-6 rounded border text-center shadow-sm",children:o.jsx("span",{className:"text-light",children:a})},a))})]}));rpe.displayName="TooltipBody";const En=R.memo(({tooltipText:e,tooltipLayout:t="top",children:n,keyboardShortcut:r,showTooltip:s=!0,className:a="",asChild:i=!1,testId:l,offset:c=8,closeOnClick:u=!0,bodyClassName:d,bodyTextClassName:m,arrowClassName:p,open:h,onClickOutsideTooltip:g,onOpenChange:y,delayDuration:x,childrenClassName:v})=>s?o.jsxs(epe,{open:h,onOpenChange:y,delayDuration:x,children:[o.jsx(Gze,{children:o.jsxs(qze,{side:t,sideOffset:c,className:V(t==="bottom"&&"data-[state=closed]:animate-slideUpAndFadeOut data-[state=delayed-open]:animate-slideDownAndFadeIn",t==="top"&&"data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn",t==="left"&&"data-[state=closed]:animate-slideRightAndFadeOut data-[state=delayed-open]:animate-slideLeftAndFadeIn",t==="right"&&"data-[state=closed]:animate-slideLeftAndFadeOut data-[state=delayed-open]:animate-slideRightAndFadeIn",a),onPointerDownOutside:u?g:_=>{_.preventDefault()},children:[o.jsx(rpe,{text:e,shortcut:r,"data-test-id":l,className:d,textClassName:m}),p&&o.jsx(Kze,{width:12,height:6,className:V("overflow-hidden translate-y-[-2px] [clip-path:inset(1px_1px_0px_1px)] fill-[oklch(var(--dark-background-base-color))] dark:stroke-[1.5px] dark:stroke-subtler",p)})]})}),o.jsx(zze,{asChild:i,className:v,onClick:u?g:_=>{_.preventDefault()},children:n})]}):o.jsx(o.Fragment,{children:n}));En.displayName="TooltipWrapper";const Yze=2e3,Qze=1e3,SY={[Qt.tiny]:{height:"h-6",text:"text-xs",padding:"px-2",iconWrapperSize:"size-3.5",baselineShift:"-mb-px"},[Qt.small]:{height:"h-8",text:"text-sm",padding:"px-2.5",iconWrapperSize:"size-4",baselineShift:"-mb-px"},[Qt.regular]:{height:"h-10",text:"text-base",padding:"px-3",iconWrapperSize:"size-5",baselineShift:"mb-[-2px]"},[Qt.large]:{height:"h-14",text:"text-lg",padding:"px-5",iconWrapperSize:"size-7",baselineShift:"mb-[-3px]"}},spe=e=>SY[e]||SY[Qt.regular],EY=({children:e,buttonSize:t=Qt.regular})=>o.jsx("div",{className:V("flex shrink-0 items-center justify-center",spe(t).iconWrapperSize),children:e}),WF=f.memo(e=>{const{text:t,textClassName:n="",size:r=Qt.regular,disabled:s=!1,fullWidth:a,fullWidthMobile:i,layout:l="center",type:c="button",noWrap:u=!0,onClick:d=Pn,onMouseDown:m,href:p,target:h,extraCSS:g,icon:y,iconClassName:x,pill:v=!1,noRounded:b=!1,toolTip:_,keyboardShortcut:w,tooltipLayout:C="top",tooltipProps:S,badge:E,chevron:M,isLoading:k,loadingVariant:N="spin",leadingComponent:P,trailingComponent:L,maxWidth:O,chevronIcon:A=Bn,clickFeedback:j=!1,debounce:T=!1,testId:I,ariaLabel:U,variant:B,autoFocus:D,noPadding:W=!1,ref:z,...$}=e,[X,q]=f.useState(!1),[Y,G]=f.useState(!1),[J,K]=f.useState(s),te=f.useMemo(()=>spe(r),[r]);f.useEffect(()=>{K(T&&Y||s)},[T,Y,s]);const re=Ne=>{(!T||!Y)&&(G(!0),setTimeout(()=>G(!1),Qze),d(Ne)),j&&(q(!0),setTimeout(()=>q(!1),Yze))},se=!!t,me=f.useMemo(()=>V(g,"font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium",{"justify-center text-center items-center":l==="center","justify-start":l==="left","rounded-none":b,"rounded-lg":!v&&!b,"rounded-full":v&&!b,"cursor-default opacity-50":J,"cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center":!J,"whitespace-nowrap":u,"break-words":!u,"flex w-full":a,"inline-flex":!a&&!i,"flex w-full md:inline-flex md:w-auto":i,[te.text]:!0,[te.height]:!0,[te.padding]:se,[v?"aspect-square":"aspect-[9/8]"]:!se&&!M&&!E&&!(y&&P)}),[E,te,M,J,g,a,i,se,y,l,P,b,u,v]),oe=f.useMemo(()=>V("flex items-center min-w-0 gap-two",{"flex-col":l==="stacked","justify-center":l==="center","justify-left":l==="left","justify-between":l==="split","w-full":a,"gap-sm":l==="stacked"}),[a,l]),ge=f.useMemo(()=>l==="stacked"||r===Qt.regular&&!se||r===Qt.large&&se?16:14,[l,r,se]),xe=o.jsxs("div",{className:oe,style:{maxWidth:O},children:[P&&o.jsx("div",{children:P}),k&&o.jsx(EY,{buttonSize:r,children:N==="spin"?o.jsx(Zr,{size:ge}):N==="pulse"?o.jsx("div",{className:V("relative flex items-center justify-center",B==="primary"?"text-inverse":"text-super"),children:o.jsxs("div",{className:"relative scale-[0.8]",children:[o.jsx(Iv,{icon:mP,buttonSize:r}),o.jsx(Iv,{icon:mP,buttonSize:r,iconClassName:"duration-1200 absolute inset-0 animate-ping"})]})}):null}),!k&&y&&o.jsx(EY,{buttonSize:r,children:o.jsx(Iv,{icon:y,showClicked:X,buttonSize:r,iconClassName:x})}),t&&o.jsx("div",{className:V("relative truncate text-center",{"px-1":!W,"leading-loose":l!=="stacked","leading-none":l==="stacked"},te.baselineShift,n),children:t}),E&&o.jsxs("span",{children:["  ",E]}),M&&o.jsx(le,{size:"xs",icon:A,className:"shrink-0 opacity-50"}),L]});let ye;y&&!t&&_&&(ye=_);const _e=f.useMemo(()=>({WebkitTapHighlightColor:"transparent"}),[]);let be;return p!==void 0?be=o.jsx(Ye,{"data-testid":I,role:"button","aria-label":U??ye,href:p,className:me,target:h,onClick:d,onMouseDown:m,style:_e,...$,ref:z,children:xe}):be=o.jsx("button",{"data-testid":I,"aria-label":U??ye,type:c,disabled:J,onClick:re,onMouseDown:m,className:me,...$,ref:z,children:xe}),w||_?o.jsx(En,{tooltipText:_??"",keyboardShortcut:w,tooltipLayout:C,...S,asChild:!0,children:be}):be});WF.displayName="ButtonBase";const Te=f.memo(({variant:e="common",noPadding:t,noXPadding:n,extraCSS:r,...s})=>{const a=f.useMemo(()=>V("focus-visible:bg-subtle",{"!p-0 !h-auto hover:!bg-transparent":t},{"!px-0 hover:!bg-transparent":n},{super:"hover:bg-subtle text-super dark:hover:bg-subtle",primary:"hover:bg-subtle text-foreground dark:hover:bg-subtle",common:"hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle",positive:"text-quiet  hover:bg-subtle hover:text-super",positiveSelected:"text-super hover:bg-subtle hover:text-super",negative:"text-quiet hover:bg-subtle hover:text-caution",negativeSelected:"text-caution dark:text-caution hover:bg-subtle hover:text-caution",noBackground:"text-quiet hover:text-foreground",noHover:"text-quiet  cursor-default",subtle:"text-foreground bg-subtle"}[e],r),[r,e,t,n]);return o.jsx(WF,{testId:s.testId,extraCSS:a,...s})});Te.displayName="TextButton";const Xze=f.createContext(null),Y4={didCatch:!1,error:null};let Zze=class extends f.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Y4}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:a,reason:"imperative-api"}),this.setState(Y4)}}componentDidCatch(t,n){var r,s;(r=(s=this.props).onError)===null||r===void 0||r.call(s,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&n.error!==null&&Jze(t.resetKeys,s)){var a,i;(a=(i=this.props).onReset)===null||a===void 0||a.call(i,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(Y4)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:s}=this.props,{didCatch:a,error:i}=this.state;let l=t;if(a){const c={error:i,resetErrorBoundary:this.resetErrorBoundary};if(f.isValidElement(s))l=s;else if(typeof n=="function")l=n(c);else if(r)l=f.createElement(r,c);else throw i}return f.createElement(Xze.Provider,{value:{didCatch:a,error:i,resetErrorBoundary:this.resetErrorBoundary}},l)}};function Jze(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}const u3={transparent:"transparent",subtle:"subtle",subtler:"subtler",background:"background"},eGe="border-subtlest ring-subtlest divide-subtlest",H=R.memo(({variant:e=u3.transparent,className:t,onClick:n,onMouseOver:r,onMouseLeave:s,children:a,id:i,bgHover:l,style:c,testId:u,as:d="div",ref:m,noBorder:p,...h})=>{const g=R.useMemo(()=>{const y={transparent:"bg-transparent",super:"bg-super",superBorder:"border border-super",superLight:"bg-super/10",subtle:"bg-subtle",subtler:"bg-subtler",red:"bg-caution",background:"bg-base",underlay:"bg-underlay",offsetLoading:"bg-subtlest animate-pulse",textColor:"bg-inverse",orange:"bg-attention",raised:"bg-raised dark:bg-offset",raisedOffset:"bg-raisedOffset",max:"bg-max",maxBorder:"border border-max"},x={subtle:"md:hover:bg-subtle",subtler:"md:hover:bg-subtler",raisedOffset:"md:hover:bg-raisedOffset",transparent:"md:hover:bg-transparent",super:"md:hover:bg-super"};return V(t,!p&&e!=="maxBorder"&&e!=="superBorder"&&eGe,l?"transition duration-normal":"",y[e]||y.transparent,l&&x[l]||"")},[l,t,e,p]);return R.createElement(d,{id:i,ref:m,className:g,onClick:n,onMouseOver:r,onMouseLeave:s,style:c,"data-testid":u,...h},a)});H.displayName="Box";const pe=f.memo(e=>{const{variant:t="common",disabled:n,extraCSS:r,...s}=e,{buttonClass:a}=f.useMemo(()=>{const i={disabled:"bg-inverse/15 text-quiet",primary:"bg-super text-inverse hover:opacity-80",primaryGhost:"border border-super/20 bg-super/10 hover:bg-super/20 hover:border-super/30 text-super",common:"bg-subtle text-foreground md:hover:text-quiet",border:"border border-subtler text-quiet md:hover:border-subtle md:hover:text-quiet hover:bg-subtler bg-base",inverted:"bg-inverse text-inverse hover:opacity-80",rejecter:"border border-subtlest text-caution dark:hover:text-foreground hover:bg-caution/30 hover:border-caution/20 bg-base",rejected:"bg-caution hover:opacity-50 text-white",orange:"bg-attention text-white hover:opacity-50",maxGold:"bg-max dark:text-inverse hover:opacity-80"},l=n?i.disabled:i[t];return{buttonClass:V(l,r)}},[t,n,r]);return o.jsx(WF,{extraCSS:a,disabled:n,variant:t,...s})});pe.displayName="Button";class tGe extends Jb{name="ReactRenderingError"}function d3(e){ne.info("Reloading window",{reason:e,url:window.location.href}),window.location.reload()}const nGe=()=>d3("Error boundary"),rGe=({resetErrorBoundary:e})=>{const{$t:t}=Z(),n=f.useCallback(()=>{e()},[e]);return o.jsx(H,{variant:"background",className:"overflow-hidden rounded-xl",children:o.jsxs(H,{variant:"subtler",className:"px-md flex w-full items-center justify-between py-3",children:[o.jsx(F,{variant:"smallBold",children:t({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})}),o.jsx(pe,{size:"tiny",text:t({defaultMessage:"Retry",id:"62nsdyMyIO"}),type:"button",onClick:n})]})})},ape=R.memo(()=>null);ape.displayName="NullFallback";const sGe=/load(.*?)chunk/i,Pr=R.memo(({fallback:e=rGe,children:t,onError:n,code:r="REACT_RENDERING_ERROR"})=>{const s=f.useCallback((a,i)=>{n?.(a,i);let l;if(a instanceof Jb)l=a;else{let c=r;sGe.test(a?.message??"")&&(c="CHUNK_LOADING_ERROR"),l=new tGe(c,{message:a.message,cause:a})}l.stack=i.componentStack||void 0,ne.error(l)},[n,r]);return o.jsx(Zze,{FallbackComponent:e||ape,onError:s,onReset:nGe,children:t})});Pr.displayName="ErrorBoundary";const ipe=({shouldShow:e,imageSrc:t,imageAlt:n,title:r,description:s,primaryAction:a,onDismiss:i,iconXDismiss:l})=>{const c=QWe();return!e||!c?null:o.jsx(Pr,{fallback:null,children:o.jsxs(ve.div,{className:"p-sm m-md ring-subtlest dark:ring-subtler bg-base gap-md fixed bottom-0 right-0 hidden max-w-[320px] grid-cols-1 rounded-xl shadow-md ring-1 md:grid",initial:{opacity:0,y:0},animate:{opacity:1,y:0},transition:{duration:.5},children:[t&&o.jsx("img",{src:t,alt:n,className:"bg-subtle size-full rounded-lg object-cover",style:{aspectRatio:"528/240"}}),l&&o.jsx("div",{className:"right-md top-md absolute",children:o.jsx(Te,{size:"small",icon:It,onClick:i,noPadding:!0,iconClassName:t?"text-white":void 0,"data-testid":"floating-card-upsell-dismiss"})}),o.jsxs("div",{className:V("px-sm",{"pt-sm":!t}),children:[o.jsx(F,{variant:"smallBold",className:"mb-xs pr-md",children:r}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"whitespace-pre-line leading-snug",children:s})]}),o.jsxs("div",{className:V("px-sm pb-sm gap-xs flex flex-row",t?"ml-auto":"mr-auto"),children:[!l&&o.jsx(Te,{variant:"common",size:"small",onClick:i,text:"Dismiss"}),a]})]})})};var Qy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bm=typeof window>"u"||"Deno"in globalThis;function xo(){}function aGe(e,t){return typeof e=="function"?e(t):e}function e8(e){return typeof e=="number"&&e>=0&&e!==1/0}function ope(e,t){return Math.max(e+(t||0)-Date.now(),0)}function lg(e,t){return typeof e=="function"?e(t):e}function Xo(e,t){return typeof e=="function"?e(t):e}function MY(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==HF(i,t.options))return!1}else if(!O1(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function kY(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Vm(t.options.mutationKey)!==Vm(a))return!1}else if(!O1(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function HF(e,t){return(t?.queryKeyHashFn||Vm)(e)}function Vm(e){return JSON.stringify(e,(t,n)=>t8(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function O1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!O1(e[n],t[n])):!1}function lpe(e,t){if(e===t)return e;const n=TY(e)&&TY(t);if(n||t8(e)&&t8(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,l=n?[]:{};let c=0;for(let u=0;u<i;u++){const d=n?u:a[u];(!n&&r.includes(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,c++):(l[d]=lpe(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&c++)}return s===i&&c===s?e:l}return t}function _E(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function TY(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function t8(e){if(!NY(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!NY(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function NY(e){return Object.prototype.toString.call(e)==="[object Object]"}function iGe(e){return new Promise(t=>{setTimeout(t,e)})}function n8(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?lpe(e,t):t}function mf(e){return e}function oGe(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function lGe(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var cpe=Symbol(),upe=(e,t)=>!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===cpe?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn,cGe=class extends Qy{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Bm&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},zF=new cGe,uGe=class extends Qy{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Bm&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},wE=new uGe;function dGe(e){return Math.min(1e3*2**e,3e4)}function dpe(e){return(e??"online")==="online"?wE.isOnline():!0}var fpe=class{constructor(e){this.revert=e?.revert,this.silent=e?.silent}};function Q4(e){return e instanceof fpe}function mpe(e){let t=!1,n=0,r=!1,s,a,i;const l=new Promise((v,b)=>{a=v,i=b}),c=v=>{r||(g(new fpe(v)),e.abort?.())},u=()=>{t=!0},d=()=>{t=!1},m=()=>zF.isFocused()&&(e.networkMode==="always"||wE.isOnline())&&e.canRun(),p=()=>dpe(e.networkMode)&&e.canRun(),h=v=>{r||(r=!0,e.onSuccess?.(v),s?.(),a(v))},g=v=>{r||(r=!0,e.onError?.(v),s?.(),i(v))},y=()=>new Promise(v=>{s=b=>{(r||m())&&v(b)},e.onPause?.()}).then(()=>{s=void 0,r||e.onContinue?.()}),x=()=>{if(r)return;let v;const b=n===0?e.initialPromise:void 0;try{v=b??e.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(h).catch(_=>{if(r)return;const w=e.retry??(Bm?0:3),C=e.retryDelay??dGe,S=typeof C=="function"?C(n,_):C,E=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(t||!E){g(_);return}n++,e.onFail?.(n,_),iGe(S).then(()=>m()?void 0:y()).then(()=>{t?g(_):x()})})};return{promise:l,cancel:c,continue:()=>(s?.(),l),cancelRetry:u,continueRetry:d,canStart:p,start:()=>(p()?x():y().then(x),l)}}function fGe(){let e=[],t=0,n=p=>{p()},r=p=>{p()},s=p=>setTimeout(p,0);const a=p=>{s=p},i=p=>{let h;t++;try{h=p()}finally{t--,t||u()}return h},l=p=>{t?e.push(p):s(()=>{n(p)})},c=p=>(...h)=>{l(()=>{p(...h)})},u=()=>{const p=e;e=[],p.length&&s(()=>{r(()=>{p.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:c,schedule:l,setNotifyFunction:p=>{n=p},setBatchNotifyFunction:p=>{r=p},setScheduler:a}}var vs=fGe(),ppe=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),e8(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Bm?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},mGe=class extends ppe{#e;#t;#r;#n;#i;#a;constructor(e){super(),this.#a=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=e.state||pGe(this.options),this.state=this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const n=n8(this.state.data,e,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(xo).catch(xo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Xo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!ope(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},s=()=>{const l=upe(this.options,t),c={queryKey:this.queryKey,meta:this.meta};return r(c),this.#a=!1,this.options.persister?this.options.persister(l,c,this):l(c)},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};r(a),this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const i=l=>{Q4(l)&&l.silent||this.#s({type:"error",error:l}),Q4(l)||(this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#n=mpe({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){i(new Error(`${this.queryHash} data is undefined`));return}this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:i,onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...hpe(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return Q4(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),vs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function hpe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dpe(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function pGe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gpe=class extends Qy{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??HF(r,t);let a=this.get(s);return a||(a=new mGe({cache:this,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){vs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>MY(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>MY(e,n)):t}notify(e){vs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){vs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){vs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},hGe=class extends ppe{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||ype(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=mpe({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(r,s)=>{this.#n({type:"failed",failureCount:r,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#r.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:n}),await this.#t.config.onMutate?.(e,this);const s=await this.options.onMutate?.(e);s!==this.state.context&&this.#n({type:"pending",context:s,variables:e,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,e,this.state.context,this),await this.options.onError?.(r,e,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,e,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),vs.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function ype(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xpe=class extends Qy{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,n){const r=new hGe({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){const t=bC(e),n=this.#e.get(t)??[];n.push(e),this.#e.set(t,n),this.notify({type:"added",mutation:e})}remove(e){const t=bC(e);if(this.#e.has(t)){const n=this.#e.get(t)?.filter(r=>r!==e);n&&(n.length===0?this.#e.delete(t):this.#e.set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(bC(e))?.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(bC(e))?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){vs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(n=>kY(t,n))}findAll(e={}){return this.getAll().filter(t=>kY(e,t))}notify(e){vs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return vs.batch(()=>Promise.all(e.map(t=>t.continue().catch(xo))))}};function bC(e){return e.options.scope?.id??String(e.mutationId)}function r8(e){return{onFetch:(t,n)=>{const r=async()=>{const s=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],l=t.state.data?.pageParams||[],c={pages:[],pageParams:[]};let u=!1;const d=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},m=upe(t.options,t.fetchOptions),p=async(g,y,x)=>{if(u)return Promise.reject();if(y==null&&g.pages.length)return Promise.resolve(g);const v={queryKey:t.queryKey,pageParam:y,direction:x?"backward":"forward",meta:t.options.meta};d(v);const b=await m(v),{maxPages:_}=t.options,w=x?lGe:oGe;return{pages:w(g.pages,b,_),pageParams:w(g.pageParams,y,_)}};let h;if(a&&i.length){const g=a==="backward",y=g?vpe:s8,x={pages:i,pageParams:l},v=y(s,x);h=await p(x,v,g)}else{h=await p(c,l[0]??s.initialPageParam);const g=e??i.length;for(let y=1;y<g;y++){const x=s8(s,h);h=await p(h,x)}}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=r}}}function s8(e,{pages:t,pageParams:n}){const r=t.length-1;return e.getNextPageParam(t[r],t,n[r],n)}function vpe(e,{pages:t,pageParams:n}){return e.getPreviousPageParam?.(t[0],t,n[0],n)}function gGe(e,t){return t?s8(e,t)!=null:!1}function yGe(e,t){return!t||!e.getPreviousPageParam?!1:vpe(e,t)!=null}var xGe=class{#e;#t;#r;#n;#i;#a;#s;#o;constructor(e={}){this.#e=e.queryCache||new gpe,this.#t=e.mutationCache||new xpe,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#s=zF.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=wE.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#s?.(),this.#s=void 0,this.#o?.(),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=this.#e.build(this,n);return e.revalidateIfStale&&r.isStaleByTime(lg(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(r.queryHash)?.state.data,i=aGe(t,a);if(i!==void 0)return this.#e.build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return vs.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;vs.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e,r={type:"active",...e};return vs.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=vs.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(xo).catch(xo)}invalidateQueries(e={},t={}){return vs.batch(()=>{if(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},r=vs.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(xo)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(xo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(lg(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(xo).catch(xo)}fetchInfiniteQuery(e){return e.behavior=r8(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(xo).catch(xo)}resumePausedMutations(){return wE.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(Vm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()];let n={};return t.forEach(r=>{O1(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){this.#i.set(Vm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()];let n={};return t.forEach(r=>{O1(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=HF(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===cpe&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},bpe=class extends Qy{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#i;#a;#s;#o;#f;#m;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),jY(this.#t,this.options)?this.#d():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return a8(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return a8(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#b(),this.#t.removeObserver(this)}setOptions(e,t){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!_E(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&AY(this.#t,r,this.options,n)&&this.#d(),this.updateResult(t),s&&(this.#t!==r||Xo(this.options.enabled,this.#t)!==Xo(n.enabled,this.#t)||lg(this.options.staleTime,this.#t)!==lg(n.staleTime,this.#t))&&this.#h();const a=this.#g();s&&(this.#t!==r||Xo(this.options.enabled,this.#t)!==Xo(n.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return bGe(this,n)&&(this.#n=n,this.#a=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(e,t){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t?.(r),e[r])})}),n}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(xo)),t}#h(){this.#v();const e=lg(this.options.staleTime,this.#t);if(Bm||this.#n.isStale||!e8(e))return;const n=ope(this.#n.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#b(),this.#l=e,!(Bm||Xo(this.options.enabled,this.#t)===!1||!e8(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||zF.isFocused())&&this.#d()},this.#l))}#x(){this.#h(),this.#y(this.#g())}#v(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#n,a=this.#i,i=this.#a,c=e!==n?e.state:this.#r,{state:u}=e;let d={...u},m=!1,p;if(t._optimisticResults){const S=this.hasListeners(),E=!S&&jY(e,t),M=S&&AY(e,n,t,r);(E||M)&&(d={...d,...hpe(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:h,errorUpdatedAt:g,status:y}=d;if(t.select&&d.data!==void 0)if(s&&d.data===a?.data&&t.select===this.#o)p=this.#f;else try{this.#o=t.select,p=t.select(d.data),p=n8(s?.data,p,t),this.#f=p,this.#s=null}catch(S){this.#s=S}else p=d.data;if(t.placeholderData!==void 0&&p===void 0&&y==="pending"){let S;if(s?.isPlaceholderData&&t.placeholderData===i?.placeholderData)S=s.data;else if(S=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,t.select&&S!==void 0)try{S=t.select(S),this.#s=null}catch(E){this.#s=E}S!==void 0&&(y="success",p=n8(s?.data,S,t),m=!0)}this.#s&&(h=this.#s,p=this.#f,g=Date.now(),y="error");const x=d.fetchStatus==="fetching",v=y==="pending",b=y==="error",_=v&&x,w=p!==void 0;return{status:y,fetchStatus:d.fetchStatus,isPending:v,isSuccess:y==="success",isError:b,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!v,isLoadingError:b&&!w,isPaused:d.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&w,isStale:GF(e,t),refetch:this.refetch}}updateResult(e){const t=this.#n,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#m=this.#t),_E(n,t))return;this.#n=n;const r={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!this.#p.size)return!0;const l=new Set(i??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#n).some(c=>{const u=c;return this.#n[u]!==t[u]&&l.has(u)})};e?.listeners!==!1&&s()&&(r.listeners=!0),this.#w({...r,...e})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#w(e){vs.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function vGe(e,t){return Xo(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function jY(e,t){return vGe(e,t)||e.state.data!==void 0&&a8(e,t,t.refetchOnMount)}function a8(e,t,n){if(Xo(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&GF(e,t)}return!1}function AY(e,t,n,r){return(e!==t||Xo(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&GF(e,n)}function GF(e,t){return Xo(t.enabled,e)!==!1&&e.isStaleByTime(lg(t.staleTime,e))}function bGe(e,t){return!_E(e.getCurrentResult(),t)}var _Ge=class extends bpe{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:r8()},t)}getOptimisticResult(e){return e.behavior=r8(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:n}=e,r=super.createResult(e,t),{isFetching:s,isRefetching:a,isError:i,isRefetchError:l}=r,c=n.fetchMeta?.fetchMore?.direction,u=i&&c==="forward",d=s&&c==="forward",m=i&&c==="backward",p=s&&c==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:gGe(t,n.data),hasPreviousPage:yGe(t,n.data),isFetchNextPageError:u,isFetchingNextPage:d,isFetchPreviousPageError:m,isFetchingPreviousPage:p,isRefetchError:l&&!u&&!m,isRefetching:a&&!d&&!p}}},wGe=class extends Qy{#e;#t=void 0;#r;#n;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),_E(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&Vm(n.mutationKey)!==Vm(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#a()}mutate(t,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#i(){const t=this.#r?.state??ype();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){vs.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,n,r),this.#n.onSettled?.(t.data,null,n,r)):t?.type==="error"&&(this.#n.onError?.(t.error,n,r),this.#n.onSettled?.(void 0,t.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}};function CGe(e){return e}function IY(e,t,n){if(typeof t!="object"||t===null)return;const r=e.getMutationCache(),s=e.getQueryCache(),a=n?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??CGe,i=t.mutations||[],l=t.queries||[];i.forEach(({state:c,...u})=>{r.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...u},c)}),l.forEach(({queryKey:c,state:u,queryHash:d,meta:m,promise:p})=>{let h=s.get(d);const g=u.data===void 0?u.data:a(u.data);if(h){if(h.state.dataUpdatedAt<u.dataUpdatedAt){const{fetchStatus:y,...x}=u;h.setState({...x,data:g})}}else h=s.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:c,queryHash:d,meta:m},{...u,data:g,fetchStatus:"idle"});if(p){const y=Promise.resolve(p).then(a);h.fetch(void 0,{initialPromise:y})}})}var _pe=f.createContext(void 0),xt=e=>{const t=f.useContext(_pe);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},SGe=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(_pe.Provider,{value:e,children:t})),wpe=f.createContext(!1),EGe=()=>f.useContext(wpe);wpe.Provider;function MGe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var kGe=f.createContext(MGe()),TGe=()=>f.useContext(kGe);function Cpe(e,t){return typeof e=="function"?e(...t):!!e}function NGe(){}var jGe=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},AGe=e=>{f.useEffect(()=>{e.clearReset()},[e])},IGe=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Cpe(n,[e.error,r]),RGe=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},PGe=(e,t)=>e?.suspense&&t.isPending,OGe=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Spe(e,t,n){const r=xt(n),s=EGe(),a=TGe(),i=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=s?"isRestoring":"optimistic",RGe(i),jGe(i,a),AGe(a);const[l]=f.useState(()=>new t(r,i)),c=l.getOptimisticResult(i);if(f.useSyncExternalStore(f.useCallback(u=>{const d=s?()=>{}:l.subscribe(vs.batchCalls(u));return l.updateResult(),d},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),f.useEffect(()=>{l.setOptions(i,{listeners:!1})},[i,l]),PGe(i,c))throw OGe(i,l,a);if(IGe({result:c,errorResetBoundary:a,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw c.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(i,c),i.notifyOnChangeProps?c:l.trackResult(c)}function We(e,t){return Spe(e,bpe,t)}var LGe=({children:e,options:t={},state:n,queryClient:r})=>{const s=xt(r),[a,i]=f.useState(),l=f.useRef(t);return l.current=t,f.useMemo(()=>{if(n){if(typeof n!="object")return;const c=s.getQueryCache(),u=n.queries||[],d=[],m=[];for(const p of u){const h=c.get(p.queryHash);if(!h)d.push(p);else{const g=p.state.dataUpdatedAt>h.state.dataUpdatedAt,y=a?.find(x=>x.queryHash===p.queryHash);g&&(!y||p.state.dataUpdatedAt>y.state.dataUpdatedAt)&&m.push(p)}}d.length>0&&IY(s,{queries:d},l.current),m.length>0&&i(p=>p?[...p,...m]:m)}},[s,a,n]),f.useEffect(()=>{a&&(IY(s,{queries:a},l.current),i(void 0))},[s,a]),e};function St(e,t){const n=xt(t),[r]=f.useState(()=>new wGe(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(i=>r.subscribe(vs.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=f.useCallback((i,l)=>{r.mutate(i,l).catch(NGe)},[r]);if(s.error&&Cpe(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}function $u(e,t){return Spe(e,_Ge,t)}const DGe={pro:"pro",max:"max"},FGe=e=>Object.keys(DGe).includes(e);function Et(){const{session:e}=Nt(),t=e?.user?.subscription_status??"none",n=t==="active"||t==="trialing"||t==="white_glove_past_due",r=e?.user?.subscription_tier,s=FGe(r)?r:void 0,a=n&&(s==="pro"||!s),i=n&&s==="max",l=a||i,c=n?e?.user?.subscription_source:"none",u=n&&c==="enterprise",d=u&&(s==="pro"||!s),m=u&&s==="max";return f.useMemo(()=>({isPro:a,isMax:i,hasAccessToProFeatures:l,hasActiveSubscription:n,subscriptionSource:c,subscriptionStatus:t,subscriptionTier:s,isEnterprise:u,isEnterprisePro:d,isEnterpriseMax:m}),[l,i,a,n,c,t,s,u,d,m])}let th;const Epe=new URL("/ws",TOe());Epe.protocol="wss:";async function Mpe(){return th||(th=new Promise(e=>{const t=new WebSocket(Epe);t.addEventListener("error",()=>{try{t.close()}finally{th=void 0}}),t.addEventListener("close",()=>{th=void 0}),t.addEventListener("open",()=>{e(t)})}),th)}const zd="en-US",f3={"ar-SA":{characterOrder:"rtl",displayName:" (  )",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-ar-SA-DD3CeomG.js");return{default:e}},[])).default},"bn-BD":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-bn-BD-C7GumjTR.js");return{default:e}},[])).default},"cs-CZ":{characterOrder:"ltr",displayName:"etina (esko)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-cs-CZ-CCjL_3Hs.js");return{default:e}},[])).default},"de-DE":{characterOrder:"ltr",displayName:"Deutsch (Deutschland)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-de-DE-D-eulYBD.js");return{default:e}},[])).default},"el-GR":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-el-GR-CRy1rQPL.js");return{default:e}},[])).default},"en-US":{characterOrder:"ltr",displayName:"American English",translations:async()=>Promise.resolve({})},"es-ES":{characterOrder:"ltr",displayName:"espaol de Espaa",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-es-ES-DJ6rTLc5.js");return{default:e}},[])).default},"fr-FR":{characterOrder:"ltr",displayName:"franais (France)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-fr-FR-DzWm4TU8.js");return{default:e}},[])).default},"hi-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-hi-IN-DSDE-APl.js");return{default:e}},[])).default},"hr-HR":{characterOrder:"ltr",displayName:"hrvatski (Hrvatska)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-hr-HR-BBnqgDpb.js");return{default:e}},[])).default},"hu-HU":{characterOrder:"ltr",displayName:"magyar (Magyarorszg)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-hu-HU-C4CUMDkD.js");return{default:e}},[])).default},"id-ID":{characterOrder:"ltr",displayName:"Indonesia (Indonesia)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-id-ID-CJQS_lfC.js");return{default:e}},[])).default},"it-IT":{characterOrder:"ltr",displayName:"italiano (Italia)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-it-IT-DHPhGv72.js");return{default:e}},[])).default},"ja-JP":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-ja-JP-CgUAN9jb.js");return{default:e}},[])).default},"kn-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-kn-IN-CQw-v1vU.js");return{default:e}},[])).default},"ko-KR":{characterOrder:"ltr",displayName:"()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-ko-KR-D2oqNbHo.js");return{default:e}},[])).default},"ml-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-ml-IN-D1LQ7Cjl.js");return{default:e}},[])).default},"mr-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-mr-IN-BSlfWvb8.js");return{default:e}},[])).default},"nl-NL":{characterOrder:"ltr",displayName:"Nederlands (Nederland)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-nl-NL-CpMbaiWZ.js");return{default:e}},[])).default},"pl-PL":{characterOrder:"ltr",displayName:"polski (Polska)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-pl-PL-opignNks.js");return{default:e}},[])).default},"pt-BR":{characterOrder:"ltr",displayName:"portugus (Brasil)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-pt-BR-BbhE2__J.js");return{default:e}},[])).default},"pt-PT":{characterOrder:"ltr",displayName:"portugus europeu",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-pt-PT-DteGJn7b.js");return{default:e}},[])).default},"ro-RO":{characterOrder:"ltr",displayName:"romn (Romnia)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-ro-RO-DBr6f2xn.js");return{default:e}},[])).default},"ru-RU":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-ru-RU-CRdMN8SW.js");return{default:e}},[])).default},"sk-SK":{characterOrder:"ltr",displayName:"slovenina (Slovensko)",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-sk-SK-BMv7TtrL.js");return{default:e}},[])).default},"sr-Cyrl-ME":{characterOrder:"ltr",displayName:" (,  )",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-sr-Cyrl-ME-BT-T9tew.js");return{default:e}},[])).default},"ta-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-ta-IN-DR0J3a5Z.js");return{default:e}},[])).default},"te-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-te-IN-60xvHDRM.js");return{default:e}},[])).default},"uk-UA":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-uk-UA-OnkH25jk.js");return{default:e}},[])).default},"zh-CN":{characterOrder:"ltr",displayName:"",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-zh-CN-B5o1AupM.js");return{default:e}},[])).default},"zh-TW":{characterOrder:"ltr",displayName:"",translations:async()=>(await Q(async()=>{const{default:e}=await import("./translations-zh-TW-LKL_6233.js");return{default:e}},[])).default}},kpe="pplx.chosen-locale",qF=new Intl.DateTimeFormat().resolvedOptions().timeZone,g2=Object.keys(f3),UGe=Object.entries(f3).map(([e,t])=>({locale:e,label:t.displayName,characterOrder:t.characterOrder})),Tpe=(e,t=g2)=>{try{return iFe(e,t,zd)}catch{return zd}};async function BGe(e=zd){const t=Tpe(Array.isArray(e)?e:[e]);if(t===zd)return Promise.resolve({matchedLocale:t,translations:{}});const n=await f3[t].translations()??{};return Promise.resolve({matchedLocale:t,translations:n})}function Npe(e){return f3[e]?.characterOrder??"ltr"}function jd(){const t=[new URL(globalThis.location.href).searchParams.get("locale"),Fn(kpe),globalThis.navigator.language].filter(n=>!!n);return Tpe(t)}function VGe(){Pm(kpe)}var $Ge={};function WGe(){return typeof window>"u"||window.location.hostname.includes("localhost")?new URL(fq,hFe()):new URL(fq,window.location.origin)}const HGe=WGe();function jpe(e){return navigator.sendBeacon(HGe,new Blob([JSON.stringify(e)],{type:"application/json; charset=UTF-8"}))}function Ape(){const e={};try{navigator.hardwareConcurrency&&(e.hardwareConcurrency=navigator.hardwareConcurrency);const t=new Float32Array(1),n=new Uint8Array(t.buffer);t[0]=1/0,t[0]=t[0]-t[0];const r=n[3];r&&(e.architecture=r),globalThis.screen.colorDepth&&(e.colorDepth=globalThis.screen.colorDepth),globalThis.screen.width&&globalThis.screen.height&&(e.screenSize=`${globalThis.screen.width}x${globalThis.screen.height}`)}catch{}return e}const zGe=Ape(),GGe=(e={},t)=>{const n=Date.now(),r={...e,isStandaloneApp:!1,timestamp:n,isBrowserExtension:!1,timeZone:qF,isPro:t?.user?.subscription_status&&t?.user?.subscription_status!=="none",userId:t?.user?.id,deviceInfo:zGe,isPerplexityBrowser:Fn("comet_browser")!==void 0},s=globalThis.location.pathname+globalThis.location.search,a=!!getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-title"),i=Ape(),l=Fn(dE),c=Fn(MP);let u;return r.internalReferrer?u=r.internalReferrer:u=document.referrer,(globalThis.matchMedia("(display-mode: standalone)").matches||globalThis.matchMedia("(display-mode: minimal-ui)").matches||globalThis.navigator?.standalone)&&(r.isStandaloneApp=!0),{eventData:r,pathnameAndParams:s,visitorId:l,isArcBrowser:a,sessionId:c,deviceInfo:i,referrer:u}};function Ipe(e){const{name:t,data:n,session:r,source:s}=e,{eventData:a,visitorId:i,sessionId:l,pathnameAndParams:c,deviceInfo:u,referrer:d,isArcBrowser:m}=GGe(n,r);return c.startsWith("/search/render")?void 0:($Ge.NEXT_PUBLIC_EVENT_DEBUG_PRINT&&ne.log(`[trackEvent] ${t}: `,a),{event_name:t,event_data:a,visitor_id:i??"",session_id:l??"",url:c,referrer:d,language:jd(),screen:m3(),hostname:globalThis.location.hostname,device_info:u,is_arc_browser:m,source:s})}function al(e){const t=Ipe(e);t&&(jpe(t)||(jo("web.browser.analytics.send_event_failed"),Mpe().then(n=>{n.send(JSON.stringify(t))})))}function qGe(e){const t=e.map(n=>Ipe(n)).filter(n=>n!==void 0);t.length!==0&&(jpe(t)||(jo("web.browser.analytics.send_event_failed"),Mpe().then(n=>{n.send(JSON.stringify(t))})))}function m3(){return`${globalThis.screen.width}x${globalThis.screen.height}`}const RY=Object.freeze({});function xi(){return typeof window<"u"?window.__PPL_CONFIG__??RY:RY}class Ie extends Jb{name="ApiClientsError"}const KGe=/\{[^{}]+\}/g,YGe=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function QGe(){return Math.random().toString(36).slice(2,11)}function XGe(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:s,bodySerializer:a,headers:i,requestInitExt:l=void 0,...c}={...e};l=YGe()?l:void 0,t=OY(t);const u=[];async function d(m,p){const{baseUrl:h,fetch:g=r,Request:y=n,headers:x,params:v={},parseAs:b="json",querySerializer:_,bodySerializer:w=a??JGe,body:C,...S}=p||{};h&&(t=OY(h));let E=typeof s=="function"?s:PY(s);_&&(E=typeof _=="function"?_:PY({...typeof s=="object"?s:{},..._}));const M=C===void 0?void 0:w(C),k=M===void 0||M instanceof FormData?{}:{"Content-Type":"application/json"},N={redirect:"follow",...c,...S,body:M,headers:tqe(k,i,x,v.header)};let P,L,O=new n(eqe(m,{baseUrl:t,params:v,querySerializer:E}),N),A;for(const T in S)T in O||(O[T]=S[T]);if(u.length){P=QGe(),L=Object.freeze({baseUrl:t,fetch:g,parseAs:b,querySerializer:E,bodySerializer:w});for(const T of u)if(T&&typeof T=="object"&&typeof T.onRequest=="function"){const I=await T.onRequest({request:O,schemaPath:m,params:v,options:L,id:P});if(I)if(I instanceof n)O=I;else if(I instanceof Response){A=I;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!A){try{A=await g(O,l)}catch(T){let I=T;if(u.length)for(let U=u.length-1;U>=0;U--){const B=u[U];if(B&&typeof B=="object"&&typeof B.onError=="function"){const D=await B.onError({request:O,error:I,schemaPath:m,params:v,options:L,id:P});if(D){if(D instanceof Response){I=void 0,A=D;break}if(D instanceof Error){I=D;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(I)throw I}if(u.length)for(let T=u.length-1;T>=0;T--){const I=u[T];if(I&&typeof I=="object"&&typeof I.onResponse=="function"){const U=await I.onResponse({request:O,response:A,schemaPath:m,params:v,options:L,id:P});if(U){if(!(U instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");A=U}}}}if(A.status===204||A.headers.get("Content-Length")==="0")return A.ok?{data:void 0,response:A}:{error:void 0,response:A};if(A.ok)return b==="stream"?{data:A.body,response:A}:{data:await A[b](),response:A};let j=await A.text();try{j=JSON.parse(j)}catch{}return{error:j,response:A}}return{request(m,p,h){return d(p,{...h,method:m.toUpperCase()})},GET(m,p){return d(m,{...p,method:"GET"})},PUT(m,p){return d(m,{...p,method:"PUT"})},POST(m,p){return d(m,{...p,method:"POST"})},DELETE(m,p){return d(m,{...p,method:"DELETE"})},OPTIONS(m,p){return d(m,{...p,method:"OPTIONS"})},HEAD(m,p){return d(m,{...p,method:"HEAD"})},PATCH(m,p){return d(m,{...p,method:"PATCH"})},TRACE(m,p){return d(m,{...p,method:"TRACE"})},use(...m){for(const p of m)if(p){if(typeof p!="object"||!("onRequest"in p||"onResponse"in p||"onError"in p))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");u.push(p)}},eject(...m){for(const p of m){const h=u.indexOf(p);h!==-1&&u.splice(h,1)}}}}function p3(e,t,n){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function Rpe(e,t,n){if(!t||typeof t!="object")return"";const r=[],s={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const l in t)r.push(l,n.allowReserved===!0?t[l]:encodeURIComponent(t[l]));const i=r.join(",");switch(n.style){case"form":return`${e}=${i}`;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return i}}for(const i in t){const l=n.style==="deepObject"?`${e}[${i}]`:i;r.push(p3(l,t[i],n))}const a=r.join(s);return n.style==="label"||n.style==="matrix"?`${s}${a}`:a}function Ppe(e,t,n){if(!Array.isArray(t))return"";if(n.explode===!1){const a={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(n.allowReserved===!0?t:t.map(l=>encodeURIComponent(l))).join(a);switch(n.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",s=[];for(const a of t)n.style==="simple"||n.style==="label"?s.push(n.allowReserved===!0?a:encodeURIComponent(a)):s.push(p3(e,a,n));return n.style==="label"||n.style==="matrix"?`${r}${s.join(r)}`:s.join(r)}function PY(e){return function(n){const r=[];if(n&&typeof n=="object")for(const s in n){const a=n[s];if(a!=null){if(Array.isArray(a)){if(a.length===0)continue;r.push(Ppe(s,a,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof a=="object"){r.push(Rpe(s,a,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}r.push(p3(s,a,e))}}return r.join("&")}}function ZGe(e,t){let n=e;for(const r of e.match(KGe)??[]){let s=r.substring(1,r.length-1),a=!1,i="simple";if(s.endsWith("*")&&(a=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(i="label",s=s.substring(1)):s.startsWith(";")&&(i="matrix",s=s.substring(1)),!t||t[s]===void 0||t[s]===null)continue;const l=t[s];if(Array.isArray(l)){n=n.replace(r,Ppe(s,l,{style:i,explode:a}));continue}if(typeof l=="object"){n=n.replace(r,Rpe(s,l,{style:i,explode:a}));continue}if(i==="matrix"){n=n.replace(r,`;${p3(s,l)}`);continue}n=n.replace(r,i==="label"?`.${encodeURIComponent(l)}`:encodeURIComponent(l))}return n}function JGe(e){return e instanceof FormData?e:JSON.stringify(e)}function eqe(e,t){let n=`${t.baseUrl}${e}`;t.params?.path&&(n=ZGe(n,t.params.path));let r=t.querySerializer(t.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function tqe(...e){const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[s,a]of r)if(a===null)t.delete(s);else if(Array.isArray(a))for(const i of a)t.append(s,i);else a!==void 0&&t.set(s,a)}return t}function OY(e){return e.endsWith("/")?e.substring(0,e.length-1):e}function nqe(e){return XGe(e)}const Of="X-Perplexity-Request-Reason",rqe=()=>{const e=nqe({baseUrl:`https://${crypto.randomUUID()}.com`,fetch:async t=>{const n=new URL(t.url),r=n.pathname,s=n.searchParams,a=await t.text(),i=t.headers.get(Of)??"typedRestAsyncClient";return Er({urlPath:s.size>0?`${r}?${s.toString()}`:r,method:t.method,body:a||void 0,headers:t.headers,timeoutMs:t.timeoutMs,numRetries:t.numRetries,backOffTime:t.backOffTime,reason:i,baseUrlOverride:t.baseUrlOverride,includeCredentials:t.includeCredentials})}});return{...e,GET:(t,n,r)=>e.GET(t,{...r||{},headers:{...r?.headers||{},[Of]:n}}),POST:(t,n,r)=>e.POST(t,{...r||{},headers:{...r?.headers||{},[Of]:n}}),PUT:(t,n,r)=>e.PUT(t,{...r||{},headers:{...r?.headers||{},[Of]:n}}),PATCH:(t,n,r)=>e.PATCH(t,{...r||{},headers:{...r?.headers||{},[Of]:n}}),DELETE:(t,n,r)=>e.DELETE(t,{...r||{},headers:{...r?.headers||{},[Of]:n}}),SSE:(t,n,{path:r,...s})=>(r&&Object.entries(r).forEach(([a,i])=>{t=t.replace(`{${a}}`,i)}),NOe({url:t,...s||{},headers:{...s?.headers||{},[Of]:n}}))}},ae=rqe(),en={DEFAULT:1200,LOW:2500,MEDIUM:5e3,HIGH:1e4,VERY_HIGH:3e4,EXREMELY_HIGH:9e4,NONE:0},Wu=2,Fe=e=>{const t=e?.productionMs??en.DEFAULT;e?.devMs??en.HIGH;const n=e?.clientSideMs??en.MEDIUM;return typeof window<"u"?n:t};class cg extends Jb{name="CometError"}const ug={COPILOT:"COPILOT",ARTICLE:"ARTICLE"},sqe={IN_PROGRESS:"IN_PROGRESS"},_C={SELECTED:"SELECTED",REVIEWED:"REVIEWED",REVIEWING:"REVIEWING",UNSORTED:"UNSORTED"},nh={CLICK:"CLICK",FILL:"FILL",SEARCH:"SEARCH",NAVIGATE:"NAVIGATE",SCROLL_PAGE:"SCROLL_PAGE",WAIT:"WAIT"},i8={DOWN:"DOWN"},X4={HISTORY:"HISTORY",OPEN_TABS:"OPEN_TABS",RECENTLY_CLOSED_TABS:"RECENTLY_CLOSED_TABS"},o8={LOGIN:"LOGIN",DOWNLOAD_COMET:"DOWNLOAD_COMET",CREATE_SHORTCUT:"CREATE_SHORTCUT"},nu={IN_THREAD:"IN_THREAD",SIDEBAR:"SIDEBAR",MODAL:"MODAL",IN_THREAD_BOTTOM:"IN_THREAD_BOTTOM",IN_THREAD_INPUT:"IN_THREAD_INPUT",SIDE_CARD:"SIDE_CARD",COMET_NTP_BANNER:"COMET_NTP_BANNER"},ti={PRO_UPGRADE:"PRO_UPGRADE",SIGN_UP_OR_LOGIN:"SIGN_UP_OR_LOGIN",REWRITE_ANSWER:"REWRITE_ANSWER",PERMALINK:"PERMALINK",CONNECTOR:"CONNECTOR",THREAD_TO_SPACE:"THREAD_TO_SPACE",SET_DEFAULT_BROWSER:"SET_DEFAULT_BROWSER",COMET_DOWNLOAD:"COMET_DOWNLOAD",IMAGE_ANNOUNCEMENT_MODAL:"IMAGE_ANNOUNCEMENT_MODAL",MERGE_AUTH_CONNECTOR:"MERGE_AUTH_CONNECTOR",SHORTCUT_MODAL:"SHORTCUT_MODAL",OPEN_SHEERID_MODAL:"OPEN_SHEERID_MODAL"},wC={PRIMARY_COLOR:"PRIMARY_COLOR",SECONDARY_COLOR:"SECONDARY_COLOR",MAX_COLOR:"MAX_COLOR",INVERTED:"INVERTED"},Mt={CODE_ASSET:"CODE_ASSET",CHART:"CHART",CODE_FILE:"CODE_FILE",APP:"APP",GENERATED_IMAGE:"GENERATED_IMAGE",GENERATED_VIDEO:"GENERATED_VIDEO",PDF_FILE:"PDF_FILE",FLASHCARD:"FLASHCARD",QUIZ:"QUIZ",SLIDES:"SLIDES",DOCX_FILE:"DOCX_FILE",XLSX_FILE:"XLSX_FILE"},aqe={MCP_SERVER_TYPE_LOCAL:"MCP_SERVER_TYPE_LOCAL"},Z4={BROWSER_HISTORY:"BROWSER_HISTORY",OPEN_TAB:"OPEN_TAB",RECENTLY_CLOSED_TAB:"RECENTLY_CLOSED_TAB"},Xn={PENDING:"PENDING",COMPLETED:"COMPLETED",FAILED:"FAILED",STAGED:"STAGED",RESUMING:"RESUMING",BLOCKED:"BLOCKED"},$g={NONE:"NONE",INCOGNITO:"INCOGNITO"},Qon={FULL:"FULL",STREAMING:"STREAMING"},Qc={IN_PROGRESS:"IN_PROGRESS",DONE:"DONE"},LY={FINANCE:"FINANCE"},Xon={CALENDAR_EVENT:"CALENDAR_EVENT",PLACE_CARD:"PLACE_CARD",SHOPPING_CARD:"SHOPPING_CARD",CALENDAR_ACTION:"CALENDAR_ACTION",MOVIE_TV_CARD:"MOVIE_TV_CARD"},el={SELECTION_STATUS_UNSPECIFIED:"SELECTION_STATUS_UNSPECIFIED",UNSELECTED:"UNSELECTED",SELECTED:"SELECTED",TIE:"TIE"},yn={HOTELS:"HOTELS",SHOPPING:"SHOPPING",JOBS:"JOBS",IMAGE:"IMAGE",VIDEO:"VIDEO",SOURCES:"SOURCES",MAPS:"MAPS",ASSETS:"ASSETS",APPS:"APPS",TASKS:"TASKS",SEARCH:"SEARCH",CHAT:"CHAT"},iqe="pplx.comet-device-id",oqe="comet_browser";function pi(){return!!oo()}function Ope(){const e=oo();return!!(e?.android_version||e?.ios_version)}const oo=fue(function(){const t=Fn(oqe);if(t)try{return{device_id:Fn(iqe),...JSON.parse(t)}}catch{return}},()=>Math.floor(Date.now()/(6*1e4))),lqe=(e,t="selected_by_user_text")=>e?`
<${t}>
<selection_timestamp>${new Date(e.timestamp).toLocaleString()}</selection_timestamp>
${e.text}
</${t}>`:"",cqe=(e,t,n,r)=>{if(!e)return[];const s=lqe(t.userSelection),a=[];if(n.status==="fulfilled"){const i=n.value?.contents||(n.value?.content?[n.value.content]:[]);for(const{markdown:l="",url:c="",title:u="",og_meta:d={},id:m}of i)a.push({content:[l.slice(0,r-s.length)+s],url:c,title:u,content_type:"markdown",content_origin:"current_tab",og_title:d?.title,og_description:d?.description,tab_id:String(m)})}else a.push({content:[],url:t.sidecarSourceTab.url,title:t.sidecarSourceTab.title,tab_id:String(t.sidecarSourceTab.tabId),content_type:"markdown",content_origin:"current_tab"}),t.sidecarSourceTab.secondaryTab&&a.push({content:[],url:t.sidecarSourceTab.secondaryTab.url,title:t.sidecarSourceTab.secondaryTab.title,tab_id:String(t.sidecarSourceTab.secondaryTab.tabId),content_type:"markdown",content_origin:"current_tab"});return a},uqe=(e,t,n)=>{const r=[];return e.forEach(s=>{const a=t.status==="fulfilled"&&t.value.contents?.find(i=>i.id===s.id);if(!a){r.push({tab_id:String(s.id),content:[],url:s.url,title:"",content_type:"markdown",content_origin:"open_tab"});return}r.push({tab_id:String(a.id),content:[(a.markdown??"").slice(0,n)],url:a.url??"",title:a.title??"",content_type:"markdown",content_origin:"open_tab",og_title:a.og_meta?.title,og_description:a.og_meta?.description})}),r},dqe=e=>e.map(({url:t,title:n,snippet:r,site_name:s,sitelinks:a})=>({url:t,title:n,snippet:r,is_navigational:!0,site_name:s??null,sitelinks:a?.map(({title:i,url:l,snippet:c})=>({title:i,url:l,snippet:c??null}))??null})),Lpe=async({clientPayloadCacheKey:e,cometBrowser:t,maxChars:n,includeSidecar:r,attachedTabs:s,reason:a,cometState:i,requestId:l,navigationResults:c=[]})=>{if(!t)return;const u=[],d=oo(),m={contextType:"runtime",queryContextTimeMs:0,processContextTimeMs:0,getNavigationItemsTimeMs:null,filteredItemsCount:null,version:d.browser_version,mainExtVersion:d.agent_extension_version},p=rc({context_type:m?.contextType,browser_version:m?.version,main_ext_version:m?.mainExtVersion,content_type:m?.contentType});try{ne.info("fetching sidecar context",{request_id:l});const[h,g]=await Promise.allSettled([r?t.GetSidecarContext({key:e,request_id:l}):Promise.resolve(void 0),s.length?t.GetContent({key:e,pages:[...s],request_id:l}):Promise.resolve({contents:[]})]),y=cqe(r,i,h,n);if(u.push(...y),s.length){const v=uqe(s,g,n);u.push(...v)}m.queryContextTimeMs=performance.now()-p.getStartTimeFromTimeOrigin(),ne.info("sending sidecar context",{request_id:l});const{error:x}=await ae.POST("/rest/browser/client_payload",a,{backOffTime:100,numRetries:2,timeoutMs:en.HIGH,body:{client_payload_cache_key:e,client_context:u||[],...c.length>0&&{client_search_results:dqe(c)},metadata:m},headers:{[Gr]:l}});if(p.addTiming("browser.client_context.overall_time_ms"),x)throw new Ie("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e},cause:x})}catch(h){ne.error("Error sending client payload for cache key ",e,h,{request_id:l})}},fqe=async({url:e,cometBrowser:t,stepUuid:n,extraHeaders:r,reason:s})=>{const a=t.openTab({url:e});await vd(a,n,r,s)},mqe=async({cometBrowser:e,maxUrls:t=20})=>{if(e)try{const n=await e.getTopMostVisitedUrls({maxUrls:t},"get-top-most-urls-for-ntp");return n.is_success?n.mostVisitedUrls:void 0}catch(n){ne.error("Error fetching top most urls browser",n);return}},Dpe=async(e,t,n)=>{try{const{error:r}=await ae.POST("/rest/browser/tool_failure",n,{body:{client_payload_cache_key:e.clientPayloadCacheKey,error_type:e.errorType,error_msg:e.errorMsg},backOffTime:100,numRetries:2,headers:t,timeoutMs:en.MEDIUM});if(r)throw new Ie("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e.clientPayloadCacheKey},cause:r})}catch(r){ne.error("Error while sending a failure of tool",r,{request_id:t[Gr]})}},vd=async(e,t,n,r)=>{try{const s=await e,{error:a}=await ae.POST("/rest/browser/tool_result",r,{body:{client_payload_cache_key:t,payload:s},backOffTime:100,numRetries:2,headers:n,timeoutMs:en.MEDIUM});if(a)throw new Ie("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:t},cause:a})}catch(s){const i=s&&s.message||`sendToolResult error: ${s}`,l="errorType"in s?s:{errorType:"unhandled",errorMsg:i};return ne.error("Error while sending tool result",l.errorType,l.errorMsg,{request_id:n[Gr]}),Dpe({clientPayloadCacheKey:t,...l},n,r)}},l8={red:"red",maroon:"blue",orange:"cyan",teal:"green",grey:"grey",brown:"orange",green:"pink",gold:"purple",purple:"red",blue:"yellow"},DY=Object.fromEntries(Object.entries(l8).map(([e,t])=>[t,e])),Fpe=e=>DY[e]??DY.grey;async function pqe(e,t,n,r,s){const a=Promise.allSettled(e.map(async i=>t.groupTabs({tabIds:i.tab_ids,collapsed:i.collapsed,color:l8[i.color]??l8.grey,groupId:i.group_id,title:i.title},n,r[Gr]))).then(i=>({groups:i.map(l=>{if(l.status=="fulfilled"&&l.value.is_success)return{...l.value.tabGroup,color:Fpe(l.value.tabGroup.color)}}).filter(l=>l!==void 0)}));await vd(a,n,r,s)}async function hqe(e,t,n,r,s){const a=t.closeTabs({tabIds:e.tab_ids},n,r[Gr]);await vd(a,n,r,s)}async function gqe(e,t,n,r,s){const a={[Z4.OPEN_TAB]:X4.OPEN_TABS,[Z4.RECENTLY_CLOSED_TAB]:X4.RECENTLY_CLOSED_TABS,[Z4.BROWSER_HISTORY]:X4.HISTORY},i=e.browser_content_sources.map(c=>a[c]).filter(Boolean),l=t.SearchBrowser({closed_tabs_max_results:e.max_results,history_max_results:e.max_results,open_tabs_max_results:e.max_results,request_id:r[Gr],key:n,queries:Array.isArray(e.queries)?[...e.queries]:[],sources:i,start_time:e.start_time?Date.now()-new Date(e.start_time).getTime():void 0,end_time:e.end_time?Date.now()-new Date(e.end_time).getTime():void 0});await vd(l,n,r,s)}async function FY({result:e,key:t,reason:n}){try{await ae.POST("/rest/browser/initial_history_summary",n,{body:{key:t,data:e},backOffTime:100,numRetries:2,timeoutMs:en.MEDIUM,headers:{"Content-Type":"application/json"}})}catch(r){ne.error("Error sending client payload for cache key ",r)}}function yqe({entropyBrowser:e,browserHistorySummaryNumDays:t,browserHistorySummaryMaxResults:n,reason:r}){const{addTiming:s}=rc(),a=Ir();return e.getInitialHistorySummary(a,t,n).then(i=>{s("web.frontend.comet_history_summary_v2"),FY({result:i,key:a,reason:r})}).catch(()=>{FY({result:{open_tabs_results:[],history_results:[],closed_tabs_results:[]},key:a,reason:r})}),a}const xqe=async({entropyBrowser:e,url:t})=>{const n=await e.getQuickActions("get-quick-actions-for-sidecar-suggests");return n.is_success?n.buttons.map(({prompt:r})=>({query:r,image:L1(t)})):[]},vqe=/^\w+:\/\//;let y2=null;const bqe=()=>{if(!pi()||y2!==null)return;const e=new Image;e.onerror=()=>{y2=!1,console.warn("[Comet] chrome://favicon/ is not supported. Using our backend as fallback.")},e.onload=()=>{y2=!0},e.src="chrome://favicon/"},L1=(e,t=64,n="3x")=>{if(!y2)return`https://www.perplexity.ai/rest/browser/favicon?url=${jOe(e)}`;const r=vqe.test(e)?e:`https://${e}`;let s;try{s=decodeURIComponent(r)}catch{s=r}const a=s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\s/g,"\\ ");return`chrome://favicon/size/${t}@${n}/${a}`},Upe=(e,t)=>t.dxt_name?e?.find(n=>n.name===t.dxt_name)?.manifest:void 0,Wg=(e,t)=>t?[e,t].sort().join("-"):e.toString(),_qe=(e,t)=>t?[Wg(e,t),e.toString(),t.toString()]:[e.toString()],wqe={personal_search:!1,skip_search:!1,widget_type:"GENERAL",hide_nav:!1,image_generation:!1,time_widget:!1,hide_sources:!1,mhe_predictions:{skip_search:!1,image_generation_intent:!1,time_widget:!1,sports_intent:!1,places_search_intent:!1,shopping_intent:!1,movie_lists_intent:!1,image_preview:!1,video_preview:!1,nav_intent:!1,study_intent:!1,personal_search:!1,weather_widget:!1,finance_widget_gating:!1,calculator_widget:!1}},KF=600,Cqe=async(e,t=KF)=>{const{data:n}=await ae.POST("/rest/browser/classify","mobile_search_injection",{body:{query:e},timeoutMs:t});return n?.results},Bpe=Yt("WebPlatformContext",{env:{isPublicDNS:!1,isLocalhost:!1,isPplxDev:!1,isPreview:!1,isStaging:!1,isBeta:!1,isTesting:!1,isAskDev:!1,isDevBox:!1,isNamedDevDomain:!1,isProduction:!1,isSandbox:!1,isDevDeployment:!1,envHasDevLogins:!1,deployName:""},device:{isChrome:!1,isMobile:!1,isAndroid:!1,isIOS:!1,isMacOS:!1,isFirefox:!1,isMobileSafari:!1,isWindowsOS:!1,isWindowsApp:!1,isMetaBrowser:!1,isSamsungBrowser:!1,userAgent:""}}),Lt=()=>{const e=f.useContext(Bpe);if(!e)throw new Error("useWebPlatform must be used within WebPlatformContext");return e},Rv={default:{termsOfService:"https://www.perplexity.ai/hub/legal/terms-of-service",enterpriseTermsOfService:"https://www.perplexity.ai/hub/legal/enterprise-terms-of-service",privacyPolicy:"https://www.perplexity.ai/hub/legal/privacy-policy"},"ja-JP":{termsOfService:"https://www.perplexity.ai/ja/hub/legal/terms-of-service",privacyPolicy:"https://www.perplexity.ai/ja/hub/legal/privacy-policy"}},um=4e4,Vpe=2e3,UY=4e3,BY=50,VY=1e3,Zon=1500,Jon=500,eln=100,Sqe=10,tln=10,Eqe=5e3,Mqe=50,$Y=10,WY=1024*1024,$pe=3,Wpe=500,dg="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png",Sl="2.18",Hpe="default",nln="mweb",YF="entropy",h3="windowsapp",rln="ios",sln="android",aln="autodetect",HY=["audio/midi","audio/x-midi","application/zip","application/x-tar","application/x-bzip","application/vnd.rar"],QF=[".bash",".bat",".c",".coffee",".conf",".config",".cpp",".cs",".css",".csv",".cxx",".dart",".diff",".doc",".docx",".fish",".go",".h",".hpp",".htm",".html",".in",".ini",".ipynb",".java",".js",".json",".jsx",".ksh",".kt",".kts",".latex",".less",".log",".lua",".m",".markdown",".md",".pdf",".php",".pl",".pm",".pptx",".py",".r",".R",".rb",".rmd",".rs",".scala",".sh",".sql",".swift",".t",".tex",".text",".toml",".ts",".tsx",".txt",".xlsx",".xml",".yaml",".yml",".zsh"],kqe=QF.join(","),zpe=[".jpeg",".jpg",".jpe",".jp2",".png",".gif",".bmp",".tiff",".tif",".svg",".webp",".ico",".avif",".heic",".heif"],Gpe=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],Tqe=zpe.join(","),qpe=[...QF,...zpe],Nqe=qpe.join(","),jqe=[...QF,...Gpe],Aqe=jqe.join(","),Iqe=[...qpe,...Gpe],Rqe=Iqe.join(","),iln="",oln=Ct.PUBLIC_READ,Kpe=Ct.PRIVATE_READ,CE=Ct.PRIVATE_READ,lln="https://chrome.google.com/webstore/detail/perplexity-ai-search/bnaffjbjpgiagpondjlnneblepbdchol",cln="https://pplx.ai/mac",uln="https://www.perplexity.ai/comet",zY="onboarding",GY="uninstall_default_search_extension",Pqe="edu_referral_code",Oqe="utm_source",Lqe="backtoschool",Dqe="backtoschool_usc",Fqe="backtoschool_cal",Uqe="iitm",Bqe="krstudents",Ic="login-source",qY="login-new",Vqe="model_id",KY="max",XF=5,$qe="/static/images/back-to-school-splash.png",Wqe="back-to-school",dln="/static/images/search-like-never-before-square.jpg",fln="search-like-never-before",mln="/static/images/file-search-upsell-demo.png",pln="file-search-upsell-demo",Hqe="/static/images/sidebar-upsell-bg-light.svg",zqe="/static/images/sidebar-upsell-bg-dark.svg",YY="App Promo Background",hln="Perplexity",g3="/static/images/data-connectors/factset/factset-avatar.svg",y3="FactSet",gln="perplexity@factset.com",x3="/static/images/data-connectors/crunchbase/crunchbase-avatar.svg",v3="Crunchbase",Nu="/static/images/data-connectors/wiley/wiley-avatar.svg",b3="Wiley",D1="Wiley (MCP)",ZF="Finance",yln="/static/images/data-connectors/finance/finance-avatar.svg",_3="/static/images/data-connectors/google/google-drive-avatar.svg",Gqe="/static/images/data-connectors/google/gmail-avatar.svg",qqe="Gmail",Hg="Google Drive",w3="/static/images/data-connectors/google/gcal-gmail-avatar.svg",F1="Gmail with Calendar",Kqe="Microsoft",C3="/static/images/data-connectors/microsoft/onedrive-avatar.svg",Gd="OneDrive",S3="/static/images/data-connectors/microsoft/sharepoint-avatar.svg",qd="SharePoint",JF="/static/images/data-connectors/dropbox/dropbox-avatar.svg",ju="Dropbox",E3="/static/images/data-connectors/box/box-avatar.svg",zg="Box",__="/static/images/data-connectors/notion/notion-avatar.svg",Gg="Notion",U1="/static/images/data-connectors/linear/linear-avatar.svg",dm="Linear",B1="/static/images/data-connectors/slack/slack-avatar.svg",V1="Slack (deprecated)",$1="Slack",M3="/static/images/data-connectors/github/github-avatar.svg",W1="GitHub",H1="/static/images/data-connectors/asana/asana-avatar.svg",Xl="Asana",k3="/static/images/data-connectors/atlassian/atlassian-avatar.svg",z1="Atlassian",eU="/static/images/data-connectors/jira/jira-avatar.svg",G1="Jira",tU="/static/images/data-connectors/confluence/confluence-avatar.svg",q1="Confluence",nU="/static/images/data-connectors/microsoft/teams-avatar.svg",K1="Microsoft Teams",xln="/static/images/data-connectors/whatsapp/whatsapp-avatar.svg",Yqe="/static/images/data-connectors/sidebar-connectors-ad-upsell.png",vln="https://r2cdn.perplexity.ai/hotels/hotel-pro-banner.jpg",bln="Save on hotel bookings with Perplexity Pro",Ype="submit-query",zh="search-model-change",hd="source-selection-change",SE="windows-app",QY=SE,Qqe="If4YwAeizGHdB3eOhX2JxYcjeCgy0N9c",Y1=`${SE}/ask/input`,_ln="https://dl.todesktop.com/25020447d4kq915",J4="pplx.windowsApp.microphonePermission",XY={silenceThreshold:30,silenceDuration:5e3},c8="pplx.upload-privacy-accepted",Qpe=["answer_modes","media_items","knowledge_cards","inline_entity_cards","place_widgets","finance_widgets","sports_widgets","shopping_widgets","jobs_widgets","search_result_widgets","clarification_responses","inline_images","inline_assets","inline_finance_widgets","placeholder_cards","diff_blocks","inline_knowledge_cards","entity_group_v2","refinement_filters","canvas_mode"],ZY=["google_drive","onedrive","sharepoint","dropbox","box","notion"],Xqe=["google_drive","onedrive","sharepoint","dropbox","box"],qg="Outlook",Xpe="/static/images/data-connectors/microsoft/outlook-avatar.svg",Zqe="org-upgrade-in-progress";let JY=0;const rU=1e6;class n0{eventTime=-1;setOnce(){return this.eventTime==-1?(this.eventTime=Date.now(),!0):!1}timeSinceTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime<t?(ne.log(`TimeMarker.timeSinceTimestamp found inconsistency: mytime ${this.eventTime}, old: ${t}`),-1):this.eventTime-t}timeBeforeTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime>t?(ne.log(`TimeMarker.timeBeforeTimestamp found inconsistency: mytime ${this.eventTime}, next: ${t}`),-1):t-this.eventTime}wasSet(){return this.eventTime!=-1}}const Jqe={firstServerResponseReceived:!1,firstLLMTokenReceived:!1,isPerplexityBrowser:!1},El=new Map,eKe=(e,{hasLLMToken:t,hasSearchResults:n,hasSources:r},s)=>{tKe(e,s),nKe(e,t,s),rKe(e,n),sKe(e,r)},tKe=(e,t)=>{const n=El.get(e);if(!n||n.firstServerResponseReceived||!n.submitTimestamp||!n.startFirstServerResponseMarker?.setOnce())return;n.firstServerResponseReceived=!0;const{queryStr:r,isFollowup:s,queryParams:a}=n,i=Jpe(e);i>0&&al({name:"query first server response",data:{startFirstServerResponseElapsed:i,queryStr:r,isFollowup:s,mode:a?.mode??"unknown",isPerplexityBrowser:n.isPerplexityBrowser},session:t??void 0})},nKe=(e,t,n)=>{const r=El.get(e);if(!r||r.firstLLMTokenReceived||!t||!r.startLLMTokenMarker?.setOnce())return;r.firstLLMTokenReceived=!0;const{queryStr:s,isFollowup:a,queryParams:i}=r,l=ehe(e);l>0&&al({name:"query first llm token",data:{startLLMTokenElapsed:l,queryStr:s,isFollowup:a,mode:i?.mode??"unknown",isPerplexityBrowser:r.isPerplexityBrowser},session:n??void 0})},rKe=(e,t)=>{const n=El.get(e);if(n){if(!t)return}else return;n.firstSearchResultsMarker?.setOnce()},sKe=(e,t)=>{const n=El.get(e);if(n){if(!t)return}else return;n.firstSourcesMarker?.setOnce()},wln=e=>{const t=El.get(e);t&&t.firstSourcesRenderMarker?.setOnce()},aKe=(e,t,n,r)=>{r=r??"unknown",cu("web.frontend.start_stream_elapsed",{startTime:e,duration:t*rU,isFollowup:n,mode:r})},iKe=(e,t,n,r)=>{r=r??"unknown",cu("web.frontend.start_llm_token_elapsed",{startTime:e,duration:t*rU,isFollowup:n,mode:r})},oKe=(e,t,n,r)=>{r=r??"unknown",cu("web.frontend.first_search_result_elapsed",{startTime:e,duration:t*rU,isFollowup:n,mode:r})},lKe=({latencies:e,isMobile:t})=>{jo("web.frontend.autosuggest_latency",{latencies:e,isMobile:t})},ej=(e,t)=>{if(e)return h3;const n=oo();return n?.android_version?"browser_android":n?.ios_version?"browser_ios":t??void 0},eQ=(e,{session:t,source:n,name:r})=>{const s=El.get(e);s&&(s.endStreamTimestamp||(s.endStreamTimestamp=Date.now(),al({name:r,data:s,session:t??void 0,source:n})))},Zpe=(e,t,n,r,s)=>{const a=El.get(e);if(!a)return;a.finalizedTimestamp=Date.now();let i=-1;a.submitTimestamp&&(i=a.finalizedTimestamp-a.submitTimestamp);const l=Jpe(e);l>0&&aKe(a.submitTimestamp??0,l,a.isFollowup??!1,a?.queryParams?.mode);const c=uKe(e);c>0&&oKe(a.submitTimestamp??0,c,a.isFollowup??!1,a?.queryParams?.mode);const u=ehe(e);u>0&&iKe(a.submitTimestamp??0,u,a.isFollowup??!1,a?.queryParams?.mode);let d=-1;a.endStreamTimestamp&&a.startFirstServerResponseMarker&&(d=a.startFirstServerResponseMarker.timeBeforeTimestamp(a.endStreamTimestamp));const m={...a,totalElapsed:i,startStreamElapsed:l,startFirstServerResponseElapsed:l,startLLMTokenElapsed:u,totalStreamingElapsed:d,submissionResult:t,entryUUID:n?.backend_uuid,displayModel:n?.display_model,stepType:n?.step_type,isPerplexityBrowser:a.isPerplexityBrowser,source:void 0};al({name:`${t} response`,data:m,session:r??void 0,source:void 0})},Cln=(e,t,n,r)=>{Zpe(e,"FAILED",t,n)},Sln=(e,t,n,r)=>{Zpe(e,"SUCCESSFUL",t,n)},cKe=(e,{name:t,queryStr:n,queryParams:r,isFollowup:s,frontendUUID:a,isPerplexityBrowser:i,session:l,browserVersion:c,source:u,connectors:d,mentions:m})=>{JY+=1;const p={...Jqe};p.submissionType=t,p.submitTimestamp=Date.now(),p.queryStr=n,p.queryParams=r,p.frontendUUID=a,p.submissionCount=JY,p.isFollowup=s,p.startFirstServerResponseMarker=new n0,p.startLLMTokenMarker=new n0,p.firstSearchResultsMarker=new n0,p.firstSourcesMarker=new n0,p.firstSourcesRenderMarker=new n0,p.isPerplexityBrowser=i,p.browserVersion=c,p.enabledConnectors=d?.enabled,p.disabledConnectors=d?.disabled;const h=m?.filter(x=>x.type==="tab")??[];p.attachedTabsDomains=[...new Set(h.map(x=>new URL(x.url).host))],p.attachedTabsCount=h.length;const g=m?.filter(x=>x.type==="space")??[];p.mentionedSpacesCount=g.length;const y=m?.filter(x=>x.type==="shortcut")??[];p.mentionedShortcutsCount=y.length,El.set(e,p),al({name:"submit query",data:p,session:l??void 0,source:u})},Jpe=e=>{const t=El.get(e);let n=-1;return t&&(n=t.startFirstServerResponseMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},ehe=e=>{const t=El.get(e);let n=-1;return t&&(n=t.startLLMTokenMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},uKe=e=>{const t=El.get(e);let n=-1;return t&&(n=t.firstSearchResultsMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},je=()=>{const{session:e}=Nt(),{device:{isWindowsApp:t}}=Lt(),n=f.useRef(new Set),r=f.useCallback((l,c={})=>{const u=xi(),d=t?h3:u.erp??void 0;al({name:l,data:c,source:d,session:e??void 0})},[t,e]),s=f.useCallback(l=>{const c=l.map(({name:u,data:d})=>({name:u,data:d,session:e??void 0}));qGe(c)},[e]),a=f.useCallback((l,c)=>{al({name:l,data:c,session:e??void 0})},[e]),i=f.useCallback((l,c={})=>{n.current.has(l)||(n.current.add(l),al({name:l,data:c,session:e??void 0}))},[e]);return f.useMemo(()=>({trackEvent:r,trackEventTyped:a,trackEventOnce:i,trackEventBatch:s}),[r,s,a,i])},dKe=async({entryUUID:e,params:t,reason:n})=>{try{return(await ae.POST("/rest/entry/should-show-feedback/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:Fe({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_feedback??!1}catch(r){return ne.error("Failed to check if should show feedback",r),!1}},fKe=async({reason:e,lastEventTimestamp:t})=>(await ae.GET("/rest/entry/creation-events",e,{params:{query:{last_event_timestamp_us:t}},timeoutMs:en.EXREMELY_HIGH,numRetries:1})).data?.events.map(s=>({contextUUID:s.context_uuid,entryUUID:s.entry_uuid,isPersonalIntent:s.is_personal_intent,cometIsMissionControl:s.comet_is_mission_control,timestamp:s.timestamp_us}))||[],mKe=({callback:e,reason:t})=>{let s,a=!0,i=null;return(async()=>{for(;a;)try{const c=await fKe({reason:t,lastEventTimestamp:s});if(c.length>0&&(s=Math.max(...c.map(u=>u.timestamp)),await e(c)),!a)break;await new Promise(u=>{i=setTimeout(u,500)})}catch(c){if(ne.error("Failed to poll for entry creation events",c),!a)break;await new Promise(u=>{i=setTimeout(u,2e3)})}})(),()=>{a=!1,i&&(clearTimeout(i),i=null)}},Q1=async({slugOrUUID:e,headers:t,options:n,numRetries:r=0,reason:s})=>{const a="getThreadByUUID";if(!e||e==="undefined"||e==="new"){ne.log(`Tried to ${a} with bad slugOrUUID: ${e}`);return}const i=n?.withParentInfo??!1,l=n?.version??Sl,c=n?.source??Hpe,u=n?.limit??0,d=n?.offset??0,m=n?.fromFirst??!1,p=n?.supportedBlockUseCases??[],h=n?.cursor??null;try{const g=await ae.GET("/rest/thread/{entry_uuid_or_slug}",s,{params:{path:{entry_uuid_or_slug:e},query:{with_parent_info:i,with_schematized_response:!0,version:l,source:c,limit:u,offset:d,from_first:m,supported_block_use_cases:p,cursor:h}},timeoutMs:en.HIGH,numRetries:r,headers:t});if(!g.response.ok||!g.data||g.error)throw g.error?new Error(`Failed to ${a} for ${e}`,{cause:g.error.detail}):new Error(`Failed to ${a} for ${e}`);return g.data}catch(g){throw ne.error("Failed to get thread by uuid",g),g}},Eln=async({entryUUID:e,selectedText:t,beforeContext:n,afterContext:r,callback:s,reason:a})=>{await ae.SSE("/rest/sse/check-sources",a,{params:{entry_uuid_or_slug:e,selected_text:t,before_context:n,after_context:r},handlers:{message:i=>s(i)}})},Mln=async({entryUUID:e,answerHelpful:t,detailedFeedback:n,reason:r})=>{try{const{error:s}=await ae.POST("/rest/entry/feedback/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{answer_helpful:t??!1,feedback:n},timeoutMs:Fe({productionMs:5e3}),numRetries:1});if(s)throw new Ie("API_CLIENTS_ERROR",{cause:s})}catch(s){ne.error(s)}},kln=async({entryUUID:e,params:t,reason:n})=>{if(e)try{const{error:r}=await ae.POST("/rest/entry/label-entry/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:Fe({productionMs:5e3}),numRetries:1});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r})}catch(r){ne.error(r)}},Tln=async({entry_uuid:e,format:t,reason:n})=>{const{data:r,error:s}=await ae.POST("/rest/entry/export",n,{body:{entry_uuid:e,format:t},timeoutMs:Fe({productionMs:6e3}),numRetries:1});if(s)throw new Ie("API_CLIENTS_ERROR",{cause:s});return r},pKe=async({slugOrUUID:e,reason:t})=>{const{error:n}=await ae.POST("/rest/thread/request-access/{entry_uuid_or_slug}",t,{params:{path:{entry_uuid_or_slug:e}}});if(n)throw new Ie("API_CLIENTS_ERROR",{cause:n})},Au=async({entryUUID:e,reason:t})=>{try{const{error:n}=await ae.POST("/rest/sse/perplexity_terminate",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e},timeoutMs:Fe({productionMs:5e3}),numRetries:1});return!n}catch(n){return ne.error("Failed to terminate entry",n),!1}},hKe=async({entryUUID:e,reason:t})=>{try{await ae.POST("/rest/sse/perplexity_skip_search",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e}})}catch(n){ne.error("Failed to skip search",n)}},gKe=async({entryUUID:e,clarification:t,reason:n})=>{try{await ae.POST("/rest/sse/perplexity_clarifying_answer",n,{headers:{"content-type":"application/json"},body:{entry_uuid:e,clarification:t},timeoutMs:Fe({productionMs:5e3}),numRetries:0})}catch(r){ne.error("Failed to give clarifying answer",r)}},yKe=async({entryUUID:e,reason:t})=>{try{return(await ae.POST("/rest/entry/should-show-recruitment-banner/{entry_uuid}",t,{params:{path:{entry_uuid:e}},body:void 0,timeoutMs:Fe({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_recruitment_banner??!1}catch(n){return ne.error("Failed to check if should show recruitment banner",n),!1}},X1=async({contextUUID:e,stepUUID:t,result:n,reason:r})=>{try{const{data:s,error:a}=await ae.POST("/rest/sse/pro_search_step_result",r,{body:{context_uuid:e,step_uuid:t,result:n},timeoutMs:Fe({productionMs:5e3}),numRetries:0});if(a)throw new Ie("API_CLIENTS_ERROR",{cause:a});return s?.status==="completed"?s.should_resume:!1}catch(s){ne.error(s)}return!1},xKe=async({entryUUID:e,params:t,siblingUUID:n,reason:r})=>{const{error:s}=await ae.POST("/rest/entry/set-entry-selection/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{selection_status:t,sibling_uuid:n},timeoutMs:Fe({productionMs:5e3}),numRetries:1});if(s)throw new Ie("API_CLIENTS_ERROR",{cause:s})},the=R.memo(({lineColor:e,width:t,fillColor:n,...r})=>{const s=V("h-auto group",t),a=V(e,"transition-all duration-300");return o.jsx("div",{className:s,...r,children:o.jsxs("svg",{viewBox:"0 0 400 91",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M196.978 27.8931H200.033V34.1872H196.079C192.979 34.1872 190.669 34.9333 189.14 36.4254C187.615 37.9176 186.85 40.3662 186.85 43.7711V64.401H180.606V28.0333H186.85V33.8367C186.85 34.1622 187.014 34.3274 187.337 34.3274C187.52 34.3274 187.659 34.2823 187.754 34.1872C187.848 34.0921 187.938 33.9068 188.032 33.6264C189.234 29.8058 192.219 27.8931 196.983 27.8931H196.978ZM237.763 35.6894C239.402 38.6036 240.227 42.1137 240.227 46.2146C240.227 50.3156 239.407 53.8257 237.763 56.7399C236.119 59.6541 233.993 61.8323 231.38 63.2794C228.767 64.7265 225.956 65.4476 222.951 65.4476C217.03 65.4476 212.868 63.0691 210.464 58.3122C210.28 57.9417 210.046 57.7514 209.768 57.7514C209.49 57.7514 209.351 57.8916 209.351 58.172V77.6853H203.107V28.0333H209.351V34.2573C209.351 34.5377 209.49 34.6779 209.768 34.6779C210.046 34.6779 210.275 34.4926 210.464 34.1171C212.868 29.3602 217.03 26.9817 222.951 26.9817C225.956 26.9817 228.767 27.7028 231.38 29.1499C233.993 30.597 236.119 32.7751 237.763 35.6894ZM233.983 46.2146C233.983 41.9234 232.841 38.5786 230.551 36.1801C228.261 33.7816 225.246 32.5799 221.496 32.5799C217.745 32.5799 214.73 33.7816 212.44 36.1801C210.151 38.5836 209.311 41.9284 209.311 46.2146C209.311 50.5009 210.151 53.8507 212.44 56.2492C214.73 58.6527 217.75 59.8494 221.496 59.8494C225.241 59.8494 228.261 58.6477 230.551 56.2492C232.841 53.8507 233.983 50.5009 233.983 46.2146ZM134.595 35.7445C136.235 38.6587 137.059 42.1688 137.059 46.2697C137.059 50.3707 136.24 53.8808 134.595 56.795C132.951 59.7092 130.825 61.8874 128.213 63.3345C125.6 64.7816 122.788 65.5026 119.783 65.5026C113.863 65.5026 109.7 63.1242 107.296 58.3673C107.112 57.9967 106.879 57.8065 106.601 57.8065C106.322 57.8065 106.183 57.9467 106.183 58.2271V77.7404H99.9446V28.0883H106.188V34.3124C106.188 34.5928 106.327 34.733 106.606 34.733C106.884 34.733 107.112 34.5477 107.301 34.1722C109.705 29.4153 113.867 27.0368 119.788 27.0368C122.793 27.0368 125.605 27.7579 128.218 29.205C130.83 30.6521 132.956 32.8302 134.6 35.7445H134.595ZM130.815 46.2697C130.815 41.9785 129.673 38.6336 127.383 36.2352C125.093 33.8367 122.078 32.6349 118.328 32.6349C114.578 32.6349 111.563 33.8367 109.273 36.2352C106.983 38.6387 106.144 41.9835 106.144 46.2697C106.144 50.5559 106.983 53.9058 109.273 56.3043C111.563 58.7078 114.578 59.9045 118.328 59.9045C122.078 59.9045 125.093 58.7028 127.383 56.3043C129.673 53.9058 130.815 50.5559 130.815 46.2697ZM169.112 52.8543H175.703C174.824 56.2592 173.031 59.2085 170.329 61.7021C167.622 64.1957 163.748 65.4425 158.706 65.4425C154.911 65.4425 151.573 64.6614 148.682 63.0991C145.791 61.5369 143.561 59.3137 141.986 56.4195C140.412 53.5303 139.627 50.1253 139.627 46.2096C139.627 42.294 140.392 38.889 141.917 35.9998C143.442 33.1106 145.583 30.8824 148.335 29.3201C151.086 27.7579 154.31 26.9767 158.011 26.9767C161.711 26.9767 164.776 27.7479 167.344 29.2851C169.912 30.8223 171.829 32.8653 173.101 35.404C174.372 37.9477 175.008 40.7317 175.008 43.7611V47.9572H146.219C146.447 51.5925 147.664 54.4867 149.859 56.6298C152.055 58.7729 155.005 59.8494 158.706 59.8494C161.711 59.8494 164.016 59.2335 165.61 57.9967C167.205 56.7599 168.372 55.0475 169.112 52.8543ZM146.288 42.7146H168.074C168.074 39.545 167.264 37.0614 165.645 35.2638C164.026 33.4712 161.483 32.5699 158.015 32.5699C154.777 32.5699 152.129 33.4461 150.073 35.1937C148.017 36.9412 146.755 39.4498 146.293 42.7096L146.288 42.7146ZM245.169 64.396H251.413V14.043H245.169V64.401V64.396ZM331.801 24.0625H339.093V16.1911H331.801V24.0625ZM357.526 58.9782C356.393 59.0933 355.708 59.1534 355.479 59.1534C355.156 59.1534 354.898 59.0583 354.714 58.873C354.531 58.6877 354.436 58.4324 354.436 58.1019C354.436 57.8716 354.496 57.1806 354.61 56.0389C354.724 54.8972 354.784 53.1347 354.784 50.7612V33.361H363.69L361.937 28.0333H354.789V18.2391H348.545V28.0283H341.755V33.356H348.545V52.5038C348.545 56.5146 349.519 59.4989 351.461 61.4568C353.403 63.4146 356.363 64.396 360.342 64.396H365.2V58.8029H362.771C360.412 58.8029 358.663 58.863 357.531 58.9782H357.526ZM394.059 28.0283L383.723 58.5425C383.583 58.9181 383.365 59.4088 382.655 59.4088C381.944 59.4088 381.726 58.9181 381.587 58.5425L371.25 28.0283H364.882L376.853 64.396H381.085C381.363 64.396 381.572 64.4211 381.711 64.4661C381.85 64.5112 381.964 64.6264 382.059 64.8166C382.242 65.097 382.217 65.5177 381.989 66.0735L380.047 71.3862C379.769 72.0872 379.237 72.4377 378.452 72.4377C378.174 72.4377 377.529 72.3776 376.51 72.2624C375.492 72.1473 374.176 72.0872 372.556 72.0872H367.49V77.6803H374.151C378.035 77.6803 380.375 77.0143 382.386 75.6874C384.398 74.3605 385.958 72.0171 387.07 68.6572L400 29.4203V28.0233H394.059V28.0283ZM311.406 41.5979L301.626 28.0283H294.756V29.4253L306.478 45.1631L292.188 62.999V64.396H299.197L310.576 49.7798L321.191 64.396H327.922V62.999L315.504 46.2146L328.965 29.5004V28.0333H321.956L311.411 41.603L311.406 41.5979ZM332.467 64.396H338.71V28.0333H332.467V64.401V64.396ZM292.471 52.8543C291.592 56.2592 289.799 59.2085 287.097 61.7021C284.39 64.1957 280.515 65.4425 275.474 65.4425C271.679 65.4425 268.341 64.6614 265.45 63.0991C262.559 61.5369 260.329 59.3137 258.754 56.4195C257.18 53.5303 256.395 50.1253 256.395 46.2096C256.395 42.294 257.16 38.889 258.685 35.9998C260.21 33.1106 262.35 30.8824 265.102 29.3201C267.854 27.7579 271.078 26.9767 274.778 26.9767C278.479 26.9767 281.543 27.7479 284.111 29.2851C286.679 30.8223 288.597 32.8653 289.868 35.404C291.14 37.9477 291.776 40.7317 291.776 43.7611V47.9572H262.986C263.215 51.5925 264.432 54.4867 266.627 56.6298C268.823 58.7729 271.773 59.8494 275.474 59.8494C278.479 59.8494 280.783 59.2335 282.378 57.9967C283.972 56.7599 285.14 55.0475 285.88 52.8543H292.471ZM263.056 42.7146H284.842C284.842 39.545 284.032 37.0614 282.413 35.2638C280.793 33.4712 278.25 32.5699 274.783 32.5699C271.545 32.5699 268.897 33.4461 266.841 35.1937C264.784 36.9412 263.523 39.4498 263.061 42.7096L263.056 42.7146Z",className:n}),o.jsx("path",{d:"M38.6936 29.9832L12.8633 5.88983V29.9832H38.6936Z M39.5005 29.9832L65.3308 5.88983V29.9832H39.5005Z M38.7227 2L38.7227 90.2534 M64.5246 53.7584L38.6943 30.0068V62.9404L64.5246 85.9724V53.7584Z M12.8924 53.7584L38.7227 30.0068V62.9404L12.8924 85.9724V53.7584Z M2.28711 29.9832V64.4236H12.8863V53.7348L38.7226 29.9832H2.28711Z M38.6943 30.3L64.5246 54.0515V64.7403H75.2872V30.3L38.6943 30.3Z",className:a,strokeWidth:"4.30504",strokeMiterlimit:"10"})]})})});the.displayName="Full";const nhe=R.memo(({width:e,fillColor:t,...n})=>{const r=V("h-auto group",e,{});return o.jsx("div",{className:r,...n,children:o.jsxs("svg",{viewBox:"0 0 1456 187",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M311.555 34.9571C330.01 34.9571 344.672 45.7532 344.672 65.084C344.672 84.4148 330.01 95.3568 311.555 95.3568H279.094V140H265.817V34.9571H311.555ZM279.094 84.0501H309.585C322.643 84.0501 331.396 77.1931 331.396 65.157C331.396 53.0478 322.643 46.2638 309.585 46.2638H279.094V84.0501ZM353.444 102.797C353.444 77.7037 367.669 63.9169 390.209 63.9169C412.823 63.9169 425.151 77.8496 425.151 99.5877V105.934H365.918C366.137 121.399 375.255 131.465 390.209 131.465C404.434 131.465 410.926 123.587 412.093 116.73H423.619V118.918C421.868 128.037 413.187 141.751 390.355 141.751C367.815 141.751 353.444 127.964 353.444 102.797ZM366.064 95.8674H412.896C412.75 83.2477 405.09 74.1294 390.136 74.1294C375.474 74.1294 367.085 83.3936 366.064 95.8674ZM447.732 65.6676H460.133V76.1719H461.3C464.218 69.8985 469.908 65.4487 483.257 65.4487H500.691V76.3907H483.549C467.501 76.3907 460.571 84.7795 460.571 101.849V140H447.732V65.6676ZM517.092 169.179V65.6676H529.638V75.8801H530.805C536.349 67.3453 545.322 63.9898 555.826 63.9898C575.157 63.9898 589.965 77.1202 589.965 102.87C589.965 128.547 575.157 141.678 555.826 141.678C545.541 141.678 536.641 138.395 531.097 130.152H529.93V169.179H517.092ZM529.492 102.87C529.492 120.888 539.121 131.028 553.2 131.028C567.425 131.028 576.981 120.888 576.981 102.87C576.981 84.7795 567.425 74.64 553.2 74.64C539.121 74.64 529.492 84.7795 529.492 102.87ZM637.266 34.9571V129.642H651.272V140H605.899V129.642H624.428V45.2426H610.276V34.9571H637.266ZM665.9 102.797C665.9 77.7037 680.125 63.9169 702.665 63.9169C725.278 63.9169 737.606 77.8496 737.606 99.5877V105.934H678.374C678.593 121.399 687.711 131.465 702.665 131.465C716.89 131.465 723.382 123.587 724.549 116.73H736.074V118.918C734.324 128.037 725.643 141.751 702.811 141.751C680.27 141.751 665.9 127.964 665.9 102.797ZM678.52 95.8674H725.351C725.205 83.2477 717.546 74.1294 702.592 74.1294C687.93 74.1294 679.541 83.3936 678.52 95.8674ZM752.566 65.6676H765.696L786.851 93.3143H788.018L810.85 65.6676H823.762V67.856L795.313 102.36L822.522 137.812V140H809.391L787.289 111.186H786.121L762.414 140H749.502V137.812L778.827 102.214L752.566 67.856V65.6676ZM871.43 65.6676V129.642H885.436V140H840.063V129.642H858.591V75.953H844.44V65.6676H871.43ZM857.205 52.9749V38.8962H872.087V52.9749H857.205ZM896.344 65.6676H919.613V43.8566H932.452V65.6676H962.068V76.0989H932.452V127.745L933.619 128.912H961.849V140H938.725C926.543 140 919.613 133.945 919.613 121.836V76.0989H896.344V65.6676ZM973.245 65.6676H986.302L1010.01 124.681H1011.18L1034.81 65.6676H1047.5V67.856L1004.76 169.179H991.992V166.99L1003.66 139.927L973.245 67.856V65.6676ZM1116.67 34.9571H1130.09V128.256H1189.03V140H1116.67V34.9571ZM1205.12 86.3114C1206.66 72.5245 1218.55 63.9169 1237.95 63.9169C1257.21 63.9169 1268.59 72.5245 1268.59 91.0529V140H1256.62V129.787H1255.46C1252.25 135.477 1244.66 141.605 1229.05 141.605C1212.78 141.605 1201.55 133.508 1201.55 119.648C1201.55 104.913 1212.78 98.4205 1227.96 96.5239L1256.19 93.0225V90.3235C1256.19 78.725 1249.84 74.1294 1237.66 74.1294C1225.4 74.1294 1218.18 78.725 1217.16 88.4998H1205.12V86.3114ZM1214.31 119.064C1214.31 126.797 1220.88 131.246 1231.17 131.246C1244.88 131.246 1256.19 123.952 1256.19 107.539V102.943L1230.51 106.299C1220.52 107.612 1214.31 111.259 1214.31 119.064ZM1291.61 34.9571H1304.44V75.5153H1305.61C1311.16 67.1995 1320.06 63.9898 1330.34 63.9898C1349.67 63.9898 1364.48 77.1202 1364.48 102.87C1364.48 128.547 1349.67 141.678 1330.34 141.678C1319.84 141.678 1310.86 138.322 1305.32 129.787H1304.15V140H1291.61V34.9571ZM1304.01 102.87C1304.01 120.888 1313.64 131.028 1327.71 131.028C1341.94 131.028 1351.49 120.888 1351.49 102.87C1351.49 84.7795 1341.94 74.64 1327.71 74.64C1313.64 74.64 1304.01 84.7795 1304.01 102.87ZM1381.07 85.1443C1381.07 71.941 1392.52 63.9898 1411.78 63.9898C1431.18 63.9898 1443 71.941 1444.17 86.0926V88.281H1432.42C1431.91 77.9955 1423.74 74.1294 1411.85 74.1294C1400.04 74.1294 1393.4 77.9226 1393.4 84.8525C1393.4 91.7824 1399.09 94.4085 1407.19 95.3568L1419.95 96.9616C1434.98 98.7853 1445.41 105.132 1445.41 118.773C1445.41 132.487 1434.54 141.678 1413.9 141.678C1393.25 141.678 1380.34 132.559 1379.39 119.064V116.876H1391.36C1392.09 126.943 1401.28 131.538 1413.9 131.538C1426.59 131.538 1433.01 126.87 1433.01 119.429C1433.01 112.134 1426.95 108.852 1417.18 107.612L1404.41 106.007C1390.41 104.329 1381.07 98.2017 1381.07 85.1443Z",className:t}),o.jsx("path",{d:"M59.4967 39.8367C30.9654 39.8367 7.83624 62.9671 7.83624 91.5C7.83624 120.033 30.9654 143.163 59.4967 143.163C83.9985 143.163 104.516 126.105 109.823 103.216H117.84C112.399 130.466 88.3457 151 59.4967 151C26.6376 151 0 124.361 0 91.5C0 58.639 26.6376 32 59.4967 32C91.0393 32 116.849 56.5473 118.866 87.5817H155.879L123.292 54.9276L128.838 49.3918L161.428 82.0483L161.387 35.9218L169.223 35.9149L169.264 82.0641L201.87 49.3918L207.416 54.9276L174.829 87.5817H221V95.4183H174.771L207.416 128.131L201.87 133.667L169.281 101.011L169.321 147.157L161.485 147.163L161.444 100.993L128.838 133.667L123.292 128.131L155.937 95.4183H129.748V95.3791H84.6892V95.4183H59.495V87.5817H111.011C109.008 60.8792 86.7098 39.8367 59.4967 39.8367Z",className:t})]})})});nhe.displayName="Labs";const rhe=R.memo(({lineColor:e,width:t,...n})=>{const r=V("h-auto group ",t);return o.jsx("div",{className:r,...n,children:o.jsx("svg",{viewBox:"0 0 101 116",stroke:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{className:e,d:"M86.4325 6.53418L50.4634 36.9696H86.4325V6.53418Z M50.4625 36.9696L17.2603 6.53418V36.9696H50.4625Z M50.4634 1L50.4634 114.441 M83.6656 70.172L50.4634 36.9697V79.3026L83.6656 108.908V70.172Z M17.2603 70.172L50.4625 36.9697V78.4497L17.2603 108.908V70.172Z M3.42627 36.9697V81.2394H17.2605V70.172L50.4628 36.9697H3.42627Z M50.4634 36.9697L83.6656 70.172V81.2394H97.4999V36.9697L50.4634 36.9697Z",strokeWidth:"5.53371",strokeMiterlimit:"10"})})})});rhe.displayName="Mark";const T3=R.memo(({width:e="w-10",sizeVariant:t="regular",fillColor:n="fill-super",svgClassName:r,...s})=>{const a=V("h-auto group",e);return o.jsx("div",{className:a,...s,children:t==="small"?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1102.02 529.46",className:r,children:[o.jsx("path",{className:n,d:"M1068.23,126.49c-23.5-41.68-58.35-75.11-100.77-96.67C928.5,10.04,884.37,0,836.29,0H66.16C29.56,0-.08,29.71,0,66.3l1,463.16h109.72V107.9h78.16v24.37c0,2.66,3.19,3.99,5.1,2.13,20.89-20.25,50.62-30.5,88.64-30.5,26.8,0,51.2,6.11,72.52,18.17,21.44,12.13,38.59,30.51,50.96,54.66h0c12.27,23.95,18.49,53.6,18.49,88.14s-6.22,63.91-18.49,87.85c-12.37,24.14-29.52,42.53-50.96,54.66-21.33,12.06-45.73,18.17-72.52,18.17-16.55,0-55.7-2.68-87.27-25.54-1.98-1.43-4.75-.01-4.75,2.43v127.02h645.68c48.09,0,92.22-10.03,131.18-29.83,42.41-21.55,77.26-54.98,100.78-96.69,22.41-39.76,33.78-86.22,33.78-138.07s-11.37-98.6-33.79-138.39ZM650.3,177.46h-33.53c-23.25,0-40.37,6.1-50.86,18.14-10.7,12.27-16.12,32.09-16.12,58.91v164.71h-79.89V107.9h77.01v20.91c0,2.68,3.28,4.04,5.13,2.11,4.56-4.76,9.87-8.79,15.89-12.06,11.94-6.49,28.27-9.77,48.55-9.77h33.81v68.37ZM967.21,352.21c-13.66,24.23-33.03,42.83-57.56,55.29-24.32,12.36-52.71,18.62-84.38,18.62s-60.35-6.27-84.67-18.62c-24.54-12.46-43.9-31.07-57.56-55.29-13.58-24.09-20.47-53.47-20.47-87.34s6.89-63.54,20.47-87.63c13.65-24.22,33.02-42.82,57.56-55.29,24.33-12.36,52.81-18.62,84.67-18.62s60.06,6.27,84.38,18.62c24.53,12.47,43.9,31.07,57.56,55.29,13.58,24.1,20.47,53.58,20.47,87.63s-6.89,63.25-20.47,87.34Z"}),o.jsx("path",{className:n,d:"M868.46,179.51c-12.16-7.28-26.7-10.97-43.2-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28,12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.07-28.22-32.29Z"}),o.jsx("path",{className:n,d:"M221.1,351.54c12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.06-28.22-32.29-12.16-7.28-26.7-10.97-43.19-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28Z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 804.75 382.36",children:[o.jsx("path",{className:n,d:"M558.95,126.72c-27.44,27.72-27.17,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04Z"}),o.jsx("path",{className:n,d:"M780.18,91.05l-.13-.24c-16.48-29.44-40.65-53.13-69.89-68.52l-.17-.09c-27.73-14.73-58.76-22.2-92.21-22.2H30.68C14.13,0,.71,13.4.68,29.94l-.68,352.42h61.16V69.44h51.68v20.46c0,2.11,2.57,3.13,4.03,1.6,47.58-52.18,144.58-36.94,178.65,27.45,11.54,19.66,17.39,43.96,17.39,72.23,1.63,73.04-48.06,131.68-120.25,131.21-32.37,0-57.81-12.59-75.79-31.52-1.45-1.53-4.03-.51-4.03,1.6v89.9h504.93c33.45,0,64.43-7.45,92.09-22.14l.17-.09c29.33-15.43,53.53-39.13,69.99-68.53l.14-.25c16.31-28.74,24.58-62.44,24.58-100.17s-8.27-71.4-24.57-100.13ZM479.99,118.23c-23.81.5-56.08-3.74-72.26,13-8.74,8.61-13.17,23.4-13.17,43.96v140.34h-51.67V69.44h51.67v20.46c0,2.35,3.08,3.22,4.32,1.22,5.01-8.06,10.34-13.58,16.12-16.74,9.81-5.62,23.28-8.48,40.05-8.48h24.94v52.31ZM613.77,322.39c-75.99.52-128.52-54.09-127-131.21,0-27.33,5.53-51.14,16.45-70.78,43.24-80.65,177.73-80.74,220.65-.03,11.22,19.65,16.91,43.48,16.91,70.8,1.27,76.58-51.1,131.74-127,131.21Z"}),o.jsx("path",{className:n,d:"M240.29,256.1h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04-27.44,27.72-27.18,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0Z"})]})})});T3.displayName="Pro";const she=R.memo(({width:e,fillColor:t,isPro:n,isMax:r,isEnterprise:s,...a})=>{const i=V("h-auto group",e,{"":n});return s&&n?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 797 82",children:[o.jsx("path",{className:"fill-super",d:"M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"}),o.jsx("path",{className:t,d:"M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"})]})}):s&&r?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 797 82",children:[o.jsx("path",{className:"fill-max",d:"M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"}),o.jsx("path",{className:t,d:"M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"})]})}):n?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3913.07 632",children:[o.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),o.jsxs("g",{children:[o.jsx("path",{className:"fill-super",d:"M3355.84,188.2c-34.07-64.39-131.07-79.63-178.65-27.45-1.45,1.53-4.03.51-4.03-1.6v-20.46s-51.68,0-51.68,0v360.92h51.68v-137.9c0-2.11,2.57-3.13,4.03-1.6,17.98,18.93,43.42,31.52,75.79,31.52,72.2.47,121.88-58.16,120.25-131.21,0-28.27-5.85-52.57-17.39-72.23ZM3321.56,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.18-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),o.jsx("path",{className:"fill-super",d:"M3678.1,499.61h-438.05v-48.22h438.05c33.41,0,64.39-7.45,92.07-22.16,29.4-15.46,53.58-39.15,70.02-68.56l.08-.14c16.31-28.72,24.58-62.4,24.58-100.11s-8.26-71.36-24.56-100.07l-.08-.13c-16.46-29.43-40.64-53.13-69.93-68.54-27.79-14.76-58.78-22.22-92.19-22.22h-555.91V21.24h555.91c41.39,0,79.99,9.36,114.73,27.81,37.45,19.7,68.41,49.99,89.43,87.55,20.45,36.05,30.82,77.7,30.82,123.82s-10.38,87.81-30.84,123.86c-21,37.53-51.96,67.81-89.53,87.57-34.63,18.4-73.22,27.75-114.61,27.75Z"}),o.jsx("path",{className:"fill-super",d:"M3784.19,189.62c-42.92-80.72-177.41-80.62-220.65.03-10.91,19.63-16.45,43.44-16.45,70.78-1.52,77.12,51.01,131.73,127,131.21,75.9.53,128.27-54.63,127-131.21,0-27.33-5.69-51.15-16.91-70.8ZM3749.42,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.17-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),o.jsx("path",{className:"fill-super",d:"M3515.38,135.16c-16.77,0-30.24,2.85-40.05,8.48-5.78,3.15-11.11,8.68-16.12,16.74-1.24,2-4.32,1.13-4.32-1.22v-20.46s-51.67,0-51.67,0v246.1h51.67v-140.34c0-20.57,4.43-35.36,13.17-43.97,16.17-16.75,48.45-12.5,72.26-13v-52.31h-24.94Z"})]})]})}):r?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{viewBox:"0 0 485 74",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),o.jsx("path",{d:"M113.78 16.0915H117.318V23.4013H112.739C109.15 23.4013 106.475 24.2666 104.701 26.003C102.937 27.7336 102.051 30.5812 102.051 34.5388V58.508H94.8233V16.2578H102.051V22.9997C102.051 23.3803 102.242 23.5676 102.613 23.5676C102.825 23.5676 102.984 23.5149 103.098 23.406C103.211 23.2959 103.308 23.0828 103.422 22.7538C104.813 18.3162 108.274 16.095 113.785 16.095H113.78V16.0903V16.0915ZM161.863 25.1483C163.76 28.5322 164.714 32.6103 164.714 37.3759C164.714 42.1414 163.765 46.2196 161.863 49.6034C159.96 52.9873 157.495 55.5211 154.469 57.2001C151.443 58.8792 148.189 59.7187 144.71 59.7187C137.853 59.7187 133.032 56.9554 130.248 51.4277C130.036 50.9944 129.763 50.7755 129.444 50.7755C129.124 50.7755 128.959 50.9371 128.959 51.2661V73.9379H121.73V16.2531H128.959V23.4856C128.959 23.8088 129.119 23.9762 129.444 23.9762C129.769 23.9762 130.031 23.762 130.248 23.324C133.032 17.7975 137.853 15.033 144.71 15.033C148.189 15.033 151.443 15.8725 154.469 17.5516C157.495 19.2306 159.955 21.7644 161.863 25.1483ZM157.491 37.3759C157.491 32.3914 156.166 28.5064 153.515 25.7173C150.866 22.9271 147.376 21.5349 143.029 21.5349C138.682 21.5349 135.193 22.9318 132.542 25.7173C129.887 28.5064 128.918 32.3961 128.918 37.3759C128.918 42.3556 129.892 46.2453 132.542 49.0344C135.193 51.8293 138.687 53.2168 143.029 53.2168C147.371 53.2168 150.866 51.8199 153.515 49.0344C156.166 46.25 157.491 42.3556 157.491 37.3759ZM40.127 25.2103C42.0241 28.5942 42.9779 32.6724 42.9779 37.4379C42.9779 42.2034 42.0287 46.2816 40.127 49.6655C38.224 53.0493 35.7605 55.5843 32.734 57.2622C29.7076 58.9412 26.454 59.7808 22.9747 59.7808C16.1177 59.7808 11.2972 57.0175 8.51295 51.4897C8.30229 51.0565 8.02844 50.8375 7.70894 50.8375C7.38944 50.8375 7.22442 50.9991 7.22442 51.327V73.9988H0V16.3151H7.22793V23.5465C7.22793 23.8697 7.3871 24.0371 7.71245 24.0371C8.0378 24.0371 8.29995 23.8228 8.51646 23.3849C11.3007 17.8584 16.1212 15.0939 22.9782 15.0939C26.4587 15.0939 29.7111 15.9334 32.7375 17.6125C35.764 19.2915 38.2228 21.8253 40.1305 25.2092H40.1246L40.127 25.2103ZM35.7488 37.4379C35.7488 32.4534 34.424 28.5684 31.7743 25.7794C29.1236 22.995 25.629 21.597 21.2871 21.597C16.9451 21.597 13.4506 22.9939 10.8009 25.7794C8.15132 28.5743 7.17644 32.4593 7.17644 37.4379C7.17644 42.4165 8.15132 46.3074 10.8009 49.0976C13.4506 51.8925 16.9416 53.2788 21.2871 53.2788C25.6325 53.2788 29.1236 51.882 31.7743 49.0976C34.424 46.3132 35.7488 42.4177 35.7488 37.4379ZM82.048 45.0873H89.6786C88.6627 49.0449 86.5854 52.4697 83.4559 55.3642C80.3206 58.2633 75.8359 59.7082 69.9949 59.7082C65.6026 59.7082 61.7359 58.8007 58.3899 56.9859C55.0439 55.171 52.461 52.5903 50.6353 49.2276C48.8108 45.8695 47.9026 41.9177 47.9026 37.3653C47.9026 32.8129 48.7897 28.8612 50.5522 25.5031C52.3159 22.145 54.7958 19.5585 57.9815 17.7448C61.1683 15.9299 64.9004 15.0225 69.185 15.0225C73.4695 15.0225 77.0215 15.9194 79.9906 17.7026C82.9656 19.4906 85.1822 21.864 86.6568 24.8099C88.1314 27.7664 88.8628 30.9992 88.8628 34.5189V39.3945H55.5261C55.7883 43.6178 57.202 46.9818 59.7428 49.4688C62.2847 51.9616 65.7021 53.2074 69.9878 53.2074C73.4672 53.2074 76.1379 52.4932 77.9847 51.0541C79.8303 49.6151 81.1808 47.6281 82.0422 45.0791L82.0469 45.0896L82.048 45.0873ZM55.3775 33.3082H80.6039C80.6039 29.6269 79.6653 26.7384 77.7892 24.653C75.9132 22.5723 72.9686 21.5244 68.9521 21.5244C65.2035 21.5244 62.1361 22.5407 59.7545 24.5746C57.3729 26.6025 55.9135 29.518 55.3775 33.3082ZM170.545 58.4986H177.778V0H170.545V58.5033V58.4986ZM272.204 11.6386H280.65V2.49282H272.204V11.6386ZM303.389 52.2051C302.076 52.3409 301.282 52.4089 301.021 52.4089C300.649 52.4089 300.343 52.3 300.134 52.0798C299.921 51.8656 299.809 51.5693 299.809 51.1829C299.809 50.9171 299.878 50.1139 300.015 48.785C300.143 47.4607 300.216 45.4116 300.216 42.653V22.4377H310.526L308.494 16.2484H300.219V4.86971H292.993V16.2425H285.129V22.4318H292.993V44.6752C292.993 49.3365 294.123 52.8046 296.367 55.0773C298.616 57.3512 302.045 58.4928 306.656 58.4928H312.279V51.9955H309.465C306.733 51.9955 304.71 52.0634 303.396 52.1993L303.389 52.2051ZM347.085 16.2425L335.113 51.6993C334.955 52.1372 334.7 52.7063 333.883 52.7063C333.067 52.7063 332.806 52.1384 332.643 51.6993L320.672 16.2484H313.3L327.163 58.4998H332.067C332.385 58.4998 332.63 58.5314 332.795 58.5829C332.954 58.6356 333.088 58.7703 333.196 58.9892C333.406 59.3124 333.38 59.803 333.113 60.4493L330.865 66.6234C330.541 67.4372 329.927 67.8435 329.021 67.8435C328.697 67.8435 327.949 67.7756 326.771 67.6397C325.592 67.5039 324.071 67.4372 322.195 67.4372H316.327V73.9333H324.04C328.54 73.9333 331.247 73.1616 333.578 71.6184C335.909 70.0752 337.713 67.3529 339 63.4538L353.973 17.8712V16.2437L347.094 16.2496L347.085 16.2437V16.2425ZM247.737 32.0097L236.408 16.2472H228.455V17.8689L242.028 36.1499L225.477 56.8711V58.4928H233.594L246.77 41.5103L259.062 58.4928H266.858V56.8711L252.472 37.37L268.065 17.952V16.2472H259.949L247.74 32.0097H247.737ZM272.973 58.4986H280.205V16.2531H272.973V58.5033V58.4986ZM225.379 45.0873C224.358 49.0449 222.288 52.4697 219.159 55.3642C216.022 58.2633 211.538 59.7082 205.695 59.7082C201.304 59.7082 197.436 58.8007 194.09 56.9859C190.739 55.171 188.163 52.5903 186.337 49.2276C184.517 45.8695 183.609 41.9177 183.609 37.3653C183.609 32.8129 184.496 28.8612 186.26 25.5031C188.029 22.145 190.503 19.5585 193.69 17.7448C196.873 15.9299 200.607 15.0225 204.897 15.0225C209.188 15.0225 212.734 15.9194 215.707 17.7026C218.678 19.4906 220.901 21.864 222.374 24.8099C223.849 27.7664 224.581 30.9992 224.581 34.5189V39.3945H191.241C191.509 43.6178 192.914 46.9818 195.458 49.4688C197.999 51.9616 201.418 53.2074 205.702 53.2074C209.182 53.2074 211.854 52.4932 213.698 51.0541C215.542 49.6151 216.894 47.6281 217.75 45.0791H225.385L225.379 45.0896V45.0873ZM191.261 33.3082H216.487C216.487 29.6269 215.548 26.7384 213.678 24.653C211.799 22.5723 208.858 21.5244 204.84 21.5244C201.09 21.5244 198.025 22.5407 195.642 24.5746C193.261 26.6025 191.798 29.518 191.266 33.3082H191.261Z",className:t}),o.jsxs("g",{children:[o.jsx("path",{d:"M369.705 16.0751V19.7517H370.279C371.485 17.7413 373.552 15.3866 379.007 15.3866C384.461 15.3866 386.93 18.2588 387.906 20.7282H388.48C389.915 18.1429 392.499 15.3866 398.241 15.3866C403.982 15.3866 408.345 18.5457 408.345 25.2666V45.3133H403.293V25.612C403.293 21.7633 401.169 19.4086 397.035 19.4086C392.385 19.4086 389.112 22.2234 389.112 28.0825V45.3145H384.06V25.6131C384.06 21.7644 381.936 19.4098 377.802 19.4098C373.151 19.4098 369.879 22.2246 369.879 28.0837V45.3156H364.827V16.0786H369.707L369.705 16.0751Z",className:"fill-max"}),o.jsx("path",{d:"M412.837 24.5758C413.813 19.1194 418.693 15.3855 425.985 15.3855C433.276 15.3855 438.328 19.1194 438.328 26.2419V45.3121H433.448V41.0045H432.873C431.61 43.0722 428.797 45.9444 422.711 45.9444C416.626 45.9444 412.032 42.7854 412.032 37.5585C412.032 32.3317 416.452 29.5169 422.423 28.9432L433.332 27.9093V26.1283C433.332 21.3605 430.518 19.178 425.869 19.178C421.219 19.178 418.232 21.3605 417.716 25.4387H412.836V24.5769L412.837 24.5758ZM423.573 42.1519C428.912 42.1519 433.333 39.0502 433.333 32.4441V31.6397L423.114 32.6162C419.324 32.9605 417.085 34.3971 417.085 37.3267C417.085 40.2563 419.612 42.1519 423.573 42.1519Z",className:"fill-max"}),o.jsx("path",{d:"M456.8 2.49283C461.595 2.49283 466.06 3.61337 470.071 5.74672C474.452 8.0522 477.928 11.4606 480.394 15.8725C482.786 20.0889 483.999 24.9855 483.999 30.4255C483.999 35.8654 482.786 40.7632 480.394 44.9796C479.086 47.319 477.492 49.3739 475.629 51.1349C474.431 52.2672 473.125 53.2788 471.71 54.1617L468.776 50.4617L455.493 33.7133H455.001L445.815 45.3156H440.418V44.4539L451.985 30.3037L440.418 16.1536V15.2918H445.815L455.001 26.8941H455.493L464.679 15.2918H470.075V16.1536L458.509 30.3037L472.647 47.5052C474.071 46.1142 475.295 44.5054 476.312 42.6858L476.32 42.6718C478.31 39.1685 479.319 35.0481 479.319 30.4255C479.319 25.8028 478.31 21.6837 476.321 18.1792L476.313 18.1651C474.297 14.5541 471.46 11.7686 467.883 9.88697C464.547 8.11308 460.821 7.21618 456.8 7.21618H364.861V2.49283H456.8Z",className:"fill-max"}),o.jsx("path",{d:"M462.359 55.5562L460.611 53.3526C459.374 53.5399 458.103 53.6348 456.8 53.6348H364.861V58.3183H456.8C459.252 58.3183 461.616 58.0326 463.877 57.4706L462.358 55.5562H462.359Z",className:"fill-max"})]})]})}):o.jsx("div",{className:i,...a,children:o.jsx("svg",{viewBox:"0 0 962 202",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M310.846 43.922H320.632V63.8822H307.966C298.037 63.8822 290.638 66.2483 285.737 70.9803C280.852 75.7123 278.401 83.4772 278.401 94.2751V159.698H258.4V44.3666H278.401V62.7707C278.401 63.8028 278.926 64.3269 279.961 64.3269C280.549 64.3269 280.995 64.1839 281.297 63.8822C281.6 63.5805 281.886 62.993 282.188 62.1038C286.039 49.9879 295.602 43.922 310.862 43.922H310.846ZM441.502 68.646C446.753 77.8877 449.395 89.0191 449.395 102.024C449.395 115.029 446.769 126.161 441.502 135.402C436.235 144.644 429.425 151.552 421.055 156.141C412.685 160.73 403.679 163.016 394.052 163.016C375.084 163.016 361.75 155.474 354.048 140.388C353.459 139.213 352.712 138.61 351.82 138.61C350.929 138.61 350.484 139.055 350.484 139.944V201.825H330.482V44.3666H350.484V64.1045C350.484 64.9938 350.929 65.4384 351.82 65.4384C352.712 65.4384 353.444 64.8509 354.048 63.6599C361.75 48.5746 375.084 41.032 394.052 41.032C403.679 41.032 412.685 43.3186 421.055 47.9077C429.425 52.4968 436.235 59.4043 441.502 68.646ZM429.393 102.024C429.393 88.4157 425.733 77.8083 418.397 70.2022C411.062 62.596 401.403 58.785 389.389 58.785C377.376 58.785 367.717 62.596 360.381 70.2022C353.046 77.8242 350.357 88.4316 350.357 102.024C350.357 115.617 353.046 126.24 360.381 133.846C367.717 141.468 377.392 145.263 389.389 145.263C401.387 145.263 411.062 141.452 418.397 133.846C425.733 126.24 429.393 115.617 429.393 102.024ZM111.004 68.8207C116.255 78.0624 118.897 89.1938 118.897 102.199C118.897 115.204 116.271 126.335 111.004 135.577C105.737 144.819 98.9266 151.726 90.5568 156.315C82.1869 160.904 73.1806 163.191 63.5536 163.191C44.5862 163.191 31.2517 155.648 23.5502 140.563C22.9614 139.388 22.2135 138.785 21.3225 138.785C20.4314 138.785 19.9858 139.229 19.9858 140.119V202H0V44.5413H20.0017V64.2792C20.0017 65.1685 20.4473 65.6131 21.3384 65.6131C22.2295 65.6131 22.9614 65.0256 23.5661 63.8346C31.2676 48.7493 44.6021 41.2067 63.5696 41.2067C73.1965 41.2067 82.2028 43.4933 90.5727 48.0824C98.9426 52.6715 105.753 59.579 111.02 68.8207H111.004ZM98.8948 102.199C98.8948 88.5904 95.235 77.983 87.8994 70.3769C80.5639 62.7707 70.9051 58.9597 58.8913 58.9597C46.8776 58.9597 37.2188 62.7707 29.8833 70.3769C22.5477 77.9989 19.8585 88.6062 19.8585 102.199C19.8585 115.792 22.5477 126.415 29.8833 134.021C37.2188 141.643 46.8776 145.438 58.8913 145.438C70.9051 145.438 80.5639 141.627 87.8994 134.021C95.235 126.415 98.8948 115.792 98.8948 102.199ZM221.578 123.08H242.694C239.878 133.878 234.133 143.231 225.477 151.139C216.805 159.047 204.393 163.001 188.242 163.001C176.085 163.001 165.392 160.523 156.131 155.569C146.87 150.615 139.726 143.564 134.682 134.386C129.637 125.224 127.123 114.426 127.123 102.008C127.123 89.5908 129.574 78.7929 134.459 69.6305C139.344 60.4682 146.202 53.4019 155.017 48.4476C163.833 43.4933 174.16 41.0161 186.015 41.0161C197.869 41.0161 207.687 43.4615 215.914 48.3365C224.14 53.2114 230.283 59.6901 234.356 67.7409C238.43 75.8076 240.466 84.6364 240.466 94.2434V107.55H148.239C148.971 119.079 152.869 128.257 159.902 135.053C166.936 141.849 176.388 145.263 188.242 145.263C197.869 145.263 205.252 143.31 210.36 139.388C215.468 135.466 219.208 130.035 221.578 123.08ZM148.462 90.9246H218.253C218.253 80.873 215.659 72.9969 210.472 67.2963C205.284 61.6115 197.137 58.7532 186.03 58.7532C175.656 58.7532 167.174 61.5321 160.587 67.074C153.999 72.6158 149.957 80.5713 148.477 90.9087L148.462 90.9246ZM465.227 159.682H485.229V0H465.227V159.698V159.682ZM742.753 31.7744H766.113V6.8122H742.753V31.7744ZM825.163 142.5C821.535 142.866 819.339 143.056 818.607 143.056C817.573 143.056 816.745 142.755 816.157 142.167C815.568 141.579 815.266 140.77 815.266 139.722C815.266 138.991 815.457 136.8 815.823 133.179C816.189 129.559 816.379 123.969 816.379 116.443V61.2622H844.91L839.293 44.3666H816.395V13.3068H796.394V44.3508H774.642V61.2463H796.394V121.969C796.394 134.688 799.512 144.152 805.734 150.361C811.956 156.569 821.44 159.682 834.185 159.682H849.748V141.945H841.966C834.408 141.945 828.807 142.135 825.179 142.5H825.163ZM942.198 44.3508L909.084 141.119C908.639 142.31 907.939 143.866 905.663 143.866C903.388 143.866 902.688 142.31 902.242 141.119L869.129 44.3508H848.729L887.078 159.682H900.635C901.526 159.682 902.194 159.761 902.64 159.904C903.086 160.047 903.451 160.412 903.754 161.016C904.343 161.905 904.263 163.239 903.531 165.001L897.309 181.849C896.418 184.072 894.716 185.184 892.201 185.184C891.31 185.184 889.242 184.993 885.98 184.628C882.718 184.263 878.501 184.072 873.314 184.072H857.083V201.809H878.421C890.865 201.809 898.359 199.698 904.804 195.49C911.248 191.281 916.245 183.85 919.809 173.195L961.229 48.7652V44.3349H942.198V44.3508ZM677.418 87.3835L646.086 44.3508H624.08V48.7811L661.633 98.6896L615.853 155.251V159.682H638.305L674.76 113.33L708.765 159.682H730.326V155.251L690.545 102.024L733.667 49.0193V44.3666H711.215L677.433 87.3994L677.418 87.3835ZM744.886 159.682H764.887V44.3666H744.886V159.698V159.682ZM616.76 123.08C613.943 133.878 608.199 143.231 599.543 151.139C590.871 159.047 578.459 163.001 562.308 163.001C550.151 163.001 539.458 160.523 530.197 155.569C520.936 150.615 513.792 143.564 508.747 134.386C503.703 125.224 501.189 114.426 501.189 102.008C501.189 89.5908 503.64 78.7929 508.525 69.6305C513.41 60.4682 520.268 53.4019 529.083 48.4476C537.899 43.4933 548.226 41.0161 560.08 41.0161C571.935 41.0161 581.753 43.4615 589.98 48.3365C598.206 53.2114 604.348 59.6901 608.422 67.7409C612.495 75.8076 614.532 84.6364 614.532 94.2434V107.55H522.305C523.037 119.079 526.935 128.257 533.968 135.053C541.002 141.849 550.453 145.263 562.308 145.263C571.935 145.263 579.318 143.31 584.426 139.388C589.534 135.466 593.273 130.035 595.644 123.08H616.76ZM522.527 90.9246H592.319C592.319 80.873 589.725 72.9969 584.538 67.2963C579.35 61.6115 571.203 58.7532 560.096 58.7532C549.721 58.7532 541.24 61.5321 534.653 67.074C528.065 72.6158 524.023 80.5713 522.543 90.9087L522.527 90.9246Z",className:t})})})});she.displayName="Word";const vKe={tiny:"w-4 md:w-6",small:"",md:"w-10","md-large":"w-20",large:"w-24",xl:"w-36"},bKe="w-6 md:w-8",za=R.memo(({size:e="large",includeEffects:t=!1,isPro:n=!1,isMax:r=!1,isEnterprise:s=!1,variant:a="full",color:i="foreground",...l})=>{let c="w-28 md:w-[140px]";e==="tiny"?c="w-14 md:w-16":e==="small"?c="w-24":e==="large"?c="w-40 md:w-52":e==="xl"&&(c=s?"w-72":"w-64");const u=vKe?.[e]||bKe;let d="w-6";e==="large"?d="w-12":e==="md-large"?d="w-8":e==="xl"&&(d="w-36");const m=V("",{"stroke-foreground":i==="foreground","stroke-quiet":i==="quiet","stroke-super":i==="super"||i==="mixed","stroke-caution":i==="caution","stroke-light":i==="white","stroke-inverse":i==="background","group-hover:stroke-super transition-colors duration-300":t}),p=V(" block",{"fill-foreground":i==="foreground"||i==="mixed","fill-quiet":i==="quiet","fill-super":i==="super","fill-caution":i==="caution","fill-light":i==="white","fill-inverse":i==="background","group-hover:fill-super transition-colors duration-300":t});return a==="pro"?o.jsx(T3,{width:d,fillColor:p,...l}):a==="mark"?o.jsx("div",{className:V({"transition-all duration-300 ease-in-out hover:scale-105":t}),children:o.jsx(rhe,{lineColor:m,width:u,...l})}):a==="text"?o.jsx(she,{fillColor:p,width:c,isPro:n,isMax:r,isEnterprise:s,...l}):a==="full"?o.jsx(the,{fillColor:p,lineColor:m,width:c,...l}):a==="labs"?o.jsx(nhe,{width:c,fillColor:p,...l}):null});za.displayName="Logo";const N3=R.memo(({onClick:e,testId:t="close-button",size:n="small",variant:r="common",className:s="right-sm top-sm absolute",ariaLabel:a="Close"})=>o.jsx("div",{className:s,children:o.jsx(Te,{testId:t,variant:r,pill:!0,size:n,onClick:e,icon:It,ariaLabel:a})}));N3.displayName="CloseButton";var tj="focusScope.autoFocusOnMount",nj="focusScope.autoFocusOnUnmount",tQ={bubbles:!1,cancelable:!0},_Ke="FocusScope",sU=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=f.useState(null),u=di(s),d=di(a),m=f.useRef(null),p=Hn(t,y=>c(y)),h=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let y=function(_){if(h.paused||!l)return;const w=_.target;l.contains(w)?m.current=w:ud(m.current,{select:!0})},x=function(_){if(h.paused||!l)return;const w=_.relatedTarget;w!==null&&(l.contains(w)||ud(m.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&ud(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const b=new MutationObserver(v);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,h.paused]),f.useEffect(()=>{if(l){rQ.add(h);const y=document.activeElement;if(!l.contains(y)){const v=new CustomEvent(tj,tQ);l.addEventListener(tj,u),l.dispatchEvent(v),v.defaultPrevented||(wKe(kKe(ahe(l)),{select:!0}),document.activeElement===y&&ud(l))}return()=>{l.removeEventListener(tj,u),setTimeout(()=>{const v=new CustomEvent(nj,tQ);l.addEventListener(nj,d),l.dispatchEvent(v),v.defaultPrevented||ud(y??document.body,{select:!0}),l.removeEventListener(nj,d),rQ.remove(h)},0)}}},[l,u,d,h]);const g=f.useCallback(y=>{if(!n&&!r||h.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(x&&v){const b=y.currentTarget,[_,w]=CKe(b);_&&w?!y.shiftKey&&v===w?(y.preventDefault(),n&&ud(_,{select:!0})):y.shiftKey&&v===_&&(y.preventDefault(),n&&ud(w,{select:!0})):v===b&&y.preventDefault()}},[n,r,h.paused]);return o.jsx(mn.div,{tabIndex:-1,...i,ref:p,onKeyDown:g})});sU.displayName=_Ke;function wKe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ud(r,{select:t}),document.activeElement!==n)return}function CKe(e){const t=ahe(e),n=nQ(t,e),r=nQ(t.reverse(),e);return[n,r]}function ahe(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function nQ(e,t){for(const n of e)if(!SKe(n,{upTo:t}))return n}function SKe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function EKe(e){return e instanceof HTMLInputElement&&"select"in e}function ud(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&EKe(e)&&t&&e.select()}}var rQ=MKe();function MKe(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=sQ(e,t),e.unshift(t)},remove(t){e=sQ(e,t),e[0]?.resume()}}}function sQ(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function kKe(e){return e.filter(t=>t.tagName!=="A")}var rj=0;function ihe(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??aQ()),document.body.insertAdjacentElement("beforeend",e[1]??aQ()),rj++,()=>{rj===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),rj--}},[])}function aQ(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Pv="right-scroll-bar-position",Ov="width-before-scroll-bar",TKe="with-scroll-bars-hidden",NKe="--removed-body-scroll-bar-size";function sj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jKe(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var AKe=typeof window<"u"?f.useLayoutEffect:f.useEffect,iQ=new WeakMap;function ohe(e,t){var n=jKe(null,function(r){return e.forEach(function(s){return sj(s,r)})});return AKe(function(){var r=iQ.get(n);if(r){var s=new Set(r),a=new Set(e),i=n.current;s.forEach(function(l){a.has(l)||sj(l,null)}),a.forEach(function(l){s.has(l)||sj(l,i)})}iQ.set(n,e)},[e]),n}function IKe(e){return e}function RKe(e,t){t===void 0&&(t=IKe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return s}function lhe(e){e===void 0&&(e={});var t=RKe(null);return t.options=Cr({async:!0,ssr:!1},e),t}var che=function(e){var t=e.sideCar,n=fD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,Cr({},n))};che.isSideCarExport=!0;function uhe(e,t){return e.useMedium(t),che}var dhe=lhe(),aj=function(){},j3=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:aj,onWheelCapture:aj,onTouchMoveCapture:aj}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,p=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,b=e.gapMode,_=fD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=ohe([n,t]),S=Cr(Cr({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(w,{sideCar:dhe,removeScrollBar:u,shards:m,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?f.cloneElement(f.Children.only(l),Cr(Cr({},S),{ref:C})):f.createElement(v,Cr({},S,{className:c,ref:C}),l))});j3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};j3.classNames={fullWidth:Ov,zeroRight:Pv};var PKe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function OKe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=PKe();return t&&e.setAttribute("nonce",t),e}function LKe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function DKe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var FKe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=OKe())&&(LKe(t,n),DKe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},UKe=function(){var e=FKe();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},aU=function(){var e=UKe(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},BKe={left:0,top:0,right:0,gap:0},ij=function(e){return parseInt(e||"",10)||0},VKe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[ij(n),ij(r),ij(s)]},$Ke=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return BKe;var t=VKe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},WKe=aU(),fg="data-scroll-locked",HKe=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(TKe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(fg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Pv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ov,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Pv," .").concat(Pv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ov," .").concat(Ov,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(fg,`] {
    `).concat(NKe,": ").concat(l,`px;
  }
`)},oQ=function(){var e=parseInt(document.body.getAttribute(fg)||"0",10);return isFinite(e)?e:0},zKe=function(){f.useEffect(function(){return document.body.setAttribute(fg,(oQ()+1).toString()),function(){var e=oQ()-1;e<=0?document.body.removeAttribute(fg):document.body.setAttribute(fg,e.toString())}},[])},fhe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;zKe();var a=f.useMemo(function(){return $Ke(s)},[s]);return f.createElement(WKe,{styles:HKe(a,!t,s,n?"":"!important")})},u8=!1;if(typeof window<"u")try{var CC=Object.defineProperty({},"passive",{get:function(){return u8=!0,!0}});window.addEventListener("test",CC,CC),window.removeEventListener("test",CC,CC)}catch{u8=!1}var rh=u8?{passive:!1}:!1,GKe=function(e){return e.tagName==="TEXTAREA"},mhe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!GKe(e)&&n[t]==="visible")},qKe=function(e){return mhe(e,"overflowY")},KKe=function(e){return mhe(e,"overflowX")},lQ=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=phe(e,r);if(s){var a=hhe(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},YKe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},QKe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},phe=function(e,t){return e==="v"?qKe(t):KKe(t)},hhe=function(e,t){return e==="v"?YKe(t):QKe(t)},XKe=function(e,t){return e==="h"&&t==="rtl"?-1:1},ZKe=function(e,t,n,r,s){var a=XKe(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,d=i>0,m=0,p=0;do{var h=hhe(e,l),g=h[0],y=h[1],x=h[2],v=y-x-a*g;(g||v)&&phe(e,l)&&(m+=v,p+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(m)<1||!d&&Math.abs(p)<1)&&(u=!0),u},SC=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},cQ=function(e){return[e.deltaX,e.deltaY]},uQ=function(e){return e&&"current"in e?e.current:e},JKe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},eYe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},tYe=0,sh=[];function nYe(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(tYe++)[0],a=f.useState(aU)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=tt([e.lockRef.current],(e.shards||[]).map(uQ),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var v=SC(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-v[0],w="deltaY"in y?y.deltaY:b[1]-v[1],C,S=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&S.type==="range")return!1;var M=lQ(E,S);if(!M)return!0;if(M?C=E:(C=E==="v"?"h":"v",M=lQ(E,S)),!M)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=C),!C)return!0;var k=r.current||C;return ZKe(k,x,y,k==="h"?_:w)},[]),c=f.useCallback(function(y){var x=y;if(!(!sh.length||sh[sh.length-1]!==a)){var v="deltaY"in x?cQ(x):SC(x),b=t.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&JKe(C.delta,v)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var _=(i.current.shards||[]).map(uQ).filter(Boolean).filter(function(C){return C.contains(x.target)}),w=_.length>0?l(x,_[0]):!i.current.noIsolation;w&&x.cancelable&&x.preventDefault()}}},[]),u=f.useCallback(function(y,x,v,b){var _={name:y,delta:x,target:v,should:b,shadowParent:rYe(v)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),d=f.useCallback(function(y){n.current=SC(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,cQ(y),y.target,l(y,e.lockRef.current))},[]),p=f.useCallback(function(y){u(y.type,SC(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return sh.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,rh),document.addEventListener("touchmove",c,rh),document.addEventListener("touchstart",d,rh),function(){sh=sh.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,rh),document.removeEventListener("touchmove",c,rh),document.removeEventListener("touchstart",d,rh)}},[]);var h=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:eYe(s)}):null,h?f.createElement(fhe,{gapMode:e.gapMode}):null)}function rYe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sYe=uhe(dhe,nYe);var iU=f.forwardRef(function(e,t){return f.createElement(j3,Cr({},e,{ref:t,sideCar:sYe}))});iU.classNames=j3.classNames;var aYe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ah=new WeakMap,EC=new WeakMap,MC={},oj=0,ghe=function(e){return e&&(e.host||ghe(e.parentNode))},iYe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=ghe(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},oYe=function(e,t,n,r){var s=iYe(t,Array.isArray(e)?e:[e]);MC[n]||(MC[n]=new WeakMap);var a=MC[n],i=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var d=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))d(p);else try{var h=p.getAttribute(r),g=h!==null&&h!=="false",y=(ah.get(p)||0)+1,x=(a.get(p)||0)+1;ah.set(p,y),a.set(p,x),i.push(p),y===1&&g&&EC.set(p,!0),x===1&&p.setAttribute(n,"true"),g||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return d(t),l.clear(),oj++,function(){i.forEach(function(m){var p=ah.get(m)-1,h=a.get(m)-1;ah.set(m,p),a.set(m,h),p||(EC.has(m)||m.removeAttribute(r),EC.delete(m)),h||m.removeAttribute(n)}),oj--,oj||(ah=new WeakMap,ah=new WeakMap,EC=new WeakMap,MC={})}},yhe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=aYe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),oYe(r,s,n,"aria-hidden")):function(){return null}},A3="Dialog",[xhe,Nln]=Mi(A3),[lYe,Ml]=xhe(A3),oU=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=f.useRef(null),c=f.useRef(null),[u,d]=Cl({prop:r,defaultProp:s??!1,onChange:a,caller:A3});return o.jsx(lYe,{scope:t,triggerRef:l,contentRef:c,contentId:ig(),titleId:ig(),descriptionId:ig(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(m=>!m),[d]),modal:i,children:n})};oU.displayName=A3;var vhe="DialogTrigger",bhe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ml(vhe,n),a=Hn(t,s.triggerRef);return o.jsx(mn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":pU(s.open),...r,ref:a,onClick:Wt(e.onClick,s.onOpenToggle)})});bhe.displayName=vhe;var lU="DialogPortal",[cYe,_he]=xhe(lU,{forceMount:void 0}),cU=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=Ml(lU,t);return o.jsx(cYe,{scope:t,forceMount:n,children:f.Children.map(r,i=>o.jsx(wa,{present:n||a.open,children:o.jsx(x_,{asChild:!0,container:s,children:i})}))})};cU.displayName=lU;var EE="DialogOverlay",uU=f.forwardRef((e,t)=>{const n=_he(EE,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Ml(EE,e.__scopeDialog);return a.modal?o.jsx(wa,{present:r||a.open,children:o.jsx(dYe,{...s,ref:t})}):null});uU.displayName=EE;var uYe=A1("DialogOverlay.RemoveScroll"),dYe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ml(EE,n);return o.jsx(iU,{as:uYe,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(mn.div,{"data-state":pU(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),$m="DialogContent",dU=f.forwardRef((e,t)=>{const n=_he($m,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Ml($m,e.__scopeDialog);return o.jsx(wa,{present:r||a.open,children:a.modal?o.jsx(fYe,{...s,ref:t}):o.jsx(mYe,{...s,ref:t})})});dU.displayName=$m;var fYe=f.forwardRef((e,t)=>{const n=Ml($m,e.__scopeDialog),r=f.useRef(null),s=Hn(t,n.contentRef,r);return f.useEffect(()=>{const a=r.current;if(a)return yhe(a)},[]),o.jsx(whe,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:Wt(e.onFocusOutside,a=>a.preventDefault())})}),mYe=f.forwardRef((e,t)=>{const n=Ml($m,e.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(whe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;n.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),whe=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=Ml($m,n),c=f.useRef(null),u=Hn(t,c);return ihe(),o.jsxs(o.Fragment,{children:[o.jsx(sU,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(g_,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":pU(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(pYe,{titleId:l.titleId}),o.jsx(gYe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),fU="DialogTitle",mU=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ml(fU,n);return o.jsx(mn.h2,{id:s.titleId,...r,ref:t})});mU.displayName=fU;var Che="DialogDescription",She=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ml(Che,n);return o.jsx(mn.p,{id:s.descriptionId,...r,ref:t})});She.displayName=Che;var Ehe="DialogClose",Mhe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ml(Ehe,n);return o.jsx(mn.button,{type:"button",...r,ref:t,onClick:Wt(e.onClick,()=>s.onOpenChange(!1))})});Mhe.displayName=Ehe;function pU(e){return e?"open":"closed"}var khe="DialogTitleWarning",[jln,The]=nHe(khe,{contentName:$m,titleName:fU,docsSlug:"dialog"}),pYe=({titleId:e})=>{const t=The(khe),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},hYe="DialogDescriptionWarning",gYe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${The(hYe).contentName}}.`;return f.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},hU=oU,yYe=bhe,gU=cU,Nhe=uU,I3=dU,R3=mU,yU=She,xYe=Mhe;const xU=R.memo(e=>{const{children:t,trigger:n,...r}=e;return o.jsxs(hU,{...r,children:[n&&o.jsx(yYe,{asChild:!0,children:n}),o.jsx(Je,{children:r.open&&o.jsx(gU,{forceMount:!0,children:t})})]})});xU.displayName="ControlledDialog";function vYe(e){const[t,n]=f.useState(!1),[r,s]=f.useState(!1),a=f.useMemo(()=>e?.isEnabled??!0,[e?.isEnabled]),i=f.useMemo(()=>a&&!t&&!r,[a,t,r]);return f.useMemo(()=>({canShow:i,handleConfirm(){n(!1),s(!0),e?.onConfirm()},handleCancel(){n(!1),s(!1)},isShowing:t,show(){n(!0)}}),[i,t,e])}const jhe=Yt("ConfirmCloseModalContext",{canShow:!1,handleCancel(){},handleConfirm(){},isShowing:!1,show(){}}),Ahe=R.memo(function(t){const{children:n,trigger:r,value:s}=t;return o.jsx(jhe.Provider,{value:s,children:o.jsx(xU,{onOpenChange:s.handleCancel,open:s.isShowing,trigger:r,children:n})})});Ahe.displayName="ConfirmCloseModalDialog";function bYe(){const e=f.useContext(jhe);if(!e)throw new Error("useConfirmCloseModalContext() used outside of provider.");return e}var Ihe=lhe(),lj=function(){},P3=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:lj,onWheelCapture:lj,onTouchMoveCapture:lj}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,p=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,b=e.gapMode,_=fD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=ohe([n,t]),S=Cr(Cr({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(w,{sideCar:Ihe,removeScrollBar:u,shards:m,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?f.cloneElement(f.Children.only(l),Cr(Cr({},S),{ref:C})):f.createElement(v,Cr({},S,{className:c,ref:C}),l))});P3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};P3.classNames={fullWidth:Ov,zeroRight:Pv};var d8=!1;if(typeof window<"u")try{var kC=Object.defineProperty({},"passive",{get:function(){return d8=!0,!0}});window.addEventListener("test",kC,kC),window.removeEventListener("test",kC,kC)}catch{d8=!1}var ih=d8?{passive:!1}:!1,_Ye=function(e){return e.tagName==="TEXTAREA"},Rhe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!_Ye(e)&&n[t]==="visible")},wYe=function(e){return Rhe(e,"overflowY")},CYe=function(e){return Rhe(e,"overflowX")},dQ=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Phe(e,r);if(s){var a=Ohe(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SYe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},EYe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Phe=function(e,t){return e==="v"?wYe(t):CYe(t)},Ohe=function(e,t){return e==="v"?SYe(t):EYe(t)},MYe=function(e,t){return e==="h"&&t==="rtl"?-1:1},kYe=function(e,t,n,r,s){var a=MYe(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,d=i>0,m=0,p=0;do{var h=Ohe(e,l),g=h[0],y=h[1],x=h[2],v=y-x-a*g;(g||v)&&Phe(e,l)&&(m+=v,p+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(m)<1||!d&&Math.abs(p)<1)&&(u=!0),u},TC=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fQ=function(e){return[e.deltaX,e.deltaY]},mQ=function(e){return e&&"current"in e?e.current:e},TYe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},NYe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},jYe=0,oh=[];function AYe(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(jYe++)[0],a=f.useState(aU)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=tt([e.lockRef.current],(e.shards||[]).map(mQ),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var v=TC(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-v[0],w="deltaY"in y?y.deltaY:b[1]-v[1],C,S=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&S.type==="range")return!1;var M=dQ(E,S);if(!M)return!0;if(M?C=E:(C=E==="v"?"h":"v",M=dQ(E,S)),!M)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=C),!C)return!0;var k=r.current||C;return kYe(k,x,y,k==="h"?_:w)},[]),c=f.useCallback(function(y){var x=y;if(!(!oh.length||oh[oh.length-1]!==a)){var v="deltaY"in x?fQ(x):TC(x),b=t.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&TYe(C.delta,v)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var _=(i.current.shards||[]).map(mQ).filter(Boolean).filter(function(C){return C.contains(x.target)}),w=_.length>0?l(x,_[0]):!i.current.noIsolation;w&&x.cancelable&&x.preventDefault()}}},[]),u=f.useCallback(function(y,x,v,b){var _={name:y,delta:x,target:v,should:b,shadowParent:IYe(v)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),d=f.useCallback(function(y){n.current=TC(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,fQ(y),y.target,l(y,e.lockRef.current))},[]),p=f.useCallback(function(y){u(y.type,TC(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return oh.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,ih),document.addEventListener("touchmove",c,ih),document.addEventListener("touchstart",d,ih),function(){oh=oh.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,ih),document.removeEventListener("touchmove",c,ih),document.removeEventListener("touchstart",d,ih)}},[]);var h=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:NYe(s)}):null,h?f.createElement(fhe,{gapMode:e.gapMode}):null)}function IYe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const RYe=uhe(Ihe,AYe);var vU=f.forwardRef(function(e,t){return f.createElement(P3,Cr({},e,{ref:t,sideCar:RYe}))});vU.classNames=P3.classNames;const pf=R.memo(({children:e,portalTarget:t})=>{const[n,r]=f.useState(!1);return f.useEffect(()=>(r(!0),()=>r(!1)),[]),n?Qs.createPortal(e,t||document.body):null});pf.displayName="Portal";const PYe=250,Xy=R.memo(({animationClassName:e,children:t,isOpen:n=!1,transparent:r=!1,canOutsideClickClose:s=!0,onBeforeClose:a,onClose:i,onIsClosing:l,childVariant:c="default",center:u=!0,shouldClose:d=!1,disableAnimation:m=!1,testId:p,removeScroll:h=!0,shards:g=[],delayClose:y=!0,variant:x="default",portalTarget:v,includeBlur:b=!0,forceColorScheme:_})=>{const w=f.useRef(null),C=f.useRef(null),S=f.useRef(null),[E,M]=f.useState(!1),k=f.useRef(!1),N=f.useCallback(I=>{E||a?.()===!1||(y?(M(!0),l?.(),setTimeout(()=>{i?.(I),M(!1)},PYe)):(M(!0),i?.(I),M(!1)))},[E,a,y,l,i]);f.useEffect(()=>{d&&!E&&N("closed")},[d,E,N]);const P=f.useCallback(I=>{r&&!s?I.stopPropagation():I.target===w.current&&N("backdrop")},[r,s,N]),L=f.useCallback(I=>{const U=I.target;if(U instanceof Element){if(C.current===U||C.current?.contains(U))return;const B=U.closest('[data-type="portal"]');if(B&&B!==S.current&&!r)return}M(!1),N("clickaway")},[N,r]);f.useEffect(()=>{if(n&&r&&s)return document.addEventListener("click",L),()=>{document.removeEventListener("click",L)}},[n,r,L,s]);const O=f.useCallback(I=>{I.key==="Escape"&&N("escape")},[N]);f.useEffect(()=>(n&&document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}),[n,O]);const A=f.useMemo(()=>V("duration-200 fill-mode-both",{"animate-in fade-in zoom-in-[0.98] ease-in":["default","large","small","hide-chrome","full-sheet"].includes(c),"zoom-out-[0.98] fade-out animate-out ease-out":["default","hide-chrome","full-sheet","large","small"].includes(c)&&E,"fixed bottom-0 left-0":c==="bottom-left-sheet","fixed top-0 right-0 left-0":c==="side-sheet","fixed bottom-0 left-0 right-0":c==="bottom-sheet"},e),[e,c,E]),j=V("items-stretch md:items-center",{"fill-mode-both fixed inset-0":!r,"bg-backdrop/70":x==="default"||x==="default-less-blur","bg-lightbox/95":x==="lightbox","animate-in fade-in ease-outExpo duration-200":!E&&!m,"animate-out fade-out ease-inExpo duration-200":E&&!m},{"backdrop-blur-md":b&&x==="lightbox","backdrop-blur-sm":b&&x==="default","backdrop-blur-[0.5px]":b&&x==="default-less-blur"}),T=f.useMemo(()=>n?o.jsxs(vU,{removeScrollBar:!1,enabled:h,allowPinchZoom:!0,shards:g,children:[o.jsx("div",{className:j}),o.jsx("div",{ref:w,onPointerDown:I=>{k.current=I.target===w.current},onPointerUp:I=>{k.current&&P(I),k.current=!1},className:V({"fixed inset-0 overflow-y-auto":!r,"flex items-center justify-center":u}),"data-test-id":p,children:o.jsx("div",{ref:C,className:A,children:t})})]}):null,[n,t,r,u,p,P,A,C,w,h,g,j]);return o.jsx(pf,{portalTarget:v,children:o.jsx("div",{ref:S,"data-type":"portal","data-color-scheme":_,children:T})})});Xy.displayName="Overlay";const Lhe=Yt("ModalInternalContext",{canOutsideClickClose:!0}),on=R.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=fe,variant:i="default",onClose:l,noPadding:c=!1,onIsClosing:u,titleContent:d,footerContent:m,icon:p,overlayVariant:h,titleLeadingButtonProps:g,confirmOnClose:y,titleTextVariant:x="page-title",headerClassname:v,closeButtonClassname:b="right-0 top-sm absolute",footerClassname:_,renderCloseButton:w=!0,fixedTitle:C,modalClassname:S,modalContentClassname:E,modalElementProps:M,includeBlur:k=!0,isOpen:N,ref:P,wrapperClassname:L,forceColorScheme:O,...A})=>{const j=f.useRef(null),T=f.useRef(null),I=f.useRef(null),U=f.useRef(null),[B,D]=f.useState(!1),[W,z]=f.useState(!1),[$,X]=f.useState(!1);f.useEffect(()=>{N&&!$?X(!0):!N&&$&&!B&&D(!0)},[N,$,B]);const q=f.useMemo(()=>!!y,[y]),Y=vYe({isEnabled:q,onConfirm(){z(!0),D(!0)}}),G=f.useMemo(()=>V(S,"bg-base shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"md:rounded-xl md:min-w-[600px] max-w-screen-sm shadow-md dark:border dark:border-subtlest relative h-full max-h-[100vh] md:max-h-[95vh] overflow-auto md:w-full":i==="default","min-h-0 max-h-[70vh] rounded-t-xl bottom-0 left-0 right-0 flex flex-col":i==="bottom-left-sheet","w-screen md:h-screen h-[100dvh] flex flex-col":i==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] shadow-overlay max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":i==="bottom-sheet","h-screen w-[40vw] min-w-[500px] shadow-overlay top-0 right-0 fixed flex flex-col":i==="side-sheet","animate-in slide-in-from-right ease-outExpo":i==="side-sheet"&&!W,"animate-out slide-out-to-right ease-inExpo":i==="side-sheet"&&W,"animate-in slide-in-from-bottom ease-in":["bottom-left-sheet","bottom-sheet"].includes(i)&&!W,"animate-out slide-out-to-bottom ease-out":["bottom-left-sheet","bottom-sheet"].includes(i)&&W,"max-h-[100vh] w-[90vw] rounded-l-xl flex flex-col":i==="wide","h-[95vh] w-[95vw] rounded-xl flex flex-col":i==="full","md:rounded-lg md:min-w-[600px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":i==="large","md:rounded-lg md:min-w-[500px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":i==="medium","md:rounded-lg md:max-w-[440px] shadow-md relative overflow-auto max-h-[100vh]":i==="small","md:rounded-lg md:max-w-[350px] shadow-md relative overflow-auto max-h-[100vh]":i==="thin"}),[i,W,S]),J=f.useMemo(()=>V("grow flex flex-col justify-center shrink-0",{"md:pt-md":e===void 0&&!d,"md:pb-lg":a?.length===0,"p-sm":!c,"p-0":c},E),[a?.length,c,e,E,d]),K=f.useMemo(()=>a.map((xe,ye)=>f.createElement(Dhe,{...xe,idx:ye,key:ye,confirmCloseModal:Y})),[a,Y]);f.useImperativeHandle(P,()=>({scrollContainerRef:j,headerRef:T,contentRef:I,footerRef:U}),[j,T,U]);const te=f.useCallback(()=>{u?.(),z(!0)},[u]),re=f.useCallback(xe=>{z(!1),D(!1),X(!1),l?.(xe)},[l]),se=f.useCallback(()=>{if(Y?.canShow){Y.show();return}D(!0)},[Y]),me=f.useCallback(()=>Y?.canShow?(Y.show(),!1):!0,[Y]),{canOutsideClickClose:oe}=f.useContext(Lhe),ge=f.useMemo(()=>o.jsxs(o.Fragment,{children:[o.jsx("div",{children:i==="hide-chrome"?o.jsx("div",{children:s}):o.jsxs(ve.div,{animate:{scale:Y.isShowing?.955:1},className:G,transition:{duration:.2},ref:j,...M,children:[o.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),o.jsxs(H,{className:V(L,"px-md pb-md flex min-h-0 w-screen grow flex-col md:w-[unset] md:grow-[unset]",{"h-full":!C,"h-auto !grow":C}),children:[o.jsxs(H,{variant:"background",className:V(v,"pt-md sticky top-0 z-[22] w-full shrink-0",{"text-center":r,"h-10":!e&&!d}),ref:T,children:[o.jsxs("div",{className:"p-sm flex items-center gap-1.5",children:[g&&o.jsx(Te,{extraCSS:"-ml-sm",...g,size:"small",variant:"common"}),p&&o.jsx(le,{icon:p,className:"text-foreground -ml-xs -translate-y-two",size:"xl"}),e&&o.jsx(F,{variant:x,className:V("line-clamp-3 text-pretty",x,{"pt-lg grow":r,"mr-lg":!r}),children:e}),!e&&d,w&&o.jsx(N3,{onClick:se,testId:"close-modal",className:b})]}),t&&o.jsx(F,{variant:"base",color:"light",className:V("mt-xs p-sm line-clamp-3 text-pretty",n),children:t})]}),s&&o.jsx("div",{className:J,ref:I,children:s}),(K?.length>0||m)&&o.jsxs(H,{variant:"background",className:V("gap-x-sm p-sm pt-lg bottom-0 z-10 flex items-center",{"justify-end":!m},{"justify-between":m},{sticky:!0},_),ref:U,children:[m&&o.jsx("div",{className:"flex-1",children:m}),K]})]})]})}),q&&o.jsx(Ahe,{value:Y,children:y})]}),[K,r,s,b,Y,y,J,C,_,m,se,v,p,q,G,M,w,t,n,e,d,g,x,i,L]);return o.jsx(Xy,{forceColorScheme:O,includeBlur:k,childVariant:i,shouldClose:B,onBeforeClose:me,onIsClosing:te,onClose:re,variant:h,isOpen:$,canOutsideClickClose:oe,...A,children:ge})});on.displayName="Modal";const Dhe=R.memo(({idx:e,text:t,onClick:n,variant:r,disabled:s,isLoading:a,testId:i,icon:l,shouldShowConfirmDialog:c,buttonClassname:u,tooltipText:d,confirmCloseModal:m})=>{const p=f.useCallback(y=>{if(y.stopPropagation(),r&&c&&m.canShow){m.show();return}n?.()},[m,n,c,r]),h={key:e,text:t,disabled:s,isLoading:a,testId:i,chevronIcon:l,extraCSS:u},g=f.createElement(pe,{fullWidthMobile:!0,variant:r||void 0,...h,onClick:p,key:h.key});return d?o.jsx(En,{tooltipText:d,tooltipLayout:"top",children:g}):g});Dhe.displayName="ButtonFactory";const Fhe={keyProp:0,message:null,variant:"success",description:void 0,isVisible:!1,ctaText:void 0,ctaOnClick:void 0,openToast:()=>{},closeToast:()=>{},deprecatedOpenToast:()=>{}},Uhe=Yt("ToastStateContext",Fhe),Bhe=R.memo(({children:e})=>{const[t,n]=f.useState(Fhe),r=f.useCallback(({message:l,variant:c,timeout:u,description:d,ctaText:m,ctaOnClick:p,position:h="top"})=>{n(g=>({...g,message:l,variant:c,timeout:u,description:d,ctaText:m,ctaOnClick:p,position:h??"top",isVisible:!0,keyProp:(g.keyProp||0)+1}))},[]),s=f.useCallback((l,c,u,d,m,p,h)=>{r({message:l,variant:c,timeout:u,description:d,ctaText:m,ctaOnClick:p,position:h??"top"})},[r]),a=f.useCallback(()=>{n(l=>({...l,isVisible:!1}))},[]),i=f.useMemo(()=>({...t,openToast:r,closeToast:a,deprecatedOpenToast:s}),[t,r,a,s]);return o.jsx(Uhe.Provider,{value:i,children:e})});Bhe.displayName="ToastStateProvider";const Mn=()=>{const e=f.useContext(Uhe);if(!e)throw new Error("useToastState must be used within ToastContext");return e},Vhe=R.memo(({isOpen:e,onClose:t,uuidOrSlug:n})=>{const r="request-access-modal",{$t:s}=Z(),{deprecatedOpenToast:a}=Mn(),{trackEvent:i}=je();f.useEffect(()=>{i("thread access modal viewed",{uuidOrSlug:n})},[i,n]);const l=f.useCallback(u=>{i("thread access modal requested",{uuidOrSlug:n}),pKe({slugOrUUID:n,reason:r}).then(()=>{t(),a(s({defaultMessage:"Access request sent",id:"STvLV+qKiH"}),"success",3)})},[n,s,t,a,i]),c=f.useCallback(()=>l(n),[l,n]);return o.jsx(on,{isOpen:e,onClose:t,variant:"thin",children:o.jsx(H,{className:"px-md mx-auto text-center",children:o.jsxs("div",{className:"gap-y-md flex flex-col",children:[o.jsx("div",{className:"mb-lg flex justify-center",children:o.jsx(za,{variant:"full",size:"large",color:"foreground"})}),o.jsxs("div",{className:"mx-auto max-w-sm",children:[o.jsx(F,{variant:"section-title",className:"-mt-md",children:s({defaultMessage:"This answer is private",id:"cA+GFbHP/s"})}),o.jsx(F,{variant:"base",color:"light",className:"-mb-md",children:s({defaultMessage:"You can access this page if the owner accepts your request.",id:"SOJ/6nzOoc"})})]}),o.jsxs("div",{className:"mt-lg mb-md mx-auto flex w-full max-w-sm flex-col gap-y-2",children:[o.jsx(pe,{variant:"primary",text:s({defaultMessage:"Request access",id:"vkHRp5q6Wi"}),onClick:c}),o.jsx(pe,{variant:"common",text:s({defaultMessage:"Back to Perplexity",id:"r89PhWwooe"}),onClick:t,textClassName:"font-normal"})]})]})})})});Vhe.displayName="RequestAccessModal";var dt;(function(e){e.SCHEDULED="scheduled",e.PRICE_ALERT="priceAlert",e.SHORTCUT="shortcut"})(dt||(dt={}));var Xr;(function(e){e.TARGET_PRICE="targetPrice",e.MOVEMENT_AMOUNT="movementAmount"})(Xr||(Xr={}));const f8=1e9,$he=pt({STOCK_PRICE_TARGET:{defaultMessage:"Price Target",id:"GkDb3edsv4"},STOCK_PRICE_MOVEMENT:{defaultMessage:"Price Movement",id:"nccbHgYn+f"}});function Aln(e){return e in $he}function OYe(e,t){return t.formatMessage($he[e])}function LYe(e,t){const{event_entity:n,event_type:r,value_upper_bound:s,value_lower_bound:a}=e;let i="";return r==="STOCK_PRICE_TARGET"?a!=null?i=t.formatMessage({defaultMessage:"goes below ${value}",id:"RKgpKR3E99"},{value:a}):s!=null?i=t.formatMessage({defaultMessage:"goes above ${value}",id:"8eV5ClXcpi"},{value:s}):i=t.formatMessage({defaultMessage:"price target",id:"vnTdzDaohg"}):r==="STOCK_PRICE_MOVEMENT"?a!=null?i=t.formatMessage({defaultMessage:"drops {percent}%+",id:"Vl3IJiE9mt"},{percent:Math.abs(a)}):s!=null?i=t.formatMessage({defaultMessage:"rises {percent}%+",id:"EK4T00JAfI"},{percent:s}):i=t.formatMessage({defaultMessage:"price movement",id:"Pcu8sUjesQ"}):i=t.formatMessage({defaultMessage:"event triggers",id:"LpIhmla5ty"}),{kind:n,friendly:i,isRecurring:!1}}function Ga(e){"@babel/helpers - typeof";return Ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ga(e)}function _r(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function mt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function At(e){mt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Ga(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ks(e,t){mt(2,arguments);var n=At(e),r=_r(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function dl(e,t){mt(2,arguments);var n=At(e),r=_r(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+r+1,0);var i=a.getDate();return s>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}function r0(e,t){if(mt(2,arguments),!t||Ga(t)!=="object")return new Date(NaN);var n=t.years?_r(t.years):0,r=t.months?_r(t.months):0,s=t.weeks?_r(t.weeks):0,a=t.days?_r(t.days):0,i=t.hours?_r(t.hours):0,l=t.minutes?_r(t.minutes):0,c=t.seconds?_r(t.seconds):0,u=At(e),d=r||n?dl(u,r+n*12):u,m=a||s?Ks(d,a+s*7):d,p=l+i*60,h=c+p*60,g=h*1e3,y=new Date(m.getTime()+g);return y}function DYe(e,t){mt(2,arguments);var n=At(e).getTime(),r=_r(t);return new Date(n+r)}var FYe={};function hf(){return FYe}function xc(e,t){var n,r,s,a,i,l,c,u;mt(1,arguments);var d=hf(),m=_r((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=At(e),h=p.getDay(),g=(h<m?7:0)+h-m;return p.setDate(p.getDate()-g),p.setHours(0,0,0,0),p}function Wm(e){return mt(1,arguments),xc(e,{weekStartsOn:1})}function UYe(e){mt(1,arguments);var t=At(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=Wm(r),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var i=Wm(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function BYe(e){mt(1,arguments);var t=UYe(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var r=Wm(n);return r}function Z1(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Kd(e){mt(1,arguments);var t=At(e);return t.setHours(0,0,0,0),t}var VYe=864e5;function Zl(e,t){mt(2,arguments);var n=Kd(e),r=Kd(t),s=n.getTime()-Z1(n),a=r.getTime()-Z1(r);return Math.round((s-a)/VYe)}function ME(e,t){mt(2,arguments);var n=_r(t),r=n*7;return Ks(e,r)}function $Ye(e,t){mt(2,arguments);var n=_r(t);return dl(e,n*12)}function WYe(e){mt(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Ga(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=At(r);(n===void 0||n<s||isNaN(Number(s)))&&(n=s)}),n||new Date(NaN)}function HYe(e){mt(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Ga(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=At(r);(n===void 0||n>s||isNaN(s.getDate()))&&(n=s)}),n||new Date(NaN)}function mg(e,t){mt(2,arguments);var n=At(e),r=At(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var Whe=6e4,zYe=36e5,GYe=1e3;function Ys(e,t){mt(2,arguments);var n=Kd(e),r=Kd(t);return n.getTime()===r.getTime()}function bU(e){return mt(1,arguments),e instanceof Date||Ga(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function qYe(e){if(mt(1,arguments),!bU(e)&&typeof e!="number")return!1;var t=At(e);return!isNaN(Number(t))}function Kg(e,t){mt(2,arguments);var n=At(e),r=At(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}var KYe=6048e5;function YYe(e,t,n){mt(2,arguments);var r=xc(e,n),s=xc(t,n),a=r.getTime()-Z1(r),i=s.getTime()-Z1(s);return Math.round((a-i)/KYe)}function QYe(e,t){mt(2,arguments);var n=At(e),r=At(t);return n.getFullYear()-r.getFullYear()}function pQ(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function XYe(e,t){mt(2,arguments);var n=At(e),r=At(t),s=pQ(n,r),a=Math.abs(Zl(n,r));n.setDate(n.getDate()-s*a);var i=+(pQ(n,r)===-s),l=s*(a-i);return l===0?0:l}function _U(e,t){return mt(2,arguments),At(e).getTime()-At(t).getTime()}var ZYe={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},JYe="trunc";function wU(e){return ZYe[JYe]}function eQe(e,t,n){mt(2,arguments);var r=_U(e,t)/zYe;return wU()(r)}function tQe(e,t,n){mt(2,arguments);var r=_U(e,t)/Whe;return wU()(r)}function nQe(e){mt(1,arguments);var t=At(e);return t.setHours(23,59,59,999),t}function O3(e){mt(1,arguments);var t=At(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function rQe(e){mt(1,arguments);var t=At(e);return nQe(t).getTime()===O3(t).getTime()}function sQe(e,t){mt(2,arguments);var n=At(e),r=At(t),s=mg(n,r),a=Math.abs(Kg(n,r)),i;if(a<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);var l=mg(n,r)===-s;rQe(At(e))&&a===1&&mg(e,r)===1&&(l=!1),i=s*(a-Number(l))}return i===0?0:i}function aQe(e,t,n){mt(2,arguments);var r=_U(e,t)/1e3;return wU()(r)}function iQe(e,t){mt(2,arguments);var n=At(e),r=At(t),s=mg(n,r),a=Math.abs(QYe(n,r));n.setFullYear(1584),r.setFullYear(1584);var i=mg(n,r)===-s,l=s*(a-Number(i));return l===0?0:l}function vi(e){mt(1,arguments);var t=At(e);return t.setDate(1),t.setHours(0,0,0,0),t}function oQe(e){mt(1,arguments);var t=At(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function CU(e,t){var n,r,s,a,i,l,c,u;mt(1,arguments);var d=hf(),m=_r((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=At(e),h=p.getDay(),g=(h<m?-7:0)+6-(h-m);return p.setDate(p.getDate()+g),p.setHours(23,59,59,999),p}function Hhe(e){return mt(1,arguments),CU(e,{weekStartsOn:1})}function lQe(e,t){mt(2,arguments);var n=_r(t);return DYe(e,-n)}var cQe=864e5;function uQe(e){mt(1,arguments);var t=At(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/cQe)+1}function kE(e){mt(1,arguments);var t=1,n=At(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function zhe(e){mt(1,arguments);var t=At(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=kE(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var i=kE(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function dQe(e){mt(1,arguments);var t=zhe(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=kE(n);return r}var fQe=6048e5;function mQe(e){mt(1,arguments);var t=At(e),n=kE(t).getTime()-dQe(t).getTime();return Math.round(n/fQe)+1}function TE(e,t){var n,r,s,a,i,l,c,u;mt(1,arguments);var d=hf(),m=_r((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=At(e),h=p.getUTCDay(),g=(h<m?7:0)+h-m;return p.setUTCDate(p.getUTCDate()-g),p.setUTCHours(0,0,0,0),p}function Ghe(e,t){var n,r,s,a,i,l,c,u;mt(1,arguments);var d=At(e),m=d.getUTCFullYear(),p=hf(),h=_r((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(m+1,0,h),g.setUTCHours(0,0,0,0);var y=TE(g,t),x=new Date(0);x.setUTCFullYear(m,0,h),x.setUTCHours(0,0,0,0);var v=TE(x,t);return d.getTime()>=y.getTime()?m+1:d.getTime()>=v.getTime()?m:m-1}function pQe(e,t){var n,r,s,a,i,l,c,u;mt(1,arguments);var d=hf(),m=_r((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=Ghe(e,t),h=new Date(0);h.setUTCFullYear(p,0,m),h.setUTCHours(0,0,0,0);var g=TE(h,t);return g}var hQe=6048e5;function gQe(e,t){mt(1,arguments);var n=At(e),r=TE(n,t).getTime()-pQe(n,t).getTime();return Math.round(r/hQe)+1}function Qn(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var rd={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return Qn(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Qn(r+1,2)},d:function(t,n){return Qn(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Qn(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Qn(t.getUTCHours(),n.length)},m:function(t,n){return Qn(t.getUTCMinutes(),n.length)},s:function(t,n){return Qn(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,r-3));return Qn(a,n.length)}},lh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yQe={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return rd.y(t,n)},Y:function(t,n,r,s){var a=Ghe(t,s),i=a>0?a:1-a;if(n==="YY"){var l=i%100;return Qn(l,2)}return n==="Yo"?r.ordinalNumber(i,{unit:"year"}):Qn(i,n.length)},R:function(t,n){var r=zhe(t);return Qn(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Qn(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Qn(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Qn(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return rd.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Qn(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var a=gQe(t,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):Qn(a,n.length)},I:function(t,n,r){var s=mQe(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Qn(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):rd.d(t,n)},D:function(t,n,r){var s=uQe(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Qn(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var a=t.getUTCDay(),i=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return Qn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var a=t.getUTCDay(),i=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return Qn(i,n.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return Qn(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),a=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),a;switch(s===12?a=lh.noon:s===0?a=lh.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),a;switch(s>=17?a=lh.evening:s>=12?a=lh.afternoon:s>=4?a=lh.morning:a=lh.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return rd.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):rd.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Qn(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Qn(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):rd.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):rd.s(t,n)},S:function(t,n){return rd.S(t,n)},X:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return gQ(i);case"XXXX":case"XX":return Zf(i);case"XXXXX":case"XXX":default:return Zf(i,":")}},x:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"x":return gQ(i);case"xxxx":case"xx":return Zf(i);case"xxxxx":case"xxx":default:return Zf(i,":")}},O:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+hQ(i,":");case"OOOO":default:return"GMT"+Zf(i,":")}},z:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+hQ(i,":");case"zzzz":default:return"GMT"+Zf(i,":")}},t:function(t,n,r,s){var a=s._originalDate||t,i=Math.floor(a.getTime()/1e3);return Qn(i,n.length)},T:function(t,n,r,s){var a=s._originalDate||t,i=a.getTime();return Qn(i,n.length)}};function hQ(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(a===0)return n+String(s);var i=t;return n+String(s)+i+Qn(a,2)}function gQ(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Qn(Math.abs(e)/60,2)}return Zf(e,t)}function Zf(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),a=Qn(Math.floor(s/60),2),i=Qn(s%60,2);return r+a+n+i}var yQ=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},qhe=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},xQe=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return yQ(t,n);var i;switch(s){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",yQ(s,n)).replace("{{time}}",qhe(a,n))},vQe={p:qhe,P:xQe},bQe=["D","DD"],_Qe=["YY","YYYY"];function wQe(e){return bQe.indexOf(e)!==-1}function CQe(e){return _Qe.indexOf(e)!==-1}function xQ(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var SQe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},EQe=function(t,n,r){var s,a=SQe[t];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function cj(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var MQe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kQe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TQe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NQe={date:cj({formats:MQe,defaultWidth:"full"}),time:cj({formats:kQe,defaultWidth:"full"}),dateTime:cj({formats:TQe,defaultWidth:"full"})},jQe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},AQe=function(t,n,r,s){return jQe[t]};function s0(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):a;s=e.formattingValues[i]||e.formattingValues[a]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var IQe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},RQe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},PQe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},OQe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LQe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DQe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},FQe=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},UQe={ordinalNumber:FQe,era:s0({values:IQe,defaultWidth:"wide"}),quarter:s0({values:RQe,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:s0({values:PQe,defaultWidth:"wide"}),day:s0({values:OQe,defaultWidth:"wide"}),dayPeriod:s0({values:LQe,defaultWidth:"wide",formattingValues:DQe,defaultFormattingWidth:"wide"})};function a0(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?VQe(l,function(m){return m.test(i)}):BQe(l,function(m){return m.test(i)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(i.length);return{value:u,rest:d}}}function BQe(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function VQe(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function $Qe(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;var l=t.slice(s.length);return{value:i,rest:l}}}var WQe=/^(\d+)(th|st|nd|rd)?/i,HQe=/\d+/i,zQe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GQe={any:[/^b/i,/^(a|c)/i]},qQe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},KQe={any:[/1/i,/2/i,/3/i,/4/i]},YQe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},QQe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},XQe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ZQe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},JQe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eXe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tXe={ordinalNumber:$Qe({matchPattern:WQe,parsePattern:HQe,valueCallback:function(t){return parseInt(t,10)}}),era:a0({matchPatterns:zQe,defaultMatchWidth:"wide",parsePatterns:GQe,defaultParseWidth:"any"}),quarter:a0({matchPatterns:qQe,defaultMatchWidth:"wide",parsePatterns:KQe,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:a0({matchPatterns:YQe,defaultMatchWidth:"wide",parsePatterns:QQe,defaultParseWidth:"any"}),day:a0({matchPatterns:XQe,defaultMatchWidth:"wide",parsePatterns:ZQe,defaultParseWidth:"any"}),dayPeriod:a0({matchPatterns:JQe,defaultMatchWidth:"any",parsePatterns:eXe,defaultParseWidth:"any"})},Khe={code:"en-US",formatDistance:EQe,formatLong:NQe,formatRelative:AQe,localize:UQe,match:tXe,options:{weekStartsOn:0,firstWeekContainsDate:1}},nXe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rXe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sXe=/^'([^]*?)'?$/,aXe=/''/g,iXe=/[a-zA-Z]/;function Hu(e,t,n){var r,s,a,i,l,c,u,d,m,p,h,g,y,x,v,b,_,w;mt(2,arguments);var C=String(t),S=hf(),E=(r=(s=n?.locale)!==null&&s!==void 0?s:S.locale)!==null&&r!==void 0?r:Khe,M=_r((a=(i=(l=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:S.firstWeekContainsDate)!==null&&i!==void 0?i:(m=S.locale)===null||m===void 0||(p=m.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=_r((h=(g=(y=(x=n?.weekStartsOn)!==null&&x!==void 0?x:n==null||(v=n.locale)===null||v===void 0||(b=v.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&y!==void 0?y:S.weekStartsOn)!==null&&g!==void 0?g:(_=S.locale)===null||_===void 0||(w=_.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&h!==void 0?h:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var N=At(e);if(!qYe(N))throw new RangeError("Invalid time value");var P=Z1(N),L=lQe(N,P),O={firstWeekContainsDate:M,weekStartsOn:k,locale:E,_originalDate:N},A=C.match(rXe).map(function(j){var T=j[0];if(T==="p"||T==="P"){var I=vQe[T];return I(j,E.formatLong)}return j}).join("").match(nXe).map(function(j){if(j==="''")return"'";var T=j[0];if(T==="'")return oXe(j);var I=yQe[T];if(I)return!(n!=null&&n.useAdditionalWeekYearTokens)&&CQe(j)&&xQ(j,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&wQe(j)&&xQ(j,t,String(e)),I(L,j,E.localize,O);if(T.match(iXe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return j}).join("");return A}function oXe(e){var t=e.match(sXe);return t?t[1].replace(aXe,"'"):e}function lXe(e){mt(1,arguments);var t=At(e),n=t.getFullYear(),r=t.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}var cXe=6048e5;function uXe(e){mt(1,arguments);var t=At(e),n=Wm(t).getTime()-BYe(t).getTime();return Math.round(n/cXe)+1}function dXe(e){mt(1,arguments);var t=At(e),n=t.getTime();return n}function fXe(e){return mt(1,arguments),Math.floor(dXe(e)/1e3)}function mXe(e,t){var n,r,s,a,i,l,c,u;mt(1,arguments);var d=At(e),m=d.getFullYear(),p=hf(),h=_r((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(m+1,0,h),g.setHours(0,0,0,0);var y=xc(g,t),x=new Date(0);x.setFullYear(m,0,h),x.setHours(0,0,0,0);var v=xc(x,t);return d.getTime()>=y.getTime()?m+1:d.getTime()>=v.getTime()?m:m-1}function pXe(e,t){var n,r,s,a,i,l,c,u;mt(1,arguments);var d=hf(),m=_r((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=mXe(e,t),h=new Date(0);h.setFullYear(p,0,m),h.setHours(0,0,0,0);var g=xc(h,t);return g}var hXe=6048e5;function gXe(e,t){mt(1,arguments);var n=At(e),r=xc(n,t).getTime()-pXe(n,t).getTime();return Math.round(r/hXe)+1}function yXe(e){mt(1,arguments);var t=At(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function xXe(e,t){return mt(1,arguments),YYe(yXe(e),vi(e),t)+1}function vXe(e){mt(1,arguments);var t=At(e.start),n=At(e.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(n.getTime()))throw new RangeError("End Date is invalid");var r={};r.years=Math.abs(iQe(n,t));var s=mg(n,t),a=r0(t,{years:s*r.years});r.months=Math.abs(sQe(n,a));var i=r0(a,{months:s*r.months});r.days=Math.abs(XYe(n,i));var l=r0(i,{days:s*r.days});r.hours=Math.abs(eQe(n,l));var c=r0(l,{hours:s*r.hours});r.minutes=Math.abs(tQe(n,c));var u=r0(c,{minutes:s*r.minutes});return r.seconds=Math.abs(aQe(n,u)),r}function Yhe(e,t){mt(2,arguments);var n=At(e),r=At(t);return n.getTime()>r.getTime()}function Qhe(e,t){mt(2,arguments);var n=At(e),r=At(t);return n.getTime()<r.getTime()}function m8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bXe(e,t){if(e){if(typeof e=="string")return m8(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m8(e,t):void 0}}function _Xe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p8(e,t){return p8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},p8(e,t)}function wXe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p8(e,t)}function NE(e){return NE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NE(e)}function CXe(e,t){if(t&&(Ga(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Xe(e)}function SXe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EXe(e,t){if(Ga(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ga(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xhe(e){var t=EXe(e,"string");return Ga(t)=="symbol"?t:t+""}function vQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xhe(r.key),r)}}function MXe(e,t,n){return t&&vQ(e.prototype,t),n&&vQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xc(e,t,n){return(t=Xhe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SU(e,t){mt(2,arguments);var n=At(e),r=At(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Zhe(e,t){mt(2,arguments);var n=At(e),r=At(t);return n.getFullYear()===r.getFullYear()}function kXe(e){return mt(1,arguments),Zhe(e,Date.now())}function EU(e){return mt(1,arguments),Ys(e,Date.now())}function TXe(e){return mt(1,arguments),Ys(e,Ks(Date.now(),1))}function h8(e,t){mt(2,arguments);var n=_r(t);return Ks(e,-n)}function NXe(e){return mt(1,arguments),Ys(e,h8(Date.now(),1))}function jXe(e){return mt(1,arguments),Math.floor(e*Whe)}function uj(e){return mt(1,arguments),e*GYe}function dj(e,t){mt(2,arguments);var n=At(e),r=_r(t),s=n.getFullYear(),a=n.getDate(),i=new Date(0);i.setFullYear(s,r,15),i.setHours(0,0,0,0);var l=lXe(i);return n.setMonth(r,Math.min(a,l)),n}function bQ(e,t){mt(2,arguments);var n=At(e),r=_r(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}var de;(function(e){e.DEFAULT="turbo",e.PPLX_PRO_UPGRADED="pplx_pro_upgraded",e.PRO="pplx_pro",e.SONAR="experimental",e.GPT_4o="gpt4o",e.GPT_4_1="gpt41",e.GPT_5="gpt5",e.CLAUDE_2="claude2",e.GEMINI_2_FLASH="gemini2flash",e.GROK="grok",e.PPLX_REASONING="pplx_reasoning",e.CLAUDE_3_7_SONNET_THINKING="claude37sonnetthinking",e.O4_MINI="o4mini",e.O3="o3",e.O3_PRO="o3pro",e.GPT_5_THINKING="gpt5_thinking",e.CLAUDE_4_0_OPUS="claude40opus",e.CLAUDE_4_1_OPUS="claude41opus",e.CLAUDE_4_0_OPUS_THINKING="claude40opusthinking",e.CLAUDE_4_1_OPUS_THINKING="claude41opusthinking",e.GROK_4="grok4",e.PPLX_SONAR_INTERNAL_TESTING="pplx_sonar_internal_testing",e.PPLX_SONAR_INTERNAL_TESTING_V2="pplx_sonar_internal_testing_v2",e.ALPHA="pplx_alpha",e.O3_RESEARCH="o3_research",e.O3_PRO_RESEARCH="o3pro_research",e.CLAUDE40SONNET_RESEARCH="claude40sonnet_research",e.CLAUDE40SONNETTHINKING_RESEARCH="claude40sonnetthinking_research",e.CLAUDE40OPUS_RESEARCH="claude40opus_research",e.CLAUDE40OPUSTHINKING_RESEARCH="claude40opusthinking_research",e.BETA="pplx_beta",e.O3_LABS="o3_labs",e.O3_PRO_LABS="o3pro_labs",e.CLAUDE40SONNETTHINKING_LABS="claude40sonnetthinking_labs",e.CLAUDE40OPUSTHINKING_LABS="claude40opusthinking_labs",e.STUDY="pplx_study"})(de||(de={}));var Na;(function(e){e.GPT_4="gpt4",e.CLAUDE_3_OPUS="claude3opus",e.CLAUDE_3_5_HAIKU="claude35haiku",e.GEMINI="gemini",e.LLAMA_X_LARGE="llama_x_large",e.MISTRAL="mistral",e.GROK2="grok2",e.COPILOT="copilot",e.O3_MINI="o3mini",e.CLAUDE_OMBRE_EAP="claude_ombre_eap",e.CLAUDE_LACE_EAP="claude_lace_eap",e.R1="r1",e.GAMMA="pplx_gamma"})(Na||(Na={}));var ce;(function(e){e.SEARCH="search",e.RESEARCH="research",e.STUDIO="studio",e.STUDY="study"})(ce||(ce={}));var jn;(function(e){e.PRO="pro",e.MAX="max"})(jn||(jn={}));const Si={[de.DEFAULT]:ce.SEARCH,[de.PRO]:ce.SEARCH,[de.SONAR]:ce.SEARCH,[de.CLAUDE_2]:ce.SEARCH,[de.GPT_4o]:ce.SEARCH,[de.GPT_4_1]:ce.SEARCH,[de.GPT_5]:ce.SEARCH,[de.GEMINI_2_FLASH]:ce.SEARCH,[de.GROK]:ce.SEARCH,[de.O3]:ce.SEARCH,[de.O3_PRO]:ce.SEARCH,[de.CLAUDE_3_7_SONNET_THINKING]:ce.SEARCH,[de.CLAUDE_4_0_OPUS_THINKING]:ce.SEARCH,[de.CLAUDE_4_1_OPUS_THINKING]:ce.SEARCH,[de.GROK_4]:ce.SEARCH,[de.GPT_5_THINKING]:ce.SEARCH,[de.ALPHA]:ce.RESEARCH,[de.O4_MINI]:ce.RESEARCH,[de.O3_RESEARCH]:ce.RESEARCH,[de.O3_PRO_RESEARCH]:ce.RESEARCH,[de.CLAUDE40SONNET_RESEARCH]:ce.RESEARCH,[de.CLAUDE40SONNETTHINKING_RESEARCH]:ce.RESEARCH,[de.CLAUDE40OPUS_RESEARCH]:ce.RESEARCH,[de.CLAUDE40OPUSTHINKING_RESEARCH]:ce.RESEARCH,[de.BETA]:ce.STUDIO,[de.O3_LABS]:ce.STUDIO,[de.O3_PRO_LABS]:ce.STUDIO,[de.CLAUDE40SONNETTHINKING_LABS]:ce.STUDIO,[de.CLAUDE40OPUSTHINKING_LABS]:ce.STUDIO,[de.STUDY]:ce.STUDY},MU=e=>Si[e]||ce.SEARCH,Yg={[ce.SEARCH]:dLe,[ce.RESEARCH]:hD,[ce.STUDIO]:Pk,[ce.STUDY]:pD},AXe=e=>Yg[e],Jhe=e=>AXe(MU(e)),IXe={...Yg,[ce.SEARCH]:Hs},RXe={auto:{model:de.DEFAULT,mode:ce.SEARCH},reasoning:{model:de.PPLX_REASONING,mode:ce.SEARCH},deep_research:{model:de.ALPHA,mode:ce.RESEARCH}},ege=e=>typeof e=="string"&&e in Si,kU=e=>ege(e)?e:void 0,_Q=Object.values(ce),tge=[{search_model:de.SONAR,has_new_tag:!1,subscription_tier:jn.PRO},{search_model:de.CLAUDE_2,has_new_tag:!1,subscription_tier:jn.PRO},{search_model:de.CLAUDE_3_7_SONNET_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:jn.PRO},{search_model:de.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:jn.MAX},{search_model:de.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:jn.PRO},{search_model:de.GPT_5,has_new_tag:!1,subscription_tier:jn.PRO},{search_model:de.GPT_5_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:jn.PRO},{search_model:de.O3,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:jn.PRO},{search_model:de.O3_PRO,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:jn.MAX},{search_model:de.GROK_4,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:jn.PRO}];function Kt(e){throw new Error(e)}var g8=["MO","TU","WE","TH","FR","SA","SU"],Oa=function(){function e(t,n){if(n===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=n}return e.fromStr=function(t){return new e(g8.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=g8[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),es=function(e){return e!=null},Ul=function(e){return typeof e=="number"},wQ=function(e){return typeof e=="string"&&g8.includes(e)},Ki=Array.isArray,Rc=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var n=[],r=e;r<t;r++)n.push(r);return n},Ln=function(e,t){var n=0,r=[];if(Ki(e))for(;n<t;n++)r[n]=[].concat(e);else for(;n<t;n++)r[n]=e;return r},PXe=function(e){return Ki(e)?e:[e]};function ch(e,t,n){n===void 0&&(n=" ");var r=String(e);return t=t>>0,r.length>t?String(r):(t=t-r.length,t>n.length&&(n+=Ln(n,t/n.length)),n.slice(0,t)+String(r))}var OXe=function(e,t,n){var r=e.split(t);return n?r.slice(0,n).concat([r.slice(n).join(t)]):r},_o=function(e,t){var n=e%t;return n*t<0?n+t:n},fj=function(e,t){return{div:Math.floor(e/t),mod:_o(e,t)}},zl=function(e){return!es(e)||e.length===0},Ns=function(e){return!zl(e)},or=function(e,t){return Ns(e)&&e.indexOf(t)!==-1},Hm=function(e,t,n,r,s,a){return r===void 0&&(r=0),s===void 0&&(s=0),a===void 0&&(a=0),new Date(Date.UTC(e,t-1,n,r,s,a))},LXe=[31,28,31,30,31,30,31,31,30,31,30,31],nge=1e3*60*60*24,rge=9999,sge=Hm(1970,1,1),DXe=[6,0,1,2,3,4,5],Lv=function(e){return e%4===0&&e%100!==0||e%400===0},age=function(e){return e instanceof Date},Z0=function(e){return age(e)&&!isNaN(e.getTime())},FXe=function(e,t){var n=e.getTime(),r=t.getTime(),s=n-r;return Math.round(s/nge)},y8=function(e){return FXe(e,sge)},ige=function(e){return new Date(sge.getTime()+e*nge)},UXe=function(e){var t=e.getUTCMonth();return t===1&&Lv(e.getUTCFullYear())?29:LXe[t]},Qg=function(e){return DXe[e.getUTCDay()]},CQ=function(e,t){var n=Hm(e,t+1,1);return[Qg(n),UXe(n)]},oge=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},x8=function(e){var t=new Date(e.getTime());return t},SQ=function(e){for(var t=[],n=0;n<e.length;n++)t.push(x8(e[n]));return t},J1=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},TU=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[ch(n.getUTCFullYear().toString(),4,"0"),ch(n.getUTCMonth()+1,2,"0"),ch(n.getUTCDate(),2,"0"),"T",ch(n.getUTCHours(),2,"0"),ch(n.getUTCMinutes(),2,"0"),ch(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},NU=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))},EQ=function(e,t){var n=e.toLocaleString("sv-SE",{timeZone:t});return n.replace(" ","T")+"Z"},BXe=function(e,t){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=new Date(EQ(e,n)),s=new Date(EQ(e,t??"UTC")),a=s.getTime()-r.getTime();return new Date(e.getTime()-a)},Gh=function(){function e(t,n){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=n,t==="between"?(this.maxDate=n.inc?n.before:new Date(n.before.getTime()-1),this.minDate=n.inc?n.after:new Date(n.after.getTime()+1)):t==="before"?this.maxDate=n.inc?n.dt:new Date(n.dt.getTime()-1):t==="after"&&(this.minDate=n.inc?n.dt:new Date(n.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var n=this.minDate&&t<this.minDate,r=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(n)return!0;if(r)return!1}else if(this.method==="before"){if(r)return!1}else if(this.method==="after")return n?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),MQ=function(e){mD(t,e);function t(n,r,s){var a=e.call(this,n,r)||this;return a.iterator=s,a}return t.prototype.add=function(n){return this.iterator(n,this._result.length)?(this._result.push(n),!0):!1},t}(Gh),jE={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},kQ=function(e,t){return e.indexOf(t)!==-1},VXe=function(e){return e.toString()},$Xe=function(e,t,n){return"".concat(t," ").concat(n,", ").concat(e)},zu=function(){function e(t,n,r,s){if(n===void 0&&(n=VXe),r===void 0&&(r=jE),s===void 0&&(s=$Xe),this.text=[],this.language=r||jE,this.gettext=n,this.dateFormatter=s,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),i=[].concat(this.options.bynmonthday);a.sort(function(d,m){return d-m}),i.sort(function(d,m){return m-d}),this.bymonthday=a.concat(i),this.bymonthday.length||(this.bymonthday=null)}if(es(this.origOptions.byweekday)){var l=Ki(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return!!d.n}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var u=function(d,m){return d.weekday-m.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var n=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var r in t.origOptions){if(kQ(["dtstart","tzid","wkst","freq"],r))return!0;if(!kQ(e.IMPLEMENTED[t.options.freq],r))return!1}return n},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[yt.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var n,r=this.gettext;if(t===-1)return r("last");var s=Math.abs(t);switch(s){case 1:case 21:case 31:n=s+r("st");break;case 2:case 22:n=s+r("nd");break;case 3:case 23:n=s+r("rd");break;default:n=s+r("th")}return t<0?n+" "+r("last"):n},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var n=Ul(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[n]},e.prototype.plural=function(t){return t%100!==1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,n,r,s){var a=this;s===void 0&&(s=","),Ki(t)||(t=[t]);var i=function(c,u,d){for(var m="",p=0;p<c.length;p++)p!==0&&(p===c.length-1?m+=" "+d+" ":m+=u+" "),m+=c[p];return m};n=n||function(c){return c.toString()};var l=function(c){return n&&n.call(a,c)};return r?i(t.map(l),s,r):t.map(l).join(s+" ")},e}(),WXe=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,n;this.symbol=null,this.value=null;do{if(this.done)return!1;var r=void 0;t=null;for(var s in this.rules){r=this.rules[s];var a=r.exec(this.text);a&&(t===null||a[0].length>t[0].length)&&(t=a,n=s)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(n==="SKIP");return this.symbol=n,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var n=this.value;return this.nextSymbol(),n}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function lge(e,t){t===void 0&&(t=jE);var n={},r=new WXe(t.tokens);if(!r.start(e))return null;return s(),n;function s(){r.expect("every");var p=r.acceptNumber();if(p&&(n.interval=parseInt(p[0],10)),r.isDone())throw new Error("Unexpected end");switch(r.symbol){case"day(s)":n.freq=yt.DAILY,r.nextSymbol()&&(i(),m());break;case"weekday(s)":n.freq=yt.WEEKLY,n.byweekday=[yt.MO,yt.TU,yt.WE,yt.TH,yt.FR],r.nextSymbol(),i(),m();break;case"week(s)":n.freq=yt.WEEKLY,r.nextSymbol()&&(a(),i(),m());break;case"hour(s)":n.freq=yt.HOURLY,r.nextSymbol()&&(a(),m());break;case"minute(s)":n.freq=yt.MINUTELY,r.nextSymbol()&&(a(),m());break;case"month(s)":n.freq=yt.MONTHLY,r.nextSymbol()&&(a(),m());break;case"year(s)":n.freq=yt.YEARLY,r.nextSymbol()&&(a(),m());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=yt.WEEKLY;var h=r.symbol.substr(0,2).toUpperCase();if(n.byweekday=[yt[h]],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var g=c();if(!g)throw new Error("Unexpected symbol "+r.symbol+", expected weekday");n.byweekday.push(yt[g]),r.nextSymbol()}i(),d(),m();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=yt.YEARLY,n.bymonth=[l()],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var y=l();if(!y)throw new Error("Unexpected symbol "+r.symbol+", expected month");n.bymonth.push(y),r.nextSymbol()}a(),m();break;default:throw new Error("Unknown symbol")}}function a(){var p=r.accept("on"),h=r.accept("the");if(p||h)do{var g=u(),y=c(),x=l();if(g)y?(r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(yt[y].nth(g))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(g),r.accept("day(s)"));else if(y)r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(yt[y]);else if(r.symbol==="weekday(s)")r.nextSymbol(),n.byweekday||(n.byweekday=[yt.MO,yt.TU,yt.WE,yt.TH,yt.FR]);else if(r.symbol==="week(s)"){r.nextSymbol();var v=r.acceptNumber();if(!v)throw new Error("Unexpected symbol "+r.symbol+", expected week number");for(n.byweekno=[parseInt(v[0],10)];r.accept("comma");){if(v=r.acceptNumber(),!v)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.byweekno.push(parseInt(v[0],10))}}else if(x)r.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(x);else return}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function i(){var p=r.accept("at");if(p)do{var h=r.acceptNumber();if(!h)throw new Error("Unexpected symbol "+r.symbol+", expected hour");for(n.byhour=[parseInt(h[0],10)];r.accept("comma");){if(h=r.acceptNumber(),!h)throw new Error("Unexpected symbol "+r.symbol+"; expected hour");n.byhour.push(parseInt(h[0],10))}}while(r.accept("comma")||r.accept("at"))}function l(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(r.symbol){case"last":return r.nextSymbol(),-1;case"first":return r.nextSymbol(),1;case"second":return r.nextSymbol(),r.accept("last")?-2:2;case"third":return r.nextSymbol(),r.accept("last")?-3:3;case"nth":var p=parseInt(r.value[1],10);if(p<-366||p>366)throw new Error("Nth out of range: "+p);return r.nextSymbol(),r.accept("last")?-p:p;default:return!1}}function d(){r.accept("on"),r.accept("the");var p=u();if(p)for(n.bymonthday=[p],r.nextSymbol();r.accept("comma");){if(p=u(),!p)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.bymonthday.push(p),r.nextSymbol()}}function m(){if(r.symbol==="until"){var p=Date.parse(r.text);if(!p)throw new Error("Cannot parse until date:"+r.text);n.until=new Date(p)}else r.accept("for")&&(n.count=parseInt(r.value[0],10),r.expect("number"))}}var Dn;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(Dn||(Dn={}));function jU(e){return e<Dn.HOURLY}var HXe=function(e,t){return t===void 0&&(t=jE),new yt(lge(e,t)||void 0)},Zy=["count","until","interval","byweekday","bymonthday","bymonth"];zu.IMPLEMENTED=[];zu.IMPLEMENTED[Dn.HOURLY]=Zy;zu.IMPLEMENTED[Dn.MINUTELY]=Zy;zu.IMPLEMENTED[Dn.DAILY]=["byhour"].concat(Zy);zu.IMPLEMENTED[Dn.WEEKLY]=Zy;zu.IMPLEMENTED[Dn.MONTHLY]=Zy;zu.IMPLEMENTED[Dn.YEARLY]=["byweekno","byyearday"].concat(Zy);var zXe=function(e,t,n,r){return new zu(e,t,n,r).toString()},GXe=zu.isFullyConvertible,AE=function(){function e(t,n,r,s){this.hour=t,this.minute=n,this.second=r,this.millisecond=s||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}(),qXe=function(e){mD(t,e);function t(n,r,s,a,i,l,c){var u=e.call(this,a,i,l,c)||this;return u.year=n,u.month=r,u.day=s,u}return t.fromDate=function(n){return new this(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.valueOf()%1e3)},t.prototype.getWeekday=function(){return Qg(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(n){this.year+=n},t.prototype.addMonths=function(n){if(this.month+=n,this.month>12){var r=Math.floor(this.month/12),s=_o(this.month,12);this.month=s,this.year+=r,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(n,r){r>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-r))+n*7:this.day+=-(this.getWeekday()-r)+n*7,this.fixDay()},t.prototype.addDaily=function(n){this.day+=n,this.fixDay()},t.prototype.addHours=function(n,r,s){for(r&&(this.hour+=Math.floor((23-this.hour)/n)*n);;){this.hour+=n;var a=fj(this.hour,24),i=a.div,l=a.mod;if(i&&(this.hour=l,this.addDaily(i)),zl(s)||or(s,this.hour))break}},t.prototype.addMinutes=function(n,r,s,a){for(r&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/n)*n);;){this.minute+=n;var i=fj(this.minute,60),l=i.div,c=i.mod;if(l&&(this.minute=c,this.addHours(l,!1,s)),(zl(s)||or(s,this.hour))&&(zl(a)||or(a,this.minute)))break}},t.prototype.addSeconds=function(n,r,s,a,i){for(r&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/n)*n);;){this.second+=n;var l=fj(this.second,60),c=l.div,u=l.mod;if(c&&(this.second=u,this.addMinutes(c,!1,s,a)),(zl(s)||or(s,this.hour))&&(zl(a)||or(a,this.minute))&&(zl(i)||or(i,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var n=CQ(this.year,this.month-1)[1];if(!(this.day<=n))for(;this.day>n;){if(this.day-=n,++this.month,this.month===13&&(this.month=1,++this.year,this.year>rge))return;n=CQ(this.year,this.month-1)[1]}}},t.prototype.add=function(n,r){var s=n.freq,a=n.interval,i=n.wkst,l=n.byhour,c=n.byminute,u=n.bysecond;switch(s){case Dn.YEARLY:return this.addYears(a);case Dn.MONTHLY:return this.addMonths(a);case Dn.WEEKLY:return this.addWeekly(a,i);case Dn.DAILY:return this.addDaily(a);case Dn.HOURLY:return this.addHours(a,r,l);case Dn.MINUTELY:return this.addMinutes(a,r,l,c);case Dn.SECONDLY:return this.addSeconds(a,r,l,c,u)}},t}(AE);function cge(e){for(var t=[],n=Object.keys(e),r=0,s=n;r<s.length;r++){var a=s[r];or(CZe,a)||t.push(a),age(e[a])&&!Z0(e[a])&&t.push(a)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return Cr({},e)}function KXe(e){var t=Cr(Cr({},AU),cge(e));if(es(t.byeaster)&&(t.freq=yt.YEARLY),!(es(t.freq)&&yt.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),es(t.wkst)?Ul(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=yt.MO.weekday,es(t.bysetpos)){Ul(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var n=0;n<t.bysetpos.length;n++){var r=t.bysetpos[n];if(r===0||!(r>=-366&&r<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(t.byweekno||Ns(t.byweekno)||Ns(t.byyearday)||t.bymonthday||Ns(t.bymonthday)||es(t.byweekday)||es(t.byeaster)))switch(t.freq){case yt.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case yt.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case yt.WEEKLY:t.byweekday=[Qg(t.dtstart)];break}if(es(t.bymonth)&&!Ki(t.bymonth)&&(t.bymonth=[t.bymonth]),es(t.byyearday)&&!Ki(t.byyearday)&&Ul(t.byyearday)&&(t.byyearday=[t.byyearday]),!es(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(Ki(t.bymonthday)){for(var s=[],a=[],n=0;n<t.bymonthday.length;n++){var r=t.bymonthday[n];r>0?s.push(r):r<0&&a.push(r)}t.bymonthday=s,t.bynmonthday=a}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(es(t.byweekno)&&!Ki(t.byweekno)&&(t.byweekno=[t.byweekno]),!es(t.byweekday))t.bynweekday=null;else if(Ul(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(wQ(t.byweekday))t.byweekday=[Oa.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof Oa)!t.byweekday.n||t.freq>yt.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var i=[],l=[],n=0;n<t.byweekday.length;n++){var c=t.byweekday[n];if(Ul(c)){i.push(c);continue}else if(wQ(c)){i.push(Oa.fromStr(c).weekday);continue}!c.n||t.freq>yt.MONTHLY?i.push(c.weekday):l.push([c.weekday,c.n])}t.byweekday=Ns(i)?i:null,t.bynweekday=Ns(l)?l:null}return es(t.byhour)?Ul(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<yt.HOURLY?[t.dtstart.getUTCHours()]:null,es(t.byminute)?Ul(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<yt.MINUTELY?[t.dtstart.getUTCMinutes()]:null,es(t.bysecond)?Ul(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<yt.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function YXe(e){var t=e.dtstart.getTime()%1e3;if(!jU(e.freq))return[];var n=[];return e.byhour.forEach(function(r){e.byminute.forEach(function(s){e.bysecond.forEach(function(a){n.push(new AE(r,s,a,t))})})}),n}function v8(e){var t=e.split(`
`).map(QXe).filter(function(n){return n!==null});return Cr(Cr({},t[0]),t[1])}function IE(e){var t={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!n)return t;var r=n[1],s=n[2];return r&&(t.tzid=r),t.dtstart=NU(s),t}function QXe(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return TQ(e);var n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return TQ(e);case"DTSTART":return IE(e);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(e))}}function TQ(e){var t=e.replace(/^RRULE:/i,""),n=IE(t),r=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return r.forEach(function(s){var a=s.split("="),i=a[0],l=a[1];switch(i.toUpperCase()){case"FREQ":n.freq=Dn[l.toUpperCase()];break;case"WKST":n.wkst=Yo[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=XXe(l),u=i.toLowerCase();n[u]=c;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=ZXe(l);break;case"DTSTART":case"TZID":var d=IE(e);n.tzid=d.tzid,n.dtstart=d.dtstart;break;case"UNTIL":n.until=NU(l);break;case"BYEASTER":n.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+i+"'")}}),n}function XXe(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(NQ)}return NQ(e)}function NQ(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function ZXe(e){var t=e.split(",");return t.map(function(n){if(n.length===2)return Yo[n];var r=n.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!r||r.length<3)throw new SyntaxError("Invalid weekday string: ".concat(n));var s=Number(r[1]),a=r[2],i=Yo[a].weekday;return new Oa(i,s)})}var RE=function(){function e(t,n){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=n}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=TU(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:BXe(this.date,this.tzid)},e}();function b8(e){for(var t=[],n="",r=Object.keys(e),s=Object.keys(AU),a=0;a<r.length;a++)if(r[a]!=="tzid"&&or(s,r[a])){var i=r[a].toUpperCase(),l=e[r[a]],c="";if(!(!es(l)||Ki(l)&&!l.length)){switch(i){case"FREQ":c=yt.FREQUENCIES[e.freq];break;case"WKST":Ul(l)?c=new Oa(l).toString():c=l.toString();break;case"BYWEEKDAY":i="BYDAY",c=PXe(l).map(function(h){return h instanceof Oa?h:Ki(h)?new Oa(h[0],h[1]):new Oa(h)}).toString();break;case"DTSTART":n=JXe(l,e.tzid);break;case"UNTIL":c=TU(l,!e.tzid);break;default:if(Ki(l)){for(var u=[],d=0;d<l.length;d++)u[d]=String(l[d]);c=u.toString()}else c=String(l)}c&&t.push([i,c])}}var m=t.map(function(h){var g=h[0],y=h[1];return"".concat(g,"=").concat(y.toString())}).join(";"),p="";return m!==""&&(p="RRULE:".concat(m)),[n,p].filter(function(h){return!!h}).join(`
`)}function JXe(e,t){return e?"DTSTART"+new RE(new Date(e),t).toString():""}function eZe(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(n,r){return n.getTime()===t[r].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var tZe=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,n,r){n&&(n=n instanceof Date?x8(n):SQ(n)),t==="all"?this.all=n:(r._value=n,this[t].push(r))},e.prototype._cacheGet=function(t,n){var r=!1,s=n?Object.keys(n):[],a=function(d){for(var m=0;m<s.length;m++){var p=s[m];if(!eZe(n[p],d[p]))return!0}return!1},i=this[t];if(t==="all")r=this.all;else if(Ki(i))for(var l=0;l<i.length;l++){var c=i[l];if(!(s.length&&a(c))){r=c._value;break}}if(!r&&this.all){for(var u=new Gh(t,n),l=0;l<this.all.length&&u.accept(this.all[l]);l++);r=u.getValue(),this._cacheAdd(t,r,n)}return Ki(r)?SQ(r):r instanceof Date?x8(r):r},e}(),nZe=tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt([],Ln(1,31),!0),Ln(2,28),!0),Ln(3,31),!0),Ln(4,30),!0),Ln(5,31),!0),Ln(6,30),!0),Ln(7,31),!0),Ln(8,31),!0),Ln(9,30),!0),Ln(10,31),!0),Ln(11,30),!0),Ln(12,31),!0),Ln(1,7),!0),rZe=tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt([],Ln(1,31),!0),Ln(2,29),!0),Ln(3,31),!0),Ln(4,30),!0),Ln(5,31),!0),Ln(6,30),!0),Ln(7,31),!0),Ln(8,31),!0),Ln(9,30),!0),Ln(10,31),!0),Ln(11,30),!0),Ln(12,31),!0),Ln(1,7),!0),sZe=Rc(1,29),aZe=Rc(1,30),bd=Rc(1,31),ia=Rc(1,32),iZe=tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt([],ia,!0),aZe,!0),ia,!0),bd,!0),ia,!0),bd,!0),ia,!0),ia,!0),bd,!0),ia,!0),bd,!0),ia,!0),ia.slice(0,7),!0),oZe=tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt([],ia,!0),sZe,!0),ia,!0),bd,!0),ia,!0),bd,!0),ia,!0),ia,!0),bd,!0),ia,!0),bd,!0),ia,!0),ia.slice(0,7),!0),lZe=Rc(-28,0),cZe=Rc(-29,0),_d=Rc(-30,0),oa=Rc(-31,0),uZe=tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt([],oa,!0),cZe,!0),oa,!0),_d,!0),oa,!0),_d,!0),oa,!0),oa,!0),_d,!0),oa,!0),_d,!0),oa,!0),oa.slice(0,7),!0),dZe=tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt([],oa,!0),lZe,!0),oa,!0),_d,!0),oa,!0),_d,!0),oa,!0),oa,!0),_d,!0),oa,!0),_d,!0),oa,!0),oa.slice(0,7),!0),fZe=[0,31,60,91,121,152,182,213,244,274,305,335,366],mZe=[0,31,59,90,120,151,181,212,243,273,304,334,365],jQ=function(){for(var e=[],t=0;t<55;t++)e=e.concat(Rc(7));return e}();function pZe(e,t){var n=Hm(e,1,1),r=Lv(e)?366:365,s=Lv(e+1)?366:365,a=y8(n),i=Qg(n),l=Cr(Cr({yearlen:r,nextyearlen:s,yearordinal:a,yearweekday:i},hZe(e)),{wnomask:null});if(zl(t.byweekno))return l;l.wnomask=Ln(0,r+7);var c,u,d=c=_o(7-i+t.wkst,7);d>=4?(d=0,u=l.yearlen+_o(i-t.wkst,7)):u=r-d;for(var m=Math.floor(u/7),p=_o(u,7),h=Math.floor(m+p/4),g=0;g<t.byweekno.length;g++){var y=t.byweekno[g];if(y<0&&(y+=h+1),y>0&&y<=h){var x=void 0;y>1?(x=d+(y-1)*7,d!==c&&(x-=7-c)):x=d;for(var v=0;v<7&&(l.wnomask[x]=1,x++,l.wdaymask[x]!==t.wkst);v++);}}if(or(t.byweekno,1)){var x=d+h*7;if(d!==c&&(x-=7-c),x<r)for(var g=0;g<7&&(l.wnomask[x]=1,x+=1,l.wdaymask[x]!==t.wkst);g++);}if(d){var b=void 0;if(or(t.byweekno,-1))b=-1;else{var _=Qg(Hm(e-1,1,1)),w=_o(7-_.valueOf()+t.wkst,7),C=Lv(e-1)?366:365,S=void 0;w>=4?(w=0,S=C+_o(_-t.wkst,7)):S=r-d,b=Math.floor(52+_o(S,7)/4)}if(or(t.byweekno,b))for(var x=0;x<d;x++)l.wnomask[x]=1}return l}function hZe(e){var t=Lv(e)?366:365,n=Hm(e,1,1),r=Qg(n);return t===365?{mmask:nZe,mdaymask:oZe,nmdaymask:dZe,wdaymask:jQ.slice(r),mrange:mZe}:{mmask:rZe,mdaymask:iZe,nmdaymask:uZe,wdaymask:jQ.slice(r),mrange:fZe}}function gZe(e,t,n,r,s,a){var i={lastyear:e,lastmonth:t,nwdaymask:[]},l=[];if(a.freq===yt.YEARLY)if(zl(a.bymonth))l=[[0,n]];else for(var c=0;c<a.bymonth.length;c++)t=a.bymonth[c],l.push(r.slice(t-1,t+1));else a.freq===yt.MONTHLY&&(l=[r.slice(t-1,t+1)]);if(zl(l))return i;i.nwdaymask=Ln(0,n);for(var c=0;c<l.length;c++)for(var u=l[c],d=u[0],m=u[1]-1,p=0;p<a.bynweekday.length;p++){var h=void 0,g=a.bynweekday[p],y=g[0],x=g[1];x<0?(h=m+(x+1)*7,h-=_o(s[h]-y,7)):(h=d+(x-1)*7,h+=_o(7-s[h]+y,7)),d<=h&&h<=m&&(i.nwdaymask[h]=1)}return i}function yZe(e,t){t===void 0&&(t=0);var n=e%19,r=Math.floor(e/100),s=e%100,a=Math.floor(r/4),i=r%4,l=Math.floor((r+8)/25),c=Math.floor((r-l+1)/3),u=Math.floor(19*n+r-a-c+15)%30,d=Math.floor(s/4),m=s%4,p=Math.floor(32+2*i+2*d-u-m)%7,h=Math.floor((n+11*u+22*p)/451),g=Math.floor((u+p-7*h+114)/31),y=(u+p-7*h+114)%31+1,x=Date.UTC(e,g-1,y+t),v=Date.UTC(e,0,1);return[Math.ceil((x-v)/(1e3*60*60*24))]}var xZe=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,n){var r=this.options;if(t!==this.lastyear&&(this.yearinfo=pZe(t,r)),Ns(r.bynweekday)&&(n!==this.lastmonth||t!==this.lastyear)){var s=this.yearinfo,a=s.yearlen,i=s.mrange,l=s.wdaymask;this.monthinfo=gZe(t,n,a,i,l,r)}es(r.byeaster)&&(this.eastermask=yZe(t,r.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[Rc(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,n){for(var r=this.mrange[n-1],s=this.mrange[n],a=Ln(null,this.yearlen),i=r;i<s;i++)a[i]=i;return[a,r,s]},e.prototype.wdayset=function(t,n,r){for(var s=Ln(null,this.yearlen+7),a=y8(Hm(t,n,r))-this.yearordinal,i=a,l=0;l<7&&(s[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[s,i,a]},e.prototype.ddayset=function(t,n,r){var s=Ln(null,this.yearlen),a=y8(Hm(t,n,r))-this.yearordinal;return s[a]=a,[s,a,a+1]},e.prototype.htimeset=function(t,n,r,s){var a=this,i=[];return this.options.byminute.forEach(function(l){i=i.concat(a.mtimeset(t,l,r,s))}),J1(i),i},e.prototype.mtimeset=function(t,n,r,s){var a=this.options.bysecond.map(function(i){return new AE(t,n,i,s)});return J1(a),a},e.prototype.stimeset=function(t,n,r,s){return[new AE(t,n,r,s)]},e.prototype.getdayset=function(t){switch(t){case Dn.YEARLY:return this.ydayset.bind(this);case Dn.MONTHLY:return this.mdayset.bind(this);case Dn.WEEKLY:return this.wdayset.bind(this);case Dn.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case Dn.HOURLY:return this.htimeset.bind(this);case Dn.MINUTELY:return this.mtimeset.bind(this);case Dn.SECONDLY:return this.stimeset.bind(this)}},e}();function vZe(e,t,n,r,s,a){for(var i=[],l=0;l<e.length;l++){var c=void 0,u=void 0,d=e[l];d<0?(c=Math.floor(d/t.length),u=_o(d,t.length)):(c=Math.floor((d-1)/t.length),u=_o(d-1,t.length));for(var m=[],p=n;p<r;p++){var h=a[p];es(h)&&m.push(h)}var g=void 0;c<0?g=m.slice(c)[0]:g=m[c];var y=t[u],x=ige(s.yearordinal+g),v=oge(x,y);or(i,v)||i.push(v)}return J1(i),i}function uge(e,t){var n=t.dtstart,r=t.freq,s=t.interval,a=t.until,i=t.bysetpos,l=t.count;if(l===0||s===0)return Bc(e);var c=qXe.fromDate(n),u=new xZe(t);u.rebuild(c.year,c.month);for(var d=wZe(u,c,t);;){var m=u.getdayset(r)(c.year,c.month,c.day),p=m[0],h=m[1],g=m[2],y=_Ze(p,h,g,u,t);if(Ns(i))for(var x=vZe(i,d,h,g,u,p),v=0;v<x.length;v++){var b=x[v];if(a&&b>a)return Bc(e);if(b>=n){var _=AQ(b,t);if(!e.accept(_)||l&&(--l,!l))return Bc(e)}}else for(var v=h;v<g;v++){var w=p[v];if(es(w))for(var C=ige(u.yearordinal+w),S=0;S<d.length;S++){var E=d[S],b=oge(C,E);if(a&&b>a)return Bc(e);if(b>=n){var _=AQ(b,t);if(!e.accept(_)||l&&(--l,!l))return Bc(e)}}}if(t.interval===0||(c.add(t,y),c.year>rge))return Bc(e);jU(r)||(d=u.gettimeset(r)(c.hour,c.minute,c.second,0)),u.rebuild(c.year,c.month)}}function bZe(e,t,n){var r=n.bymonth,s=n.byweekno,a=n.byweekday,i=n.byeaster,l=n.bymonthday,c=n.bynmonthday,u=n.byyearday;return Ns(r)&&!or(r,e.mmask[t])||Ns(s)&&!e.wnomask[t]||Ns(a)&&!or(a,e.wdaymask[t])||Ns(e.nwdaymask)&&!e.nwdaymask[t]||i!==null&&!or(e.eastermask,t)||(Ns(l)||Ns(c))&&!or(l,e.mdaymask[t])&&!or(c,e.nmdaymask[t])||Ns(u)&&(t<e.yearlen&&!or(u,t+1)&&!or(u,-e.yearlen+t)||t>=e.yearlen&&!or(u,t+1-e.yearlen)&&!or(u,-e.nextyearlen+t-e.yearlen))}function AQ(e,t){return new RE(e,t.tzid).rezonedDate()}function Bc(e){return e.getValue()}function _Ze(e,t,n,r,s){for(var a=!1,i=t;i<n;i++){var l=e[i];a=bZe(r,l,s),a&&(e[l]=null)}return a}function wZe(e,t,n){var r=n.freq,s=n.byhour,a=n.byminute,i=n.bysecond;return jU(r)?YXe(n):r>=yt.HOURLY&&Ns(s)&&!or(s,t.hour)||r>=yt.MINUTELY&&Ns(a)&&!or(a,t.minute)||r>=yt.SECONDLY&&Ns(i)&&!or(i,t.second)?[]:e.gettimeset(r)(t.hour,t.minute,t.second,t.millisecond)}var Yo={MO:new Oa(0),TU:new Oa(1),WE:new Oa(2),TH:new Oa(3),FR:new Oa(4),SA:new Oa(5),SU:new Oa(6)},AU={freq:Dn.YEARLY,dtstart:null,interval:1,wkst:Yo.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},CZe=Object.keys(AU),yt=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=!1),this._cache=n?null:new tZe,this.origOptions=cge(t);var r=KXe(t).parsedOptions;this.options=r}return e.parseText=function(t,n){return lge(t,n)},e.fromText=function(t,n){return HXe(t,n)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return uge(t,this.options)},e.prototype._cacheGet=function(t,n){return this._cache?this._cache._cacheGet(t,n):!1},e.prototype._cacheAdd=function(t,n,r){if(this._cache)return this._cache._cacheAdd(t,n,r)},e.prototype.all=function(t){if(t)return this._iter(new MQ("all",{},t));var n=this._cacheGet("all");return n===!1&&(n=this._iter(new Gh("all",{})),this._cacheAdd("all",n)),n},e.prototype.between=function(t,n,r,s){if(r===void 0&&(r=!1),!Z0(t)||!Z0(n))throw new Error("Invalid date passed in to RRule.between");var a={before:n,after:t,inc:r};if(s)return this._iter(new MQ("between",a,s));var i=this._cacheGet("between",a);return i===!1&&(i=this._iter(new Gh("between",a)),this._cacheAdd("between",i,a)),i},e.prototype.before=function(t,n){if(n===void 0&&(n=!1),!Z0(t))throw new Error("Invalid date passed in to RRule.before");var r={dt:t,inc:n},s=this._cacheGet("before",r);return s===!1&&(s=this._iter(new Gh("before",r)),this._cacheAdd("before",s,r)),s},e.prototype.after=function(t,n){if(n===void 0&&(n=!1),!Z0(t))throw new Error("Invalid date passed in to RRule.after");var r={dt:t,inc:n},s=this._cacheGet("after",r);return s===!1&&(s=this._iter(new Gh("after",r)),this._cacheAdd("after",s,r)),s},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return b8(this.origOptions)},e.prototype.toText=function(t,n,r){return zXe(this,t,n,r)},e.prototype.isFullyConvertibleToText=function(){return GXe(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=Dn.YEARLY,e.MONTHLY=Dn.MONTHLY,e.WEEKLY=Dn.WEEKLY,e.DAILY=Dn.DAILY,e.HOURLY=Dn.HOURLY,e.MINUTELY=Dn.MINUTELY,e.SECONDLY=Dn.SECONDLY,e.MO=Yo.MO,e.TU=Yo.TU,e.WE=Yo.WE,e.TH=Yo.TH,e.FR=Yo.FR,e.SA=Yo.SA,e.SU=Yo.SU,e.parseString=v8,e.optionsToString=b8,e}();function SZe(e,t,n,r,s,a){var i={},l=e.accept;function c(p,h){n.forEach(function(g){g.between(p,h,!0).forEach(function(y){i[Number(y)]=!0})})}s.forEach(function(p){var h=new RE(p,a).rezonedDate();i[Number(h)]=!0}),e.accept=function(p){var h=Number(p);return isNaN(h)?l.call(this,p):!i[h]&&(c(new Date(h-1),new Date(h+1)),!i[h])?(i[h]=!0,l.call(this,p)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(p){var h=Number(p);return i[h]?!0:(i[h]=!0,l.call(this,p))});for(var u=0;u<r.length;u++){var d=new RE(r[u],a).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(p){uge(e,p.options)});var m=e._result;switch(J1(m),e.method){case"all":case"between":return m;case"before":return m.length&&m[m.length-1]||null;case"after":default:return m.length&&m[0]||null}}var IQ={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function EZe(e,t){var n=[],r=[],s=[],a=[],i=IE(e),l=i.dtstart,c=i.tzid,u=jZe(e,t.unfold);return u.forEach(function(d){var m;if(d){var p=NZe(d),h=p.name,g=p.parms,y=p.value;switch(h.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));n.push(v8(d));break;case"RDATE":var x=(m=/RDATE(?:;TZID=([^:=]+))?/i.exec(d))!==null&&m!==void 0?m:[],v=x[1];v&&!c&&(c=v),r=r.concat(PQ(y,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));s.push(v8(y));break;case"EXDATE":a=a.concat(PQ(y,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:l,tzid:c,rrulevals:n,rdatevals:r,exrulevals:s,exdatevals:a}}function MZe(e,t){var n=EZe(e,t),r=n.rrulevals,s=n.rdatevals,a=n.exrulevals,i=n.exdatevals,l=n.dtstart,c=n.tzid,u=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||r.length>1||s.length||a.length||i.length){var d=new IZe(u);return d.dtstart(l),d.tzid(c||void 0),r.forEach(function(p){d.rrule(new yt(mj(p,l,c),u))}),s.forEach(function(p){d.rdate(p)}),a.forEach(function(p){d.exrule(new yt(mj(p,l,c),u))}),i.forEach(function(p){d.exdate(p)}),t.compatible&&t.dtstart&&d.rdate(l),d}var m=r[0]||{};return new yt(mj(m,m.dtstart||t.dtstart||l,m.tzid||t.tzid||c),u)}function RQ(e,t){return t===void 0&&(t={}),MZe(e,kZe(t))}function mj(e,t,n){return Cr(Cr({},e),{dtstart:t,tzid:n})}function kZe(e){var t=[],n=Object.keys(e),r=Object.keys(IQ);if(n.forEach(function(s){or(r,s)||t.push(s)}),t.length)throw new Error("Invalid options: "+t.join(", "));return Cr(Cr({},IQ),e)}function TZe(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=OXe(e,":",1),n=t[0],r=t[1];return{name:n,value:r}}function NZe(e){var t=TZe(e),n=t.name,r=t.value,s=n.split(";");if(!s)throw new Error("empty property name");return{name:s[0].toUpperCase(),parms:s.slice(1),value:r}}function jZe(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var n=e.split(`
`),r=0;r<n.length;){var s=n[r]=n[r].replace(/\s+$/g,"");s?r>0&&s[0]===" "?(n[r-1]+=s.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}function AZe(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function PQ(e,t){return AZe(t),e.split(",").map(function(n){return NU(n)})}function OQ(e){var t=this;return function(n){if(n!==void 0&&(t["_".concat(e)]=n),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var r=0;r<t._rrule.length;r++){var s=t._rrule[r].origOptions[e];if(s)return s}}}var IZe=function(e){mD(t,e);function t(n){n===void 0&&(n=!1);var r=e.call(this,{},n)||this;return r.dtstart=OQ.apply(r,["dtstart"]),r.tzid=OQ.apply(r,["tzid"]),r._rrule=[],r._rdate=[],r._exrule=[],r._exdate=[],r}return t.prototype._iter=function(n){return SZe(n,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(n){LQ(n,this._rrule)},t.prototype.exrule=function(n){LQ(n,this._exrule)},t.prototype.rdate=function(n){DQ(n,this._rdate)},t.prototype.exdate=function(n){DQ(n,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(n){return RQ(n.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(n){return RQ(n.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(n){return new Date(n.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(n){return new Date(n.getTime())})},t.prototype.valueOf=function(){var n=[];return!this._rrule.length&&this._dtstart&&(n=n.concat(b8({dtstart:this._dtstart}))),this._rrule.forEach(function(r){n=n.concat(r.toString().split(`
`))}),this._exrule.forEach(function(r){n=n.concat(r.toString().split(`
`).map(function(s){return s.replace(/^RRULE:/,"EXRULE:")}).filter(function(s){return!/^DTSTART/.test(s)}))}),this._rdate.length&&n.push(FQ("RDATE",this._rdate,this.tzid())),this._exdate.length&&n.push(FQ("EXDATE",this._exdate,this.tzid())),n},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var n=new t(!!this._cache);return this._rrule.forEach(function(r){return n.rrule(r.clone())}),this._exrule.forEach(function(r){return n.exrule(r.clone())}),this._rdate.forEach(function(r){return n.rdate(new Date(r.getTime()))}),this._exdate.forEach(function(r){return n.exdate(new Date(r.getTime()))}),n},t}(yt);function LQ(e,t){if(!(e instanceof yt))throw new TypeError(String(e)+" is not RRule instance");or(t.map(String),String(e))||t.push(e)}function DQ(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");or(t.map(Number),Number(e))||(t.push(e),J1(t))}function FQ(e,t,n){var r=!n||n.toUpperCase()==="UTC",s=r?"".concat(e,":"):"".concat(e,";TZID=").concat(n,":"),a=t.map(function(i){return TU(i.valueOf(),r)}).join(",");return"".concat(s).concat(a)}const RZe=e=>{switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);case"DAILY":return new Date(2e3,0,1,e.hour,e.minute);case"WEEKLY":return new Date(2e3,0,2+e.dayOfWeek,e.hour,e.minute);case"MONTHLY":return new Date(2e3,0,e.day,e.hour,e.minute);case"YEARLY":return new Date(2e3,e.month,e.day,e.hour,e.minute);case"WEEKDAYS":return new Date(2e3,0,1,e.hour,e.minute)}};function IU(e,t){const n=new Date;switch(e.kind){case"ONCE":{const r=new Date(e.year,e.month,e.day,e.hour,e.minute);return r>n?r:n}case"DAILY":return new yt({freq:yt.DAILY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKLY":{const r=e.dayOfWeek===0?yt.SU:e.dayOfWeek-1;return new yt({freq:yt.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:r,byhour:e.hour,byminute:e.minute}).after(n)||n}case"MONTHLY":return new yt({freq:yt.MONTHLY,dtstart:new Date(n.getFullYear(),n.getMonth(),1,e.hour,e.minute),bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"YEARLY":return new yt({freq:yt.YEARLY,dtstart:new Date(n.getFullYear(),0,1,e.hour,e.minute),bymonth:e.month+1,bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKDAYS":return new yt({freq:yt.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:[yt.MO,yt.TU,yt.WE,yt.TH,yt.FR],byhour:e.hour,byminute:e.minute}).after(n)||n;default:return n}}function PZe(e,t){const n=RZe(e);switch(e.kind){case"ONCE":return t.formatDate(n,{dateStyle:"medium",timeStyle:"short"});case"DAILY":return t.formatTime(n,{timeStyle:"short"});case"WEEKLY":return t.formatDate(n,{weekday:"short",hour:"numeric",minute:"numeric"});case"MONTHLY":return t.formatMessage({defaultMessage:"Day {day}, {time}",id:"grA/MDsLjr"},{day:n.getDate().toString(),time:t.formatTime(n,{timeStyle:"short"})});case"YEARLY":return t.formatDate(n,{hour:"numeric",minute:"numeric",day:"numeric",month:"short"});case"WEEKDAYS":return t.formatTime(n,{timeStyle:"short"})}}const uh=pt({kindOnce:{defaultMessage:"Once",id:"DqTQOpG2Me"},kindDaily:{defaultMessage:"Daily",id:"zxvhnETmn2"},kindWeekly:{defaultMessage:"Weekly",id:"/clOBUs/wZ"},kindWeekdays:{defaultMessage:"Every weekday",id:"8Hjql2wdJG"},kindMonthly:{defaultMessage:"Monthly",id:"wYsv4ZHu+B"},kindYearly:{defaultMessage:"Yearly",id:"dqD39hnoA/"}}),OZe={ONCE:uh.kindOnce,DAILY:uh.kindDaily,WEEKLY:uh.kindWeekly,MONTHLY:uh.kindMonthly,YEARLY:uh.kindYearly,WEEKDAYS:uh.kindWeekdays};function Vs(){const e=new Date;return e.setHours(e.getHours()+1,e.getMinutes(),0,0),{kind:"ONCE",minute:e.getMinutes(),hour:e.getHours(),day:e.getDate(),month:e.getMonth(),year:e.getFullYear(),dayOfWeek:e.getDay()}}function LZe(e="",t=de.PRO,n=["web"]){return{title:"",prompt:e,schedule:Vs(),searchModel:t,sources:n,expiryDate:void 0,defaultExpiryDate:fge(t)}}function DZe(e,t){return t.formatMessage(OZe[e])}const FZe=()=>Intl.DateTimeFormat().resolvedOptions().timeZone;function UZe(e){switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);default:return new Date}}function BZe(e){switch(e.kind){case"ONCE":return"FREQ=DAILY;COUNT=1";case"DAILY":return`FREQ=DAILY;BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKLY":return`FREQ=WEEKLY;BYDAY=${["SU","MO","TU","WE","TH","FR","SA"][e.dayOfWeek]};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"MONTHLY":return`FREQ=MONTHLY;BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"YEARLY":return`FREQ=YEARLY;BYMONTH=${e.month+1};BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKDAYS":return`FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;BYHOUR=${e.hour};BYMINUTE=${e.minute}`}}function Dv(e){const t=UZe(e);return{start_at:Hu(t,"yyyy-MM-dd'T'HH:mm:ss"),rrule:BZe(e),tzid:FZe()}}function dge(e){if(!(e===null||!e))return Hu(e,"yyyy-MM-dd'T'HH:mm:ss")}function PE(e){const t=new Date(e.start_at),n={kind:"ONCE",minute:t.getMinutes(),hour:t.getHours(),day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),dayOfWeek:t.getDay()};if(e.rrule.includes("FREQ=DAILY;COUNT=1"))return n;const r=yt.parseString(e.rrule),s=d=>Array.isArray(d)?d[0]:d,a=s(r.byhour),i=s(r.byminute),l=s(r.bymonth),c=s(r.bymonthday),u=s(r.byweekday);switch(r.freq){case yt.DAILY:return a===void 0||i===void 0?(ne.error("DAILY schedule missing required BYHOUR or BYMINUTE parameter"),{...n}):{...n,kind:"DAILY",hour:a,minute:i};case yt.WEEKLY:{if(u===void 0||a===void 0||i===void 0)return ne.error("WEEKLY schedule missing required parameters"),{...n};if(Array.isArray(r.byweekday)&&r.byweekday.length===5)return{...n,kind:"WEEKDAYS",hour:a,minute:i};const d=u.weekday===6?0:u.weekday+1;return{...n,kind:"WEEKLY",dayOfWeek:d,hour:a,minute:i}}case yt.MONTHLY:return c===void 0||a===void 0||i===void 0?(ne.error("MONTHLY schedule missing required BYMONTHDAY parameter"),{...n}):{...n,kind:"MONTHLY",day:c,hour:a,minute:i};case yt.YEARLY:return l===void 0||c===void 0||a===void 0||i===void 0?(ne.error("YEARLY schedule missing required BYMONTH parameter"),{...n}):{...n,kind:"YEARLY",month:l-1,day:c,hour:a,minute:i}}return ne.error("Invalid task schedule"),{...n}}function VZe({expiryDate:e,schedule:t,defaultExpiryDate:n}){return e===null||!e||!t?e:IU(t)>e?n??null:e}function $Ze(e,t){return(e===de.BETA||e===de.ALPHA)&&(t.kind==="DAILY"||t.kind==="WEEKLY"||t.kind==="WEEKDAYS")}function fge(e,t){if(!(!t||!$Ze(e,t))&&(e===de.BETA||e===de.ALPHA)){const n=IU(t);return(s=>{switch(s){case"DAILY":return Ks(n,14);case"WEEKLY":return ME(n,14);case"WEEKDAYS":return Ks(n,21);case"ONCE":case"MONTHLY":case"YEARLY":return;default:Kt(s)}})(t.kind)}}const gf={should_send_email:!0,should_send_in_app:!0,should_send_push:!0},mge=e=>({id:e.task_id,type:WZe(e),createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),expiryDate:e.end_at?new Date(e.end_at):void 0,title:e.task_name,prompt:e.task_data.task_prompt,status:e.status,nextRun:new Date(e.next_trigger_intended_time),scheduleInfo:{start_at:e.start_at,rrule:e.trigger_condition_schedule,tzid:e.tzid},subscription:e.event_subscription,searchModel:e.task_data?.task_params?.model_preference||"pplx_pro",sources:e.task_data?.task_params?.sources||["web"],notificationSettings:e.notification_settings||gf}),WZe=e=>{switch(e.scheduler_type){case"EVENT_PUSH":return"ALERT";case"POLL":return"SCHEDULE";case"SHORTCUT":return"SHORTCUT";default:return null}};function HZe({intl:e,triggerType:t}){switch(t){case dt.SCHEDULED:return e.formatMessage({defaultMessage:"Scheduled task",id:"dG8VrMkuAT"});case dt.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert",id:"XMapyUiPpV"});case dt.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut",id:"tceWOrncgz"});default:Kt(t)}}function zZe({intl:e,triggerType:t,actionPerformed:n}){const r=GZe({intl:e,actionPerformed:n});switch(t){case dt.SCHEDULED:return e.formatMessage({defaultMessage:"Task has been {actionDisplayName}",id:"dztI4FIBBf"},{actionDisplayName:r});case dt.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert has been {actionDisplayName}",id:"ApBHuTxt1D"},{actionDisplayName:r});case dt.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut has been {actionDisplayName}",id:"oprPa0O7KY"},{actionDisplayName:r});default:Kt(t)}}function GZe({intl:e,actionPerformed:t}){switch(t){case"created":return e.formatMessage({defaultMessage:"created",id:"lr7wlbGcN2"});case"updated":return e.formatMessage({defaultMessage:"updated",id:"fM7xZh2bri"});case"paused":return e.formatMessage({defaultMessage:"paused",id:"onIpArq3j6"});case"resumed":return e.formatMessage({defaultMessage:"resumed",id:"NUz1enNtoA"});case"deleted":return e.formatMessage({defaultMessage:"deleted",id:"GBLHN+CxXe"});case"copied":return e.formatMessage({defaultMessage:"copied",id:"JZWZSAD5l1"});case"skipped":return e.formatMessage({defaultMessage:"skipped",id:"yrhXAwV22L"});default:Kt(t)}}const qZe=1e9,UQ=-1e9;function pge(e){return{trigger:{type:dt.SCHEDULED,schedule:e.schedule},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources??w_()},status:"ACTIVE",notificationSettings:gf}}function hge({selectedTask:e}){if(!e||e.type===null)return null;switch(e.type){case"SCHEDULE":return{id:e.id,trigger:{type:dt.SCHEDULED,schedule:PE(e.scheduleInfo),expiryDate:e.expiryDate},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status,notificationSettings:e.notificationSettings??gf};case"ALERT":switch(e.subscription?.event_type){case"STOCK_PRICE_TARGET":return{id:e.id,trigger:{type:dt.PRICE_ALERT,alertType:Xr.TARGET_PRICE,price:(e.subscription.value_lower_bound??UQ)<0?e.subscription.value_upper_bound??qZe:e.subscription.value_lower_bound??UQ,currency:"usd",symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};case"STOCK_PRICE_MOVEMENT":return{id:e.id,trigger:{type:dt.PRICE_ALERT,alertType:Xr.MOVEMENT_AMOUNT,percentageDecimalLowerBound:(e.subscription.value_lower_bound??0)/100,percentageDecimalUpperBound:(e.subscription.value_upper_bound??0)/100,symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:throw new Error("Unhandled subscription.event_type: "+e.subscription?.event_type)}case"SHORTCUT":return{id:e.id,trigger:{type:dt.SHORTCUT,shortcut:e.title},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:Kt(e.type)}}function L3(e=!0){return{trigger:{type:dt.SCHEDULED,schedule:Vs()},query:{searchModel:e?de.PRO:de.DEFAULT,prompt:"",sources:w_()},status:"ACTIVE",notificationSettings:gf}}function gge({symbol:e=""}={symbol:""}){return{trigger:{type:dt.PRICE_ALERT,alertType:Xr.TARGET_PRICE,price:0,currency:"usd",symbol:e},query:{prompt:"",searchModel:de.PRO,sources:w_()},status:"ACTIVE"}}function RU(e){if(e.trigger.type!==dt.SCHEDULED)return e;const t=fge(e.query.searchModel,e.trigger.schedule),n=VZe({expiryDate:e.trigger.expiryDate,schedule:e.trigger.schedule,defaultExpiryDate:t});return e.id?{...e,trigger:{...e.trigger,expiryDate:n}}:{...e,trigger:{...e.trigger,schedule:{...e.trigger.schedule},expiryDate:n,defaultExpiryDate:t}}}function w_(){return["web"]}function Iln({intl:e,type:t,symbol:n}){return`${n}  ${OYe(t,e)}`}function Rln({intl:e,type:t,upperBound:n,lowerBound:r,currency:s="USD"}){const{$t:a}=e,i=l=>l!=null&&l!==-1&&Math.abs(l)!==f8;switch(t){case"STOCK_PRICE_TARGET":{if(i(r))return a({defaultMessage:"Price below {price}",id:"a0pUAk88Od"},{price:r.toLocaleString(e.locale,{style:"currency",currency:s,trailingZeroDisplay:"stripIfInteger"})});if(i(n))return a({defaultMessage:"Price above {price}",id:"t+Mcn2lglF"},{price:n.toLocaleString(e.locale,{style:"currency",currency:s,trailingZeroDisplay:"stripIfInteger"})});break}case"STOCK_PRICE_MOVEMENT":{const l=i(r),c=i(n);if(l&&c)return a({defaultMessage:"Price moves {percentage}%+",id:"RevB4+v84e"},{percentage:Math.abs(n)});if(c)return a({defaultMessage:"Price rises {percentage}%+",id:"9reloFrZNr"},{percentage:n});if(l)return a({defaultMessage:"Price drops {percentage}%+",id:"RWgd7UywB3"},{percentage:Math.abs(r)});break}default:Kt(t)}return""}const KZe=async(e,t,n,r)=>await YZe({headers:{},reason:"Report Bug",bugText:e,url:t,email:n,category:r}),YZe=async({headers:e,reason:t,bugText:n,url:r,email:s,category:a})=>{try{const i=await ae.POST("/webhooks/slack-web-debugger/web",t,{body:{bug_text:n,url:r,email:s??"",category:a??""},headers:e,timeoutMs:1e4});return i.data?i.data:null}catch(i){return ne.error("Failed to make bug report request",i),null}},QZe=e=>{if(!e.includes("/sidecar/"))return e;const t=new URL(e);return t.searchParams.delete("erp"),t.pathname=t.pathname.replace("/sidecar",""),t.toString()},yge=20,zm="list_ask_threads",XZe=10,xge=async({paginationParams:e,timeoutMs:t,ascending:n=!1,reason:r})=>{const s=await ae.POST("/rest/thread/list_ask_threads",r,{timeoutMs:t,body:{limit:yge,ascending:n,...e}});if(s.error||!s.data)throw new Error(s.error?.detail?.toString()||"Failed to get user threads");return s.data},vge=async({thread_uuid:e,format:t,filename:n,reason:r})=>{const s=await ae.POST("/rest/thread/export",r,{body:{thread_uuid:e,format:t,filename:n},timeoutMs:Fe({productionMs:6e3,clientSideMs:1e4})});if(s.error)throw new Error(s.error.detail?.toString()||"Failed to export thread");return s.data},D3=async(e,t)=>{try{await ae.PUT("/rest/thread/{entry_uuid_or_slug}","remove-thread-expiry",{params:{path:{entry_uuid_or_slug:e}},body:{expired:!1}}),t?.()}catch{throw new Error("Failed to remove thread expiry")}},ZZe=({slugOrUUID:e})=>{const t=f.useCallback(async()=>{e&&await D3(e)},[e]);return f.useMemo(()=>({handleRemoveExpiry:t}),[t])},bge="rwTokenStorage",BQ=20,eb=e=>{const t=JSON.stringify(e);try{Oe.setItem(bge,t)}catch(n){ne.warn("Could not put rw token storage"),ne.warn(n)}},PU=()=>{let e=null;try{e=Oe.getItem(bge)}catch(t){ne.warn("Could not access local storage"),ne.warn(t)}if(!e)return eb({}),{};try{return JSON.parse(e)??{}}catch(t){ne.warn("Could not deserialize rw token storage"),ne.warn(t);const n={};return eb({}),n}},JZe=(e,t)=>{if(!e||!t)return;let n=PU(),r=Object.keys(n);if(r.length>=BQ){const s=r[Math.floor(Math.random()*r.length)];s&&delete n[s]}r=Object.keys(n),r.length>BQ+5&&(ne.warn("Too many rw tokens stored; resetting"),n={}),n[e]=t,eb(n)},eJe=e=>e?PU()[e]:void 0,_ge=e=>{const t=e.context_uuid;if(!t)return;const n=eJe(t);if(n)return n;const r=e?.read_write_token;if(r)return JZe(t,r),r},Pln=e=>{if(!e)return;const t=PU();delete t[e],eb(t)},Oln=()=>{eb({})},tJe=e=>e?.context_uuid??void 0,nJe=e=>e?.frontend_context_uuid??void 0,rJe=e=>e?.thread_title??"",sJe=e=>e?.query_str??void 0,aJe=e=>e?.search_focus??void 0,iJe=e=>e.sources?.sources??void 0,oJe=e=>e?.author_id??void 0,lJe=e=>e?.author_username??void 0,cJe=e=>e?.author_image??void 0,uJe=e=>{if(e.parent_info)return e.parent_info},dJe=e=>e?.mode??null,fJe=e=>e?.personalized??void 0,mJe=e=>e?.collection_info??void 0,pJe=e=>e?.bookmark_state??void 0,hJe=e=>e?.thread_access??void 0,gJe=e=>e?.thread_url_slug??void 0,yJe=e=>e?.updated_datetime??void 0,xJe=e=>e?.expiry_time??null,vJe=e=>e?.privacy_state??void 0;function tb(e,t){const n={};for(const r of e){const s=t(r);Object.prototype.hasOwnProperty.call(n,s)?n[s].push(r):Object.defineProperty(n,s,{value:[r],configurable:!0,enumerable:!0,writable:!0})}return n}const ql={web:"web",scholar:"scholar",social:"social",edgar:"edgar",org:"org",my_files:"my_files",crunchbase:"crunchbase",factset:"factset",google_drive:"google_drive",onedrive:"onedrive",sharepoint:"sharepoint",wiley:"wiley",dropbox:"dropbox",box:"box",notion:"notion",notion_mcp:"notion_mcp",outlook:"outlook",linear:"linear",linear_alt:"linear_alt",slack:"slack",github_mcp_direct:"github_mcp_direct",asana_mcp_direct:"asana_mcp_direct",asana_mcp_merge:"asana_mcp_merge",atlassian_mcp_direct:"atlassian_mcp_direct",slack_direct:"slack_direct",jira_mcp_merge:"jira_mcp_merge",confluence_mcp_merge:"confluence_mcp_merge",microsoft_teams_mcp_merge:"microsoft_teams_mcp_merge",wiley_mcp_cashmere:"wiley_mcp_cashmere",space:"space",gcal:"gcal"},bJe=Object.values(ql),_Je=["linear","linear_alt","slack","notion_mcp","github_mcp_direct","asana_mcp_direct","asana_mcp_merge","atlassian_mcp_direct","slack_direct","jira_mcp_merge","confluence_mcp_merge","microsoft_teams_mcp_merge","wiley_mcp_cashmere"],Jy=e=>bJe.includes(e),OE=e=>Array.isArray(e)?e.filter(Jy):[],wJe=e=>Array.isArray(e)?e.filter(Jy).filter(t=>_Je.includes(t)):[],wge=e=>e?.entity_group_type!=="CALENDAR_ACTION"&&!!e?.entities?.length,Cge=e=>{const t=!!e?.gauge_familiarity_card_block?.question,n=!!e?.multiple_choice_quiz_card_block?.questions?.length,r=!!e?.flash_card_section_block;return t||n||r};class vn{static hasAnswer(t,n){const r=!!(t.chunks&&t.chunks.length>0),s=!!(t.answer&&t.answer.length>0),a=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.chunks?.length||u.entity_list_block?.chunks?.length),i=!!t.structured_answer_blocks?.some(u=>Cge(u.inline_entity_block)),l=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.answer?.length||u.entity_list_block?.text?.length||wge(u.entity_group_block)),c=!!t.structured_answer_blocks?.some(u=>u.inline_entity_block?.media_block?.generated_media_items?.some(d=>d.status==="COMPLETED"))&&n;return r||s||a||l||c||i}static isPerplexityMessage(t){return t?.blocks!==void 0}static isPerplexityArticleSection(t){return t?.message!==void 0}static isArticleSection(t){return t?.article_info!==void 0}static mergePlaceBlocks(t){const n=t.filter(i=>!!i);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(i=>({review_summary:i.review_summary})))}static mergeMediaBlocks(t){const n=t.filter(s=>!!s);return n.length?{media_items:n.flatMap(s=>s?.media_items||[]),generated_media_items:n[n.length-1].generated_media_items||[],progress:n[n.length-1].progress}:void 0}static mergeShoppingBlocks(t){const n=t.filter(i=>!!i);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(i=>({review_summary:i.review_summary})))}static mergeEntityListItems(t){const n=tb(t,s=>s.index),r=[];return Object.values(n).forEach(s=>{const a=s[0];r.push({title:a.title,text:s.map(({text:i})=>i).join(""),chunks:s.flatMap(i=>i.chunks),chunk_starting_offset:0,index:a.index,awaiting_backfill:s.reduce((i,l)=>l.awaiting_backfill??i,!1),place_block:vn.mergePlaceBlocks(s.map(i=>i.place_block)),shopping_block:vn.mergeShoppingBlocks(s.map(i=>i.shopping_block))})}),r}static parseStructuredAnswerBlocks(t){if(!this.isPerplexityMessage(t)||!t.structured_answer_block_usages?.length)return null;const n=tb(t.blocks,s=>s.intended_usage),r=[];return t.structured_answer_block_usages.forEach(s=>{const a=n[s];if(!a)return;const{markdownBlocks:i,placeBlocks:l,mediaBlocks:c,shoppingPreviewBlocks:u,entityListBlocks:d,jobsPreviewBlocks:m,hotelsPreviewBlocks:p,placesPreviewBlocks:h,knowledgeCardsBlocks:g,calendarEventBlocks:y,entityGroupBlocks:x,entityGroupV2Blocks:v,assetsPreviewBlocks:b,assetsInlineBlocks:_,shoppingBlocks:w,proPerkOfferBlocks:C,placeholderBlocks:S,financeInlineBlocks:E,gaugeFamiliarityCardBlocks:M,multipleChoiceQuizCardBlocks:k,flashCardSectionBlocks:N}=a.reduce((P,L)=>(L.markdown_block?P.markdownBlocks.push(L.markdown_block):L.inline_entity_block?.place_block?P.placeBlocks.push(L.inline_entity_block.place_block):L.inline_entity_block?.media_block?P.mediaBlocks.push(L.inline_entity_block.media_block):L.inline_entity_block?.shopping_preview_block?P.shoppingPreviewBlocks.push(L.inline_entity_block.shopping_preview_block):L.entity_list_block?P.entityListBlocks.push(L.entity_list_block):L.inline_entity_block?.jobs_preview_block?P.jobsPreviewBlocks.push(L.inline_entity_block.jobs_preview_block):L.inline_entity_block?.hotels_preview_block?P.hotelsPreviewBlocks.push(L.inline_entity_block.hotels_preview_block):L.inline_entity_block?.places_preview_block?P.placesPreviewBlocks.push(L.inline_entity_block.places_preview_block):L.inline_entity_block?.knowledge_card_block?P.knowledgeCardsBlocks.push(L.inline_entity_block.knowledge_card_block):L.inline_entity_block?.calendar_event_block?P.calendarEventBlocks.push(L.inline_entity_block.calendar_event_block):L.entity_group_block?P.entityGroupBlocks.push(L.entity_group_block):L.entity_group_v2_block?P.entityGroupV2Blocks.push(L.entity_group_v2_block):L.inline_entity_block?.assets_preview_block?P.assetsPreviewBlocks.push(L.inline_entity_block.assets_preview_block):L.inline_entity_block?.assets_inline_block?P.assetsInlineBlocks.push(L.inline_entity_block.assets_inline_block):L.inline_entity_block?.shopping_block?P.shoppingBlocks.push(L.inline_entity_block?.shopping_block):L.pro_perk_offer_block?P.proPerkOfferBlocks.push(L.pro_perk_offer_block):L.inline_entity_block?.finance_inline_block?P.financeInlineBlocks.push(L.inline_entity_block.finance_inline_block):L.inline_entity_block?.placeholder_block?P.placeholderBlocks.push(L.inline_entity_block?.placeholder_block):L.inline_entity_block?.gauge_familiarity_card_block?P.gaugeFamiliarityCardBlocks.push(L.inline_entity_block.gauge_familiarity_card_block):L.inline_entity_block?.multiple_choice_quiz_card_block?P.multipleChoiceQuizCardBlocks.push(L.inline_entity_block.multiple_choice_quiz_card_block):L.inline_entity_block?.flash_card_section_block&&P.flashCardSectionBlocks.push(L.inline_entity_block.flash_card_section_block),P),{markdownBlocks:[],placeBlocks:[],mediaBlocks:[],shoppingPreviewBlocks:[],entityListBlocks:[],jobsPreviewBlocks:[],hotelsPreviewBlocks:[],placesPreviewBlocks:[],knowledgeCardsBlocks:[],calendarEventBlocks:[],entityGroupBlocks:[],entityGroupV2Blocks:[],assetsPreviewBlocks:[],assetsInlineBlocks:[],shoppingBlocks:[],proPerkOfferBlocks:[],placeholderBlocks:[],financeInlineBlocks:[],gaugeFamiliarityCardBlocks:[],multipleChoiceQuizCardBlocks:[],flashCardSectionBlocks:[]});if(i.length){const P=i[i.length-1];r.push({intended_usage:s,markdown_block:{answer:i.map(L=>L.answer).join(""),chunks:i.flatMap(L=>L.chunks),chunk_starting_offset:0,progress:P.progress,media_items:i.flatMap(L=>L.media_items||[]),inline_token_annotations:i.flatMap(L=>L.inline_token_annotations||[])}})}if(u.length&&r.push({intended_usage:s,inline_entity_block:{shopping_preview_block:u[u.length-1]}}),m.length&&r.push({intended_usage:s,inline_entity_block:{jobs_preview_block:m[m.length-1]}}),p.length&&r.push({intended_usage:s,inline_entity_block:{hotels_preview_block:p[p.length-1]}}),h.length&&r.push({intended_usage:s,inline_entity_block:{places_preview_block:h[h.length-1]}}),l.length&&r.push({intended_usage:s,inline_entity_block:{place_block:vn.mergePlaceBlocks(l)}}),c.length&&r.push({intended_usage:s,inline_entity_block:{media_block:vn.mergeMediaBlocks(c)}}),d.length&&r.push({intended_usage:s,entity_list_block:{text:d.map(({text:P})=>P).join(""),chunks:d.flatMap(P=>P.chunks),chunk_starting_offset:0,entities:vn.mergeEntityListItems(d.flatMap(P=>P.entities))}}),g.length&&r.push({intended_usage:s,inline_entity_block:{knowledge_card_block:g[g.length-1]}}),y.length&&r.push({intended_usage:s,inline_entity_block:{calendar_event_block:y[y.length-1]}}),x.length&&r.push({intended_usage:s,entity_group_block:{entities:x[x.length-1].entities,entity_group_type:x[x.length-1].entity_group_type}}),v.length){const P=v[v.length-1];r.push({intended_usage:s,entity_group_v2_block:P})}b.length&&r.push({intended_usage:s,inline_entity_block:{assets_preview_block:b[b.length-1]}}),_.length&&r.push({intended_usage:s,inline_entity_block:{assets_inline_block:_[_.length-1]}}),w.length&&r.push({intended_usage:s,inline_entity_block:{shopping_block:this.mergeShoppingBlocks(w)}}),C.length&&r.push({intended_usage:s,pro_perk_offer_block:C[C.length-1]}),E.length&&r.push({intended_usage:s,inline_entity_block:{finance_inline_block:E[E.length-1]}}),S.length&&r.push({intended_usage:s,inline_entity_block:{placeholder_block:S[S.length-1]}}),M.length&&r.push({intended_usage:s,inline_entity_block:{gauge_familiarity_card_block:M[M.length-1]}}),k.length&&r.push({intended_usage:s,inline_entity_block:{multiple_choice_quiz_card_block:k[k.length-1]}}),N.length&&r.push({intended_usage:s,inline_entity_block:{flash_card_section_block:N[N.length-1]}})}),r}static parseAskTextField(t){if(!this.isPerplexityMessage(t))return this.legacyParseBackendOutputStr(t.text);if(!t.blocks?.length)return null;const n={answer:""};n.structured_answer_blocks=vn.parseStructuredAnswerBlocks(t);const r=t.blocks?.filter(a=>a.intended_usage==="ask_text"&&a.markdown_block).map(a=>a.markdown_block);if(r.length>0){const a=r.flatMap(i=>i.chunks);n.chunks=a,n.answer=a.join("")}const s=t.blocks?.filter(a=>a.intended_usage==="web_results"&&a.web_result_block).flatMap(a=>a.web_result_block.web_results);return s.length>0&&(n.web_results=s),n}static legacyParseBackendOutputStr(t){let n=null;try{if(n=JSON.parse(t??""),Array.isArray(n)){const r=n[n.length-1];r.step_type=="FINAL"&&r?.content?.answer!=null&&(n=JSON.parse(r.content.answer))}}catch{return null}return n}static isStatusPending(t){return t.status?.toLowerCase()===Xn.PENDING.toLowerCase()}static isStatusBlocked(t){return t.status?.toLowerCase()===Xn.BLOCKED.toLowerCase()}static isStatusFailed(t){return t.status?.toLowerCase()===Xn.FAILED.toLowerCase()}static isStatusCompleted(t){return t.status?.toLowerCase()===Xn.COMPLETED.toLowerCase()}static isCopilotMode(t){return t.mode?.toLowerCase()===ug.COPILOT.toLowerCase()}static isArticleMode(t){return this.isPerplexityMessage(t)?t?.mode===ug.ARTICLE:this.isPerplexityArticleSection(t)?t?.message?.mode===ug.ARTICLE:t?.mode==="article"}static isSourceListType(t){return Array.isArray(t)&&t.every(n=>Object.values(ql).includes(n))}static hasUnspecifiedSelectionStatus(t){return t?.selection_status===el.SELECTION_STATUS_UNSPECIFIED}static hasMultipleSiblingEntries(t,n){return n?t.filter(s=>s.side_by_side_metadata?.sibling_uuid===n).length>1:!1}static extractClarifyingQuestion(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{if(r.intended_usage==="clarification_responses"&&r?.clarification_responses_block){const s=r.clarification_responses_block?.responses;if(s?.length>0&&s[0]){const a=s[0];a?.input_hint?.hint&&n.push(a.input_hint.hint)}}}),n[0]??null}static extractClarificationResponses(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{r.intended_usage==="pro_search_steps"&&r.plan_block?.steps&&r.plan_block.steps.forEach(s=>{s.clarifying_questions_output_content?.clarification&&n.push(s.clarifying_questions_output_content.clarification)})}),n}}var LE;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(LE||(LE={}));function CJe(e){return e>=LE.WRITER&&e<LE.INVITED_READER}const Sge="CLIENT_SEARCH_PLACEHOLDER",SJe=({rawQuery:e,fork:t,existingEntryUUID:n,existingUuid:r,collection:s,isRelatedQuery:a,newFrontendContextUUID:i,existingFrontendContextUUID:l,submitFromArticleOverride:c,isNavSuggestionsDisabled:u,isCopilot:d,newAttachments:m,firstResultFrontendContextUUID:p,isPersonalized:h,forceNew:g,finalSources:y,finalRecency:x,uuid:v,threadMetadataTitle:b,threadMetadataThreadUrlSlug:_,modelPreferenceSubmit:w,querySource:C,side_by_side_metadata:S})=>{const E=e.trim(),M=d?JSON.stringify([{step_type:"INITIAL_QUERY",content:{query:""},uuid:""}]):m.length>0?JSON.stringify({web_results:m.map(P=>({url:P,is_attachment:!0}))}):null,k=t?{title:c?.article_info?.title??b,url_slug:(c&&"thread_url_slug"in c?c.thread_url_slug:void 0)??_,mode:((c&&"mode"in c?c.mode:void 0)??p)?.toUpperCase()}:void 0,N=s&&CJe(s.user_permission)?s:void 0;return{parent_info:void 0,plan:void 0,summary:void 0,form:void 0,reasoning_plan:void 0,status:"PENDING",final:!1,query_str:E,query_source:C,backend_uuid:g?"":n??"",bookmark_state:s?"BOOKMARKED":"NOT_BOOKMARKED",context_uuid:"",frontend_context_uuid:l??i??"",uuid:r??v,frontend_uuid:r??v,...t?{parent_info:k}:{},author_username:void 0,author_image:void 0,search_focus:y.length===0?"writing":"internet",search_recency_filter:x??void 0,sources:{sources:y},num_sources_display:void 0,personalized:h,attachments:m,blocks:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},mode:d?"COPILOT":"CONCISE",text:M??void 0,collection_info:N,is_related_query_result:a??!1,related_queries:[],media_items:[],widget_data:[],widget_intents:[],knowledge_cards:[],sponsored_results:[],expect_sponsored_results:!1,related_query_items:[],sources_list:[],answer_modes:[],is_nav_suggestions_disabled:u,structured_answer_block_usages:[],display_model:w,model_preference:w,side_by_side_metadata:S}},OU="DEFAULT_SEARCH_PLACEHOLDER",EJe=(e={})=>{const t=e.uuid??e.frontend_uuid??Ir();return{status:"PENDING",parent_info:void 0,query_str:"",backend_uuid:OU,author_username:void 0,author_image:void 0,search_focus:"internet",display_model:"turbo",personalized:!1,attachments:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},text:void 0,collection_info:void 0,image_completions:[],is_related_query_result:!1,final:!1,sources:{sources:["web"]},should_index:!1,updated_datetime:new Date().toISOString(),thread_access:0,thread_url_slug:"",expiry_time:void 0,privacy_state:void 0,context_uuid:"",related_queries:[],media_items:[],widget_data:[],blocks:[],message_mode:"MESSAGE_MODE_UNSPECIFIED",widget_intents:[],knowledge_cards:[],sponsored_results:[],plan:void 0,reasoning_plan:void 0,summary:void 0,form:void 0,sources_list:[],related_query_items:[],answer_modes:[],structured_answer_block_usages:[],...e,frontend_context_uuid:e.frontend_context_uuid??Ir(),frontend_uuid:t,uuid:t,attachment_processing_progress:[]}};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var MJe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kJe=Object.prototype.hasOwnProperty;function _8(e,t){return kJe.call(e,t)}function w8(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var s in e)_8(e,s)&&r.push(s);return r}function Yi(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function C8(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Jf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Ege(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function S8(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(S8(e[t]))return!0}else if(typeof e=="object"){for(var r=w8(e),s=r.length,a=0;a<s;a++)if(S8(e[r[a]]))return!0}}return!1}function VQ(e,t){var n=[e];for(var r in t){var s=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof s<"u"&&n.push(r+": "+s)}return n.join(`
`)}var Mge=function(e){MJe(t,e);function t(n,r,s,a,i){var l=this.constructor,c=e.call(this,VQ(n,{name:r,index:s,operation:a,tree:i}))||this;return c.name=r,c.index=s,c.operation=a,c.tree=i,Object.setPrototypeOf(c,l.prototype),c.message=VQ(n,{name:r,index:s,operation:a,tree:i}),c}return t}(Error),Ur=Mge,TJe=Yi,qh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=DE(n,this.path);r&&(r=Yi(r));var s=_m(n,{op:"remove",path:this.from}).removed;return _m(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=DE(n,this.from);return _m(n,{op:"add",path:this.path,value:Yi(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:nb(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},NJe={add:function(e,t,n){return C8(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:qh.move,copy:qh.copy,test:qh.test,_get:qh._get};function DE(e,t){if(t=="")return e;var n={op:"_get",path:t};return _m(e,n),n.value}function _m(e,t,n,r,s,a){if(n===void 0&&(n=!1),r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):FE(t,0)),t.path===""){var i={newDocument:e};if(t.op==="add")return i.newDocument=t.value,i;if(t.op==="replace")return i.newDocument=t.value,i.removed=e,i;if(t.op==="move"||t.op==="copy")return i.newDocument=DE(e,t.from),t.op==="move"&&(i.removed=e),i;if(t.op==="test"){if(i.test=nb(e,t.value),i.test===!1)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i.newDocument=e,i}else{if(t.op==="remove")return i.removed=e,i.newDocument=null,i;if(t.op==="_get")return t.value=e,i;if(n)throw new Ur("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return i}}else{r||(e=Yi(e));var l=t.path||"",c=l.split("/"),u=e,d=1,m=c.length,p=void 0,h=void 0,g=void 0;for(typeof n=="function"?g=n:g=FE;;){if(h=c[d],h&&h.indexOf("~")!=-1&&(h=Ege(h)),s&&(h=="__proto__"||h=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[h]===void 0?p=c.slice(0,d).join("/"):d==m-1&&(p=t.path),p!==void 0&&g(t,0,e,p)),d++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!C8(h))throw new Ur("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);C8(h)&&(h=~~h)}if(d>=m){if(n&&t.op==="add"&&h>u.length)throw new Ur("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var i=NJe[t.op].call(t,u,h,e);if(i.test===!1)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}}else if(d>=m){var i=qh[t.op].call(t,u,h,e);if(i.test===!1)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}if(u=u[h],n&&d<m&&(!u||typeof u!="object"))throw new Ur("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function F3(e,t,n,r,s){if(r===void 0&&(r=!0),s===void 0&&(s=!0),n&&!Array.isArray(t))throw new Ur("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Yi(e));for(var a=new Array(t.length),i=0,l=t.length;i<l;i++)a[i]=_m(e,t[i],n,!0,s,i),e=a[i].newDocument;return a.newDocument=e,a}function jJe(e,t,n){var r=_m(e,t);if(r.test===!1)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function FE(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ur("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(qh[e.op]){if(typeof e.path!="string")throw new Ur("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ur('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ur("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ur("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&S8(e.value))throw new Ur("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,a=r.split("/").length;if(s!==a+1&&s!==a)throw new Ur("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ur("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var i={op:"_get",path:e.from,value:void 0},l=kge([i],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ur("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ur("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function kge(e,t,n){try{if(!Array.isArray(e))throw new Ur("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)F3(Yi(t),Yi(e),n||!0);else{n=n||FE;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(s){if(s instanceof Ur)return s;throw s}}function nb(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),s,a,i;if(n&&r){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!nb(e[s],t[s]))return!1;return!0}if(n!=r)return!1;var l=Object.keys(e);if(a=l.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!t.hasOwnProperty(l[s]))return!1;for(s=a;s--!==0;)if(i=l[s],!nb(e[i],t[i]))return!1;return!0}return e!==e&&t!==t}const AJe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ur,_areEquals:nb,applyOperation:_m,applyPatch:F3,applyReducer:jJe,deepClone:TJe,getValueByPointer:DE,validate:kge,validator:FE},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var LU=new WeakMap,IJe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),RJe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function PJe(e){return LU.get(e)}function OJe(e,t){return e.observers.get(t)}function LJe(e,t){e.observers.delete(t.callback)}function DJe(e,t){t.unobserve()}function FJe(e,t){var n=[],r,s=PJe(e);if(!s)s=new IJe(e),LU.set(e,s);else{var a=OJe(s,t);r=a&&a.observer}if(r)return r;if(r={},s.value=Yi(e),t){r.callback=t,r.next=null;var i=function(){E8(r)},l=function(){clearTimeout(r.next),r.next=setTimeout(i)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return r.patches=n,r.object=e,r.unobserve=function(){E8(r),clearTimeout(r.next),LJe(s,r),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},s.observers.set(t,new RJe(t,r)),r}function E8(e,t){t===void 0&&(t=!1);var n=LU.get(e.object);DU(n.value,e.object,e.patches,"",t),e.patches.length&&F3(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function DU(e,t,n,r,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=w8(t),i=w8(e),l=!1,c=i.length-1;c>=0;c--){var u=i[c],d=e[u];if(_8(t,u)&&!(t[u]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var m=t[u];typeof d=="object"&&d!=null&&typeof m=="object"&&m!=null&&Array.isArray(d)===Array.isArray(m)?DU(d,m,n,r+"/"+Jf(u),s):d!==m&&(s&&n.push({op:"test",path:r+"/"+Jf(u),value:Yi(d)}),n.push({op:"replace",path:r+"/"+Jf(u),value:Yi(m)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:r+"/"+Jf(u),value:Yi(d)}),n.push({op:"remove",path:r+"/"+Jf(u)}),l=!0):(s&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!l&&a.length==i.length))for(var c=0;c<a.length;c++){var u=a[c];!_8(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Jf(u),value:Yi(t[u])})}}}function UJe(e,t,n){n===void 0&&(n=!1);var r=[];return DU(e,t,r,"",n),r}const BJe=Object.freeze(Object.defineProperty({__proto__:null,compare:UJe,generate:E8,observe:FJe,unobserve:DJe},Symbol.toStringTag,{value:"Module"}));Object.assign({},AJe,BJe,{JsonPatchError:Mge,deepClone:Yi,escapePathComponent:Jf,unescapePathComponent:Ege});function VJe(e,t){const n=new Map(e.map(r=>[r.intended_usage,r]));for(const r of t)if(r.diff_block){const s=r.diff_block.field,a=n.get(r.intended_usage)?.[s]??{},i=F3(a,r.diff_block.patches,!1,!1).newDocument;n.set(r.intended_usage,{intended_usage:r.intended_usage,[s]:i})}else n.set(r.intended_usage,r);return Array.from(n.values())}let Tge=()=>({emit(e,...t){for(let n=this.events[e]||[],r=0,s=n.length;r<s;r++)n[r](...t)},events:{},on(e,t){return(this.events[e]||=[]).push(t),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}});const hs=Tge();function $Je(e,t){return e.reduce((n,r)=>r(n),t)}const WJe=e=>e&&iLe(e,t=>t!=null);function M8(e){return e?!e.resume_entry_uuid:!1}function HJe(e,t){const n={minuteCount:0,hourCount:0,minuteWindow:Math.floor(Date.now()/6e4),hourWindow:Math.floor(Date.now()/36e5)};return async(...r)=>{const s=Date.now(),a=Math.floor(s/(60*1e3)),i=Math.floor(s/(60*60*1e3));return a!==n.minuteWindow&&(n.minuteCount=0,n.minuteWindow=a),i!==n.hourWindow&&(n.hourCount=0,n.hourWindow=i),n.minuteCount>=t.perMinute?{allowed:!1}:n.hourCount>=t.perHour?{allowed:!1}:(n.minuteCount++,n.hourCount++,{allowed:!0,result:await e(...r)})}}const zJe=Symbol(),Nge=Symbol(),J0="a",jge="f",$Q="p",Age="c",Ige="t",Rge="h",x2="w",Pge="o",Oge="k";let GJe=(e,t)=>new Proxy(e,t);const k8=Object.getPrototypeOf,WQ=new WeakMap,qJe=e=>e&&(WQ.has(e)?WQ.get(e):k8(e)===Object.prototype||k8(e)===Array.prototype),HQ=e=>typeof e=="object"&&e!==null,KJe=e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(t=>!t.configurable&&!t.writable),YJe=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(n=>{n.configurable=!0}),Object.create(k8(e),t)},QJe=(e,t)=>{const n={[jge]:t};let r=!1;const s=(l,c)=>{if(!r){let u=n[J0].get(e);if(u||(u={},n[J0].set(e,u)),l===x2)u[x2]=!0;else{let d=u[l];d||(d=new Set,u[l]=d),d.add(c)}}},a=()=>{r=!0,n[J0].delete(e)},i={get(l,c){return c===Nge?e:(s(Oge,c),Dge(Reflect.get(l,c),n[J0],n[Age],n[Ige]))},has(l,c){return c===zJe?(a(),!0):(s(Rge,c),Reflect.has(l,c))},getOwnPropertyDescriptor(l,c){return s(Pge,c),Reflect.getOwnPropertyDescriptor(l,c)},ownKeys(l){return s(x2),Reflect.ownKeys(l)}};return t&&(i.set=i.deleteProperty=()=>!1),[i,n]},Lge=e=>e[Nge]||e,Dge=(e,t,n,r)=>{if(!qJe(e))return e;let s=r&&r.get(e);if(!s){const c=Lge(e);KJe(c)?s=[c,YJe(c)]:s=[c],r?.set(e,s)}const[a,i]=s;let l=n&&n.get(a);return(!l||l[1][jge]!==!!i)&&(l=QJe(a,!!i),l[1][$Q]=GJe(i||a,l[0]),n&&n.set(a,l)),l[1][J0]=t,l[1][Age]=n,l[1][Ige]=r,l[1][$Q]},XJe=(e,t)=>{const n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some((s,a)=>s!==r[a])},T8=(e,t,n,r,s=Object.is)=>{if(s(e,t))return!1;if(!HQ(e)||!HQ(t))return!0;const a=n.get(Lge(e));if(!a)return!0;if(r){if(r.get(e)===t)return!1;r.set(e,t)}let i=null;for(const l of a[Rge]||[])if(i=Reflect.has(e,l)!==Reflect.has(t,l),i)return i;if(a[x2]===!0){if(i=XJe(e,t),i)return i}else for(const l of a[Pge]||[]){const c=!!Reflect.getOwnPropertyDescriptor(e,l),u=!!Reflect.getOwnPropertyDescriptor(t,l);if(i=c!==u,i)return i}for(const l of a[Oge]||[])if(i=T8(e[l],t[l],n,r,s),i)return i;if(i===null)throw new Error("invalid used");return i},ZJe=e=>()=>{const[,n]=f.useReducer(u=>u+1,0),r=f.useMemo(()=>new WeakMap,[]),s=f.useRef(),a=f.useRef();f.useEffect(()=>{s.current!==a.current&&T8(s.current,a.current,r,new WeakMap)&&(s.current=a.current,n())});const i=f.useCallback(u=>(a.current=u,s.current&&s.current!==u&&!T8(s.current,u,r,new WeakMap)?s.current:(s.current=u,u)),[r]),l=e(i),c=f.useMemo(()=>new WeakMap,[]);return Dge(l,r,c)};function C_(e){const t=Yt(e,null),{useSelector:n,useStore:r,useTrackedState:s}=Fge(t,e);return{Context:t,useSelector:n,useStore:r,useTrackedState:s}}function Fge(e,t){const n=()=>{const a=R.useContext(e);if(!a)throw new Error(`This hook must be used within ${t}.Provider`);return a},r=a=>n()(a),s=ZJe(r);return{useSelector:r,useStore:n,useTrackedState:s}}const ex=(e,t)=>{const n=Yt(e,null),r=l=>{const[c]=R.useState(()=>l.initialValue?t(l?.initialValue):t(void 0));return o.jsx(n.Provider,{value:c,children:l.children})},{useSelector:s,useStore:a,useTrackedState:i}=Fge(n,e);return{useSelector:s,useStore:a,useTrackedState:i,Context:n,Provider:r}},JJe="2.18",N8=Object.freeze([]);function pg(e,t){return t?e.streams[t]:void 0}function FU(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===t&&e.activeStreams.includes(a.id.description))return a}}function eet(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.threadId===t&&e.activeStreams.includes(a.id.description))return a}}const Uge=50,tet=100,zQ=1e3;function pj(e,t,n){const r=$Je(e.middlewares,n);if(!r)return{newState:e};const s=pg(e,t);if(!s||!e.activeStreams.includes(t))return{newState:e};const a=r.context_uuid,i=r.backend_uuid,l=r.uuid,u=!!!(s.entryId&&s.isReconnect&&e.erroredStreams[s.entryId])&&(!s.threadId||!s.entryId);if(i===OU||i===Sge)return{newState:{streams:{...e.streams,[t]:{...s,placeholderChunk:r}}}};if(r.status===Xn.PENDING&&r.blocks?.length===0||r.status===Xn.RESUMING)return{newState:{...j8(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:{...s,threadId:r.context_uuid,entryId:i,extraEntryId:l,placeholderChunk:r}}},ingested:r};if(!a||!i)return{newState:e};let d=s;return u&&(d={...s,threadId:a,entryId:i,extraEntryId:l}),{newState:{...j8(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:d}},ingested:r}}function j8(e,t,{isFirstMessage:n,placeholderChunk:r,streamId:s}){const a=t.context_uuid,i=t.backend_uuid,l=Array.from(e.threads),c={...e.entries};if(l.length>=tet){const m=l.shift();if(m)for(const p of m.entryIds)delete c[p]}const u=l.findIndex(m=>m.id===a),d=l[u];if(d?d.entryIds.includes(i)||(l[u]={...d,entryIds:[...d.entryIds,i]}):l.push({id:a,entryIds:[i]}),t.status===Xn.COMPLETED)c[i]=t;else if(t.blocks){let m=c[i];m&&m.uuid!==t.uuid?m=r:m||(m=r);const p=m?.frontend_context_uuid??t.frontend_context_uuid??s,h=m?.frontend_uuid??t.frontend_uuid??s,g=m?.query_str??t.query_str,y=m?.connector_auth_info!=null&&!("connector_auth_info"in t)&&!n,x={...m??{},...t,frontend_context_uuid:p,frontend_uuid:h,query_str:g,...y&&{connector_auth_info:void 0},blocks:VJe(n?N8:m?.blocks??N8,t.blocks)};c[i]=x}return{threads:l,entries:c}}function net(e,t,n){ne.error("Error in reading stream",n);const r=pg(e,t);if(!r)return e;const s=r?.entryId;if(!s)return e;const a={...e.entries[s],status:Xn.FAILED},{promise:i,abortController:l,...c}=r;return{erroredStreams:{...e.erroredStreams,[s]:{...c,code:n instanceof dP?n.code:void 0}},entries:{...e.entries,[s]:a}}}const GQ=Object.freeze([WJe]);function ret(e,t){const n=pg(e,t);if(!n)return;const r=e.threads.find(s=>s.id===n.threadId);hs.emit("completed",{stream:n,thread:(r?.entryIds.map(s=>e.entries[s])??N8).filter(s=>s!=null),message:n.entryId?e.entries[n.entryId]:void 0})}const set=(e,t)=>({threads:[],entries:{},activeStreams:[],erroredStreams:{},middlewares:GQ,streamTimers:{},streams:{},actions:{abortStream:n=>{e(r=>{let s=r.activeStreams;const a=pg(r,n);if(a){try{a.abortController?.abort("Forced abort")}catch(i){ne.error("Failed to abort stream",i)}finally{s=s.filter(i=>i!==n)}return{activeStreams:s,streams:{...r.streams,[n]:{...a,promise:null,abortController:null}}}}return r},void 0,"abortStream")},getEntryById:n=>t().entries[n],createStream:n=>t().actions.createBackwardsCompatibleStream(n,{reason:"create-stream",timer:rc(void 0,{nowFromTimeOrigin:performance.now()})}).id,retryStream:n=>{const r=t().entries[n];if(!r)return;const s=t().erroredStreams[n];if(!s)return;const a=s.placeholderChunk?.query_str;if(a){if(e(i=>{const{entries:l,threads:c}=i,{[n]:u,...d}=l,m=Array.from(c),p=c.findIndex(h=>h.entryIds.includes(n));return p===-1?i:(m.splice(p,1,{id:m[p].id,entryIds:m[p].entryIds}),{threads:m,entries:d})}),!M8(s.params))throw new Error("Stream params are not SubmitParams so cannot retry");return t().actions.createBackwardsCompatibleStream({query_str:a,params:{...s.params,existing_entry_uuid:n,query_source:"retry",frontend_context_uuid:r.frontend_context_uuid}},{placeholderChunk:s.placeholderChunk,timer:rc(void 0,{nowFromTimeOrigin:performance.now()}),reason:"retry-stream"})}},reconnectStream:n=>{const r=FU(t(),n);if(r&&r.promise&&r.abortController&&!r.abortController.signal.aborted)return r.id;const s=t().entries[n],a=s?.cursor,i=t().actions.createBackwardsCompatibleStream({query_str:"",params:{resume_entry_uuid:n,cursor:a}},{isReconnect:!0,timer:rc(void 0,{nowFromTimeOrigin:performance.now()}),reason:"reconnect-stream"});return e(l=>pj(l,i.id.description,{...s,status:Xn.PENDING}).newState,void 0,"ingestPlaceholderChunk"),i.id},createBackwardsCompatibleStream:(n,{isReconnect:r,placeholderChunk:s,onFinalResponse:a,onFirstMessageReceived:i,timer:l,reason:c})=>{const u=Array.from(t().activeStreams),d={...t().streams};if(u.length>=Uge)try{const v=u.shift();v&&(d[v]?.abortController?.abort(),d[v]={...d[v],promise:null,abortController:null})}catch(v){ne.error("Failed to abort stream",v)}const m=n.params?.frontend_uuid??Ir(),p=new AbortController,h={id:{description:m},promise:Promise.resolve(),abortController:p,isReconnect:r,entryId:n.params?.resume_entry_uuid,params:n.params,timer:l},g={message:async v=>{const b=pg(t(),m);let _=!1;b?.threadId||(_=!0,i?.(v)),e(w=>{const{newState:C,ingested:S}=pj(w,m,v);if(S?.status===Xn.COMPLETED&&a?.(S),S?.status===Xn.FAILED&&b&&b.entryId){const{promise:E,abortController:M,...k}=b;return{...C,erroredStreams:{...w.erroredStreams,[b.entryId]:k}}}return C},void 0,"ingest"),b&&hs.emit("progress",{stream:b,message:t().entries[v.backend_uuid]??v,isFirstMessage:_})}},y=n.params?.query_source==="default_search",x={[Gr]:m};return ne.info("Starting stream",{request_id:m}),h.promise=(r?ae.SSE("/rest/sse/perplexity_ask/reconnect/{resume_entry_uuid}",c,{path:{resume_entry_uuid:n.params?.resume_entry_uuid??""},params:{cursor:n.params?.cursor},signal:p.signal,handlers:g,headers:x}):ae.SSE("/rest/sse/perplexity_ask",c,{params:{...n,params:{...n.params,version:JJe}},signal:p.signal,handlers:g,metrics:{omnisearch:y},timer:l,headers:x})).then(()=>ret(t(),m),v=>{const b=t(),_=pg(b,m);_&&(e(w=>net(w,m,v),void 0,"handleStreamError"),hs.emit("error",{stream:_,error:v}))}).finally(()=>{e(({activeStreams:v,streams:b})=>({streams:{...b,[m]:{...b[m],promise:null,abortController:null}},activeStreams:v.filter(_=>_!==m)}),void 0,"cleanupBackwardsCompatibleStream")}),u.push(m),e({activeStreams:u,streams:{...d,[m]:h}},void 0,"createBackwardsCompatibleStream"),hs.emit("created",{stream:h,query:n.query_str,params:n.params}),h.abortController?.signal.addEventListener("abort",()=>{hs.emit("aborted",{stream:h})}),s&&e(v=>pj(v,m,s).newState,void 0,"ingestPlaceholderChunk"),h},setMiddlewares:n=>{e(()=>({middlewares:[...GQ,...n]}))}}}),UU=ex("StreamStateContext",()=>Po()(oLe(mue(set),{name:"StreamStore"}))),Gm=UU.useSelector,Bge=UU.useStore,aet=()=>{const e=Bge(),t=f.useMemo(()=>HJe(e.getState().actions.reconnectStream,{perMinute:20,perHour:120}),[e]);return f.useEffect(()=>{function n(){const i=e.getState(),l=new Set(i.activeStreams),c=new Set(Object.values(i.streams).filter(u=>l.has(u.id.description)).map(u=>u.entryId));Object.values(i.entries).forEach(u=>{u?.reconnectable&&l.size<Uge&&!c.has(u?.backend_uuid)&&t(u.backend_uuid)})}n();let r=setInterval(n,zQ);function s(){clearInterval(r),n(),r=setInterval(n,zQ)}function a(){clearInterval(r)}return window.addEventListener("online",s,!0),window.addEventListener("offline",a,!0),()=>{clearInterval(r),window.removeEventListener("online",s,!0),window.removeEventListener("offline",a,!0)}},[t,e]),null},Vge=R.memo(({children:e})=>o.jsxs(UU.Provider,{children:[o.jsx(aet,{}),e]}));Vge.displayName="StreamStateProvider";const Lln=()=>Gm(e=>e.actions.getEntryById),iet=()=>Gm(e=>e.actions.createBackwardsCompatibleStream),BU=()=>Gm(e=>e.actions.reconnectStream),oet=()=>Gm(e=>e.actions.retryStream),cet=()=>{const e=Gm(t=>t.entries);return f.useCallback(t=>t?e[t]?.status===Xn.COMPLETED:!1,[e])},$ge=e=>{const t=Gm(s=>s.activeStreams),n=Gm(s=>s.streams),r=Object.values(n).find(s=>s.id.description===e);return!!(r&&t.includes(r?.id.description))},ki=()=>Bge(),Wge=()=>{const e=ki();return f.useCallback(n=>{for(const r of n){if(e.getState().entries[r.backend_uuid])continue;const a=!r.reconnectable;e.setState(i=>j8(i,{...r,status:a?r.status===Xn.BLOCKED?Xn.BLOCKED:Xn.COMPLETED:Xn.PENDING,final:a,final_sse_message:a},{streamId:r.frontend_uuid??Ir()}),void 0,"ingestInitialEntries")}},[e])},Hge=()=>{const e=ki();return f.useCallback((t,n)=>{t&&e.setState(r=>{const s=r.entries[t],a=FU(r,t);if(a&&a.promise&&a.abortController&&!a.abortController.signal.aborted&&ne.error("Attempting to mutate entries while stream is active"),!s||!n)return r;const i=n(s);return i?{...r,entries:{...r.entries,[t]:i}}:r},void 0,"mutateEntry")},[e])},uet=()=>{const e=ki();return f.useCallback((t,n,{terminateStream:r=!0}={})=>{t&&e.setState(s=>{if(!t)return s;eet(s,t)&&r&&ne.error("Attempting to mutate entries while stream is active");const i=s.threads.findIndex(p=>p.id===t);if(i===-1)return s;const l=s.threads[i];if(!l)return s;const u=l.entryIds.map(p=>s.entries[p]).filter(p=>p!=null),d=n?.(u);if(!d)return s;const m=Array.from(s.threads);return m.splice(i,1,{...l,entryIds:d.map(p=>p.backend_uuid)}),{...s,entries:{...s.entries,...d.reduce((p,h)=>(p[h.backend_uuid]=h,p),{})},threads:m}},void 0,"mutateEntries")},[e])};function Dln(e){const t=ki();return FU(t.getState(),e)}function det(e){const t=ki(),n=Object.values(t.getState().erroredStreams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===e)return a}}const zge=R.memo(({middlewares:e})=>{const t=ki();return f.useLayoutEffect(()=>{t.getState().actions.setMiddlewares(e)},[e,t]),null});zge.displayName="MiddlewareRegistry";function Gge(){const e=ki();return f.useCallback(t=>e.getState().streams[t]?.timer,[e])}function qge(){const e=ki();return f.useCallback(()=>e.getState().activeStreams.length>0,[e])}const v2=e=>e?{author_id:oJe(e),author_image:cJe(e),author_username:lJe(e),bookmarkState:pJe(e),collection:mJe(e),contextUUID:tJe(e),expiry_time:xJe(e)??void 0,first_query:sJe(e),focus:aJe(e),frontendContextUUID:nJe(e),mode:dJe(e)??void 0,parent_info:uJe(e)??void 0,personalized:fJe(e)??void 0,privacy_state:vJe(e)??void 0,rwToken:_ge({backend_uuid:e.backend_uuid,read_write_token:e.read_write_token,context_uuid:e.context_uuid}),sources:iJe(e)??void 0,text_completed:!1,thread_access:hJe(e)??void 0,thread_url_slug:gJe(e),title:rJe(e),updated_datetime:yJe(e)}:npe,A8=e=>({forkCount:e?.fork_count??0,likeCount:e?.like_count??0,viewCount:e?.view_count??0,userLikes:e?.user_likes??!1}),Kge={fork_count:0,like_count:0,view_count:0,user_likes:!1};function i0({entries:e,threads:t,streams:n},r,s){const a=r?n[r]:void 0;if(a&&a.threadId&&(s=a.threadId),s){const i=t.find(l=>l.id===s);if(i){const l=i.entryIds.map(c=>e[c]).filter(c=>c!=null);return a&&!a.entryId&&a.placeholderChunk&&l.push(a.placeholderChunk),{results:l,currentStreamId:r,currentThreadId:s}}}return{results:a?.placeholderChunk?[a.placeholderChunk]:[],currentStreamId:r,currentThreadId:s}}const fet=({streamStore:e})=>{const t=Po()((r,s)=>({results:[],resultsLength:0,firstResult:void 0,lastResult:void 0,inFlight:!1,inFlightLatest:!1,inFlightEntry:void 0,isReadOnly:!1,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},actions:{setResults:a=>{const i=a[0],l=A8(i?.social_info??Kge),c={inFlight:a.some(u=>vn.isStatusPending(u)),inFlightLatest:a.length>0&&vn.isStatusPending(a[a.length-1]),inFlightEntry:a.find(u=>vn.isStatusPending(u))};r({results:a,firstResult:i,lastResult:a[a.length-1],inFlight:c.inFlight,inFlightLatest:c.inFlightLatest,inFlightEntry:c.inFlightEntry,socialStats:l,resultsLength:a.length},void 0)},setCurrentStreamId:a=>{const i=s(),l=i0(e.getState(),a,i.currentThreadId);i.actions.setResults(l.results),r({currentStreamId:l.currentStreamId,currentThreadId:l.currentThreadId},void 0)},clearCurrentStreamId:()=>{r({currentStreamId:void 0},void 0);const a=s(),i=i0(e.getState(),void 0,a.currentThreadId);a.actions.setResults(i.results),r({currentStreamId:i.currentStreamId,currentThreadId:i.currentThreadId},void 0)},setCurrentThreadId:a=>{r({currentThreadId:a},void 0);const i=s(),l=i.currentStreamId,c=Object.values(e.getState().streams).find(d=>d.threadId===a);c?c.id.description!==l&&i.actions.setCurrentStreamId(c.id.description):i.actions.clearCurrentStreamId();const u=i0(e.getState(),s().currentStreamId,a);i.actions.setResults(u.results),r({currentStreamId:u.currentStreamId,currentThreadId:u.currentThreadId},void 0)},clearCurrentThreadId:()=>{r({currentThreadId:void 0},void 0);const a=s(),i=i0(e.getState(),a.currentStreamId,void 0);a.actions.setResults(i.results),r({currentStreamId:i.currentStreamId,currentThreadId:i.currentThreadId},void 0)}}})),n=e.subscribe(({entries:r,threads:s,streams:a})=>i0({entries:r,threads:s,streams:a},t.getState().currentStreamId,t.getState().currentThreadId),r=>{t.getState().actions.setResults(r.results),t.setState({currentStreamId:r.currentStreamId,currentThreadId:r.currentThreadId},void 0)});return{store:t,clearSubscriptions:()=>{n()}}},{Context:met,useStore:pet,useSelector:het,useTrackedState:get}=C_("ResultsContext"),yet=het,Ht=get,xet=({children:e})=>{const t=ki(),[{store:n,clearSubscriptions:r}]=f.useState(()=>fet({streamStore:t}));return f.useEffect(()=>r,[r]),o.jsx(met.Provider,{value:n,children:e})},vet=()=>{const{firstResult:e}=Ht();return f.useMemo(()=>v2(e),[e])};function bet(e){return e.results.find(t=>vn.isStatusPending(t))}const _et=e=>We({queryKey:["navigationResults",e],queryFn:()=>Promise.resolve({}),enabled:!1}),U3=()=>{const e=pet(),t=uet();return f.useCallback(n=>{const r=e.getState().currentThreadId;t(r,n)},[t,e])};function Oo(){const{firstResult:{backend_uuid:e,context_uuid:t,read_write_token:n}={}}=Ht();return f.useMemo(()=>_ge({context_uuid:t,read_write_token:n}),[t,n,e])}const xn=["list_user_collections",{}],du="list_collection_threads",sd="__temp__";async function wet({contextUUID:e,updatedAccess:t,rwToken:n,callback:r,reason:s}){try{const i=await(await ae.POST("/rest/thread/update_thread_access",s,{body:{context_uuid:e??"",updated_access:t,read_write_token:n??""}}))?.data;r?.(i?.access)}catch(a){ne.error(a),r?.(a)}}var o0={},qQ;function Cet(){if(qQ)return o0;qQ=1,Object.defineProperty(o0,"__esModule",{value:!0}),o0.parse=i,o0.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function i(p,h){const g=new a,y=p.length;if(y<2)return g;const x=h?.decode||d;let v=0;do{const b=p.indexOf("=",v);if(b===-1)break;const _=p.indexOf(";",v),w=_===-1?y:_;if(b>w){v=p.lastIndexOf(";",b-1)+1;continue}const C=l(p,v,b),S=c(p,b,C),E=p.slice(C,S);if(g[E]===void 0){let M=l(p,b+1,w),k=c(p,w,M);const N=x(p.slice(M,k));g[E]=N}v=w+1}while(v<y);return g}function l(p,h,g){do{const y=p.charCodeAt(h);if(y!==32&&y!==9)return h}while(++h<g);return g}function c(p,h,g){for(;h>g;){const y=p.charCodeAt(--h);if(y!==32&&y!==9)return h+1}return g}function u(p,h,g){const y=g?.encode||encodeURIComponent;if(!e.test(p))throw new TypeError(`argument name is invalid: ${p}`);const x=y(h);if(!t.test(x))throw new TypeError(`argument val is invalid: ${h}`);let v=p+"="+x;if(!g)return v;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);v+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);v+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);v+="; Path="+g.path}if(g.expires){if(!m(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);v+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(v+="; HttpOnly"),g.secure&&(v+="; Secure"),g.partitioned&&(v+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return v}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return s.call(p)==="[object Date]"}return o0}Cet();var hj={};const Eet=(e,t)=>{try{let n=new URL("https://www.perplexity.ai");return typeof window>"u"?t&&hj.NEXTAUTH_UNSAFE_TRUST_HOST_HEADERS?n=new URL(`https://${t}`):hj.NEXTAUTH_URL&&(n=new URL(hj.NEXTAUTH_URL)):n=new URL(window.location.href),new URL(e,n).hostname===n.hostname}catch(n){return ne.warn(n),!1}},Met=({redirect:e,hostname:t})=>{const n=typeof e=="string"?e:e?.[0];return!n||typeof n!="string"?"/":Eet(n,t)?n:"/"},VU="pplx.chosen-locale",UE="pplx.is-incognito",Yge="pplx.is-discover-interest-box-dismissed",Qge="pplx.is-enterprise-ad-dismissed",I8="pplx.la-status",ket="pplx.visitor-id",Xge="pplx.mweb-splash-page-dismissed",Zge="pplx.is-autosuggest-disabled",Jge="pplx.homepage-widgets-disabled",eye="pplx.source-selection-v3",tye="pplx.sports-ios-notification-cta",KQ="pplx.prefers-metric",nye="pplx.welcome-back-gate-impressions",rye="pplx.share-gate-impressions",sye="pplx.sidebar-connectors-ad-dismissed",aye="pplx.is-student-referral-banner-dismissed",iye="pplx.is-student-space-upsell-dismissed",oye="pplx.student-space-upsell-impressions",lye="pplx.default-search-session",cye="pplx.utm-source",uye="pplx.pt",dye="pplx.personal-search-badge-seen",fye="pplx.tasks-settings-seen",R8="pplx.search-mode",mye="pplx.search-models-v4",pye="pplx.max-assistant-mode-enabled",Kr=400,Tet=7;function gj(...e){B3("[email_signin_flow] ",...e)}function B3(...e){const t=new Date().toISOString();ne.log(`[${t}] `,...e)}function hye(...e){const t=new Date().toISOString();ne.warn(`[${t}] `,...e)}const Net=e=>{rn(VU,e,{expires:Kr})},jet=()=>Fn(VU),Aet=()=>{Pm(VU)},Iet=e=>{rn(UE,String(e),{})},Ret=(e,t)=>{rn(Xge,String(e),{expires:t})},Pet=e=>{rn(Yge,String(e),{expires:Kr})},Oet=e=>{rn(I8,e,{})},Let=e=>{rn(Qge,String(e),{expires:Kr})},Det=e=>{rn(Zge,String(e),{expires:Kr})},Fet=e=>{rn(Jge,String(e),{expires:Kr})},Uet=e=>{rn(nye,String(e),{expires:Kr})},Bet=e=>{rn(rye,String(e),{expires:Kr})},Vet=e=>{rn(tye,String(e),{expires:Kr})},yj=(e,t)=>{const n=`${eye}-${t}`;rn(n,JSON.stringify(e),{expires:Tet})},$et=e=>{const t=`${eye}-${e}`,n=Fn(t);return n?JSON.parse(n):null},Wet=()=>!(Fn(w1)??!0),S_=()=>Fn(ket)??null,Het=e=>{rn(sye,String(e),{expires:Kr})},zet=()=>Fn("pplx.has-discovered-space-mentions")==="true",Get=()=>{rn("pplx.has-discovered-space-mentions","true",{expires:Kr})},qet=e=>{rn(aye,String(e),{expires:4})},Ket=e=>{rn(iye,String(e),{expires:Kr})},Yet=e=>{rn(oye,String(e),{expires:Kr})},gye=()=>cue().queryCount>30,$U=()=>{const e=Fn(dye);if(!e)return{sidebar:!1,settingsSidebar:!1,personalize:!1};try{return JSON.parse(e)}catch{return{sidebar:!1,settingsSidebar:!1,personalize:!1}}},Qet=(e,t)=>{const r={...$U(),[e]:t};rn(dye,JSON.stringify(r),{expires:Kr})},Xet=()=>Fn(fye)==="true",Zet=e=>{rn(fye,String(e),{expires:Kr})},Jet=e=>{rn(lye,e)},ett=()=>Fn(lye),ttt=e=>{rn(cye,e)},ntt=()=>Fn(cye),rtt=()=>Fn(uye),stt=e=>{rn(uye,e)};var att={};const Fln=async({reason:e})=>{const{data:t,error:n}=await ae.GET("/rest/enterprise/previous-subscription",e,{timeoutMs:Fe({productionMs:2e3})});if(n)throw new Ie("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t},itt=async({source:e,locale:t,headers:n,reason:r})=>{try{const{data:s,error:a}=await ae.POST("/rest/enterprise/customer-portal",r,{body:{origin:e,locale:t},timeoutMs:7500,headers:{...n,"Content-Type":"application/json"}});if(a)throw new Ie("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});if(s.status!=="success")throw new Ie("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});return s.url}catch(s){return ne.error(s),null}},ott=async({interval:e,subscriptionTier:t,origin:n,locale:r,reason:s})=>{const a=m3(),i=S_();try{const{data:l,error:c}=await ae.POST("/rest/enterprise/checkout-session",s,{body:{referral_code:null,discount_code:null,origin:n,tier:e,locale:r,visitor_id:i,subscription_tier:t},timeoutMs:3500,headers:{...a?{"Screen-Dimensions":a}:{}}});if(c)throw new Ie("API_CLIENTS_ERROR",{cause:c,details:{reason:s}});return l}catch(l){return ne.error(l),null}},ltt=async({interval:e,subscriptionTier:t,origin:n,locale:r,collectionMethod:s,billingAddress:a,reason:i})=>{const l=m3();try{const{data:c,error:u}=await ae.POST("/rest/enterprise/subscription",i,{body:{collection_method:s,origin:n,locale:r,subscription_interval:e,subscription_tier:t,billing_address:a},timeoutMs:1e4,headers:{...l?{"Screen-Dimensions":l}:{}}});if(u)throw new Ie("API_CLIENTS_ERROR",{cause:u,details:{reason:i}});return c}catch(c){return ne.error(c),null}};var YQ;(function(e){e.ON_PLATFORM="on_platform",e.OFF_PLATFORM="off_platform"})(YQ||(YQ={}));const V3=async({headers:e,reason:t})=>{const n={organization:void 0,org_user:void 0,is_in_organization:!1,pending_invitation:null};try{const{data:r,error:s}=await ae.GET("/rest/enterprise/user/organization",t,{headers:e,timeoutMs:Fe({productionMs:2e3}),numRetries:1});if(s)throw new Ie("API_CLIENTS_ERROR",{cause:s,details:{reason:t}});return r.status!=="success",r}catch(r){return ne.error(r),n}},yye=async({email:e,headers:t,useNextAuthService:n,reason:r})=>{if(!e)throw new Error("No email");const s=e.split("@"),a=s.length>=2?s[s.length-1]:null;if(!a)throw new Error(`No domain extracted from ${e}`);return ctt({domain:a,headers:t,useNextAuthService:n,reason:r})},ctt=async({domain:e,headers:t,useNextAuthService:n,reason:r})=>{let s;try{if(n){const i=`/rest/nextauth/organization/domain/${e}`,l=att.PPL_NEXTAUTH_SERVER_URL;s=await Er({headers:t,urlPath:i,timeoutMs:3e3,numRetries:1,baseUrlOverride:l,reason:r})}else{const i=`/rest/enterprise/organization/domain/${e}`;s=await Er({headers:t,urlPath:i,timeoutMs:3e3,numRetries:1,reason:r})}const a=await s.json();if(a.status!=="success")throw new Error("Failed to get organization from domain");return a?.organization??null}catch(a){return ne.error("Failed to get organization from domain",a),null}},Uln=async({headers:e,query:t,reason:n})=>{try{const r=t?.["user-limit"]??2e4,s=t?.["user-offset"]??0,a=t?.["invite-limit"]??2e4,i=t?.["invite-offset"]??0,{data:l,error:c}=await ae.GET("/rest/enterprise/user/organization/users",n,{params:{query:{"user-limit":r,"user-offset":s,"invite-limit":a,"invite-offset":i}},headers:e,timeoutMs:Fe({productionMs:2e3,clientSideMs:1e4}),numRetries:1});if(c)throw new Ie("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});if(l.status!=="success")throw new Ie("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});return{userList:l?.user_list??[],hasNextUserPage:l?.has_next_user_page??!1,totalUsers:l?.total_users??0,inviteList:l?.invite_list??[],hasNextInvitePage:l?.has_next_invite_page??!1,totalInvites:l?.total_invites??0}}catch(r){return ne.error("Failed to get organization users",r),null}},utt=20,dtt=1,Bln=async({page:e=dtt,limit:t=utt,emailFilter:n,reason:r,headers:s})=>{const a=await ae.GET("/rest/enterprise/user/organization/members",r,{params:{query:{page:e,limit:t,"email-filter":n??null}},timeoutMs:Fe({productionMs:5e3}),headers:s});if(a.error)throw a.error;return a.data},xye=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ae.GET("/rest/enterprise/organization/subscription/refresh",t,{headers:e,timeoutMs:4e3});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return{subscriptionStatus:n?.subscription_status??null}}catch(n){return ne.error(n),null}},Vln=async({reason:e})=>{try{const{data:t,error:n}=await ae.GET("/rest/enterprise/user/organization/seat-info",e,{timeoutMs:2e3});if(n)throw new Ie("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t}catch(t){return ne.error(t),null}};async function $ln({orgUuid:e,headers:t,reason:n,prefersDark:r}){const s=await ae.GET("/rest/enterprise/organization/{org_uuid}/insights/embed-url",n,{params:{path:{org_uuid:e},query:{prefersDark:r}},headers:t,timeoutMs:Fe({productionMs:5e3}),numRetries:1});if(s.error){ne.error("Failed to fetch Omni insights embed URL",{url:`/rest/enterprise/organization/${e}/insights/embed-url`,error:s.error,status:s.response.status,statusText:s.response.statusText});return}return s.data}const Wln=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ae.GET("/rest/enterprise/organization/premium-secure-eligibility",t,{headers:e,timeoutMs:Fe({productionMs:2e3}),numRetries:1});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ne.error(n),null}},Hln=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ae.POST("/rest/enterprise/organization/premium-secure-billing-update",t,{headers:{...e,"Content-Type":"application/json"},timeoutMs:Fe({productionMs:2e3}),numRetries:1});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ne.error(n),null}},zln=async({headers:e,reason:t})=>{try{const n=await ae.GET("/rest/enterprise/organization/subscription-info",t,{headers:e,timeoutMs:Fe({productionMs:2e3}),numRetries:1});if(n.error)throw n.error;return n.data}catch(n){return ne.error("Failed to get org subscription info",n),null}},vye=async({uuid:e,success:t,reason:n})=>{try{if((await ae.POST("/rest/sse/perplexity_connector_auth_response",n,{body:{result:{tool_uuid:e,success:t}},backOffTime:100,numRetries:1,headers:{"Content-Type":"application/json"}})).data?.status!=="success")throw new Error("Failed to post perplexity connector auth response");return!0}catch(r){return ne.error("Failed to post perplexity connector auth response",r),!1}},Gln=e=>["get_prices",{subscription_tier:e}],$3=()=>["get_user_settings",{}],qln=()=>["get_user_site_instructions",{}],P8=()=>["get_user_profile",{}],ftt=()=>["get_user_promotions",{}],mtt=()=>["get_government_origin",{}],ptt=e=>["get_special_profile",{profile_name:e}],htt=()=>["get_homepage_upsells",{}],gtt=()=>["get_ntp_upsells",{}],Kln=e=>["get_related_pages",{uuid:e}],Zc=(e="you")=>["list_feed",{topic:e}],bye=()=>["discover_topics",{}],tx=()=>["userOrgData",{}],WU=e=>["get_collection",{collection_slug:e.slice(-22)}],Yln=()=>["shoppingOrders",{}],BE=()=>["userTryOnPhoto",{}],Lf=()=>["shoppingTryOnBackgroundGeneration"],xj=e=>["productTryOn",{productImageUrl:e}],VE="getOrganizationUsers",Qln=e=>e?[VE,{query:e}]:[VE],Xln=e=>e?[VE,"members",e]:[VE,"members"],ytt=e=>["get_thread_by_uuid",{uuid:e}],xtt=e=>["get_article_by_uuid",{uuid:e}],Zln=e=>["get_article_by_slug",{slug:e}],vj=()=>["customer_shopping_info",{}],HU=e=>["articleResults",{frontend_context_uuid:e}],QQ=e=>["article-slug",e],vtt=(e,t=!1)=>[t?"list_file_directory_infinite":"list_file_directory",e.file_repository_type,e.owner_id],W3=(e,t,n,r=0,s,a=!1)=>[...vtt({file_repository_type:e,owner_id:t},a),n,...a?[]:[r],s],_ye="connector-files",wye="connector-files-infinite",Cye=(e,t=!1)=>[t?wye:_ye,e],btt=e=>["get_sharepoint_sites_infinite",e??{}],Jln=()=>["get_filters",{}],zU=e=>e?["memories",e]:["memories"],ecn=(e={})=>["hotelBookings",e],tcn=e=>["pro_perks_codes",e],ncn=()=>["pro_perks"],rcn=()=>["customer_billing_info",{}],scn=()=>["travel-tile-data"],GU=(e,t)=>["file_exists",e,...t?[t]:[]],NC=e=>["download-image-url",...e?[e]:[]],acn=()=>["notifications-preferences"],kh=e=>["memory-feedback",e],Th=e=>["entry-feedback",e],qU=e=>["user-task",e],b2=e=>["user-tasks",...e?[e]:[]],_tt=()=>["academic-tile-data"],wtt=()=>["academic-primer-queries"],Ctt=()=>["check-edu-institution"],ev=()=>["list_spaces_mentions"],Stt=()=>["upgrade-subscription-preview"],Ett=()=>["task_shortcuts_mentions"],icn=e=>["task_shortcuts_copy",e],Mtt=e=>["task_shortcuts_paste",e],yd=()=>["app-notifications"],ktt=()=>[...yd(),"unread-count"],ocn=()=>["braintree-subscription-details"],Sye="get_repository_upload_states",Ttt=e=>[Sye,e],lcn=()=>["get_seat_info"],Eye="space-file-errors",Ntt=e=>[Eye,e],jtt={orgUser:void 0,organization:void 0,isEnterprise:!1,pendingInvitation:null,refetch:Pn,isLoading:!1,isSuccess:!1};function kn({shouldRefetchOnMount:e=!0,reason:t}){const n=lt(),{data:r,refetch:s,fetchStatus:a,isSuccess:i}=We({enabled:n,queryKey:tx(),queryFn:()=>V3({reason:t}),placeholderData:jtt,refetchOnMount:e});return f.useMemo(()=>({orgUser:r?.org_user,isAdmin:r?.org_user?.role==="ADMIN",organization:r?.organization,isEnterprise:r?.is_in_organization??!1,pendingInvitation:r?.pending_invitation??null,refetch:s,isLoading:a==="fetching",isSuccess:i}),[r?.is_in_organization,r?.org_user,r?.organization,r?.pending_invitation,a,i,s])}function H3({shouldRefetchOnMount:e=!0,reason:t}){const n=lt(),{data:r,isFetching:s}=We({enabled:n,queryKey:tx(),queryFn:()=>V3({reason:t}),refetchOnMount:e});return f.useMemo(()=>({isEnterprise:r?.is_in_organization??!1,isFetching:s}),[r?.is_in_organization,s])}function Att({reason:e}){const t=lt(),n=f.useRef(void 0),{data:r,status:s}=We({enabled:t,queryKey:tx(),queryFn:()=>V3({reason:e})}),a=f.useMemo(()=>s==="success"&&r?.organization?.uuid?(n.current=r.organization.uuid,r.organization.uuid):n.current??void 0,[r,s]);return f.useMemo(()=>({uuid:a}),[a])}const Mye=({currentAccessLevel:e,onClick:t,isCollection:n,isPage:r,spaceIsOrgPinned:s=!1,addOrgPinnedSpace:a,deleteOrgPinnedSpace:i,reason:l,hideLabels:c=!1,isCollectionOwner:u=!1})=>{const{$t:d}=Z(),m=Z(),{device:{isIOS:p,isAndroid:h}}=Lt(),{isEnterprise:g,organization:y}=kn({reason:l}),{firstResult:{collection_info:x,sources:{sources:v}={}}={}}=Ht(),b=n?y?.settings?.public_collection_sharing_allowed??!0:r?y?.settings?.public_page_sharing_allowed??!0:y?.settings?.public_thread_sharing_allowed??!0,_=v?.includes(ql.factset),w=f.useMemo(()=>n&&u?[{label:m.formatMessage({defaultMessage:"Share via link",id:"oJFaPCNcIw"}),text:m.formatMessage({defaultMessage:"Link share",id:"5CBpesC8V9"}),onClick:()=>i?.(),active:!s},{label:m.formatMessage({defaultMessage:"Pinned for everyone in org",id:"BCLJqQMHbj"}),text:m.formatMessage({defaultMessage:"Pinned",id:"fWZYP5U4xZ"}),onClick:()=>a?.(),active:s}]:void 0,[a,i,m,n,u,s]),C=f.useMemo(()=>[{label:c?void 0:"",text:d({defaultMessage:"Owner Only",id:"RUPRkBML7X"}),icon:Og,show:!1,accessLevel:Ct.OWNER_ONLY},{label:c?void 0:d({defaultMessage:"Only the author can view",id:"ZKx/MMPXAk"}),text:d(n?{defaultMessage:"Only invited members",id:"mm5vL8ueCo"}:{defaultMessage:"Private",id:"viXE3205/2"}),icon:Og,show:!r,onClick:()=>t(Ct.PRIVATE_READ),active:e===Ct.PRIVATE_READ,accessLevel:Ct.PRIVATE_READ,testId:"access-level-private"},{label:c?void 0:d({defaultMessage:"Anyone in your Space can view",id:"8i8H9TisQU"}),text:d({defaultMessage:"Space",id:"0ah2udCSKF"}),icon:yi,onClick:()=>t(Ct.COLLECTION_READ),active:e===Ct.COLLECTION_READ,show:!n&&!r&&!!x?.uuid,accessLevel:Ct.COLLECTION_READ,testId:"access-level-space"},{label:c?void 0:d({defaultMessage:"Anyone in your organization can view",id:"T2yBpbP3mu"}),text:d({defaultMessage:"Anyone in my org with the link",id:"ah50gEdYbM"}),icon:io,onClick:()=>t(Ct.ORG_READ),active:e===Ct.ORG_READ,show:g&&(!r||b),accessLevel:Ct.ORG_READ,testId:"access-level-org",subMenu:w},{label:c?void 0:d({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),text:d({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),icon:p?By:h?Ok:Cv,onClick:()=>t(Ct.PUBLIC_READ),active:e===Ct.PUBLIC_READ,show:b&&!_,accessLevel:Ct.PUBLIC_READ,testId:"access-level-public"}],[d,x?.uuid,e,_,c,h,n,g,p,r,t,b,w]),S=C.find(E=>E.accessLevel===e)||null;return f.useMemo(()=>({accessLevelMenuItems:C,selectedAccessMenuItem:S}),[C,S])},ccn=e=>e?[Ct.ORG_READ,Ct.PUBLIC_READ,Ct.PUBLIC_PUBLISHED].includes(e):!1,Itt=e=>e?[Ct.OWNER_ONLY,Ct.PRIVATE_READ].includes(e):!0,kye=e=>e?[Ct.PUBLIC_READ,Ct.PUBLIC_PUBLISHED,Ct.ORG_READ,Ct.COLLECTION_READ].includes(e):!1,Rtt=e=>e?[Ct.PUBLIC_READ,Ct.PUBLIC_PUBLISHED].includes(e):!1,Ptt=e=>{switch(e){case Ct.PUBLIC_PUBLISHED:case Ct.PUBLIC_READ:return Cv;case Ct.COLLECTION_READ:return yi;case Ct.ORG_READ:return io;case Ct.PRIVATE_READ:case Ct.OWNER_ONLY:return Og;default:return null}},XQ=e=>{switch(e){case Ct.PUBLIC_READ:case Ct.PUBLIC_PUBLISHED:return"public";case Ct.ORG_READ:return"organization";case Ct.COLLECTION_READ:return"collection";case Ct.PRIVATE_READ:case Ct.OWNER_ONLY:return"private";default:return"private"}};function KU({threadAccess:e,contextUUID:t,rwToken:n,collectionSlug:r,reason:s}){const{trackEvent:a}=je(),i=lt(),l=xt(),c=U3(),u=kye(e),d=f.useCallback((h,g)=>{!t||!n||!i||e===h||wet({contextUUID:t,updatedAccess:h,rwToken:n,reason:s,callback:y=>{if(y===h){if(c(x=>{if(x)return x.map(v=>({...v,thread_access:y}))}),e&&a("thread privacy changed",{oldPrivacy:XQ(e),newPrivacy:XQ(y),contextUUID:t}),r){const x=[du,{collection_slug:r.slice(-22)}];l.invalidateQueries({queryKey:x})}g?.(y)}}})},[t,n,e,i,c,a,r,l,s]),m=f.useCallback(h=>{!i||u||(a("click share thread to space"),d(Ct.COLLECTION_READ,h))},[i,u,d,a]),p=f.useCallback(h=>{!i||!u||(a("click make thread private"),d(Ct.PRIVATE_READ,h))},[i,u,d,a]);return f.useMemo(()=>({isShareable:u,currentAccess:e,onShareThreadToSpace:m,onMakeThreadPrivate:p,handleAccessChange:d}),[u,d,p,m,e])}function rb(){return rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rb.apply(null,arguments)}function Tye(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ott=f.useLayoutEffect,Ltt=function(t){var n=R.useRef(t);return Ott(function(){n.current=t}),n},ZQ=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Dtt=function(t,n){var r=R.useRef();return R.useCallback(function(s){t.current=s,r.current&&ZQ(r.current,null),r.current=n,n&&ZQ(n,s)},[n])},JQ={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Ftt=function(t){Object.keys(JQ).forEach(function(n){t.style.setProperty(n,JQ[n],"important")})},eX=Ftt,ka=null,tX=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Utt(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ka||(ka=document.createElement("textarea"),ka.setAttribute("tabindex","-1"),ka.setAttribute("aria-hidden","true"),eX(ka)),ka.parentNode===null&&document.body.appendChild(ka);var s=e.paddingSize,a=e.borderSize,i=e.sizingStyle,l=i.boxSizing;Object.keys(i).forEach(function(p){var h=p;ka.style[h]=i[h]}),eX(ka),ka.value=t;var c=tX(ka,e);ka.value=t,c=tX(ka,e),ka.value="x";var u=ka.scrollHeight-s,d=u*n;l==="border-box"&&(d=d+s+a),c=Math.max(d,c);var m=u*r;return l==="border-box"&&(m=m+s+a),c=Math.min(m,c),[c,u]}var nX=function(){},Btt=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},Vtt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],$tt=!!document.documentElement.currentStyle,Wtt=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Btt(Vtt,n),s=r.boxSizing;if(s==="")return null;$tt&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:i}},Htt=Wtt;function YU(e,t,n){var r=Ltt(n);f.useLayoutEffect(function(){var s=function(i){return r.current(i)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var ztt=function(t,n){YU(document.body,"reset",function(r){t.current.form===r.target&&n(r)})},Gtt=function(t){YU(window,"resize",t)},qtt=function(t){YU(document.fonts,"loadingdone",t)},Ktt=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Ytt=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,a=t.minRows,i=t.onChange,l=i===void 0?nX:i,c=t.onHeightChange,u=c===void 0?nX:c,d=Tye(t,Ktt),m=d.value!==void 0,p=f.useRef(null),h=Dtt(p,n),g=f.useRef(0),y=f.useRef(),x=function(){var _=p.current,w=r&&y.current?y.current:Htt(_);if(w){y.current=w;var C=Utt(w,_.value||_.placeholder||"x",a,s),S=C[0],E=C[1];g.current!==S&&(g.current=S,_.style.setProperty("height",S+"px","important"),u(S,{rowHeight:E}))}},v=function(_){m||x(),l(_)};return f.useLayoutEffect(x),ztt(p,function(){if(!m){var b=p.current,_=b.value;requestAnimationFrame(function(){_!==b.value&&x()})}}),Gtt(x),qtt(x),f.createElement("textarea",rb({},d,{onChange:v,ref:h}))},Nye=f.forwardRef(Ytt);const jye=R.memo(({text:e})=>o.jsx(F,{variant:"tiny",children:o.jsx("span",{className:"text-caution",children:e})}));jye.displayName="FormError";const z3=R.memo(({label:e,subtitle:t,errorText:n,isOptional:r=!1,withMargin:s=!0,optionalLabel:a="optional",testId:i})=>e||n||t?o.jsxs("div",{className:V({"mb-sm":s}),"data-test-id":i,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[(e||t)&&o.jsx("label",{htmlFor:e,children:o.jsx("div",{className:"gap-y-xs flex flex-col",children:e&&o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(F,{variant:"smallBold",className:"select-none",children:e}),r&&o.jsx(F,{variant:"small",color:"light",children:`(${a})`})]})})}),n&&o.jsx(jye,{text:n})]}),t&&o.jsx(F,{variant:"small",color:"light",children:t})]}):null);z3.displayName="FormItemHeader";function wp(e){const t=f.useRef(void 0);return f.useEffect(()=>{t.current=e},[e]),t.current}class da{static isEnterKey(t){return t.code==="Enter"||t.key==="Enter"||t.keyCode===13}static isEnterKeyWithoutShift(t){return this.isEnterKey(t)&&!t.shiftKey}static isArrowDown(t){return t.key==="ArrowDown"}static isArrowUp(t){return t.key==="ArrowUp"}static isEscapeKey(t){return t.key==="Escape"}static isTabKey(t){return t.key==="Tab"}static isOnlySlashKey(t){return t.key==="/"&&!t.metaKey&&!t.ctrlKey&&!t.altKey}static isCtrlOrCmdJ(t){return(t.metaKey||t.ctrlKey)&&t.key==="j"}}const sb=(e,t)=>{if(da.isEnterKeyWithoutShift(e)){if(t.isComposing||e.keyCode===229){e.preventDefault();return}if(t.isMobileUserAgent||t.allowEnterNewlines)return;e.preventDefault()}t.onKeyDown?.(e)},QU=e=>{e(!0)},XU=e=>{setTimeout(()=>{e(!1)},0)};var wm;(function(e){e.INLINE="inline",e.LABEL="label"})(wm||(wm={}));const Qtt=({onClear:e})=>o.jsx(Te,{icon:It,pill:!0,onClick:e,size:Qt.small}),Xtt=["email","tel"],Wr=R.memo(({type:e,className:t,wrapperClassName:n,value:r,name:s,maxLength:a,errorText:i,errorPlacement:l=wm.INLINE,disabled:c=!1,required:u=!1,autoFocus:d=!1,placeholder:m="",rightItems:p=fe,onChange:h,onClear:g,onBlur:y,onFocus:x,onPaste:v,onKeyDown:b,isLoading:_,inlineEditBlock:w,label:C,subtitle:S,isOptional:E,isMobileUserAgent:M,labelMargin:k=!0,testId:N,variant:P,pill:L=!0,disable1pass:O,ClearIcon:A=Qtt,enterKeyHint:j,size:T,ref:I,colorVariant:U="default",min:B,max:D,spellCheck:W})=>{const z=wp(c),$=f.useRef(null),[X,q]=f.useState(!1),[Y,G]=f.useState(!1),J=f.useRef(X);J.current=X,f.useEffect(()=>{!M&&d&&$.current?.focus()},[M,$,d]),f.useEffect(()=>{z!==c&&!c&&!M&&d&&setTimeout(()=>{$.current?.focus()},200)});const K=f.useMemo(()=>V({"border-r mr-sm pr-xs border-subtler":p.length!=0}),[p.length]),te=f.useMemo(()=>{const Ee=(()=>{switch(U){case"default":return"bg-base dark:bg-subtler";case"subtle":return"bg-subtle";default:Kt(U)}})(),Re=V("w-full outline-none focus:outline-none focus:ring-subtler font-sans flex items-center","text-foreground caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",Ee,"border border-subtler  focus:ring-1 placeholder-quieter","duration-200 transition-all",{"ring-subtler ring-1":X,"rounded-t-[32px] rounded-b-[32px]":L,"rounded-lg":!L},t),Ae=V({"py-xs px-sm text-xs placeholder:text-xs":T==="xs","py-sm px-sm text-sm placeholder:text-sm":T==="sm","py-lg px-xl text-lg placeholder:text-base":T==="lg","pl-[40px]":e==="search","!font-mono md:text-base":P==="monospace","!text-3xl !placeholder:text-3xl !font-medium":P==="page-title","py-sm md:text-sm px-md placeholder:text-sm":!T&&!P}),st=V({"pr-xs":p.length===0&&T==="xs","pr-sm":p.length===0&&T==="sm","pr-md":p.length===0&&!T,"pr-lg":p.length===0&&T==="lg","pr-[49px] md:pr-[59px]":p.length===1,"pr-[128px] md:pr-[138px]":p.length===2});return V(Re,Ae,st)},[X,L,t,T,e,P,p.length,U]),re=!!i,se=!re&&!!a&&!!r&&r.length>a,me=f.useMemo(()=>e==="search"?o.jsx("div",{className:"absolute left-3 flex items-center rounded-l-lg",children:o.jsx(F,{color:"light",children:o.jsx(le,{icon:Hs})})}):null,[e]),oe=f.useMemo(()=>{const Ee=l===wm.INLINE&&re;return o.jsxs("div",{className:V("right-sm gap-sm absolute flex items-center rounded-full"),children:[_?o.jsx(F,{color:"light",className:"mr-xs",children:o.jsx(Zr,{})}):null,Ee&&o.jsx(H,{className:"mr-sm",children:o.jsx(F,{color:"red",variant:"tiny",children:i})}),se&&o.jsx(H,{className:"mr-sm",children:a&&r&&o.jsx(F,{color:"red",variant:"tiny",children:a-r.length})}),g&&o.jsx("div",{className:K,children:o.jsx(A,{onClear:g,inputValue:r})}),p.map((Re,Ae)=>o.jsx(pe,{...Re.buttonProps,size:Re.buttonProps.size,disabled:Re.buttonProps.disabled||re||se,pill:!0},Ae))]})},[l,re,_,i,se,a,r,g,K,A,p]),ge=f.useCallback(()=>{if($.current){const Ee=$.current.value.length;$.current.focus();try{$.current.setSelectionRange(Ee,Ee)}catch{}}},[]),xe=f.useCallback(Ee=>{x?.(Ee.nativeEvent),q(!0)},[x]),ye=f.useCallback(Ee=>{y?.(Ee.nativeEvent),q(!1)},[y]);f.useImperativeHandle(I,()=>{const Ee=$.current;return Ee.focusAtEnd=ge,Ee.isFocused=()=>J.current,Ee.inLine=()=>!0,Ee.append=Re=>{$.current&&($.current.value+=Re)},Ee.scrollToEnd=()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},Ee.trim=()=>{$.current&&($.current.value=$.current.value.trim())},Ee.element=()=>$.current,Ee},[ge]),f.useEffect(()=>{d&&!M&&ge()},[d,ge,M]);const _e=f.useCallback(Ee=>{h?.(Ee.target.value)},[h]),be=f.useCallback(Ee=>{sb(Ee.nativeEvent,{isMobileUserAgent:M,isComposing:Y,onKeyDown:b})},[b,M,Y]),Ne=l===wm.LABEL?i:void 0;return o.jsxs("div",{className:n,children:[o.jsx(z3,{label:C,subtitle:S,isOptional:E,errorText:Ne,withMargin:k}),o.jsx("div",{className:"rounded-full",children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("input",{type:e,ref:$,autoFocus:d,placeholder:m,disabled:c,value:r,required:u,name:s??C,onChange:_e,onKeyDown:be,onCompositionStart:()=>QU(G),onCompositionEnd:()=>XU(G),onBlur:ye,onFocus:xe,onPaste:v,className:te,autoComplete:Xtt.includes(e??"")?e:"off","data-test-id":N,"data-1p-ignore":O,enterKeyHint:j,min:B,max:D,spellCheck:W,maxLength:a}),me,oe]})}),w&&o.jsx("div",{className:"mt-sm flex justify-end",children:w})]})});Wr.displayName="Input";function ZU(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var G3="Switch",[Ztt,ucn]=Mi(G3),[Jtt,ent]=Ztt(G3),Aye=f.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...m}=e,[p,h]=f.useState(null),g=Hn(t,_=>h(_)),y=f.useRef(!1),x=p?d||!!p.closest("form"):!0,[v,b]=Cl({prop:s,defaultProp:a??!1,onChange:u,caller:G3});return o.jsxs(Jtt,{scope:n,checked:v,disabled:l,children:[o.jsx(mn.button,{type:"button",role:"switch","aria-checked":v,"aria-required":i,"data-state":Oye(v),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onClick:Wt(e.onClick,_=>{b(w=>!w),x&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),x&&o.jsx(Pye,{control:p,bubbles:!y.current,name:r,value:c,checked:v,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Aye.displayName=G3;var Iye="SwitchThumb",Rye=f.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=ent(Iye,n);return o.jsx(mn.span,{"data-state":Oye(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});Rye.displayName=Iye;var tnt="SwitchBubbleInput",Pye=f.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=f.useRef(null),l=Hn(i,a),c=ZU(n),u=i3(t);return f.useEffect(()=>{const d=i.current;if(!d)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const g=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(g)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Pye.displayName=tnt;function Oye(e){return e?"checked":"unchecked"}var nnt=Aye,rnt=Rye;const Ji=f.memo(({active:e=!1,disabled:t,id:n,text:r,testId:s,onChange:a,size:i="default",switchProps:l,ref:c,...u})=>{const d=V("rounded-full relative bg-base dark:bg-inverse dark:text-foreground",i==="default"?"size-4":"size-2.5","before:content-[''] before:duration-150 dark:before:shadow-md before:absolute before:inset-0 before:rounded-full before:bg-base before:dark:bg-white",{"before:opacity-20":t}),m=V("flex rounded-full duration-150 shadow-inset-xs",i==="default"?"w-9  p-three":"w-5 h-3.5 p-0.5","data-[state=checked]:justify-end","data-[state=checked]:bg-super dark:data-[state=checked]:bg-super/85","data-[state=unchecked]:bg-inverse/45 dark:data-[state=unchecked]:bg-inverse/20",{"opacity-50":t});return o.jsxs("div",{className:V("group/switch gap-sm flex cursor-default items-center",{"cursor-pointer":!t}),"data-testid":s,ref:c,...u,children:[o.jsx(nnt,{asChild:!0,checked:e,onCheckedChange:t?void 0:a,id:n,disabled:t,className:"group/switch gap-sm flex items-center","data-testid":s,style:{WebkitTapHighlightColor:"transparent"},...l,children:o.jsx(ve.button,{className:m,layout:!0,layoutRoot:!0,children:o.jsx(rnt,{asChild:!0,children:o.jsx(ve.div,{className:d,layout:"position",transition:{layout:{type:"spring",duration:.2,bounce:.3}}})})})}),r&&o.jsx(F,{variant:"smallBold",className:V("mr-sm whitespace-nowrap duration-150",{"cursor-pointer":!t},{"group-hover/switch:text-foreground":!e&&!t}),htmlFor:n,as:"label",color:e?"super":"light",children:r})]})});Ji.displayName="Switch";const snt=({wrapperClassName:e,variant:t="default",size:n="default",errorText:r,className:s,value:a,maxLength:i,errorMessage:l,disabled:c=!1,hasShadow:u=!1,autoFocus:d=!1,placeholder:m="",rightItems:p=fe,onChange:h,onClear:g,onClick:y,onBlur:x,onFocus:v,onKeyDown:b,onPaste:_,isLoading:w,inlineEditBlock:C,label:S,subtitle:E,isOptional:M,minRows:k,isMobileUserAgent:N,allowEnterNewlines:P=!1,testId:L,textAreaClassname:O,ref:A})=>{const j=wp(c),T=f.useRef(null),[I,U]=f.useState(!1),[B,D]=f.useState(!1),W=f.useRef(I);W.current=I,f.useEffect(()=>{!N&&d&&T.current?.focus()},[N,T,d]),f.useEffect(()=>{j!==c&&!c&&!N&&d&&setTimeout(()=>{T.current?.focus()},200)});const z=f.useMemo(()=>V({"border-r mr-sm pr-xs border-subtler":p.length!=0}),[p.length]),$=V("overflow-auto max-h-[50vh] outline-none w-full flex items-center","text-foreground font-sans resize-none","bg-transparent placeholder-quieter","caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",O),X=f.useMemo(()=>{const _e=(()=>{switch(t){case"subtle":return"bg-subtle";case"default":return"bg-base dark:bg-subtler";default:Kt(t)}})(),be=V("w-full focus:ring-subtler flex items-center",_e,"border border-subtler  focus:ring-1 rounded-md","duration-200 transition-all",{"ring-subtler ring-1":I,"shadow-sm":u},s),Ne=V({"py-sm text-sm px-md":n==="default","text-base p-md pb-xl":n==="large"}),Ee=V({"pr-md":p.length===0});return V(be,Ne,Ee)},[I,u,s,n,p.length,t]),q=l!==void 0,Y=!q&&!!i&&!!a&&a.length>i,G=f.useMemo(()=>o.jsxs("div",{className:"right-sm gap-sm mb-xs pb-xs absolute bottom-0 flex items-center rounded-full",children:[w?o.jsx(F,{color:"light",children:o.jsx(le,{icon:fLe,className:"aspect-square animate-spin"})}):null,q&&o.jsx(H,{className:"mr-sm",children:o.jsx(F,{color:"red",variant:"tiny",children:l})}),Y&&o.jsx(H,{className:"mr-sm",children:i&&a&&o.jsx(F,{color:"red",variant:"tiny",children:i-a.length})}),g!==void o.jsx("div",{className:z,children:o.jsx(Te,{icon:It,pill:!0,onClick:g,size:Qt.small})}),p.map((_e,be)=>_e.type=="toggleButton"?o.jsx(Ji,{..._e.buttonProps,disabled:_e.buttonProps.disableOverride?!1:_e.buttonProps.disabled||q||Y},be):o.jsx(pe,{..._e.buttonProps,size:Qt.small,disabled:_e.buttonProps.disabled||q||Y,pill:!0},be))]}),[l,w,i,g,p,a,z,q,Y]),J=f.useCallback(()=>{if(T.current){const _e=T.current.value.length;T.current.focus(),T.current.setSelectionRange(_e,_e)}},[]),K=f.useCallback(_e=>{if(!T?.current)return!0;const be=T.current,{selectionStart:Ne,selectionEnd:Ee,value:Re}=be;if(Ne!==Ee)return!1;const Ae=document.createElement("div"),st=window.getComputedStyle(be);Ae.style.position="absolute",Ae.style.visibility="hidden",Ae.style.whiteSpace=st.whiteSpace,Ae.style.wordWrap=st.wordWrap,Ae.style.font=st.font,Ae.style.padding=st.padding,Ae.style.border=st.border,Ae.style.width=be.offsetWidth+"px",Ae.style.lineHeight=st.lineHeight,document.body.appendChild(Ae);try{const it=parseInt(st.lineHeight)||24,Se=Re.substring(0,Ne);Ae.textContent=Se;const ue=Ae.offsetHeight;return _e==="first"?ue<=it:(Ae.textContent=Re,Ae.offsetHeight-ue<it)}finally{document.body.removeChild(Ae)}},[]),te=f.useCallback(_e=>{v?.(_e.nativeEvent),U(!0)},[v]),re=f.useCallback(_e=>{x?.(_e.nativeEvent),U(!1)},[x]),se=f.useCallback(_e=>{y?.(_e.nativeEvent)},[y]),me=f.useCallback(_e=>{h?.(_e.target.value)},[h]),oe=f.useCallback(_e=>{sb(_e.nativeEvent,{isMobileUserAgent:N,isComposing:B,allowEnterNewlines:P,onKeyDown:b})},[b,B,N,P]),ge=f.useCallback(()=>QU(D),[D]),xe=f.useCallback(()=>XU(D),[D]),ye=f.useCallback(_e=>{_?.(_e.nativeEvent)},[_]);return f.useImperativeHandle(A,()=>{const _e=T.current;return _e.focusAtEnd=J,_e.inLine=K,_e.isFocused=()=>W.current,_e.append=be=>{T.current&&(T.current.value+=be)},_e.scrollToEnd=()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},_e.trim=()=>{T.current&&(T.current.value=T.current.value.trim())},_e},[J,K]),f.useEffect(()=>{d&&!N&&J()},[d,J,N]),o.jsxs("div",{"data-test-id":L,children:[o.jsx(z3,{label:S,subtitle:E,isOptional:M,errorText:r}),o.jsx("div",{className:V("rounded-3xl",e),children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("div",{className:X,children:o.jsx(Nye,{ref:T,autoFocus:d,placeholder:m,disabled:c,minRows:k,value:a,onClick:se,onChange:me,name:S,onKeyDown:oe,onBlur:re,onCompositionStart:ge,onCompositionEnd:xe,onFocus:te,onPaste:ye,className:$,autoComplete:"off","data-testid":L})}),o.jsx("div",{className:"absolute bottom-0 m-px flex justify-between rounded-b-md px-[6px]",style:{width:"calc(100% - 2px)"},children:G})]})}),C&&o.jsx("div",{className:"mt-sm flex justify-end",children:C})]})},qa=R.memo(snt),ant=new Set(["super","textColor","max","orange"]),int=new Set(["red"]),ont=e=>ant.has(e)?"defaultInverted":int.has(e)?"white":e==="maxBorder"?"max":e==="superBorder"?"super":"default",Lye=R.memo(({text:e,variant:t="super",boxProps:n,textProps:r})=>{const s=ont(t);return o.jsx(H,{variant:t,...n,className:V("px-xs rounded-badge -mt-px box-border inline-flex",n?.className),children:o.jsx(F,{variant:"tiny",className:"leading-4",color:s,inline:!0,...r,children:e})})});Lye.displayName="Badge";const lnt=768,Dye=`(max-width: ${lnt}px)`;function rX(){return typeof window>"u"?!1:window.matchMedia(Dye).matches}function Ca(e={}){const t=Ft(),{device:{isWindowsApp:n}}=Lt(),r=f.useMemo(()=>!!(n&&t?.includes(Y1)),[n,t]),{evaluateOnInit:s=!1}=e,a=Fye(),i=cnt(),[l,c]=f.useState(()=>a||i?!0:s?rX():!1);return f.useEffect(()=>{if(typeof window>"u")return;const u=window.matchMedia(Dye);function d(){c(u.matches)}return u.addEventListener("change",d),()=>{u.removeEventListener("change",d)}},[a]),f.useEffect(()=>{s||c(rX())},[s]),l&&!r}function Fye(e=!1){const{device:{isMobile:t}}=Lt();return t??e}function cnt(e=!1){const{device:{isAndroid:t}}=Lt();return t??e}function Ce(e={}){const t=Ft(),{device:{isWindowsApp:n}}=Lt(),r=Ca(e),s=f.useMemo(()=>!!(n&&t?.includes(Y1)),[n,t]),a=f.useMemo(()=>r&&!s,[r,s]),i=Fye();return f.useMemo(()=>({isMobileStyle:a,isMobileUserAgent:i}),[a,i])}const nx=R.memo(({children:e,className:t,disabled:n,onClick:r,onMouseDown:s,onMouseEnter:a,onMouseMove:i,testId:l,rounded:c,href:u,focused:d,disableHoverStyles:m=!1,target:p="_blank",tooltipText:h,tooltipLayout:g="right",tooltipDelayDuration:y,active:x=!1,role:v="menuitem"})=>{const b=f.useRef(null),_=Ca(),w=o.jsx("div",{className:V("duration-quick relative select-none rounded-lg transition-all","px-sm py-1.5 md:h-full",{"hover:bg-subtler cursor-pointer":!n&&!m,"cursor-pointer":!n&&m,rounded:c,"bg-subtler":d}),children:e}),C=V("group/item md:h-full",t);f.useEffect(()=>{b.current&&d&&b.current.scrollIntoView({behavior:"instant",block:"nearest"})},[d]);const S=v==="menuitemradio"||v==="menuitemcheckbox"?x?"true":"false":void 0;return u&&!n?o.jsx(Ye,{href:u,target:p,className:C,onClick:r,"data-testid":l,children:w}):o.jsx(En,{tooltipText:h,showTooltip:!_&&!!h,tooltipLayout:g,delayDuration:y,offset:12,asChild:!0,children:o.jsx("div",{role:v,"aria-checked":S,ref:b,"data-testid":l,className:C,onClick:n?void 0:r,onMouseDown:n?void 0:s,onMouseEnter:n?void 0:a,onMouseMove:n?void 0:i,children:w})})});nx.displayName="MenuItemWrapper";const unt=({icon:e,avatar:t,destructive:n})=>{if(t)return t;if(!e)return null;const r=V({"!text-caution":n},"opacity-90");return o.jsx(le,{icon:e,className:r,size:"sm"})},dnt=/\bgap(-[xy])?-/,fnt={[Qt.small]:"extraSmall",[Qt.tiny]:"tiny"},rx=R.memo(({customDescriptionNode:e,customTextNode:t,text:n,description:r,icon:s,avatar:a,label:i,badge:l,link:c,onLinkClick:u,size:d=Qt.small,color:m="default",badgeVariant:p="super",destructive:h,leftElement:g,rightElement:y,bottomElement:x,textTrailingElement:v,className:b="",preserveLeftIconSpace:_=!1,textClassName:w})=>{const C=s||a;return o.jsxs("div",{className:V("flex",b,dnt.test(b)?"":"gap-sm"),children:[(C||_)&&o.jsx("div",{className:"flex",children:o.jsx(F,{color:m,className:"pt-two flex size-5 justify-center leading-none",children:!_||C?o.jsx(unt,{icon:s,avatar:a,destructive:h}):null})}),g,o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col gap-y-0.5",children:[t||o.jsxs(F,{variant:fnt[d]??"baseSemi",color:m,className:V("flex items-center gap-x-1.5",{"!text-caution":h}),children:[o.jsx("span",{className:w,children:n}),v,l&&o.jsx(Lye,{text:l,variant:p})]}),e||r&&o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:r}),c&&o.jsx(F,{variant:"tinyRegular",color:"super",onClick:u,children:c}),x]}),i&&o.jsx(F,{className:"mt-one whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:i})]}),y]})});rx.displayName="BaseMenuItem";const JU=R.memo(e=>{const{active:t,show:n=!0,className:r,rounded:s,color:a="default",badgeVariant:i="super",disabled:l,href:c,onClick:u,onMouseDown:d,onMouseEnter:m,onMouseMove:p,testId:h,rightElement:g,focused:y,preserveRightElementSpace:x=!0,disableHoverStyles:v=!1,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:C,role:S}=e;if(!n)return null;let E=a;l?E="ultraLight":t&&(E="super");const M=g??o.jsx(F,{color:t?"super":E,className:"size-5",children:o.jsx(le,{icon:Ar,size:"sm",className:t?"opacity-100":"opacity-0","aria-hidden":!t})});return o.jsx(nx,{className:r,disabled:l,onClick:u,onMouseDown:d,onMouseEnter:m,onMouseMove:p,testId:h,rounded:s,href:c,focused:y,disableHoverStyles:v,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:C,role:S,active:t,children:o.jsx(rx,{...e,color:E,badgeVariant:i,rightElement:x?M:g})})});JU.displayName="DefaultMenuItem";const Uye=R.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,disableHoverStyles:p=!1,tooltipText:h,tooltipLayout:g,tooltipDelayDuration:y,iconVariant:x="checkbox",disableActiveStyles:v=!1}=e;let b=r;s?b="ultraLight":(m||d)&&!v&&(b="super");const _=f.useMemo(()=>x==="check"?o.jsx(F,{color:d&&!v?"super":b,className:"size-5",children:o.jsx(le,{icon:Ar,size:"sm",className:d?"opacity-100":"opacity-0","aria-hidden":!d})}):o.jsx(F,{color:d&&!v?"super":b,children:o.jsx(le,{icon:d?gue:mLe,size:"sm"})}),[b,d,x,v]);return o.jsx(nx,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:p,tooltipText:h,tooltipLayout:g,tooltipDelayDuration:y,children:o.jsx(rx,{...e,color:b,rightElement:_})})});Uye.displayName="MultiSelectMenuItem";const eB=R.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,rightElement:p,disableHoverStyles:h=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:x}=e;let v=r;s?v="ultraLight":(m||d)&&(v="super");const b=f.useMemo(()=>o.jsxs("div",{className:"gap-x-sm flex items-start pt-0.5",children:[p,o.jsx(Ji,{active:d,disabled:s,size:"small"})]}),[s,p,d]);return o.jsx(nx,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:x,children:o.jsx(rx,{...e,color:v,rightElement:b})})});eB.displayName="ToggleMenuItem";const Bye=R.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,showIconLeft:p=!1,disableHoverStyles:h=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:x}=e;let v=r;(m||d)&&(v="super");const b=o.jsx(F,{color:d?v:"ultraLight",className:V("flex pt-0.5 leading-none",{"opacity-50":s}),children:o.jsx(le,{icon:d?mP:pLe,size:"sm"})});return o.jsx(nx,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:x,children:o.jsx(rx,{...e,rightElement:p?void 0:b,leftElement:p?b:void 0})})});Bye.displayName="RadioMenuItem";const Vye=R.memo(e=>{const{text:t,show:n,className:r}=e;return n?o.jsxs(o.Fragment,{children:[o.jsx(H,{className:V("sm:mx-sm my-sm border-b first:hidden",r)}),t&&o.jsx(H,{variant:"background",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:o.jsx(F,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});Vye.displayName="MenuItemSeparator";const $ye=R.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onMouseDown:a,onMouseEnter:i,onMouseMove:l,testId:c,submenu:u,active:d,disableHoverStyles:m=!1,isSubmenuOpen:p,onSubmenuOpen:h,onSubmenuClose:g,menuWidth:y="200px"}=e;let x=r;s?x="ultraLight":d&&(x="super");const v=f.useMemo(()=>o.jsx(F,{color:"light",children:o.jsx(le,{icon:Zn,size:"sm"})}),[]),b=f.useMemo(()=>({className:"min-w-0",style:{width:y}}),[y]),_=f.useMemo(()=>({hasInteractiveContent:!0}),[]);return o.jsx(sn,{isOpen:p,items:u,placement:"right-end",onOpen:h,onClose:g,isMobileStyle:!1,hoverOpen:!0,boxProps:b,popoverProps:_,children:o.jsx(nx,{className:t,disabled:s,onMouseDown:a,onMouseEnter:i,onMouseMove:l,testId:c,rounded:n,disableHoverStyles:m,children:o.jsx(rx,{...e,color:x,rightElement:v})})})});$ye.displayName="NestedMenuItem";const Xg=R.memo(e=>{switch(e.type){case"default":{const{type:t,...n}=e;return o.jsx(JU,{...n,role:n.role||"menuitem"})}case"multiSelect":{const{type:t,...n}=e;return o.jsx(Uye,{...n,role:"menuitemcheckbox"})}case"toggle":{const{type:t,...n}=e;return o.jsx(eB,{...n,role:"menuitemcheckbox"})}case"radio":{const{type:t,...n}=e;return o.jsx(Bye,{...n,role:"menuitemradio"})}case"separator":{const{type:t,...n}=e;return o.jsx(Vye,{...n})}case"nested":{const{type:t,...n}=e;return o.jsx($ye,{...n})}case"custom":return o.jsx(o.Fragment,{children:e.children})}});Xg.displayName="MenuItem";var mnt=f.createContext(void 0);function q3(e){const t=f.useContext(mnt);return e||t||"ltr"}function pnt(e,[t,n]){return Math.min(n,Math.max(t,e))}function hnt(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var tB="ScrollArea",[Wye,dcn]=Mi(tB),[gnt,Lo]=Wye(tB),Hye=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[l,c]=f.useState(null),[u,d]=f.useState(null),[m,p]=f.useState(null),[h,g]=f.useState(null),[y,x]=f.useState(null),[v,b]=f.useState(0),[_,w]=f.useState(0),[C,S]=f.useState(!1),[E,M]=f.useState(!1),k=Hn(t,P=>c(P)),N=q3(s);return o.jsx(gnt,{scope:n,type:r,dir:N,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:m,onContentChange:p,scrollbarX:h,onScrollbarXChange:g,scrollbarXEnabled:C,onScrollbarXEnabledChange:S,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:E,onScrollbarYEnabledChange:M,onCornerWidthChange:b,onCornerHeightChange:w,children:o.jsx(mn.div,{dir:N,...i,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});Hye.displayName=tB;var zye="ScrollAreaViewport",Gye=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=Lo(zye,n),l=f.useRef(null),c=Hn(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(mn.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Gye.displayName=zye;var Pc="ScrollAreaScrollbar",qye=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lo(Pc,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return f.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(ynt,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(xnt,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(Kye,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx(nB,{...r,ref:t}):null});qye.displayName=Pc;var ynt=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lo(Pc,e.__scopeScrollArea),[a,i]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(wa,{present:n||a,children:o.jsx(Kye,{"data-state":a?"visible":"hidden",...r,ref:t})})}),xnt=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lo(Pc,e.__scopeScrollArea),a=e.orientation==="horizontal",i=Y3(()=>c("SCROLL_END"),100),[l,c]=hnt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let m=u[d];const p=()=>{const h=u[d];m!==h&&(c("SCROLL"),i()),m=h};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,a,c,i]),o.jsx(wa,{present:n||l!=="hidden",children:o.jsx(nB,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Wt(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Wt(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Kye=f.forwardRef((e,t)=>{const n=Lo(Pc,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=f.useState(!1),l=e.orientation==="horizontal",c=Y3(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:d)}},10);return Zg(n.viewport,c),Zg(n.content,c),o.jsx(wa,{present:r||a,children:o.jsx(nB,{"data-state":a?"visible":"hidden",...s,ref:t})})}),nB=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Lo(Pc,e.__scopeScrollArea),a=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Zye(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function m(p,h){return Ent(p,i.current,l,h)}return n==="horizontal"?o.jsx(vnt,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,h=sX(p,l,s.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?o.jsx(bnt,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,h=sX(p,l);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),vnt=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Lo(Pc,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Hn(t,c,a.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Qye,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":K3(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,m)=>{if(a.viewport){const p=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),exe(p,m)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:WE(i.paddingLeft),paddingEnd:WE(i.paddingRight)}})}})}),bnt=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Lo(Pc,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Hn(t,c,a.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Qye,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":K3(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,m)=>{if(a.viewport){const p=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),exe(p,m)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:WE(i.paddingTop),paddingEnd:WE(i.paddingBottom)}})}})}),[_nt,Yye]=Wye(Pc),Qye=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:m,...p}=e,h=Lo(Pc,n),[g,y]=f.useState(null),x=Hn(t,k=>y(k)),v=f.useRef(null),b=f.useRef(""),_=h.viewport,w=r.content-r.viewport,C=di(d),S=di(c),E=Y3(m,10);function M(k){if(v.current){const N=k.clientX-v.current.left,P=k.clientY-v.current.top;u({x:N,y:P})}}return f.useEffect(()=>{const k=N=>{const P=N.target;g?.contains(P)&&C(N,w)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[_,g,w,C]),f.useEffect(S,[r,S]),Zg(g,E),Zg(h.content,E),o.jsx(_nt,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:di(a),onThumbPointerUp:di(i),onThumbPositionChange:S,onThumbPointerDown:di(l),children:o.jsx(mn.div,{...p,ref:x,style:{position:"absolute",...p.style},onPointerDown:Wt(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),v.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),M(k))}),onPointerMove:Wt(e.onPointerMove,M),onPointerUp:Wt(e.onPointerUp,k=>{const N=k.target;N.hasPointerCapture(k.pointerId)&&N.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,h.viewport&&(h.viewport.style.scrollBehavior=""),v.current=null})})})}),$E="ScrollAreaThumb",Xye=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Yye($E,e.__scopeScrollArea);return o.jsx(wa,{present:n||s.hasThumb,children:o.jsx(wnt,{ref:t,...r})})}),wnt=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=Lo($E,n),i=Yye($E,n),{onThumbPositionChange:l}=i,c=Hn(t,m=>i.onThumbChange(m)),u=f.useRef(void 0),d=Y3(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const m=a.viewport;if(m){const p=()=>{if(d(),!u.current){const h=Mnt(m,l);u.current=h,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[a.viewport,d,l]),o.jsx(mn.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Wt(e.onPointerDownCapture,m=>{const h=m.target.getBoundingClientRect(),g=m.clientX-h.left,y=m.clientY-h.top;i.onThumbPointerDown({x:g,y})}),onPointerUp:Wt(e.onPointerUp,i.onThumbPointerUp)})});Xye.displayName=$E;var rB="ScrollAreaCorner",Cnt=f.forwardRef((e,t)=>{const n=Lo(rB,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(Snt,{...e,ref:t}):null});Cnt.displayName=rB;var Snt=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Lo(rB,n),[a,i]=f.useState(0),[l,c]=f.useState(0),u=!!(a&&l);return Zg(s.scrollbarX,()=>{const d=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(d),c(d)}),Zg(s.scrollbarY,()=>{const d=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(d),i(d)}),u?o.jsx(mn.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function WE(e){return e?parseInt(e,10):0}function Zye(e,t){const n=e/t;return isNaN(n)?0:n}function K3(e){const t=Zye(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Ent(e,t,n,r="ltr"){const s=K3(n),a=s/2,i=t||a,l=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,m=r==="ltr"?[0,d]:[d*-1,0];return Jye([c,u],m)(e)}function sX(e,t,n="ltr"){const r=K3(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=pnt(e,c);return Jye([0,i],[0,l])(u)}function Jye(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function exe(e,t){return e>0&&e<t}var Mnt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Y3(e,t){const n=di(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Zg(e,t){const n=di(t);ku(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var knt=Hye,Tnt=Gye,aX=qye,iX=Xye;const fl=R.memo(({children:e,orientation:t="vertical",showScrollIndicator:n=!0,thumbClassName:r="",className:s,viewportRef:a,viewportClassName:i,showIndicatorOnHover:l=!0,onScroll:c})=>{const d="before:content-[''] before:absolute before:top-[50%] before:left-[50%] before:translate-x-[-50%] before:translate-y-[-50%] before:w-[100%] before:h-[100%] before:min-w-[10px] before:min-h-[10px]"+" rounded-full bg-subtle duration-quick relative",m=V("flex flex-col p-px duration-150",{"data-[state=visible]:opacity-100":n,"pointer-events-none":!n,"opacity-0":l,"opacity-100":!l});return o.jsxs(knt,{className:V("w-full overflow-hidden",s),children:[o.jsx(Tnt,{className:V("size-full",i),ref:a,onScroll:c,children:e}),["vertical","both"].includes(t)&&o.jsx(aX,{forceMount:!0,orientation:"vertical",className:m,children:o.jsx(iX,{className:`!w-[5px] ${d} ${r}`})}),["horizontal","both"].includes(t)&&o.jsx(aX,{forceMount:!0,orientation:"horizontal",className:m,children:o.jsx(iX,{className:`!h-[5px] ${d} ${r}`})})]})}),fcn=(e,t=10,n=250)=>{const[r,s]=f.useState(!0),[a,i]=f.useState(!1);return f.useEffect(()=>{const l=Js(()=>{if(e.current){const u=e.current.scrollLeft,d=e.current.scrollWidth,m=e.current.clientWidth,p=d-m;s(u<=t),i(u>=p-t)}},n,{leading:!0}),c=e.current;return c?.addEventListener("scroll",l),l(),()=>{c?.removeEventListener("scroll",l)}},[e,t,n]),f.useMemo(()=>({isScrolledToLeft:r,isScrolledToRight:a}),[r,a])},Nnt=R.memo(({scrollRef:e,buttonProps:t,children:n,className:r})=>{const s=f.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft-e.current?.scrollWidth/3,behavior:"smooth"})},[e]),a=f.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft+e.current?.scrollWidth/3,behavior:"smooth"})},[e]);return o.jsxs(H,{className:r,children:[o.jsx(Te,{pill:!0,icon:hp,onClick:s,...t}),n,o.jsx(Te,{pill:!0,icon:Zn,onClick:a,...t})]})});Nnt.displayName="ScrollAreaArrows";fl.displayName="ScrollArea";const Yd=R.memo(({items:e,grid:t,cols:n=1,disableScrollArea:r=!1,menuItemClassName:s="",disableHoverStyles:a=!1})=>{const i=f.useMemo(()=>t&&n>1?{display:"grid",gridTemplateColumns:`repeat(${n}, minmax(0, 1fr))`,gap:"1px"}:void 0,[t,n]),l=({children:c})=>i?o.jsx("div",{role:"menu",style:i,children:c}):r?o.jsx("div",{role:"menu",className:"p-xs flex flex-col gap-px",children:c}):o.jsx(fl,{showIndicatorOnHover:!1,className:"p-xs",children:o.jsx("div",{role:"menu",className:"flex flex-col gap-px",children:c})});return o.jsx(l,{children:e.map((c,u)=>c.type==="separator"?o.jsx(Xg,{...c},u):o.jsx(Xg,{className:s,disableHoverStyles:a,...c},u))})});Yd.displayName="Menu";const txe={...dD},jnt=txe.useInsertionEffect,Ant=jnt||(e=>e());function Int(e){const t=f.useRef(()=>{});return Ant(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var HE=typeof document<"u"?f.useLayoutEffect:f.useEffect;function O8(){return O8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O8.apply(this,arguments)}let oX=!1,Rnt=0;const lX=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Rnt++;function Pnt(){const[e,t]=f.useState(()=>oX?lX():void 0);return HE(()=>{e==null&&t(lX())},[]),f.useEffect(()=>{oX=!0},[]),e}const Ont=txe.useId,nxe=Ont||Pnt,Lnt=f.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:a,shift:i}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:m,stroke:p,d:h,style:{transform:g,...y}={},...x}=t,v=nxe(),[b,_]=f.useState(!1);if(HE(()=>{if(!s)return;Ao(s).direction==="rtl"&&_(!0)},[s]),!s)return null;const[w,C]=r.split("-"),S=w==="top"||w==="bottom";let E=m;(S&&i!=null&&i.x||!S&&i!=null&&i.y)&&(E=null);const M=d*2,k=M/2,N=l/2*(u/-8+1),P=c/2*u/4,L=!!h,O=E&&C==="end"?"bottom":"top";let A=E&&C==="end"?"right":"left";E&&b&&(A=C==="end"?"left":"right");const j=a?.x!=null?E||a.x:"",T=a?.y!=null?E||a.y:"",I=h||"M0,0"+(" H"+l)+(" L"+(l-N)+","+(c-P))+(" Q"+l/2+","+c+" "+N+","+(c-P))+" Z",U={top:L?"rotate(180deg)":"",left:L?"rotate(90deg)":"rotate(-90deg)",bottom:L?"":"rotate(180deg)",right:L?"rotate(-90deg)":"rotate(90deg)"}[w];return f.createElement("svg",O8({},x,{"aria-hidden":!0,ref:n,width:L?l:l+M,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[A]:j,[O]:T,[w]:S||L?"100%":"calc(100% - "+M/2+"px)",transform:[U,g].filter(B=>!!B).join(" "),...y}}),M>0&&f.createElement("path",{clipPath:"url(#"+v+")",fill:"none",stroke:p,strokeWidth:M+(h?0:1),d:I}),f.createElement("path",{stroke:M&&!h?x.fill:"none",d:I}),f.createElement("clipPath",{id:v},f.createElement("rect",{x:-k,y:k*(L?-1:1),width:l+M,height:l})))});function Dnt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const Fnt=f.createContext(null),Unt=f.createContext(null),Bnt=()=>{var e;return((e=f.useContext(Fnt))==null?void 0:e.id)||null},Vnt=()=>f.useContext(Unt);function $nt(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=nxe(),a=f.useRef({}),[i]=f.useState(()=>Dnt()),l=Bnt()!=null,[c,u]=f.useState(r.reference),d=Int((h,g,y)=>{a.current.openEvent=h?g:void 0,i.emit("openchange",{open:h,event:g,reason:y,nested:l}),n?.(h,g,y)}),m=f.useMemo(()=>({setPositionReference:u}),[]),p=f.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return f.useMemo(()=>({dataRef:a,open:t,onOpenChange:d,elements:p,events:i,floatingId:s,refs:m}),[t,d,p,i,s,m])}function Wnt(e){e===void 0&&(e={});const{nodeId:t}=e,n=$nt({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[a,i]=f.useState(null),[l,c]=f.useState(null),d=s?.domReference||a,m=f.useRef(null),p=Vnt();HE(()=>{d&&(m.current=d)},[d]);const h=Pme({...e,elements:{...s,...l&&{reference:l}}}),g=f.useCallback(_=>{const w=Va(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;c(w),h.refs.setReference(w)},[h.refs]),y=f.useCallback(_=>{(Va(_)||_===null)&&(m.current=_,i(_)),(Va(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Va(_))&&h.refs.setReference(_)},[h.refs]),x=f.useMemo(()=>({...h.refs,setReference:y,setPositionReference:g,domReference:m}),[h.refs,y,g]),v=f.useMemo(()=>({...h.elements,domReference:d}),[h.elements,d]),b=f.useMemo(()=>({...h,...r,refs:x,elements:v,nodeId:t}),[h,x,v,t,r]);return HE(()=>{r.dataRef.current.floatingContext=b;const _=p?.nodesRef.current.find(w=>w.id===t);_&&(_.context=b)}),f.useMemo(()=>({...h,context:b,refs:x,elements:v}),[h,x,v,b])}class Hnt{static detectOverflowOptions={padding:8};static offsetMiddleware=jF({mainAxis:4,crossAxis:0});static shiftMiddleware=Ome({limiter:Lme(),...this.detectOverflowOptions});static flipMiddleware=Dme(this.detectOverflowOptions);static sizeMiddleware(t={matchTargetWidth:!1},n=!0){return Fme({...this.detectOverflowOptions,apply({availableHeight:r,rects:s,elements:a}){n&&(a.floating.style.maxHeight=`${r}px`),(t.matchTargetWidth??!0)&&(a.floating.style.width=`${s.reference.width}px`)}})}static defaultMiddleWare(t={avoidCollisions:!0,matchTargetWidth:!1}){const n=t.avoidCollisions??!0,r=t.avoidPositionCollisions!==void 0?t.avoidPositionCollisions:n,s=t.avoidSizeCollisions!==void 0?t.avoidSizeCollisions:n;return[this.offsetMiddleware,r&&this.shiftMiddleware,r&&this.flipMiddleware,this.sizeMiddleware({matchTargetWidth:t.matchTargetWidth},s)].filter(Boolean)}}const znt=130,lo=R.memo(({content:e,contentClassName:t="",children:n,delayTime:r=200,isOpen:s,hoverOpen:a,placement:i="bottom-end",matchTargetWidth:l=!1,childrenClassName:c,testId:u,overlayProps:d,onOpen:m,onClose:p,disableAnimation:h,hasInteractiveContent:g=!1,avoidCollisions:y=!0,avoidPositionCollisions:x,avoidSizeCollisions:v,customFloatingUIOptions:b,disableShadow:_,floatingElementProps:w,arrowClassName:C,borderRadius:S="rounded-xl",sideOffset:E=4,forceDarkMode:M=!1})=>{const k=f.useRef(null),N=f.useMemo(()=>{const be=Hnt.defaultMiddleWare({avoidCollisions:y,avoidPositionCollisions:x,avoidSizeCollisions:v,matchTargetWidth:l});return E!==4&&(be[0]=jF({mainAxis:E,crossAxis:0})),C&&be.push(Ume({element:k})),be},[y,x,v,l,C,E]),{refs:P,floatingStyles:L,placement:O,context:A}=Wnt({strategy:"fixed",placement:i,middleware:N,whileElementsMounted:(...be)=>Ime(...be),...b}),[j,T]=f.useState(!1),I=f.useRef(j),[U,B]=f.useState(!1),D=f.useRef(U),[W,z]=f.useState(!1),$=s!==void 0,[X,q]=f.useState(!1),Y=f.useMemo(()=>$?s:X,[$,s,X]),G=f.useCallback(be=>{be.stopPropagation()},[]),J=f.useCallback(()=>{Y||(m?.(),$||q(!0))},[$,Y,m]),K=f.useCallback(()=>{z(be=>Y&&!be?(p?.(),$||q(!1),h?!1:(setTimeout(()=>{z(!1)},znt),!0)):be)},[$,Y,p,h]),te=f.useCallback(()=>{Y?K():J()},[K,J,Y]),re=f.useCallback(()=>{setTimeout(()=>{!D.current&&!I.current&&K()},r)},[r,K,D,I]);f.useEffect(()=>{if(!a||!Y||W)return;const be=setInterval(()=>{const Ne=P.reference.current,Ee=P.floating.current,Re=Ne.matches(":hover"),Ae=Ee.matches(":hover");!Re&&I.current&&oe(),!Ae&&D.current&&xe(),!Re&&!Ae&&re()},250);return()=>clearInterval(be)},[W,Y,re,a]);const se=f.useCallback(()=>{setTimeout(()=>{if($&&p){p();return}K()},0)},[$,p,K]),me=f.useCallback(()=>{I.current=!0,T(!0),J()},[J]),oe=f.useCallback(()=>{I.current=!1,T(!1),re()},[re]),ge=()=>{D.current=!0,B(!0)},xe=f.useCallback(()=>{D.current=!1,B(!1),re()},[re]),ye=f.useCallback(be=>{be.stopPropagation(),te()},[te]),_e=f.useMemo(()=>({transform:"translateY(-1px)"}),[]);return o.jsxs(o.Fragment,{children:[o.jsx("span",{onMouseEnter:a?me:void 0,onMouseLeave:a?oe:void 0,ref:P.setReference,onMouseDown:G,onClick:a?void 0:ye,className:c,"data-test-id":u,children:n}),e?o.jsx(Xy,{isOpen:Y||W,onClose:se,transparent:!0,childVariant:"clean",disableAnimation:h,delayClose:!1,...d,children:o.jsx("div",{className:"absolute inset-x-0 top-0","data-color-scheme":M?"dark":void 0,children:o.jsx("div",{className:"flex",ref:P.setFloating,onMouseEnter:a?ge:void 0,onMouseLeave:a?xe:void 0,onClick:be=>{g&&be.stopPropagation()},style:L,...w,children:o.jsxs(H,{variant:"background",className:V({"shadow-overlay":!_},"flex min-h-0 min-w-0","data-[placement=bottom-end]:origin-top-right data-[placement=bottom-start]:origin-top-left data-[placement=top-end]:origin-bottom-right data-[placement=top-start]:origin-bottom-left",{"duration-150":!h,"animate-out fade-out zoom-out-[0.97] ease-in":W&&!h,"p-xs animate-in fade-in zoom-in-[0.97] ease-out":!h},t,S),"data-placement":O,children:[e,C&&o.jsx(Lnt,{ref:k,context:A,className:C,style:_e})]})})})}):null]})});lo.displayName="Popover";const sn=R.memo(({isOpen:e,hoverOpen:t=!1,children:n,items:r,placement:s,disabled:a=!1,grid:i,onOpen:l,title:c,onClose:u,testid:d,isMobileStyle:m,boxProps:p,modalProps:h,popoverProps:g,cols:y=1,footer:x=null,menuItemClassName:v="",contentClassName:b="",wrapperClassName:_,header:w,alwaysShowChildren:C,size:S,showFooterOnMobile:E=!1})=>{const[M,k]=f.useState(!1),N=e!==void 0,P=N?e:M,L=f.useCallback(()=>{if(!P&&!a){const I=l?.()??!0;!N&&I&&k(!0)}},[a,N,l,P]),O=f.useCallback(()=>{P&&!a&&(u?.(),N||k(!1))},[a,N,u,P]),A=f.useMemo(()=>r.map(I=>({...I,size:S??(m?Qt.regular:void 0),onClick:U=>{!a&&"onClick"in I&&(I.onClick?.(U),I.type==="toggle"||I.type==="multiSelect"||O())}})),[a,O,r,S,m]),j=f.useMemo(()=>o.jsx(H,{className:V("flex max-h-[80vh] min-h-0 min-w-[160px] flex-col",{"max-w-[250px]":!i,"gap-two grid max-w-lg":i}),...p,children:o.jsxs("div",{className:"flex h-full flex-col",children:[w&&o.jsx(H,{className:"mb-sm mx-sm flex-shrink-0 border-b",children:w}),c&&o.jsx(H,{testId:d,className:"mb-sm mx-sm flex-shrink-0 border-b",children:o.jsx(F,{variant:"smallBold",className:"py-sm mb-1",children:c})}),o.jsxs(fl,{orientation:"vertical",showIndicatorOnHover:!1,className:"min-h-0 flex-1 overflow-auto",children:[o.jsx(Yd,{items:A,grid:i,cols:y,menuItemClassName:v,disableScrollArea:!0}),x]})]})}),[p,y,x,i,w,A,v,d,c]);return r.every(I=>I.show===!1)?C?n:null:m?o.jsxs(o.Fragment,{children:[o.jsx(on,{variant:"bottom-left-sheet",actionList:fe,isOpen:P,onClose:O,footerContent:E&&x?x:void 0,footerClassname:E&&x?"!pt-0 pb-5 sticky bottom-0":void 0,wrapperClassname:E&&x?"!pb-0":void 0,...h,children:o.jsx(H,{className:"divide-y",children:o.jsx(Yd,{items:A,grid:i,menuItemClassName:v})})}),o.jsx("span",{className:_,onClick:t?void 0:I=>{I.stopPropagation(),L()},children:n})]}):o.jsx(lo,{...g,hoverOpen:t,isOpen:P,placement:s,onClose:O,onOpen:L,contentClassName:b,childrenClassName:_,content:j,hasInteractiveContent:!0,children:n})});sn.displayName="DropDownMenu";const Gnt=[{label:"Comet Assistant",value:"AGENT",description:"Use cases where Comet Assistant is acting on your behalf and does the wrong thing. For general Comet issues please use Comet Browser instead."},{label:"Comet Browser",value:"BROWSER",description:"General Comet UI/UX issues. For general Perplexity web issues please use Web instead."},{label:"Product",value:"PRODUCT",description:"General product features, UI/UX issues, or user experience problems"},{label:"AI",value:"AI",description:"Core AI model issues, accuracy problems, or response quality"},{label:"Enterprise",value:"ENTERPRISE",description:"Enterprise-specific features"},{label:"Platform",value:"PLATFORM",description:"Infrastructure, performance, or system-level issues"},{label:"Mobile",value:"MOBILE",description:"Mobile app functionality or design issues"},{label:"Search",value:"SEARCH",description:"Search functionality, results quality, or indexing problems"},{label:"Web",value:"WEB",description:"General Web UI/UX issues."}],qnt=({value:e,onSelect:t,options:n,placeholder:r="Select a category..."})=>{const a=n.find(c=>c.value===e)?.label||r,i=n.map(c=>({type:"default",text:c.label,tooltipText:c.description,onClick:()=>t(c.value),show:!0})),l={text:a,variant:"common",size:"small",trailingComponent:o.jsx(le,{icon:Bn,size:"xs"}),extraCSS:"w-full justify-between border-subtler bg-base p-sm dark:border-subtle dark:bg-subtler"};return o.jsx(sn,{items:i,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(Te,{...l})})},Knt=({isOpen:e,onClose:t})=>{const[n,r]=f.useState(""),[s,a]=f.useState(""),[i,l]=f.useState(""),[c,u]=f.useState(!1),[d,m]=f.useState(null),{firstResult:{context_uuid:p,backend_uuid:h,expiry_time:g,collection_info:{slug:y}={}}={}}=Ht(),x=Oo(),{handleAccessChange:v}=KU({contextUUID:p,rwToken:x,collectionSlug:y,reason:"Bug Report"}),{handleRemoveExpiry:b}=ZZe({slugOrUUID:h}),_=async()=>{if(!n.trim()){m("Please describe the bug");return}u(!0),m(null);try{const C=QZe(window.location.href),S=await KZe(n,C,s,i);t(),S?.status==="success"&&S.linear_url&&window.open(S.linear_url,"_blank"),v(Ct.PUBLIC_READ),g&&await b(),r(""),l("")}catch(C){ne.error("Failed to submit bug report",C),m("Failed to submit bug report. Please try again.")}finally{u(!1)}},w=()=>{r(""),l(""),a(""),m(null),t()};return o.jsx(on,{isOpen:e,onClose:w,title:"Report a Bug",variant:"large",actionList:[{text:"Cancel",onClick:w,variant:"common"},{text:c?"Submitting...":"Submit Bug Report",onClick:_,variant:"primary",disabled:c||!n.trim(),isLoading:c}],children:o.jsxs("div",{className:"space-y-md",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"base",className:"mb-sm",children:"Category (optional)"}),o.jsx(qnt,{value:i,onSelect:l,options:Gnt,placeholder:"Select a category..."})]}),o.jsxs("div",{children:[o.jsx(F,{variant:"base",className:"mb-sm",children:"Who should we assign this bug to? (optional)"}),o.jsx(qa,{value:s,onChange:C=>a(C),placeholder:"Please provide the email address. E.g. johnny@perplexity.ai",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),o.jsxs("div",{children:[o.jsx(F,{variant:"base",className:"mb-sm",children:"Please describe the bug you encountered:"}),o.jsx(qa,{value:n,onChange:C=>r(C),placeholder:"Describe what happened, steps to reproduce, and any other relevant details...",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),d&&o.jsx(F,{variant:"smallMono",color:"red",className:"text-sm",children:d})]})})};var Yn;(function(e){e.MACOS="macos",e.WINDOWS="windows"})(Yn||(Yn={}));var Tr;(function(e){e.NEW_THREAD="NEW_THREAD",e.STOP_GENERATING="STOP_GENERATING",e.TOGGLE_INCOGNITO="TOGGLE_INCOGNITO",e.SHOW_SHORTCUTS="SHOW_SHORTCUTS",e.FOCUS_ASK_INPUT="FOCUS_ASK_INPUT",e.TOGGLE_DICTATION="TOGGLE_DICTATION",e.TOGGLE_V2V="TOGGLE_V2V"})(Tr||(Tr={}));const mcn="keyboard-shortcuts",rxe=(e,t,n=!1)=>[{type:Tr.NEW_THREAD,label:e.formatMessage({defaultMessage:"New Thread",id:"76XSxT3hV8"}),macos:["","K"],windows:t?["Ctrl","Shift","P"]:["Ctrl","I"],editable:!0,global:!0},{type:Tr.TOGGLE_V2V,label:e.formatMessage({defaultMessage:"Toggle Voice Mode",id:"ulahVrf1h4"}),macos:["","Shift","B"],windows:["Ctrl","Shift","B"],editable:!0,global:!0,requiresAuth:!0,windowsAppOnly:!0},{type:Tr.TOGGLE_DICTATION,label:e.formatMessage({defaultMessage:"Toggle Voice Dictation",id:"tWip/8rlIv"}),macos:["","D"],windows:["Ctrl","D"],editable:!1,windowsAppOnly:!0},{type:Tr.TOGGLE_INCOGNITO,label:e.formatMessage({defaultMessage:"Toggle Incognito",id:"YNMg3vd9IG"}),macos:["",";"],windows:["Ctrl",";"],editable:!1},{type:Tr.SHOW_SHORTCUTS,label:e.formatMessage({defaultMessage:"Show Shortcuts",id:"8o6rUVckYq"}),macos:["","/"],windows:["Ctrl","/"],editable:!1},{type:Tr.FOCUS_ASK_INPUT,label:e.formatMessage({defaultMessage:"Focus Ask Input",id:"RP5ybIk9wM"}),macos:["","J"],windows:["Ctrl","J"],editable:!1}].filter(s=>(!s.requiresAuth||n)&&(!s.windowsAppOnly||t)),Ynt={Meta:"",Shift:"",ArrowUp:"",ArrowDown:"",ArrowLeft:"",ArrowRight:"",Enter:"",Period:".",Semicolon:";",Slash:"/",Escape:"Esc"},Qnt={"":"Meta","":"Shift","":"ArrowUp","":"ArrowDown","":"ArrowLeft","":"ArrowRight","":"Enter"},Xnt=(e,t=Yn.MACOS)=>e==="Meta"?t===Yn.WINDOWS?"Win":"":Ynt[e]||e,cX=e=>e==="Win"?"Meta":Qnt[e]||e,Znt=({label:e,keys:t})=>o.jsxs(F,{color:"light",className:"py-md flex place-content-between items-center",children:[o.jsx(F,{as:"dd",variant:"small",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:e}),o.jsx(H,{as:"dl",className:"space-x-two flex items-center",children:t.map(n=>o.jsx(H,{className:"px-xs flex h-5 min-w-5 items-center justify-center rounded border font-mono",children:n},n))})]}),sxe=R.memo(({closeModal:e,isOpen:t})=>{const n=Z(),{device:{isMacOS:r,isWindowsApp:s}}=Lt(),a=lt(),i=r?Yn.MACOS:Yn.WINDOWS,l=f.useMemo(()=>rxe(n,s,a),[n,s,a]);return o.jsx(Xy,{childVariant:"hide-chrome",isOpen:t,canOutsideClickClose:!0,onClose:e,children:o.jsx(H,{variant:"background",className:"relative w-[90vw] max-w-screen-sm overflow-hidden rounded-xl",children:o.jsxs(H,{variant:"subtler",className:"p-md inset-0",children:[o.jsx(F,{className:"mb-2",variant:"section-title",as:"h2",children:n.formatMessage({defaultMessage:"Keyboard Shortcuts",id:"nFkLBjIGMy"})}),o.jsx(H,{as:"dl",className:"divide-y",children:l.map(c=>o.jsx(Znt,{label:c.label,keys:c[i]},c.type))})]})})})});sxe.displayName="KeyboardShortcutHelperModal";const Jnt=async({reason:e})=>{try{return(await(await Er({urlPath:"/rest/collections/list_recent",reason:e})).json()).map(r=>({...r,link:r.link.replace(/^\/collections\//,"/spaces/")}))}catch(t){return ne.error("Failed to get recent collections.",t),[]}},ert=async({headers:e={},params:t,reason:n})=>{const r=await ae.GET("/rest/collections/list_user_collections",n,{params:{query:{limit:t.limit,offset:t.offset,version:Sl}},timeoutMs:Fe(),headers:e});if(!r.response.ok||!r.data)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to list user collections",cause:r.error});return r.data},trt=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await ae.GET("/rest/collections/get_collection",n,{params:{query:t},headers:e,timeoutMs:Fe()});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:r});if(!s?.status||s?.status==="failed")throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:s});return s}catch(r){ne.error(r);return}},nrt=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await ae.PUT("/rest/collections/{collection_uuid}/access",n,{params:{path:{collection_uuid:t.collection_uuid}},headers:e,body:{updated_access:t.updated_access},timeoutMs:Fe()});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to update collection access",cause:r})}catch(r){ne.error(r)}},pcn=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await ae.POST("/rest/collections/{collection_uuid}/remove_user",n,{params:{path:{collection_uuid:t.collectionUUID}},body:{email:t.email},headers:e,timeoutMs:Fe()});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to remove user from collection",cause:r})}catch(r){ne.error(r)}},hcn=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await ae.GET("/rest/collections/list_collection_threads",n,{params:{query:t},headers:e,timeoutMs:Fe()});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:r});if(!s||!Array.isArray(s))throw new Ie("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:s});return s}catch(r){return ne.error(r),[]}},gcn=async({reason:e})=>{try{const{error:t,data:n}=await ae.GET("/rest/collections/invitations",e,{});if(t)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get invited collections",cause:t});return{collections:n.collections}}catch{return{collections:[]}}},jC=async({params:e,reason:t})=>{try{const{error:n,data:r}=await ae.POST("/rest/collections/upsert_thread_collection",t,{body:e});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:n});if(!r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:r});return r}catch{return}},ycn=async({params:e,reason:t})=>{try{const{error:n,data:r}=await ae.POST("/rest/collections/invite_to_collection",t,{body:e,timeoutMs:Fe()});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to invite user to collection",cause:n});return r}catch{return}},uX=async({collectionUUID:e,entryUUID:t,reason:n})=>{try{const{error:r}=await ae.DELETE("/rest/collections/remove_collection_thread",n,{params:{query:{collection_uuid:e,entry_uuid:t}}});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to remove thread from collection",cause:r})}catch{return}},Oc=({collectionSlug:e,reason:t,enabled:n=!!e})=>{const r=async()=>e?await trt({params:{collection_slug:e,version:Sl},reason:t})??null:null,{data:s,isLoading:a}=We({enabled:n,queryKey:["get_collection",{collection_slug:e?.slice(-22)}],queryFn:r,placeholderData:mf});return f.useMemo(()=>({collection:s??void 0,isLoading:a}),[s,a])},L8=async({request:e,reason:t})=>{const{fileRepositoryInfo:n,limit:r,offset:s,searchTerm:a,fileStates:i,email:l}=e;try{let c;i.includes("COMPLETE")?c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:i}:c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:i,email_in_filter:[l]};const{data:u,error:d}=await ae.POST("/rest/file-repository/list-files",t,{headers:{"content-type":"application/json"},body:c,timeoutMs:Fe(),numRetries:1});if(d)throw new Ie("API_CLIENTS_ERROR",{cause:d});return{files:u?.files??[],numTotalFiles:u?.num_total_files??0}}catch(c){return ne.error(c),null}},rrt=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/file-repository/get-file-upload-urls",t,{body:e,timeoutMs:5e3,numRetries:1});if(r)throw new Error("Failed to get fileUploadUrl",{cause:r});return n},sB=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/files/list",t,{body:e,timeoutMs:Fe(),numRetries:1});if(r)throw new Error("Failed to get connector files",{cause:r});return n},srt=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/files/delete",t,{body:e,timeoutMs:Fe(),numRetries:1});if(r)throw new Error("Failed to delete connector files",{cause:r});return n},art=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/files/resync",t,{body:e,timeoutMs:Fe(),numRetries:1});if(r)throw new Error("Failed to resync connector files",{cause:r});return n},irt=async({request:e,reason:t})=>{try{const{data:n,error:r}=await ae.POST("/rest/file-repository/uploads",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:Fe(),numRetries:1});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r});return n??null}catch(n){return ne.error(n),null}};async function aB({request:e,reason:t}){return new Promise((n,r)=>{ae.SSE("/rest/sse/index_files",t,{params:e,headers:{"content-type":"application/json",accept:"text/event-stream"},handlers:{message:s=>{s.status==="success"?n():r(new Error("Indexing failed"))}}}).catch(r)})}const axe=({reason:e})=>{const t=xt();return St({mutationFn:({fileUuids:n,fileRepoInfo:r})=>srt({request:{file_repository_info:r,filters:{uuids:n,connection_ids:[],connection_types:[],file_types:[],ids:[],parent_uuids:[],remote_file_ids:[],root_files_only:!1,status:[],upload_ids:[]}},reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["connector-files"]})}})},ort=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,cursor:i,pollingEnabled:l=!1,pageSize:c,fileTypes:u,reason:d})=>{const[m,p]=f.useState(!1),h=f.useMemo(()=>({file_repository_info:e,filters:{connection_types:t??fe,status:n??fe,search_keyword:r,parent_uuids:s??fe,root_files_only:a??!1,file_types:u??fe,connection_ids:fe,ids:fe,remote_file_ids:fe,uuids:fe,upload_ids:fe},pagination:{cursor:i,page_size:c??100},order_by:"updated",order_dir:"desc"}),[e,t,n,r,s,a,i,c,u]),g=We({queryKey:Cye(h),queryFn:()=>sB({request:h,reason:d}),refetchInterval:()=>l&&m?5e3:!1,staleTime:0,gcTime:0,enabled:e.file_repository_type!=="COLLECTION"||e.file_repository_type==="COLLECTION"&&!!e.owner_id});return f.useEffect(()=>{const y=g.data?.files.some(x=>x.status==="SYNCING"||x.status==="QUEUED")||!1;p(y)},[g.data]),g},lrt=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,pageSize:i,fileTypes:l,reason:c})=>{const u={file_repository_info:e,filters:{connection_types:t??fe,status:n??fe,search_keyword:r,parent_uuids:s??fe,root_files_only:a??!1,file_types:l??fe,connection_ids:fe,ids:fe,remote_file_ids:fe,uuids:fe,upload_ids:fe},pagination:{page_size:i},order_by:"updated",order_dir:"desc"};return $u({enabled:e.file_repository_type==="USER"||e.file_repository_type==="COLLECTION"&&!!e.owner_id,initialPageParam:void 0,queryKey:Cye(u,!0),queryFn:({pageParam:d})=>sB({request:{...u,pagination:{cursor:d,page_size:i}},reason:c}),getNextPageParam:d=>d.next_cursor??void 0})},Do=({reason:e,collectionSlugOverride:t})=>{const n=Ft(),r=_l(),{firstResult:{collection_info:{uuid:s}={}}={}}=Ht(),a=n?.includes("/search/")&&!!s,i=t??(Array.isArray(r?.slug)?r.slug[0]:r?.slug),{collection:l}=Oc({collectionSlug:i,reason:e}),c=f.useMemo(()=>{let u,d;return a?(u="COLLECTION",d=s??""):n?.includes("/collections")||n?.includes("/spaces")?(u="COLLECTION",d=l?.uuid||""):(u="ORG",d=""),{file_repository_type:u,owner_id:d}},[a,n,s,l?.uuid]);return f.useMemo(()=>({fileRepoInfo:c}),[c])},crt=({reason:e})=>{const t=xt();return St({mutationFn:({fileUuids:n,fileRepoInfo:r})=>art({request:{file_repository_info:r,filters:{uuids:n,connection_ids:[],connection_types:[],file_types:[],ids:[],parent_uuids:[],remote_file_ids:[],root_files_only:!1,status:[],upload_ids:[]}},reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["connector-files"]})}})},iB=e=>{switch(e){case"GOOGLE_DRIVE":return Hg;case"ONEDRIVE":return Gd;case"SHAREPOINT":return qd;case"DROPBOX":return ju;case"BOX":return zg;case"WILEY":return b3;case"GCAL":return F1;case"NOTION":case"NOTION_MCP":return Gg;case"LINEAR":case"LINEAR_ALT":return dm;case"SLACK":return V1;case"SLACK_DIRECT":return $1;case"GITHUB_MCP_DIRECT":return W1;case"ASANA_MCP_DIRECT":return Xl;case"ASANA_MCP_MERGE":return Xl;case"ATLASSIAN_MCP_DIRECT":return z1;case"JIRA_MCP_MERGE":return G1;case"CONFLUENCE_MCP_MERGE":return q1;case"MICROSOFT_TEAMS_MCP_MERGE":return K1;case"OUTLOOK":return qg;default:return""}};function xcn(e){if(e===0)return"0 bytes";const t=1024,n=["bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return Math.ceil(e/Math.pow(t,r))+" "+n[r]}const urt=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"||t==="PAGE"},drt=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"?yue:wu},Bi=e=>{switch(e){case"GOOGLE_DRIVE":return _3;case"ONEDRIVE":return C3;case"SHAREPOINT":return S3;case"DROPBOX":return JF;case"BOX":return E3;case"GCAL":return w3;case"NOTION":case"NOTION_MCP":return __;case"OUTLOOK":return Xpe;case"LINEAR":case"LINEAR_ALT":return U1;case"SLACK":case"SLACK_DIRECT":return B1;case"GITHUB_MCP_DIRECT":return M3;case"ASANA_MCP_DIRECT":case"ASANA_MCP_MERGE":return H1;case"ATLASSIAN_MCP_DIRECT":return k3;case"JIRA_MCP_MERGE":return eU;case"CONFLUENCE_MCP_MERGE":return tU;case"MICROSOFT_TEAMS_MCP_MERGE":return nU;default:return null}},nl=e=>{switch(e){case"crunchbase":return x3;case"factset":return g3;case"wiley":return Nu;case"google_drive":return _3;case"onedrive":return C3;case"sharepoint":return S3;case"gcal":return w3;case"dropbox":return JF;case"box":return E3;case"gmail":return Gqe;case"notion":case"notion_mcp":return __;case"outlook":return Xpe;case"linear":case"linear_alt":return U1;case"slack":case"slack_direct":return B1;case"github_mcp_direct":return M3;case"asana_mcp_direct":case"asana_mcp_merge":return H1;case"atlassian_mcp_direct":return k3;case"jira_mcp_merge":return eU;case"confluence_mcp_merge":return tU;case"microsoft_teams_mcp_merge":return nU;case"wiley_mcp_cashmere":return Nu;default:return null}},Ra=e=>{switch(e){case"crunchbase":return v3;case"factset":return y3;case"google_drive":return Hg;case"onedrive":return Gd;case"sharepoint":return qd;case"gcal":return F1;case"dropbox":return ju;case"box":return zg;case"gmail":return qqe;case"notion":case"notion_mcp":return Gg;case"outlook":return qg;case"linear":case"linear_alt":return dm;case"slack":return V1;case"slack_direct":return $1;case"github_mcp_direct":return W1;case"asana_mcp_direct":return Xl;case"asana_mcp_merge":return Xl;case"atlassian_mcp_direct":return z1;case"jira_mcp_merge":return G1;case"confluence_mcp_merge":return q1;case"microsoft_teams_mcp_merge":return K1;case"wiley_mcp_cashmere":return D1;default:return e}},frt=e=>{switch(e){case"GOOGLE_DRIVE":return Hg;case"ONEDRIVE":return Gd;case"SHAREPOINT":return qd;case"DROPBOX":return ju;case"BOX":return zg;case"NOTION":case"NOTION_MCP":return Gg;case"LINEAR":case"LINEAR_ALT":return dm;case"SLACK":return V1;case"SLACK_DIRECT":return $1;case"GITHUB_MCP_DIRECT":return W1;case"ASANA_MCP_DIRECT":return Xl;case"ASANA_MCP_MERGE":return Xl;case"ATLASSIAN_MCP_DIRECT":return z1;case"JIRA_MCP_MERGE":return G1;case"CONFLUENCE_MCP_MERGE":return q1;case"MICROSOFT_TEAMS_MCP_MERGE":return K1;default:return""}},mrt=(e,t)=>new Date(e+"Z").toLocaleString(t,{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),prt=(e,t)=>{switch(e){case"RECEIVED":case"QUEUED":case"RATE_LIMITED":return t.formatMessage({id:"Cnm0QAkWnp",defaultMessage:"Queued"});case"SYNCING":return t.formatMessage({id:"eOnwqs6QFY",defaultMessage:"Syncing"});case"SYNC_ERROR":return t.formatMessage({id:"N1cqoEe4CZ",defaultMessage:"Sync error"});case"EVALUATING_RESYNC":case"READY":return t.formatMessage({id:"IZFEUgrg25",defaultMessage:"Ready"})}},ixe=(e,t)=>{if(t==="WILEY")return iB(t);if(t||e.is_memory||e.is_conversation_history)return e.name&&e.name.trim()?e.name:void 0},oxe=e=>e.isFile,lxe=e=>e.isDirectory,hrt=async(e,t=Sqe)=>{const n=[e],r=[];for(;n.length>0;){const s=n.pop();if(s){if(oxe(s)){const a=await new Promise(i=>{s.file(i)});if(r.push(a),r.length>t)return r}else if(lxe(s)){const a=s.createReader(),i=await new Promise(l=>a.readEntries(l));n.push(...i)}}}return r},To=R.memo(({blockCount:e,size:t=Qt.large,animateLines:n=!0,divider:r,noLines:s,noHeight:a,variant:i="subtler",className:l,...c})=>{const u="h-1 bg-inverse/70  rounded-full",d=f.useMemo(()=>{const m=[];for(let p=0;p<(e??1);p++)m.push(o.jsx(H,{variant:i,className:V("animate-pulse rounded-md",{"h-8":t===Qt.small,"h-10":t===Qt.regular,"h-[72px]":t===Qt.large,"h-32":t===Qt.xl,"h-6":t===Qt.tiny,"h-full":a}),children:o.jsx("div",{className:"gap-y-sm p-md flex h-full flex-col",children:!s&&o.jsxs(o.Fragment,{children:[o.jsx(ve.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ve.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ve.div,{initial:{width:n?0:"80%"},animate:{width:"80%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ve.div,{initial:{width:n?0:"20%"},animate:{width:"20%"},transition:{duration:.8,delay:.2},className:u})]})})},p));return m},[n,e,t,s,a,i]);return o.jsx(H,{className:V("h-full",{"divider gap-y-sm flex flex-col":r,"absolute top-0 w-full":a},l),...c,children:d})});To.displayName="TextBlockThrobber";var Ot;(function(e){e.GOOGLE_DRIVE="GOOGLE_DRIVE",e.ONEDRIVE="ONEDRIVE",e.SHAREPOINT="SHAREPOINT",e.DROPBOX="DROPBOX",e.BOX="BOX",e.WILEY="WILEY",e.GCAL="GCAL",e.GENERATED_IMAGE="GENERATED_IMAGE",e.GENERATED_VIDEO="GENERATED_VIDEO",e.NOTION="NOTION",e.NOTION_MCP="NOTION_MCP",e.OUTLOOK="OUTLOOK",e.LINEAR="LINEAR",e.LINEAR_ALT="LINEAR_ALT",e.SLACK="SLACK",e.GITHUB_MCP_DIRECT="GITHUB_MCP_DIRECT",e.ASANA_MCP_DIRECT="ASANA_MCP_DIRECT",e.ASANA_MCP_MERGE="ASANA_MCP_MERGE",e.ATLASSIAN_MCP_DIRECT="ATLASSIAN_MCP_DIRECT",e.LOCAL="LOCAL",e.SLACK_DIRECT="SLACK_DIRECT",e.JIRA_MCP_MERGE="JIRA_MCP_MERGE",e.CONFLUENCE_MCP_MERGE="CONFLUENCE_MCP_MERGE",e.MICROSOFT_TEAMS_MCP_MERGE="MICROSOFT_TEAMS_MCP_MERGE"})(Ot||(Ot={}));const cxe=R.memo(({files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,allowEditSources:r,onFolderClick:s})=>{const a="connectors-table-files",i=Z(),{locale:l}=Z(),{isMobileStyle:c}=Ce(),{mutate:u}=axe({reason:a}),{mutate:d}=crt({reason:a}),m=f.useCallback(h=>{urt(h)?s(h.uuid,h.name):h.connection_file_url&&window.open(h.connection_file_url,"_blank")},[s]),p=f.useCallback(h=>[{type:"default",text:i.formatMessage({defaultMessage:"View",id:"FgydNeoT78"}),icon:Lk,onClick:g=>{g.stopPropagation(),h.connection_file_url&&window.open(h.connection_file_url,"_blank")},show:!!h.connection_file_url},{type:"default",text:i.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),icon:Vd,onClick:g=>{g.stopPropagation(),u({fileUuids:[h.uuid],fileRepoInfo:t})},show:r},{type:"default",text:i.formatMessage({defaultMessage:"Resync",id:"yr3UuWC6qt"}),icon:gD,onClick:g=>{g.stopPropagation(),d({fileUuids:[h.uuid],fileRepoInfo:t})},show:r&&h.connection_type!==Ot.LOCAL}],[i,r,u,d,t]);return n?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"py-sm",children:o.jsx("div",{className:"w-full",children:o.jsx(To,{variant:"subtle",size:"regular",blockCount:8,noLines:!0,divider:!0,className:"w-full"})})})}):o.jsx(o.Fragment,{children:e.map((h,g)=>o.jsx(R.Fragment,{children:o.jsxs("tr",{className:"border-subtler animate-in fade-in border-b align-middle duration-500",onClick:()=>m(h),children:[o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(H,{className:"shrink-0",children:h.connection_type===Ot.LOCAL?o.jsx(le,{icon:By,size:"lg"}):o.jsx("img",{src:Bi(h.connection_type)??"",alt:h.name,width:24,height:24})})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(F,{children:o.jsx(le,{icon:drt(h)})}),o.jsx(F,{variant:"small",color:"light",className:"truncate",children:h.name})]})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(F,{variant:"small",color:"light",className:"truncate",children:mrt(h.updated,l)})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(F,{variant:"small",color:h.status==="SYNC_ERROR"?"red":"light",className:"truncate",children:prt(h.status,i)})}),o.jsx("td",{className:"py-sm",children:o.jsx("span",{className:"flex justify-end",children:o.jsx(sn,{isMobileStyle:c,placement:"bottom-end",items:p(h),children:o.jsx(Te,{noPadding:!0,size:"small",icon:$d})})})})]})},g))})});cxe.displayName="ConnectorsTableFiles";const Vi=10,dX=20,grt=Vi*41+46,uxe=R.memo(({files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,allowEditSources:r,selectedFiles:s,currentPath:a,setSelectedFiles:i,setCurrentPath:l,handleFolderClick:c,handleResetSearch:u})=>{const d=Z(),m=f.useMemo(()=>R.memo(()=>{const p=f.useCallback(()=>{l([]),u()},[]);return a.length===0?null:o.jsxs("div",{className:"mb-md gap-x-xs flex items-center",children:[o.jsx(F,{variant:"tiny",color:a.length===0?void 0:"light",className:"cursor-pointer hover:underline",onClick:p,children:d.formatMessage({defaultMessage:"All",id:"zQvVDJ+j59"})}),a.map((h,g)=>o.jsx(dxe,{item:h,index:g,currentPathLength:a.length,handleResetSearch:u,setCurrentPath:l},h.uuid))]})}),[a,u,d,l]);return o.jsxs("div",{style:{minHeight:grt},className:"px-sm pt-md flex flex-col",children:[o.jsx(m,{}),o.jsx("div",{className:"grow-0",children:o.jsxs("table",{className:"w-full table-fixed",children:[o.jsx("thead",{className:"border-subtler border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"pb-sm w-[10%] text-left",children:o.jsx(F,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Source",id:"aH4De2Y20k"})})}),o.jsx("th",{className:"pb-sm w-[45%] text-left",children:o.jsx(F,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Name",id:"HAlOn1ZsuY"})})}),o.jsx("th",{className:"pb-sm w-1/4 text-left",children:o.jsx(F,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Date",id:"P7PLVjLe4f"})})}),o.jsx("th",{className:"pb-sm w-1/5 text-left",children:o.jsx(F,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Status",id:"tzMNF3jWoU"})})})]})}),o.jsx("tbody",{children:o.jsx(cxe,{allowEditSources:r,files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,selectedFiles:s,setSelectedFiles:i,onFolderClick:c})})]})}),!n&&e.length===0&&o.jsx("div",{className:"flex grow items-center justify-center",children:o.jsx(F,{color:"light",variant:"small",className:"text-center",children:d.formatMessage({defaultMessage:"Files that you sync will be found here",id:"uT32Xg01/F"})})})]})});uxe.displayName="ConnectorsTableContent";const dxe=R.memo(({item:e,index:t,currentPathLength:n,handleResetSearch:r,setCurrentPath:s})=>{const a=f.useCallback(()=>{s(i=>i.slice(0,t+1)),r()},[r,t,s]);return o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(F,{variant:"small",color:"light",children:"/"}),o.jsx(le,{icon:yue}),o.jsx(F,{variant:"tiny",color:t===n-1?void 0:"light",className:"cursor-pointer hover:underline",onClick:a,children:e.name})]},e.uuid)});dxe.displayName="PathBlockFactory";function yrt(e,t,n=2){if(e==null)return"";const r=e.includes(".")?e.slice(e.lastIndexOf(".")):"",s=e.substring(0,e.length-r.length);return s.length>t?s.substring(0,t-r.length-3)+".".repeat(n)+r:s+r}const E_=e=>{try{return(new URL(e).pathname.split("/").pop()||"").split(".").pop()?.toLowerCase()}catch{return e.split(".").pop()?.toLowerCase()}},fxe=e=>e.file.type.includes("image"),xrt=e=>e.file.type==="application/pdf",vrt=e=>e.file.type==="text/csv"||e.file.type=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",brt=e=>e.file.type==="text/plain"||e.file.type==="application/msword"||e.file.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||e.file.type==="text/markdown",D8={txt:"text/plain",pdf:"application/pdf",jpeg:"image/jpeg",jpg:"image/jpeg",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",md:"text/markdown",png:"image/png",csv:"text/csv"},_rt=e=>{if(e<0)throw new Error("Number of bytes cannot be negative");const t=["B","KB","MB","GB"];let n=0,r=e;for(;r>=1e3&&n<t.length-1;)r/=1e3,n++;return`${r%1===0?r.toString():r.toFixed(1)} ${t[n]}`},oB=[".txt",".pdf",".docx",".pptx",".xlsx",".md",".csv"],lB=[".txt",".pdf",".jpg",".jpeg",".png",".docx",".pptx",".xlsx",".md",".csv"],cB=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],fX=27,wrt=2e4;let bj=!1,Vc=null;const Crt=()=>{const e=f.useRef(null),t=f.useRef(null);let n="";typeof window<"u"&&(window.location.hostname==="localhost"?n=`${window.location.protocol}//${window.location.hostname}:${window.location.port}/account/connectors`:n=`${window.location.protocol}//${window.location.hostname}/account/connectors`);const r=(c,u)=>u?c==="sharepoint"?u:u+"-my":null,s=f.useCallback(async(c,u)=>{u.success=!1;const d=r(c.connector,c.tenantName);u.tenant=d,Vc||(Vc=await(await Q(()=>import("./index-C3FxZ4wa.js"),__vite__mapDeps([0,1]))).PublicClientApplication.createPublicClientApplication({auth:{authority:d?"https://login.microsoftonline.com/common":"https://login.microsoftonline.com/consumers",clientId:c.clientId,redirectUri:n},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!0}}));const m=d?[`https://${d}.sharepoint.com/.default`]:["OneDrive.ReadWrite"];u.scopes=m;const p={scopes:m,login_hint:c.loginHint,prompt:"select_account"};let h=null,g=Vc.getActiveAccount();if(g||(g=Vc.getAllAccounts().find(x=>x.username===c.loginHint)??null),u.hasActiveAccount=!!g?.username,g)try{Vc.setActiveAccount(g),h=(await Vc.acquireTokenSilent(p)).accessToken}catch(y){u.silentAcquisitionError=y instanceof Error?y.toString():y}if(!h&&!bj)try{bj=!0;const y=await Vc.loginPopup(p);Vc.setActiveAccount(y.account),h=(await Vc.acquireTokenSilent(p)).accessToken}catch(y){u.interactiveAcquisitionError=y instanceof Error?y.toString():y}finally{bj=!1}else h||(u.interactiveAuthenticationSkipped=!0);if(h)return u.success=!0,u.accessTokenLength=h.length,h;throw Error("Access token not acquired")},[n]),a=f.useCallback(c=>{const u=r(c.connector,c.tenantName);let d=c.mode==="source"?oB:lB;d=c.isAudioVideoFilesEnabled?d.concat(cB):d;const m=c.connector==="sharepoint"?{recent:!0,oneDrive:!1,sharedLibraries:!0}:{recent:!0,oneDrive:!0,sharedLibraries:!1},p={sdk:"8.0",messaging:{origin:n,channelId:fX},authentication:{},entry:c.connector==="sharepoint"?{sharePoint:{}}:{oneDrive:{}},typesAndSources:{mode:c.mode==="attachment"?"files":"all",filters:d,pivots:m},selection:{mode:"multiple"}},h=new URLSearchParams({filePicker:JSON.stringify(p)});return c.webUrl?`${c.webUrl}/_layouts/15/FilePicker.aspx?${h}`:u?`https://${u}.sharepoint.com/_layouts/15/FilePicker.aspx?${h}`:`https://onedrive.live.com/picker?${h}`},[n]),i=f.useCallback(async c=>{const u=b=>{window.removeEventListener("message",p),t.current?.removeEventListener("message",m),t.current?.close(),e.current?.close(),b?c.onError?.(b):c.onCancel?.()},d=async(b,_)=>await new Promise((w,C)=>{const S=setTimeout(()=>{C(new Error("Request timed out"))},wrt);s(b,_).then(E=>{clearTimeout(S),w(E)}).catch(E=>{clearTimeout(S),C(E)})}),m=async b=>{const _={};switch(b.data.type){case"command":t.current?.postMessage({type:"acknowledge",id:b.data.id});const w=b.data.data;switch(w.command){case"authenticate":try{const C=await d(c,_);t.current?.postMessage({type:"result",id:b.data.id,data:{result:"token",token:C}})}catch(C){_.errorStep="authenticateCommand",_.error=C instanceof Error?C.toString():C,u(C)}finally{c.log?.(c.connectionType??c.connector.toUpperCase(),_)}break;case"pick":t.current?.postMessage({type:"result",id:b.data.id,data:{result:"success"}}),c.onPicked?.(w.items),u();break;case"close":u();break;default:u();break}break}},p=async b=>{if(b.source&&b.source===e.current){const _=b.data;_.type==="initialize"&&_.channelId===fX&&(t.current=b.ports[0],t.current.addEventListener("message",m),t.current.start(),t.current.postMessage({type:"activate"}))}};let h;const g={};try{h=await s(c,g)}catch(b){g.errorStep="initialization",g.error=b instanceof Error?b.toString():b,u(b);return}finally{c.log?.(c.connectionType??c.connector.toUpperCase(),g)}const y=document.getElementById("microsoft-file-picker");if(!y){u();return}if(e.current=y.contentWindow,!e?.current){u();return}const x=e.current.document.createElement("form");x.setAttribute("action",a(c)),x.setAttribute("method","POST"),e.current.document.body.append(x);const v=e.current.document.createElement("input");v.setAttribute("type","hidden"),v.setAttribute("name","access_token"),v.setAttribute("value",h),x.appendChild(v),e.current.document.body.appendChild(x),x.submit(),window.addEventListener("message",p)},[s,a]),l=f.useCallback((c,u)=>{let d;if(c.parentReference.sharepointIds?.siteId&&u==="sharepoint"){const p={item_id:c.id,drive_id:c.parentReference.driveId,site_id:c.parentReference.sharepointIds.siteId};d=JSON.stringify(p)}else d=c.id;const m=E_(c.name);return m?{id:d,name:c.name,sizeBytes:c.size,mimeType:D8[m]}:null},[]);return f.useMemo(()=>({openPicker:i,toPickerDocument:l}),[i,l])},F8="box-file-picker",Srt="0";let AC=null,mX=!1;const Ert=()=>AC||(AC=new Promise((e,t)=>{const n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.css";const r=document.createElement("script");r.src="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.js",r.onload=()=>{if(!mX){const s=document.createElement("style");s.textContent=`
                .be .be-header input[type="search"] {
                    background: white;
                }

                .btn-content {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }
            `,document.head.appendChild(s),mX=!0}e()},r.onerror=t,n.onload=()=>document.body.appendChild(r),document.head.appendChild(n)}),AC),mxe=({apiKey:e,mode:t,isAudioVideoFilesEnabled:n,onPicked:r,onCancel:s,onError:a})=>{const i=f.useRef(null),l=f.useCallback(async(u="file")=>{try{if(await Ert(),!document.getElementById(F8)){a?.("Attempted to open picker when container isn't ready");return}let m=t==="source"?oB:lB;m=n?m.concat(cB):m;const p=[...m,".gdocs",".gsheets",".gslides"];i.current&&(i.current.removeListener("choose",r),i.current.removeListener("cancel",s),i.current.hide(),i.current=null);let h;u==="folder"?h=new window.Box.FolderPicker:h=new window.Box.FilePicker,i.current=h,h.addListener("choose",r),h.addListener("cancel",s),h.show(Srt,e,{container:`#${F8}`,logoUrl:E3,extensions:p.join(","),canUpload:!1,canSetShareAccess:!1,canCreateNewFolder:!1,chooseButtonLabel:"Select",cancelButtonLabel:"Cancel"})}catch(d){a?.(d);return}},[e,a,t,s,r,n]),c=f.useCallback(()=>{i.current&&(i.current.removeListener("choose",r),i.current.removeListener("cancel",s),i.current.hide(),i.current=null)},[r,s]);return f.useMemo(()=>({openPicker:l,cleanupPicker:c}),[l,c])},uB=R.memo(({isOpen:e,onClose:t,cleanupPicker:n})=>(f.useEffect(()=>()=>{n()},[n]),o.jsx(on,{variant:"wide",isOpen:e,onClose:t,renderCloseButton:!0,children:o.jsx("div",{id:F8,style:{height:"800px"}})})));uB.displayName="BoxFilePickerModal";const vcn=async({backendUUID:e,title:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ae.PUT("/rest/article/section/title/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,title:t},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Error updating article section title",{cause:a});return s},bcn=async({backendUUID:e,heroOffset:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ae.PUT("/rest/article/section/hero_offset/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,hero_offset:t},timeoutMs:Fe()});if(a)throw new Error("Error updating article section hero offset",{cause:a});return s},_cn=async({backendUUID:e,rwToken:t,reason:n})=>{if(!e||!t)return;const{data:r,error:s}=await ae.DELETE("/rest/article/section/{section_uuid}",n,{params:{path:{section_uuid:e}},body:{read_write_token:t},timeoutMs:Fe()});if(s)throw new Error("Error deleting article section",{cause:s});return r},wcn=async({sections:e,rwToken:t,reason:n})=>{if(!t||e.length===0)return;const{data:r,error:s}=await ae.PUT("/rest/article/sections/layout",n,{body:{read_write_token:t,sections:e},timeoutMs:Fe()});if(s)throw new Error("Error updating article sections layout",{cause:s});return r},Ccn=async({sectionUUID:e,mediaItem:t,targetIndex:n,rwToken:r,isNewMediaItem:s=!1,reason:a})=>{if(!r)return;const{data:i,error:l}=await ae.PUT("/rest/article/section/image/{section_uuid}",a,{params:{path:{section_uuid:e}},timeoutMs:5500,body:{read_write_token:r,media_item:t,target_index:n,new_media_item:s}});if(l)throw new Error("Error updating article section image",{cause:l});return i},Scn=async({sectionUUID:e,mediaItem:t,rwToken:n,isNewMediaItem:r,reason:s})=>{n&&await ae.PUT("/rest/page/section/media/add/{section_uuid}",s,{params:{path:{section_uuid:e}},timeoutMs:Fe(),method:"PUT",body:{read_write_token:n,media_item:t,new_media_item:r}})},Ecn=async({sectionUUID:e,image:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ae.POST("/rest/article/section/upload_image/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Fe(),method:"POST",body:{read_write_token:n,content_type:t.type},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Failed to upload image to section media items",{cause:a});return s},Mcn=async({sectionUUID:e,mediaItemImageUrl:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ae.PUT("/rest/article/section/media/remove/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Fe(),body:{read_write_token:n,media_item_image_url:t}});if(a)throw new Error("Error removing media item from section selected images",{cause:a});return s},kcn=async({sectionUUID:e,relativeMove:t,rwToken:n,articleSlug:r,reason:s})=>{if(!n||!r)return;const{data:a,error:i}=await ae.PUT("/rest/article/reorder/{article_slug}",s,{params:{path:{article_slug:r}},timeoutMs:Fe(),method:"PUT",body:{read_write_token:n,section_uuid:e,relative_move:t}});if(i)throw new Error("Error reordering article section",{cause:i});return a},Tcn=async({backendUUID:e,reason:t})=>{if(!e)return;const{data:n,error:r}=await ae.POST("/rest/article/section/terminate",t,{body:{entry_uuid:e},timeoutMs:1500,method:"POST",numRetries:1});if(r)throw new Error("Error terminating article section streaming",{cause:r});return n},Ncn=async({sectionUUID:e,mediaItem:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ae.PUT("/rest/article/section/add/media_item/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,media_item:t}});if(a)throw new Error("Error adding article section media item",{cause:a});return s},Mrt=async({entryUUIDs:e,rwToken:t,reason:n})=>{await ae.DELETE("/rest/thread",n,{body:{entry_uuids:e,read_write_token:t??""}})},krt=async({entryUUID:e,rwToken:t,callback:n,reason:r})=>{n?.(),await ae.DELETE("/rest/thread/delete_thread_by_entry_uuid",r,{body:{entry_uuid:e,read_write_token:t??""}})},Trt=async({backendUUID:e,url:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ae.PUT("/rest/thread/entry/remove_widget",r,{timeoutMs:Fe(),body:{entry_uuid:e,read_write_token:n,url:t}});if(a)throw new Error("Error removing widget from entry",{cause:a});return s},jcn=async({backendUUID:e,rwToken:t,value:n,reason:r})=>{const{data:s,error:a}=await ae.PUT("/rest/article/emphasize_sources/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Fe(),method:"PUT",body:{read_write_token:t,value:n}});if(a)throw new Error("Error toggling emphasize sources",{cause:a});return s},Acn=async({connectorName:e,apiKey:t,reason:n})=>{const{data:r,error:s}=await ae.POST("/rest/connectors/store-api-key",n,{body:{api_key:t,connector_id:e}});if(s)throw new Error(`Failed to store ${e} API key`,{cause:s});return r},Nrt=async({name:e,referrer:t,referrerId:n,redirectPath:r,unauthedRedirectPath:s,reason:a})=>{try{let i="";if(e!=="factset"){const u=new URLSearchParams;t&&(u.append("referrer",t),n&&u.append("referrer_id",n)),r&&u.append("redirect_path",r),s&&u.append("unauthed_redirect_path",s),i="?"+u.toString()}const l=await Er({urlPath:`/rest/connectors/${e}/connect${i}`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:Fe(),numRetries:1,reason:a});if(!l.ok)throw new Error("Failed to initiate OAuth flow");return(await l.json()).redirect_url}catch(i){return ne.error("Error fetching factset OAuth redirect URL:",i),null}},jrt=async({connectorName:e,reason:t})=>{const n=`disconnectConnector:${e}`;try{const r=await Er({urlPath:`/rest/connectors/${e}/disconnect`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:Fe({productionMs:500}),numRetries:1,reason:t});if(!r.ok)throw new Error("Failed to disconnect connector");return await r.json()}catch(r){return ne.log(`Error in ${n}:`,r),null}},Art=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/connections/{uuid}/update",t,{params:{path:{uuid:e}},body:{disconnect:!0}});if(r)throw new Error("Failed to disconnect file connector",{cause:r});return n},Irt=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/connections/{uuid}/delete",t,{params:{path:{uuid:e}}});if(r)throw new Error("Failed to disconnect file connector and delete files",{cause:r});return n},Rrt=async({connectorName:e,fileIds:t,fileRepoInfo:n,folder_ids:r,reason:s})=>{const a="uploadConnectorFiles";try{const i=await Er({urlPath:`/rest/connectors/${e}/files`,method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({file_ids:t,file_repository_info:n,folder_ids:r}),reason:s});if(!i.ok)throw new Error("Failed to upload connector files");return await i.json()}catch(i){throw ne.log(`Error in ${a}:`,i),i}},Prt=async({reason:e})=>{const{data:t,error:n}=await ae.POST("/rest/connectors/box/picker",e);if(n)throw new Error("Failed to refresh box picker credentials",{cause:n});return t},Ort=async({connectionType:e,content:t,reason:n})=>{const{data:r,error:s}=await ae.POST("/rest/connectors/picker/log",n,{body:{connection_type:e,content:t}});if(s)throw new Error("Failed log connector picker",{cause:s});return r},Lrt=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/file-repository/delete-files",t,{body:e});if(r)throw new Error("Failed to delete files",{cause:r});return n};class dB extends Error{constructor(){super("Downloads are disabled"),this.name="DownloadsDisabledError"}}class fB extends Error{constructor(){super("PDF downloads are restricted"),this.name="PdfUntrustedOriginError"}}class mB extends Error{constructor(){super("This file belongs to a different organization"),this.name="UserNotInFileOrgError"}}const Drt=async({request:e,reason:t})=>{const n=await ae.POST("/rest/file-repository/download",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new dB;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new fB;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new mB}throw new Ie("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n.error})}return n.data},Frt=async({request:e,reason:t})=>{const n=await ae.POST("/rest/file-repository/download-attachment",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new dB;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new fB;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new mB}throw new Ie("API_CLIENTS_ERROR",{message:"Failed to download attachment",cause:n.error})}return n.data},Icn=async({seedDirectoryRequest:e,reason:t})=>{const n="seedDirectoryWithExampleFiles";try{if((await ae.POST("/rest/file-repository/seed-examples",t,{body:e,timeoutMs:Fe(),numRetries:1})).response.ok)return;throw new Error("Failed to seed file repository")}catch(r){throw ne.log(`Error in ${n}:`,r),r}},pxe=e=>{const{accessLevel:t,enableWebByDefault:n,...r}=e;return{...r,access:t,enable_web_by_default:n}},Urt=async({collectionUuid:e,changes:t,reason:n})=>{const r=pxe(t),s=await ae.POST("/rest/collections/edit_collection/{collection_uuid}",n,{params:{path:{collection_uuid:e}},body:r,timeoutMs:Fe()});if(!s.response.ok||!s.data)throw new Error("Failed to edit collection",{cause:s.error});const a=s.data,{access:i,...l}=a;return i!==void 0?{...l,accessLevel:i}:l},pX=async({params:e,reason:t})=>{const n=pxe(e);e.template_id&&(n.template_id=e.template_id);const r=await ae.POST("/rest/collections/create_collection",t,{body:n,timeoutMs:Fe()});if(!r.response.ok||!r.data)throw new Error("Failed to create collection",{cause:r.error});return r.data},Rcn=async({entryUUID:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/entry/convert-to-report/{entry_uuid}",t,{params:{path:{entry_uuid:e}},timeoutMs:Fe()});if(r)throw new Error("Failed to convert entry to report",{cause:r});return n},Pcn=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Fe(),numRetries:1});if(r)throw new Error("Failed to subscribe to space",{cause:r});return n},Ocn=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await ae.DELETE("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Fe(),numRetries:1});if(r)throw new Error("Failed to unsubscribe from space",{cause:r});return n},Lcn=async({reason:e})=>{const{error:t}=await ae.DELETE("/rest/user/delete-account",e);if(t)throw new Error("Failed to delete account",{cause:t})},Brt=async({collectionUuid:e,reason:t})=>{const{error:n}=await ae.DELETE("/rest/collections/delete_collection/{collection_uuid}",t,{params:{path:{collection_uuid:e}},timeoutMs:Fe(),numRetries:1});if(n)throw new Error("Failed to delete collection",{cause:n})},pB=async({contextUUID:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/thread/mark_viewed/{context_uuid}",t,{params:{path:{context_uuid:e}},timeoutMs:Fe(),numRetries:1});if(r)throw new Error("Failed to mark thread as viewed",{cause:r});return n};function hxe({reason:e}){const t=xt();return St({mutationFn:()=>Prt({reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["get_user_settings"]})}})}function hB({reason:e,onConnectorFileUploadSuccess:t}){const n=xt(),{deprecatedOpenToast:r}=Mn(),s=Z(),a=f.useRef(null);return f.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),St({mutationFn:async({connectorName:i,fileIds:l,fileRepoInfo:c,folder_ids:u})=>await Rrt({connectorName:i,fileIds:l,fileRepoInfo:c,folder_ids:u,reason:e}),onSuccess:()=>{a.current=setTimeout(()=>{n.invalidateQueries({predicate:i=>i.queryKey[0]===_ye||i.queryKey[0]===wye||i.queryKey[0]===Sye||i.queryKey[0]===Eye})},5e3),r(s.formatMessage({defaultMessage:"You'll receive an email when the sync is complete",id:"in8zoTTNmN"}),"success",5),t?.()}})}const Vrt=({initialApiKey:e,expiresAtString:t,mode:n,isSpace:r=!1,fileRepoInfo:s,isAudioVideoFilesEnabled:a,reason:i})=>{const l=_t(),c=Z(),{deprecatedOpenToast:u}=Mn(),{mutateAsync:d}=hB({reason:i}),{mutateAsync:m}=hxe({reason:i}),[p,h]=f.useState(!1),[g,y]=f.useState(""),[x,v]=f.useState("file"),b=f.useCallback(()=>h(!1),[]),_=f.useCallback(M=>{ne.error(`${zg} file picker failed to open: ${M}`),u(c.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:zg}),"error",5)},[c,u]),w=f.useCallback(M=>{const k=M.map(N=>N.id);d({connectorName:"box",fileIds:x=="file"?k:[],fileRepoInfo:r?s:void 0,folder_ids:x=="folder"?k:[]}),r||l.push(`/account/files?connector=box&uploadCount=${k.length}`),b()},[l,d,r,s,b,x]),{openPicker:C,cleanupPicker:S}=mxe({apiKey:g||e,mode:n,onPicked:w,onCancel:b,onError:_,isAudioVideoFilesEnabled:a}),E=f.useCallback(async(M="file")=>{if(t){const k=new Date(t);if(isNaN(k.getTime())){ne.error("Unparsable expiration timestamp from Box connector"),h(!0);return}if(k<new Date){const P=await m();y(P.api_key)}}h(!0),v(M)},[t,m]);return f.useEffect(()=>{p&&setTimeout(()=>{C(x)},100)},[p,C,x]),f.useMemo(()=>({isOpen:p,onOpen:E,onClose:b,cleanupPicker:S}),[S,p,b,E])},Rn="/account",Df="/org",gxe=()=>o.jsx("div",{className:"flex flex-1 items-center justify-end opacity-50",children:o.jsx(le,{icon:xa,size:"sm"})}),nn={Account:{show:!0,icon:pP,href:`${Rn}/details`},ProPerks:{show:!0,icon:bue,href:`${Rn}/pro-perks`},Preferences:{show:!0,icon:cE,href:`${Rn}/preferences`},Personalize:{show:!0,icon:xue,href:`${Rn}/personalize`},Assistant:{show:!0,icon:gp,href:`${Rn}/assistant`},Connectors:{show:!0,icon:vue,href:`${Rn}/connectors`},Imports:{show:!0,icon:yD,href:`${Rn}/files`},Products:{show:!0,icon:gLe,href:`${Rn}/purchases`},API:{show:!0,icon:Sue,href:`${Rn}/api`},Enterprise:{show:!0,icon:io,trailingComponent:o.jsx(gxe,{})},Reservations:{show:!0,icon:yLe,href:`${Rn}/reservations`},Notifications:{show:!0,icon:yp,href:`${Rn}/notifications`},Tasks:{show:!0,icon:Om,href:`${Rn}/tasks`},Shortcuts:{show:!0,icon:Dk,href:`${Rn}/shortcuts`},SiteInstructions:{show:!0,icon:hLe,href:`${Rn}/site-instructions`}},ni={Organization:{show:!0,icon:io,href:`${Rn}${Df}/details`},Members:{show:!0,icon:vLe,href:`${Rn}${Df}/members`},"User access":{show:!0,icon:bLe,href:`${Rn}${Df}/user-access`},Permissions:{show:!0,icon:Og,href:`${Rn}${Df}/permissions`},Insights:{show:!0,icon:wue,href:`${Rn}${Df}/insights`},"Org Connectors":{show:!0,icon:vue,href:`${Rn}${Df}/connectors`},"Org Imports":{show:!0,icon:yD,href:`${Rn}${Df}/files`}},ra={APIGroup:{show:!0,icon:io,href:`${Rn}/api/group`},APIMembers:{show:!0,icon:hP,href:`${Rn}/api/members`},APIBilling:{show:!0,icon:_ue,href:`${Rn}/api/billing`},UsageMetrics:{show:!0,icon:wue,trailingComponent:o.jsx(gxe,{})},AccountLimits:{show:!0,icon:xLe,href:`${Rn}/api/limits`},APIKeys:{show:!0,icon:Cue,href:`${Rn}/api/keys`},APIFiles:{show:!0,icon:yD,href:`${Rn}/api/files`},APIPlayground:{show:!0,icon:Lg,href:`${Rn}/api/playground/search`}},$rt=()=>`${Rn}/details`,Gu=()=>Rn,yxe=({clientId:e})=>{const[t,n]=f.useState(!1);f.useEffect(()=>{if(!e)return;const s=document.createElement("script");return s.src="https://www.dropbox.com/static/api/2/dropins.js",s.id="dropboxjs",s.setAttribute("data-app-key",e),s.onload=()=>n(!0),s.onerror=()=>n(!1),document.body.appendChild(s),()=>{const a=document.getElementById("dropboxjs");a&&document.body.removeChild(a)}},[e]);const r=f.useCallback(s=>{if(!t)return;let a=s.mode==="source"?oB:lB;a=s.isAudioVideoFilesEnabled?a.concat(cB):a,window.Dropbox.choose({success:s.onPicked,error:i=>s.onError?.(i),multiselect:!0,extensions:a,folderselect:s.mode==="source"})},[t]);return f.useMemo(()=>({isReady:t,openPicker:r}),[t,r])},Wrt=({clientId:e,isSpace:t=!1,fileRepoInfo:n,isAudioVideoFilesEnabled:r,reason:s})=>{const a=_t(),i=Z(),{deprecatedOpenToast:l}=Mn(),{mutateAsync:c}=hB({reason:s}),{openPicker:u}=yxe({clientId:e}),d=Gu(),m=f.useCallback(g=>{const y=g.map(x=>x.id);c({connectorName:"dropbox",fileIds:y,fileRepoInfo:t?n:void 0}),t||a.push(`${d}/files?connector=dropbox&uploadCount=${y.length}`)},[a,c,t,n,d]),p=f.useCallback(g=>{ne.error("A Dropbox file picker error occured:",g),l(i.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:ju}),"error",5)},[i,l]),h=f.useCallback(g=>{u({mode:g,onPicked:m,onError:p,isAudioVideoFilesEnabled:r})},[u,m,p,r]);return f.useMemo(()=>({openPicker:h}),[h])};function Hrt({reason:e}){return St({mutationFn:async({connectionType:t,content:n})=>{await Ort({connectionType:t,content:n,reason:e})}})}const xxe=({reason:e,mode:t})=>{const n=Z(),[r,s]=f.useState(!1),[a,i]=f.useState(null),{deprecatedOpenToast:l}=Mn(),{openModal:c,closeModal:u}=wt(),{openPicker:d,toPickerDocument:m}=Crt(),{mutateAsync:p}=Hrt({reason:e}),h=f.useCallback(b=>{b.connector==="sharepoint"&&t==="attachment"?c("sharepointSiteModal",{onSelectSite:_=>{u(),b&&(s(!0),i({...b,webUrl:_}),d({...b,webUrl:_}))}}):(s(!0),i(b),b.connector==="onedrive"&&d(b))},[u,t,c,d]),g=f.useCallback(()=>{s(!1),i(null)},[s,i]),y=f.useCallback(b=>{ne.error("A Microsoft file picker error occured:",b),g(),l(n.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:Kqe}),"error",5)},[g,l,n]),x=f.useCallback((b,_)=>{p({connectionType:b,content:_})},[p]),v=f.useCallback(b=>{a&&(i({...a,webUrl:b}),d({...a,webUrl:b}))},[a,d]);return f.useMemo(()=>({onOpen:h,onClose:g,onError:y,onSelectSite:v,toPickerDocument:m,log:x,isOpen:r,options:a}),[r,x,g,y,h,v,a,m])},gB=/(\[\d{1,3}\])/,vxe=/(\[\d{1,3},\s*\{ts:.*\}\])/,Cm=new RegExp(gB.source+"|"+vxe.source),yB=(e,t)=>{if(Cm.test(e))if(gB.test(e)){const n=parseInt(e.substring(1,e.length-1))-1,r=t?.[n]??null;return r||void 0}else{const n=e.indexOf(","),r=parseInt(e.substring(1,n))-1,s=t?.[r]??null;if(!s)return;if(!s.url){ne.warn("[parseCitation] web_result has no url",{web_result:s});return}return s.url=zrt(s.url,e),s}},zrt=(e,t)=>{const n=e.split("&")[0],r=t.indexOf(":");if(r===-1)return n;const s=t.indexOf("}"),a=t.substring(r+1,s);return n+`&t=${a}`},bxe=e=>{const t=vn.legacyParseBackendOutputStr(e);return t?t.answer.replace(Cm,""):null};function Grt(e,t){return e.startsWith("http")?e:t?`/discover/${t}/${e}`:`/page/${e}`}const qrt=e=>{const t=e.mode==="article"?"/page":"/search";return{title:e.title??"",preview:bxe(e.first_answer),threadCount:e.query_count,lastUpdated:e.last_query_datetime,href:`${t}/${e.slug}`,rwToken:e.read_write_token,focus:e.search_focus??"internet",entryUUID:e.uuid,contextUUID:e.context_uuid,copilot:e.mode==="copilot",socialInfo:e.social_info,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,featuredImage:e?.featured_images?.[0]?.image??null,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,threadAccess:e.thread_access,collection:e.collection,mode:e.mode,expiry:e.expiry_time,source:e?.source??null,displayModel:e.display_model,slug:e.slug}},Dcn=(e,t)=>({title:e.title??"",summary:e.summary??"",description:e.description??"",href:Grt(e.slug,t),backendUUID:e.uuid,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,authorUsername:e.author_username??null,featuredImage:e?.featured_images?.[0]?.image??null,collection:e.collection,socialInfo:e.social_info,feedbackState:e.feedback_state,supportedFeedbacks:e.supported_feedbacks,accessLevel:e.access??e.thread_access,preview:e.description.replace(Cm,""),offset:e.hero_offset,entryUUID:e.uuid,rwToken:e.read_write_token,lastUpdated:e.last_query_datetime,threadAccess:e.access,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,contextUUID:e.context_uuid,webResults:e.web_results_preview,feedUUID:e.feed_uuid}),Fcn={gpt4_limit:"gpt4Limit",gpt4_total:"gpt4Total",opus_limit:"opusLimit",pages_limit:"pagesLimit",upload_limit:"uploadLimit",article_image_upload_limit:"articleImageUploadLimit",max_files_per_user:"maxFilesPerUser",max_files_per_repository:"maxFilesPerRepository",default_image_generation_model:"defaultImageGenerationModel",query_count:"queryCount",query_count_copilot:"queryCountCopilot",query_count_mobile:"queryCountMobile",has_ai_profile:"hasAiProfile",referral_code:"referralCode",referral_num_success:"referralNumSuccess",referral_num_coupons:"referralNumCoupons",disable_training:"disableTraining",is_sidebar_collapsed:"isSidebarCollapsed",is_sidebar_pinned:"isSidebarPinned",sidebar_hidden_hubs:"sidebarHiddenHubs",subscription_tier:"subscriptionTier",create_limit:"createLimit",notif_status:"notifStatus",email_status:"emailStatus",allow_article_creation:"allowArticleCreation",is_verified:"isVerified"};function Krt(e){return e||{connectors:[]}}const hX=e=>({hasLoadedSettings:!0,gpt4Limit:e?.gpt4_limit??0,gpt4Total:e?.gpt4_total??0,pplxAlphaLimit:e?.pplx_alpha_limit??0,pplxBetaLimit:e?.pplx_beta_limit??0,pagesLimit:e?.pages_limit??0,uploadLimit:e?.upload_limit,defaultImageGenerationModel:e?.default_image_generation_model??"default",articleImageUploadLimit:e?.article_image_upload_limit??0,maxFilesPerUser:e?.max_files_per_user??0,maxFilesPerRepository:e?.max_files_per_repository??0,queryCount:e?.query_count??0,queryCountCopilot:e?.query_count_copilot??0,queryCountMobile:e?.query_count_mobile??0,hasAiProfile:e?.has_ai_profile??!1,referralCode:e?.referral_code??"",referralNumSuccess:e?.referral_num_success??0,referralNumCoupons:e?.referral_num_coupons??0,disableTraining:e?.disable_training??!1,isSidebarCollapsed:e?.is_sidebar_collapsed??!1,isSidebarPinned:e?.is_sidebar_pinned??!1,sidebarHiddenHubs:e?.sidebar_hidden_hubs??[],subscriptionTier:e?.subscription_tier??e?.subscription_tier??"null",stripeStatus:e?.stripe_status??"none",revenuecatStatus:e?.revenuecat_status??"none",revenuecatSource:e?.revenuecat_source??"none",createLimit:e?.create_limit??0,notifStatus:e?.notif_status??"daily",emailStatus:e?.email_status??"daily",hasDataRetentionWarning:e?.has_data_retention_warning??!1,allowArticleCreation:e?.allow_article_creation??!1,isVerified:e?.is_verified??!1,connectors:Krt(e?.connectors),connectorLimits:e?.connector_limits??{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}});function Yrt(e,t){return e?e.place_widget_block&&t.place_widget_block?{...t,place_widget_block:{...e.place_widget_block,review_summary:t.place_widget_block.review_summary}}:e.shopping_widget_block&&t.shopping_widget_block?{...t,shopping_widget_block:{...e.shopping_widget_block,review_summary:t.shopping_widget_block.review_summary}}:t:t}var U8;(function(e){e.SAVE_PROFILE="save_profile",e.DELETE_PROFILE="delete_profile",e.TOGGLE_DISABLED="toggle_disabled"})(U8||(U8={}));const Qrt=async({profileName:e,reason:t})=>{try{const{error:n,data:r}=await ae.GET("/rest/auth/get_special_profile",t,{params:{query:{profile_name:e}},timeoutMs:1500,numRetries:1});if(n||!r)throw new Ie("API_CLIENTS_ERROR",{message:`Failed to get special profile ${e}`,cause:n});return{unlimitedProSearch:!!r.unlimited_pro_search,maxModelSelection:!!r.max_model_selection,unlimitedResearch:!!r.unlimited_research,fileUpload:!!r.file_upload}}catch(n){return ne.error(n),{unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1}}},xB=async({reason:e})=>{try{const{error:t,data:n}=await ae.GET("/rest/user/subscription/refresh",e,{timeoutMs:Fe(),headers:{"X-Perplexity-CSRF-Protection":"1"}});if(t)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to refresh subscription status",cause:t});return n}catch(t){return ne.error(t),null}},_xe={has_profile:!1,disabled:!1,bio:"",location:"",response_language:"",location_lng:"",location_lat:"",use_memory:!1,use_search_history:!1,language:""},Xrt=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await ae.GET("/rest/user/get_user_ai_profile",t,{timeoutMs:1500,numRetries:Wu,headers:e});if(n||!r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get user profile",cause:n});return r}catch(n){return ne.error(n),_xe}},Zrt=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await ae.GET("/rest/user/settings",t,{timeoutMs:1500,numRetries:Wu,headers:e});if(n||!r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get user settings",cause:n});return hX(r)}catch(n){return ne.error(n),hX({})}},Ucn=async({amount:e,headers:t,reason:n})=>{try{const{error:r,data:s}=await ae.GET("/rest/shopping/user-discount-offer",n,{params:{query:{amount_micros:e}},headers:t});if(r||!s)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch user discount offer",cause:r});return s}catch(r){return ne.error(r),{}}},Bcn=async({action:e,location:t,response_language:n,bio:r,location_lat:s,location_lng:a,use_memory:i,use_search_history:l,reason:c})=>{const u={...t!==void 0&&{location:t},...n!==void 0&&{response_language:n},...r!==void 0&&{bio:r},...s!==void 0&&{location_lat:s},...a!==void 0&&{location_lng:a},...i!==void 0&&{use_memory:i},...l!==void 0&&{use_search_history:l},version:Sl},{error:d,data:m}=await ae.POST("/rest/user/save_user_ai_profile",c,{body:{action:e,updated_profile:u},timeoutMs:Fe(),numRetries:1});if(d)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to save user ai profile",cause:d});return m},gX=async({type:e,value:t,reason:n})=>{const r=e==="memory"?{use_memory:t}:{use_search_history:t},{error:s,data:a}=await ae.POST("/rest/user/save_user_ai_profile",n,{timeoutMs:Fe(),numRetries:1,headers:{"content-type":"application/json"},body:{action:U8.SAVE_PROFILE,updated_profile:{...r,version:Sl}}});if(s)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to update personal search settings",cause:s});return a},Vcn=async({settings:e,reason:t})=>{const{error:n}=await ae.PUT("/rest/user/save-settings",t,{body:{updated_settings:e},timeoutMs:Fe(),numRetries:1});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to save user settings",cause:n});return{status:"success"}},Jrt=async({reason:e})=>{const{error:t,data:n}=await ae.GET("/rest/user/previous-subscription",e,{timeoutMs:3e3,numRetries:1});if(t)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get user previous subscription",cause:t});return n},$cn=async({reason:e})=>{const{error:t,data:n}=await ae.GET("/rest/user/carrier-billing-subscription",e,{timeoutMs:Fe({productionMs:2e3})});if(t)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch carrier billing subscription status",cause:t});return n},est=async({filters:e,skipToken:t,reason:n})=>{const{error:r,data:s}=await ae.POST("/rest/connectors/sharepoint/sites",n,{body:{filters:e,skip_token:t},timeoutMs:Fe({productionMs:500}),numRetries:1});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch sharepoint sites",cause:r});return{sites:s.sites,skipToken:s.skip_token}},Wcn=async({orgId:e,reason:t,tokenName:n})=>{const{error:r,data:s}=await ae.POST("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",t,{params:{path:{api_org_id:e}},body:{token_name:n},timeoutMs:5e3});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to generate user api key v2",cause:r});return s},Hcn=async({orgId:e,authToken:t,reason:n})=>{const{error:r,data:s}=await ae.DELETE("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",n,{params:{path:{api_org_id:e}},body:{auth_token:t},timeoutMs:5e3});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to delete user api key v2",cause:r});return s},tst=async({reason:e})=>{try{const{error:t,data:n}=await ae.GET("/rest/auth/check_government_request_origin",e,{timeoutMs:1500,numRetries:Wu});if(t||!n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to check government origin",cause:t});return{isGovernmentRequestOrigin:n.is_government_request_origin}}catch(t){return ne.error(t),{isGovernmentRequestOrigin:!1}}},zcn=async({reason:e})=>{try{const{error:t,data:n}=await ae.GET("/rest/user/site-instructions",e,{timeoutMs:1500,numRetries:Wu});if(t||!n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get user site instructions",cause:t});return n}catch(t){return ne.error(t),{site_instructions:{}}}},Gcn=async({siteInstructions:e,reason:t})=>{const{error:n,data:r}=await ae.PUT("/rest/user/site-instructions",t,{body:{site_instructions:e},timeoutMs:Fe(),numRetries:1});if(n||!r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to save user site instructions",cause:n});return r},qcn=async({site:e,reason:t})=>{const{error:n,data:r}=await ae.POST("/rest/user/site-instructions/{site}/reset",t,{params:{path:{site:e}},timeoutMs:Fe(),numRetries:1});if(n||!r)throw new Ie("API_CLIENTS_ERROR",{message:`Failed to reset site instruction for ${e}`,cause:n});return r},nst=()=>{const e=Fn("isCollapsed"),{device:{isWindowsApp:t}}=Lt();return e===null?t:e==="true"},Sa=({enabled:e,reason:t,refetchOnMount:n})=>{const{locale:r}=Z(),s=r?{"accept-language":r}:{},a=async()=>Zrt({headers:s,reason:t}),i=lt(),l=nst(),{data:c,refetch:u,isLoading:d}=We({enabled:i?typeof e>"u"?!0:e:!1,queryKey:$3(),queryFn:a,networkMode:"always",refetchOnMount:n});return f.useEffect(()=>{c&&AOe({queryCount:c.queryCount,queryCountCopilot:c.queryCountCopilot,queryCountMobile:c.queryCountMobile})},[c]),{...c?{...c,isSidebarCollapsed:l}:{hasLoadedSettings:!1,gpt4Limit:void 0,gpt4Total:void 0,pplxAlphaLimit:void 0,pplxBetaLimit:void 0,pagesLimit:0,uploadLimit:void 0,articleImageUploadLimit:0,defaultImageGenerationModel:"default",queryCount:void 0,queryCountCopilot:void 0,queryCountMobile:void 0,hasAiProfile:!1,referralCode:void 0,referralNumSuccess:void 0,referralNumCoupons:void 0,disableTraining:!1,defaultCopilot:!1,isSidebarCollapsed:l,subscriptionTier:void 0,stripeStatus:"none",revenuecatStatus:"none",revenuecatSource:"none",createLimit:0,notifStatus:void 0,emailStatus:void 0,hasDataRetentionWarning:!1,allowArticleCreation:!1,connectors:{connectors:fe},connectorLimits:{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}},refetch:u,isLoading:d}},M_=({reason:e})=>{const{connectors:t}=Sa({reason:e}),n=f.useMemo(()=>(t?.connectors??[]).reduce((r,s)=>(r[s.name]=s,r),{}),[t]);return f.useMemo(()=>({connectorsMap:n}),[n])},vB=({reason:e})=>{const{connectors:t}=Sa({reason:e}),{connectorsMap:n}=M_({reason:e}),r=f.useMemo(()=>(t?.connectors??[]).filter(a=>(a.name==="google_drive"||a.name==="onedrive"||a.name==="sharepoint"||a.name==="dropbox"||a.name==="box")&&!n[a.name]?.connected),[n,t]),s=f.useMemo(()=>(t?.connectors??[]).filter(a=>!n[a.name]?.connected),[n,t]);return f.useMemo(()=>({disabledFileConnectors:r,disabledConnectors:s}),[s,r])},k_=({reason:e})=>{const{connectors:t,isLoading:n}=Sa({reason:e}),{connectorsMap:r}=M_({reason:e}),s=f.useMemo(()=>(t?.connectors??[]).filter(l=>ZY.includes(l.name)&&r[l.name]&&r[l.name].connected),[r,t]),a=f.useMemo(()=>(t?.connectors??[]).filter(l=>!ZY.includes(l.name)&&r[l.name]&&r[l.name].connected),[r,t]),i=f.useMemo(()=>(t?.connectors??[]).filter(l=>r[l.name]&&r[l.name].connected),[r,t]);return f.useMemo(()=>({enabledFileConnectors:s,enabledNonFileConnectors:a,enabledConnectors:i,isConnectorsLoading:n}),[i,s,a,n])};function ml(e,t){ne.info("Redirecting window",{reason:t,url:window.location.href,redirect:IOe(e).toString()}),window.location.href=e}const Q3=({reason:e})=>{const t=Ut(),n=t?.get("referrer"),r=t?.get("referrerId"),{$t:s}=Z(),{deprecatedOpenToast:a}=Mn(),i=f.useCallback(async({connectorName:l,redirectPath:c,customReferrer:u,customReferrerId:d,unauthedRedirectPath:m})=>{const p=await Nrt({name:l,referrer:u??n??void 0,referrerId:d??r??void 0,redirectPath:c??void 0,unauthedRedirectPath:m??void 0,reason:e});if(!p){a(s({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3);return}ml(p,"File connector")},[e,n,r,s,a]);return f.useMemo(()=>({handleConnect:i}),[i])},bB=({mode:e})=>{const t=Ft(),n=_l(),{currentOpenedModal:r}=wt(),s=f.useMemo(()=>t?.startsWith("/collections")||t?.startsWith("/spaces")?r==="uploadFilesModal"?"space_sources":"space":t?.startsWith("/search")?"thread":t?.startsWith("/settings")?null:"ask",[t,r]),a=f.useMemo(()=>n===null?null:t?.startsWith("/collections")||t?.startsWith("/spaces")?n.slug?typeof n.slug=="string"?n.slug:n.slug[0]??null:null:t?.startsWith("/search")?t.split("/").pop()??null:t?.startsWith("/settings")?null:e??null,[t,n,e]),i=Gu(),l=f.useMemo(()=>{const c=`${i}/connectors`,u=new URLSearchParams;if(s){const d=Array.isArray(a)?a[0]:a;u.append("referrer",s),d&&u.append("referrerId",d)}return c+"?"+u.toString()},[s,a,i]);return f.useMemo(()=>({referrer:s,referrerId:a,redirectPath:l}),[l,s,a])},wxe=({fileRepositoryType:e,offset:t,searchTerm:n,ownerId:r,reason:s})=>{const{$t:a}=Z(),i=xt(),l=_l(),{deprecatedOpenToast:c}=Mn(),{isEnterprise:u}=kn({reason:s}),d=tx(),m=W3(e,r,Vi,t,n),p=GU(r),h=Array.isArray(l?.slug)?l.slug[0]:l?.slug,g=h?WU(h):void 0,y=e==="USER"||e==="ORG"||e==="COLLECTION"&&!!r;return{...St({mutationFn:async v=>{if(!y){c(a({defaultMessage:"Unable to delete files.",id:"QYfmPDehhb"}),"error",3);return}return Lrt({request:{file_uuids:v,file_repository_info:{file_repository_type:e,owner_id:r}},reason:s})},onMutate:async v=>{await i.cancelQueries({queryKey:m});const b=i.getQueryData(m);return b&&i.setQueryData(m,_=>({..._,completedFiles:_.completedFiles.filter(w=>!v.includes(w.file_uuid)),processingFiles:_.processingFiles.filter(w=>!v.includes(w.file_uuid)),failedFiles:_.failedFiles.filter(w=>!v.includes(w.file_uuid)),numTotalFiles:Math.max((_.numTotalFiles||0)-v.length,0)})),{previousData:b}},onSuccess:()=>{u&&i.invalidateQueries({queryKey:d}),i.invalidateQueries({queryKey:m}),h&&i.invalidateQueries({queryKey:g}),i.invalidateQueries({queryKey:p})},onError:(v,b,_)=>{_?.previousData&&i.setQueryData(m,_.previousData),c(a({defaultMessage:"Failed to delete file",id:"aJlra1/tgY"}),"error",3)}}),isDeleteEnabled:y}},rst=({fileRepoInfo:e,reason:t})=>{const n=xt(),r=_l(),s=tx(),a=Array.isArray(r?.slug)?r.slug[0]:r?.slug,i=a?WU(a):void 0,l=W3(e.file_repository_type,e.owner_id,Vi,0,""),c=["list_file_directory",e.file_repository_type,e.owner_id];return St({mutationFn:async u=>{await aB({request:{file_repository_info:e,file_index_params:[{file_s3_url:u.file_s3_url,file_size:u.size,filename:u.name,file_uuid:u.file_uuid,replace_existing:!0}]},reason:t})},onMutate:async u=>{await n.cancelQueries({queryKey:l});const d={...u,state:"PROCESSING",error:void 0};return n.setQueriesData({queryKey:l},m=>{if(!m)return m;const p=m.completedFiles.filter(y=>y.name!==d.name),h=m.failedFiles.filter(y=>y.file_uuid!==d.file_uuid),g=[...m.processingFiles||[],d];return{...m,completedFiles:p,processingFiles:g,failedFiles:h}}),d},onSettled:()=>{n.invalidateQueries({queryKey:c}),e.file_repository_type==="ORG"&&n.invalidateQueries({queryKey:s}),a&&n.invalidateQueries({queryKey:i})}})},yX=10,sst=async(e,t)=>{const s=new FormData;Object.entries(t.fields).forEach(([i,l])=>{s.append(i,l)}),s.append("file",e);let a=null;for(let i=0;i<1;i++)try{i>0&&await new Promise(c=>setTimeout(c,2e3));const l=await fetch(t.s3_bucket_url,{method:"POST",body:s});if(!l.ok)throw new Error(`HTTP error ${l.status}: ${l.statusText}`);return}catch(l){a=l instanceof Error?l:new Error(String(l))}throw new Error(`UPLOAD_FAILED after 1 attempts: ${a?.message||"Unknown error"}`)},Cxe=({fileRepoInfo:e,setTotalFilesUploading:t,replaceExisting:n,reason:r,onLocalFileUploadSuccess:s})=>{const{$t:a}=Z(),i=xt(),l=tx(),c=_l(),u=Array.isArray(c?.slug)?c.slug[0]:c?.slug,d=u?WU(u):void 0,{deprecatedOpenToast:m}=Mn(),{session:p}=Nt(),h=p?.user?.email??"",g=Sa({reason:r}),y=["list_file_directory",e.file_repository_type,e.owner_id],x=["list_file_directory_infinite",e.file_repository_type,e.owner_id],v=e.file_repository_type==="USER"||e.file_repository_type==="ORG"||e.file_repository_type==="COLLECTION"&&!!e.owner_id;return{...St({mutationFn:async _=>{if(!v){m(a({defaultMessage:"Unable to upload files.",id:"GrtfijFWiu"}),"error",3);return}t(_.length);for(let w=0;w<_.length;w+=yX){const C=_.slice(w,w+yX),S=await rrt({request:{file_upload_params:C.map(N=>({filename:N.name,content_type:N.type,file_size:N.size})),file_repository_info:e},reason:r}),E=S.limits_reached[0];if(E==="FILE_REPOSITORY_LIMIT_EXCEEDED"){const N=g.maxFilesPerRepository;m(a({defaultMessage:"You have reached the file limit of {limit} files per repository.",id:"J0uyf2gB1u"},{limit:N}),"error",3);break}else if(E==="USER_FILE_LIMIT_EXCEEDED"){const N=g.maxFilesPerUser;m(a({defaultMessage:"You've reached your total file limit of {limit} files across My Files and all Spaces. Delete some files or upgrade your plan to add more",id:"3CuAQ4xs/C"},{limit:N}),"error",3);break}const k=(await Promise.allSettled(S.file_url_params.map((N,P)=>N&&C[P]?{fileUploadUrlInfo:N,file:C[P]}:null).filter(N=>N!==null).map(async({fileUploadUrlInfo:N,file:P})=>{try{return await sst(P,N),{file_s3_url:N.s3_object_url,filename:P.name,file_size:P.size,file_uuid:N.file_uuid,replace_existing:n}}catch(L){throw m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),L}}))).filter(N=>N.status==="fulfilled").map(N=>N.value);if(k.length>0&&await aB({request:{file_repository_info:e,file_index_params:k},reason:r}),S.limits_reached.length>0)break}},onMutate:async _=>{await i.cancelQueries({queryKey:y});const w=i.getQueryData(y),C=_.map(S=>({name:S.name,file_s3_url:"",file_title:null,file_description:null,file_uuid:Ir(),uploadedBy:h,state:"PROCESSING",size:S.size,date:new Date().toLocaleString(),isOptimistic:!0}));return i.setQueriesData({queryKey:y},S=>S&&{...S,processingFiles:[...S.processingFiles||[],...C]}),{previousData:w,optimisticFiles:C,uploadedFilesCount:_.length}},onError:(_,w,C)=>{m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),C?.previousData&&i.setQueriesData({queryKey:y},C.previousData)},onSettled:()=>{i.invalidateQueries({queryKey:y}),i.invalidateQueries({queryKey:x}),i.invalidateQueries({queryKey:["connector-files"]}),i.invalidateQueries({queryKey:["connector-files-infinite"]}),e.file_repository_type==="ORG"&&i.invalidateQueries({queryKey:l}),u&&i.invalidateQueries({queryKey:d})},onSuccess:()=>{s?.()}}),isUploadEnabled:v}},Sxe=({reason:e,onLocalFileUploadSuccess:t,collectionSlugOverride:n})=>{const r=xt(),{fileRepoInfo:s}=Do({reason:e,collectionSlugOverride:n}),[a,i]=f.useState(0),[l,c]=f.useState(""),[u,d]=f.useState(0),{mutate:m}=Cxe({fileRepoInfo:s,setTotalFilesUploading:d,reason:e,onLocalFileUploadSuccess:t}),{mutate:p}=wxe({fileRepositoryType:s.file_repository_type,offset:a,searchTerm:l,ownerId:s.owner_id,reason:e}),{mutate:h}=rst({fileRepoInfo:s,reason:e}),g=f.useCallback(b=>{p(b),u>0&&d(u-b.length)},[p,u]),y=f.useCallback(b=>{d(_=>_+1),h(b)},[h]),x=f.useCallback(b=>{r.setQueryData(["list_file_directory",s.file_repository_type,s.owner_id,Vi,a,l],_=>({..._,processingFiles:[],failedFiles:[],numTotalFiles:Math.max(0,(_?.numTotalFiles??0)-b.length)})),p(b.map(_=>_.file_uuid))},[s.file_repository_type,s.owner_id,a,l,r,p]),v=f.useCallback(async b=>{const _=[],w=async C=>{if(C.isFile){const S=await new Promise(E=>C.file(E));S.type!==""&&_.push(S)}else if(C.isDirectory){const S=C.createReader(),E=await new Promise(M=>S.readEntries(M));await Promise.all(E.map(w))}};b instanceof FileList?Array.from(b).forEach(C=>_.push(C)):await Promise.all(Array.from(b).map(async C=>{if(C.kind==="file"){const S=C.webkitGetAsEntry();S&&await w(S)}})),_.length>0&&m(_)},[m]);return f.useMemo(()=>({offset:a,setOffset:i,searchTerm:l,setSearchTerm:c,totalFilesUploading:u,setTotalFilesUploading:d,handleRemoveFiles:g,handleReplaceExistingFile:y,handleClearAllFiles:x,handleFileSelect:v}),[x,v,g,y,a,l,u])};var _j={},wj={},IC={},Cj={},xX;function T_(){return xX||(xX=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BANDIT_ASSIGNMENT_SHARDS=e.MAX_EVENT_QUEUE_SIZE=e.NULL_SENTINEL=e.SESSION_ASSIGNMENT_CONFIG_LOADED=e.BANDIT_ENDPOINT=e.UFC_ENDPOINT=e.BASE_URL=e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=e.POLL_JITTER_PCT=e.POLL_INTERVAL_MS=e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS=void 0,e.DEFAULT_REQUEST_TIMEOUT_MS=5e3,e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS,e.POLL_INTERVAL_MS=3e4,e.POLL_JITTER_PCT=.1,e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=1,e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=7,e.BASE_URL="https://fscdn.eppo.cloud/api",e.UFC_ENDPOINT="/flag-config/v1/config",e.BANDIT_ENDPOINT="/flag-config/v1/bandits",e.SESSION_ASSIGNMENT_CONFIG_LOADED="eppo-session-assignment-config-loaded",e.NULL_SENTINEL="EPPO_NULL",e.MAX_EVENT_QUEUE_SIZE=100,e.BANDIT_ASSIGNMENT_SHARDS=1e4}(Cj)),Cj}var vX;function Exe(){if(vX)return IC;vX=1,Object.defineProperty(IC,"__esModule",{value:!0});const e=T_();class t{constructor(r){var s;this.params=r,this.params.baseUrl=(s=r.baseUrl)!==null&&s!==void 0?s:e.BASE_URL}endpoint(r){var s;const a=new URL(this.params.baseUrl+r);return Object.entries((s=this.params.queryParams)!==null&&s!==void 0?s:{}).forEach(([i,l])=>a.searchParams.append(i,l)),a}ufcEndpoint(){return this.endpoint(e.UFC_ENDPOINT)}banditParametersEndpoint(){return this.endpoint(e.BANDIT_ENDPOINT)}}return IC.default=t,IC}var Ff={},l0={exports:{}},Sj,bX;function ast(){if(bX)return Sj;bX=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}Sj=t;function t(n,r,s){var a=s&&s.stringify||e,i=1;if(typeof n=="object"&&n!==null){var l=r.length+i;if(l===1)return n;var c=new Array(l);c[0]=a(n);for(var u=1;u<l;u++)c[u]=a(r[u]);return c.join(" ")}if(typeof n!="string")return n;var d=r.length;if(d===0)return n;for(var m="",p=1-i,h=-1,g=n&&n.length||0,y=0;y<g;){if(n.charCodeAt(y)===37&&y+1<g){switch(h=h>-1?h:0,n.charCodeAt(y+1)){case 100:case 102:if(p>=d||r[p]==null)break;h<y&&(m+=n.slice(h,y)),m+=Number(r[p]),h=y+2,y++;break;case 105:if(p>=d||r[p]==null)break;h<y&&(m+=n.slice(h,y)),m+=Math.floor(Number(r[p])),h=y+2,y++;break;case 79:case 111:case 106:if(p>=d||r[p]===void 0)break;h<y&&(m+=n.slice(h,y));var x=typeof r[p];if(x==="string"){m+="'"+r[p]+"'",h=y+2,y++;break}if(x==="function"){m+=r[p].name||"<anonymous>",h=y+2,y++;break}m+=a(r[p]),h=y+2,y++;break;case 115:if(p>=d)break;h<y&&(m+=n.slice(h,y)),m+=String(r[p]),h=y+2,y++;break;case 37:h<y&&(m+=n.slice(h,y)),m+="%",h=y+2,y++,p--;break}++p}++y}return h===-1?n:(h<g&&(m+=n.slice(h)),m)}return Sj}var _X;function ist(){if(_X)return l0.exports;_X=1;const e=ast();l0.exports=d;const t=A().console||{},n={mapHttpRequest:E,mapHttpResponse:E,wrapRequestSerializer:M,wrapResponseSerializer:M,wrapErrorSerializer:M,req:E,res:E,err:C,errWithCause:C};function r(j,T){return j==="silent"?1/0:T.levels.values[j]}const s=Symbol("pino.logFuncs"),a=Symbol("pino.hierarchy"),i={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function l(j,T){const I={logger:T,parent:j[a]};T[a]=I}function c(j,T,I){const U={};T.forEach(B=>{U[B]=I[B]?I[B]:t[B]||t[i[B]||"log"]||k}),j[s]=U}function u(j,T){return Array.isArray(j)?j.filter(function(U){return U!=="!stdSerializers.err"}):j===!0?Object.keys(T):!1}function d(j){j=j||{},j.browser=j.browser||{};const T=j.browser.transmit;if(T&&typeof T.send!="function")throw Error("pino: transmit option must have a send function");const I=j.browser.write||t;j.browser.write&&(j.browser.asObject=!0);const U=j.serializers||{},B=u(j.browser.serialize,U);let D=j.browser.serialize;Array.isArray(j.browser.serialize)&&j.browser.serialize.indexOf("!stdSerializers.err")>-1&&(D=!1);const W=Object.keys(j.customLevels||{}),z=["error","fatal","warn","info","debug","trace"].concat(W);typeof I=="function"&&z.forEach(function(te){I[te]=I}),(j.enabled===!1||j.browser.disabled)&&(j.level="silent");const $=j.level||"info",X=Object.create(I);X.log||(X.log=k),c(X,z,I),l({},X),Object.defineProperty(X,"levelVal",{get:Y}),Object.defineProperty(X,"level",{get:G,set:J});const q={transmit:T,serialize:B,asObject:j.browser.asObject,formatters:j.browser.formatters,levels:z,timestamp:S(j)};X.levels=m(j),X.level=$,X.setMaxListeners=X.getMaxListeners=X.emit=X.addListener=X.on=X.prependListener=X.once=X.prependOnceListener=X.removeListener=X.removeAllListeners=X.listeners=X.listenerCount=X.eventNames=X.write=X.flush=k,X.serializers=U,X._serialize=B,X._stdErrSerialize=D,X.child=K,T&&(X._logEvent=w());function Y(){return r(this.level,this)}function G(){return this._level}function J(te){if(te!=="silent"&&!this.levels.values[te])throw Error("unknown level "+te);this._level=te,g(this,q,X,"error"),g(this,q,X,"fatal"),g(this,q,X,"warn"),g(this,q,X,"info"),g(this,q,X,"debug"),g(this,q,X,"trace"),W.forEach(re=>{g(this,q,X,re)})}function K(te,re){if(!te)throw new Error("missing bindings for child Pino");re=re||{},B&&te.serializers&&(re.serializers=te.serializers);const se=re.serializers;if(B&&se){var me=Object.assign({},U,se),oe=j.browser.serialize===!0?Object.keys(me):B;delete te.serializers,b([te],oe,me,this._stdErrSerialize)}function ge(ye){this._childLevel=(ye._childLevel|0)+1,this.bindings=te,me&&(this.serializers=me,this._serialize=oe),T&&(this._logEvent=w([].concat(ye._logEvent.bindings,te)))}ge.prototype=this;const xe=new ge(this);return l(this,xe),xe.level=this.level,xe}return X}function m(j){const T=j.customLevels||{},I=Object.assign({},d.levels.values,T),U=Object.assign({},d.levels.labels,p(T));return{values:I,labels:U}}function p(j){const T={};return Object.keys(j).forEach(function(I){T[j[I]]=I}),T}d.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},d.stdSerializers=n,d.stdTimeFunctions=Object.assign({},{nullTime:N,epochTime:P,unixTime:L,isoTime:O});function h(j){const T=[];j.bindings&&T.push(j.bindings);let I=j[a];for(;I.parent;)I=I.parent,I.logger.bindings&&T.push(I.logger.bindings);return T.reverse()}function g(j,T,I,U){if(Object.defineProperty(j,U,{value:r(j.level,I)>r(U,I)?k:I[s][U],writable:!0,enumerable:!0,configurable:!0}),!T.transmit&&j[U]===k)return;j[U]=x(j,T,I,U);const B=h(j);B.length!==0&&(j[U]=y(B,j[U]))}function y(j,T){return function(){return T.apply(this,[...j,...arguments])}}function x(j,T,I,U){return function(B){return function(){const W=T.timestamp(),z=new Array(arguments.length),$=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var X=0;X<z.length;X++)z[X]=arguments[X];if(T.serialize&&!T.asObject&&b(z,this._serialize,this.serializers,this._stdErrSerialize),T.asObject||T.formatters?B.call($,v(this,U,z,W,T.formatters)):B.apply($,z),T.transmit){const q=T.transmit.level||j._level,Y=I.levels.values[q],G=I.levels.values[U];if(G<Y)return;_(this,{ts:W,methodLevel:U,methodValue:G,transmitValue:I.levels.values[T.transmit.level||j._level],send:T.transmit.send,val:r(j._level,I)},z)}}}(j[s][U])}function v(j,T,I,U,B={}){const{level:D=()=>j.levels.values[T],log:W=G=>G}=B;j._serialize&&b(I,j._serialize,j.serializers,j._stdErrSerialize);const z=I.slice();let $=z[0];const X={};U&&(X.time=U),X.level=D(T,j.levels.values[T]);let q=(j._childLevel|0)+1;if(q<1&&(q=1),$!==null&&typeof $=="object"){for(;q--&&typeof z[0]=="object";)Object.assign(X,z.shift());$=z.length?e(z.shift(),z):void 0}else typeof $=="string"&&($=e(z.shift(),z));return $!==void 0&&(X.msg=$),W(X)}function b(j,T,I,U){for(const B in j)if(U&&j[B]instanceof Error)j[B]=d.stdSerializers.err(j[B]);else if(typeof j[B]=="object"&&!Array.isArray(j[B]))for(const D in j[B])T&&T.indexOf(D)>-1&&D in I&&(j[B][D]=I[D](j[B][D]))}function _(j,T,I){const U=T.send,B=T.ts,D=T.methodLevel,W=T.methodValue,z=T.val,$=j._logEvent.bindings;b(I,j._serialize||Object.keys(j.serializers),j.serializers,j._stdErrSerialize===void 0?!0:j._stdErrSerialize),j._logEvent.ts=B,j._logEvent.messages=I.filter(function(X){return $.indexOf(X)===-1}),j._logEvent.level.label=D,j._logEvent.level.value=W,U(D,j._logEvent,z),j._logEvent=w($)}function w(j){return{ts:0,messages:[],bindings:j||[],level:{label:"",value:0}}}function C(j){const T={type:j.constructor.name,msg:j.message,stack:j.stack};for(const I in j)T[I]===void 0&&(T[I]=j[I]);return T}function S(j){return typeof j.timestamp=="function"?j.timestamp:j.timestamp===!1?N:P}function E(){return{}}function M(j){return j}function k(){}function N(){return!1}function P(){return Date.now()}function L(){return Math.round(Date.now()/1e3)}function O(){return new Date(Date.now()).toISOString()}function A(){function j(T){return typeof T<"u"&&T}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return j(self)||j(window)||j(this)||{}}}return l0.exports.default=d,l0.exports.pino=d,l0.exports}var wX;function X3(){if(wX)return Ff;wX=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.logger=Ff.loggerPrefix=void 0;const e=ist();return Ff.loggerPrefix="[Eppo SDK]",Ff.logger=(0,e.default)({level:"warn",browser:{disabled:!0}}),Ff}var Ii={},$c={},_2={exports:{}},ost=_2.exports,CX;function lst(){return CX||(CX=1,function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:typeof window<"u"?window:typeof qi<"u"?qi:ost,function(){var n="3.7.7",r=n,s=typeof Buffer=="function",a=typeof TextDecoder=="function"?new TextDecoder:void 0,i=typeof TextEncoder=="function"?new TextEncoder:void 0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=Array.prototype.slice.call(l),u=function(q){var Y={};return q.forEach(function(G,J){return Y[G]=J}),Y}(c),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,m=String.fromCharCode.bind(String),p=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(q){return new Uint8Array(Array.prototype.slice.call(q,0))},h=function(q){return q.replace(/=/g,"").replace(/[+\/]/g,function(Y){return Y=="+"?"-":"_"})},g=function(q){return q.replace(/[^A-Za-z0-9\+\/]/g,"")},y=function(q){for(var Y,G,J,K,te="",re=q.length%3,se=0;se<q.length;){if((G=q.charCodeAt(se++))>255||(J=q.charCodeAt(se++))>255||(K=q.charCodeAt(se++))>255)throw new TypeError("invalid character found");Y=G<<16|J<<8|K,te+=c[Y>>18&63]+c[Y>>12&63]+c[Y>>6&63]+c[Y&63]}return re?te.slice(0,re-3)+"===".substring(re):te},x=typeof btoa=="function"?function(q){return btoa(q)}:s?function(q){return Buffer.from(q,"binary").toString("base64")}:y,v=s?function(q){return Buffer.from(q).toString("base64")}:function(q){for(var Y=4096,G=[],J=0,K=q.length;J<K;J+=Y)G.push(m.apply(null,q.subarray(J,J+Y)));return x(G.join(""))},b=function(q,Y){return Y===void 0&&(Y=!1),Y?h(v(q)):v(q)},_=function(q){if(q.length<2){var Y=q.charCodeAt(0);return Y<128?q:Y<2048?m(192|Y>>>6)+m(128|Y&63):m(224|Y>>>12&15)+m(128|Y>>>6&63)+m(128|Y&63)}else{var Y=65536+(q.charCodeAt(0)-55296)*1024+(q.charCodeAt(1)-56320);return m(240|Y>>>18&7)+m(128|Y>>>12&63)+m(128|Y>>>6&63)+m(128|Y&63)}},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=function(q){return q.replace(w,_)},S=s?function(q){return Buffer.from(q,"utf8").toString("base64")}:i?function(q){return v(i.encode(q))}:function(q){return x(C(q))},E=function(q,Y){return Y===void 0&&(Y=!1),Y?h(S(q)):S(q)},M=function(q){return E(q,!0)},k=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,N=function(q){switch(q.length){case 4:var Y=(7&q.charCodeAt(0))<<18|(63&q.charCodeAt(1))<<12|(63&q.charCodeAt(2))<<6|63&q.charCodeAt(3),G=Y-65536;return m((G>>>10)+55296)+m((G&1023)+56320);case 3:return m((15&q.charCodeAt(0))<<12|(63&q.charCodeAt(1))<<6|63&q.charCodeAt(2));default:return m((31&q.charCodeAt(0))<<6|63&q.charCodeAt(1))}},P=function(q){return q.replace(k,N)},L=function(q){if(q=q.replace(/\s+/g,""),!d.test(q))throw new TypeError("malformed base64.");q+="==".slice(2-(q.length&3));for(var Y,G="",J,K,te=0;te<q.length;)Y=u[q.charAt(te++)]<<18|u[q.charAt(te++)]<<12|(J=u[q.charAt(te++)])<<6|(K=u[q.charAt(te++)]),G+=J===64?m(Y>>16&255):K===64?m(Y>>16&255,Y>>8&255):m(Y>>16&255,Y>>8&255,Y&255);return G},O=typeof atob=="function"?function(q){return atob(g(q))}:s?function(q){return Buffer.from(q,"base64").toString("binary")}:L,A=s?function(q){return p(Buffer.from(q,"base64"))}:function(q){return p(O(q).split("").map(function(Y){return Y.charCodeAt(0)}))},j=function(q){return A(I(q))},T=s?function(q){return Buffer.from(q,"base64").toString("utf8")}:a?function(q){return a.decode(A(q))}:function(q){return P(O(q))},I=function(q){return g(q.replace(/[-_]/g,function(Y){return Y=="-"?"+":"/"}))},U=function(q){return T(I(q))},B=function(q){if(typeof q!="string")return!1;var Y=q.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(Y)||!/[^\s0-9a-zA-Z\-_]/.test(Y)},D=function(q){return{value:q,enumerable:!1,writable:!0,configurable:!0}},W=function(){var q=function(Y,G){return Object.defineProperty(String.prototype,Y,D(G))};q("fromBase64",function(){return U(this)}),q("toBase64",function(Y){return E(this,Y)}),q("toBase64URI",function(){return E(this,!0)}),q("toBase64URL",function(){return E(this,!0)}),q("toUint8Array",function(){return j(this)})},z=function(){var q=function(Y,G){return Object.defineProperty(Uint8Array.prototype,Y,D(G))};q("toBase64",function(Y){return b(this,Y)}),q("toBase64URI",function(){return b(this,!0)}),q("toBase64URL",function(){return b(this,!0)})},$=function(){W(),z()},X={version:n,VERSION:r,atob:O,atobPolyfill:L,btoa:x,btoaPolyfill:y,fromBase64:U,toBase64:E,encode:E,encodeURI:M,encodeURL:M,utob:C,btou:P,decode:U,isValid:B,fromUint8Array:b,toUint8Array:j,extendString:W,extendUint8Array:z,extendBuiltins:$};return X.Base64={},Object.keys(X).forEach(function(q){return X.Base64[q]=X[q]}),X})}(_2)),_2.exports}var Ej={exports:{}},Mj={exports:{}},SX;function cst(){return SX||(SX=1,function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,a=0;s<n.length;s++,a+=8)r[a>>>5]|=n[s]<<24-a%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var a=n[s]<<16|n[s+1]<<8|n[s+2],i=0;i<4;i++)s*8+i*6<=n.length*8?r.push(e.charAt(a>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,a=0;s<n.length;a=++s%4)a!=0&&r.push((e.indexOf(n.charAt(s-1))&Math.pow(2,-2*a+8)-1)<<a*2|e.indexOf(n.charAt(s))>>>6-a*2);return r}};Mj.exports=t}()),Mj.exports}var kj,EX;function MX(){if(EX)return kj;EX=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return kj=e,kj}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Tj,kX;function ust(){if(kX)return Tj;kX=1,Tj=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return Tj}var TX;function dst(){return TX||(TX=1,function(){var e=cst(),t=MX().utf8,n=ust(),r=MX().bin,s=function(a,i){a.constructor==String?i&&i.encoding==="binary"?a=r.stringToBytes(a):a=t.stringToBytes(a):n(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var l=e.bytesToWords(a),c=a.length*8,u=1732584193,d=-271733879,m=-1732584194,p=271733878,h=0;h<l.length;h++)l[h]=(l[h]<<8|l[h]>>>24)&16711935|(l[h]<<24|l[h]>>>8)&4278255360;l[c>>>5]|=128<<c%32,l[(c+64>>>9<<4)+14]=c;for(var g=s._ff,y=s._gg,x=s._hh,v=s._ii,h=0;h<l.length;h+=16){var b=u,_=d,w=m,C=p;u=g(u,d,m,p,l[h+0],7,-680876936),p=g(p,u,d,m,l[h+1],12,-389564586),m=g(m,p,u,d,l[h+2],17,606105819),d=g(d,m,p,u,l[h+3],22,-1044525330),u=g(u,d,m,p,l[h+4],7,-176418897),p=g(p,u,d,m,l[h+5],12,1200080426),m=g(m,p,u,d,l[h+6],17,-1473231341),d=g(d,m,p,u,l[h+7],22,-45705983),u=g(u,d,m,p,l[h+8],7,1770035416),p=g(p,u,d,m,l[h+9],12,-1958414417),m=g(m,p,u,d,l[h+10],17,-42063),d=g(d,m,p,u,l[h+11],22,-1990404162),u=g(u,d,m,p,l[h+12],7,1804603682),p=g(p,u,d,m,l[h+13],12,-40341101),m=g(m,p,u,d,l[h+14],17,-1502002290),d=g(d,m,p,u,l[h+15],22,1236535329),u=y(u,d,m,p,l[h+1],5,-165796510),p=y(p,u,d,m,l[h+6],9,-1069501632),m=y(m,p,u,d,l[h+11],14,643717713),d=y(d,m,p,u,l[h+0],20,-373897302),u=y(u,d,m,p,l[h+5],5,-701558691),p=y(p,u,d,m,l[h+10],9,38016083),m=y(m,p,u,d,l[h+15],14,-660478335),d=y(d,m,p,u,l[h+4],20,-405537848),u=y(u,d,m,p,l[h+9],5,568446438),p=y(p,u,d,m,l[h+14],9,-1019803690),m=y(m,p,u,d,l[h+3],14,-187363961),d=y(d,m,p,u,l[h+8],20,1163531501),u=y(u,d,m,p,l[h+13],5,-1444681467),p=y(p,u,d,m,l[h+2],9,-51403784),m=y(m,p,u,d,l[h+7],14,1735328473),d=y(d,m,p,u,l[h+12],20,-1926607734),u=x(u,d,m,p,l[h+5],4,-378558),p=x(p,u,d,m,l[h+8],11,-2022574463),m=x(m,p,u,d,l[h+11],16,1839030562),d=x(d,m,p,u,l[h+14],23,-35309556),u=x(u,d,m,p,l[h+1],4,-1530992060),p=x(p,u,d,m,l[h+4],11,1272893353),m=x(m,p,u,d,l[h+7],16,-155497632),d=x(d,m,p,u,l[h+10],23,-1094730640),u=x(u,d,m,p,l[h+13],4,681279174),p=x(p,u,d,m,l[h+0],11,-358537222),m=x(m,p,u,d,l[h+3],16,-722521979),d=x(d,m,p,u,l[h+6],23,76029189),u=x(u,d,m,p,l[h+9],4,-640364487),p=x(p,u,d,m,l[h+12],11,-421815835),m=x(m,p,u,d,l[h+15],16,530742520),d=x(d,m,p,u,l[h+2],23,-995338651),u=v(u,d,m,p,l[h+0],6,-198630844),p=v(p,u,d,m,l[h+7],10,1126891415),m=v(m,p,u,d,l[h+14],15,-1416354905),d=v(d,m,p,u,l[h+5],21,-57434055),u=v(u,d,m,p,l[h+12],6,1700485571),p=v(p,u,d,m,l[h+3],10,-1894986606),m=v(m,p,u,d,l[h+10],15,-1051523),d=v(d,m,p,u,l[h+1],21,-2054922799),u=v(u,d,m,p,l[h+8],6,1873313359),p=v(p,u,d,m,l[h+15],10,-30611744),m=v(m,p,u,d,l[h+6],15,-1560198380),d=v(d,m,p,u,l[h+13],21,1309151649),u=v(u,d,m,p,l[h+4],6,-145523070),p=v(p,u,d,m,l[h+11],10,-1120210379),m=v(m,p,u,d,l[h+2],15,718787259),d=v(d,m,p,u,l[h+9],21,-343485551),u=u+b>>>0,d=d+_>>>0,m=m+w>>>0,p=p+C>>>0}return e.endian([u,d,m,p])};s._ff=function(a,i,l,c,u,d,m){var p=a+(i&l|~i&c)+(u>>>0)+m;return(p<<d|p>>>32-d)+i},s._gg=function(a,i,l,c,u,d,m){var p=a+(i&c|l&~c)+(u>>>0)+m;return(p<<d|p>>>32-d)+i},s._hh=function(a,i,l,c,u,d,m){var p=a+(i^l^c)+(u>>>0)+m;return(p<<d|p>>>32-d)+i},s._ii=function(a,i,l,c,u,d,m){var p=a+(l^(i|~c))+(u>>>0)+m;return(p<<d|p>>>32-d)+i},s._blocksize=16,s._digestsize=16,Ej.exports=function(a,i){if(a==null)throw new Error("Illegal argument "+a);var l=e.wordsToBytes(s(a,i));return i&&i.asBytes?l:i&&i.asString?r.bytesToString(l):e.bytesToHex(l)}}()),Ej.exports}var NX;function sx(){if(NX)return $c;NX=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.decodeBase64=$c.encodeBase64=$c.getMD5Hash=void 0;const e=lst(),t=dst();function n(a){return t(a)}$c.getMD5Hash=n;function r(a){return e.btoaPolyfill(a)}$c.encodeBase64=r;function s(a){return e.atobPolyfill(a)}return $c.decodeBase64=s,$c}var c0={},jX;function fst(){if(jX)return c0;jX=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.LRUCache=void 0;class e{constructor(n){this.capacity=n,this.cache=new Map,this.size=this.cache.size}[Symbol.iterator](){return this.cache[Symbol.iterator]()}forEach(n,r){this.cache.forEach(n,r)}entries(){return this.cache.entries()}clear(){this.cache.clear()}delete(n){return this.cache.delete(n)}keys(){return this.cache.keys()}values(){return this.cache.values()}has(n){return this.cache.has(n)}get(n){if(!this.has(n))return;const r=this.cache.get(n);return r!==void 0&&(this.delete(n),this.cache.set(n,r)),r}set(n,r){if(this.capacity===0)return this;if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;this.delete(s)}return this.cache.set(n,r),this}}return c0.LRUCache=e,c0}var AX;function Mxe(){if(AX)return Ii;AX=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.LRUInMemoryAssignmentCache=Ii.NonExpiringInMemoryAssignmentCache=Ii.AbstractAssignmentCache=Ii.assignmentCacheValueToString=Ii.assignmentCacheKeyToString=void 0;const e=sx(),t=fst();function n({subjectKey:l,flagKey:c}){return(0,e.getMD5Hash)([l,c].join(";"))}Ii.assignmentCacheKeyToString=n;function r({allocationKey:l,variationKey:c}){return(0,e.getMD5Hash)([l,c].join(";"))}Ii.assignmentCacheValueToString=r;class s{constructor(c){this.delegate=c}has(c){return this.get(c)===r(c)}get(c){return this.delegate.get(n(c))}set(c){this.delegate.set(n(c),r(c))}entries(){return this.delegate.entries()}}Ii.AbstractAssignmentCache=s;class a extends s{constructor(c=new Map){super(c)}}Ii.NonExpiringInMemoryAssignmentCache=a;class i extends s{constructor(c){super(new t.LRUCache(c))}}return Ii.LRUInMemoryAssignmentCache=i,Ii}var ad={},u0={},Wc={},IX;function kxe(){if(IX)return Wc;IX=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.DeterministicSharder=Wc.MD5Sharder=Wc.Sharder=void 0;const e=sx();class t{}Wc.Sharder=t;class n extends t{getShard(a,i){const l=(0,e.getMD5Hash)(a);return parseInt(l.slice(0,8),16)%i}}Wc.MD5Sharder=n;class r extends t{constructor(a){super(),this.lookup=a}getShard(a,i){var l;return(l=this.lookup[a])!==null&&l!==void 0?l:0}}return Wc.DeterministicSharder=r,Wc}var RX;function mst(){if(RX)return u0;RX=1,Object.defineProperty(u0,"__esModule",{value:!0}),u0.BanditEvaluator=void 0;const e=T_(),t=kxe();class n{constructor(){this.assignmentShards=e.BANDIT_ASSIGNMENT_SHARDS,this.sharder=new t.MD5Sharder}evaluateBandit(s,a,i,l,c){const u=this.scoreActions(i,l,c),d=this.weighActions(u,c.gamma,c.actionProbabilityFloor),m=this.selectAction(s,a,d),h=Object.values(u).reduce((g,y)=>y>g?y:g,-1/0)-u[m];return{flagKey:s,subjectKey:a,subjectAttributes:i,actionKey:m,actionAttributes:l[m],actionScore:u[m],actionWeight:d[m],gamma:c.gamma,optimalityGap:h}}scoreActions(s,a,i){const l={};return Object.entries(a).forEach(([c,u])=>{let d=i.defaultActionScore;const m=i.coefficients[c];m&&(d=m.intercept,d+=this.scoreNumericAttributes(m.subjectNumericCoefficients,s.numericAttributes),d+=this.scoreCategoricalAttributes(m.subjectCategoricalCoefficients,s.categoricalAttributes),d+=this.scoreNumericAttributes(m.actionNumericCoefficients,u.numericAttributes),d+=this.scoreCategoricalAttributes(m.actionCategoricalCoefficients,u.categoricalAttributes)),l[c]=d}),l}scoreNumericAttributes(s,a){return s.reduce((i,l)=>{const c=a[l.attributeKey];return typeof c=="number"&&isFinite(c)?i+=c*l.coefficient:i+=l.missingValueCoefficient,i},0)}scoreCategoricalAttributes(s,a){return s.reduce((i,l)=>{var c;const u=(c=a[l.attributeKey])===null||c===void 0?void 0:c.toString(),d=u&&l.valueCoefficients[u];return i+=typeof d=="number"?d:l.missingValueCoefficient,i},0)}weighActions(s,a,i){const l={},c=Object.entries(s);if(!c.length)return l;let u=null,d=null;if(c.forEach(([x,v])=>{(u===null||v>u)&&(u=v,d=x)}),u===null||d===null)throw new Error("Unable to find top score");const m=u,p=d,h=c.length,g=i/h;let y=0;return c.forEach(([x,v])=>{if(x===p)return;const b=1/(h+a*(m-v)),_=Math.max(b,g);y+=_,l[x]=_}),l[p]=Math.max(1-y,0),l}selectAction(s,a,i){const l=Object.entries(i).sort((p,h)=>{const g=this.sharder.getShard(`${s}-${a}-${p[0]}`,this.assignmentShards),y=this.sharder.getShard(`${s}-${a}-${h[0]}`,this.assignmentShards);let x=g-y;return x===0&&(x=p[0]<h[0]?-1:1),x}),u=this.sharder.getShard(`${s}-${a}`,this.assignmentShards)/this.assignmentShards;let d=0,m=null;for(const p of l)if(d+=p[1],d>u){m=p[0];break}if(m===null)throw new Error(`No bandit action selected for flag "${s}" and subject "${a}"`);return m}}return u0.BanditEvaluator=n,u0}var RC={},PX;function Txe(){if(PX)return RC;PX=1,Object.defineProperty(RC,"__esModule",{value:!0});class e{constructor(n,r,s,a){this.httpClient=n,this.flagConfigurationStore=r,this.banditVariationConfigurationStore=s,this.banditModelConfigurationStore=a}async fetchAndStoreConfigurations(){var n;const r=await this.httpClient.getUniversalFlagConfiguration();if(!r?.flags)return;await this.hydrateConfigurationStore(this.flagConfigurationStore,{entries:r.flags,environment:r.environment,createdAt:r.createdAt});const s=Object.keys((n=r.bandits)!==null&&n!==void 0?n:{}).length>0,a=!!(this.banditVariationConfigurationStore&&this.banditModelConfigurationStore);if(s&&a){const i=this.indexBanditVariationsByFlagKey(r.bandits);await this.hydrateConfigurationStore(this.banditVariationConfigurationStore,{entries:i,environment:r.environment,createdAt:r.createdAt});const l=await this.httpClient.getBanditParameters();if(l?.bandits){if(!this.banditModelConfigurationStore)throw new Error("Bandit parameters fetched but no bandit configuration store provided");await this.hydrateConfigurationStore(this.banditModelConfigurationStore,{entries:l.bandits,environment:r.environment,createdAt:r.createdAt})}}}async hydrateConfigurationStore(n,r){n&&await n.setEntries(r.entries)&&(n.setEnvironment(r.environment),n.setConfigFetchedAt(new Date().toISOString()),n.setConfigPublishedAt(r.createdAt))}indexBanditVariationsByFlagKey(n){const r={};return Object.values(n).forEach(s=>{s.forEach(a=>{let i=r[a.flagKey];i||(i=[],r[a.flagKey]=i),i.push(a)})}),r}}return RC.default=e,RC}var Us={},Nj={},OX;function N_(){return OX||(OX=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=void 0,function(t){t.STRING="STRING",t.INTEGER="INTEGER",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.JSON="JSON"}(e.VariationType||(e.VariationType={}))}(Nj)),Nj}var LX;function pst(){if(LX)return Us;LX=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.decodeObject=Us.decodeShard=Us.decodeSplit=Us.decodeAllocation=Us.decodeValue=Us.decodeVariations=Us.decodeFlag=void 0;const e=N_(),t=sx();function n(u){return Object.assign(Object.assign({},u),{variations:r(u.variations,u.variationType),allocations:u.allocations.map(a)})}Us.decodeFlag=n;function r(u,d){return Object.fromEntries(Object.entries(u).map(([,m])=>{const p=(0,t.decodeBase64)(m.key);return[p,{key:p,value:s(m.value,d)}]}))}Us.decodeVariations=r;function s(u,d){switch(d){case e.VariationType.INTEGER:case e.VariationType.NUMERIC:return Number((0,t.decodeBase64)(u));case e.VariationType.BOOLEAN:return(0,t.decodeBase64)(u)==="true";default:return(0,t.decodeBase64)(u)}}Us.decodeValue=s;function a(u){return Object.assign(Object.assign({},u),{key:(0,t.decodeBase64)(u.key),splits:u.splits.map(i),startAt:u.startAt?new Date((0,t.decodeBase64)(u.startAt)).toISOString():void 0,endAt:u.endAt?new Date((0,t.decodeBase64)(u.endAt)).toISOString():void 0})}Us.decodeAllocation=a;function i(u){return{extraLogging:u.extraLogging?c(u.extraLogging):void 0,variationKey:(0,t.decodeBase64)(u.variationKey),shards:u.shards.map(l)}}Us.decodeSplit=i;function l(u){return Object.assign(Object.assign({},u),{salt:(0,t.decodeBase64)(u.salt)})}Us.decodeShard=l;function c(u){return Object.fromEntries(Object.entries(u).map(([d,m])=>[(0,t.decodeBase64)(d),(0,t.decodeBase64)(m)]))}return Us.decodeObject=c,Us}var jj={},DX;function hst(){return DX||(DX=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EppoValue=e.EppoValueType=void 0;const t=N_(),n=sx();var r;(function(a){a[a.NullType=0]="NullType",a[a.BoolType=1]="BoolType",a[a.NumericType=2]="NumericType",a[a.StringType=3]="StringType",a[a.JSONType=4]="JSONType"})(r=e.EppoValueType||(e.EppoValueType={}));class s{constructor(i,l,c,u,d){this.valueType=i,this.boolValue=l,this.numericValue=c,this.stringValue=u,this.objectValue=d}static valueOf(i,l){if(i==null)return s.Null();switch(l){case t.VariationType.BOOLEAN:return s.Bool(i);case t.VariationType.NUMERIC:return s.Numeric(i);case t.VariationType.INTEGER:return s.Numeric(i);case t.VariationType.STRING:return s.String(i);case t.VariationType.JSON:return s.JSON(i);default:return s.String(i)}}toString(){var i,l,c;switch(this.valueType){case r.NullType:return"null";case r.BoolType:return this.boolValue?"true":"false";case r.NumericType:return this.numericValue?this.numericValue.toString():"0";case r.StringType:return(i=this.stringValue)!==null&&i!==void 0?i:"";case r.JSONType:try{return(l=JSON.stringify(this.objectValue))!==null&&l!==void 0?l:""}catch{return(c=this.stringValue)!==null&&c!==void 0?c:""}}}toHashedString(){const i=this.toString();return(0,n.getMD5Hash)(i)}static Bool(i){return new s(r.BoolType,i,void 0,void 0,void 0)}static Numeric(i){return new s(r.NumericType,void 0,i,void 0,void 0)}static String(i){return new s(r.StringType,void 0,void 0,i,void 0)}static JSON(i){return new s(r.JSONType,void 0,void 0,void 0,typeof i=="string"?JSON.parse(i):i)}static Null(){return new s(r.NullType,void 0,void 0,void 0,void 0)}}e.EppoValue=s}(jj)),jj}var Ri={},Aj={},FX;function Nxe(){return FX||(FX=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FlagEvaluationDetailsBuilder=e.AllocationEvaluationCode=e.flagEvaluationCodes=void 0;const t=N_();e.flagEvaluationCodes=["MATCH","FLAG_UNRECOGNIZED_OR_DISABLED","TYPE_MISMATCH","ASSIGNMENT_ERROR","DEFAULT_ALLOCATION_NULL","NO_ACTIONS_SUPPLIED_FOR_BANDIT"];var n;(function(s){s.UNEVALUATED="UNEVALUATED",s.MATCH="MATCH",s.BEFORE_START_TIME="BEFORE_START_TIME",s.TRAFFIC_EXPOSURE_MISS="TRAFFIC_EXPOSURE_MISS",s.AFTER_END_TIME="AFTER_END_TIME",s.FAILING_RULE="FAILING_RULE"})(n=e.AllocationEvaluationCode||(e.AllocationEvaluationCode={}));class r{constructor(a,i,l,c){this.environmentName=a,this.allocations=i,this.configFetchedAt=l,this.configPublishedAt=c,this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=[],this.setNone=()=>(this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=this.allocations.map((u,d)=>({key:u.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:d+1})),this),this.setNoMatchFound=(u=[])=>(this.variationKey=null,this.variationValue=null,this.matchedAllocation=null,this.matchedRule=null,this.unmatchedAllocations=u,this.unevaluatedAllocations=[],this),this.setMatch=(u,d,m,p,h,g)=>{this.variationKey=d.key,this.variationValue=g===t.VariationType.JSON&&typeof d.value=="string"?JSON.parse(d.value):d.value,this.matchedRule=p,this.matchedAllocation={key:m.key,allocationEvaluationCode:n.MATCH,orderPosition:u+1},this.unmatchedAllocations=h;const y=u+1,x=y+1;return this.unevaluatedAllocations=this.allocations.slice(y).map((v,b)=>({key:v.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:x+b})),this},this.buildForNoneResult=(u,d)=>this.setNone().build(u,d),this.build=(u,d)=>({environmentName:this.environmentName,flagEvaluationCode:u,flagEvaluationDescription:d,variationKey:this.variationKey,variationValue:this.variationValue,banditKey:null,banditAction:null,configFetchedAt:this.configFetchedAt,configPublishedAt:this.configPublishedAt,matchedRule:this.matchedRule,matchedAllocation:this.matchedAllocation,unmatchedAllocations:this.unmatchedAllocations,unevaluatedAllocations:this.unevaluatedAllocations}),this.setNone()}}e.FlagEvaluationDetailsBuilder=r}(Aj)),Aj}var Ij={},PC={exports:{}},Rj,UX;function Z3(){if(UX)return Rj;UX=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=t-6;return Rj={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Rj}var Pj,BX;function J3(){if(BX)return Pj;BX=1;var e={};return Pj=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},Pj}var VX;function j_(){return VX||(VX=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=Z3(),a=J3();t=e.exports={};const i=t.re=[],l=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],d=t.t={};let m=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[p,r]],g=x=>{for(const[v,b]of h)x=x.split(`${v}*`).join(`${v}{0,${b}}`).split(`${v}+`).join(`${v}{1,${b}}`);return x},y=(x,v,b)=>{const _=g(v),w=m++;a(x,w,v),d[x]=w,c[w]=v,u[w]=_,i[w]=new RegExp(v,b?"g":void 0),l[w]=new RegExp(_,b?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),y("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${p}+`),y("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),y("FULL",`^${c[d.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),y("LOOSE",`^${c[d.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),y("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",c[d.COERCE],!0),y("COERCERTLFULL",c[d.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(PC,PC.exports)),PC.exports}var Oj,$X;function _B(){if($X)return Oj;$X=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Oj=r=>r?typeof r!="object"?e:r:t,Oj}var Lj,WX;function jxe(){if(WX)return Lj;WX=1;const e=/^[0-9]+$/,t=(r,s)=>{const a=e.test(r),i=e.test(s);return a&&i&&(r=+r,s=+s),r===s?0:a&&!i?-1:i&&!a?1:r<s?-1:1};return Lj={compareIdentifiers:t,rcompareIdentifiers:(r,s)=>t(s,r)},Lj}var Dj,HX;function Ya(){if(HX)return Dj;HX=1;const e=J3(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Z3(),{safeRe:r,t:s}=j_(),a=_B(),{compareIdentifiers:i}=jxe();class l{constructor(u,d){if(d=a(d),u instanceof l){if(u.loose===!!d.loose&&u.includePrerelease===!!d.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const m=u.trim().match(d.loose?r[s.LOOSE]:r[s.FULL]);if(!m)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const h=+p;if(h>=0&&h<n)return h}return p}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof l)){if(typeof u=="string"&&u===this.version)return 0;u=new l(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof l||(u=new l(u,this.options)),i(this.major,u.major)||i(this.minor,u.minor)||i(this.patch,u.patch)}comparePre(u){if(u instanceof l||(u=new l(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let d=0;do{const m=this.prerelease[d],p=u.prerelease[d];if(e("prerelease compare",d,m,p),m===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(m===void 0)return-1;if(m===p)continue;return i(m,p)}while(++d)}compareBuild(u){u instanceof l||(u=new l(u,this.options));let d=0;do{const m=this.build[d],p=u.build[d];if(e("build compare",d,m,p),m===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(m===void 0)return-1;if(m===p)continue;return i(m,p)}while(++d)}inc(u,d,m){if(u.startsWith("pre")){if(!d&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,m),this.inc("pre",d,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,m),this.inc("pre",d,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(d===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let h=[d,p];m===!1&&(h=[d]),i(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Dj=l,Dj}var Fj,zX;function ax(){if(zX)return Fj;zX=1;const e=Ya();return Fj=(n,r,s=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(a){if(!s)return null;throw a}},Fj}var Uj,GX;function gst(){if(GX)return Uj;GX=1;const e=ax();return Uj=(n,r)=>{const s=e(n,r);return s?s.version:null},Uj}var Bj,qX;function yst(){if(qX)return Bj;qX=1;const e=ax();return Bj=(n,r)=>{const s=e(n.trim().replace(/^[=v]+/,""),r);return s?s.version:null},Bj}var Vj,KX;function xst(){if(KX)return Vj;KX=1;const e=Ya();return Vj=(n,r,s,a,i)=>{typeof s=="string"&&(i=a,a=s,s=void 0);try{return new e(n instanceof e?n.version:n,s).inc(r,a,i).version}catch{return null}},Vj}var $j,YX;function vst(){if(YX)return $j;YX=1;const e=ax();return $j=(n,r)=>{const s=e(n,null,!0),a=e(r,null,!0),i=s.compare(a);if(i===0)return null;const l=i>0,c=l?s:a,u=l?a:s,d=!!c.prerelease.length;if(!!u.prerelease.length&&!d){if(!u.patch&&!u.minor)return"major";if(u.compareMain(c)===0)return u.minor&&!u.patch?"minor":"patch"}const p=d?"pre":"";return s.major!==a.major?p+"major":s.minor!==a.minor?p+"minor":s.patch!==a.patch?p+"patch":"prerelease"},$j}var Wj,QX;function bst(){if(QX)return Wj;QX=1;const e=Ya();return Wj=(n,r)=>new e(n,r).major,Wj}var Hj,XX;function _st(){if(XX)return Hj;XX=1;const e=Ya();return Hj=(n,r)=>new e(n,r).minor,Hj}var zj,ZX;function wst(){if(ZX)return zj;ZX=1;const e=Ya();return zj=(n,r)=>new e(n,r).patch,zj}var Gj,JX;function Cst(){if(JX)return Gj;JX=1;const e=ax();return Gj=(n,r)=>{const s=e(n,r);return s&&s.prerelease.length?s.prerelease:null},Gj}var qj,eZ;function kl(){if(eZ)return qj;eZ=1;const e=Ya();return qj=(n,r,s)=>new e(n,s).compare(new e(r,s)),qj}var Kj,tZ;function Sst(){if(tZ)return Kj;tZ=1;const e=kl();return Kj=(n,r,s)=>e(r,n,s),Kj}var Yj,nZ;function Est(){if(nZ)return Yj;nZ=1;const e=kl();return Yj=(n,r)=>e(n,r,!0),Yj}var Qj,rZ;function wB(){if(rZ)return Qj;rZ=1;const e=Ya();return Qj=(n,r,s)=>{const a=new e(n,s),i=new e(r,s);return a.compare(i)||a.compareBuild(i)},Qj}var Xj,sZ;function Mst(){if(sZ)return Xj;sZ=1;const e=wB();return Xj=(n,r)=>n.sort((s,a)=>e(s,a,r)),Xj}var Zj,aZ;function kst(){if(aZ)return Zj;aZ=1;const e=wB();return Zj=(n,r)=>n.sort((s,a)=>e(a,s,r)),Zj}var Jj,iZ;function e5(){if(iZ)return Jj;iZ=1;const e=kl();return Jj=(n,r,s)=>e(n,r,s)>0,Jj}var eA,oZ;function CB(){if(oZ)return eA;oZ=1;const e=kl();return eA=(n,r,s)=>e(n,r,s)<0,eA}var tA,lZ;function Axe(){if(lZ)return tA;lZ=1;const e=kl();return tA=(n,r,s)=>e(n,r,s)===0,tA}var nA,cZ;function Ixe(){if(cZ)return nA;cZ=1;const e=kl();return nA=(n,r,s)=>e(n,r,s)!==0,nA}var rA,uZ;function SB(){if(uZ)return rA;uZ=1;const e=kl();return rA=(n,r,s)=>e(n,r,s)>=0,rA}var sA,dZ;function EB(){if(dZ)return sA;dZ=1;const e=kl();return sA=(n,r,s)=>e(n,r,s)<=0,sA}var aA,fZ;function Rxe(){if(fZ)return aA;fZ=1;const e=Axe(),t=Ixe(),n=e5(),r=SB(),s=CB(),a=EB();return aA=(l,c,u,d)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l===u;case"!==":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l!==u;case"":case"=":case"==":return e(l,u,d);case"!=":return t(l,u,d);case">":return n(l,u,d);case">=":return r(l,u,d);case"<":return s(l,u,d);case"<=":return a(l,u,d);default:throw new TypeError(`Invalid operator: ${c}`)}},aA}var iA,mZ;function Tst(){if(mZ)return iA;mZ=1;const e=Ya(),t=ax(),{safeRe:n,t:r}=j_();return iA=(a,i)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;i=i||{};let l=null;if(!i.rtl)l=a.match(i.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const h=i.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let g;for(;(g=h.exec(a))&&(!l||l.index+l[0].length!==a.length);)(!l||g.index+g[0].length!==l.index+l[0].length)&&(l=g),h.lastIndex=g.index+g[1].length+g[2].length;h.lastIndex=-1}if(l===null)return null;const c=l[2],u=l[3]||"0",d=l[4]||"0",m=i.includePrerelease&&l[5]?`-${l[5]}`:"",p=i.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${c}.${u}.${d}${m}${p}`,i)},iA}var oA,pZ;function Nst(){if(pZ)return oA;pZ=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,r)}return this}}return oA=e,oA}var lA,hZ;function Tl(){if(hZ)return lA;hZ=1;const e=/\s+/g;class t{constructor(j,T){if(T=s(T),j instanceof t)return j.loose===!!T.loose&&j.includePrerelease===!!T.includePrerelease?j:new t(j.raw,T);if(j instanceof a)return this.raw=j.value,this.set=[[j]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=j.trim().replace(e," "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(U=>!y(U[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&x(U[0])){this.set=[U];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let j=0;j<this.set.length;j++){j>0&&(this.formatted+="||");const T=this.set[j];for(let I=0;I<T.length;I++)I>0&&(this.formatted+=" "),this.formatted+=T[I].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(j){const I=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+j,U=r.get(I);if(U)return U;const B=this.options.loose,D=B?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];j=j.replace(D,L(this.options.includePrerelease)),i("hyphen replace",j),j=j.replace(c[u.COMPARATORTRIM],d),i("comparator trim",j),j=j.replace(c[u.TILDETRIM],m),i("tilde trim",j),j=j.replace(c[u.CARETTRIM],p),i("caret trim",j);let W=j.split(" ").map(q=>b(q,this.options)).join(" ").split(/\s+/).map(q=>P(q,this.options));B&&(W=W.filter(q=>(i("loose invalid filter",q,this.options),!!q.match(c[u.COMPARATORLOOSE])))),i("range list",W);const z=new Map,$=W.map(q=>new a(q,this.options));for(const q of $){if(y(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const X=[...z.values()];return r.set(I,X),X}intersects(j,T){if(!(j instanceof t))throw new TypeError("a Range is required");return this.set.some(I=>v(I,T)&&j.set.some(U=>v(U,T)&&I.every(B=>U.every(D=>B.intersects(D,T)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new l(j,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(O(this.set[T],j,this.options))return!0;return!1}}lA=t;const n=Nst(),r=new n,s=_B(),a=t5(),i=J3(),l=Ya(),{safeRe:c,t:u,comparatorTrimReplace:d,tildeTrimReplace:m,caretTrimReplace:p}=j_(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=Z3(),y=A=>A.value==="<0.0.0-0",x=A=>A.value==="",v=(A,j)=>{let T=!0;const I=A.slice();let U=I.pop();for(;T&&I.length;)T=I.every(B=>U.intersects(B,j)),U=I.pop();return T},b=(A,j)=>(i("comp",A,j),A=S(A,j),i("caret",A),A=w(A,j),i("tildes",A),A=M(A,j),i("xrange",A),A=N(A,j),i("stars",A),A),_=A=>!A||A.toLowerCase()==="x"||A==="*",w=(A,j)=>A.trim().split(/\s+/).map(T=>C(T,j)).join(" "),C=(A,j)=>{const T=j.loose?c[u.TILDELOOSE]:c[u.TILDE];return A.replace(T,(I,U,B,D,W)=>{i("tilde",A,I,U,B,D,W);let z;return _(U)?z="":_(B)?z=`>=${U}.0.0 <${+U+1}.0.0-0`:_(D)?z=`>=${U}.${B}.0 <${U}.${+B+1}.0-0`:W?(i("replaceTilde pr",W),z=`>=${U}.${B}.${D}-${W} <${U}.${+B+1}.0-0`):z=`>=${U}.${B}.${D} <${U}.${+B+1}.0-0`,i("tilde return",z),z})},S=(A,j)=>A.trim().split(/\s+/).map(T=>E(T,j)).join(" "),E=(A,j)=>{i("caret",A,j);const T=j.loose?c[u.CARETLOOSE]:c[u.CARET],I=j.includePrerelease?"-0":"";return A.replace(T,(U,B,D,W,z)=>{i("caret",A,U,B,D,W,z);let $;return _(B)?$="":_(D)?$=`>=${B}.0.0${I} <${+B+1}.0.0-0`:_(W)?B==="0"?$=`>=${B}.${D}.0${I} <${B}.${+D+1}.0-0`:$=`>=${B}.${D}.0${I} <${+B+1}.0.0-0`:z?(i("replaceCaret pr",z),B==="0"?D==="0"?$=`>=${B}.${D}.${W}-${z} <${B}.${D}.${+W+1}-0`:$=`>=${B}.${D}.${W}-${z} <${B}.${+D+1}.0-0`:$=`>=${B}.${D}.${W}-${z} <${+B+1}.0.0-0`):(i("no pr"),B==="0"?D==="0"?$=`>=${B}.${D}.${W}${I} <${B}.${D}.${+W+1}-0`:$=`>=${B}.${D}.${W}${I} <${B}.${+D+1}.0-0`:$=`>=${B}.${D}.${W} <${+B+1}.0.0-0`),i("caret return",$),$})},M=(A,j)=>(i("replaceXRanges",A,j),A.split(/\s+/).map(T=>k(T,j)).join(" ")),k=(A,j)=>{A=A.trim();const T=j.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return A.replace(T,(I,U,B,D,W,z)=>{i("xRange",A,I,U,B,D,W,z);const $=_(B),X=$||_(D),q=X||_(W),Y=q;return U==="="&&Y&&(U=""),z=j.includePrerelease?"-0":"",$?U===">"||U==="<"?I="<0.0.0-0":I="*":U&&Y?(X&&(D=0),W=0,U===">"?(U=">=",X?(B=+B+1,D=0,W=0):(D=+D+1,W=0)):U==="<="&&(U="<",X?B=+B+1:D=+D+1),U==="<"&&(z="-0"),I=`${U+B}.${D}.${W}${z}`):X?I=`>=${B}.0.0${z} <${+B+1}.0.0-0`:q&&(I=`>=${B}.${D}.0${z} <${B}.${+D+1}.0-0`),i("xRange return",I),I})},N=(A,j)=>(i("replaceStars",A,j),A.trim().replace(c[u.STAR],"")),P=(A,j)=>(i("replaceGTE0",A,j),A.trim().replace(c[j.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=A=>(j,T,I,U,B,D,W,z,$,X,q,Y)=>(_(I)?T="":_(U)?T=`>=${I}.0.0${A?"-0":""}`:_(B)?T=`>=${I}.${U}.0${A?"-0":""}`:D?T=`>=${T}`:T=`>=${T}${A?"-0":""}`,_($)?z="":_(X)?z=`<${+$+1}.0.0-0`:_(q)?z=`<${$}.${+X+1}.0-0`:Y?z=`<=${$}.${X}.${q}-${Y}`:A?z=`<${$}.${X}.${+q+1}-0`:z=`<=${z}`,`${T} ${z}`.trim()),O=(A,j,T)=>{for(let I=0;I<A.length;I++)if(!A[I].test(j))return!1;if(j.prerelease.length&&!T.includePrerelease){for(let I=0;I<A.length;I++)if(i(A[I].semver),A[I].semver!==a.ANY&&A[I].semver.prerelease.length>0){const U=A[I].semver;if(U.major===j.major&&U.minor===j.minor&&U.patch===j.patch)return!0}return!1}return!0};return lA}var cA,gZ;function t5(){if(gZ)return cA;gZ=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,m){if(m=n(m),d instanceof t){if(d.loose===!!m.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),i("comparator",d,m),this.options=m,this.loose=!!m.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(d){const m=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],p=d.match(m);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(i("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,m){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,m).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,m).test(d.semver):(m=n(m),m.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,m)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,m)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}cA=t;const n=_B(),{safeRe:r,t:s}=j_(),a=Rxe(),i=J3(),l=Ya(),c=Tl();return cA}var uA,yZ;function n5(){if(yZ)return uA;yZ=1;const e=Tl();return uA=(n,r,s)=>{try{r=new e(r,s)}catch{return!1}return r.test(n)},uA}var dA,xZ;function jst(){if(xZ)return dA;xZ=1;const e=Tl();return dA=(n,r)=>new e(n,r).set.map(s=>s.map(a=>a.value).join(" ").trim().split(" ")),dA}var fA,vZ;function Ast(){if(vZ)return fA;vZ=1;const e=Ya(),t=Tl();return fA=(r,s,a)=>{let i=null,l=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!i||l.compare(u)===-1)&&(i=u,l=new e(i,a))}),i},fA}var mA,bZ;function Ist(){if(bZ)return mA;bZ=1;const e=Ya(),t=Tl();return mA=(r,s,a)=>{let i=null,l=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!i||l.compare(u)===1)&&(i=u,l=new e(i,a))}),i},mA}var pA,_Z;function Rst(){if(_Z)return pA;_Z=1;const e=Ya(),t=Tl(),n=e5();return pA=(s,a)=>{s=new t(s,a);let i=new e("0.0.0");if(s.test(i)||(i=new e("0.0.0-0"),s.test(i)))return i;i=null;for(let l=0;l<s.set.length;++l){const c=s.set[l];let u=null;c.forEach(d=>{const m=new e(d.semver.version);switch(d.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!u||n(m,u))&&(u=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),u&&(!i||n(i,u))&&(i=u)}return i&&s.test(i)?i:null},pA}var hA,wZ;function Pst(){if(wZ)return hA;wZ=1;const e=Tl();return hA=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},hA}var gA,CZ;function MB(){if(CZ)return gA;CZ=1;const e=Ya(),t=t5(),{ANY:n}=t,r=Tl(),s=n5(),a=e5(),i=CB(),l=EB(),c=SB();return gA=(d,m,p,h)=>{d=new e(d,h),m=new r(m,h);let g,y,x,v,b;switch(p){case">":g=a,y=l,x=i,v=">",b=">=";break;case"<":g=i,y=c,x=a,v="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(d,m,h))return!1;for(let _=0;_<m.set.length;++_){const w=m.set[_];let C=null,S=null;if(w.forEach(E=>{E.semver===n&&(E=new t(">=0.0.0")),C=C||E,S=S||E,g(E.semver,C.semver,h)?C=E:x(E.semver,S.semver,h)&&(S=E)}),C.operator===v||C.operator===b||(!S.operator||S.operator===v)&&y(d,S.semver))return!1;if(S.operator===b&&x(d,S.semver))return!1}return!0},gA}var yA,SZ;function Ost(){if(SZ)return yA;SZ=1;const e=MB();return yA=(n,r,s)=>e(n,r,">",s),yA}var xA,EZ;function Lst(){if(EZ)return xA;EZ=1;const e=MB();return xA=(n,r,s)=>e(n,r,"<",s),xA}var vA,MZ;function Dst(){if(MZ)return vA;MZ=1;const e=Tl();return vA=(n,r,s)=>(n=new e(n,s),r=new e(r,s),n.intersects(r,s)),vA}var bA,kZ;function Fst(){if(kZ)return bA;kZ=1;const e=n5(),t=kl();return bA=(n,r,s)=>{const a=[];let i=null,l=null;const c=n.sort((p,h)=>t(p,h,s));for(const p of c)e(p,r,s)?(l=p,i||(i=p)):(l&&a.push([i,l]),l=null,i=null);i&&a.push([i,null]);const u=[];for(const[p,h]of a)p===h?u.push(p):!h&&p===c[0]?u.push("*"):h?p===c[0]?u.push(`<=${h}`):u.push(`${p} - ${h}`):u.push(`>=${p}`);const d=u.join(" || "),m=typeof r.raw=="string"?r.raw:String(r);return d.length<m.length?d:r},bA}var _A,TZ;function Ust(){if(TZ)return _A;TZ=1;const e=Tl(),t=t5(),{ANY:n}=t,r=n5(),s=kl(),a=(m,p,h={})=>{if(m===p)return!0;m=new e(m,h),p=new e(p,h);let g=!1;e:for(const y of m.set){for(const x of p.set){const v=c(y,x,h);if(g=g||v!==null,v)continue e}if(g)return!1}return!0},i=[new t(">=0.0.0-0")],l=[new t(">=0.0.0")],c=(m,p,h)=>{if(m===p)return!0;if(m.length===1&&m[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;h.includePrerelease?m=i:m=l}if(p.length===1&&p[0].semver===n){if(h.includePrerelease)return!0;p=l}const g=new Set;let y,x;for(const M of m)M.operator===">"||M.operator===">="?y=u(y,M,h):M.operator==="<"||M.operator==="<="?x=d(x,M,h):g.add(M.semver);if(g.size>1)return null;let v;if(y&&x){if(v=s(y.semver,x.semver,h),v>0)return null;if(v===0&&(y.operator!==">="||x.operator!=="<="))return null}for(const M of g){if(y&&!r(M,String(y),h)||x&&!r(M,String(x),h))return null;for(const k of p)if(!r(M,String(k),h))return!1;return!0}let b,_,w,C,S=x&&!h.includePrerelease&&x.semver.prerelease.length?x.semver:!1,E=y&&!h.includePrerelease&&y.semver.prerelease.length?y.semver:!1;S&&S.prerelease.length===1&&x.operator==="<"&&S.prerelease[0]===0&&(S=!1);for(const M of p){if(C=C||M.operator===">"||M.operator===">=",w=w||M.operator==="<"||M.operator==="<=",y){if(E&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===E.major&&M.semver.minor===E.minor&&M.semver.patch===E.patch&&(E=!1),M.operator===">"||M.operator===">="){if(b=u(y,M,h),b===M&&b!==y)return!1}else if(y.operator===">="&&!r(y.semver,String(M),h))return!1}if(x){if(S&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===S.major&&M.semver.minor===S.minor&&M.semver.patch===S.patch&&(S=!1),M.operator==="<"||M.operator==="<="){if(_=d(x,M,h),_===M&&_!==x)return!1}else if(x.operator==="<="&&!r(x.semver,String(M),h))return!1}if(!M.operator&&(x||y)&&v!==0)return!1}return!(y&&w&&!x&&v!==0||x&&C&&!y&&v!==0||E||S)},u=(m,p,h)=>{if(!m)return p;const g=s(m.semver,p.semver,h);return g>0?m:g<0||p.operator===">"&&m.operator===">="?p:m},d=(m,p,h)=>{if(!m)return p;const g=s(m.semver,p.semver,h);return g<0?m:g>0||p.operator==="<"&&m.operator==="<="?p:m};return _A=a,_A}var wA,NZ;function Bst(){if(NZ)return wA;NZ=1;const e=j_(),t=Z3(),n=Ya(),r=jxe(),s=ax(),a=gst(),i=yst(),l=xst(),c=vst(),u=bst(),d=_st(),m=wst(),p=Cst(),h=kl(),g=Sst(),y=Est(),x=wB(),v=Mst(),b=kst(),_=e5(),w=CB(),C=Axe(),S=Ixe(),E=SB(),M=EB(),k=Rxe(),N=Tst(),P=t5(),L=Tl(),O=n5(),A=jst(),j=Ast(),T=Ist(),I=Rst(),U=Pst(),B=MB(),D=Ost(),W=Lst(),z=Dst(),$=Fst(),X=Ust();return wA={parse:s,valid:a,clean:i,inc:l,diff:c,major:u,minor:d,patch:m,prerelease:p,compare:h,rcompare:g,compareLoose:y,compareBuild:x,sort:v,rsort:b,gt:_,lt:w,eq:C,neq:S,gte:E,lte:M,cmp:k,coerce:N,Comparator:P,Range:L,satisfies:O,toComparators:A,maxSatisfying:j,minSatisfying:T,minVersion:I,validRange:U,outside:B,gtr:D,ltr:W,intersects:z,simplifyRange:$,subset:X,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},wA}var jZ;function Vst(){return jZ||(jZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.matchesRule=e.ObfuscatedOperatorType=e.OperatorType=void 0;const t=Bst(),n=sx();var r;(function(x){x.MATCHES="MATCHES",x.NOT_MATCHES="NOT_MATCHES",x.GTE="GTE",x.GT="GT",x.LTE="LTE",x.LT="LT",x.ONE_OF="ONE_OF",x.NOT_ONE_OF="NOT_ONE_OF",x.IS_NULL="IS_NULL"})(r=e.OperatorType||(e.OperatorType={}));var s;(function(x){x.MATCHES="05015086bdd8402218f6aad6528bef08",x.NOT_MATCHES="8323761667755378c3a78e0a6ed37a78",x.GTE="32d35312e8f24bc1669bd2b45c00d47c",x.GT="cd6a9bd2a175104eed40f0d33a8b4020",x.LTE="cc981ecc65ecf63ad1673cbec9c64198",x.LT="c562607189d77eb9dfb707464c1e7b0b",x.ONE_OF="27457ce369f2a74203396a35ef537c0b",x.NOT_ONE_OF="602f5ee0b6e84fe29f43ab48b9e1addf",x.IS_NULL="dbd9c38e0339e6c34bd48cafc59be388"})(s=e.ObfuscatedOperatorType||(e.ObfuscatedOperatorType={}));var a;(function(x){x.PLAIN_STRING="PLAIN_STRING",x.STRING_ARRAY="STRING_ARRAY",x.SEM_VER="SEM_VER",x.NUMERIC="NUMERIC"})(a||(a={}));function i(x,v,b){return!l(v,x.conditions,b).includes(!1)}e.matchesRule=i;function l(x,v,b){return v.map(_=>b?u(Object.entries(x).reduce((w,[C,S])=>Object.assign({[(0,n.getMD5Hash)(C)]:S},w),{}),_):c(x,_))}function c(x,v){const b=x[v.attribute],_=y(v.value);if(v.operator===r.IS_NULL)return v.value?b==null:b!=null;if(b!=null)switch(v.operator){case r.GTE:return _===a.SEM_VER?g(b,v.value,t.gte):h(b,v.value,(w,C)=>w>=C);case r.GT:return _===a.SEM_VER?g(b,v.value,t.gt):h(b,v.value,(w,C)=>w>C);case r.LTE:return _===a.SEM_VER?g(b,v.value,t.lte):h(b,v.value,(w,C)=>w<=C);case r.LT:return _===a.SEM_VER?g(b,v.value,t.lt):h(b,v.value,(w,C)=>w<C);case r.MATCHES:return new RegExp(v.value).test(b);case r.NOT_MATCHES:return!new RegExp(v.value).test(b);case r.ONE_OF:return d(b.toString(),v.value);case r.NOT_ONE_OF:return m(b.toString(),v.value)}return!1}function u(x,v){const b=x[v.attribute],_=y(b);if(v.operator===s.IS_NULL)return v.value===(0,n.getMD5Hash)("true")?b==null:b!=null;if(b!=null)switch(v.operator){case s.GTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(v.value),t.gte):h(b,Number((0,n.decodeBase64)(v.value)),(w,C)=>w>=C);case s.GT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(v.value),t.gt):h(b,Number((0,n.decodeBase64)(v.value)),(w,C)=>w>C);case s.LTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(v.value),t.lte):h(b,Number((0,n.decodeBase64)(v.value)),(w,C)=>w<=C);case s.LT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(v.value),t.lt):h(b,Number((0,n.decodeBase64)(v.value)),(w,C)=>w<C);case s.MATCHES:return new RegExp((0,n.decodeBase64)(v.value)).test(b);case s.NOT_MATCHES:return!new RegExp((0,n.decodeBase64)(v.value)).test(b);case s.ONE_OF:return d((0,n.getMD5Hash)(b.toString()),v.value);case s.NOT_ONE_OF:return m((0,n.getMD5Hash)(b.toString()),v.value)}return!1}function d(x,v){return p(x,v).length>0}function m(x,v){return p(x,v).length===0}function p(x,v){return v.filter(b=>b===x)}function h(x,v,b){return b(Number(x),Number(v))}function g(x,v,b){return!!(0,t.valid)(x)&&!!(0,t.valid)(v)&&b(x,v)}function y(x){return typeof x=="number"?a.NUMERIC:Array.isArray(x)?a.STRING_ARRAY:typeof x=="string"&&(0,t.valid)(x)?a.SEM_VER:isNaN(Number(x))?a.PLAIN_STRING:a.NUMERIC}}(Ij)),Ij}var AZ;function $st(){if(AZ)return Ri;AZ=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.matchesRules=Ri.noneResult=Ri.hashKey=Ri.isInShardRange=Ri.Evaluator=void 0;const e=Nxe(),t=Vst(),n=kxe();class r{constructor(u){this.getMatchedEvaluationDetailsMessage=(d,m,p)=>{var h;const g=!!(!((h=d.rules)===null||h===void 0)&&h.length),y=d.splits.length>1,x=m.shards.length>1,v=y||x;return g&&v?`Supplied attributes match rules defined in allocation "${d.key}" and ${p} belongs to the range of traffic assigned to "${m.variationKey}".`:g&&!v?`Supplied attributes match rules defined in allocation "${d.key}".`:`${p} belongs to the range of traffic assigned to "${m.variationKey}" defined in allocation "${d.key}".`},this.sharder=u??new n.MD5Sharder}evaluateFlag(u,d,m,p,h,g){var y,x;const v=new e.FlagEvaluationDetailsBuilder(d.configEnvironment.name,u.allocations,d.configFetchedAt,d.configPublishedAt);if(!u.enabled)return i(u.key,m,p,v.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${u.key}`));const b=new Date,_=[];for(let w=0;w<u.allocations.length;w++){const C=u.allocations[w],S=k=>{_.push({key:C.key,allocationEvaluationCode:k,orderPosition:w+1})};if(C.startAt&&b<new Date(C.startAt)){S(e.AllocationEvaluationCode.BEFORE_START_TIME);continue}if(C.endAt&&b>new Date(C.endAt)){S(e.AllocationEvaluationCode.AFTER_END_TIME);continue}const{matched:E,matchedRule:M}=l((y=C?.rules)!==null&&y!==void 0?y:[],Object.assign({id:m},p),h);if(E){for(const k of C.splits)if(k.shards.every(N=>this.matchesShard(N,m,u.totalShards))){const N=u.variations[k.variationKey],P=v.setMatch(w,N,C,M,_,g).build("MATCH",this.getMatchedEvaluationDetailsMessage(C,k,m));return{flagKey:u.key,subjectKey:m,subjectAttributes:p,allocationKey:C.key,variation:N,extraLogging:(x=k.extraLogging)!==null&&x!==void 0?x:{},doLog:C.doLog,flagEvaluationDetails:P}}S(e.AllocationEvaluationCode.TRAFFIC_EXPOSURE_MISS)}else S(e.AllocationEvaluationCode.FAILING_RULE)}return i(u.key,m,p,v.setNoMatchFound(_).build("DEFAULT_ALLOCATION_NULL",'No allocations matched. Falling back to "Default Allocation", serving NULL'))}matchesShard(u,d,m){const p=this.sharder.getShard(a(u.salt,d),m);return u.ranges.some(h=>s(p,h))}}Ri.Evaluator=r;function s(c,u){return u.start<=c&&c<u.end}Ri.isInShardRange=s;function a(c,u){return`${c}-${u}`}Ri.hashKey=a;function i(c,u,d,m){return{flagKey:c,subjectKey:u,subjectAttributes:d,allocationKey:null,variation:null,extraLogging:{},doLog:!1,flagEvaluationDetails:m}}Ri.noneResult=i;function l(c,u,d){if(!c.length)return{matched:!0,matchedRule:null};let m=null;return c.some(h=>{const g=(0,t.matchesRule)(h,u,d);return g&&(m=h),g})?{matched:!0,matchedRule:m}:{matched:!1,matchedRule:null}}return Ri.matchesRules=l,Ri}var dh={},IZ;function Pxe(){if(IZ)return dh;IZ=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.HttpRequestError=void 0;class e extends Error{constructor(r,s,a){super(r),this.message=r,this.status=s,this.cause=a,a&&(this.cause=a)}}dh.HttpRequestError=e;class t{constructor(r,s){this.apiEndpoints=r,this.timeout=s}async getUniversalFlagConfiguration(){const r=this.apiEndpoints.ufcEndpoint();return await this.rawGet(r)}async getBanditParameters(){const r=this.apiEndpoints.banditParametersEndpoint();return await this.rawGet(r)}async rawGet(r){try{const s=new AbortController,a=s.signal,i=setTimeout(()=>s.abort(),this.timeout),l=await fetch(r.toString(),{signal:a});if(clearTimeout(i),!l?.ok)throw new e("Failed to fetch data",l?.status);return await l.json()}catch(s){throw s.name==="AbortError"?new e("Request timed out",408,s):s instanceof e?s:new e("Network error",0,s)}}}return dh.default=t,dh}var OC={},d0={},RZ;function Wst(){if(RZ)return d0;RZ=1,Object.defineProperty(d0,"__esModule",{value:!0}),d0.waitForMs=void 0;async function e(t){await new Promise(n=>setTimeout(n,t))}return d0.waitForMs=e,d0}var PZ;function Hst(){if(PZ)return OC;PZ=1,Object.defineProperty(OC,"__esModule",{value:!0});const e=X3(),t=T_(),n=Wst();function r(a,i,l){let c=!1,u=0,d=a,m=!1,p;const h=async()=>{var x;c=!1;let v=!1,b=l?.skipInitialPoll?0:1+((x=l?.maxStartRetries)!==null&&x!==void 0?x:t.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES),_=null;for(;!v&&b>0;)try{await i(),v=!0,m=!1,e.logger.info("Eppo SDK successfully requested initial configuration")}catch(C){if(m=!0,e.logger.warn(`Eppo SDK encountered an error with initial poll of configurations: ${C.message}`),--b>0){const S=s(a);e.logger.warn(`Eppo SDK will retry the initial poll again in ${S} ms (${b} attempts remaining)`),await(0,n.waitForMs)(S)}else l?.pollAfterFailedStart?e.logger.warn("Eppo SDK initial poll failed; will attempt regular polling"):(e.logger.error("Eppo SDK initial poll failed. Aborting polling"),g()),l?.errorOnFailedStart&&(_=C)}if(!c&&(v&&l?.pollAfterSuccessfulStart||!v&&l?.pollAfterFailedStart)?(e.logger.info(`Eppo SDK starting regularly polling every ${a} ms`),p=setTimeout(y,a)):e.logger.info("Eppo SDK will not poll for configuration updates"),_)throw e.logger.info("Eppo SDK rethrowing start error"),_},g=()=>{c||(c=!0,p&&clearTimeout(p),e.logger.info("Eppo SDK polling stopped"))};async function y(){var x;if(!c){try{await i(),u=0,d=a,m&&(m=!1,e.logger.info("Eppo SDK poll successful; resuming normal polling"))}catch(v){m=!0,e.logger.warn(`Eppo SDK encountered an error polling configurations: ${v.message}`);const b=1+((x=l?.maxPollRetries)!==null&&x!==void 0?x:t.DEFAULT_POLL_CONFIG_REQUEST_RETRIES);if(++u<b){const _=Math.pow(2,u),w=s(a);d=_*a+w,e.logger.warn(`Eppo SDK will try polling again in ${d} ms (${b-u} attempts remaining)`)}else e.logger.error(`Eppo SDK reached maximum of ${u} failed polling attempts. Stopping polling`),g()}setTimeout(y,d)}}return{start:h,stop:g}}OC.default=r;function s(a){const i=a*t.POLL_JITTER_PCT/2,l=Math.max(Math.floor(Math.random()*a*t.POLL_JITTER_PCT/2),1);return i+l}return OC}var Uf={},OZ;function Oxe(){if(OZ)return Uf;OZ=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.validateNotBlank=Uf.InvalidArgumentError=void 0;class e extends Error{}Uf.InvalidArgumentError=e;function t(n,r){if(n==null||n.length===0)throw new e(r)}return Uf.validateNotBlank=t,Uf}var f0={};const zst="4.0.0",Gst={version:zst};var LZ;function qst(){if(LZ)return f0;LZ=1,Object.defineProperty(f0,"__esModule",{value:!0}),f0.LIB_VERSION=void 0;const e=Gst;return f0.LIB_VERSION=e.version,f0}var DZ;function Kst(){if(DZ)return ad;DZ=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.checkValueTypeMatch=ad.checkTypeMatch=void 0;const e=Exe(),t=X3(),n=mst(),r=Mxe(),s=Txe(),a=T_(),i=pst(),l=hst(),c=$st(),u=Nxe(),d=Pxe(),m=N_(),p=sx(),h=Hst(),g=Oxe(),y=qst();class x{constructor(w,C,S,E,M=!1){this.flagConfigurationStore=w,this.banditVariationConfigurationStore=C,this.banditModelConfigurationStore=S,this.configurationRequestParameters=E,this.isObfuscated=M,this.queuedAssignmentEvents=[],this.queuedBanditEvents=[],this.isGracefulFailureMode=!0,this.evaluator=new c.Evaluator,this.banditEvaluator=new n.BanditEvaluator}setConfigurationRequestParameters(w){this.configurationRequestParameters=w}setFlagConfigurationStore(w){this.flagConfigurationStore=w}setBanditVariationConfigurationStore(w){this.banditVariationConfigurationStore=w}setBanditModelConfigurationStore(w){this.banditModelConfigurationStore=w}setIsObfuscated(w){this.isObfuscated=w}async fetchFlagConfigurations(){var w,C;if(!this.configurationRequestParameters)throw new Error("Eppo SDK unable to fetch flag configurations without configuration request parameters");if(this.requestPoller&&this.requestPoller.stop(),!await this.flagConfigurationStore.isExpired()){t.logger.info("[Eppo SDK] Configuration store is not expired. Skipping fetching flag configurations");return}const{apiKey:E,sdkName:M,sdkVersion:k,baseUrl:N,requestTimeoutMs:P=a.DEFAULT_REQUEST_TIMEOUT_MS,numInitialRequestRetries:L=a.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES,numPollRequestRetries:O=a.DEFAULT_POLL_CONFIG_REQUEST_RETRIES,pollAfterSuccessfulInitialization:A=!1,pollAfterFailedInitialization:j=!1,throwOnFailedInitialization:T=!1,skipInitialPoll:I=!1}=this.configurationRequestParameters,U=new e.default({baseUrl:N,queryParams:{apiKey:E,sdkName:M,sdkVersion:k}}),B=new d.default(U,P),D=new s.default(B,this.flagConfigurationStore,(w=this.banditVariationConfigurationStore)!==null&&w!==void 0?w:null,(C=this.banditModelConfigurationStore)!==null&&C!==void 0?C:null);this.requestPoller=(0,h.default)(a.POLL_INTERVAL_MS,D.fetchAndStoreConfigurations.bind(D),{maxStartRetries:L,maxPollRetries:O,pollAfterSuccessfulStart:A,pollAfterFailedStart:j,errorOnFailedStart:T,skipInitialPoll:I}),await this.requestPoller.start()}stopPolling(){this.requestPoller&&this.requestPoller.stop()}getStringAssignment(w,C,S,E){return this.getStringAssignmentDetails(w,C,S,E).variation}getStringAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:N}=this.getAssignmentVariation(w,C,S,l.EppoValue.String(E),m.VariationType.STRING);return{variation:(M=k.stringValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:N}}getBoolAssignment(w,C,S,E){return this.getBooleanAssignment(w,C,S,E)}getBooleanAssignment(w,C,S,E){return this.getBooleanAssignmentDetails(w,C,S,E).variation}getBooleanAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:N}=this.getAssignmentVariation(w,C,S,l.EppoValue.Bool(E),m.VariationType.BOOLEAN);return{variation:(M=k.boolValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:N}}getIntegerAssignment(w,C,S,E){return this.getIntegerAssignmentDetails(w,C,S,E).variation}getIntegerAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:N}=this.getAssignmentVariation(w,C,S,l.EppoValue.Numeric(E),m.VariationType.INTEGER);return{variation:(M=k.numericValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:N}}getNumericAssignment(w,C,S,E){return this.getNumericAssignmentDetails(w,C,S,E).variation}getNumericAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:N}=this.getAssignmentVariation(w,C,S,l.EppoValue.Numeric(E),m.VariationType.NUMERIC);return{variation:(M=k.numericValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:N}}getJSONAssignment(w,C,S,E){return this.getJSONAssignmentDetails(w,C,S,E).variation}getJSONAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:N}=this.getAssignmentVariation(w,C,S,l.EppoValue.JSON(E),m.VariationType.JSON);return{variation:(M=k.objectValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:N}}getBanditAction(w,C,S,E,M){const{variation:k,action:N}=this.getBanditActionDetails(w,C,S,E,M);return{variation:k,action:N}}getBanditActionDetails(w,C,S,E,M){var k,N,P;const L=this.flagEvaluationDetailsBuilder(w),O={variation:M,action:null};let A=M,j=null;try{const T=(k=this.banditVariationConfigurationStore)===null||k===void 0?void 0:k.get(w);if(T&&!Object.keys(E).length)return Object.assign(Object.assign({},O),{evaluationDetails:L.buildForNoneResult("NO_ACTIONS_SUPPLIED_FOR_BANDIT","No bandit actions passed for a flag known to have an active bandit")});const I=this.ensureNonContextualSubjectAttributes(S),{variation:U,evaluationDetails:B}=this.getStringAssignmentDetails(w,C,I,M);A=U;const D=(N=T?.find(W=>W.variationValue===A))===null||N===void 0?void 0:N.key;if(D){const W=(P=this.banditModelConfigurationStore)===null||P===void 0?void 0:P.get(D);if(!W)throw new Error("No model parameters for bandit "+D);const z=W.modelData,$=this.ensureContextualSubjectAttributes(S),X=this.ensureActionsWithContextualAttributes(E),q=this.banditEvaluator.evaluateBandit(w,C,$,X,z);j=q.actionKey,B.banditAction=j,B.banditKey=D;const Y={timestamp:new Date().toISOString(),featureFlag:w,bandit:D,subject:C,action:j,actionProbability:q.actionWeight,optimalityGap:q.optimalityGap,modelVersion:W.modelVersion,subjectNumericAttributes:$.numericAttributes,subjectCategoricalAttributes:$.categoricalAttributes,actionNumericAttributes:X[j].numericAttributes,actionCategoricalAttributes:X[j].categoricalAttributes,metaData:this.buildLoggerMetadata(),evaluationDetails:B};this.logBanditAction(Y)}return{variation:A,action:j,evaluationDetails:B}}catch(T){if(t.logger.error("Error evaluating bandit action",T),!this.isGracefulFailureMode)throw T;return Object.assign(Object.assign({},O),{evaluationDetails:L.buildForNoneResult("ASSIGNMENT_ERROR",`Error evaluating bandit action: ${T.message}`)})}}ensureNonContextualSubjectAttributes(w){let C;if(this.isInstanceOfContextualAttributes(w)){const S=w;C=Object.assign(Object.assign({},S.numericAttributes),S.categoricalAttributes)}else C=w;return C}ensureContextualSubjectAttributes(w){let C;return this.isInstanceOfContextualAttributes(w)?C=w:C=this.deduceAttributeContext(w),C}ensureActionsWithContextualAttributes(w){let C={};return Array.isArray(w)?w.forEach(S=>{C[S]={numericAttributes:{},categoricalAttributes:{}}}):Object.values(w).every(this.isInstanceOfContextualAttributes)?C=w:Object.entries(w).forEach(([S,E])=>{C[S]=this.deduceAttributeContext(E)}),C}isInstanceOfContextualAttributes(w){return!!(typeof w=="object"&&w&&"numericAttributes"in w&&"categoricalAttributes"in w)}deduceAttributeContext(w){const C={numericAttributes:{},categoricalAttributes:{}};return Object.entries(w).forEach(([S,E])=>{typeof E=="number"&&isFinite(E)?C.numericAttributes[S]=E:C.categoricalAttributes[S]=E}),C}logBanditAction(w){if(!this.banditLogger){this.queuedBanditEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedBanditEvents.push(w);return}try{this.banditLogger.logBanditAction(w)}catch(C){t.logger.warn("Error encountered logging bandit action",C)}}getAssignmentVariation(w,C,S,E,M){try{const k=this.getAssignmentDetail(w,C,S,M);return k.variation?{eppoValue:l.EppoValue.valueOf(k.variation.value,M),flagEvaluationDetails:k.flagEvaluationDetails}:{eppoValue:E,flagEvaluationDetails:k.flagEvaluationDetails}}catch(k){const N=this.rethrowIfNotGraceful(k,E),P=new u.FlagEvaluationDetailsBuilder("",[],"","").buildForNoneResult("ASSIGNMENT_ERROR",`Assignment Error: ${k.message}`);return{eppoValue:N,flagEvaluationDetails:P}}}rethrowIfNotGraceful(w,C){if(this.isGracefulFailureMode)return t.logger.error(`[Eppo SDK] Error getting assignment: ${w.message}`),C??l.EppoValue.Null();throw w}getAssignmentDetail(w,C,S={},E){(0,g.validateNotBlank)(C,"Invalid argument: subjectKey cannot be blank"),(0,g.validateNotBlank)(w,"Invalid argument: flagKey cannot be blank");const M=this.flagEvaluationDetailsBuilder(w),k=this.getConfigDetails(),N=this.getFlag(w);if(N===null){t.logger.warn(`[Eppo SDK] No assigned variation. Flag not found: ${w}`);const L=M.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,C,S,L)}if(!v(E,N.variationType))throw new TypeError(`Variation value does not have the correct type. Found: ${N.variationType} != ${E} for flag ${w}`);if(!N.enabled){t.logger.info(`[Eppo SDK] No assigned variation. Flag is disabled: ${w}`);const L=M.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,C,S,L)}const P=this.evaluator.evaluateFlag(N,k,C,S,this.isObfuscated,E);if(this.isObfuscated&&(P.flagKey=w),P?.variation&&!b(E,P.variation.value)){const{key:L,value:O}=P.variation,A=`Expected variation type ${E} does not match for variation '${L}' with value ${O}`,j=M.buildForNoneResult("TYPE_MISMATCH",A);return(0,c.noneResult)(w,C,S,j)}try{P?.doLog&&this.logAssignment(P)}catch(L){t.logger.error(`[Eppo SDK] Error logging assignment event: ${L}`)}return P}flagEvaluationDetailsBuilder(w){var C;const S=this.getFlag(w),E=this.getConfigDetails();return new u.FlagEvaluationDetailsBuilder(E.configEnvironment.name,(C=S?.allocations)!==null&&C!==void 0?C:[],E.configFetchedAt,E.configPublishedAt)}getConfigDetails(){var w,C,S;return{configFetchedAt:(w=this.flagConfigurationStore.getConfigFetchedAt())!==null&&w!==void 0?w:"",configPublishedAt:(C=this.flagConfigurationStore.getConfigPublishedAt())!==null&&C!==void 0?C:"",configEnvironment:(S=this.flagConfigurationStore.getEnvironment())!==null&&S!==void 0?S:{name:""}}}getFlag(w){return this.isObfuscated?this.getObfuscatedFlag(w):this.flagConfigurationStore.get(w)}getObfuscatedFlag(w){const C=this.flagConfigurationStore.get((0,p.getMD5Hash)(w));return C?(0,i.decodeFlag)(C):null}getFlagKeys(){return this.flagConfigurationStore.getKeys()}isInitialized(){return this.flagConfigurationStore.isInitialized()&&(!this.banditVariationConfigurationStore||this.banditVariationConfigurationStore.isInitialized())&&(!this.banditModelConfigurationStore||this.banditModelConfigurationStore.isInitialized())}setLogger(w){this.setAssignmentLogger(w)}setAssignmentLogger(w){var C;this.assignmentLogger=w,this.flushQueuedEvents(this.queuedAssignmentEvents,(C=this.assignmentLogger)===null||C===void 0?void 0:C.logAssignment)}setBanditLogger(w){var C;this.banditLogger=w,this.flushQueuedEvents(this.queuedBanditEvents,(C=this.banditLogger)===null||C===void 0?void 0:C.logBanditAction)}disableAssignmentCache(){this.assignmentCache=void 0}useNonExpiringInMemoryAssignmentCache(){this.assignmentCache=new r.NonExpiringInMemoryAssignmentCache}useLRUInMemoryAssignmentCache(w){this.assignmentCache=new r.LRUInMemoryAssignmentCache(w)}useCustomAssignmentCache(w){this.assignmentCache=w}setIsGracefulFailureMode(w){this.isGracefulFailureMode=w}getFlagConfigurations(){return this.flagConfigurationStore.entries()}flushQueuedEvents(w,C){const S=[...w];w.length=0,C&&S.forEach(E=>{try{C(E)}catch(M){t.logger.error(`[Eppo SDK] Error flushing event to logger: ${M.message}`)}})}logAssignment(w){var C,S,E,M,k;const{flagKey:N,subjectKey:P,allocationKey:L,subjectAttributes:O,variation:A}=w,j=Object.assign(Object.assign({},(C=w.extraLogging)!==null&&C!==void 0?C:{}),{allocation:L??null,experiment:L?`${N}-${L}`:null,featureFlag:N,variation:(S=A?.key)!==null&&S!==void 0?S:null,subject:P,timestamp:new Date().toISOString(),subjectAttributes:O,metaData:this.buildLoggerMetadata(),evaluationDetails:w.flagEvaluationDetails});if(!(A&&L&&(!((E=this.assignmentCache)===null||E===void 0)&&E.has({flagKey:N,subjectKey:P,allocationKey:L,variationKey:A.key})))){if(!this.assignmentLogger){this.queuedAssignmentEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedAssignmentEvents.push(j);return}try{this.assignmentLogger.logAssignment(j),(M=this.assignmentCache)===null||M===void 0||M.set({flagKey:N,subjectKey:P,allocationKey:L??"__eppo_no_allocation",variationKey:(k=A?.key)!==null&&k!==void 0?k:"__eppo_no_variation"})}catch(T){t.logger.error(`[Eppo SDK] Error logging assignment event: ${T.message}`)}}}buildLoggerMetadata(){return{obfuscated:this.isObfuscated,sdkLanguage:"javascript",sdkLibVersion:y.LIB_VERSION}}}ad.default=x;function v(_,w){return _===void 0||w===_}ad.checkTypeMatch=v;function b(_,w){if(_==null)return!0;switch(_){case m.VariationType.STRING:return typeof w=="string";case m.VariationType.BOOLEAN:return typeof w=="boolean";case m.VariationType.INTEGER:return typeof w=="number"&&Number.isInteger(w);case m.VariationType.NUMERIC:return typeof w=="number";case m.VariationType.JSON:return typeof w=="string";default:return!1}}return ad.checkValueTypeMatch=b,ad}var m0={},FZ;function Yst(){if(FZ)return m0;FZ=1,Object.defineProperty(m0,"__esModule",{value:!0}),m0.HybridConfigurationStore=void 0;const e=X3();class t{constructor(r,s){this.servingStore=r,this.persistentStore=s,this.environment=null,this.configFetchedAt=null,this.configPublishedAt=null}async init(){if(!this.persistentStore)return;this.persistentStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} Persistent store is not initialized from remote configuration. Serving assignments that may be stale.`);const r=await this.persistentStore.entries();this.servingStore.setEntries(r)}isInitialized(){var r,s;return this.servingStore.isInitialized()&&((s=(r=this.persistentStore)===null||r===void 0?void 0:r.isInitialized())!==null&&s!==void 0?s:!0)}async isExpired(){var r;const s=await((r=this.persistentStore)===null||r===void 0?void 0:r.isExpired());return s??!0}get(r){return this.servingStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} getting a value from a ServingStore that is not initialized.`),this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async setEntries(r){return this.persistentStore&&await this.persistentStore.setEntries(r),this.servingStore.setEntries(r),!0}setEnvironment(r){this.environment=r}getEnvironment(){return this.environment}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return m0.HybridConfigurationStore=t,m0}var Bf={},UZ;function Qst(){if(UZ)return Bf;UZ=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.MemoryOnlyConfigurationStore=Bf.MemoryStore=void 0;class e{constructor(){this.store={},this.initialized=!1}get(r){var s;return(s=this.store[r])!==null&&s!==void 0?s:null}entries(){return this.store}getKeys(){return Object.keys(this.store)}isInitialized(){return this.initialized}setEntries(r){this.store=Object.assign({},r),this.initialized=!0}}Bf.MemoryStore=e;class t{constructor(){this.servingStore=new e,this.initialized=!1,this.configFetchedAt=null,this.configPublishedAt=null,this.environment=null}init(){return this.initialized=!0,Promise.resolve()}get(r){return this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async isExpired(){return!0}isInitialized(){return this.initialized}async setEntries(r){return this.servingStore.setEntries(r),this.initialized=!0,!0}getEnvironment(){return this.environment}setEnvironment(r){this.environment=r}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return Bf.MemoryOnlyConfigurationStore=t,Bf}var BZ;function ix(){return BZ||(BZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=e.assignmentCacheValueToString=e.assignmentCacheKeyToString=e.LRUInMemoryAssignmentCache=e.NonExpiringInMemoryAssignmentCache=e.MemoryOnlyConfigurationStore=e.HybridConfigurationStore=e.MemoryStore=e.validation=e.HttpClient=e.FlagConfigRequestor=e.ApiEndpoints=e.constants=e.EppoClient=e.AbstractAssignmentCache=e.applicationLogger=void 0;const t=Exe();e.ApiEndpoints=t.default;const n=X3();Object.defineProperty(e,"applicationLogger",{enumerable:!0,get:function(){return n.logger}});const r=Mxe();Object.defineProperty(e,"AbstractAssignmentCache",{enumerable:!0,get:function(){return r.AbstractAssignmentCache}}),Object.defineProperty(e,"NonExpiringInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.NonExpiringInMemoryAssignmentCache}}),Object.defineProperty(e,"LRUInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.LRUInMemoryAssignmentCache}}),Object.defineProperty(e,"assignmentCacheKeyToString",{enumerable:!0,get:function(){return r.assignmentCacheKeyToString}}),Object.defineProperty(e,"assignmentCacheValueToString",{enumerable:!0,get:function(){return r.assignmentCacheValueToString}});const s=Kst();e.EppoClient=s.default;const a=Txe();e.FlagConfigRequestor=a.default;const i=Yst();Object.defineProperty(e,"HybridConfigurationStore",{enumerable:!0,get:function(){return i.HybridConfigurationStore}});const l=Qst();Object.defineProperty(e,"MemoryStore",{enumerable:!0,get:function(){return l.MemoryStore}}),Object.defineProperty(e,"MemoryOnlyConfigurationStore",{enumerable:!0,get:function(){return l.MemoryOnlyConfigurationStore}});const c=T_();e.constants=c;const u=Pxe();e.HttpClient=u.default;const d=N_();Object.defineProperty(e,"VariationType",{enumerable:!0,get:function(){return d.VariationType}});const m=Oxe();e.validation=m}(wj)),wj}var p0={},Pi={},LC={},VZ;function Lxe(){if(VZ)return LC;VZ=1,Object.defineProperty(LC,"__esModule",{value:!0});class e{constructor(n){this.storage=n}async has(n){return!!await this.get(n)}async get(n){var r;const s=await this.storage.get(n);return(r=s?.[n])!==null&&r!==void 0?r:void 0}async entries(){return await this.storage.get(null)}async set(n,r){await this.storage.set({[n]:r})}}return LC.default=e,LC}var h0={},Vf={},$Z;function Dxe(){return $Z||($Z=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.META_KEY=Vf.CONFIGURATION_KEY=void 0,Vf.CONFIGURATION_KEY="eppo-configuration",Vf.META_KEY="eppo-configuration-meta"),Vf}var WZ;function Fxe(){if(WZ)return h0;WZ=1,Object.defineProperty(h0,"__esModule",{value:!0}),h0.ChromeStorageEngine=void 0;const e=Dxe();class t{constructor(r,s){this.storageMap=r,this.getContentsJsonString=async()=>{const i=await this.storageMap.get(this.contentsKey);return i??null},this.getMetaJsonString=async()=>{const i=await this.storageMap.get(this.metaKey);return i??null},this.setContentsJsonString=async i=>{await this.storageMap.set(this.contentsKey,i)},this.setMetaJsonString=async i=>{await this.storageMap.set(this.metaKey,i)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return h0.ChromeStorageEngine=t,h0}var g0={},HZ;function Xst(){if(HZ)return g0;HZ=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.IsolatableHybridConfigurationStore=void 0;const e=ix();class t extends e.HybridConfigurationStore{constructor(r,s,a="always"){super(r,s),this.servingStoreUpdateStrategy=a}async setEntries(r){var s;this.persistentStore&&await this.persistentStore.setEntries(r);const a=!this.persistentStore||await this.persistentStore.isExpired(),i=!(!((s=this.servingStore.getKeys())===null||s===void 0)&&s.length),l=this.servingStoreUpdateStrategy==="always"||a&&this.servingStoreUpdateStrategy==="expired"||a&&i;return l&&this.servingStore.setEntries(r),l}}return g0.IsolatableHybridConfigurationStore=t,g0}var y0={},zZ;function Zst(){if(zZ)return y0;zZ=1,Object.defineProperty(y0,"__esModule",{value:!0}),y0.LocalStorageEngine=void 0;const e=Dxe();class t{constructor(r,s){this.localStorage=r,this.getContentsJsonString=async()=>this.localStorage.getItem(this.contentsKey),this.getMetaJsonString=async()=>this.localStorage.getItem(this.metaKey),this.setContentsJsonString=async i=>{this.localStorage.setItem(this.contentsKey,i)},this.setMetaJsonString=async i=>{this.localStorage.setItem(this.metaKey,i)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return y0.LocalStorageEngine=t,y0}var x0={},GZ;function Jst(){if(GZ)return x0;GZ=1,Object.defineProperty(x0,"__esModule",{value:!0}),x0.StringValuedAsyncStore=void 0;class e{constructor(n,r=0){this.storageEngine=n,this.cooldownSeconds=r,this.initialized=!1}isInitialized(){return this.initialized}async isExpired(){if(!this.cooldownSeconds)return!0;const n=await this.storageEngine.getMetaJsonString();let r=!0;if(n){const a=JSON.parse(n).lastUpdatedAtMs;r=!a||Date.now()-a>this.cooldownSeconds*1e3}return r}async entries(){const n=await this.storageEngine.getContentsJsonString();return n?JSON.parse(n):{}}async setEntries(n){await this.storageEngine.setContentsJsonString(JSON.stringify(n));const r={lastUpdatedAtMs:new Date().getTime()};await this.storageEngine.setMetaJsonString(JSON.stringify(r)),this.initialized=!0}}return x0.StringValuedAsyncStore=e,x0}var qZ;function kB(){if(qZ)return Pi;qZ=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.localStorageIfAvailable=Pi.hasWindowLocalStorage=Pi.chromeStorageIfAvailable=Pi.hasChromeStorage=Pi.configurationStorageFactory=void 0;const e=ix(),t=Lxe(),n=Fxe(),r=Xst(),s=Zst(),a=Jst();function i({maxAgeSeconds:m=0,servingStoreUpdateStrategy:p="always",hasChromeStorage:h=!1,hasWindowLocalStorage:g=!1,persistentStore:y=void 0,forceMemoryOnly:x=!1},{chromeStorage:v,windowLocalStorage:b,storageKeySuffix:_}={}){if(x)return new e.MemoryOnlyConfigurationStore;if(y)return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,y,p);if(h&&v){const w=new n.ChromeStorageEngine(new t.default(v),_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),p)}else if(g&&b){const w=new s.LocalStorageEngine(b,_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),p)}return new e.MemoryOnlyConfigurationStore}Pi.configurationStorageFactory=i;function l(){return typeof chrome<"u"&&!!chrome.storage}Pi.hasChromeStorage=l;function c(){return l()?chrome.storage.local:void 0}Pi.chromeStorageIfAvailable=c;function u(){try{return typeof window<"u"&&!!window.localStorage}catch{return!1}}Pi.hasWindowLocalStorage=u;function d(){return u()?window.localStorage:void 0}return Pi.localStorageIfAvailable=d,Pi}var DC={},KZ;function eat(){if(KZ)return DC;KZ=1,Object.defineProperty(DC,"__esModule",{value:!0});const e=ix(),t=Lxe();class n{constructor(s){this.storage=new t.default(s)}set(s){this.storage.set((0,e.assignmentCacheKeyToString)(s),(0,e.assignmentCacheValueToString)(s))}has(s){throw new Error("This should never be called for ChromeStorageAssignmentCache, use getEntries() instead.")}async getEntries(){const s=await this.storage.entries();return Object.entries(s).map(([a,i])=>[a,i])}}return DC.default=n,DC}var FC={},YZ;function Uxe(){if(YZ)return FC;YZ=1,Object.defineProperty(FC,"__esModule",{value:!0});class e{constructor(n,r){this.servingStore=n,this.persistentStore=r}async init(){const n=await this.persistentStore.getEntries();n&&this.servingStore.setEntries(n)}set(n){this.servingStore.set(n),this.persistentStore.set(n)}has(n){return this.servingStore.has(n)}}return FC.default=e,FC}var v0={},QZ;function tat(){if(QZ)return v0;QZ=1,Object.defineProperty(v0,"__esModule",{value:!0}),v0.LocalStorageAssignmentCache=void 0;const e=ix(),t=kB();class n extends e.AbstractAssignmentCache{constructor(a){super(new r(a))}setEntries(a){a.forEach(([i,l])=>{i&&l&&this.delegate.set(i,l)})}getEntries(){return Promise.resolve(Array.from(this.entries()))}}v0.LocalStorageAssignmentCache=n;class r{constructor(a){if(!(0,t.hasWindowLocalStorage)())throw new Error("LocalStorage is not available");const i=a?`-${a}`:"";this.localStorageKey=`eppo-assignment${i}`}clear(){this.getCache().clear()}delete(a){return this.getCache().delete(a)}forEach(a,i){this.getCache().forEach(a,i)}entries(){return this.getCache().entries()}keys(){return this.getCache().keys()}values(){return this.getCache().values()}[Symbol.iterator](){return this.getCache()[Symbol.iterator]()}has(a){return this.getCache().has(a)}get(a){var i;return(i=this.getCache().get(a))!==null&&i!==void 0?i:void 0}set(a,i){return this.setCache(this.getCache().set(a,i))}getCache(){const a=window.localStorage.getItem(this.localStorageKey);return a?new Map(JSON.parse(a)):new Map}setCache(a){return window.localStorage.setItem(this.localStorageKey,JSON.stringify(Array.from(a.entries()))),this}}return v0}var UC={},XZ;function nat(){if(XZ)return UC;XZ=1,Object.defineProperty(UC,"__esModule",{value:!0});const e=ix();class t{constructor(){this.store=new Map,this.cache=new e.NonExpiringInMemoryAssignmentCache(this.store)}set(r){this.cache.set(r)}has(r){return this.cache.has(r)}setEntries(r){const{store:s}=this;r.forEach(([a,i])=>s.set(a,i))}getEntries(){return Promise.resolve(Array.from(this.cache.entries()))}}return UC.default=t,UC}var ZZ;function rat(){if(ZZ)return p0;ZZ=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.assignmentCacheFactory=void 0;const e=kB(),t=eat(),n=Uxe(),r=tat(),s=nat();function a({forceMemoryOnly:i=!1,chromeStorage:l,storageKeySuffix:c}){const u=new s.default;if(i)return u;if(l){const d=new t.default(l);return new n.default(u,d)}else if((0,e.hasWindowLocalStorage)()){const d=new r.LocalStorageAssignmentCache(c);return new n.default(u,d)}else return u}return p0.assignmentCacheFactory=a,p0}var $f={};const sat="3.4.0",aat={version:sat};var JZ;function iat(){if(JZ)return $f;JZ=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.sdkName=$f.sdkVersion=void 0;const e=aat;return $f.sdkVersion=e.version,$f.sdkName="js-client-sdk",$f}var eJ;function oat(){return eJ||(eJ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getConfigUrl=e.getInstance=e.init=e.offlineInit=e.buildStorageKeySuffix=e.EppoJSClient=e.ChromeStorageEngine=void 0;const t=ix(),n=rat(),r=Uxe(),s=kB(),a=iat();var i=Fxe();Object.defineProperty(e,"ChromeStorageEngine",{enumerable:!0,get:function(){return i.ChromeStorageEngine}});const l=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});class c extends t.EppoClient{getStringAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getStringAssignment(y,x,v,b)}getStringAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getStringAssignmentDetails(y,x,v,b)}getBoolAssignment(y,x,v,b){return this.getBooleanAssignment(y,x,v,b)}getBooleanAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignment(y,x,v,b)}getBooleanAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignmentDetails(y,x,v,b)}getIntegerAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignment(y,x,v,b)}getIntegerAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignmentDetails(y,x,v,b)}getNumericAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignment(y,x,v,b)}getNumericAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignmentDetails(y,x,v,b)}getJSONAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignment(y,x,v,b)}getJSONAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignmentDetails(y,x,v,b)}getBanditAction(y,x,v,b,_){return c.getAssignmentInitializationCheck(),super.getBanditAction(y,x,v,b,_)}getBanditActionDetails(y,x,v,b,_){return c.getAssignmentInitializationCheck(),super.getBanditActionDetails(y,x,v,b,_)}static getAssignmentInitializationCheck(){c.initialized||t.applicationLogger.warn("Eppo SDK assignment requested before init() completed")}}e.EppoJSClient=c,c.instance=new c(l,void 0,void 0,void 0,!0),c.initialized=!1;function u(g){return g.replace(/\W/g,"").substring(0,8)}e.buildStorageKeySuffix=u;function d(g){var y,x;const v=(y=g.isObfuscated)!==null&&y!==void 0?y:!1,b=(x=g.throwOnFailedInitialization)!==null&&x!==void 0?x:!0;try{const _=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});_.setEntries(g.flagsConfiguration).catch(S=>t.applicationLogger.warn("Error setting flags for memory-only configuration store",S)),c.instance.setFlagConfigurationStore(_),c.instance.setIsObfuscated(v),g.assignmentLogger&&c.instance.setAssignmentLogger(g.assignmentLogger);const C=(0,n.assignmentCacheFactory)({storageKeySuffix:"offline",forceMemoryOnly:!0});c.instance.useCustomAssignmentCache(C)}catch(_){if(t.applicationLogger.warn("Eppo SDK encountered an error initializing, assignment calls will return the default value and not be logged"),b)throw _}return c.initialized=!0,c.instance}e.offlineInit=d;async function m(g){var y,x,v,b,_,w,C;t.validation.validateNotBlank(g.apiKey,"API key required");let S;const E=c.instance,{apiKey:M,persistentStore:k,baseUrl:N,maxCacheAgeSeconds:P,updateOnFetch:L}=g;try{E.stopPolling(),E.setAssignmentLogger(g.assignmentLogger),E.setIsObfuscated(!0);const O=u(M),A=(0,s.configurationStorageFactory)({maxAgeSeconds:P,servingStoreUpdateStrategy:L,persistentStore:k,hasChromeStorage:(0,s.hasChromeStorage)(),hasWindowLocalStorage:(0,s.hasWindowLocalStorage)()},{chromeStorage:(0,s.chromeStorageIfAvailable)(),windowLocalStorage:(0,s.localStorageIfAvailable)(),storageKeySuffix:O});E.setFlagConfigurationStore(A);const j=(0,n.assignmentCacheFactory)({chromeStorage:(0,s.chromeStorageIfAvailable)(),storageKeySuffix:O});j instanceof r.default&&await j.init(),E.useCustomAssignmentCache(j);const T={apiKey:M,sdkName:a.sdkName,sdkVersion:a.sdkVersion,baseUrl:N,requestTimeoutMs:(y=g.requestTimeoutMs)!==null&&y!==void 0?y:void 0,numInitialRequestRetries:(x=g.numInitialRequestRetries)!==null&&x!==void 0?x:void 0,numPollRequestRetries:(v=g.numPollRequestRetries)!==null&&v!==void 0?v:void 0,pollAfterSuccessfulInitialization:(b=g.pollAfterSuccessfulInitialization)!==null&&b!==void 0?b:!1,pollAfterFailedInitialization:(_=g.pollAfterFailedInitialization)!==null&&_!==void 0?_:!1,throwOnFailedInitialization:!0,skipInitialPoll:(w=g.skipInitialRequest)!==null&&w!==void 0?w:!1};E.setConfigurationRequestParameters(T);let I,U;const B=A.init().then(async()=>A.getKeys().length?await A.isExpired()&&!g.useExpiredCache?(t.applicationLogger.warn("Eppo SDK set not to use expired cached configuration"),I=new Error("Configuration store was expired"),""):"config store":(t.applicationLogger.warn("Eppo SDK cached configuration is empty"),I=new Error("Configuration store was empty"),"")).catch(z=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from the configuration store",z),I=z}),D=E.fetchFlagConfigurations().then(()=>"fetch").catch(z=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from fetching",z),U=z});let W=await Promise.race([B,D]);W||(I?W=await D:W=await B),W||(S=U)}catch(O){S=O}if(S&&(t.applicationLogger.warn("Eppo SDK was unable to initialize with a configuration, assignment calls will return the default value and not be logged"+(g.pollAfterFailedInitialization?" until an experiment configuration is successfully retrieved":"")),!((C=g.throwOnFailedInitialization)!==null&&C!==void 0)||C))throw S;return c.initialized=!0,E}e.init=m;function p(){return c.instance}e.getInstance=p;function h(g,y){const x={sdkName:a.sdkName,sdkVersion:a.sdkVersion,apiKey:g};return new t.ApiEndpoints({baseUrl:y,queryParams:x}).ufcEndpoint()}e.getConfigUrl=h}(_j)),_j}var Bxe=oat();const lat=uFe({__proto__:null},[Bxe]);function TB(e,t){f.useEffect(()=>{if(typeof window>"u")return;const r=window.cookieStore;if(!r)return;const s=a=>{const i=a.deleted.find(c=>c.name===e),l=a.changed.find(c=>c.name===e);if(i||l){t(l??null);return}};return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e,t])}let BC=[];class aa{static PREFERRED_COLOR_SCHEME_COOKIE="colorScheme";static get userPreferredColorScheme(){return Fn(this.PREFERRED_COLOR_SCHEME_COOKIE)}static set userPreferredColorScheme(t){rn(this.PREFERRED_COLOR_SCHEME_COOKIE,t,{expires:400}),localStorage.setItem(this.PREFERRED_COLOR_SCHEME_COOKIE,t)}static removeUserPreferredColorScheme(){Pm(this.PREFERRED_COLOR_SCHEME_COOKIE),localStorage.removeItem(this.PREFERRED_COLOR_SCHEME_COOKIE)}static get isSystemScheme(){return!this.userPreferredColorScheme}static addOverride(t){const n={scheme:t};return BC.push(n),n}static removeOverride(t){BC=BC.filter(n=>n!==t)}static get colorScheme(){const t=BC.at(-1);return t?t.scheme:this.isSystemScheme?typeof window>"u"?void 0:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.userPreferredColorScheme}}function cat(e){f.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)");function r(){e(aa.colorScheme)}return n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[e])}function uat(){return f.useCallback(e=>{if(typeof window>"u")return;const n=document.documentElement.dataset.colorScheme==="dark",r=aa.colorScheme;if(e){document.documentElement.dataset.colorScheme=e;return}n&&r==="light"?document.documentElement.dataset.colorScheme="light":!n&&r==="dark"&&(document.documentElement.dataset.colorScheme="dark")},[])}const Vxe=Yt("ColorSchemeContext",null),$xe=R.memo(function(t){const{children:n,userPreferredColorScheme:r}=t,[s,a]=f.useState(r?!1:aa.isSystemScheme),[i,l]=f.useState(r??aa.colorScheme),c=f.useCallback(y=>{aa.userPreferredColorScheme=y,a(!1),l(y)},[]),u=f.useCallback(()=>{aa.removeUserPreferredColorScheme(),a(!0),l(aa.colorScheme)},[]),d=uat(),m=f.useCallback(y=>{s&&(l(y),d())},[s,d]);cat(m);const p=f.useMemo(()=>Js(y=>{const x=!y&&aa.isSystemScheme;a(x),!x&&(l(y?.value??aa.colorScheme),d(y?.value))},100),[d]);TB(aa.PREFERRED_COLOR_SCHEME_COOKIE,p),f.useEffect(()=>{aa.isSystemScheme&&(document.documentElement.dataset.colorScheme=aa.colorScheme),d()},[d]);const h=f.useCallback(y=>{const x=aa.addOverride(y);return l(aa.colorScheme),d(),x},[d]),g=f.useCallback(y=>{aa.removeOverride(y),l(aa.colorScheme),d()},[d]);return typeof document<"u"&&document.documentElement.dataset.colorScheme!==i&&(document.documentElement.dataset.colorScheme=i),o.jsx(Vxe.Provider,{value:{colorScheme:i,isSystemColorScheme:s,setSystemColorScheme:u,setUserPreferredColorScheme:c,addOverride:h,removeOverride:g},children:n})});$xe.displayName="ColorSchemeProvider";function Jr(e){const t=f.useContext(Vxe);if(!t)throw new Error("Attempted to access ColorSchemeContext from useColorScheme() without adding <ColorSchemeProvider> to the tree.");const[n,r]=f.useState(!t.isSystemColorScheme);f.useEffect(()=>{e?.addSecondPass&&t.isSystemColorScheme&&!n&&r(!0)},[t.isSystemColorScheme,n,e?.addSecondPass]);const s={...t};return e?.addSecondPass&&(s.isColorSchemeReady=n),s}function dat({flag:e,override:t,defaultValue:n,isServer:r=!1}){if(!t)return{shouldUseOverride:!1,value:null};try{if(typeof n=="boolean")return{shouldUseOverride:!0,value:t==="true"};if(typeof n=="number")return{shouldUseOverride:!0,value:Number(t)};if(typeof n=="object")try{return{shouldUseOverride:!0,value:JSON.parse(t)}}catch(s){return ne.warn(`[Eppo ${r?"Server ":""}Override]`,`Failed to parse JSON override for flag "${e}"`,{override:t,error:s}),{shouldUseOverride:!0,value:n}}return{shouldUseOverride:!0,value:t}}catch(s){return ne.error(`[Eppo ${r?"Server ":""}Override] Error:`,s),{shouldUseOverride:!0,value:n}}}let b0;async function fat({apiKey:e,logAssignment:t}){if(b0)return b0;const{init:n}=await Q(async()=>{const{init:r}=await Promise.resolve().then(()=>lat);return{init:r}},void 0);try{return b0=n({apiKey:e,assignmentLogger:{logAssignment:t}}),await b0,ne.info("[Eppo Experiments] Primary key initialization successful"),b0}catch(r){throw ne.error("[Eppo Experiments] Primary key failed",r),r}}const Wxe="eppo_overrides",Hxe="eppo_overrides",mat=e=>e?e.endsWith("@perplexity.ai"):!1,pat=e=>{const t={};return e.forEach((n,r)=>{if(r.startsWith("eppo_")){const s=r.replace("eppo_","");t[s]=n??""}}),t},hat=e=>{let t=!0;const n=JSON.stringify(e);try{rn(Hxe,n)}catch{t=!1}return t=Xs.setItem(Wxe,n),t},gat=(e,t,n)=>{if(typeof window>"u"||n&&!mat(e))return!1;const r=pat(t);return Object.keys(r).length===0?!1:hat(r)};function yat(){try{const e=Fn(Hxe);if(e)return JSON.parse(e);const t=Xs.getItem(Wxe);return t?JSON.parse(t):{}}catch{return{}}}const xat=(e,t)=>{const n=f.useRef(void 0);ys(n.current,t)||(n.current=t),f.useEffect(e,[n.current])},vat={getEppoTypedVariation:function(){return Promise.resolve(void 0)},keysRequiringRerender:[],addKeyRequiringRerender:()=>null,removeKeyRequiringRerender:()=>null},NB=Yt("EppoExperimentsContext",vat),bat="experiment assignment",w2="failed_open_to_default_value",_at=(e,t,n,r)=>s=>al({name:bat,data:{subjectType:s.subjectAttributes.subjectType,pagePropsHostname:r,colorScheme:n,isPerplexityBrowser:e,...s},session:t});function wat(e){const t=Bxe.buildStorageKeySuffix(e),n=["eppo-configuration-","eppo-configuration-meta-","eppo-assignment-"];Oe.keys().filter(s=>s.startsWith("eppo-")).forEach(s=>{const a=s.split("-");if(a.length<2)return;const i=a[a.length-1],l=a.slice(0,-1).join("-")+"-";n.includes(l)&&i!==t&&(ne.warn("[Eppo Experiments] Cleaning up old Eppo key",{key:s,keySuffix:i,storageKeySuffix:t}),Oe.removeItem(s))})}const Cat=({children:e,hostname:t,session:n,cfCountry:r})=>{const s=!!n?.user,a=ROe(),i=POe(),l=pi(),[c,u]=f.useState([]),{env:{isProduction:d,isStaging:m,deployName:p},device:{isWindowsApp:h}}=Lt(),y=d||m?"a2yUBlJ1tebb5g2II8WD1CzbVUszCSk3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc":"KphAz1VUxSQKAZxlw1PwMdZNRia-a4B3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc",{colorScheme:x}=Jr(),v=f.useRef(void 0),b=Ut(),[_,w]=f.useState(!1),{locale:C}=Z(),{isMobileStyle:S}=Ce(),E=f.useCallback(P=>{_at(l,n,x,t)(P)},[n,l,x,t]);f.useEffect(()=>{if(_||!b)return;gat(n?.user?.email,b,d)&&w(!0)},[b,n?.user?.email,_,d]);const M=f.useCallback(async function(P,{flag:L,subjectType:O,stableId:A,defaultValue:j,extraAttributes:T}){if(O==="user_nextauth_id"&&!s)return j;const I=oo()?.device_id??void 0;let U;if(A?U=A:O==="user_nextauth_id"?U=n?.user?.id:O==="visitor_id"?U=a??void 0:O==="session_id"?U=i??void 0:O==="context_uuid"?U=T?.context_uuid:O==="comet_device_id"&&(U=I),!U)return ne.error("[Eppo Experiments]","No subject key found",{flag:L,subject_type:O,is_user_logged_in:s,has_stable_id:!!A,has_session_user_id:!!n?.user?.id,has_visitor_id:!!a,has_session_id:!!i,has_context_uuid:!!T?.context_uuid,has_comet_device_id:!!I,execution_context:typeof window<"u"?"client":"server",document_ready_state:typeof document<"u"?document.readyState:"unknown",eppo_provider_result:w2}),j;const B=yat(),{shouldUseOverride:D,value:W}=dat({flag:L,override:B[L],defaultValue:j});if(D)return W??j;if(!y)return ne.error("[Eppo Experiments]","No Eppo API key found",{flag:L,eppo_provider_result:w2}),j;v.current||(wat(y),v.current=fat({apiKey:y,logAssignment:E}));const z=await v.current;try{return P(z,L,U,{subjectType:O,visitorId:a??void 0,sessionId:i??void 0,userEmail:n?.user?.email??void 0,userId:n?.user?.id??void 0,appApiClient:OOe(S,h),cfCountry:r,locale:C,isComet:l,deployName:p,cometDeviceId:I,...cue(),...T??{}},j)}catch{return ne.error("[Eppo Experiments] Error calling eppoFn",{flag:L,subjectKey:U,eppo_provider_result:w2}),j}},[y,n?.user?.id,n?.user?.email,a,i,E,S,h,r,C,l,p,s]),k=f.useCallback(P=>{u(L=>L.includes(P)?L:[...L,P])},[]),N=P=>{u(L=>L.includes(P)?L.filter(O=>O!==P):L)};return o.jsx(NB.Provider,{value:{getEppoTypedVariation:M,keysRequiringRerender:c,addKeyRequiringRerender:k,removeKeyRequiringRerender:N},children:e})};function ox(e,t){const n=f.useContext(NB);if(!n)throw new Error("useGetEppoJSONVariation must be used within EppoExperimentsContext");const{getEppoTypedVariation:r}=n,[s,a]=f.useState(!0),[i,l]=f.useState(void 0),[c,u]=f.useState(e.defaultValue),d=f.useRef(e),m=f.useCallback(async()=>{const{skip:p,...h}=d.current;try{return r(t,h)}catch(g){return ne.error("[Eppo Experiments]","Error calling getEppoTypedVariation",{flag:h.flag,error:g,eppo_provider_result:w2}),h.defaultValue}},[r,t]);return xat(()=>{d.current=e;const{skip:p,...h}=e;if(p){a(!1);return}a(!0),r(t,h).then(g=>u(g),l).finally(()=>a(!1))},[r,e]),{value:c,loading:s,error:i,fetchVariation:m}}const zxe=(e,...t)=>e.getJSONAssignment(...t);function qu(e){return ox(e,zxe)}function Sat(e,t){const n={...e,subjectType:"context_uuid",extraAttributes:{...e.extraAttributes,context_uuid:t}};return ox(n,zxe)}const Eat=(e,...t)=>e.getStringAssignment(...t);function r5(e){return ox(e,Eat)}const Mat=(e,...t)=>e.getBooleanAssignment(...t);function Dt(e){return ox(e,Mat)}const kat=(e,...t)=>e.getNumericAssignment(...t);function Tat(e){return ox(e,kat)}const Nat=(e,...t)=>e.getIntegerAssignment(...t);function Gxe(e){return ox(e,Nat)}function jB(e){return qu({...e,subjectType:"visitor_id",skip:!1})}function $r(e){return Dt({...e,subjectType:"visitor_id",skip:!1})}const yf=()=>{const e=f.useContext(NB);if(!e)throw new Error("useEppoExperiments must be used within EppoExperimentsContext");return e};var Ad;(function(e){e.MY_FILES="my-files",e.SOURCES="sources",e.MY_CONNECTORS="my-connectors",e.SPACES="spaces"})(Ad||(Ad={}));function AB({reason:e,feature:t}){const{isEnterprise:n}=kn({reason:e}),{hasAccessToProFeatures:r}=Et(),{value:s}=$r({flag:"connectors-space-access-for-pro",defaultValue:!1});return n?!0:r?t===Ad.MY_FILES?!1:t===Ad.SPACES?s:t!==Ad.SOURCES:!1}const qxe=R.memo(({children:e,uploadSources:t,placement:n,isMobileStyle:r,isOpen:s=!1,onOpen:a,onClose:i})=>{const{$t:l}=Z(),c=f.useCallback(()=>{a?.()},[a]),u=f.useCallback(()=>{i?.()},[i]),d=f.useMemo(()=>o.jsx(H,{className:"w-[200px]",children:o.jsx(Yd,{items:t})}),[t]);return r?o.jsxs(o.Fragment,{children:[o.jsx(on,{subtitle:l({defaultMessage:"Attach",id:"Ye0Clmvfec"}),subtitleClassname:"ml-sm mt-sm font-medium",variant:"bottom-left-sheet",isOpen:s,onClose:u,children:o.jsx(H,{className:"p-xs w-full",children:o.jsx(Yd,{textColor:"light",items:t})})}),o.jsx("span",{onClick:c,children:e})]}):o.jsx(lo,{isOpen:s,placement:n,onOpen:c,onClose:u,content:d,children:e})});qxe.displayName="AttachDropdown";const jat=({skip:e,filters:t,reason:n})=>{const r=$u({enabled:!0,initialPageParam:null,queryKey:btt(t),queryFn:({pageParam:a})=>est({filters:t,skipToken:a,reason:n}),getNextPageParam:a=>a&&a.sites.length?a.skipToken:void 0}),s=r.data?.pages.map(a=>a?.sites??[]).flat()??fe;return f.useMemo(()=>({...r,sites:s}),[r,s])},s5=(e,t,n)=>{f.useEffect(()=>{const r=new IntersectionObserver(a=>{a.forEach(i=>{i.isIntersecting&&t()})},n),s=e.current;return s&&r.observe(s),()=>{s&&r.unobserve(s)}},[e,t,n])},Aat=11,Kxe=R.memo(({onNext:e,onCancel:t})=>{const n="sharepoint-site-selector",r=f.useRef(null),{$t:s}=Z(),a=s({defaultMessage:"Next",id:"9+DdtuCqLw"}),i=s({defaultMessage:"Cancel",id:"47FYwba+bI"}),[l,c]=f.useState(null),u=f.useCallback(k=>c(k.name!==l?.name?k:null),[l]),{isMobileUserAgent:d}=Ce(),[m,p]=f.useState(!1),[h,g]=f.useState(""),[y,x]=f.useState(h),v=f.useCallback(k=>{c(null),g(k)},[g]),{fetchNextPage:b,hasNextPage:_,isFetchingNextPage:w,sites:C,isLoading:S}=jat({skip:!1,filters:{search_term:y},reason:n}),E=f.useMemo(()=>Js(()=>{_&&!w&&b()},500),[_,w,b]);s5(r,E,{threshold:.5}),f.useEffect(()=>{!S&&y===""&&p(C.length>Aat)},[S,y,C]),f.useEffect(()=>{const k=setTimeout(()=>x(h),250);return()=>clearTimeout(k)},[h]);const M=f.useCallback(()=>e(l?.webUrl??""),[e,l?.webUrl]);return o.jsxs(H,{variant:"transparent",className:"px-md gap-y-sm grid sm:w-full md:w-[515px]",children:[m&&o.jsx(Wr,{type:"text",isMobileUserAgent:d,placeholder:s({defaultMessage:"Search sites",id:"Nxbc+cXNbW"}),value:h,className:"bg-subtle rounded-md border-none",onChange:v,pill:!1}),o.jsxs(H,{variant:"subtler",className:"gap-y-sm scrollbar-subtle p-sm mb-md h-56 flex-col overflow-y-scroll rounded-lg",children:[S&&o.jsx(To,{className:"gap-y-sm grid",blockCount:5,size:"small",noLines:!0}),C.length>0&&C.map((k,N)=>o.jsx(Yxe,{site:k,index:N,handleSelectSite:u,selectedSiteName:l?.name,sitesLength:C.length,lastSiteRef:r},N)),!S&&!w&&C.length===0&&o.jsx(F,{variant:"small",color:"light",textCenter:!0,children:s({defaultMessage:"No results",id:"jHJmjfxD4s"})}),w&&o.jsx(To,{blockCount:1,size:"small"})]}),o.jsxs(H,{className:"gap-x-md flex justify-end",children:[o.jsx(pe,{variant:"common",text:i,onClick:t}),o.jsx(pe,{variant:"primary",text:a,textClassName:"",disabled:l===null,onClick:M})]})]})});Kxe.displayName="SharepointSiteSelector";const Yxe=R.memo(({site:e,index:t,handleSelectSite:n,selectedSiteName:r,sitesLength:s,lastSiteRef:a})=>{const i=f.useCallback(()=>n(e),[n,e]),l=f.useMemo(()=>o.jsx(le,{icon:Ar,className:"text-super"}),[]);return o.jsx(Te,{ref:t===s-1?a:null,variant:"common",layout:"split",text:e.name,size:"small",onClick:i,extraCSS:"pl-sm",trailingComponent:r===e.name?l:null,textClassName:"!text-left w-5/6 text-foreground",fullWidth:!0})});Yxe.displayName="TextButtonFactory";const IB=R.memo(({isOpen:e,options:t,onClose:n,onSelectSite:r})=>{const{$t:s}=Z(),a=f.useMemo(()=>t?.connector==="sharepoint"&&!t.webUrl,[t?.connector,t?.webUrl]),i=f.useMemo(()=>{if(a)return o.jsx(F,{variant:"entry-title-200",className:"ml-md line-clamp-3 text-pretty",children:s({defaultMessage:"Select a site",id:"NLmDBthOaZ"})})},[s,a]);return o.jsxs(on,{variant:a?"medium":"wide",isOpen:e,onClose:n,renderCloseButton:!a,titleContent:i,children:[a&&o.jsx(Kxe,{onNext:r,onCancel:n}),!a&&o.jsx("iframe",{id:"microsoft-file-picker",height:"800px"})]})});IB.displayName="MicrosoftFilePickerModal";const a5=(e,t)=>{const{value:n,loading:r}=Dt({flag:"file-manager-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Iat=[".pdf",".txt",".csv",".xlsx",".docx",".pptx",".md",".json"].join(",");function Rat(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function Pat(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var Oat=typeof window<"u";function B8(e){if(e){if(e.tagName==="BODY")return e;if(e.tagName==="IFRAME"){var t=e.contentDocument;return t?t.body:null}else if(!e.offsetParent)return null}else return null;return B8(e.offsetParent)}function tJ(e){var t=e||window.event;return t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}var nJ=Oat&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),fh=new Map,rJ=typeof document=="object"?document:void 0,VC=!1;const Lat=rJ?function(t,n){t===void 0&&(t=!0);var r=f.useRef(rJ.body);n=n||r;var s=function(i){var l=fh.get(i);l?fh.set(i,{counter:l.counter+1,initialOverflow:l.initialOverflow}):(fh.set(i,{counter:1,initialOverflow:i.style.overflow}),nJ?VC||(Rat(document,"touchmove",tJ,{passive:!1}),VC=!0):i.style.overflow="hidden")},a=function(i){var l=fh.get(i);l&&(l.counter===1?(fh.delete(i),nJ?(i.ontouchmove=null,VC&&(Pat(document,"touchmove",tJ),VC=!1)):i.style.overflow=l.initialOverflow):fh.set(i,{counter:l.counter-1,initialOverflow:l.initialOverflow}))};f.useEffect(function(){var i=B8(n.current);i&&(t?s(i):a(i))},[t,n.current]),f.useEffect(function(){var i=B8(n.current);if(i)return function(){a(i)}},[])}:function(t,n){},Dat=["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),Fat=["application/vnd.google-apps.file","application/vnd.google-apps.folder","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/pdf","text/csv","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/markdown"],Uat=["text/plain","application/pdf","text/csv","text/markdown","image/png","image/jpeg","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet"],Bat=["audio/mpeg","audio/wav","audio/aiff","audio/ogg","audio/flac","audio/mp3","video/mp4","video/mpeg","video/mov","video/avi","video/x-flv","video/mpg","video/webm","video/wmv","video/3gpp","video/quicktime"],Qxe=({clientId:e,apiKey:t,loginHint:n,isAudioVideoFilesEnabled:r,onError:s})=>{const[a,i]=f.useState(!1),[l,c]=f.useState(!1);Lat(l);const u=f.useCallback(()=>{s?.()},[s]);f.useEffect(()=>{const p=document.createElement("script");p.src="https://apis.google.com/js/api.js",p.id="google-drive-picker-gapi-script",p.onload=()=>{const h=document.createElement("script");h.src="https://accounts.google.com/gsi/client",h.id="google-drive-picker-gis-script",h.onload=()=>{window.gapi.load("picker",{callback:()=>i(!0),onerror:()=>{i(!1),u()}})},h.onerror=()=>{i(!1),u()},document.body.appendChild(h)},p.onerror=()=>{i(!1),u()},document.body.appendChild(p)},[u]);const d=f.useCallback((p,h)=>{const g=window.google?.picker,y=x=>{x.action===g.Action.PICKED?h.onPicked&&h.onPicked(x.docs??fe):(x.action===g.Action.CANCEL||x.action===g.Action.ERROR)&&(x.action===g.Action.CANCEL&&h.onCancel&&h.onCancel(),c(!1))};if(a&&g)try{const x=new g.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMode(g.DocsViewMode.LIST),v=new g.ViewGroup(x);let b=h.mode==="source"?Fat:Uat;b=r?b.concat(Bat):b,new g.PickerBuilder().setSize(1051,650).addViewGroup(v).setSelectableMimeTypes(b.join(",")).enableFeature(g.Feature.MULTISELECT_ENABLED).setOAuthToken(p).setDeveloperKey(t).setCallback(y).build().setVisible(!0),c(!0)}catch{u()}},[a,t,u,r]),m=f.useCallback(p=>{window.google.accounts.oauth2.initTokenClient({client_id:e,login_hint:n,scope:Dat,prompt:"none",callback:g=>{if(g.error!==void 0)throw new Error(g.error);try{d(g.access_token,p)}catch(y){console.log(y)}}}).requestAccessToken()},[d,e,n]);return f.useMemo(()=>({openPicker:m,isReady:a}),[m,a])};function Vat(e){return e!==void 0&&"onClick"in e}function $at(e){switch(e.name){case"notion":return Ot.NOTION;case"google_drive":return Ot.GOOGLE_DRIVE;case"onedrive":return Ot.ONEDRIVE;case"sharepoint":return Ot.SHAREPOINT;case"dropbox":return Ot.DROPBOX;case"box":return Ot.BOX;case"wiley":return Ot.WILEY;case"gcal":return Ot.GCAL;case"outlook":return Ot.OUTLOOK;case"edgar":case"linear":case"linear_alt":case"notion_mcp":case"factset":case"slack":case"github_mcp_direct":case"asana_mcp_direct":case"asana_mcp_merge":case"atlassian_mcp_direct":case"slack_direct":case"jira_mcp_merge":case"confluence_mcp_merge":case"microsoft_teams_mcp_merge":case"wiley_mcp_cashmere":case"crunchbase":return null;default:Kt(e.name)}}function sJ(e,t){const n=$at(e);return!!(n&&t.includes(n))}const Xxe=R.memo(({repoFileLimitReached:e,addFilesTooltipMessage:t,isAudioVideoFilesEnabled:n,handleSourcesEdit:r,variant:s="primary",collectionSlugOverride:a,connectionTypes:i=LB})=>{const l="file-upload-selector",c=Z(),{variation:u}=a5(!1),{$t:d}=Z(),{isMobileStyle:m}=Ce(),[p,h]=f.useState(!1),{fileRepoInfo:g}=Do({reason:l,collectionSlugOverride:a}),y=g.file_repository_type==="COLLECTION",{mutateAsync:x}=hB({reason:l,onConnectorFileUploadSuccess:()=>{r?.(u?"files":"connectors")}}),v=f.useRef(null),{handleFileSelect:b}=Sxe({reason:l,onLocalFileUploadSuccess:()=>{r?.(u?"files":"localFiles")}}),{referrer:_,referrerId:w}=bB({}),{connectorsMap:C}=M_({reason:l}),{enabledFileConnectors:S}=k_({reason:l}),{disabledFileConnectors:E}=vB({reason:l}),{trackEvent:M}=je(),[k,N]=f.useState(!1),[P,L]=f.useState(!1),O=AB({reason:l,feature:Ad.SPACES}),A=f.useCallback(ye=>ye.preventDefault(),[]),{onOpen:j,onClose:T,onError:I,options:U,onSelectSite:B,isOpen:D,log:W}=xxe({reason:l,mode:"persistent"}),{openPicker:z}=Qxe({clientId:C?.google_drive?.picker_credentials?.client_id??"",apiKey:C?.google_drive?.picker_credentials?.api_key??"",loginHint:C?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:n}),$=f.useCallback((ye,_e)=>{if(_e==="onedrive"){const be=ye.map(Ne=>Ne.id);x({connectorName:"onedrive",fileIds:be,fileRepoInfo:y?g:void 0})}else if(_e==="sharepoint"){const be=ye.map(Ne=>({item_id:Ne.id??"",drive_id:Ne.parentReference.driveId??"",site_id:Ne.parentReference.sharepointIds?.siteId??""}));x({connectorName:"sharepoint",fileIds:be,fileRepoInfo:y?g:void 0})}T()},[x,T,y,g]),{openPicker:X}=Wrt({clientId:C?.dropbox?.picker_credentials?.client_id??"",isSpace:y,fileRepoInfo:g,isAudioVideoFilesEnabled:n,reason:l}),{onOpen:q,isOpen:Y,onClose:G,cleanupPicker:J}=Vrt({initialApiKey:C?.box?.picker_credentials?.api_key??"",expiresAtString:C?.box?.picker_credentials?.expires_at??"",mode:"source",isSpace:y,fileRepoInfo:g,isAudioVideoFilesEnabled:n,reason:l}),K=f.useCallback((ye,_e="file")=>{if(M("attempt connector file upload",{connectorName:ye}),ye==="google_drive")z({mode:"source",onPicked:async be=>{const Ne=be.map(Ee=>Ee.id);await x({connectorName:"google_drive",fileIds:Ne,fileRepoInfo:y?g:void 0})}});else if(ye==="onedrive"||ye==="sharepoint"){const be=C?.[ye];j({mode:"source",connector:ye,clientId:be?.picker_credentials?.client_id??"",tenantName:be?.picker_credentials?.tenant_name??"",loginHint:be?.connection_display_name??"",onPicked:Ne=>$(Ne,ye),onError:I,onCancel:T,log:W,isAudioVideoFilesEnabled:n})}else ye==="dropbox"?X("source"):ye==="box"&&q(_e)},[M,z,j,C,g,y,T,I,$,x,X,q,W,n]),{handleConnect:te}=Q3({reason:l}),re=f.useCallback(ye=>{ye==="notion"&&(M("attempt connector authentication",{connectorName:ye}),te({connectorName:ye}))},[M,te]),se=(()=>{const ye=[],_e={type:"default",text:d({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),icon:Eue,onMouseDown:A,onClick:()=>{v.current?.click()}};if(i.includes(Ot.LOCAL)&&ye.push(_e),O){const be=S.filter(Ne=>sJ(Ne,i)).map(Ne=>{const Ee=Ne.name;return Ee==="box"?{type:"nested",text:Ra(Ee)??"",avatar:o.jsx("img",{src:nl(Ee)??"",alt:Ra(Ee),width:20,height:20}),isSubmenuOpen:k,onSubmenuOpen:()=>N(!0),onSubmenuClose:()=>N(!1),onMouseDown:A,submenu:[{type:"default",text:c.formatMessage({defaultMessage:"Upload files",id:"2jjdVzJX0c"}),onMouseDown:A,onClick:()=>K("box","file")},{type:"default",text:c.formatMessage({defaultMessage:"Upload folders",id:"qMKglS/Epo"}),onMouseDown:A,onClick:()=>K("box","folder")}]}:Ee==="notion"&&!y?{type:"default",text:Ra(Ee)??"",avatar:o.jsx("img",{src:nl(Ee)??"",alt:Ra(Ee),width:20,height:20}),onMouseDown:A,onClick:()=>re(Ee)}:{type:"default",text:Ra(Ee)??"",avatar:o.jsx("img",{src:nl(Ee)??"",alt:Ra(Ee),width:20,height:20}),onMouseDown:A,onClick:()=>K(Ee)}}).filter(Ne=>Ne!==null);if(ye.push(...be),E.length>0&&!m){const Ne=E.filter(Re=>sJ(Re,i)),Ee={type:"nested",submenu:Ne.map(Re=>({type:"default",size:"small",text:Ra(Re.name),avatar:o.jsx("img",{src:nl(Re.name)??"",alt:Ra(Re.name),width:20,height:20}),rightElement:o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(le,{icon:xa,size:"sm"})}),onClick:()=>te({connectorName:Re.name,customReferrer:_??void 0,customReferrerId:w??void 0})})),isSubmenuOpen:P,onSubmenuOpen:()=>L(!0),onSubmenuClose:()=>L(!1),text:d({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),icon:Ok,onMouseDown:A};Ne.length>0&&ye.push(Ee)}}return ye})(),me=f.useCallback(()=>h(!1),[]),oe=f.useCallback(()=>{const ye=se.at(0);if(se.length===1&&Vat(ye)){ye.onClick();return}h(!0)},[se]),ge=f.useMemo(()=>o.jsx(F,{color:"light",children:o.jsx(le,{icon:By,size:"sm"})}),[]),xe=f.useMemo(()=>o.jsx(F,{variant:"tiny",color:"light",children:c.formatMessage({defaultMessage:"Add files",id:"xrAjmQ72mN"})}),[c]);return o.jsxs(o.Fragment,{children:[o.jsx(qxe,{uploadSources:se,placement:"bottom-start",isMobileStyle:m,isOpen:p,onOpen:oe,onClose:me,children:s==="primary"?o.jsx(pe,{variant:"primary",size:"small",extraCSS:"py-[18px]",text:`+ ${c.formatMessage({defaultMessage:"Add files",id:"xrAjmQ72mN"})}`,disabled:e,toolTip:t}):o.jsx(Te,{size:"small",leadingComponent:ge,text:xe,toolTip:t,testId:"add-files-button"})}),(C?.onedrive?.connected||C?.sharepoint?.connected)&&o.jsx(IB,{options:U,isOpen:D,onClose:T,onSelectSite:B}),C?.box?.connected&&o.jsx(uB,{isOpen:Y,onClose:G,cleanupPicker:J}),o.jsx("input",{type:"file",ref:v,className:"hidden",onChange:ye=>{ye.target.files&&b(ye.target.files)},onClick:ye=>{ye.target instanceof HTMLInputElement&&(ye.target.value="")},multiple:!0,accept:Iat})]})});Xxe.displayName="FileUploadSelector";const Zxe=R.memo(({statusToFilter:e,handleSelectStatus:t})=>{const{isMobileStyle:n}=Ce(),r=Z(),s={ALL:r.formatMessage({defaultMessage:"All",id:"zQvVDJ+j59"}),QUEUED:r.formatMessage({defaultMessage:"Queued",id:"Cnm0QAkWnp"}),SYNCING:r.formatMessage({defaultMessage:"Syncing",id:"eOnwqs6QFY"}),SYNC_ERROR:r.formatMessage({defaultMessage:"Sync error",id:"N1cqoEe4CZ"}),READY:r.formatMessage({defaultMessage:"Ready",id:"IZFEUgrg25"})},a=Object.entries(s).map(([i,l])=>({text:l,type:"default",selected:e===i,onClick:()=>t(i==="ALL"?null:i)}));return o.jsx(sn,{isMobileStyle:n,placement:"bottom",items:a,children:o.jsx(pe,{variant:"border",size:"small",extraCSS:"py-[18px]",text:e?s[e]:"Status",chevron:!0,chevronIcon:Bn})})});Zxe.displayName="StatusDropdown";const Jxe=R.memo(({allowEditSources:e,searchTerm:t,statusToFilter:n,selectedFiles:r,handleDeleteFiles:s,handleOnSearchValueChange:a,handleSelectStatus:i,isAudioVideoFilesEnabled:l,collectionSlugOverride:c,connectionTypes:u})=>{const{$t:d}=Z(),{isMobileUserAgent:m}=Ce();return o.jsxs("div",{className:"mx-sm pt-md gap-sm flex flex-wrap items-center justify-between",children:[o.jsx(Wr,{type:"search",isMobileUserAgent:m,placeholder:d({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:t,className:"bg-subtle rounded-md border-none",onChange:a,pill:!1}),o.jsxs("div",{className:"gap-x-sm flex",children:[r.length!==0&&o.jsx(Te,{variant:"primary",onClick:s,icon:Vd,extraCSS:"h-[36px]"}),o.jsx(Zxe,{statusToFilter:n,handleSelectStatus:i}),e&&o.jsx(Xxe,{repoFileLimitReached:!1,isAudioVideoFilesEnabled:l,collectionSlugOverride:c,connectionTypes:u})]})]})});Jxe.displayName="ConnectorsTableHeader";const Wat=({reason:e,fileRepoInfo:t,enablePolling:n=!1})=>{const r=Ttt(t);return We({queryKey:r,queryFn:()=>irt({request:{file_repository_info:t},reason:e}),refetchInterval:a=>{if(!n)return!1;const{pending_files:i}=a.state.data?.summary??{pending_files:0};return i>0?uj(5):uj(60)},staleTime:uj(30)})};var RB="Progress",PB=100,[Hat,Kcn]=Mi(RB),[zat,Gat]=Hat(RB),e0e=f.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=qat,...i}=e;(s||s===0)&&!aJ(s)&&console.error(Kat(`${s}`,"Progress"));const l=aJ(s)?s:PB;r!==null&&!iJ(r,l)&&console.error(Yat(`${r}`,"Progress"));const c=iJ(r,l)?r:null,u=zE(c)?a(c,l):void 0;return o.jsx(zat,{scope:n,value:c,max:l,children:o.jsx(mn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":zE(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":r0e(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});e0e.displayName=RB;var t0e="ProgressIndicator",n0e=f.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=Gat(t0e,n);return o.jsx(mn.div,{"data-state":r0e(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});n0e.displayName=t0e;function qat(e,t){return`${Math.round(e/t*100)}%`}function r0e(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function zE(e){return typeof e=="number"}function aJ(e){return zE(e)&&!isNaN(e)&&e>0}function iJ(e,t){return zE(e)&&!isNaN(e)&&e<=t&&e>=0}function Kat(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${PB}\`.`}function Yat(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${PB} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Qat=e0e,Xat=n0e;const oJ=(...e)=>e.filter(Boolean).join(" "),Zat={default:"default"},s0e=R.memo(e=>{const{indicatorClassName:t,indeterminate:n,className:r,value:s=0,max:a=100,variant:i=Zat.default,ref:l,...c}=e,u=R.useMemo(()=>{const d={default:"bg-inverse",super:"bg-super"};return oJ("size-full transition-transform duration-300 ease-in-out",d[i]||d.default,n&&"animate-indeterminate",t)},[i,n,t]);return o.jsx(Qat,{ref:l,className:oJ("bg-subtle relative h-1 w-full overflow-hidden rounded-[1px]",r),...c,children:o.jsx(Xat,{className:u,style:{transform:`translateX(-${100-(s??0)/a*100}%)`}})})});s0e.displayName="Progress";const a0e=R.memo(({hasPreviousPage:e,hasNextPage:t,handlePrevPage:n,handleNextPage:r,shouldShowPlaceholder:s,fileRepoInfo:a})=>{const{$t:i}=Z(),l="border-subtler pt-md mx-sm flex translate-y-[1px] items-center justify-between";return s?o.jsx("div",{className:`${l} h-[42px]`}):o.jsx("div",{className:`${l} border-t`,children:o.jsxs("div",{className:"flex w-full justify-between",children:[o.jsx(Jat,{fileRepoInfo:a}),o.jsxs("div",{className:"gap-x-md flex",children:[o.jsx(Te,{text:i({defaultMessage:"Prev",id:"LYaNlLTdL2"}),size:"small",noPadding:!0,disabled:!e,onClick:n,icon:hp}),o.jsx(Te,{text:i({defaultMessage:"Next",id:"9+DdtuCqLw"}),size:"small",noPadding:!0,disabled:!t,onClick:r,icon:Zn})]})]})})});a0e.displayName="SourcesTableCursorPagination";const Jat=({fileRepoInfo:e})=>{const t="upload-progress",{$t:n}=Z(),{variation:r}=a5(!1),{data:s}=Wat({enablePolling:!0,fileRepoInfo:e,reason:t}),a=s?.summary?.pending_files??0,i=s?.summary?.total_files??0,l=n({defaultMessage:"Uploading {pendingFiles, number} of {totalFiles, number} files...",id:"bgsD1ZQB53"},{pendingFiles:a,totalFiles:i});return!r||a<=0?o.jsx("div",{}):o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(s0e,{variant:"super",value:i-a,max:i,className:"h-2 w-48 rounded-full"}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(F,{color:"super",children:o.jsx(Zr,{size:14})}),o.jsx(F,{variant:"tiny",color:"default",children:l})]})]})};let _0=0;function eit(e,t,n=!1){const[r,s]=f.useState(!1),[a,i]=f.useState(!1),l=f.useCallback(g=>{g.preventDefault()},[]),c=f.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),s(!0),_0++)},[]),u=f.useCallback(g=>{g.preventDefault(),_0=Math.max(0,_0-1),_0===0&&s(!1)},[]),d=f.useCallback(g=>{g.preventDefault(),s(!1),i(!1),_0=0,!t&&n&&g.dataTransfer?.items.length&&e(g.dataTransfer.items)},[t,e,n]),m=f.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),i(!0))},[]),p=f.useCallback(g=>{g.preventDefault(),i(!1)},[]),h=f.useCallback(g=>{g.preventDefault(),s(!1),i(!1),!t&&!n&&g?.dataTransfer?.items.length>0&&e(g.dataTransfer.items)},[t,e,n]);return f.useEffect(()=>(document.addEventListener("dragover",l),document.addEventListener("dragenter",c),document.addEventListener("dragleave",u),document.addEventListener("drop",d),()=>{document.removeEventListener("dragover",l),document.removeEventListener("dragenter",c),document.removeEventListener("dragleave",u),document.removeEventListener("drop",d)}),[l,c,u,d]),f.useMemo(()=>({isDraggingFile:r,isFileOver:a,rootProps:{onDragOver:m,onDragLeave:p,onDrop:h}}),[p,m,h,r,a])}const OB=R.memo(({onDrop:e,disabled:t=!1,children:n,dropZoneClassName:r,dropLabel:s,dropIcon:a=_Le,allowDropAnywhere:i=!1,...l})=>{const{$t:c}=Z(),{isDraggingFile:u,isFileOver:d,rootProps:m}=eit(e,t,i),p=s??c(i?{defaultMessage:"Dropped files appear here.",id:"9WR4elgZix"}:{defaultMessage:"Drop your files here.",id:"llIM82nPs+"});return o.jsxs("div",{className:"relative",...m,...l,children:[u&&t?o.jsx(H,{className:V("border-subtler bg-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed",{"!border-caution":d},r?.(u,d)),children:o.jsxs(F,{color:"red",children:[o.jsx(le,{icon:a,className:"mr-2"}),"Drop zone disabled"]})}):u?o.jsxs(o.Fragment,{children:[o.jsx(H,{variant:"background",className:"absolute inset-0 z-20 rounded-2xl opacity-80"}),o.jsx(H,{className:V("gap-x-sm animate-in fade-in border-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed transition-all duration-200",{"!border-super":d},r?.(u,d)),children:o.jsxs(F,{color:"super",children:[o.jsx(le,{icon:a,className:"mr-2"}),p]})})]}):null,n]})});OB.displayName="DropZone";var fa;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(fa||(fa={}));function i0e(){return[fa.INVITED_READER,fa.INVITED_WRITER,fa.INVITED_EDITOR,fa.INVITED_ADMIN]}function tit(e){return e===fa.OWNER||e===fa.OWNER_DEFAULT_BOOKMARKS}function Jg(e){return e===fa.OWNER_DEFAULT_BOOKMARKS}function o0e(e){return e>=fa.WRITER&&e<fa.INVITED_READER}function nit(e){return e>=fa.READER&&e<fa.INVITED_READER}function rit(e){return e==fa.READER||e==fa.INVITED_READER}function sit(e){return i0e().includes(e)}function Ycn(e){if(e===void 0)return{ownerUser:void 0,contributorUsers:[],invitedUsers:[]};const t=e.owner_user,n=e.contributor_users,r=[],s=[],a=i0e();return n?.forEach(i=>{i.permission&&a.includes(i.permission)?r.push(i):s.push(i)}),{ownerUser:t,contributorUsers:s,invitedUsers:r}}var Sm;(function(e){e.PageAccessNotAllowed="pageAccessNotAllowed",e.ThreadAccessNotAllowed="threadAccessNotAllowed",e.InvalidThread="invalidThread",e.ThreadExpired="threadExpired",e.ThreadStreamError="threadStreamError",e.CollectionAccessNotAllowed="collectionAccessNotAllowed",e.SpaceAccessNotAllowed="spaceAccessNotAllowed",e.InvalidCollection="invalidCollection",e.SubscriptionAlreadyActive="subscriptionAlreadyActive",e.UnableToGrantAccess="unableToGrantAccess"})(Sm||(Sm={}));const ait="ENTRY_EXPIRED",lJ="VIEW_THREAD_NOT_ALLOWED",LB=[Ot.GOOGLE_DRIVE,Ot.ONEDRIVE,Ot.SHAREPOINT,Ot.DROPBOX,Ot.BOX,Ot.NOTION],iit=e=>[...LB,...e],oit=R.memo(({fileRepoInfoOverride:e,collectionSlugOverride:t,connectionTypes:n=LB})=>{const r="connectors-source-section",s=_l(),a=t??(Array.isArray(s?.slug)?s.slug[0]:s?.slug),{collection:i}=Oc({collectionSlug:a,reason:r}),l=i?o0e(i.user_permission):!1,{fileRepoInfo:c}=Do({reason:r,collectionSlugOverride:t}),u=c.file_repository_type==="COLLECTION",d=f.useMemo(()=>({file_repository_type:"USER",owner_id:""}),[]),m=e??(u?c:d),[p,h]=f.useState(""),[g,y]=f.useState(null),[x,v]=f.useState([]),[b,_]=f.useState(!1),[w,C]=f.useState([]),[S,E]=f.useState(null),[M,k]=f.useState([]),N=w.length>0?w[w.length-1]?.uuid:void 0,{mutate:P}=axe({reason:r}),L=!1,A=p.trim().length>0?{parentUuids:[],rootFilesOnly:!1}:{parentUuids:N?[N]:[],rootFilesOnly:!N},{data:j,isLoading:T}=ort({connectionTypes:n,status:g?[g]:[],pageSize:Vi,searchKeyword:p,...A,cursor:S,pollingEnabled:!0,fileRepoInfo:m,reason:r}),{files:I,nextCursor:U}=f.useMemo(()=>({files:j?.files||[],nextCursor:j?.next_cursor}),[j]),B=!!U,D=M.length>0,W=u?l:!0,z=f.useCallback(()=>{h(""),y(null)},[]),$=f.useCallback(te=>{y(te)},[]),X=f.useCallback(te=>{h(te)},[h]),q=f.useCallback(()=>{P({fileUuids:x,fileRepoInfo:m}),v([]),_(!1)},[P,x,m]),Y=f.useCallback(te=>{_(te),v(te?I.map(re=>re.uuid):[])},[I,v]),G=f.useCallback((te,re)=>{z(),C(se=>[...se,{uuid:te,name:re}])},[z]),J=f.useCallback(()=>{U&&(k(te=>[...te,S??""]),E(U))},[U,S]),K=f.useCallback(()=>{M.length>0&&k(te=>{const re=[...te],se=re.pop()??null;return E(se),re})},[M.length]);return f.useEffect(()=>{E(null),k([])},[p,g,N]),o.jsxs(OB,{onDrop:Pn,disabled:!W,children:[o.jsx(Jxe,{allowEditSources:W,searchTerm:p,statusToFilter:g,selectedFiles:x,handleDeleteFiles:q,handleOnSearchValueChange:X,handleSelectStatus:$,isAudioVideoFilesEnabled:L,collectionSlugOverride:t,connectionTypes:n}),o.jsx(uxe,{files:I,fileRepoInfo:m,isLoadingConnectorFiles:T,allowEditSources:W,selectedFiles:x,currentPath:w,isHeaderCheckboxChecked:b,setSelectedFiles:v,setCurrentPath:C,handleSelectAll:Y,handleFolderClick:G,handleResetSearch:z}),o.jsx(a0e,{fileRepoInfo:m,hasPreviousPage:D,hasNextPage:B,handlePrevPage:K,handleNextPage:J,shouldShowPlaceholder:T||!I.length})]})});oit.displayName="ConnectorsSourceSection";function lx({reason:e,collectionSlugOverride:t}){const n=_l(),r=t??(Array.isArray(n?.slug)?n.slug[0]:n?.slug),{collection:s}=Oc({collectionSlug:r,reason:e}),a=s?tit(s.user_permission):!1,i=s?sit(s.user_permission):!1,l=s?rit(s.user_permission):!1,c=s?nit(s.user_permission):!1,u=s?o0e(s.user_permission):!1;return f.useMemo(()=>({isUserOwner:a,isUserInvited:i,isUserReader:l,isUserAtLeastReader:c,isUserAtLeastWriter:u}),[c,u,i,a,l])}const Qcn=e=>e?.[0]?.article_info?.is_live;function Xcn(e){return e.length==1&&e[0]?.article_info?.is_auto_generated}const DB=e=>e?.toLowerCase(),C2=e=>DB(e.status)==="pending",Zcn=e=>DB(e.status)==="staged",Jcn=e=>DB(e.status)==="completed",lit=e=>e.find(t=>C2(t)&&t.backend_uuid),cit=e=>!!(e&&ya(e)&&"blocks"in e[0]),eun=e=>{const t=/##\s*([^\n]+)/,n=e.match(t);return n&&n.length>1&&n[1]?n[1].trim():e.trim()},uit=async({slugOrUUID:e,headers:t,reason:n})=>{const{data:r,error:s}=await ae.GET("/rest/article/{article_uuid_or_slug}",n,{params:{path:{article_uuid_or_slug:e}},headers:t,timeoutMs:Fe({productionMs:3e3}),numRetries:1});if(s)throw new Ie("API_CLIENTS_ERROR",{cause:s});if(r.status!=="success")throw new Ie("API_CLIENTS_ERROR",{cause:r});return r.entries},tun=async({reason:e})=>{const t="signOutAllSessions";try{const r=await(await Er({urlPath:"/rest/user/sign-out-all",headers:{"X-Perplexity-CSRF-Protection":"1"},method:"POST",numRetries:1,reason:e})).json();return r.status!=="success"?(ne.log(`Unsuccessful ${t} call:`,r),!1):!0}catch(n){return ne.log(`Error in ${t}:`,n),!1}},nun=async({articleUUID:e,reason:t})=>{const{data:n,error:r}=await ae.GET("/rest/page/get_related_pages",t,{params:{query:{context_uuid:e}},numRetries:1});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r});if(n.status!=="success")throw new Ie("API_CLIENTS_ERROR",{cause:n});return n.related_pages},cJ=e=>e[0]?.article_info?{title:e[0].article_info.title||"",summary:e[0].article_info.summary||"",suggested_sections:e[0].article_info.suggested_sections||[],audience:e[0].article_info.audience||"anyone",read_time:e[0].article_info.read_time,emphasize_sources:e[0].article_info.emphasize_sources??!1,num_sections:e.length,should_index:e[0].should_index??!1}:null,dit={isBlocksApi:!1,article:[],heroSection:void 0,isLoading:!1,isPublished:!1,isOrgInternal:!1,inFlight:!1,inFlightLatest:!1,currentlyStreamingSection:void 0,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},threadMetadata:{rwToken:void 0,contextUUID:void 0,frontendContextUUID:void 0,title:void 0,first_query:void 0,focus:void 0,author_id:void 0,author_username:void 0,author_image:void 0,parent_info:void 0,mode:void 0,personalized:!1,collection:void 0,thread_access:0,thread_url_slug:void 0,updated_datetime:void 0,expiry_time:void 0,privacy_state:$g.NONE},articleMetadata:{title:"",summary:"",suggested_sections:[],audience:"anyone",read_time:0,emphasize_sources:!1,num_sections:0,should_index:!1},articleMedia:[],articleWebResults:[],relatedPages:[],articleLocalState:{isEditModeEnabled:!1,setEditModeEnabled:()=>{},isCreating:!1,setIsCreating:()=>{},isTitleVisible:!0,setTitleVisible:()=>{},clickedImage:null,setClickedImage:()=>{},clickedImageIndex:0,isRewritingSection:!1,setRewritingSection:()=>{}},refetch:()=>{}},l0e=Yt("ArticleResultsContext",dit),fit=R.memo(({relatedPages:e=fe,children:t,slug:n})=>{const r="article-results-provider",[s,a]=f.useState(!1),[i,l]=f.useState(!1),[c,u]=f.useState(null),[d,m]=f.useState(!0),[p,h]=f.useState(!1),{isEnterprise:g}=kn({reason:r}),y=xt(),v=Ut()?.get("newFrontendContextUUID"),[b,_]=f.useState(y.getQueryData(QQ(n||"")));f.useEffect(()=>{if(v){_(v);return}const z=y.getQueryData(QQ(n||""));_(z)},[v,y,n]);const{data:w,isLoading:C}=We({enabled:!!n&&n!=="new",queryKey:HU(b||""),queryFn:()=>uit({slugOrUUID:n,reason:r}),refetchOnMount:!0,placeholderData:mf}),S=cit(w),E=f.useMemo(()=>{if(!w||S)return;const z=w[w.length-1];return{inFlight:w.some(C2),inFlightLatest:z&&C2(z)}},[w,S]),M=E?.inFlight??!1,k=E?.inFlightLatest??!1,N=f.useMemo(()=>{if(!(!w||S))return lit(w)},[w,S]),P=f.useMemo(()=>{if(!w||w.length===0)return null;const z=w[0];if(C2(z))return null;const $=z.social_info;return A8($||Kge)},[w]),L=f.useMemo(()=>!w||w.length===0?v2():v2(w[0]),[w]),O=f.useMemo(()=>w?cJ(w):null,[w]),A=f.useMemo(()=>{const z=[];return w?.forEach($=>{if($.article_info.layout==="media-only"){const q=($.article_info.user_selected_media_items??[])?.filter(Y=>Y.medium==="image");z.push(...q)}else{const X=$?.media_items??[],q=$?.featured_images??[];$.article_info.layout!=="text"&&(ya(q)&&q[0].medium==="image"?z.push(q[0]):ya(X)&&X[0].medium==="image"&&z.push(X[0]))}}),z},[w]),j=f.useMemo(()=>{if(!c)return 0;const z=A.findIndex($=>$?.image===c?.image);return z>-1?z:0},[c,A]),T=f.useMemo(()=>{const z=new Map;return!w||w.length===0?[]:(w?.forEach($=>{const X=vn.parseAskTextField($);X?.web_results&&X.web_results.forEach(q=>{z.has(q.url)?z.get(q.url).count+=1:z.set(q.url,{...q,count:1})})}),Array.from(z.values()).sort(($,X)=>X.count-$.count).map($=>({...$,count:void 0})))},[w]),I={isEditModeEnabled:s,setEditModeEnabled:a,isTitleVisible:d,setTitleVisible:m,isCreating:i,setIsCreating:l,clickedImage:c,setClickedImage:u,clickedImageIndex:j,isRewritingSection:p,setRewritingSection:h},U=L??v2(),B=g&&!!U.collection&&U.thread_access===Ct.COLLECTION_READ,D=!!g&&U.thread_access===Ct.ORG_READ,W=B||D||U.thread_access===Ct.PUBLIC_READ;return o.jsx(l0e.Provider,{value:{isBlocksApi:S,article:w??[],isLoading:C,heroSection:w?.[0],lastSection:w?.[w.length-1],socialStats:P,isPublished:W,isOrgInternal:D,inFlight:M,inFlightLatest:k,currentlyStreamingSection:N,threadMetadata:U,articleMetadata:O??cJ([]),articleLocalState:I,articleMedia:A,articleWebResults:T,relatedPages:e},children:t})});fit.displayName="ArticleResultsProvider";const c0e=()=>{const e=f.useContext(l0e);if(!e)throw new Error("useArticleResults must be used within ArticleResultsContext");return e},mit=({enabled:e,reason:t})=>{const n=async()=>tst({reason:t}),{data:r}=We({enabled:typeof e>"u"?!0:e,queryKey:mtt(),queryFn:n,networkMode:"always"});return r??{isGovernmentRequestOrigin:void 0}};function pit(e,t){return We({enabled:!!e,queryKey:ptt(e),queryFn:async()=>Qrt({profileName:e,reason:t})})}function ls(){const e=mit({enabled:!0,reason:"user-capabilities"}),t=e.isGovernmentRequestOrigin?"us_government_or_military":"",{data:n}=pit(t,"user-capabilities");return f.useMemo(()=>{const s=e.isGovernmentRequestOrigin,a={unlimitedProSearch:!!n?.unlimitedProSearch,maxModelSelection:!!n?.maxModelSelection,unlimitedResearch:!!n?.unlimitedResearch,fileUpload:!!n?.fileUpload};return{isGovernmentRequestOrigin:s,specialCapabilities:a}},[e.isGovernmentRequestOrigin,n])}const{Context:hit,useTrackedState:git}=C_("LocalUserSettingsContext"),yit=({trackEvent:e,initialLocalUserSettings:t})=>Po()(mue(n=>({...t,actions:{setIsSplashPageDismissed:(r,s)=>{Ret(r,s),n({isSplashPageDismissed:r})},setColorScheme:r=>{n({colorScheme:r})},setIsSidebarPinned:r=>{n({isSidebarPinned:r}),rn("isSidebarPinned",String(r),{expires:Kr})},setSidebarHiddenHubs:r=>{n({sidebarHiddenHubs:r}),rn("sidebarHiddenHubs",JSON.stringify(r),{expires:Kr})},setIsCollapsed:r=>{e("sidebar toggled",{is_collapsed:r}),rn("isCollapsed",String(r),{expires:Kr}),n({isCollapsed:r})},setIsIncognito:async r=>{const s=await c_.getSession(),a=s!==null&&typeof s<"u";a&&lue(),a&&(Iet(r),n({isIncognitoLocal:r}))},setIsDiscoverInterestBoxDismissed:r=>{Pet(r),n({isDiscoverInterestBoxDismissed:r})},setIsEnterpriseAdDismissed:r=>{Let(r),n({isEnterpriseAdDismissed:r})},setIsSuggestionsDisabled:r=>{e("auto suggestion setting toggled",{isEnabled:!r}),Det(r),n({isSuggestionsDisabled:r})},setIsHomepageWidgetsDisabled:r=>{e("homepage widgets setting toggled",{isEnabled:!r}),Fet(r),n({isHomepageWidgetsDisabled:r})},setIsSportsIosCtaDismissed:r=>{Vet(r),n({isSportsIosCtaDismissed:r})},setPreferredSearchMode(r){r?rn(R8,r,{expires:Kr}):Pm(R8),n({preferredSearchMode:r})},setIsMaxAssistantModeEnabled:r=>{e("max assistant mode toggled",{isEnabled:r}),rn(pye,String(r),{expires:Kr}),n({isMaxAssistantMode:r})},setPreferredSearchModel(r,s){n(a=>{const{preferredSearchModels:i={}}=a;s?i[r]=s:r&&delete i[r];try{rn(mye,JSON.stringify(i),{expires:Kr})}catch{}finally{a.preferredSearchModels=i}return a})},setWelcomeBackGateImpressions:r=>{Uet(r),n({welcomeBackGateImpressions:r})},setShareGateImpressions:r=>{Bet(r),n({shareGateImpressions:r})},setIsSidebarConnectorsAdDismissed:r=>{Het(r),n({isSidebarConnectorsAdDismissed:r})},setIsStudentReferralBannerDismissed:r=>{qet(r),n({isStudentReferralBannerDismissed:r})},setIsStudentSpaceUpsellDismissed:r=>{Ket(r),n({isStudentSpaceUpsellDismissed:r})},setStudentSpaceUpsellImpressions:r=>{Yet(r),n({studentSpaceUpsellImpressions:r})}}}))),xit=({children:e,initialLocalUserSettings:t})=>{const{trackEvent:n}=je(),[r]=R.useState(()=>yit({trackEvent:n,initialLocalUserSettings:t}));return TB(UE,s=>{s&&r.setState({isIncognitoLocal:JSON.parse(s.value)})}),o.jsx(hit.Provider,{value:r,children:e})},_n=git,Qd={DEFAULT:"DEFAULT",GOVERNMENT:"GOVERNMENT"},Qa=({reason:e})=>{const{organization:t}=kn({reason:e}),{isGovernmentRequestOrigin:n}=ls(),r=t?.settings?.always_incognito,{isIncognitoLocal:s}=_n(),a=r||(s??n??!1),i=n?Qd.GOVERNMENT:Qd.DEFAULT;return{isIncognito:a,incognitoType:i}},Nh="recentCollections",u0e=({reason:e})=>{const{isIncognito:t}=Qa({reason:e}),{inFlightLatest:n}=Ht(),{session:r}=Nt(),s=r?.user?.email,{data:a,refetch:i}=We({queryKey:[Nh,s],queryFn:async()=>s?await Jnt({reason:e}):[],enabled:!t&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!1,initialData:null});return f.useEffect(()=>{n||i({cancelRefetch:!1})},[n,i]),f.useMemo(()=>!s||t?{data:[]}:{data:a},[a,s,t])},run=async({collectionUUID:e,reason:t})=>{const n=await ae.POST("/rest/spaces/bookmarks",t,{body:{collection_uuid:e},timeoutMs:Fe(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create space bookmark");return r},sun=async({query:e,reason:t})=>{const{data:n,error:r}=await ae.GET("/rest/spaces/bookmarks",t,{params:{query:e}});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to list bookmarked spaces",cause:r});return n},d0e=async({params:e,reason:t})=>{const n=await ae.GET("/rest/spaces",t,{params:{query:{limit:e.limit,offset:e.offset,category:e.category,version:Sl}},timeoutMs:Fe()});if(n.error)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to list spaces",cause:n.error});return n.data},vit=async({reason:e})=>{const t=await ae.GET("/rest/spaces/mentions",e,{timeoutMs:Fe()});if(t.error)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to list at mention spaces",cause:t.error});return t.data},aun=async({collectionUUID:e,reason:t})=>{const n=await ae.POST("/rest/spaces/org/pins",t,{body:{collection_uuid:e},timeoutMs:Fe(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create org pinned space");return r},iun=async({query:e,reason:t})=>{const{data:n,error:r}=await ae.GET("/rest/spaces/org/pins",t,{params:{query:e},timeoutMs:Fe()});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to list org pinned spaces",cause:r});return n},oun=async({spaceUuid:e,reason:t})=>{const n=await ae.GET("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Fe(),numRetries:1}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to get space subscription status");return r.subscribed},bit=async({reason:e})=>{const t=await ae.GET("/rest/collections/list_space_templates",e,{timeoutMs:Fe(),numRetries:1});if(t.error)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to list space templates",cause:t.error});return t.data},V8=10,uJ=["invited","private","shared","saved","organization"];function jh(e){return["spaces","list",e]}function Ah(){return["spaces","list","all"]}const _it=({reason:e})=>{const t=xt(),{data:n,isLoading:r}=We({queryKey:Ah(),queryFn:()=>d0e({params:{offset:0,limit:V8,category:void 0},reason:e})});return f.useEffect(()=>{n&&(n.private_spaces&&t.setQueryData(jh("private"),s=>({...s,pages:[n.private_spaces||[]],pageParams:[0]})),n.shared_spaces&&t.setQueryData(jh("shared"),s=>({...s,pages:[n.shared_spaces||[]],pageParams:[0]})),n.saved_spaces&&t.setQueryData(jh("saved"),s=>({...s,pages:[n.saved_spaces||[]],pageParams:[0]})),n.organization_spaces&&t.setQueryData(jh("organization"),s=>({...s,pages:[n.organization_spaces||[]],pageParams:[0]})),n.invited_spaces&&t.setQueryData(jh("invited"),s=>({...s,pages:[n.invited_spaces||[]],pageParams:[0]})))},[n,t]),f.useMemo(()=>({data:n,isLoading:r}),[n,r])},wit=({category:e,reason:t})=>$u({queryKey:jh(e),queryFn:async({pageParam:n})=>{const r=await d0e({params:{offset:n,limit:V8,category:e},reason:t});switch(e){case"private":return r.private_spaces;case"shared":return r.shared_spaces;case"saved":return r.saved_spaces;case"organization":return r.organization_spaces;case"invited":return r.invited_spaces;default:throw new Error("Invalid category")}},enabled:!1,getNextPageParam:(n,r,s)=>(s??0)+V8,initialPageParam:0}),FB={searchTerm:"",updateUserInput:e=>{}},f0e=Yt("UserInputStateContext",FB),Cit=({children:e})=>{const[t,n]=f.useState(FB),r=a=>{n(i=>({...i,...a}))},s=f.useMemo(()=>({...t,updateUserInput:r}),[t.searchTerm]);return o.jsx(f0e.Provider,{value:s,children:e})},UB=()=>{const e=f.useContext(f0e);return e||FB},lun=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,Sit=(e,t)=>e.getQueryData(["results"])?.find(r=>r.frontend_context_uuid===t)?.collection_info,Eit=(e,t)=>e.getQueryData(HU(t))?.find(r=>r.frontend_context_uuid===t)?.collection_info,Mit=(e,t,n)=>{e.setQueryData(HU(t),r=>r&&r.map(n))},kit=[Ct.OWNER_ONLY,Ct.PRIVATE_READ,Ct.COLLECTION_READ],dJ=(e,t,n,r,s)=>{const{entryUUID:a,frontendContextUUID:i,newCollectionUUID:l,newCollectionTitle:c,newCollectionEmoji:u,newCollectionSlug:d,newCollectionAccess:m,newCollectionUserPermission:p}=t,h={collection_info:{uuid:l,title:c,emoji:u,slug:d,access:m,user_permission:p},bookmark_state:"BOOKMARKED"};i&&(s(g=>g?g.map(y=>y.frontend_context_uuid===i?{...y,...h}:y):[]),e.setQueryData([r,{frontend_context_uuid:i}],g=>g?g.map(y=>y.frontend_context_uuid===i?{...y,...h}:y):[])),e.setQueryData(n,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(x=>x.map(v=>v.uuid===a?{...v,collection:{...v.collection,...h.collection_info}}:v));return{...g,pages:y}})},cx=({reason:e})=>{const{searchTerm:t}=UB(),n=xt(),{isEnterprise:r}=kn({reason:e}),{threadMetadata:s}=c0e(),a=Oo(),i=Ft();let l="results";const c=[zm,{search_term:t??""}],u=[zm,{search_term:t??""}];let d=c,m=ytt,p=Sit;const h=U3();let g=f.useCallback((L,O,A)=>{h(j=>j&&j.map(A))},[h]);(i?.startsWith("/page")||i?.startsWith("/discover"))&&(l="articleResults",d=u,m=xtt,p=Eit,g=Mit);const y=f.useCallback(L=>{const O=!a&&!s?.rwToken;!r||O||h(A=>{if(A)return A.map(j=>{let T=!1,I=Ct.PRIVATE_READ;return L==="add"?(T=kit.includes(j.thread_access??null),I=vn.isArticleMode(j)?Ct.PRIVATE_READ:Ct.COLLECTION_READ):(T=j.thread_access!==Ct.COLLECTION_READ,I=Ct.PRIVATE_READ),{...j,thread_access:T?j.thread_access:I}})})},[a,s?.rwToken,r,h]),{mutate:x}=St({mutationFn:async({title:L,description:O,emoji:A,instructions:j,accessLevel:T,existingCollection:I,enableWebByDefault:U,closeModal:B})=>(B(),Urt({collectionUuid:I.uuid,changes:{title:L,description:O,emoji:A,instructions:j,accessLevel:T,enableWebByDefault:U},reason:e})),onMutate:async L=>{const j=["get_collection",{collection_slug:L.existingCollection.slug.slice(-22)}];await n.cancelQueries({queryKey:j});const T=n.getQueryData(j);return n.setQueryData(j,I=>({...I,title:L.title,description:L.description,emoji:L.emoji,instructions:L.instructions,access:L.accessLevel,enable_web_by_default:L.enableWebByDefault})),{previousCollection:T}},onSettled:(L,O,A,j)=>{const I=["get_collection",{collection_slug:A.existingCollection.slug.slice(-22)}];O?n.setQueryData(I,j?.previousCollection):(n.setQueryData(I,U=>({...U,...L})),n.setQueryData(xn,U=>U?.pages?{...U,pages:U.pages.map(B=>B.map(D=>D.uuid===A.existingCollection.uuid?{...D,...L}:D))}:U),n.invalidateQueries({queryKey:Ah()}),n.invalidateQueries({queryKey:ev()}))}}),{mutate:v}=St({mutationFn:async({accessLevel:L,collectionUuid:O})=>{await nrt({params:{collection_uuid:O,updated_access:L},reason:e})},onMutate:async L=>{const j=["get_collection",{collection_slug:L.collectionSlug.slice(-22)}];await n.cancelQueries({queryKey:j});const T=n.getQueryData(j);return n.setQueryData(j,I=>({...I,access:L.accessLevel})),{previousCollection:T}},onSettled:async(L,O,A,j)=>{if(O)n.setQueryData(xn,j?.previousCollection);else{const T=A.collectionSlug.slice(-22);await n.invalidateQueries({queryKey:["org_pinned_spaces_query_key"]}),await n.invalidateQueries({queryKey:["get_collection",{collection_slug:T}]}),n.invalidateQueries({queryKey:Ah()})}}}),{mutate:b}=St({mutationFn:async({entryUUID:L,title:O,description:A,emoji:j,instructions:T,accessLevel:I,callback:U,frontendContextUUID:B})=>{const D=await pX({params:{title:O,description:A,emoji:j,instructions:T,accessLevel:I},reason:e});return await jC({params:{new_collection_uuid:D.uuid,entry_uuid:L,return_collection:!1,return_thread:!1},reason:e}),U(D),y("add"),{title:O,description:A,emoji:j,instructions:T,accessLevel:I,newCollection:D}},onMutate:async({entryUUID:L,frontendContextUUID:O,...A})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:xn});const j=n.getQueryData(d),T=n.getQueryData(xn);n.setQueryData(xn,U=>{U=U||{pages:[],pageParams:[]};const B=(U&&U.pages&&U.pages[0])??[],W={...B?.length>0?B[0]:[],...A,uuid:sd,thread_count:1};return{...U,pages:[[W,...B]]}}),n.setQueryData(d,U=>{U=U||{pages:[],pageParams:[]};const B=U.pages.map(D=>D.map(W=>W.uuid===L?{...W,collection:{...W.collection,description:A.description,uuid:sd,title:A.title,emoji:A.emoji}}:W));return{...U,pages:B}}),n.setQueryData(m(L),U=>{const B=U?.collection_info??{};return{...U,collection_info:{...B,uuid:sd,description:A.description,title:A.title,emoji:A.emoji}}});let I=null;return O&&(I=p(n,O)??null,g(n,O,U=>U.frontend_context_uuid===O?{...U,collection_info:{...U.collection_info,uuid:sd,title:A.title,emoji:A.emoji},bookmark_state:"BOOKMARKED"}:U)),{previousThreads:j,previousCollections:T,previousCollectionInfo:I}},onSettled:(L,O,A,j)=>{O?(n.setQueryData(d,j.previousThreads),n.setQueryData(xn,j.previousCollections),A.frontendContextUUID&&g(n,A.frontendContextUUID,T=>T.frontend_context_uuid===A.frontendContextUUID?{...T,collection_info:j?.previousCollectionInfo??null,bookmark_state:j?.previousCollectionInfo?"BOOKMARKED":"NOT_BOOKMARKED"}:T)):(n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:xn}),n.invalidateQueries({queryKey:[Nh]}),n.invalidateQueries({queryKey:ev()}),n.invalidateQueries({queryKey:Ah()}),A.frontendContextUUID&&g(n,A.frontendContextUUID,T=>T.frontend_context_uuid===A.frontendContextUUID?{...T,collection_info:{...T.collection_info,uuid:L?.newCollection?.uuid,title:L?.newCollection?.title,emoji:L?.newCollection?.emoji,slug:L?.newCollection?.slug},bookmark_state:"BOOKMARKED"}:T))}}),{mutate:_}=St({mutationFn:async({title:L,description:O,emoji:A,instructions:j,accessLevel:T,template_id:I,callback:U})=>{const B=await pX({params:{title:L,description:O,emoji:A,instructions:j,accessLevel:T,template_id:I},reason:e});return U(B),{collection:B}},onMutate:async({...L})=>{n.setQueryData(xn,O=>{O=O||{pages:[],pageParams:[]};const A=O.pages[0]||[],j={...A.length>0?A[0]:{},...L,uuid:sd,thread_count:0};return{...O,pages:[[j,...A]]}})},onSuccess:async()=>{n.refetchQueries({queryKey:xn}),n.invalidateQueries({queryKey:[Nh]}),n.invalidateQueries({queryKey:ev()}),n.invalidateQueries({queryKey:Ah()})}}),{mutate:w}=St({mutationFn:async({entryUUID:L})=>{const O=await jC({params:{entry_uuid:L,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),O},onMutate:async({entryUUID:L,topic:O})=>{const A=n.getQueryData(Zc(O));let j;for(const T of A?.pages??[])for(const I of T.threads)if(I.uuid===L){j=I.collection;break}return n.setQueryData(Zc(O),T=>{if(T)return{pageParams:T.pageParams,pages:T.pages.map(I=>({...I,threads:I.threads.map(U=>({...U,collection:U.uuid===L?{uuid:sd,title:"Bookmarks",emoji:"1f516",slug:sd}:U.collection}))}))}}),{previousCollection:j}},onSettled:(L,O,A,j)=>{const{entryUUID:T,topic:I}=A;if(O||!L)j?.previousCollection&&n.setQueryData(Zc(I),U=>{if(U)return{pageParams:U.pageParams,pages:U.pages.map(B=>({...B,threads:B.threads.map(D=>({...D,collection:D.uuid===T?j.previousCollection:D.collection}))}))}});else{const{updated_collection:U}=L,{uuid:B,title:D,emoji:W,slug:z}=U;n.setQueryData(Zc(I),$=>{if($)return{pageParams:$.pageParams,pages:$.pages.map(X=>({...X,threads:X.threads.map(q=>({...q,collection:q.uuid===T?{uuid:B,title:D,emoji:W,slug:z}:q.collection}))}))}})}}}),{mutate:C}=St({mutationFn:async({entryUUID:L,topic:O,oldCollectionUUID:A})=>(await uX({collectionUUID:A,entryUUID:L,reason:e}),{topic:O}),onMutate:async({entryUUID:L,topic:O})=>{const A=n.getQueryData(Zc(O));let j;for(const T of A?.pages??[])for(const I of T.threads)if(I.uuid===L){j=I.collection;break}return n.setQueryData(Zc(O),T=>{if(T)return{pageParams:T.pageParams,pages:T.pages.map(I=>({...I,threads:I.threads.map(U=>({...U,collection:U.uuid===L?void 0:U.collection}))}))}}),{previousCollection:j}},onSettled:(L,O,A,j)=>{const{entryUUID:T,topic:I}=A;O&&j?.previousCollection&&n.setQueryData(Zc(I),U=>{if(U)return{pageParams:U.pageParams,pages:U.pages.map(B=>({...B,threads:B.threads.map(D=>({...D,collection:D.uuid===T?j.previousCollection:D.collection}))}))}})}}),{mutate:S}=St({mutationFn:async({entryUUID:L,frontendContextUUID:O})=>{const A=await jC({params:{entry_uuid:L,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),{response:A,entryUUID:L,frontendContextUUID:O}},onMutate:async({frontendContextUUID:L})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:xn}),h(O=>O&&O.map(A=>A.frontend_context_uuid===L?{...A,bookmark_state:"BOOKMARKED",collection_info:{uuid:null,title:"Bookmarks",emoji:"1f516",slug:null,access:null,user_permission:fa.OWNER_DEFAULT_BOOKMARKS}}:A))},onSettled:async(L,O)=>{if(!L||!L.response?.updated_collection)return;const A=L.response.updated_collection,j=L.entryUUID,T=L.frontendContextUUID,{uuid:I,title:U,emoji:B=null,slug:D,access:W,user_permission:z}=A;await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:xn}),dJ(n,{entryUUID:j,frontendContextUUID:T,newCollectionUUID:I,newCollectionTitle:U,newCollectionEmoji:B,newCollectionSlug:D,newCollectionAccess:W,newCollectionUserPermission:z},d,l,h),n.invalidateQueries({queryKey:xn}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:T}]})}}),{mutate:E}=St({mutationFn:async({entryUUID:L,currentCollectionUUID:O,newCollectionTitle:A,newCollectionUUID:j,newCollectionSlug:T,newCollectionAccess:I,closeModal:U,callback:B})=>{if(j!==sd)return U(),await jC({params:{new_collection_uuid:j,entry_uuid:L,return_collection:!1,return_thread:!1},reason:e}),B?.(),y("add"),{entryUUID:L,currentCollectionUUID:O,newCollectionTitle:A,newCollectionUUID:j,newCollectionSlug:T,newCollectionAccess:I,closeModal:U}},onMutate:async({entryUUID:L,frontendContextUUID:O,currentCollectionUUID:A,newCollectionUUID:j,newCollectionTitle:T,newCollectionEmoji:I,newCollectionSlug:U,newCollectionAccess:B,newCollectionUserPermission:D})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:xn});const W=n.getQueryData(d),z=n.getQueryData(xn);return dJ(n,{entryUUID:L,frontendContextUUID:O,newCollectionUUID:j,newCollectionTitle:T,newCollectionEmoji:I,newCollectionSlug:U,newCollectionAccess:B,newCollectionUserPermission:D},d,l,h),n.setQueryData(xn,$=>{$=$||{pages:[],pageParams:[]};const X=$.pages.map(q=>q.map(Y=>Y.uuid===A?{...Y,thread_count:Y.thread_count-1}:Y.uuid===j?{...Y,thread_count:Y.thread_count+1}:Y));return{...$,pages:X}}),{previousThread:W,previousCollections:z}},onSettled:(L,O,A,j)=>{if(O)n.setQueryData(d,j.previousThread),n.setQueryData(xn,j.previousCollections);else{const I={collection_slug:A.existingCollectionSlug?.slice(-22)},U={collection_slug:A.newCollectionSlug.slice(-22)},B=[du,I],D=[du,U];n.invalidateQueries({queryKey:["get_collection",U]}),n.invalidateQueries({queryKey:B}),n.refetchQueries({queryKey:D}),n.refetchQueries({queryKey:m(A.entryUUID)}),n.invalidateQueries({queryKey:xn}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:A.frontendContextUUID}]}),n.invalidateQueries({queryKey:[Nh]})}}}),{mutate:M}=St({mutationFn:async({entryUUID:L,oldCollectionUUID:O,callback:A})=>{if(O)return await uX({collectionUUID:O,entryUUID:L,reason:e}),A?.(),y("remove"),{entryUUID:L,oldCollectionUUID:O}},onMutate:async({entryUUID:L,oldCollectionUUID:O,frontendContextUUID:A,collectionSlug:j})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:xn});const T=n.getQueryData(d),I=n.getQueryData(xn);return A&&(h(U=>U?U.map(B=>B.frontend_context_uuid===A?{...B,collection_info:void 0,bookmark_state:"NOT_BOOKMARKED"}:B):[]),n.setQueryData([l,{frontend_context_uuid:A}],U=>U?U.map(B=>B.frontend_context_uuid===A?{...B,collection_info:null,bookmark_state:"NOT_BOOKMARKED"}:B):[])),n.setQueryData(d,U=>{U=U||{pages:[],pageParams:[]};const B=U.pages.map(D=>D.map(W=>L===W.uuid&&W.collection?.uuid===O?{...W,collection:null}:W));return{...U,pages:B}}),n.setQueryData(xn,U=>{U=U||{pages:[],pageParams:[]};const B=U.pages.map(D=>D.map(W=>W.uuid===O?{...W,thread_count:W.thread_count-1}:W));return n.setQueryData(m(L),D=>D&&Array.isArray(D.pages)?{...D,pages:D.pages.map(W=>W.map(z=>z.uuid===L?{...z,collection_info:null}:z))}:{...D,collection_info:null}),{...U,pages:B}}),j&&n.setQueryData([du,{collection_slug:j.slice(-22)}],(U={pages:[],pageParams:[]})=>({...U,pages:U.pages.map(B=>B.filter(D=>D.uuid!==L))})),{previousThreads:T,previousCollections:I}},onSettled:(L,O,A,j)=>{if(O)n.setQueryData(d,j.previousThreads),n.setQueryData(xn,j.previousCollections);else if(n.invalidateQueries({queryKey:m(A.entryUUID)}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:xn}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[Nh]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:A.frontendContextUUID}]}),A.collectionSlug){const T={collection_slug:A.collectionSlug.slice(-22)},I=[du,T];n.invalidateQueries({queryKey:I}),n.invalidateQueries({queryKey:["get_collection",T]})}}}),{mutate:k}=St({mutationFn:async L=>{await Brt({collectionUuid:L,reason:e})},onSuccess:(L,O)=>{n.invalidateQueries({queryKey:xn}),n.invalidateQueries({queryKey:[Nh]}),n.invalidateQueries({queryKey:ev()}),n.invalidateQueries({queryKey:Ah()}),n.setQueryData(xn,A=>!A||!A.pages?A:{...A,pages:A.pages.map(j=>j.filter(T=>T.uuid!==O))})}}),{mutate:N}=St({mutationFn:async({collectionUuid:L,link:O,reason:A})=>{const j=await Er({urlPath:"/rest/collections/focused_web_config/links",timeoutMs:Fe(),method:"POST",body:JSON.stringify({collection_uuid:L,link:O}),headers:{"content-type":"application/json"},numRetries:1,reason:A});if(!j.ok){const T=await j.json();throw new Error(T.detail||"Failed to add link")}return j},onSettled:(L,O,A,j)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:A.collectionSlug.slice(-22)}]})}}),{mutate:P}=St({mutationFn:async({collectionUuid:L,link:O,reason:A})=>{await Er({urlPath:"/rest/collections/focused_web_config/links",timeoutMs:Fe(),method:"DELETE",body:JSON.stringify({collection_uuid:L,link:O}),headers:{"content-type":"application/json"},numRetries:1,reason:A})},onSettled:(L,O,A,j)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:A.collectionSlug.slice(-22)}]})}});return f.useMemo(()=>({updateCollectionInfo:x,updateCollectionAccessLevel:v,createCollectionForThread:b,createCollection:_,bookmarkFromFeed:w,removeBookmarkFromFeed:C,firstTimeBookmark:S,swapThreadCollection:E,removeThreadFromCollection:M,deleteCollection:k,addLink:N,removeLink:P}),[N,w,b,_,k,S,C,P,M,E,v,x])},Tit=({reason:e})=>We({queryKey:["list_space_templates"],queryFn:()=>bit({reason:e})}),m0e=({collectionSlug:e,reason:t})=>{const{data:n,isLoading:r}=Tit({reason:t});return f.useMemo(()=>!n?.templates||!e?{templateSpace:void 0,isLoading:r}:{templateSpace:n.templates.find(s=>s.collection.slug===e),isLoading:r},[e,n?.templates,r])},cun=({template:e,reason:t})=>{const n=_t(),{$t:r}=Z(),{trackEvent:s}=je(),{deprecatedOpenToast:a}=Mn(),{createCollection:i,addLink:l}=cx({reason:t}),{collection:c,tags:u}=e,d=f.useCallback(()=>{c&&(s("space template copied",{collectionSlug:c.slug??"",templateTitle:c?.title??"",tags:Array.from(u)}),i({...c,title:c.title??"",description:c.description??"",instructions:c.instructions??"",emoji:c.emoji??"",accessLevel:Ct.PRIVATE_READ,callback:async m=>{c.focused_web_config?.link_configs&&await Promise.all(c.focused_web_config.link_configs.map(p=>l({collectionUuid:m.uuid,link:p.link??"",collectionSlug:m.slug,reason:t}))),n.push(`/spaces/${m.slug}`),a(r({defaultMessage:"Space is ready to customize",id:"AWqOucIdz5"}),"success",3)}}))},[n,c,u,i,a,r,s,l,t]);return f.useMemo(()=>({handleCopyTemplate:d}),[d])},p0e=({reason:e,onSuccess:t})=>{const{$t:n}=Z(),{deprecatedOpenToast:r}=Mn();return St({mutationFn:async({file_url:s})=>(await Drt({request:{file_url:s,view_mode:!1},reason:e})).file_url,onSuccess:(s,{tab_id:a})=>{t?t(s,a):window.open(s,"_blank"),r(n({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)},onError:s=>{s instanceof dB?r(n({defaultMessage:"Downloads are disabled for files in this organization.",id:"NfM+Ayxvc6"}),"error",8):s instanceof fB?r(n({defaultMessage:"PDF downloads are restricted",id:"aJYvzl3Lq5"}),"error",8):s instanceof mB?r(n({defaultMessage:"This file belongs to a different organization",id:"lo7Bg402Jd"}),"error",8):r(n({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}})},GE=async({fileRepositoryType:e,ownerId:t,limit:n,offset:r,searchTerm:s,email:a,reason:i})=>{const[l,c]=await Promise.all([L8({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:n,offset:r,searchTerm:s,fileStates:["COMPLETE"],email:a},reason:i}),L8({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:100,offset:0,searchTerm:"",fileStates:["PROCESSING","FAILED"],email:a},reason:i})]),u=d=>({name:d.filename,file_uuid:d.file_uuid,file_s3_url:d.file_s3_url??"",file_title:d.file_title,file_description:d.file_description,uploadedBy:d.uploaded_by,state:d.file_state,size:d.file_size??0,date:new Date(d.time_created).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),error:d.error??void 0,isOptimistic:!1});if(l||c){const d=l?.files?.map(u)||[],m=c?.files?.map(u)||[];return{completedFiles:d,processingFiles:m.filter(p=>p.state==="PROCESSING"),failedFiles:m.filter(p=>p.state==="FAILED"),numTotalFiles:l?.numTotalFiles||0}}return{completedFiles:[],processingFiles:[],failedFiles:[],numTotalFiles:0}},Nit=({fileRepositoryType:e,limit:t,offset:n,searchTerm:r,ownerId:s,reason:a})=>{const i=xt(),{session:l}=Nt(),c=l?.user?.email??"",{isEnterprise:u}=kn({reason:a}),d=!!(e==="COLLECTION"&&s||e==="ORG"&&u),m=W3(e,s,t,n,r),p=We({queryKey:m,queryFn:()=>d?GE({fileRepositoryType:e,ownerId:s,limit:t,offset:n,searchTerm:r,email:c,reason:a}):Promise.reject(),enabled:d,placeholderData:mf,staleTime:5*60*1e3,gcTime:10*60*1e3});return f.useEffect(()=>{d&&(p.data?.numTotalFiles??0)>n+t&&i.prefetchQuery({queryKey:m,queryFn:()=>GE({fileRepositoryType:e,ownerId:s,limit:t,offset:n+t,searchTerm:r,email:c,reason:a}),staleTime:5*60*1e3,gcTime:10*60*1e3})},[m,d,i,e,t,n,r,p.data?.numTotalFiles,c,s,a]),p},jit=({fileRepositoryType:e,limit:t,searchTerm:n,ownerId:r,reason:s})=>{const{session:a}=Nt(),i=a?.user?.email??"",{isEnterprise:l}=kn({reason:s}),c=!!(e==="COLLECTION"&&r||e==="ORG"&&l),u=W3(e,r,t,void 0,n,!0);return $u({enabled:c,initialPageParam:0,queryKey:u,queryFn:({pageParam:m})=>!c||m===void 0?Promise.reject():GE({fileRepositoryType:e,ownerId:r,limit:t,offset:m,searchTerm:n,email:i,reason:s}),getNextPageParam:(m,p)=>{const g=p.length*t+t;if(!(g>=m.numTotalFiles))return g}})},uun=({fileRepoInfo:e,offset:t,setOffset:n,searchTerm:r,reason:s})=>{const a=e.file_repository_type,i=e.owner_id,{data:l,isLoading:c}=Nit({fileRepositoryType:a,limit:Vi,offset:t,searchTerm:r,ownerId:i,reason:s}),{completedFiles:u,processingFiles:d,failedFiles:m,totalFiles:p}=f.useMemo(()=>({completedFiles:l?.completedFiles||[],processingFiles:l?.processingFiles||[],failedFiles:l?.failedFiles||[],totalFiles:l?.numTotalFiles??0}),[l]),h=t>0,g=p>t+Vi,y=Math.floor(t/Vi)+1,x=Math.max(1,Math.ceil(p/Vi)),v=f.useCallback(()=>{h&&n(Math.max(0,t-Vi))},[h,t,n]),b=f.useCallback(()=>{g&&n(t+Vi)},[g,t,n]);return f.useMemo(()=>({completedFiles:u,processingFiles:d,failedFiles:m,totalFiles:p,isLoadingFileDirectory:c,hasPreviousPage:h,hasNextPage:g,searchTerm:r,offset:t,currentPage:y,totalPages:x,setOffset:n,handlePrevPage:v,handleNextPage:b}),[u,y,m,b,v,g,h,c,t,d,r,n,p,x])},Ait=({fileRepoInfo:e,searchTerm:t,limit:n=Vi,reason:r})=>{const s=e.file_repository_type,a=e.owner_id,{data:i,isLoading:l,hasNextPage:c,fetchNextPage:u}=jit({fileRepositoryType:s,limit:n,searchTerm:t,ownerId:a,reason:r}),{completedFiles:d,processingFiles:m,failedFiles:p,totalFiles:h}=f.useMemo(()=>{const g=i?i.pages[i.pages.length-1]:null;return{completedFiles:i?.pages.map(y=>y.completedFiles).flat()||[],processingFiles:i?.pages.map(y=>y.processingFiles).flat()||[],failedFiles:i?.pages.map(y=>y.failedFiles).flat()||[],totalFiles:g?.numTotalFiles??0}},[i]);return f.useMemo(()=>({completedFiles:d,processingFiles:m,failedFiles:p,totalFiles:h,isLoading:l,hasNextPage:c,searchTerm:t,fetchNextPage:u}),[d,p,u,c,l,m,t,h])},BB=({title:e,actionIcon:t=ur,onAction:n,testId:r,children:s})=>o.jsxs(H,{children:[o.jsxs("div",{className:"my-xs py-xs pl-sm flex items-center justify-between",children:[o.jsx(F,{variant:"smallBold",children:e}),n&&o.jsx(Te,{variant:"common",size:"small",icon:t,pill:!0,onClick:n,"data-testid":r})]}),s]}),Iit=({reason:e,collectionSlug:t})=>{const{variation:n}=a5(!1),{openModal:r}=wt(),{fileRepoInfo:s}=Do({reason:e,collectionSlugOverride:t}),{data:a}=We({queryKey:Ntt(s),queryFn:()=>sB({reason:e,request:{file_repository_info:s,filters:{connection_ids:[],connection_types:[],parent_uuids:[],remote_file_ids:[],uuids:[],ids:[],file_types:[],upload_ids:[],status:["SYNC_ERROR"],root_files_only:!1,search_keyword:""},order_by:"created",order_dir:"asc",pagination:{page_size:0}}})}),i=f.useCallback(()=>{r("spaceUploadFilesModal",{initialTab:n?"files":"connectors",collectionSlug:t})},[t,r,n]),l=a?.total??0;return f.useMemo(()=>({errorCount:l,handleSeeDetails:i}),[l,i])},fJ=pt({errorCount:{defaultMessage:"{errorCount, plural, one {# file failed to upload} other {# files failed to upload}}",id:"5s+s5GJuN7"},seeDetails:{defaultMessage:"See details",id:"RQfEXO7ZCr"}}),Rit=({collectionSlug:e})=>{const t="upload-error-banner",{$t:n}=Z(),{errorCount:r,handleSeeDetails:s}=Iit({reason:t,collectionSlug:e});return r<=0?null:o.jsxs(H,{variant:"subtle",className:"px-sm py-xs flex items-baseline gap-2 rounded-md",children:[o.jsx(F,{color:"red",className:"self-center",children:o.jsx(le,{icon:cf,size:"md"})}),o.jsx(F,{variant:"small",color:"default",children:o.jsx(he,{...fJ.errorCount,values:{errorCount:r}})}),o.jsx("div",{className:"ml-auto",children:o.jsx(Te,{variant:"noBackground",size:"small",text:n(fJ.seeDetails),onClick:s})})]})},qm=(e,t)=>{const n=t?.isOverlapping??!1,r=t?.stackDirection??"left";if(!e.length)return o.jsx(le,{icon:Lm,size:"sm"});const s=Math.max(1,t?.maxVisuals??3),a=d=>{if(!(!n||d))switch(t?.size){case"sm":return"-0.25rem";case"md":return"-0.375rem";case"lg":return"-0.5rem";case"xl":return"-0.625rem";default:return}},i=()=>{const d=V("relative flex items-center justify-center",{"rounded-full":t?.shape==="circle"||!t?.shape,"rounded-none":t?.shape==="square","size-4":t?.size==="sm","size-5":t?.size==="md","size-6":t?.size==="lg","size-7":t?.size==="xl"});return!n||!e||e.length<=1?d:V(d,t?.overlappingClassName??"bg-base ring-subtlest",{"ring-1":t?.size==="sm"||t?.size==="md","ring-2":t?.size==="lg"||t?.size==="xl"})},l=(t?.showRemainderCount??!0)&&e.length>s,c=s===1&&e.length>1&&l?0:l?s-1:Math.min(s,e.length),u=e.slice(0,c).map((d,m)=>o.jsx("div",{className:i(),style:{zIndex:r==="left"?e.length-m-1:e.length+m,marginLeft:a(m===0)},children:d},m));return o.jsxs("div",{className:V("isolate",t?.containerClass??"my-xs flex items-center"),children:[o.jsxs("div",{className:t?.innerClassName??V("flex items-center",{"gap-2":!n}),children:[u,l&&o.jsx("div",{className:V(i(),{"mx-1":c===0}),style:{zIndex:r==="left"?-1:e.length+s,marginLeft:a(c===0)},children:o.jsxs(F,{variant:"tinyMono",color:"light",inline:!0,children:["+",e.length-c]})})]}),t?.rightText&&o.jsx("div",{className:"ml-2",children:t.rightText})]})},VB=R.memo(({width:e="w-14",fillColor:t="fill-max",svgClassName:n,...r})=>{const s=V("h-auto group",e);return o.jsx("div",{className:s,...r,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 36",className:n,children:[o.jsx("path",{className:t,d:"M50.0858 22.3525C50.0858 23.9034 51.4144 24.8675 53.5527 24.8675C55.1684 24.8675 56.5468 24.3911 57.5393 23.4903C58.5991 22.5277 59.1595 21.1074 59.1595 19.3821V19.3262L53.1962 19.956C51.1311 20.147 50.0858 20.9534 50.0858 22.3525Z"}),o.jsx("path",{className:t,d:"M96.7015 8.60077C95.1033 5.76707 92.7331 3.49361 89.8477 2.02806C87.198 0.682565 84.1956 0 80.925 0H4.46551C1.9767 0.000755049 -0.00527674 2.02051 1.0554e-05 4.5084V36H80.925C83.8489 36 86.556 35.4503 88.9904 34.3736L78.7837 21.1444H78.5571L72.8105 28.5922H67.2136V27.4883L75.0795 17.6697L67.2136 7.851V6.74712H72.8105L78.5571 14.1949H78.7837L84.5302 6.74712H90.1264V7.851L82.2612 17.6697L93.3728 31.5407C94.6878 30.3568 95.8171 28.9675 96.7023 27.3977C98.2266 24.6946 99 21.5355 99 18.0102C99 14.4849 98.2266 11.3054 96.7015 8.60077ZM40.5936 28.593H35.122V14.6268C35.122 13.5886 34.8214 12.7392 34.2518 12.1699C33.6612 11.5794 32.8009 11.2804 31.6951 11.2804C30.0009 11.2804 27.1586 11.926 27.1586 16.2517V28.593H21.687V14.6268C21.687 13.5886 21.3863 12.7392 20.8168 12.1699C20.2262 11.5794 19.3658 11.2804 18.26 11.2804C16.5658 11.2804 13.7228 11.926 13.7228 16.2517V28.593H8.29124V7.35569H13.5649V9.06814C13.5649 9.20934 13.7402 9.27276 13.8308 9.16479C14.25 8.66721 14.7236 8.2693 15.2788 7.94236C16.3883 7.29 17.8182 6.96005 19.5275 6.96005C21.2368 6.96005 22.8419 7.38212 24.0602 8.21418C24.9538 8.82426 25.5248 9.54835 25.8828 10.1554C25.938 10.2498 26.0739 10.2543 26.1358 10.1645C27.5997 8.0375 29.88 6.9608 32.9232 6.9608C35.1363 6.9608 37.0239 7.60184 38.3812 8.81445C39.8277 10.1063 40.5928 11.9932 40.5928 14.2704L40.5936 28.593ZM64.5518 28.593H59.2781V26.5407C59.2781 26.4033 59.1074 26.3361 59.016 26.4388C57.5076 28.1316 55.3406 28.9894 52.5625 28.9894C47.7344 28.9894 44.6149 26.5083 44.6149 22.6696C44.6149 20.7261 45.3718 19.1699 46.8658 18.0449C48.1733 17.0596 49.9838 16.4503 52.249 16.2321L59.1603 15.5148V14.8647C59.1603 12.2658 57.806 11.0033 55.0203 11.0033C53.1093 11.0033 50.6885 11.6119 50.366 14.5105L50.3282 14.8458H45.1097C45.1097 14.8458 45.0863 14.4154 45.1746 13.8129C45.7978 9.61102 49.7542 6.91927 55.0989 6.91927C60.93 6.91927 64.5525 10.0852 64.5525 15.181L64.5518 28.593Z"})]})})});VB.displayName="Max";const Pt=R.memo(({size:e="medium",user:t,showEdit:n,onChange:r,anon:s,altText:a,defaultIcon:i=CLe,rounded:l=!0,showBackground:c=!0,showProBadge:u,showMaxBadge:d,className:m,proBadgeClassName:p,badgeProps:h})=>{const g=s?wLe:i,y="65%",x=f.useCallback(()=>{const v=document.createElement("input");v.type="file",v.accept="image/*",v.onchange=b=>{const _=b.target.files?.[0];if(_){const w=new FileReader;w.onload=C=>{r&&r(C.target?.result)},w.readAsDataURL(_)}},v.click()},[r]);return o.jsx("div",{className:V("text-inverse relative",m),children:o.jsxs("div",{className:V("relative flex aspect-square shrink-0 items-center justify-center",c?"bg-subtler":"bg-transparent",{"rounded-full":l,"size-3":e==="tiny","size-4":e==="mini","size-5":e==="small","size-6":e==="base","size-8":e==="medium","size-10":e==="large","size-20":e==="xlarge","ring-super border-inverse border-2 ring-[1.5px]":u,"ring-max border-inverse border-2 ring-[1.5px]":d}),children:[h?.show&&o.jsx("div",{className:V("absolute right-0 top-0 size-3 -translate-y-1/4 translate-x-1/4 select-none rounded-full border-2",h?.className)}),t&&!s?o.jsx("img",{alt:a??"User avatar",className:V("size-full object-cover",{"rounded-full":l}),src:t}):o.jsx(F,{color:"light",className:"flex items-center justify-center",children:o.jsx(g,{width:y,height:y})}),n&&e!=="small"&&o.jsx("div",{className:"absolute -bottom-1 -right-2",children:o.jsx(pe,{ariaLabel:"Edit avatar",variant:t?"common":"primary",size:e!=="xlarge"?"tiny":"small",pill:!0,icon:t?Vu:ur,onClick:x})}),u&&o.jsx("div",{className:V("absolute top-full mt-[-6px] w-[24px] rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-lg mt-[-10px]":e==="xlarge"},p),children:o.jsx(T3,{fillColor:"fill-super",width:"w-full",sizeVariant:"small"})}),d&&o.jsx("div",{className:V("absolute left-1/2 top-full mt-[-6px] flex w-[28px] -translate-x-1/2 items-center justify-center rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-xl mt-[-10px]":e==="xlarge"}),children:o.jsx(VB,{width:"w-full"})})]})})});Pt.displayName="Avatar";const Pit=({totalLocalFiles:e,totalRepoFiles:t,isFileManagerUiRedesignEnabled:n})=>{const r=t-e;return n?"files":e===0&&r>0?"connectors":(e>0&&r===0||e>0&&r>0,"localFiles")},$B=R.memo(({icon:e,badge:t})=>{const n=f.useMemo(()=>t&&o.jsx(Pt,{size:"tiny",showBackground:!1,rounded:!1,user:t}),[t]);return o.jsx(le,{icon:e,size:18,stroke:2,color:"#64645F",badge:n})});$B.displayName="BadgedIconFactory";const h0e=({collection:e,onSourcesEdit:t})=>{const n=Z(),r="files-section",{isUserInvited:s,isUserAtLeastWriter:a}=lx({collectionSlugOverride:e.slug,reason:r}),{variation:i}=a5(!1),l=f.useRef(null),{fileRepoInfo:c}=Do({reason:r,collectionSlugOverride:e.slug}),{searchTerm:u}=Sxe({reason:r}),{completedFiles:d,totalFiles:m,hasNextPage:p,fetchNextPage:h}=Ait({fileRepoInfo:c,searchTerm:u,limit:dX,reason:r}),{data:g,hasNextPage:y,fetchNextPage:x}=lrt({connectionTypes:[Ot.GOOGLE_DRIVE,Ot.ONEDRIVE,Ot.SHAREPOINT,Ot.DROPBOX,Ot.BOX],status:["READY"],fileRepoInfo:c,pageSize:dX,fileTypes:["FILE"],reason:r}),{connectorFiles:v,totalRepoFiles:b}=f.useMemo(()=>{const N=g?g.pages[g.pages.length-1]:null;return{connectorFiles:g?.pages.map(P=>P.files).flat()||[],totalRepoFiles:N?.files_in_repo??0}},[g]),_=f.useMemo(()=>Js(()=>{p?h():y&&x()},500),[p,h,y,x]);s5(l,_,{threshold:.5});const w=f.useCallback(()=>{if(!t)return;const N=Pit({totalLocalFiles:m,totalRepoFiles:b,isFileManagerUiRedesignEnabled:i});t(N)},[t,m,b,i]),C=p||y,S=f.useCallback(()=>{const N=a?n.formatMessage({defaultMessage:"Upload or sync files to be used as sources in every search.",id:"yF+cGexY2F"}):n.formatMessage({defaultMessage:"No files included.",id:"wZ9qntul+a"});let P=null;if(a){const L=[o.jsx(Pt,{user:_3,showBackground:!1,size:"small"},"gdrive"),o.jsx(Pt,{user:C3,showBackground:!1,size:"small"},"onedrive"),o.jsx(Pt,{user:S3,showBackground:!1,size:"small"},"sharepoint"),o.jsx(le,{icon:By,size:"sm"},"upload")];P=qm(L,{isOverlapping:!0,maxVisuals:4,size:"xl",stackDirection:"right"})}return o.jsxs(H,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:[P&&o.jsx(H,{className:"mb-xs",children:P}),o.jsx(F,{variant:"small",color:"light",className:"text-center",children:N})]})},[n,a]),E=b===0,M=!s&&a,k=n.formatMessage({defaultMessage:"Files",id:"m4vqJl0/FT"});return o.jsx(BB,{title:b?`${k} (${b})`:k,onAction:M?w:void 0,testId:"space-context-files-add-button",children:E?S():o.jsxs("div",{className:"gap-y-sm flex flex-col",children:[o.jsx(Rit,{collectionSlug:e.slug}),o.jsxs("div",{children:[o.jsx(g0e,{localFiles:d}),o.jsx(y0e,{connectorFiles:v}),C&&o.jsx(To,{ref:l,size:"small",className:"my-xs"})]})]})})};h0e.displayName="FilesSection";const g0e=({localFiles:e})=>{const t="local-files-list",{mutate:n}=p0e({reason:t}),r=f.useCallback(s=>s.file_s3_url?()=>n({file_url:s.file_s3_url}):null,[n]);return e.map((s,a)=>{const i=o.jsx(H,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx($B,{icon:wu,badge:null})}),l=r(s);return o.jsx(H,{children:l?o.jsx(Te,{variant:"positive",text:s.name,leadingComponent:i,onClick:l,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0}):o.jsxs(H,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:[i,o.jsx(F,{variant:"small",color:"light",className:"line-clamp-1 pl-px",children:s.name})]})},`local-${a}`)})};g0e.displayName="LocalFilesList";const y0e=({connectorFiles:e})=>{const t=f.useCallback(n=>()=>{n.connection_file_url&&window.open(n.connection_file_url,"_blank")},[]);return e.map((n,r)=>{const s=o.jsx(H,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx($B,{icon:Mue,badge:Bi(n.connection_type)})}),a=t(n);return o.jsx(H,{children:o.jsx(Te,{variant:"positive",text:n.name,leadingComponent:s,onClick:a,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0})},`connector-${r}`)})};y0e.displayName="ConnectorFilesList";const Oit=({collection:e,onEdit:t})=>{const n=Z(),r="instructions-section",{isUserInvited:s,isUserAtLeastWriter:a}=lx({collectionSlugOverride:e.slug,reason:r}),i=!s&&a,l=!e.instructions,c=f.useMemo(()=>{const u=n.formatMessage({defaultMessage:"Add instructions to format, scope, and add relevance to your search results.",id:"JnYU6ctsCn"});return o.jsx(H,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:o.jsx(F,{variant:"small",color:"light",className:"text-center",children:u})})},[n]);return o.jsx(BB,{title:n.formatMessage({defaultMessage:"Instructions",id:"sV2v5LjRpX"}),actionIcon:Vu,onAction:i?t:void 0,testId:"space-context-instructions-edit-button",children:l?c:o.jsx(H,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:o.jsx(F,{variant:"small",color:"light",className:"line-clamp-4 pl-px",children:e.instructions})})})},Lit=({collection:e,onSourcesEdit:t})=>{const n=Z(),r="links-section",{isUserInvited:s,isUserAtLeastWriter:a}=lx({collectionSlugOverride:e.slug,reason:r}),{focusedWebLinks:i,totalFocusedWebLinks:l}=f.useMemo(()=>{const h=e.focused_web_config?.link_configs??[];return{focusedWebLinks:h,totalFocusedWebLinks:h.length}},[e.focused_web_config?.link_configs]),c=f.useCallback(h=>()=>window.open(`https://${h.link}`,"_blank"),[]),u=f.useCallback(()=>{t&&t("links")},[t]),d=f.useCallback(()=>{const h=a?n.formatMessage({defaultMessage:"Add URLs to be used as sources in every search.",id:"FTItpgdarF"}):n.formatMessage({defaultMessage:"No links included.",id:"Qid6Kgk2jz"});return o.jsx(H,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:o.jsx(F,{variant:"small",color:"light",className:"text-center",children:h})})},[n,a]),m=l===0,p=!s&&a;return o.jsx(BB,{title:n.formatMessage({defaultMessage:"Links",id:"qCcwo3DU78"}),onAction:p?u:void 0,testId:"space-context-links-add-button",children:m?d():o.jsx(o.Fragment,{children:i.map((h,g)=>{const y=o.jsx(H,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx(le,{icon:xp,size:18,stroke:2,color:"#64645F"})}),x=c(h);return o.jsx(H,{children:o.jsx(Te,{variant:"positive",text:h.link,leadingComponent:y,onClick:x,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0})},g)})})})},x0e=R.memo(({collectionSlug:e,handleSpaceEdit:t,handleSourcesEdit:n})=>{const r="space-context",{collection:s}=Oc({collectionSlug:e,reason:r}),{isUserAtLeastWriter:a,isUserInvited:i,isUserReader:l}=lx({collectionSlugOverride:e,reason:r}),{templateSpace:c}=m0e({collectionSlug:e??"",reason:r}),d=!i&&a||l&&!!c;return s?o.jsxs(H,{className:"hideScroll h-full flex-col overflow-y-auto",children:[d&&o.jsxs(o.Fragment,{children:[o.jsx(Oit,{collection:s,onEdit:t}),o.jsx("hr",{className:"my-sm"})]}),o.jsx(h0e,{collection:s,onSourcesEdit:n}),o.jsx("hr",{className:"my-sm"}),o.jsx(Lit,{collection:s,onSourcesEdit:n})]}):null});x0e.displayName="SpaceContext";const v0e=R.memo(({closeModal:e,isOpen:t,collectionSlug:n})=>{const r="space-context-modal",s=Z(),{openModal:a}=wt(),{collection:i}=Oc({collectionSlug:n,reason:r}),{isUserAtLeastWriter:l,isUserAtLeastReader:c}=lx({reason:r,collectionSlugOverride:n}),u=xt(),d=f.useCallback(()=>{if(n){const g=["get_collection",{collection_slug:n.slice(-22)}];u.invalidateQueries({queryKey:g})}e()},[e,n,u]),m=f.useCallback(()=>{i&&a("spaceSettings",{existingSpace:i})},[i,a]),p=f.useCallback(g=>{i&&a("spaceUploadFilesModal",{initialTab:g,collectionSlug:n})},[i,n,a]),h=f.useMemo(()=>o.jsx(F,{variant:"section-title",className:"px-sm",children:s.formatMessage({defaultMessage:"Context",id:"V2qutIKrxy"})}),[s]);return o.jsx(on,{variant:"side-sheet",isOpen:t,onClose:d,includeBlur:!1,titleContent:h,modalClassname:"!min-w-[365px] !w-[25vw]",closeButtonClassname:"right-sm absolute",fixedTitle:!0,children:o.jsx(x0e,{collectionSlug:n,handleSpaceEdit:l?m:void 0,handleSourcesEdit:c?p:void 0})})});v0e.displayName="SpaceContextModal";const Dit=({children:e,title:t,handleClose:n,experimentalImageDesign:r})=>{const{image:s,imageAlt:a}=r;return o.jsx(H,{variant:"background",className:"max-w-[400px] overflow-hidden rounded-xl md:flex md:max-w-[960px]",children:o.jsxs(H,{variant:"subtler",className:"inset-0 md:flex",children:[o.jsx("div",{className:"md:w-[55%]",children:o.jsx("img",{src:s,alt:a,className:"md:object-cover"})}),o.jsxs("div",{className:"p-lg md:p-xl relative flex flex-col md:w-[45%]",children:[o.jsx(N3,{testId:"close-modal",variant:"common",size:"small",onClick:n}),o.jsx("div",{className:"mb-lg grow",children:o.jsx(F,{color:"default",variant:"page-title",className:"font-editorial my-sm text-center text-[2rem] font-light leading-none tracking-tight",children:t})}),e]})]})})};let b0e=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function Fit(e,t){const n=mJ(e),r=mJ(t);return n.major>r.major?!0:n.major<r.major?!1:n.minor>r.minor?!0:n.minor<r.minor?!1:n.patch>r.patch?!0:!(n.patch<r.patch)}function mJ(e){const[t,n,r]=e.split(".").map(Number);return{major:t,minor:n,patch:r}}function Uit(e){return Fit(_0e(),e)}function Fv(e,t){return Uit(t)?!0:(console.warn(`[todesktop-client] ${e} not called. ${e} was introduced in ${t}. You are running version ${_0e()}.`),!1)}const _0e=()=>typeof window.todesktop=="object"&&window.todesktop.desktopifyVersion,xu=typeof window<"u"&&window.todesktop,Bit=e=>async(t,n)=>{const r=b0e(),s=t==="*"?Object.keys(e):[t];for(const i of s){const l=e[i];xu?.on(l,n,r)}const a=w0e(e);return async()=>a(t,n,r)},Vit=e=>async(t,n)=>{const r=b0e(),s=t==="*"?Object.keys(e):[t];for(const i of s){const l=e[i];xu?.on(l,n,r)}const a=w0e(e);return async()=>a(t,n,r)},w0e=e=>(t,n,r)=>{const s=t==="*"?Object.keys(e):[t];for(const a of s){const i=e[a];xu?.off(i,n,r)}};function $it(e,t){const n={package:{name:e,version:t},invoke:{version:"1.0.0"}};function r(i){const l={metadata:n,payload:{command:i}};return window.todesktop.invoke(l)}function s(i){const l={metadata:n,payload:{command:Object.assign(Object.assign({},i),{method:":new"})}};return window.todesktop.invoke(l)}function a(i){if(Fv("releaseMemory","4.6.0")){if(!i?.length){console.log("No memory references to release");return}return window.todesktop.releaseMemory(i)}}return{invoke:r,construct:s,releaseMemory:a}}const{invoke:bi,construct:C0e}=$it("client-core","1.0.0-dev"),Wit={openProtocolURL:"open-protocol-url"},Hit=Vit(Wit);var CA;const SA=typeof window<"u"&&window.todesktop,zit=(e,t)=>{const n=async(a,i,{ref:l,preventDefault:c}={})=>{if(t&&!Fv(`${e} addEventListener`,t))return;const u=await bi({instanceRef:l,namespace:e,eventName:a,eventOptions:{preventDefault:c}});return window.todesktop.on(u,(d,...m)=>{if(Qit(m[0])){const[,...p]=m;return i(...p)}else return i(...m)}),()=>r(a,{eventId:u,ref:l})},r=async(a,...i)=>{const{eventId:l,ref:c}=i[0]||{};t&&!Fv(`${e} removeEventListener`,t)||(await bi({instanceRef:c,namespace:e,eventName:a,eventId:l}),window.todesktop.off(l))};return{removeAllListeners:async(a,{ref:i}={})=>{t&&!Fv(`${e} removeAllListeners`,t)||(await bi({instanceRef:i,namespace:e,method:"removeAllListeners",args:[a]}),window.todesktop.off(a))},on:n}};function Git(e){console.warn(`[todesktop-client] ${e} is a legacy event and may be removed in future.
        Contact support or look through our typescript files to find a suitable replacement.`)}function qit(e,t){const n=e[0],r=n in t;return r&&Git(n),r}const Kit=(e,t)=>qit(e,t),Yit=(e,t)=>{const n=zit(t),r=(...s)=>Kit(s,e)?Bit(e)(...s):n.on(...s);return{removeAllListeners:n.removeAllListeners,on:r}};(CA=SA?.env)===null||CA===void 0||CA.NODE_ENV;const Qit=e=>Xit(e)&&"preventDefault"in e&&"sender"in e,Xit=e=>e===null?!1:typeof e=="function"||typeof e=="object";async function Zit(e,t){return window.todesktop.shortcut.register(e,t)}async function EA(e){return window.todesktop.shortcut.unregister(e)}async function Jit(e){return C0e({namespace:"BrowserWindow",args:[e]})}async function eot({ref:e,viewRef:t}){return bi({instanceRef:e,namespace:"BrowserWindow",method:"setBrowserView",args:[t]})}async function tot({ref:e}={}){return bi({instanceRef:e,namespace:"BrowserWindow",method:"getSize",args:[]})}async function WB({ref:e}={}){return bi({instanceRef:e,namespace:"BrowserWindow",method:"focus",args:[]})}async function $8({ref:e}={}){return bi({instanceRef:e,namespace:"BrowserWindow",method:"isVisible",args:[]})}async function not({ref:e}={}){return bi({instanceRef:e,namespace:"BrowserWindow",method:"hide",args:[]})}async function HB({ref:e}={}){return bi({instanceRef:e,namespace:"BrowserWindow",method:"show",args:[]})}async function rot({ref:e}={}){return await bi({instanceRef:e,namespace:"BrowserWindow",property:"webContents"})}async function sot({ref:e}={},...t){return bi({instanceRef:e,namespace:"BrowserWindow",method:"setPosition",args:t})}const aot={enterFullscreen:"window.enter-full-screen",exitFullscreen:"window.leave-full-screen"},S0e=Yit(aot,"BrowserWindow"),tv=S0e.on,W8=S0e.removeAllListeners;async function pJ({id:e}){if(Fv(`${hJ}:retrieve`,"4.18.0"))return window.todesktop[hJ]({action:"retrieve",payload:{id:e}})}const hJ="objectStore";async function qE(e){return window.todesktop.contents.openUrlInBrowser(e)}async function iot(){return bi({namespace:"screen",method:"getCursorScreenPoint",args:[]})}async function oot(e){return bi({namespace:"screen",method:"getDisplayNearestPoint",args:[e]})}async function lot(e){return C0e({namespace:"BrowserView",args:[e]})}async function cot({ref:e},...t){return bi({instanceRef:e,namespace:"WebContents",method:"loadURL",args:t})}const uot="pkce_verifier",dot=5/(24*60),fot=128,mot=e=>{const t=Math.ceil(e*.75),n=new Uint8Array(t);return crypto.getRandomValues(n),btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"").slice(0,e)},pot=async e=>{const n=new TextEncoder().encode(e);try{let r;typeof window<"u"&&window.crypto?.subtle?r=await window.crypto.subtle.digest("SHA-256",n):r=new TextEncoder().encode(e);const s=Array.from(new Uint8Array(r)),a=String.fromCharCode(...s);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw ne.error("Failed to generate code challenge: "+r),new Error("Failed to generate code challenge: "+r)}},hot=e=>{rn(uot,e,{secure:!0,sameSite:"Lax",expires:dot,path:"/"})},gJ=async()=>{const e=mot(fot);return hot(e),pot(e)},MA={cacheName:{prefix:"pplx",suffix:"v2",runtime:"runtime"}},got=[MA.cacheName.prefix,MA.cacheName.runtime,MA.cacheName.suffix].join("-");async function yJ(){const e=xi();if("serviceWorker"in navigator){const{Workbox:t}=await Q(async()=>{const{Workbox:s}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:s}},[]),n=new URL("/service-worker.js",window.location.origin);e.version&&n.searchParams.set("v",e.version);const r=new t(n.toString());try{await r.register()}catch(s){ne.error("Error registering service worker",s)}}}async function yot(){"serviceWorker"in navigator&&await navigator.serviceWorker.getRegistrations().then(e=>Promise.all(e.map(t=>t.unregister())))}async function i5(){if("serviceWorker"in navigator){await caches.delete(got);return}}const nv=async(...e)=>(await i5(),c_.signIn(...e)),xot=async({email:e,reason:t})=>{let n=null;try{n=await yye({email:e,reason:t})}catch(r){return ne.log(r),null}return n?.workos_org_id??null},vot=async({email:e,reason:t})=>{let n=null;try{n=await yye({email:e,reason:t})}catch(r){return ne.log(r),null}return n?.force_sso??!1},bot=({email:e,onError:t,onClose:n,redirectUrl:r,reason:s})=>{const{$t:a}=Z(),{trackEvent:i}=je(),{device:{isWindowsApp:l}}=Lt(),c=_t(),{locale:u}=Z(),d=f.useMemo(()=>e.length>0&&e.includes("@")&&e.includes(".")&&e.indexOf("@")<e.lastIndexOf(".")&&e.indexOf("@")>0,[e]),m=f.useCallback(async y=>{i("login with third party clicked",{thirdParty:y});const x=window.location.origin;if(l){const v=await gJ(),b=`${x}/auth/${SE}/${y}?code_challenge=${v}&desktopRedirect=${encodeURIComponent(r)}&client_id=${QY}`;return qE(b),b}return await nv(y,{callbackUrl:r})},[i,r,l]),p=f.useCallback(async()=>{const y=await xot({email:e,reason:s});if(!y){t(`SSO not available for email ${e}`);return}if(n(),l){const x=window.location.origin,v=await gJ(),b=`${x}/auth/${SE}/workos?code_challenge=${v}&desktopRedirect=${r}&organization=${y}&login_hint=${e}&client_id=${QY}`;qE(b);return}await nv("workos",{callbackUrl:r},{organization:y,login_hint:e})},[e,n,t,r,l,s]),h=f.useCallback(async()=>{const y=e?.toLowerCase();if(await vot({email:y,reason:s})){await p();return}const v=Met({redirect:r});i("login with email clicked",{email:y});let b=`${v}#locale=${u}`;l&&(b=`${v}?windows-app-redirect-token=${Qqe}#locale=${u}`);const _=await nv("email",{email:y,callbackUrl:b,redirect:!1,useNumericOtp:!0});if(_?.ok){gj(`email request POST successful for ${y}`);const w=encodeURIComponent(y),C=encodeURIComponent(v),S=`/auth/verify-request?email=${w}&redirectUrl=${C}`;c.push(S)}else if(_?.status===429)gj(`email sign in rate limited for ${y}`),c.push("/auth/email-rate-limited");else{const w=`email sign in generic error: ${y} Response(status=${_?.status}, error=${_?.error}, ok=${_?.ok}, url=${_?.url})`;gj(w),ne.error(new Error(w)),t(a({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"}))}},[e,r,c,i,u,p,t,a,l,s]),g=f.useCallback(async(y,x)=>{const v={callbackUrl:r};switch(y){case"basic":v.pro=!1;break;case"pro":v.pro=!0;break;case"enterpriseMember":v.enterprise_member=!0;break;case"enterpriseAdmin":v.enterprise_admin=!0;break;case"enterpriseBillingAdmin":v.enterprise_billing_admin=!0;break;case"script":v.script=!0;break;case"frontendTest":v.fe_test=!0;break;case"example.com":v.email_handle=x??"pplx-dev";break}return await nv("devlogin",v)},[r]);return f.useMemo(()=>({emailIsValid:d,handleThirdPartySignIn:m,handleMagicLinkEmailSignIn:h,handleSSOSignIn:p,handleDevSignIn:g}),[d,g,h,p,m])},KE=(e,t)=>e==="highlightPrimary"?t?"primary":"common":e==="highlightBackToSchool"?t?"orange":"common":"inverted",_ot=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=Z();return o.jsx(pe,{fullWidth:!0,leadingComponent:o.jsx(SLe,{className:"left-two relative -top-px",size:18}),extraCSS:"h-11",variant:KE(t,!1),text:n({defaultMessage:"Continue with {apple}",id:"Iy1YQBJ5Tk"},{apple:"Apple"}),onClick:()=>e("apple")})},wot=({onClick:e})=>{const{$t:t}=Z();return o.jsx(Te,{fullWidth:!0,variant:"noBackground",extraCSS:"border-none text-inverse",text:t({defaultMessage:"Close",id:"rbrahOGMC3"}),onClick:e})},Cot=({autoFocus:e=!1,isSSO:t,email:n,emailInFlight:r,handleEmailClick:s,inputRef:a,handleKeyDown:i,setEmail:l,error:c,setError:u,placeholder:d,loginButtonsStyle:m})=>{const{$t:p}=Z(),{isMobileUserAgent:h}=Ce(),g="regular",y="w-full h-11",x=V("h-11 border-none rounded-lg","!bg-subtle");return o.jsxs(H,{className:"space-y-xs",children:[o.jsx(Wr,{autoFocus:e,isMobileUserAgent:h,type:"email",name:"email",className:x,pill:!1,errorText:c,placeholder:d||p(t?{defaultMessage:"Enter your work email",id:"jAgre55Zsn"}:{defaultMessage:"Enter your email",id:"5MDGuMLnEB"}),value:n,onKeyDown:i,onChange:v=>{u(""),l(v)},ref:a,disabled:r,errorPlacement:wm.LABEL}),o.jsx("div",{className:"flex justify-center",children:t?o.jsx(pe,{chevron:!0,chevronIcon:Zn,size:g,text:p(t?{defaultMessage:"Continue with SSO",id:"qank7+0V6w"}:{defaultMessage:"Continue with email",id:"l6yCDglZqT"}),extraCSS:V(y,"mt-xs"),variant:KE(m,!0),onClick:s,isLoading:r,disabled:n===""||r}):o.jsx(pe,{size:g,text:p({defaultMessage:"Continue with email",id:"l6yCDglZqT"}),onClick:s,isLoading:r,disabled:n===""||r,extraCSS:"w-full h-11 mt-xs",variant:KE(m,!0)})})]})},Sot=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=Z();return o.jsx(pe,{fullWidth:!0,leadingComponent:o.jsx(ELe,{size:18}),text:n({defaultMessage:"Continue with {google}",id:"Fc2NqN6N7A"},{google:"Google"}),onClick:()=>e("google"),extraCSS:"h-11",variant:KE(t,!0)})},Eot=({internalItems:e,isMobileStyle:t})=>{const{$t:n}=Z();return o.jsx(H,{children:o.jsx(sn,{items:e.map(r=>({type:"default",...r})),isMobileStyle:t,children:o.jsx(pe,{icon:MLe,text:n({defaultMessage:"Internal Login",id:"waIOTqSbxu"}),chevron:!0,fullWidth:!0,variant:"rejected"})})})},Mot=({onClick:e})=>{const{$t:t}=Z();return o.jsx(Te,{size:"tiny",variant:"noBackground",text:t({defaultMessage:"Single sign-on (SSO)",id:"TI79WvQ5kU"}),onClick:e})},E0e={SIDEBAR:"sidebar",LOGIN_MODAL:"login-modal"},Ta={ANSWER_MODE_TABS_ROOT:"answer-mode-tabs",ANSWER_MODE_TABS:{ANSWER:e=>`answer-mode-tabs-tab-${e}`,SEARCH:"answer-mode-tabs-tab-search",RESEARCH:"answer-mode-tabs-tab-research",SHOPPING:"answer-mode-tabs-tab-shopping",ASSETS:"answer-mode-tabs-tab-assets",JOBS:"answer-mode-tabs-tab-jobs",HOTELS:"answer-mode-tabs-tab-hotels",PLACES:"answer-mode-tabs-tab-places",IMAGES:"answer-mode-tabs-tab-images",VIDEOS:"answer-mode-tabs-tab-videos",SOURCES:"answer-mode-tabs-tab-sources",APPS:"answer-mode-tabs-tab-apps",TASKS:"answer-mode-tabs-tab-tasks",CHAT:"answer-mode-tabs-tab-chat"},ANSWER_MODE_JOBS:{FILTERS_ROOT:"jobs-filters"},ANSWER_MODE_VIDEO:{VIDEO_PREVIEW:"jobs-video-preview"},ANSWER_MODE_IMAGE:{IMAGE_PREVIEW:"jobs-image-preview"},ANSWER_MODE_SHOPPING:{SHOPPING_ITEM:"shopping-item"},ANSWER_MODE_PLACES:{PLACE_ITEM:"place-item"},ANSWER_MODE_HOTELS:{HOTEL_ITEM:"hotel-item"}},kot=e=>e?.includes("Chrome")??!1,M0e=e=>(e?.includes("Mobile")&&!e?.includes("iPad"))??!1,Tot=e=>e?.includes("Android")??!1,Not=e=>(e?.includes("iPhone")||e?.includes("iPad"))??!1,jot=e=>(e?.includes("Macintosh")||e?.includes("iPad"))??!1,Aot=e=>e?.includes("Mobile Safari")??!1,Iot=e=>e?.includes("Firefox")??!1,A_=e=>e?.includes("WindowsApp")??!1,Rot=e=>e?.includes("Windows")??!1,Pot=e=>e?.includes("FBAN")||e?.includes("FBAV")||e?.includes("Instagram"),Oot=e=>e?.includes("SamsungBrowser")??!1,Lot=e=>(e.includes("wv")||e.includes("version/"))??!1,Dot=e=>/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e),Fot=e=>Lot(e)||Dot(e),Uot=({autoFocus:e,showInternal:t,disallowedMethods:n,className:r,email:s,setEmail:a,error:i,onClose:l,setError:c,handleEmailClick:u,handleKeyDown:d,emailInFlight:m,handleThirdPartySignIn:p,isSSO:h,setIsSSO:g,internalItems:y,envHasDevLogins:x,isMobileStyle:v,placeholder:b,showCloseButton:_,loginButtonsStyle:w})=>{const C=R.useRef(null),S=navigator.userAgent,E=!n?.includes("google")&&!Fot(S),M=!n?.includes("apple"),k=!h&&!n?.includes("sso"),N=f.useMemo(()=>[...E?["google"]:[],...M?["apple"]:[],...t&&x?["internal"]:[]],[E,M,t,x]),P=f.useMemo(()=>({google:o.jsx(Sot,{handleThirdPartySignIn:p,loginButtonsStyle:w}),apple:o.jsx(_ot,{handleThirdPartySignIn:p,loginButtonsStyle:w}),internal:o.jsx(Eot,{internalItems:y,isMobileStyle:v})}),[p,y,v,w]),L=f.useCallback(()=>{c(""),g(!0)},[c,g]);return o.jsxs("div",{className:r,"data-testid":E0e.LOGIN_MODAL,children:[h&&o.jsx("div",{className:"absolute left-0 top-0 z-40",children:o.jsx(Te,{size:"small",icon:xD,onClick:()=>{g(!1),c(void 0)}})}),o.jsxs("div",{className:"mx-auto max-w-sm",children:[!h&&o.jsxs(o.Fragment,{children:[N.length>0&&o.jsx("div",{className:"space-y-sm mx-auto w-[90%]",children:N.map(O=>o.jsx(R.Fragment,{children:P[O]},O))}),N.length>0&&o.jsx(H,{className:"mx-auto my-4 h-0 w-[90%] shrink-0 border-t"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mx-auto w-[90%]",children:o.jsx(Cot,{autoFocus:e||h,isSSO:h,email:s,emailInFlight:m,handleEmailClick:u,inputRef:C,handleKeyDown:d,setError:c,setEmail:a,error:i,placeholder:b,loginButtonsStyle:w})}),k&&o.jsx("div",{className:"mt-md flex justify-center",children:o.jsx(Mot,{onClick:L})}),_&&o.jsxs(o.Fragment,{children:[o.jsx(H,{className:"my-4 h-0 w-full shrink-0"}),o.jsx(wot,{onClick:l})]})]})]})]})},k0e="comet-sidecar-threads-by-id",pn=()=>!!oo(),zB=()=>{const e=oo();return!!(e?.android_version||e?.ios_version)},o5=e=>!(e.defaultPrevented||!pn()||e.ctrlKey||e.metaKey),Bot=e=>{const t=Oe.getItem(k0e);if(t){const n=JSON.parse(t);for(const[r,{url:s,updatedAt:a}]of Object.entries(n))e.getState().actions.setSidecarUrlById(r,s,a)}},xJ=e=>{const t=e.getState().sidecarUrlById,n={};t.forEach((r,s)=>{s!=="-1"&&(r.url==="/sidecar/"||r.url==="/sidecar"||(n[s]={url:r.url,updatedAt:r.updatedAt}))}),Oe.setItem(k0e,JSON.stringify(n))},Vot=(e,t)=>{const n=e.getState().sidecarSourceTab,r=Wg(n.tabId,n.secondaryTab?.tabId),s=e.getState().sidecarUrlById.get(r)?.url;!s||new URL(window.location.href).pathname===s||t.replace(s,"Sidecar thread restored from cache")},ab=({autoFocus:e=!1,onClose:t=Pn,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,preEnteredEmail:i,placeholder:l,showCloseButton:c=!0,loginButtonsStyle:u="allInverted"})=>{const d="login-modal-inner",[m,p]=R.useState(i??""),[h,g]=R.useState(),[y,x]=R.useState(!1),{emailIsValid:v,handleThirdPartySignIn:b,handleMagicLinkEmailSignIn:_,handleSSOSignIn:w,handleDevSignIn:C}=bot({email:m,onClose:t,redirectUrl:n??"/",onError:g,reason:d}),{env:{envHasDevLogins:S}}=Lt(),{isMobileStyle:E}=Ce(),{$t:M}=Z(),{getEppoTypedVariation:k}=yf(),[N,P]=R.useState(!1),{closeModal:L}=wt(),O=f.useCallback(async()=>{if(!pn())return!1;try{if(await k((U,...B)=>U.getBooleanAssignment(...B),{flag:"comet-enterprise-login-block",defaultValue:!1,extraAttributes:{email:m},subjectType:"visitor_id"}))return g(M({defaultMessage:"Your organization has not approved you to use Comet with this account.",id:"Jz4Ffdr9RN"})),!0}catch(I){ne.warn("Failed to check comet enterprise login block:",I)}return!1},[m,k,M]),A=f.useCallback(async()=>{if(!v){g(M({defaultMessage:"Please enter a valid email address",id:"oLpv295HWX"}));return}if(!(y||await O())){if(x(!0),m.endsWith("@example.com")&&S&&!N){t(),await C("example.com",m.split("@")[0]),x(!1);return}N?await w():(await _(),await L()),x(!1)}},[v,y,m,S,N,O,M,t,C,w,_,L]),j=f.useCallback(I=>{da.isEnterKeyWithoutShift(I)&&A()},[A]),T=[{icon:Cue,text:"Basic",onClick:()=>C("basic")},{icon:vD,text:"Pro",onClick:()=>C("pro")},{icon:io,text:"Enterprise Member",onMouseDown:I=>I.preventDefault(),onClick:()=>C("enterpriseMember")},{icon:gP,text:"Enterprise Admin",onMouseDown:I=>I.preventDefault(),onClick:()=>C("enterpriseAdmin")},{icon:gP,text:"Enterprise Billing Admin",onMouseDown:I=>I.preventDefault(),onClick:()=>C("enterpriseBillingAdmin")},{icon:Lg,text:"Script Default User",onClick:()=>C("script")},{icon:Lg,text:"FE Test User",onClick:()=>C("frontendTest")}];return o.jsx(Uot,{autoFocus:e,onClose:t,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,email:m,setEmail:p,handleEmailClick:A,handleKeyDown:j,error:h,setError:g,emailInFlight:y,setEmailInFlight:x,emailIsValid:v,handleThirdPartySignIn:b,isSSO:N,setIsSSO:P,handleDevSignIn:C,internalItems:T,envHasDevLogins:S,isMobileStyle:E,placeholder:l,showCloseButton:c,loginButtonsStyle:u})},GB=R.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=fe,variant:i="centered-sheet",onClose:l,noPadding:c,onIsClosing:u,footerContent:d,overlayVariant:m,titleLeadingButtonProps:p,showCloseButton:h=!0,...g})=>{const[y,x]=f.useState(!1),[v,b]=f.useState(!1),_=f.useMemo(()=>V("shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"bg-none dark:bg-none bg-backdrop/25 backdrop-blur-sm":i==="full-sheet-blurred","bg-gradient-to-t from-base from-45% to-transparent":i==="bottom-sheet-gradient","w-screen md:h-screen h-[100dvh] flex flex-col":i==="full-sheet-blurred"||i==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0 bg-none dark:bg-none bg-backdrop/70 backdrop-blur-md":i==="bottom-sheet-blurred","flex items-center justify-end w-screen h-[100dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":i==="bottom-sheet-gradient","animate-in slide-in-from-bottom ease-in":i==="bottom-sheet-blurred"&&!v,"animate-out slide-out-to-bottom ease-out":i==="bottom-sheet-blurred"&&v,"animate-in fade-in ease-in duration-300":i==="bottom-sheet-gradient"&&!v,"animate-out fade-out ease-out duration-300":i==="bottom-sheet-gradient"&&v,"bg-base":i==="full-sheet","bg-base rounded-lg md:min-w-[600px] max-w-screen-lg max-h-[100vh]":i==="centered-sheet","bg-base rounded-2xl max-w-[90dvw] max-h-[90dvh]":i==="inset-centered-sheet"}),[i,v]),w=f.useMemo(()=>V("p-md grow flex flex-col",{"justify-center":i!=="bottom-sheet-gradient","justify-end":i==="bottom-sheet-gradient","md:pt-lg":e===void 0,"md:pb-lg":a?.length===0,"px-0":c,"py-0":c}),[a?.length,c,e,i]),C=f.useMemo(()=>a.map(({text:P,onClick:L,variant:O,disabled:A,isLoading:j,testId:T,icon:I},U)=>{const B={key:U,text:P,chevron:I!==void 0,disabled:A,isLoading:j,onClick:L,testId:T,chevronIcon:I};return O?f.createElement(pe,{fullWidthMobile:!0,variant:O,...B,key:B.key}):f.createElement(pe,{fullWidthMobile:!0,...B,key:B.key})}),[a]),S=f.useCallback(()=>{u?.(),b(!0)},[b,u]),E=f.useCallback(()=>{b(!1),x(!1),l?.()},[b,x,l]),M=f.useCallback(()=>{b(!1),x(!1),l?.()},[x,b,l]),k=f.useMemo(()=>{switch(i){case"full-sheet-blurred":return"full-sheet";case"full-sheet":return"full-sheet";case"bottom-sheet-blurred":case"bottom-sheet-gradient":return"bottom-sheet";default:return"default"}},[i]),N=f.useMemo(()=>i==="bottom-sheet-blurred"||i==="bottom-sheet-gradient",[i]);return o.jsx(Xy,{transparent:N,canOutsideClickClose:!0,childVariant:k,shouldClose:y,onIsClosing:S,onClose:E,variant:m,...g,children:o.jsx("div",{children:o.jsxs("div",{className:_,children:[o.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),o.jsxs(H,{className:V("flex h-full grow flex-col rounded-none md:w-[unset] md:grow-[unset]",i==="inset-centered-sheet"?"w-[90dvw]":"w-screen",{"border-t":i!=="bottom-sheet-gradient"}),children:[o.jsxs(H,{variant:"transparent",className:V("px-md py-sm md:py-md sticky top-0 z-[22] w-full shrink-0",{"border-b":e&&!r,"text-center":r,"h-8":!e&&h}),children:[o.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[p&&o.jsx(Te,{extraCSS:"-ml-sm",...p,size:"small",variant:"common"}),e&&o.jsx(F,{variant:"page-title",className:V("line-clamp-1 md:line-clamp-2",{"pt-lg grow":r,"mr-lg":!r}),children:e}),!N&&i!=="full-sheet-blurred"&&h&&o.jsx(N3,{onClick:M,testId:"close-modal"})]}),t&&o.jsx(F,{variant:"base",color:"light",className:V("mt-xs line-clamp-3",n),children:t})]}),o.jsx("div",{className:w,children:s}),(C?.length>0||d)&&o.jsxs(H,{variant:"background",className:V("gap-x-sm p-sm pb-md md:pb-sm sticky bottom-0 z-10 flex items-center border-t",{"justify-end":!d},{"justify-between":d}),children:[d,C]})]})]})})})});GB.displayName="SheetModal";const H8=e=>{const t=Number(e);return isNaN(t)?(console.log(`formatNumber number failed on: ${e}`),"0"):t.toLocaleString("en-US")},Ei=()=>Ir(),dun={status:"PENDING",uuid:Ei()},Pa=(e,t,n)=>{if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);return r.length==s.length&&r.every(a=>n?n(e[a],t[a]):e[a]===t[a])},YE=(e,t)=>{const n=new URL(e);return n.searchParams.delete("source"),n.searchParams.delete("s"),t&&(n.hash=t),n.searchParams.sort(),n.href};function T0e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function $ot(e,t){try{const n=new Date(e.replace(/-/g,"/")).toLocaleString(t,{weekday:"long",hour:"numeric",minute:"numeric",hour12:!0});return T0e(n)}catch(n){console.log(n)}return null}function qB(e,t,n="short"){const s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(e.toLowerCase());if(s===-1)return"";const a=new Date,i=new Date(a.setDate(a.getDate()-a.getDay()+s)),l=Intl.DateTimeFormat(t,{weekday:n}).format(i);return T0e(l)}function Wot(e){return e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:12})}function l5(e,t,n){const r=new URL(e),s=r.searchParams;return s.set(t,n),r.search=s.toString(),r.toString()}const fun=e=>{let t;if(typeof e=="string"){if(t=parseFloat(e),isNaN(t))throw new Error("Invalid input: not a number")}else if(typeof e=="number")t=e;else throw new Error("Invalid input: not a string or number");return t.toLocaleString("en-US")},Hot=/\[(\d{1,3})(,\s*\{ts:\d+\})?\]/g,zot=/(\n*^(("""+|'''+|```+)[A-Za-z0-9]*|#+ .*)$|^- |\*\*|\$\$|\||`|[-|]{3,})/gm;function Got(e){return e.replace(Hot,"")}function qot(e){return e.replace(zot,"")}function ey(e,t){const n=Got(qot(e)).trim();if(n.length<=t)return n;{const r=n.slice(0,t).trim(),s=r.lastIndexOf(" ");return s*2>t&&s<t-1?r.slice(0,s)+"...":r+"..."}}const N0e=R.memo(({pitchMessage:e,origin:t,isOpen:n,closeModal:r,closeCallback:s,experimentalImageDesign:a,sheetModalDesign:i,overrideRedirectUrl:l,disallowedMethods:c,loginButtonsStyle:u,renderCloseButton:d,preEnteredEmail:m,autoFocus:p=!0})=>{const{$t:h}=Z(),g=lt(),[y,x]=f.useState(""),{trackEvent:v}=je(),{isMobileStyle:b}=Ce(),_=e?.title??h({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),[w]=f.useState(!1),C=f.useCallback(()=>{r(),s?.()},[r,s]);return f.useEffect(()=>{n&&v("login modal opened",{origin:t})},[n,t,v]),f.useEffect(()=>{!g&&t&&x(l5(l??window.location.href,Ic,t))},[g,t,l]),o.jsx(o.Fragment,{children:a?o.jsx(on,{isOpen:n,onClose:C,centerTitle:!!e,actionList:fe,variant:"hide-chrome",renderCloseButton:d,children:o.jsx(Dit,{title:_,handleClose:C,experimentalImageDesign:a,children:o.jsx(ab,{autoFocus:p,onClose:C,redirectUrl:y,disallowedMethods:c,loginButtonsStyle:u,showCloseButton:!1,preEnteredEmail:m})})}):o.jsx(GB,{isOpen:n,onClose:C,shouldClose:w,centerTitle:!!e,actionList:fe,variant:i,showCloseButton:d,children:o.jsxs("div",{onClick:S=>S.stopPropagation(),children:[o.jsxs("div",{className:"px-lg mx-auto max-w-sm md:max-w-lg",children:[o.jsx(F,{variant:"page-title",className:"font-editorial text-pretty text-center !font-light !leading-snug tracking-tight md:text-4xl",children:e?.title??o.jsx(he,{defaultMessage:"Sign up below to <italic>unlock</italic> the full {br} potential of Perplexity",id:"exZDTeIaG0",values:{italic:S=>o.jsx("span",{className:"italic",children:S}),br:o.jsx("br",{})}})}),e?.subtitle&&o.jsx(F,{className:"mt-xs text-pretty text-center",children:e.subtitle}),o.jsx(F,{className:"mt-md text-pretty text-center",children:e?.description?e.description:o.jsx(he,{defaultMessage:"By continuing, you agree to our {privacyPolicyLink}.",id:"cE5rUKm7fb",values:{privacyPolicyLink:o.jsx(Ye,{className:"underline",target:"_blank",href:"https://www.perplexity.ai/hub/legal/privacy-policy",children:o.jsx(he,{defaultMessage:"privacy policy",id:"LIDXd2UwSl"})})}})}),o.jsx("div",{className:"mt-lg"})]}),o.jsx(ab,{autoFocus:p&&!b,onClose:C,redirectUrl:y,showInternal:!0,disallowedMethods:c,loginButtonsStyle:u,preEnteredEmail:m})]})})})});N0e.displayName="LoginModal";function Kot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z8(){return z8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z8.apply(this,arguments)}function vJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function bJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vJ(Object(n),!0).forEach(function(r){Kot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vJ(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yot(e,t){if(e==null)return{};var n,r,s=function(i,l){if(i==null)return{};var c,u,d={},m=Object.keys(i);for(u=0;u<m.length;u++)c=m[u],l.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function w0(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var s=[],a=!0,i=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done)&&(s.push(c.value),!r||s.length!==r);a=!0);}catch(d){i=!0,l=d}finally{try{a||u.return==null||u.return()}finally{if(i)throw l}}return s}}(e,t)||function(n,r){if(n){if(typeof n=="string")return _J(n,r);var s=Object.prototype.toString.call(n).slice(8,-1);if(s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set")return Array.from(n);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _J(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _J(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rv={},wJ=function(e){var t=document.querySelector('script[src="'.concat(e,'"]'));if(t)return rv[e]={loading:!1,error:null,scriptEl:t}},CJ=typeof window<"u"&&window.document!==void 0,SJ=function(e){return e?.linkToken!==void 0},j0e=function(e){var t=z8({},e),n=function(d){var m=d.src,p=d.checkForExisting,h=p!==void 0&&p,g=Yot(d,["src","checkForExisting"]),y=m?rv[m]:void 0;!y&&h&&m&&CJ&&(y=wJ(m));var x=w0(f.useState(y?y.loading:!!m),2),v=x[0],b=x[1],_=w0(f.useState(y?y.error:null),2),w=_[0],C=_[1],S=w0(f.useState(!1),2),E=S[0],M=S[1];return f.useEffect(function(){if(CJ&&m&&!E&&!w){var k;!(y=rv[m])&&h&&(y=wJ(m)),y?k=y.scriptEl:((k=document.createElement("script")).src=m,Object.keys(g).forEach(function(L){k[L]===void 0?k.setAttribute(L,g[L]):k[L]=g[L]}),y=rv[m]={loading:!0,error:null,scriptEl:k});var N=function(){y&&(y.loading=!1),b(!1),M(!0)},P=function(L){y&&(y.error=L),C(L)};return k.addEventListener("load",N),k.addEventListener("error",P),document.body.appendChild(k),function(){k.removeEventListener("load",N),k.removeEventListener("error",P),y&&y.loading&&(k.remove(),delete rv[m])}}},[m]),[v,w]}({src:"https://ah-cdn.merge.dev/initialize.js",checkForExisting:!0}),r=w0(n,2),s=r[0],a=r[1],i=w0(f.useState(!1),2),l=i[0],c=i[1],u=!(typeof window>"u")&&!!window.AgentHandlerLink&&!s&&!a&&SJ(t);return f.useEffect(function(){u&&window.AgentHandlerLink&&SJ(t)&&window.AgentHandlerLink.initialize(bJ(bJ({},t),{},{onReady:function(){return c(!0)}}))},[u,t]),{open:f.useCallback(function(){window.AgentHandlerLink&&window.AgentHandlerLink.openLink(t)},[t]),isReady:l,error:a}};function Qot({reason:e}){const t=xt(),n=$3();return St({mutationKey:["publishArticleMutation"],mutationFn:async({connectorName:r,connectionUUID:s,deleteFiles:a})=>{let i;return s&&!a?i=await Art({connectionUUID:s,reason:e}):s&&a?i=await Irt({connectionUUID:s,reason:e}):i=await jrt({connectorName:r,reason:e}),i},onSettled:async()=>{await t.refetchQueries({queryKey:n})},onMutate:async({connectorName:r,connectionUUID:s})=>{t.setQueryData(n,a=>{if(!a)return a;const i=a.connectors.connectors.map(l=>l.name===r&&(!s||l.connection_uuid===s)?{...l,connected:!1}:l);return{...a,connectors:{connectors:i}}})}})}const KB=()=>{const{$t:e}=Z(),t=_t(),{createCollection:n,createCollectionForThread:r}=cx({reason:"create-new-space"}),s=f.useCallback(()=>{const i=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});n({title:i,description:"",emoji:"",instructions:"",accessLevel:CE,enableWebByDefault:!0,callback:l=>{t.push(`/spaces/${l.slug}`)}})},[n,e,t]),a=f.useCallback((i,l)=>{const c=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});r({title:c,description:"",emoji:"",instructions:"",accessLevel:CE,enableWebByDefault:!0,entryUUID:i,frontendContextUUID:l,callback:u=>{t.push(`/spaces/${u.slug}`)}})},[r,e,t]);return f.useMemo(()=>({handleCreateNewSpace:s,handleCreateNewSpaceForThread:a}),[s,a])};function YB(){const{value:e}=Dt({flag:"spaces-creation-redesign",subjectType:"user_nextauth_id",defaultValue:!1});return e}const A0e=()=>{const{openModal:e}=wt(),{isMobileUserAgent:t}=Ce(),n=zB(),r=f.useCallback(({origin:s,sheetModalVariant:a,closeCallback:i})=>{!t||n||e("installModal",{origin:s,sheetModalVariant:a,closeCallback:i})},[n,t,e]);return f.useMemo(()=>({openInstallUpsell:r}),[r])};var EJ={};const gr=({enabled:e})=>{const{openModal:t}=wt(),{keysRequiringRerender:n,removeKeyRequiringRerender:r}=yf(),{isMobileUserAgent:s}=Ce(),a=lt(),{openInstallUpsell:i}=A0e(),l=f.useCallback(({title:u,description:d,origin:m,image:p,imageAlt:h,closeCallback:g,loginButtonsStyle:y})=>{!e||a||EJ.NEXT_PUBLIC_IS_SIDECAR_BUILD||t("loginModal",{pitchMessage:u?{title:u,description:d}:void 0,origin:m,experimentalImageDesign:{image:p,imageAlt:h},closeCallback:g,loginButtonsStyle:y})},[e,t,a]),c=f.useCallback(({title:u,description:d,origin:m,sheetModalVariant:p,closeCallback:h,overrideRedirectUrl:g,disallowedMethods:y,overrideMobileVariant:x=!1})=>{if(!e||a||EJ.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;let v="full-sheet";(x||!s)&&p&&(v=p),t("loginModal",{pitchMessage:u?{title:u,description:d}:void 0,origin:m,sheetModalDesign:v,closeCallback:h,overrideRedirectUrl:g,disallowedMethods:y})},[e,s,t,a]);return f.useEffect(()=>{e&&(n.includes("visitor-gate")&&(s&&!Pg()?i({origin:De.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:De.VISITOR_GATE,sheetModalVariant:"bottom-sheet-gradient"}),r("visitor-gate")),n.includes("visitor-gate-ii")&&(s&&!Pg()?i({origin:De.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:De.VISITOR_GATE}),r("visitor-gate-ii")))},[e,c,n,r,s,i]),f.useMemo(()=>({openVisitorLoginUpsell:c,openVisitorLoginImageUpsell:l}),[l,c])};function Xot(e){const t=new Uint8Array(e);return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("")}async function Zot(e){const n=new TextEncoder().encode(e);return await crypto.subtle.digest("SHA-256",n)}async function Jot(e){const t=await Zot(e);return Xot(t)}const elt=async({reason:e})=>{try{const{data:t,error:n}=await ae.POST("/rest/attribution/comet/session",e,{timeoutMs:Fe(),numRetries:1});if(n)throw n;return{success:t.success}}catch(t){return ne.error("Failed to start Comet session",t),{success:!1}}},tlt=async({eventName:e,reason:t})=>{try{const{data:n,error:r}=await ae.POST("/rest/attribution/comet/event/{event_name}",t,{timeoutMs:Fe(),params:{path:{event_name:e}}});if(r)throw r;return{success:n?.success??!1}}catch(n){return ne.error("Failed to send Comet event",n),{success:!1}}},I0e=Yt("SingularAttributionContext",{sendQueryEventSingular:()=>Promise.resolve(),maybeSendNthQueryEventSingular:()=>Promise.resolve(),sendSubscribedEventSingular:()=>Promise.resolve(),sendSubscribedPayingEventSingular:()=>Promise.resolve(),sendAppDownloadClickedEventSingular:()=>Promise.resolve(),sendResurrectedActivationEventSingular:()=>Promise.resolve(),sendCometDownloadPageLoadEventSingular:()=>Promise.resolve(),sendCometDownloadPageSignInEventSingular:()=>Promise.resolve(),sendCometDownloadedEventSingular:()=>Promise.resolve(),sendCometDownloadButtonClickedEventSingular:()=>Promise.resolve(),sendCometWaitlistButtonClickedEventSingular:()=>Promise.resolve(),sendCometDownloadLinkEmailEventSingular:()=>Promise.resolve(),sendSubscribedMaxEventSingular:()=>Promise.resolve()}),MJ={1:"activated",3:"true activated",5:"quality activated",10:"super activated"},kJ={1:"first comet query",3:"third comet query"},nlt="ai.testing.perplexity",rlt="ai.perplexity",R0e=async(e,t)=>{if(!e)return null;const n=new Date;n.setMilliseconds(0);const r=`${e}-${n.toISOString()}-${t}`;return await Jot(r)},slt=async({productId:e,visitorId:t,userId:n})=>{const{SingularConfig:r,singularSdk:s}=await Q(async()=>{const{SingularConfig:c,singularSdk:u}=await import("./singular-sdk-CHVvA4e9.js").then(d=>d.s);return{SingularConfig:c,singularSdk:u}},[]),a=new r("perplexity_ai_039eb8fb","1e0179ca95965b57a3e91c1cf3049b64",e);n&&a.withCustomUserId(n),s.init(a);const i="initialized singular",l=await R0e(t,i);return s.event(i,{visitorId:t,eventId:l}),s},alt=({children:e})=>{const{session:t}=Nt(),n=Fn(dE),{env:{isProduction:r,isStaging:s},device:{isMobile:a}}=Lt(),i=f.useRef([]),l=f.useRef([]),c=Ut(),[u,d]=f.useState(void 0);f.useEffect(()=>{const g=t?.user?.id,y=r||s?rlt:nlt;n&&slt({userId:g,productId:y,visitorId:n}).then(x=>{!x||(d({sdk:x}),!g||!pi())||fP()>1||elt({reason:"comet attribution"})})},[r,s,t?.user?.id,n]);const m=f.useCallback(async(g,y)=>{if(!u){i.current.push({name:g,extraArguments:y});return}if(!n)return;const x=await R0e(n,g),v={...y,visitorId:n,eventId:x,isMobile:a};l.current.includes(g)||(u.sdk.event(g,v),l.current.push(g))},[u,n,a]),p=f.useCallback(async({isCometBrowser:g})=>{const y=lD(),x=fP(),v=uue();y&&MJ[y]&&await m(MJ[y]),x&&kJ[x]&&await m(kJ[x]),g&&v===1&&tlt({eventName:"activated",reason:"comet attribution"})},[m]),h=f.useCallback(async g=>{await m("user sign in",{isNewUser:g}),t?.user?.id&&u&&u.sdk.login(t.user.id)},[t?.user?.id,u,m]);return f.useEffect(()=>{u&&i.current.length>0&&(i.current.filter((y,x,v)=>x===v.findIndex(b=>b.name===y.name)).forEach(({name:y,extraArguments:x})=>{m(y,x)}),i.current=[])},[u,m]),f.useEffect(()=>{if(c?.get(Ic)&&c?.get(qY)){const g=c?.get(qY)==="true";h(g),g?(m("new user sign in"),t?.user?.id&&u?.sdk.setMatchID(t.user.id)):m("existing user sign in"),pi()&&m("comet user sign in")}},[c,h,m,t?.user?.id,u?.sdk]),o.jsx(I0e.Provider,{value:f.useMemo(()=>({sendQueryEventSingular:()=>m("query submitted"),maybeSendNthQueryEventSingular:p,sendSubscribedEventSingular:()=>m("user subscribed"),sendSubscribedPayingEventSingular:()=>m("user subscribed paying"),sendAppDownloadClickedEventSingular:g=>m("app download button clicked",{origin:g}),sendResurrectedActivationEventSingular:()=>m("resurrected activated"),sendCometDownloadPageLoadEventSingular:g=>m(`${g} page loaded`),sendCometDownloadPageSignInEventSingular:g=>m(`${g} page signed in`),sendCometDownloadedEventSingular:()=>m("download-comet comet downloaded"),sendCometDownloadButtonClickedEventSingular:g=>m(`${g} download button clicked`),sendCometWaitlistButtonClickedEventSingular:g=>m(`${g} waitlist button clicked`),sendCometDownloadLinkEmailEventSingular:g=>m(`${g} send download link`),sendSubscribedMaxEventSingular:()=>m("user subscribed max")}),[m,p]),children:e})},QB=()=>{const e=f.useContext(I0e);if(!e)throw new Error("useSingularAttribution must be used within SingularAttributionContext");return e},ilt=(e,t)=>{const{fetchVariation:n}=r5({flag:"comet-download-success-message",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id",skip:!0});return f.useMemo(()=>({fetchVariation:n}),[n])};var olt={};const llt=e=>{e=e??"mac_arm64";const t={channel:"stable",platform:e};e.includes("win")&&(t.mini="1");const n=new URLSearchParams(t),r=new URL(olt.NEXT_PUBLIC_COMET_DOWNLOAD_URL??"https://www.perplexity.ai/rest/browser/download");return r.search=n.toString(),r},mun=async({reason:e})=>(await ae.POST("/rest/browser/invites/status",e,{params:{},timeoutMs:en.MEDIUM,numRetries:1})).data,P0e=async({reason:e})=>(await ae.GET("/rest/browser/invites/",e,{headers:{"content-type":"application/json"},timeoutMs:Fe()})).data??null,TJ=async({reason:e})=>(await ae.POST("/rest/browser/invites/create",e,{timeoutMs:en.NONE,numRetries:1})).data,clt=async({reason:e,inviteCode:t,email:n})=>(await ae.POST("/rest/browser/invites/send",e,{body:{recipient_email:n,invite_code:t},timeoutMs:en.MEDIUM,numRetries:1})).data,ult=({isUnsupportedDevice:e,isWindows:t})=>{const{trackEvent:n}=je(),{sendCometDownloadedEventSingular:r,sendCometDownloadButtonClickedEventSingular:s}=QB(),{fetchVariation:a}=ilt("control"),{deprecatedOpenToast:i}=Mn(),{openModal:l}=wt(),{$t:c}=Z(),u=f.useCallback(async(h,g)=>{const y=h?"toast":await a();y==="toast"?i(c({defaultMessage:"Comet download started. Look for Comet in Downloads.",id:"cWKaRwkkE8"}),"success",5):y==="instructions-modal"&&l("cometDownloadInstructionsModal",{requestedPlatform:g})},[a,i,c,l]),d=f.useCallback(async(h,{upsellName:g,partnerCode:y,useToastForSuccess:x})=>{u(x,h),n("click download comet",{requestedPlatform:h,upsellName:g,installPartner:y}),r(),setTimeout(()=>ml(llt(h).href,"Comet download"),250)},[n,r,u]),m=f.useCallback(({upsellName:h,partnerCode:g,useToastForSuccess:y})=>{if(!e)return t?d("win_x64",{upsellName:h,partnerCode:g,useToastForSuccess:y}):d("mac_arm64",{upsellName:h,partnerCode:g,useToastForSuccess:y})},[d,t,e]),p=f.useCallback(({upsellName:h,partnerCode:g})=>{s("download-comet"),m({upsellName:h,partnerCode:g})},[s,m]);return{handleDownload:m,handleDownloadClick:p}},dlt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"enterprise-max-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function O0e(){const{variation:e,loading:t}=dlt(!1);return{isEnterpriseMaxUiEnabled:e,isEnterpriseMaxUiEnabledLoading:t}}const co=()=>{const e=lt(),{isMax:t,isEnterprisePro:n,isEnterpriseMax:r}=Et(),{openModal:s}=wt(),{isEnterpriseMaxUiEnabled:a,isEnterpriseMaxUiEnabledLoading:i}=O0e();return f.useCallback(c=>{if(!e){ne.warn("User is not logged in, skipping paywall upsell",c);return}if(t){ne.warn("User is on Max tier, skipping paywall upsell",c);return}if(n&&!a&&!i){ne.warn("User is on Enterprise Pro tier and Enterprise Max is not yet enabled, skipping paywall upsell",c);return}if(r){ne.warn("User is on Enterprise Max tier, skipping paywall upsell",c);return}s("pricingModal",c)},[e,s,t,a,n,r,i])};var NJ;(function(e){e.SPRING_2025="SPRING_2025",e.GIVE_1_MONTH_FREE="GIVE_1MO_GET_1MO"})(NJ||(NJ={}));const flt={EMAIL_ALREADY_REGISTERED:"Promo not valid for existing users",INVALID_REFERRAL_CODE:"Invalid referral code",UNKNOWN:"An unknown error occurred",EMAIL_RATE_LIMIT_EXCEEDED:"Too many emails sent to this address"},pun=async({reason:e})=>{try{const{data:t,error:n}=await ae.GET("/rest/academic/student-partner-config",e,{timeoutMs:Fe()});if(n)throw new Error("Failed to get student partner config");return{countryOffers:t.country_offers||{},countryNames:t.country_names||{},defaultMonths:t.default_months||1}}catch(t){return ne.error("Failed to get student partner config",t),{countryOffers:{BR:3,PH:3,MY:1,ID:1},countryNames:{BR:"Brazil",PH:"Philippines",MY:"Malaysia",ID:"Indonesia"},defaultMonths:1}}},mlt=async({email:e,reason:t})=>{try{const{data:n,error:r}=await ae.GET("/rest/referrals/validate-email",t,{params:{query:{email:e}},timeoutMs:Fe()});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to validate referral email",cause:r});return{valid:n.is_valid,error:!1}}catch(n){return ne.error(n),{valid:!1,error:!0}}},hun=async({referralCode:e,reason:t})=>{try{const{data:n,error:r}=await ae.GET("/rest/referrals/get-user-from-referral-code",t,{params:{query:{referral_code:e}}});if(r)throw new Error("Failed to get user from referral code");return n}catch(n){return ne.error("Failed to get user from referral code",n),{email:null,is_student:null,is_active:!1}}},gun=async({toEmail:e,referralType:t,reason:n})=>{try{const{error:r}=await ae.POST("/rest/referrals/send-referral-email",n,{body:{to_email:e,referral_type:t},timeoutMs:8e4});return r?{success:!1,error:r.detail?.[0]?.msg||r.detail}:{success:!0,error:null}}catch(r){return ne.error("Failed to send referral email",r),{success:!1,error:flt.UNKNOWN}}},yun=async({headers:e,email:t,reason:n})=>{const{data:r,error:s}=await ae.GET("/rest/referrals/",n,{headers:e,params:{query:{email:t}}});if(s)throw new Error("Failed to get user referral status");return r},plt=async({verificationId:e,reason:t})=>{try{if(!e)throw new Error("Verification ID is required");const{data:n,error:r}=await ae.GET("/rest/referrals/student-reward-details",t,{params:{query:{verification_id:e}},timeoutMs:Fe()});if(r)throw new Error("Failed to get student reward details");return n}catch(n){return ne.error("Failed to get student reward details",n),{months_awarded:1,reward_type:"default",organization:null,country_label:null}}},c5=({email:e,reason:t})=>{const{data:n,isLoading:r}=We({queryKey:["user_student",e,t],queryFn:()=>mlt({email:e,reason:t}),enabled:!!e});return f.useMemo(()=>({isStudent:n?.valid??null,loading:r}),[n?.valid,r])},hlt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"maybe-student-domains-regex",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},glt=async({reason:e,headers:t})=>{try{return(await ae.GET("/rest/landing-page/academic/tile-data",e,{timeoutMs:en.MEDIUM,headers:t})).data}catch(n){return ne.error("Failed to get academic tile data",n),null}},ylt=async({reason:e,headers:t})=>{try{return(await ae.GET("/rest/landing-page/academic/primer-queries",e,{timeoutMs:en.MEDIUM,headers:t})).data}catch(n){return ne.error("Failed to get academic primer queries",n),null}},xun=({reason:e})=>We({queryKey:_tt(),queryFn:()=>glt({reason:e})}),vun=({reason:e})=>We({queryKey:wtt(),queryFn:()=>ylt({reason:e})}),xlt=async({reason:e,headers:t})=>{try{return(await ae.GET("/rest/academic/check-edu-institution",e,{timeoutMs:en.HIGH,headers:t})).data}catch(n){return ne.error("Failed to check institution",n),null}},vlt=({reason:e})=>We({queryKey:Ctt(),queryFn:()=>xlt({reason:e})}),L0e=({reason:e})=>{const{session:t}=Nt(),n=t?.user?.email??"",{isStudent:r,loading:s}=c5({email:n,reason:e}),{variation:a,loading:i}=hlt(!1),{data:l,isLoading:c}=vlt({reason:e});return f.useMemo(()=>c||i||s?{isLoading:!0,signals:{isVerifiedStudent:null,isPossibleStudentByEmail:null,isPossibleStudentByIP:null}}:{isLoading:!1,signals:{isVerifiedStudent:!!r,isPossibleStudentByEmail:!!a,isPossibleStudentByIP:!!l?.institution}},[c,i,s,a,r,l?.institution])},bun=["onboarding-pro","onboarding-mobile"],blt=({searchParams:e,cleanRedirect:t})=>{if(!e)return null;const r=e.get("redirect");let s=null;try{s=r&&new URL(r).searchParams.get(Ic)}catch{return null}return s?s===De.GROW_COMET_STUDENTS_COUNTRY?De.GROW_COMET_STUDENTS_COUNTRY:s===De.GROW_COMET_STUDENTS?De.GROW_COMET_STUDENTS:null:null},_lt=()=>{const e=Ut();return f.useMemo(()=>{const t=e?.get(Ic),n=!!blt({searchParams:e,cleanRedirect:!1}),r=t===De.STUDENT_REFERRAL_LANDING_PAGE,s=t===De.STUDENT_LANDING_PAGE,a=t===De.GROW_COMET_STUDENTS_COUNTRY;return{loginSource:t,isFromStudentCometGrowth:n,isFromStudentCometGrowthCountry:a,isFromStudentReferral:r,isFromStudentLanding:s,isFromStudentFlow:n||r||s||a}},[e])},wlt={currentStep:null,currentIndex:0,steps:[],handleNext:()=>null,handleComplete:()=>null,insertStep:()=>null,insertStepAndNavigate:()=>null,experimentVariationsMeta:{},setCurrentIndex:()=>null},D0e=Yt("MultiStepContext",wlt),_un=({steps:e,experimentVariationsMeta:t,handleFinish:n,initialIndex:r=0,children:s})=>{const[a,i]=f.useState(r),[l,c]=f.useState(e),[u,d]=f.useState(null),[m,p]=f.useState(t),{trackEventTyped:h}=je();f.useEffect(()=>{c(e)},[e]),f.useEffect(()=>{p(t)},[t]),f.useEffect(()=>{l[a]!==void 0&&h("step visited",{step:l[a],experimentVariationsMeta:m})},[a,m,l,h]),f.useEffect(()=>{if(u!==null){if(i(u),d(null),l[a]===void 0||l[u]===void 0)return;h("step transition",{sourceStep:l[a],destinationStep:l[u],isFinish:!1,experimentVariationsMeta:m})}},[a,m,u,l,h]);const g=(_,w)=>{const C=[...l];C.splice(w,0,_),c(C)},y=(_,w)=>{g(_,w),d(w)},x=()=>{if(l.length)if(a===l.length-1){if(n?.(),l[a]===void 0)return;h("step transition",{sourceStep:l[a],isFinish:!0,experimentVariationsMeta:m})}else{if(i(a+1),l[a]===void 0||l[a+1]===void 0)return;h("step transition",{sourceStep:l[a],destinationStep:l[a+1],isFinish:!1,experimentVariationsMeta:m})}},v=()=>{n?.(),l[a]!==void 0&&h("step transition",{sourceStep:l[a],isFinish:!0,experimentVariationsMeta:m})},b=f.useMemo(()=>l[a],[a,l]);return o.jsx(D0e.Provider,{value:{currentStep:b,insertStep:g,insertStepAndNavigate:y,handleNext:x,handleComplete:v,currentIndex:a,steps:l,setCurrentIndex:i,experimentVariationsMeta:m},children:s})};function Clt(){const e=f.useContext(D0e);if(!e)throw new Error("useMultiStep must be used within MultiStepContext");return e}const Slt=(e,t)=>t.isFromStudentCometGrowthCountry?De.GROW_COMET_STUDENTS_COUNTRY:t.isFromStudentCometGrowth?De.GROW_COMET_STUDENTS:t.isFromStudentReferral?De.STUDENT_REFERRAL_LANDING_PAGE:t.isFromStudentLanding?De.STUDENT_LANDING_PAGE:e,Elt=({origin:e,customCallbacks:t})=>{const{$t:n}=Z(),r=lt(),{trackEvent:s}=je(),{openVisitorLoginUpsell:a}=gr({enabled:!r}),{insertStepAndNavigate:i,currentIndex:l,handleComplete:c}=Clt(),{openModal:u}=wt(),d=_lt(),{signals:m,isLoading:p}=L0e({reason:"combined_paywall"}),h=f.useCallback(v=>{if(v){if(d.isFromStudentCometGrowth){c();return}typeof window<"u"&&window.location.pathname==="/onboarding"?(Xs.setItem("student_verification_id",v),i("onboarding-student-referrals",l+1)):setTimeout(()=>{u("studentReferrals",{verificationId:v})},150)}},[i,l,u,d,c]),g=f.useCallback(v=>{s("sheerid form redirect",{verificationLocationSource:Slt(e,d),verificationRoleType:v}),u("sheerIdModal",{type:v,onSuccess:t?.onSuccess??h,onClose:t?.onClose})},[h,e,s,d,u,t]),y=f.useCallback(v=>{if(!r){a({title:n({defaultMessage:"Sign in to unlock Education Pro",id:"UNeU1Y4Zdu"}),origin:e,disallowedMethods:["apple"]});return}g(v)},[r,a,g,n,e]),x=d.isFromStudentFlow||!!m.isVerifiedStudent||!!m.isPossibleStudentByEmail||!!m.isPossibleStudentByIP;return{isLoading:!!p,isVerifiedStudent:!!m.isVerifiedStudent,handleStudentTierClick:y,handleVerificationSuccess:h,shouldDefaultToStudent:x,signals:m}},Mlt=(e,t)=>{const{value:n,loading:r}=Gxe({flag:"comet-mobile-classifier-timeout",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},klt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"comet-sidecar-thread-per-tab",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Tlt="npclhjbddhklpbnacpjloidibaggcgon",Nlt="entropy-agent-extension-main";function jJ({onMessage:e,extensionId:t,name:n}){let r,s;const a=()=>{r&&clearTimeout(r),r=setTimeout(c,1e3)},i=()=>{ne.warn("Disconnected. Attempting to reconnect...",{extensionId:t}),a()},l=()=>{if(s){s.onMessage.removeListener(e),s.onDisconnect.removeListener(i),clearTimeout(r);try{s.disconnect()}catch{}s=void 0}};function c(){if(l(),typeof chrome>"u"||!chrome.runtime){pi()&&(a(),ne.error("Comet browser is missing chrome.runtime"));return}try{s=chrome.runtime.connect(t,{name:n}),s.onMessage.addListener(e),s.onDisconnect.addListener(i)}catch(u){a(),ne.error("Failed to connect to extension",{err:u,extensionId:t})}}return pi()&&(c(),cu("web.frontend.comet_extension_connected",{extensionId:t,startTime:performance.timeOrigin,duration:performance.now()})),{sendMessage:u=>(!s&&pi()&&ne.warn("Attempting to send message while main port is not connected",{extensionId:t}),jlt(t,u)),sendMessageToPort:u=>{if(!pi())return()=>{};s||ne.warn("Attempting to send message to port while main port is not connected",{extensionId:t});const d=chrome.runtime.connect(t,{name:`${n}_${Ir()}`});return d.postMessage(u),()=>{try{d.disconnect()}catch{}}}}}async function jlt(e,t){return new Promise((n,r)=>{if(!pi()){r(new cg("INVALID_BROWSER_ERROR"));return}if(typeof chrome>"u"||!chrome.runtime){r(new cg("MISSING_RUNTIME_ERROR"));return}chrome.runtime.sendMessage(e,t,s=>{if(chrome.runtime.lastError){r(new cg("RUNTIME_LAST_ERROR",{message:chrome.runtime.lastError.message,cause:chrome.runtime.lastError,details:{extensionId:e}}));return}n(s)})})}function Alt(){const e="node";try{return{html:t(document.documentElement).innerHTML.trim(),url:window.location.href}}catch(h){return{html:"",url:window.location.href,error:h instanceof Error?h.message:"Unknown error while getting HTML"}}function t(h=document.body){const g=[h],y=n(h);if(!y)return console.error("Failed to process DOM. Fallback to original DOM"),h;const x=[y];for(;g.length>0;){const v=g.pop(),b=x.pop();if(!v||!b)break;v.childNodes.forEach(_=>{const w=n(_);w!==null&&(b.appendChild(w),x.push(w),g.push(_))})}return y}function n(h){if(!c(h))return null;const g=h.cloneNode();if(d(h)){if(l(h)){if(!h.hasAttribute(e)){const y=s();h.setAttribute(e,y),g.setAttribute(e,y)}r(h,g)}return a(g)}return g}function r(h,g){const y=["value"],x=["checked","disabled","hidden","readonly","required","selected"];for(const v of y)typeof h[v]<"u"&&g.setAttribute(v,h[v]);for(const v of x)typeof h[v]<"u"&&(h[v]?g.setAttribute(v,""):g.removeAttribute(v))}function s(){return globalThis.__idCounter||(globalThis.__idCounter=0),`${globalThis.__idCounter++}`}function a(h){const g=h.getAttributeNames();for(const y of g){if(y=="href"){const x=h.getAttribute(y)||"";x.startsWith("http:")||x.startsWith("https:")||h.removeAttribute(y);continue}if(y==="name"&&h.getAttribute(y).length>128){h.removeAttribute(y);continue}i(y)||h.removeAttribute(y)}return h}function i(h){return["alt","aria-checked","aria-description","aria-disabled","aria-expanded","aria-hidden","aria-label","aria-readonly","aria-required","aria-role","aria-selected","checked","content","default","disabled","name","placeholder","readonly","required","role","selected","title","type","value",e].includes(h)}function l(h){const g=["A","BUTTON","DETAILS","EMBED","INPUT","MENU","MENUITEM","OBJECT","SELECT","TEXTAREA","SUMMARY"],y=["button","menu","menuitem","link","checkbox","radio","slider","tab","tabpanel","textbox","combobox","grid","listbox","option","progressbar","scrollbar","searchbox","switch","tree","treeitem","spinbutton","tooltip"],x=["menu","menuitem","button"],v=["onclick","tabindex","autofocus"],b=h.tagName,_=h.getAttribute("role"),w=h.getAttribute("aria-role");return g.includes(b)||v.some(C=>h.hasAttribute(C))||_&&y.includes(_)||w&&x.includes(w)}function c(h){return d(h)?m(h)?!0:!p(h):u(h)}function u(h){return h.nodeType===Node.TEXT_NODE&&!!h.textContent?.trim()}function d(h){return h.nodeType===Node.ELEMENT_NODE}function m(h){const g=["HEAD","TITLE"],y=["description"];return g.includes(h.tagName)||h.tagName==="META"&&y.some(x=>h.getAttribute("name")===x)}function p(h){return h.hidden||h.getAttribute("aria-hidden")==="true"?!0:!(h.checkVisibility({contentVisibilityAuto:!0,opacityProperty:!0,visibilityProperty:!0})||h.computedStyleMap().get("display").value==="contents")}}function AJ({selector:e,value:t,submit:n}){const r=document.querySelector(e);if(!r)return{success:!1,reason:"not found"};if(r.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),r instanceof HTMLElement&&r.focus(),r.tagName==="INPUT"||r.tagName==="TEXTAREA")r.value=t;else if(r instanceof HTMLElement&&r.isContentEditable)r.innerText=t;else return{success:!1,reason:"not editable"};if(r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0})),n){let s=null;"closest"in r&&(s=r.closest("form")),!s&&(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)&&(s=r.form),s?.requestSubmit?.()??s?.submit?.()}return{success:!0}}function Ilt({selector:e}){const t=document.querySelector(e);return t instanceof HTMLElement&&t.offsetParent!==null?(t.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),t.click(),{success:!0,outerHTML:t.outerHTML,text:t.innerText,tag:t.tagName}):{success:!1,reason:t?"invisible":"not found"}}function Rlt({scrollDirection:e}){const t=window.innerHeight,n=Math.round(t*4);return window.scrollBy({top:e===i8.DOWN?n:-n,left:0,behavior:"smooth"}),{scrolledBy:e===i8.DOWN?n:-n,scrollTop:window.scrollY}}function Plt({url:e}){window.location.href=e}const Olt=async(e,t)=>new Dlt(e,t).start();class Llt{bridge;constructor(t){this.bridge=t}async GetPageState(t){const n=t.tab_id,r=await this.bridge.tabs_get({id:n}),{result:s}=await this.bridge.agent_execute_js({id:n,js:`(${Alt.toString()})()`});return console.log("[agent] GetPageState content:",{result:s}),ne.log("[agent] GetPageState content:",{result:s}),{page_state:{html:s.html,title:r.tab?.title??"",url:r.tab?.url??"",screenshot:void 0}}}async RunActions(t){console.log("[agent] RunActions request:",t),ne.log("[agent] RunActions request:",t);for(const n of t.actions){const r=t.tab_id;if(n.type===nh.CLICK){const s=await this.executeJs(r,Ilt,{selector:n.selector??""});console.log("[agent] Click action result:",s),ne.log("[agent] Click action result:",s)}else n.type===nh.WAIT?await new Promise(s=>setTimeout(s,n.duration||1e3)):n.type===nh.SCROLL_PAGE?await this.executeJs(r,Rlt,{scrollDirection:n.scroll_direction??i8.DOWN}):n.type===nh.NAVIGATE?await this.executeJs(r,Plt,{url:n.value??""}):n.type===nh.FILL?await this.executeJs(r,AJ,{selector:n.selector??"",value:n.value??"",submit:!1}):n.type===nh.SEARCH?await this.executeJs(r,AJ,{selector:n.selector??"",value:n.value??"",submit:!0}):(console.warn("[agent] Unknown action type:",n.type),ne.warn("[agent] Unknown action type:",n.type));await this.bridge.agent_wait_idle({id:r}),await new Promise(s=>setTimeout(s,500))}return this.GetPageState({tab_id:t.tab_id,capture_screenshot:t.capture_screenshot})}async ShowMessage(t){return console.log("[agent] ShowMessage request:",t),ne.log("[agent] ShowMessage request:",t),{}}async ReportTaskProgress(t){return console.log("[agent] ReportTaskProgress request:",t),ne.log("[agent] ReportTaskProgress request:",t),{}}async ReportTaskComplete(t){return console.log("[agent] ReportTaskComplete request:",t),ne.log("[agent] ReportTaskComplete request:",t),{}}async executeJs(t,n,...r){return(await this.bridge.agent_execute_js({id:t,js:`(${n.toString()})(${r.map(a=>JSON.stringify(a)).join(",")})`})).result}}class Dlt{payload;bridge;browserService;socket;constructor(t,n){this.payload=t,this.bridge=n,this.browserService=new Llt(n)}async start(){ne.log("[agent] Starting agent task:",this.payload),console.log("[agent] Starting agent task:",this.payload);const t=performance.now();let n=()=>{},r=()=>{};const s=new Promise((c,u)=>{n=c,r=u}),a=this.payload.base_url+"/agent";this.socket=new WebSocket(a),this.socket.onopen=n,this.socket.onerror=r,this.socket.onmessage=this.handleRpcMessage.bind(this),await s;const{tab:i}=await this.bridge.tabs_create({url:this.payload.start_url,hidden:!1,agent:!0});await this.bridge.agent_wait_idle({id:i.id});const l=await this.browserService.GetPageState({tab_id:i.id,capture_screenshot:!1});return this.socket.send(JSON.stringify({start_agent:{page_state:l.page_state,tab_id:i.id,task:this.payload.task,task_uuid:this.payload.uuid,extra_headers:this.payload.extra_headers,extension_version:"0.0.1",vision:this.payload.vision,url:this.payload.start_url,client_start_time_ms:Math.round(performance.now()-t),attachments:this.payload.attachments,supported_features:[]}})),()=>{this.socket?.close(),this.bridge.tabs_close({id:i.id})}}async handleRpcMessage(t){const n=JSON.parse(t.data),r=n.request_id,s=a=>{this.socket?.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify({rpc_response:a})):(console.warn("[agent] Socket is not open, cannot send response:",a),ne.warn("[agent] Socket is not open, cannot send response:",a))};try{if(!n.method||!(n.method in this.browserService))throw ne.error("[agent] Unknown method:",n.method),console.error("[agent] Unknown method:",n.method),new Error(`Unknown method: ${n.method}`);const a=n.request?JSON.parse(n.request):void 0,i=n.method,l=await this.browserService[i]({...a});s({request_id:r,response:JSON.stringify(l)})}catch(a){const i=JSON.stringify({status:"error",error:`${a}`});s({request_id:r,response:i}),ne.error("[agent] Error handling RPC message:",a,n),console.error("[agent] Error handling RPC message:",a,n)}}}class Flt{requests=new Map;bridge;constructor(){this.bridge=new Proxy({},{get:(t,n)=>r=>{const s=Ir(),a={request_id:s,[n]:r??{}};return new Promise((i,l)=>{this.requests.set(s,c=>{"error"in c?l(new Error(String(c.error))):i(c)}),window.cometBridge?.postMessage(JSON.stringify(a))})}}),this.startListenMessages()}startListenMessages(){window.cometBridge&&(window.cometBridge.onmessage=t=>{const n=t.data;if(n)try{const r=JSON.parse(n),s=this.requests.get(r.request_id);s?(this.requests.delete(r.request_id),s(r)):(console.warn("No callback found for requestId",r.request_id,r),ne.warn("No callback found for requestId",r.request_id,r))}catch(r){console.warn("Failed to parse bridge response",n,r),ne.warn("Failed to parse bridge response",n,r)}})}}class IJ{bridge;constructor(){this.bridge=new Proxy({},{get:(t,n)=>async r=>{const a={request_id:Ir(),[n]:r??{}},i=await window.webkit?.messageHandlers?.cometBridge?.postMessage(JSON.stringify(a));if(!i)throw new Error("No response from cometBridge");return JSON.parse(i)}})}}const sv="mcp_tools_settings_v1";function Ult(){return Po((e,t)=>({platformInfo:void 0,sidecarSourceTab:{url:"/",title:"",tabId:-1,secondaryTab:null},screenshotToolEnabled:!0,sidecarUrlById:new Map,tasksState:{},navigationResults:{},classifierResults:{},omniboxInput:{},navigationMeta:{},taskScreenshots:{},userSelection:void 0,mcpStdioServers:void 0,mcpTools:void 0,mcpDisabledServers:void 0,installedDxts:void 0,taskTabs:void 0,mcpToolsSettings:void 0,pendingTasks:new Map,actions:{setPlatformInfo:n=>{e({platformInfo:n})},setSidecarUrlById:(n,r,s)=>{const a=t().sidecarUrlById;a.set(n,{url:r,updatedAt:s??Date.now()}),e({sidecarUrlById:a})},deleteSidecarUrlById:n=>{const r=t().sidecarUrlById;r.delete(n),e({sidecarUrlById:r})},setSourceTab:n=>{let r=!0;try{const s=new URL(n.url);r=!((s.protocol==="chrome:"||s.protocol==="comet:")&&s.hostname!=="newtab")}catch{}e({sidecarSourceTab:n,screenshotToolEnabled:r})},setLastOmniboxInput:(n,r)=>{e(s=>({omniboxInput:{...s.omniboxInput,[n]:r}}))},addNavigationResults:(n,{results:r,classifierResult:s,...a})=>{r?.length&&e(i=>{const l={navigationResults:{...i.navigationResults,[n]:r}};return s&&(l.classifierResults={...i.classifierResults,[n]:s}),a&&!i.navigationMeta[n]&&(l.navigationMeta={...i.navigationMeta,[n]:a}),l})},setTaskScreenshot:(n,r)=>{e(s=>({taskScreenshots:{...s.taskScreenshots,[n]:r}}))},setTaskState:(n,r)=>{e(s=>{const a={...s.tasksState};return r===void 0?delete a[n]:a[n]={is_paused:r},{tasksState:a}})},setUserSelection:n=>{e({userSelection:n})},clearUserSelection:()=>{e({userSelection:void 0})},setMcpStdioServers:n=>{e({mcpStdioServers:n})},setMcpTools:(n,r)=>{e(s=>({mcpTools:{...s.mcpTools,[n]:r}}))},removeMcpTools:n=>{e(r=>{const s={...r.mcpTools};return delete s[n],{mcpTools:s}})},setMcpDisabledServers:n=>{e({mcpDisabledServers:n}),Oe.setItem("mcp_disabled_servers_v1",JSON.stringify(Array.from(n)))},setMcpToolsSettings:n=>{e({mcpToolsSettings:n}),Oe.setItem(sv,JSON.stringify(n))},setMcpToolEnabled:(n,r,s)=>{e(a=>{const i=a.mcpToolsSettings||{},l={...i[n]||{}},c=l[r]??{enabled:!0,executePermissions:"always-ask"},u={...l,[r]:{...c,enabled:s}},d={...i,[n]:u};return Oe.setItem(sv,JSON.stringify(d)),{mcpToolsSettings:d}})},setMcpToolExecutePermissions:(n,r,s)=>{e(a=>{const i=a.mcpToolsSettings||{},l={...i[n]||{}},c=l[r]??{enabled:!0,executePermissions:"always-ask"},u={...l,[r]:{...c,executePermissions:s}},d={...i,[n]:u};return Oe.setItem(sv,JSON.stringify(d)),{mcpToolsSettings:d}})},renameMcpServerInToolsSettings:(n,r)=>{e(s=>{const a=s.mcpToolsSettings||{};if(!a[n]||n===r)return s;const i={...a},l=a[n];return i[r]={...l},delete i[n],Oe.setItem(sv,JSON.stringify(i)),{mcpToolsSettings:i}})},setInstalledDxts:n=>{e({installedDxts:n})},setTaskTabs:n=>{e({taskTabs:n})},setPendingTask:(n,r)=>{e(s=>{const a=new Map(s.pendingTasks);return a.set(n,r),{pendingTasks:a}})},deletePendingTask:n=>{e(r=>{const s=new Map(r.pendingTasks);return s.delete(n),{pendingTasks:s}})},getPendingTask:n=>t().pendingTasks.get(n)}}))}const Blt="mcjlamohcooanphmebaiigheeeoplihb",Vlt="streamId",$lt=Object.freeze([]);class Wlt{tools;mobileProxy=new IJ;isTestDebugMode=!1;platform="web";store=Ult();mainExtension;agentExtension;taskTeardowns=new Map;emitter=Tge();pendingServerRename;classifierApiTimeoutMs=KF;constructor(){const t=oo();t?.android_version&&(this.platform="android"),t?.ios_version&&(this.platform="ios"),this.mainExtension=jJ({onMessage:this.handleMessage,extensionId:Blt,name:"entropy_client_context"}),this.agentExtension=jJ({onMessage:this.handleAgentExtensionMessage,extensionId:Tlt,name:Nlt}),this.tools=Hlt(this.agentExtension),this.platform==="web"?this.mainExtension.sendMessage({type:"INIT"}).then(n=>{n&&(this.isTestDebugMode=!!n.isTestDebugMode)},n=>{if(pi())throw n}):this.mobileProxy=this.platform==="android"?new Flt:new IJ,bqe()}getStore(){return this.store}setClassifierApiTimeoutMs(t){this.classifierApiTimeoutMs=t}async openNewTab(t){const n=new URL(t);n.searchParams.delete("erp"),n.pathname=n.pathname.replace("/sidecar",""),await this.openTab({url:n.toString(),request_id:"openNewTab",key:"openNewTab"})}_getNavigationResults(t){return this.store.getState().navigationResults[t]??$lt}async closeSideCar(){return this.send({type:"HIDE_SIDECAR"})}async openTab(t){if(this.platform!=="web"){const s=(await this.mobileProxy?.bridge.tabs_create({url:t.url,hidden:!1})).tab;return{is_success:!0,_metadata:{time:1},result:{tab_id:s.id,url:s.url,title:s.title,last_accessed:s.last_accessed}}}return{is_success:!0,result:(await this.tools.OpenTab({key:t.key??"unknown",request_id:t.request_id??"unknown",url:t.url,tab_id:t.tabId})).tab}}async fetchMobileSearchResults(t,n){const[r,s]=await Promise.all([this.mobileProxy.bridge.fetch_navigation_search_results({query:t,stream_id:n}),Cqe(t,this.classifierApiTimeoutMs).catch(a=>(ne.error("Classifier API call failed, using defaults",{error:a,query:t,streamId:n}),wqe))]);return{...r.nav_search_response,classifierResult:s}}async fetchNavigationResults(t,n){if(this.platform==="web"){const r=await this.send({type:"NAV_SEARCH",payload:{query:t,streamId:n}});if(!r.is_success)throw new Error("Failed to inject search results");return r}else return{...await this.fetchMobileSearchResults(t,n),_metadata:void 0}}async injectSearchResults(t,n,r={}){try{const s=rc(),a={streamId:n,...r};jo("web.frontend.comet_navigation_run_inject",a);const i=await this.fetchNavigationResults(t,n);if(this.store.getState().actions.addNavigationResults(n,i),this.platform!=="web"&&i.results?.length){const m=this.store.getState();Lpe({clientPayloadCacheKey:`nav-${n}`,cometBrowser:this,reason:"mobile_search_injection",navigationResults:i.results,maxChars:5e4,includeSidecar:!1,attachedTabs:[],cometState:m}).catch(p=>{ne.error("Failed to save mobile navigation results",{streamId:n,error:p})})}const c={type:i.type??"unknown",...a};s.addTiming("web.frontend.comet_navigation_search_results",c);const u=s.getAbsoluteStartTime(),d={...c,startTime:u};i.searchTime&&cu("web.frontend.comet_navigation_search_time",{duration:i.searchTime,...d}),i.classifyTime&&cu("web.frontend.comet_navigation_classify_time",{duration:i.classifyTime,...d}),i.networkingTime&&cu("web.frontend.comet_navigation_networking_time",{duration:i.networkingTime,...d}),this.platform==="web"&&i._metadata?.time&&cu("web.frontend.comet_navigation_extension_processing",{duration:i._metadata.time,...d})}catch(s){ne.error(new cg("NAV_RESULTS_INJECTION_FAILED",{details:{streamId:n},cause:s}))}}async getIsCometDefaultBrowser(t){try{const n=await this.send({type:"GET_IS_DEFAULT_BROWSER",key:t});return n.is_success?n.isDefault:null}catch{return null}}async setCometAsDefaultBrowser(t){return this.send({type:"SET_AS_DEFAULT_BROWSER",key:t})}async getDidSkipCookieImportOnboarding(t){const r=(await this.send({type:"GET_ONBOARDING_IMPORT_STATUS",key:t})).importStatus==="NOT_IMPORTED";return ne.info("[getDidSkipCookieImportOnboarding]",r),r}subscribeCometNavigate(t){const n=r=>{const s=new URL(r.detail.url);if(delete window.pplxNavIntentEvent,this.store.getState().actions.clearUserSelection(),jo("comet_navigate"),s.pathname==="/search"&&s.searchParams.has("q")&&(s.pathname="/search/new"),s.pathname==="/search/new"){const a=Ir(),i=r.detail.text||"",l=s.searchParams.get("q")??"";s.searchParams.set(Vlt,a),this.injectSearchResults(l,a,{omnisearch:!0}),this.store.getState().actions.setLastOmniboxInput(a,i)}t({url:s})};return window.pplxNavIntentEvent&&n(window.pplxNavIntentEvent),document.addEventListener("comet-navigate",n),()=>{document.removeEventListener("comet-navigate",n)}}subscribeToCometQuery(t){const n=r=>{const s=r.detail.query;delete window.pplxCometQuery,t(s,{source:r.detail.source})};return window.pplxCometQuery&&n(window.pplxCometQuery),document.addEventListener("comet-query",n),()=>{document.removeEventListener("comet-query",n)}}getLastOmniboxInput(t){return this.store.getState().omniboxInput[t]}async searchTabs(t){if(this.platform!=="web"){const{tabs:r}=await this.mobileProxy.bridge.tabs_query();return{is_success:!0,tabs:r.map(s=>({tabId:s.id,title:s.title??"",url:s.url,isCurrent:!1,lastAccess:s.last_accessed??0,snippet:""})),_metadata:{time:1}}}return{is_success:!0,tabs:(await this.tools.SearchBrowser({queries:[],sources:["OPEN_TABS"],key:t,history_max_results:0,open_tabs_max_results:500,closed_tabs_max_results:0,request_id:t})).open_tabs_results.map(r=>({...r,tabId:r.tab_id,lastAccess:r.last_accessed}))}}async ungroupTabs(t,n,r){return{is_success:!0,tabIds:(await this.tools.UngroupTabs({group_ids:t.groupIds,tab_ids:t.tabIds,key:n,request_id:r})).ungrouped_tabs.map(a=>({id:a.tab_id,error:a.error})),groupIds:t.groupIds.map(a=>({id:a}))}}showNotification(){this.send({type:"SHOW_NOTIFICATION"}).catch(()=>{})}sendThreadStatusToMobile(t){const{status:n,streamId:r,text:s}=t;this.mobileProxy.bridge.thread_status({type:n,text:s,stream_id:r}).catch(a=>{ne.error("Failed to send thread status to mobile bridge",a)})}sendVoiceStatusToMobile(t){const{status:n,text:r}=t;this.mobileProxy.bridge.voice_status({type:n,text:r}).catch(s=>{ne.error("Failed to send voice status to mobile bridge",s)})}subscribeToMobileCommands(t){const n=r=>{t?t(r.detail):r.detail.cmd==="stop"&&r.detail.subject==="thread"?this.emitter.emit("BROWSER_TASK_STOP"):ne.warn("[comet-mobile] Unknown mobile command",r.detail.cmd)};return document.addEventListener("comet-mobile-cmd",n),()=>{document.removeEventListener("comet-mobile-cmd",n)}}setTabProgress(t){this.send({type:"SET_TAB_PROGRESS",payload:t}).catch(()=>{})}async searchTabGroups(t,n,r){return{is_success:!0,results:(await this.tools.SearchTabGroups({queries:t.queries,request_id:r,key:n})).tab_groups.map(a=>({...a,color:a.color,tabs:a.tabs.map(i=>({...i,tabId:i.tab_id,isCurrent:i.is_current_tab??!1}))}))}}showFeedbackForm(){this.send({type:"SHOW_FEEDBACK_FORM"}).catch(()=>{})}subscribeScreenshotCaptured(t){return this.emitter.on("SCREENSHOT_CAPTURED",t)}handleAgentExtensionMessage=t=>{try{Qr(t).with({type:"SCREENSHOT_CAPTURED"},async({payload:{screenshot:n}})=>{const s=await(await fetch(n)).blob(),a=new File([s],"screenshot.png",{type:s.type});ne.info("Screenshot captured"),this.emitter.emit("SCREENSHOT_CAPTURED",a)}).with({type:"BROWSER_TASK_PROGRESS_SCREENSHOT"},async({payload:{screenshot:n,taskUuid:r}})=>{this.store.getState().actions.setTaskScreenshot(r,`data:image/png;base64,${n}`)}).with({type:"BROWSER_TASK_PROGRESS"},({payload:{taskUuid:n,progress:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s?.onProgress&&s.onProgress(r),this.emitter.emit("BROWSER_TASK_PROGRESS",n,r)}).with({type:"BROWSER_TASK_COMPLETE"},({payload:{taskUuid:n,result:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s&&(this.store.getState().actions.deletePendingTask(n),s.resolve(r)),this.emitter.emit("BROWSER_TASK_COMPLETE",n,r)}).with({type:"BROWSER_TASK_STOP"},({payload:n})=>{ne.info("Browser task stopped"),this.emitter.emit("BROWSER_TASK_STOP",n.entryId)}).with({type:"BROWSER_TASK_PAUSE_RESUME_FRONTEND"},({payload:n})=>{ne.info("Browser task paused/resumed"),this.store.getState().actions.setTaskState(n.task_uuid,n.is_paused)}).with({type:"AGENT_TASK_FAILURE"},({payload:{taskUuid:n,extraHeaders:r,error:s}})=>{Dpe({clientPayloadCacheKey:n,errorType:s,errorMsg:"Agent task failure."},r,"CometAdapter").catch(a=>{ne.error("Error sending tool failure",a)})}).with({type:"USER_SELECTION_CAPTURED"},({payload:{selection:n}})=>{this.store.getState().actions.setUserSelection(n)}).with({type:"MOVE_THREAD_TO_SIDECAR"},({payload:{url:n,task_tab_ids:r}})=>{const s=new URL(n);s.pathname="/sidecar"+s.pathname;const a=s.toString();r.forEach(i=>{this.store.getState().actions.setSidecarUrlById(Wg(i,void 0),s.pathname)}),document.dispatchEvent(new CustomEvent("comet-navigate",{detail:{url:a,text:""}}))}).with({type:"GET_TASK_TABS"},({payload:{tabs:n}})=>{this.store.getState().actions.setTaskTabs(n)}).with({type:"MCP_STDIO_SERVER_CHANGED"},({payload:{serverName:n,changes:r,server:s}})=>{this.handleMcpStdioServerChanged(n,r,s)}).otherwise(n=>{ne.log("Unknown message type",n)})}catch(n){ne.error("Error parsing entropy message",n)}};async fetchOpenedTabs(){const t=await this.searchTabs("fetch_opened_tabs");return t.is_success?t.tabs.filter(n=>(n.url.startsWith("https://")||n.url.startsWith("file://"))&&!n.isCurrent).sort((n,r)=>r.lastAccess-n.lastAccess):[]}async getPersonalSuggestions(t,n){return this.send({type:"GET_PERSONAL_SUGGESTIONS",payload:t,key:n})}async getTopMostVisitedUrls(t,n){return this.send({type:"GET_TOP_MOST_VISITED_URLS",payload:t,key:n})}getQuickActions(t){return this.send({type:"GET_QUICK_ACTIONS",key:t})}async getInitialHistorySummary(t,n,r){return this.SearchBrowser({queries:[],sources:["HISTORY"],key:"initial-history-summary",request_id:t,start_time:n*24*60*60*1e3,history_max_results:r,open_tabs_max_results:r,closed_tabs_max_results:r})}async getHistorySummary(t,n=[],r=14,s=20){return this.SearchBrowser({queries:n,sources:["HISTORY"],key:t,request_id:"",start_time:r*24*60*60*1e3,history_max_results:s,open_tabs_max_results:s,closed_tabs_max_results:s})}async GetContent(t){return this.platform!=="web"?{contents:(await Promise.allSettled(t.pages.map(async r=>r.id?(await this.mobileProxy.bridge.tabs_get_content({id:r.id})).tab_content:(await this.mobileProxy.bridge.tabs_get_url_content({url:r.url})).tab_content))).map(r=>r.status==="fulfilled"?r.value:void 0).filter(r=>r!==void 0).map(r=>({html:"",id:r.id,url:r.url,title:r.title??"",og_meta:r.og_meta??{},markdown:r.markdown??""}))}:this.tools.GetContent(t)}async GetVisibleTabScreenshot(t){return this.tools.GetVisibleTabScreenshot(t)}async SearchBrowser(t){if(this.platform!=="web"){const n=t.sources.includes("HISTORY")?Promise.allSettled((t.queries.length?t.queries:[""]).map(async i=>await this.mobileProxy.bridge.history_search({text:i,max_results:t.history_max_results,start_time:t.start_time,end_time:t.end_time}))):[],[{tabs:r},s]=await Promise.all([t.sources.includes("OPEN_TABS")?this.mobileProxy.bridge.tabs_query():{tabs:[]},n]),a=s.map(i=>i.status==="fulfilled"?i.value.history_items:[]).flat().map(i=>({title:i.title??"",url:i.url,last_accessed:i.last_visit_time??Date.now(),visit_count:i.visit_count??1}));return{closed_tabs_results:[],history_results:a,open_tabs_results:r.map(i=>({tab_id:i.id,title:i.title??"",url:i.url,last_accessed:i.last_accessed??0}))}}return this.tools.SearchBrowser(t)}async GetSidecarContext(t){return this.tools.GetSidecarContext(t)}async closeTabs(t,n,r){if(this.platform!=="web"){const{tabs:a}=await this.mobileProxy.bridge.tabs_query(),i=t.tabIds??[],l=a.filter(c=>i.includes(c.id));return l.forEach(c=>{this.mobileProxy.bridge.tabs_close({id:c.id})}),{is_success:!0,result:l.map(c=>({id:c.id,url:c.url,title:c.title??""}))}}return{is_success:!0,result:(await this.tools.CloseTabs({tab_ids:t.tabIds??[],key:n,request_id:r})).tabs.map(a=>({id:a.tab_id,...a}))}}async groupTabs(t,n,r){const s=await this.tools.GroupTabs({...t,tab_ids:t.tabIds,group_id:t.groupId,key:n,request_id:r});if(!s.tab_group)throw new Error("[GroupTabs] Tab group not found");return{is_success:!0,tabGroup:{id:s.tab_group.id,title:s.tab_group.title,collapsed:s.tab_group.collapsed??!1,color:s.tab_group.color}}}async maybeSendSearchResult(t,n,r){if(!this.isTestDebugMode||!t)return;const a=[...t.web_results??[],...t.extra_web_results??[]].map(i=>({name:i.name,snippet:i.snippet,url:i.url,isClientContext:!!i.is_client_context}));return this.send({type:"PERPLEXITY_SEARCH_RESULT",payload:{answer:t.answer,webResults:a,isPending:r,steps:n.map(i=>i.step_type)}})}submitTask(t,n){return new Promise((r,s)=>{const a=t.entryId,i=t.uuid;this.store.getState().actions.setPendingTask(i,{entryId:t.entryId,uuid:t.uuid,resolve:r,reject:s,onProgress:n});const l=this.taskTeardowns.get(a)??[];if(this.taskTeardowns.set(a,l),this.platform!=="web"){const c=Olt(t,this.mobileProxy.bridge);l.push(()=>c.then(u=>{u(),this.store.getState().actions.setTaskState(t.uuid,void 0)})),r({message:"Mobile task started",success:!0});return}l.push(this.agentExtension.sendMessageToPort(t))})}async moveThreadToSidecar({activeTaskUuid:t,entryId:n,isMissionControl:r,reason:s}){try{return(await this.agentExtension.sendMessage({type:"MOVE_THREAD_TO_SIDECAR",payload:{active_task_uuid:t,is_mission_control:r,entry_id:n}})).success}catch(a){return ne.error(new cg("MOVE_THREAD_TO_SIDECAR_FAILED",{cause:a,message:`Failed to move thread to sidecar for ${s}`})),!1}}getTaskTabs(){this.agentExtension.sendMessage({type:"GET_TASK_TABS"})}async sendMissionControlStatus(t){await this.agentExtension.sendMessage({type:"MISSION_CONTROL_STATUS",payload:t})}async makeTaskVisible(t){const n=await this.agentExtension.sendMessage({type:"MAKE_TASK_VISIBLE",payload:{task_uuid:t}});if(n.tab_ids){const r=new URL(window.location.href).pathname;n.tab_ids.forEach(s=>{this.store.getState().actions.setSidecarUrlById(Wg(s,void 0),r)})}}cleanupTasks(t){if(!t)return;const n=this.taskTeardowns.get(t);n&&(n.forEach(r=>r()),this.taskTeardowns.delete(t))}captureSourceTabScreenshotV2({sourceTabUrl:t=""}){this.agentExtension.sendMessage({type:"CAPTURE_SCREENSHOT_V2",payload:{tabId:void 0,sourceTabUrl:t}})}deactivateScreenshotTool(){this.agentExtension.sendMessage({type:"DEACTIVATE_SCREENSHOT_TOOL",payload:{tabId:void 0}})}subscribeToSidecarBrowserTaskStop(t){return this.emitter.on("BROWSER_TASK_STOP",t)}subscribeForceSubmitQuery(t){return this.emitter.on("FORCE_SUBMIT_QUERY",t)}subscribeQuickActionButtonFired(t){return this.emitter.on("QUICK_ACTION_BUTTON_FIRED",t)}getMcpTools(t){return this.sendToAgent({type:"GET_MCP_TOOLS",payload:{serverName:t}})}callMcpTool(t,n){return this.sendToAgent({type:"CALL_MCP_TOOL",payload:t,context:n})}getMcpStdioServers(){const t=this.sendToAgent({type:"GET_STDIO_MCP_SERVERS",payload:void 0});return t.then(n=>{this.getStore().getState().actions.setMcpStdioServers(n)}).catch(()=>{}),t}addMcpStdioServer(t){return this.sendToAgent({type:"ADD_STDIO_MCP_SERVER",payload:t})}async updateMcpStdioServer(t,n){return n.name&&n.name!==t?this.pendingServerRename={oldName:t,newName:n.name}:this.pendingServerRename=void 0,await this.removeMcpStdioServer(t,!0),this.addMcpStdioServer(n)}async removeMcpStdioServer(t,n){await this.sendToAgent({type:"REMOVE_STDIO_MCP_SERVER",payload:{name:t}}),this.clearStateAfterRemovingMcpServer(t,n)}installDxt(t){return this.sendToAgent({type:"INSTALL_DXT",payload:{url:t}})}async uninstallDxt(t){await this.sendToAgent({type:"UNINSTALL_DXT",payload:{name:t}}),this.clearStateAfterRemovingMcpServer(t)}getInstalledDxts(){const t=this.sendToAgent({type:"GET_INSTALLED_DXT"});return t.then(n=>{this.getStore().getState().actions.setInstalledDxts(n)}).catch(()=>{}),t}async refreshDxtAndMcpState(){await Promise.all([this.getMcpStdioServers(),this.getInstalledDxts()])}handleMcpStdioServerChanged(t,n,r){const s=this.getStore().getState(),a=s.mcpStdioServers??[],i=a.findIndex(c=>c.name===t);if(i===-1)return;const l=[...a];l[i]=r,s.actions.setMcpStdioServers(l)}async send(t){return this.mainExtension.sendMessage(t).then(n=>(n.is_success=!n.errorType,n))}async sendToAgent(t){return this.agentExtension.sendMessage(t).then(n=>{if(!n.success)throw new Error(n.error);return n.response})}handleMessage=t=>{try{Qr(t).with({type:"UPDATE_SOURCE_TAB"},r=>{this.store.getState().actions.setSourceTab(r.payload),r.payload.url!==this.store.getState().sidecarSourceTab.url&&this.store.getState().actions.clearUserSelection()}).with({type:"FORCE_SUBMIT_QUERY"},r=>{this.isTestDebugMode&&this.emitter.emit("FORCE_SUBMIT_QUERY",r.payload)}).with({type:"QUICK_ACTION_BUTTON_FIRED"},()=>{this.emitter.emit("QUICK_ACTION_BUTTON_FIRED")}).with({type:"INIT"},r=>{this.isTestDebugMode=!!r.payload.isTestDebugMode,this.store.getState().actions.setPlatformInfo(r.payload.platform),this.store.getState().actions.setSourceTab({tabId:r.payload.sourceTabId??-1,url:r.payload.sourceTabUrl??"",title:r.payload.sourceTabTitle??"",secondaryTab:r.payload.sourceSecondaryTab??null})}).otherwise(r=>{ne.log("Unknown message type",r)})}catch(n){ne.error("Error parsing entropy message",n)}};clearStateAfterRemovingMcpServer(t,n){const r=this.getStore().getState(),s=r.mcpDisabledServers??new Set;if(s.has(t)){const i=new Set(s);i.delete(t),r.actions.setMcpDisabledServers(i)}if(n&&!this.pendingServerRename)return;if(this.pendingServerRename&&this.pendingServerRename.oldName===t){r.actions.renameMcpServerInToolsSettings(this.pendingServerRename.oldName,this.pendingServerRename.newName),this.pendingServerRename=void 0;return}const a=r.mcpToolsSettings??{};if(a[t]){const i={...a};delete i[t],r.actions.setMcpToolsSettings(i)}}}const Hlt=e=>new Proxy({},{get(t,n){return r=>e.sendMessage({type:"CALL_TOOL",method:n,request:r}).then(({success:s,response:a})=>{if(!s)throw a;return a}).catch(s=>{throw ne.error("Error calling tool",s),"errorType"in s?s:{errorType:"unhandled",errorMsg:"Proxy error."}})}});var RJ={};const Wl=new Wlt,{Provider:zlt,useTrackedState:Glt}=ex("CometContext",()=>Wl.getStore()),F0e=Yt("EntropyBrowserContext",void 0),qlt=({children:e})=>{const t=_t(),n=LOe(),r=pn(),{variation:s}=klt(!0),{variation:a,loading:i}=Mlt(KF);return f.useEffect(()=>{i||Wl.setClassifierApiTimeoutMs(a)},[a,i]),f.useLayoutEffect(()=>{const l=xi();l.erp&&(document.documentElement.dataset.erp=l.erp);const c=Wl.subscribeCometNavigate(({url:h})=>{if(h.origin===window.location.origin&&h.pathname.startsWith(t.base)&&(h.pathname=h.pathname.replace(t.base,""),n(h.pathname))){const y=h.searchParams.toString(),x=`${h.pathname}${y?`?${y}`:""}`;t.push(x,void 0,"Comet navigate");return}if(RJ.NEXT_PUBLIC_IS_SIDECAR_BUILD){ne.error("Invalid soft navigation in Sidecar",{url:h}),Wl.openTab({url:h.toString()});return}const g=h.toString();window.location.href=g});if(!RJ.NEXT_PUBLIC_IS_SIDECAR_BUILD||s===!1)return c;const u=Wl.getStore(),d=setInterval(()=>{u.getState().sidecarUrlById.forEach((g,y)=>{g.updatedAt<Date.now()-1e3*60*60*24*7&&u.getState().actions.deleteSidecarUrlById(y)}),xJ(u)},1e3*60*60*6);Bot(u),Vot(u,t);let m=u.getState().sidecarSourceTab;const p=u.subscribe((h,g)=>{if(h.sidecarSourceTab===g.sidecarSourceTab)return;const y=h.sidecarSourceTab,x=Wg(m.tabId,m.secondaryTab?.tabId),v=Wg(y.tabId,y.secondaryTab?.tabId);if(v===x)return;const b=new URL(window.location.href).pathname;_qe(m.tabId,m.secondaryTab?.tabId).forEach(S=>{u.getState().actions.setSidecarUrlById(S,b)});const C=u.getState().sidecarUrlById.get(v)?.url??"/";m=y,C!==b&&(t.replace(C,"Sidecar source tab changed"),xJ(u))});return()=>{clearInterval(d),c(),p()}},[t,n,s]),f.useEffect(()=>Wl.subscribeToSidecarBrowserTaskStop(l=>{l&&(Au({entryUUID:l,reason:"terminate-from-comet-adapter"}),Wl.cleanupTasks(l))}),[]),o.jsx(zlt,{children:o.jsxs(F0e.Provider,{value:Wl,children:[e,r&&o.jsx(Klt,{})]})})};function Jn(e=!0){const t=f.useContext(F0e);if(!t&&e)throw new Error("useEntropyBrowser must be used inside EntropyBrowserProvider");return t}const cs=Glt,Klt=()=>{const e=cs();return f.useEffect(()=>{Wl.refreshDxtAndMcpState().catch(()=>{})},[]),f.useEffect(()=>{if(!e.mcpDisabledServers)try{const t=Oe.getItem("mcp_disabled_servers_v1"),n=t?JSON.parse(t):[];e.actions.setMcpDisabledServers(new Set(n))}catch{e.actions.setMcpDisabledServers(new Set)}},[e.mcpDisabledServers,e.actions]),f.useEffect(()=>{if(!e.mcpToolsSettings)try{const t=Oe.getItem(sv),n=t?JSON.parse(t):{};e.actions.setMcpToolsSettings(n)}catch{e.actions.setMcpToolsSettings({})}},[e.mcpToolsSettings,e.actions]),o.jsx(o.Fragment,{children:e.mcpStdioServers?.map(t=>o.jsx(Ylt,{server:t},t.name))})},Ylt=({server:e})=>{const t=cs(),{data:n}=We({queryKey:["comet/mcp_tools",e.name],queryFn:async()=>(await Wl.getMcpTools(e.name).catch(()=>[])).map(s=>({...s,mcp_server:e.name,mcp_server_type:aqe.MCP_SERVER_TYPE_LOCAL,app:e.name})),enabled:!!e.name});return f.useEffect(()=>{if(n)return t.actions.setMcpTools(e.name,n),()=>{t.actions.removeMcpTools(e.name)}},[n,t.actions,e.name]),null};function Qlt(e){return e.blocks?.some(t=>t.intended_usage==="ask_text")??!1}function Xlt(e,t,n=[]){return t===de.DEFAULT||n.length>0&&n[n.length-1]?.step_type==="FINAL"||e?.some(s=>s.markdown_block||s.entity_list_block||wge(s.entity_group_block)||Cge(s.inline_entity_block))}function Yr(e){const t=e?.toLowerCase();return Si[t]??ce.SEARCH}var Zlt={};const U0e=()=>{const e=pn(),t=Jn(),n=f.useCallback(r=>{const s=!!r.last_backend_uuid,a=Yr(r.model_preference)===ce.RESEARCH||Yr(r.model_preference)===ce.STUDIO;return(r.sources?.some(l=>l==="web")??!0)&&e&&!s&&!Zlt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!a&&!r.override_no_search},[e]);return f.useCallback((r,s,a)=>{!r||!n(s)||t.injectSearchResults(r,a)},[t,n])},Jlt=["presentpicker"],B0e=e=>e?Jlt.includes(e):!1;function ect(e){const t=Ut(),n=lt(),{hasAccessToProFeatures:r}=Et(),{trackEvent:s}=je(),{actions:a,preferredSearchModels:i,preferredSearchMode:l}=_n(),{isMaxUpsellEnabled:c}=Ku(),u=t?.get("copilot"),d=t?.get("pro"),m=t?.get("utm_source"),p=u==="false"||d==="false",h=!p&&(u==="true"||d==="true"||B0e(m??void 0)),g=i[ce.SEARCH];g&&(Si[g]!==ce.SEARCH?(i[ce.SEARCH]=de.PRO,a.setPreferredSearchModel(ce.SEARCH,de.PRO)):g===de.DEFAULT&&r&&a.setPreferredSearchModel(ce.SEARCH,void 0));const y=t?.get("model_id")==="pplx_alpha"?null:t?.get("model_id");let x;y&&(y==="deep_research"?x=de.ALPHA:Object.values(de).includes(y)&&(x=y));let v;return p?v=de.DEFAULT:x?v=x:h&&(v=de.PRO),v&&x&&x==v&&s("search mode utm",{mode:Si[v]}),f.useMemo(()=>{let b=de.DEFAULT;if(!n)return b;if(v)return v;if(!c)return b=i[ce.SEARCH]??de.PRO,b;switch(l){case ce.RESEARCH:b=i[ce.RESEARCH]??de.ALPHA;break;case ce.STUDIO:b=i[ce.STUDIO]??de.BETA;break;case ce.SEARCH:default:b=i[ce.SEARCH]??de.PRO;break}return b},[n,c,v,l,i])}const V0e={isCopilot:!1,sources:["web"],gpt4Limit:0,gpt4Total:0,pplxAlphaLimit:0,pplxBetaLimit:0,uploadRateLimit:void 0,createLimit:0,recency:null,askInputReasoningMode:!1,askInputReasoningModelPreference:null,setAskInputReasoningMode:()=>{},setAskInputReasoningModelPreference:()=>{},setConfiguredModel(){},setSources:()=>{},setIsCopilot:()=>{},decrementCreateLimit:()=>{},setGPT4Limit:()=>{},setPplxAlphaLimit:()=>{},setPplxBetaLimit:()=>{},setRecency:()=>{},setUploadRateLimit:()=>{},configuredModel:de.DEFAULT,configuredSearchMode:ce.SEARCH,setConfiguredSearchMode(){}},$0e=Yt("ThreadConfigContext",V0e),tct=({children:e,shouldFetchSettings:t})=>{const r=Sa({enabled:t,reason:"thread-settings-provider"}),{organization:s}=kn({reason:"thread-settings-provider"}),a=_n(),{isMax:i}=Et();let l=a.preferredSearchMode;const c=l?Object.values(ce).includes(l):!1,{isMaxUpsellEnabled:u}=Ku();!u&&l!==ce.SEARCH&&(l=void 0,a.actions.setPreferredSearchMode(void 0));const d=ect(),[m,p]=f.useState({...V0e,gpt4Limit:r.gpt4Limit,gpt4Total:r.gpt4Total,pplxAlphaLimit:r.pplxAlphaLimit,pplxBetaLimit:r.pplxBetaLimit,configuredModel:d,configuredSearchMode:Si[d]??ce.SEARCH}),h=f.useCallback(k=>p(N=>({...N,configuredModel:k,configuredSearchMode:Si[k]??N.configuredSearchMode})),[]),g=f.useCallback(()=>{h(de.DEFAULT),a.actions.setPreferredSearchMode(ce.SEARCH)},[h,a.actions]),y=f.useCallback(k=>{p(N=>({...N,sources:k}))},[]),x=f.useCallback(k=>{p(N=>({...N,recency:k}))},[]),v=f.useCallback(k=>{p(N=>({...N,askInputReasoningModelPreference:k,askInputReasoningMode:!!k}))},[]),b=f.useCallback(k=>{p(N=>({...N,askInputReasoningMode:k}))},[]);f.useEffect(()=>{r.createLimit!==null&&p(k=>({...k,createLimit:r.createLimit}))},[r.createLimit]),f.useEffect(()=>{r.uploadLimit!==null&&r.uploadLimit!==void 0&&p(k=>({...k,uploadRateLimit:r.uploadLimit}))},[r.uploadLimit]),f.useEffect(()=>{r.gpt4Limit!==null&&p(k=>({...k,gpt4Limit:r.gpt4Limit}))},[r.gpt4Limit]),f.useEffect(()=>{r.gpt4Total!==null&&p(k=>({...k,gpt4Total:r.gpt4Total}))},[r.gpt4Total]),f.useEffect(()=>{r.pplxAlphaLimit!==null&&p(k=>({...k,pplxAlphaLimit:r.pplxAlphaLimit}))},[r.pplxAlphaLimit]),f.useEffect(()=>{r.pplxBetaLimit!==null&&p(k=>({...k,pplxBetaLimit:r.pplxBetaLimit}))},[r.pplxBetaLimit]),f.useEffect(()=>{r.hasLoadedSettings&&((m.configuredModel!==de.DEFAULT&&r.gpt4Limit<=0||Yr(m.configuredModel)===ce.RESEARCH&&r.pplxAlphaLimit<=0&&!i||Yr(m.configuredModel)===ce.STUDIO&&r.pplxBetaLimit<=0&&!i)&&g(),(m.askInputReasoningMode||m.askInputReasoningModelPreference)&&r.gpt4Limit<=0&&g())},[g,r.gpt4Limit,r.pplxAlphaLimit,r.pplxBetaLimit,r.hasLoadedSettings,m.askInputReasoningMode,m.askInputReasoningModelPreference,m.configuredModel,i]),f.useEffect(()=>{const k=s?.settings?.disabled_model_preferences??[];c&&l&&k?.includes(l)&&g()},[c,s?.settings?.disabled_model_preferences,l,g,h]);const _=f.useCallback(()=>{const k=Math.max(m.createLimit-1,0);p(N=>({...N,createLimit:k}))},[m.createLimit]),w=f.useCallback((k=1)=>{if(m.uploadRateLimit==null)return;const N=Math.max(m.uploadRateLimit-k,0);p(P=>({...P,uploadRateLimit:N}))},[m.uploadRateLimit]),M={...m,setConfiguredModel:h,setSources:y,decrementCreateLimit:_,setUploadRateLimit:w,setGPT4Limit:k=>{p(N=>({...N,gpt4Limit:k}))},setPplxAlphaLimit:k=>{p(N=>({...N,pplxAlphaLimit:k}))},setPplxBetaLimit:k=>{p(N=>({...N,pplxBetaLimit:k}))},setRecency:x,askInputReasoningMode:m.askInputReasoningMode,isCopilot:m.configuredModel!==de.DEFAULT,setAskInputReasoningMode:b,setAskInputReasoningModelPreference:v,configuredSearchMode:m.configuredSearchMode,setConfiguredSearchMode:k=>{p(N=>({...N,configuredSearchMode:k}))}};return o.jsx($0e.Provider,{value:M,children:e})},rr=()=>{const e=f.useContext($0e);if(!e)throw new Error("useThreadConfig must be used within ThreadSettingsContext");return e};function ux(){const{isMax:e,isPro:t}=Et(),{isMaxUpsellEnabled:n}=Ku(),{gpt4Limit:r,pplxAlphaLimit:s,pplxBetaLimit:a}=rr();return f.useMemo(()=>l=>{let c=!1;return l===ce.RESEARCH?c=Math.min(r,s)<=0:c=Math.min(r,a)<=0,n&&!e&&t&&c&&(l===ce.RESEARCH||l===ce.STUDIO)},[n,e,t,r,s,a])}function Ku(){const{isEnterprise:e}=kn({reason:"max-tier"}),{isEnterpriseMaxUiEnabled:t}=O0e(),{value:n,loading:r}=Dt({flag:"max-upsell",defaultValue:!1,subjectType:"visitor_id",extraAttributes:{isEnterprise:e??!1}});return f.useMemo(()=>({isMaxUpsellEnabled:e&&t?!0:n,loading:r}),[n,r,e,t])}var nct={};function Xa(){const{configuredModel:e,configuredSearchMode:t}=rr();return f.useMemo(()=>t||(nct.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e===de.DEFAULT?ce.SEARCH:Si[e]),[t,e])}const rct=["ppl-ai-file-upload","ppl-ai-sandbox-file-upload","ppl-ai-experimental-file-upload"],W0e=e=>rct.some(t=>e.url.includes(`${t}.s3.amazonaws.com/web/direct-files`));var G8;(function(e){e.token_limit_exceeded="token_limit_exceeded",e.parsing_error="parsing_error",e.unknown_error="unknown_error",e.unauthorized="unauthorized",e.no_data_received="no_data_received",e.file_type_not_supported="file_type_not_supported",e.image_failed_moderation="image_failed_moderation"})(G8||(G8={}));var Uv;(function(e){e.generic_upload_error="generic_upload_error",e.unsupported_type="unsupported_type",e.too_large="too_large",e.too_small="too_small",e.no_name="no_name",e.failed_moderation="failed_moderation",e.rate_limited="rate_limited",e.over_file_count="over_file_count",e.over_image_count="over_image_count"})(Uv||(Uv={}));const S2=e=>{if(P_(e))return"application/pdf";const n=e.split("?")[0].split("#")[0].split(".").pop()?.toLowerCase();return n&&{png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jp2:"image/jp2",gif:"image/gif",bmp:"image/bmp",tiff:"image/tiff",tif:"image/tiff",svg:"image/svg+xml",webp:"image/webp",ico:"image/x-icon",avif:"image/avif",heic:"image/heic",heif:"image/heif",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",csv:"text/csv",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",md:"text/markdown"}[n]||"application/octet-stream"},sct=e=>{const t=e.meta_data?.repo_type;return e.is_attachment&&!t&&!e.meta_data?.file_uuid},act=e=>{if(!e)return!1;try{return new URL(e).hostname.includes("s3.amazonaws.com")}catch{return!1}},Ol=pt({token_limit_exceeded:{id:"cnFlyTXVDl",defaultMessage:"File {filename} exceeds the model's token limit."},parsing_error:{id:"RdRRX8+YG/",defaultMessage:"Failed to parse file {filename}."},file_type_not_supported:{id:"IaflMSTTq6",defaultMessage:"File type not supported for {filename}."},unknown_error:{id:"zhy7qBi3Eu",defaultMessage:"Unknown error for file {filename}."},unauthorized:{id:"6bOe+cTUhc",defaultMessage:"User not authorised to access file {filename}."},no_data_received:{id:"34PXW7VvKh",defaultMessage:"No data received for file {filename}."},generic_upload_error:{id:"xVFvYDY5wK",defaultMessage:"File upload failed"},unsupported_type:{id:"VUOyYEDS96",defaultMessage:"The file type you uploaded is not supported."},too_large:{id:"XBcIjOYq8V",defaultMessage:"File too large: {max} maximum."},too_small:{id:"ZUyiNCx0Aw",defaultMessage:"File too small."},no_name:{id:"IkAmckATMw",defaultMessage:"File name is required."},image_failed_moderation:{id:"YCCLnMQDPb",defaultMessage:"File {filename} failed moderation."},failed_moderation:{id:"hnN6c9ExET",defaultMessage:"File upload failed moderation."},rate_limited:{id:"el7NlqcDQZ",defaultMessage:"You have reached the daily upload limit for your plan."},over_file_count:{id:"2+5sg16GUy",defaultMessage:"You are allowed up to {maxNumFiles, plural, one {# file} other {# files}} at once."},over_image_count:{id:"FIudmpgA1s",defaultMessage:"You are allowed up to {maxNumImages, plural, one {# image} other {# images}} at once."}}),XB=e=>{if(e.startsWith("/rest/connectors/wiley/"))return"WILEY";if(e.includes("drive.google.com")||e.includes("connectors/google-drive")||e.includes("docs.google.com"))return"GOOGLE_DRIVE";if(e.includes("onedrive.live.com")||e.includes("1drv.ms")||e.includes("connectors/onedrive"))return"ONEDRIVE";if(e.includes(".sharepoint.com")||e.includes("connectors/sharepoint"))return"SHAREPOINT";if(e.includes("dropbox.com/preview")||e.includes("connectors/dropbox"))return"DROPBOX";if(e.includes("app.box.com/file")||e.includes("connectors/box"))return"BOX"},H0e=e=>!!(e?.meta_data?.connection_type&&e?.meta_data.connection_type!=="LOCAL")||e.is_attachment&&!!XB(e.url),dx=e=>e.is_attachment&&(W0e(e)||Em(e.url)||P_(e.url)),z0e=e=>e.trim().replace(/\/+$/,"").replace(/^(?:https?:\/\/)?(?:www\.)?/,""),wun=e=>!!new RegExp("^((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,})(\\/[\\w\\-._~:/@!$&'()*+,;=%.]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e);function ha(e){const t=/(?:https?:\/\/)?(?:www\.)?([a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*(?:\.[a-zA-Z]{2,})?|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::\d+)?/,n=e.match(t);return n&&n.length>0?n[1]||n[0]:"unknown"}function I_(e){const t=ha(e);return t==="unknown"?"unknown":t.replace(/\.[^.]*$/,"")}function R_(e){return e.includes("calendar.google.com")||e.includes("google.com/calendar")?"https://calendar.google.com":e.includes("mail.google.com")||e.includes("google.com/mail")?"https://mail.google.com":oct(e)?"www.perplexity.ai":ha(e)}function Cun(e){return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`}function Cp(e){const t=["(?:youtube?\\.com\\/","(?:[^/\\n\\s]+\\/\\S+\\/","|(?:v|e(?:mbed)?)\\/","|\\S*?[?&]v=",")","|youtu\\.be\\/",")([a-zA-Z0-9_-]{11})"].join(""),n=new RegExp(t),r=e.match(n);if(r&&r[1].length==11)return r[1]}const Sun=e=>e.indexOf("unsplash.com")>-1;function Em(e){return e.startsWith("https://pplx-res.cloudinary.com/")||e.startsWith("https://api.cloudinary.com/v1_1/pplx/image/download")}function P_(e){return e.startsWith("https://image-ppubs.uspto.gov/")}function Eun(e){return e.includes("code-interpreter-files.s3.amazonaws.com")||e.includes("pplx_code_interpreter")}function Mun(e){return e.includes("user-gen-media-assets")}function q8(e){return e.replace(/\/s--[^/]+--\/v\d+\//,"/")}function ZB(e){return!dx(e)&&!!e.url&&!Cp(e.url)&&!Em(e.url)&&!e.is_memory&&!e.is_conversation_history}const u5=e=>{try{const r=new URL(e).pathname.replace(/^\//,"").split("/"),s=r[r.length-1];return decodeURIComponent(s)}catch{return"File"}},ict=e=>{const t=e,n=t.indexOf("/"),r=Math.max(23,n+16);return t.length>r?t.substring(0,r-1)+"":t},kun=(e,t)=>`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent([e,t].filter(Boolean).join(", "))}`,Tun=(e,t)=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent([e,t].filter(Boolean).join(", "))}`;function G0e(e,t){let n=e;const r=e.match(/{([^}]+)}/g)||[];for(const s of r){const a=s.slice(1,-1);t[a]!==void 0?n=n.replace(s,t[a]):n=n.replace(s,"")}try{return new URL(n).toString()}catch{return n}}function Nun(e){return e.includes("https://openai.com/index/image-generation-api/")}function oct(e){return e.startsWith("chrome://")||e.startsWith("chrome-extension://")||e.startsWith("browser-extension://")||e.startsWith("browser://")||e.startsWith("comet://")}const jun=e=>e.replace("comet://","chrome://"),q0e=e=>{if(!e)return null;try{return new URL(e)}catch{return null}},Aun=async e=>{const t=[];return await Promise.all(e.map(async n=>{try{(await fetch(n,{method:"HEAD"})).ok&&t.push(n)}catch(r){console.debug(`URL ${n} is not reachable:`,r)}})),t},JB=e=>{try{const t=new URL(e);return["AWSAccessKeyId","Signature","Expires"].every(n=>t.searchParams.has(n))}catch{return!1}},K8=e=>{if(!e)return"";const t=e.indexOf("?");return(t===-1?e:e.substring(0,t)).replace(/\/+$/,"")},K0e=e=>{try{return new URL(e).origin===window.location.origin}catch{return!1}};var PJ={};const lct=e=>{try{return new URL(e),!0}catch{return!1}},cct=({inPageOverride:e,dslQuery:t,existingEntryUUID:n,existingUuid:r,deletedUrls:s,redoSearch:a,collection:i,isRelatedQuery:l,isSponsored:c,relatedQueryUUID:u,inDomain:d,inPage:m,newFrontendContextUUID:p,promptSource:h,querySource:g,timeFromFirstType:y,utmSource:x,disableWidgets:v,isNavSuggestionsDisabled:b,entropyBrowser:_,clientPayloadUUID:w,isIncognito:C,sessionId:S,modelPreferenceSubmit:E,lastBackendUUID:M,deviceLocation:k,newAttachments:N,threadMetadataRwToken:P,forceNew:L,finalSources:O,finalRecency:A,mode:j,frontendUUID:T,isWindowsApp:I,browserHistorySummaryNumDays:U,mentions:B,reason:D,side_by_side_metadata:W,skipSearchEnabled:z,browserHistorySummaryMaxResults:$,sidecarTabId:X,sidecarUrl:q,sidecarTitle:Y,sidecarSecondaryTabId:G,sidecarSecondaryUrl:J,sidecarSecondaryTitle:K,isFirstEntry:te,alwaysSearchOverride:re,overrideNoSearch:se,cometMaxAssistantEnabled:me,resumingQuery:oe,resumeFromUuid:ge,cometIsMissionControl:xe,mcpTools:ye,refinementFiltersMetadata:_e})=>{const be=k?{location_lat:k.latitude,location_lng:k.longitude,name:""}:null,Ne=S_(),Re=xi().erp,Ae=pn(),st=Ae?{source:YF,client_payload_cache_key:w}:{},it=I?{source:h3}:{};let Se=!1,ue="",ke="";if(Ae&&(Se=!0,te&&(ue=yqe({entropyBrowser:_,browserHistorySummaryNumDays:U,browserHistorySummaryMaxResults:$,reason:D}),ke=_.getLastOmniboxInput(T)??""),g==="default_search"&&(lct(ke)&&(Se=!1,ne.info("[comet] Local search disabled due to URL input in omnibox",{lastOmniboxInput:ke})),!ke))){const ft=q0e(document.referrer);(!ft||ft.origin!==location.origin||ft.pathname!=="/.well-known/comet-omnibox-text"&&ft.pathname!=="/b/try-assistant")&&(Se=!1,ne.info("[comet] Local search disabled due to unsecure referer",{lastOmniboxInput:ke,parsedReferrer:ft}))}const et=g==="followup"?"followup-sidecar":"sidecar";let Ge;return Ae&&(Ge=Re==="sidecar"?{rendering_place:Re,sidecar_tab_id:X,sidecar_url:q,sidecar_title:Y,sidecar_secondary_tab_id:G,sidecar_secondary_url:J,sidecar_secondary_title:K}:{rendering_place:Re??"unknown"}),{last_backend_uuid:M??void 0,read_write_token:L?void 0:P,existing_entry_uuid:L?void 0:n,deleted_urls:s??void 0,attachments:N,language:jd(),timezone:qF,in_page:e??m,in_domain:d,search_focus:O.length===0?"writing":"internet",sources:O,search_recency_filter:A,frontend_uuid:r??T,redo_search:a,mode:j,target_collection_uuid:i?.uuid,model_preference:E??void 0,is_related_query:l??!1,is_sponsored:c??!1,related_query_uuid:u,visitor_id:Ne??void 0,user_nextauth_id:S??void 0,frontend_context_uuid:p??void 0,prompt_source:h??void 0,query_source:PJ.NEXT_PUBLIC_IS_SIDECAR_BUILD?et:g??"",browser_history_summary_key:ue||void 0,is_incognito:C,time_from_first_type:y??void 0,local_search_enabled:Se,use_schematized_api:!0,send_back_text_in_streaming_api:!1,supported_block_use_cases:Qpe,utm_source:x,client_coordinates:be,mentions:B,dsl_query:t,skip_search_enabled:z,is_nav_suggestions_disabled:b||!!PJ.NEXT_PUBLIC_IS_SIDECAR_BUILD,...g==="followup"?{followup_source:"link"}:{},...st,...it,...v?{disable_widgets:v}:{},always_search_override:re??!1,override_no_search:se??!1,comet_info:Ge,...W&&{side_by_side_metadata:W},client_search_results_cache_key:Ae&&T?`nav-${T}`:void 0,comet_max_assistant_enabled:me,resuming_query:oe,resume_from_uuid:ge,comet_is_mission_control:xe,mcp_tools:ye,refinement_filters_metadata:_e}},Y0e=()=>{const e=Ft();return pn()&&e?.startsWith("/b/home")},uct=["/?","/search","/discover"],dct=["/"],eV=e=>e?!dct.some(t=>e===t)&&!uct.some(t=>e.startsWith(t)):!0,Y8=()=>Xs.getItem("signUpBannerDismissed")!=="true",fct=()=>Xs.setItem("signUpBannerDismissed","true"),mct=()=>Xs.setItem("signUpBannerDismissed","reset"),Q0e=R.memo(({portalTarget:e})=>{const{$t:t}=Z(),[n,r]=f.useState(!1),s=Ft(),{trackEvent:a}=je(),{keysRequiringRerender:i,removeKeyRequiringRerender:l,addKeyRequiringRerender:c}=yf(),u=Y0e(),[d,m]=f.useState(""),p=f.useCallback(()=>{m(l5(window.location.href,Ic,De.FLOATING_SIGNUP))},[]);if(f.useEffect(()=>{p()},[p]),f.useEffect(()=>{r(Y8())},[]),f.useEffect(()=>{i.includes("floating-signup")&&(r(Y8()),p()),l("floating-signup")},[l,i]),f.useEffect(()=>{n&&a("floating sign up shown",{})},[n,a]),eV(s)&&!u||!n)return null;const h=()=>{r(!1),fct(),a("floating sign up dismissed",{}),c("sidebar-sign-in-button")};return o.jsx(pf,{portalTarget:e??void 0,children:o.jsx("div",{className:"bottom-md right-md fixed hidden w-[300px] md:block",children:o.jsx(H,{variant:"background",className:V("px-md py-lg animate-in fade-in ring-subtle rounded-xl shadow-md ring-1 duration-300 ease-out"),children:o.jsxs("div",{children:[o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,size:"small",icon:It,onClick:h,testId:"floating-signup-close-button"})}),o.jsx("div",{className:"pb-md flex justify-center",children:o.jsx(za,{variant:"mark",color:"super",size:"small"})}),o.jsx(F,{variant:"baseSemi",className:"mb-xs text-center",children:t({defaultMessage:"Sign in or create an account",id:"eN8MTJfuKA"})}),o.jsx(F,{variant:"small",color:"light",className:"text-center",children:t({defaultMessage:"Unlock {proSearch} and History",id:"azC54WXvtr"},{proSearch:"Pro Search"})}),o.jsx("div",{className:"mt-md",children:o.jsx(ab,{onClose:h,redirectUrl:d,showCloseButton:!1,autoFocus:!1,loginButtonsStyle:"highlightPrimary"})})]})})})})});Q0e.displayName="FloatingSignUp";const pct=async({reason:e})=>{try{const{data:t,error:n}=await ae.POST("/rest/incentives/comet-activation",e,{timeoutMs:Fe()});if(n)throw n;return t}catch(t){return ne.error("Failed to handle comet activation incentive",t),null}},hct=async({eventName:e,isDeferred:t,clickId:n,reason:r})=>{try{const{data:s,error:a}=await ae.POST("/rest/attribution/dub/lead",r,{timeoutMs:Fe(),body:{event_name:e,is_deferred:t,click_id:n}});if(a)throw a;return{success:s?.success??!1}}catch(s){return ne.error("Failed to save post install redirect",s),{success:!1}}},gct=2,yct=10,xct=({response:e,isUserLoggedIn:t,submissionCount:n,session:r,queryCountMobile:s,isWindowsApp:a,addKeyRequiringRerender:i,setSubmissionCount:l,trackEvent:c,setShouldShowProductFeedback:u,setFeedbackEntryUUID:d,setShouldShowRecruitmentBanner:m,sendQueryEventSingular:p,maybeSendNthQueryEventSingular:h,recruitmentBannerEnabled:g,reason:y})=>{const x=pn();if(x&&DOe(t),e?.backend_uuid){const b=e.backend_uuid;dKe({entryUUID:e.backend_uuid,params:{query:e.query_str||"",sources:e.sources?.sources??[]},reason:y}).then(_=>{u(_),_&&c("query feedback shown",{entry_uuid:b})}),g&&yKe({entryUUID:b,reason:y}).then(_=>{m(_),_&&c("power user recruitment banner shown",{})}),d(b)}!t&&n===gct-1&&(mct(),i("floating-signup")),t&&r?.user?.id&&s===0&&n===yct-1&&i("floating-mobile-download"),a?i("floating-milestone-refetch-legacy"):t&&i("floating-milestone-refetch"),l(n+1),p(),h({isCometBrowser:x});const v=uue();x&&v===1&&(hct({eventName:"activated",isDeferred:!1,clickId:null,reason:"comet attribution"}),pct({reason:"comet activation incentive"}),c("first comet query finished",{}))},$C={startTime:-1,timer:rc()},mh={startTime:-1,modules:new Set},fx=Yt("PerformanceContext",{markTTV:()=>{},addPageTiming:()=>{},getPageStartTime:()=>0,getPageTimer:()=>rc(),addPageTimingOnce:()=>{}});function vct({children:e}){const{startTimeFromTimeOriginRef:t}=_t(),{markTTV:n}=FOe(),r=f.useCallback(()=>($C.startTime!==t.current&&($C.startTime=t.current,$C.timer=rc(void 0,{nowFromTimeOrigin:t.current})),$C.timer),[t]),s=f.useMemo(()=>({markTTV:()=>n(t.current),addPageTiming:(a,i={})=>r().addTiming(a,i),addPageTimingOnce:(a,i={})=>r().addTimingOnce(a,i),getPageStartTime:()=>t.current,getPageTimer:r}),[n,t,r]);return o.jsx(fx.Provider,{value:s,children:e})}function bct(){const{markTTV:e}=f.useContext(fx);return e}function _ct(){const{addPageTiming:e}=f.useContext(fx);return e}function X0e(){const{getPageStartTime:e}=f.useContext(fx);return e}function wct(){const{getPageTimer:e}=f.useContext(fx);return e}const Z0e=Yt("PagePerformanceContext",{markTTV:()=>{}});function kA({children:e,modules:t}){const{markTTV:n,addPageTimingOnce:r,getPageStartTime:s}=f.useContext(fx),a=s(),i=f.useCallback(c=>{t.includes(c)&&(mh.startTime!==a&&(mh.startTime=a,mh.modules=new Set),!mh.modules.has(c)&&(r(`web.ttv.${c}`),mh.modules.add(c),t.every(u=>mh.modules.has(u))&&n()))},[r,a,t,n]),l=f.useMemo(()=>({markTTV:i}),[i]);return o.jsx(Z0e.Provider,{value:l,children:e})}function Cct(){const{markTTV:e}=f.useContext(Z0e);return e}function Iun(e={}){const t=bct();f.useEffect(()=>{e.skip||t()},[e.skip,t])}function Sp(e,t={}){const n=Cct();f.useEffect(()=>{t.skip||n(e)},[n,e,t.skip])}const Sct=({inPage:e})=>e?window.getSelection()?.toString():void 0;function Ect(){const{value:e}=Tat({flag:"client-context-max-chars",subjectType:"visitor_id",defaultValue:5e4});return e}function tV(){const{value:e}=Gxe({flag:"max-file-upload-count",subjectType:"user_nextauth_id",defaultValue:10});return e}const Mct=({isFollowup:e,isInSameThread:t,sourcesOverride:n,firstResultSources:r,firstResultRecency:s,defaultSources:a,defaultRecency:i})=>n?{finalSources:n,finalRecency:i}:!e||!t?{finalSources:a,finalRecency:i}:{finalSources:Array.isArray(r)?r:[],finalRecency:s};var TA,OJ;function kct(){if(OJ)return TA;OJ=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,c=typeof qi=="object"&&qi&&qi.Object===Object&&qi,u=typeof self=="object"&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),m=Object.prototype,p=m.toString,h=Math.max,g=Math.min,y=function(){return d.Date.now()};function x(C,S,E){var M,k,N,P,L,O,A=0,j=!1,T=!1,I=!0;if(typeof C!="function")throw new TypeError(e);S=w(S)||0,v(E)&&(j=!!E.leading,T="maxWait"in E,N=T?h(w(E.maxWait)||0,S):N,I="trailing"in E?!!E.trailing:I);function U(G){var J=M,K=k;return M=k=void 0,A=G,P=C.apply(K,J),P}function B(G){return A=G,L=setTimeout(z,S),j?U(G):P}function D(G){var J=G-O,K=G-A,te=S-J;return T?g(te,N-K):te}function W(G){var J=G-O,K=G-A;return O===void 0||J>=S||J<0||T&&K>=N}function z(){var G=y();if(W(G))return $(G);L=setTimeout(z,D(G))}function $(G){return L=void 0,I&&M?U(G):(M=k=void 0,P)}function X(){L!==void 0&&clearTimeout(L),A=0,M=O=k=L=void 0}function q(){return L===void 0?P:$(y())}function Y(){var G=y(),J=W(G);if(M=arguments,k=this,O=G,J){if(L===void 0)return B(O);if(T)return L=setTimeout(z,S),U(O)}return L===void 0&&(L=setTimeout(z,S)),P}return Y.cancel=X,Y.flush=q,Y}function v(C){var S=typeof C;return!!C&&(S=="object"||S=="function")}function b(C){return!!C&&typeof C=="object"}function _(C){return typeof C=="symbol"||b(C)&&p.call(C)==n}function w(C){if(typeof C=="number")return C;if(_(C))return t;if(v(C)){var S=typeof C.valueOf=="function"?C.valueOf():C;C=v(S)?S+"":S}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var E=a.test(C);return E||i.test(C)?l(C.slice(2),E?2:8):s.test(C)?t:+C}return TA=x,TA}var Tct=kct();const LJ=Ka(Tct);var nV=typeof window<"u"?f.useLayoutEffect:f.useEffect;function ib(e,t,n,r){const s=f.useRef(t);nV(()=>{s.current=t},[t]),f.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const i=l=>{s.current(l)};return a.addEventListener(e,i,r),()=>{a.removeEventListener(e,i,r)}},[e,n,r])}function QE(e){const t=f.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return nV(()=>{t.current=e},[e]),f.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[t])}var NA=typeof window>"u";function O_(e,t,n={}){const{initializeWithValue:r=!0}=n,s=f.useCallback(p=>n.serializer?n.serializer(p):JSON.stringify(p),[n]),a=f.useCallback(p=>{if(n.deserializer)return n.deserializer(p);if(p==="undefined")return;const h=t instanceof Function?t():t;let g;try{g=JSON.parse(p)}catch(y){return console.error("Error parsing JSON:",y),h}return g},[n,t]),i=f.useCallback(()=>{const p=t instanceof Function?t():t;if(NA)return p;try{const h=window.localStorage.getItem(e);return h?a(h):p}catch(h){return console.warn(`Error reading localStorage key ${e}:`,h),p}},[t,e,a]),[l,c]=f.useState(()=>r?i():t instanceof Function?t():t),u=QE(p=>{NA&&console.warn(`Tried setting localStorage key ${e} even though environment is not a client`);try{const h=p instanceof Function?p(i()):p;window.localStorage.setItem(e,s(h)),c(h),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}catch(h){console.warn(`Error setting localStorage key ${e}:`,h)}}),d=QE(()=>{NA&&console.warn(`Tried removing localStorage key ${e} even though environment is not a client`);const p=t instanceof Function?t():t;window.localStorage.removeItem(e),c(p),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))});f.useEffect(()=>{c(i())},[e]);const m=f.useCallback(p=>{p.key&&p.key!==e||c(i())},[e,i]);return ib("storage",m),ib("local-storage",m),[l,u,d]}function xf(e){const t=f.useRef(e);t.current=e,f.useEffect(()=>()=>{t.current()},[])}function Nct(e,t=500,n){const r=f.useRef();xf(()=>{r.current&&r.current.cancel()});const s=f.useMemo(()=>{const a=LJ(e,t,n),i=(...l)=>a(...l);return i.cancel=()=>{a.cancel()},i.isPending=()=>!!r.current,i.flush=()=>a.flush(),i},[e,t,n]);return f.useEffect(()=>{r.current=LJ(e,t,n)},[e,t,n]),s}function J0e({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:s=!1,onChange:a}={}){var i;const[l,c]=f.useState(null),[u,d]=f.useState(()=>({isIntersecting:s,entry:void 0})),m=f.useRef();m.current=a;const p=((i=u.entry)==null?void 0:i.isIntersecting)&&r;f.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||p)return;const y=new IntersectionObserver(x=>{const v=Array.isArray(y.thresholds)?y.thresholds:[y.thresholds];x.forEach(b=>{const _=b.isIntersecting&&v.some(w=>b.intersectionRatio>=w);d({isIntersecting:_,entry:b}),m.current&&m.current(_,b)})},{threshold:e,root:t,rootMargin:n});return y.observe(l),()=>{y.disconnect()}},[l,JSON.stringify(e),t,n,p,r]);const h=f.useRef(null);f.useEffect(()=>{var y;!l&&((y=u.entry)!=null&&y.target)&&!r&&!p&&h.current!==u.entry.target&&(h.current=u.entry.target,d({isIntersecting:s,entry:void 0}))},[l,u.entry,r,p,s]);const g=[c,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function eve(){const[e,t]=f.useState(!1);return f.useEffect(()=>{t(!0)},[]),e}function jct(){const e=f.useRef(!1);return f.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),f.useCallback(()=>e.current,[])}var DJ={width:void 0,height:void 0};function Act(e){const{ref:t,box:n="content-box"}=e,[{width:r,height:s},a]=f.useState(DJ),i=jct(),l=f.useRef({...DJ}),c=f.useRef(void 0);return c.current=e.onResize,f.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const u=new ResizeObserver(([d])=>{const m=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",p=FJ(d,m,"inlineSize"),h=FJ(d,m,"blockSize");if(l.current.width!==p||l.current.height!==h){const y={width:p,height:h};l.current.width=p,l.current.height=h,c.current?c.current(y):i()&&a(y)}});return u.observe(t.current,{box:n}),()=>{u.disconnect()}},[n,t,i]),{width:r,height:s}}function FJ(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}var jA=typeof window>"u";function rV(e,t,n={}){const{initializeWithValue:r=!0}=n,s=f.useCallback(p=>n.serializer?n.serializer(p):JSON.stringify(p),[n]),a=f.useCallback(p=>{if(n.deserializer)return n.deserializer(p);if(p==="undefined")return;const h=t instanceof Function?t():t;let g;try{g=JSON.parse(p)}catch(y){return console.error("Error parsing JSON:",y),h}return g},[n,t]),i=f.useCallback(()=>{const p=t instanceof Function?t():t;if(jA)return p;try{const h=window.sessionStorage.getItem(e);return h?a(h):p}catch(h){return console.warn(`Error reading sessionStorage key ${e}:`,h),p}},[t,e,a]),[l,c]=f.useState(()=>r?i():t instanceof Function?t():t),u=QE(p=>{jA&&console.warn(`Tried setting sessionStorage key ${e} even though environment is not a client`);try{const h=p instanceof Function?p(i()):p;window.sessionStorage.setItem(e,s(h)),c(h),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))}catch(h){console.warn(`Error setting sessionStorage key ${e}:`,h)}}),d=QE(()=>{jA&&console.warn(`Tried removing sessionStorage key ${e} even though environment is not a client`);const p=t instanceof Function?t():t;window.sessionStorage.removeItem(e),c(p),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))});f.useEffect(()=>{c(i())},[e]);const m=f.useCallback(p=>{p.key&&p.key!==e||c(i())},[e,i]);return ib("storage",m),ib("session-storage",m),[l,u,d]}var Ict=typeof window>"u";function Rct(e={}){let{initializeWithValue:t=!0}=e;Ict&&(t=!1);const[n,r]=f.useState(()=>t?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),s=Nct(r,e.debounceDelay);function a(){(e.debounceDelay?s:r)({width:window.innerWidth,height:window.innerHeight})}return ib("resize",a),nV(()=>{a()},[]),n}const mx=()=>{const[e,t]=O_("deviceLocation",void 0),n=f.useCallback(a=>{t(a),a?(rn("lat",a.latitude.toString()),rn("long",a.longitude.toString())):(Pm("lat"),Pm("long"))},[t]),[r,s]=f.useState(void 0);return f.useEffect(()=>{if(!navigator.geolocation||!("permissions"in navigator))return;const a=()=>{navigator.geolocation.getCurrentPosition(i=>{n({latitude:i.coords.latitude,longitude:i.coords.longitude})},null,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};navigator.permissions.query({name:"geolocation"}).then(i=>{s(i.state),i.state==="granted"?a():n(void 0),i.addEventListener("change",()=>{s(i.state),i.state==="denied"?n(void 0):i.state==="granted"&&a()})}).catch(()=>{})},[n]),f.useMemo(()=>({location:e,permissionStatus:r,isPreciseLocationEnabled:r==="granted"&&!isNaN(e?.latitude??0)&&!isNaN(e?.longitude??0)}),[e,r])},Bv=/<q>(.*?)<\/q>/s,UJ=(e,t)=>{if(!e||!t)return e;const n=e.trim(),r=n[n.length-1];return r&&!["!","?",".",":",";"].includes(r)?`${n}. ${t}`:`${n} ${t}`};function Iu(e,t){if(!e)return{quote:null,actualQuery:null};if(!Bv.test(e)){const l=t?.join(" ").trim();return{quote:null,actualQuery:l?UJ(e,l):e}}const s=e.match(Bv)?.[1]||null;let a=e.replace(Bv,"").trim();const i=t?.join(" ").trim();return i&&(a=UJ(a,i)),{quote:s,actualQuery:a}}function Pct(e,t){const n=t.trim();return n?Bv.test(e)?e.replace(Bv,`<q>${n}</q>`):e.length===0?n:`<q>${n}</q> ${e}`:e}var AA={};const Oct={submitQuery:()=>{ne.error("submitQuery must be used within PerplexityQueryStateProvider")},handleBotStep:()=>{ne.error("handleBotStep must be used within PerplexityQueryStateProvider")},deleteLastResult:()=>{ne.error("deleteLastResult must be used within PerplexityQueryStateProvider")},shouldShowProductFeedback:!1,shouldShowRecruitmentBanner:!1,feedbackEntryUUID:null,quote:null,setQuote:()=>{},updateLocalStatePostStream:()=>{}},Lct=3,Dct=6,Fct=2,tve=Yt("PplxQueryStateContext",Oct),Uct=(e,t,n,r,s)=>{if(!(n&&!r)&&!(e&&!t))return r?r.backend_uuid:s},Bct=({children:e,shouldFetchSettings:t})=>{const n="perplexity-query-state-provider",r=_t(),{trackEvent:s}=je(),{session:a}=Nt(),i=Jn(),{location:l}=mx(),[c,u]=f.useState(null),{device:{isWindowsApp:d,isMobile:m,isSamsungBrowser:p}}=Lt(),h=Xa(),g=wct(),{isMaxAssistantMode:y}=_n(),{sources:x,recency:v,isCopilot:b,setAskInputReasoningMode:_,setAskInputReasoningModelPreference:w,configuredModel:C}=rr(),{specialCapabilities:S}=ls(),E=Oo(),{firstResult:M,lastResult:k,actions:{setCurrentStreamId:N}}=Ht(),{hasAiProfile:P,queryCountMobile:L}=Sa({enabled:t,reason:n}),[O,A]=f.useState(!1),[j,T]=f.useState(!1),[I,U]=f.useState(null),B=lt(),{addKeyRequiringRerender:D}=yf(),{value:W}=Dt({flag:"skip-search-button",subjectType:"visitor_id",defaultValue:!1}),z=Ect(),{isIncognito:$}=Qa({reason:n}),[X,q]=f.useState(0),{sendQueryEventSingular:Y,maybeSendNthQueryEventSingular:G,sendResurrectedActivationEventSingular:J}=QB(),K=cs(),te=iet(),{value:re}=$r({flag:"power-user-recruitment-banner",defaultValue:!1}),{isMaxUpsellEnabled:se}=Ku(),{isMax:me}=Et(),{value:{max_results:oe,num_days:ge}}=jB({flag:"browser-history-summary-settings",defaultValue:{max_results:500,num_days:7}}),xe=tV(),ye=U0e(),_e=f.useCallback(({rawQuery:Re,dslQuery:Ae,fork:st,inPageOverride:it,copilotOverride:Se,existingEntryUUID:ue,existingUuid:ke,deletedUrls:et,redoSearch:Ge,attachments:ft,collection:Qe,modelPreferenceOverride:Ve,isRelatedQuery:Le,isSponsored:ot,relatedQueryUUID:vt,inDomain:Rt,inPage:jt,newFrontendContextUUID:dn,existingFrontendContextUUID:On,promptSource:yr,querySource:Ke,sourcesOverride:Xe,submitFromArticleOverride:gt,timeFromFirstType:zt,utmSource:hn,disableWidgets:zn,isNavSuggestionsDisabled:Me,deviceLocation:Ze,shouldRedirectToBackendUUID:$e,onThreadSlugReceived:at,incognitoOverride:ut,mentions:Bt=[],shouldUsePageStartTime:gn,side_by_side_metadata:Gn,frontendUUID:Zt=Ir(),alwaysSearchOverride:Hr,overrideNoSearch:Ni,resumingQuery:td,resumeFromUuid:fo,resumeFromPlaceholder:Al,cometIsMissionControl:Wp,maxAssistantEnabled:Hp,refinementFiltersMetadata:zp})=>{if(Re.trim().length===0&&!c){ne.error("Submit failed: empty query");return}const zr=Bt.filter(kr=>kr.type==="tab").map(kr=>({id:Number(kr.id),url:kr.url}));if(!B&&!p&&!S.unlimitedProSearch){const kr=X+1;m&&!Pg()?kr%Fct===1&&D("visitor-gate"):kr%Dct===0?D("visitor-gate-ii"):kr%Lct===0&&D("visitor-gate")}const zo=!!dn,Uc=[...new Set([...ft??[]])].slice(0,xe).filter(kr=>!et?.includes(kr)),ji=pn()&&(!!AA.NEXT_PUBLIC_IS_SIDECAR_BUILD||!!zr?.length),qp=ji?Ei():void 0,Il=(Se??b)||!!AA.NEXT_PUBLIC_IS_SIDECAR_BUILD||S.unlimitedProSearch,nC=Il?"copilot":"concise";let Ma=C??de.DEFAULT;Ma===de.DEFAULT&&S.unlimitedProSearch&&(Ma=de.PRO),(h===ce.RESEARCH||h===ce.STUDIO||h===ce.STUDY)&&(Ma=h===ce.RESEARCH?de.ALPHA:h===ce.STUDIO?de.BETA:de.STUDY,se&&me&&(Ma=C));const rC=tge.some(kr=>kr.is_reasoning_model&&kr.search_model===Ma);Ve?Ma=Ve:(_(rC),rC||w(null));const Kp=Uct(zo,st??!1,M?.backend_uuid===ue,gt??null,k?.backend_uuid??null);UOe(),BOe(()=>{s("resurrected activated"),J()}),Yr(Ma)===ce.RESEARCH?VOe():Yr(Ma)===ce.STUDIO&&$Oe();const sC=!!Kp,Xx=M?.frontend_context_uuid===On,Yp=Mct({isFollowup:sC,isInSameThread:Xx,sourcesOverride:Xe,firstResultSources:M?.sources?.sources,firstResultRecency:M?.search_recency_filter,defaultSources:x??[],defaultRecency:v??null}),{finalRecency:Zx,finalSources:Rl}=Yp;let nd;K.mcpTools&&(nd=Object.entries(K.mcpTools).filter(([kr])=>!K.mcpDisabledServers?.has(kr)).flatMap(([kr,oC])=>{const lC=K.mcpToolsSettings?.[kr]??{};return oC.filter(Jx=>{const cC=Jx.tool?.name??Jx.id??"",e0=lC[cC];return e0?e0.enabled!==!1:!0})}));const Qp=Sct({inPage:it??jt})||c,Xp=(Qp?Pct(Re,Qp):Re).trim();if(!Xp){ne.error("Submit failed: empty query");return}const QN=ue==M?.backend_uuid||!Kp,iC=SJe({rawQuery:Xp,fork:st,existingEntryUUID:ue,existingUuid:ke,collection:Qe,isRelatedQuery:Le,newFrontendContextUUID:dn,existingFrontendContextUUID:On,submitFromArticleOverride:gt,isNavSuggestionsDisabled:Me,isCopilot:Il,modelPreferenceSubmit:Ma,newAttachments:Uc,firstResultFrontendContextUUID:M?.frontend_context_uuid,isPersonalized:P,forceNew:zo,querySource:Ke,lastResultBackendUUID:k?.backend_uuid,finalSources:Rl,finalRecency:Zx??void 0,uuid:Zt,threadMetadataTitle:M?.thread_title,threadMetadataThreadUrlSlug:M?.thread_url_slug,side_by_side_metadata:Gn}),Zp=cct({redoSearch:Ge,collection:Qe,dslQuery:Ae,isRelatedQuery:Le,isSponsored:ot,relatedQueryUUID:vt,inDomain:Rt,inPage:jt,newFrontendContextUUID:dn,promptSource:yr,querySource:Ke,timeFromFirstType:zt,utmSource:hn,disableWidgets:zn,isNavSuggestionsDisabled:Me,isWindowsApp:d,isIncognito:ut??$,sessionId:a?.user?.id,modelPreferenceSubmit:Ma,clientPayloadUUID:qp,lastBackendUUID:Kp,deviceLocation:Ze=Ze??l,newAttachments:Uc,threadMetadataRwToken:E,forceNew:zo,finalSources:Rl,finalRecency:Zx,mode:nC,frontendUUID:Zt,entropyBrowser:i,existingEntryUUID:ue,deletedUrls:et,browserHistorySummaryNumDays:ge,mentions:Bt,side_by_side_metadata:Gn,reason:n,skipSearchEnabled:W,browserHistorySummaryMaxResults:oe,sidecarTabId:K.sidecarSourceTab.tabId,sidecarTitle:K.sidecarSourceTab.title,sidecarUrl:K.sidecarSourceTab.url,sidecarSecondaryTabId:K.sidecarSourceTab.secondaryTab?.tabId,sidecarSecondaryUrl:K.sidecarSourceTab.secondaryTab?.url,sidecarSecondaryTitle:K.sidecarSourceTab.secondaryTab?.title,isFirstEntry:QN,alwaysSearchOverride:Hr,overrideNoSearch:Ni,cometMaxAssistantEnabled:Hp||y,resumingQuery:td,resumeFromUuid:fo,cometIsMissionControl:Wp,mcpTools:nd,refinementFiltersMetadata:zp});dn&&ye(Xp,Zp,Zp.frontend_uuid),u(null);const XN={params:{...Zp,version:Sl},query_str:Xp};function ZN(kr){if(at){if(!kr.thread_url_slug)throw new Error("thread_url_slug is required on first message");at(kr.thread_url_slug)}$e&&r.push(`/search/${kr.thread_url_slug}`)}const Pl=te(XN,{onFirstMessageReceived:ZN,placeholderChunk:Al||{...iC,backend_uuid:ue||Sge},timer:gn?g():rc(void 0,{nowFromTimeOrigin:performance.now()}),reason:n});ji&&qp&&Lpe({clientPayloadCacheKey:qp,cometBrowser:i,maxChars:z,attachedTabs:zr,includeSidecar:!!AA.NEXT_PUBLIC_IS_SIDECAR_BUILD,reason:n,cometState:K,requestId:Pl.id.description}),N(Pl.id.description)},[c,B,xe,b,C,h,k?.backend_uuid,M?.frontend_context_uuid,M?.sources?.sources,M?.search_recency_filter,M?.thread_title,M?.thread_url_slug,M?.backend_uuid,x,v,P,d,$,a?.user,l,E,i,ge,W,oe,K,te,g,N,X,m,p,D,se,me,_,w,s,J,ye,z,r,y,S]),be=f.useCallback(Re=>{xct({response:Re,isUserLoggedIn:B,submissionCount:X,session:a??void 0,queryCountMobile:L,isWindowsApp:d,addKeyRequiringRerender:D,setSubmissionCount:q,setShouldShowProductFeedback:A,setShouldShowRecruitmentBanner:T,setFeedbackEntryUUID:U,trackEvent:s,sendQueryEventSingular:Y,maybeSendNthQueryEventSingular:G,recruitmentBannerEnabled:re,reason:n})},[D,B,d,L,Y,G,a,X,s,re]),Ne=U3(),Ee=f.useCallback(async()=>{const Re=k?.backend_uuid;!Re||!E||(s("delete last result",{entryUUID:Re}),await ae.DELETE("/rest/entry/delete-ask-entry/{entry_uuid}",n,{params:{path:{entry_uuid:Re}},body:{read_write_token:E}}),Ne(Ae=>{if(!Ae)return;const st=Ae??[];if(st.length<1){r.push("/",void 0,"Delete last result");return}return st.slice(0,-1)}))},[k?.backend_uuid,E,s,Ne,r]);return o.jsx(tve.Provider,{value:{submitQuery:_e,deleteLastResult:Ee,shouldShowProductFeedback:O,feedbackEntryUUID:I,quote:c,setQuote:u,shouldShowRecruitmentBanner:j,updateLocalStatePostStream:be},children:e})},ta=()=>{const e=f.useContext(tve);if(!e)throw new Error("usePerplexityQueryState must be used within PerplexityQueryStateContext");return e},Vct="/account/connectors",BJ={GCAL_CONNECT:"gcal_connect",CONNECTOR_COMPLETE:"connector_complete"},$ct={UPSELL_CONNECTOR:"upsell-connector-channel"},Run="18334363285",d5=async(e,t)=>{try{const{error:n}=await ae.POST("/rest/homepage-widgets/upsell/interacted","homepage upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:Fe(),numRetries:1});n&&ne.error("Failed to mark upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ne.error("Error marking upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}},Wct=async(e,t)=>{try{const{error:n}=await ae.POST("/rest/ntp/upsell/interacted","comet ntp upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:Fe(),numRetries:1});n&&ne.error("Failed to mark NTP upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ne.error("Error marking NTP upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}},Hct=(e,t)=>e.filter(n=>n.name===t).map(n=>n.connection_uuid).filter(n=>n!=null),zct=e=>({google_drive:"GOOGLE_DRIVE",onedrive:"ONEDRIVE",sharepoint:"SHAREPOINT",dropbox:"DROPBOX",box:"BOX",notion:"NOTION",notion_mcp:"NOTION_MCP",linear:"LINEAR",linear_alt:"LINEAR_ALT",wiley:"WILEY",gcal:"GCAL",outlook:"OUTLOOK",slack:"SLACK",github_mcp_direct:"GITHUB_MCP_DIRECT",asana_mcp_direct:"ASANA_MCP_DIRECT",asana_mcp_merge:"ASANA_MCP_MERGE",atlassian_mcp_direct:"ATLASSIAN_MCP_DIRECT",slack_direct:"SLACK_DIRECT",jira_mcp_merge:"JIRA_MCP_MERGE",confluence_mcp_merge:"CONFLUENCE_MCP_MERGE",microsoft_teams_mcp_merge:"MICROSOFT_TEAMS_MCP_MERGE",factset:null,crunchbase:null,edgar:null,wiley_mcp_cashmere:null})[e]??null,Gct=e=>e==="LINEAR"||e==="NOTION_MCP"||e==="LINEAR_ALT"||e==="SLACK"||e==="GITHUB_MCP_DIRECT"||e==="ASANA_MCP_DIRECT"||e==="ASANA_MCP_MERGE"||e==="ATLASSIAN_MCP_DIRECT"||e==="SLACK_DIRECT"||e==="JIRA_MCP_MERGE"||e==="CONFLUENCE_MCP_MERGE"||e==="MICROSOFT_TEAMS_MCP_MERGE",Pun=e=>["gcal","outlook","factset","linear","linear_alt","notion_mcp","slack","github_mcp_direct","asana_mcp_direct","asana_mcp_merge","atlassian_mcp_direct","slack_direct","jira_mcp_merge","confluence_mcp_merge","microsoft_teams_mcp_merge","wiley_mcp_cashmere"].includes(e);var C0={};const qct={logged_out_image_generation:De.IMAGE_GENERATION_IN_THREAD,logged_out_video_generation:De.VIDEO_GENERATION_IN_THREAD,subscription_upgrade_video_generation:De.VIDEO_GENERATION_IN_THREAD,missing_out_on_pro:De.MISSING_OUT_ON_PRO_IN_THREAD,auto_upgrade_to_pro:De.AUTO_UPGRADE_TO_PRO,pro_feature_limit_queries:De.PRO_FEATURE_LIMIT_BANNER,pro_feature_limit_files:De.PRO_FEATURE_LIMIT_BANNER,login_for_comet_agent_queries:De.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD,comet_agent_queries_rate_limited:De.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD,pro_upgrade:De.PRO_UPGRADE_IN_SIDE_HOMEPAGE,max_feature_limit_labs_queries:De.PRO_FEATURE_LIMIT_BANNER,enterprise_max_side:De.ENTERPRISE_MAX_UPSELL},L_=(e,t,n)=>{const r=lt(),{openVisitorLoginUpsell:s}=gr({enabled:!r}),{trackEvent:a}=je(),{lastResult:i}=Ht(),{openModal:l}=wt(),c=pn(),u="?handle_upsell=true",{submitQuery:d}=ta(),m=Jn(),{handleVerificationSuccess:p}=Elt({origin:De.STUDENT_VERIFICATION_UPSELL}),h=C0.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":c?"search_results_page":void 0,{subscriptionTier:g}=Et(),{device:{isWindowsOS:y,isMacOS:x}}=Lt(),v=_t(),{handleConnect:b}=Q3({reason:"upsell"}),{mutateAsync:_}=Qot({reason:"upsell"}),w=YB(),{handleCreateNewSpaceForThread:C}=KB(),{connectors:S}=Sa({reason:"upsell"}),{handleDownloadClick:E}=ult({isWindows:y,isUnsupportedDevice:!x&&!y}),M=co(),k=e?.cta_information?.merge_auth_token,N=e?.cta_information?.merge_auth_callback_uuid,P=B=>{if(B)try{return JSON.parse(B)}catch{return B}},{open:L,isReady:O}=j0e({linkToken:P(k),onSuccess:()=>{N&&vye({uuid:N,success:!0,reason:"Account successfully connected"}),v.push(window.location.pathname+u)}}),A=f.useCallback(async()=>{try{await m.setCometAsDefaultBrowser("set_default_browser")}catch{}},[m]);f.useEffect(()=>{if(!C0.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const B=new BroadcastChannel($ct.UPSELL_CONNECTOR);return B.onmessage=D=>{D.data.type===BJ.CONNECTOR_COMPLETE&&(window.focus(),window.location.href=window.location.pathname+u)},()=>{B.close()}},[u]);const j=f.useCallback(()=>{if(e)switch(e.app_location){case nu.MODAL:a("upsell modal opened",{entryUUID:i?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:h,subscriptionTier:g});break;case nu.IN_THREAD:case nu.IN_THREAD_BOTTOM:case nu.IN_THREAD_INPUT:a("thread upsell banner clicked",{entryUUID:i?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:h,subscriptionTier:g});break;case nu.SIDEBAR:case nu.SIDE_CARD:a("side upsell clicked",{upsellType:e.upsell_type,upsellName:e.name,cometSurface:h});break}},[i,a,e,h,g]),T=f.useCallback(()=>{i?.query_str&&d({rawQuery:i.query_str,existingEntryUUID:i.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:i.frontend_context_uuid,promptSource:"user",querySource:"rewrite-upsell",attachments:[],modelPreferenceOverride:e?.cta_information?.model_preference??"pplx_pro"})},[i,d,e]),I=f.useCallback(()=>{if(!e)return;const{permalink_new_tab:B,permalink:D}=e.cta_information??{};D&&(B?window.open(D,"_blank"):window.location.href=D)},[e]);return f.useCallback(()=>{if(!e)return;const B=e.cta===ti.SHORTCUT_MODAL?e.cta_information?.recommended_shortcut?.name:void 0;d5(e.name,B),j();const D=qct[e.name]??De.UNSPECIFIED_GENERALIZED_UPSELL;let W=i?.thread_url_slug?`/search/${i.thread_url_slug}${u}`:void 0;(window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants"))&&(W=`/b/assistants${u}`);const $=i?.thread_url_slug?`/search/${i.thread_url_slug}`:void 0;switch(e.cta){case ti.SIGN_UP_OR_LOGIN:if(C0.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;s({title:e.title,description:e.description,origin:D});break;case ti.PRO_UPGRADE:M({pitchMessage:e.cta_information?.upgrade_paywall_title?{title:e.cta_information.upgrade_paywall_title}:void 0,origin:D});break;case ti.THREAD_TO_SPACE:{if(!i?.backend_uuid)return;w?C(i?.backend_uuid,i?.frontend_context_uuid):l("spaceCreateForThread",{entryUUID:i?.backend_uuid,frontendContextUUID:i?.frontend_context_uuid});break}case ti.CONNECTOR:if(!C0.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"){const X="gcal",q=Hct(S?.connectors??[],X);for(const Y of q)_({connectorName:X,connectionUUID:Y});b({connectorName:X,redirectPath:W,unauthedRedirectPath:$})}else C0.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"?window.open(`${window.location.origin}${Vct}?connector_type=${BJ.GCAL_CONNECT}`,"_blank"):ne.error("Unhandled upsell connector type",{connectorType:e.cta_information?.connector_type});break;case ti.REWRITE_ANSWER:t&&i?.backend_uuid?Au({entryUUID:i?.backend_uuid,reason:"rewrite-upsell"}).catch(()=>{ne.error("Error terminating entry")}).finally(T):T();break;case ti.PERMALINK:{I();break}case ti.SET_DEFAULT_BROWSER:{A();break}case ti.IMAGE_ANNOUNCEMENT_MODAL:{if(!e.image_asset||!e.image_asset_low_res||!e.button_text)return;let X=e.cta;e.upsell_type===o8.DOWNLOAD_COMET&&(X=ti.COMET_DOWNLOAD),l("announcementImageModal",{imageUrlHd:e.image_asset,imageUrlLowRes:e.image_asset_low_res,title:e.title??"",description:e.description??"",upsellInformation:{...e,cta:X}});break}case ti.COMET_DOWNLOAD:{E({upsellName:e.name});break}case ti.MERGE_AUTH_CONNECTOR:{k&&O&&L();break}case ti.SHORTCUT_MODAL:{const X=e.cta_information?.recommended_shortcut;l("taskShortcutModal",{source:"thread_upsell_create",onCreated:n?.hideUpsell,shortcut:X?{title:X.name,prompt:X.prompt}:void 0});break}case ti.OPEN_SHEERID_MODAL:{a("sheerid form redirect",{verificationLocationSource:De.STUDENT_VERIFICATION_UPSELL,verificationRoleType:"student"}),l("sheerIdModal",{onSuccess:p,type:"student"});break}}},[e,j,i?.thread_url_slug,i?.backend_uuid,i?.frontend_context_uuid,u,s,M,l,t,w,C,S?.connectors,b,_,T,I,A,E,p,k,O,L,n?.hideUpsell,a])},f5=R.memo(({upsellInformation:e,inFlight:t,position:n,onButtonClick:r,isLoading:s,textButtonIfSecondary:a=!1,hideUpsell:i,verticalLayout:l=!1})=>{const{$t:c}=Z(),u=L_(e,t,{hideUpsell:i}),d=f.useCallback(()=>{r?.(),u()},[r,u]),m=f.useMemo(()=>{if(n==="router_steps")return"inverted";switch(e?.button_color){case wC.MAX_COLOR:return"maxGold";case wC.PRIMARY_COLOR:return"primary";case wC.INVERTED:return"inverted";default:return"common"}},[e?.button_color,n]),p=f.useCallback(h=>{let g;e?.icon_reference==="labs"?g=o.jsx(le,{icon:ur,size:"sm"}):e?.icon_reference==="comet_download"&&(g=o.jsx(vp,{size:16}));const y={size:h?"regular":"small",onClick:d,text:e?.button_text,leadingComponent:g,textClassName:h?"!text-sm":void 0,fullWidth:!0,isLoading:s};return a&&e?.button_color===wC.SECONDARY_COLOR?o.jsx(Te,{...y,variant:"super",noPadding:!0}):o.jsx(pe,{...y,variant:m})},[m,d,e?.button_color,e?.button_text,e?.icon_reference,a,s]);if(e?.cta_information?.secondary_permalink){const h=e.cta_information.secondary_permalink,g=e.cta_information.secondary_permalink_new_tab,y=o.jsx(Te,{text:c({defaultMessage:"Learn more",id:"TdTXXf940t"}),fullWidth:!0,variant:"super",textClassName:"!text-sm",noPadding:!0,onClick:()=>{g?window.open(h,"_blank"):ml(h,"Learn more from upsell")}});return o.jsx("div",{className:`gap-md flex ${l?"flex-col":"flex-row"}`,children:l?o.jsxs(o.Fragment,{children:[p(!0),y]}):o.jsxs(o.Fragment,{children:[y,p(!0)]})})}return p(!1)});f5.displayName="UpsellButton";function Kct({onClose:e,announcementImageModal:t}){const{imageUrlHd:n,imageUrlLowRes:r,title:s,description:a,upsellInformation:i}=t,[l,c]=f.useState(!1),[u,d]=f.useState(!1);return f.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>d(!0);const p=new Image;return p.src=n,p.onload=()=>c(!0),()=>{m.onload=null,p.onload=null}},[r,n]),o.jsx(on,{isOpen:!0,onClose:e,variant:"hide-chrome",actionList:fe,children:o.jsxs(H,{variant:"background",className:V("p-sm mx-auto flex w-[32rem] max-w-lg flex-col overflow-hidden rounded-xl transition-opacity duration-150 ease-in",{"opacity-100":u,"opacity-0":!u}),children:[o.jsxs("div",{className:"relative w-full overflow-hidden rounded-lg",children:[o.jsx("img",{src:r,alt:s,className:"w-full scale-[1.01] blur-[0.5px]"}),o.jsx("img",{src:n,alt:s,className:V("absolute inset-0 w-full transition-opacity duration-200 ease-out",{"opacity-100":l,"opacity-0":!l})})]}),o.jsxs("div",{className:"p-md gap-sm flex flex-col items-center text-center",children:[s&&o.jsx(F,{variant:"entry-title-200",children:s}),a&&o.jsx(F,{variant:"small",color:"light",className:"mb-sm px-1",children:a}),o.jsx("div",{className:"w-1/2",children:o.jsx(f5,{upsellInformation:i,hideUpsell:e,verticalLayout:!0})})]})]})})}function nve(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}const Yct=({children:e,className:t,delimiter:n="",...r})=>{const s=R.Children.toArray(e),a=s.map((i,l)=>{if(R.isValidElement(i)&&i.type===rve){const c=i.props.id;return o.jsxs(R.Fragment,{children:[i,l!==s.length-1&&o.jsxs(F,{className:"inline-flex !text-inherit",children:[" ",n," "]})]},c)}return null});return o.jsx("div",{className:`gap-sm flex items-center ${t}`,...r,children:a})},rve=({children:e})=>o.jsx(o.Fragment,{children:e}),Ru=Yct,Vr=rve,Qct=1080;function hi(e){return typeof e=="string"?S2(e).startsWith("image/"):e.type.startsWith("image/")}const sve=(e,t=32)=>`https://www.google.com/s2/favicons?sz=${t}&domain=${e}`,Xct=(e,t,n)=>{const r=Math.min(e,t);if(r<=n)return{width:e,height:t};const s=n/r;return{width:Math.round(e*s),height:Math.round(t*s)}},Zct=(e,t=Qct,n=.98)=>new Promise((r,s)=>{if(!hi(e)){s(new Error("File is not an image."));return}const a=document.createElement("canvas"),i=a.getContext("2d",{alpha:!0,colorSpace:"srgb"}),l=new Image,c=URL.createObjectURL(e);if(!i){s(new Error("Could not get canvas context"));return}i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",l.onload=()=>{const u=Xct(l.width,l.height,t);a.width=u.width,a.height=u.height;const d="image/jpeg",m=n;i.fillStyle="#fff",i.fillRect(0,0,a.width,a.height),i.drawImage(l,0,0,u.width,u.height),a.toBlob(p=>{if(!p){s(new Error("Failed to create blob from canvas"));return}const g=e.name.replace(/\.[^/.]+$/,"")+".jpg",y=new File([p],g,{type:d});URL.revokeObjectURL(c),r(y)},d,m)},l.onerror=()=>{URL.revokeObjectURL(c),s(new Error("Failed to load image."))},l.src=c}),Jct={"my.apps.factset.com":"www.factset.com"},pl=R.memo(({domain:e,overrideIconUrl:t,size:n=16,hideBorder:r=!1,className:s,...a})=>{const i=Jct[e]||e,l=sve(i,128),c=f.useMemo(()=>t||l,[t,l]),[u,d]=f.useState(!0);f.useEffect(()=>{d(!0)},[c]);const m=f.useMemo(()=>({width:n,height:n}),[n]),p=f.useMemo(()=>({width:n*.7,height:n*.7}),[n]);return o.jsxs("div",{style:{width:n,height:n},className:V("relative shrink-0 overflow-hidden rounded-full",s),...a,children:[u?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:V("rounded-inherit absolute inset-0",!r&&"bg-white")}),o.jsx("img",{className:"relative block",src:c,alt:`${e} favicon`,width:n,height:n,onLoad:h=>{const g=h.target,y=t!==void 0||g.naturalWidth!==16||g.naturalHeight!==16;d(y||e!==i)},onError:()=>{d(!1)},style:{width:n,height:n}})]}):o.jsx(H,{variant:"subtler",style:m,className:"flex items-center justify-center",children:o.jsx(F,{color:"ultraLight",children:o.jsx(le,{icon:uf,className:"relative block",style:p})})}),!r&&o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})});pl.displayName="CitationFavicon";const yo={PDF:"pdf",TXT:"txt",CSV:"csv",XLSX:"xlsx",DOCX:"docx",PPTX:"pptx",MARKDOWN:"md",JSON:"json",JPG:"jpg",JPEG:"jpeg",PNG:"png"},Oun=e=>!!(E_(e)===yo.PDF||P_(e)),eut=e=>{const t=E_(e);if(P_(e))return Dm;switch(t){case yo.TXT:return Fi;case yo.MARKDOWN:return Fi;case yo.PDF:return Dm;case yo.XLSX:return t_;case yo.CSV:return NLe;case yo.DOCX:return TLe;case yo.PPTX:return kLe;case yo.JPG:case yo.JPEG:case yo.PNG:return df;default:return wu}},tut={[Ot.GOOGLE_DRIVE]:OLe,[Ot.ONEDRIVE]:PLe,[Ot.SHAREPOINT]:Tue,[Ot.DROPBOX]:RLe,[Ot.BOX]:ILe,[Ot.GENERATED_IMAGE]:df,[Ot.GENERATED_VIDEO]:kue,[Ot.NOTION]:ALe,[Ot.WILEY]:jLe,[Ot.LOCAL]:wu},sV=R.memo(({url:e,isConversationHistory:t,isMemory:n,isInlineAttachment:r,connectionType:s,isAttachment:a,isPatent:i,isClientContext:l})=>{const c=f.useMemo(()=>{const u=R_(e),d=a?eut(e):null;if(t)return o.jsx(le,{icon:bp,size:"xs"});if(i)return o.jsx(le,{icon:Nue,size:"xs"});if(n)return o.jsx(le,{icon:sc,size:"xs"});if(r)return o.jsx(le,{icon:Fk,size:"xs"});if(s){const m=tut[s];return m?o.jsx(le,{icon:m}):o.jsx(pl,{domain:u})}else return a?o.jsx(le,{icon:d||wu,size:"xs"}):l?o.jsx(le,{icon:LLe,size:"xs"}):o.jsx(pl,{domain:u})},[e,t,n,r,s,a,i,l]);return o.jsx("div",{className:"flex size-4 items-center justify-center",children:c})});sV.displayName="Icon";const aV=R.memo(({url:e,source:t,isAttachment:n,connectionType:r,isConversationHistory:s})=>{const a=Z(),i=f.useMemo(()=>{if(s)return a.formatMessage({defaultMessage:"library",id:"B7J+pmy9R5"});if(t!=null)return t;let l;return n?l=u5(e):r?l=iB(r):l=ha(e),l.replace(/\.[^.]*$/,"")},[e,t,n,r,s,a]);return o.jsx(o.Fragment,{children:i})});aV.displayName="Source";const ave=R.memo(({url:e,source:t,isAttachment:n,isClientContext:r,variant:s="small",color:a="default",truncate:i=!0,className:l,connectionType:c,isInlineAttachment:u,isMemory:d,isPatent:m,isConversationHistory:p,name:h,snippet:g,...y})=>o.jsxs(H,{className:"flex items-center gap-x-1.5",children:[o.jsx(F,{variant:s,className:"relative -mt-px flex-none",color:d||p?"light":a,children:o.jsx(sV,{url:e,isConversationHistory:p,isMemory:d,isInlineAttachment:u,connectionType:c,isAttachment:n,isPatent:m,isClientContext:r})}),h&&o.jsx(F,{variant:s,color:a,...y,className:V(l,"min-w-0 truncate"),children:h}),o.jsx(F,{variant:s,color:h?"light":a,className:V("line-clamp-1 min-w-0 grow break-all transition-all duration-300",{"max-w-[150px]":t!=null&&i},l),...y,children:o.jsx(aV,{url:e,source:t,isAttachment:n,connectionType:c,isMemory:d,isConversationHistory:p})})]}));ave.displayName="CitationDomainRoot";const eo=Object.assign(ave,{Icon:sV,Source:aV}),px=R.memo(({isOpen:e,onClose:t,imgProps:n,alt:r,width:s,height:a,origin:i,onDownload:l,footer:c})=>{const{url:u,name:d,showCitation:m=!0}=i||{},p=Ca(),h=f.useCallback(g=>{g.stopPropagation(),l?.()},[l]);return o.jsxs(on,{onClose:t,isOpen:e,variant:"hide-chrome",disableAnimation:!1,removeScroll:!p,modalClassname:"z-[100]",children:[o.jsx("div",{className:"flex h-screen w-screen place-content-center",onClick:t,children:o.jsxs("div",{className:V("gap-md p-md md:p-lg flex w-full flex-col",{"md:pb-md":m&&(u||l)}),children:[o.jsx("div",{className:"relative grow",children:o.jsx("div",{className:"absolute inset-0 size-full",children:o.jsx("img",{width:s,height:a,...n,alt:r,className:"size-full object-contain"})})}),m&&(u||l)?o.jsxs("div",{className:"gap-sm flex w-full flex-row justify-center",children:[u&&o.jsx(Ye,{href:u,target:"_blank",children:o.jsxs(H,{variant:"subtle",className:"gap-x-xs p-sm flex items-center rounded-full",children:[o.jsx(eo,{url:u,source:d,isAttachment:!1}),o.jsx(F,{variant:"small",className:"pr-xs",children:o.jsx(le,{icon:xa,size:"xs"})})]})}),l&&o.jsx(H,{as:"button",onClick:h,variant:"subtle",className:"gap-x-xs p-sm flex !aspect-square w-9 items-center justify-center rounded-full",children:o.jsx(le,{icon:vp,size:"sm"})})]}):null,c]})}),o.jsx(pe,{onClick:t,icon:It,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});px.displayName="LightboxImage";const Ss=R.memo(({src:e,lightboxSrc:t,alt:n,fadeIn:r,fallbackSrc:s,fallback:a,hasShadow:i=!1,includeLightBoxModal:l=!0,lightboxFooter:c,origin:u,draggable:d=!0,imageClassName:m,maskClassName:p,containerClassName:h,rounded:g="md",onClick:y,AIProps:x,authorName:v,authorUrl:b,onLoad:_,onFail:w,softBlockSaveImage:C=!1,imageRef:S,imageProps:E,testId:M,onDownload:k,...N})=>{const[P,L]=f.useState(!1),[O,A]=f.useState(!1),[j,T]=f.useState(!1),I=f.useRef(null),{isAI:U,AILabel:B}=x||{isAI:!1,AILabel:""},D=f.useCallback(()=>{L(!0),w?.()},[]),W=f.useCallback(()=>{A(!0),_?.()},[A,_]);f.useEffect(()=>{if(I.current){if(I.current.complete){W();return}I.current.src||(I.current.src=e)}},[e,W,I]);const z=V(m,"transition-all ease-in-out",{"opacity-100 duration-200 scale-100":O&&r,"opacity-0 scale-[0.98]":!O&&r,"hidden opacity-0":P&&!s,"max-h-[90vh]":l,"cursor-zoom-in hover:shadow-lg duration-200 ":l&&!j}),$=f.useMemo(()=>({className:z,src:e,alt:n,onError:D,onClick:()=>T(!0),...E}),[n,z,E,D,e]),X=f.useMemo(()=>({ref:I,onLoad:W,...$}),[W,$]),q=f.useMemo(()=>({...$,src:t??e}),[t,$,e]),Y=f.useCallback(K=>{K.stopPropagation()},[]),G=o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"tiny",color:"white",className:"px-xs py-two h-5 rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:o.jsxs(Ru,{className:"gap-xs",children:[o.jsx(Vr,{id:"authorName",children:v}),b?o.jsx(Vr,{id:"authorDomain",children:ha(b)}):null]})}),o.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"})]}),J=f.useCallback(()=>T(!1),[]);if(P){if(s&&I.current)I.current.src=s;else if(a!==void 0)return a}return o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:y,className:h,"data-testid":M,children:o.jsxs("div",{className:V("bg-subtler group relative size-full overflow-hidden",p,{"shadow-md":i&&O,"transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg":i,"rounded-sm":g==="sm","rounded-md":g==="md",rounded:g===!0}),children:[U&&o.jsxs("div",{className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:[o.jsx("div",{children:o.jsx(F,{variant:"tiny",color:"white",className:"gap-x-two px-xs py-two flex h-5 items-center rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:o.jsx("span",{children:B})})}),o.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"}),o.jsx("div",{children:o.jsx(F,{variant:"tiny",color:"white",className:"gap-x-two p-two flex h-5 items-center rounded-md bg-black/60",children:o.jsx(le,{icon:DLe,size:"xs"})})})]}),v&&(b?o.jsx(Ye,{href:b??"",target:"_blank",onClick:Y,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:G}):o.jsx("div",{onClick:Y,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:G})),C&&!U&&o.jsx("div",{className:"absolute inset-0",onClick:l?()=>T(!0):void 0}),o.jsx("img",{width:N.width,height:N.height,alt:n,...X,ref:nve([S,I]),draggable:d})]})}),l&&o.jsx(px,{onClose:J,isOpen:j,imgProps:q,origin:u,width:N.width,height:N.height,alt:n,onDownload:k,footer:c})]})});Ss.displayName="Image";const ive=R.memo(({isOpen:e,onClose:t,onCapture:n})=>{const r=f.useRef(null),s=f.useRef(null),a=f.useRef(null),[i,l]=f.useState(!1),[c,u]=f.useState(null),[d,m]=f.useState(null),p=f.useCallback(async()=>{try{a.current&&a.current.getTracks().forEach(w=>w.stop());const _=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});a.current=_,r.current&&(r.current.srcObject=_,l(!0),m(null))}catch{m("Unable to access camera. Please check your permissions."),l(!1)}},[]),h=f.useCallback(()=>{a.current&&(a.current.getTracks().forEach(_=>_.stop()),a.current=null,l(!1)),r.current&&(r.current.srcObject=null)},[]),g=f.useCallback(()=>{if(r.current&&s.current){const _=r.current,w=s.current,C=w.getContext("2d");if(C){w.width=_.videoWidth,w.height=_.videoHeight,C.drawImage(_,0,0,w.width,w.height);const S=w.toDataURL("image/jpeg",.95);u(S),h()}}},[h]),y=f.useCallback(()=>{u(null),p()},[p]),x=f.useCallback(()=>{m(null),p()},[p]),v=f.useCallback(()=>{h(),u(null),m(null),t()},[h,t]),b=f.useCallback(async()=>{if(c)try{const w=await(await fetch(c)).blob(),C=new File([w],"selfie.jpg",{type:"image/jpeg"});n(C),v()}catch{m("Failed to process the image. Please try again.")}},[c,n,v,m]);return f.useEffect(()=>(e&&!c&&!d&&p(),()=>{h()}),[e,c,d,p,h]),o.jsxs(on,{isOpen:e,onClose:v,title:"Take a Selfie",children:[o.jsx("div",{className:"p-lg",children:d?o.jsxs("div",{className:"gap-md flex h-[400px] flex-col items-center justify-center",children:[o.jsx(F,{variant:"base",color:"red",children:d}),o.jsx(pe,{text:"Try again",variant:"primary",onClick:x})]}):c?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-subtler relative aspect-video overflow-hidden rounded-lg",children:o.jsx(Ss,{src:c,alt:"Captured selfie",className:"size-full object-contain"})}),o.jsxs("div",{className:"mt-lg gap-sm flex justify-center",children:[o.jsx(pe,{text:"Retake",variant:"border",onClick:y}),o.jsx(pe,{text:"Use this photo",variant:"primary",onClick:b})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-subtler relative aspect-video overflow-hidden rounded-lg",children:[o.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"size-full object-contain"}),!i&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(F,{variant:"small",color:"light",children:"Starting camera..."})})]}),o.jsxs("div",{className:"mt-md gap-xs flex flex-col items-center",children:[o.jsx(F,{variant:"small",color:"light",className:"text-center",children:"Position your face in the center of the frame"}),o.jsx(F,{variant:"tiny",color:"ultraLight",className:"text-center",children:"Make sure your face is well-lit and clearly visible"})]}),o.jsx("div",{className:"mt-lg flex justify-center",children:o.jsx(pe,{text:"Take photo",icon:bD,variant:"primary",onClick:g,disabled:!i})})]})}),o.jsx("canvas",{ref:s,className:"hidden"})]})});ive.displayName="CameraCaptureModal";function VJ(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function vc({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,i]=f.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=f.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=f.useRef(!1);f.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,p,h]=f.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:b,top:_,width:w,height:C,bottom:S,right:E,x:M,y:k}=l.current.element.getBoundingClientRect(),N={left:b,top:_,width:w,height:C,bottom:S,right:E,x:M,y:k};l.current.element instanceof HTMLElement&&r&&(N.height=l.current.element.offsetHeight,N.width=l.current.element.offsetWidth),Object.freeze(N),d.current&&!aut(l.current.lastBounds,N)&&i(l.current.lastBounds=N)};return[v,u?VJ(v,u):v,c?VJ(v,c):v]},[i,r,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",h,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function y(){l.current.element&&(l.current.resizeObserver=new s(h),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",h,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{h()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const x=v=>{!v||v===l.current.element||(g(),l.current.element=v,l.current.scrollContainers=ove(v),y())};return rut(h,!!t),nut(p),f.useEffect(()=>{g(),y()},[t,h,p]),f.useEffect(()=>g,[]),[x,a,m]}function nut(e){f.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function rut(e,t){f.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function ove(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some(a=>a==="auto"||a==="scroll")&&t.push(e),[...t,...ove(e.parentElement)]}const sut=["x","y","top","bottom","left","right","width","height"],aut=(e,t)=>sut.every(n=>e[n]===t[n]),un=R.memo(({children:e,header:t,fullBleed:n,roundedClass:r,shadow:s,fullBleedBorderClassname:a,...i})=>o.jsxs(o.Fragment,{children:[t,o.jsxs(H,{...i,variant:i.variant??"raised",className:V("relative",{border:!n&&!i.variant,[r||"rounded-xl"]:!i.variant,"shadow-[0_1px_2px_0_rgba(0,0,0,0.03)]":s},i.className),children:[n&&o.jsx("div",{className:V("rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5",a)}),e]})]}));un.displayName="CanonicalCard";const Ih=async({request:e,reason:t})=>{const{error:n,data:r}=await ae.POST("/rest/deeper-research/download-asset",t,{body:e,timeoutMs:2e3,numRetries:1});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n});return r.file_url},iut=async({request:e,reason:t})=>{const{error:n,data:r}=await ae.POST("/rest/deeper-research/export-asset",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to export asset",cause:n});return r},out=async({request:e,reason:t})=>{const{error:n,data:r}=await ae.POST("/rest/deeper-research/export-all-assets",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to export all assets",cause:n});return r},lve=({reason:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=Mn(),r=f.useCallback(async i=>{try{const l=await Ih({request:i,reason:e});window.open(l,"_blank"),n(t({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)}catch(l){ne.error("Failed to download S3 asset",{error:l,request:i,errorMessage:l instanceof Error?l.message:"Unknown error"}),n(t({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}},[e,t,n]),s=f.useCallback(async(i,l="media",c=document.body)=>{try{const u=await fetch(i,{mode:"cors",cache:"no-cache"});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const d=await u.blob(),m=URL.createObjectURL(d),p=document.createElement("a");p.href=m,p.download=l,c.appendChild(p),p.click(),c.removeChild(p),URL.revokeObjectURL(m);const h=l.toLowerCase().includes(".mp4")||l.toLowerCase().includes(".mov")||l.toLowerCase().includes(".avi")||d.type.startsWith("video/"),g=t(h?{defaultMessage:"Video downloaded",id:"WHvofOjBQO"}:{defaultMessage:"Image downloaded",id:"nS5vxnEXaW"});n(g,"success",3)}catch(u){const d=l.toLowerCase().includes(".mp4")||l.toLowerCase().includes(".mov")||l.toLowerCase().includes(".avi");ne.error("Failed to download media asset",{error:u,mediaUrl:i,errorMessage:u instanceof Error?u.message:"Unknown error",errorType:u instanceof TypeError&&u.message.includes("Failed to fetch")?"CORS":"Unknown"});const m=t(d?{defaultMessage:"Failed to download video",id:"g8uGrbPLMV"}:{defaultMessage:"Failed to download image",id:"YPAbL/7UuZ"});n(m,"error",3)}},[t,n]),a=f.useCallback(async(i,l="image.jpg",c=document.body)=>s(i,l,c),[s]);return f.useMemo(()=>({downloadS3Asset:r,downloadImageAsset:a,downloadMediaAsset:s}),[a,r,s])},iV=({assetType:e,entryUUID:t,answerMode:n,reason:r,skip:s})=>{const{trackEventOnce:a}=je();f.useEffect(()=>{s||a("generated asset viewed",{assetType:e,entryUUID:t,answerMode:n,reason:r})},[a,e,t,n,r,s])},cve=R.memo(({videoUrl:e,hideTimeline:t=!0,aspectRatio:n=16/9,className:r,onLoadedData:s,isGenerated:a=!1,entryUUID:i,autoPlay:l=!1,muted:c=!0})=>{const u=f.useRef(null),[d,m]=f.useState(!1),[p,h]=f.useState(c),[g,y]=f.useState(0),[x,v]=f.useState(!1),[b,_]=f.useState(!1),[w,C]=f.useState(!0),{trackEvent:S}=je();iV({assetType:Mt.GENERATED_VIDEO,entryUUID:i??"",answerMode:"search",reason:"video-player",skip:!a||!b}),f.useEffect(()=>{if(b&&u.current){const X=u.current,q=X.mozHasAudio||!!X.webkitAudioDecodedByteCount||!!(X.audioTracks&&X.audioTracks.length);C(q)}},[b,u]);const E=f.useCallback(X=>{X.stopPropagation(),u.current&&(u.current.paused?u.current.play():u.current.pause(),m(!d))},[d]),M=f.useCallback(X=>{X.stopPropagation(),u.current&&(u.current.muted=!p,h(!p))},[p]),k=f.useCallback(X=>{if(X.stopPropagation(),u.current){const q=X.currentTarget.getBoundingClientRect(),J=(X.clientX-q.left)/q.width*u.current.duration;u.current.currentTime=J}},[]);f.useEffect(()=>{const X=setInterval(()=>{if(!u.current)return;const q=u.current.currentTime,Y=u.current.duration;y(q/Y)},16);return()=>clearInterval(X)},[]);const{$t:N}=Z(),[P,L]=f.useState(!1),O=f.useCallback(()=>L(!0),[]),A=f.useCallback(()=>L(!1),[]),{trackEventOnce:j}=je(),{deprecatedOpenToast:T}=Mn(),{isMobileStyle:I}=Ce(),{downloadMediaAsset:U}=lve({reason:"GeneratedVideoCard"}),B=f.useCallback(()=>{e&&(j("generated video reported",{video_url:e}),T(N({defaultMessage:"Video reported",id:"Ir50ThCD/C"}),"success",3))},[N,e,T,j]),D=f.useCallback(async X=>{X.stopPropagation(),e&&(await U(e,"video.mp4",document.body),a&&S("generated asset downloaded",{assetType:Mt.GENERATED_VIDEO,answerMode:"search",entryUUID:i??"",reason:"video-player"}))},[e,U,a,i,S]),W=f.useMemo(()=>[{type:"default",text:N({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:uE,onClick:B}],[N,B]),z=f.useCallback(X=>{X.stopPropagation(),u.current&&(u.current.requestFullscreen?u.current.requestFullscreen():u.current.webkitEnterFullscreen?u.current.webkitEnterFullscreen():u.current.mozRequestFullScreen?u.current.mozRequestFullScreen():u.current.msRequestFullscreen&&u.current.msRequestFullscreen())},[]),$=f.useMemo(()=>({aspectRatio:n}),[n]);return o.jsx(un,{fullBleed:!0,className:V("group relative w-full overflow-hidden",r),style:$,children:o.jsxs("div",{className:"relative size-full overflow-hidden",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[o.jsx("video",{ref:u,loop:!0,autoPlay:l,playsInline:!0,muted:p,className:V("size-full object-cover",{"opacity-0":!b}),onPlay:()=>m(!0),onPause:()=>m(!1),onClick:E,onLoadedData:()=>{_(!0),s?.()},src:e+"#t=0.001"}),o.jsx("div",{className:V("absolute inset-0 flex flex-col justify-end transition-opacity duration-200",x||P||!d?"opacity-100":"opacity-0",b?"":"pointer-events-none opacity-0"),onClick:E,children:o.jsxs("div",{className:V("p-md flex w-full flex-col bg-gradient-to-t from-black/60 to-transparent pb-0",t?"pb-md":"pb-0"),children:[o.jsxs("div",{className:"gap-md flex",children:[o.jsx(H,{as:"button",onClick:E,children:o.jsx(F,{color:"white",children:o.jsx(le,{icon:d?jue:Aue})})}),o.jsx(En,{showTooltip:a&&!w,tooltipLayout:"right",tooltipText:N({defaultMessage:"This video does not have audio.",id:"V7VF0Hgi7t"}),asChild:!0,children:o.jsx(H,{as:"button",onClick:w?M:X=>X.stopPropagation(),className:V({"opacity-50":!w}),children:o.jsx(F,{color:"white",children:o.jsx(le,{icon:p?Iue:Rue})})})}),o.jsx(H,{as:"button",className:"ml-auto",onClick:D,children:o.jsx(F,{color:"white",children:o.jsx(le,{icon:vp})})}),o.jsx(H,{as:"button",onClick:z,children:o.jsx(F,{color:"white",children:o.jsx(le,{icon:FLe})})}),o.jsx(sn,{isMobileStyle:I,items:W,onOpen:O,onClose:A,wrapperClassName:"flex",children:o.jsx(H,{as:"button",className:"size-[20px]",children:o.jsx(F,{color:"white",children:o.jsx(le,{icon:Pue})})})})]}),!t&&o.jsx("div",{className:"py-md cursor-pointer",onClick:k,children:o.jsx("div",{className:"relative h-0.5 flex-1 shrink-0 cursor-pointer overflow-hidden rounded-full bg-white/30",children:o.jsx("div",{className:"absolute left-0 top-0 size-full bg-white",style:{transformOrigin:"left",transform:`scaleX(${g})`}})})})]})})]})})});cve.displayName="VideoPlayer";const uve=R.memo(({loading:e,size:t=30})=>{const[n,{width:r,height:s}]=vc(),[a,i]=f.useState(0),[l,c]=f.useState(0),u=Ci(0,0,.58,1),d=Ci(.19,1,.22,1);f.useEffect(()=>{if(r&&s){const g=Math.ceil(r/t),y=Math.ceil(s/t);i(g),c(y)}},[r,s,t]);function m(g,y){const x=Math.ceil(g),v=Math.floor(y);return Math.floor(Math.random()*(v-x)+x)}const h=r?((g,y)=>{let x=Math.floor(y/g);return x%2!==0&&(x=x-1),x=Math.max(2,x),y/x})(t,r):t;return o.jsx("div",{ref:n,style:{gridTemplateColumns:`repeat(auto-fill, ${h}px)`,gridTemplateRows:`repeat(auto-fill, ${h}px)`},className:V("pointer-events-none absolute inset-0 z-[5] grid size-full gap-0",{"bg-raised":a===0||l===0}),children:o.jsx(Je,{children:[...Array(a*l)].map((g,y)=>e?o.jsx(ve.div,{animate:{opacity:[.9,0],transition:{repeat:1/0,duration:.5,delay:m(0,10)/10,repeatType:"mirror",ease:u}},exit:{opacity:0,transition:{duration:1,ease:d}},className:"bg-base relative",children:o.jsx("div",{className:"bg-raised inset-0 size-full"})},y):null)})})});uve.displayName="BlinkingGrid";const lut="IMAGE_GEN_PLACEHOLDER",cut="VIDEO_GEN_PLACEHOLDER",dve=R.memo(({sourceImage:e,media:t,generating:n,square:r=!1,type:s="image",onMediaLoad:a,entryUUID:i})=>{const l=Ci(.19,1,.22,1),[c,u]=f.useState(void 0),[d,m]=f.useState(!1),[p,h]=f.useState(!n),[g,y]=f.useState(!0),[x,{width:v}]=vc();f.useEffect(()=>{const S=s==="video"?cut:lut;t&&t.name!==S&&u(t)},[t,s]),f.useEffect(()=>{g&&y(!1)},[g]),f.useEffect(()=>{n&&(m(!1),h(!1))},[n]),f.useEffect(()=>{if(d&&!n){const S=setTimeout(()=>{h(!0)},1e3);return()=>clearTimeout(S)}},[d,n]);const _=((S,E)=>{let M=Math.floor(E/S);return M%2!==0&&(M=M-1),M=Math.max(2,M),E/M})(30,v),w=f.useCallback(()=>{m(!0),a?.()},[a]),C=f.useMemo(()=>({url:c?.url,name:c?.name,showCitation:!1}),[c?.url,c?.name]);return o.jsx("div",{ref:x,className:"relative size-full shrink-0",children:_!==0?o.jsxs(o.Fragment,{children:[o.jsx(uve,{loading:!p,size:_}),o.jsx(ve.div,{className:"relative size-full",style:{maskSize:`${_}px ${_}px`,maskPosition:"top left",maskRepeat:"repeat"},initial:{maskImage:p?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},animate:{maskImage:p?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},transition:{duration:1,ease:l},children:o.jsx(un,{className:V(`relative size-full overflow-hidden !rounded-md ${p?"cursor-pointer":""}`,{"!rounded-none":r}),fullBleed:!0,children:o.jsx(ve.div,{animate:{filter:!p&&e?"blur(20px) saturate(2)":"none"},transition:{duration:1,ease:l},className:"grid size-full",children:o.jsx("div",{className:"relative w-full bg-black/40 dark:bg-white/40",children:o.jsxs(Je,{children:[(e?.startsWith("http")||e?.startsWith("blob"))&&!p&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1,ease:l},className:"absolute inset-0 size-full",children:o.jsx("img",{src:e,alt:"Source",className:"block size-full object-cover"})},"source"),c?.image?.startsWith("http")&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:p?1:0},exit:{opacity:0},transition:{duration:1,ease:l},className:"absolute inset-0 size-full",children:s==="image"?o.jsxs(o.Fragment,{children:[o.jsx(Ss,{src:c.image||c.thumbnail,alt:c.name||"Generated Image",origin:C,includeLightBoxModal:!!p,maskClassName:V("!bg-transparent",{"!rounded-none":r}),imageClassName:"block w-full h-full max-h-[100%] object-contain !bg-transparent",containerClassName:"w-full h-full absolute inset-0 z-10 !bg-transparent",onLoad:w}),o.jsx("img",{src:c.image||c.thumbnail,alt:c.name||"Generated Image",className:"absolute inset-0 block size-full object-cover blur-[20px] saturate-150"})]}):o.jsx(cve,{videoUrl:c.image,isGenerated:!0,aspectRatio:11/6,onLoadedData:w,className:"absolute inset-0 block size-full !rounded-none object-cover",entryUUID:i})},"generated")]})})})})})]}):null})});dve.displayName="GeneratedMediaLoader";const fve=R.memo(({setViewState:e})=>{const{$t:t}=Z(),n=f.useCallback(()=>e("create_avatar"),[e]);return o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"mb-lg relative -mx-6 h-[600px] overflow-hidden rounded-lg",children:[o.jsx(Ss,{src:"https://r2cdn.perplexity.ai/virtual-tryon-intro-avatars.png",alt:"Avatar preview",imageClassName:"h-full w-full object-cover object-top pointer-events-none bg-base",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),o.jsxs("div",{className:"from-base gap-md p-lg absolute inset-x-0 bottom-0 flex h-1/2 flex-col items-center justify-end bg-gradient-to-t from-35% to-transparent",children:[o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(he,{defaultMessage:"Skip the guesswork",id:"xUwopw2/ud"})}),o.jsx(F,{variant:"small",className:"max-w-[350px] text-pretty text-center",color:"light",children:o.jsx(he,{defaultMessage:"Upload a photo, create your avatar, and explore how outfits look on your digital self.",id:"Mtc6VpYStx"})})]})]}),o.jsx("div",{className:"-mt-md flex justify-center",children:o.jsx(pe,{text:t({defaultMessage:"Create your avatar",id:"pkptzIeNWN"}),variant:"primary",onClick:n})})]})});fve.displayName="IntroView";const mve=R.memo(({setViewState:e,uploadSelfie:t,setLocalPreviewUrl:n,isSelfieUploading:r})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),l=f.useCallback(async m=>{const p=m.target.files?.[0];if(p){const h=URL.createObjectURL(p);n(h),await t(p)&&e("choose_body")}m.target.value=""},[t,n,e]),c=f.useCallback(async m=>{const p=URL.createObjectURL(m);n(p),await t(m)&&e("choose_body")},[t,n,e]),u=f.useCallback(()=>{i(!0)},[]),d=f.useCallback(()=>{i(!1)},[]);return o.jsxs("div",{className:"gap-lg -mb-sm -mt-md flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(pve,{step:2,totalSteps:4}),o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(he,{defaultMessage:"Take a selfie",id:"0H3vV1IwP1"})}),o.jsx(F,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:o.jsx(he,{defaultMessage:"To create a personalized avatar, please upload a well lit, front-facing selfie.",id:"2hp5WUjFRc"})})]}),o.jsxs("div",{className:"gap-sm grid grid-cols-2 grid-rows-4",children:[o.jsx(xve,{image:"https://r2cdn.perplexity.ai/virtual-tryon-selfie.png",title:s({defaultMessage:"Front facing selfie",id:"v5qKOPNOwM"}),description:s({defaultMessage:"Simple front facing photo is all we need.",id:"7sBIYn49Jb"}),className:"!col-start-1 !row-span-4 !row-start-1"}),o.jsx(av,{title:s({defaultMessage:"Face fully visible",id:"I+I2q2Gn3a"}),icon:Cu}),o.jsx(av,{title:s({defaultMessage:"Looking Forward",id:"79tlG9DGSR"}),icon:Lk}),o.jsx(av,{title:s({defaultMessage:"Even natural light",id:"2OWeBoZV0d"}),icon:Oue}),o.jsx(av,{title:s({defaultMessage:"No harsh shadows",id:"vXaeUswXsx"}),icon:ULe})]}),o.jsx("div",{className:"gap-sm flex justify-center",children:r?o.jsxs("div",{className:"px-md py-sm gap-sm bg-subtle flex items-center rounded-lg",children:[o.jsx(Zr,{}),o.jsx(F,{variant:"baseSemi",children:o.jsx(he,{defaultMessage:"Uploading...",id:"JEsxDwhXPG"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"shopping-try-on-file-input",onChange:l}),o.jsx(pe,{text:s({defaultMessage:"Take a selfie",id:"0H3vV1IwP1"}),icon:bD,variant:"common",onClick:u}),o.jsxs("label",{htmlFor:"shopping-try-on-file-input",className:"px-md py-sm gap-sm bg-super active:ease-outExpo group flex origin-center transform-gpu cursor-pointer select-none flex-row items-center whitespace-nowrap rounded-lg duration-300 hover:opacity-80 active:scale-[0.97] active:duration-150",children:[o.jsx(F,{children:o.jsx(le,{icon:By,size:"md",className:"text-white dark:text-black"})}),o.jsx(F,{variant:"baseSemi",color:"defaultInverted",children:o.jsx(he,{defaultMessage:"Upload a selfie",id:"bODqv8TA31"})})]})]})}),o.jsx(ive,{isOpen:a,onClose:d,onCapture:c})]})});mve.displayName="CreateAvatarView";const pve=({step:e,totalSteps:t})=>{const n=e/t*100;return o.jsx(H,{className:"py-xs flex flex-row items-center justify-center rounded",children:o.jsx("div",{className:"bg-subtle w-xl h-xs relative overflow-hidden rounded-full",children:o.jsx("div",{className:"bg-dark h-full transition-all duration-300",style:{width:`${n}%`}})})})},hve=R.memo(({setViewState:e,generateDefaultAvatar:t,selfieUrl:n,uploadPhoto:r,generateCustomAvatar:s,setLocalPreviewUrl:a})=>{const{$t:i}=Z(),[l,c]=f.useState("default"),[u,d]=f.useState(!1),m=f.useCallback(()=>{n&&(e("generating_avatar"),t(n))},[e,t,n]),p=f.useCallback(()=>{const v=document.getElementById("choose-body-file-input");v&&v.click()},[]),h=f.useCallback(()=>{l==="default"?m():p()},[l,m,p]),g=f.useCallback(()=>{c("default")},[]),y=f.useCallback(()=>{c("your")},[]),x=f.useCallback(async v=>{const b=v.target.files?.[0];if(b){if(!n)return;const _=URL.createObjectURL(b);a(_);try{d(!0);const w=await r(b);w&&(e("generating_avatar"),s(n,w))}finally{d(!1)}}v.target.value=""},[r,s,n,a,e]);return o.jsxs("div",{className:"gap-xl flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(pve,{step:4,totalSteps:4}),o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(he,{defaultMessage:"Choose your avatar body",id:"+VyjlR/lAC"})}),o.jsx(F,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:o.jsx(he,{defaultMessage:"You can continue with a default body or create a more personalized avatar with your body.",id:"cWLZ08Ydju"})})]}),o.jsxs("div",{className:"gap-md grid grid-cols-2",children:[o.jsx($J,{onClick:g,title:i({defaultMessage:"Default body",id:"vO54ZADRPV"}),description:i({defaultMessage:"Uses a generic body shape, no photo needed",id:"ZuGM1SxB8y"}),selected:l==="default"}),o.jsx($J,{onClick:y,title:i({defaultMessage:"Your body",id:"7ZKFrdUySm"}),description:i({defaultMessage:"Uses a full body photo to create a custom body",id:"ddPGzyfCV3"}),selected:l==="your"})]}),o.jsxs("div",{className:"flex justify-center",children:[o.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"choose-body-file-input",onChange:x}),o.jsx(pe,{text:i(u?{defaultMessage:"Uploading full body photo...",id:"Xg5+S5kxLh"}:l==="default"?{defaultMessage:"Continue with default",id:"zlYIh9m2kM"}:{defaultMessage:"Upload full body photo",id:"VD13bqnxFO"}),icon:l==="default"?Cu:By,isLoading:u,disabled:u,variant:"primary",onClick:h})]})]})});hve.displayName="ChooseBodyView";const $J=({onClick:e,title:t,description:n,selected:r})=>o.jsxs(H,{className:V("gap-xs p-md !ring-super relative flex cursor-pointer flex-col rounded-xl border duration-150",r?"!border-transparent ring-2":"ring-0"),onClick:e,children:[o.jsx("div",{className:"mb-sm aspect-square overflow-hidden rounded-md",children:o.jsx(Ss,{src:"/static/images/tryon/avatar_body.png",alt:"Default body",imageClassName:"size-full object-contain invert opacity-10",containerClassName:"size-full",maskClassName:"bg-transparent",includeLightBoxModal:!1,draggable:!1})}),o.jsx(F,{variant:"baseSemi",className:"text-center",children:t}),o.jsx(F,{variant:"small",className:"px-md text-pretty text-center",color:"light",children:n})]}),gve=R.memo(({status:e,onClose:t,onBack:n,resultUrl:r,saveAvatar:s,onSuccessfulOnboarding:a})=>{const{$t:i}=Z(),[l,c]=f.useState(!1),u=f.useCallback(async()=>{if(r&&e==="success"&&!l){c(!0);const d=await s(r);t(),c(!1),a(d)}else c(!1),t()},[t,r,e,s,a,l]);return o.jsxs("div",{className:"gap-lg flex flex-col",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(H,{className:V("gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border"),children:r&&o.jsx(Ss,{src:r,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"page-title",className:"text-center",children:o.jsx(he,{defaultMessage:"Your new virtual you",id:"LoEf9iMkXR"})}),o.jsx(F,{variant:"small",className:"text-center",color:"light",children:o.jsx(he,{defaultMessage:"Your personalized avatar is ready",id:"MLiXNgEouW"})})]}),o.jsxs("div",{className:"gap-sm flex justify-center",children:[o.jsx(pe,{text:i({defaultMessage:"Retry",id:"62nsdyMyIO"}),variant:"border",onClick:n,disabled:l}),o.jsx(pe,{text:i({defaultMessage:"Start Shopping",id:"BRgXJINE++"}),variant:"primary",onClick:u,disabled:e!=="success"||l,isLoading:l})]})]})});gve.displayName="ConfirmAvatarView";const yve=R.memo(({localPreviewUrl:e,onClose:t})=>{const{$t:n}=Z(),r=f.useMemo(()=>{if(e)return{image:e,name:"Avatar Preview",status:sqe.IN_PROGRESS,type:"image",medium:"image",author_name:"PPLX",author_url:"https://pplx.ai",image_width:100,image_height:100,url:e,source:"pplx",thumbnail:e,dark_image_url:e,locations:[],thumbnail_height:100,thumbnail_width:100,sponsored_uuid:"",ad_content_uuid:"",modal_url:"",low_res_image:"",generated_media_metadata:void 0}},[e]);return o.jsxs("div",{className:"gap-lg flex flex-col",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"page-title",className:"text-center",children:o.jsx(he,{defaultMessage:"Working on your avatar",id:"9nXG80mtI6"})}),o.jsx(F,{variant:"small",className:"text-center",color:"light",children:o.jsx(he,{defaultMessage:"You can continue shopping while we create your virtual you. It shouldn't be long.",id:"Z5TNVvv3SP"})})]}),o.jsxs("div",{className:"gap-lg flex flex-col items-center",children:[o.jsx(H,{className:"gap-sm relative isolate flex aspect-[252/336] w-full max-w-[400px] flex-col overflow-hidden rounded-lg border",children:o.jsx(dve,{generating:!0,media:r})}),o.jsx(pe,{text:n({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"}),variant:"primary",onClick:t})]})]})});yve.displayName="GeneratingAvatarView";const av=R.memo(({title:e,icon:t})=>o.jsx(H,{className:"gap-sm p-sm flex flex-col items-center justify-center rounded-lg border",children:o.jsxs(F,{variant:"smallBold",className:"gap-xs flex flex-row items-center",children:[o.jsx(le,{icon:t,size:"md"}),e]})}));av.displayName="InfoCell";const xve=R.memo(({image:e,title:t,className:n,description:r})=>o.jsxs(H,{className:V("gap-sm relative col-start-2 row-start-2 flex flex-col overflow-hidden rounded-lg border",n),children:[e&&o.jsx(Ss,{src:e,alt:"Intro",imageClassName:"w-full object-cover object-top pointer-events-none max-h-[175px]",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),o.jsxs("div",{className:"from-base gap-xs p-md absolute inset-0 flex flex-col items-center justify-end bg-gradient-to-t from-5% to-transparent",children:[o.jsx(F,{variant:"smallBold",className:"flex items-end justify-center text-center",children:t}),r&&o.jsx(F,{variant:"tinyRegular",className:"text-pretty text-center leading-tight",color:"light",children:r})]})]}));xve.displayName="InstructionCell";async function uut({request:e,reason:t}){const{data:n,error:r}=await ae.POST("/rest/shopping/generate-shopping-try-on",t,{body:e,timeoutMs:35e3,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}async function WJ({request:e,reason:t}){const{data:n,error:r}=await ae.POST("/rest/shopping/try-on-photo/generate-avatar",t,{body:e,timeoutMs:4e4,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}const dut=async({reason:e,try_on_photo_url:t})=>{try{const n=await ae.PUT("/rest/shopping/try-on-photo/save",e,{body:{try_on_photo_url:t},timeoutMs:Fe()});return n.data?n.data:{status:"error",user_try_on_photo_url:""}}catch(n){return ne.error("Failed to save user try on photo",n),{status:"error",user_try_on_photo_url:""}}},fut=async({reason:e})=>{try{const t=await ae.DELETE("/rest/shopping/try-on-photo/delete",e,{timeoutMs:Fe()});return t.data?t.data:{status:"error"}}catch(t){return ne.error("Failed to delete user try on photo",t),{status:"error"}}},oV=async({file:e,fileSource:t,forceImage:n,reason:r})=>{const s=await ae.POST("/rest/uploads/create_upload_url",r,{body:{filename:e.name,content_type:e.type,source:t??"default",file_size:e.size,force_image:n??!1},timeoutMs:en.MEDIUM,retries:2});return s.data?s.data:null},mut=async({remote_file_id:e,connection_type:t,source:n,reason:r})=>{const s=await ae.POST("/rest/connectors/attachments/upload",r,{body:{remote_file_id:e,connection_type:t,source:n??"default"},timeoutMs:en.VERY_HIGH,retries:2});return s.data?s.data:null};async function put({request:e,reason:t}){return new Promise((n,r)=>{ae.SSE("/rest/sse/attachment_processing/subscribe",t,{params:e,handlers:{message:s=>{n(s)}}}).catch(r)})}const vve=({reason:e,productImageUrl:t})=>{const{$t:n}=Z(),{deprecatedOpenToast:r}=Mn(),{openModal:s,closeModal:a}=wt(),i=xt(),[l,c]=f.useState({status:"idle",error:null,resultUrl:null,selfieUrl:null});f.useEffect(()=>{if(t){const E=i.getQueryData(xj(t));E&&c(M=>({...M,resultUrl:E}))}},[t,i]);const u=f.useRef(!1),d=f.useCallback(()=>{c({status:"idle",error:null,resultUrl:null,selfieUrl:null})},[]),m=f.useCallback(E=>{c(M=>({...M,status:"error",error:E}))},[]),p=f.useCallback(async E=>{if(!E.type.startsWith("image/"))return m(n({defaultMessage:"Only image files are supported.",id:"f4sVsu2Ean"})),null;const M=10*1024*1024;if(E.size>M)return m(n({defaultMessage:"Image size exceeds 10MB limit.",id:"/lVoGk8eeX"})),null;try{c(O=>({...O,status:"uploading"}));const k=await oV({file:E,fileSource:"shopping_try_on",forceImage:!0,reason:e});if(!k?.fields||!k?.s3_bucket_url)throw k?.rate_limited?new Error("File upload failed due to rate limit."):new Error("Failed to get upload URL");const N=new FormData;Object.entries(k.fields).forEach(([O,A])=>{N.append(O,A)}),N.append("file",E);const P=await fetch(k.s3_bucket_url,{method:"POST",body:N});if(!P.ok)throw new Error("Failed to upload file");let L=null;try{const O=await P.json();O?.secure_url?L=O.secure_url:O?.eager?.[0]?.secure_url&&(L=O.eager[0].secure_url),L&&Em(L)&&(L=q8(L))}catch{k.s3_object_url&&(L=k.s3_object_url)}if(!L)throw new Error("Failed to get image URL from upload response");return c(O=>({...O,status:"idle"})),L}catch(k){return m(k instanceof Error?k.message:n({defaultMessage:"Failed to upload image.",id:"+eCvtPyOJg"})),null}},[n,e,m]),h=f.useCallback(async E=>{const M=await p(E);return M&&c(k=>({...k,selfieUrl:M})),M},[p]),g=f.useCallback(()=>{s("shoppingTryOnOnboardingModal",{onSuccessfulOnboarding:E=>{i.setQueryData(BE(),{try_on_photo_url:E}),i.setQueryData(Lf(),!1),r(n({defaultMessage:"Avatar updated successfully!",id:"tjpCN5PY48"}),"success",3)},onClose:()=>{a()}})},[s,a,i,r,n]),y=f.useCallback(async E=>{try{const{user_try_on_photo_url:M}=await dut({reason:e,try_on_photo_url:E});return M}catch(M){return r(n({defaultMessage:"Failed to save avatar. Please try again.",id:"Z5lnZQ5t8Q"}),"error",5),ne.error("Failed to save avatar",M),""}},[e,n,r]),x=f.useCallback(async()=>{try{await fut({reason:e})}catch(E){ne.error("Failed to delete avatar",E)}},[e]),v=f.useCallback(E=>{u.current=E},[]),b=f.useCallback(async E=>{const M=await y(E);i.setQueryData(BE(),{try_on_photo_url:M}),r(n({defaultMessage:"Your avatar has been generated! You can now try on clothes.",id:"moiCrokdKs"}),"success",10,"",n({defaultMessage:"Check it out",id:"IjqWGw+QT1"}),()=>{s("avatarManagementModal",{source:"toast",onRetry:g})})},[y,n,r,i,s,g]),_=f.useCallback(async E=>{try{c(k=>({...k,status:"processing",resultUrl:null,error:null})),i.setQueryData(Lf(),!0);const M=await WJ({request:{user_image_url:E},reason:e});if(M.status==="failed")throw i.setQueryData(Lf(),!1),new Error("Failed to generate avatar");c(k=>({...k,status:"success",resultUrl:M.image_url})),u.current&&await b(M.image_url),i.setQueryData(Lf(),!1)}catch(M){m(M instanceof Error?M.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,i]),w=f.useCallback(async(E,M)=>{try{c(N=>({...N,status:"processing",resultUrl:null,error:null})),i.setQueryData(Lf(),!0);const k=await WJ({request:{user_image_url:M,selfie_image_url:E},reason:e});if(k.status==="failed")throw i.setQueryData(Lf(),!1),new Error("Failed to generate avatar");c(N=>({...N,status:"success",resultUrl:k.image_url})),u.current&&await b(k.image_url),i.setQueryData(Lf(),!1)}catch(k){m(k instanceof Error?k.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,i]),C=f.useCallback(async(E,M)=>{try{c(N=>({...N,status:"processing",resultUrl:null,error:null}));const k=await uut({request:{image_url:E,product_image_url:M},reason:e});if(k.status==="error")throw new Error("Failed to generate try-on");c(N=>({...N,status:"success",resultUrl:k.image_url})),M&&i.setQueryData(xj(M),k.image_url)}catch(k){m(k instanceof Error?k.message:n({defaultMessage:"Failed to generate try-on.",id:"ptEP5MGDf6"}))}},[e,n,m,i]),S=f.useCallback(()=>{t&&i.removeQueries({queryKey:xj(t)}),c(E=>({...E,resultUrl:null}))},[t,i]);return f.useMemo(()=>({status:l.status,error:l.error,resultUrl:l.resultUrl,selfieUrl:l.selfieUrl,uploadPhoto:p,uploadSelfie:h,generateDefaultAvatar:_,generateCustomAvatar:w,tryOnProduct:C,saveAvatar:y,resetState:d,deleteAvatar:x,setShouldAutoSaveAvatar:v,clearCachedTryOn:S,handleRetry:g}),[l.status,l.error,l.resultUrl,l.selfieUrl,p,h,_,w,C,y,d,x,v,S,g])},bve=R.memo(({isOpen:e,onClose:t,onSuccessfulOnboarding:n})=>{const r="shopping-try-on-onboarding",{status:s,resultUrl:a,selfieUrl:i,uploadSelfie:l,generateDefaultAvatar:c,generateCustomAvatar:u,uploadPhoto:d,saveAvatar:m,resetState:p,setShouldAutoSaveAvatar:h}=vve({reason:r}),[g,y]=f.useState("intro"),[x,v]=f.useState(null),[b,_]=f.useState(null),w=f.useCallback(k=>{v(N=>(N&&N!==k&&URL.revokeObjectURL(N),k))},[]),C=f.useCallback(()=>{s==="processing"&&g==="generating_avatar"?h(!0):p(),y("intro"),_(null),t()},[t,p,s,g,h]);f.useEffect(()=>{!e&&x&&(URL.revokeObjectURL(x),v(null))},[e,x]),f.useEffect(()=>{g==="generating_avatar"&&(s==="success"&&a?y("confirm_avatar"):s==="error"&&(y("choose_body"),_(null)))},[g,s,a]);const S=f.useCallback(()=>y("create_avatar"),[]),E=f.useCallback(k=>(_("selfie"),l(k)),[l]),M=f.useCallback(k=>(_("body"),d(k)),[d]);return o.jsx(on,{isOpen:e,onClose:C,modalClassname:"light",children:o.jsxs("div",{className:"size-full",children:[g==="intro"&&o.jsx(fve,{setViewState:y}),g==="create_avatar"&&o.jsx(mve,{setViewState:y,uploadSelfie:E,setLocalPreviewUrl:w,isSelfieUploading:s==="uploading"&&b==="selfie"}),g==="choose_body"&&o.jsx(hve,{setViewState:y,generateDefaultAvatar:c,selfieUrl:i,uploadPhoto:M,generateCustomAvatar:u,setLocalPreviewUrl:w}),g==="generating_avatar"&&o.jsx(yve,{localPreviewUrl:x,onClose:C}),g==="confirm_avatar"&&o.jsx(gve,{status:s,onClose:C,onBack:S,resultUrl:a,saveAvatar:m,onSuccessfulOnboarding:n})]})})});bve.displayName="ShoppingTryOnOnboardingModal";const lV=ex("AskInputContext",()=>Po((e,t)=>({activeMenu:null,fileUploadUpsellTooltipOpen:!1,suggestions:fe,blankStateSuggestions:{[ce.SEARCH]:null,[ce.RESEARCH]:null,[ce.STUDIO]:null,[ce.STUDY]:null},showSuggestDropdown:!1,actions:{onActiveMenuChange:n=>{e({activeMenu:n})},setFileUploadUpsellTooltipOpen:n=>{e({fileUploadUpsellTooltipOpen:n})},setSuggestions:n=>{e({suggestions:n})},setBlankStateSuggestions:(n,r)=>{const s=t().blankStateSuggestions;e({blankStateSuggestions:{...s,[r]:n}})},setShowSuggestDropdown:n=>{e({showSuggestDropdown:n})}},inputRef:f.createRef()}))),bc=lV.Provider,hut=lV.useSelector,gut=lV.useTrackedState,to=()=>hut(e=>e.actions),ea=gut,cV=R.memo(()=>o.jsx("div",{className:"bg-base fixed inset-0 z-[999] flex h-screen w-screen items-center justify-center opacity-50"}));cV.displayName="VoiceToVoiceModalLoader";const uV=R.memo(function(t){const{className:n,children:r,result:s,trackEvent:a,...i}=t,l=V("group flex size-full cursor-pointer items-stretch",n);return ZB(s)?o.jsx(Ye,{target:"_blank",rel:"noopener",className:l,href:s.url,...i,children:o.jsx("div",{className:"w-full",children:r})}):o.jsx(o.Fragment,{children:r})});uV.displayName="CitationCardLink";const dV=R.memo(({variant:e="medium",searchType:t})=>{const n=t==="memory",s=V("flex items-center justify-between w-full",e==="small"?"mb-0":"mb-2");return o.jsxs("div",{className:s,children:[o.jsxs(F,{className:"flex items-center gap-2",variant:"tiny",color:"light",children:[o.jsx(le,{icon:n?sc:bp,size:"sm"}),n?o.jsx(he,{defaultMessage:"Memory",id:"dVx3yznM2C"}):o.jsx(he,{defaultMessage:"Library",id:"StcK672jB9"})]}),o.jsx(F,{variant:"tiny",color:"ultraLight",children:o.jsx(le,{icon:y1,size:"sm"})})]})});dV.displayName="MemorySearchCitationCardTitle";const _ve=e=>e.is_scrubbed??!1,yut=e=>m5(e)?_ve(e):!1,m5=e=>e.is_memory||e.is_conversation_history,xut=e=>e.is_memory,D_=e=>{const t=e.is_client_context,n=yut(e);return t||n},wve=R.memo(function(t){const{$t:n}=Z(),{result:r,additionalMetadata:s,variant:a}=t,i=r.url,l=r.meta_data?.generated_file_description??r.snippet,c=r.meta_data?.generated_file_title??r.name,u=r?.is_client_context,d=!!r.meta_data?.connection_type,m=typeof r.meta_data?.quoteBeforeContext=="string"?r.meta_data?.quoteBeforeContext:"",p=typeof r.meta_data?.quoteEmphasisText=="string"?r.meta_data?.quoteEmphasisText:"",h=typeof r.meta_data?.quoteAfterContext=="string"?r.meta_data?.quoteAfterContext:"",g=m.length>0||p.length>0||h.length>0,y=a!=="grid"&&l&&g,x=r.meta_data?.repo_type,v=typeof r.meta_data?.wiley_book_uuid=="string",b=typeof r.meta_data?.domain_name=="string"?r.meta_data?.domain_name:void 0,_=sct(r),w=()=>{if(d&&r.meta_data?.connection_type!==Ot.WILEY)return iB(r.meta_data?.connection_type);if(r.is_attachment){if(x=="USER")return n({defaultMessage:"Local Files",id:"FBnEWaGOHR"});if(x=="ORG")return n({defaultMessage:"Org Files",id:"DaFSYzpM1Q"});if(x=="COLLECTION")return n({defaultMessage:"Files",id:"m4vqJl0/FT"});if(r?.meta_data?.patent_name)return r.meta_data.patent_name;if(!r?.meta_data?.file_uuid)return n({defaultMessage:"Attachment",id:"eLCAEP8LHj"})}return b},C=m5(r),S=r.is_memory,E=D_(r);return o.jsxs("div",{className:V("gap-xs pointer-events-none relative flex h-full max-w-full select-none flex-col",{"px-sm pb-sm pt-sm w-full":a==="grid"},{"p-md":a!=="grid"}),children:[o.jsxs("div",{className:"flex w-full items-center justify-between",children:[C&&!E?o.jsx(dV,{variant:"small",searchType:S?"memory":"conversation-history"}):o.jsxs("div",{className:"space-x-xs flex",children:[s||null,o.jsx(eo,{variant:"tiny",color:"light",url:i,isAttachment:r.is_attachment,connectionType:r.meta_data?.connection_type,source:w(),isInlineAttachment:_,isPatent:!!r?.meta_data?.patent_name})]}),o.jsxs("div",{children:[v&&o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(le,{size:"sm",icon:Lue})}),u&&a==="grid"?o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(le,{size:"sm",icon:Sv})}):null]})]}),o.jsx(F,{variant:a==="grid"?"tiny":a==="list"?"small":"base",className:V("",{"":a==="grid","pr-1":a==="list"}),children:S&&!E?o.jsx(F,{variant:"tiny",className:"line-clamp-2 h-8",children:r?.snippet}):o.jsx("span",{className:"line-clamp-1 text-left md:line-clamp-2 md:h-8",children:c||o.jsx("div",{children:""})})}),c!==r.name?o.jsx(F,{variant:"small",color:"light",className:"line-clamp-1",children:r.name}):null,y&&o.jsxs(F,{variant:a==="list"?"tiny":"small",className:"mt-two border-super line-clamp-[8] border-l-4 pl-2 font-normal",children:[o.jsx("span",{children:m}),o.jsx("span",{className:"bg-super/30",children:p}),o.jsx("span",{children:h})]}),a!=="grid"&&l&&!g&&o.jsx(F,{variant:a==="list"?"tiny":"small",className:"mt-two line-clamp-1 font-normal md:line-clamp-4",children:l}),E&&a!=="grid"?o.jsxs(H,{className:"gap-xs pt-sm mt-xs flex items-center border-t",children:[o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(le,{size:"sm",icon:y1})}),o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(he,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})});wve.displayName="CitationDefaultCard";const Cve=R.memo(function(t){const{result:n,imageURL:r,citationNumber:s,useLightBoxModal:a=!0}=t,i=V(" w-full relative max-h-[76px]");return o.jsxs("div",{className:i,children:[o.jsx(Ss,{includeLightBoxModal:a,alt:n.name,containerClassName:"w-full h-full p-xs",imageClassName:"object-cover object-center w-full h-full rounded-md",src:r}),s&&o.jsx(F,{className:"bottom-sm left-sm px-xs absolute z-[1] inline-flex rounded-sm bg-black/50",variant:"tiny",color:"white",children:s})]})});Cve.displayName="CitationImageCard";function p5(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function E2(e){return!isNaN(new Date(e).getTime())}function vut(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function but(e){const t=new Date;return t.setDate(t.getDate()-1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Sve(e){const t=new Date;return t.setDate(t.getDate()+1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function F_(e,t,n={numeric:"auto",style:"long"},r=1e3*60*60*24){if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return"";const a=s.getTime()-Date.now(),i=Math.abs(a);return i<=1e3?"":i<1e3*60?e.formatRelativeTime(Math.round(a/1e3),"second",n):i<1e3*60*60?e.formatRelativeTime(Math.round(a/(1e3*60)),"minute",n):i<r&&i<1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60)),"hour",n):i<r&&i>=1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60*24)),"day",n):e.formatDate(s,{month:"short",day:"numeric",year:"numeric"})}const h5=R.memo(e=>{const{children:t,timestamp:n,timestampProps:r,includeIcon:s=!0}=e,a=Z();if(!n)return null;const i=n?.endsWith("Z")?n:`${n}Z`;return o.jsxs(H,{className:"gap-x-xs flex",children:[s?o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(le,{icon:Due,size:"xs"})}):null,o.jsxs(F,{variant:"tinyRegular",color:"light",...r,children:[t&&o.jsxs(o.Fragment,{children:[t," "]}),F_(a,i)]})]})});h5.displayName="CitationUpdatedAt";class _ut extends Date{constructor(t){const n=t?new Date(t):new Date,r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds());super(r)}getTimezoneOffset(){return 0}}class g5{static isRecentlyTrending(t,n=432e5){return t.meta_data?.client!=="trending"?!1:new Date().getTime()-new _ut(t.meta_data?.published_date).getTime()<n}static normalizeUrl(t){return t.replace(/\/$/,"")}static dedupWebResults(t,n,r=!1){if(!t)return[];if(r)return t.filter(a=>a.is_attachment);if(!n)return t;const s=new Set(n.map(a=>this.normalizeUrl(a.url)));return t.filter(a=>!s.has(this.normalizeUrl(a.url)))}}const Eve=R.memo(e=>{const{result:t,imageURL:n}=e,r=t.url,s=Z(),a=f.useMemo(()=>({color:"white"}),[]),i=f.useMemo(()=>o.jsx(h5,{recentlyUpdatedLabel:s.$t({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:t.meta_data?.published_date,timestampProps:a,includeIcon:!1,children:s.$t({defaultMessage:"Updated",id:"xrk6zgu9jU"})}),[s,t.meta_data?.published_date,a]);return o.jsxs("div",{className:V("p-sm gap-sm flex h-full max-h-[190px]"),children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"space-x-xs flex justify-between",children:[o.jsx(eo,{variant:"tiny",color:"light",url:r,isAttachment:t.is_attachment}),g5.isRecentlyTrending(t)?o.jsx(En,{tooltipText:i,children:o.jsx(Due,{className:"text-super size-3.5"})}):null]}),o.jsx("div",{children:o.jsx(F,{variant:"tiny",className:"line-clamp-2",children:t.name})})]}),n?o.jsx("div",{className:"relative -my-1 -mr-1 size-[60px] shrink-0",children:o.jsx(Ss,{includeLightBoxModal:!1,alt:t.name,containerClassName:"w-full h-full",imageClassName:"object-cover object-center w-full h-full  rounded-md",src:n})}):null]})});Eve.displayName="CitationTrendingCard";var IA={exports:{}},RA,HJ;function wut(){if(HJ)return RA;HJ=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return RA=e,RA}var PA,zJ;function Cut(){if(zJ)return PA;zJ=1;var e=wut();function t(){}function n(){}return n.resetWarningCache=t,PA=function(){function r(i,l,c,u,d,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},PA}var GJ;function fV(){return GJ||(GJ=1,IA.exports=Cut()()),IA.exports}var Sut=fV();const Ue=Ka(Sut);var OA,qJ;function Eut(){return qJ||(qJ=1,OA=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var i=a[s];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}),OA}var Mut=Eut();const kut=Ka(Mut);var WC={exports:{}},LA,KJ;function Tut(){if(KJ)return LA;KJ=1;var e;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/return e=function(){var t={},n={};return t.on=function(r,s){var a={name:r,handler:s};return n[r]=n[r]||[],n[r].unshift(a),a},t.off=function(r){var s=n[r.name].indexOf(r);s!==-1&&n[r.name].splice(s,1)},t.trigger=function(r,s){var a=n[r],i;if(a)for(i=a.length;i--;)a[i].handler(s)},t},LA=e,LA}var HC={exports:{}},DA,YJ;function Nut(){if(YJ)return DA;YJ=1,DA=function(s,a,i){var l=document.head||document.getElementsByTagName("head")[0],c=document.createElement("script");typeof a=="function"&&(i=a,a={}),a=a||{},i=i||function(){},c.type=a.type||"text/javascript",c.charset=a.charset||"utf8",c.async="async"in a?!!a.async:!0,c.src=s,a.attrs&&e(c,a.attrs),a.text&&(c.text=""+a.text);var u="onload"in c?t:n;u(c,i),c.onload||t(c,i),l.appendChild(c)};function e(r,s){for(var a in s)r.setAttribute(a,s[a])}function t(r,s){r.onload=function(){this.onerror=this.onload=null,s(null,r)},r.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+this.src),r)}}function n(r,s){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,s(null,r))}}return DA}var QJ;function jut(){return QJ||(QJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Nut(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default=function(a){var i=new Promise(function(l){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){l(window.YT);return}else{var c=window.location.protocol==="http:"?"http:":"https:";(0,r.default)(c+"//www.youtube.com/iframe_api",function(d){d&&a.trigger("error",d)})}var u=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){u&&u(),l(window.YT)}});return i},e.exports=t.default}(HC,HC.exports)),HC.exports}var zC={exports:{}},GC={exports:{}},qC={exports:{}},FA,XJ;function Aut(){if(XJ)return FA;XJ=1;var e=1e3,t=e*60,n=t*60,r=n*24,s=r*365.25;FA=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return a(u);if(m==="number"&&isNaN(u)===!1)return d.long?l(u):i(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(d){var m=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function i(u){return u>=r?Math.round(u/r)+"d":u>=n?Math.round(u/n)+"h":u>=t?Math.round(u/t)+"m":u>=e?Math.round(u/e)+"s":u+"ms"}function l(u){return c(u,r,"day")||c(u,n,"hour")||c(u,t,"minute")||c(u,e,"second")||u+" ms"}function c(u,d,m){if(!(u<d))return u<d*1.5?Math.floor(u/d)+" "+m:Math.ceil(u/d)+" "+m+"s"}return FA}var ZJ;function Iut(){return ZJ||(ZJ=1,function(e,t){t=e.exports=s.debug=s.default=s,t.coerce=c,t.disable=i,t.enable=a,t.enabled=l,t.humanize=Aut(),t.names=[],t.skips=[],t.formatters={};var n;function r(u){var d=0,m;for(m in u)d=(d<<5)-d+u.charCodeAt(m),d|=0;return t.colors[Math.abs(d)%t.colors.length]}function s(u){function d(){if(d.enabled){var m=d,p=+new Date,h=p-(n||p);m.diff=h,m.prev=n,m.curr=p,n=p;for(var g=new Array(arguments.length),y=0;y<g.length;y++)g[y]=arguments[y];g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var x=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;x++;var w=t.formatters[_];if(typeof w=="function"){var C=g[x];b=w.call(m,C),g.splice(x,1),x--}return b}),t.formatArgs.call(m,g);var v=d.log||t.log||console.log.bind(console);v.apply(m,g)}}return d.namespace=u,d.enabled=t.enabled(u),d.useColors=t.useColors(),d.color=r(u),typeof t.init=="function"&&t.init(d),d}function a(u){t.save(u),t.names=[],t.skips=[];for(var d=(typeof u=="string"?u:"").split(/[\s,]+/),m=d.length,p=0;p<m;p++)d[p]&&(u=d[p].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function i(){t.enable("")}function l(u){var d,m;for(d=0,m=t.skips.length;d<m;d++)if(t.skips[d].test(u))return!1;for(d=0,m=t.names.length;d<m;d++)if(t.names[d].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}}(qC,qC.exports)),qC.exports}var JJ;function Rut(){return JJ||(JJ=1,function(e,t){var n={};t=e.exports=Iut(),t.log=a,t.formatArgs=s,t.save=i,t.load=l,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function s(u){var d=this.useColors;if(u[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+u[0]+(d?"%c ":" ")+"+"+t.humanize(this.diff),!!d){var m="color: "+this.color;u.splice(1,0,m,"color: inherit");var p=0,h=0;u[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(p++,g==="%c"&&(h=p))}),u.splice(h,0,m)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(u){try{u==null?t.storage.removeItem("debug"):t.storage.debug=u}catch{}}function l(){var u;try{u=t.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}t.enable(l());function c(){try{return window.localStorage}catch{}}}(GC,GC.exports)),GC.exports}var KC={exports:{}},eee;function Put(){return eee||(eee=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default}(KC,KC.exports)),KC.exports}var YC={exports:{}},tee;function Out(){return tee||(tee=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default}(YC,YC.exports)),YC.exports}var QC={exports:{}},XC={exports:{}},nee;function Lut(){return nee||(nee=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default}(XC,XC.exports)),XC.exports}var ree;function Dut(){return ree||(ree=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Lut(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default={pauseVideo:{acceptableStates:[r.default.ENDED,r.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[r.default.ENDED,r.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[r.default.ENDED,r.default.PLAYING,r.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default}(QC,QC.exports)),QC.exports}var see;function Fut(){return see||(see=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Rut(),r=d(n),s=Put(),a=d(s),i=Out(),l=d(i),c=Dut(),u=d(c);function d(h){return h&&h.__esModule?h:{default:h}}var m=(0,r.default)("youtube-player"),p={};p.proxyEvents=function(h){var g={},y=function(E){var M="on"+E.slice(0,1).toUpperCase()+E.slice(1);g[M]=function(k){m('event "%s"',M,k),h.trigger(E,k)}},x=!0,v=!1,b=void 0;try{for(var _=l.default[Symbol.iterator](),w;!(x=(w=_.next()).done);x=!0){var C=w.value;y(C)}}catch(S){v=!0,b=S}finally{try{!x&&_.return&&_.return()}finally{if(v)throw b}}return g},p.promisifyPlayer=function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y={},x=function(M){g&&u.default[M]?y[M]=function(){for(var k=arguments.length,N=Array(k),P=0;P<k;P++)N[P]=arguments[P];return h.then(function(L){var O=u.default[M],A=L.getPlayerState(),j=L[M].apply(L,N);return O.stateChangeRequired||Array.isArray(O.acceptableStates)&&O.acceptableStates.indexOf(A)===-1?new Promise(function(T){var I=function U(){var B=L.getPlayerState(),D=void 0;typeof O.timeout=="number"&&(D=setTimeout(function(){L.removeEventListener("onStateChange",U),T()},O.timeout)),Array.isArray(O.acceptableStates)&&O.acceptableStates.indexOf(B)!==-1&&(L.removeEventListener("onStateChange",U),clearTimeout(D),T())};L.addEventListener("onStateChange",I)}).then(function(){return j}):j})}:y[M]=function(){for(var k=arguments.length,N=Array(k),P=0;P<k;P++)N[P]=arguments[P];return h.then(function(L){return L[M].apply(L,N)})}},v=!0,b=!1,_=void 0;try{for(var w=a.default[Symbol.iterator](),C;!(v=(C=w.next()).done);v=!0){var S=C.value;x(S)}}catch(E){b=!0,_=E}finally{try{!v&&w.return&&w.return()}finally{if(b)throw _}}return y},t.default=p,e.exports=t.default}(zC,zC.exports)),zC.exports}var aee;function Uut(){return aee||(aee=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},r=Tut(),s=u(r),a=jut(),i=u(a),l=Fut(),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}var d=void 0;t.default=function(m){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=(0,s.default)();if(d||(d=(0,i.default)(g)),p.events)throw new Error("Event handlers cannot be overwritten.");if(typeof m=="string"&&!document.getElementById(m))throw new Error('Element "'+m+'" does not exist.');p.events=c.default.proxyEvents(g);var y=new Promise(function(v){if((typeof m>"u"?"undefined":n(m))==="object"&&m.playVideo instanceof Function){var b=m;v(b)}else d.then(function(_){var w=new _.Player(m,p);return g.on("ready",function(){v(w)}),null})}),x=c.default.promisifyPlayer(y,h);return x.on=g.on,x.off=g.off,x},e.exports=t.default}(WC,WC.exports)),WC.exports}var But=Uut();const Vut=Ka(But);var $ut=Object.defineProperty,Wut=Object.defineProperties,Hut=Object.getOwnPropertyDescriptors,iee=Object.getOwnPropertySymbols,zut=Object.prototype.hasOwnProperty,Gut=Object.prototype.propertyIsEnumerable,oee=(e,t,n)=>t in e?$ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q8=(e,t)=>{for(var n in t||(t={}))zut.call(t,n)&&oee(e,n,t[n]);if(iee)for(var n of iee(t))Gut.call(t,n)&&oee(e,n,t[n]);return e},X8=(e,t)=>Wut(e,Hut(t)),qut=(e,t,n)=>new Promise((r,s)=>{var a=c=>{try{l(n.next(c))}catch(u){s(u)}},i=c=>{try{l(n.throw(c))}catch(u){s(u)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,i);l((n=n.apply(e,t)).next())});function Kut(e,t){var n,r;if(e.videoId!==t.videoId)return!0;const s=((n=e.opts)==null?void 0:n.playerVars)||{},a=((r=t.opts)==null?void 0:r.playerVars)||{};return s.start!==a.start||s.end!==a.end}function lee(e={}){return X8(Q8({},e),{height:0,width:0,playerVars:X8(Q8({},e.playerVars),{autoplay:0,start:0,end:0})})}function Yut(e,t){return e.videoId!==t.videoId||!kut(lee(e.opts),lee(t.opts))}function Qut(e,t){var n,r,s,a;return e.id!==t.id||e.className!==t.className||((n=e.opts)==null?void 0:n.width)!==((r=t.opts)==null?void 0:r.width)||((s=e.opts)==null?void 0:s.height)!==((a=t.opts)==null?void 0:a.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title}var Xut={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},Zut={videoId:Ue.string,id:Ue.string,className:Ue.string,iframeClassName:Ue.string,style:Ue.object,title:Ue.string,loading:Ue.oneOf(["lazy","eager"]),opts:Ue.objectOf(Ue.any),onReady:Ue.func,onError:Ue.func,onPlay:Ue.func,onPause:Ue.func,onEnd:Ue.func,onStateChange:Ue.func,onPlaybackRateChange:Ue.func,onPlaybackQualityChange:Ue.func},M2=class extends R.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=t=>{var n,r;return(r=(n=this.props).onReady)==null?void 0:r.call(n,t)},this.onPlayerError=t=>{var n,r;return(r=(n=this.props).onError)==null?void 0:r.call(n,t)},this.onPlayerStateChange=t=>{var n,r,s,a,i,l,c,u;switch((r=(n=this.props).onStateChange)==null||r.call(n,t),t.data){case M2.PlayerState.ENDED:(a=(s=this.props).onEnd)==null||a.call(s,t);break;case M2.PlayerState.PLAYING:(l=(i=this.props).onPlay)==null||l.call(i,t);break;case M2.PlayerState.PAUSED:(u=(c=this.props).onPause)==null||u.call(c,t);break}},this.onPlayerPlaybackRateChange=t=>{var n,r;return(r=(n=this.props).onPlaybackRateChange)==null?void 0:r.call(n,t)},this.onPlayerPlaybackQualityChange=t=>{var n,r;return(r=(n=this.props).onPlaybackQualityChange)==null?void 0:r.call(n,t)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const t=X8(Q8({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=Vut(this.container,t),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(n=>{this.props.title&&n.setAttribute("title",this.props.title),this.props.loading&&n.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var t;(t=this.internalPlayer)==null||t.getIframe().then(n=>{this.props.id?n.setAttribute("id",this.props.id):n.removeAttribute("id"),this.props.iframeClassName?n.setAttribute("class",this.props.iframeClassName):n.removeAttribute("class"),this.props.opts&&this.props.opts.width?n.setAttribute("width",this.props.opts.width.toString()):n.removeAttribute("width"),this.props.opts&&this.props.opts.height?n.setAttribute("height",this.props.opts.height.toString()):n.removeAttribute("height"),this.props.title?n.setAttribute("title",this.props.title):n.setAttribute("title","YouTube video player"),this.props.loading?n.setAttribute("loading",this.props.loading):n.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var t,n,r,s;if(typeof this.props.videoId>"u"||this.props.videoId===null){(t=this.internalPlayer)==null||t.stopVideo();return}let a=!1;const i={videoId:this.props.videoId};if((n=this.props.opts)!=null&&n.playerVars&&(a=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(i.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(i.endSeconds=this.props.opts.playerVars.end)),a){(r=this.internalPlayer)==null||r.loadVideoById(i);return}(s=this.internalPlayer)==null||s.cueVideoById(i)},this.refContainer=t=>{this.container=t},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return qut(this,null,function*(){Qut(e,this.props)&&this.updatePlayer(),Yut(e,this.props)&&(yield this.resetPlayer()),Kut(e,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return R.createElement("div",{className:this.props.className,style:this.props.style},R.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},y5=M2;y5.propTypes=Zut;y5.defaultProps=Xut;y5.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var cee=y5;const uee={fadeIn:{opacity:1},fadeOut:{opacity:0}},Jut={width:"100%",height:"100%",playerVars:{autoplay:1,color:"white",playsinline:1}},U_=R.memo(e=>{const{isOpen:t,name:n,setisOpen:r,url:s}=e,a=s?Cp(s):void 0,i=f.useRef(void 0),[l,c]=f.useState(!1),u=f.useCallback(p=>{i.current=p.target,c(!0)},[i]),d=f.useCallback(p=>{if(i.current)switch(p.key){case" ":{i.current.getPlayerState()===cee.PlayerState.PLAYING?i.current.pauseVideo():i.current.playVideo();break}case"ArrowRight":{i.current.seekTo(i.current.getCurrentTime()+5,!0);break}case"ArrowLeft":{i.current.seekTo(i.current.getCurrentTime()-5,!0);break}}},[i]);f.useEffect(()=>(t?window.addEventListener("keydown",d):window.removeEventListener("keydown",d),()=>{window.removeEventListener("keydown",d)}),[d,t]);const m=f.useCallback(p=>{r(p)},[r]);return a?o.jsx(xU,{open:t,onOpenChange:m,children:o.jsx(Nhe,{className:"z-10",asChild:!0,children:o.jsxs(ve.div,{className:"bg-backdrop dark fixed inset-0 flex items-center justify-center backdrop-blur-md",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",variants:uee,transition:{duration:.2},children:[o.jsx(xYe,{asChild:!0,children:o.jsx(pe,{extraCSS:"!fixed top-md right-md shadow-sm",icon:It,pill:!0,size:"small",variant:"common"})}),o.jsxs(I3,{className:"grid outline-none","aria-describedby":void 0,children:[o.jsx(v_,{children:o.jsx(R3,{children:n})}),o.jsxs(Je,{children:[!l&&o.jsx(ve.div,{className:"grid place-items-center [grid-area:1/-1]",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",transition:{duration:.2},variants:uee,children:o.jsx(Zr,{size:24})},"youtube-player-loading"),o.jsx(ve.div,{className:V("aspect-video overflow-hidden rounded-2xl shadow-lg [grid-area:1/-1] *:size-full","w-[calc(100dvw-(2*var(--size-md)))] sm:w-[75vw]"),initial:{opacity:0},animate:{opacity:l?1:0},transition:{duration:.2},children:o.jsx(cee,{onReady:u,opts:Jut,title:n,videoId:a})},"youtube-player-content")]})]})]},"youtube-player-overlay")})}):null});U_.displayName="YoutubeVideoPlayer";const mV=R.memo(({result:e,idx:t,isSelected:n,testId:r,additionalMetadata:s,isTrendingLayout:a=!1,trackEvent:i,downloadCitation:l,getImageUrl:c,variant:u,isSidecar:d,onClick:m,useLightBoxModal:p=!0})=>{const h=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":"sourceCard";f.useEffect(()=>{const O=setTimeout(()=>i?.("source card viewed",{citation_url:e.url,position:t,title:e.name,source:h}),100);return()=>clearTimeout(O)},[i,e.name,e.url,t,h]);const g=e.url,[y,x]=f.useState(()=>!e.is_memory&&JB(e.url)?e.url:null),[v,b]=f.useState(!1),_=f.useMemo(()=>g&&!d&&Cp(g),[g,d]),[w,C]=f.useState(!1),S=H0e(e),E=hi(e.url),M=!_&&!e.is_attachment&&!E,k=a&&e.meta_data?.client==="trending",N=f.useMemo(()=>k?o.jsx(Eve,{result:e,authors:e.meta_data?.authors,imageURL:e.meta_data?.images?.[0]}):E&&y?o.jsx(Cve,{result:e,imageURL:y,useLightBoxModal:p}):E&&!y?o.jsx(To,{blockCount:1,size:"large"}):o.jsx(wve,{result:e,variant:u,additionalMetadata:s,isSelected:n}),[k,E,y,e,p,u,s,n]),P=f.useCallback((O,A)=>{b(A),x(O)},[]),L=f.useRef(null);return f.useEffect(()=>{const O=new IntersectionObserver(j=>{j.forEach(T=>{T.isIntersecting&&E&&y===null&&!v&&c?.(e,P)})},{threshold:.1}),A=L.current;return A&&E&&O.observe(A),()=>{A&&E&&O.unobserve(A)}},[L,g,c,e,y,P,v,E]),o.jsxs(uV,{result:e,trackEvent:i,children:[o.jsx("div",{ref:L,onClick:O=>{const A=typeof e.meta_data?.quoteBeforeContext=="string"?e.meta_data?.quoteBeforeContext:"",j=typeof e.meta_data?.quoteEmphasisText=="string"?e.meta_data?.quoteEmphasisText:"",T=typeof e.meta_data?.quoteAfterContext=="string"?e.meta_data?.quoteAfterContext:"",I=A.length>0||j.length>0||T.length>0;if(_&&!w&&C(!0),S&&typeof window<"u"){const U=window.open(g,"_blank");U&&U.focus()}else l&&!E?(O.preventDefault(),l(e)):m?.(O);i?.("click citation",{source:h,citation_url:g}),I&&i?.("click check sources citation",{source:h,citation_url:g,quoteBeforeContext:A,quoteEmphasisText:j,quoteAfterContext:T})},className:V("group relative flex w-full items-stretch",{"h-full":u==="grid","cursor-pointer":!!l||!!_||!!m}),"data-test-id":r,children:o.jsx(H,{variant:"subtler",bgHover:M||_?"subtle":void 0,className:V("flex w-full rounded-lg",{"bg-super/10 ring-super/80 hover:!bg-super/10 dark:bg-super/20 dark:ring-super/80 dark:hover:!bg-super/20 ring-1":n}),children:N},e.name)}),_&&g&&e.name&&o.jsx(U_,{isOpen:w,name:e.name,url:g,setisOpen:C})]})});mV.displayName="CitationCard";const edt=we(async()=>{const{MarkSpinner:e}=await Q(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>lTe);return{MarkSpinner:t}},void 0);return{default:e}}),Mve=R.memo(({entryUUID:e,frontendContextUUID:t,contextUUID:n,webResults:r,isOpen:s,onClose:a,extendedBeforeContext:i,beforeContext:l,selectedText:c,afterContext:u,state:d})=>{const{$t:m}=Z(),{isMobileStyle:p}=Ce(),{trackEvent:h}=je(),g=f.useCallback((b,_)=>{h(b,{entryUUID:e,frontendContextUUID:t,contextUUID:n,selectedTextExtendedBeforeContext:i,selectedTextBeforeContext:l,selectedText:c,selectedTextAfterContext:u,..._})},[e,t,n,i,l,c,u,h]),y=r?.length??0,x=d==="completed"?y===0?m({defaultMessage:"No sources",id:"tN3HZvczgp"}):m({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:y}):m(d==="loading"?{defaultMessage:"Checking...",id:"1SvspNS1us"}:{defaultMessage:"Error",id:"KN7zKn8z4F"}),v=f.useMemo(()=>o.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[o.jsx(edt,{size:32,shouldAnimate:d==="loading"}),o.jsx(F,{variant:"page-title",className:V("mr-lg line-clamp-1 md:line-clamp-2"),children:x})]}),[d,x]);return o.jsxs(on,{isOpen:s,variant:p?"bottom-left-sheet":"side-sheet",onClose:a,titleContent:v,children:[o.jsxs(F,{children:[o.jsx("span",{children:l}),o.jsx("span",{className:"bg-super/30 font-bold",children:c}),o.jsx("span",{children:u})]}),o.jsx("hr",{className:"border-subtlest my-4 w-full border-t"}),o.jsx(H,{className:"gap-md flex h-full flex-col items-start",children:r?.map((b,_)=>o.jsx("div",{className:"gap-sm flex w-full min-w-0 flex-row-reverse",children:o.jsx(mV,{result:b,idx:_,isSelected:!1,variant:"modal",trackEvent:g})},_))})]})});Mve.displayName="CheckSourcesModal";const Lun=3,tdt=120,ndt=1.5,Dun=2,Fun=4;function kve(e){return"article_info"in e}const Uun=(e,t)=>({backend_uuid:"",context_uuid:"",frontend_context_uuid:"",knowledge_cards:void 0,widget_data:void 0,query_str:e,status:Xn.STAGED.toLowerCase(),uuid:t,article_info:{title:e,summary:"",has_changed_title:!1,layout:"text",format:"paragraph",length:"concise",suggested_sections:[],user_selected_media_items:[],audience:"anyone",read_time:0,hero_offset:-1,emphasize_sources:!1,is_live:!1,is_auto_generated:!1},prompt_source:"page_suggestion",final:!1,mode:ug.ARTICLE.toLowerCase(),sources:{sources:[]},should_index:!1,updated_datetime:void 0,thread_url_slug:void 0,expiry_time:null,thread_access:0,privacy_state:$g.NONE}),Bun=e=>e?e.image_width&&e.image_height?e.image_width<tdt?!1:e.image_width>=ndt*e.image_height:!0:!1,Vun=(e,t,n,r)=>{const s=[...e],a=t.find(i=>i.image===n);return a&&r<s.length&&s.splice(r,1,a),s},$un=(e,t,n)=>{const r=[...e],s=r.findIndex(a=>a.image===t);if(s!==-1&&n<r.length){const a=r[n],i=r[s];a&&i&&(r[n]=i,r[s]=a)}return r},hx=()=>{const{session:e}=Nt(),t=pn(),{firstResult:{backend_uuid:n,context_uuid:r}={}}=Ht(),s=f.useCallback((a,i)=>{al({name:a,data:{entryUUID:n,threadUUID:r,...i,isPerplexityBrowser:t},session:e??void 0})},[n,r,t,e]);return f.useMemo(()=>({trackEvent:s}),[s])};var x5="Checkbox",[rdt,Wun]=Mi(x5),[sdt,pV]=rdt(x5);function adt(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:m}=e,[p,h]=Cl({prop:n,defaultProp:s??!1,onChange:c,caller:x5}),[g,y]=f.useState(null),[x,v]=f.useState(null),b=f.useRef(!1),_=g?!!i||!!g.closest("form"):!0,w={checked:p,disabled:a,setChecked:h,control:g,setControl:y,name:l,form:i,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:Id(s)?!1:s,isFormControl:_,bubbleInput:x,setBubbleInput:v};return o.jsx(sdt,{scope:t,...w,children:idt(m)?m(w):r})}var Tve="CheckboxTrigger",Nve=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:i,disabled:l,checked:c,required:u,setControl:d,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:g}=pV(Tve,e),y=Hn(s,d),x=f.useRef(c);return f.useEffect(()=>{const v=a?.form;if(v){const b=()=>m(x.current);return v.addEventListener("reset",b),()=>v.removeEventListener("reset",b)}},[a,m]),o.jsx(mn.button,{type:"button",role:"checkbox","aria-checked":Id(c)?"mixed":c,"aria-required":u,"data-state":Ove(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:y,onKeyDown:Wt(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Wt(n,v=>{m(b=>Id(b)?!0:!b),g&&h&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});Nve.displayName=Tve;var jve=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:u,form:d,...m}=e;return o.jsx(adt,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:i,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>o.jsxs(o.Fragment,{children:[o.jsx(Nve,{...m,ref:t,__scopeCheckbox:n}),p&&o.jsx(Pve,{__scopeCheckbox:n})]})})});jve.displayName=x5;var Ave="CheckboxIndicator",Ive=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=pV(Ave,n);return o.jsx(wa,{present:r||Id(a.checked)||a.checked===!0,children:o.jsx(mn.span,{"data-state":Ove(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Ive.displayName=Ave;var Rve="CheckboxBubbleInput",Pve=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:l,disabled:c,name:u,value:d,form:m,bubbleInput:p,setBubbleInput:h}=pV(Rve,e),g=Hn(n,h),y=ZU(a),x=i3(r);f.useEffect(()=>{const b=p;if(!b)return;const _=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(_,"checked").set,S=!s.current;if(y!==a&&C){const E=new Event("click",{bubbles:S});b.indeterminate=Id(a),C.call(b,Id(a)?!1:a),b.dispatchEvent(E)}},[p,y,a,s]);const v=f.useRef(Id(a)?!1:a);return o.jsx(mn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??v.current,required:l,disabled:c,name:u,value:d,form:m,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Pve.displayName=Rve;function idt(e){return typeof e=="function"}function Id(e){return e==="indeterminate"}function Ove(e){return Id(e)?"indeterminate":e?"checked":"unchecked"}const B_=R.memo(({checked:e,toggleChecked:t,className:n="",variant:r="default",unselectedCheckboxClassName:s,...a})=>o.jsx(jve,{className:V("inline-flex cursor-pointer items-center justify-center duration-150",{"size-[24px]":r==="large","size-[18px]":r==="default","size-[14px]":r==="small"},n),checked:e,onCheckedChange:t,...a,children:o.jsx(H,{variant:e?"super":"background",noBorder:!0,className:V("border-subtle inline-flex size-full items-center justify-center rounded border",{"!border-super bg-super":e},!e&&s),children:o.jsx(Ive,{children:o.jsx(Je,{children:e&&o.jsx(ve.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{type:"spring",bounce:.2,duration:.2},children:o.jsx(le,{icon:Ar,size:r==="small"?"xs":"sm",className:"text-inverse"})})})})})}));B_.displayName="Checkbox";const Lve=R.memo(({onSelect:e,isSelected:t,result:n,idx:r})=>{const s=i=>{e?.(i)},{trackEvent:a}=je();return o.jsxs("div",{className:"gap-sm flex w-full flex-row-reverse",children:[o.jsx("div",{className:"w-full min-w-0",children:o.jsx(mV,{result:n,idx:r,isSelected:t,variant:"modal",trackEvent:a})}),e&&o.jsx("div",{className:"mt-[6px] shrink-0",children:o.jsx(B_,{checked:t,toggleChecked:s.bind(null,n.url)})})]})});Lve.displayName="ManageCitationRow";const hV=R.memo(({webResults:e,isOpen:t,submit:n,onClose:r,entry:s})=>{const{$t:a}=Z(),{isMobileStyle:i}=Ce(),[l,c]=f.useState([]),{trackEvent:u}=hx(),d=b=>{c(_=>_.includes(b)?_.filter(w=>w!==b):_.concat(b))},m=f.useCallback(()=>{c([]),r()},[c,r]),p=f.useCallback(b=>{u("click apply curation",{toDelete:b,entryUUID:s?.backend_uuid??void 0}),n?.(b)},[u,s,n]),h=f.useCallback(()=>{l.length>0&&p([...l]),m()},[l,m,p]),g=f.useMemo(()=>l.length>0?[{text:l.length===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {Remove # source} other {Remove # sources}}",id:"aRfiMe0V3R"},{sources:l.length}),disabled:l.length===0,onClick:h}]:[],[l.length,a,h]),y=s?.query_str??"";let x=y?Iu(y).actualQuery:"";s&&kve(s)&&s.article_info?.title&&(x=s.article_info.title);const v=e?.length??0;return o.jsx(on,{actionList:g,title:v===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:v}),subtitle:x??void 0,isOpen:t,variant:i?"bottom-left-sheet":"side-sheet",onClose:m,icon:Lm,children:o.jsx(H,{className:"gap-md flex h-full flex-col items-start",children:e?.map((b,_)=>o.jsx(Lve,{onSelect:s&&n?d:void 0,isSelected:l.includes(b.url),idx:_,result:b},b.url))})})});hV.displayName="CitationListModal";const Ds=()=>{const[e,t]=R.useState(!1);return R.useEffect(()=>{t(!0)},[]),e},odt=({children:e,initial:t=!1,mode:n="wait",className:r,transition:s,supportZeroHeight:a=!0,...i})=>{const[l,{height:c}]=vc(),u=Ds(),d=a||c>0?c:"auto";return o.jsx(ve.div,{animate:{height:u?d:"auto"},className:r,transition:s,...i,children:o.jsx("div",{ref:l,children:o.jsx(Je,{mode:n,initial:t,children:e})})})},an=Ci(.16,1,.3,1),Hun=Ci(.7,0,.84,0),ldt=({children:e,initial:t={opacity:0},animate:n={opacity:1},exit:r,transition:s,className:a,style:i,ref:l})=>o.jsx(ve.div,{initial:t,animate:n,exit:r??t,transition:s,ref:l,className:a,style:i,children:e}),na=odt,is=ldt,Jl={outOfDate:ee({defaultMessage:"Out of date",id:"osuyeDna3D"}),inaccurate:ee({defaultMessage:"Inaccurate",id:"nzRZzFiqUd"}),irrelevant:ee({defaultMessage:"Irrelevant",id:"yi63oZJMHr"}),upToDate:ee({defaultMessage:"Up to date",id:"aOfyGCCmT0"}),accurate:ee({defaultMessage:"Accurate",id:"wrxp13nnhA"}),relevant:ee({defaultMessage:"Relevant",id:"XpZsjM22T8"}),successToast:ee({defaultMessage:"Thank you for your detailed feedback!",id:"ZrHT928df5"}),positivePrompt:ee({defaultMessage:"What did you like about this memory? (optional)",id:"xNH2PHiuYB"}),negativePrompt:ee({defaultMessage:"What didn't you like about this memory? (optional)",id:"gEOv/lEKfP"}),placeholder:ee({defaultMessage:"Add specific details",id:"HY/Q6ifj24"})},cdt={out_of_date:Jl.outOfDate,inaccurate:Jl.inaccurate,irrelevant:Jl.irrelevant},udt={up_to_date:Jl.upToDate,accurate:Jl.accurate,relevant:Jl.relevant},Dve=R.memo(({type:e,message:t,onFeedbackClick:n})=>{const s=Z().formatMessage,a=f.useCallback(()=>{n(e)},[e,n]);return o.jsx(pe,{size:"small",variant:"common",text:s(t),onClick:a,extraCSS:"w-full justify-start text-left"})});Dve.displayName="FeedbackOption";const Fve=R.memo(({isPositive:e,onFeedbackClick:t,onFreeformVisible:n})=>{const r=e?udt:cdt,s=f.useMemo(()=>Object.entries(r).map(([a,i])=>o.jsx(Dve,{type:a,message:i,onFeedbackClick:t},a)),[r,t]);return o.jsxs("div",{className:"gap-sm flex flex-col",children:[s,o.jsx(pe,{size:"small",variant:"common",text:"Other...",onClick:n,extraCSS:"w-full justify-start text-left"})]})});Fve.displayName="FeedbackOptions";const Uve=R.memo(({onSubmit:e,feedbackState:t,setFeedbackState:n,onDismiss:r,isPositive:s})=>{const{deprecatedOpenToast:a}=Mn(),l=Z().formatMessage,{isMobileStyle:c,isMobileUserAgent:u}=Ce(),[d,m]=f.useState(!1),p=f.useCallback(()=>{a(l(Jl.successToast),"success",2)},[a,l]),h=f.useCallback(C=>{p(),e(C)},[p,e]),g=f.useCallback(()=>{t&&h(t)},[t,h]),y=f.useCallback(C=>{const S={type:C};n(S),h(S)},[n,h]),x=f.useCallback(()=>{m(!1)},[m]),v=f.useCallback(()=>{m(!0)},[m]),b=f.useCallback(C=>{n({type:"comment",comment:C})},[n]),_=f.useCallback(C=>{da.isEnterKeyWithoutShift(C)&&g()},[g]),w=f.useMemo(()=>[{type:"button",buttonProps:{variant:"primary",size:"small",icon:_D,onClick:g,disabled:!t?.comment,extraCSS:"aspect-square min-h-md h-md w-md",pill:!0}}],[g,t?.comment]);return o.jsx("div",{className:"mt-lg animate-in fade-in w-full duration-500",children:o.jsxs(H,{className:"gap-sm p-md pt-sm relative flex w-full flex-col rounded-md border",children:[o.jsx("div",{className:V("absolute bottom-full flex size-0 items-end",s?"left-2":"left-10"),children:o.jsx(H,{variant:"background",className:"size-3 shrink-0 origin-bottom-left rotate-45 border border-b-0 border-r-0"})}),o.jsxs("div",{className:V("ease-outExpo flex items-center pr-8 duration-150",{"pl-4":d}),children:[o.jsx(Te,{size:"tiny",onClick:x,pill:!0,icon:xD,extraCSS:V("!absolute duration-150",{"opacity-0 pointer-events-none":!d,"top-xs left-xs":d})}),o.jsx(F,{variant:"small",color:"light",children:l(s?Jl.positivePrompt:Jl.negativePrompt)})]}),o.jsx(na,{mode:"popLayout",transition:{duration:.2,ease:an},children:o.jsx(is,{initial:{opacity:0,x:d?10:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:d?-10:10},transition:{duration:.2,ease:an},children:d?o.jsx("div",{className:"gap-x-sm flex items-end",children:o.jsx("div",{className:"flex-1",children:o.jsx(qa,{className:"pr-md w-full",placeholder:l(Jl.placeholder),value:t?.comment||"",minRows:3,isOptional:!0,onChange:b,onKeyDown:_,autoFocus:!0,isMobileStyle:c,isMobileUserAgent:u,rightItems:w})})}):o.jsx(Fve,{isPositive:s,onFeedbackClick:y,onFreeformVisible:v})},d?"visible":"hidden")}),o.jsx(Te,{size:"tiny",onClick:r,pill:!0,icon:It,extraCSS:"!absolute top-xs right-xs"})]})})});Uve.displayName="MemoryFeedbackInput";const ddt=20,fdt=async({queryParams:e,headers:t={},reason:n})=>{const r="getMemories";try{const s=await ae.GET("/rest/memories/list",n,{params:{query:{limit:e.limit,offset:e.offset,query:e.query},timeoutMs:en.MEDIUM},headers:t});return s.data?{memories:s.data.memories,totalCount:s.data.total_memory_count}:{memories:[],totalCount:0}}catch(s){return ne.log(`Error in ${r}:`,s),{memories:[],totalCount:0}}},mdt=(e,t)=>{const n=t.reduce((r,s)=>r+s.memories.length,0);if(n<e.totalCount)return n},zun=({initialPageParam:e=0,searchQuery:t,reason:n})=>$u({queryKey:zU(t),queryFn:async({pageParam:r})=>fdt({queryParams:{limit:ddt,offset:r??0,query:t},reason:n}),getNextPageParam:mdt,initialPageParam:e,refetchOnMount:"always",placeholderData:r=>r}),pdt=async({memoryKey:e,reason:t})=>{try{return(await ae.DELETE("/rest/memories/delete",t,{params:{query:{memory_key:e}}})).data}catch(n){ne.log("Error in deleteMemory:",n);return}},hdt=({reason:e})=>{const t=xt();return St({mutationFn:n=>pdt({memoryKey:n,reason:e}),onMutate:async n=>{await t.cancelQueries({queryKey:["memories"]});const r=t.getQueryData(["memories"]);try{t.setQueryData(["memories"],s=>{if(!s)return s;const a=s.pages.map(i=>({totalCount:i.totalCount-1,memories:i.memories.filter(l=>l.memory_key!==n)}));return{...s,pages:a}})}catch(s){ne.log(`Error in onMutate deleteMemories (${zU()}):`,s)}return{previousData:r}},onError:(n,r,s)=>{s?.previousData&&t.setQueryData(["memories"],s.previousData)},onSettled:()=>{t.invalidateQueries({queryKey:["memories"]})}})},gdt=async({reason:e})=>{try{return(await ae.DELETE("/rest/memories/delete-all",e)).data}catch(t){ne.log("Error in deleteAllMemories:",t);return}},ydt=()=>{const e=xt();return St({mutationFn:gdt,onMutate:async()=>{await e.cancelQueries({queryKey:["memories"]});const t=e.getQueryData(["memories"]);try{e.setQueryData(["memories"],()=>({pages:[{memories:[],totalCount:0}],pageParams:[0]}))}catch(n){ne.log(`Error in onMutate deleteAllMemories (${zU()}):`,n)}return{previousData:t}},onError:(t,n,r)=>{r?.previousData&&e.setQueryData(["memories"],r.previousData)},onSuccess:()=>{e.invalidateQueries({queryKey:["memories"]})}})},xdt=async({memoryKey:e,shouldForget:t,feedback:n,feedbackEntryUuid:r,reason:s})=>{try{return(await ae.POST("/rest/memories/toggle_memory_feedback",s,{params:{query:{memory_key:e,should_forget:t===null?void 0:t,feedback:n,feedback_entry_uuid:r}}})).data}catch(a){ne.log("Error in forgetMemory:",a);return}},vdt=({memoryKey:e,reason:t})=>{const n=xt();return St({mutationFn:({shouldForget:r,feedback:s,feedbackEntryUuid:a})=>xdt({memoryKey:e,shouldForget:r,feedback:s,feedbackEntryUuid:a,reason:t}),onMutate:async({shouldForget:r})=>{await n.cancelQueries({queryKey:kh(e)});const s=n.getQueryData(kh(e));return n.setQueryData(kh(e),r),{previousFeedback:s}},onError:(r,s,a)=>{a?.previousFeedback!==void 0&&n.setQueryData(kh(e),a.previousFeedback)},onSuccess:()=>{n.invalidateQueries({queryKey:kh(e)})}})},bdt=async({entryUuid:e,shouldForget:t,feedback:n,feedbackEntryUuid:r,reason:s})=>{try{return(await ae.POST("/rest/memories/toggle_entry_feedback",s,{params:{query:{entry_uuid:e,should_forget:t===null?void 0:t,feedback:n,feedback_entry_uuid:r}}})).data}catch(a){ne.log("Error in forgetEntry:",a);return}},_dt=({entryUuid:e,reason:t})=>{const n=xt();return St({mutationFn:({shouldForget:r,feedback:s,feedbackEntryUuid:a})=>bdt({entryUuid:e,shouldForget:r,feedback:s,feedbackEntryUuid:a,reason:t}),onMutate:async({shouldForget:r})=>{await n.cancelQueries({queryKey:Th(e)});const s=n.getQueryData(Th(e));return n.setQueryData(Th(e),r),{previousFeedback:s}},onError:(r,s,a)=>{a?.previousFeedback!==void 0&&n.setQueryData(Th(e),a.previousFeedback)},onSuccess:()=>{n.invalidateQueries({queryKey:Th(e)})}})},wdt=async({memoryKey:e,reason:t})=>{try{return(await ae.GET("/rest/memories/get",t,{params:{query:{memory_key:e}}})).data?.memories?.[0]?.is_thumbs_down}catch(n){ne.log("Error in getMemory:",n);return}},Cdt=({memoryKey:e,enabled:t,reason:n})=>We({queryKey:kh(e??""),queryFn:()=>e?wdt({memoryKey:e,reason:n}):null,enabled:!!e&&t}),Sdt=async({entryUuid:e,reason:t})=>{try{return(await ae.GET("/rest/memories/get_entries",t,{params:{query:{entry_uuid:e}}})).data?.entries?.[0]?.is_thumbs_down}catch(n){ne.log("Error in getEntry:",n);return}},Edt=({entryUuid:e,enabled:t,reason:n})=>We({queryKey:Th(e??""),queryFn:()=>e?Sdt({entryUuid:e,reason:n}):null,enabled:!!e&&t}),Mdt=async({memoryKey:e,reason:t})=>{try{return(await ae.GET("/rest/memories/get",t,{params:{query:{memory_key:e}}})).data?.memories?.[0]}catch(n){ne.log("Error in getMemoryDetail:",n);return}},Gun=({memoryKey:e,enabled:t,reason:n})=>We({queryKey:["memory-detail",e],queryFn:()=>e?Mdt({memoryKey:e,reason:n}):null,enabled:!!e&&t,retry:2}),Bve=e=>{if(!e)return;const t=e.split("/").filter(Boolean);return t.length>0?t[t.length-1]:void 0},Vve=e=>{const t=e.is_memory?"memory":"conversation_history",n=e.is_memory?e.url:void 0,r=e.is_conversation_history?Bve(e.url):void 0;return{snippet:e.snippet,url:e.url??"",title:e.name,type:t,memoryKey:n,entryUuid:r,timestamp:e.timestamp??""}},$ve=R.memo(({isOpen:e,onClose:t,snippet:n,type:r,url:s,memoryKey:a,entryUuid:i,title:l,timestamp:c})=>{const{formatDate:u}=Z(),d=Ca(),m=r==="conversation_history",p=r==="memory",{trackEvent:h}=je(),{openStackedModal:g}=wt(),y=f.useCallback(()=>{h("navigated to manage memory",{memory_key:a}),g("memoryListModal",{isMemoryEnabled:!0})},[a,h,g]),x=f.useMemo(()=>o.jsx(F,{variant:"small",children:o.jsx(he,{defaultMessage:"Manage",id:"0AzlrbMWV9"})}),[]),v=f.useMemo(()=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(le,{icon:m?bp:sc}),o.jsx(F,{variant:"baseSemi",children:m?o.jsx(he,{defaultMessage:"Library",id:"StcK672jB9"}):o.jsx(he,{defaultMessage:"Memory",id:"dVx3yznM2C"})})]}),[m]);return o.jsxs(on,{variant:d?"bottom-sheet":"side-sheet",isOpen:e,onClose:t,modalClassname:"md:!max-w-[400px] md:!min-w-[400px]",modalContentClassname:"justify-between",titleContent:v,children:[o.jsxs(H,{className:"flex size-full flex-col items-start",children:[l&&c&&o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"baseSemi",children:l}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"pb-sm",children:u(c,{dateStyle:"long"})})]}),o.jsxs("div",{className:"inline",children:[o.jsx(F,{variant:"small",className:"inline",children:n}),o.jsx(F,{variant:"smallBold",className:"ml-1 inline",color:"super",children:m&&o.jsx(Ye,{href:s,target:"_blank",rel:"noopener",className:"whitespace-nowrap",children:o.jsx(he,{defaultMessage:"See more",id:"yoLwRWw99S"})})})]}),o.jsx(Wve,{entryUuid:i??"",memoryKey:a??"",type:r})]}),p&&o.jsxs(H,{className:"flex w-full items-center justify-center gap-1",children:[o.jsx(F,{variant:"small",className:"inline",color:"light",children:o.jsx(he,{defaultMessage:"See all your memories.",id:"h0JAuR900y"})}),o.jsx(Te,{onClick:y,size:"small",variant:"common",noPadding:!0,text:x})]})]})});$ve.displayName="MemorySearchHistoryModal";const Wve=R.memo(({entryUuid:e,memoryKey:t,type:n})=>{const r="feedback-container",{$t:s}=Z(),a=f.useMemo(()=>{if(typeof window>"u")return;const M=Bve(window.location.pathname);if(M)return M.split("-").pop()},[]),{mutate:i}=_dt({entryUuid:e??"",reason:r}),{mutate:l}=vdt({memoryKey:t??"",reason:r}),{trackEvent:c}=je(),{data:u}=Cdt({memoryKey:t,enabled:!!t&&n==="memory",reason:r}),{data:d}=Edt({entryUuid:e??"",enabled:!!e&&n==="conversation_history",reason:r}),[m,p]=f.useState(!1),[h,g]=f.useState(!1),[y,x]=f.useState(null),v=f.useMemo(()=>n==="memory"?u:d,[n,u,d]),b=f.useCallback((M,k)=>{n==="conversation_history"&&e&&i({shouldForget:M,feedback:k,feedbackEntryUuid:a}),n==="memory"&&t&&l({shouldForget:M,feedback:k,feedbackEntryUuid:a})},[n,e,t,i,l,a]),_=f.useCallback(M=>{c("memory search history feedback",{type:n,isHelpful:!M,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),b(M),g(!M),p(!0)},[n,e,t,c,b]),w=f.useCallback(()=>{if(v===!1){b(null),p(!1);return}_(!1)},[v,b,_]),C=f.useCallback(()=>{if(v===!0){b(null),p(!1);return}_(!0)},[v,b,_]),S=f.useCallback(M=>{const k=M.type==="comment"?M.comment:M.type;b(!h,k),c("memory search history feedback",{type:n,isHelpful:h,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),p(!1),x(null)},[n,e,t,c,h,b]),E=f.useCallback(()=>{p(!1),x(null)},[]);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(Te,{size:"small",icon:Tdt(v??null),onClick:w,toolTip:s({defaultMessage:"Helpful",id:"5vwKkgYwrE"}),pill:!0}),o.jsx(Te,{size:"small",icon:kdt(v??null),onClick:C,toolTip:s({defaultMessage:"Not helpful",id:"04tuTF23S7"}),pill:!0})]}),v===!0&&o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(he,{defaultMessage:"This {type} will not be referenced in future searches.",id:"167AKZjMm1",values:{type:n==="memory"?"memory":"entry"}})}),m&&o.jsx(Uve,{onSubmit:S,feedbackState:y,setFeedbackState:x,onDismiss:E,isPositive:h})]})});Wve.displayName="FeedbackContainer";const kdt=e=>e===null?uE:e===!0?BLe:uE,Tdt=e=>e===null?yP:e===!1?VLe:yP,Kc={linear_alt:{name:"Linear",tagline:ee({defaultMessage:"Plan and track projects, issues, and team workflows in Linear",id:"6u9Zf65BGW"}),bullets:[ee({defaultMessage:"Search across Linear issues, projects, and teams",id:"MicGE6HssU"}),ee({defaultMessage:"Create and update Linear issues and projects",id:"scUqB1LbKr"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Linear whenever you query in Perplexity",id:"b/8mLQxIqE"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.linear.app",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167711-linear-connector-for-enterprise-pro",footnote:{link:"https://www.perplexity.ai/help-center/en/articles/12167711-linear-connector-for-enterprise-pro",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},google_drive:{name:"Google Drive",tagline:ee({defaultMessage:"Get in-depth answers from your Google Drive content",id:"CDmY5AQsRD"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your Google Drive files are automatically synced to Perplexity",id:"k0B4qzv3NH"}),ee({defaultMessage:"File and folder selection is based on your existing Google Drive permissions",id:"J1Fu/3n3pb"})],consumerBullets:[ee({defaultMessage:"Attach files from Google Drive to your query",id:"aUk7jts0tb"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://drive.google.com",supportUrl:null,documentationUrl:null,footnote:null},sharepoint:{name:"SharePoint",tagline:ee({defaultMessage:"Get in-depth answers from your SharePoint content",id:"H/XGo2cLQi"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your SharePoint files are automatically synced to Perplexity",id:"3asA6JKlOn"}),ee({defaultMessage:"File and folder selection is based on your existing SharePoint permissions",id:"m2/iFnRhkg"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://microsoft.sharepoint.com/",supportUrl:null,documentationUrl:null,footnote:null},onedrive:{name:"OneDrive",tagline:ee({defaultMessage:"Get in-depth answers from your OneDrive content",id:"6HI2ZlxJGV"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your OneDrive files are automatically synced to Perplexity",id:"gCHhNKes4R"}),ee({defaultMessage:"File and folder selection is based on your existing OneDrive permissions",id:"YCVPoXax40"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.microsoft.com/en-us/microsoft-365/onedrive/online-cloud-storage",documentationUrl:null,supportUrl:null,footnote:null},box:{name:"Box",tagline:ee({defaultMessage:"Get in-depth answers from your Box content",id:"vj5W7AIDE6"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your Box files are automatically synced to Perplexity",id:"tkl3HRlwOf"}),ee({defaultMessage:"File and folder selection is based on your existing Box permissions",id:"LuX1iT7lFa"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.box.com/",documentationUrl:null,supportUrl:null,footnote:null},dropbox:{name:"Dropbox",tagline:ee({defaultMessage:"Get in-depth answers from your Dropbox content",id:"+RPvqEE51/"}),bullets:[ee({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),ee({defaultMessage:"Updates to your Dropbox files are automatically synced to Perplexity",id:"Qnsbs8527p"}),ee({defaultMessage:"File and folder selection is based on your existing Dropbox permissions",id:"kzOZ3ZFcW4"})],consumerBullets:[ee({defaultMessage:"Attach files from Dropbox to your query",id:"E/rzAALT5B"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.dropbox.com/",documentationUrl:null,supportUrl:null,footnote:null},notion_mcp:{name:"Notion",tagline:ee({defaultMessage:"Search and create content on your Notion pages",id:"rXdfDrSVlj"}),bullets:[ee({defaultMessage:"Search across your pages and data ",id:"Ib2j2yH5wv"}),ee({defaultMessage:"Create new pages in your teamspace from Perplexity",id:"Ltbp+B60OB"}),ee({defaultMessage:"Update your data on existing pages directly from Perplexity",id:"ldpNlZAKLQ"}),ee({defaultMessage:"Data is retrieved from and written back to Notion whenever you query in Perplexity",id:"nbLEAiWYzT"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.notion.so/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167654-notion-connector-for-enterprise-pro",footnote:null},github_mcp_direct:{name:"GitHub",tagline:ee({defaultMessage:"Search and manage your GitHub repositories ",id:"4miSrKjLad"}),bullets:[ee({defaultMessage:"Search, analyze, and summarize your repositories and issues",id:"hi8CvW/ld8"}),ee({defaultMessage:"Create, update, and manage issues and pull requests ",id:"6eZgVvjZEw"}),ee({defaultMessage:"Monitor workflows ",id:"EduR5immBI"}),ee({defaultMessage:"Search and manage notifications to streamline communication",id:"+zOuCOpAH8"}),ee({defaultMessage:"Data is retrieved from and written back to GitHub whenever you query in Perplexity",id:"9EQO9mj0sd"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://github.com/",supportUrl:"https://www.perplexity.ai/help-center/en/articles/12275669-github-connector-for-enterprise",documentationUrl:null,footnote:null},asana_mcp_direct:{name:"Asana",tagline:ee({defaultMessage:"Plan and track projects, tasks, and team workflows in Asana",id:"9AhVP0Y+6c"}),bullets:[ee({defaultMessage:"Search across Asana tasks, projects, and teams",id:"GKC+Sx/2dm"}),ee({defaultMessage:"Create and update Asana tasks and projects",id:"TnQ0Far/ZY"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Asana whenever you query in Perplexity",id:"9NNVAEg7U3"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://asana.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:null},asana_mcp_merge:{name:"Asana",tagline:ee({defaultMessage:"Plan and track projects, tasks, and team workflows in Asana",id:"9AhVP0Y+6c"}),bullets:[ee({defaultMessage:"Search across Asana tasks, projects, and teams",id:"GKC+Sx/2dm"}),ee({defaultMessage:"Create and update Asana tasks and projects",id:"TnQ0Far/ZY"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Asana whenever you query in Perplexity",id:"9NNVAEg7U3"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://asana.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},atlassian_mcp_direct:{name:"Atlassian",tagline:ee({defaultMessage:"Plan and track projects, tasks, and team workflows in Atlassian",id:"OKCrVfJwqD"}),bullets:[ee({defaultMessage:"Search across Atlassian tasks, projects, and teams",id:"3UDuuWRtR5"}),ee({defaultMessage:"Create and update Atlassian tasks and projects",id:"u+44P4c8w+"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Atlassian whenever you query in Perplexity",id:"7gmOJCXim3"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:null},jira_mcp_merge:{name:"Jira",tagline:ee({defaultMessage:"Plan and track projects, tasks, and team workflows in Jira",id:"DBNOet3M55"}),bullets:[ee({defaultMessage:"Search across Jira tasks, projects, and teams",id:"nWIt8qYQz1"}),ee({defaultMessage:"Create and update Jira tasks and projects",id:"mUCQ5Z26EF"}),ee({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),ee({defaultMessage:"Data is retrieved from and written back to Jira whenever you query in Perplexity",id:"CfzDXfmKKD"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},confluence_mcp_merge:{name:"Confluence",tagline:ee({defaultMessage:"Search and create content on your Confluence pages",id:"7maYua4COa"}),bullets:[ee({defaultMessage:"Search across your pages and data ",id:"Ib2j2yH5wv"}),ee({defaultMessage:"Create new pages in your teamspace from Perplexity",id:"Ltbp+B60OB"}),ee({defaultMessage:"Update your data on existing pages directly from Perplexity",id:"ldpNlZAKLQ"}),ee({defaultMessage:"Data is retrieved from and written back to Confluence whenever you query in Perplexity",id:"Ifp49Im16y"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},microsoft_teams_mcp_merge:{name:"Microsoft Teams",tagline:ee({defaultMessage:"Search and send messages in Microsoft Teams",id:"Rfl+yanh+2"}),bullets:[ee({defaultMessage:"Search across Microsoft Teams messages and channels",id:"LF+Ow88sFq"}),ee({defaultMessage:"Send and receive messages in Microsoft Teams",id:"1t8qQ+bxf2"}),ee({defaultMessage:"Data is retrieved from and written back to Microsoft Teams whenever you query in Perplexity",id:"+bTrwFjG66"})],developer:ee({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://teams.microsoft.com",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:ee({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},gcal:{name:"Gmail with Calendar",tagline:ee({defaultMessage:"Search, create, and manage your emails and calendar events",id:"R3VofVJjT+"}),bullets:[ee({defaultMessage:"Search your Gmail and calendar",id:"GCr38D/MA3"}),ee({defaultMessage:"Draft and send emails",id:"rMtvi6WyKE"}),ee({defaultMessage:"Manage and monitor emails and events",id:"p70DVe/3eQ"}),ee({defaultMessage:"Create and update calendar events",id:"ZLhGXocN5/"}),ee({defaultMessage:"Data is retrieved from and written back to Gmail and Gcal whenever you query in Perplexity",id:"HsjdaQ7NYa"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://accounts.google.com/InteractiveLogin?emr=1&ltmpl=default&nojavascript=1&rm=false&service=mail&ss=1",documentationUrl:null,supportUrl:null,footnote:null},outlook:{name:"Outlook",tagline:ee({defaultMessage:"Search your emails and calendar events",id:"zNVRcAj90b"}),bullets:[ee({defaultMessage:"Search your Outlook e-mail and calendar",id:"z5Tw6ljNsF"}),ee({defaultMessage:"Manage and monitor emails and events",id:"p70DVe/3eQ"}),ee({defaultMessage:"Data is retrieved from and written back to Outlook whenever you query in Perplexity",id:"xX8KEtSv2M"})],developer:ee({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.microsoft.com/en-us/microsoft-365/outlook/log-in",documentationUrl:null,supportUrl:null,footnote:null}},Ndt=e=>e in Kc,jdt=({connectorName:e,connectorAvatar:t,showModal:n,setShowModal:r,handleEnable:s})=>{const{$t:a}=Z(),{isEnterprise:i}=H3({reason:"connectors-enable-modal"}),l=Kc[e].websiteUrl,c=Kc[e].documentationUrl,u=Kc[e].tagline,d=Kc[e]?.supportUrl??"https://www.perplexity.ai/help-center/en/articles/10672063-introduction-to-file-connectors-for-enterprise-organizations",m=Kc[e].footnote,p=[{label:"Website",url:l,icon:xp},{label:"Documentation",url:c,icon:x1},{label:"Support",url:d,icon:Fue}],h=!i&&Kc[e].consumerBullets?Kc[e].consumerBullets:Kc[e].bullets;return o.jsx(on,{isOpen:n,onClose:()=>r(!1),variant:"large",modalContentClassname:"!py-0 w-full",modalClassname:"!max-w-2xl !w-screen",wrapperClassname:"w-full",noPadding:!0,children:o.jsxs(H,{className:"flex flex-col gap-6 px-3 pb-6 pt-2",children:[o.jsxs(H,{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[t&&o.jsx(H,{variant:"subtler",className:"border-subtlest shrink-0 rounded-lg border",children:o.jsx("img",{src:t,alt:Ra(e)??void 0,width:60,height:60,className:"object-contain"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"section-title",children:Ra(e)}),u&&o.jsx(F,{variant:"small",color:"light",className:"text-pretty",children:a(u)})]})]}),o.jsx(pe,{text:a({defaultMessage:"Add connector",id:"QDa8Q+GNMs"}),size:"small",variant:"primary",onClick:s,extraCSS:"rounded-full sm:ml-auto"})]}),o.jsxs("section",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"baseSemi",children:a({defaultMessage:"Overview:",id:"75gRjsa29W"})}),o.jsx("ul",{children:h.map((g,y)=>o.jsx(F,{variant:"small",as:"li",className:"mb-xs ml-4 list-disc text-pretty last:mb-0",children:a(g)},y))})]}),o.jsxs("section",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"baseSemi",children:a({defaultMessage:"Links",id:"qCcwo3DU78"})}),o.jsx("ul",{className:"flex flex-col gap-2",children:p.map((g,y)=>{if(!g.url)return null;const x=g.icon;return o.jsx("li",{className:"text-super group w-fit",children:o.jsxs(Ye,{href:g.url,target:"_blank",className:"flex items-center gap-1",children:[o.jsx(le,{icon:x,size:14}),o.jsx(F,{variant:"small",className:"text-inherit group-hover:underline",children:g.label})]})},y)})})]}),m&&o.jsx("section",{className:"border-t py-2",children:o.jsxs(F,{variant:"tinyRegular",className:"text-pretty",children:[o.jsx(F,{as:"span",variant:"tinyRegular",color:"light",children:a(m.text)}),o.jsx(Ye,{href:m.link,target:"_blank",className:"text-super ml-1",children:a({defaultMessage:"Learn more",id:"TdTXXf940t"})})]})})]})})};function Adt({isOpen:e,onContinue:t,onClose:n}){return o.jsx(on,{isOpen:e,onClose:n,title:"",variant:"small",children:o.jsxs(H,{className:"mx-auto w-full rounded-2xl px-4 py-0",children:[o.jsx(F,{variant:"section-title",className:"mb-2",children:o.jsx(he,{defaultMessage:"We need more access to help with your Google calendar and email",id:"qfQz160ySM"})}),o.jsx(F,{variant:"small",color:"light",className:"mb-6",children:o.jsx(he,{defaultMessage:"These permissions let us help you schedule meetings, find important messages, manage your inbox, and provide personalized assistance based on your real schedule and communication needs.",id:"yN/31P429t"})}),o.jsx(F,{variant:"small",color:"light",className:"mb-6",children:o.jsx(he,{defaultMessage:"Important: Please select <b>all permission boxes</b> on the next screen to enable these features.",id:"sr/jqAmxMK",values:{b:r=>o.jsx("span",{className:"font-semibold",children:r})}})}),o.jsx(pe,{text:o.jsx(he,{defaultMessage:"Grant access to calendar and email",id:"SLN8GewG3+"}),variant:"primary",size:"regular",onClick:t,extraCSS:"w-full rounded-xl mb-4"})]})})}const Idt=({isOpen:e,onClose:t})=>{const n="delete-all-memories-modal",r=Z(),{mutate:s}=ydt(),{trackEvent:a}=je(),i=f.useMemo(()=>[{text:r.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common"},{text:r.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{a("cleared all memories",{}),s({reason:n}),t()},variant:"rejected"}],[s,r,t,a]);return o.jsx(on,{isOpen:e,onClose:t,actionList:i,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 max-w-[324px] p-0",headerClassname:"pt-6 px-6  md:px-6 border-b-0 !pb-0",modalContentClassname:"pt-0",footerClassname:"border-t-0 pt-2 px-6 !pb-6 md:pt-2 md:px-6 md:pb-6",title:r.formatMessage({defaultMessage:"Delete all memories",id:"wViT4HVZZG"}),children:o.jsx("div",{className:"w-full justify-start px-2 py-1",children:o.jsx(F,{variant:"tinyRegular",children:r.formatMessage({defaultMessage:"Are you sure you want to delete all of your memories? Memories cannot be recovered once deleted.",id:"2xMxdqIgTQ"})})})})},Rdt=({isOpen:e,onClose:t,memoryId:n,onDeleteSuccess:r})=>{const s="delete-memory-modal",a=Z(),{mutate:i}=hdt({reason:s}),{trackEvent:l}=je(),{isMobileStyle:c}=Ce(),u=f.useMemo(()=>[{text:a.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common",shouldShowConfirmDialog:!0},{text:a.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{n&&(l("delete memory",{memoryId:n}),i(n,{onSuccess:()=>{r?.(),t()}}))},variant:"rejected"}],[i,a,n,t,r,l]);return o.jsx(on,{isOpen:e,onClose:t,actionList:u,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 p-0",variant:c?"bottom-sheet":"default",title:a.formatMessage({defaultMessage:"Delete memory",id:"767lMfHCVm"}),children:o.jsx("div",{className:"w-full",children:o.jsx(F,{variant:"small",children:a.formatMessage({defaultMessage:"Are you sure you want to delete this memory? Memories cannot be recovered once deleted.",id:"bJP46nmx6X"})})})})},dee=50,Vv={title:ee({defaultMessage:"Watchlist",id:"b+DoOaU7zT"}),saveWatchlist:ee({defaultMessage:"Save",id:"jvo0vs3nF0"}),cancel:ee({defaultMessage:"Cancel",id:"47FYwba+bI"}),settingsTitle:ee({defaultMessage:"Categories",id:"VKb1MSJZP+"}),sports:pt({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add teams",id:"kapmPqUzuB"},searchPlaceholder:{defaultMessage:"Search for a team",id:"yve+fFGCVl"},widgetDescription:{defaultMessage:"Choose your teams",id:"6ZVPGK17cb"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}}),finance:pt({title:{defaultMessage:"Finance",id:"Fm3M+yFIbr"},settingsCtaText:{defaultMessage:"Add stocks",id:"IrqguKbukF"},searchPlaceholder:{defaultMessage:"Search...",id:"0BUTMvePvK"},widgetDescription:{defaultMessage:"Set your watchlist",id:"Uh4Ex766Qm"},settingsDescription:{defaultMessage:"Set your watchlist for daily updates and summaries",id:"7SMcHmFldb"},modalDescription:{defaultMessage:"Updates and news about stocks and more",id:"uJAhXQDitL"}}),f1:pt({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add drivers",id:"R9U03Vy8bO"},searchPlaceholder:{defaultMessage:"Search for a driver",id:"lE7oUWeeV1"},widgetDescription:{defaultMessage:"Choose your drivers",id:"sCVGGM0Ka3"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}})},Pdt=({symbol:e})=>o.jsx(F,{color:"light",children:o.jsx("span",{className:"font-mono opacity-70",children:e.slice(0,1)})}),v5=({image:e,imageDark:t,alt:n,watchlistType:r,className:s,imageClassName:a})=>{const i=r==="FINANCE",{colorScheme:l}=Jr(),c=i&&l==="dark"&&t?t:e,[u,d]=f.useState(()=>{if(!c)return!1;const g=new Image;return g.src=c,g.complete&&g.naturalWidth>0}),[m,p]=f.useState(!1),h=!u||m;return o.jsxs("div",{className:V("relative flex size-6 items-center justify-center",{"bg-subtler":h},s),children:[h&&o.jsx(Pdt,{symbol:n??""}),!m&&o.jsx("div",{className:V("absolute",a),children:o.jsx("img",{src:c,alt:n,width:32,height:32,className:V("inset-0 size-full object-contain",{"opacity-0":!u}),onLoad:()=>d(!0),onError:()=>p(!0)})})]})},Hve=async({query:e,watchlistType:t,limit:n,category:r,cometRenderPlace:s,reason:a})=>{const i=encodeURIComponent(e),{data:l,error:c}=await ae.GET("/rest/homepage-widgets/watchlist/list-autosuggest",a,{params:{query:{type:t,query:i,limit:n,category:r,entropy_render_place:s}},timeoutMs:1500,numRetries:1});if(c)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get watchlist autosuggestions",cause:c});return l.results??fe},Odt=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await ae.GET("/rest/homepage-widgets/watchlist/subscription",t,{params:{query:{type:e}},headers:{"content-type":"application/json"},numRetries:1});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get watchlist subscriptions",cause:n});return r.results??[]}catch(n){return ne.error(n),[]}},Ldt=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await ae.GET("/rest/homepage-widgets/watchlist/categories",t,{params:{query:{type:e}},numRetries:1});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get watchlist categories",cause:n});return r?.results??[]}catch(n){return ne.error(n),[]}},Ddt=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await ae.PUT("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t??"",category:n}},headers:{"content-type":"application/json"}});if(s)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to add watchlist subscription",cause:s});return!0}catch(s){return ne.error(s),!1}},Fdt=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await ae.DELETE("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t,category:n}},headers:{"content-type":"application/json"}});if(s)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to remove watchlist subscription",cause:s});return!0}catch(s){return ne.error(s),!1}},Udt=async({watchlistType:e,identifier:t,order:n,reason:r})=>{try{const{error:s}=await ae.PATCH("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t}},body:{order:n},headers:{"content-type":"application/json"}});if(s)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to update watchlist subscription order",cause:s});return!0}catch(s){return ne.error(s),!1}},b5=e=>["watchlist",e,"subscriptions"],Bdt=e=>["watchlist",e,"addSubscription"],Vdt=e=>["watchlist",e,"removeSubscription"],$dt=e=>["watchlist",e,"updateSubscription"],gV=({watchlistType:e,reason:t})=>{const n=lt(),r=b5(e);return We({queryKey:r,queryFn:()=>Odt({watchlistType:e,reason:t}),staleTime:0,enabled:n})},zve=({watchlistType:e,queryClient:t,reason:n})=>{const r=b5(e);return St({mutationKey:Bdt(e),mutationFn:async s=>Ddt({watchlistType:e,reason:n,...s}),onMutate:async({identifier:s,category:a,description:i,image:l,title:c})=>{await t.cancelQueries({queryKey:r});const u=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(d=[])=>{const m={identifier:s??"",category:a,description:i??"",image_url:l??"",title:c??"",subscribed:!0,order:Date.now()},p=d.filter(h=>h.identifier!==s);return[m,...p]}),{previousSubscriptions:u}},onError:(s,a,i)=>{ne.error("Error adding watchlist subscription",s),t.setQueryData(r,i?.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},Gve=({watchlistType:e,queryClient:t,reason:n})=>{const r=b5(e);return St({mutationKey:Vdt(e),mutationFn:async s=>Fdt({watchlistType:e,reason:n,...s}),onSuccess:()=>{t.invalidateQueries({queryKey:r})},onMutate:async({identifier:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(i=[])=>i.filter(l=>l.identifier!==s)),{previousSubscriptions:a}},onError:(s,a,i)=>{ne.error("Error removing watchlist subscription",s),t.setQueryData(r,i?.previousSubscriptions)}})},Wdt=({watchlistType:e,queryClient:t,reason:n})=>{const r=b5(e);return St({mutationKey:$dt(e),mutationFn:async s=>Udt({watchlistType:e,reason:n,...s}),onMutate:async({newOrderedList:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(r);return t.setQueryData(r,s),{previousSubscriptions:a}},onError:(s,a,i)=>{ne.error("Error updating watchlist subscription order",s),i?.previousSubscriptions&&t.setQueryData(r,i.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},fee={nba:c2,nfl:wD,cricket:WLe,ncaam:c2,ncaaw:c2},UA=$Le,Hdt=({watchlistType:e,selectedCategory:t,setSelectedCategory:n})=>{const r="watchlist-category-dropdown",{isMobileStyle:s}=Ce(),{$t:a}=Z(),[i,l]=f.useState([]);f.useEffect(()=>{(async()=>{const m=await Ldt({watchlistType:e,reason:r});l(m)})()},[e]);const c=a({defaultMessage:"All Categories",id:"1X6HtI/EN/"}),u=f.useMemo(()=>[{text:c,icon:UA,onClick:()=>n(void 0),type:"default",active:t===void 0,size:Qt.tiny},...i.map(m=>({text:m.display_name,icon:fee[m.category]||UA,onClick:()=>n(m),type:"default",active:t?.category===m.category,size:Qt.tiny}))],[i,n,t,c]);return i.length===0?null:o.jsx(sn,{isMobileStyle:s,items:u,placement:"bottom-end",children:o.jsx(pe,{icon:fee[t?.category]||UA,size:Qt.tiny,text:t?.display_name??c})})},wn=({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:i="default"})=>{const[l,c]=f.useState(!1),u=a?l:r;return R.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:V({shimmer:u&&i==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&i==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)},qve=e=>e?.includes("perplexity.ai/finance")??!1,Kve=e=>e==="https://www.perplexity.ai/finance",Yve=R.memo(({query:e,completion:t,inputsAndCompletions:n,description:r,highlightPrefix:s,url:a,title:i,shouldShowTitle:l})=>{const c=qve(a),u=Kve(a),d=l&&i?i:e,m=c?d.toUpperCase():d,{$t:p}=Z(),h=c?t?.toUpperCase():t;return u?o.jsx(F,{variant:"small",inline:!0,children:p({defaultMessage:"{perplexity} Finance",id:"LnL5Kdg1cp"},{perplexity:"Perplexity"})},"perplexity-finance"):o.jsxs(o.Fragment,{children:[!r&&n?.length&&s?n.map(([g,y],x)=>g?o.jsx(F,{color:"light",variant:"small",className:"inline",as:"div",children:g},`${x}-${g}`):o.jsx(F,{className:"inline whitespace-pre",variant:"small",as:"div",children:y},`${x}-${y}`)):r?o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"small",inline:!0,children:m}),o.jsx(F,{variant:"tinyRegular",className:"!text-quiet opacity-70",inline:!0,children:r})]}):o.jsx(F,{inline:!0,color:"light",variant:"small",children:m}),t&&s&&!n?.length&&o.jsx(F,{className:"whitespace-pre",inline:!0,variant:"small",children:h}),t&&!s&&o.jsx(F,{color:"light",inline:!0,variant:"small",children:h})]})});Yve.displayName="DefaultQueryContentComponent";const Qve=R.memo(({onClick:e,query:t,completion:n,inputsAndCompletions:r,url:s,suggestionIndex:a,keyboardFocusedIndex:i,setKeyboardFocusedIndex:l,leftIcon:c,rightIcon:u,className:d,description:m,title:p,shouldShowTitle:h,highlightPrefix:g=!0,category:y,QueryContentComponent:x=Yve,metadata:v,actionHandler:b})=>{const{isMobileUserAgent:_}=Ce(),w="group-hover:opacity-100 group-data-[focused=self]:opacity-100",C="opacity-0 group-data-[focused=other]:opacity-0",S=f.useCallback(()=>{l?.(-1)},[l]),E=f.useCallback(M=>h&&p&&t?o.jsx(En,{tooltipText:t,bodyClassName:"max-w-[300px]",showTooltip:!0,asChild:!0,tooltipLayout:"right",children:M}):M,[h,p,t]);return o.jsx(Je,{children:E(o.jsx("div",{"data-focused":i===void 0||i===-1?"none":i===a?"self":"other",className:V("group flex cursor-pointer flex-row items-center rounded-lg p-[8px]",d),onPointerDown:()=>{b?b():e(n?t+n:t)},onPointerLeave:S,children:o.jsxs("div",{className:"flex w-full min-w-0 flex-row whitespace-pre leading-tight",children:[o.jsx(F,{className:"-mr-three",color:"light",inline:!0,variant:"small",children:c}),o.jsx(F,{variant:"small",className:_?"truncate":"line-clamp-2 text-wrap",children:s?o.jsx(Ye,{href:s,target:"_blank",rel:"noopener",children:o.jsx(x,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:v,title:p,shouldShowTitle:h})}):o.jsx(x,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:v,title:p,shouldShowTitle:h})}),u&&o.jsx(F,{variant:"smallBold",color:"super",inline:!0,className:V("pr-xs ml-auto",w,{[C]:!s}),children:u})]})}))})});Qve.displayName="SuggestionCard";const Z8={ticker:{order:0,showHeader:!1,highlightPrefix:!1},suggestion:{order:1,showHeader:!1,highlightPrefix:!0},news:{displayName:"Latest News",order:2,showHeader:!0,highlightPrefix:!1},related_question:{displayName:"Related Questions",order:3,showHeader:!0,highlightPrefix:!1},shortcuts:{displayName:"Shortcuts",order:4,showHeader:!0,highlightPrefix:!0}},zdt=e=>{const t={};return e.forEach(n=>{const r=n.category||"suggestion";t[r]||(t[r]=[]),t[r].push(n)}),t},Gdt=e=>Object.keys(e).sort((t,n)=>{const r=Z8[t]?.order??Number.MAX_SAFE_INTEGER,s=Z8[n]?.order??Number.MAX_SAFE_INTEGER;return r-s}),mee=e=>{const{metadata:t}=e;return!!t&&t.type==="price"&&!!t.price_info&&typeof t.price_info.currentPrice=="number"&&!!t.price_info.change&&!!t.price_info.changePercentage},qdt=e=>[...e].sort((t,n)=>{const r=mee(t),s=mee(n);return r&&!s?-1:!r&&s?1:0}),Xve=R.memo(e=>{const{text:t,show:n,className:r}=e;return n?o.jsxs(o.Fragment,{children:[o.jsx(H,{className:V("my-sm sm:mx-sm border-b first:hidden",r)}),t&&o.jsx(H,{variant:"transparent",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:o.jsx(F,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});Xve.displayName="GroupItemSeparator";const Zve=R.memo(({category:e,suggestions:t,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:i,indexOffset:l,LeftIconComponent:c,RightIconComponent:u,QueryContentComponent:d,onFillButtonClick:m,titleClassName:p})=>{const h=f.useMemo(()=>e==="ticker"?qdt(t):t,[e,t]);return t.length?o.jsxs(o.Fragment,{children:[o.jsx(Xve,{show:n.showHeader,text:n.displayName,className:p}),h.map((g,y)=>o.jsx(Jve,{suggestion:g,index:y,category:e,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:i,indexOffset:l,LeftIconComponent:c,RightIconComponent:u,onFillButtonClick:m,QueryContentComponent:d,highlightPrefix:n.highlightPrefix??!0},`${e}-${g.input+g.completion+g.description||g.query_uuid}`))]}):null});Zve.displayName="SuggestionGroup";const Jve=R.memo(({suggestion:{input:e,completion:t,query_uuid:n,image:r,imageDark:s,url:a="",description:i,identifier:l="",category:c,title:u="",subscribed:d=!1,metadata:m,submission_query:p,inputs_and_completions:h,icon_name:g,shouldShowTitle:y,actionHandler:x,isPersonalized:v},index:b,LeftIconComponent:_,QueryContentComponent:w,RightIconComponent:C,highlightPrefix:S,focusedIndex:E,handleSubmit:M,indexOffset:k,onFillButtonClick:N,setFocusedIndex:P,value:L})=>{const O=f.useCallback(I=>M({query:I,query_uuid:n,url:a,identifier:l,category:c,description:i,image:r,imageDark:s,title:u,subscribed:d,submission_query:p,isPersonalized:v},b+k),[c,i,M,l,r,s,b,k,n,p,d,u,a,v]),A=f.useCallback(()=>{N(e+t,a)},[t,e,N,a]),j=f.useMemo(()=>o.jsx(_,{image:r,imageDark:s,alt:e+L,url:a,category:c,iconName:g,value:L}),[_,c,g,r,s,e,a,L]),T=f.useMemo(()=>o.jsx(C,{onClick:A,url:a,isSelected:d,metadata:m,category:c}),[C,A,a,d,m,c]);return o.jsx(Qve,{onClick:O,query:e,completion:t,inputsAndCompletions:h,url:a,suggestionIndex:b+k,keyboardFocusedIndex:E,setKeyboardFocusedIndex:P,description:i,title:u,shouldShowTitle:y,highlightPrefix:S,className:V("hover:bg-subtler","data-[focused=self]:bg-subtler","dark:data-[focused=self]:bg-subtler","hover:data-[focused=other]:bg-raised","dark:hover:data-[focused=other]:bg-subtler"),category:c,QueryContentComponent:w,metadata:m,leftIcon:j,rightIcon:T,actionHandler:x})});Jve.displayName="SuggestionCardFactory";var Kdt={};const Ydt=60,Qdt=2e3,Xdt=6,Zdt=4,Jdt=5,hg=(e,t)=>e?Zdt:t?Jdt:Xdt,eft=e=>!(e.length===0||e.includes(`
`)),tft=e=>e.map(t=>({query:t.text,image:t.image_url,url:t.url,title:t.title})),nft=e=>e.sort((t,n)=>t.url?-1:n.url?1:t.image?-1:n.image?1:0),J8=(e,t,n)=>{let r=e;(t||Kdt.NEXT_PUBLIC_IS_SIDECAR_BUILD)&&(r=e.filter(i=>!i.url));const s=pue(r,"query");if(n){const i=s.findIndex(l=>l.query===n);if(~i){const l=s[i];s.splice(i,1),s.unshift(l)}}const a=nft(s);return[a,a.slice(0,hg(t))]},e1e=(e,t,n)=>{const r=n?e.replace(/\s+/g,"").toLocaleLowerCase():e,s=t.query;let a=0,i=0;for(;a<r.length&&i<s.length;)r[a]===s[i]?.toLocaleLowerCase()&&a++,i++;return[a===r.length,i]},rft=(e,t)=>{const n=e.replace(/\s+/g,""),r=[];let s="",a="",i=0,l=0;for(;i<n.length&&l<t.length;)n[i]?.toLocaleLowerCase()===t[l]?.toLocaleLowerCase()?(a&&(r.push(["",a]),a=""),s+=t[l],i++,l++):(s&&(r.push([s,""]),s=""),a+=t[l],l++);return s&&r.push([s,""]),a&&r.push(["",a]),l<t.length&&r.push(["",t.slice(l)]),r},sft={calendar:n_,"report-search":Vue,browser:GLe,mail:gp,"shopping-bag":xP,message:CD,"user-heart":Bue,play:Uue,globe:zLe,music:HLe,book:x1,plane:Uk,plus:ur};var aft={};const t1e=R.memo(({image:e,alt:t,url:n,iconName:r,value:s,category:a})=>{const i=s.length===0,[l,c]=f.useState(!1),{sidecarSourceTab:{url:u}}=cs(),d=Xa(),m=f.useMemo(()=>{if(aft.NEXT_PUBLIC_IS_SIDECAR_BUILD&&u&&i)return L1(u);if(e)return e;if(n)return sve(n)},[e,n,u,i]),p=r?sft[r]:null,h=i?IXe[d]??Hs:Hs;return a==="shortcuts"&&!r?o.jsx(le,{icon:qLe,size:"sm",className:"mt-two mr-2 w-5 shrink-0"}):Kve(n)?o.jsx("div",{className:"mr-2 flex size-5 shrink-0 items-center justify-center",children:o.jsx(le,{icon:r_,size:"sm",className:"text-foreground"})}):m&&!l?o.jsx("div",{className:"relative mr-2 size-5 shrink-0 overflow-hidden rounded-sm",children:o.jsx("img",{src:m,alt:t??"suggestion",className:"object-cover",sizes:"24px",onError:()=>c(!0)})}):o.jsx(le,{icon:l&&n?uf:p??h,size:"sm",className:"mt-two mr-2 w-5 shrink-0"})});t1e.displayName="LeftIcon";const n1e=R.memo(({onClick:e,url:t,category:n})=>n==="shortcuts"?null:qve(t)?o.jsx("div",{className:"flex h-full items-center",children:o.jsx(le,{icon:Zn,size:"sm",className:"text-quiet"})}):o.jsx("button",{className:"appearance-none",onPointerDown:r=>{r.stopPropagation(),r.preventDefault(),e(r)},type:"button",children:o.jsx(le,{icon:t?KLe:xa,size:"sm",className:"-mb-xs"})}));n1e.displayName="RightIcon";const r1e=R.memo(()=>{const{$t:e}=Z();return o.jsxs("div",{className:"flex w-full min-w-0 flex-row items-center whitespace-pre p-[8px] leading-tight",children:[o.jsx(F,{className:"-mr-three px-three shrink-0",color:"super",inline:!0,variant:"small",children:o.jsx(le,{size:"xs",icon:wi})}),o.jsx(F,{variant:"tinyMono",color:"super",className:"ml-2",children:e({defaultMessage:"Comet Assistant",id:"ML678gEBQ1"})})]})});r1e.displayName="CometAssistantRow";const gx=R.memo(({isOpen:e,suggestedQueries:t,focusedIndex:n,setFocusedIndex:r,handlePasteQuery:s,handleSubmit:a,dropdownClassName:i,dropdownType:l="query",components:c,value:u,children:d,popoverClassName:m,categoryTitleClassName:p,userInputQuery:h,portalTarget:g,placement:y="bottom",allowNonSequentialMatch:x=!1,isCometHome:v,scrollableShards:b=[],floatingStrategy:_,shouldEnableStacking:w=!1})=>{const{trackEvent:C}=je(),{RightIconComponent:S=n1e,LeftIconComponent:E=t1e,QueryContentComponent:M}=c??{},k=f.useMemo(()=>t.map(({query:X,query_uuid:q,image:Y,imageDark:G,url:J,title:K,description:te="",identifier:re="",category:se,subscribed:me=!1,metadata:oe,submission_query:ge,icon:xe,is_comet_assistant:ye,shouldShowTitle:_e,actionHandler:be,isPersonalized:Ne},Ee,Re)=>{if(l==="select")return{input:X,completion:"",query_uuid:q,title:K,image:Y,imageDark:G,url:J,description:te,identifier:re,category:se,subscribed:me,submission_query:ge,icon_name:xe,is_comet_assistant:ye,shouldShowTitle:_e,actionHandler:be,isPersonalized:Ne};const Ae=h?n===-1?u:h:u;return Ae.length>0&&X.startsWith(Ae)?{input:Ae,completion:X.slice(Ae.length),query_uuid:q,title:K,image:Y,imageDark:G,url:J,category:se,metadata:oe,...(se==="ticker"||se==="news")&&{description:te},submission_query:ge,icon_name:xe,is_comet_assistant:ye,shouldShowTitle:_e,actionHandler:be,isPersonalized:Ne}:x&&!te&&Ae.length>0&&Ae.length<=X.length&&Re[Ee]&&e1e(Ae,Re[Ee],!0)[0]?{input:"",completion:X,inputs_and_completions:rft(Ae,X),query_uuid:q,title:K,image:Y,url:J,category:se,metadata:oe,...(se==="ticker"||se==="news")&&{description:te},submission_query:ge,icon_name:xe,is_comet_assistant:ye,shouldShowTitle:_e,actionHandler:be,isPersonalized:Ne}:{input:X,completion:"",query_uuid:q,title:K,image:Y,imageDark:G,url:J,category:se,metadata:oe,...(se==="ticker"||se==="news")&&{description:te},submission_query:ge,icon_name:xe,is_comet_assistant:ye,shouldShowTitle:_e,actionHandler:be,isPersonalized:Ne}}),[t,u,l,h,n,x]),N=f.useMemo(()=>zdt(k),[k]),P=f.useMemo(()=>Gdt(N),[N]),L=f.useMemo(()=>P.some(X=>N[X]?.some(q=>q.is_comet_assistant)),[P,N]),O=f.useCallback((X,q)=>{if(q){window.open(q,"_blank");return}C("auto suggestion filled",{}),s(X)},[s,C]),A=V("!block w-full",y==="bottom"?"mt-[-5px]":"mb-[-5px]",m),j=y==="bottom"?"rounded-b-2xl":"rounded-t-2xl",T=f.useRef(null),[I,U]=f.useState(null),B=!e||t.length===0;Act({ref:T,onResize:X=>{U(X?.height??null)}});const D=f.useMemo(()=>({portalTarget:g??void 0,removeScroll:!0,shards:b}),[g,b]),W=f.useMemo(()=>o.jsx("div",{className:V(y==="bottom"?"!border-t-subtlest shadow-super/10 rounded-b-2xl shadow-md dark:shadow-lg dark:shadow-black/10":"!border-b-subtler rounded-t-2xl","border-subtle border","bg-raised p-3",i),children:o.jsx(ve.div,{animate:{height:B?0:I??"auto"},initial:{height:0},transition:{height:{type:"spring",bounce:.1,duration:.05}},style:{overflow:"hidden"},children:o.jsxs("div",{ref:T,className:"flex flex-col items-stretch",children:[v&&L?o.jsx(r1e,{}):null,P.map((X,q)=>{const Y=N[X],G=Z8[X]||{order:999,showHeader:!1};let J=0;for(let K=0;K<q;K++){const te=P[K]??"";J+=N[te]?.length||0}return Y?.length?o.jsx(Zve,{category:X,suggestions:Y||[],categoryConfig:G,value:u,focusedIndex:n,setFocusedIndex:r,handleSubmit:a,indexOffset:J,LeftIconComponent:E,RightIconComponent:S,QueryContentComponent:M,onFillButtonClick:O,titleClassName:p},X):null})]})})}),[E,M,S,p,I,i,n,N,a,L,v,O,y,B,r,P,u]),z=f.useMemo(()=>_?{strategy:_}:void 0,[_]),$=f.useMemo(()=>w?{className:"flex z-[1]"}:void 0,[w]);return o.jsx(lo,{isOpen:e,matchTargetWidth:!0,disableAnimation:!0,placement:y,childrenClassName:"grow block",contentClassName:A,borderRadius:j,avoidCollisions:!1,disableShadow:!0,overlayProps:D,content:W,floatingElementProps:$,...z&&{customFloatingUIOptions:z},children:d})});gx.displayName="SuggestDropdown";const ty="homepage-widgets",yV="homepage/weather",ift="homepage-widgets/dismiss",oft=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),lft=(e,t,n)=>{let r="existing";return t<3?r="new":t<10&&(r="activated"),`/rest/homepage-widgets/public?isComet=${e}&lifecycle=${r}&lang=${n}`},cft=async({headers:e,urlPath:t="/rest/homepage-widgets",params:n,reason:r})=>{if(n){const s=t.split("?"),a=new URLSearchParams(s[1]??"");new URLSearchParams(n).forEach((l,c)=>{a.set(c,l)}),t=s[0]+"?"+a.toString()}try{const s=await Er({urlPath:t,method:"GET",timeoutMs:Fe({productionMs:2e3,clientSideMs:2e3,devMs:4e3}),numRetries:1,headers:{"content-type":"application/json",...e},reason:r}),a=await s.json();if(!s.ok)throw new Error("Homepage widget fetch failed");return a.widgets}catch(s){return ne.error("Failed to get homepage widgets",s),[]}},uft=async({widgetUuid:e,reason:t})=>{try{return(await ae.POST("/rest/homepage-widgets/dismiss/{widget_uuid}",t,{params:{path:{widget_uuid:e}},numRetries:1})).data}catch(n){return ne.error("Failed to dismiss homepage widget",n),null}},dft=({widget:e,reason:t})=>{const n=xt();return St({mutationKey:[ift],mutationFn:()=>uft({widgetUuid:e.uuid??"",reason:t}),onMutate:async()=>{e.size==="ROW"&&n.setQueryData([ty],r=>r.filter(s=>s.uuid!==e.uuid))}})},s1e=async({location:e,locale:t,reason:n})=>{const r={...e?oft(e):{},"accept-language":t},s=await ae.GET("/rest/homepage-widgets/weather",n,{headers:r});if(!s.response.ok||!s.data)throw new Error("Failed to get weather");return s.data.data[0]},fft=we(async()=>{const{WatchlistSelections:e}=await Q(async()=>{const{WatchlistSelections:t}=await import("./WatchlistSelections-1uDN_mUz.js");return{WatchlistSelections:t}},__vite__mapDeps([2,3,1,4,5,6]));return{default:e}},{loading:()=>o.jsx(a1e,{})}),mft=5,pft=e=>{const{isSelected:t}=e;return o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Te,{icon:t?Ar:ur,size:"small",pill:!0})})},hft=({onClear:e})=>o.jsx(Te,{icon:It,size:"tiny",pill:!0,onClick:e}),gft=({isOpen:e,onClose:t,watchlistType:n,origin:r})=>{const{isMobileStyle:s,isMobileUserAgent:a}=Ce(),i="watchlist-modal",{$t:l}=Z(),c=xt(),{trackEvent:u}=je(),{deprecatedOpenToast:d}=Mn(),m=f.useRef(null),[p,h]=f.useState(""),[g,y]=f.useState(fe),[x,v]=f.useState(-1),[b,_]=f.useState(!1),[w,C]=f.useState(!1),[S,E]=f.useState();f.useEffect(()=>{u("watchlist modal viewed",{origin:r,watchlistType:n})},[r,n,u]);const k=(re=>re==="sports"||re==="finance"||re==="f1")(S?.category)?S.category:n.toLowerCase(),N=f.useCallback(()=>{b&&c.invalidateQueries({queryKey:[ty]}),t()},[b,c,t]),{data:P,isLoading:L}=gV({watchlistType:n,reason:i}),{mutate:O}=zve({watchlistType:n,queryClient:c,reason:i}),{mutate:A}=Gve({watchlistType:n,queryClient:c,reason:i}),{mutate:j}=Wdt({watchlistType:n,queryClient:c,reason:"watchlist-reorder"}),T=n==="FINANCE",I=[{text:l({defaultMessage:"Done",id:"JXdbo8Vnlw"}),variant:"inverted",onClick:N}],U=f.useCallback(async(re,se)=>{const oe=xi().erp,xe=(await c.fetchQuery({queryKey:["watchlist",n,re,se?.category],queryFn:()=>Hve({query:re,watchlistType:n,limit:mft,category:se?.category,cometRenderPlace:oe,reason:i}),staleTime:0})).map(ye=>({query:ye.title,title:ye.title,image:ye.image_url??void 0,imageDark:ye.image_url_dark??void 0,description:ye.description,identifier:ye.identifier,category:ye.category??void 0,subscribed:ye.subscribed}));y(xe)},[c,n]),B=Js(U,100,{leading:!0,trailing:!0}),D=f.useCallback((re,se)=>{B(re,se)},[B]),W=()=>{C(!0),D(p,S)},z=()=>{C(!1)},$=f.useCallback(re=>{const se=re;h(se),D(se,S)},[D,S]),X=()=>{h(""),y([])},q=(re,se)=>{G(re),h(""),y([]),C(!1)},Y=V("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-subtle p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&g.length>0}),G=f.useCallback(re=>{if(_(!0),y(fe),h(""),(P?.length??0)>=dee){d(l({defaultMessage:"Watchlist full (max {maxItems} items).",id:"mdbFzAw6E5"},{maxItems:dee}),"error",2);return}re.subscribed||O(re)},[O,P?.length,d,l]),J=f.useCallback((re,se)=>{A({identifier:re,category:se}),_(!0)},[A]),K=f.useCallback((...re)=>{j(...re),_(!0)},[j]),te=f.useMemo(()=>({image:re,imageDark:se,alt:me})=>o.jsx(v5,{image:re,imageDark:se,alt:me,watchlistType:n,className:"mr-sm bg-subtler !size-8 overflow-hidden rounded",imageClassName:"inset-xs"}),[n]);return o.jsx(on,{isOpen:e,onClose:N,title:l(Vv[k].title),titleTextVariant:"baseSemi",subtitle:l(Vv[k].settingsDescription),subtitleClassname:"text-sm",actionList:I,variant:s?"bottom-sheet":"medium",renderCloseButton:!1,delayClose:!1,noPadding:!0,children:o.jsxs("div",{className:"pt-md flex h-[50vh] min-h-0 shrink-0 flex-col",children:[o.jsx("div",{className:"px-md flex flex-row items-center justify-between",children:o.jsx(Hdt,{watchlistType:n,selectedCategory:S,setSelectedCategory:E})}),o.jsxs("div",{className:"h-full",children:[o.jsx("div",{className:"px-md",children:o.jsx(gx,{isOpen:w&&g.length>0,suggestedQueries:g,focusedIndex:x,setFocusedIndex:v,handlePasteQuery:Pn,handleSubmit:q,value:p,components:{RightIconComponent:pft,LeftIconComponent:te},dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Wr,{onFocus:W,onBlur:z,className:Y,pill:!1,ref:m,isMobileUserAgent:a,placeholder:l(Vv[k].searchPlaceholder),value:p,onChange:$,ClearIcon:hft,...p.length>0?{onClear:X}:{}})})}),L?o.jsx(a1e,{}):o.jsx(fft,{subscriptions:P??fe,onRemove:J,onUpdateOrder:K,watchlistType:n,selectedCategory:S,isReorderingEnabled:T,isMobile:s})]})]})})},a1e=()=>o.jsx(wn,{children:o.jsx("div",{style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},className:"flex flex-col items-center",children:Array.from({length:4}).map((e,t)=>o.jsx(yft,{},t))})}),yft=()=>o.jsx(H,{className:"gap-sm mt-2 flex w-full flex-col px-6 py-2",children:o.jsx(H,{variant:"subtle",className:"h-10 w-full rounded-md"})});async function qun({headers:e,reason:t}){const n=await ae.GET("/rest/shopping/user-orders",t,{timeoutMs:Fe({productionMs:5e3}),headers:e});if(n.error)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch shopping orders",cause:n.error});return n.data?.orders??fe}const Kun=async({shipping_address:e,amount:t,reason:n})=>{const{data:r,error:s}=await ae.POST("/rest/shopping/calculate-tax-and-shipping",n,{body:{shipping_address:e,amount:t},timeoutMs:Fe(),numRetries:1});if(s)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to calculate tax and shipping",cause:s});return r},xft=async({reason:e})=>{const{data:t,error:n}=await ae.GET("/rest/shopping/retrieve-customer-shopping-info",e,{timeoutMs:Fe({productionMs:5e3})});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get customer shopping info",cause:n});return t};async function Yun({body:e,reason:t}){const n="createShoppingOrder";try{const r=await ae.POST("/rest/shopping/create-shopping-order",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:1e4,numRetries:0});if(r.error)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to create shopping order",cause:r.error});return r.data}catch(r){throw ne.log(`Error in ${n}:`,r),r}}const Qun=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/shopping/create-shopping-payment-intent",t,{body:e,timeoutMs:6e3,numRetries:0});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to create shopping payment intent",cause:r});if(n.status!=="success")throw new Ie("API_CLIENTS_ERROR",{message:"Failed to create payment intent",cause:n});return n},Xun=async({orderId:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/shopping/update-shopping-order",t,{body:{order_id:e,order_status:"cancelled"},timeoutMs:2e4});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to cancel shopping order",cause:r});return n},Zun=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/shopping/create-firmly-cart",t,{body:e,timeoutMs:Fe({clientSideMs:5e3})});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to create firmly cart",cause:r});return n},Jun=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/shopping/set-firmly-shipping-info",t,{body:e,timeoutMs:Fe({clientSideMs:7e3})});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to set firmly shipping info",cause:r});return n},vft=async({reason:e})=>{const{data:t,error:n}=await ae.GET("/rest/shopping/create-firmly-session",e,{timeoutMs:Fe()});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to create firmly session",cause:n});return t},edn=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/stripe/update-customer-shipping-address",t,{body:e,timeoutMs:Fe()});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to update customer shipping address",cause:r});return n},tdn=async({optionKey:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/shopping/fetch-product-details",t,{body:{option_key:e},timeoutMs:4e3});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch product details",cause:r});return n},ndn=async({query:e,reason:t})=>{try{const{error:n,data:r}=await ae.GET("/rest/autosuggest/shopping/list-autosuggest",t,{timeoutMs:en.MEDIUM,params:{query:{query:e}}});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get shopping suggestions",cause:n});return r.results??fe}catch(n){return ne.error("Failed to get shopping suggestions",n),[]}},rdn=async({page:e,reason:t})=>{const{data:n,error:r}=await ae.GET("/rest/shopping/landing-page/tile-data",t,{timeoutMs:en.MEDIUM,params:e!==void 0?{query:{page:e}}:void 0});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get shopping tile data",cause:r});return n.shopping_tile_data.length===0&&ne.error("Empty shopping tile data"),n.shopping_tile_data},sdn=async({request:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/shopping/search-shopping-for-entry",t,{body:{query:e.query,read_write_token:e.read_write_token,entry_uuid:e.entry_uuid},timeoutMs:en.HIGH});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to search for additional products",cause:r});return!n||n.status==="failure"?[]:[...n.shopping_widgets]},bft=async({reason:e})=>{const{error:t,data:n}=await ae.GET("/rest/shopping/try-on-photo/get",e,{timeoutMs:Fe()});return t?{status:"error",try_on_photo_url:null}:n},_ft=({reason:e})=>{const{data:t,isLoading:n,refetch:r}=We({queryKey:BE(),queryFn:()=>bft({reason:e})});return f.useMemo(()=>({userTryOnPhotoUrl:t?.try_on_photo_url??null,isUserTryOnPhotoLoading:n,refetchUserTryOnPhoto:r}),[t,n,r])},_5=R.memo(({message:e,subtitle:t,...n})=>o.jsx(on,{title:e,subtitle:t,closeButtonClassname:"right-sm top-md flex self-start justify-end grow",...n}));_5.displayName="ConfirmationModal";const wft=({isOpen:e,onClose:t,config:n})=>{const{$t:r}=Z(),s=xt(),[a,i]=f.useState(!1),{userTryOnPhotoUrl:l,isUserTryOnPhotoLoading:c}=_ft({reason:"avatar_management"}),{deleteAvatar:u}=vve({reason:"avatar_management"}),d=async()=>{await u(),s.setQueryData(BE(),{try_on_photo_url:null}),i(!1),t()},m=()=>{t(),n?.onRetry&&n.onRetry()},p=()=>{t()},h=n?.source==="toast";return o.jsxs(o.Fragment,{children:[o.jsx(on,{isOpen:e,onClose:t,title:r({defaultMessage:"Your avatar photo",id:"fXPKMrv34o"}),centerTitle:!0,modalClassname:"max-w-lg mx-auto",children:o.jsxs("div",{className:"flex flex-col items-center gap-6 p-6",children:[c?o.jsx(Zr,{}):l?o.jsx(H,{className:"gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border",children:l&&o.jsx(Ss,{src:l,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})}):o.jsx(F,{variant:"smallMono",children:r({defaultMessage:"No avatar uploaded",id:"RDTTX4AfZg"})}),o.jsx("div",{className:"flex gap-3",children:h?o.jsxs(o.Fragment,{children:[o.jsx(pe,{variant:"border",onClick:m,text:r({defaultMessage:"Retry",id:"62nsdyMyIO"})}),o.jsx(pe,{variant:"primary",onClick:p,text:r({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"})})]}):l&&o.jsx(pe,{variant:"common",onClick:()=>i(!0),text:r({defaultMessage:"Delete",id:"K3r6DQW7h+"})})})]})}),o.jsx(_5,{isOpen:a,onClose:()=>i(!1),message:r({defaultMessage:"Are you sure you want to delete?",id:"y7o4RnAvXG"}),subtitle:r({defaultMessage:"Once deleted, your avatar cannot be recovered.",id:"CtPvgMBMh3"}),children:o.jsxs("div",{className:"-mb-lg flex justify-center gap-3 p-6",children:[o.jsx(pe,{variant:"common",onClick:()=>i(!1),text:r({defaultMessage:"No",id:"oUWADlOjJt"})}),o.jsx(pe,{variant:"primary",onClick:d,text:r({defaultMessage:"Yes",id:"a5msuh5ORp"})})]})})]})},Cft=()=>{const e=Ut();return f.useMemo(()=>{const n=e?.get("pt")||rtt();if(n)try{const r=atob(n);return JSON.parse(r).title}catch{return}},[e])},Sft="https://api.whatsapp.com/send/?phone=18334363285&text&type=phone_number&app_absent=0",V_=({origin:e})=>{const{trackEvent:t}=je();return f.useCallback(()=>{Ak(),t("whatsapp button clicked",{origin:e}),window.open(Sft,"_blank")},[t,e])},Eft="https://perplexity.sng.link/A6awk/ppas?_smtype=3&pvid=",adn="https://perplexity.sng.link/A6awk/rcv6y?_smtype=3&pvid=",Ep=(e,t=Eft)=>{const n=S_(),[r,s]=f.useState(t),{sendAppDownloadClickedEventSingular:a}=QB(),i=Ft(),l=f.useMemo(()=>{const u=new URLSearchParams;return u.set("origin",e),n&&u.set("pvid",n),i&&u.set("pathname",i),u.toString()},[n,e,i]);f.useEffect(()=>{(async()=>{const{singularSdk:d}=await Q(async()=>{const{singularSdk:h}=await import("./singular-sdk-CHVvA4e9.js").then(g=>g.s);return{singularSdk:h}},[]);for(;!d._isInitialized;)await new Promise(h=>setTimeout(h,100));let m=null;i&&(m=`perplexity-app://${i.startsWith("/")?i.slice(1):i}`);const p=d.buildWebToAppLink(`${t}${n}&_ios_dl=${m}&_android_dl=${m}`,m,l,m);s(p)})()},[n,i,l,t]);const c=f.useCallback(()=>{Ak(),a(e),window.location.href=r},[r,e,a]);return f.useMemo(()=>({downloadAppLink:r,handleAppDownloadClicked:c}),[r,c])},Mft=["sso"],w5=R.memo(()=>o.jsxs("div",{className:"flex flex-row items-center",children:[o.jsx(za,{variant:"mark",color:"foreground",size:"small"}),o.jsx("div",{className:"ml-2",children:o.jsx(za,{variant:"text",color:"foreground",size:"small"})})]}));w5.displayName="PerplexityLogo";const kft=R.memo(({headerTextLineOne:e="Get answers, not links.",headerTextLineTwo:t="Search smarter today.",modalOrigin:n=De.MARKETING_LANDING_PAGE})=>{const{isMobileStyle:r}=Ce(),[s,a]=f.useState("");return f.useEffect(()=>{typeof window<"u"&&a(l5(window.location.origin,Ic,n))},[n]),o.jsxs("div",{className:"px-lg py-xl flex min-h-screen flex-col items-center justify-between overflow-y-auto",children:[o.jsx(w5,{}),o.jsxs("div",{className:"py-2xl flex flex-col items-center justify-center",children:[e&&o.jsx(F,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:e}),t&&o.jsx(F,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:t}),o.jsx(F,{variant:"base",color:"light",className:"mt-4 max-w-[400px] text-center",children:o.jsx(he,{defaultMessage:"Join millions who have switched to Perplexity, the modern search engine.",id:"n7AYVi1U68"})}),o.jsx(ab,{autoFocus:!0,redirectUrl:s,showInternal:!0,className:"mt-xl w-full",disallowedMethods:Mft})]}),o.jsxs(F,{variant:"small",color:"light",children:[" ",new Date().getFullYear()," Perplexity AI"]})]})});kft.displayName="MainContent";const Tft=async({stringProperties:e,headers:t,reason:n})=>{if(!t["accept-language"])return ne.warn("No accept-language header provided for translation request"),e;const r=await ae.POST("/rest/translation/translate",n,{body:{texts:e},headers:{...t}});return r.response.ok?r.data?.translated_texts??[]:(ne.error(`Failed to fetch translations for ${e.join(", ")}}`),[])},Nft=e=>e==null||e==="";async function i1e({originalContent:e,keysToTranslate:t,reason:n}){const r=jd();if(r===zd)return e;const s=t.map(i=>e[i]);if(s.some(Nft))return e;const a=await Tft({stringProperties:s,headers:{"accept-language":r},reason:n});if(a.length===s.length){const i={...e};return t.forEach((l,c)=>{i[l]=a[c]}),i}return e}const o1e=({extraCss:e="",variant:t="subtler"})=>o.jsx(H,{variant:t,className:V("shimmer aspect-square w-[144px] rounded-lg",e)}),xV=f.memo(({className:e,innerClassName:t,gridClassName:n,children:r,fadeOut:s,dotClassName:a,highlightClassName:i,animate:l=!0,gridSize:c=22,count:u=20,style:d})=>{const[m,{width:p,height:h}]=vc(),[g,y]=f.useState([]),[x,v]=f.useState(0),[b,_]=f.useState(0),w=f.useRef(null),C=f.useRef(new Set),S=f.useCallback(()=>{const M=Math.floor(Math.random()*x)+1,k=Math.floor(Math.random()*b)+1,N=`${M}-${k}`;if(C.current.has(N))return;const P={col:M,row:k,id:N,duration:Math.floor(Math.random()*1001)+1e3,isSuper:Math.floor(Math.random()*5)%5===0};y(L=>{const O=[P,...L];if(O.length>u){const A=O.pop();A&&C.current.delete(A.id)}return C.current.add(N),O})},[x,b,u]);f.useEffect(()=>{if(l)return w.current=setInterval(S,100),()=>{w.current&&clearInterval(w.current)}},[S,l]),f.useEffect(()=>{v(Math.floor(p/c)),_(Math.floor(h/c))},[p,h,c]);const E=s?{maskImage:"radial-gradient(black, transparent)"}:void 0;return o.jsxs("div",{className:V("bg-base dotGridContainer pointer-events-none relative isolate",e),ref:m,style:d,children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:E,children:[o.jsx("div",{className:V("dotHighlightGrid bg-inverse/20 absolute inset-0",i),children:g.map(M=>o.jsx(l1e,{item:M,className:a},M.id))}),o.jsx("div",{className:V("dotGrid absolute inset-0",n)})]}),o.jsx("div",{className:V("relative",t),children:r})]})});xV.displayName="DotGrid";const l1e=f.memo(({item:e,className:t})=>o.jsx("div",{className:V("gridDot text-foreground",t,{highlight:e.isSuper}),style:{gridColumn:e.col,gridRow:e.row,animationDuration:`${e.duration}ms`}}));l1e.displayName="GridDot";const C5=(e,t)=>{const n=t?.detail,r=n&&typeof n=="object"&&"error_code"in n&&n.error_code||e;return new Ie("API_CLIENTS_ERROR",{message:r,cause:t,details:{errorDetail:n}})},c1e=async({reason:e})=>{try{const{error:t,data:n}=await ae.GET("/rest/user/promotions",e,{timeoutMs:Fe({productionMs:2e3})});if(t)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch user promotions",cause:t});return n}catch{return{campaign:null,offer:null,institution:null}}},vV=async({locale:e,headers:t,reason:n})=>{let r="";e&&(r=`?locale=${e}`);try{const a=await(await Er({urlPath:`/rest/billing/get-customer-portal${r}`,method:"GET",headers:t,timeoutMs:3e3,reason:n})).json();return a.status!=="success"||a.url===null||a.url===""?null:a.url}catch{return null}};async function u1e({currency:e,reason:t,subscriptionTier:n}){const{error:r,data:s}=await ae.GET("/rest/stripe/prices",t,{timeoutMs:en.NONE,params:{query:{currency:e,subscription_tier:n}}});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch prices",cause:r});return s}const e9=({currency:e,reason:t,subscriptionTier:n})=>We({queryKey:["prices",e,n],queryFn:()=>u1e({currency:e,reason:t,subscriptionTier:n}),gcTime:5*60*1e3,staleTime:2*60*1e3}),d1e=async({request:e,reason:t})=>{const n=m3(),r=S_(),s={"content-type":"application/json",...n?{"Screen-Dimensions":n}:{}};try{const i=await(await Er({urlPath:"/rest/stripe/checkout-session",method:"POST",body:JSON.stringify({referral_code:e.referralCode,discount_code:e.discountCode,origin:e.origin,tier:e.tier,locale:e.locale,visitor_id:r,embedded:e.embedded,subscription_tier:e.subscriptionTier,success_redirect_url:e.success_redirect_url}),timeoutMs:5e3,headers:s,reason:t})).json();return{subscriptionStatus:i.subscription_status,status:i.status,url:i.url,clientSecret:i.client_secret,errorCode:i.error_code,subscriptionTier:i.subscription_tier}}catch{return}},jft=async({request:e,headers:t,reason:n})=>{try{return{clientSecret:(await(await Er({urlPath:"/rest/stripe/create-setup-intent",method:"POST",body:JSON.stringify({is_updating:e.isUpdating}),timeoutMs:Fe({productionMs:2500}),headers:{...t,"content-type":"application/json"},reason:n})).json()).client_secret}}catch{return}},Aft=async({request:e,headers:t,reason:n})=>{if(e.orgId)try{return{clientSecret:(await(await Er({urlPath:`/rest/pplx-api/v2/groups/${e.orgId}/setup-intent`,method:"POST",timeoutMs:Fe({productionMs:2500}),headers:{...t,"content-type":"application/json"},reason:n})).json()).client_secret}}catch{return}},Ift=async({headers:e,reason:t})=>{try{const r=await(await Er({urlPath:"/rest/stripe/create-setup-intent-and-customer-session",method:"POST",timeoutMs:Fe({productionMs:3e3}),headers:{...e,"content-type":"application/json"},reason:t})).json();return{customerId:r.customer_id,clientSecret:r.client_secret,customerSessionClientSecret:r.customer_session_client_secret}}catch{return}};var t9;(function(e){e.WINDOWSAPP="windowsapp",e.MACAPP="macapp",e.COMET="comet"})(t9||(t9={}));const Rft=async({reason:e})=>{const t="createBillingCustomer";try{return await(await Er({urlPath:"/rest/pplx-api/create-billing-customer",method:"POST",timeoutMs:9e3,headers:{"content-type":"application/json"},reason:e})).json()}catch(n){throw ne.log(`Error in ${t}:`,n),n}},Pft=async({credits:e,apiOrgId:t,reason:n})=>{const{error:r,data:s}=await ae.POST("/rest/pplx-api/v2/groups/{api_org_id}/topup",n,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{credits:e}});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to topup customer balance",cause:r});return s},Oft=async({amount:e,apiOrgId:t,threshold:n=2,enabled:r=!0,reason:s})=>{const{error:a,data:i}=await ae.POST("/rest/pplx-api/v2/groups/{api_org_id}/auto-topup",s,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{amount:e,threshold:n,enabled:r}});if(a)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to auto topup customer balance",cause:a});return i};async function f1e({locale:e,reason:t}){try{const{error:n,data:r}=await ae.GET("/rest/billing/get-milestone-progress",t,{timeoutMs:en.NONE,params:{header:{"accept-language":e}}});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch milestones",cause:n});return r}catch{return null}}const m1e=async({displayName:e,address:t,description:n,contactInfo:r,reason:s})=>{try{const{error:a,data:i}=await ae.POST("/rest/pplx-api/v2/groups",s,{timeoutMs:9e3,headers:{"content-type":"application/json"},body:{display_name:e,address:t,description:n,contact_info:r}});if(a)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to create API group",cause:a});return i.org}catch(a){return ne.log(a),null}},p1e=async({reason:e})=>{const t="getAPIGroupsV2";try{return(await(await Er({urlPath:"/rest/pplx-api/v2/groups",method:"GET",headers:{"content-type":"application/json"},timeoutMs:1e4,numRetries:1,reason:e})).json())?.orgs??[]}catch(n){return ne.log(`Error in ${t}:`,n),[]}},h1e=async({orgId:e,reason:t})=>{if(!e)return{};try{const{error:n,data:r}=await ae.GET("/rest/pplx-api/v2/groups/{api_org_id}",t,{timeoutMs:1e4,headers:{"content-type":"application/json"},params:{path:{api_org_id:e}}});if(n)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch API group customer info",cause:n});return{apiOrganization:r.apiOrganization,customerInfo:r.customerInfo,hasDefaultPaymentMethod:r.hasDefaultPaymentMethod,taxInfo:r.taxInfo}}catch(n){return ne.log(n),{}}},Lft=async({orgId:e,reason:t})=>{const n="getAPIGroupAPIKeys";if(!e)return{};try{return{apiKeys:(await(await Er({urlPath:`/rest/pplx-api/v2/groups/${e}/api-keys`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:1e4,numRetries:1,reason:t})).json())?.apiKeys}}catch(r){return ne.log(`Error in ${n}:`,r),{}}},g1e=async({reason:e})=>{try{const t=await Er({urlPath:"/rest/billing/create-government-subscription",method:"POST",timeoutMs:6e3,headers:{"content-type":"application/json"},reason:e}),n=await t.json();return t.ok?{status:n.status,error_code:n.error_code,message:n.message}:void 0}catch{return}},Dft=async({headers:e,reason:t})=>{const{error:n,data:r}=await ae.GET("/rest/stripe/upgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:en.HIGH});if(n)throw C5("Failed to fetch upgrade subscription preview",n);return r},Fft=async({headers:e,reason:t})=>{const{error:n,data:r}=await ae.GET("/rest/stripe/downgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:en.HIGH});if(n)throw C5("Failed to fetch downgrade subscription preview",n);return r},y1e=({reason:e,enabled:t})=>We({queryKey:Stt(),queryFn:()=>Dft({reason:e}),gcTime:0,staleTime:0,enabled:t}),x1e=({reason:e})=>We({queryKey:["downgrade-subscription-preview"],queryFn:()=>Fft({reason:e}),gcTime:0,staleTime:0}),Uft=async({headers:e,reason:t})=>{const{error:n,data:r}=await ae.POST("/rest/stripe/upgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:en.HIGH});if(n)throw C5("Failed to upgrade subscription",n);return r},v1e=({reason:e},t)=>{const n="useUpgradeSubscription";return St({retry:!1,mutationFn:()=>Uft({reason:e}),onError:r=>{ne.error(`Error in ${n}:`,r)},...t})},Bft=async({headers:e,reason:t})=>{const{error:n,data:r}=await ae.POST("/rest/stripe/downgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:en.HIGH});if(n)throw C5("Failed to downgrade subscription",n);return r},b1e=({reason:e},t)=>{const n="useDowngradeSubscription";return St({mutationFn:()=>Bft({reason:e}),onError:r=>{ne.error(`Error in ${n}:`,r)},...t})},Vft=async({reason:e})=>{const{error:t,data:n}=await ae.GET("/rest/stripe/subscription-changes",e,{headers:{"content-type":"application/json"},timeoutMs:en.HIGH});if(t)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch subscription changes",cause:t});return n},$ft=({reason:e,enabled:t})=>We({queryKey:["subscription-changes"],queryFn:()=>Vft({reason:e}),gcTime:0,staleTime:0,enabled:t}),Wft=async()=>{const e=await ae.GET("/rest/billing/braintree/subscription-details","braintree-modal-fetch-details",{timeoutMs:5e3});if(e.error)throw e.error;return e.data},Hft=async({payment_method_type:e})=>{const t=await ae.POST("/rest/billing/braintree/cancel-subscription","braintree-modal-cancel",{timeoutMs:5e3,body:{payment_method_type:e}});if(t.error)throw t.error;return t.data},zft=async({payment_method_type:e})=>{const t=await ae.POST("/rest/billing/braintree/renew-subscription","braintree-modal-renew",{timeoutMs:3e3,body:{payment_method_type:e}});if(t.error)throw t.error;return t.data},pee=Object.freeze(Object.defineProperty({__proto__:null,get PlatformType(){return t9},autoTopupCustomerBalance:Oft,cancelBraintreeSubscription:Hft,createApiGroupV2:m1e,createBillingCustomer:Rft,createCheckoutSession:d1e,createGovernmentSubscription:g1e,createSetupIntent:jft,createSetupIntentAndCustomerSession:Ift,createSetupIntentV2:Aft,fetchBraintreeSubscriptionDetails:Wft,getAPIGroupAPIKeys:Lft,getAPIGroupCustomerInfo:h1e,getAPIGroupsV2:p1e,getCustomerPortal:vV,getMilestoneProgress:f1e,getPrices:u1e,getUserPromotions:c1e,renewBraintreeSubscription:zft,topupCustomerBalance:Pft,useDowngradeSubscription:b1e,useGetDowngradeSubscriptionPreview:x1e,useGetPrices:e9,useGetSubscriptionChanges:$ft,useGetUpgradeSubscriptionPreview:y1e,useUpgradeSubscription:v1e},Symbol.toStringTag,{value:"Module"}));function Gft(){yx(void 0)}function ny(e={}){const t=new URL(window.location.href);for(const[n,r]of Object.entries(e))typeof r>"u"?t.searchParams.delete(n):t.searchParams.set(n,r);yx(Object.fromEntries(t.searchParams))}function yx(e){const t=new URL(window.location.href),r=(e?new URLSearchParams(e):new URLSearchParams).toString();r!==t.searchParams.toString()&&window.history.replaceState({},"",`?${r}`)}function _1e(){return O_("pplx.partner_banner",null,{initializeWithValue:!1})}function w1e(){return O_("pplx.partner_discount_code",null,{initializeWithValue:!1})}we(()=>Q(()=>import("./AppDownloadQR-DkYjOQ2x.js"),__vite__mapDeps([7,3,1])),{loading:()=>o.jsx(o1e,{})});const qft=({displayAs:e,className:t,allowBgImage:n=!0})=>{const r=["/static/images/app-icons/nasa.png","/static/images/app-icons/jungle.png","/static/images/app-icons/flower.png","/static/images/app-icons/sf.png","/static/images/app-icons/books.png","/static/images/app-icons/cat.png"],s=f.useMemo(()=>r[Math.floor(Math.random()*r.length)],[]);return o.jsxs("div",{className:V("bg-dark relative inline-flex aspect-square size-20 items-center justify-center overflow-hidden shadow-lg",{"p-md rounded-[20px]":e==="ios","p-md rounded-full":e==="android"},t),children:[n&&o.jsx("img",{className:V("absolute inset-0 opacity-50 duration-150"),src:s,suppressHydrationWarning:!0,alt:""}),o.jsx("div",{className:"relative flex items-center justify-center",children:o.jsx(za,{variant:"mark",size:"md",color:"white"})}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/20 dark:border-white/10"})]})},C1e=()=>{const{device:{isAndroid:e}}=Lt();return o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>o.jsx(le,{icon:Nd,size:16,className:"text-super"},`rating-star-full-${n}`))}),o.jsx("div",{children:o.jsx(F,{variant:"tiny",color:"light",className:"mt-2xs flex items-end text-center",children:o.jsx(he,{defaultMessage:"{amount} Ratings",id:"8lpjhgQpdU",values:{amount:e?"960K":"252K"}})})})]})},S1e=R.memo(({campaignData:e,dismiss:t,translated:n})=>{const r="reviews",{device:{isIOS:s}}=Lt(),[a,i]=f.useState(!!n),[l,c]=f.useState(e),{trackEvent:u}=je();f.useEffect(()=>{if(n)return;(async()=>{const x=await i1e({originalContent:e,keysToTranslate:["title_1","subtext_1","button_text"],reason:r});c(x),i(!0)})()},[e,n]),f.useEffect(()=>{u("mweb splash page viewed",{})},[u]);const{title_1:d,subtext_1:m,button_text:p,button_link:h}=l,g=f.useCallback(()=>{u("app download button selected",{downloadAppDestination:"mobile",origin:"marketingLandingPage"}),Ak(),window.open(h,"_blank")},[h,u]);return o.jsxs("div",{className:V("p-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[t&&o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:It,extraCSS:"text-foreground md:hover:text-quiet ",onClick:t})}),o.jsx(w5,{}),o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx(qft,{displayAs:s?"ios":"android",allowBgImage:!1}),o.jsxs("div",{className:V("flex flex-col items-center"),children:[o.jsx(Je,{children:a?o.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex flex-col items-center",children:[o.jsx(F,{variant:"entry-title",color:"default",textCenter:!0,children:d}),o.jsx(F,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:m})]}):o.jsxs("div",{className:"invisible flex flex-col items-center",children:[o.jsx(F,{variant:"entry-title",color:"default",textCenter:!0,children:e.title_1}),o.jsx(F,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:e.subtext_1})]})}),o.jsx("div",{className:"mt-4",children:o.jsx(C1e,{})})]})]}),o.jsx("div",{className:"flex w-full flex-col items-center",children:o.jsx(Je,{children:a?o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex w-full flex-col items-center",children:o.jsx(pe,{variant:"inverted",size:"large",text:p,icon:s?s_:SD,fullWidth:!0,extraCSS:"max-w-xs rounded-xl mx-auto",onClick:g})}):o.jsx("div",{className:"invisible flex w-full flex-col items-center",children:o.jsx(pe,{variant:"inverted",size:"large",text:e.button_text})})})})]})});S1e.displayName="Reviews";const Kft=({origin:e})=>{const{device:{isIOS:t}}=Lt(),{downloadAppLink:n}=Ep(e),{$t:r}=Z();return o.jsx(Ye,{href:n,children:o.jsxs("div",{className:"gap-x-md py-lg flex items-center justify-center",children:[o.jsx("div",{"data-color-scheme":"dark",className:V("border-subtler bg-base inline-block border",{"p-sm rounded-xl":t,"p-md rounded-full":!t}),children:o.jsx("div",{className:"flex aspect-square w-12 items-center justify-center",children:o.jsx(za,{variant:"mark",size:"md",color:"white"})})}),o.jsxs("div",{className:"-mt-xs",children:[o.jsx(F,{variant:"baseSemi",children:"Perplexity"}),o.jsx(F,{variant:"small",color:"light",children:r({defaultMessage:"Search and discovery with AI",id:"n3oaAt293P"})}),o.jsx(C1e,{})]})]})})},$_=()=>{const{value:e,loading:t}=$r({flag:"mweb-upsell-to-whatsapp",defaultValue:!1});return f.useMemo(()=>({mwebUpsellWhatsApp:e,loadingMwebUpsellWhatsApp:t}),[e,t])},Yft=({origin:e,isOpen:t,onClose:n,sheetModalVariant:r})=>{const{trackEventOnce:s,trackEvent:a}=je(),{$t:i}=Z(),{handleAppDownloadClicked:l}=Ep("install-gate-modal-upsell"),c=Cft(),u=V_({origin:"install-gate"}),{mwebUpsellWhatsApp:d}=$_();f.useEffect(()=>{s("install modal opened",{origin:e})},[e,s]);const m=f.useCallback(()=>{a("install modal closed",{origin:e}),n()},[n,e,a]);return o.jsx(GB,{isOpen:t,onClose:m,variant:r,showCloseButton:!1,overlayVariant:"default-less-blur",children:d?o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"section-title",className:"px-sm text-center",children:o.jsx(he,{defaultMessage:"Keep the conversation going.",id:"4/VUgNnQik"})}),o.jsx(F,{variant:"section-title",className:"px-sm text-center",children:o.jsx(he,{defaultMessage:"Try Perplexity on WhatsApp",id:"YTg7pt2IE4"})}),o.jsxs("div",{className:"mt-md mb-lg flex flex-row items-center justify-center gap-4",children:[o.jsx("div",{className:"aspect-square size-10 overflow-hidden rounded-full shadow-lg",children:o.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{children:"Perplexity"}),o.jsx(F,{variant:"smallMono",color:"super",textCenter:!0,children:"+1 (833) 436-3285"})]})]}),o.jsx(pe,{variant:"primary",text:i({defaultMessage:"Continue on WhatsApp",id:"I7Lrfco0vS"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("whatsapp button clicked",{origin:"install-gate"}),u()}})]}):o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"page-title",className:"px-sm text-center",children:c??o.jsx(he,{defaultMessage:"One verified answer to any question",id:"C+F6JBwTvO"})}),o.jsx(Kft,{origin:"install-gate-modal-upsell"}),o.jsx(pe,{variant:"primary",text:i({defaultMessage:"Open Perplexity app",id:"u0MSV+x6J3"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("app download button clicked",{origin:"install-gate"}),l()}})]})})},Qft={xlarge:[64,"h-[64px] w-auto leading-[64px]"],large:[48,"h-[48px] w-auto leading-[48px]"],regular:[32,"h-[32px] w-auto leading-[32px]"],small:[18,"h-[18px] w-auto leading-[18px]"],tiny:[12,"h-[12px] w-auto leading-[12px]"]},Xft=we(async()=>{const{Emoji:e}=await Q(async()=>{const{Emoji:t}=await import("./emoji-picker-react.esm-BCf4US33.js");return{Emoji:t}},__vite__mapDeps([8,3,1]));return{default:e}},{nextFrame:!0}),vf=R.memo(({unified:e,size:t})=>{const[n,r]=Qft[t]??[];return e?o.jsx("div",{className:`relative align-middle ${r}`,children:o.jsx(Xft,{emojiStyle:"native",unified:e,size:n})}):null});vf.displayName="PerplexityEmoji";const Zft=we(()=>Q(()=>import("./emoji-picker-react.esm-BCf4US33.js"),__vite__mapDeps([8,3,1])),{nextFrame:!0}),E1e=R.memo(({emoji:e,setEmoji:t,size:n="large"})=>{const{$t:r}=Z(),{colorScheme:s}=Jr(),[a,i]=f.useState(!1),l=f.useCallback(g=>{i(!1),t(g.unified)},[t]),c={small:"h-8 w-8",medium:"h-11 w-11",large:"h-14 w-14"},u=f.useCallback(()=>i(!1),[]),d=f.useMemo(()=>({showPreview:!1}),[]),m=f.useMemo(()=>o.jsx(Zft,{emojiStyle:"native",onEmojiClick:l,autoFocusSearch:!0,width:"100%",theme:s==="dark"?"dark":"light",previewConfig:d}),[s,l,d]),p=f.useCallback(()=>t(""),[t]),h=f.useCallback(()=>i(g=>!g),[]);return o.jsxs("div",{className:"relative",children:[o.jsx(F,{variant:"smallBold",children:r({defaultMessage:"Emoji",id:"34NuzGC3+4"})}),o.jsxs("div",{className:"mt-sm relative inline-block",children:[e!==""&&o.jsx("div",{className:"-right-sm -top-sm absolute",children:o.jsx(pe,{pill:!0,size:"tiny",icon:It,onClick:p})}),o.jsx(lo,{isOpen:a,onClose:u,content:m,hasInteractiveContent:!0,children:o.jsx(H,{onClick:h,variant:"subtler",bgHover:"subtle",className:`p-sm flex cursor-pointer items-center justify-center rounded-full ${c[n]}`,children:e===""?o.jsx("div",{className:"flex size-full items-center justify-center",children:o.jsx(le,{icon:ur,size:"md"})}):o.jsx("div",{className:"flex size-full items-center justify-center",children:o.jsx(vf,{unified:e,size:"regular"})})})})]})]})});E1e.displayName="CollectionEmojiPicker";const Jft={in:{opacity:1,scale:1},out:{opacity:0,scale:.9}},M1e=R.memo(e=>{const{cancelButton:t,confirmButton:n,description:r,title:s,ref:a}=e,{handleCancel:i,handleConfirm:l}=bYe();return o.jsx(I3,{asChild:!0,onEscapeKeyDown:c=>{c.stopPropagation()},ref:a,children:o.jsxs(ve.div,{animate:"in",className:"border-subtlest bg-base p-lg rounded-lg border shadow-lg",exit:"out",initial:"out",transition:{duration:.2},variants:Jft,children:[o.jsxs(v_,{children:[o.jsx(R3,{children:s}),o.jsx(yU,{children:r})]}),o.jsxs("div",{className:"gap-md flex flex-col items-center",children:[o.jsx(F,{children:r}),o.jsxs("div",{className:"gap-md mx-auto flex",children:[o.jsx(pe,{variant:"common",onClick:i,testId:"confirm-close-modal-cancel-button",...t}),o.jsx(pe,{variant:"rejected",onClick:l,testId:"confirm-close-modal-confirm-button",...n})]})]})]},"confirm-close-modal-content")})});M1e.displayName="ConfirmCloseModalContent";const k1e=R.memo(e=>{const{children:t,className:n="",motionProps:r,ref:s}=e;return o.jsx(Nhe,{asChild:!0,ref:s,children:o.jsx(ve.div,{className:V("bg-backdrop/25 fixed inset-0 flex flex-col items-center justify-center backdrop-blur-[1px]",n),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},...r,children:t},"confirm-close-modal-overlay")})});k1e.displayName="ConfirmCloseModalOverlay";const T1e=R.memo(function(){const{$t:t}=Z(),n=f.useMemo(()=>({text:t({defaultMessage:"Cancel",id:"47FYwba+bI"}),testId:"default-confirm-modal-cancel-button"}),[t]),r=f.useMemo(()=>({text:t({defaultMessage:"Discard",id:"nmpevlUATU"}),testId:"default-confirm-modal-discard-button"}),[t]);return o.jsx(k1e,{children:o.jsx(M1e,{cancelButton:n,confirmButton:r,description:t({defaultMessage:"Discard any unsaved changes?",id:"p7u+eL35XP"}),title:t({defaultMessage:"Discard changes?",id:"41zpq3nBvm"})})})});T1e.displayName="DefaultConfirmModal";const n9=R.memo(({isOpen:e,closeModal:t,existingCollection:n,entryUUID:r,frontendContextUUID:s,onCreate:a,content:i})=>{const l="space-create-modal",{$t:c}=Z(),{isMobileStyle:u,isMobileUserAgent:d}=Ce(),{createCollection:m,createCollectionForThread:p}=cx({reason:l}),[h,g]=f.useState({title:i?.title??n?.title??"",description:i?.description??n?.description??"",instructions:i?.instructions??n?.instructions??"",emoji:i?.emoji??n?.emoji??"",accessLevel:n?.access??CE,enableWebByDefault:n?.enable_web_by_default??!0}),[y,x]=f.useState(!1),{title:v,description:b,emoji:_,instructions:w}=h,C=v?.length===0||v?.length>BY||b?.length>VY||w?.length>UY,S=j=>{g(T=>({...T,...j})),x(!0)},E=_t(),M=f.useCallback(j=>{S({title:"",description:"",instructions:"",emoji:"",accessLevel:CE}),t(),E.push(`/spaces/${j.slug}`),a?.(j)},[t,E,a]),k=f.useCallback(()=>{r?p({...h,entryUUID:r,frontendContextUUID:s??"",callback:M}):m({...h,callback:M})},[r,p,h,s,M,m]),N=f.useMemo(()=>[{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:t,shouldShowConfirmDialog:!0},{text:c({defaultMessage:"Continue",id:"acrOozm08x"}),variant:"primary",disabled:C,onClick:()=>k()}],[t,c,C,k]),P=f.useCallback(j=>S({title:j}),[]),L=f.useCallback(j=>S({emoji:j}),[]),O=f.useCallback(j=>S({description:j}),[]),A=f.useCallback(j=>S({instructions:j}),[]);return o.jsx(on,{title:c({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),isOpen:e,onClose:t,actionList:N,confirmOnClose:y?o.jsx(T1e,{}):void 0,children:o.jsxs("div",{className:"space-y-md",children:[o.jsxs("div",{className:"space-x-sm flex items-center",children:[o.jsx("div",{className:"grow",children:o.jsx(Wr,{isMobileUserAgent:d,label:c({defaultMessage:"Title",id:"9a9+wwWy4u"}),value:v,autoFocus:!0,onChange:P,placeholder:c({defaultMessage:"Team Space...",id:"CR3RufeyCu"}),maxLength:BY})}),o.jsx("div",{className:"shrink-0",children:o.jsx(E1e,{emoji:_,setEmoji:L,size:"medium"})})]}),o.jsx(qa,{isMobileStyle:u,isMobileUserAgent:d,placeholder:c({defaultMessage:"A collaborative space for discussing latest insights...",id:"r+xI8TGuu9"}),label:c({defaultMessage:"Description",id:"Q8Qw5BZ1VA"}),isOptional:!0,minRows:2,value:b,onChange:O,maxLength:VY}),o.jsx(qa,{isMobileStyle:u,isMobileUserAgent:d,placeholder:c({defaultMessage:"Always respond in a formal tone and prioritize data-driven insights...",id:"ERATUnZFe3"}),label:c({defaultMessage:"Custom Instructions",id:"nRK52SgZ/p"}),subtitle:c({defaultMessage:"Give instructions to the AI that affects every thread in this space.",id:"6peDHp5LgI"}),isOptional:!0,value:w,minRows:2,onChange:A,maxLength:UY})]})})});n9.displayName="SpaceCreateModal";const emt=e=>e?oFe(e):void 0,Rh=(e,t)=>{if(!e)return"";const n=emt(e.currency);return n==null?"":t(e.price_minor_units/n,{style:"currency",currency:e.currency})},tmt=({billingInterval:e})=>e==="monthly"?o.jsx(he,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):e==="yearly"?o.jsx(he,{defaultMessage:"/ year",id:"8hNOud/igo"}):e==="unknown"?o.jsx(he,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):null,XE=({planName:e,price:t,formatNumber:n,isHighlighted:r=!1,className:s="",billingInterval:a})=>o.jsxs(H,{variant:"subtler",className:`px-md h-xl my-sm flex items-center justify-between rounded-md ${s}`,children:[o.jsx(F,{variant:"baseSemi",color:r?"default":"light",children:o.jsx(he,{...e})}),o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(F,{variant:"small",children:t?Rh(t,n):""}),o.jsx(F,{variant:"tinyRegular",children:o.jsx(tmt,{billingInterval:a})})]})]}),nmt=({isOpen:e,onClose:t})=>{const{data:n}=x1e({reason:"downgrade-modal"}),{update:r}=Nt(),{currentOpenModals:s}=wt(),{deprecatedOpenToast:a}=Mn(),{formatNumber:i,formatDate:l,$t:c}=Z(),{trackEvent:u}=je();f.useEffect(()=>{e&&u("subscription downgrade modal rendered")},[e,u]);const d=f.useCallback(async()=>{await xB({reason:"downgrade-to-pro-modal"}),await r(),t(),u("subscription downgrade success"),s.length>0&&t(),ny({downgrade:"success"}),a(c({defaultMessage:"Subscription updated",id:"Eq5gCUdVyJ"}),"success",5)},[t,s,r,a,c,u]),{mutate:m,isPending:p}=b1e({reason:"downgrade-modal"},{onSuccess:d}),h=n?.next_billing_start_ts,g=h?l(h*1e3):"";return o.jsx(on,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:o.jsxs(H,{className:"p-ml",children:[o.jsx(F,{variant:"baseSemi",children:o.jsx(he,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),o.jsx(XE,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:n?.old_product_price,formatNumber:i,billingInterval:n?.old_product_interval}),o.jsx(H,{children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[o.jsx("div",{className:"border-subtlest flex-1 border-t"}),o.jsx(he,{defaultMessage:"Downgrade",id:"SduMNm+0em"}),o.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),o.jsx(XE,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:n?.new_product_price,formatNumber:i,billingInterval:n?.new_product_interval,isHighlighted:!0,className:"mb-0 !rounded-b-none rounded-t-md"}),o.jsx(H,{variant:"subtler",className:"px-md pb-sm flex items-center justify-between rounded-b-md",children:o.jsx(F,{variant:"small",color:"light",children:o.jsx(he,{defaultMessage:"Your current Max subscription will remain active until {date} when it will change to Pro.",id:"2C6tgt4MMg",values:{date:g}})})}),o.jsxs(H,{className:"gap-sm mt-ml flex justify-end",children:[o.jsx(Te,{text:o.jsx(he,{defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),o.jsx(pe,{variant:"primary",text:o.jsx(he,{defaultMessage:"Confirm",id:"N2IrpMDHDB"}),disabled:p,onClick:()=>m()})]})]})})},rmt=async()=>{try{return(await ae.GET("/rest/homepage-widgets/upsell/","get upsells",{timeoutMs:Fe()})).data?.upsell_information??null}catch(e){return ne.error("Error getting homepage upsells",{error:e}),null}},smt=async()=>{try{return(await ae.GET("/rest/ntp/upsell/","get ntp upsells",{timeoutMs:Fe()})).data?.upsell_information??null}catch(e){return ne.error("Error getting NTP upsells",{error:e}),null}},bV=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=We({enabled:e,queryKey:htt(),queryFn:rmt,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}},su={pro:YLe,collection:yi,research:hD,labs:Pk,comet_login:wi,invite:gp},amt=()=>{const{data:e}=bV(),{trackEvent:t,trackEventOnce:n}=je(),r=L_(e??void 0),[s,a]=f.useState(!1);f.useEffect(()=>{e&&e.app_location==="BANNER"&&(a(!0),n("banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const i=f.useCallback(()=>{e&&(t("banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),a(!1),d5(e.name))},[e,t]),l=f.useMemo(()=>{if(e&&e.icon_reference&&e.icon_reference in su)return su[e.icon_reference]},[e]);return f.useMemo(()=>({show:s&&!!e,onDismiss:i,onClick:r,icon:l,title:e?.title,actionLabel:e?.button_text}),[i,r,s,l,e])},hee={RAMP:"Welcome Ramp members. Your 6 month Perplexity Pro free trial starts now!",FREEATT:"Welcome ATT Employees.  Your complimentary 1-year subscription starts now!",FREEAWS:"Welcome AWS Employees.  Your complimentary 1-year subscription starts now!",RABBIT:"Welcome r1 owners.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEUT:"Welcome UT Staff.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEDATABRICKS:"Welcome Databricks team.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREESRA:"Welcome SRA team. Your complimentary 1-year Perplexity Pro subscription starts now!",HBSTECH:"Welcome HBS Tech Conference Attendees.  Your complimentary 6 month Perplexity Pro subscription starts now!",HBSSTAFF:"Welcome HBS Tech Conference Attendees.  Your complimentary 1 year Perplexity Pro subscription starts now!",FREENEWSROOM:"Welcome Friends!  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEINKITT:"Welcome Inkitt Writers!  Your complimentary 1-year subscription to Perplexity Pro starts now!",FREETIME:"Welcome Time team!  Your complimentary 1-year subscription to Perplexity Pro starts now!",FREETMOBILE:"Welcome T-Mobile team!  Your complimentary 1-year subscription to Perplexity Pro starts now!","11LABS":"Welcome! Your complimentary 3-month subscription to Perplexity Pro starts now!",FREECAVS:"Welcome Cavs team! Your complimentary 1-year Perplexity Pro subscription starts now!",NOTHING6:"Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",FREENOTHING6:"Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",NOTHING1:"Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",FREENOTHING1:"Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",HOOHACKS:"Welcome HooHacks Community. Your 1-year Perplexity Pro free trial starts now!",NJED:"Welcome NJ ED Community. Your 1-year Perplexity Pro free trial starts now!",COPYAI:"Welcome Copy AI customers! Your 6-month complimentary Perplexity Pro subscription starts now!",RAYCAST6:"Welcome Raycast users! Your 6-month complimentary Perplexity Pro subscription starts now!",RAYCAST3:"Welcome Raycast users! Your 3-month complimentary Perplexity Pro subscription starts now!",FREEMAGENTALOVE:"Welcome Deutsche Telekom!  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEPPLXVIP:"Welcome friend of Perplexity! Your complimentary 1-year Perplexity Pro subscription starts now.",FREEUTA1:"Welcome UTA team! Your complimentray 1-year Perplexity Pro subscription starts now.",DT:"Willkommen Deutsche Telekom Kunde! Sie erhalten dank Magenta Moments ein kostenloses 1-Jahres-Abonnement fr Perplexity Pro.",MY:"Welcome! Your complimentary 1-year Perplexity Pro subscription starts now."},ZC="pplx.discount_code",BA="pplx.discount_code_expiry",imt=()=>{const[e,t]=f.useState(null),[n,r]=f.useState(null),s=_t(),a=Ut(),i=Ft(),l=a?.get("discount_code"),{$t:c}=Z(),u=Array.isArray(l)?l[0]:l,[d,m]=f.useState(u||null),{hasAccessToProFeatures:p}=Et(),h=f.useCallback(()=>{Oe.removeItem(ZC),Oe.removeItem(BA),r(null),t(null)},[]),g=f.useCallback(()=>{h(),m(null)},[h]),y=f.useCallback(()=>{if(n&&e)return;const b=Oe.getItem(ZC);b?.startsWith("REPLIT")?(t("/static/images/replit.svg"),r("/static/images/replit_dark.svg")):b?.startsWith("BREX")?(t("/static/images/brex.svg"),r("/static/images/brex_dark.svg")):(r(null),t(null))},[n,e]),x=f.useCallback(()=>{const b=Oe.getItem(ZC),_=Oe.getItem(BA);if(p){h();return}if(!(!b&&!u)){if(_&&new Date(_)<new Date){h();return}if(!b||u&&u!==b){const w=new Date;w.setDate(w.getDate()+2),Oe.setItem(ZC,String(u)),Oe.setItem(BA,w.toString()),m(String(u)),y(),i==="/pro"&&s.push("/",void 0,"Pro page");return}if(b){m(b),y();return}}},[u,y,p,i,h,s]),v=f.useCallback(b=>{for(const _ in hee)if(b&&b.startsWith(_))return hee[_];return c({defaultMessage:"Redeem your promo code {discountCode}. Get started",id:"Vapo/CiOwF"},{discountCode:b})},[c]);return f.useEffect(()=>{x()},[u,x]),f.useMemo(()=>({discountCode:d,setDiscountCode:m,partnerLogoDark:n,partnerLogoLight:e,message:v(d??""),clearDiscountCode:g}),[g,d,v,n,e])},N1e=({reason:e})=>{const{$t:t}=Z(),{data:n,isLoading:r}=We({queryKey:ftt(),queryFn:()=>c1e({reason:e})}),s=!!n?.institution;let a=n?.offer?.discount_str??void 0;!a&&s&&(a=t({defaultMessage:"$4.99",id:"ngR/pJs1LV"}));const i=n?.offer?.discount_type??void 0;return f.useMemo(()=>({userPromotionsLoading:r,discountPrice:a,discountType:i,showStudentDiscountContent:s,campaignId:n?.campaign?.id,institution:n?.institution}),[n?.campaign?.id,n?.institution,a,i,r,s])},S0="clicked enterprise ad",E0="https://www.perplexity.ai/enterprise",_V=()=>{const{trackEvent:e}=je(),t=_t(),{hasAccessToProFeatures:n}=Et(),r=f.useCallback(async h=>{h.preventDefault(),e(S0,{source:"sidebarAd",isSubscribed:n}),t.push(E0)},[e,t,n]),s=f.useCallback(async h=>{h?.preventDefault(),e(S0,{source:"settingsHeader"}),t.push(E0)},[e,t]),a=f.useCallback(async h=>{h.preventDefault(),h.stopPropagation(),e(S0,{source:"footer"}),t.push(E0)},[e,t]),i=f.useCallback(async h=>{h.preventDefault(),e(S0,{source:"pricingTable"}),t.push(E0)},[e,t]),l=f.useCallback(async h=>{h.preventDefault(),e(S0,{source:"paywall"}),t.push(E0)},[e,t]),c=f.useCallback(({orgName:h,success:g})=>{e("org created",{orgName:h,success:g})},[e]),u=f.useCallback(({invitedEmail:h,source:g,orgUUID:y,inviteType:x})=>{e("org user invited",{invitedEmail:h,source:g,orgUUID:y,inviteType:x})},[e]),d=f.useCallback(({orgUUID:h})=>{e("org invite step completed",{orgUUID:h})},[e]),m=f.useCallback(({orgUUID:h,source:g,intent:y,success:x})=>e("org payment portal entered",{orgUUID:h,source:g,intent:y,success:x}),[e]),p=f.useCallback(({orgUUID:h,success:g})=>{e("sso enabled",{orgUUID:h,success:g})},[e]);return f.useMemo(()=>({handleSidebarAdClick:r,handleSettingsHeaderAdClick:s,handleFooterAdClick:a,handlePricingTableAdClick:i,handlePaywallAdClick:l,trackOrgCreated:c,trackOrgUserInvited:u,trackOrgInviteStepCompleted:d,trackOrgPaymentPortalEntered:m,trackSSOEnabled:p}),[a,l,i,s,r,c,d,m,u,p])},omt=({reason:e})=>{const t=_t(),{organization:n}=kn({reason:e}),{trackOrgPaymentPortalEntered:r}=_V(),s=f.useCallback(async({source:l})=>{const c=await itt({source:l,locale:jd(),reason:e});c?(r({orgUUID:n?.uuid,source:l,intent:"portal",success:!0}),t.push(c)):(r({orgUUID:n?.uuid,source:l,intent:"portal",success:!1}),ne.log("could not open Stripe portal"))},[r,n?.uuid,t,e]),a=f.useCallback(({interval:l="monthly",subscriptionTier:c,source:u,onErrorCallback:d,reason:m})=>{const p=jd();ott({subscriptionTier:c==="enterprise_pro"?jn.PRO:jn.MAX,interval:l,origin:u,locale:p,reason:m}).then(h=>{h&&h.status==="success"&&h.url!=null&&h.url!==""?(r({orgUUID:n?.uuid,source:u,intent:"checkout",success:!0}),h.url&&t.push(h.url)):(r({orgUUID:n?.uuid,source:u,intent:"checkout",success:!1}),d?.())})},[t,n?.uuid,r]),i=f.useCallback(async({interval:l,subscriptionTier:c,collectionMethod:u,source:d,billingAddress:m,reason:p})=>{const h=jd(),g=await ltt({interval:l,subscriptionTier:c==="enterprise_pro"?jn.PRO:jn.MAX,origin:d,locale:h,collectionMethod:u,billingAddress:m,reason:p});return await xye({reason:p}),g},[]);return f.useMemo(()=>({manageExistingBillingClick:s,navigateToCheckout:a,createInvoicedSubscription:i}),[i,s,a])},lmt={good:"super",bad:"red",info:"subtler",orange:"orange"},Mp=R.memo(({variant:e,title:t,actionLabel:n,onClick:r,onClose:s,toolTip:a,icon:i,isMobileStyle:l,isLoading:c})=>{const u=e==="info"?"default":"white",d=e==="info"?"super":u,m=f.useCallback(h=>{h.stopPropagation(),s?.(h)},[s]),p=o.jsxs(H,{className:V("h-bannerHeight rounded-none","gap-xs px-md md:gap-sm relative flex w-full cursor-pointer items-center transition duration-200 hover:opacity-80",e==="info"?"md:justify-between":"md:justify-center",{"px-lg":s}),variant:lmt[e],onClick:r,children:[c?o.jsx(F,{color:u,children:o.jsx(Zr,{})}):i&&o.jsx(F,{color:u,className:"mr-xs md:mr-0",children:o.jsx(le,{icon:i,size:l?"sm":"md"})}),o.jsx(F,{color:u,className:"leading-[1.1]",variant:l?"tiny":"small",children:t}),o.jsxs("div",{className:"flex items-center gap-1",children:[n&&o.jsx(F,{color:d,variant:l?"tiny":"small",className:V("hidden font-bold decoration-white/30 md:inline-flex",{"underline underline-offset-2":e!=="info"}),children:n}),r&&e!=="info"&&o.jsx(F,{color:u,className:"inline-flex",children:o.jsx(le,{icon:a_,size:"xs"})})]}),s&&o.jsx(Te,{icon:It,extraCSS:V("!absolute right-sm opacity-50",e==="info"?"text-foreground dark:!text-white":"!text-white"),variant:"noHover",size:"tiny",onClick:m})]});return a?o.jsx(En,{tooltipText:a,children:p}):p});Mp.displayName="SiteBanner";const cmt=({orgStripeStatus:e})=>{const t="org-billing-banner",n=_t(),{$t:r}=Z(),{navigateToCheckout:s}=omt({reason:t}),{isMobileStyle:a}=Ce(),[i,l]=f.useState(!1),{openModal:c}=wt();if(Xs.getItem(Zqe))return null;const d=()=>{if(!i){if(e==="none"){c("pricingModal",{origin:De.ENTERPRISE_BILLING_BANNER,showFreeTier:!0,pitchMessage:{title:r({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}});return}l(!0),s({source:"banner",subscriptionTier:"enterprise_pro",onErrorCallback:()=>{n.refresh("Org billing banner"),l(!1)},reason:t})}},m=r(e==="past_due"?{defaultMessage:"Please complete your invoice payment to use Enterprise features",id:"e4FA3jvBUQ"}:{defaultMessage:"Please complete the payment process to use Enterprise features",id:"bNYGI9HBI3"}),p=r({defaultMessage:"May take up to a minute to reflect payment status changes",id:"+w47QOW1fc"});return o.jsx(Mp,{onClick:d,isLoading:i,variant:"bad",title:m,toolTip:p,icon:QLe,isMobileStyle:a})},umt=()=>{const e=_t(),{trackEvent:t}=je(),n=f.useCallback(async({origin:r,discountCode:s,tier:a,referralCode:i,subscriptionTier:l="pro",redirectPath:c})=>{const u=new URL(`/${l}/payment`,window.location.origin);return u.searchParams.set("plan",a),u.searchParams.set("origin",r),s&&u.searchParams.set("promotion_code",s),c&&u.searchParams.set("redirect_path",c),t("pro checkout started",{subscriptionTier:l,origin:r,discountCode:s??"",referralCode:i??"",tier:"monthly",flowType:"embedded_checkout"}),e.push(u.toString()),!0},[e,t]);return f.useMemo(()=>({navigateToPayment:n}),[n])},dmt=({message:e,discountCode:t,clearDiscountCode:n})=>{const r="discount-code-banner",s=lt(),{trackEvent:a}=je(),{$t:i}=Z(),{isMobileStyle:l}=Ce(),[c,u]=f.useState(!1),[d,m]=f.useState(null),{openVisitorLoginUpsell:p}=gr({enabled:!s}),{navigateToPayment:h}=umt(),g=De.DISCOUNT_CODE_BANNER;f.useEffect(()=>{a("promo code banner shown",{discountCode:t})},[a,t]);const y=f.useCallback(()=>{const b=new URL(window.location.href);b.searchParams.delete("discount_code"),yx(Object.fromEntries(b.searchParams)),n()},[n]),x=f.useCallback(async()=>{if(a("promo code banner clicked",{discountCode:t}),!c){if(d){y(),m(null);return}if(s){if(u(!0),a("get started button clicked from discount banner",{tier:"monthly"}),await h({origin:g,discountCode:t,tier:"monthly"})){n();return}a("pro checkout started",{subscriptionTier:"pro",origin:g,discountCode:t??"",referralCode:"",tier:"monthly",flowType:"stripe_checkout"}),d1e({request:{subscriptionTier:"pro",tier:"monthly",referralCode:"",discountCode:t,origin:g,locale:jd()},reason:r}).then(b=>{b?.url?ml(b.url,"Discount code banner checkout"):(b?.errorCode==="PROMO_CODE_CUSTOMER_NOT_FIRST_TIME"?m(i({defaultMessage:"This code is only valid for first-time customers. Click to dismiss.",id:"xTWJg0ueMJ"})):m(i({defaultMessage:"There was an error with your code. Please double-check your code and click to try again.",id:"CdOiX2ylN6"})),u(!1))})}else p({title:i({defaultMessage:"Get started with your Pro discount",id:"XTa2YrANRF"}),origin:g})}},[i,n,t,d,c,s,h,p,g,a,y]),v=b=>{y(),b.preventDefault()};return o.jsx(Mp,{onClick:x,isLoading:c,icon:d?$ue:Wue,variant:d?"bad":"good",title:d||e,isMobileStyle:l,onClose:v})},fmt="back_to_school_winner",j1e="EDUFREEYEAR",gee=({partnerCode:e,partnerDiscountCode:t,bannerVariant:n})=>{const{$t:r}=Z(),{session:s}=Nt(),{hasActiveSubscription:a}=Et(),i=e==="edu"&&t===j1e?!1:a,[,,l]=_1e(),[,,c]=w1e(),[u,d]=f.useState(!1),{isMobileStyle:m}=Ce(),{data:p}=We({queryKey:["partner",e],queryFn:()=>fetch(`/api/subscription/config?partnerCode=${e}`).then(C=>C.json())}),h=_t();if(!e)return null;const g=p?.messages??npe,y=i?r({defaultMessage:"Welcome to Perplexity Pro",id:"dcD7kilsgv"}):g?.bannerMessage??"",x=i?r({defaultMessage:"Learn More",id:"7DIW6+rckr"}):e.startsWith("edu")?r({defaultMessage:"Redeem Now",id:"EiBCDsh1sP"}):r({defaultMessage:"Get Started",id:"9QXm1EW9qz"}),v=i?void 0:Wue,b=i?`/join/p/${e}/welcome`:s&&t?`/join/p/${e}/${t}`:`/join/p/${e}`,_=C=>{l(),c(),C.preventDefault()},w=()=>{u||(d(!0),h.push(b))};return p?.maskPromoCodeFromQueryParams?null:o.jsx(Mp,{icon:v,isMobileStyle:m,title:y,actionLabel:x,onClick:w,isLoading:u,variant:n??"good",onClose:_})},mmt="https://www.perplexity.ai/hub/blog/eligible-uber-one-members-can-now-unlock-a-complimentary-full-year-of-perplexity-pro",pmt=()=>{const{$t:e}=Z(),t=_t(),{isMobileStyle:n}=Ce(),[r,s]=f.useState(!1),a=()=>{r||(s(!0),t.push(mmt))};return o.jsx(Mp,{variant:"good",title:e({defaultMessage:"{uberOne} members in the United States and Canada can redeem one free year of {perplexityPro}",id:"jo9fEuRnKx"},{uberOne:"Uber One",perplexityPro:"Perplexity Pro"}),onClick:a,isLoading:r,isMobileStyle:n})};var ZE;(function(e){e.NONE="none",e.ACTIVE="active",e.TRIALING="trialing",e.PAST_DUE="past_due",e.INVOICE_PAST_DUE="invoice_past_due",e.WHITE_GLOVE_PAST_DUE="white_glove_past_due",e.CANCELED="canceled"})(ZE||(ZE={}));const idn=[{label:"N/A",value:""},{label:"AD NRT",value:"ad_nrt"},{label:"AE TRN",value:"ae_trn"},{label:"AL TIN",value:"al_tin"},{label:"AM TIN",value:"am_tin"},{label:"AO TIN",value:"ao_tin"},{label:"AR CUIT",value:"ar_cuit"},{label:"AU ABN",value:"au_abn"},{label:"AU ARN",value:"au_arn"},{label:"BA TIN",value:"ba_tin"},{label:"BB TIN",value:"bb_tin"},{label:"BG UIC",value:"bg_uic"},{label:"BH VAT",value:"bh_vat"},{label:"BO TIN",value:"bo_tin"},{label:"BR CNPJ",value:"br_cnpj"},{label:"BR CPF",value:"br_cpf"},{label:"BS TIN",value:"bs_tin"},{label:"BY TIN",value:"by_tin"},{label:"CA BN",value:"ca_bn"},{label:"CA GST/HST",value:"ca_gst_hst"},{label:"CA PST BC",value:"ca_pst_bc"},{label:"CA PST MB",value:"ca_pst_mb"},{label:"CA PST SK",value:"ca_pst_sk"},{label:"CA QST",value:"ca_qst"},{label:"CD NIF",value:"cd_nif"},{label:"CH UID",value:"ch_uid"},{label:"CH VAT",value:"ch_vat"},{label:"CL TIN",value:"cl_tin"},{label:"CN TIN",value:"cn_tin"},{label:"CO NIT",value:"co_nit"},{label:"CR TIN",value:"cr_tin"},{label:"DE STN",value:"de_stn"},{label:"DO RCN",value:"do_rcn"},{label:"EC RUC",value:"ec_ruc"},{label:"EG TIN",value:"eg_tin"},{label:"ES CIF",value:"es_cif"},{label:"EU OSS VAT",value:"eu_oss_vat"},{label:"EU VAT",value:"eu_vat"},{label:"GB VAT",value:"gb_vat"},{label:"GE VAT",value:"ge_vat"},{label:"GN NIF",value:"gn_nif"},{label:"HK BR",value:"hk_br"},{label:"HR OIB",value:"hr_oib"},{label:"HU TIN",value:"hu_tin"},{label:"ID NPWP",value:"id_npwp"},{label:"IL VAT",value:"il_vat"},{label:"IN GST",value:"in_gst"},{label:"IS VAT",value:"is_vat"},{label:"JP CN",value:"jp_cn"},{label:"JP RN",value:"jp_rn"},{label:"JP TRN",value:"jp_trn"},{label:"KE PIN",value:"ke_pin"},{label:"KH TIN",value:"kh_tin"},{label:"KR BRN",value:"kr_brn"},{label:"KZ BIN",value:"kz_bin"},{label:"LI UID",value:"li_uid"},{label:"LI VAT",value:"li_vat"},{label:"MA VAT",value:"ma_vat"},{label:"MD VAT",value:"md_vat"},{label:"ME PIB",value:"me_pib"},{label:"MK VAT",value:"mk_vat"},{label:"MR NIF",value:"mr_nif"},{label:"MX RFC",value:"mx_rfc"},{label:"MY FRP",value:"my_frp"},{label:"MY ITN",value:"my_itn"},{label:"MY SST",value:"my_sst"},{label:"NG TIN",value:"ng_tin"},{label:"NO VAT",value:"no_vat"},{label:"NO VOEC",value:"no_voec"},{label:"NP PAN",value:"np_pan"},{label:"NZ GST",value:"nz_gst"},{label:"OM VAT",value:"om_vat"},{label:"PE RUC",value:"pe_ruc"},{label:"PH TIN",value:"ph_tin"},{label:"RO TIN",value:"ro_tin"},{label:"RS PIB",value:"rs_pib"},{label:"RU INN",value:"ru_inn"},{label:"RU KPP",value:"ru_kpp"},{label:"SA VAT",value:"sa_vat"},{label:"SG GST",value:"sg_gst"},{label:"SG UEN",value:"sg_uen"},{label:"SI TIN",value:"si_tin"},{label:"SN NINEA",value:"sn_ninea"},{label:"SR FIN",value:"sr_fin"},{label:"SV NIT",value:"sv_nit"},{label:"TH VAT",value:"th_vat"},{label:"TJ TIN",value:"tj_tin"},{label:"TR TIN",value:"tr_tin"},{label:"TW VAT",value:"tw_vat"},{label:"TZ VAT",value:"tz_vat"},{label:"UA VAT",value:"ua_vat"},{label:"UG TIN",value:"ug_tin"},{label:"US EIN",value:"us_ein"},{label:"UY RUC",value:"uy_ruc"},{label:"UZ TIN",value:"uz_tin"},{label:"UZ VAT",value:"uz_vat"},{label:"VE RIF",value:"ve_rif"},{label:"VN TIN",value:"vn_tin"},{label:"ZA VAT",value:"za_vat"},{label:"ZM TIN",value:"zm_tin"},{label:"ZW TIN",value:"zw_tin"}],A1e=f.memo(({orgName:e,invitationUUID:t})=>{const{$t:n}=Z(),{isMobileStyle:r}=Ce(),s=f.useCallback(()=>{ml(`/onboarding/org/join/${t}`,"Organization invitation")},[t]),a=f.useMemo(()=>n({defaultMessage:"{orgName} invited you to join their organization",id:"xAk8Drb2hE"},{orgName:e}),[n,e]),i=f.useMemo(()=>n({defaultMessage:"View invite",id:"TDWT6zhMKG"}),[n]);return o.jsx(Mp,{isLoading:!1,variant:"good",title:a,actionLabel:i,icon:io,isMobileStyle:r,onClick:s})});A1e.displayName="OrgInvitationBanner";const hmt=e=>["/onboarding/org/create"].includes(e);function I1e(){const e="app-banner-inner",{isMobileUserAgent:t}=Ce(),{message:n,discountCode:r,clearDiscountCode:s}=imt(),{hasAccessToProFeatures:a}=Et(),[i]=_1e(),[l]=w1e(),c=Ft(),{organization:u,orgUser:d,pendingInvitation:m}=kn({reason:e}),p=[ZE.NONE,ZE.PAST_DUE],h=u?.stripe_status&&p.includes(u.stripe_status),g=d?.role==="ADMIN",y=Ut(),v=N1e({reason:e}).campaignId===fmt,{show:b,onDismiss:_,onClick:w,icon:C,title:S,actionLabel:E}=amt();return b&&S&&E?o.jsx(ve.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2},children:o.jsx(Mp,{icon:C,isMobileStyle:t,title:S,actionLabel:E,onClick:w,variant:"good",onClose:_})}):m&&!u&&!d?o.jsx(A1e,{orgName:m.organization_name,invitationUUID:m.invitation_uuid}):g&&h&&!hmt(c??"")&&!t?o.jsx(cmt,{orgStripeStatus:u?.stripe_status}):/(^\/$)|(^\/search)/.test(c??"")&&i?o.jsx(gee,{partnerCode:i,partnerDiscountCode:l}):r&&!a&&!i?o.jsx(dmt,{message:n,discountCode:r,clearDiscountCode:s}):y?.get("utm_campaign")==="morningbrew_083024"&&y?.get("utm_source")==="newsletter"?o.jsx(pmt,{}):v?o.jsx(gee,{partnerCode:"edu",partnerDiscountCode:j1e,bannerVariant:"orange"}):null}const gmt=()=>{const e=f.useCallback(n=>{const r=document.documentElement,s=n??Fn("colorSchemeTheme"),a=Cde(s);a?r.setAttribute("data-theme",a):r.removeAttribute("data-theme")},[]),t=f.useMemo(()=>Js(e,100),[e]);TB("colorSchemeTheme",n=>{t(n?.value)}),f.useEffect(()=>{e()},[e])},R1e=Yt("AppLayoutContext",void 0),Yu=()=>{const e=f.useContext(R1e);if(!e)throw new Error("useAppLayout must be used within an AppLayoutProvider");return e},ymt=({children:e})=>{const[t,n]=f.useState(!1);return gmt(),o.jsx(R1e.Provider,{value:{isMobileSidebarOpen:t,setMobileSidebarOpen:n},children:e})},xmt=({children:e})=>{const{isMobileSidebarOpen:t,setMobileSidebarOpen:n}=Yu(),{$t:r}=Z();return o.jsx(oU,{open:t,onOpenChange:n,children:o.jsxs(cU,{forceMount:!0,children:[o.jsx(v_,{children:o.jsx(mU,{children:r({defaultMessage:"Mobile Sidebar",id:"37aIxgWRuh"})})}),o.jsx(Je,{children:t&&o.jsxs(o.Fragment,{children:[o.jsx(uU,{asChild:!0,children:o.jsx(ve.div,{className:"fixed inset-0 bg-black/20 dark:bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}},"mobile-sidebar-overlay")}),o.jsx(dU,{asChild:!0,children:o.jsx(ve.div,{className:"bg-base fixed inset-y-0 left-0",initial:{x:"-100%"},animate:{x:"0%"},exit:{x:"-100%"},transition:{duration:.2,ease:an},children:e},"mobile-sidebar-content")})]})})]})})},wV=({className:e})=>{const{isMobileSidebarOpen:t,setMobileSidebarOpen:n}=Yu();return o.jsx(Te,{icon:XLe,pill:!0,onClick:()=>n(!t),extraCSS:e})},Kh=72,JE=200,P1e=()=>{const{isGovernmentRequestOrigin:e}=ls();return e===void 0},vmt=()=>ett()==="firefox"?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("pc")==="firefox",yee="partnerships",bmt=()=>ntt()===yee?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("utm_source")===yee,_c=f.memo(({isSamsungBrowser:e,isWindowsApp:t,isComet:n,isFirefoxDefaultSearch:r,isPartnershipCampaign:s,isGovernment:a,children:i})=>{const l=pn(),c=vmt(),u=bmt(),{isGovernmentRequestOrigin:d}=ls(),{device:{isWindowsApp:m,isSamsungBrowser:p}}=Lt(),h=P1e();return f.useMemo(()=>!!(n&&l||t&&m||e&&p||r&&c||s&&u||a&&(h||d)),[l,m,p,n,e,t,r,c,s,u,a,d,h])?null:i});_c.displayName="OmitUpsellIf";const O1e=R.memo(({})=>{const{$t:e}=Z(),{trackEvent:t}=je(),n=f.useCallback(()=>{t("click logo",{})},[t]),{device:{isIOS:r}}=Lt(),{handleAppDownloadClicked:s}=Ep("mobile-header"),a=V_({origin:"mobile-header"}),{mwebUpsellWhatsApp:i,loadingMwebUpsellWhatsApp:l}=$_(),c=f.useMemo(()=>i?ED:r?s_:SD,[i,r]);return o.jsx(H,{variant:"background",className:"px-sm h-headerHeight sticky inset-x-0 top-0 z-10 flex w-full items-center md:mb-0",children:o.jsxs("div",{className:"gap-x-sm pl-xs flex w-full items-center justify-between md:hidden",children:[o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(wV,{className:"-ml-sm"}),o.jsx(Ye,{href:"/",onClick:n,children:o.jsx(za,{variant:"text",size:"small"})})]}),!l&&o.jsx(_c,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(pe,{size:"small",pill:!0,variant:"primary",icon:c,text:e(i?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:i?a:s})})})]})})});O1e.displayName="MobileProductHeader";const CV=Yt("ScrollContainerRefContext",null),_mt=({children:e,scrollContainerRef:t})=>o.jsx(CV.Provider,{value:{scrollContainerRef:t},children:e}),Za=()=>{const e=f.useContext(CV);if(!e)throw new Error("useScrollContainerRef must be used within a ScrollContainerRefProvider");return e},SV=R.memo(e=>{const{children:t,inRenderingPlace:n}=e,s=xi().erp;return n&&n===s||!n&&s!==void 0?null:o.jsx(o.Fragment,{children:t})});SV.displayName="HideInEntropy";const wmt=/^\/b\//;function L1e(e){return e&&wmt.test(e)}function Cmt(e){return e?new URL(window.location.href).pathname.endsWith(`/search/${e}`):!1}function Smt(e){return e?.startsWith("/collections")||e?.startsWith("/spaces")}function Emt(){return pn()?"/b/home":"/"}const xx=()=>{const{locale:e}=Z();return Npe(e)==="rtl"},Mmt=({children:e,ref:t})=>o.jsx(ymt,{children:o.jsx(H,{variant:"underlay",children:o.jsx("div",{className:"isolate flex h-dvh",ref:t,children:e})})}),kmt=({children:e})=>{const{isMobileStyle:t}=Ce({evaluateOnInit:!0});return t?o.jsx(xmt,{children:e}):o.jsx(o.Fragment,{children:e})},Tmt=({children:e,fillHeight:t=!0,hasSidebar:n,ref:r})=>{const{isSidebarPinned:s}=_n(),{isMobileStyle:a}=Ce({evaluateOnInit:!0}),i=Ft(),l=n&&!L1e(i),c=s&&!a&&l,u=pi(),d=xx(),m=f.useMemo(()=>d?{paddingRight:c?JE:0}:{paddingLeft:c?JE:0},[d,c]);return o.jsxs(ve.div,{initial:m,animate:m,transition:{duration:.2,ease:an},className:"erp-tab:p-0 md:gap-xs erp-tab:gap-0 isolate flex h-auto max-h-screen min-w-0 grow flex-col",ref:r,children:[o.jsx(SV,{inRenderingPlace:"sidecar",children:o.jsx(I1e,{})}),o.jsxs(H,{variant:"background",className:"@container/main relative isolate min-h-0 flex-1 overflow-clip bg-clip-border",children:[o.jsx("div",{className:V("mx-auto flex w-full flex-col",{"h-full":t}),children:e}),o.jsx(H,{className:V("rounded-inherit pointer-events-none absolute inset-0 z-20 hidden md:dark:block",l&&"md:!border-y-0 md:!border-r-0",!u&&"md:dark:border")})]})]})},W_=({children:e,childrenWidth:t,containerClassName:n=""})=>{const r=Qr(t).with("small",()=>"max-w-screen-sm px-md md:px-lg").with("default",()=>"max-w-screen-md px-md md:px-lg").with("static",()=>"max-w-screen-lg px-md py-lg md:px-xl").with("large",()=>"max-w-threadWidth px-md md:px-lg").with("none",()=>"max-w-none").otherwise(()=>"max-w-screen-md px-md md:px-lg"),s=f.useRef(null);return o.jsx(_mt,{scrollContainerRef:s,children:o.jsx("div",{ref:s,className:"scrollable-container scrollbar-subtle flex flex-1 basis-0 overflow-auto [scrollbar-gutter:stable]",children:o.jsx("div",{className:V("mx-auto size-full",r,n),children:e})})})},odn=({children:e,mobileHeader:t=!0})=>{const{isMobileStyle:n}=Ce();return o.jsxs(o.Fragment,{children:[o.jsx("div",{children:t&&n&&o.jsx(O1e,{})}),e]})};function xee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Yh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xee(Object(n),!0).forEach(function(r){D1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xee(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k2(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k2=function(t){return typeof t}:k2=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k2(e)}function D1e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function jmt(e,t){if(e==null)return{};var n=Nmt(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eM(e,t){return Amt(e)||Imt(e,t)||Rmt(e,t)||Pmt()}function Amt(e){if(Array.isArray(e))return e}function Imt(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,i,l;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function Rmt(e,t){if(e){if(typeof e=="string")return vee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vee(e,t)}}function vee(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pmt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Oi=function(t,n,r){var s=!!r,a=R.useRef(r);R.useEffect(function(){a.current=r},[r]),R.useEffect(function(){if(!s||!t)return function(){};var i=function(){a.current&&a.current.apply(a,arguments)};return t.on(n,i),function(){t.off(n,i)}},[s,n,t,a])},ob=function(t){var n=R.useRef(t);return R.useEffect(function(){n.current=t},[t]),n.current},Km=function(t){return t!==null&&k2(t)==="object"},Omt=function(t){return Km(t)&&typeof t.then=="function"},Lmt=function(t){return Km(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},bee="[object Object]",r9=function e(t,n){if(!Km(t)||!Km(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(t)===bee,i=Object.prototype.toString.call(n)===bee;if(a!==i)return!1;if(!a&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var m=0;m<c.length;m+=1)u[c[m]]=!0;var p=Object.keys(u);if(p.length!==l.length)return!1;var h=t,g=n,y=function(v){return e(h[v],g[v])};return p.every(y)},F1e=function(t,n,r){return Km(t)?Object.keys(t).reduce(function(s,a){var i=!Km(n)||!r9(t[a],n[a]);return r.includes(a)?(i&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):i?Yh(Yh({},s||{}),{},D1e({},a,t[a])):s},null):null},U1e="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",_ee=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U1e;if(t===null||Lmt(t))return t;throw new Error(n)},B1e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U1e;if(Omt(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return _ee(s,n)})};var r=_ee(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},V1e=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),t.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},S5=R.createContext(null);S5.displayName="ElementsContext";var $1e=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},Dmt=function(t){var n=t.stripe,r=t.options,s=t.children,a=R.useMemo(function(){return B1e(n)},[n]),i=R.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=eM(i,2),c=l[0],u=l[1];R.useEffect(function(){var p=!0,h=function(y){u(function(x){return x.stripe?x:{stripe:y,elements:y.elements(r)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(g){g&&p&&h(g)}):a.tag==="sync"&&!c.stripe&&h(a.stripe),function(){p=!1}},[a,c,r]);var d=ob(n);R.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var m=ob(r);return R.useEffect(function(){if(c.elements){var p=F1e(r,m,["clientSecret","fonts"]);p&&c.elements.update(p)}},[r,m,c.elements]),R.useEffect(function(){V1e(c.stripe)},[c.stripe]),R.createElement(S5.Provider,{value:c},s)};Dmt.propTypes={stripe:Ue.any,options:Ue.object};var Fmt=function(t){var n=R.useContext(S5);return $1e(n,t)},ldn=function(){var t=Fmt("calls useElements()"),n=t.elements;return n};Ue.func.isRequired;var Umt=["on","session"],E5=R.createContext(null);E5.displayName="CheckoutSdkContext";var W1e=function(t,n){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return t},EV=R.createContext(null);EV.displayName="CheckoutContext";var Bmt=function(t,n){if(!t)return null;t.on,t.session;var r=jmt(t,Umt);return n?Yh(Yh({},r),n):Yh(Yh({},r),t.session())},Vmt="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",$mt=function(t){var n=t.stripe,r=t.options,s=t.children,a=R.useMemo(function(){return B1e(n,Vmt)},[n]),i=R.useState(null),l=eM(i,2),c=l[0],u=l[1],d=R.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,checkoutSdk:null}}),m=eM(d,2),p=m[0],h=m[1],g=function(w,C){h(function(S){return S.stripe&&S.checkoutSdk?S:{stripe:w,checkoutSdk:C}})},y=R.useRef(!1);R.useEffect(function(){var _=!0;return a.tag==="async"&&!p.stripe?a.stripePromise.then(function(w){w&&_&&!y.current&&(y.current=!0,w.initCheckout(r).then(function(C){C&&(g(w,C),C.on("change",u))}))}):a.tag==="sync"&&a.stripe&&!y.current&&(y.current=!0,a.stripe.initCheckout(r).then(function(w){w&&(g(a.stripe,w),w.on("change",u))})),function(){_=!1}},[a,p,r,u]);var x=ob(n);R.useEffect(function(){x!==null&&x!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[x,n]);var v=ob(r);R.useEffect(function(){var _,w;if(p.checkoutSdk){r.clientSecret&&!Km(v)&&!r9(r.clientSecret,v.clientSecret)&&console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var C=v==null||(_=v.elementsOptions)===null||_===void 0?void 0:_.appearance,S=r==null||(w=r.elementsOptions)===null||w===void 0?void 0:w.appearance;S&&!r9(S,C)&&p.checkoutSdk.changeAppearance(S)}},[r,v,p.checkoutSdk]),R.useEffect(function(){V1e(p.stripe)},[p.stripe]);var b=R.useMemo(function(){return Bmt(p.checkoutSdk,c)},[p.checkoutSdk,c]);return p.checkoutSdk?R.createElement(E5.Provider,{value:p},R.createElement(EV.Provider,{value:b},s)):null};$mt.propTypes={stripe:Ue.any,options:Ue.shape({clientSecret:Ue.string.isRequired,elementsOptions:Ue.object}).isRequired};var Wmt=function(t){var n=R.useContext(E5);return W1e(n,t)},s9=function(t){var n=R.useContext(E5),r=R.useContext(S5);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n?W1e(n,t):$1e(r,t)},cdn=function(){Wmt("calls useCheckout()");var t=R.useContext(EV);if(!t)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return t},Hmt=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},us=function(t,n){var r="".concat(Hmt(t),"Element"),s=function(c){var u=c.id,d=c.className,m=c.options,p=m===void 0?{}:m,h=c.onBlur,g=c.onFocus,y=c.onReady,x=c.onChange,v=c.onEscape,b=c.onClick,_=c.onLoadError,w=c.onLoaderStart,C=c.onNetworksChange,S=c.onConfirm,E=c.onCancel,M=c.onShippingAddressChange,k=c.onShippingRateChange,N=s9("mounts <".concat(r,">")),P="elements"in N?N.elements:null,L="checkoutSdk"in N?N.checkoutSdk:null,O=R.useState(null),A=eM(O,2),j=A[0],T=A[1],I=R.useRef(null),U=R.useRef(null);Oi(j,"blur",h),Oi(j,"focus",g),Oi(j,"escape",v),Oi(j,"click",b),Oi(j,"loaderror",_),Oi(j,"loaderstart",w),Oi(j,"networkschange",C),Oi(j,"confirm",S),Oi(j,"cancel",E),Oi(j,"shippingaddresschange",M),Oi(j,"shippingratechange",k),Oi(j,"change",x);var B;y&&(t==="expressCheckout"?B=y:B=function(){y(j)}),Oi(j,"ready",B),R.useLayoutEffect(function(){if(I.current===null&&U.current!==null&&(P||L)){var W=null;L?W=L.createElement(t,p):P&&(W=P.create(t,p)),I.current=W,T(W),W&&W.mount(U.current)}},[P,L,p]);var D=ob(p);return R.useEffect(function(){if(I.current){var W=F1e(p,D,["paymentRequest"]);W&&"update"in I.current&&I.current.update(W)}},[p,D]),R.useLayoutEffect(function(){return function(){if(I.current&&typeof I.current.destroy=="function")try{I.current.destroy(),I.current=null}catch{}}},[]),R.createElement("div",{id:u,className:d,ref:U})},a=function(c){s9("mounts <".concat(r,">"));var u=c.id,d=c.className;return R.createElement("div",{id:u,className:d})},i=n?a:s;return i.propTypes={id:Ue.string,className:Ue.string,onChange:Ue.func,onBlur:Ue.func,onFocus:Ue.func,onReady:Ue.func,onEscape:Ue.func,onClick:Ue.func,onLoadError:Ue.func,onLoaderStart:Ue.func,onNetworksChange:Ue.func,onConfirm:Ue.func,onCancel:Ue.func,onShippingAddressChange:Ue.func,onShippingRateChange:Ue.func,options:Ue.object},i.displayName=r,i.__elementType=t,i},ds=typeof window>"u",zmt=R.createContext(null);zmt.displayName="EmbeddedCheckoutProviderContext";var udn=function(){var t=s9("calls useStripe()"),n=t.stripe;return n};us("auBankAccount",ds);us("card",ds);us("cardNumber",ds);us("cardExpiry",ds);us("cardCvc",ds);us("fpxBank",ds);us("iban",ds);us("idealBank",ds);us("p24Bank",ds);us("epsBank",ds);var ddn=us("payment",ds),fdn=us("expressCheckout",ds);us("currencySelector",ds);us("paymentRequestButton",ds);var mdn=us("linkAuthentication",ds),pdn=us("address",ds);us("shippingAddress",ds);us("paymentMethodMessaging",ds);us("affirmMessage",ds);us("afterpayClearpayMessage",ds);var H1e="https://js.stripe.com/v3",Gmt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var qmt=function(){for(var t=document.querySelectorAll('script[src^="'.concat(H1e,'"]')),n=0;n<t.length;n++){var r=t[n];if(Gmt.test(r.src))return r}return null},wee=function(t){var n="",r=document.createElement("script");r.src="".concat(H1e).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Kmt=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"5.5.0",startTime:n})},M0=null,JC=null,eS=null,Ymt=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},Qmt=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},Xmt=function(t){return M0!==null?M0:(M0=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=qmt();if(!(s&&t)){if(!s)s=wee(t);else if(s&&eS!==null&&JC!==null){var a;s.removeEventListener("load",eS),s.removeEventListener("error",JC),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=wee(t)}}eS=Qmt(n,r),JC=Ymt(r),s.addEventListener("load",eS),s.addEventListener("error",JC)}catch(i){r(i);return}}),M0.catch(function(n){return M0=null,Promise.reject(n)}))},Zmt=function(t,n,r){if(t===null)return null;var s=t.apply(void 0,n);return Kmt(s,r),s},k0,z1e=!1,G1e=function(){return k0||(k0=Xmt(null).catch(function(t){return k0=null,Promise.reject(t)}),k0)};Promise.resolve().then(function(){return G1e()}).catch(function(e){z1e||console.warn(e)});var hdn=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];z1e=!0;var s=Date.now();return G1e().then(function(a){return Zmt(a,n,s)})};const gdn=pt({pro:{defaultMessage:"Enterprise Pro",id:"h/OVAC8xF3"},max:{defaultMessage:"Enterprise Max",id:"tfsuL8YexA"}}),Jmt=[ee({defaultMessage:"Unlimited access to Labs, Research, and Comet Max Assistant",id:"cxCDLl3cHO"}),ee({defaultMessage:"Org-wide access to premium security features like data retention settings and usage analytics",id:"YgWIReWPJc"}),ee({defaultMessage:"10x more file storage",id:"LgZECYLgEY"}),ee({defaultMessage:"Access to our full model suite including o3-pro and Opus 4.1 Thinking",id:"0qp226NKVJ"}),ee({defaultMessage:"Enhanced video generation",id:"y2H8HPGbes"}),ee({defaultMessage:"Early access to new product features",id:"nFcQ0Wipw7"})],q1e={pro:"pro",max:"max"},ydn=e=>Object.keys(q1e).includes(e),xdn=(e,t)=>{const n=Object.keys(q1e),r=n.indexOf(e),s=n.indexOf(t);return r<s},ept=["enterprise_pro","enterprise_max"],vdn=e=>ept.includes(e),tpt={enterprise_pro:"pro",enterprise_max:"max"},bdn=e=>tpt[e],npt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"comet-pro-country-allowlist",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},_dn=o.jsx(he,{defaultMessage:"Start for free, no credit card needed.",id:"uzjbT1FGfk"}),wdn=o.jsx(he,{defaultMessage:"Upgrade productivity and learning with additional access.",id:"PnQLpmbknU"}),Cdn=o.jsx(he,{defaultMessage:"Unlock the full capabilities of Perplexity at a discount after verifying educational status.",id:"8fdSFzTbg5"}),Sdn=o.jsx(he,{defaultMessage:"Unlock Perplexity's full capabilities with early access to new products.",id:"XvAk63xTH/"}),Edn=o.jsx(he,{defaultMessage:"Unlock the full capabilities of Perplexity for your team and enjoy new perks as they are added.",id:"fyHXg6ONTT"}),Mdn=[o.jsx(he,{defaultMessage:"Limited file uploads and image generation",id:"Yajq3Us4wf"},"ei4z2Aep9t"),o.jsx(he,{defaultMessage:"Limited access to Perplexity Research",id:"rxiI86annI"},"Q4n6qAgIjm"),o.jsx(he,{defaultMessage:"Limited access to advanced AI models",id:"Um2NQaGAN2"},"k+gSVpF51l"),o.jsx(he,{defaultMessage:"Access to voice mode",id:"yzxI9mX7Ne"},"yzxI9mX7Ne")],rpt=o.jsx(he,{defaultMessage:"Access to Comet, the agentic browser",id:"qcYjBb5TR5"},"qcYjBb5TR5"),tM=[o.jsx(he,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),o.jsx(he,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),o.jsx(he,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),o.jsx(he,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),o.jsx(he,{defaultMessage:"Extended access to image generation",id:"YLNO5T8j3R"},"YLNO5T8j3R"),o.jsx(he,{defaultMessage:"Limited access to video generation",id:"cuh0Xv/sI7"},"cuh0Xv/sI7"),o.jsx(he,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD")],spt=[tM[0],rpt,...tM.slice(1)],kdn=()=>{const{variation:e}=npt(!1);return f.useMemo(()=>e?spt:tM,[e])},Tdn=tM,K1e=[o.jsx(he,{defaultMessage:"Unlock free Pro",id:"ce/kjT07p9"},"unlock-free-pro"),o.jsx(he,{defaultMessage:"Access to Comet, the agentic browser",id:"qcYjBb5TR5"},"access-comet"),o.jsx(he,{defaultMessage:"Access to Study Mode for interactive flashcards and quizzes",id:"wvFgbv8SQM"},"study-mode"),o.jsx(he,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),o.jsx(he,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),o.jsx(he,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),o.jsx(he,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),o.jsx(he,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD"),o.jsx(he,{defaultMessage:"{credits} in API credits",id:"RDoR9eeHom",values:{credits:o.jsx(SP,{value:5,style:"currency",currency:"USD"})}},"RDoR9eeHom")],Ndn=()=>K1e,jdn=K1e,Adn=[o.jsx(he,{defaultMessage:"Everything in Pro",id:"EQO1QOs7ln"},"EQO1QOs7ln"),o.jsx(he,{defaultMessage:"Early access to Comet, the agentic browser",id:"itbmh6iTsp"},"ju0j9rjkOw"),o.jsx(he,{defaultMessage:"Unlimited access to Perplexity Labs",id:"Vc+NmvcKpa"},"8jDdpmfeqS"),o.jsx(he,{defaultMessage:"Unlimited access to Perplexity Research",id:"+tC8PdouYw"},"8jDdpmfeqS"),o.jsx(he,{defaultMessage:"Use advanced AI models like OpenAI o3-pro and Anthropic Claude Opus 4.1",id:"RrdqLnZKqo"},"RrdqLnZKqo"),o.jsx(he,{defaultMessage:"Enhanced access to video generation",id:"VSNs3zFEjy"},"VSNs3zFEjy"),o.jsx(he,{defaultMessage:"Priority support",id:"3sSrKzxPrc"},"3sSrKzxPrc")],Idn=[o.jsx(he,{defaultMessage:"Unlimited Pro searches",id:"isnJxc1XxM"},"UnlimitedProSearches"),o.jsx(he,{defaultMessage:"Unlimited uploads for files and images",id:"y5R/L7qsi/"},"UnlimitedUploads"),o.jsx(he,{defaultMessage:"Unlimited collaborators in Spaces",id:"EZFr73mN/d"},"UnlimitedCollaborators"),o.jsx(he,{defaultMessage:"Connect Google Drive, Sharepoint, Dropbox, OneDrive, and Box",id:"ALW0u9e/Ps"},"ConnectCloudServices"),o.jsx(he,{defaultMessage:"Powered by the latest top AI models",id:"ZSiV9iYVeG"},"LatestAIModels"),o.jsx(he,{defaultMessage:"Dedicated enterprise support",id:"6ojq3KOETz"},"DedicatedSupport"),o.jsx(he,{defaultMessage:"Integrate with your identity provider",id:"NEWodUzDlf"},"IdentityProvider"),o.jsx(he,{defaultMessage:"User permissioning",id:"oEuCJfg2fr"},"UserPermissioning"),o.jsx(he,{defaultMessage:"SOC 2 Type II security compliance",id:"j84mT5pXG7"},"SOC2TypeII")],Rdn=[o.jsx(he,{defaultMessage:"Everything in Enterprise Pro",id:"agavcX8Joo"},"EverythingInEnterprisePro"),...Jmt.map(e=>o.jsx(he,{...e},e.id))],Cee="USD",apt=({lineItems:e})=>{const{$t:t,formatNumber:n}=Z(),r=f.useMemo(()=>{const s=e;return[{title:ee({defaultMessage:"Payment method",id:"BVTni9A2ca"}),value:s.payment_method,separator:!0},{title:ee({defaultMessage:"Perplexity Max Subscription",id:"zmPIe7d+w+"}),value:s.new_product_price?Rh(s.new_product_price,n):""},{title:ee({defaultMessage:"Adjustment",id:"LaLTJRqloA"}),value:s.adjustment_price?Rh(s.adjustment_price,n):"",separator:!0},{title:ee({defaultMessage:"Subtotal",id:"L8seEcJFZ7"}),value:Rh(s.subtotal_price,n)},{title:ee({defaultMessage:"Taxes",id:"r+dgivP2Od"}),value:Rh(s.tax_price,n),separator:!0},{title:ee({defaultMessage:"Total due today",id:"MxAykvkF+r"}),value:Rh(s.total_due_today_price,n),color:"default",size:"small"}]},[e,n]);return o.jsx("ul",{className:"flex flex-col",children:r.map(s=>o.jsxs("li",{className:`flex items-center justify-between ${s.separator?"border-subtlest py-sm mb-sm border-b":"pb-sm"}`,children:[o.jsx(F,{variant:"tinyRegular",color:"light",children:t(s.title)}),o.jsx(F,{variant:s.size??"tinyRegular",color:s.color??"light",children:s.value})]},s.title.id))})};function Y1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Y1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ipt(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Y1e(e))&&(r&&(r+=" "),r+=t);return r}const See=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Eee=ipt,opt=(e,t)=>n=>{var r;if(t?.variants==null)return Eee(e,n?.class,n?.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(u=>{const d=n?.[u],m=a?.[u];if(d===null)return null;const p=See(d)||See(m);return s[u][p]}),l=n&&Object.entries(n).reduce((u,d)=>{let[m,p]=d;return p===void 0||(u[m]=p),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:m,className:p,...h}=d;return Object.entries(h).every(g=>{let[y,x]=g;return Array.isArray(x)?x.includes({...a,...l}[y]):{...a,...l}[y]===x})?[...u,m,p]:u},[]);return Eee(e,i,c,n?.class,n?.className)};function Mee({ref:e,className:t,children:n,...r}){return o.jsx("button",{...r,ref:e,className:V("reset interactable",t),children:n})}const lpt={tiny:"xs",small:"sm",default:"base",large:"lg"};function VA({icon:e,size:t}){return o.jsx(le,{icon:e,size:lpt[t]})}function cpt(e){const t=f.useRef(null),n=f.useMemo(()=>({getBoundingClientRect:()=>t.current?.getBoundingClientRect()??DOMRect.fromRect({}),addEventListener:(r,s,a)=>{t.current?.addEventListener(r,s,a)},removeEventListener:(r,s,a)=>{t.current?.removeEventListener(r,s,a)},contains:r=>t.current?.contains(r)??!1}),[]);return f.useImperativeHandle(e,()=>n,[n]),t}const kee=opt("flex select-none font-semimedium font-sans text-center items-center justify-center leading-loose",{variants:{variant:{primary:"bg-super text-inverse",secondary:"text-quiet border border-solid border-subtler bg-base",tonal:"bg-subtle text-foreground",text:"text-foreground"},size:{large:"h-14 text-lg",default:"h-10 text-base",small:"h-8 text-sm",tiny:"h-6 text-xs"},disabled:{false:"cursor-pointer origin-center",true:"cursor-default opacity-50"},fullWidth:{true:"flex w-full",false:""},rounded:{true:"rounded-full aspect-square p-0",false:""}},compoundVariants:[{variant:["text"],disabled:!1,class:"hover:bg-subtle"},{variant:["primary"],disabled:!1,class:"hover:opacity-80"},{variant:["secondary"],disabled:!1,class:"hover:border-subtle hover:bg-subtler"},{variant:["tonal"],disabled:!1,class:"hover:bg-subtle"},{rounded:!1,size:"large",class:"px-6 rounded-xl"},{rounded:!1,size:"default",class:"px-4 rounded-lg"},{rounded:!1,size:"small",class:"px-3 rounded-lg"},{rounded:!1,size:"tiny",class:"px-2 rounded-md"}],defaultVariants:{variant:"primary",size:"default",disabled:!1,fullWidth:!1,rounded:!1}});function nM({ref:e,children:t,icon:n,"aria-label":r,variant:s="primary",size:a="default",disabled:i=!1,fullWidth:l=!1,onClick:c,leadingIcon:u,trailingIcon:d,rounded:m=!1,__dangerousHtmlProps:p={},...h}){const g=cpt(e),y=lLe(h,["onFocus","onBlur","onPointerDown","onPointerLeave","onPointerMove","data-state"]);return n?o.jsx(Mee,{ref:g,...y,disabled:i,className:kee({variant:s,size:a,disabled:i,fullWidth:!1,rounded:m}),onClick:c,"aria-label":r,...p,children:o.jsx(VA,{icon:n,size:a})}):o.jsxs(Mee,{ref:g,...y,disabled:i,className:kee({variant:s,size:a,disabled:i,fullWidth:l}),onClick:c,"aria-label":r,...p,children:[u&&o.jsx("div",{className:"mr-1",children:o.jsx(VA,{icon:u,size:a})}),o.jsx("span",{className:V({"pl-1":u,"pr-1":d}),children:t}),d&&o.jsx("div",{className:"ml-1",children:o.jsx(VA,{icon:d,size:a})})]})}const upt=({reason:e})=>{const t=async()=>Jrt({reason:e}),{data:n,isLoading:r}=We({queryKey:["get_user_previous_subscription"],queryFn:t});return f.useMemo(()=>({previousSubscriptionStatus:n?.previous_subscription_status??"none",previousSubscriptionSource:n?.previous_subscription_source??"none",isLoading:r}),[n?.previous_subscription_source,n?.previous_subscription_status,r])},dpt=({variant:e="secondary",fullWidth:t=!1,subscriptionSource:n})=>{const{$t:r}=Z(),s=n==="softbank",a=[{type:"default",text:r({defaultMessage:"SoftBank",id:"mz906WB9pc"}),href:"https://stn.mb.softbank.jp/G4H51",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/G4H51","_blank")}},{type:"default",text:r({defaultMessage:"Y!mobile",id:"waO5BNtbEl"}),href:"https://stn.mb.softbank.jp/h6C4p",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/h6C4p","_blank")}},{type:"default",text:r({defaultMessage:"LINEMO",id:"5EeaeTgd/I"}),href:"https://stn.mb.softbank.jp/22m5K",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/22m5K","_blank")}}];return o.jsx("div",{className:"flex items-center gap-2",children:s?o.jsx(sn,{items:a,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(nM,{size:"small",variant:e,fullWidth:t,trailingIcon:Bn,children:o.jsx(he,{defaultMessage:"Manage carrier billing",id:"qt9JnrA7Lf"})})}):o.jsx(nM,{size:"small",variant:e,fullWidth:t,onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/b6O6d","_blank")},trailingIcon:xa,children:o.jsx(he,{defaultMessage:"Set up carrier billing",id:"KvLeD+r7rf"})})})},fpt="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",mpt="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",ppt="https://perplexity.sng.link/A6awk/pxdx?_ios_dl=home&_android_dl=singular-perplexity%3A%2F%2Fhome&_smtype=3";function hpt(e){switch(e){case"ios":return"https://www.apple.com/app-store/";case"android":return"https://play.google.com/store";default:Kt(e)}}const Q1e=({text:e,hasPreviousSub:t=!1,origin:n,variant:r="tonal",fullWidth:s=!1})=>{const a="sub-modal-button",{$t:i,locale:l}=Z(),c=_t(),{hasAccessToProFeatures:u,subscriptionSource:d}=Et(),{revenuecatStatus:m,stripeStatus:p}=Sa({reason:a}),{previousSubscriptionSource:h}=upt({reason:a}),{env:{isProduction:g,isBeta:y}}=Lt(),{session:x}=Nt(),v=co(),{openModal:b}=wt(),_=f.useCallback(async()=>{if(d==="incentive"){b("incentiveProModal",{origin:n});return}const S=d==="ios"||d==="android",E=h==="ios"||h==="android";if(S||E){E&&h!==d?c.push(hpt(h)):c.push(ppt);return}if(d==="braintree"){n===De.UPGRADE_MODAL?c.push("/max/payment"):b("braintreeSubscriptionModal",{origin:n});return}const k=await vV({locale:l,reason:"sub-modal-button"});k?c.push(k):c.push(g||y?mpt:fpt)},[d,h,c,g,y,l,b,n]),w=u||p==="past_due"||t===!0,C=f.useMemo(()=>d==="ios"?i({defaultMessage:"Manage in App Store",id:"3iCRcP8mV0"}):d==="android"?i({defaultMessage:"Manage in Google Play",id:"tiFovnryYO"}):d==="braintree"?n===De.UPGRADE_MODAL?i({defaultMessage:"Continue to payment",id:"+g+0OKqjZc"}):i({defaultMessage:"Manage subscription",id:"Oj9Phcvy9M"}):t?i({defaultMessage:"Manage plan",id:"88XpVMnmFe"}):m!=="none"||["ios","android"].includes(h)?i({defaultMessage:"Mobile subscription",id:"EttF2eTvlk"}):i(d==="softbank"?{defaultMessage:"SoftBank, Y!mobile, and LINEMO Customers",id:"i1WJntbsih"}:{defaultMessage:"Manage",id:"0AzlrbMWV9"}),[d,t,m,h,i,n]);return o.jsx("div",{children:w?d==="softbank"?o.jsx(dpt,{fullWidth:s,variant:r,subscriptionSource:d}):o.jsx(nM,{fullWidth:s,size:"small",onClick:_,variant:r,trailingIcon:xa,children:C}):o.jsx(nM,{size:"small",onClick:()=>{x?v({origin:n}):b("loginModal",{origin:De.TRY_PRO,pitchMessage:{title:i({defaultMessage:"Sign in to unlock {pro}",id:"HsM7RilrD6"},{pro:"Pro"})}})},variant:r,leadingIcon:xa,children:e??o.jsx(he,{defaultMessage:"Learn more",id:"TdTXXf940t"})})})},gpt="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",ypt="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",xpt=()=>{const e=_t(),{env:{isProduction:t,isBeta:n}}=Lt(),r=f.useCallback(async({locale:s,reason:a})=>{const i=await vV({locale:s,reason:a});i?e.push(i):e.push(t||n?ypt:gpt)},[e,t,n]);return f.useMemo(()=>({navigateToCustomerPortal:r}),[r])};var La;(function(e){e.UNSUPPORTED="unsupported",e.MISSING_PAYMENT_METHOD="missingPaymentMethod",e.PAYMENT_FAILED="paymentFailed",e.ANDROID="android",e.IOS="ios",e.UPGRADE_TO_CONTINUE="upgradeToContinue",e.GENERIC_PAYMENT_ERROR="genericPaymentError"})(La||(La={}));function vpt({subscriptionSource:e,isMissingPaymentMethod:t,paymentFailed:n,upgradeError:r}){return e==="android"?La.ANDROID:e==="ios"?La.IOS:t?La.MISSING_PAYMENT_METHOD:n?La.PAYMENT_FAILED:r?La.GENERIC_PAYMENT_ERROR:La.UPGRADE_TO_CONTINUE}function bpt(e){switch(e){case La.UNSUPPORTED:return ee({defaultMessage:"Max subscriptions are not supported by carrier billing.",id:"Ux4ivT++jB"});case La.MISSING_PAYMENT_METHOD:return ee({defaultMessage:"Please add a payment method to upgrade to Max.",id:"W6HVT1BPC8"});case La.PAYMENT_FAILED:return ee({defaultMessage:"Payment failed. Please update payment to continue.",id:"b0rdlbJ3AI"});case La.ANDROID:return ee({defaultMessage:"You subscribed on the Google Play Store. Upgrade your subscription via settings on the Android app.",id:"97MQ1Swe7/"});case La.IOS:return ee({defaultMessage:"You subscribed on the App Store. Upgrade your subscription via settings on the iOS app.",id:"JGkQSWrZEy"});case La.UPGRADE_TO_CONTINUE:return ee({defaultMessage:"You will be charged now and immediately get access to Max.",id:"9x1isMahOJ"});case La.GENERIC_PAYMENT_ERROR:return ee({defaultMessage:"Something went wrong. Please continue to Stripe and complete your payment.",id:"xdKfV2F++4"});default:Kt(e)}}const Tee=e=>{if(e){if(e instanceof Ie&&"details"in e){const t=e.details;if(t?.errorDetail&&typeof t.errorDetail=="object"&&"error_code"in t.errorDetail)return t.errorDetail.error_code}return e.message}},Nee=6,_pt=()=>o.jsx("ul",{className:"flex flex-col",children:Array.from({length:Nee}).map((e,t)=>{const n=t%2===0;return o.jsx("li",{className:V({"border-subtlest py-sm mb-sm border-b":n,"pb-sm":!n}),children:o.jsx(wn,{children:o.jsx(H,{variant:"subtler",className:V("h-4 w-full rounded",{"py-0.5":t===Nee-1})})})},t)})}),wpt=({isOpen:e,onClose:t})=>{const n=Z(),{session:r}=Nt(),s=r?.user?.subscription_source,a=s==="stripe",{data:i,isLoading:l,status:c,error:u}=y1e({reason:"upgrade-modal",enabled:a}),{data:d,isLoading:m}=e9({currency:Cee,reason:"upgrade-modal",subscriptionTier:"max"}),{data:p,isLoading:h}=e9({currency:Cee,reason:"upgrade-modal",subscriptionTier:"pro"}),{formatNumber:g,locale:y}=Z(),{update:x}=Nt(),{currentOpenModals:v}=wt(),{trackEvent:b}=je(),{navigateToCustomerPortal:_}=xpt(),w=f.useMemo(()=>d?.prices&&d.prices.find(B=>B.tier==="monthly")||null,[d]),C=f.useMemo(()=>p?.prices&&p.prices.find(B=>B.tier==="monthly")||null,[p]),S=f.useMemo(()=>c==="error"?Tee(u):null,[c,u]),E=f.useCallback(async()=>{await xB({reason:"upgrade-to-max-modal"}),await x(),t(),b("subscription upgrade success"),v.length>0&&t(),ny({upgrade_max:"success"})},[t,v,x,b]),M=v1e({reason:"upgrade-modal"},{onSuccess:E}),k=S==="missing_payment_method",N=S==="stripe_upgrade_payment_error";f.useEffect(()=>{e&&b("subscription upgrade modal rendered")},[e,b]);const P=vpt({subscriptionSource:s,isMissingPaymentMethod:k,paymentFailed:N,upgradeError:Tee(M?.error)}),L=f.useCallback(async()=>{await _({locale:y,reason:"upgrade-modal-add-payment"})},[_,y]),O=!!i?.payment_method,A=k||N||!!M.error,j=f.useMemo(()=>!a||M.isPending||!O||l||!!M.error,[a,M.isPending,O,l,M.error]),T=f.useCallback(async()=>{M.isPending||await M.mutateAsync()},[M]),I=f.useMemo(()=>k?o.jsx(he,{defaultMessage:"Add payment method",id:"+EIsonKmCI"}):M.error?o.jsx(he,{defaultMessage:"Continue to Stripe",id:"W2hJP+kQGf"}):o.jsx(he,{defaultMessage:"Update payment method",id:"iIM9E+ynde"}),[k,M.error]);return o.jsx(on,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:o.jsxs(H,{className:"p-ml",children:[o.jsx(F,{variant:"baseSemi",children:o.jsx(he,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),o.jsx(XE,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:c==="error"||!a?C:i?.old_product_price,formatNumber:g,billingInterval:c==="error"||!a?"monthly":i?.old_product_interval}),o.jsx(H,{children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[o.jsx("div",{className:"border-subtlest flex-1 border-t"}),o.jsx(he,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"}),o.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),o.jsx(XE,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:k||!a?w:i?.new_product_price,formatNumber:g,billingInterval:k||!a?"monthly":i?.new_product_interval,isHighlighted:!0,className:"mb-ml"}),l?o.jsx(_pt,{}):i&&o.jsx(apt,{lineItems:i}),o.jsxs(H,{variant:"subtler",className:"px-md py-sm mt-ml gap-sm flex flex-col rounded-md",children:[o.jsx(F,{variant:"small",color:"light",children:o.jsx(he,{...bpt(P)})}),!a&&o.jsx(Q1e,{origin:De.UPGRADE_MODAL,variant:"primary",fullWidth:!0}),A&&o.jsx(pe,{size:"small",fullWidth:!0,variant:"primary",text:I,onClick:L})]}),o.jsxs(H,{className:"gap-sm mt-ml flex justify-end",children:[o.jsx(Te,{text:n.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),o.jsx(pe,{variant:"primary",text:n.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),isLoading:M.isPending,disabled:j,onClick:T})]})]})})};var Cpt={};const fs=R.memo(()=>o.jsx("div",{className:"bg-backdrop/70 fixed inset-0 z-[999] flex items-center justify-center backdrop-blur-sm",children:o.jsx(Zr,{})}));fs.displayName="ModalLoader";const X1e=R.memo(()=>o.jsx("p",{children:"An error has occurred"}));X1e.displayName="ErrorFallback";const Spt=we(async()=>{const{LocationPermissionModal:e}=await Q(async()=>{const{LocationPermissionModal:t}=await Promise.resolve().then(()=>B$t);return{LocationPermissionModal:t}},void 0);return{default:e}},{loading:()=>o.jsx(fs,{})}),jee=we(async()=>{const{FileUploadModal:e}=await Q(async()=>{const{FileUploadModal:t}=await import("./FileUploadModal-BJrw3NQw.js");return{FileUploadModal:t}},__vite__mapDeps([9,3,1,4,10,11,5,6]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Ept=we(async()=>{const{CometDownloadInstructionsModal:e}=await Q(async()=>{const{CometDownloadInstructionsModal:t}=await import("./CometDownloadInstructionsModal-7VQky9O7.js");return{CometDownloadInstructionsModal:t}},__vite__mapDeps([12,3,1,4,5,6]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Aee=we(async()=>{const{CollectionCreateEditModal:e}=await Q(async()=>{const{CollectionCreateEditModal:t}=await import("./CollectionCreateEditModal-D4DdkbMy.js");return{CollectionCreateEditModal:t}},__vite__mapDeps([13,3,1,4,5,14,6]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Mpt=we(async()=>{const{CollectionSelectModal:e}=await Q(async()=>{const{CollectionSelectModal:t}=await import("./CollectionSelectModal-D3oQHGGV.js");return{CollectionSelectModal:t}},__vite__mapDeps([15,3,1,4,14,5,6]));return{default:e}},{loading:()=>o.jsx(fs,{})}),kpt=we(async()=>{const{OnboardingModal:e}=await Q(async()=>{const{OnboardingModal:t}=await import("./OnboardingModal-Dx5RO5Hb.js").then(n=>n.a);return{OnboardingModal:t}},__vite__mapDeps([16,3,1,4,6,5,17,18,19,20,21,22,23,24,25,26,27,28]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Tpt=we(async()=>{const{PurchaseConfirmationToast:e}=await Q(async()=>{const{PurchaseConfirmationToast:t}=await import("./PurchaseConfirmationToast-DVI1v-Tz.js");return{PurchaseConfirmationToast:t}},__vite__mapDeps([29,3,1,4,5,6,30]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Npt=we(async()=>{const{ThreadLossAversionModal:e}=await Q(async()=>{const{ThreadLossAversionModal:t}=await Promise.resolve().then(()=>_ht);return{ThreadLossAversionModal:t}},void 0);return{default:e}},{loading:()=>o.jsx(fs,{})}),jpt=we(async()=>{const{CompanyDataPrivacyModal:e}=await Q(async()=>{const{CompanyDataPrivacyModal:t}=await import("./CompanyDataPrivacyModal-cOA_jShT.js");return{CompanyDataPrivacyModal:t}},__vite__mapDeps([31,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Apt=we(async()=>{const{SpaceVideoModal:e}=await Q(async()=>{const{SpaceVideoModal:t}=await import("./SpaceVideoModal-BzEEMxii.js");return{SpaceVideoModal:t}},__vite__mapDeps([32,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Ipt=we(async()=>{const{PricingTableModal:e}=await Q(async()=>{const{PricingTableModal:t}=await import("./PricingTableModal-CLETVjtX.js");return{PricingTableModal:t}},__vite__mapDeps([33,3,1,6,34,4,18,19,5,25]));return{default:e}}),Rpt=we(async()=>{const{MapModal:e}=await Q(async()=>{const{MapModal:t}=await import("./MapModal-C4qPnSeD.js");return{MapModal:t}},__vite__mapDeps([35,3,1,36,6,4,5,37]));return{default:e}}),Ppt=we(()=>Q(()=>import("./InputPaymentModal-B_u-G045.js"),__vite__mapDeps([38,3,1,6,39,4,5]))),Opt=we(()=>Q(()=>import("./ShoppingPaymentModal-H05y35SS.js").then(e=>e.b),__vite__mapDeps([40,3,1,4,41,39,42,5,43,44,6,45,46,47,48,49,30])),{loading:()=>o.jsx(fs,{})}),Lpt=we(async()=>{const{ShoppingOnboardingModal:e}=await Q(async()=>{const{ShoppingOnboardingModal:t}=await import("./ShoppingOnboardingModal-NoOh8ngf.js");return{ShoppingOnboardingModal:t}},__vite__mapDeps([50,3,1,4,49,5,40,41,39,42,43,44,6,45,46,47,48,30]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Dpt=we(async()=>{const{PurchaseDetailsModal:e}=await Q(async()=>{const{PurchaseDetailsModal:t}=await import("./PurchaseDetailsModal-BmaQCvj4.js");return{PurchaseDetailsModal:t}},__vite__mapDeps([51,3,1,4,49,5,52,6]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Fpt=we(async()=>{const{ReservationDetailsModal:e}=await Q(async()=>{const{ReservationDetailsModal:t}=await import("./ReservationDetailsModal-BX_BsHUT.js");return{ReservationDetailsModal:t}},__vite__mapDeps([53,3,1,4,54,55,5,6]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Upt=we(async()=>{const{SpaceSettingsModal:e}=await Q(async()=>{const{SpaceSettingsModal:t}=await import("./SpaceSettingsModal-BkRmno5o.js");return{SpaceSettingsModal:t}},__vite__mapDeps([56,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Bpt=we(async()=>{const{UsernameModal:e}=await Q(async()=>{const{UsernameModal:t}=await import("./UsernameModal-CSMdvjBB.js");return{UsernameModal:t}},__vite__mapDeps([57,3,1,4,6,5]));return{default:e}}),Vpt=we(async()=>{const{FullNameModal:e}=await Q(async()=>{const{FullNameModal:t}=await import("./FullNameModal-DaXvSq2V.js");return{FullNameModal:t}},__vite__mapDeps([58,3,1,4,6,5]));return{default:e}}),$pt=we(async()=>{const{KeyboardShortcutEditorModal:e}=await Q(async()=>{const{KeyboardShortcutEditorModal:t}=await import("./KeyboardShortcutEditorModal-BYNPXTTg.js");return{KeyboardShortcutEditorModal:t}},__vite__mapDeps([59,3,1,4,6,5]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Wpt=we(async()=>{const{VoiceToVoiceModal:e}=await Q(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-DbBF6pDF.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([60,3,1,61,4,6,5]));return{default:e}},{loading:()=>o.jsx(cV,{})}),Hpt=we(async()=>{const{SearchStepsAssetsModal:e}=await Q(async()=>{const{SearchStepsAssetsModal:t}=await import("./SearchStepsAssetsModal-BKJh7jk1.js");return{SearchStepsAssetsModal:t}},__vite__mapDeps([62,3,1,4,63,64,5,65,66,6]));return{default:e}}),zpt=we(async()=>{const{MemoryListModal:e}=await Q(async()=>{const{MemoryListModal:t}=await import("./MemoryListModal-H2ky0O5f.js");return{MemoryListModal:t}},__vite__mapDeps([67,3,1,4,68,5,6]));return{default:e}}),Gpt=we(async()=>{const{MemoryDetailModal:e}=await Q(async()=>{const{MemoryDetailModal:t}=await import("./MemoryDetailModal-B9yNwlcD.js");return{MemoryDetailModal:t}},__vite__mapDeps([69,3,1,4,6,5]));return{default:e}}),qpt=we(async()=>{const{HotelRoomDetailsModal:e}=await Q(async()=>{const{HotelRoomDetailsModal:t}=await import("./HotelRoomDetailsModal-Bi96LFup.js");return{HotelRoomDetailsModal:t}},__vite__mapDeps([70,3,1,4,71,72,6,5]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Kpt=we(async()=>{const{PaymentModal:e}=await Q(async()=>{const{PaymentModal:t}=await import("./PaymentModal-CgtGxs0m.js");return{PaymentModal:t}},__vite__mapDeps([73,3,1,4,19,6,5,44,39]));return{default:e}},{loading:()=>o.jsx(fs,{})}),Ypt=we(async()=>{const{FreeTrialModal:e}=await Q(async()=>{const{FreeTrialModal:t}=await import("./FreeTrialModal-DU3eG_vp.js");return{FreeTrialModal:t}},__vite__mapDeps([34,3,1,4,18,19,6,5]));return{default:e}}),Qpt=we(async()=>{const{ProReferralModal:e}=await Q(async()=>{const{ProReferralModal:t}=await import("./ProReferralModal-DQSY_wZi.js");return{ProReferralModal:t}},__vite__mapDeps([74,3,1,4,5,6]));return{default:e}}),Xpt=we(async()=>{const{MeetingDefaultsModal:e}=await Q(async()=>{const{MeetingDefaultsModal:t}=await import("./MeetingDefaultsModal-Cc3UfnfM.js");return{MeetingDefaultsModal:t}},__vite__mapDeps([75,3,1,4,5,6]));return{default:e}}),Zpt=we(async()=>{const{AvailabilityModal:e}=await Q(async()=>{const{AvailabilityModal:t}=await import("./AvailabilityModal-BngwaKxX.js");return{AvailabilityModal:t}},__vite__mapDeps([76,3,1,4,5,77,6]));return{default:e}}),Jpt=we(async()=>{const{ProMessageModal:e}=await Q(async()=>{const{ProMessageModal:t}=await import("./ProMessageModal-DMCq-6rs.js");return{ProMessageModal:t}},__vite__mapDeps([78,3,1,5,6,4]));return{default:e}}),eht=we(async()=>{const{MemorySearchHistoryIntroModal:e}=await Q(async()=>{const{MemorySearchHistoryIntroModal:t}=await import("./MemorySearchHistoryIntroModal--8_DHdwG.js");return{MemorySearchHistoryIntroModal:t}},__vite__mapDeps([79,3,1,4,6,5]));return{default:e}}),tht=we(async()=>Q(()=>import("./SubSuccessModal-DxK6BMN2.js"),__vite__mapDeps([80,3,1,4,81,5,6]))),nht=we(async()=>Q(()=>import("./ReferralErrorModal-CjYs_3LT.js"),__vite__mapDeps([82,3,1,4,6,5]))),rht=we(async()=>Q(()=>import("./ReferralSuccessModal-Df8PRfJT.js"),__vite__mapDeps([83,3,1,4,28,6,5]))),sht=we(async()=>Q(()=>import("./IncentiveProModal-DkoCISee.js"),__vite__mapDeps([84,3,1,4,6,5]))),aht=we(async()=>{const{StudentReferralsModal:e}=await Q(async()=>{const{StudentReferralsModal:t}=await import("./StudentReferralsModal-CBlZsqHv.js");return{StudentReferralsModal:t}},__vite__mapDeps([85,3,1,26,4,27,28,5,6]));return{default:e}}),iht=we(async()=>{const{SheerIDModal:e}=await Q(async()=>{const{SheerIDModal:t}=await import("./SheerIDModal-BG5Bbo7t.js");return{SheerIDModal:t}},__vite__mapDeps([86,3,1,4,6,5]));return{default:e}}),oht=we(async()=>Q(()=>import("./BraintreeSubscriptionModal-DzFKLtBl.js"),__vite__mapDeps([87,3,1,4,6,5]))),lht=we(async()=>{const{RestaurantBookingModal:e}=await Q(async()=>{const{RestaurantBookingModal:t}=await import("./RestaurantBookingModal-CarApcwY.js");return{RestaurantBookingModal:t}},__vite__mapDeps([88,3,1,4,24,6,5]));return{default:e}},{loading:()=>o.jsx(fs,{})}),cht=we(async()=>Q(()=>import("./SheerIdRedirectModal-DrxjGLXn.js"),__vite__mapDeps([89,3,1,4,6,5]))),uht=we(async()=>{const{EnterprisePremiumSecureUpgradeModal:e}=await Q(async()=>{const{EnterprisePremiumSecureUpgradeModal:t}=await import("./EnterprisePremiumSecureUpgradeModal-Dg94BWHw.js");return{EnterprisePremiumSecureUpgradeModal:t}},__vite__mapDeps([90,3,1,4,91,6,5]));return{default:e}}),dht=we(async()=>{const{ShortcutModal:e}=await Q(async()=>{const{ShortcutModal:t}=await import("./ShortcutModal-DQG4GUGf.js");return{ShortcutModal:t}},__vite__mapDeps([92,3,1,4,6,5]));return{default:e}}),fht=we(async()=>Q(()=>Promise.resolve().then(()=>OBt),void 0)),mht=we(async()=>{const{AutomationModal:e}=await Q(async()=>{const{AutomationModal:t}=await Promise.resolve().then(()=>jBt);return{AutomationModal:t}},void 0);return{default:e}}),pht=we(async()=>{const{FinanceAlertModal:e}=await Q(async()=>{const{FinanceAlertModal:t}=await Promise.resolve().then(()=>IBt);return{FinanceAlertModal:t}},void 0);return{default:e}}),hht=we(async()=>{const{PlatformOptionsModal:e}=await Q(async()=>{const{PlatformOptionsModal:t}=await import("./PlatformOptionsModal-Dfpx1cjm.js");return{PlatformOptionsModal:t}},__vite__mapDeps([93,1,3,6,5,4]));return{default:e}}),ght=we(async()=>{const{SharepointSiteModal:e}=await Q(async()=>{const{SharepointSiteModal:t}=await import("./SharepointSiteModal-CCNGGCh4.js");return{SharepointSiteModal:t}},__vite__mapDeps([94,3,1,4,6,5]));return{default:e}}),yht=we(async()=>{const{MCPServerModal:e}=await Q(async()=>{const{MCPServerModal:t}=await import("./MCPServerModal-BPssxBnV.js");return{MCPServerModal:t}},__vite__mapDeps([95,3,1,4,5,6]));return{default:e}}),xht=we(async()=>{const{MemberSetTierModal:e}=await Q(async()=>{const{MemberSetTierModal:t}=await import("./MemberSetTierModal-CICSVqVx.js");return{MemberSetTierModal:t}},__vite__mapDeps([96,3,1,4,81,5,6]));return{default:e}}),vht=we(async()=>{const{MCPServiceToolsModal:e}=await Q(async()=>{const{MCPServiceToolsModal:t}=await import("./MCPServiceToolsModal-C43SYfpE.js");return{MCPServiceToolsModal:t}},__vite__mapDeps([97,3,1,4,5,6]));return{default:e}});function bht(e){return e?{[e.modalName]:e.arg}:{}}const Z1e=R.memo(({})=>{const{currentOpenModals:e}=wt(),[t,n]=f.useState(e.length);f.useEffect(()=>{setTimeout(()=>{n(e.length)},100)},[e.length]);const r=t!=e.length;return e.map((s,a)=>o.jsx(J1e,{modal:s,canOutsideClickClose:!r&&a+1==e.length},a))});Z1e.displayName="Modals";const J1e=R.memo(({modal:e,canOutsideClickClose:t})=>{const n=f.useMemo(()=>({canOutsideClickClose:t}),[t]);return o.jsx(Lhe.Provider,{value:n,children:o.jsx(ebe,{modal:e})})});J1e.displayName="SingleModalWrapper";const ebe=R.memo(({modal:e})=>{const{closeModal:t}=wt(),{hasActiveSubscription:n}=Et(),r=e.modalName,{pricingModal:s,loginModal:a,installModal:i,cometDownloadInstructionsModal:l,requestAccessModal:c,collectionSelectModal:u,collectionCreateOrEdit:d,collectionCreateForThread:m,spaceCreate:p,spaceCreateForThread:h,spaceSettings:g,companyDataPrivacyModal:y,citationListModal:x,checkSourcesModal:v,mapModal:b,inputPaymentModal:_,shoppingPaymentModal:w,purchaseConfirmationModal:C,shoppingOnboardingModal:S,shoppingOrderDetailsModal:E,lossAversionModal:M,spaceVideoModal:k,uploadFilesModal:N,spaceUploadFilesModal:P,spaceContextModal:L,locationPermissionModal:O,watchlistModal:A,reservationDetailsModal:j,deleteMemoryModal:T,memoryDetailModal:I,hotelRoomDetailsModal:U,searchStepsAssetsModal:B,memoryListModal:D,proSubscriptionPaymentModal:W,proMessageModal:z,memorySearchHistoryModal:$,gmailFailedPermissionsModal:X,subSuccessModal:q,incentiveProModal:Y,restaurantBookingModal:G,sheerIdRedirectModal:J,enterprisePremiumSecureUpgradeModal:K,taskShortcutModal:te,financeAlertModal:re,scheduledTaskModal:se,automationModal:me,referralSuccessModal:oe,sharepointSiteModal:ge,avatarManagementModal:xe,shoppingTryOnOnboardingModal:ye,braintreeSubscriptionModal:_e,announcementImageModal:be,studentReferrals:Ne,sheerIdModal:Ee,meetingDefaultsModal:Re,availabilityModal:Ae,mcpServerModal:st,mcpServiceToolsModal:it,memberSetTierModal:Se,connectorsEnableModal:ue}=bht(e),{trackEvent:ke}=je();return o.jsxs(o.Fragment,{children:[r==="loginModal"&&a?.origin&&o.jsx(N0e,{pitchMessage:a?.pitchMessage,origin:a.origin,isOpen:r==="loginModal",experimentalImageDesign:a.experimentalImageDesign,sheetModalDesign:a.sheetModalDesign,closeModal:t,closeCallback:a?.closeCallback,overrideRedirectUrl:a?.overrideRedirectUrl,disallowedMethods:a?.disallowedMethods,loginButtonsStyle:a?.loginButtonsStyle,renderCloseButton:a?.renderCloseButton,preEnteredEmail:a?.preEnteredEmail,autoFocus:a?.autoFocus}),!Cpt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(_c,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:r==="installModal"&&i&&o.jsx(Yft,{isOpen:r==="installModal",onClose:()=>{t(),i.closeCallback?.()},origin:i.origin,sheetModalVariant:i.sheetModalVariant})}),r==="cometDownloadInstructionsModal"&&l&&l.requestedPlatform&&o.jsx(Ept,{isOpen:r==="cometDownloadInstructionsModal",onClose:t,requestedPlatform:l.requestedPlatform}),r==="pricingModal"&&s&&o.jsx(Ipt,{isOpen:r==="pricingModal",pitchMessage:s?.pitchMessage,closeModal:t,origin:s.origin,showFreeTier:s.showFreeTier}),r==="collectionSelectModal"&&u?.entryUUID&&o.jsx(Mpt,{isOpen:r==="collectionSelectModal",currentCollection:u.currentCollection,entryUUID:u.entryUUID,searchTerm:u.searchTerm,frontendContextUUID:u.frontendContextUUID,closeModal:t}),r==="collectionCreateOrEdit"&&o.jsx(Aee,{isOpen:r==="collectionCreateOrEdit",existingCollection:d?.existingCollection,frontendContextUUID:d?.frontendContextUUID,closeModal:t,onCreate:d?.onCreate}),r==="spaceCreate"&&o.jsx(n9,{isOpen:r==="spaceCreate",closeModal:t,existingCollection:p?.existingCollection,onCreate:p?.onCreate,content:p?.content}),r==="spaceCreateForThread"&&h?.entryUUID&&o.jsx(n9,{isOpen:r==="spaceCreateForThread",closeModal:t,existingCollection:p?.existingCollection,frontendContextUUID:h?.frontendContextUUID,entryUUID:h?.entryUUID,onCreate:h?.onCreate}),r==="spaceSettings"&&o.jsx(Upt,{isOpen:r==="spaceSettings",existingSpace:g?.existingSpace,closeModal:t}),r==="spaceVideoModal"&&k&&o.jsx(Apt,{isOpen:r==="spaceVideoModal",setIsOpen:t,type:k.type}),r==="uploadFilesModal"&&N&&o.jsx(jee,{...N,isOpen:r==="uploadFilesModal",closeModal:t}),r==="spaceUploadFilesModal"&&P&&o.jsx(jee,{...P,connectionTypes:iit(["LOCAL"]),isOpen:r==="spaceUploadFilesModal",closeModal:t}),r==="spaceContextModal"&&o.jsx(v0e,{isOpen:r==="spaceContextModal",closeModal:t,collectionSlug:L?.collectionSlug}),r==="requestAccessModal"&&c?.uuidOrSlug&&o.jsx(Vhe,{isOpen:r==="requestAccessModal",onClose:t,uuidOrSlug:c.uuidOrSlug}),r==="mapModal"&&o.jsx(Pr,{fallback:X1e,children:o.jsx(Rpt,{isOpen:r==="mapModal",closeModal:t,locations:b&&b.locations,header:b.header,entryUUID:b.entryUUID,searchByLocationOverride:b?.searchByLocationOverride})}),r==="collectionCreateForThread"&&m?.entryUUID&&o.jsx(Aee,{isOpen:r==="collectionCreateForThread",existingCollection:d?.existingCollection,frontendContextUUID:m?.frontendContextUUID,closeModal:t,entryUUID:m?.entryUUID}),r==="inputPaymentModal"&&_&&o.jsx(Ppt,{isOpen:r==="inputPaymentModal",closeModal:t,isUpdating:_.isUpdating}),r==="shoppingPaymentModal"&&w&&o.jsx(Opt,{isOpen:r==="shoppingPaymentModal",closeModal:t,product:w.product,onSuccess:w.onSuccess}),r==="companyDataPrivacyModal"&&o.jsx(jpt,{organizationName:y.organizationName,isOpen:r==="companyDataPrivacyModal",closeModal:t,onContinue:y.onContinue}),r==="citationListModal"&&x.webResults&&o.jsx(hV,{isOpen:r==="citationListModal",onClose:t,entry:x.entry,webResults:x.webResults,submit:x.submit}),r==="checkSourcesModal"&&v&&o.jsx(Mve,{isOpen:r==="checkSourcesModal",onClose:t,entryUUID:v.entryUUID,frontendContextUUID:v.frontendContextUUID,contextUUID:v.contextUUID,webResults:v.webResults,extendedBeforeContext:v.extendedBeforeContext,beforeContext:v.beforeContext,selectedText:v.selectedText,afterContext:v.afterContext,state:v?.state}),r==="keyboardShortcutEditorModal"&&o.jsx($pt,{isOpen:r==="keyboardShortcutEditorModal",closeModal:t}),r==="keyboardShortcutHelperModal"&&o.jsx(sxe,{isOpen:r==="keyboardShortcutHelperModal",closeModal:t}),r==="onboardingModal"&&o.jsx(kpt,{isOpen:r==="onboardingModal",closeModal:t}),r==="lossAversionModal"&&M&&o.jsx(Npt,{isOpen:r==="lossAversionModal",onClose:()=>{t(),M.callback?.()},origin:M.origin}),r==="shoppingOnboardingModal"&&S&&o.jsx(Lpt,{isOpen:r==="shoppingOnboardingModal",onClose:t,onContinue:S.onContinue}),r==="shoppingOrderDetailsModal"&&o.jsx(Dpt,{isOpen:r==="shoppingOrderDetailsModal",onClose:t,item:E?.item,userIntercomHash:E?.userIntercomHash}),r==="purchaseConfirmationModal"&&C&&o.jsx(Tpt,{isOpen:r==="purchaseConfirmationModal",onClose:t,order:C.order}),r==="watchlistModal"&&A&&o.jsx(gft,{isOpen:r==="watchlistModal",onClose:t,watchlistType:A.watchlistType,origin:A.origin}),r==="locationPermissionModal"&&O&&o.jsx(Spt,{isOpen:r==="locationPermissionModal",onClose:t,onPermissionGranted:O.onPermissionGranted??Pn,origin:O.origin}),r==="reservationDetailsModal"&&j&&o.jsx(Fpt,{isOpen:r==="reservationDetailsModal",onClose:t,reservation:j.reservation,userIntercomHash:j.userIntercomHash}),r==="usernameModal"&&o.jsx(Bpt,{isOpen:r==="usernameModal",onClose:t}),r==="userFullNameModal"&&o.jsx(Vpt,{isOpen:r==="userFullNameModal",onClose:t}),r==="deleteMemoryModal"&&o.jsx(Rdt,{isOpen:r==="deleteMemoryModal",onClose:t,memoryId:T?.memoryId,onDeleteSuccess:T?.onDeleteSuccess}),r==="deleteAllMemoriesModal"&&o.jsx(Idt,{isOpen:r==="deleteAllMemoriesModal",onClose:t}),r==="voiceToVoiceModal"&&o.jsx(Wpt,{isOpen:r==="voiceToVoiceModal",onClose:t}),r==="hotelRoomDetailsModal"&&U&&o.jsx(qpt,{isOpen:r==="hotelRoomDetailsModal",onClose:t,...U}),r==="searchStepsAssetsModal"&&B?.backendUUID&&o.jsx(Hpt,{isOpen:r==="searchStepsAssetsModal",closeModal:t,...B},`${B.backendUUID}-${B.assetUUID||"default"}`),r==="memoryListModal"&&o.jsx(zpt,{isOpen:r==="memoryListModal",onClose:t,isMemoryEnabled:D?.isMemoryEnabled??!1}),r==="memoryDetailModal"&&I&&o.jsx(Gpt,{isOpen:r==="memoryDetailModal",onClose:t,memoryKey:I.memoryKey,displayValue:I.displayValue}),r==="proSubscriptionPaymentModal"&&W&&o.jsx(Kpt,{isOpen:r==="proSubscriptionPaymentModal",onClose:t,...W}),r==="proReferralModal"&&o.jsx(Qpt,{isOpen:r==="proReferralModal",onClose:t}),r==="proMessageModal"&&z&&o.jsx(Jpt,{isOpen:r==="proMessageModal",onClose:t,...z}),r==="freeTrialModal"&&o.jsx(Ypt,{isOpen:r==="freeTrialModal",onClose:t}),r==="memorySearchHistoryModal"&&o.jsx($ve,{isOpen:r==="memorySearchHistoryModal",onClose:t,snippet:$?.snippet??"",type:$?.type??"memory",url:$?.url??"",memoryKey:$?.memoryKey,entryUuid:$?.entryUuid,title:$?.title,timestamp:$?.timestamp}),r==="memorySearchHistoryIntroModal"&&o.jsx(eht,{isOpen:r==="memorySearchHistoryIntroModal",onClose:t}),r==="gmailFailedPermissionsModal"&&X&&o.jsx(Adt,{isOpen:r==="gmailFailedPermissionsModal",onContinue:X.onContinue??Pn,onClose:t}),r==="subSuccessModal"&&q&&o.jsx(tht,{isOpen:r==="subSuccessModal",onClose:t,flowType:q.flowType,upgradeMax:q.upgradeMax,subscriptionTier:q.subscriptionTier,confirmationRedirectsToHomepage:q.confirmationRedirectsToHomepage}),r==="referralErrorModal"&&o.jsx(nht,{isOpen:r==="referralErrorModal",onClose:t}),r==="referralSuccessModal"&&oe&&o.jsx(rht,{isOpen:r==="referralSuccessModal",onClose:t,monthsAwarded:oe.monthsAwarded}),r==="incentiveProModal"&&o.jsx(sht,{isOpen:r==="incentiveProModal",onClose:t,...Y}),r==="braintreeSubscriptionModal"&&_e&&o.jsx(oht,{isOpen:r==="braintreeSubscriptionModal",onClose:t,origin:_e.origin}),r==="sheerIdRedirectModal"&&J&&o.jsx(cht,{isOpen:r==="sheerIdRedirectModal",onContinue:()=>{t(),ml(J.sheerIdUrl,"sheerIdRedirectModal")},onCancel:t}),r==="upgradeModal"&&o.jsx(wpt,{isOpen:r==="upgradeModal",onClose:t}),r==="downgradeModal"&&o.jsx(nmt,{isOpen:r==="downgradeModal",onClose:t}),r==="restaurantBookingModal"&&G&&o.jsx(lht,{isOpen:r==="restaurantBookingModal",onClose:t,...G}),r==="bugReportModal"&&o.jsx(Knt,{isOpen:r==="bugReportModal",onClose:t}),r==="enterprisePremiumSecureUpgradeModal"&&o.jsx(uht,{isOpen:r==="enterprisePremiumSecureUpgradeModal",onClose:t,onUpgradeSuccess:K?.onUpgradeSuccess}),r==="taskShortcutModal"&&te&&o.jsx(dht,{open:r==="taskShortcutModal",onClose:()=>{t(),te.onClose?.()},onCreated:te.onCreated,source:te.source,shortcut:te.shortcut}),r==="financeAlertModal"&&re&&o.jsx(pht,{isOpen:r==="financeAlertModal",onClose:()=>{t(),re.onClose?.()},symbol:re.symbol,task:re.task}),r==="scheduledTaskModal"&&se&&o.jsx(bc,{children:o.jsx(fht,{open:r==="scheduledTaskModal",onClose:()=>{t(),se.onClose?.()},onSuccess:se.onSuccess,source:se.source,initial:se.initial,prefill:se.prefill})}),r==="automationModal"&&me&&o.jsx(bc,{children:o.jsx(mht,{open:r==="automationModal",onClose:()=>{t(),me.onClose?.()},source:me.source,initialConfiguration:me.initial?hge({selectedTask:me.initial}):me.prefill?pge(me.prefill):me.initialConfiguration||L3(n),onSave:et=>{me.onSuccess?.(et),t(),me.onClose?.()},errorMessage:me.errorMessage,trackEvent:ke})}),r==="platformOptionsModal"&&o.jsx(hht,{isOpen:r==="platformOptionsModal",onClose:t}),r==="sharepointSiteModal"&&ge&&o.jsx(ght,{isOpen:r==="sharepointSiteModal",onClose:t,onSelectSite:ge.onSelectSite}),r==="avatarManagementModal"&&xe&&o.jsx(wft,{isOpen:r==="avatarManagementModal",onClose:t,config:xe??{source:"settings"}}),r==="shoppingTryOnOnboardingModal"&&o.jsx(bve,{isOpen:r==="shoppingTryOnOnboardingModal",onClose:ye?.onClose||t,onSuccessfulOnboarding:ye?.onSuccessfulOnboarding||(()=>{})}),r==="announcementImageModal"&&be&&o.jsx(Kct,{onClose:t,announcementImageModal:be}),r==="studentReferrals"&&o.jsx(aht,{isOpen:r==="studentReferrals",verificationId:Ne?.verificationId}),r==="sheerIdModal"&&o.jsx(iht,{isOpen:r==="sheerIdModal",onClose:()=>{Ee?.onClose?.(),t()},onVerificationSuccess:et=>{Ee?.onSuccess?.(et),t()},type:Ee?.type||"student"}),r==="meetingDefaultsModal"&&o.jsx(Xpt,{currentDuration:Re?.currentDuration,currentBuffer:Re?.currentBuffer,onSave:Re?.onSave}),r==="availabilityModal"&&o.jsx(Zpt,{currentAvailability:Ae?.currentAvailability,onSave:Ae?.onSave}),r==="mcpServerModal"&&st&&o.jsx(yht,{isOpen:r==="mcpServerModal",onClose:t,server:st.server,onSave:st.onSave,onDelete:st.onDelete}),r==="mcpServiceToolsModal"&&it&&o.jsx(vht,{isOpen:r==="mcpServiceToolsModal",onClose:t,server:it.server,onEditServer:it.onEditServer,onToggleToolEnabled:it.onToggleToolEnabled}),r==="memberSetTierModal"&&Se&&o.jsx(xht,{isOpen:r==="memberSetTierModal",...Se,onClose:()=>{t(),Se.onClose?.()}}),r==="connectorsEnableModal"&&ue&&o.jsx(jdt,{connectorName:ue.connectorName,connectorAvatar:ue.connectorAvatar,showModal:r==="connectorsEnableModal",setShowModal:()=>t(),handleEnable:ue.handleEnable})]})});ebe.displayName="SingleModal";const tbe=R.memo(e=>{const{$t:t}=Z(),n=f.useMemo(()=>l5(window.location.href,Ic,De.LOSS_AVERSION_MODAL),[]),{trackEvent:r}=je(),[s,a]=f.useState(!1);return f.useEffect(()=>{r("loss aversion modal opened",{origin:e.origin})},[r,e.origin]),o.jsx(on,{title:t(s?{defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}:{defaultMessage:"Lose your answer?",id:"BxKmht5dD3"}),actionList:s?void 0:[{text:t({defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}),onClick:()=>{a(!0)},variant:"primary"}],...e,children:o.jsx("div",{className:"grid grid-cols-1 grid-rows-1",children:o.jsx(na,{initial:!1,mode:"popLayout",transition:{type:"spring",duration:.2},children:s?o.jsx(is,{transition:{ease:va,duration:.1,delay:.1},children:o.jsxs(ve.div,{className:"relative col-start-1 row-start-1",children:[o.jsx(F,{className:"mb-md",textCenter:!0,children:o.jsx(he,{defaultMessage:"Log in to save this answer",id:"Ngtk6vEw7T"})}),o.jsx(ab,{redirectUrl:n,showCloseButton:!1})]})},"login"):o.jsx(is,{transition:{ease:va,duration:.1},children:o.jsx(ve.div,{className:"col-start-1 row-start-1",children:o.jsx(F,{children:t({defaultMessage:"To save this answer, sign up or log in.",id:"9Ha7YBI+Yh"})})})},"initial")})})})});tbe.displayName="ThreadLossAversionModal";const MV=()=>{const e=f.useCallback(r=>{Oet(r)},[]),t=Fn(I8),n=f.useCallback(()=>Pm(I8),[]);return f.useMemo(()=>({lossAversionStatus:t,setLossAversionStatus:e,unsetLossAversion:n}),[t,e,n])},vx=()=>{const{lossAversionStatus:e,setLossAversionStatus:t}=MV(),n=Ft(),r=lt(),s=f.useMemo(()=>!r&&e==="allowed"&&n?.startsWith("/search"),[r,e,n]),{openModal:a}=wt(),i=f.useCallback(({args:l,openModalOverride:c})=>{c?c("lossAversionModal",l):a("lossAversionModal",l),t("cooldown")},[a,t]);return f.useMemo(()=>({shouldShowLossAversionModal:s,handleOpenLossAversion:i}),[s,i])},_ht=Object.freeze(Object.defineProperty({__proto__:null,ThreadLossAversionModal:tbe,useLossAversion:vx,useLossAversionStorage:MV},Symbol.toStringTag,{value:"Module"})),nbe=Yt("ModalStateContext",{currentOpenModals:[],currentOpenedModal:null,openModal:()=>{},openStackedModal:()=>{},updateModal:()=>{},closeModal:()=>{}}),wht=({children:e})=>{const[t,n]=f.useState([]),r=f.useMemo(()=>t.at(-1)?.modalName??null,[t]),{trackEvent:s}=je(),{device:{isMacOS:a,isWindowsApp:i}}=Lt(),{shouldShowLossAversionModal:l,handleOpenLossAversion:c}=vx(),u=_t(),d=f.useCallback((x,v)=>{n(()=>[{modalName:x,arg:v}])},[]),m=f.useCallback((x,v)=>{n(b=>[...b,{modalName:x,arg:v}])},[]),p=f.useCallback((x,v)=>{n(b=>{const _=b.findLastIndex(w=>w.modalName==x);if(_!=-1){const w=b.slice();return w[_]={modalName:x,arg:v},w}else return b})},[]),h=f.useCallback(()=>{n(x=>x.slice(0,x.length-1))},[]),g=f.useMemo(()=>({currentOpenModals:t,currentOpenedModal:r,openModal:d,openStackedModal:m,updateModal:p,closeModal:h}),[t,d,m,p,h,r]),y=f.useCallback(x=>{if(a?x.metaKey&&x.key==="k":x.ctrlKey&&x.key==="i")x.preventDefault(),l?c({args:{origin:De.NEW_THREAD_SHORTCUT,callback:()=>{s("quick ask keyboard shortcut",{}),u.push("/",void 0,"Quick ask keyboard shortcut (loss aversion)")}},openModalOverride:d}):(s("quick ask keyboard shortcut",{}),u.push("/",void 0,"Quick ask keyboard shortcut"));else if(a?x.metaKey&&x.key==="/":x.ctrlKey&&x.key==="/")x.preventDefault(),d(i?"keyboardShortcutEditorModal":"keyboardShortcutHelperModal",null);else if(i&&x.ctrlKey&&x.key==="d"){x.preventDefault();const v=new CustomEvent("toggleDictation");document.dispatchEvent(v)}},[a,i,l,c,d,s,u]);return f.useEffect(()=>(document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}),[y]),o.jsxs(nbe.Provider,{value:g,children:[e,o.jsx(Z1e,{})]})},wt=()=>{const e=f.useContext(nbe);if(!e)throw new Error("useModalState must be used within ModalContext");return e};function rbe({}){const t=Ft(),n=eV(t),{isMobileUserAgent:r}=Ce();return!r&&!n&&!1}const Wf=e=>`milestone-progress-dismissed-${e}`,Iee="milestone-success-modal-dismissed",Cht=({reason:e})=>{const[t,n]=f.useState(!1),r=xt(),{keysRequiringRerender:s,removeKeyRequiringRerender:a}=yf(),i=rbe({}),{trackEvent:l,trackEventOnce:c}=je(),{locale:u,$t:d}=Z(),{hasAccessToProFeatures:m}=Et(),{update:p}=Nt(),{openModal:h}=wt(),{data:g}=We({queryKey:["milestone-progress"],queryFn:()=>f1e({locale:u,reason:e}),enabled:i});f.useEffect(()=>{if(g?.progress_display?.length&&g.progress_display.every(Boolean)&&!m){if(Oe.getItem(Iee))return;h("proMessageModal",{origin:De.MILESTONE_ACHIEVED,title:g?.promotion_display.success_modal,buttonText:d({defaultMessage:"Get Started",id:"9QXm1EW9qz"})}),Oe.setItem(Iee,"true"),setTimeout(()=>{p()},1e3)}},[g?.progress_display,g?.promotion_display.success_modal,m,h,p,d]),f.useEffect(()=>{},[s,r,a,i]),f.useEffect(()=>{Xs.getItem(Wf("session"))||Oe.getItem(Wf("lifetime"))||g&&!g.is_eligible&&g.has_incentive},[g,i,c]),f.useEffect(()=>{const x=g?.progress_display.filter(v=>v).length;x&&x>1&&!g.has_incentive&&(Xs.removeItem(Wf("session")),Oe.removeItem(Wf("lifetime")))},[g]);const y=f.useCallback(()=>{if(!g)return;l("milestone progress widget dismissed",{progressCount:g?.progress_display.filter(Boolean).length,requiredCount:g?.progress_display.length,hasIncentive:g?.has_incentive}),n(!1),Xs.setItem(Wf("session"),"true");const x=g?.progress_display.filter(v=>v).length;x&&x<=1&&Oe.setItem(Wf("lifetime"),"true"),g?.has_incentive&&Oe.setItem(Wf("lifetime"),"true")},[g,l]);return f.useMemo(()=>({show:t,handleClose:y,data:g}),[g,y,t])},Sht=R.memo(()=>{const e="floating-milestone-progress",t=Z(),{show:n,handleClose:r,data:s}=Cht({reason:e}),{title:a,description:i}=f.useMemo(()=>s?s.has_incentive?{title:s.promotion_display.title_complete,description:s.promotion_display.description_complete}:s.progress_display.includes(!0)?{title:s.promotion_display.title_progress,description:s.promotion_display.description_progress}:{title:s.promotion_display.title_start,description:s.promotion_display.description_start}:{title:"",description:""},[s]);return!n||!s||!s?.is_eligible?null:o.jsx(H,{variant:"background",className:"animate-in fade-in fixed bottom-[20px] right-[20px] w-[216px] overflow-hidden rounded-xl duration-300 ease-out",children:o.jsxs(H,{variant:"subtler",className:"p-sm border-subtlest inset-0 rounded-xl border",children:[o.jsx("img",{src:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",alt:t.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),className:"bg-subtle size-full rounded-lg object-cover",style:{aspectRatio:"600/350"}}),o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:It,extraCSS:"text-light md:hover:text-quiet ",onClick:r})}),o.jsxs("div",{className:"p-xs mt-sm",children:[o.jsx(F,{variant:"baseSemi",children:a}),o.jsx(F,{variant:"small",color:"light",className:"mt-xs",children:i}),o.jsx("div",{className:"mt-sm flex flex-row justify-between",children:s.progress_display.map((l,c)=>o.jsx("div",{className:"gap-xs py-xs flex flex-col items-center",children:l?o.jsx(F,{color:"super",children:o.jsx(le,{size:"lg",icon:ZLe})}):o.jsxs(F,{className:"relative opacity-30",children:[o.jsx(le,{size:"lg",icon:JLe}),o.jsx(F,{variant:"tinyMono",color:"defaultInverted",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:c+1})]})},c))})]})]})})});Sht.displayName="FloatingMilestoneProgress";const Ree=e=>`https://plex.it/referrals/${e}`,Pdn=({referralLink:e})=>{const{$t:t}=Z(),[n,r]=f.useState(!1),{trackEvent:s}=je(),a=f.useCallback(()=>{e&&(navigator.clipboard.writeText(e),s("referral link copied",{referralLink:e}),r(!0),setTimeout(()=>{r(!1)},2e3))},[e,s]),i=f.useCallback(()=>{e&&(navigator.share({url:e,text:t({defaultMessage:"I'm using Perplexity for smarter, faster answers. Sign up using my link and we'll both get 1 month of Pro.",id:"G7gaSddnv5"})}),s("referral link copied",{referralLink:e}))},[t,e,s]);return f.useMemo(()=>({isCopied:n,handleCopyLink:a,handleNativeShare:i,copyButtonProps:{text:t(n?{defaultMessage:"Copied",id:"p556q3uvbn"}:{defaultMessage:"Copy link",id:"lbr3Lq2Lnm"}),icon:n?Ar:xp,onClick:a}}),[n,a,i,t])},Odn="/static/images/referrals-landing-wide.jpeg",Eht=(e,t)=>{const{$t:n}=e,r=t?n({defaultMessage:"Get rewards like hoodies, laptops, and more.",id:"sDFaYf+nrK"}):"";return n({defaultMessage:"Earn 1 month of Pro for each friend you refer. {prizeText}",id:"vWjWyq4Feg"},{prizeText:r})},Mht=e=>{if(!e)return!1;const t=e.indexOf("@"),n=e.lastIndexOf(".");return e.includes("@")&&e.includes(".")&&t<n&&t>0},kht=({reason:e})=>{const{session:t}=Nt(),n=t?.user?.email??"",{isStudent:r}=c5({email:n??"",reason:e}),{value:s,loading:a}=$r({flag:"spring-2025-referrals-promo",defaultValue:!0});return{isSpringReferralPromoEnabled:!a&&s,isStudent:r}},Tht=()=>{const{value:e}=$r({flag:"student-referral-prizes",defaultValue:!1});return e},sbe=({reason:e})=>{const t=_n(),n=Ds(),r=Ft(),{isSpringReferralPromoEnabled:s,isStudent:a}=kht({reason:e});return!!(!t.isStudentReferralBannerDismissed&&n&&r==="/"&&s&&a)},abe=R.memo(()=>{const e="floating-referral-invite",t=_n(),n=Z(),[r,s]=f.useState(!1),{referralCode:a}=Sa({reason:e}),i=sbe({reason:e}),{trackEvent:l,trackEventOnce:c}=je(),u=Tht();f.useEffect(()=>{c("referral widget shown",{})},[c]),f.useEffect(()=>{let p;return r&&(l("referral link copied",{referralLink:Ree(a)}),p=setTimeout(()=>{s(!1)},2e3)),()=>{clearTimeout(p)}},[r,a,l]);const d=f.useCallback(()=>{t.actions.setIsStudentReferralBannerDismissed(!0),l("referral widget dismissed",{})},[t.actions,l]),m=f.useCallback(()=>{navigator.clipboard.writeText(Ree(a)),s(!0)},[a]);return a?o.jsx(ipe,{shouldShow:!!i,imageSrc:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",imageAlt:n.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),title:n.formatMessage({id:"7vIfWIoBX6",defaultMessage:"Get up to 24 months of free Pro"}),description:Eht(n,u),primaryAction:o.jsxs("div",{className:"gap-xs flex flex-row",children:[o.jsx(pe,{variant:"common",text:n.formatMessage({id:"TdTXXf940t",defaultMessage:"Learn more"}),href:"/referrals",size:"small"}),o.jsx(pe,{variant:"primaryGhost",icon:r?Hue:xp,text:r?"Copied":"Copy your link",onClick:m,size:"small"})]}),onDismiss:d,iconXDismiss:!0}):null});abe.displayName="FloatingReferralInvite";const ibe=R.memo(({closeCookieConsentPopup:e})=>{const{$t:t}=Z(),{locale:n}=Z(),r=f.useCallback(()=>{rn(w1,"true",{expires:365}),window.dispatchEvent(new CustomEvent("consentChange",{detail:{consent:"ALLOW"}})),e()},[e]),s=f.useCallback(()=>{rn(w1,"false",{expires:365}),e()},[e]);return o.jsx(hU,{modal:!1,open:!0,children:o.jsxs(gU,{children:[o.jsxs(LF,{children:[o.jsx(R3,{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})}),o.jsx(yU,{children:o.jsx(he,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our privacy policy.',id:"VCSjJ9FhMu"})})]}),o.jsx(I3,{children:o.jsxs(H,{id:"cookie-consent",variant:"background",className:"bottom-sm inset-x-sm p-md fixed max-w-md rounded-lg border shadow-sm md:left-auto",children:[o.jsxs(F,{variant:"baseSemi",className:"gap-x-sm flex items-center",children:[o.jsx(le,{icon:e7e,size:"md"}),o.jsx("span",{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})})]}),o.jsx(F,{variant:"small",color:"light",className:"mb-4 text-sm",children:o.jsx(he,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our <link>privacy policy</link>.',id:"ADl1M4/ost",values:{link:a=>o.jsx(Ye,{href:Rv[n]?.privacyPolicy||Rv.default.privacyPolicy,className:"underline hover:no-underline",target:"_blank",children:a})}})}),o.jsxs(H,{className:"gap-x-sm flex items-center",children:[o.jsx(pe,{size:"small",variant:"primary",onClick:s,text:t({defaultMessage:"Necessary Cookies",id:"Wzr9ADvGqD"})}),o.jsx(pe,{size:"small",onClick:r,text:t({defaultMessage:"Accept All Cookies",id:"JyT5uF/dGC"})})]})]})})]})})});ibe.displayName="CookieConsentPopup";function Nht({reason:e}){const{organization:t}=kn({reason:e}),n=t?.uuid??"",r=Ft(),{value:s}=Dt({flag:"helper-disabled",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}}),a=r?.startsWith("/apps/"),i=r?.startsWith("/b/zen"),l=r?.startsWith("/b/try-assistant"),c=r?.startsWith("/b/mission-control")||r?.startsWith("/b/assistants"),u=r?.startsWith("/spaces/");return s||a||i||l||u||c}const jht=()=>{const{data:e}=bV(),{trackEvent:t,trackEventOnce:n}=je(),[r,s]=f.useState(!1);f.useEffect(()=>{e&&e.app_location==="SIDE_CARD"&&(s(!0),n("side upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const a=f.useCallback(()=>{e&&(t("side upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),s(!1),d5(e.name))},[e,t]),i=f.useMemo(()=>e?o.jsx(f5,{upsellInformation:e,textButtonIfSecondary:!0}):null,[e]);return f.useMemo(()=>({show:r&&!!e,title:e?.title,description:e?.description,image:e?.image_asset,button:i,onDismiss:a}),[i,a,r,e])},obe=({userIntercomHash:e,appId:t,data:n,reason:r})=>{const s=!!oo(),a=lt(),{session:i}=Nt(),{isPro:l,isMax:c,subscriptionTier:u}=Et(),{orgUser:d,isEnterprise:m}=kn({reason:r}),p=f.useMemo(()=>{const y=s?{comet:!0}:{};return{l2wyozh0:{api_base:"https://api-iam.intercom.io",app_id:"l2wyozh0",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},fl4pfvft:{api_base:"https://api-iam.intercom.io",app_id:"fl4pfvft",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},cajnwzjn:{api_base:"https://api-iam.intercom.io",app_id:"cajnwzjn",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y}}},[i,e,n,s,l,c,m,d?.role,a,u]),h=f.useRef(void 0),g=f.useCallback(async()=>{h.current||(h.current=Q(async()=>{const{show:y,Intercom:x,shutdown:v,update:b}=await import("./index-5FFPV-FM.js").then(_=>_.i);return{show:y,Intercom:x,shutdown:v,update:b}},[]).then(({show:y,Intercom:x,shutdown:v,update:b})=>(x(p[t]),{show:y,update:b,shutdown:v}))),h.current.then(({show:y,update:x})=>{x(p[t]),y()})},[t,p]);return xf(()=>{h.current?.then(({shutdown:y})=>{y()})}),f.useMemo(()=>({show:g}),[g])};obe.displayName="useIntercom";function lbe(){const{trackEvent:e}=je(),{locale:t}=Z(),[n,r]=f.useState(g2.includes(t)?t:zd),s=jet();return s?g2.includes(s)?n!==s&&r(s):Aet():n!==t&&g2.includes(t)&&r(t),f.useMemo(()=>({locale:n,hasChosenLocale:!!s,saveLocale(a){r(a),Net(a),e("set locale cookie",{locale:a})}}),[n,s,e])}const Aht=e=>{};function Iht(e){const{$t:t}=Z(),{onLanguageChange:n=Aht,button:r}=e,s=_t(),{locale:a,saveLocale:i,hasChosenLocale:l}=lbe(),{isMobileStyle:c}=Ce(),u=f.useCallback(async h=>{i(h),n(h),await i5(),s.refresh("Interface language select")},[i,n,s]),d=f.useMemo(()=>({text:t({defaultMessage:"Default",id:"lKv8exH0MR"}),value:"default",type:"default",onClick:()=>{VGe(),s.refresh("Interface language reset")}}),[t,s]),m=f.useMemo(()=>[d,...UGe.map(h=>({text:h.label,value:h.locale,type:"default",onClick:()=>{u(h.locale)}}))],[d,u]),p=f.useMemo(()=>l?m.find(h=>h.value===a)?.text:d.text,[m,a,l,d]);return o.jsx(sn,{isMobileStyle:c,items:m,wrapperClassName:"inline-flex",children:r??o.jsx("div",{className:"w-full md:w-[200px]",children:o.jsx(pe,{size:"small",chevron:!0,chevronIcon:Bn,text:p,layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})})})}async function cbe(){const e=await fetch("/api/version",{method:"GET",headers:{"Content-Type":"application/json"}}),{version:t}=await e.json();return t}const Rht=({hideOnNarrowScreens:e=!1,userIntercomHash:t})=>{const{$t:n}=Z(),{show:r}=obe({appId:"l2wyozh0",userIntercomHash:t,reason:"helper-contact-support"}),{isMobileStyle:s}=Ce(),{device:{isWindowsApp:a}}=Lt(),{openModal:i}=wt(),{locale:l}=Z(),{trackEvent:c}=je(),u=Jn(),d=Y0e(),m=oo(),p=Tde(),{isEnterprise:h}=H3({reason:"helper"}),[g,y]=f.useState(),[x,v]=f.useState(!1);f.useEffect(()=>{p&&async function(){try{y(await cbe()??"")}catch{}}()},[p]);const b=l in Rv?Rv[l]:Rv.default,_=f.useMemo(()=>p?[{type:"nested",text:"",label:"Internal (PPLX only)",isSubmenuOpen:x,onSubmenuOpen:()=>v(!0),onSubmenuClose:()=>v(!1),submenu:[{type:"default",text:"",label:g===void 0?"Loading current commit...":"Current commit: "+g,show:!0,href:g&&"https://github.com/ppl-ai/agi/commit/"+g,target:"_blank"},{type:"default",text:"",label:m?`Browser: ${m.browser_version}
Extension: ${m.extension_version}
Agent Extension: ${m.agent_extension_version}`:"Browser info is not defined",show:!!m}]}]:[],[p,g,x,m]),w=f.useMemo(()=>d?"https://www.perplexity.ai/comet/gettingstarted":h?"https://www.perplexity.ai/enterprise/resources":"https://www.perplexity.ai/hub/getting-started#what-is-perplexity",[h,d]),C=f.useMemo(()=>h?"https://www.perplexity.ai/help-center/en/collections/11312901-enterprise-pro":"https://www.perplexity.ai/hub/helpcenter",[h]),S=f.useCallback(()=>{u.showFeedbackForm()},[u]),E=f.useMemo(()=>[{icon:d?wi:zue,text:n({defaultMessage:"Get started",id:"/aBLH2Kytu"}),show:!0,href:w,target:"_blank",onClick(){c("help menu item clicked",{href:w,isCometHome:d})}},{icon:x1,text:n({defaultMessage:"FAQ",id:"W8nHSdskn0"}),show:d,href:"http://comet-help.perplexity.ai/en",target:"_blank",onClick(){c("help menu item clicked",{href:"http://comet-help.perplexity.ai/en",isCometHome:d})}},{icon:XG,text:n({defaultMessage:"Report an Issue",id:"C8l3hRgoLu"}),show:d,onClick:S},{icon:x1,text:n({defaultMessage:"Help center",id:"BYkLO/XERT"}),show:!d||h,href:C,target:"_blank",onClick(){c("help menu item clicked",{href:C,isCometHome:d})}},{icon:t7e,text:n({defaultMessage:"Changelog",id:"MQcAqlXZ5R"}),show:!d,href:"https://www.perplexity.ai/changelog",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/changelog",isCometHome:d})}},{icon:Bk,text:n({defaultMessage:"Blog",id:"tv5FG3fVPd"}),show:!d,href:"/blog",target:"_blank",onClick(){c("help menu item clicked",{href:"/blog",isCometHome:d})}},{icon:u2,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:!a,onClick(){i("keyboardShortcutHelperModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:d})}},{icon:u2,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:a,onClick(){i("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:d})}},{icon:vD,text:n({defaultMessage:"{pplx} {pro}",id:"QDSn6QIReR"},{pplx:"Perplexity",pro:"Pro"}),show:!0,href:"/pro",target:"_blank",onClick(){c("help menu item clicked",{href:"/pro",isCometHome:d})}},{icon:io,text:n({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),show:!0,href:"https://www.perplexity.ai/enterprise?utm_source=helper",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/enterprise?utm_source=helper",isCometHome:d})}},{icon:Lg,text:n({defaultMessage:"Sonar API",id:"m21oy6OJo7"}),show:!0,href:"https://sonar.perplexity.ai/",target:"_blank",onClick(){c("help menu item clicked",{href:"https://sonar.perplexity.ai/",isCometHome:d})}},{icon:n7e,text:n({defaultMessage:"Contact Support",id:"YdQxfwJ5wQ"}),show:!0,onClick(){r()}},{type:"separator",show:!0},{text:"",label:n({defaultMessage:"Careers",id:"yJ1ORHjbX8"}),show:!0,href:"https://www.perplexity.ai/careers",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/careers",isCometHome:d})}},{text:"",label:n({defaultMessage:"Terms of service",id:"FqgDIVw4jF"}),show:!0,href:b.termsOfService,target:"_blank",onClick(){c("help menu item clicked",{href:b.termsOfService,isCometHome:d})}},{text:"",label:n({defaultMessage:"Privacy policy",id:"cPwv2cbzf2"}),show:!0,href:b.privacyPolicy,target:"_blank",onClick(){c("help menu item clicked",{href:b.privacyPolicy,isCometHome:d})}},..._],[d,n,w,S,h,C,a,b.termsOfService,b.privacyPolicy,_,c,i,r]),M=f.useCallback(()=>{i("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal"})},[i,c]),k=f.useCallback(()=>{p&&i("bugReportModal",null)},[i,p]),N=f.useMemo(()=>E.map(P=>({type:"default",...P})),[E]);return o.jsx("div",{className:V("bottom-md right-md m-sm fixed hidden",!e&&"md:block",e&&"lg:block"),children:o.jsxs("div",{className:"gap-sm flex items-center",children:[p&&o.jsx(pe,{toolTip:"Report a bug",ariaLabel:n({defaultMessage:"Internal: Report a bug",id:"mD23B8Qy5J"}),size:"small",pill:!0,variant:"rejecter",icon:XG,onClick:k}),o.jsx("div",{className:"group relative",children:o.jsx(Iht,{button:o.jsx(pe,{toolTip:n({defaultMessage:"Change language",id:"jOuyTp+O9P"}),icon:r7e,ariaLabel:n({defaultMessage:"Language",id:"y1Z3orIe9Z"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle"})})}),a&&o.jsx("div",{className:"hidden lg:block",children:o.jsx(pe,{toolTip:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),ariaLabel:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle",icon:u2,onClick:M})}),o.jsx(sn,{popoverProps:{childrenClassName:"block"},placement:"top-end",isMobileStyle:s,onOpen:()=>c("help menu opened",{}),items:N,children:o.jsx(pe,{toolTip:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),ariaLabel:n({defaultMessage:"Help menu",id:"HzUkaMxHjy"}),variant:"border",extraCSS:"shadow-subtle ",size:"small",pill:!0,icon:Gue})})]})})},Pht=()=>Xs.getItem("mobilePopupDismissed")!=="true",Oht=()=>Xs.setItem("mobilePopupDismissed","true"),Lht=we(()=>Q(()=>import("./AppDownloadQR-DkYjOQ2x.js"),__vite__mapDeps([7,3,1])),{loading:()=>o.jsx(o1e,{})}),ube=R.memo(({})=>{const{$t:e}=Z(),[t,n]=f.useState(!1),r=Ft(),{trackEvent:s}=je(),{keysRequiringRerender:a,removeKeyRequiringRerender:i}=yf(),l=eV(r);if(f.useEffect(()=>{a.includes("floating-mobile-download")&&n(Pht()&&!l),i("floating-mobile-download")},[a,l,i]),f.useEffect(()=>{t&&s("floating mobile download shown",{})},[t,s]),!t)return null;const c=()=>{n(!1),Oht(),s("floating mobile download dismissed",{})};return o.jsx(H,{variant:"background",className:"bottom-md right-md p-md animate-in fade-in fixed z-30 hidden w-[350px] rounded-lg border shadow-sm duration-300 ease-out md:block",children:o.jsxs("div",{children:[o.jsx("div",{className:"absolute right-0 top-0",children:o.jsx(Te,{pill:!0,size:"small",icon:It,onClick:c})}),o.jsx("div",{className:"pb-md flex justify-center",children:o.jsx("div",{className:"text-super flex justify-center",children:o.jsx(le,{icon:s7e,size:"2xl"})})}),o.jsx(F,{variant:"section-title",className:"text-center",children:e({defaultMessage:"Open on the Perplexity mobile app",id:"QENIXgASKx"})}),o.jsx(F,{className:"text-center",children:e({defaultMessage:"Scan now to install",id:"niKvT5U+3I"})}),o.jsx("div",{className:"mt-sm flex items-center justify-center",children:o.jsx(H,{className:"p-xs rounded-md shadow-md",children:o.jsx(Lht,{})})})]})})});ube.displayName="FloatingAppDownload";function Dht({useCase:e}){return We({queryKey:["userIntercomHash",e],queryFn:()=>{const t=new URLSearchParams;return t.set("useCase",e),fetch(`/api/intercom?${t.toString()}`).then(n=>n.json())}})}var Pee={};const Fht=()=>{const e="floating-components",t=lt(),n=rbe({});gr({enabled:!t});const r=jht(),{showCookieConsentPopup:s,closeCookieConsentPopup:a}=Ede(),i=Nht({reason:e}),l=f.useRef(null),{inApp:c}=wl(),u=sbe({reason:e}),{currentOpenedModal:d}=wt(),m=Ft(),{data:p}=Dht({useCase:"default"});if(c)return null;if(r.show&&r.title&&r.description&&r.button&&r.onDismiss)return o.jsx(ipe,{shouldShow:r.show,imageSrc:r.image,imageAlt:"Side card upsell",title:r.title,description:r.description,primaryAction:r.button,onDismiss:r.onDismiss,iconXDismiss:!0});if(!s&&u)return o.jsx(abe,{});const h=p?.userIntercomHash??null,g=!d&&!t&&!s&&!Pee.NEXT_PUBLIC_IS_SIDECAR_BUILD;return o.jsxs(o.Fragment,{children:[!i&&h&&o.jsx(Rht,{hideOnNarrowScreens:m?.includes("/search"),userIntercomHash:h}),g&&o.jsx("div",{ref:l,children:o.jsx(_c,{isWindowsApp:!0,isGovernment:!0,children:o.jsx(Q0e,{portalTarget:l.current??void 0},"floating-signup")})}),t&&!Pee.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(_c,{isWindowsApp:!0,children:o.jsx(ube,{})}),s&&o.jsx(ibe,{closeCookieConsentPopup:a}),t&&n]})},Uht="pplx.ai",Bht=we(async()=>{const{Analytics:e}=await Q(async()=>{const{Analytics:t}=await import("./index-DS3HnOeq.js");return{Analytics:t}},__vite__mapDeps([98,3,1]));return{default:e}},{prefetch:!1}),Vht="dub_id",$ht="dub_id",Oee=90,Wht=()=>{const e=Ut();return f.useEffect(()=>{const t=e.get(Vht);t&&rn($ht,t,{expires:Oee})},[e]),o.jsx(Bht,{domainsConfig:{refer:Uht},cookieOptions:{expiresInDays:Oee}})},Lee="AW-11209402154",Hht="AW-11209402154/Oz8uCISC_PYZEKrOh-Ep",dbe=R.memo(()=>{const{hasConsent:e}=Ede(),n=!!Ut()?.get(Ic),[r,s]=f.useState(!1);return f.useEffect(()=>{if(!r&&e){const a=i=>{if(i.timeRemaining()>0||i.didTimeout){const l=document.createElement("script");l.src=`https://www.googletagmanager.com/gtag/js?id=${Lee}`,l.async=!0,document.head.appendChild(l),l.onload=()=>{window.dataLayer=window.dataLayer||[];function c(...u){window.dataLayer.push(arguments)}c("js",new Date),c("config",Lee),n&&c("event","conversion",{send_to:Hht}),s(!0)}}else window.requestIdleCallback(a)};"requestIdleCallback"in window?window.requestIdleCallback(a,{timeout:5e3}):a({timeRemaining:()=>1/0,didTimeout:!0})}},[e,n,r]),null});dbe.displayName="GoogleTagManager";const zht=1e3*60,fbe=R.memo(()=>(f.useEffect(()=>{jo("phone_home");const e=setInterval(()=>jo("phone_home"),zht);return()=>clearInterval(e)},[]),null));fbe.displayName="ET";const mbe=Yt("WindowsAppPanelContext",null),Ght=({children:e})=>{const t=f.useRef(null),n=f.useRef(!1),r=Ft(),{device:{isWindowsApp:s}}=Lt(),[a,i]=f.useState(!1),l=!!(s&&r?.includes(Y1)),c=f.useCallback(async()=>{const h=await $8({ref:t.current});i(h);const g=()=>i(!0),y=()=>i(!1);return tv("show",g,{ref:t.current}),tv("hide",y,{ref:t.current}),()=>{try{t.current&&(W8("show",{ref:t.current}),W8("hide",{ref:t.current}))}catch(x){ne.warn("Error removing window listeners during cleanup",x)}}},[t]),u=f.useCallback(async()=>{if(n.current)return ne.info("Already creating window, skipping"),!1;if(t.current)try{return await $8({ref:t.current}),ne.info("Existing window is still valid, skipping creation"),!0}catch{ne.warn("Existing window reference is invalid, will create new window"),t.current=null}try{ne.info("Starting panel window creation"),n.current=!0;const h=await Jit({width:720,height:350,transparent:!0,show:!1,frame:!1,alwaysOnTop:!0,type:"panel"});if(!h)throw new Error("Failed to create window - no window reference returned");const g=await rot({ref:h});if(!g)throw new Error("Failed to get web contents");const y=await lot({webPreferences:{nodeIntegration:!0,contextIsolation:!1}});if(!y)throw new Error("Failed to create view");await eot({ref:h,viewRef:y});const x=new URL(Y1,window.location.origin).toString();await cot({ref:g},x),t.current=h;const v=await c();if(v){const b=t.current;tv("close",v,{ref:b})}return tv("close",()=>{},{ref:h,preventDefault:!0}),!0}catch(h){return ne.error("Error creating panel window: ",h),t.current=null,!1}finally{n.current=!1}},[c]),d=f.useCallback(async()=>{try{if(!t.current)return ne.info("No panel window to hide"),!1;try{return await not({ref:t.current}),!0}catch(h){return ne.warn("Error hiding panel, window may be invalid",h),t.current=null,!1}}catch(h){return ne.warn("Error in hidePanel: ",h),!1}},[]),m=f.useCallback(async()=>{try{if(t.current){if(a){ne.info("Panel window is already visible, skipping centering");return}}else if(!await u())return;const h=await iot(),g=(await oot(h)).bounds,[y=0,x]=await tot({ref:t.current});await sot({ref:t.current},Math.round(g.x+(g.width-y)/2),Math.round(g.y+g.height*.3)),await HB({ref:t.current}),await WB({ref:t.current})}catch(h){ne.warn("Error showing panel: ",h)}},[u,a]),p={isVisible:a,isWindowsAppPanelView:l,handleShowPanel:m,handleHidePanel:d,createPanelWindow:u};return o.jsx(mbe.Provider,{value:p,children:e})},kp=()=>{const e=f.useContext(mbe);if(!e)throw new Error("useWindowsAppPanel must be used within a WindowsAppPanelProvider");return e};var Dee={};const qht="pplx.hasUpdated",Kht=Math.random()*1e3*60*30,Yht=0,Qht=1e3*60*30,Xht=1e3*60,Fee=1e3*60*60,Uee=1e3*30,pbe=R.memo(({version:e})=>{const{session:t}=Nt(),n=t?.user?.email?.endsWith("@perplexity.ai"),r=f.useRef(e),{deprecatedOpenToast:s}=Mn(),{isWindowsAppPanelView:a}=kp(),{inApp:i}=wl(),{$t:l}=Z(),c=pn(),[u,d]=rV(qht,!1),m=f.useRef(!1),p=qge(),h=f.useRef(Date.now());r.current=e;const g=n?Yht:Kht,y=n?Xht:Qht,x=f.useCallback(async()=>{try{if(!m.current){const C=await cbe();jo("idle_refresh_check_version",{isCometSidecarClient:!!Dee.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:C}),m.current=!!(r.current&&C&&r.current!==C)}if(document.hidden||p()||Date.now()-h.current<Uee)return;m.current&&(!c&&d(!0),await i5(),jo("idle_refresh"),d3("Idle refresh"))}catch{ne.log("Error getting build version")}},[c,d,p]),v=f.useMemo(()=>Js(x,g,{maxWait:Fee,leading:!1,trailing:!0}),[x,g]),b=f.useCallback(()=>{m.current?x():v()},[x,v]),_=f.useMemo(()=>Js(b,Uee,{maxWait:Fee,leading:!1,trailing:!0}),[b]),w=f.useCallback(()=>{h.current=Date.now(),_()},[_]);return f.useEffect(()=>{u&&!a&&!i&&(d(!1),s(l({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]),f.useEffect(()=>{const C=Dee.NEXT_PUBLIC_IS_SIDECAR_BUILD?setInterval(b,y):null;return document.addEventListener("visibilitychange",w),window.addEventListener("focus",w),window.addEventListener("keydown",w),window.addEventListener("mousedown",w),()=>{C&&clearInterval(C),document.removeEventListener("visibilitychange",w),window.removeEventListener("focus",w),window.removeEventListener("keydown",w),window.removeEventListener("mousedown",w)}},[b,y,w]),null});pbe.displayName="IdleRefresh";const hbe=R.memo(function(){const{session:t}=Nt(),n=f.useMemo(()=>{if(t)return{id:t.user.id,name:t.user.name,email:t.user.email,isPro:!!t.user.subscription_status&&t.user.subscription_status!=="none"}},[t]);if(!n)return null;const r=A_(globalThis.navigator?.userAgent??"");return o.jsxs(o.Fragment,{children:[o.jsx(WOe,{session:n,isWindowsApp:r}),o.jsx(HOe,{session:n,isWindowsApp:r})]})});hbe.displayName="Instrumentation";async function Zht(){const e=await fetch("https://pplx-next-static-public.perplexity.ai/version/min-version.json",{method:"GET",headers:{"Content-Type":"application/json"}}),{minVersion:t,jitter:n}=await e.json();return{minVersion:t,jitter:n}}var Jht={};const Bee=30,egt=0,tgt=1e3*60*60,$A=1e3*30,ngt="pplx.hasUpdated",gbe=R.memo(({minVersion:e})=>{const{session:t}=Nt(),n=t?.user?.email?.endsWith("@perplexity.ai"),r=f.useRef(e),s=f.useRef(0),a=f.useRef(!1),{deprecatedOpenToast:i}=Mn(),{isWindowsAppPanelView:l}=kp(),{inApp:c}=wl(),{$t:u}=Z(),d=pn(),[m,p]=rV(ngt,!1),h=qge(),{env:{isLocalhost:g}}=Lt(),y=f.useRef(Date.now()),x=f.useRef(null);r.current=e;const v=f.useCallback(async()=>{try{if(g)return;if(!a.current){const{minVersion:w,jitter:C}=await Zht();if(jo("min_version_refresh_check_version",{isCometSidecarClient:!!Jht.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:w}),s.current=n?egt:Math.max(C||Bee,Bee),!r.current&&w){r.current=w;return}a.current=!!(w&&r.current&&w>r.current)}if(document.hidden||h()||Date.now()-y.current<$A)return;a.current&&!x.current&&(x.current=setTimeout(async()=>{if(x.current=null,document.hidden||h()||Date.now()-y.current<$A){s.current=0;return}!d&&p(!0),await i5(),jo("min_version_refresh"),d3("Min version refresh")},Math.random()*s.current*1e3*60))}catch{ne.log("Error getting min version")}},[g,h,d,p,n]);f.useEffect(()=>{m&&!l&&!c&&(p(!1),i(u({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]);const b=f.useMemo(()=>Js(v,$A,{maxWait:tgt,leading:!1,trailing:!0}),[v]),_=f.useCallback(()=>{y.current=Date.now(),b()},[b]);return f.useEffect(()=>(document.addEventListener("visibilitychange",_),window.addEventListener("focus",_),window.addEventListener("keydown",_),window.addEventListener("mousedown",_),()=>{document.removeEventListener("visibilitychange",_),window.removeEventListener("focus",_),window.removeEventListener("keydown",_),window.removeEventListener("mousedown",_)}),[_]),null});gbe.displayName="MinVersionRefresh";async function rgt(){try{return(await(await fetch("/cdn-cgi/trace")).text()).split(`
`).reduce((n,r)=>{const[s,a]=r.split("=");return n[s]=a??"",n},{loc:"US"})}catch(e){return ne.error("Error getting Cloudflare trace",e),{loc:"US"}}}function Tp(){const{data:e}=We({queryKey:["cloudflare-trace"],queryFn:rgt});return f.useMemo(()=>e?.loc??"US",[e])}const sgt=({children:e,hostname:t})=>{const{session:n}=Nt(),r=Tp();return o.jsx(Cat,{hostname:t,session:n??void 0,cfCountry:r,children:e})};class WA{static cancelOneTap(t=!1){if(typeof window>"u"||!window)return!0;const n=window.location.pathname;return!![{match:"/",condition:()=>t},{match:"/welcome",condition:()=>t},{match:"/search/new"},{match:"/join/",startsWith:!0},{match:"/onboarding",startsWith:!0},{match:"/search/render",startsWith:!0},{match:"/auth/windows-app",startsWith:!0},{match:"/auth/sso",startsWith:!0},{match:"/auth/error",startsWith:!0}].some(({match:s,startsWith:a,condition:i})=>(a?n.startsWith(s):n===s)&&(!i||i()))}static getLoginSource(){if(!window)return De.GOOGLE_ONETAP_UNKNOWN;const t=window.location.pathname;return t?t==="/"?De.GOOGLE_ONETAP_HOME:t.startsWith("/search/")?De.GOOGLE_ONETAP_THREAD:t.startsWith("/page/")?De.GOOGLE_ONETAP_PAGE:t.startsWith("/discover")?De.GOOGLE_ONETAP_DISCOVER:De.GOOGLE_ONETAP_UNKNOWN:De.GOOGLE_ONETAP_UNKNOWN}}const Vee=500,agt=4,ybe=Yt("GoogleOneTapContext",{promptSkipped:!1});function igt(e){const{children:t}=e,n=f.useRef(0),r=f.useRef(!1),[s,a]=f.useState(!1),i=lt(),{isMobileUserAgent:l}=Ce(),u=xi().erp,d=f.useCallback(async m=>{if(!m||WA.cancelOneTap())return;const p=WA.getLoginSource(),h=typeof window<"u"?new URL(window.location.href):new URL("/","https://www.perplexity.ai"),g=new URLSearchParams({[Ic]:p});h.search=g.toString();const y={credential:m.credential,callbackUrl:h.toString()};await nv("googleonetap",y)},[]);return f.useEffect(()=>{if(typeof window>"u"||i||l||["new_tab","sidecar"].includes(u??""))return;function m(){if(!r.current&&(n.current+=1,!(n.current>agt))){if(!window.google?.accounts?.id){setTimeout(m,Vee);return}r.current=!0,!WA.cancelOneTap()&&(window.google.accounts.id.initialize({client_id:"60244564555-30175ip7vg79fobh0rk1sur3pdutj9l1.apps.googleusercontent.com",callback:d,auto_select:!0,use_fedcm_for_prompt:!0}),pn()?a(!0):window.google.accounts.id.prompt(h=>{a(h.isSkippedMoment())}))}}const p=setTimeout(m,Vee);return()=>{clearTimeout(p)}},[d,l,i,u]),o.jsx(ybe.Provider,{value:{promptSkipped:s},children:t})}function ogt(){return f.useContext(ybe)}const kV=ex("LocalPropsContext",()=>Po(e=>({tasksModeFocusStepUUID:void 0,actions:{setTasksModeFocusStepUUID:t=>{e({tasksModeFocusStepUUID:t})}}}))),lgt=kV.Provider,cgt=kV.useSelector,ugt=kV.useTrackedState,Ldn=()=>cgt(e=>e.actions),Ddn=ugt,xbe=({reason:e})=>{const{connectors:t}=Sa({reason:e});return f.useMemo(()=>{const n=new Set(t?.connectors?.map(s=>s.name)??[]),r=new Set(t?.connectors?.filter(s=>s.connected===!0)?.map(s=>s.name)??[]);return{isAllowed:s=>n.has(s),isConnected:s=>r.has(s)}},[t])},dgt=e=>e?.length?e.filter(Jy):void 0;function vbe({reason:e,allowCometRestrictions:t=!0}){const n=Z(),r=_t(),{hasAccessToProFeatures:s}=Et(),{isEnterprise:a,organization:i}=kn({reason:e}),l=AB({reason:e,feature:Ad.SOURCES}),c=pn(),{enabledConnectors:u,enabledNonFileConnectors:d,enabledFileConnectors:m}=k_({reason:e}),{sources:p}=rr(),h=Gu(),{isAllowed:g}=xbe({reason:e}),[y,x]=f.useState(!1),v=f.useCallback(()=>{x(!0)},[]),b=f.useCallback(()=>{x(!1)},[]),{value:_}=$r({flag:"gcal-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:i?.uuid??""}}),{value:w}=$r({flag:"enable-remote-mcp-tools",defaultValue:!1,extraAttributes:{orgUuid:i?.uuid??""}}),C=w&&s,S=_&&(!c||!t),{value:E}=$r({flag:"outlook-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:i?.uuid??""}}),M=f.useCallback(O=>{O.stopPropagation(),r.push(`${h}/files`)},[r,h]),k=f.useMemo(()=>o.jsx("div",{className:"mr-sm flex",children:o.jsx(En,{tooltipText:n.formatMessage({defaultMessage:"Manage my files",id:"o8eQg7byBv"}),children:o.jsx(F,{color:"light",onClick:M,children:o.jsx(le,{icon:MD,size:"sm"})})})}),[n,M]),N=f.useMemo(()=>{const O=m.map(j=>{const T=j.name,I=nl(T)??"";return o.jsx(Pt,{user:I,rounded:!1,showBackground:!1,size:"small"},T)});let A=null;return O.length>0&&(A=qm(O,{...O.length<=3&&{rightText:o.jsx(F,{color:"light",variant:"tinyRegular",children:n.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})})},maxVisuals:O.length,size:"sm"})),{web:{icon:uf,avatar:void 0,text:n.formatMessage({defaultMessage:"Web",id:"B6CB3748fZ"}),description:n.formatMessage({defaultMessage:"Search across the entire Internet",id:"L+Gw+J7uDs"}),type:"toggle"},scholar:{icon:v1,avatar:void 0,text:n.formatMessage({defaultMessage:"Academic",id:"mbxIJyT8C5"}),description:n.formatMessage({defaultMessage:"Search academic papers",id:"IVRQQmrqTD"}),type:"toggle"},...a?{}:{social:{icon:ND,avatar:void 0,text:n.formatMessage({defaultMessage:"Social",id:"qOLogguG/7"}),description:n.formatMessage({defaultMessage:"Discussions and opinions",id:"g9xPuArp4v"}),type:"toggle"}},edgar:{icon:TD,avatar:void 0,text:ZF,description:"Search SEC filings",type:"toggle"},...a?{org:{icon:kD,avatar:void 0,text:n.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),description:n.formatMessage({defaultMessage:"Search files from your organization",id:"Ak5CW53mGi"}),type:"toggle"}}:{},...C&&g("linear_alt")?{linear_alt:{icon:void 0,avatar:o.jsx(Pt,{user:U1,size:"small",rounded:!1,showBackground:!1,altText:dm}),text:dm,description:n.formatMessage({defaultMessage:"Search workspace issues",id:"7GhXgujkn6"}),type:"toggle"}}:{},...C&&g("linear")?{linear:{icon:void 0,avatar:o.jsx(Pt,{user:U1,size:"small",rounded:!1,showBackground:!1,altText:dm}),text:dm,description:n.formatMessage({defaultMessage:"Search workspace issues",id:"7GhXgujkn6"}),type:"toggle"}}:{},...C&&g("notion_mcp")?{notion_mcp:{icon:void 0,avatar:o.jsx(Pt,{user:__,size:"small",rounded:!1,showBackground:!1,altText:Gg}),text:Gg,description:n.formatMessage({defaultMessage:"Search workspace pages",id:"Dfr7kK7JJA"}),type:"toggle"}}:{},...C&&g("slack")?{slack:{icon:void 0,avatar:o.jsx(Pt,{user:B1,size:"small",rounded:!1,showBackground:!1,altText:V1}),text:V1,description:n.formatMessage({defaultMessage:"Search workspace messages",id:"wc4K5cTYcm"}),type:"toggle"}}:{},...C&&g("github_mcp_direct")?{github_mcp_direct:{icon:void 0,avatar:o.jsx(Pt,{user:M3,size:"small",rounded:!1,showBackground:!1,altText:W1}),text:W1,description:n.formatMessage({defaultMessage:"Search GitHub repositories",id:"PfrUPmxSqk"}),type:"toggle"}}:{},...C&&g("asana_mcp_direct")?{asana_mcp_direct:{icon:void 0,avatar:o.jsx(Pt,{user:H1,size:"small",rounded:!1,showBackground:!1,altText:Xl}),text:Xl,description:n.formatMessage({defaultMessage:"Search Asana workspace",id:"nL3T2yHGLc"}),type:"toggle"}}:{},...C&&g("asana_mcp_merge")?{asana_mcp_merge:{icon:void 0,avatar:o.jsx(Pt,{user:H1,size:"small",rounded:!1,showBackground:!1,altText:Xl}),text:Xl,description:n.formatMessage({defaultMessage:"Search Asana workspace",id:"nL3T2yHGLc"}),type:"toggle"}}:{},...C&&g("atlassian_mcp_direct")?{atlassian_mcp_direct:{icon:void 0,avatar:o.jsx(Pt,{user:k3,size:"small",rounded:!1,showBackground:!1,altText:z1}),text:z1,description:n.formatMessage({defaultMessage:"Search Confluence pages and Jira projects",id:"KVekzaQOfl"}),type:"toggle"}}:{},...C&&g("slack_direct")?{slack_direct:{icon:void 0,avatar:o.jsx(Pt,{user:B1,size:"small",rounded:!1,showBackground:!1,altText:$1}),text:$1,description:n.formatMessage({defaultMessage:"Search workspace messages",id:"wc4K5cTYcm"}),type:"toggle"}}:{},...C&&g("jira_mcp_merge")?{jira_mcp_merge:{icon:void 0,avatar:o.jsx(Pt,{user:eU,size:"small",rounded:!1,showBackground:!1,altText:G1}),text:G1,description:n.formatMessage({defaultMessage:"Search Jira projects",id:"EwciVPsXk3"}),type:"toggle"}}:{},...C&&g("confluence_mcp_merge")?{confluence_mcp_merge:{icon:void 0,avatar:o.jsx(Pt,{user:tU,size:"small",rounded:!1,showBackground:!1,altText:q1}),text:q1,description:n.formatMessage({defaultMessage:"Search Confluence pages",id:"TD+F2o03sr"}),type:"toggle"}}:{},...C&&g("microsoft_teams_mcp_merge")?{microsoft_teams_mcp_merge:{icon:void 0,avatar:o.jsx(Pt,{user:nU,size:"small",rounded:!1,showBackground:!1,altText:K1}),text:K1,description:n.formatMessage({defaultMessage:"Search Teams messages",id:"5Z2BgVurdk"}),type:"toggle"}}:{},...w&&g("wiley_mcp_cashmere")?{wiley_mcp_cashmere:{icon:void 0,avatar:o.jsx(Pt,{user:Nu,size:"small",rounded:!1,showBackground:!1,altText:D1}),text:D1,description:n.formatMessage({defaultMessage:"Search Wiley",id:"/0quh5kDz/"}),type:"toggle"}}:{},...l&&a?{my_files:{icon:Vk,avatar:void 0,text:n.formatMessage({defaultMessage:"My files",id:"bYbrKKlKgS"}),description:m.length===0?n.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"}):"",bottomElement:A,rightElement:k,type:"toggle"}}:{}}},[m,n,a,C,w,g,l,k]),P=f.useMemo(()=>({...u?.some(A=>A.name==="crunchbase")?{crunchbase:{icon:void 0,avatar:o.jsx(Pt,{user:x3,rounded:!1,showBackground:!1,size:"small",altText:"Crunchbase"}),text:v3,type:"toggle"}}:{},...u?.some(A=>A.name==="factset")?{factset:{icon:void 0,avatar:o.jsx(Pt,{user:g3,rounded:!1,showBackground:!1,size:"small",altText:"FactSet"}),text:y3,type:"toggle"}}:{},...u?.some(A=>A.connection_type==="GOOGLE_DRIVE")&&l?{google_drive:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.GOOGLE_DRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:Hg}),text:Hg,type:"toggle"}}:{},...u?.some(A=>A.connection_type==="ONEDRIVE")&&l?{onedrive:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.ONEDRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:Gd}),text:Gd,type:"toggle"}}:{},...u?.some(A=>A.connection_type==="SHAREPOINT")&&l?{sharepoint:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.SHAREPOINT)||"",rounded:!1,showBackground:!1,size:"small",altText:qd}),text:qd,type:"toggle"}}:{},...u?.some(A=>A.connection_type==="WILEY")&&a?{wiley:{icon:void 0,avatar:o.jsx(Pt,{user:Nu,rounded:!1,showBackground:!1,size:"small",altText:"Wiley"}),text:b3,type:"toggle"}}:{},...u?.some(A=>A.connection_type==="DROPBOX")&&l?{dropbox:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.DROPBOX)||"",rounded:!1,showBackground:!1,size:"small",altText:ju}),text:ju,type:"toggle"}}:{},...u?.some(A=>A.connection_type==="GCAL")&&S?{gcal:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.GCAL)||"",rounded:!1,showBackground:!1,size:"small",altText:F1}),text:F1,type:"toggle"}}:{},...u?.some(A=>A.connection_type==="OUTLOOK")&&E?{outlook:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.OUTLOOK)||"",rounded:!1,showBackground:!1,size:"small",altText:qg}),text:qg,type:"toggle"}}:{}}),[u,a,l,S,E]),L=f.useMemo(()=>{const O=d.filter(D=>!(D.connection_type==="OUTLOOK"&&!E||D.connection_type==="GCAL"&&!S)),A=[...new Set(O.map(D=>D.name))],j=A.map(D=>{const W=nl(D)??"";return o.jsx(Pt,{user:W,rounded:!1,showBackground:!1,size:"small"},D)}),I=(p?.filter(D=>O.some(W=>W.name===D))||[]).length>0;let U=null;O.length>0&&(U=qm(j,{rightText:o.jsx(F,{color:"light",variant:"tinyRegular",children:I?n.formatMessage({defaultMessage:"{ num } connected",id:"vKOo9VV7WK"},{num:A.length}):n.formatMessage({defaultMessage:"{ num } available",id:"eEfaubop4a"},{num:A.length})}),maxVisuals:j.length,size:"sm"}));const B=Object.entries(P).filter(([D])=>O.some(W=>W.name===D));return B.length===0?{type:"default",text:n.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),icon:ZG,onClick:()=>r.push(`${h}/connectors`),submenuItems:[]}:{type:"nested",isSubmenuOpen:y,onSubmenuOpen:v,onSubmenuClose:b,text:n.formatMessage({defaultMessage:"More connectors",id:"3l4CuVEyHY"}),icon:ZG,menuWidth:"300px",bottomElement:U,submenuItems:[...B,{type:"separator"},{type:"default",text:n.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),onClick:()=>r.push(`${h}/connectors`)}]}},[y,n,r,d,P,v,b,h,p,S,E]);return f.useMemo(()=>({RootSources:N,ConnectionSources:P,NestedConnectionSources:L}),[P,L,N])}var Go={},$ee;function fgt(){if($ee)return Go;$ee=1;var e=Go&&Go.__awaiter||function(s,a,i,l){function c(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function m(g){try{h(l.next(g))}catch(y){d(y)}}function p(g){try{h(l.throw(g))}catch(y){d(y)}}function h(g){g.done?u(g.value):c(g.value).then(m,p)}h((l=l.apply(s,a||[])).next())})};Object.defineProperty(Go,"__esModule",{value:!0}),Go.identify=Go.subscribe=Go.publish=void 0;const t=(s,a)=>{window.todesktop.ipc.publish(s,a)};Go.publish=t;const n=(s,a)=>window.todesktop.ipc.subscribe(s,a);Go.subscribe=n;const r=()=>e(void 0,void 0,void 0,function*(){return window.todesktop.ipc.identify()});return Go.identify=r,Go}var Wee=fgt();const M5=()=>{const{device:{isWindowsApp:e}}=Lt(),t=f.useRef({}),n=f.useRef({}),r=f.useCallback((a,i)=>{if(e)try{Wee.publish(a,i)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c),c.postMessage(i)}else ne.warn("Neither IPC publish nor BroadcastChannel are available in this runtime")}catch(c){ne.warn("Error using BroadcastChannel: ",c)}}},[e]),s=f.useCallback((a,i)=>{if(e)try{return Wee.subscribe(a,i)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c);let u=n.current[a];u||(u=new Set,n.current[a]=u);const d=m=>{i(m.data)};return u.add(i),c.addEventListener("message",d),()=>{c.removeEventListener("message",d),u.delete(i),u.size===0&&(c.close(),delete t.current[a],delete n.current[a])}}ne.warn("Neither IPC subscribe nor BroadcastChannel are available in this runtime");return}catch(c){ne.warn("Error using BroadcastChannel: ",c);return}}},[e]);return f.useMemo(()=>({safeWindowsIpcPublish:r,safeWindowsIpcSubscribe:s}),[r,s])};function H_({defaultSource:e,reason:t}){const{sources:n,setSources:r,setRecency:s}=rr(),a=Ut(),{fileRepoInfo:i}=Do({reason:t}),{RootSources:l,ConnectionSources:c}=vbe({reason:t}),{isLoading:u}=kn({reason:t}),{device:{isWindowsApp:d}}=Lt(),{safeWindowsIpcPublish:m,safeWindowsIpcSubscribe:p}=M5(),h=i.file_repository_type==="COLLECTION",g=h?`space-${i.owner_id}`:"home",y=_l(),x=Array.isArray(y?.slug)?y.slug[0]:y?.slug,{collection:v,isLoading:b}=Oc({collectionSlug:x,reason:t}),_=b?void 0:v?.enable_web_by_default,w=f.useRef(p);f.useEffect(()=>{w.current=p},[p]);const C=f.useRef(Math.random().toString(36).substring(7)),S=f.useCallback(k=>{let N=[];return n?.includes(k)?(N=n.filter(P=>P!==k),k==="web"&&(n.includes("crunchbase")&&(N=n.filter(P=>P!=="crunchbase"&&P!=="web")),s?.(null))):(N=[...n||[]],k==="crunchbase"&&!N.includes("web")&&N.push("web"),N.push(k)),h&&yj(N,g),r(N),d&&m(hd,{type:hd,sources:N,windowId:C.current}),N},[h,g,r,s,n,d,m]),E=f.useCallback(k=>{const N=[...k];N.includes("crunchbase")&&!N.includes("web")&&N.push("web"),h&&yj(N,g),r(N),d&&m(hd,{type:hd,sources:N,windowId:C.current})},[h,d,g,m,r]);f.useEffect(()=>{if(!d)return;const k=w.current(hd,N=>{N.type===hd&&N.windowId!==C.current&&r(N.sources)});return()=>{k?.()}},[d,r,n]);const M=f.useMemo(()=>{if(b)return new Set([]);if(h)return _?new Set(["web"]):new Set([]);if(e)return new Set([e]);const N=(a?.get("sources")??"web").split(",").map(P=>P.trim()).filter(Jy);return new Set(N||["web"])},[h,b,_,a,e]);return f.useEffect(()=>{if(u)return;let k=h?$et(g)||[...M]:[...M];if(h&&_&&!k.includes("web")?k.push("web"):h&&!_&&k.includes("web")&&(k=k.filter(P=>P!=="web")),JSON.stringify(n||[])!==JSON.stringify(k)){const P=k.filter(L=>L in l||L in c);h&&yj(P,g),r(P)}},[u,h,_]),f.useMemo(()=>({DEFAULT_SOURCES:M,isSpace:h,isSpaceEnableWebByDefault:_,updateSources:S,overwriteSources:E}),[M,h,_,E,S])}const mgt=({reason:e})=>{const{safeWindowsIpcPublish:t}=M5(),{actions:n}=_n(),{device:{isWindowsApp:r}}=Lt(),s=lt(),{isPro:a}=Et(),{DEFAULT_SOURCES:i}=H_({reason:e}),l=f.useRef(n),c=f.useRef(t);f.useEffect(()=>{l.current=n,c.current=t},[n,t]);const u=f.useCallback(()=>{ml("/?voice-mode=true","Voice mode")},[]),d=f.useCallback(()=>{ml("/?v2v=true","V2V mode")},[]),m=f.useCallback(g=>{const y=g.searchParams,x=y.get("q"),v=y.get("incognito"),_=(y.get("sources")??"").split(",").map(S=>S.trim()).filter(Jy),w=y.get("search_mode"),C=w?RXe[w]:void 0;v!==null&&l.current.setIsIncognito(v==="true"),_&&t(hd,{type:hd,sources:_}),C?.model&&C?.mode&&t(zh,{type:zh,model:C.model,searchMode:C.mode}),x&&c.current(Ype,{query:x,promptSource:"user",querySource:"windows-app-shortcut",incognitoOverride:v,sourcesOverride:_??[]})},[t]),p=f.useCallback(g=>{const y=g.searchParams,x=y.get("type"),v=y.get("callback");if(!x||!v)return;const b=x.split(","),_=new URLSearchParams;b.forEach(C=>{switch(C){case"sources":_.set("sources",Array.from(i).join(","));break;case"search-modes":_.set("search-modes",Object.values(ce).join(","));break;case"sign-in":_.set("sign-in",s?"true":"false");break;case"subscription":_.set("subscription",a?"true":"false");break}});const w=`${v}?${_.toString()}`;window.open(w,"_blank")},[s,a,i]),h=f.useMemo(()=>new Map([["voice-mode",u],["v2v",d],["search",g=>m(g)],["request",g=>p(g)]]),[u,d,m,p]);f.useEffect(()=>{if(!r)return;const g=Hit("openProtocolURL",(x,v)=>{const b=new URL(v.url);for(const[_,w]of h)if(b.toString().includes(_)){v.preventDefault(),w(b);break}}),y=async()=>{await(await g)()};return()=>{y()}},[r,h])},a9="keyboard-shortcuts",pgt=(e,t)=>{const n={[Tr.NEW_THREAD]:{[Yn.MACOS]:[],[Yn.WINDOWS]:[]},[Tr.STOP_GENERATING]:{[Yn.MACOS]:[],[Yn.WINDOWS]:[]},[Tr.TOGGLE_INCOGNITO]:{[Yn.MACOS]:[],[Yn.WINDOWS]:[]},[Tr.SHOW_SHORTCUTS]:{[Yn.MACOS]:[],[Yn.WINDOWS]:[]},[Tr.FOCUS_ASK_INPUT]:{[Yn.MACOS]:[],[Yn.WINDOWS]:[]},[Tr.TOGGLE_DICTATION]:{[Yn.MACOS]:[],[Yn.WINDOWS]:[]},[Tr.TOGGLE_V2V]:{[Yn.MACOS]:[],[Yn.WINDOWS]:[]}},r=rxe(e,t);[Tr.NEW_THREAD,Tr.TOGGLE_V2V].forEach(s=>{const a=r.find(i=>i.type===s);a&&(n[s]={[Yn.MACOS]:a.macos,[Yn.WINDOWS]:a.windows})});try{const s=Oe.getItem(a9);if(s){const a=JSON.parse(s);[Tr.NEW_THREAD,Tr.TOGGLE_V2V].forEach(i=>{const l=a.find(c=>c.type===i);l&&(n[i]={[Yn.MACOS]:l.macos,[Yn.WINDOWS]:l.windows})})}}catch(s){ne.warn("Error reading keyboard shortcuts:",s)}return n},hgt=(e,t)=>Po(n=>({globalShortcuts:pgt(e,t),setShortcut:(r,s,a)=>n(i=>{const l={...i.globalShortcuts,[r]:{...i.globalShortcuts[r],[s]:a}};try{const c=Oe.getItem(a9),d=(c?JSON.parse(c):[]).map(m=>m.type===r?{...m,[s]:a}:m);Oe.setItem(a9,JSON.stringify(d))}catch(c){ne.warn("Error saving keyboard shortcuts:",c)}return{globalShortcuts:l}})}));let HA=null;const i9=e=>{const{device:{isWindowsApp:t}}=Lt(),n=Z();return HA||(HA=hgt(n,t)),HA(e)},ggt=()=>{const{handleShowPanel:e}=kp(),t=i9(c=>c.setShortcut),{getMainWindowRef:n}=ygt(),r=i9(c=>c.globalShortcuts),s=f.useCallback(async()=>{const c=await n();if(!c)return;await HB({ref:c}),await WB({ref:c});const u=new CustomEvent("toggleVoiceToVoice");document.dispatchEvent(u)},[n]),a=f.useCallback(async(c,u)=>{try{const d=Array.isArray(c)?c.join("+"):c;let m;switch(u){case Tr.NEW_THREAD:m=e;break;case Tr.TOGGLE_V2V:m=s;break;default:return ne.warn(`No handler registered for shortcut type: ${u}`),!1}return d&&d.trim()!==""&&await EA(d),await Zit(d,m),!0}catch(d){return ne.warn("Error registering shortcut:",d),!1}},[e,s]),i=f.useCallback(async(c,u,d)=>{try{const m=c.join("+"),p=u.join("+");if(m===p)return;m&&m.trim()!==""&&await EA(m),await a(p,d)&&t(d,Yn.WINDOWS,u)}catch(m){ne.error("Error updating global shortcut:",m)}},[a,t]),l=f.useCallback(async c=>{const u=c.join("+");u&&u.trim()!==""&&await EA(u)},[]);return f.useMemo(()=>({shortcuts:r,registerShortcut:a,updateGlobalShortcut:i,unregisterShortcut:l}),[a,r,l,i])},bbe=Yt("WindowsAppContext",null),ygt=()=>{const e=f.useContext(bbe);if(!e)throw new Error("useWindowsApp must be used within WindowsAppProvider");return e},xgt=()=>{const e=f.useRef(null);return{getMainWindowRef:f.useCallback(async()=>(e.current||(e.current=(async()=>{let n=await pJ({id:"TJmK6yKBLiw389HLDdYy5"});return n||(n=await pJ({id:"C195F2RyYDhfB93QW7vui"})),n})()),e.current),[])}},vgt=({children:e,getMainWindowRef:t})=>{const n="windows-app-provider-inner",{device:{isWindowsApp:r}}=Lt(),s=Ft(),a=r&&!s?.includes(Y1),{submitQuery:i}=ta(),{isCopilot:l}=rr(),{createPanelWindow:c,handleHidePanel:u}=kp(),d=lt(),m=f.useRef(i),p=f.useRef(l),{safeWindowsIpcSubscribe:h}=M5();f.useEffect(()=>{m.current=i},[i]),mgt({reason:n}),f.useEffect(()=>{p.current=l},[l]);const{shortcuts:g,registerShortcut:y,unregisterShortcut:x}=ggt();f.useEffect(()=>{a&&(c(),u())},[a,c,u]);const v=f.useCallback(async b=>{const _=async(E=500)=>{const M=new AbortController,k=setTimeout(()=>M.abort(),E);try{const N=new Promise(P=>{$8().then(L=>{if(L){clearTimeout(k),P(!0);return}tv("show",()=>{clearTimeout(k),P(!0)})})});return await Promise.race([N,new Promise(P=>{M.signal.addEventListener("abort",()=>P(!1))})])}catch(N){return ne.warn("Error ensuring window is ready",{error:N}),!1}finally{clearTimeout(k);try{W8("show")}catch(N){ne.warn("Error removing show listeners during cleanup",N)}}},w=await t();if(await HB({ref:w}),await WB({ref:w}),!await _())return;const C=b.query.trim();if(!C?.trim())return;const S=Ei();m.current({rawQuery:C,copilotOverride:p.current?!0:void 0,attachments:b.attachments,collection:null,newFrontendContextUUID:S,promptSource:b.promptSource??"user",querySource:b.querySource??"home",timeFromFirstType:b.timeFromFirstType,shouldRedirectToBackendUUID:!0})},[t]);return f.useEffect(()=>{if(!a)return;const b=h(Ype,_=>{v(_)});return()=>{b?.()}},[a,v,h]),f.useEffect(()=>{if(!a)return;const b=[Tr.NEW_THREAD,...d?[Tr.TOGGLE_V2V]:[]];return b.forEach(_=>{const C=g[_][Yn.WINDOWS].map(cX);y(C,_)}),()=>{b.forEach(_=>{const C=g[_][Yn.WINDOWS].map(cX);x(C)})}},[y,a,g,d,x]),o.jsx(o.Fragment,{children:e})},bgt=({children:e})=>{const{getMainWindowRef:t}=xgt(),n=f.useMemo(()=>({getMainWindowRef:t}),[t]);return o.jsx(bbe.Provider,{value:n,children:o.jsx(Ght,{children:o.jsx(vgt,{getMainWindowRef:t,children:e})})})};var _gt={};const _be=R.memo(function(){return f.useEffect(()=>{if(_gt.NEXT_PUBLIC_SW_ENABLED_LOCAL){yJ();return}const t=xi();t.env&&t.env!=="local"?yJ():yot()},[]),null});_be.displayName="ServiceWorker";var wgt={};const Ll=e=>{try{return JSON.parse(e)}catch{return{}}};function Cgt({reason:e}){const t=pn(),n=Jn(),r=f.useCallback(async(s,a)=>{if(ne.info("browserStep",s),s.browser_open_tab_content){const i=s.browser_open_tab_content,l=Ll(i.extra_headers);ne.info("browserTool: browser_open_tab",{tool:i},{request_id:l[Gr]}),await fqe({url:i.url,cometBrowser:n,stepUuid:s.uuid,extraHeaders:Ll(i.extra_headers),reason:e})}else if(s.search_browser_content){const i=s.search_browser_content,l=Ll(i.extra_headers);ne.info("browserTool: search_browser",{tool:i},{request_id:l[Gr]}),await gqe(i,n,s.uuid,l,e)}else if(s.browser_close_tabs_content){const i=s.browser_close_tabs_content,l=i.payload;if(!l){ne.error("[useExecuteBrowserTool] browser_close_tabs_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const c=Ll(i.extra_headers);ne.info("browserTool: browser_close_tabs",{tool:i},{request_id:c[Gr]}),await hqe(l,n,s.uuid,c,e)}else if(s.browser_group_tabs_content){const i=s.browser_group_tabs_content,l=i.payloads,c=Ll(i.extra_headers);ne.info("browserTool: browser_group_tabs",{tool:i},{request_id:c[Gr]}),await pqe(l,n,s.uuid,c,e)}else if(s.entropy_request_content){const i=s.entropy_request_content,l=i.extra_headers,c=Ll(l)[Gr];ne.info("browserTool: entropy_request",{tool:i},{request_id:c}),i.tasks.forEach(u=>{ne.info("[comet] Submitting agent task",{task_id:u.uuid,entry_uuid:a,request_id:c}),n.submitTask({action:"startAgentFromPerplexity",type:"START_AGENT",extra_headers:l,base_url:i.base_url,entryId:a,...u,use_current_page:u.use_current_page&&!!wgt.NEXT_PUBLIC_IS_SIDECAR_BUILD,capture_screenshot:!u.use_current_page&&!u.tab_id,is_mission_control:window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants")||i.is_mission_control})})}else if(s.get_url_content_content){const i=s.get_url_content_content,l=Ll(i.extra_headers);if(ne.info("browserTool: get_url_content",{tool:i},{request_id:l[Gr]}),!t)return;const c={...i,key:s.uuid,request_id:l[Gr],pages:[...i.pages||[]]},u=n.GetContent(c);await vd(u,s.uuid,{request_id:l[Gr]??""},e)}else if(s.browser_ungroup_content){const i=s.browser_ungroup_content;if(!i.payload){ne.error("[useExecuteBrowserTool] browser_ungroup_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const l={groupIds:i.payload.group_ids,tabIds:i.payload.tab_ids},c=Ll(i.extra_headers),u=n.ungroupTabs(l,s.uuid,c[Gr]??"").then(d=>{if(!d.is_success)throw d;return{group_ids:d.groupIds,tab_ids:d.tabIds}});await vd(u,s.uuid,{request_id:c[Gr]??""},e)}else if(s.browser_search_tab_groups_content){const i=s.browser_search_tab_groups_content,l=i.payload;if(!l){ne.error("[useExecuteBrowserTool] browser_search_tab_groups_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const c=Ll(i.extra_headers),u=n.searchTabGroups(l,s.uuid,c[Gr]??"").then(d=>{if(!d.is_success)throw d;return{results:d.results.map(m=>({...m,color:Fpe(m.color)}))}});await vd(u,s.uuid,{request_id:c[Gr]??""},e)}else if(s.browser_get_visible_tab_screenshot_content){const i=s.browser_get_visible_tab_screenshot_content,l=Ll(i.extra_headers),c=n.GetVisibleTabScreenshot({key:s.uuid,request_id:l[Gr]??"",...i}).then(async u=>{const m=await(await fetch(u.data_url)).blob(),p=new File([m],"screenshot."+(i.format??"png"),{type:m.type}),h=await oV({file:p,forceImage:!0,reason:e,fileSource:"entropy"});if(!h||!h?.fields||!h.s3_bucket_url)throw new Error("Failed to create upload URL");const g=new FormData;Object.entries(h.fields).forEach(([v,b])=>{g.append(v,b)}),g.append("file",p);const y=await fetch(h.s3_bucket_url,{method:"POST",body:g});if(!y.ok)throw new Error(`Failed to upload screenshot: ${y.statusText}`);const x=await y.json();if(!x.secure_url)throw ne.error("[GetVisibleTabScreenshot] Upload did not return a secure URL",{response:x}),new Error("Upload did not return a secure URL");return{screenshot_url:x.secure_url}});await vd(c,s.uuid,{request_id:l[Gr]??""},e)}else ne.error("[useExecuteBrowserTool] Unknown browser tool step",{browserStep:s},{reason:e,backend_uuid:a})},[n,t,e]);return f.useMemo(()=>({executeBrowserTool:r}),[r])}const wbe=R.memo(function(){const{executeBrowserTool:t}=Cgt({reason:"StreamMiddlewares"}),n=f.useCallback(s=>{if(!s||!s.browser_tool)return s;t(s.browser_tool,s.backend_uuid)},[t]),r=f.useMemo(()=>[n],[n]);return o.jsx(zge,{middlewares:r})});wbe.displayName="StreamMiddlewares";const Sgt=({reason:e})=>{const t=k_({reason:e}),n=vB({reason:e});return f.useMemo(()=>{const r=YG([...t.enabledConnectors,...t.enabledFileConnectors,...t.enabledNonFileConnectors].map(a=>a.name)),s=YG([...n.disabledConnectors,...n.disabledFileConnectors].map(a=>a.name));return{enabled:r,disabled:s}},[t,n])},Egt=({fileRepoInfo:e,reason:t})=>{const{$t:n}=Z(),r=xt(),s=["list_file_directory",e.file_repository_type,e.owner_id],{deprecatedOpenToast:a}=Mn(),{session:i}=Nt(),l=i?.user?.email??"",c=St({mutationFn:async u=>{if(!u.nextURL)throw new Error("File must have a url");const d=await ae.POST("/rest/file-repository/move-attachment-to-persistent-file-path",t,{body:{file_repository_info:e,file_url:u.nextURL},timeoutMs:en.MEDIUM,retries:2}),m=d.data;if(m&&await aB({request:{file_repository_info:e,file_index_params:[{file_s3_url:m.file_url_params.s3_object_url,file_size:u.file.size,filename:u.file.name,file_uuid:m.file_url_params.file_uuid,replace_existing:!1}]},reason:t}),!d.response.ok||!d.data)throw new Error("Failed to save file persistently");return d.data},onSuccess:(u,d)=>{const m={name:d.file.name,file_s3_url:u.file_url_params.s3_object_url,file_uuid:u.file_url_params.file_uuid,file_title:d.file.name,file_description:null,uploadedBy:l,date:new Date().toLocaleString(),state:"COMPLETE",size:d.file.size,isOptimistic:!0};r.setQueriesData({queryKey:s},h=>{if(!h)return h;const g=h.completedFiles||[];return{...h,completedFiles:[...g,m]}});const p=GU(e.owner_id,d.file.name);r.invalidateQueries({queryKey:p}),a(n({defaultMessage:"Saved file",id:"2HZW5WnkV3"}),"success",3)},onError:(u,d)=>{a(n({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),ne.error("Error saving file with name",d.file.name,u)},onSettled:async()=>{await r.invalidateQueries({queryKey:s})}});return f.useMemo(()=>({saveFile:c.mutate,isLoading:c.isPending}),[c.isPending,c.mutate])},TV=({fileRepoInfo:e,fileName:t,reason:n})=>{const{session:r}=Nt();return We({queryKey:GU(e.owner_id,t),refetchOnMount:!0,queryFn:async()=>((await L8({request:{fileRepositoryInfo:e,limit:Vi,offset:0,searchTerm:t,fileStates:["COMPLETE"],email:r?.user?.email??""},reason:n}))?.files.length??0)>0,enabled:e.file_repository_type==="COLLECTION"&&!!e.owner_id&&t.length>0})},Cbe=({fileRepoInfo:e,fileExists:t,reason:n})=>{const{deprecatedOpenToast:r}=Mn(),{session:s}=Nt(),a=f.useMemo(()=>s?.user?.email??"",[s]),i=xt(),{mutate:l}=Cxe({fileRepoInfo:e,setTotalFilesUploading:()=>1,replaceExisting:t,reason:n}),{mutateAsync:c}=wxe({fileRepositoryType:e.file_repository_type,offset:0,searchTerm:"",ownerId:e.owner_id,reason:n}),u=f.useCallback(async(m,p)=>{try{if(!m||!p)return;const h=await vge({thread_uuid:m,format:"md",filename:p,reason:n}),g=atob(h.file_content_64),y=new Array(g.length);for(let _=0;_<g.length;_++)y[_]=g.charCodeAt(_);const x=new Uint8Array(y),v=new Blob([x],{type:"application/md"}),b=new File([v],h.filename,{type:"application/md"});await l([b]),i.setQueryData(["file_exists",e.owner_id,p],!0),t||r("Successfully saved to space","success",3)}catch(h){r(`Failed to save to space: ${h}`,"error",3)}},[l,r,t,e,i,n]),d=f.useCallback(async m=>{try{const h=(await GE({fileRepositoryType:e.file_repository_type,limit:10,offset:0,searchTerm:"",email:a,ownerId:e.owner_id,reason:n}))?.completedFiles.find(g=>g.name.includes(m??""));if(!h?.file_uuid)return;await c([h.file_uuid]),i.setQueryData(["file_exists",e.owner_id,m],!1),r("File removed from space","success",3)}catch(p){r(`Failed to remove from space: ${p}`,"error",3)}},[c,r,i,e.owner_id,a,n,e.file_repository_type]);return f.useMemo(()=>({saveThreadToSpace:u,removeThreadFromSpace:d}),[d,u])},NV=({windowsAppOnly:e=!0}={})=>{const[t,n]=f.useState(()=>globalThis.Notification?globalThis.Notification.permission:"denied"),{device:{isWindowsApp:r}}=Lt();f.useEffect(()=>{globalThis.Notification&&globalThis.Notification.permission!==t&&n(globalThis.Notification.permission)},[t]);const s=f.useCallback(async()=>{if(globalThis.Notification){if(t==="granted")return!0;if(t==="denied")return!1;const i=await globalThis.Notification.requestPermission();return n(i),i==="granted"}return!1},[t]),a=f.useCallback(async({title:i,body:l,icon:c="https://r2cdn.perplexity.ai/pplx-desktop-icon.png",onClick:u})=>{if(!(e&&!r||!await s())&&globalThis.Notification){const m=new globalThis.Notification(i,{body:l,icon:c});u&&(m.onclick=()=>{u(),window.focus()})}},[e,r,s]);return f.useMemo(()=>({sendNotification:a,requestPermission:s,permission:t,isWindowsApp:r}),[r,t,s,a])},T2="v1",N2="last_results",k5=e=>({backend_uuid:t,thread_url_slug:n})=>t===e||n===e,T5=()=>{const e=Oe.getItem(N2);let t={version:T2,results:fe};try{e&&(t=JSON.parse(e),t.version!==T2&&(Oe.removeItem(N2),t={version:T2,results:[]}))}catch{Oe.removeItem(N2)}return t.results},lb=e=>Oe.setItem(N2,JSON.stringify({version:T2,results:e})),Sbe=e=>{const t=k5(e.backend_uuid),r=T5().slice(-49).filter(s=>!t(s));r.push(e),lb(r)||lb([e])},jV=XZe,Ebe=jV*10,Mgt=Ebe*10+jV,cb="all_results",kgt=({slugOrUUID:e,enabled:t,reason:n})=>{const r=xt(),s=f.useCallback(async(a,i)=>{const l=await Q1({slugOrUUID:a,options:{withParentInfo:!0,supportedBlockUseCases:[...Qpe],limit:i?Ebe:jV,fromFirst:!0,cursor:i},numRetries:Wu,reason:n});if(!l?.entries?.length||l.status!=="success")return[];const c=[cb,a];r.setQueryData(c,d=>{const m=l.entries,p=new Set(d?.map(g=>g.backend_uuid)),h=m.filter(g=>!p?.has(g.backend_uuid));return[...d??[],...h]});const u=r.getQueryData(c)??[];return l.next_cursor&&u.length<Mgt&&s(a,l.next_cursor),u},[n,r]);return We({queryKey:[cb,e],enabled:!!e&&t,retry:!1,queryFn:async({queryKey:a})=>await s(a[1]??"")})},Tgt=()=>{const e=xt();return f.useCallback(t=>{if(!ya(t))return;const n=t[0],r=n.thread_url_slug??n.backend_uuid;Sbe(n),e.setQueryData([cb,r],t)},[e])},Ngt=()=>{const e=xt();return f.useCallback(t=>{if(t){const n=k5(t),r=T5();if(r.find(n)){const s=r.filter(a=>!n(a));lb(s)}e.removeQueries({queryKey:[cb,t],exact:!0})}else lb(fe),e.removeQueries({queryKey:[cb]})},[e])};function jgt({reason:e}){const{setIsCopilot:t,gpt4Limit:n,setGPT4Limit:r,pplxAlphaLimit:s,setPplxAlphaLimit:a,pplxBetaLimit:i,setPplxBetaLimit:l,setAskInputReasoningMode:c}=rr(),{trackEvent:u}=je(),d=f.useCallback(async()=>{try{const p=(await ae.GET("/rest/rate-limit/all",e)).data;if(!p)throw new Error("No data returned from rate limit check");const h=p.remaining_pro??0,g=p.remaining_research??0,y=p.remaining_labs??0;n>0&&p.remaining_pro!==null&&h<=0&&u("pro rate limit reached",{}),s>0&&p.remaining_research!==null&&g<=0&&u("pplx alpha rate limit reached",{}),i>0&&p.remaining_labs!==null&&y<=0&&u("pplx beta rate limit reached",{}),r(h),a(g),l(y),h<=0&&(c(!1),t(!1))}catch(m){ne.error("Failed to check rate limit",m)}},[n,r,s,a,i,l,c,t,u,e]);return f.useCallback(()=>{d()},[d])}const Agt=(e,t)=>{const{value:n,loading:r}=qu({flag:"sapi-ranking-navigate",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Igt=async({query:e,userIdentity:t,queryClient:n,reason:r,sapiSearchNavigateConfig:s})=>{try{const a=s?[`sapi-ranking-navigate-cfg=${JSON.stringify(s)}`]:[],c=(await(await zOe({resource:"https://suggest.perplexity.ai/search/v2/navigate",method:"POST",options:{headers:{"content-type":"application/json","X-Client-Name":"agi_ui_navigate_v2","X-Client-Env":"production"}},body:JSON.stringify({query:e,user_identity:{lang:t.lang,country:t.country,ab_active_tests:a}}),timeoutMs:1e3,reason:r})).json())?.hit;c&&n.setQueryData(["navigationResults",e],c)}catch(a){ne.error("Failed to fetch navigational search results:",a)}},Rgt=35,Pgt=()=>{const e=xt(),t=Tp(),{variation:n,loading:r}=Agt({});return f.useCallback(({query:s,params:a,reason:i})=>{const l=s.length<=Rgt,c=!!a.last_backend_uuid,u=a.attachments,d=a.sources,m=a.model_preference==="pplx_study";if(l&&!c&&u.length===0&&d&&d.length>0&&!m){const h={lang:a.language,country:t};Igt({query:s,userIdentity:h,queryClient:e,reason:i,sapiSearchNavigateConfig:r?void 0:n})}},[e,t,n,r])};function Ogt({lastResponse:e,backend_uuid:t,trackEvent:n,notificationText:r,sendNotification:s,cometAdapter:a,isMissionControl:i}){if(!t)return ne.error(new Error("No backend_uuid found in response")),!1;if(!e)return ne.error(new Error("No last response found in query client")),!1;(Yr(e.display_model)===ce.RESEARCH||Yr(e.display_model)===ce.STUDIO)&&r&&s&&document.visibilityState!=="visible"&&s({title:r,body:e.query_str,onClick:()=>{window.focus()}}),e.blocks.filter(c=>c.intended_usage?.endsWith("_markdown")).forEach(c=>{c.markdown_block?.media_items&&n&&c.markdown_block?.media_items.forEach(u=>{n("inline image rendered",{image_url:u.image,entryUUID:t})})});const l=e.blocks.find(c=>c.intended_usage==="knowledge_cards")?.knowledge_card_block?.knowledge_cards?.[0];return l&&n&&n("knowledge card in results",{entryUUID:t,name:l.title,id:l.id,type:l.card_type}),a?.setTabProgress(!1),i||a?.showNotification(),!0}const AV="pplx.activeQuery";function Mbe(){const e=Xs.getItem(AV);if(!e)return{};try{return JSON.parse(e)}catch{return{}}}function Lgt(e){Xs.setItem(AV,JSON.stringify(e))}function Dgt(){Xs.removeItem(AV)}const kbe=ex("QueryInputStateContext",()=>Po(e=>({userInput:"",userInputJson:void 0,hasStartedTyping:!1,shouldTriggerFocus:!1,actions:{restoreInput:()=>{const t=Mbe();t.rawQuery&&e({userInput:t.rawQuery,userInputJson:t.rawQueryJson})},setUserInput:(t,n)=>{e({userInput:t,userInputJson:n}),Lgt({rawQuery:t,rawQueryJson:n})},setHasStartedTyping:t=>e({hasStartedTyping:t}),setStartTypingTime:t=>e({startTypingTime:t}),resetInput:()=>{e({userInput:"",userInputJson:void 0}),Dgt()},markInputAsSubmitted:()=>{e({userInput:"",userInputJson:void 0,startTypingTime:void 0})},setShouldTriggerFocus:t=>{e({shouldTriggerFocus:t})}}}))),Fgt=kbe.Provider,bx=kbe.useSelector,Tbe=R.memo(()=>{const{setUserInput:e,resetInput:t}=z_(),n=Ft(),r=wp(n);return f.useLayoutEffect(()=>{const s=Mbe();s.rawQuery&&e(s.rawQuery,s.rawQueryJson)},[e]),f.useLayoutEffect(()=>{!r||r===n||r==="/"&&n?.startsWith("/search/new")||r.startsWith("/search/new")&&n?.startsWith("/search")||t()},[n,r,t]),null});Tbe.displayName="QueryInputSideEffects";const Nbe=()=>bx(e=>e.userInput),Ugt=()=>bx(e=>e.userInputJson),jbe=()=>bx(e=>e.hasStartedTyping),Bgt=()=>bx(e=>e.startTypingTime),Vgt=()=>bx(e=>e.shouldTriggerFocus),z_=()=>bx(e=>e.actions);class Abe extends Jb{name="PplxStreamError"}const Ibe=R.memo(function(){const t="stream-side-effects",n=_t(),r=pn(),{session:s}=Nt(),{trackEvent:a}=je(),{$t:i}=Z(),l=A_(globalThis.navigator?.userAgent),{sendNotification:c}=NV({windowsAppOnly:!1}),u=U0e(),d=Pgt(),{addKeyRequiringRerender:m}=yf(),p=xi(),h=Jn(),g=Ope(),y=typeof window<"u"&&(window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants")),{fileRepoInfo:x}=Do({reason:t}),{firstResult:{thread_url_slug:v}={}}=Ht(),{data:b}=TV({fileRepoInfo:x,fileName:v??"",reason:t}),{saveThreadToSpace:_}=Cbe({fileRepoInfo:x,fileExists:b??!0,reason:t}),w=Tgt(),{resetInput:C,restoreInput:S}=z_(),E=Nbe(),M=f.useRef(E);M.current=E;const k=Sgt({reason:t}),N=xt(),P=jgt({reason:t}),{updateLocalStatePostStream:L}=ta();return f.useLayoutEffect(()=>hs.on("created",async({stream:O,query:A,params:j})=>{if(O.isReconnect||!A||!j)return;const T=oo(),I=ej(l,p.erp);cKe(O.id,{name:"perplexity_ask",queryStr:A,queryParams:j,isFollowup:M8(j)&&(j.query_source==="followup"||j.query_source==="followup-sidecar"),isPerplexityBrowser:r,frontendUUID:j.frontend_uuid??"",session:s,browserVersion:T?.browser_version,source:I,connectors:k,mentions:"mentions"in j?j.mentions:[]}),h?.setTabProgress(!0),g&&h.sendThreadStatusToMobile({status:"working",streamId:O.id.description})}),[r,l,s,k,p.erp,h,g]),f.useLayoutEffect(()=>hs.on("progress",({stream:O,message:A})=>{const{blocks:j,status:T}=A,I=j?.some(D=>!!D?.markdown_block?.chunks?.length),U=j?.some(D=>!!D?.web_result_block?.web_results?.length),B=j?.some(D=>!!D?.sources_mode_block?.rows?.length);if(I&&O.timer.addTimingOnce("web.frontend.first_llm_token_seen"),U&&O.timer.addTimingOnce("web.frontend.first_search_results_seen"),B&&O.timer.addTimingOnce("web.frontend.first_sources_seen"),A.telemetry_data){const{has_displayed_search_results:D,has_first_output_token:W,has_first_token:z,has_widget_data:$,country:X,is_followup:q,source:Y,engine_mode:G,search_implementation_mode:J,has_useful_renderable_content:K}=A.telemetry_data,te={country:X,is_followup:q,source:Y,engine_mode:G,search_implementation_mode:J};D&&O.timer.addTimingOnce("web.frontend.first_search_results_latency_ms",te),W&&O.timer.addTimingOnce("web.frontend.first_output_token_latency_ms",te),z&&O.timer.addTimingOnce("web.frontend.first_token_latency_ms",te),$&&O.timer.addTimingOnce("web.frontend.first_widget_data_latency_ms",te),K&&O.timer.addTimingOnce("web.frontend.first_useful_renderable_content_latency_ms",te)}eKe(O.id,{hasLLMToken:I,hasSearchResults:U,hasSources:B},s??void 0),T===Xn.FAILED&&ne.error(new Abe("STREAM_FAILED_CHUNK_ERROR"),{message:A})}),[s]),f.useLayoutEffect(()=>hs.on("progress",({stream:O,isFirstMessage:A})=>{A&&O.placeholderChunk&&O.placeholderChunk.query_source&&!M.current&&C()}),[C]),f.useLayoutEffect(()=>hs.on("completed",({stream:O})=>{const A=xi(),j=ej(l,A.erp);eQ(O.id,{name:"SUCCESSFUL response",session:s,source:j})}),[s,l]),f.useLayoutEffect(()=>hs.on("completed",({stream:O,thread:A})=>{if(!O.threadId||!O.entryId)return;w(A);const j=A?.find(I=>I?.uuid===O.id.description||I?.backend_uuid===O.entryId);let T;Yr(j?.display_model)===ce.RESEARCH?T=i({defaultMessage:"Your report is ready",id:"CEIDgftq5U"}):Yr(j?.display_model)===ce.STUDIO&&(T=i({defaultMessage:"Your project is ready",id:"UXOU5ST+Nc"})),Ogt({lastResponse:j,backend_uuid:O.entryId,trackEvent:a,sendNotification:c,notificationText:T,cometAdapter:h,isMissionControl:y})}),[i,a,c,w,h,y]),f.useLayoutEffect(()=>hs.on("completed",async({stream:O})=>{!v||!O.entryId||b&&await _(O.entryId,v)}),[b,_,v]),f.useLayoutEffect(()=>{const O=({stream:T})=>{const{id:I}=T,U=xi(),B=ej(l,U.erp),z=new URL(window.location.href).pathname.replace("/search/new/","");eQ(I,{name:"FAILED response",session:s,source:B}),z===I.description&&(S(),n.replace(`/?error=${Sm.ThreadStreamError}`,"StreamSideEffects")),h?.setTabProgress(!1)},A=hs.on("error",O),j=hs.on("aborted",O);return()=>{A(),j()}},[s,l,S,n,h]),f.useLayoutEffect(()=>hs.on("created",({query:O,params:A,stream:{isReconnect:j,id:T}})=>{if(!(!O||!A||j||!M8(A))){if(r){u(O,{model_preference:A.model_preference,last_backend_uuid:"last_backend_uuid"in A?A.last_backend_uuid:void 0,sources:A.sources,override_no_search:A.override_no_search},T.description);return}d({query:O,params:A,reason:"streamEvents.on(created)"})}}),[u,d,r]),f.useEffect(()=>{const O=[hs.on("completed",({stream:A})=>{h.cleanupTasks(A.entryId),g&&h.sendThreadStatusToMobile({status:"ready",streamId:A.id.description})}),hs.on("aborted",({stream:A})=>{h.cleanupTasks(A.entryId),g&&h.sendThreadStatusToMobile({status:"ready",streamId:A.id.description})}),hs.on("error",({stream:A})=>{h.cleanupTasks(A.entryId),g&&h.sendThreadStatusToMobile({status:"error",streamId:A.id.description})})];return()=>{O.forEach(A=>A())}},[h,g]),f.useEffect(()=>hs.on("completed",async({message:O,thread:A})=>{if(!O||(L(O),O.collection_info?.slug&&N.invalidateQueries({queryKey:[du,{collection_slug:O.collection_info.slug.slice(-22)}]}),P(),Cmt(O.thread_url_slug)))return;const j=!!O.parent_info,T=A.findIndex(I=>I.uuid===O.uuid)>0;(j||!T)&&(m("floating-signup"),N.invalidateQueries({queryKey:[zm],refetchType:"all"}))}),[N,l,m,P,L]),null});Ibe.displayName="StreamSideEffects";const bf=e=>e?.includes("perplexity.ai"),$gt=e=>e?.includes("localhost"),Wgt=e=>bf(e)&&e?.includes("preview"),Hgt=e=>bf(e)&&e?.includes("staging"),zgt=e=>bf(e)&&(e?.includes("alpha")||e?.includes("beta")),Ggt=e=>bf(e)&&e?.includes("testing"),qgt=e=>bf(e)&&e?.includes("askdev"),Kgt=e=>bf(e)&&e?.startsWith("dev"),Ygt=e=>bf(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),Qgt=e=>bf(e)&&!Wgt(e)&&!Ggt(e)&&!zgt(e)&&!qgt(e)&&!Kgt(e)&&!Ygt(e);function Rbe(){return Qgt(window.location.hostname)?"beta":Hgt(window.location.hostname)?"staging":$gt(window.location.hostname)?"local":"testing"}class Hf{static GC_TIME=1e3*60*5;static STALE_TIME=1/0;static retryDelay(t,n){return Math.min(t>1?2**t*1e3:1e3,30*1e3)}static retryQuery(t,n){return!1}static retryMutation(t,n){return!1}}function Xgt(){return Bm?Hee():(zA||(zA=Hee()),zA)}function Hee(){return new xGe({queryCache:new gpe({onError:e=>{const t=e instanceof dP?e:new dP("FETCHER_UNKNOWN_ERROR",{details:{cause:GOe(e)},cause:qOe(e)?e:void 0});ne.error(t)}}),mutationCache:new xpe({onError:e=>{ne.error("Mutation error",e)}}),defaultOptions:{queries:{staleTime:Hf.STALE_TIME,gcTime:Hf.GC_TIME,refetchOnReconnect:!0,refetchOnMount:!0,refetchOnWindowFocus:!0,retry:Hf.retryQuery,retryDelay:Hf.retryDelay,throwOnError:!1,networkMode:"online"},mutations:{gcTime:Hf.GC_TIME,retry:Hf.retryMutation,retryDelay:Hf.retryDelay,throwOnError:!1,networkMode:"online"}}})}let zA;const no={type:"spring",stiffness:700,damping:50},Xd=R.memo(({keyProp:e=0,message:t,variant:n,description:r,ctaText:s,ctaOnClick:a,isVisible:i=!1,timeout:l,handleClick:c,handleClose:u,onTimeout:d=Pn,position:m="top",...p})=>{const[h,g]=f.useState(i);f.useEffect(()=>{g(i)},[i]),f.useEffect(()=>{let v;return i&&l&&(v=setTimeout(()=>{g(!1),d()},l*1e3)),()=>{clearTimeout(v)}},[h,l,i,d]);const y=f.useCallback(()=>{g(!1),u?.()},[u]),x=f.useCallback(()=>{a?.(),y()},[a,y]);return o.jsx(Je,{children:h&&o.jsx(pf,{children:o.jsx(ve.div,{className:V(`right-toastHMargin erp-sidecar:top-[114px] fixed ${m==="top"?"top-toastVMargin":"bottom-toastVMargin"} z-30 flex items-center justify-center ${c?"cursor-pointer":""}`),initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:no,...p,children:o.jsxs(H,{variant:"raised",className:V("gap-x-sm p-md shadow-overlay flex items-center rounded-lg",{"cursor-pointer":n==="refresh"}),onClick:c??Pn,children:[o.jsx(H,{variant:"subtler",className:"p-sm dark:bg-subtle rounded-md",children:o.jsx(F,{variant:"smallBold",color:n==="error"?"red":n==="warning"?"yellow":"super",children:o.jsx(le,{icon:n==="refresh"?gD:n==="error"||n==="warning"?jD:AD,size:"sm"})})}),o.jsxs(H,{className:"flex-1",children:[o.jsx(F,{variant:"small",color:"default",children:t}),r&&o.jsx(F,{variant:"tinyRegular",color:"light",children:r})]}),s&&a&&o.jsx(Te,{text:s,variant:"subtle",onClick:x,size:"small",extraCSS:"ml-xl"}),l===void 0&&o.jsx(Te,{variant:"primary",size:"tiny",icon:It,onClick:y,extraCSS:"ml-sm",noPadding:!0})]})},e)})})});Xd.displayName="Toast";const Pbe=R.memo(()=>{const{message:e,variant:t,description:n,ctaText:r,ctaOnClick:s,isVisible:a,timeout:i,handleClick:l,closeToast:c,position:u,keyProp:d}=Mn(),m=f.useCallback(()=>{t==="refresh"&&l===void 0?window.location.reload():l&&l()},[t,l]);return o.jsx(Xd,{keyProp:d,isVisible:a,variant:t,message:e,description:n,ctaText:r,ctaOnClick:s,timeout:i,handleClick:m,onTimeout:c,position:u},d)});Pbe.displayName="Toasts";const Obe=R.memo(({children:e})=>o.jsx(Hze,{children:e}));Obe.displayName="TooltipStateProvider";const Lbe=R.memo(({children:e,colorScheme:t})=>o.jsx($xe,{userPreferredColorScheme:t,children:o.jsx(Obe,{children:o.jsxs(Bhe,{children:[e,o.jsx(Pbe,{})]})})}));Lbe.displayName="GlobalUXProvider";we(async()=>{const{RenderToolbar:e}=await Q(async()=>{const{RenderToolbar:t}=await import("./RenderToolbar-o-iI3E91.js");return{RenderToolbar:t}},__vite__mapDeps([99,1,3]));return{default:e}},{prefetch:!1});we(async()=>{const{ReactQueryDevtools:e}=await Q(async()=>{const{ReactQueryDevtools:t}=await import("./index-Ds5yF1gS.js");return{ReactQueryDevtools:t}},[]);return{default:e}},{prefetch:!1});const Zgt=({children:e,hostname:t,version:n,minVersion:r,spaRoutes:s,strictSpa:a,shouldOpenNonSpaRouteInNewTab:i,base:l,idleRefresh:c,minVersionRefresh:u})=>{const d=Ft(),m=Xgt(),{colorScheme:p}=_n();return f.useEffect(()=>{!n&&["beta","staging"].includes(Rbe())&&ne.error("Version is not set")},[n]),o.jsx(KOe,{ssrPath:d??"/",ssrSearch:"",base:l,children:o.jsx(YOe,{spaRoutes:s,strictSpa:a,openNonSpaRouteInNewTab:i,children:o.jsx(vct,{children:o.jsxs(Fgt,{children:[o.jsx(hbe,{}),o.jsx(SGe,{client:m,children:o.jsxs(qlt,{children:[o.jsx(Lbe,{colorScheme:p??void 0,children:o.jsx(sgt,{hostname:t,children:o.jsx(Vge,{children:o.jsx(xet,{children:o.jsxs(tct,{shouldFetchSettings:!0,children:[o.jsx(alt,{children:o.jsx(Bct,{shouldFetchSettings:!1,children:o.jsx(bgt,{children:o.jsx(lgt,{children:o.jsx(wht,{children:o.jsxs(igt,{children:[o.jsx(fbe,{}),c&&o.jsx(pbe,{version:n}),u&&o.jsx(gbe,{minVersion:r}),o.jsx(Ibe,{}),o.jsx(wbe,{}),typeof window<"u"&&o.jsx(Tbe,{}),o.jsx(_be,{}),e]})})})})})}),o.jsx(Wht,{})]})})})})}),!1,o.jsx(dbe,{})]})})]})})})})},N5="^/(finance|crypto|app/finance)/?([^/]+)?(?:/([^/]+))?/?$",Jgt=["^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$","/account/api/files/:repositoryUuid","/account/api/members","/account/api/billing","/account/api/files","/account/api/limits","/account/api/group","/account/api/keys","/account/api/playground/search","/account/api","/account/org/user-access","/account/org/permissions","/account/org/connectors","/account/org/insights","/account/org/members","/account/org/details","/account/org/files","/account/org","/account/pro-perks/:name","/account/pro-perks","/account/tasks/:taskId","/account/tasks","/account/site-instructions","/account/reservations","/account/preferences","/account/personalize/memories","/account/personalize","/account/assistant","/account/notifications","/account/purchases","/account/connectors","/account/shortcuts","/account/details","/account/files","/account","/sports/atp/tournaments/:seasonId","/sports/atp/events/:eventId","/sports/atp","/sports/wta/tournaments/:seasonId","/sports/wta/events/:eventId","/sports/wta","/sports/nba/players/:playerId","/sports/nba/events/:eventId","/sports/nba/teams/:teamId","/sports/nba","/sports/nfl/players/:playerId","/sports/nfl/events/:eventId","/sports/nfl/teams/:teamId","/sports/nfl","/sports/championsleague/events/:eventId","/sports/championsleague","/sports/f1/events/:eventId","/sports/f1","/sports/mlb/events/:eventId","/sports/mlb","/sports/ipl/events/:eventId","/sports/ipl","/sports/icc/events/:eventId","/sports/icc","/sports/pga/events/:eventId","/sports/pga","/sports/dpworldtour/events/:eventId","/sports/dpworldtour","/sports/wnba/events/:eventId","/sports/wnba","/sports/ncaam/events/:eventId","/sports/ncaam","/sports/ncaaw/events/:eventId","/sports/ncaaw","/sports/cricket/events/:eventId","/sports","/discover/:topic/:slug","/discover/:topic","/discover","/spaces/templates","/spaces/:slug","/spaces","/hotels/:slug","/page/:slug","/b/mission-control","/b/assistants","/b/try-assistant","/b/speak","/b/home","/b/zen","/perplexify_me","/academic","/shopping","/library","/travel","/windows-app/ask/input",N5,"/"],eyt=["49a618ae-2fee-4bac-9150-81c466a49187"];let zee=!1;const tyt=performance.now();function Dbe(e,t){if(zee||typeof document>"u")return;const r="4705c1a2-db1e-42f0-8a66-cd6208ae9e65",s="pub4ecf63e3fd1ad28de1a9027c01181601",a=e.version,i=e.env??"local",l=oo(),c=t?.email?.endsWith("@perplexity.ai"),u=i==="local",d=i==="testing"||u||l||c?100:2,m=u||c?100:2;if(!eyt.includes(t?.org_uuid??"")){QOe({ddApplicationId:r,ddClientToken:s,version:a,env:i,debug:u,sessionSampleRate:100,sessionReplaySampleRate:m}),XOe({ddClientToken:s,version:a,env:i,debug:u,sessionSampleRate:d});const h=typeof navigator<"u"&&"serviceWorker"in navigator&&!!navigator.serviceWorker.controller;if(qG({useServiceWorker:h}),KG({useServiceWorker:h}),l){const g={cometAgentExtensionVersion:l?.agent_extension_version,cometDeviceId:l.device_id,cometMainExtensionVersion:l.extension_version,cometVersion:l?.browser_version,erp:e.erp};qG(g),KG(g)}cu("web.frontend.module_exec_start",{startTime:performance.timeOrigin,duration:tyt})}zee=!0}const Fbe=R.memo(function({error:t}){f.useEffect(()=>{ne.error(t,{digest:t.digest,globalError:!0})},[t]);const n=f.useCallback(r=>{r.preventDefault(),ml("/sidecar","sidecar error")},[]);return o.jsx("div",{className:"bg-subtler flex h-screen items-center justify-center",children:o.jsxs(H,{className:"space-y-md p-lg rounded-md",children:[o.jsx("div",{className:"max-w-[400px]",children:o.jsx(F,{className:"text-center",variant:"section-title",children:t.digest?`Internal Error (${t.digest})`:"Internal Error"})}),o.jsx(F,{className:"text-center underline",variant:"section-title",color:"light",children:o.jsx(Ye,{href:"/sidecar",onClick:n,children:"Return home"})})]})})});Fbe.displayName="GlobalError";const nyt=60*60*24;function ryt({children:e,session:t}){return o.jsx(c_.SessionProvider,{session:t,refetchInterval:nyt,children:e})}const syt=(e,t)=>t?.includes("WindowsApp")?!0:e==="true",ayt=e=>e==="light"||e==="dark";function iyt(e,{userAgent:t}={}){const n=e.colorScheme,r=ayt(n)?n:null;let s=e[R8],a={};try{a=JSON.parse(e[mye]??"{}")}catch{}const i=Object.values(ce).includes(s);(!s||!i)&&(s=ce.SEARCH);const l=e[Yge];return{colorScheme:r,isCollapsed:syt(e.isCollapsed,t),isSidebarPinned:e.isSidebarPinned==="true",sidebarHiddenHubs:JSON.parse(e.sidebarHiddenHubs??"[]"),isIncognitoLocal:e[UE]===void 0?void 0:e[UE]==="true",isDiscoverInterestBoxDismissed:l?l==="true":void 0,isEnterpriseAdDismissed:e[Qge]=="true",isMaxAssistantMode:e[pye]=="true",isSplashPageDismissed:e[Xge]=="true",isSuggestionsDisabled:e[Zge]=="true",isHomepageWidgetsDisabled:e[Jge]=="true",isSportsIosCtaDismissed:e[tye]=="true",preferredSearchMode:s,preferredSearchModels:a,welcomeBackGateImpressions:Number(e[nye])||0,shareGateImpressions:Number(e[rye])||0,isSidebarConnectorsAdDismissed:e[sye]=="true",isStudentReferralBannerDismissed:e[aye]=="true",isStudentSpaceUpsellDismissed:e[iye]=="true",studentSpaceUpsellImpressions:Number(e[oye])||0}}function oyt(e=""){return!e&&typeof navigator<"u"&&(e=navigator.userAgent),{isChrome:kot(e),isMobile:M0e(e),isAndroid:Tot(e),isIOS:Not(e),isMacOS:jot(e),isMobileSafari:Aot(e),isFirefox:Iot(e),isWindowsApp:A_(e),isWindowsOS:Rot(e),isMetaBrowser:Pot(e),isSamsungBrowser:Oot(e),userAgent:e}}const Nl=e=>e?.includes("perplexity.ai"),Ube=e=>e?.includes("localhost"),lyt=e=>e?.includes("pplx.dev"),Bbe=e=>Nl(e)&&e?.includes("preview"),Vbe=e=>Nl(e)&&e?.includes("staging"),$be=e=>Nl(e)&&(e?.includes("alpha")||e?.includes("beta")),Wbe=e=>Nl(e)&&e?.includes("testing"),cyt=e=>Nl(e)&&e?.includes("experimental"),Hbe=e=>Nl(e)&&e?.includes("askdev"),zbe=e=>Nl(e)&&e?.startsWith("dev"),Gbe=e=>Nl(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),qbe=e=>Nl(e)&&!Bbe(e)&&!Wbe(e)&&!$be(e)&&!Hbe(e)&&!zbe(e)&&!Gbe(e)&&!cyt(e),uyt=e=>Nl(e)&&e?.includes("sandbox"),dyt=e=>e?.includes("quokka-gamma.ts.net")||e?.endsWith(".preview.i.perplexity.ai"),fyt=e=>{const t="unknown";try{return typeof process<"u"&&process?.env?.DD_ENV?process?.env?.DD_ENV:e?Ube(e)?"local":e==="www.perplexity.ai"?"prod":e.endsWith(".preview.i.perplexity.ai")?e.replace(/\.preview\.i\.perplexity\.ai$/,""):e.endsWith(".perplexity.ai")?e.replace(/\.perplexity\.ai$/,""):t:t}catch{return t}},myt=e=>e.isTesting||e.isLocalhost||e.isSandbox||e.isDevBox||e.isPplxDev||e.isDevDeployment,pyt=e=>{const t={isPublicDNS:Nl(e),isLocalhost:Ube(e),isPplxDev:lyt(e),isPreview:Bbe(e),isStaging:Vbe(e),isBeta:$be(e),isTesting:Wbe(e),isAskDev:Hbe(e),isDevBox:zbe(e),isNamedDevDomain:Gbe(e),isProduction:qbe(e),isSandbox:uyt(e),isDevDeployment:dyt(e),deployName:fyt(e),envHasDevLogins:!1};return t.envHasDevLogins=myt(t),t},Kbe=f.memo(({children:e,userAgent:t,hostname:n})=>{const r=f.useMemo(()=>({device:oyt(t),env:pyt(n)}),[t,n]);return o.jsx(Bpe.Provider,{value:r,children:e})});Kbe.displayName="WebPlatformProvider";const hyt={},IV=R.memo(({locale:e,children:t,messages:n=hyt})=>{const r=f.useCallback(s=>{s.code!=="MISSING_TRANSLATION"&&ne.error(s)},[]);return o.jsx(lFe,{locale:e,defaultLocale:zd,messages:n,onError:r,children:t})});IV.displayName="TranslationsProvider";const gyt=fue(BGe),Ybe=R.memo(({locale:e,children:t})=>{const{translations:n,matchedLocale:r}=f.use(gyt(e));return o.jsx(IV,{locale:r,messages:n,children:t})});Ybe.displayName="InnerClientTranslationsProvider";const yyt={},Qbe=R.memo(({children:e,shouldSetHtmlLang:t=!0})=>{const n=f.useMemo(()=>jd(),[]),r=f.useMemo(()=>Npe(n),[n]);return t&&typeof document<"u"&&(document.documentElement.lang!==n&&(document.documentElement.lang=n),document.documentElement.dir!==r&&(document.documentElement.dir=r)),n===zd?o.jsx(IV,{locale:n,messages:yyt,children:e}):o.jsx(f.Suspense,{fallback:null,children:o.jsx(Ybe,{locale:n,children:e})})});Qbe.displayName="ClientTranslationsProvider";const xyt=we(async()=>{const{DebugModeActivator:e}=await Q(async()=>{const{DebugModeActivator:t}=await import("./DebugModeActivator-BVToKrqP.js");return{DebugModeActivator:t}},__vite__mapDeps([100,3,1,101,6,5,4]));return{default:e}}),Xbe=R.memo(({host:e,userAgent:t,children:n,session:r})=>{const s=f.useMemo(()=>iyt(ZOe(),{userAgent:t}),[t]);return o.jsx(Qbe,{children:o.jsx(ryt,{session:r,children:o.jsx(Kbe,{hostname:e,userAgent:t,children:o.jsxs(xit,{initialLocalUserSettings:s,children:[o.jsx(xyt,{}),n]})})})})});Xbe.displayName="RootProviders";function vyt(e,t){if(e?.pathname.startsWith("/sidecar"))return"sidecar";if(e?.pathname.startsWith("/mobile-sidecar"))return"mobile-sidecar";if(t)return"tab"}function byt(){const{cachedSession:e,sessionFetchPromise:t}=YFe(!0),n=pi(),r=document.querySelector("meta[name='version']")?.getAttribute("content")||"",s=+(document.querySelector("meta[name='min-version']")?.getAttribute("content")||0),a=new URL(window.location.href);return{cachedSession:e,sessionFetchPromise:t.catch(i=>(console.error("Error getting session",i),null)),config:{env:Rbe(),version:r,minVersion:s,erp:vyt(a,n)}}}const Zbe=R.memo(function({children:t}){const n=Ft(),r=Ut(),[s,a]=f.useState(null),{colorScheme:i}=Jr(),{session:l}=Nt(),c=f.useCallback(d=>d==="/search"&&r?.get("newFrontendContextUUID")||d.startsWith("/page/new")&&r?.get("newFrontendContextUUID")||d==="/search/new",[r]),u=f.useCallback(d=>{if((d?.split("?")[0]??"")===(s?.split("?")[0]??"")||c(d))return;const p=s;a(d),al({name:"pageview",data:{internalReferrer:p??void 0,colorScheme:i},session:l??void 0})},[i,c,s,l]);return f.useEffect(()=>{n&&u(n)},[u,n]),o.jsx(o.Fragment,{children:t})});Zbe.displayName="PageviewTemplate";const _yt=({inviteLink:e,hasCopied:t,onCopyLink:n,email:r,onEmailChange:s,onSendInvitation:a,isSending:i,justSentEmail:l,selectedInvite:c,isMobileUserAgent:u})=>o.jsxs(o.Fragment,{children:[o.jsx(Wr,{value:e,onChange:()=>{},disabled:!0,placeholder:"Generating invite link...",isMobileUserAgent:u,pill:!1}),o.jsx(pe,{variant:"primaryGhost",text:t?"Copied!":"Copy invitation link",onClick:n,icon:t?Ar:xp,fullWidth:!0,disabled:!e}),o.jsxs("div",{className:"flex items-center py-2",children:[o.jsx("div",{className:"h-two from-subtler via-subtler flex-1 bg-gradient-to-l via-75% to-transparent"}),o.jsx(F,{variant:"base",color:"light",className:"px-4",children:"OR"}),o.jsx("div",{className:"h-two from-subtler via-subtler flex-1 bg-gradient-to-r via-75% to-transparent"})]}),o.jsx(Wr,{value:r,onChange:s,placeholder:"Enter email address...",type:"email",disabled:!c||!!l,isMobileUserAgent:u,pill:!1,onKeyDown:d=>{d.key==="Enter"&&r.trim()&&!i&&!l&&a()}}),o.jsx(pe,{variant:"border",text:l?"Invitation sent!":"Send invitation",onClick:a,icon:l?Ar:que,disabled:!r.trim()||i||!!l||!c,isLoading:i,fullWidth:!0}),o.jsx("div",{className:"my-3",children:o.jsx("div",{className:"h-two via-subtle bg-gradient-to-r from-transparent from-[-10%] via-50% to-transparent to-[110%]"})})]});var gg;(function(e){e[e.Ungenerated=0]="Ungenerated",e[e.Generating=1]="Generating",e[e.Generated=2]="Generated",e[e.Sent=3]="Sent",e[e.Claimed=4]="Claimed"})(gg||(gg={}));const wyt=({className:e="",style:t,onClick:n,invite:r,isModal:s=!1,responsive:a=!1,claimed:i=!1,sent:l=!1})=>{const{session:c}=Nt(),{isMobileStyle:u}=Ce(),d=c?.user?.image,[m,p]=f.useState(!1),h=f.useMemo(()=>`/static/images/comet-invite/avatar/${r.code.split("").reduce((z,$)=>z+$.charCodeAt(0),0)%10+1}.png`,[r.code]),g=Av(.5),y=Av(.5),x=Av(0),[v,b]=f.useState({stiffness:150,damping:30,mass:1}),[_,w]=f.useState({stiffness:300,damping:30}),C=f.useRef(!1),S=Xf(y,[0,1],[u?-5:-20,u?5:20]),E=Xf(g,[0,1],[u?5:20,u?-5:-20]),M=eh(S,v),k=eh(E,v),N=Xf(g,[0,1],[u?-10:-30,u?10:30]),P=Xf(y,[0,1],[u?10:30,u?-10:-30]),L=eh(0,v),O=eh(N,v),A=eh(P,v),j=Xf([g,y,x],([D,W,z])=>{const $=D,X=W,q=z,Y=Math.max(Math.abs($-.5),Math.abs(X-.5));return q*Y*1}),T=eh(j,_),I=D=>{C.current||(C.current=!0,b({stiffness:150,damping:30,mass:1}),w({stiffness:300,damping:30}));const W=D.currentTarget.getBoundingClientRect(),{width:z,height:$}=W,X=D.clientX-W.left,q=D.clientY-W.top;g.set(X/z),y.set(q/$),x.set(1),L.set(50)},U=()=>{C.current=!1,g.set(.5),y.set(.5),x.set(0),L.set(0)},B=o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-sm mb-sm flex shrink-0 items-center justify-between",children:[d&&!i&&!l?o.jsx(Pt,{size:"base",user:d,showBackground:!1,className:"size-6"}):o.jsx("img",{src:h,alt:"Comet avatar",className:"size-6 rounded-full",loading:"lazy"}),o.jsx(le,{icon:wi,size:"base",className:"text-white"})]}),o.jsx("div",{className:"mx-sm flex-1",children:o.jsxs("div",{className:"relative w-full",style:{aspectRatio:"3 / 4"},children:[o.jsx(ve.img,{loading:"lazy",onLoad:()=>p(!0),initial:{opacity:0},animate:{opacity:m?1:0},transition:{duration:.3},src:r.image_url??"/static/images/comet-invite/invite-background.png",className:V("absolute inset-0 size-full rounded-[16px] bg-[#000000] object-cover",{"contrast-75":i||l}),alt:"Invite background",style:{boxShadow:"0px 5px 6px 0px rgba(0, 0, 0, 0.05)"}}),(i||l)&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(le,{icon:i?a7e:que,size:"4xl",className:"text-white"})})})]})}),o.jsxs("div",{className:"p-sm mt-sm flex shrink-0 items-center justify-between font-mono text-white",children:[o.jsx("div",{className:"text-xs",children:"Comet Invitation"}),o.jsxs("div",{className:"text-light text-xs opacity-50",children:["#",r.code.slice(-4)]})]}),o.jsx(ve.div,{className:"pointer-events-none absolute inset-0 rounded-[16px] [mix-blend-mode:overlay]",style:{background:Xf([g,y],([D,W])=>`radial-gradient(farthest-corner circle at ${D*100}% ${W*100}%, hsla(0, 0%, 100%, 0.9) 10%, hsla(0, 0%, 100%, 0.75) 20%, hsla(0, 0%, 100%, 0) 80%)`),opacity:T}})]});return n?o.jsx(ve.button,{type:"button",layout:!0,layoutId:`card-container-${r.code}`,onClick:n,onMouseMove:I,onMouseLeave:U,style:{...t,width:a?"100%":s?335:235,boxShadow:"0px 520px 146px 0px rgba(0, 0, 0, 0.01), 0px 333px 133px 0px rgba(0, 0, 0, 0.04), 0px 83px 83px 0px rgba(0, 0, 0, 0.26), 0px 21px 46px 0px rgba(0, 0, 0, 0.29)",transformStyle:"preserve-3d",rotateX:M,rotateY:k,x:O,y:A,z:L},className:V("p-sm md:p-md flex cursor-pointer flex-col items-stretch rounded-[16px] border-0 bg-[#1F2121]",e,{"saturate-0":i||l}),"aria-label":`View invite ${r.code.slice(-4)}`,children:B}):o.jsx(ve.div,{layout:!0,layoutId:`card-container-${r.code}`,onMouseMove:I,onMouseLeave:U,style:{...t,width:a?"100%":s?335:235,boxShadow:"0px 520px 146px 0px rgba(0, 0, 0, 0.01), 0px 333px 133px 0px rgba(0, 0, 0, 0.04), 0px 83px 83px 0px rgba(0, 0, 0, 0.26), 0px 21px 46px 0px rgba(0, 0, 0, 0.29)",transformStyle:"preserve-3d",rotateX:M,rotateY:k,x:O,y:A,z:L},className:V("p-sm md:p-md flex flex-col rounded-[16px] bg-[#1F2121]",e,{"saturate-0":i||l}),children:B})},Jbe=R.memo(wyt);Jbe.displayName="InviteCardContent";const Cyt=({state:e,className:t=""})=>o.jsx("div",{className:`border-subtlest bg-subtler relative flex items-center justify-center rounded-lg border border-dashed ${t}`,style:{width:"235px",height:"350px"},children:e===gg.Generating?o.jsx(ve.div,{animate:{scale:[1,1.3,1]},transition:{duration:.8,repeat:1/0,ease:"easeInOut"},children:o.jsx(le,{icon:wi,size:"xl",className:"text-foreground"})}):o.jsx(le,{icon:wi,size:"xl",className:"text-foreground"})}),e_e=R.memo(Cyt);e_e.displayName="InviteCardPlaceholder";const Syt=({state:e=gg.Generated,onClick:t,invite:n,isModal:r=!1,responsive:s=!1,claimed:a=!1})=>{const i=e===gg.Claimed||a,l=e===gg.Sent;return o.jsx(o.Fragment,{children:n?o.jsx("div",{style:{perspective:"1000px"},children:o.jsx(Jbe,{invite:n,onClick:t,isModal:r,responsive:s,claimed:i,sent:l})}):o.jsx(e_e,{state:e})})},t_e=R.memo(Syt);t_e.displayName="InviteCard";const Eyt=({reason:e,onNoInvites:t,source:n,onContinue:r})=>{const{trackEvent:s}=je(),[a,i]=f.useState(null),[l,c]=f.useState(!0),[u,d]=f.useState(null),[m,p]=f.useState(""),[h,g]=f.useState(!1),[y,x]=f.useState(!1),[v,b]=f.useState(!1),[_,w]=f.useState(null),[C,S]=f.useState(0),E=f.useRef(!1),M=f.useRef(!1),k=f.useCallback(T=>{p(T),T.trim()&&x(!0)},[p,x]),N=f.useCallback(()=>{y?s("comet invite flow continued",{source:n}):s("comet invite flow skipped",{source:n}),r?.()},[y,s,n,r]),P=f.useCallback(async T=>{try{const I=await TJ({reason:e});I?.invite&&(s("comet invite code generated",{source:n}),d(I.invite),i({...T,one_time_invites:[I.invite,...T.one_time_invites||[]]}))}catch(I){ne.error("Failed to generate invite:",I)}},[e,s,n]),L=f.useCallback(async()=>{c(!0);try{const T=await P0e({reason:e});if(!T||T.remaining_invites===0){t?.();return}if(s("comet invite flow viewed",{source:n}),i(T),M.current||(S(T.remaining_invites),M.current=!0),!E.current){E.current=!0;try{await P(T)}finally{E.current=!1}}c(!1)}catch(T){ne.error("Failed to load or generate invite:",T),t?.()}},[e,s,n,P,t]),O=f.useCallback(()=>{if(!u)return;const T=`https://perplexity.ai/browser/claim/${u.code}`;navigator.clipboard.writeText(T).then(()=>{g(!0),x(!0),s("comet invite link copied",{source:n}),setTimeout(()=>g(!1),2e3)}).catch(I=>{ne.error("Failed to copy invite link:",I)})},[u,s,n]),A=f.useCallback(async()=>{if(!(!u||!m.trim()||v||!a)){b(!0),x(!0);try{await clt({reason:e,email:m,inviteCode:u.code}),s("comet invite email sent",{source:n});const T=Math.max(0,C-1);S(T);const I=Math.max(0,a.remaining_invites-1),U=a.one_time_invites.map(B=>B.code===u.code?{...B,email_sent:!0}:B);if(i({...a,remaining_invites:I,one_time_invites:U}),w(m),p(""),T>0){setTimeout(()=>{w(null)},1e3);const B=await TJ({reason:e});B?.invite&&(s("comet invite code generated",{source:n}),d(B.invite),i(D=>D?{...D,one_time_invites:[B.invite,...U]}:null))}else setTimeout(()=>{t?.()},1500)}catch(T){ne.error("Failed to send invite:",T)}finally{b(!1)}}},[u,m,v,a,s,C,e,n,t]),j=u?`https://perplexity.ai/browser/claim/${u.code}`:"";return{invitesData:a,loading:l,selectedInvite:u,email:m,setEmail:p,hasCopied:h,hasInteracted:y,setHasInteracted:x,isSending:v,justSentEmail:_,availableInvites:C,inviteLink:j,loadInvitesData:L,handleCopyLink:O,handleEmailChange:k,handleSendInvitation:A,handleContinue:N,generateNewInvite:P}},Myt=({actionsFinished:e,handleNext:t,promptConfirmation:n,fullWidth:r=!1})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),l=f.useCallback(()=>{n?i(!0):t()},[t,n]),c=f.useCallback(()=>{i(!1)},[]),u=f.useCallback(()=>{i(!1),t()},[t]);return o.jsxs(o.Fragment,{children:[o.jsx(pe,{variant:e?"primary":"common",text:s(e?{defaultMessage:"Continue",id:"acrOozm08x"}:{defaultMessage:"Skip for now",id:"WYzHAIKZxl"}),trailingComponent:e?o.jsx(a_,{size:20}):void 0,onClick:l,fullWidth:r}),o.jsx(_5,{isOpen:a,onClose:c,message:s({defaultMessage:"Are you sure you want to skip setup?",id:"IDp4IiGsos"}),subtitle:s({defaultMessage:"Completing these steps makes your Comet Assistant smarter, faster, and unlocks powerful workflows. You may experience suboptimal results if left incomplete.",id:"ZUDl5XeEnm"}),renderCloseButton:!1,variant:"medium",modalClassname:"!max-w-[520px]",footerContent:o.jsxs("div",{className:"gap-sm flex justify-end",children:[o.jsx(Te,{text:s({defaultMessage:"Skip anyway",id:"x3kdOSc6+J"}),onClick:u}),o.jsx(pe,{variant:"primary",text:s({defaultMessage:"Finish setup",id:"G09l5K24Rl"}),onClick:c})]})})]})},kyt=({isOpen:e,onClose:t})=>{const{$t:n}=Z(),{isMobileStyle:r,isMobileUserAgent:s}=Ce(),{loading:a,selectedInvite:i,email:l,hasCopied:c,hasInteracted:u,isSending:d,justSentEmail:m,availableInvites:p,inviteLink:h,loadInvitesData:g,handleCopyLink:y,handleEmailChange:x,handleSendInvitation:v,handleContinue:b}=Eyt({reason:"invite-friends-modal",onNoInvites:t,source:"comet-ntp",onContinue:t});return f.useEffect(()=>{e&&g()},[e,g]),f.useEffect(()=>{if(!e)return;const _=document.documentElement.style.overflow,w=document.body.style.overflow;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",()=>{document.documentElement.style.overflow=_,document.body.style.overflow=w}},[e]),!e||a?null:Qs.createPortal(o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"bg-backdrop/80 absolute inset-0 backdrop-blur-sm"}),o.jsxs(ve.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-base relative max-h-[90vh] w-full max-w-4xl overflow-auto rounded-2xl px-8 pb-8 pt-12 shadow-2xl",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(F,{variant:"display",className:"font-editorial mb-2 text-5xl font-light",children:n({defaultMessage:"Invite a friend to Comet",id:"EnSyt8JS7a"})}),o.jsx(F,{color:"light",children:n({defaultMessage:"Comet is invite-only. Share with friends before your invites expire.",id:"OYCTnCd3rt"})}),o.jsx(F,{color:"light",className:"font-bold",children:n({defaultMessage:"You have {count, plural, one {# invitation} other {# invitations}} left.",id:"yml4YDxsHX"},{count:p})})]}),o.jsxs("div",{className:`flex ${r?"flex-col items-center":"flex-row"} items-start justify-center gap-8 px-14`,children:[o.jsx("div",{className:`flex ${r?"w-auto justify-center":"w-[45%] justify-end"} max-w-xs items-start`,children:i&&o.jsx("div",{className:"-mt-12 scale-[0.81]",children:o.jsx(t_e,{invite:i,isModal:!0,responsive:!1})})}),o.jsxs("div",{className:`flex ${r?"w-full px-4":"w-[55%] px-4"} max-w-sm flex-col gap-5`,children:[o.jsx(_yt,{inviteLink:h,hasCopied:c,onCopyLink:y,email:l,onEmailChange:x,onSendInvitation:v,isSending:d,justSentEmail:m,selectedInvite:i,isMobileUserAgent:s}),o.jsx(Myt,{actionsFinished:u,handleNext:b,fullWidth:!0})]})]})]})]}),document.body)},n_e=R.memo(kyt);n_e.displayName="CometInviteModal";const Tyt="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart.mp4",Nyt="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama.mp4",jyt="https://r2cdn.perplexity.ai/comet/cmp_find_emails.mp4",Ayt="https://r2cdn.perplexity.ai/comet/cmp_find_creatine.mp4",Iyt="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping.mp4",Ryt="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage.mp4",Pyt="https://r2cdn.perplexity.ai/comet/cmp_walking_route.mp4",Oyt="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing.mp4",Lyt="https://r2cdn.perplexity.ai/comet/grocery_cart-min.png",Dyt="https://r2cdn.perplexity.ai/comet/reddit_ama-min.png",Fyt="https://r2cdn.perplexity.ai/comet/find_emails-min.png",Uyt="https://r2cdn.perplexity.ai/comet/find_creatine-min.png",Byt="https://r2cdn.perplexity.ai/comet/bikes_shipping-min.png",Vyt="https://r2cdn.perplexity.ai/comet/summarize_webpage-min.png",$yt="https://r2cdn.perplexity.ai/comet/tour_plan-min.png",Wyt="https://r2cdn.perplexity.ai/comet/v2v_browsing-min.png",Hyt="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart_v2.mp4",zyt="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama_v3.mp4",Gyt="https://r2cdn.perplexity.ai/comet/cmp_find_emails_v2.mp4",qyt="https://r2cdn.perplexity.ai/comet/cmp_find_creatine_v2.mp4",Kyt="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping_v3.mp4",Yyt="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage_v2.mp4",Qyt="https://r2cdn.perplexity.ai/comet/cmp_walking_route_v2.mp4",Xyt="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing_v2.mp4";function Zyt(){const{$t:e}=Z();return f.useMemo(()=>[{videoSrc:jyt,fullVideoSrc:Gyt,previewSrc:Fyt,label:e({id:"U51r44Fr7z",defaultMessage:"Master Your Inbox and Calendar"})},{videoSrc:Tyt,fullVideoSrc:Hyt,previewSrc:Lyt,label:e({id:"7rWLu0GI8D",defaultMessage:"Delegate the Basics"})},{videoSrc:Ryt,fullVideoSrc:Yyt,previewSrc:Vyt,label:e({id:"0MeQ1Iywio",defaultMessage:"Get the Gist in Seconds"})},{videoSrc:Pyt,fullVideoSrc:Qyt,previewSrc:$yt,label:e({id:"zX2SKiQpSn",defaultMessage:"Automate the Clicks"})},{videoSrc:Oyt,fullVideoSrc:Xyt,previewSrc:Wyt,label:e({id:"k3OgfsBfr6",defaultMessage:"Browse with Your Voice"})},{videoSrc:Ayt,fullVideoSrc:qyt,previewSrc:Uyt,label:e({id:"Fi5Bt5+lYj",defaultMessage:"Quickly Find Answers in Your History"})},{videoSrc:Nyt,fullVideoSrc:zyt,previewSrc:Dyt,label:e({id:"HHOfPSzTkI",defaultMessage:"Get Insights in One Click"})},{videoSrc:Iyt,fullVideoSrc:Kyt,previewSrc:Byt,label:e({id:"ytn1Ld8ocW",defaultMessage:"Reference Any Tab for Precise Answers"})}],[e])}function Jyt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const j5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _x(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function RV(e){return"nodeType"in e}function Ja(e){var t,n;return e?_x(e)?e:RV(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function PV(e){const{Document:t}=Ja(e);return e instanceof t}function G_(e){return _x(e)?!1:e instanceof Ja(e).HTMLElement}function r_e(e){return e instanceof Ja(e).SVGElement}function wx(e){return e?_x(e)?e.document:RV(e)?PV(e)?e:G_(e)||r_e(e)?e.ownerDocument:document:document:document}const hl=j5?f.useLayoutEffect:f.useEffect;function A5(e){const t=f.useRef(e);return hl(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function ext(){const e=f.useRef(null),t=f.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ub(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return hl(()=>{n.current!==e&&(n.current=e)},t),n}function q_(e,t){const n=f.useRef();return f.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function rM(e){const t=A5(e),n=f.useRef(null),r=f.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function sM(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let GA={};function K_(e,t){return f.useMemo(()=>{if(t)return t;const n=GA[e]==null?0:GA[e]+1;return GA[e]=n,e+"-"+n},[e,t])}function s_e(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,i)=>{const l=Object.entries(i);for(const[c,u]of l){const d=a[c];d!=null&&(a[c]=d+e*u)}return a},{...t})}}const yg=s_e(1),db=s_e(-1);function txt(e){return"clientX"in e&&"clientY"in e}function I5(e){if(!e)return!1;const{KeyboardEvent:t}=Ja(e.target);return t&&e instanceof t}function nxt(e){if(!e)return!1;const{TouchEvent:t}=Ja(e.target);return t&&e instanceof t}function aM(e){if(nxt(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return txt(e)?{x:e.clientX,y:e.clientY}:null}const Ym=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ym.Translate.toString(e),Ym.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Gee="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function rxt(e){return e.matches(Gee)?e:e.querySelector(Gee)}const sxt={display:"none"};function axt(e){let{id:t,value:n}=e;return R.createElement("div",{id:t,style:sxt},n)}function ixt(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return R.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function oxt(){const[e,t]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const a_e=f.createContext(null);function lxt(e){const t=f.useContext(a_e);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function cxt(){const[e]=f.useState(()=>new Set),t=f.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[f.useCallback(r=>{let{type:s,event:a}=r;e.forEach(i=>{var l;return(l=i[s])==null?void 0:l.call(i,a)})},[e]),t]}const uxt={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},dxt={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function fxt(e){let{announcements:t=dxt,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=uxt}=e;const{announce:a,announcement:i}=oxt(),l=K_("DndLiveRegion"),[c,u]=f.useState(!1);if(f.useEffect(()=>{u(!0)},[]),lxt(f.useMemo(()=>({onDragStart(m){let{active:p}=m;a(t.onDragStart({active:p}))},onDragMove(m){let{active:p,over:h}=m;t.onDragMove&&a(t.onDragMove({active:p,over:h}))},onDragOver(m){let{active:p,over:h}=m;a(t.onDragOver({active:p,over:h}))},onDragEnd(m){let{active:p,over:h}=m;a(t.onDragEnd({active:p,over:h}))},onDragCancel(m){let{active:p,over:h}=m;a(t.onDragCancel({active:p,over:h}))}}),[a,t])),!c)return null;const d=R.createElement(R.Fragment,null,R.createElement(axt,{id:r,value:s.draggable}),R.createElement(ixt,{id:l,announcement:i}));return n?Qs.createPortal(d,n):d}var xs;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(xs||(xs={}));function iM(){}function mxt(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function pxt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const gl=Object.freeze({x:0,y:0});function OV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function hxt(e,t){const n=aM(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function LV(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function gxt(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function o9(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function i_e(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function qee(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Fdn=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=qee(t,t.left,t.top),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=OV(qee(c),s);a.push({id:l,data:{droppableContainer:i,value:u}})}}return a.sort(LV)},yxt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=o9(t),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=o9(c),d=s.reduce((p,h,g)=>p+OV(u[g],h),0),m=Number((d/4).toFixed(4));a.push({id:l,data:{droppableContainer:i,value:m}})}}return a.sort(LV)};function xxt(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=s-r,l=a-n;if(r<s&&n<a){const c=t.width*t.height,u=e.width*e.height,d=i*l,m=d/(c+u-d);return Number(m.toFixed(4))}return 0}const vxt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const a of r){const{id:i}=a,l=n.get(i);if(l){const c=xxt(l,t);c>0&&s.push({id:i,data:{droppableContainer:a,value:c}})}}return s.sort(gxt)};function bxt(e,t){const{top:n,left:r,bottom:s,right:a}=t;return n<=e.y&&e.y<=s&&r<=e.x&&e.x<=a}const _xt=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const s=[];for(const a of t){const{id:i}=a,l=n.get(i);if(l&&bxt(r,l)){const u=o9(l).reduce((m,p)=>m+OV(r,p),0),d=Number((u/4).toFixed(4));s.push({id:i,data:{droppableContainer:a,value:d}})}}return s.sort(LV)};function wxt(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function o_e(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:gl}function Cxt(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Sxt=Cxt(1);function l_e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ext(e,t,n){const r=l_e(t);if(!r)return e;const{scaleX:s,scaleY:a,x:i,y:l}=r,c=e.left-i-(1-s)*parseFloat(n),u=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?e.width/s:e.width,m=a?e.height/a:e.height;return{width:d,height:m,top:u,right:c+d,bottom:u+m,left:c}}const Mxt={ignoreTransform:!1};function Cx(e,t){t===void 0&&(t=Mxt);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Ja(e).getComputedStyle(e);u&&(n=Ext(n,u,d))}const{top:r,left:s,width:a,height:i,bottom:l,right:c}=n;return{top:r,left:s,width:a,height:i,bottom:l,right:c}}function Kee(e){return Cx(e,{ignoreTransform:!0})}function kxt(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Txt(e,t){return t===void 0&&(t=Ja(e).getComputedStyle(e)),t.position==="fixed"}function Nxt(e,t){t===void 0&&(t=Ja(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=t[s];return typeof a=="string"?n.test(a):!1})}function R5(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(PV(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!G_(s)||r_e(s)||n.includes(s))return n;const a=Ja(e).getComputedStyle(s);return s!==e&&Nxt(s,a)&&n.push(s),Txt(s,a)?n:r(s.parentNode)}return e?r(e):n}function c_e(e){const[t]=R5(e,1);return t??null}function qA(e){return!j5||!e?null:_x(e)?e:RV(e)?PV(e)||e===wx(e).scrollingElement?window:G_(e)?e:null:null}function u_e(e){return _x(e)?e.scrollX:e.scrollLeft}function d_e(e){return _x(e)?e.scrollY:e.scrollTop}function l9(e){return{x:u_e(e),y:d_e(e)}}var ks;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ks||(ks={}));function f_e(e){return!j5||!e?!1:e===document.scrollingElement}function m_e(e){const t={x:0,y:0},n=f_e(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const jxt={x:.2,y:.2};function Axt(e,t,n,r,s){let{top:a,left:i,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=jxt);const{isTop:u,isBottom:d,isLeft:m,isRight:p}=m_e(e),h={x:0,y:0},g={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!u&&a<=t.top+y.height?(h.y=ks.Backward,g.y=r*Math.abs((t.top+y.height-a)/y.height)):!d&&c>=t.bottom-y.height&&(h.y=ks.Forward,g.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!p&&l>=t.right-y.width?(h.x=ks.Forward,g.x=r*Math.abs((t.right-y.width-l)/y.width)):!m&&i<=t.left+y.width&&(h.x=ks.Backward,g.x=r*Math.abs((t.left+y.width-i)/y.width)),{direction:h,speed:g}}function Ixt(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function p_e(e){return e.reduce((t,n)=>yg(t,l9(n)),gl)}function Rxt(e){return e.reduce((t,n)=>t+u_e(n),0)}function Pxt(e){return e.reduce((t,n)=>t+d_e(n),0)}function h_e(e,t){if(t===void 0&&(t=Cx),!e)return;const{top:n,left:r,bottom:s,right:a}=t(e);c_e(e)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Oxt=[["x",["left","right"],Rxt],["y",["top","bottom"],Pxt]];class DV{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=R5(n),s=p_e(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,l]of Oxt)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=l(r),d=s[a]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $v{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Lxt(e){const{EventTarget:t}=Ja(e);return e instanceof t?e:wx(e)}function KA(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var vo;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(vo||(vo={}));function Yee(e){e.preventDefault()}function Dxt(e){e.stopPropagation()}var Sn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Sn||(Sn={}));const g_e={start:[Sn.Space,Sn.Enter],cancel:[Sn.Esc],end:[Sn.Space,Sn.Enter,Sn.Tab]},Fxt=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Sn.Right:return{...n,x:n.x+25};case Sn.Left:return{...n,x:n.x-25};case Sn.Down:return{...n,y:n.y+25};case Sn.Up:return{...n,y:n.y-25}}};class y_e{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new $v(wx(n)),this.windowListeners=new $v(Ja(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(vo.Resize,this.handleCancel),this.windowListeners.add(vo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(vo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&h_e(r),n(gl)}handleKeyDown(t){if(I5(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=g_e,coordinateGetter:i=Fxt,scrollBehavior:l="smooth"}=s,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:gl;this.referenceCoordinates||(this.referenceCoordinates=d);const m=i(t,{active:n,context:r.current,currentCoordinates:d});if(m){const p=db(m,d),h={x:0,y:0},{scrollableAncestors:g}=r.current;for(const y of g){const x=t.code,{isTop:v,isRight:b,isLeft:_,isBottom:w,maxScroll:C,minScroll:S}=m_e(y),E=Ixt(y),M={x:Math.min(x===Sn.Right?E.right-E.width/2:E.right,Math.max(x===Sn.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(x===Sn.Down?E.bottom-E.height/2:E.bottom,Math.max(x===Sn.Down?E.top:E.top+E.height/2,m.y))},k=x===Sn.Right&&!b||x===Sn.Left&&!_,N=x===Sn.Down&&!w||x===Sn.Up&&!v;if(k&&M.x!==m.x){const P=y.scrollLeft+p.x,L=x===Sn.Right&&P<=C.x||x===Sn.Left&&P>=S.x;if(L&&!p.y){y.scrollTo({left:P,behavior:l});return}L?h.x=y.scrollLeft-P:h.x=x===Sn.Right?y.scrollLeft-C.x:y.scrollLeft-S.x,h.x&&y.scrollBy({left:-h.x,behavior:l});break}else if(N&&M.y!==m.y){const P=y.scrollTop+p.y,L=x===Sn.Down&&P<=C.y||x===Sn.Up&&P>=S.y;if(L&&!p.x){y.scrollTo({top:P,behavior:l});return}L?h.y=y.scrollTop-P:h.y=x===Sn.Down?y.scrollTop-C.y:y.scrollTop-S.y,h.y&&y.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,yg(db(m,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}y_e.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=g_e,onActivation:s}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function Qee(e){return!!(e&&"distance"in e)}function Xee(e){return!!(e&&"delay"in e)}class FV{constructor(t,n,r){var s;r===void 0&&(r=Lxt(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=wx(i),this.documentListeners=new $v(this.document),this.listeners=new $v(r),this.windowListeners=new $v(Ja(i)),this.initialCoordinates=(s=aM(a))!=null?s:gl,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(vo.Resize,this.handleCancel),this.windowListeners.add(vo.DragStart,Yee),this.windowListeners.add(vo.VisibilityChange,this.handleCancel),this.windowListeners.add(vo.ContextMenu,Yee),this.documentListeners.add(vo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Xee(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Qee(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(vo.Click,Dxt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(vo.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!s)return;const c=(n=aM(t))!=null?n:gl,u=db(s,c);if(!r&&l){if(Qee(l)){if(l.tolerance!=null&&KA(u,l.tolerance))return this.handleCancel();if(KA(u,l.distance))return this.handleStart()}if(Xee(l)&&KA(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),i(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Sn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Uxt={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class UV extends FV{constructor(t){const{event:n}=t,r=wx(n.target);super(t,Uxt,r)}}UV.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Bxt={move:{name:"mousemove"},end:{name:"mouseup"}};var c9;(function(e){e[e.RightClick=2]="RightClick"})(c9||(c9={}));class Vxt extends FV{constructor(t){super(t,Bxt,wx(t.event.target))}}Vxt.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===c9.RightClick?!1:(r?.({event:n}),!0)}}];const YA={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $xt extends FV{constructor(t){super(t,YA)}static setup(){return window.addEventListener(YA.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(YA.move.name,t)};function t(){}}}$xt.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var Wv;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Wv||(Wv={}));var oM;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(oM||(oM={}));function Wxt(e){let{acceleration:t,activator:n=Wv.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:i=5,order:l=oM.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:m,threshold:p}=e;const h=zxt({delta:m,disabled:!a}),[g,y]=ext(),x=f.useRef({x:0,y:0}),v=f.useRef({x:0,y:0}),b=f.useMemo(()=>{switch(n){case Wv.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Wv.DraggableRect:return s}},[n,s,c]),_=f.useRef(null),w=f.useCallback(()=>{const S=_.current;if(!S)return;const E=x.current.x*v.current.x,M=x.current.y*v.current.y;S.scrollBy(E,M)},[]),C=f.useMemo(()=>l===oM.TreeOrder?[...u].reverse():u,[l,u]);f.useEffect(()=>{if(!a||!u.length||!b){y();return}for(const S of C){if(r?.(S)===!1)continue;const E=u.indexOf(S),M=d[E];if(!M)continue;const{direction:k,speed:N}=Axt(S,M,b,t,p);for(const P of["x","y"])h[P][k[P]]||(N[P]=0,k[P]=0);if(N.x>0||N.y>0){y(),_.current=S,g(w,i),x.current=N,v.current=k;return}}x.current={x:0,y:0},v.current={x:0,y:0},y()},[t,w,r,y,a,i,JSON.stringify(b),JSON.stringify(h),g,u,C,d,JSON.stringify(p)])}const Hxt={x:{[ks.Backward]:!1,[ks.Forward]:!1},y:{[ks.Backward]:!1,[ks.Forward]:!1}};function zxt(e){let{delta:t,disabled:n}=e;const r=sM(t);return q_(s=>{if(n||!r||!s)return Hxt;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ks.Backward]:s.x[ks.Backward]||a.x===-1,[ks.Forward]:s.x[ks.Forward]||a.x===1},y:{[ks.Backward]:s.y[ks.Backward]||a.y===-1,[ks.Forward]:s.y[ks.Forward]||a.y===1}}},[n,t,r])}function Gxt(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return q_(s=>{var a;return t==null?null:(a=r??s)!=null?a:null},[r,t])}function qxt(e,t){return f.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var fb;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(fb||(fb={}));var u9;(function(e){e.Optimized="optimized"})(u9||(u9={}));const Zee=new Map;function Kxt(e,t){let{dragging:n,dependencies:r,config:s}=t;const[a,i]=f.useState(null),{frequency:l,measure:c,strategy:u}=s,d=f.useRef(e),m=x(),p=ub(m),h=f.useCallback(function(v){v===void 0&&(v=[]),!p.current&&i(b=>b===null?v:b.concat(v.filter(_=>!b.includes(_))))},[p]),g=f.useRef(null),y=q_(v=>{if(m&&!n)return Zee;if(!v||v===Zee||d.current!==e||a!=null){const b=new Map;for(let _ of e){if(!_)continue;if(a&&a.length>0&&!a.includes(_.id)&&_.rect.current){b.set(_.id,_.rect.current);continue}const w=_.node.current,C=w?new DV(c(w),w):null;_.rect.current=C,C&&b.set(_.id,C)}return b}return v},[e,a,n,m,c]);return f.useEffect(()=>{d.current=e},[e]),f.useEffect(()=>{m||h()},[n,m]),f.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),f.useEffect(()=>{m||typeof l!="number"||g.current!==null||(g.current=setTimeout(()=>{h(),g.current=null},l))},[l,m,h,...r]),{droppableRects:y,measureDroppableContainers:h,measuringScheduled:a!=null};function x(){switch(u){case fb.Always:return!1;case fb.BeforeDragging:return n;default:return!n}}}function BV(e,t){return q_(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Yxt(e,t){return BV(e,t)}function Qxt(e){let{callback:t,disabled:n}=e;const r=A5(t),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return f.useEffect(()=>()=>s?.disconnect(),[s]),s}function P5(e){let{callback:t,disabled:n}=e;const r=A5(t),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return f.useEffect(()=>()=>s?.disconnect(),[s]),s}function Xxt(e){return new DV(Cx(e),e)}function Jee(e,t,n){t===void 0&&(t=Xxt);const[r,s]=f.useState(null);function a(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const i=Qxt({callback(c){if(e)for(const u of c){const{type:d,target:m}=u;if(d==="childList"&&m instanceof HTMLElement&&m.contains(e)){a();break}}}}),l=P5({callback:a});return hl(()=>{a(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function Zxt(e){const t=BV(e);return o_e(e,t)}const ete=[];function Jxt(e){const t=f.useRef(e),n=q_(r=>e?r&&r!==ete&&e&&t.current&&e.parentNode===t.current.parentNode?r:R5(e):ete,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function e0t(e){const[t,n]=f.useState(null),r=f.useRef(e),s=f.useCallback(a=>{const i=qA(a.target);i&&n(l=>l?(l.set(i,l9(i)),new Map(l)):null)},[]);return f.useEffect(()=>{const a=r.current;if(e!==a){i(a);const l=e.map(c=>{const u=qA(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,l9(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(a)};function i(l){l.forEach(c=>{const u=qA(c);u?.removeEventListener("scroll",s)})}},[s,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>yg(a,i),gl):p_e(e):gl,[e,t])}function tte(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const r=e!==gl;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?db(e,n.current):gl}function t0t(e){f.useEffect(()=>{if(!j5)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function n0t(e,t){return f.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=i=>{a(i,t)},n},{}),[e,t])}function x_e(e){return f.useMemo(()=>e?kxt(e):null,[e])}const nte=[];function r0t(e,t){t===void 0&&(t=Cx);const[n]=e,r=x_e(n?Ja(n):null),[s,a]=f.useState(nte);function i(){a(()=>e.length?e.map(c=>f_e(c)?r:new DV(t(c),c)):nte)}const l=P5({callback:i});return hl(()=>{l?.disconnect(),i(),e.forEach(c=>l?.observe(c))},[e]),s}function v_e(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return G_(t)?t:e}function s0t(e){let{measure:t}=e;const[n,r]=f.useState(null),s=f.useCallback(u=>{for(const{target:d}of u)if(G_(d)){r(m=>{const p=t(d);return m?{...m,width:p.width,height:p.height}:p});break}},[t]),a=P5({callback:s}),i=f.useCallback(u=>{const d=v_e(u);a?.disconnect(),d&&a?.observe(d),r(d?t(d):null)},[t,a]),[l,c]=rM(i);return f.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const a0t=[{sensor:UV,options:{}},{sensor:y_e,options:{}}],i0t={current:{}},j2={draggable:{measure:Kee},droppable:{measure:Kee,strategy:fb.WhileDragging,frequency:u9.Optimized},dragOverlay:{measure:Cx}};class Hv extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const o0t={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Hv,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:iM},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:j2,measureDroppableContainers:iM,windowRect:null,measuringScheduled:!1},b_e={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:iM,draggableNodes:new Map,over:null,measureDroppableContainers:iM},Y_=f.createContext(b_e),__e=f.createContext(o0t);function l0t(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Hv}}}function c0t(e,t){switch(t.type){case xs.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case xs.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case xs.DragEnd:case xs.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xs.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Hv(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case xs.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Hv(e.droppable.containers);return i.set(n,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case xs.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Hv(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function u0t(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=f.useContext(Y_),a=sM(r),i=sM(n?.id);return f.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!I5(a)||document.activeElement===a.target)return;const l=s.get(i);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const m=rxt(d);if(m){m.focus();break}}})}},[r,t,s,i,a]),null}function w_e(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,a)=>a({transform:s,...r}),n):n}function d0t(e){return f.useMemo(()=>({draggable:{...j2.draggable,...e?.draggable},droppable:{...j2.droppable,...e?.droppable},dragOverlay:{...j2.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function f0t(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const a=f.useRef(!1),{x:i,y:l}=typeof s=="boolean"?{x:s,y:s}:s;hl(()=>{if(!i&&!l||!t){a.current=!1;return}if(a.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const d=n(u),m=o_e(d,r);if(i||(m.x=0),l||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const p=c_e(u);p&&p.scrollBy({top:m.y,left:m.x})}},[t,i,l,r,n])}const O5=f.createContext({...gl,scaleX:1,scaleY:1});var gd;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(gd||(gd={}));const m0t=f.memo(function(t){var n,r,s,a;let{id:i,accessibility:l,autoScroll:c=!0,children:u,sensors:d=a0t,collisionDetection:m=vxt,measuring:p,modifiers:h,...g}=t;const y=f.useReducer(c0t,void 0,l0t),[x,v]=y,[b,_]=cxt(),[w,C]=f.useState(gd.Uninitialized),S=w===gd.Initialized,{draggable:{active:E,nodes:M,translate:k},droppable:{containers:N}}=x,P=E!=null?M.get(E):null,L=f.useRef({initial:null,translated:null}),O=f.useMemo(()=>{var Ke;return E!=null?{id:E,data:(Ke=P?.data)!=null?Ke:i0t,rect:L}:null},[E,P]),A=f.useRef(null),[j,T]=f.useState(null),[I,U]=f.useState(null),B=ub(g,Object.values(g)),D=K_("DndDescribedBy",i),W=f.useMemo(()=>N.getEnabled(),[N]),z=d0t(p),{droppableRects:$,measureDroppableContainers:X,measuringScheduled:q}=Kxt(W,{dragging:S,dependencies:[k.x,k.y],config:z.droppable}),Y=Gxt(M,E),G=f.useMemo(()=>I?aM(I):null,[I]),J=yr(),K=Yxt(Y,z.draggable.measure);f0t({activeNode:E!=null?M.get(E):null,config:J.layoutShiftCompensation,initialRect:K,measure:z.draggable.measure});const te=Jee(Y,z.draggable.measure,K),re=Jee(Y?Y.parentElement:null),se=f.useRef({activatorEvent:null,active:null,activeNode:Y,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=N.getNodeFor((n=se.current.over)==null?void 0:n.id),oe=s0t({measure:z.dragOverlay.measure}),ge=(r=oe.nodeRef.current)!=null?r:Y,xe=S?(s=oe.rect)!=null?s:te:null,ye=!!(oe.nodeRef.current&&oe.rect),_e=Zxt(ye?null:te),be=x_e(ge?Ja(ge):null),Ne=Jxt(S?me??Y:null),Ee=r0t(Ne),Re=w_e(h,{transform:{x:k.x-_e.x,y:k.y-_e.y,scaleX:1,scaleY:1},activatorEvent:I,active:O,activeNodeRect:te,containerNodeRect:re,draggingNodeRect:xe,over:se.current.over,overlayNodeRect:oe.rect,scrollableAncestors:Ne,scrollableAncestorRects:Ee,windowRect:be}),Ae=G?yg(G,k):null,st=e0t(Ne),it=tte(st),Se=tte(st,[te]),ue=yg(Re,it),ke=xe?Sxt(xe,Re):null,et=O&&ke?m({active:O,collisionRect:ke,droppableRects:$,droppableContainers:W,pointerCoordinates:Ae}):null,Ge=i_e(et,"id"),[ft,Qe]=f.useState(null),Ve=ye?Re:yg(Re,Se),Le=wxt(Ve,(a=ft?.rect)!=null?a:null,te),ot=f.useRef(null),vt=f.useCallback((Ke,Xe)=>{let{sensor:gt,options:zt}=Xe;if(A.current==null)return;const hn=M.get(A.current);if(!hn)return;const zn=Ke.nativeEvent,Me=new gt({active:A.current,activeNode:hn,event:zn,options:zt,context:se,onAbort($e){if(!M.get($e))return;const{onDragAbort:ut}=B.current,Bt={id:$e};ut?.(Bt),b({type:"onDragAbort",event:Bt})},onPending($e,at,ut,Bt){if(!M.get($e))return;const{onDragPending:Gn}=B.current,Zt={id:$e,constraint:at,initialCoordinates:ut,offset:Bt};Gn?.(Zt),b({type:"onDragPending",event:Zt})},onStart($e){const at=A.current;if(at==null)return;const ut=M.get(at);if(!ut)return;const{onDragStart:Bt}=B.current,gn={activatorEvent:zn,active:{id:at,data:ut.data,rect:L}};Qs.unstable_batchedUpdates(()=>{Bt?.(gn),C(gd.Initializing),v({type:xs.DragStart,initialCoordinates:$e,active:at}),b({type:"onDragStart",event:gn}),T(ot.current),U(zn)})},onMove($e){v({type:xs.DragMove,coordinates:$e})},onEnd:Ze(xs.DragEnd),onCancel:Ze(xs.DragCancel)});ot.current=Me;function Ze($e){return async function(){const{active:ut,collisions:Bt,over:gn,scrollAdjustedTranslate:Gn}=se.current;let Zt=null;if(ut&&Gn){const{cancelDrop:Hr}=B.current;Zt={activatorEvent:zn,active:ut,collisions:Bt,delta:Gn,over:gn},$e===xs.DragEnd&&typeof Hr=="function"&&await Promise.resolve(Hr(Zt))&&($e=xs.DragCancel)}A.current=null,Qs.unstable_batchedUpdates(()=>{v({type:$e}),C(gd.Uninitialized),Qe(null),T(null),U(null),ot.current=null;const Hr=$e===xs.DragEnd?"onDragEnd":"onDragCancel";if(Zt){const Ni=B.current[Hr];Ni?.(Zt),b({type:Hr,event:Zt})}})}}},[M]),Rt=f.useCallback((Ke,Xe)=>(gt,zt)=>{const hn=gt.nativeEvent,zn=M.get(zt);if(A.current!==null||!zn||hn.dndKit||hn.defaultPrevented)return;const Me={active:zn};Ke(gt,Xe.options,Me)===!0&&(hn.dndKit={capturedBy:Xe.sensor},A.current=zt,vt(gt,Xe))},[M,vt]),jt=qxt(d,Rt);t0t(d),hl(()=>{te&&w===gd.Initializing&&C(gd.Initialized)},[te,w]),f.useEffect(()=>{const{onDragMove:Ke}=B.current,{active:Xe,activatorEvent:gt,collisions:zt,over:hn}=se.current;if(!Xe||!gt)return;const zn={active:Xe,activatorEvent:gt,collisions:zt,delta:{x:ue.x,y:ue.y},over:hn};Qs.unstable_batchedUpdates(()=>{Ke?.(zn),b({type:"onDragMove",event:zn})})},[ue.x,ue.y]),f.useEffect(()=>{const{active:Ke,activatorEvent:Xe,collisions:gt,droppableContainers:zt,scrollAdjustedTranslate:hn}=se.current;if(!Ke||A.current==null||!Xe||!hn)return;const{onDragOver:zn}=B.current,Me=zt.get(Ge),Ze=Me&&Me.rect.current?{id:Me.id,rect:Me.rect.current,data:Me.data,disabled:Me.disabled}:null,$e={active:Ke,activatorEvent:Xe,collisions:gt,delta:{x:hn.x,y:hn.y},over:Ze};Qs.unstable_batchedUpdates(()=>{Qe(Ze),zn?.($e),b({type:"onDragOver",event:$e})})},[Ge]),hl(()=>{se.current={activatorEvent:I,active:O,activeNode:Y,collisionRect:ke,collisions:et,droppableRects:$,draggableNodes:M,draggingNode:ge,draggingNodeRect:xe,droppableContainers:N,over:ft,scrollableAncestors:Ne,scrollAdjustedTranslate:ue},L.current={initial:xe,translated:ke}},[O,Y,et,ke,M,ge,xe,$,N,ft,Ne,ue]),Wxt({...J,delta:k,draggingRect:ke,pointerCoordinates:Ae,scrollableAncestors:Ne,scrollableAncestorRects:Ee});const dn=f.useMemo(()=>({active:O,activeNode:Y,activeNodeRect:te,activatorEvent:I,collisions:et,containerNodeRect:re,dragOverlay:oe,draggableNodes:M,droppableContainers:N,droppableRects:$,over:ft,measureDroppableContainers:X,scrollableAncestors:Ne,scrollableAncestorRects:Ee,measuringConfiguration:z,measuringScheduled:q,windowRect:be}),[O,Y,te,I,et,re,oe,M,N,$,ft,X,Ne,Ee,z,q,be]),On=f.useMemo(()=>({activatorEvent:I,activators:jt,active:O,activeNodeRect:te,ariaDescribedById:{draggable:D},dispatch:v,draggableNodes:M,over:ft,measureDroppableContainers:X}),[I,jt,O,te,v,D,M,ft,X]);return R.createElement(a_e.Provider,{value:_},R.createElement(Y_.Provider,{value:On},R.createElement(__e.Provider,{value:dn},R.createElement(O5.Provider,{value:Le},u)),R.createElement(u0t,{disabled:l?.restoreFocus===!1})),R.createElement(fxt,{...l,hiddenTextDescribedById:D}));function yr(){const Ke=j?.autoScrollEnabled===!1,Xe=typeof c=="object"?c.enabled===!1:c===!1,gt=S&&!Ke&&!Xe;return typeof c=="object"?{...c,enabled:gt}:{enabled:gt}}}),p0t=f.createContext(null),rte="button",h0t="Draggable";function g0t(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const a=K_(h0t),{activators:i,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:m,over:p}=f.useContext(Y_),{role:h=rte,roleDescription:g="draggable",tabIndex:y=0}=s??{},x=c?.id===t,v=f.useContext(x?O5:p0t),[b,_]=rM(),[w,C]=rM(),S=n0t(i,t),E=ub(n);hl(()=>(m.set(t,{id:t,key:a,node:b,activatorNode:w,data:E}),()=>{const k=m.get(t);k&&k.key===a&&m.delete(t)}),[m,t]);const M=f.useMemo(()=>({role:h,tabIndex:y,"aria-disabled":r,"aria-pressed":x&&h===rte?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[r,h,y,x,g,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:M,isDragging:x,listeners:r?void 0:S,node:b,over:p,setNodeRef:_,setActivatorNodeRef:C,transform:v}}function C_e(){return f.useContext(__e)}const y0t="Droppable",x0t={timeout:25};function v0t(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const a=K_(y0t),{active:i,dispatch:l,over:c,measureDroppableContainers:u}=f.useContext(Y_),d=f.useRef({disabled:n}),m=f.useRef(!1),p=f.useRef(null),h=f.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:x}={...x0t,...s},v=ub(y??r),b=f.useCallback(()=>{if(!m.current){m.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),h.current=null},x)},[x]),_=P5({callback:b,disabled:g||!i}),w=f.useCallback((M,k)=>{_&&(k&&(_.unobserve(k),m.current=!1),M&&_.observe(M))},[_]),[C,S]=rM(w),E=ub(t);return f.useEffect(()=>{!_||!C.current||(_.disconnect(),m.current=!1,_.observe(C.current))},[C,_]),f.useEffect(()=>(l({type:xs.RegisterDroppable,element:{id:r,key:a,disabled:n,node:C,rect:p,data:E}}),()=>l({type:xs.UnregisterDroppable,key:a,id:r})),[r]),f.useEffect(()=>{n!==d.current.disabled&&(l({type:xs.SetDroppableDisabled,id:r,key:a,disabled:n}),d.current.disabled=n)},[r,a,n,l]),{active:i,rect:p,isOver:c?.id===r,node:C,over:c,setNodeRef:S}}function b0t(e){let{animation:t,children:n}=e;const[r,s]=f.useState(null),[a,i]=f.useState(null),l=sM(n);return!n&&!r&&l&&s(l),hl(()=>{if(!a)return;const c=r?.key,u=r?.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,a)).then(()=>{s(null)})},[t,r,a]),R.createElement(R.Fragment,null,n,r?f.cloneElement(r,{ref:i}):null)}const _0t={x:0,y:0,scaleX:1,scaleY:1};function w0t(e){let{children:t}=e;return R.createElement(Y_.Provider,{value:b_e},R.createElement(O5.Provider,{value:_0t},t))}const C0t={position:"fixed",touchAction:"none"},S0t=e=>I5(e)?"transform 250ms ease":void 0,E0t=f.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:i,rect:l,style:c,transform:u,transition:d=S0t}=e;if(!l)return null;const m=s?u:{...u,scaleX:1,scaleY:1},p={...C0t,width:l.width,height:l.height,top:l.top,left:l.left,transform:Ym.Transform.toString(m),transformOrigin:s&&r?hxt(r,l):void 0,transition:typeof d=="function"?d(r):d,...c};return R.createElement(n,{className:i,style:p,ref:t},a)}),M0t=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:a,className:i}=e;if(a!=null&&a.active)for(const[l,c]of Object.entries(a.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(a!=null&&a.dragOverlay)for(const[l,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},k0t=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Ym.Transform.toString(t)},{transform:Ym.Transform.toString(n)}]},T0t={duration:250,easing:"ease",keyframes:k0t,sideEffects:M0t({styles:{active:{opacity:"0"}}})};function N0t(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return A5((a,i)=>{if(t===null)return;const l=n.get(a);if(!l)return;const c=l.node.current;if(!c)return;const u=v_e(i);if(!u)return;const{transform:d}=Ja(i).getComputedStyle(i),m=l_e(d);if(!m)return;const p=typeof t=="function"?t:j0t(t);return h_e(c,s.draggable.measure),p({active:{id:a,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:i,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function j0t(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...T0t,...e};return a=>{let{active:i,dragOverlay:l,transform:c,...u}=a;if(!t)return;const d={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},m={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-d.x,y:c.y-d.y,...m},h=s({...u,active:i,dragOverlay:l,transform:{initial:c,final:p}}),[g]=h,y=h[h.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const x=r?.({active:i,dragOverlay:l,...u}),v=l.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(b=>{v.onfinish=()=>{x?.(),b()}})}}let ste=0;function A0t(e){return f.useMemo(()=>{if(e!=null)return ste++,ste},[e])}const Udn=R.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:i,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:m,activeNodeRect:p,containerNodeRect:h,draggableNodes:g,droppableContainers:y,dragOverlay:x,over:v,measuringConfiguration:b,scrollableAncestors:_,scrollableAncestorRects:w,windowRect:C}=C_e(),S=f.useContext(O5),E=A0t(m?.id),M=w_e(i,{activatorEvent:d,active:m,activeNodeRect:p,containerNodeRect:h,draggingNodeRect:x.rect,over:v,overlayNodeRect:x.rect,scrollableAncestors:_,scrollableAncestorRects:w,transform:S,windowRect:C}),k=BV(p),N=N0t({config:r,draggableNodes:g,droppableContainers:y,measuringConfiguration:b}),P=k?x.setRef:void 0;return R.createElement(w0t,null,R.createElement(b0t,{animation:N},m&&E?R.createElement(E0t,{key:E,id:m.id,ref:P,as:l,activatorEvent:d,adjustScale:t,className:c,transition:a,rect:k,style:{zIndex:u,...s},transform:M},n):null))});function VV(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function I0t(e,t){return e.reduce((n,r,s)=>{const a=t.get(r);return a&&(n[s]=a),n},Array(e.length))}function tS(e){return e!==null&&e>=0}function R0t(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function P0t(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const S_e=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const a=VV(t,r,n),i=t[s],l=a[s];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},nS={scaleX:1,scaleY:1},Bdn=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:i}=e;const l=(t=a[n])!=null?t:r;if(!l)return null;if(s===n){const u=a[i];return u?{x:0,y:n<i?u.top+u.height-(l.top+l.height):u.top-l.top,...nS}:null}const c=O0t(a,s,n);return s>n&&s<=i?{x:0,y:-l.height-c,...nS}:s<n&&s>=i?{x:0,y:l.height+c,...nS}:{x:0,y:0,...nS}};function O0t(e,t,n){const r=e[t],s=e[t-1],a=e[t+1];return r?n<t?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const E_e="Sortable",M_e=R.createContext({activeIndex:-1,containerId:E_e,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:S_e,disabled:{draggable:!1,droppable:!1}});function L0t(e){let{children:t,id:n,items:r,strategy:s=S_e,disabled:a=!1}=e;const{active:i,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=C_e(),m=K_(E_e,n),p=l.rect!==null,h=f.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),g=i!=null,y=i?h.indexOf(i.id):-1,x=u?h.indexOf(u.id):-1,v=f.useRef(h),b=!R0t(h,v.current),_=x!==-1&&y===-1||b,w=P0t(a);hl(()=>{b&&g&&d(h)},[b,h,g,d]),f.useEffect(()=>{v.current=h},[h]);const C=f.useMemo(()=>({activeIndex:y,containerId:m,disabled:w,disableTransforms:_,items:h,overIndex:x,useDragOverlay:p,sortedRects:I0t(h,c),strategy:s}),[y,m,w.draggable,w.droppable,_,h,x,c,p,s]);return R.createElement(M_e.Provider,{value:C},t)}const D0t=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return VV(n,r,s).indexOf(t)},F0t=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:a,newIndex:i,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!r||l!==a&&s===i?!1:n?!0:i!==s&&t===c},U0t={duration:200,easing:"ease"},k_e="transform",B0t=Ym.Transition.toString({property:k_e,duration:0,easing:"linear"}),V0t={roleDescription:"sortable"};function $0t(e){let{disabled:t,index:n,node:r,rect:s}=e;const[a,i]=f.useState(null),l=f.useRef(n);return hl(()=>{if(!t&&n!==l.current&&r.current){const c=s.current;if(c){const u=Cx(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&i(d)}}n!==l.current&&(l.current=n)},[t,n,r,s]),f.useEffect(()=>{a&&i(null)},[a]),a}function W0t(e){let{animateLayoutChanges:t=F0t,attributes:n,disabled:r,data:s,getNewIndex:a=D0t,id:i,strategy:l,resizeObserverConfig:c,transition:u=U0t}=e;const{items:d,containerId:m,activeIndex:p,disabled:h,disableTransforms:g,sortedRects:y,overIndex:x,useDragOverlay:v,strategy:b}=f.useContext(M_e),_=H0t(r,h),w=d.indexOf(i),C=f.useMemo(()=>({sortable:{containerId:m,index:w,items:d},...s}),[m,s,w,d]),S=f.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:E,node:M,isOver:k,setNodeRef:N}=v0t({id:i,data:C,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:P,activatorEvent:L,activeNodeRect:O,attributes:A,setNodeRef:j,listeners:T,isDragging:I,over:U,setActivatorNodeRef:B,transform:D}=g0t({id:i,data:C,attributes:{...V0t,...n},disabled:_.draggable}),W=Jyt(N,j),z=!!P,$=z&&!g&&tS(p)&&tS(x),X=!v&&I,q=X&&$?D:null,G=$?q??(l??b)({rects:y,activeNodeRect:O,activeIndex:p,overIndex:x,index:w}):null,J=tS(p)&&tS(x)?a({id:i,items:d,activeIndex:p,overIndex:x}):w,K=P?.id,te=f.useRef({activeId:K,items:d,newIndex:J,containerId:m}),re=d!==te.current.items,se=t({active:P,containerId:m,isDragging:I,isSorting:z,id:i,index:w,items:d,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:u,wasDragging:te.current.activeId!=null}),me=$0t({disabled:!se,index:w,node:M,rect:E});return f.useEffect(()=>{z&&te.current.newIndex!==J&&(te.current.newIndex=J),m!==te.current.containerId&&(te.current.containerId=m),d!==te.current.items&&(te.current.items=d)},[z,J,m,d]),f.useEffect(()=>{if(K===te.current.activeId)return;if(K!=null&&te.current.activeId==null){te.current.activeId=K;return}const ge=setTimeout(()=>{te.current.activeId=K},50);return()=>clearTimeout(ge)},[K]),{active:P,activeIndex:p,attributes:A,data:C,rect:E,index:w,newIndex:J,items:d,isOver:k,isSorting:z,isDragging:I,listeners:T,node:M,overIndex:x,over:U,setNodeRef:W,setActivatorNodeRef:B,setDroppableNodeRef:N,setDraggableNodeRef:j,transform:me??G,transition:oe()};function oe(){if(me||re&&te.current.newIndex===w)return B0t;if(!(X&&!I5(L)||!u)&&(z||se))return Ym.Transition.toString({...u,property:k_e})}}function H0t(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function lM(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const z0t=[Sn.Down,Sn.Right,Sn.Up,Sn.Left],Vdn=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:i,scrollableAncestors:l}}=t;if(z0t.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];a.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const p=s.get(m.id);if(p)switch(e.code){case Sn.Down:r.top<p.top&&c.push(m);break;case Sn.Up:r.top>p.top&&c.push(m);break;case Sn.Left:r.left>p.left&&c.push(m);break;case Sn.Right:r.left<p.left&&c.push(m);break}});const u=yxt({collisionRect:r,droppableRects:s,droppableContainers:c});let d=i_e(u,"id");if(d===i?.id&&u.length>1&&(d=u[1].id),d!=null){const m=a.get(n.id),p=a.get(d),h=p?s.get(p.id):null,g=p?.node.current;if(g&&h&&m&&p){const x=R5(g).some((S,E)=>l[E]!==S),v=T_e(m,p),b=G0t(m,p),_=x||!v?{x:0,y:0}:{x:b?r.width-h.width:0,y:b?r.height-h.height:0},w={x:h.left,y:h.top};return _.x&&_.y?w:db(w,_)}}}};function T_e(e,t){return!lM(e)||!lM(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function G0t(e,t){return!lM(e)||!lM(t)||!T_e(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const q0t=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=We({enabled:e,queryKey:gtt(),queryFn:smt,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}};function K0t(){const{data:e,isLoading:t}=q0t(),{trackEvent:n,trackEventOnce:r}=je(),s=L_(e??void 0),[a,i]=f.useState(!1);f.useEffect(()=>{e&&e.name!=="comet_ntp_set_default"&&e.app_location===nu.COMET_NTP_BANNER&&(i(!0),r("ntp banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,r]);const l=f.useCallback(()=>{e&&(n("ntp banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),i(!1),Wct(e.name))},[e,n]),c=f.useCallback(()=>{e&&(n("ntp banner upsell clicked",{upsellName:e.name,upsellType:e.upsell_type}),s())},[e,n,s]),u=f.useMemo(()=>{if(e?.icon_reference&&e.icon_reference in su)return su[e.icon_reference]},[e]);return f.useMemo(()=>({show:a&&!!e,onDismiss:l,onClick:c,icon:u,title:e?.title,actionLabel:e?.button_text,isLoading:t,upsellName:e?.name}),[l,c,a,u,e,t])}const N_e="pplx-top-sites-cache",Y0t=()=>{try{const e=Oe.getItem(N_e);return e?JSON.parse(e):[]}catch{return[]}},Q0t=e=>{Oe.setItem(N_e,JSON.stringify(e))};function j_e({maxUrls:e=15}={}){const t=Jn(),n=Y0t();return We({queryKey:["topMostUrls"],queryFn:async()=>{const s=(await mqe({cometBrowser:t,maxUrls:e}))?.reduce((i,l)=>{const u=new URL(l.url).hostname;return(!i[u]||i[u].visitCount<l.visitCount)&&(i[u]=l),i},{})??{},a=Object.values(s);return Q0t(a),a},placeholderData:n,staleTime:5*60*1e3})}const cM="comet-widgets",Qm="comet-widgets-content",$V="default-shortcut-task-id";function X0t(e,t){return e.find(n=>n.type===t)}function Z0t(e){return typeof e=="object"&&e!==null&&"version"in e&&typeof e.version=="number"&&e.version===1&&"taskId"in e&&typeof e.taskId=="string"&&"name"in e&&typeof e.name=="string"&&"query"in e&&typeof e.query=="string"}function A_e({context:e,widgetId:t,defaultQuery:n,defaultName:r}){if(e==="widget"){const s=Sx("SHORTCUT",t);if(Z0t(s))return s}return{version:1,taskId:$V,name:r??"",query:n??""}}function J0t(){if(Oe.getItem(Qm))return;const t=Oe.getItem(cM);if(t)try{const n=JSON.parse(t),r={},s=n.map(a=>{if(a.content){const{content:i,...l}=a;return r[a.id]=i,l}return{id:a.id,type:a.type}});Oe.setItem(cM,JSON.stringify(s)),Oe.setItem(Qm,JSON.stringify(r))}catch{}}function I_e(e){J0t();const t=Oe.getItem(cM);if(!t)return e;try{const n=JSON.parse(t);return!n||!Array.isArray(n)?e:n.every(s=>s.id&&s.type&&typeof s.type=="string")?n:(WV(e),e)}catch{return e}}function WV(e){Oe.setItem(cM,JSON.stringify(e))}function evt(e){const n=I_e([]).filter(r=>r.id!==e);WV(n)}function tvt(e){const t=Oe.getItem(Qm);if(!t)return!1;try{return!!JSON.parse(t)[e]}catch{return!1}}function Sx(e,t){const n=Oe.getItem(Qm);if(!n)return null;let r=null;try{r=JSON.parse(n)[t]}catch{return null}return typeof r!="object"||r===null?null:{version:1,...r}}function Np(e,t,n){const r=Oe.getItem(Qm);let s={};if(r)try{s=JSON.parse(r)}catch{s={}}s[t]=n,Oe.setItem(Qm,JSON.stringify(s))}function nvt(e){const t=Oe.getItem(Qm);if(!t)return!1;try{const n=JSON.parse(t);return e.every(s=>!!n[s])}catch{return!1}}function rvt(e){return e.startsWith("student-shortcut-")}const ate="widget-analytics-last-sent",svt=6*60*60*1e3;function avt(e){const{trackEvent:t}=je();f.useEffect(()=>{const n=Date.now(),r=Oe.getItem(ate),s=r?parseInt(r,10):0;if(n-s<svt)return;const a={},i=[];e.forEach(l=>{a[l.type]=(a[l.type]||0)+1,tvt(l.id)&&i.push(l.type)}),t("comet home widgets viewed",{enabledWidgets:a,widgetsWithSettings:i}),Oe.setItem(ate,n.toString())},[e,t])}const ite="assistant-promo-config-cached";function ivt(){const{value:e,loading:t}=qu({flag:"assistant-promo-deeplinks",subjectType:"user_nextauth_id",defaultValue:{}}),[n,r]=f.useState(()=>{const a=Oe.getItem(ite);return a?JSON.parse(a):{}});f.useEffect(()=>{const a=e;!t&&JSON.stringify(a)!==JSON.stringify(n)&&(r(a),Oe.setItem(ite,JSON.stringify(a)))},[e,n,t]);const s=!!(n.deeplinkQueries&&n.deeplinkQueries.length>0);return f.useMemo(()=>({config:n,isLoading:t,shouldShowExploreAssistant:s}),[n,t,s])}const ote="explore-assistant-should-show-cached",A2="explore-assistant-history-cache",R_e=10*60*1e3,QA=e=>e!=="unknown"&&!!e,ovt=()=>{try{const e=Oe.getItem(A2);if(!e)return null;const t=JSON.parse(e);return Date.now()-t.timestamp>R_e?(Oe.removeItem(A2),null):new Set(t.domainsInHistory)}catch{return Oe.removeItem(A2),null}},lte=e=>{const t={timestamp:Date.now(),domainsInHistory:Array.from(e)};Oe.setItem(A2,JSON.stringify(t))},cte={url:"https://www.nytimes.com/games/wordle/index.html",query:"Take control over browser and win Wordle for me"},lvt=(e,t)=>!e||!t?`${cte.url}#comet=${encodeURIComponent(cte.query)}`:`${e}#comet=${encodeURIComponent(t)}`;function HV(){const{config:e,isLoading:t}=ivt(),n=Jn(),[r,s]=f.useState(()=>{const h=Oe.getItem(ote);return h?JSON.parse(h):!1}),a=f.useMemo(()=>e.deeplinkQueries||[],[e]),i=f.useMemo(()=>{const h=new Set;return a.forEach(g=>{if(g.action==="HISTORY_PRESENCE"){const y=ha(g.url);QA(y)&&h.add(y)}}),Array.from(h)},[a]),{data:l}=We({queryKey:["explore-assistant-history",i],queryFn:async()=>{if(!n||i.length===0)return new Set;const h=ovt();if(h!==null)return h;try{const g=await n.getHistorySummary("explore-assistant-check",i,14,1),y=new Set;return g.history_results?.forEach(x=>{const v=ha(x?.url||"");QA(v)&&i.includes(v)&&y.add(v)}),lte(y),y}catch{return new cg("PARSE_HISTORY_FAILED",{message:"Explore Assistant failed to parse history"}),lte(new Set),new Set}},staleTime:R_e,enabled:!0,retry:!1,throwOnError:!1}),c=f.useMemo(()=>l||new Set,[l]),u=f.useMemo(()=>{if(a.length===0)return null;const h=[],g=a.filter(v=>v.action==="ALWAYS");h.push(...g);const y=a.filter(v=>{if(v.action!=="HISTORY_PRESENCE")return!1;const b=ha(v.url);return QA(b)&&c.has(b)});if(h.push(...y),h.length===0)return null;const x=Math.floor(Math.random()*h.length);return h[x]||null},[a,c]),d=f.useMemo(()=>lvt(u?.url,u?.query),[u]),m=a?.length>0;f.useEffect(()=>{m!==r&&(s(m),Oe.setItem(ote,JSON.stringify(m)))},[m,r]);const p=t?r:m;return f.useMemo(()=>({targetUrl:d,isLoading:t,shouldShowWidget:p}),[d,t,p])}const P_e="default-widgets-cached";function O_e(e){return`student-shortcut-${e}`}const d9=Array.from({length:4},(e,t)=>O_e(t)),f9=e=>[...d9.map(t=>({id:t,type:"SHORTCUT"})),{id:"default-analog-clock",type:"ANALOG_CLOCK"},{id:e?"default-explore-assistant":"default-assistant",type:e?"EXPLORE_ASSISTANT":"ASSISTANT"},{id:"default-stock",type:"STOCK"},{id:"default-weather",type:"WEATHER"},{id:"top-most-urls",type:"TOP_URLS"}],cvt=()=>{const e=Oe.getItem(P_e);if(e)try{return JSON.parse(e)}catch{return f9(!1)}return f9(!1)};function uvt(){const{shouldShowWidget:e,isLoading:t}=HV(),[n,r]=f.useState(cvt()),s=f.useMemo(()=>f9(e),[e]);f.useEffect(()=>{if(!t){const i=JSON.stringify(s),l=JSON.stringify(n);i!==l&&(r(s),Oe.setItem(P_e,i))}},[t,s,n]);const a=t?n:s;return f.useMemo(()=>({defaultWidgets:a,isLoading:t}),[a,t])}const jp=Fe({productionMs:3e3}),dvt=Fe({productionMs:5e3}),ute={TASK_LIMIT_EXCEEDED:"TASK_LIMIT_EXCEEDED",SHORTCUT_NAME_ALREADY_EXISTS:"SHORTCUT_NAME_ALREADY_EXISTS"},L5=async({taskId:e,headers:t,reason:n})=>{const{data:r,error:s}=await ae.GET("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},timeoutMs:Fe(),numRetries:Wu,headers:t});if(s)throw s;return r?.task?mge(r.task):null};async function $dn({headers:e,reason:t,schedulerType:n}){const r="getUserAlerts";try{const a=(await ae.GET("/rest/tasks/",t,{params:{query:{scheduler_type:n}},timeoutMs:Fe(),numRetries:Wu,headers:e})).data?.tasks.map(mge);return a?a.sort((i,l)=>l.createdAt.valueOf()-i.createdAt.valueOf()):[]}catch(s){return ne.log(`Error in ${r}:`,s),[]}}const fvt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/tasks/",t,{body:e});if(r)throw r;return n},m9=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ae.PATCH("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},L_e=async({taskId:e,reason:t})=>ae.DELETE("/rest/tasks/{task_id}",t,{params:{path:{task_id:e}},timeoutMs:jp}),Wdn=async({payload:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/tasks/suggest",t,{body:e,timeoutMs:1e4});if(r)throw r;return n},mvt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/tasks/finance",t,{body:e});if(r)throw r;return n},pvt=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ae.PATCH("/rest/tasks/finance/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},hvt=async({ticker:e,reason:t})=>{const{data:n,error:r}=await ae.GET("/rest/tasks/finance/tickers/{ticker}",t,{params:{path:{ticker:e}},timeoutMs:Fe(),numRetries:Wu});if(r)throw ne.error("Failed to get finance ticker",r),r;return n},Hdn=async({payload:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/tasks/shortcuts",t,{body:e,timeoutMs:jp});if(r)throw r;return n},zdn=async({payload:e,reason:t})=>{const{data:n,error:r}=await ae.POST("/rest/tasks/shortcuts/slug",t,{body:e,timeoutMs:dvt});if(r)throw r;return n},Gdn=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ae.PATCH("/rest/tasks/shortcuts/{task_id}",n,{body:t,params:{path:{task_id:e}},timeoutMs:jp});if(s)throw s;return r},qdn=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await ae.DELETE("/rest/tasks/shortcuts/defaults/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:jp});if(r)throw r;return n},Kdn=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await ae.GET("/rest/tasks/shortcuts/copy/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:jp});if(r)throw r;return n},gvt=async({copyToken:e,reason:t,headers:n})=>{const{data:r,error:s}=await ae.GET("/rest/tasks/shortcuts/paste/{copy_token}",t,{params:{path:{copy_token:e}},headers:n,timeoutMs:jp});if(s)throw s;return r},D_e=async({reason:e,headers:t})=>{const{data:n,error:r}=await ae.GET("/rest/tasks/shortcuts/mentions",e,{params:{query:{order_by:"created_at"}},timeoutMs:jp,numRetries:Wu,headers:t});if(r)throw ne.error("Failed to get shortcut typeahead options",r),r;return n},D5=({reason:e,...t})=>We({queryKey:Ett(),queryFn:async()=>{const{tasks:n}=await D_e({reason:e});return n},...t}),F_e="comet-shortcuts-student-status-cached";function yvt(){const e=Oe.getItem(F_e);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function xvt(e){Oe.setItem(F_e,JSON.stringify(e))}function vvt(e){return e.length>0&&nvt(e)}function bvt(){const[e]=f.useState(yvt),[t,n]=f.useState(vvt(d9)),{data:r,isLoading:s}=D5({reason:"student-widgets-shortcuts"}),a=f.useMemo(()=>r?.filter(p=>p.metadata?.student_only)||[],[r]),i=f.useRef(null),l=f.useMemo(()=>(!i.current&&a.length>0&&(i.current=[...a].sort(()=>Math.random()-.5).slice(0,Math.min(a.length,d9.length))),i.current||[]),[a]),{signals:c,isLoading:u}=L0e({reason:"student-widgets"}),d=f.useMemo(()=>c.isVerifiedStudent||!1,[c.isVerifiedStudent]),m=f.useMemo(()=>u&&e!==null?e:d,[u,e,d]);return f.useEffect(()=>{u||xvt(d)},[u,d]),f.useEffect(()=>{m&&r&&!s&&(l.forEach(({task_id:p,task_name:h,prompt:g},y)=>{Np("SHORTCUT",O_e(y),{version:1,taskId:p,name:h||"",query:g||""})}),n(l.length>0))},[m,r,l,s]),{showStudentWidgets:m&&t}}const U_e=R.memo(({shouldShow:e,onClose:t,onSetDefault:n})=>{const{$t:r}=Z();return o.jsx(H,{className:V("-mt-md col-span-full inline-flex flex-wrap items-center justify-center",{"opacity-100":e,"opacity-0":!e}),children:o.jsxs(H,{variant:"raised",className:"gap-sm pl-xs pr-sm py-xs shadow-subtle flex items-center rounded-full border",children:[o.jsxs("div",{className:"gap-xs group flex items-center",children:[o.jsx(Te,{icon:It,onClick:t,size:"small",pill:!0}),o.jsx(F,{variant:"small",color:"super",className:"whitespace-nowrap",children:r({defaultMessage:"{brand} works best as your default browser",id:"uTC0rExpLQ"},{brand:"Comet"})})]}),o.jsx(pe,{variant:"primaryGhost",size:"tiny",pill:!0,text:r({defaultMessage:"Set {brand} as default",id:"VssH9YxzlZ"},{brand:"Comet"}),onClick:n,icon:wi,extraCSS:"border-none"})]})})});U_e.displayName="DefaultBrowserBanner";const B_e=R.memo(({shouldShow:e,title:t,actionLabel:n,icon:r,onDismiss:s,onClick:a})=>e?o.jsx(ve.div,{className:"-mt-md col-span-full inline-flex flex-wrap items-center justify-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:o.jsxs(H,{variant:"superLight",className:"gap-sm pl-xs pr-sm py-xs shadow-subtle flex cursor-pointer items-center rounded-full border",onClick:a,children:[o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(Te,{icon:It,onClick:i=>{i.stopPropagation(),s()},size:"small",pill:!0}),o.jsx(F,{variant:"small",color:"super",className:"whitespace-nowrap",children:t||""})]}),o.jsx(pe,{variant:"primary",size:"tiny",pill:!0,text:n||"",icon:r,extraCSS:"border-none"})]})}):null);B_e.displayName="NtpBanner";const _f=R.memo(({onClose:e,children:t})=>o.jsx(pf,{portalTarget:document.body,children:o.jsxs("div",{className:"fixed inset-0 flex size-full flex-col items-center justify-center",children:[o.jsx(ve.div,{onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:no,className:"bg-backdrop/70 absolute inset-0"}),o.jsx(ve.div,{initial:{y:6,opacity:0},animate:{y:0,opacity:1},exit:{y:6,opacity:0},transition:no,className:"w-full max-w-[360px]",children:o.jsx(un,{className:"shadow-overlay border-none",children:t})})]})}));_f.displayName="WidgetModal";const _vt=()=>{const{trackEvent:e}=je(),t=_t(),n="clicked spaces ad",r=f.useCallback(async a=>{a.preventDefault(),e(n,{source:"createSpaceSidebar"}),t.push("/spaces/templates")},[e,t]),s=f.useCallback(async()=>{e("space mentioned in query"),Get()},[e]);return f.useMemo(()=>({handleCreateSpaceSidebarAdClick:r,handleSubmitQueryWithMention:s}),[r,s])},V_e=e=>{const t=[];if(!e)return{dslQuery:void 0,mentions:t};let n=0;const r=s=>{let a="";if(s.type==="text"&&"text"in s)a=s.text;else if(s.type==="linebreak")a=`
`;else{if((s.type==="link"||s.type==="autolink")&&"url"in s)return a=`[${"children"in s&&Array.isArray(s.children)&&s.children.map(r).reduce((l,c)=>(l+=c,l),"")||""}](${s.url})`,a;if(s.type==="mention"){const l=s.props;if(l.variant==="tab")return t.push({id:l.uuid,url:l.url??"",type:l.variant}),n++,a=`<attachment citation_id="${n}" />`,a;if(l.variant==="space")return t.push({id:l.uuid,url:"",type:l.variant}),a="",a;if(l.variant==="shortcut")return t.push({id:l.uuid,url:"",type:l.variant}),a=l.queryText??"",a}}return"children"in s&&Array.isArray(s.children)?s.children.map(r).reduce((i,l)=>(i+=l,i),a):a};return{dslQuery:r(e)||void 0,mentions:t}},zV=3e3;function GV({onSubmit:e,immediate:t=!0}){const n=Nbe(),r=Ugt(),s=jbe(),a=Bgt(),{setUserInput:i,setHasStartedTyping:l,setStartTypingTime:c,markInputAsSubmitted:u}=z_(),d=f.useRef(!1);f.useEffect(()=>()=>{d.current&&(u(),d.current=!1)},[u,t]);const m=f.useCallback(h=>{ne.info("ask input submitted");const g=a?performance.now()-a:void 0,{dslQuery:y,mentions:x}=V_e(h.json?.root);e?.({timeFromFirstType:g,...h,dslQuery:y,mentions:h.mentions??x}),t?u():d.current=!0},[t,u,e,a]),p=f.useCallback((h,g)=>{!s&&h&&l(!0),a||c(performance.now()),i(h,g)},[s,i,l,a,c]);return[n,r,f.useMemo(()=>({onChange:p,onSubmit:m,setUserInput:i}),[p,m,i])]}var ai;(function(e){e.EXPOSURE="sbs exposure",e.JUDGMENT="sbs judgment",e.BANNER="sbs banner"})(ai||(ai={}));const uM=-1,wvt="sbs_analytics_",Cvt=e=>{const t=e?.experiment_override;return t?JSON.stringify(t):""},Svt=(e,t)=>{const n=e.side_by_side_metadata;return{displayPosition:t,experimentRole:n?.experiment_role||`entry_${t}`,entryUUID:e.backend_uuid,experimentOverride:Cvt(n)}},$_e=(e,t)=>`${wvt}${e}_${t}`,XA=(e,t)=>{try{const n=$_e(e,t);return Oe.getItem(n)==="true"}catch(n){return ne.error("Error checking localStorage for SBS event:",n),!1}},ZA=(e,t)=>{try{const n=$_e(e,t);Oe.setItem(n,"true")}catch(n){ne.error("Error setting localStorage for SBS event:",n)}},Evt=({results:e,session:t,trackEvent:n})=>{const r=f.useCallback(()=>{if(!e[0])return null;const c=e[0].side_by_side_metadata;if(!c?.sibling_uuid)return null;const u=c.experiment_override,d=u&&Object.keys(u)[0]||"";return{evaluationUUID:c.sibling_uuid,experimentVariationKey:d,evaluatorID:t?.user?.id||t?.user?.email||"anonymous"}},[e,t?.user?.id,t?.user?.email]),s=f.useCallback(c=>{try{const u=r();if(!u)return null;let d,m;if(c===uM)d=uM,m=void 0;else if(d=c,d>=0&&d<e.length)m=e[d]?.backend_uuid;else return ne.warn(`Invalid SBS selection index: ${c}, results length: ${e.length}`),null;return{eventType:ai.JUDGMENT,timestampMs:Date.now(),eventData:{evaluationUUID:u.evaluationUUID,evaluatorID:u.evaluatorID,preferredPosition:d,entryUUID:m}}}catch(u){return ne.error("Failed to build SBS judgment payload:",u),null}},[r,e]),a=f.useCallback(c=>{try{const u=r();if(!u||XA(u.evaluationUUID,ai.JUDGMENT))return;const d=s(c);d&&(n(ai.JUDGMENT,d),ZA(u.evaluationUUID,ai.JUDGMENT))}catch(u){ne.error("Failed to track SBS judgment:",u)}},[r,s,n]),i=f.useCallback(()=>{try{const c=r();if(!c||XA(c.evaluationUUID,ai.BANNER))return;const u={eventType:ai.BANNER,timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,experimentRoles:e.map(d=>d.side_by_side_metadata?.experiment_role||`entry_${e.indexOf(d)}`)}};n(ai.BANNER,u),ZA(c.evaluationUUID,ai.BANNER)}catch(c){ne.error("Failed to track SBS banner exposure:",c)}},[r,e,n]),l=f.useCallback(()=>{try{const c=r();if(!c||XA(c.evaluationUUID,ai.EXPOSURE))return;const u={eventType:ai.EXPOSURE,timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,entries:e.map(Svt)}};n(ai.EXPOSURE,u),ZA(c.evaluationUUID,ai.EXPOSURE)}catch(c){ne.error("Failed to track SBS exposure:",c)}},[r,e,n]);return f.useMemo(()=>({trackJudgment:a,trackBannerExposure:i,trackSBSExposure:l}),[a,i,l])},W_e=({enabled:e,reason:t})=>{const{locale:n}=Z(),r=n?{"accept-language":n}:{},s=async()=>Xrt({headers:r,reason:t}),a=lt(),{data:i}=We({enabled:a?typeof e>"u"?!0:e:!1,queryKey:P8(),queryFn:s,networkMode:"always"});return i??_xe},Mvt="side-by-side-experiments";function kvt(e,t={}){const{value:n,loading:r,error:s}=Sat({flag:Mvt,defaultValue:{side_by_side_config:{}},subjectType:"context_uuid",extraAttributes:t},e);return f.useMemo(()=>({sideBySideOverrides:n,loading:r,error:s}),[n,r,s])}var Tvt={};const H_e="sbs_trigger_count",dte="[control]",Nvt=[],jvt={isEnabled:!1,sbsVariations:Nvt,isLoading:!1,error:null,incrementTriggerCount:()=>{},triggerCount:0},Avt="sbsMaxTriggerCntPerThread";function Ivt(e,t,n,r,s,a,i,l){const{isPro:c,isMax:u,hasAccessToProFeatures:d}=e,{isEnterprise:m=!1}=t,p=c||u||m||d,h=c||u||d,g=s?.localeObj?.language||n?.language||null,y=r?.toLowerCase()||null,x=m?"ENTERPRISE":"INDIVIDUAL",v=typeof window<"u"&&window.navigator.userAgent.includes("Mobile");return{isPriority:p,isSubscribed:h,language:g,country:i,searchFocus:y,userCategory:x,isFollowUp:!!l,isMobile:v,appApiClient:"web",[Avt]:a}}const z_e=e=>[...e].sort((t,n)=>t.backend_uuid.localeCompare(n.backend_uuid,void 0,{sensitivity:"base"})),Rvt=e=>{try{if(!e||!e.side_by_side_config)return!1;const t=e.side_by_side_config;if(!t||typeof t!="object")return!1;const n=!!(t.experiment_flag&&typeof t.experiment_flag=="string"&&t.experiment_flag.length>0),r=!!(t.variations&&Array.isArray(t.variations)&&t.variations.length>0);return n||r}catch{return!1}},Pvt=e=>{if(!e||!e.side_by_side_config)return[];const t=e.side_by_side_config;if(!t.experiment_flag||!t.variations||!Array.isArray(t.variations))return[];if(t.variations.length===0)return[];const n=[],r=Ei(),s=t.experiment_flag;let a=!1;return t.variations.forEach(i=>{if(!i||!i.identifier)return;const l=i.is_control===!0;l&&(a=!0);const c=l?`${dte}${s}:${i.identifier}`:`${s}:${i.identifier}`,u={[s]:i.attributes_override??{}};n.push({sibling_uuid:r,experiment_role:c,experiment_override:u})}),!a&&ya(n)&&(n[0].experiment_role=`${dte}${s}:${t.variations[0]?.identifier}`),n},fte=e=>{try{const t=Xs.getItem(`${H_e}_${e}`);return t?parseInt(t,10):0}catch{return 0}},Ovt=(e,t)=>{try{Xs.setItem(`${H_e}_${e}`,t.toString())}catch{}};function Lvt({frontendContextUUID:e,disableSideBySide:t=!1}){const n=Xa(),{sources:r}=rr(),s=wJe(r||[]),a=Et(),i=kn({reason:"sbs-experiment-attributes"}),l=W_e({reason:"sbs-experiment-attributes"}),c=lbe(),u=Tp(),d=pn()||!!Tvt.NEXT_PUBLIC_IS_SIDECAR_BUILD||zB();t=t||n===ce.STUDIO||n===ce.RESEARCH||d||s.length>0;const[m,p]=f.useState(()=>e?fte(e):0),h=e?Ivt(a,i,l,n,c,m,u??null,e):{},{sideBySideOverrides:g,loading:y,error:x}=kvt(e||"",h),v=x?String(x):null,b=Rvt(g);f.useEffect(()=>{if(e){const w=fte(e);p(Math.max(0,w))}else p(0)},[e]),f.useEffect(()=>{b&&e&&m>0&&Ovt(e,m)},[e,m,b]);const _=f.useCallback(()=>{b&&p(w=>Math.max(0,w+1))},[b]);return f.useMemo(()=>{if(t||!b||v)return jvt;const w=Pvt(g);return{isEnabled:b,sbsVariations:w,isLoading:y,error:v,incrementTriggerCount:_,triggerCount:m}},[t,v,_,b,y,g,m])}const G_e=e=>{if(!e.length)return[];const t=new Map;return e.forEach(n=>{if(n.side_by_side_metadata?.sibling_uuid&&n.side_by_side_metadata?.selection_status===el.UNSELECTED)return;const r=n.side_by_side_metadata?.sibling_uuid??n.backend_uuid;t.has(r)||t.set(r,[]),t.get(r).push(n)}),[...t.values()].map(n=>{const r=z_e(n);return r[0]?.side_by_side_metadata?.selection_status===el.TIE?[r[0]]:r})},Dvt=async(e,t,n,r)=>{const s=(a,i)=>{r(l=>l.filter(c=>t.some(u=>u.backend_uuid===c.backend_uuid)?c.backend_uuid===a.backend_uuid:!0).map(c=>c.backend_uuid===a.backend_uuid?{...c,side_by_side_metadata:c.side_by_side_metadata?{...c.side_by_side_metadata,selection_status:i}:void 0}:c))};try{const a=t.map((c,u)=>{let d;return e===uM?d=el.TIE:d=u===e?el.SELECTED:el.UNSELECTED,xKe({entryUUID:c.backend_uuid,params:d,siblingUUID:n,reason:"user-sbs-selection"}).catch(m=>{throw ne.error(`Failed to update selection for entry ${c.backend_uuid}:`,m),m})});await Promise.all(a);let i,l;if(e===uM?(i=z_e(t)[0],l=el.TIE):(i=t[e],l=el.SELECTED),!i)throw new Error("No target result found");s(i,l)}catch(a){throw ne.error("Failed to update entry selection:",a),a}};function q_e({handleSubmitQuery:e,isHomepage:t,contextUuid:n,disableSideBySide:r=!1}){const{isEnabled:s,sbsVariations:a,incrementTriggerCount:i}=Lvt({frontendContextUUID:n,disableSideBySide:r});return f.useCallback(c=>{s?(i(),a.forEach(u=>{const{experiment_override:d,sibling_uuid:m,experiment_role:p}=u,h={experiment_role:p,sibling_uuid:m,experiment_override:d,selection_status:el.SELECTION_STATUS_UNSPECIFIED},g={...c,...t?{newFrontendContextUUID:n}:{existingFrontendContextUUID:n},side_by_side_metadata:h};e(g)})):e(c)},[e,s,a,i,t,n])}const gs={[ce.SEARCH]:pt({askInputPlaceholder:{defaultMessage:"Ask anything",id:"AUouhaZgFv"},name:{defaultMessage:"Search",id:"xmcVZ0BU63"},description:{defaultMessage:"Fast answers to everyday questions",id:"5Y9Hg4e+zB"}}),[ce.RESEARCH]:pt({askInputPlaceholder:{defaultMessage:"Research anything",id:"PITzDLgm5P"},name:{defaultMessage:"Research",id:"JEe7dVso7F"},description:{defaultMessage:"Deep research on any topic",id:"uH6f+eH2OS"}}),[ce.STUDIO]:pt({askInputPlaceholder:{defaultMessage:"Create anything",id:"pmtrj6Tjm9"},name:{defaultMessage:"Labs",id:"ylFNoY79wa"},description:{defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}}),[ce.STUDY]:pt({askInputPlaceholder:{defaultMessage:"Study anything",id:"UOEDdZ+cnD"},name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"}})},qr={[de.DEFAULT]:pt({name:{defaultMessage:"Auto",id:"NXI/XLSYwc"},description:{defaultMessage:"Adapts to each query",id:"SsTMNu/s/A"}}),[de.PRO]:pt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[de.PPLX_PRO_UPGRADED]:pt({name:{defaultMessage:"Pro",id:"R/eOkjWqNU"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[de.SONAR]:pt({name:{defaultMessage:"Sonar",id:"sT9VX563o6"},description:{defaultMessage:"Perplexity's fast model",id:"pdbURewz6Q"}}),[de.GPT_4o]:pt({name:{defaultMessage:"GPT-4o",id:"nebbHBgxX/"},description:{defaultMessage:"OpenAI's versatile model",id:"zdAw82CyOA"}}),[de.GPT_4_1]:pt({name:{defaultMessage:"GPT-4.1",id:"+LPr/f6Fal"},description:{defaultMessage:"OpenAI's advanced model",id:"+uCLZVt7uh"}}),[de.GPT_5]:pt({name:{defaultMessage:"GPT-5",id:"VfhmdGpVc7"},description:{defaultMessage:"OpenAI's latest model",id:"5VYr+wSh/Y"}}),[de.GPT_5_THINKING]:pt({name:{defaultMessage:"GPT-5 Thinking",id:"/IA3KV+qFr"},description:{defaultMessage:"OpenAI's latest model with thinking",id:"r+tIMgEnyZ"}}),[de.CLAUDE_2]:pt({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[de.GEMINI_2_FLASH]:pt({name:{defaultMessage:"Gemini 2.5 Pro",id:"hec4NYL1Ib"},description:{defaultMessage:"Google's latest model",id:"XBL8FigIeX"}}),[de.GROK]:pt({name:{defaultMessage:"Grok 3 Beta",id:"Ybq0GDRm0J"},description:{defaultMessage:"xAI's Grok 3 model",id:"gwIHPQy1c/"}}),[de.PPLX_REASONING]:pt({name:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},description:{defaultMessage:"Advanced problem solving",id:"4J0akc6m53"}}),[de.CLAUDE_3_7_SONNET_THINKING]:pt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[de.CLAUDE_4_0_OPUS]:pt({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[de.CLAUDE_4_0_OPUS_THINKING]:pt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[de.CLAUDE_4_1_OPUS]:pt({name:{defaultMessage:"Claude Opus 4.1",id:"aq+8T//8S9"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[de.CLAUDE_4_1_OPUS_THINKING]:pt({name:{defaultMessage:"Claude Opus 4.1 Thinking",id:"Vd2LxNSW/4"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[de.GROK_4]:pt({name:{defaultMessage:"Grok 4",id:"+Y775fAOqr"},description:{defaultMessage:"xAI's latest, most powerful reasoning model",id:"pSXVZwl/+g"}}),[de.O3]:pt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[de.O3_PRO]:pt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[de.O4_MINI]:pt({name:{defaultMessage:"o4-mini",id:"BwwjXFHgz7"},description:{defaultMessage:"OpenAI's latest reasoning model",id:"VKonAfIZbf"}}),[de.PPLX_SONAR_INTERNAL_TESTING]:pt({name:{defaultMessage:"Sonar Testing - Alpha",id:"2oa4bWRfNL"},description:{defaultMessage:"Sonar model alpha variant",id:"EvwN/e7vAD"}}),[de.PPLX_SONAR_INTERNAL_TESTING_V2]:pt({name:{defaultMessage:"Sonar Testing - Beta",id:"VNsK+ZGei/"},description:{defaultMessage:"Sonar model beta variant",id:"Dzfl36DNyM"}}),[de.ALPHA]:pt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Fast and thorough for routine research",id:"v/MuahlVJE"}}),[de.O3_RESEARCH]:pt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[de.O3_PRO_RESEARCH]:pt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[de.CLAUDE40SONNET_RESEARCH]:pt({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[de.CLAUDE40SONNETTHINKING_RESEARCH]:pt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[de.CLAUDE40OPUS_RESEARCH]:pt({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's most advanced model",id:"4l6C+Dcw8g"}}),[de.CLAUDE40OPUSTHINKING_RESEARCH]:pt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[de.BETA]:pt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Multi-step tasks with advanced troubleshooting",id:"Sf0AeuilA5"}}),[de.O3_LABS]:pt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[de.O3_PRO_LABS]:pt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[de.CLAUDE40SONNETTHINKING_LABS]:pt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[de.CLAUDE40OPUSTHINKING_LABS]:pt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[de.STUDY]:pt({name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}}),[Na.O3_MINI]:pt({name:{defaultMessage:"o3-mini",id:"GdJwPgWWId"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[Na.GROK2]:pt({name:{defaultMessage:"Grok-2",id:"9X3jPx+0vk"},description:{defaultMessage:"xAI's latest model",id:"e2CghRZC7d"}}),[Na.GPT_4]:pt({name:{defaultMessage:"GPT-4",id:"6TGiMlP7f4"},description:{defaultMessage:"OpenAI's previous generation model",id:"U3OQoJ211e"}}),[Na.CLAUDE_3_OPUS]:pt({name:{defaultMessage:"Claude 3 Opus",id:"gLSCHWGsu1"},description:{defaultMessage:"Anthropic's previous generation model",id:"hAevdn8yGl"}}),[Na.CLAUDE_3_5_HAIKU]:pt({name:{defaultMessage:"Claude 3.5 Haiku",id:"zEJWYa05R2"},description:{defaultMessage:"Anthropic's smaller model",id:"pQia6E7J8i"}}),[Na.GEMINI]:pt({name:{defaultMessage:"Gemini",id:"XoqZkcqFZ/"},description:{defaultMessage:"Previous version of Google's Gemini model",id:"9C0LtRWLFh"}}),[Na.LLAMA_X_LARGE]:pt({name:{defaultMessage:"Llama X Large",id:"2zxgnSWUyX"},description:{defaultMessage:"Meta's large Llama model",id:"+95UnVOxgQ"}}),[Na.MISTRAL]:pt({name:{defaultMessage:"Mistral",id:"dUBSpMbbs4"},description:{defaultMessage:"Mistral AI model",id:"rYRyt8I2Zr"}}),[Na.COPILOT]:pt({name:{defaultMessage:"Copilot",id:"b3QbnXgawD"},description:{defaultMessage:"Legacy Pro Search",id:"pg83InaW1o"}}),[Na.CLAUDE_OMBRE_EAP]:pt({name:{defaultMessage:"Claude Ombre",id:"F12IlTx8R1"},description:{defaultMessage:"Anthropic's research preview",id:"LKt7UBXwdw"}}),[Na.CLAUDE_LACE_EAP]:pt({name:{defaultMessage:"Claude Lace",id:"8ydOdGYWef"},description:{defaultMessage:"Anthropic's opus research preview",id:"GHW8xWfe9i"}}),[Na.R1]:pt({name:{defaultMessage:"R1 1776",id:"e8N3MYqmIQ"},description:{defaultMessage:"Perplexity's unbiased reasoning model",id:"R5Tg1hC1um"}}),[Na.GAMMA]:pt({name:{defaultMessage:"Gamma",id:"Wb9IyuuCJO"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}})};function F5({collection:e,onSubmit:t,redirectToNewThread:n=!0,csrRedirect:r=!1}){const{$t:s}=Z(),{isCopilot:a}=rr(),{submitQuery:i}=ta(),{actions:{clearCurrentStreamId:l,clearCurrentThreadId:c}}=Ht(),u=_t(),d=Xa(),{handleSubmitQueryWithMention:m}=_vt(),p=f.useMemo(()=>Ei(),[]),h=f.useCallback(C=>{if(C.query.trim()==="")return;t?.(C),C.mentions&&C.mentions.some(E=>E.type==="space")&&m();const S=C.newFrontendContextUUID??Ei();n&&(c(),l(),i({rawQuery:C.query,dslQuery:C.dslQuery,mentions:C.mentions,copilotOverride:a?!0:void 0,attachments:C.attachments,collection:e||null,newFrontendContextUUID:S,promptSource:C.promptSource||"user",querySource:C.querySource,timeFromFirstType:C.timeFromFirstType,shouldRedirectToBackendUUID:!r,...C.side_by_side_metadata&&{side_by_side_metadata:C.side_by_side_metadata},onThreadSlugReceived:E=>{if(!r)return;const M=window.location.pathname;M.startsWith(`${u.base}/search/`)&&Sde(M.split("/").pop())&&u.replace(`/search/${E}`,"Home ask input")}}),r&&setTimeout(()=>{u.push(`/search/new/${S}`,void 0,"Home ask input")}))},[t,n,c,l,i,a,e,r,u,m]),g=q_e({handleSubmitQuery:h,isHomepage:!0,contextUuid:p}),y=f.useRef(!1),x=f.useCallback(C=>{y.current||(y.current=!0,setTimeout(()=>y.current=!1,zV),g(C))},[g]),[v,b,_]=GV({onSubmit:x,immediate:!r}),w=s(gs[d].askInputPlaceholder);return[v,b,f.useMemo(()=>({..._,placeholder:w}),[_,w])]}const qV=de.PRO,K_e=e=>({id:e.task_id,title:e.task_name,prompt:e.prompt,searchModel:kU(e.model_preference)??qV,sources:OE(e.sources),preconfigured:e.preconfigured});function Ydn(e=""){return{title:"",prompt:e,searchModel:qV,sources:["web"],preconfigured:!1}}const Fvt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"shortcut-widget",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},mte="shortcut-widgets-enabled-cache";function Uvt(){const{variation:e,loading:t}=Fvt(!1),{value:n,loading:r}=$r({flag:"shortcut-tasks",defaultValue:!0}),s=t||r,a=e&&n,[i,l]=f.useState(()=>{const c=Oe.getItem(mte);return c?JSON.parse(c):!1});return f.useEffect(()=>{s||a!==i&&(l(a),Oe.setItem(mte,JSON.stringify(a)))},[a,s,i]),i}function pte(e,t){Np("SHORTCUT",t,e)}const KV=f.memo(({context:e,widgetId:t,defaultName:n,defaultQuery:r,showSettings:s,setShowSettings:a})=>{const[i,l,{onSubmit:c}]=F5({csrRedirect:!0}),[u,d]=f.useState(()=>A_e({context:e,widgetId:t,defaultQuery:r,defaultName:n})),{data:m}=We({queryKey:qU(u.taskId),queryFn:()=>L5({taskId:u.taskId,reason:"ShortcutWidget"}),enabled:u.taskId!==$V});f.useEffect(()=>{m&&d(x=>{const v={...x,query:m.prompt,name:m.title};return pte(v,t),v})},[m,t]);const p=f.useCallback(()=>{c({query:u.query,querySource:"homepage_widget",promptSource:"homepage_widget",mentions:[{type:"shortcut",id:u.taskId,url:""}]})},[c,u.query,u.taskId]),h=f.useCallback(()=>{a?.(!1)},[a]),g=f.useCallback(x=>{pte(x,t),d(x),a?.(!1)},[a,t]),y=o.jsxs("div",{className:"flex size-full flex-col p-3",style:{zoom:e==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{color:"super",children:o.jsx(le,{icon:wi,size:"lg"})}),o.jsxs(F,{variant:"tinyRegular",color:"light",className:"line-clamp-2 break-words",children:["/",u.name]})]}),o.jsx(F,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance break-words",children:u.query})]});return e==="thumbnail"?y:o.jsxs(o.Fragment,{children:[o.jsx(un,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:p,children:o.jsx(wn,{hoverOnly:!0,className:"size-full",children:o.jsx(H,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:y})})}),s&&o.jsx(Bvt,{shortcut:u,onDone:g,onClose:h})]})});KV.displayName="ShortcutWidget";const Bvt=({shortcut:e,onDone:t,onClose:n})=>{const r="shortcut-widget-settings",{$t:s}=Z(),a=Ca(),{openModal:i}=wt(),[l,c]=f.useState(e.taskId),[u,d]=f.useState(null),{data:m}=D5({reason:r}),p=f.useCallback(x=>m?.find(v=>v.task_id===x),[m]),h=f.useMemo(()=>{const x=[];m&&m.forEach(b=>{if(!b.prompt.length)return;const _={type:"default",text:`/${b.task_name}`,tooltipText:b.prompt,rightElement:b.preconfigured?null:o.jsx(Vvt,{shortcut:b,focused:u===b.task_id}),onMouseEnter:()=>{d(b.task_id)},onClick:()=>{c(b.task_id)}};x.push(_)});const v={type:"default",text:s({defaultMessage:"+ Create a new shortcut",id:"91niw1hBV9"}),onMouseEnter:()=>{d("create")},onClick:()=>{i("taskShortcutModal",{source:"shortcut_widget",onCreated:b=>{c(b.id)}})}};return[...x,v]},[m,s,i,u]),g=f.useMemo(()=>{const x=p(l);return x?`/${x.task_name}`:s({defaultMessage:"Choose or create a shortcut",id:"mtB/vUwddZ"})},[p,l,s]),y=f.useCallback(()=>{const x=p(l);x&&t({...e,query:x.prompt,name:x.task_name,taskId:l})},[t,e,p,l]);return o.jsx(Je,{children:o.jsx(_f,{onClose:n,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"entry-title-300",children:s({defaultMessage:"Shortcuts",id:"7FAwwkYilD"})}),o.jsx(F,{variant:"small",color:"light",children:s({defaultMessage:"Add a shortcut to a query that you use often.",id:"ry+zfkzET+"})})]}),o.jsx(sn,{items:h,isMobileStyle:a,children:o.jsx(pe,{size:"small",chevron:!0,chevronIcon:Bn,text:g,textClassName:"font-normal",layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})}),o.jsx("div",{className:"flex flex-row justify-end",children:o.jsx(pe,{variant:"primary",size:"small",onClick:y,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})},Vvt=({shortcut:e,focused:t})=>{const{openModal:n}=wt(),r=f.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:K_e(e)})},[n,e]);return o.jsx("div",{className:V("transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:o.jsx(Te,{icon:Vu,size:"tiny",variant:"common",noPadding:!0,onClick:r})})};function $vt(e="widget",t,n){if(e==="widget"){const r=Sx("ASSISTANT",t);if(r)return{version:1,query:r.query??n??""}}return{version:1,query:n??""}}function hte(e,t="widget",n){t==="widget"&&Np("ASSISTANT",n,e)}const YV=R.memo(({context:e="widget",defaultQuery:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const a=$vt(e,n,t),{$t:i}=Z(),[l,c]=f.useState(a.query||""),[u,d,{onSubmit:m}]=F5({csrRedirect:!0}),p=f.useRef(Js(C=>{hte({query:C.query,version:1},e,n)},1e3));f.useEffect(()=>{const C=p.current.flush;return()=>{C()}},[p]);const h=C=>{const S=C.target.value;c(S),p.current({query:S})},g=o.jsxs("div",{className:V("flex size-full flex-col p-3",{"p-3":e==="thumbnail"}),style:{zoom:e==="thumbnail"?.75:1},children:[o.jsx(F,{color:"super",children:o.jsx(le,{icon:wi,size:"lg"})}),o.jsx(F,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance",children:l||""})]}),y=f.useCallback(()=>{m({query:l,querySource:"homepage_widget",promptSource:"homepage_widget"})},[m,l]),x=f.useCallback(()=>s?.(!1),[s]),v=f.useCallback(()=>{hte({query:l||"",version:1},e,n),s?.(!1)},[s,l,e,n]),b=f.useCallback(()=>c(i({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})),[i]),_=f.useCallback(()=>c(i({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})),[i]),w=f.useCallback(()=>c(i({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})),[i]);return e==="thumbnail"?g:o.jsxs(o.Fragment,{children:[o.jsx(un,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:y,children:o.jsx(wn,{hoverOnly:!0,className:"size-full",children:o.jsx(H,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:g})})}),o.jsx(Je,{children:r&&o.jsx(_f,{onClose:x,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"entry-title-300",children:i({defaultMessage:"Assistant query",id:"FyiOOCgH1j"})}),o.jsx(F,{variant:"small",color:"light",children:i({defaultMessage:"Save assistant queries that you use often.",id:"p2agK1deUX"})})]}),o.jsx("div",{children:o.jsxs("div",{className:"text-foreground relative whitespace-pre-wrap break-words px-3 py-2 text-sm after:content-['\\\\200B']",children:[o.jsx("span",{className:"invisible",children:l||""}),o.jsx("textarea",{className:"bg-base text-foreground border-subtler placeholder:text-quiet focus:ring-subtler absolute -inset-px size-full resize-none overflow-hidden rounded-md border px-3 py-2 text-sm outline-none focus:outline-none focus:ring-1",value:l||"",onChange:h})]})}),o.jsx("div",{children:o.jsxs(F,{variant:"tinyRegular",color:"light",children:[i({defaultMessage:"For example",id:"qbXH6UvD6V"}),":"," ",o.jsx(F,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:b,children:i({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})}),","," ",o.jsx(F,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:_,children:i({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})}),","," ",o.jsx(F,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:w,children:i({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})}),"."]})}),o.jsx("div",{className:"flex flex-row justify-end",children:o.jsx(pe,{variant:"primary",size:"small",onClick:v,text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});YV.displayName="AssistantWidget";var rS={exports:{}},gte;function Wvt(){return gte||(gte=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default}(rS,rS.exports)),rS.exports}var sS={exports:{}},yte;function Hvt(){return yte||(yte=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}e.exports=t.default}(sS,sS.exports)),sS.exports}function zvt(e,t){var n=Yvt(t);return n.formatToParts?qvt(n,e):Kvt(n,e)}var Gvt={year:0,month:1,day:2,hour:3,minute:4,second:5};function qvt(e,t){try{for(var n=e.formatToParts(t),r=[],s=0;s<n.length;s++){var a=Gvt[n[s].type];a>=0&&(r[a]=parseInt(n[s].value,10))}return r}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function Kvt(e,t){var n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var JA={};function Yvt(e){if(!JA[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";JA[e]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return JA[e]}function Y_e(e,t,n,r,s,a,i){var l=new Date(0);return l.setUTCFullYear(e,t,n),l.setUTCHours(r,s,a,i),l}var xte=36e5,Qvt=6e4,e6={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Q_e(e,t,n){var r,s;if(!e||(r=e6.timezoneZ.exec(e),r))return 0;var a;if(r=e6.timezoneHH.exec(e),r)return a=parseInt(r[1],10),vte(a)?-(a*xte):NaN;if(r=e6.timezoneHHMM.exec(e),r){a=parseInt(r[2],10);var i=parseInt(r[3],10);return vte(a,i)?(s=Math.abs(a)*xte+i*Qvt,r[1]==="+"?-s:s):NaN}if(Jvt(e)){t=new Date(t||Date.now());var l=n?t:Xvt(t),c=p9(l,e),u=n?c:Zvt(t,c,e);return-u}return NaN}function Xvt(e){return Y_e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function p9(e,t){var n=zvt(e,t),r=Y_e(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),s=e.getTime(),a=s%1e3;return s-=a>=0?a:1e3+a,r-s}function Zvt(e,t,n){var r=e.getTime(),s=r-t,a=p9(new Date(s),n);if(t===a)return t;s-=a-t;var i=p9(new Date(s),n);return a===i?a:Math.max(a,i)}function vte(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var bte={};function Jvt(e){if(bte[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),bte[e]=!0,!0}catch{return!1}}var e1t=Wvt();const t1t=Ka(e1t);var n1t=Hvt();const _te=Ka(n1t);var r1t=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,t6=36e5,wte=6e4,s1t=2,Da={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:r1t};function a1t(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n={},r=n.additionalDigits==null?s1t:t1t(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=i1t(e),a=o1t(s.date,r),i=a.year,l=a.restDateString,c=l1t(l,i);if(isNaN(c))return new Date(NaN);if(c){var u=c.getTime(),d=0,m;if(s.time&&(d=c1t(s.time),isNaN(d)))return new Date(NaN);if(s.timeZone||n.timeZone){if(m=Q_e(s.timeZone||n.timeZone,new Date(u+d)),isNaN(m))return new Date(NaN)}else m=_te(new Date(u+d)),m=_te(new Date(u+d+m));return new Date(u+d+m)}else return new Date(NaN)}function i1t(e){var t={},n=Da.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=Da.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){var s=Da.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function o1t(e,t){var n=Da.YYY[t],r=Da.YYYYY[t],s;if(s=Da.YYYY.exec(e)||r.exec(e),s){var a=s[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(s=Da.YY.exec(e)||n.exec(e),s){var i=s[1];return{year:parseInt(i,10)*100,restDateString:e.slice(i.length)}}return{year:null}}function l1t(e,t){if(t===null)return null;var n,r,s,a;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(n=Da.MM.exec(e),n)return r=new Date(0),s=parseInt(n[1],10)-1,Ste(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(n=Da.DDD.exec(e),n){r=new Date(0);var i=parseInt(n[1],10);return f1t(t,i)?(r.setUTCFullYear(t,0,i),r):new Date(NaN)}if(n=Da.MMDD.exec(e),n){r=new Date(0),s=parseInt(n[1],10)-1;var l=parseInt(n[2],10);return Ste(t,s,l)?(r.setUTCFullYear(t,s,l),r):new Date(NaN)}if(n=Da.Www.exec(e),n)return a=parseInt(n[1],10)-1,Ete(t,a)?Cte(t,a):new Date(NaN);if(n=Da.WwwD.exec(e),n){a=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return Ete(t,a,c)?Cte(t,a,c):new Date(NaN)}return null}function c1t(e){var t,n,r;if(t=Da.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),n6(n)?n%24*t6:NaN;if(t=Da.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),n6(n,r)?n%24*t6+r*wte:NaN;if(t=Da.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return n6(n,r,s)?n%24*t6+r*wte+s*1e3:NaN}return null}function Cte(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var u1t=[31,28,31,30,31,30,31,31,30,31,30,31],d1t=[31,29,31,30,31,30,31,31,30,31,30,31];function X_e(e){return e%400===0||e%4===0&&e%100!==0}function Ste(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var r=X_e(e);if(r&&n>d1t[t]||!r&&n>u1t[t])return!1}return!0}function f1t(e,t){if(t<1)return!1;var n=X_e(e);return!(n&&t>366||!n&&t>365)}function Ete(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function n6(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function h9(e,t,n){var r=a1t(e,n),s=Q_e(t,r,!0),a=new Date(r.getTime()-s),i=new Date(0);return i.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),i.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),i}const m1t=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),p1t=async e=>{let t;e&&(t=m1t(e));const{data:n,error:r}=await ae.GET("/rest/homepage-widgets/clock/current-location","clock-widget-current-location",{headers:t});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to fetch clock current location",cause:r});return n},Z_e="clock-current-location-cache",g9={geonameid:5391959,name:"San Francisco",latitude:37.77493,longitude:-122.41942,countrycode:"US",population:864816,timezone:"America/Los_Angeles",timezone_offset:-25200};function h1t(){try{const e=Oe.getItem(Z_e);if(e)return JSON.parse(e)}catch{}return null}function g1t(e){try{Oe.setItem(Z_e,JSON.stringify(e))}catch{}}function y1t(e="widget",t){if(e==="widget"){const n=Sx("ANALOG_CLOCK",t);if(n)return n.version===1?{version:2,city:n.city,useCurrentLocation:!n.city}:n}return{version:2,city:g9,useCurrentLocation:!0}}function Mte(e,t="widget",n){t==="widget"&&Np("ANALOG_CLOCK",n,e)}const x1t=()=>{const{location:e}=mx(),t=h1t();return We({queryKey:["clock-current-location",e?.latitude,e?.longitude],queryFn:async()=>{const n=await p1t(e);return n&&g1t(n),n},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,placeholderData:t})};function v1t(e,t="widget"){const n=y1t(t,e),[r,s]=f.useState(n),{data:a,isLoading:i}=x1t(),l=f.useMemo(()=>r.useCurrentLocation&&a?{name:a.name||"Your Location",timezone:a.timezone,country:a.country}:r.city||g9,[r.useCurrentLocation,a,r.city]),c=f.useCallback(d=>{const m={...r,...d};s(m),Mte(m,t,e)},[r,t,e]),u=f.useCallback((d,m)=>{const p={...r,city:d,useCurrentLocation:d?!1:m??!0};s(p),Mte(p,t,e)},[r,t,e]);return f.useMemo(()=>({selectedCity:l,settings:r,currentLocationData:a??null,isLoading:i,updateSettings:c,saveCity:u}),[l,r,a,i,c,u])}const b1t=async({query:e="",limit:t=10,reason:n})=>{try{const{error:r,data:s}=await ae.GET("/rest/homepage-widgets/cities-autosuggests",n,{params:{query:{query:e,limit:t}},timeoutMs:2e3});if(r)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get cities autosuggestions",cause:r});return s.data??[]}catch(r){return ne.error(r),[]}},_1t=({query:e="",limit:t=5,reason:n})=>We({queryKey:["cities",e,t],queryFn:()=>b1t({query:e,limit:t,reason:n}),enabled:e?.trim().length>0,staleTime:5*60*1e3,gcTime:30*60*1e3}),w1t=100,C1t=()=>o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Te,{icon:ur,size:"small",pill:!0})}),S1t=()=>o.jsx("div",{className:"w-sm"}),E1t=({onClear:e})=>o.jsx(Te,{icon:It,size:"tiny",pill:!0,onClick:e}),QV=R.memo(({widgetId:e,showCity:t=!1,showSettings:n,setShowSettings:r,context:s="widget"})=>{const{$t:a}=Z(),{colorScheme:i}=Jr(),l=i==="dark",c=f.useRef(!0),{isMobileUserAgent:u}=Ce(),d="clock-widget-settings",{selectedCity:m,settings:p,updateSettings:h,saveCity:g}=v1t(e,s),y=f.useRef(null),[x,v]=f.useState(m.name??""),[b,_]=f.useState(-1),[w,C]=f.useState(!1);f.useEffect(()=>{v(m.name??"")},[m.name]);const{data:S=[]}=_1t({query:x,limit:w1t,reason:d}),E=f.useMemo(()=>S.map(te=>({query:te.name,title:te.name,description:`${te.countrycode}  ${te.timezone}`,identifier:te.geonameid.toString()})),[S]),[M,k]=f.useState(new Date);f.useEffect(()=>{const te=setInterval(()=>{k(new Date)},1e3);return()=>clearInterval(te)},[]);const N=te=>te*6,P=te=>te*6,L=te=>te*30,O=h9(M,m.timezone),A=N(O.getSeconds()),j=P(O.getMinutes()),T=L(O.getHours()+O.getMinutes()/60),I=f.useCallback(()=>{C(!0)},[]),U=f.useCallback(()=>{C(!1)},[]),B=f.useCallback(te=>{v(te)},[]),D=()=>{v("")},W=f.useCallback(te=>S.find(re=>re.geonameid.toString()===te),[S]),z=f.useCallback(te=>{if(!te.identifier)return;const re=W(te.identifier);re&&(h({city:re,useCurrentLocation:!1}),v(re.name),g(re,!1))},[W,h,g]),$=f.useCallback((te,re)=>{z(te)},[z]);f.useEffect(()=>{if(c.current){c.current=!1;return}},[m,s,e]);const X=o.jsxs("div",{className:V("relative size-full p-2",{"pb-7 pt-2":t}),children:[o.jsxs("div",{className:"relative mx-auto aspect-square max-h-full max-w-full",children:[s==="widget"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute right-[calc(25%+4px)] top-1/2 -translate-y-1/2 translate-x-1/2",children:o.jsx(F,{variant:"tinyMono",className:"scale-[70%]",children:o.jsx(cFe,{value:M,hour:"numeric",minute:"2-digit",timeZone:m.timezone})})}),o.jsx("div",{className:"absolute left-[calc(25%+4px)] top-1/2 -translate-x-1/2 -translate-y-1/2",children:o.jsx(F,{variant:"tinyMono",className:"scale-[70%] uppercase",children:o.jsx(EP,{value:M,weekday:"short",timeZone:m.timezone})})})]}),o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[o.jsx("path",{fill:l?"#fff":"#000",d:"M71 130a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5M40.817 122.278a.5.5 0 1 1 .867.5l-5.5 9.527a.5.5 0 0 1-.867-.5zM100.501 122.094a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.683M19.222 100.316a.5.5 0 0 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM122.096 100.499a.5.5 0 0 1 .683-.183l9.527 5.5a.501.501 0 0 1-.5.867l-9.527-5.5a.5.5 0 0 1-.183-.684M11.5 70.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1zM141.5 70.5a.5.5 0 0 1 0 1h-11a.5.5 0 0 1 0-1zM9.513 35.499a.5.5 0 0 1 .682-.183l9.527 5.5a.5.5 0 1 1-.5.867l-9.527-5.5a.5.5 0 0 1-.182-.684M131.806 35.316a.5.5 0 1 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM105.817 9.694a.5.5 0 0 1 .867.5l-5.5 9.527a.501.501 0 0 1-.867-.5zM35.501 9.51a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.682M71 0a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0V.5A.5.5 0 0 1 71 0"}),o.jsx("path",{fill:l?"#444":"#CCC",d:"M63.997 137.633a.5.5 0 0 1 .445.549l-.314 2.984a.5.5 0 1 1-.994-.105l.313-2.983a.5.5 0 0 1 .55-.445M78.004 137.632a.5.5 0 0 1 .55.444l.313 2.984a.5.5 0 1 1-.994.105l-.314-2.984a.5.5 0 0 1 .445-.549M84.932 136.538a.5.5 0 0 1 .593.385l.623 2.934a.5.5 0 1 1-.977.208l-.624-2.934a.5.5 0 0 1 .385-.593M57.07 136.532a.5.5 0 0 1 .385.593l-.624 2.934a.5.5 0 1 1-.979-.208l.624-2.933a.5.5 0 0 1 .593-.386M91.706 134.722a.5.5 0 0 1 .63.321l.927 2.853a.5.5 0 0 1-.95.309l-.928-2.853a.5.5 0 0 1 .32-.63M49.666 135.04a.5.5 0 0 1 .951.309l-.928 2.853a.499.499 0 1 1-.95-.309zM98.25 132.208a.5.5 0 0 1 .661.254l1.221 2.74a.5.5 0 0 1-.914.407l-1.22-2.741a.5.5 0 0 1 .253-.66M43.089 132.46a.5.5 0 0 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM30.92 125.315a.5.5 0 0 1 .81.588l-1.763 2.427a.5.5 0 0 1-.81-.588zM110.383 125.203a.5.5 0 0 1 .698.11l1.764 2.428a.5.5 0 0 1-.81.587l-1.763-2.427a.5.5 0 0 1 .111-.698M115.835 120.79a.5.5 0 0 1 .706.037l2.007 2.229a.5.5 0 1 1-.743.669l-2.007-2.228a.5.5 0 0 1 .037-.707M25.464 120.825a.5.5 0 1 1 .743.669l-2.008 2.229a.5.5 0 0 1-.743-.668zM120.794 115.833a.5.5 0 0 1 .706-.037l2.229 2.007a.499.499 0 1 1-.669.743l-2.229-2.007a.5.5 0 0 1-.037-.706M20.504 115.793a.5.5 0 1 1 .669.743l-2.23 2.007a.5.5 0 0 1-.669-.743zM125.204 110.382a.5.5 0 0 1 .698-.111l2.428 1.764a.5.5 0 0 1-.588.809l-2.428-1.763a.5.5 0 0 1-.11-.699M16.098 110.27a.5.5 0 0 1 .587.809l-2.427 1.764a.5.5 0 1 1-.587-.809zM9.133 97.998a.5.5 0 0 1 .407.913l-2.741 1.221a.5.5 0 0 1-.407-.914zM132.209 98.25a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 0 1-.406.914l-2.741-1.22a.5.5 0 0 1-.253-.66M134.723 91.703a.5.5 0 0 1 .63-.321l2.854.927a.5.5 0 0 1-.31.95l-2.852-.926a.5.5 0 0 1-.322-.63M6.652 91.382a.5.5 0 0 1 .31.95l-2.854.928a.5.5 0 1 1-.308-.952zM137.133 84.545l2.934.623a.501.501 0 0 1-.208.978l-2.934-.624a.5.5 0 1 1 .208-.977M4.873 84.543a.5.5 0 1 1 .208.977l-2.935.624a.5.5 0 0 1-.208-.978zM141.167 77.872a.5.5 0 0 1-.105.995l-2.984-.313a.5.5 0 0 1 .104-.996zM3.818 77.558a.5.5 0 0 1 .105.995l-2.984.313a.5.5 0 0 1-.104-.994zM3.923 63.447a.5.5 0 0 1-.105.995l-2.983-.314a.5.5 0 1 1 .104-.994zM141.062 63.133a.5.5 0 0 1 .105.995l-2.985.313a.5.5 0 0 1-.104-.995zM2.148 55.852l2.935.624a.5.5 0 1 1-.208.979L1.94 56.83a.5.5 0 0 1 .208-.979M139.857 55.85a.5.5 0 0 1 .208.979l-2.934.624a.5.5 0 0 1-.208-.979zM3.477 49.058a.5.5 0 0 1 .631-.32l2.853.927a.5.5 0 1 1-.309.951L3.8 49.688a.5.5 0 0 1-.322-.63M137.898 48.737a.5.5 0 1 1 .309.951l-2.853.927a.5.5 0 0 1-.309-.951zM6.14 42.12a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 1 1-.406.914l-2.742-1.22a.5.5 0 0 1-.253-.66M135.202 41.868a.5.5 0 0 1 .407.914l-2.741 1.22a.5.5 0 1 1-.406-.913zM13.56 29.267a.5.5 0 0 1 .699-.11l2.426 1.764a.5.5 0 0 1-.587.808l-2.427-1.763a.5.5 0 0 1-.112-.699M127.742 29.156a.5.5 0 0 1 .588.809l-2.428 1.763a.5.5 0 0 1-.588-.81zM18.24 23.492a.5.5 0 0 1 .706-.037l2.23 2.008a.5.5 0 0 1-.67.743l-2.229-2.008a.5.5 0 0 1-.037-.706M123.057 23.452a.5.5 0 0 1 .67.743l-2.229 2.008a.5.5 0 0 1-.67-.743zM23.494 18.236a.5.5 0 0 1 .707.037l2.007 2.23a.5.5 0 1 1-.743.669l-2.007-2.23a.5.5 0 0 1 .036-.706M117.804 18.27a.5.5 0 0 1 .743.67l-2.007 2.229a.5.5 0 1 1-.743-.67zM112.035 13.67a.5.5 0 0 1 .809.589l-1.763 2.426a.5.5 0 0 1-.81-.587zM29.268 13.558a.5.5 0 0 1 .699.11l1.763 2.428a.5.5 0 0 1-.81.588l-1.762-2.427a.5.5 0 0 1 .11-.699M42.12 6.139a.5.5 0 0 1 .661.253l1.22 2.74a.5.5 0 0 1-.913.408l-1.22-2.741a.5.5 0 0 1 .253-.66M99.219 6.391a.5.5 0 1 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM49.061 3.476a.5.5 0 0 1 .631.32l.927 2.854a.5.5 0 0 1-.951.31l-.927-2.854a.5.5 0 0 1 .32-.63M92.31 3.795a.5.5 0 1 1 .951.308l-.927 2.854a.5.5 0 1 1-.951-.31zM56.24 1.554a.5.5 0 0 1 .593.384l.624 2.935a.5.5 0 0 1-.979.208l-.623-2.935a.5.5 0 0 1 .385-.592M85.762 1.548a.5.5 0 0 1 .384.593l-.624 2.934a.5.5 0 1 1-.977-.208l.623-2.934a.5.5 0 0 1 .593-.385M78.422.389a.5.5 0 0 1 .445.55l-.314 2.983a.5.5 0 0 1-.995-.105l.314-2.983a.5.5 0 0 1 .55-.445M63.579.388a.5.5 0 0 1 .55.445l.313 2.983a.5.5 0 0 1-.994.105L63.135.937a.5.5 0 0 1 .444-.55"})]}),o.jsx(ve.div,{initial:{rotate:j},animate:{rotate:[j,j+360]},transition:{duration:3600,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:o.jsx("path",{fill:l?"#fff":"#000",fillRule:"evenodd",d:"M71 2a2 2 0 0 1 2 2v60c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V4a2 2 0 0 1 2-2m0 68a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})}),o.jsx(ve.div,{initial:{rotate:T},animate:{rotate:[T,T+360]},transition:{duration:43200,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:o.jsx("path",{fill:l?"#fff":"#000",fillRule:"evenodd",d:"M71 24a2 2 0 0 1 2 2v38c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V26a2 2 0 0 1 2-2m0 46a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})}),o.jsx(ve.div,{initial:{rotate:A},animate:{rotate:[A,A+360]},transition:{duration:60,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[o.jsx("path",{fill:"#FF7323",d:"M71 2a.75.75 0 0 1 .75.75v66.397a2 2 0 0 1 0 3.706v3.397a.75.75 0 0 1-1.5 0v-3.397a1.999 1.999 0 0 1 0-3.706V2.75A.75.75 0 0 1 71 2"}),o.jsx("circle",{cx:71,cy:71,r:1,fill:"#fff"})]})})]}),t&&o.jsx(F,{variant:"tiny",color:"default",className:"pointer-events-none flex h-7 select-none items-center justify-center",children:o.jsx("div",{className:"truncate px-2",children:m.name})})]}),q=V("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&E.length>0,"opacity-50":!!p.useCurrentLocation}),Y=f.useMemo(()=>({LeftIconComponent:S1t,RightIconComponent:C1t}),[]),G=f.useCallback(()=>r?.(!1),[r]),J=f.useCallback(te=>{h({useCurrentLocation:te})},[h]),K=f.useCallback(()=>{r?.(!1)},[r]);return s==="thumbnail"?X:o.jsxs(o.Fragment,{children:[o.jsx(un,{shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ye,{draggable:!1,href:`/search/new?q=${a({defaultMessage:"what time is it in {location}",id:"NbMaPyS+lK"},{location:m.name})}`,className:"relative block size-full",children:X})}),o.jsx(Je,{children:n&&o.jsx(_f,{onClose:G,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(F,{variant:"entry-title-300",children:a({defaultMessage:"Select city",id:"twZBdKGll7"})}),o.jsx(gx,{isOpen:w&&E.length>0,suggestedQueries:E,focusedIndex:b,setFocusedIndex:_,handlePasteQuery:Pn,handleSubmit:$,value:x??"",components:Y,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Wr,{disable1pass:!0,disabled:p.useCurrentLocation,onFocus:I,onBlur:U,className:q,pill:!1,ref:y,isMobileUserAgent:u,placeholder:a({defaultMessage:"New York, London, Tokyo...",id:"iJ+co77mIp"}),value:x,onChange:B,ClearIcon:E1t,...x.length>0?{onClear:D}:{}})}),o.jsxs("label",{htmlFor:"use-current-location",className:"gap-sm flex w-fit flex-row items-center",children:[o.jsx(B_,{id:"use-current-location",checked:!!p.useCurrentLocation,toggleChecked:J}),o.jsx(F,{variant:"small",color:"light",children:a({defaultMessage:"Use current location",id:"Z2NE7X6xxg"})})]}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(pe,{variant:"primary",size:"small",onClick:K,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});QV.displayName="ClockWidget";const J_e=20,M1t=async({options:e,reason:t})=>{const n=e?.offset??0,r=e?.limit??J_e,s=e?.topic??null,a=e?.nextToken??null,{data:i,error:l}=await ae.GET("/rest/discover/feed",t,{params:{query:{limit:r,offset:n,next_token:a,topic:s&&s!=="you"?[s]:void 0}},timeoutMs:Fe(),numRetries:1,reason:t});if(l)throw new Ie("API_CLIENTS_ERROR",{cause:l});const c=i;if(c.status!=="success")throw new Ie("API_CLIENTS_ERROR",{cause:c});const u=c?.items??[],d=c?.feed_uuid??null,m=c?.next_token??null;return d&&u.length>0&&u.forEach(p=>{p.feed_uuid=d}),{threads:u,nextToken:m}},k1t=async e=>{try{const t=await Er({headers:e,urlPath:`/rest/discover/topics?version=${Sl}`,timeoutMs:1500,numRetries:1});if(!t.ok){const r=await t.text();throw new Error(`Bad discover response: ${r}`)}const n=await t.json();return{userSelectedTopics:n?.user_selected_topics??[],allTopics:n?.all_topics??[]}}catch(t){return ne.error("Failed to get discover topics.",t),{userSelectedTopics:[],allTopics:[]}}};function T1t(){return We({queryKey:bye(),queryFn:()=>k1t(),placeholderData:mf,refetchOnReconnect:!0,refetchOnMount:!1})}const N1t=async({topics:e,reason:t})=>{const{data:n,error:r}=await ae.PUT("/rest/discover/topics",t,{body:{topics:e,return_feed:!0,return_feed_limit:J_e,return_feed_version:Sl},timeoutMs:1500,numRetries:1});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r});const s=n,a=s.feed_items??[],i=s.feed_uuid,l=s.next_token??null;return i&&a?.length>0&&a.forEach(c=>{c.feed_uuid=i}),{status:"success",feedItems:a,nextToken:l}},Qdn=async({contextUUID:e,reason:t})=>{const n=await ae.PUT("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Xdn=async({contextUUID:e,reason:t})=>{const n=await ae.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Zdn=async({contextUUID:e,reason:t})=>{const n=await ae.PUT("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Jdn=async({contextUUID:e,reason:t})=>{const n=await ae.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},j1t=20,A1t=({pageParam:e,topic:t,reason:n})=>{const r=e.pageNum*j1t;return M1t({options:{offset:r,topic:t,nextToken:e.nextToken},reason:n})},I1t=({initialPage:e,topic:t,reason:n,refetchInterval:r})=>{const s=$u({queryKey:Zc(t),queryFn:({pageParam:m})=>A1t({pageParam:m,topic:t,reason:n}),refetchOnReconnect:"always",refetchOnMount:!1,initialPageParam:{pageNum:e},refetchInterval:r,getNextPageParam:(m,p,h)=>{if(!(m&&!m.threads?.[0]?.has_next_page))return{pageNum:h.pageNum+1,nextToken:m.nextToken}}}),a=s.data?.pages??[],i=(()=>{const m=new Set;return a.flatMap(p=>p.threads).filter(p=>m.has(p.uuid)?!1:(m.add(p.uuid),!0))})(),l=a[a.length-1]?.threads?.[0]?.has_next_page??!1,c=s.data?.pageParams?.length??1,u=l?c+1:null,d=f.useMemo(()=>({currentPage:c,hasNextPage:l,hasPreviousPage:c>1,getNextPage:()=>s.fetchNextPage(),getPreviousPage:()=>s.fetchPreviousPage()}),[l,c,s]);return f.useMemo(()=>({...s,nextPage:u,paginationInfo:d,threads:i}),[u,d,s,i])},R1t=0,P1t=({topic:e,reason:t,refetchInterval:n})=>{const{threads:r,paginationInfo:s,isLoading:a,isFetching:i,fetchStatus:l,nextPage:c}=I1t({initialPage:R1t,topic:e,reason:t,refetchInterval:n}),u=a||l==="fetching",d=!r?.length&&!a&&l==="idle",m=f.useCallback(()=>{!s.hasNextPage||i||s.getNextPage()},[i,s]);return f.useMemo(()=>({threads:r,paginationInfo:s,isLoading:a,fetchStatus:l,nextPage:c,showLoadingState:u,showEmptyState:d,fetchNextPage:m}),[r,s,a,l,c,u,d,m])},y9=R.memo(({variant:e,className:t,colorVariant:n,text:r,lines:s=1})=>{const i=f.useMemo(()=>({height:"50%"}),[.5]);return o.jsxs("div",{className:`relative grid items-center ${t}`,children:[o.jsx("div",{className:"col-start-1 row-start-1 flex size-full flex-col",children:Array.from({length:s}).map((l,c)=>o.jsx("div",{className:"flex h-full items-center",children:o.jsx(H,{className:V("rounded-full",{"w-full":c!==s-1||s===1,"w-1/2":c===s-1&&s>1}),variant:n??"subtle",style:i})},c))}),o.jsx(F,{variant:e,color:"light",className:"pointer-events-none col-start-1 row-start-1 opacity-0",children:Array.from({length:s}).map((l,c)=>o.jsxs(R.Fragment,{children:[r??o.jsx(o.Fragment,{children:""}),c<s-1&&o.jsx("br",{})]},c))})]})});y9.displayName="TextBlockSkeleton";const XV=R.memo(({showSettings:e,setShowSettings:t,context:n="widget"})=>{const{$t:r}=Z(),s=Z(),[a,i]=f.useState(!1),{threads:l}=P1t({topic:"top",reason:"Discover widget",refetchInterval:n==="thumbnail"?void 0:1e3*60*5}),c=l[0]?.updated_datetime?.endsWith("Z")?l[0]?.updated_datetime:`${l[0]?.updated_datetime}Z`,u=l[0]?.featured_images?.[0]?.thumbnail;f.useEffect(()=>{i(!1)},[u]);const d=l[0]?o.jsx("div",{className:V("size-full transform-gpu rounded-2xl"),children:o.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0",style:{zoom:n==="thumbnail"?.75:1},children:[u&&!a&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:u,alt:"Discover",className:"absolute inset-0 size-full object-cover",onError:()=>{i(!0)}},u),o.jsx("div",{className:"absolute inset-0 bg-black/50"}),o.jsx("div",{className:"absolute inset-0 bg-black",style:{maskImage:"linear-gradient(to bottom, transparent 50%, black)"}})]}),o.jsxs("div",{className:V("absolute inset-0 flex flex-col items-start justify-end gap-1 p-2",{"drop-shadow-md":!a}),children:[o.jsx(F,{variant:"micro",color:a?"default":"white",className:"opacity-60",children:F_(s,new Date(c))}),o.jsx(F,{variant:"smallBold",color:a?"default":"white",className:"w-full break-words",children:l[0].title})]})]})}):o.jsx("div",{className:"bg-subtler size-full",children:o.jsxs("div",{className:"absolute inset-0 flex w-full flex-col items-start justify-end gap-1 p-2",children:[o.jsx(y9,{variant:"micro",colorVariant:"subtle",className:"w-10 opacity-75 dark:opacity-60"}),o.jsx(y9,{variant:"smallBold",colorVariant:"subtle",lines:3,className:"w-full"})]})}),m=f.useCallback(()=>t?.(!1),[t]);return n==="thumbnail"?d:o.jsxs(o.Fragment,{children:[o.jsx(un,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ye,{href:`/page/${l[0]?.slug}`,className:"block",children:o.jsx("div",{className:"absolute inset-0 select-none",children:d})})}),o.jsx(Je,{children:e&&o.jsx(_f,{onClose:m,children:o.jsx("div",{className:"flex flex-col gap-3 px-5 py-4",children:o.jsx(F,{variant:"entry-title-300",children:r({defaultMessage:"Discover settings",id:"Kf1JUdlcaI"})})})})})]})});XV.displayName="DiscoverWidget";const O1t=()=>{const e=f.useRef(null),t=f.useRef(null),n=f.useCallback((i,l)=>{if(e.current=i,!i||(i.volume=.5,!l))return;const c=i.play();c!==void 0&&(t.current=c,c.catch(()=>{}).finally(()=>{t.current===c&&(t.current=null)}))},[]),r=f.useCallback(()=>{const i=e.current;if(!i)return;const l=i.play();l!==void 0&&(t.current=l,l.catch(()=>{}).finally(()=>{t.current===l&&(t.current=null)}))},[]),s=f.useCallback(()=>{const i=e.current;i&&(t.current?t.current.catch(()=>{}).finally(()=>{i.pause()}):i.pause())},[]),a=f.useCallback(i=>{i?r():s()},[r,s]);return{videoRef:e,setVideoRef:n,playVideo:r,pauseVideo:s,togglePlayback:a}},L1t="https://r2cdn.perplexity.ai/comet/explore-assistant-min.mp4",kte="https://r2cdn.perplexity.ai/comet/eplore-assistant-stop-min.png",D1t=({context:e="widget"})=>{const{targetUrl:t,shouldShowWidget:n}=HV(),{trackEvent:r}=je(),{setVideoRef:s,togglePlayback:a}=O1t(),i=f.useCallback(m=>{s(m,!1)},[s]),l=f.useCallback(()=>{if(!t)return;const m=ha(t);r("explore assistant clicked",{domain:m})},[t,r]);if(f.useEffect(()=>{r("explore assistant shown")},[r]),!n||!t)return null;const c=()=>{e==="widget"&&a(!0)},u=()=>{e==="widget"&&a(!1)},d=o.jsx("div",{className:V("relative size-full cursor-pointer select-none",{"active:!bg-subtler dark:active:!bg-subtle":e==="widget"}),onMouseEnter:c,onMouseLeave:u,children:o.jsxs("div",{className:"group relative size-full",children:[e==="widget"?o.jsx("video",{ref:i,src:L1t,poster:kte,className:"pointer-events-none absolute inset-0 size-full object-cover",autoPlay:!1,loop:!0,muted:!0,playsInline:!0}):o.jsx("img",{src:kte,alt:"Explore Assistant",className:"pointer-events-none absolute inset-0 size-full object-cover"}),o.jsx("div",{className:"pointer-events-none absolute bottom-0 h-[45px] w-full bg-gradient-to-b from-transparent to-[#02233E]"}),o.jsx("div",{className:"absolute inset-x-0 bottom-2 flex justify-center",children:o.jsx(F,{variant:"tinyMono",color:"white",className:"!text-2xs uppercase drop-shadow-lg",children:e==="widget"?"Try Assistant In Action":"Try Assistant"})})]})});return e==="thumbnail"?d:o.jsx(un,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:o.jsx(Ye,{href:t,target:"_blank",rel:"noopener",className:"block size-full cursor-pointer",draggable:!1,onClick:l,children:d})})},ewe=R.memo(D1t),twe=e=>{switch(e){case"YELLOW":return"bg-[#fef3c7] dark:bg-[#422006]";case"BLUE":return"bg-[#dbeafe] dark:bg-[#172554]";case"RED":return"bg-[#fee2e2] dark:bg-[#450a0a]";case"GREEN":return"bg-[#d1fae5] dark:bg-[#052e16]";default:return"bg-[#fef3c7] dark:bg-[#422006]"}},F1t=e=>{switch(e){case"YELLOW":return"placeholder-[#eab308] dark:placeholder-[#a16207]";case"BLUE":return"placeholder-[#3b82f6] dark:placeholder-[#1d4ed8]";case"RED":return"placeholder-[#ef4444] dark:placeholder-[#b91c1c]";case"GREEN":return"placeholder-[#22c55e] dark:placeholder-[#15803d]";default:return"placeholder-[#eab308] dark:placeholder-[#a16207]"}},Tte=e=>{switch(e){case"YELLOW":return"text-[#a16207] dark:text-[#fef08a]";case"BLUE":return"text-[#1d4ed8] dark:text-[#bfdbfe]";case"RED":return"text-[#b91c1c] dark:text-[#fecaca]";case"GREEN":return"text-[#15803d] dark:text-[#bbf7d0]";default:return"text-[#a16207] dark:text-[#fef08a]"}};function U1t(e="widget",t,n){if(e==="widget"){const r=Sx("STICKY",t);if(r)return{text:r.text??n??"",color:r.color??"YELLOW"}}return{text:n??"",color:"YELLOW"}}function B1t(e,t="widget",n){t==="widget"&&Np("STICKY",n,{version:1,text:e.text,color:e.color})}const ZV=R.memo(({context:e="widget",defaultText:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const{$t:a}=Z(),i=U1t(e,n,t),[l,c]=f.useState(()=>i.text),[u,d]=f.useState(()=>i.color),m=f.useRef(Uy(w=>{B1t({...w},e,n)},200));f.useEffect(()=>{const w=m.current.flush;return()=>{w()}},[m]);const p=w=>{const C=w.target.value;c(C),m.current({text:C,color:u})},h=["YELLOW","BLUE","RED","GREEN"],g=a({defaultMessage:"Milk",id:"2ohof39xN+"}),y=a({defaultMessage:"Eggs",id:"rMvDs1YU+D"}),x=a({defaultMessage:"Bread",id:"0n2Uqvcq4W"}),v=o.jsxs("div",{className:"relative flex size-full cursor-pointer flex-col",style:{zoom:e==="thumbnail"?.75:1},children:[o.jsx("div",{className:V("absolute inset-0",twe(u))}),e==="widget"?o.jsx("textarea",{className:V("scrollbar-none absolute inset-0 z-[1] resize-none bg-transparent p-4 font-sans text-sm focus:outline-none",F1t(u),Tte(u)),autoCorrect:"false",placeholder:a({defaultMessage:"New note...",id:"i+imRH5ndN"}),value:l,onChange:p,style:{maskImage:"linear-gradient(to top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 16px, rgba(0,0,0,1) calc(100% - 16px), rgba(0,0,0,0) 100%)"}}):o.jsx("div",{className:"absolute inset-0 p-4",children:o.jsxs(F,{variant:"baseSemi",className:Tte(u),children:["- ",g,o.jsx("br",{}),"- ",y,o.jsx("br",{}),"- ",x,o.jsx("br",{})]})})]}),b=f.useCallback(()=>s?.(!1),[s]),_=f.useCallback(()=>s?.(!1),[s]);return e==="thumbnail"?v:o.jsxs(o.Fragment,{children:[o.jsx(un,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:v}),o.jsx(Je,{children:r&&o.jsx(_f,{onClose:_,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(F,{variant:"entry-title-300",children:a({defaultMessage:"Sticky color",id:"d1DnFHvFSU"})}),o.jsx("div",{className:"gap-sm grid w-full grid-cols-4",children:h.map((w,C)=>o.jsx(nwe,{value:w,color:u,text:l,setColor:d,debouncedSave:m},C))}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(pe,{variant:"primary",size:"small",onClick:b,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});ZV.displayName="Sticky";function V1t({color:e,onClick:t,selected:n}){return o.jsxs(ve.div,{whileTap:{scale:.95},onClick:t,className:V("relative aspect-square size-full cursor-pointer rounded-full",twe(e)),children:[n&&o.jsx("div",{className:"border-inverse absolute inset-1 rounded-full border-4"}),o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"})]})}const nwe=R.memo(({value:e,color:t,text:n,setColor:r,debouncedSave:s})=>{const a=f.useCallback(()=>{r(e),s.current({text:n,color:e})},[s,r,n,e]);return o.jsx(V1t,{color:e,onClick:a,selected:e===t})});nwe.displayName="StickyColorFactory";const Rd=(e,t,n)=>{const r=document.createElement(e),[s,a]=Array.isArray(t)?[void 0,t]:[t,n];return s&&Object.assign(r,s),a?.forEach(i=>r.appendChild(i)),r},$1t=(e,t)=>{var n;return t==="left"?e.offsetLeft:(((n=e.offsetParent instanceof HTMLElement?e.offsetParent:null)==null?void 0:n.offsetWidth)??0)-e.offsetWidth-e.offsetLeft},W1t=e=>e.offsetWidth>0&&e.offsetHeight>0,H1t=(e,t)=>{customElements.get(e)!==t&&customElements.define(e,t)};function z1t(e,t,{reverse:n=!1}={}){const r=e.length;for(let s=n?r-1:0;n?s>=0:s<r;n?s--:s++)t(e[s],s)}function G1t(e,t,n,r){const s=t.formatToParts(e);n&&s.unshift({type:"prefix",value:n}),r&&s.push({type:"suffix",value:r});const a=[],i=[],l=[],c=[],u={},d=y=>`${y}:${u[y]=(u[y]??-1)+1}`;let m="",p=!1,h=!1;for(const y of s){m+=y.value;const x=y.type==="minusSign"||y.type==="plusSign"?"sign":y.type;x==="integer"?(p=!0,i.push(...y.value.split("").map(v=>({type:x,value:parseInt(v)})))):x==="group"?i.push({type:x,value:y.value}):x==="decimal"?(h=!0,l.push({type:x,value:y.value,key:d(x)})):x==="fraction"?l.push(...y.value.split("").map(v=>({type:x,value:parseInt(v),key:d(x),pos:-1-u[x]}))):(p||h?c:a).push({type:x,value:y.value,key:d(x)})}const g=[];for(let y=i.length-1;y>=0;y--){const x=i[y];g.unshift(x.type==="integer"?{...x,key:d(x.type),pos:u[x.type]}:{...x,key:d(x.type)})}return{pre:a,integer:g,fraction:l,post:c,valueAsString:m,value:typeof e=="string"?parseFloat(e):e}}const q1t=String.raw,K1t=(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0})(),Y1t=typeof CSS<"u"&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),Nte=typeof matchMedia<"u"?matchMedia("(prefers-reduced-motion: reduce)"):null,dM="--_number-flow-d-opacity",JV="--_number-flow-d-width",fM="--_number-flow-dx",e$="--_number-flow-d",Q1t=(()=>{try{return CSS.registerProperty({name:dM,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:fM,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:JV,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:e$,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),X1t="var(--number-flow-char-height, 1em)",dd="var(--number-flow-mask-height, 0.25em)",jte=`calc(${dd} / 2)`,x9="var(--number-flow-mask-width, 0.5em)",zf=`calc(${x9} / var(--scale-x))`,aS="#000 0, transparent 71%",Ate=q1t`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${X1t} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${JV}) / var(--width));transform:translateX(var(${fM})) scaleX(var(--scale-x));margin:0 calc(-1 * ${x9});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${zf},#000 calc(100% - ${zf}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${dd},#000 calc(100% - ${dd}),transparent 100% ),radial-gradient(at bottom right,${aS}),radial-gradient(at bottom left,${aS}),radial-gradient(at top left,${aS}),radial-gradient(at top right,${aS});-webkit-mask-size:100% calc(100% - ${dd} * 2),calc(100% - ${zf} * 2) 100%,${zf} ${dd},${zf} ${dd},${zf} ${dd},${zf} ${dd};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${jte} ${x9};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${fM})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${e$})}.digit__num,.number .section::after{padding:${jte} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${dM}))}`,Z1t=HTMLElement,J1t=Y1t&&K1t&&Q1t;let iS,rwe=class extends Z1t{constructor(){super(),this.created=!1,this.batched=!1;const{animated:t,...n}=this.constructor.defaultProps;this._animated=this.computedAnimated=t,Object.assign(this,n)}get animated(){return this._animated}set animated(t){var n;this.animated!==t&&(this._animated=t,(n=this.shadowRoot)==null||n.getAnimations().forEach(r=>r.finish()))}set data(t){var n;if(t==null)return;const{pre:r,integer:s,fraction:a,post:i,value:l}=t;if(this.created){const c=this._data;this._data=t,this.computedTrend=typeof this.trend=="function"?this.trend(c.value,l):this.trend,this.computedAnimated=J1t&&this._animated&&(!this.respectMotionPreference||!(Nte!=null&&Nte.matches))&&W1t(this),(n=this.plugins)==null||n.forEach(u=>{var d;return(d=u.onUpdate)==null?void 0:d.call(u,t,c,this)}),this.batched||this.willUpdate(),this._pre.update(r),this._num.update({integer:s,fraction:a}),this._post.update(i),this.batched||this.didUpdate()}else{this._data=t,this.attachShadow({mode:"open"});try{this._internals??(this._internals=this.attachInternals()),this._internals.role="img"}catch{}if(typeof CSSStyleSheet<"u"&&this.shadowRoot.adoptedStyleSheets)iS||(iS=new CSSStyleSheet,iS.replaceSync(Ate)),this.shadowRoot.adoptedStyleSheets=[iS];else{const c=document.createElement("style");c.textContent=Ate,this.shadowRoot.appendChild(c)}this._pre=new Rte(this,r,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new ebt(this,s,a),this.shadowRoot.appendChild(this._num.el),this._post=new Rte(this,i,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el),this.created=!0}try{this._internals.ariaLabel=t.valueAsString}catch{}}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();const t=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(n=>n.finished)).then(()=>{t.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=t}};rwe.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),respectMotionPreference:!0,plugins:void 0,digits:void 0};let ebt=class{constructor(t,n,r,{className:s,...a}={}){this.flow=t,this._integer=new Ite(t,n,{justify:"right",part:"integer"}),this._fraction=new Ite(t,r,{justify:"left",part:"fraction"}),this._inner=Rd("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=Rd("span",{...a,part:"number",className:`number ${s??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update({integer:t,fraction:n}){this._integer.update(t),this._fraction.update(n)}didUpdate(){const t=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();const n=this._prevLeft-t.left,r=this.el.offsetWidth,s=this._prevWidth-r;this.el.style.setProperty("--width",String(r)),this.el.animate({[fM]:[`${n}px`,"0px"],[JV]:[s,0]},{...this.flow.transformTiming,composite:"accumulate"})}},swe=class{constructor(t,n,{justify:r,className:s,...a},i){this.flow=t,this.children=new Map,this.onCharRemove=c=>()=>{this.children.delete(c)},this.justify=r;const l=n.map(c=>this.addChar(c).el);this.el=Rd("span",{...a,className:`section section--justify-${r} ${s??""}`},i?i(l):l)}addChar(t,{startDigitsAtZero:n=!1,...r}={}){const s=t.type==="integer"||t.type==="fraction"?new iwe(this,t.type,n?0:t.value,t.pos,{...r,onRemove:this.onCharRemove(t.key)}):new tbt(this,t.type,t.value,{...r,onRemove:this.onCharRemove(t.key)});return this.children.set(t.key,s),s}unpop(t){t.el.removeAttribute("inert"),t.el.style.top="",t.el.style[this.justify]=""}pop(t){t.forEach(n=>{n.el.style.top=`${n.el.offsetTop}px`,n.el.style[this.justify]=`${$1t(n.el,this.justify)}px`}),t.forEach(n=>{n.el.setAttribute("inert",""),n.present=!1})}addNewAndUpdateExisting(t){const n=new Map,r=new Map,s=this.justify==="left",a=s?"prepend":"append";if(z1t(t,i=>{let l;this.children.has(i.key)?(l=this.children.get(i.key),r.set(i,l),this.unpop(l),l.present=!0):(l=this.addChar(i,{startDigitsAtZero:!0,animateIn:!0}),n.set(i,l)),this.el[a](l.el)},{reverse:s}),this.flow.computedAnimated){const i=this.el.getBoundingClientRect();n.forEach(l=>{l.willUpdate(i)})}n.forEach((i,l)=>{i.update(l.value)}),r.forEach((i,l)=>{i.update(l.value)})}willUpdate(){const t=this.el.getBoundingClientRect();this._prevOffset=t[this.justify],this.children.forEach(n=>n.willUpdate(t))}didUpdate(){const t=this.el.getBoundingClientRect();this.children.forEach(s=>s.didUpdate(t));const n=t[this.justify],r=this._prevOffset-n;r&&this.children.size&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}},Ite=class extends swe{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r),this.unpop(r)}),this.addNewAndUpdateExisting(t),n.forEach(r=>{r instanceof iwe&&r.update(0)}),this.pop(n)}},Rte=class extends swe{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r)}),this.pop(n),this.addNewAndUpdateExisting(t)}},v9=class{constructor(t,n,{onRemove:r,animateIn:s=!1}={}){this.flow=t,this.el=n,this._present=!0,this._remove=()=>{var a;this.el.remove(),(a=this._onRemove)==null||a.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&s&&this.el.animate({[dM]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=r}get present(){return this._present}set present(t){if(this._present!==t){if(this._present=t,t?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){t||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",t?"0":"-.999"),this.el.animate({[dM]:t?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),t?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}},awe=class extends v9{constructor(t,n,r,s){super(t.flow,r,s),this.section=t,this.value=n,this.el=r}},iwe=class extends awe{constructor(t,n,r,s,a){var i,l;const c=(((l=(i=t.flow.digits)==null?void 0:i[s])==null?void 0:l.max)??9)+1,u=Array.from({length:c}).map((m,p)=>{const h=Rd("span",{className:"digit__num"},[document.createTextNode(String(p))]);return p!==r&&h.setAttribute("inert",""),h.style.setProperty("--n",String(p)),h}),d=Rd("span",{part:`digit ${n}-digit`,className:"digit"},u);d.style.setProperty("--current",String(r)),d.style.setProperty("--length",String(c)),super(t,r,d,a),this.pos=s,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=u,this.length=c}willUpdate(t){const n=this.el.getBoundingClientRect();this._prevValue=this.value;const r=n[this.section.justify]-t[this.section.justify],s=n.width/2;this._prevCenter=this.section.justify==="left"?r+s:r-s}update(t){this.el.style.setProperty("--current",String(t)),this._numbers.forEach((n,r)=>r===t?n.removeAttribute("inert"):n.setAttribute("inert","")),this.value=t}didUpdate(t){const n=this.el.getBoundingClientRect(),r=n[this.section.justify]-t[this.section.justify],s=n.width/2,a=this.section.justify==="left"?r+s:r-s,i=this._prevCenter-a;i&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});const l=this.getDelta();l&&(this.el.classList.add("is-spinning"),this.el.animate({[e$]:[-l,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var t;if(this.flow.plugins)for(const s of this.flow.plugins){const a=(t=s.getDelta)==null?void 0:t.call(s,this.value,this._prevValue,this);if(a!=null)return a}const n=this.value-this._prevValue,r=this.flow.computedTrend||Math.sign(n);return r<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:r>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:n}},tbt=class extends awe{constructor(t,n,r,s){const a=Rd("span",{className:"symbol__value",textContent:r});super(t,r,Rd("span",{part:`symbol ${n}`,className:"symbol"},[a]),s),this.type=n,this._children=new Map,this._onChildRemove=i=>()=>{this._children.delete(i)},this._children.set(r,new v9(this.flow,a,{onRemove:this._onChildRemove(r)}))}willUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect();this._prevOffset=n[this.section.justify]-t[this.section.justify]}update(t){if(this.value!==t){const n=this._children.get(this.value);n&&(n.present=!1);const r=this._children.get(t);if(r)r.present=!0;else{const s=Rd("span",{className:"symbol__value",textContent:t});this.el.appendChild(s),this._children.set(t,new v9(this.flow,s,{animateIn:!0,onRemove:this._onChildRemove(t)}))}}this.value=t}didUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect()[this.section.justify]-t[this.section.justify],r=this._prevOffset-n;r&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}};const nbt=parseInt(f.version.match(/^(\d+)\./)?.[1]),t$=nbt>=19,rbt=["data","digits"];class n$ extends rwe{attributeChangedCallback(t,n,r){this[t]=JSON.parse(r)}}n$.observedAttributes=t$?[]:rbt;H1t("number-flow-react",n$);const sbt={},Pte=t$?e=>e:JSON.stringify;function Ote(e){const{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:i,plugins:l,...c}=e;return[{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:i,plugins:l},c]}class abt extends f.Component{updateProperties(t){if(!this.el)return;this.el.batched=!this.props.isolate;const[n]=Ote(this.props);Object.entries(n).forEach(([r,s])=>{this.el[r]=s??n$.defaultProps[r]}),t?.onAnimationsStart&&this.el.removeEventListener("animationsstart",t.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),t?.onAnimationsFinish&&this.el.removeEventListener("animationsfinish",t.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),t$&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(t){if(this.updateProperties(t),t.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>this.props.group?.didUpdate();if(!this.props.isolate)return this.el?.willUpdate(),()=>this.el?.didUpdate()}return null}componentDidUpdate(t,n,r){r?.()}handleRef(t){this.props.innerRef&&(this.props.innerRef.current=t),this.el=t}render(){const[t,{innerRef:n,className:r,data:s,willChange:a,isolate:i,group:l,digits:c,onAnimationsStart:u,onAnimationsFinish:d,...m}]=Ote(this.props);return f.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":a?"":void 0,class:r,...m,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0,digits:Pte(c),data:Pte(s)})}constructor(t){super(t),this.handleRef=this.handleRef.bind(this)}}const No=f.forwardRef(function({value:t,locales:n,format:r,prefix:s,suffix:a,...i},l){f.useImperativeHandle(l,()=>c.current,[]);const c=f.useRef(),u=f.useContext(ibt);u?.useRegister(c);const d=f.useMemo(()=>n?JSON.stringify(n):"",[n]),m=f.useMemo(()=>r?JSON.stringify(r):"",[r]),p=f.useMemo(()=>{const h=sbt[`${d}:${m}`]??=new Intl.NumberFormat(n,r);return G1t(t,h,s,a)},[t,d,m,s,a]);return f.createElement(abt,{...i,group:u,data:p,innerRef:c})}),ibt=f.createContext(void 0),In=0,Tn=1,Cn="finance",cfn=(e,t)=>["finance/topMovers",e,t];async function ufn({marketType:e,country:t,headers:n}){const r=await ae.GET("/rest/finance/top-movers/{market_type}",Cn,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:In,numRetries:Tn});if(r.error)throw new Error("Failed to fetch top movers.",{cause:r.error});return r.data}const dfn=async({symbol:e,category:t,period:n})=>{const r=await ae.POST("/rest/finance/financials/{market_identifier}/analysis",Cn,{params:{path:{market_identifier:e}},body:{category:t,period:n},timeoutMs:1e4,numRetries:Tn});if(r.error)throw new Error(`Failed to fetch financial insights for ${e}`,{cause:r.error});return r.data},ffn=async({symbol:e,period:t,interval:n,headers:r})=>{const s=await ae.GET("/rest/finance/history/{market_identifier}",Cn,{params:{query:{period:t??"1d",interval:n},path:{market_identifier:e}},headers:r,timeoutMs:In,numRetries:Tn});if(s.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:s.error});return s.data},mfn=e=>["finance/coin50/history",e],pfn=async({period:e})=>{const t=await ae.GET("/rest/finance/history/COIN50USD",Cn,{params:{query:{period:e??"1d"}},timeoutMs:In,numRetries:Tn});if(t.error)throw new Error("Failed to fetch price history for COIN50USD",{cause:t.error});return t.data},hfn=async({symbol:e,period:t,interval:n})=>{const r=await ae.GET("/rest/finance/history/{market_identifier}/csv",Cn,{parseAs:"blob",params:{path:{market_identifier:e},query:{period:t??"1d",interval:n}}});if(r.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:r.error});return r.data},mb=({symbol:e,withHistory:t,historyAfterHours:n,historyPeriod:r,historyOffset:s})=>["finance/quote",e,t??null,n??null,r??null,s??null],Zd=async({symbol:e,withHistory:t=!1,historyAfterHours:n=!0,historyPeriod:r,historyOffset:s,headers:a})=>{const i=await ae.GET("/rest/finance/quote/{market_identifier}",Cn,{params:{path:{market_identifier:e},query:{with_history:t,history_period:r,history_offset:s,history_after_hours:n}},headers:a,timeoutMs:In,numRetries:Tn});if(i.response.status===404)return null;if(i.error)throw new Error(`Failed to fetch quote for ${e}`,{cause:i.error});return i.data},gfn=e=>["finance/profile",e],yfn=async({symbol:e,headers:t})=>{const n=await ae.GET("/rest/finance/profile/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.response.status===404)return null;if(n.error)throw new Error(`Failed to fetch profile for ${e}`,{cause:n.error});return n.data},xfn=e=>["finance/profile/description",e],vfn=async({symbol:e,headers:t})=>{const n=await ae.GET("/rest/finance/profile/{market_identifier}/description",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.error)throw new Error(`Failed to fetch profile description for ${e}`,{cause:n.error});return n.data},bfn=(e,t,n="",r="",s)=>["finance/history",t,e,n,r,s],_fn=e=>["finance/financials",e],wfn=async(e,t)=>{const n=await ae.GET("/rest/finance/financials/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.error)throw new Error(`Failed to fetch financials for ${e}`,{cause:n.error});return n.data},Cfn=e=>["finance/holders",e],Sfn=async(e,t)=>{const n=await ae.GET("/rest/finance/holders/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.error)throw new Error(`Failed to fetch holders for ${e}`,{cause:n.error});return n.data};function obt(e,t){return["finance/peers",e,t]}async function lbt({symbol:e,headers:t,index:n}){const r=await ae.GET("/rest/finance/peers/{market_identifier}",Cn,{params:{path:{market_identifier:e},query:{with_index:n}},headers:t,timeoutMs:In,numRetries:Tn});if(r.error)throw new Error(`Failed to fetch peers for ${e}`,{cause:r.error});return r.data}async function Efn({symbol:e,headers:t}){const n=await ae.GET("/rest/finance/bulls-vs-bears-summary/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.error)throw new Error(`Failed to fetch bulls vs bears analysis for ${e}`,{cause:n.error});return n.data}async function Mfn({symbol:e,headers:t}){const n=await ae.GET("/rest/finance/timeline/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:0});if(n.error)throw new Error(`Failed to fetch timeline for ${e}`,{cause:n.error});return n.data}async function kfn({eventId:e,symbol:t,headers:n}){const r=await ae.GET("/rest/finance/earnings/{market_identifier}/transcript/{event_id}",Cn,{headers:n,params:{path:{market_identifier:t,event_id:e}},timeoutMs:In,numRetries:Tn});if(r.response.status===404)return null;if(r.error)throw new Error(`Failed to fetch earnings transcript for ${t}`,{cause:r.error});return r.data}const Tfn=(e,t)=>["finance/analysis",e,t];async function Nfn({eventId:e,symbol:t,headers:n}){const r=await ae.GET("/rest/finance/earnings/{market_identifier}/analysis/{event_id}",Cn,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:In,numRetries:Tn});if(r.error)throw new Error(`Failed to fetch earnings analysis for ${t}`,{cause:r.error});return r.data}const jfn=(e,t)=>["finance/documents",e,t];async function Afn({eventId:e,symbol:t,headers:n}){const r=await ae.GET("/rest/finance/earnings/{market_identifier}/documents/{event_id}",Cn,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:In,numRetries:Tn});if(r.error)throw new Error(`Failed to fetch earnings documents for ${t}`,{cause:r.error});return r.data}const Ifn=e=>["finance/documents",e];async function Rfn({symbol:e,headers:t}){const n=await ae.GET("/rest/finance/documents/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.error)throw new Error(`Failed to fetch documents for ${e}`,{cause:n.error});return n.data}const Pfn=async(e,t)=>{const n=await ae.GET("/rest/finance/documents/download/{document_id}",Cn,{params:{path:{document_id:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.error)throw new Error(`Failed to fetch document download url for ${e}`,{cause:n.error});return{errorCode:n.data?.error_code??null,presignedUrl:n.data?.presigned_url??null}},Ofn=e=>["finance/earnings",e];async function Lfn({symbol:e,headers:t}){const n=await ae.GET("/rest/finance/earnings/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.response.status===404)return[];if(n.error)throw new Error(`Failed to fetch earnings for ${e}`,{cause:n.error});return n.data}async function Dfn({marketType:e,headers:t,country:n}){const r=await ae.GET("/rest/finance/{market_type}",Cn,{headers:t,params:{path:{market_type:e},query:{country:n}},timeoutMs:In,numRetries:Tn});if(r.error)throw new Error(`Failed to fetch finance page shared data for ${e}`,{cause:r.error});return r.data}const cbt=(e,t,n)=>["finance/top-indices",e,t,n];async function ubt({groupId:e,headers:t,historyPeriod:n,country:r}){const s=await ae.GET("/rest/finance/top-indices/{group_id}",Cn,{headers:t,params:{path:{group_id:e},query:{with_history:!0,history_period:n,country:r}},timeoutMs:In,numRetries:Tn});if(s.error)throw new Error("Failed to fetch top indices",{cause:s.error});return s.data}const Ffn=(e,t)=>["finance/watchlist-quotes",e??"",t??""];async function Ufn({headers:e,country:t}){const n=await ae.GET("/rest/finance/watchlist-quotes",Cn,{headers:e,timeoutMs:In,numRetries:Tn,params:{query:{country:t}}});if(n.error)throw new Error("Failed to fetch watchlist quotes",{cause:n.error});return n.data}async function Bfn(){const e=await ae.GET("/rest/finance/equity-sectors",Cn,{timeoutMs:In,numRetries:Tn});if(e.error)throw new Error("Failed to fetch equity sectors",{cause:e.error});return e.data}async function Vfn(){const e=await ae.GET("/rest/finance/fixed-income",Cn,{timeoutMs:In,numRetries:Tn});if(e.error)throw new Error("Failed to fetch fixed income",{cause:e.error});return e.data}async function $fn({marketType:e,country:t}){const n=await ae.GET("/rest/finance/market-sentiment/{market_type}",Cn,{params:{path:{market_type:e},query:{country:t}},timeoutMs:In,numRetries:Tn});if(n.error)throw new Error("Failed to fetch market sentiment",{cause:n.error});return n.data}async function Wfn({marketType:e,headers:t,country:n}){const r=await ae.GET("/rest/finance/top-z-scores/{market_type}",Cn,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:In,numRetries:Tn});if(r.error)throw new Error("Failed to fetch top z scores",{cause:r.error});return r.data}async function Hfn({marketIdentifier:e,locale:t}){const n=await ae.GET("/rest/finance/significant-movement-summary/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:{"Accept-Language":t},timeoutMs:In,numRetries:Tn});if(n.error)throw new Error("Failed to fetch significant movement summary",{cause:n.error});return n.data}const zfn=e=>["finance/news",e];async function Gfn({symbol:e,headers:t}){const n=await ae.GET("/rest/finance/news/{market_identifier}",Cn,{params:{path:{market_identifier:e}},headers:t,timeoutMs:In,numRetries:Tn});if(n.error)throw new Error("Failed to fetch news",{cause:n.error});return n.data}async function qfn({marketType:e,country:t,headers:n}){const r=await ae.GET("/rest/finance/market-summary/{market_type}",Cn,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:In,numRetries:Tn});if(r.error)throw new Error("Failed to fetch market summary",{cause:r.error});return r.data}async function Kfn({marketType:e,headers:t,country:n}){const r=await ae.GET("/rest/finance/general-news/{market_type}",Cn,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:In,numRetries:Tn});if(r.error)throw new Error("Failed to fetch general news",{cause:r.error});return r.data}const Yfn=(e,t,n)=>["finance/crypto-leaderboard",e,t,n];async function Qfn({sortBy:e="dollarVolume24h",orderBy:t="desc",provider:n="coinbase",headers:r}){const s=await ae.GET("/rest/finance/leaderboard/crypto",Cn,{params:{query:{sort_by:e,order_by:t,provider:n}},timeoutMs:In,numRetries:Tn,headers:r});if(s.error)throw new Error("Failed to fetch crypto leaderboard",{cause:s.error});return s.data}const Xfn=(e,t,n,r)=>["finance/earnings/schedule",e,t,n,r];async function Zfn(e,t,n,r){const s=await ae.GET("/rest/finance/earnings/schedule",Cn,{params:{query:{start_date:e,end_date:t,timezone:n,country:r}},timeoutMs:In,numRetries:Tn});if(s.error)throw new Error("Failed to fetch earnings schedule",{cause:s.error});return s.data}const Jfn=(e,t,n)=>["finance/earnings",e,t,n];async function emn(e,t,n){const r=await ae.GET("/rest/finance/earnings",Cn,{params:{query:{date:e,timezone:t,country:n}},timeoutMs:In,numRetries:Tn});if(r.error)throw new Error("Failed to fetch earnings schedule",{cause:r.error});return r.data}async function tmn(){const{data:e,error:t}=await ae.GET("/rest/autosuggest/finance/list-autosuggest",Cn,{params:{query:{query:""}},timeoutMs:In,numRetries:Tn});if(t)throw new Error("Failed to fetch trending companies",{cause:t});return e.results.filter(n=>n.category==="ticker")}const nmn=(e,t)=>["finance/screener",e,t];async function rmn({query:e,currency:t,headers:n}){const r=await ae.GET("/rest/finance/screener",Cn,{params:{query:{query:e,currency:t||void 0}},headers:n,timeoutMs:In,numRetries:Tn});if(r.error)throw new Error("Failed to fetch screener data.",{cause:r.error});return r.data}const Lte=(e,t)=>["finance-autosuggest",e,t],b9=async({query:e,reason:t,country:n})=>{try{const{data:r,error:s}=await ae.GET("/rest/autosuggest/finance/list-autosuggest",t,{params:{query:{query:e,country:n}},timeoutMs:0});if(s)throw new Error("Failed to fetch finance suggestions.",{cause:s});return r.results??fe}catch(r){return ne.error(r),[]}},dbt=(e,t,n)=>["finance/currency-exchange",e,t,n];async function fbt({sourceCurrency:e,targetCurrency:t,amount:n=1,headers:r}){const s=await ae.GET("/rest/finance/currency-exchange",Cn,{params:{query:{source_currency:e,target_currency:t,amount:n}},headers:r,timeoutMs:In,numRetries:Tn});if(s.error)throw new Error(`Failed to convert ${e} to ${t}`,{cause:s.error});return s.data}async function mbt(e,t){try{return(await Zd({symbol:e,headers:t}))?.currency?.toLowerCase()||"usd"}catch(n){return ne.warn(`Failed to fetch currency for symbol ${e}`,{error:n}),"usd"}}const smn=(e,t)=>["finance/transcript",e,t];function pbt(e){const t=e+"CollectionProvider",[n,r]=Mi(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:x,children:v}=y,b=R.useRef(null),_=R.useRef(new Map).current;return o.jsx(s,{scope:x,itemMap:_,collectionRef:b,children:v})};i.displayName=t;const l=e+"CollectionSlot",c=A1(l),u=R.forwardRef((y,x)=>{const{scope:v,children:b}=y,_=a(l,v),w=Hn(x,_.collectionRef);return o.jsx(c,{ref:w,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",m="data-radix-collection-item",p=A1(d),h=R.forwardRef((y,x)=>{const{scope:v,children:b,..._}=y,w=R.useRef(null),C=Hn(x,w),S=a(d,v);return R.useEffect(()=>(S.itemMap.set(w,{ref:w,..._}),()=>void S.itemMap.delete(w))),o.jsx(p,{[m]:"",ref:C,children:b})});h.displayName=d;function g(y){const x=a(e+"CollectionConsumer",y);return R.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(x.itemMap.values()).sort((S,E)=>_.indexOf(S.ref.current)-_.indexOf(E.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:u,ItemSlot:h},g,r]}var r6="rovingFocusGroup.onEntryFocus",hbt={bubbles:!1,cancelable:!0},Q_="RovingFocusGroup",[_9,owe,gbt]=pbt(Q_),[ybt,U5]=Mi(Q_,[gbt]),[xbt,vbt]=ybt(Q_),lwe=f.forwardRef((e,t)=>o.jsx(_9.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(_9.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(bbt,{...e,ref:t})})}));lwe.displayName=Q_;var bbt=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...m}=e,p=f.useRef(null),h=Hn(t,p),g=q3(a),[y,x]=Cl({prop:i,defaultProp:l??null,onChange:c,caller:Q_}),[v,b]=f.useState(!1),_=di(u),w=owe(n),C=f.useRef(!1),[S,E]=f.useState(0);return f.useEffect(()=>{const M=p.current;if(M)return M.addEventListener(r6,_),()=>M.removeEventListener(r6,_)},[_]),o.jsx(xbt,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:y,onItemFocus:f.useCallback(M=>x(M),[x]),onItemShiftTab:f.useCallback(()=>b(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(M=>M+1),[]),onFocusableItemRemove:f.useCallback(()=>E(M=>M-1),[]),children:o.jsx(mn.div,{tabIndex:v||S===0?-1:0,"data-orientation":r,...m,ref:h,style:{outline:"none",...e.style},onMouseDown:Wt(e.onMouseDown,()=>{C.current=!0}),onFocus:Wt(e.onFocus,M=>{const k=!C.current;if(M.target===M.currentTarget&&k&&!v){const N=new CustomEvent(r6,hbt);if(M.currentTarget.dispatchEvent(N),!N.defaultPrevented){const P=w().filter(T=>T.focusable),L=P.find(T=>T.active),O=P.find(T=>T.id===y),j=[L,O,...P].filter(Boolean).map(T=>T.ref.current);dwe(j,d)}}C.current=!1}),onBlur:Wt(e.onBlur,()=>b(!1))})})}),cwe="RovingFocusGroupItem",uwe=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=ig(),u=a||c,d=vbt(cwe,n),m=d.currentTabStopId===u,p=owe(n),{onFocusableItemAdd:h,onFocusableItemRemove:g,currentTabStopId:y}=d;return f.useEffect(()=>{if(r)return h(),()=>g()},[r,h,g]),o.jsx(_9.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(mn.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Wt(e.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:Wt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Wt(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=Cbt(x,d.orientation,d.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=p().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const w=_.indexOf(x.currentTarget);_=d.loop?Sbt(_,w+1):_.slice(w+1)}setTimeout(()=>dwe(_))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:y!=null}):i})})});uwe.displayName=cwe;var _bt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wbt(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Cbt(e,t,n){const r=wbt(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _bt[r]}function dwe(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Sbt(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var fwe=lwe,mwe=uwe,pwe="Toggle",hwe=f.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...a}=e,[i,l]=Cl({prop:n,onChange:s,defaultProp:r??!1,caller:pwe});return o.jsx(mn.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:Wt(e.onClick,()=>{e.disabled||l(!i)})})});hwe.displayName=pwe;var wf="ToggleGroup",[gwe,amn]=Mi(wf,[U5]),ywe=U5(),r$=R.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return o.jsx(Ebt,{...s,ref:t})}if(n==="multiple"){const s=r;return o.jsx(Mbt,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${wf}\``)});r$.displayName=wf;var[xwe,vwe]=gwe(wf),Ebt=R.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[i,l]=Cl({prop:n,defaultProp:r??"",onChange:s,caller:wf});return o.jsx(xwe,{scope:e.__scopeToggleGroup,type:"single",value:R.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:R.useCallback(()=>l(""),[l]),children:o.jsx(bwe,{...a,ref:t})})}),Mbt=R.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[i,l]=Cl({prop:n,defaultProp:r??[],onChange:s,caller:wf}),c=R.useCallback(d=>l((m=[])=>[...m,d]),[l]),u=R.useCallback(d=>l((m=[])=>m.filter(p=>p!==d)),[l]);return o.jsx(xwe,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:u,children:o.jsx(bwe,{...a,ref:t})})});r$.displayName=wf;var[kbt,Tbt]=gwe(wf),bwe=R.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:a,dir:i,loop:l=!0,...c}=e,u=ywe(n),d=q3(i),m={role:"group",dir:d,...c};return o.jsx(kbt,{scope:n,rovingFocus:s,disabled:r,children:s?o.jsx(fwe,{asChild:!0,...u,orientation:a,dir:d,loop:l,children:o.jsx(mn.div,{...m,ref:t})}):o.jsx(mn.div,{...m,ref:t})})}),mM="ToggleGroupItem",_we=R.forwardRef((e,t)=>{const n=vwe(mM,e.__scopeToggleGroup),r=Tbt(mM,e.__scopeToggleGroup),s=ywe(e.__scopeToggleGroup),a=n.value.includes(e.value),i=r.disabled||e.disabled,l={...e,pressed:a,disabled:i},c=R.useRef(null);return r.rovingFocus?o.jsx(mwe,{asChild:!0,...s,focusable:!i,active:a,ref:c,children:o.jsx(Dte,{...l,ref:t})}):o.jsx(Dte,{...l,ref:t})});_we.displayName=mM;var Dte=R.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,a=vwe(mM,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return o.jsx(hwe,{...l,...s,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),Nbt=r$,jbt=_we;const Jd=[.4,0,.2,1],Abt=({value:e,onChange:t,id:n,children:r,boxProps:s,className:a=""})=>{const i=l=>{l&&t(l)};return o.jsx(wwe.Provider,{value:{activeValue:e},children:o.jsx(jc,{id:n,children:o.jsx(Nbt,{onValueChange:i,type:"single",value:e,asChild:!0,children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:o.jsx(H,{className:V("border-subtler p-two flex rounded-lg border",a),...s,children:r})})})})})},Ibt=({value:e,icon:t,className:n="",children:r})=>{const s="relative text-quiet hover:text-foreground data-[state=on]:text-foreground flex h-[32px] min-w-[32px] p-sm items-center justify-center duration-150 active:scale-95",a=f.useContext(wwe);return o.jsx(jbt,{asChild:!0,value:e,children:o.jsxs("button",{className:V(s,n),children:[o.jsxs("span",{className:"gap-xs relative z-[2] flex",children:[Array.isArray(t)?t.map((i,l)=>o.jsx(le,{icon:i,size:"sm"},l)):t?o.jsx(le,{icon:t,size:"sm"}):null,r]}),a.activeValue===e&&o.jsx(ve.div,{layout:!0,layoutId:"toggle",className:"absolute inset-0 z-[1]",transition:{duration:.15,ease:Jd},children:o.jsx("div",{className:"absolute inset-0 rounded-md bg-current opacity-10"})})]})})},wwe=Yt("ToggleGroupContext",{activeValue:""}),Rbt=Abt,Pbt=Ibt,Fte={Root:Rbt,Item:Pbt},w9=["1d","5d","1m","6m","ytd","1y","5y","max"],Obt={"1d":ee({id:"+7PjfVlUMl",defaultMessage:"1 day"}),"5d":ee({id:"hZS2DWIcL1",defaultMessage:"5 days"}),"1m":ee({id:"p1dNdsvErg",defaultMessage:"1 month"}),"6m":ee({id:"AwuN57pzXN",defaultMessage:"6 months"}),ytd:ee({id:"zvczgisLv6",defaultMessage:"Year to date"}),"1y":ee({id:"rwIPgHMeIl",defaultMessage:"1 year"}),"3m":ee({id:"D0xe/T9tyE",defaultMessage:"3 months"}),"5y":ee({id:"dFw5uLx5ao",defaultMessage:"5 years"}),max:ee({id:"kkjl2vQekD",defaultMessage:"Max"})},Cwe=w9.map(e=>({text:e.toUpperCase(),value:e})),Lbt=f.memo(function({id:t,periods:n,period:r,setPeriod:s,className:a}){const{isMobileStyle:i}=Ce(),{$t:l}=Z(),c=f.useMemo(()=>n.map(d=>({text:l(Obt[d.value]),value:d.value,active:r===d.value,show:!0,type:"default",onClick:()=>{s(d.value)}})),[n,r,s,l]),u=f.useMemo(()=>n.find(d=>d.value===r),[n,r]);return i?o.jsx(H,{className:V(a,"flex items-center"),variant:"transparent",children:o.jsx(sn,{items:c,isMobileStyle:i,children:o.jsx(Te,{text:u?.text??"",size:"tiny",variant:"noBackground",chevron:!0})})}):o.jsx(Fte.Root,{value:r,className:a,id:`${t}-periods`,onChange:d=>{s(d)},children:n.map(d=>o.jsx(Fte.Item,{value:d.value,className:"select-none bg-transparent",children:o.jsx(F,{variant:"tiny",color:r===d.value?"default":"light",className:"translate-y-px whitespace-nowrap duration-150",children:d.text})},`${d.value}`))})}),oS=new Set;async function Dbt({period:e,symbols:t,headers:n,existingFailedPeriods:r=[],reason:s}){const a=w9.indexOf(e),i=[...r].filter(l=>!oS.has(l));for(const l of w9.slice(a)){if(i.includes(l)&&!oS.has(l))continue;const c=await ae.GET("/rest/finance/prices/{period}/{market_identifiers}",s,{params:{path:{period:l,market_identifiers:t.join(",")}},headers:n,timeoutMs:In,numRetries:Tn});if(c.error){oS.has(l)||i.push(l),ne.error("Failed to fetch FMP prices",{url:`/rest/finance/prices/${l}/${t.join(",")}`,error:c.error,status:c.response.status,statusText:c.response.statusText});continue}return oS.add(l),{...c.data.data}}return null}const Swe="stock-widget-quote-cache",Ewe="stock-widget-prices-cache",I2="NVDA",Fbt=60*1e3,Ubt=5*60*1e3,Bbt=60*1e3,Vbt=30*1e3,$bt=5*60*1e3,Wbt=60*1e3,Hbt=150,Ute=50,zbt=24*60*60*1e3,Gbt=.1,qbt=10,Kbt=5;function Ybt(e){try{const t=Oe.getItem(`${Swe}-${e}`);if(t){const n=JSON.parse(t);if(Date.now()-n.timestamp<Fbt)return n.data}}catch{}return null}function Qbt(e,t){try{const n={symbol:e,data:t,timestamp:Date.now()};Oe.setItem(`${Swe}-${e}`,JSON.stringify(n))}catch{}}function Xbt(e,t){try{const n=Oe.getItem(`${Ewe}-${e}-${t}`);if(n){const r=JSON.parse(n);if(Date.now()-r.timestamp<Ubt)return r.data}}catch{}return null}function Zbt(e,t,n){try{const r={symbol:e,period:t,data:n,timestamp:Date.now()};Oe.setItem(`${Ewe}-${e}-${t}`,JSON.stringify(r))}catch{}}function Jbt(e="widget",t="default"){if(e!=="widget")return{version:1,symbol:I2};const n=Sx("STOCK",t);return n?{version:1,symbol:n.symbol??I2}:{version:1,symbol:I2}}function e_t(e,t="widget",n="default"){t==="widget"&&Np("STOCK",n,{version:1,symbol:e.symbol})}function t_t(e="default",t="widget"){const n=Jbt(t,e),[r,s]=f.useState(n),a="stock-widget",{data:i}=gV({watchlistType:"FINANCE",reason:a}),l=r.symbol||i?.[0]?.identifier||I2,c=Ybt(l),u=Xbt(l,"1d"),{data:d,isLoading:m}=We({queryKey:["finance/quote",l],queryFn:async()=>{const E=await Zd({symbol:l,withHistory:!0,historyPeriod:"1d",historyOffset:0});return E&&Qbt(l,E),E},refetchInterval:Bbt,staleTime:Vbt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:c}),{data:p,isLoading:h}=We({queryKey:["finance/prices",l,"1d"],queryFn:async()=>{const E=await Dbt({period:"1d",symbols:[l],reason:"stock-widget"});return E&&Zbt(l,"1d",E),E},refetchInterval:$bt,staleTime:Wbt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:u}),g=d||c,y=p||u,x=!!(d&&p),v={symbol:l,price:"---.--",changesPercentage:"--%",change:"--$",exchange:"--",currency:"USD"},b={history:{prices:[{symbol:l,entries:Array.from({length:Ute},(E,M)=>({date:new Date(Date.now()-(Ute-1-M)*zbt).toISOString(),price:Hbt+Math.sin(M*Gbt)*qbt+Math.random()*Kbt})),exchange:"--",currency:"USD"}]}},_=g||v,w=y||b,C=f.useMemo(()=>w?.history?.prices?w.history.prices.map(E=>({symbol:E.symbol,entries:E.entries.map(M=>({date:M.date,price:M.price})).sort((M,k)=>new Date(M.date).getTime()-new Date(k.date).getTime()),exchange:E.exchange||_?.exchange||"",currency:E.currency||_?.currency||"USD"})):[],[w,_]),S=f.useCallback(E=>{s(E),e_t(E,t,e)},[s,t,e]);return f.useMemo(()=>({symbol:l,quote:_,prices:C,isLoading:m||h,hasError:!1,hasRealData:x,stockSettings:r,updateStockSettings:S}),[l,_,C,m,h,x,r,S])}const B5=R.memo(({symbol:e,src:t,srcDark:n,className:r,size:s="lg"})=>{n=n??t;const[a,i]=f.useState(!1),l=f.useRef(null),{colorScheme:c}=Jr(),u=()=>{l.current&&l.current.naturalHeight>0&&i(!1)};f.useEffect(()=>{l.current&&(l.current.complete&&l.current.naturalHeight===0?i(!0):i(!1))},[l]),f.useEffect(()=>{i(!1)},[e]);const d=c==="dark"?n:t;return o.jsx("div",{className:V({"size-lg":s==="lg","size-md":s==="md","size-sm":s==="sm"},"flex shrink-0 items-center justify-center",r),children:a||!d?o.jsx(n_t,{symbol:e}):o.jsx("img",{ref:l,src:d,alt:e,className:"rounded-[4px] object-contain",onError:()=>{i(!0)},onLoad:u},e)})});B5.displayName="FinanceAssetLogo";const n_t=({symbol:e})=>{const t=f.useMemo(()=>e.replace(/[^a-zA-Z0-9]/g,"").slice(0,1).toUpperCase()||"#",[e]);return o.jsx(H,{variant:"subtle",className:"flex size-full items-center justify-center rounded-full",children:o.jsx(F,{color:"light",children:o.jsx("span",{className:"font-mono opacity-70",children:t})})})},r_t=10,s_t=e=>{const{isSelected:t}=e;return o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Te,{icon:t?Ar:ur,size:"small",pill:!0})})},a_t=({onClear:e})=>o.jsx(Te,{icon:It,size:"tiny",pill:!0,onClick:e}),Mwe=R.memo(({onClose:e,onSelectStock:t,currentSymbol:n})=>{const{isMobileUserAgent:r}=Ce(),s="stock-settings-modal",{$t:a}=Z(),i=xt(),l=f.useRef(null),[c,u]=f.useState(n),[d,m]=f.useState(fe),[p,h]=f.useState(-1),[g,y]=f.useState(!1),x=f.useCallback(()=>{e(),m(fe)},[e]),v=f.useCallback(async O=>{if(O.trim().length===0){m(fe);return}const j=xi().erp;try{const I=(await i.fetchQuery({queryKey:["watchlist","FINANCE",O],queryFn:()=>Hve({query:O,watchlistType:"FINANCE",limit:r_t,cometRenderPlace:j,reason:s}),staleTime:3600})).map(U=>({query:U.title,title:U.title,image:U.image_url??void 0,imageDark:U.image_url_dark??void 0,description:U.description,identifier:U.identifier,category:U.category??void 0,subscribed:U.subscribed}));m(I)}catch{m(fe)}},[i,s]),b=Js(v,250,{leading:!0,trailing:!0}),_=f.useCallback(O=>{b(O)},[b]),w=f.useCallback(()=>{y(!0),_(c)},[c,_]),C=f.useCallback(()=>{y(!1)},[]),S=f.useCallback(O=>{u(O),_(O)},[_]),E=()=>{u(""),m([])},M=f.useCallback(O=>{t(O.identifier??"AAPL"),m(fe),u(O.identifier??"AAPL")},[t]),k=f.useCallback((O,A)=>{M(O)},[M]),N=V("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":g&&d.length>0}),P=f.useMemo(()=>({image:O,alt:A})=>o.jsx("div",{className:"mr-3 flex size-6 items-center justify-center overflow-hidden rounded",children:o.jsx(B5,{src:O??"",symbol:A??"",size:"lg"})}),[]);f.useEffect(()=>{c||_("")},[c,_]);const L=f.useMemo(()=>({RightIconComponent:s_t,LeftIconComponent:P}),[P]);return o.jsx(_f,{onClose:x,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(F,{variant:"entry-title-300",children:a({defaultMessage:"Select Stock",id:"0MrUZjeA/m"})}),o.jsx(gx,{isOpen:g&&d.length>0,suggestedQueries:d,focusedIndex:p,setFocusedIndex:h,handlePasteQuery:Pn,handleSubmit:k,value:c,components:L,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Wr,{onFocus:w,onBlur:C,className:N,pill:!1,ref:l,isMobileUserAgent:r,placeholder:a({defaultMessage:"Search stocks (e.g., AAPL, TSLA, MSFT)...",id:"TMRxNvCkDS"}),value:c,onChange:S,ClearIcon:a_t,...c.length>0?{onClear:E}:{}})}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(pe,{variant:"primary",size:"small",onClick:x,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})});Mwe.displayName="StockSettingsModal";var C9=Math.PI,S9=2*C9,em=1e-6,i_t=S9-em;function E9(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function uo(){return new E9}E9.prototype=uo.prototype={constructor:E9,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,s,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(e,t,n,r,s){e=+e,t=+t,n=+n,r=+r,s=+s;var a=this._x1,i=this._y1,l=n-e,c=r-t,u=a-e,d=i-t,m=u*u+d*d;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(m>em)if(!(Math.abs(d*l-c*u)>em)||!s)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var p=n-a,h=r-i,g=l*l+c*c,y=p*p+h*h,x=Math.sqrt(g),v=Math.sqrt(m),b=s*Math.tan((C9-Math.acos((g+m-y)/(2*x*v)))/2),_=b/v,w=b/x;Math.abs(_-1)>em&&(this._+="L"+(e+_*u)+","+(t+_*d)),this._+="A"+s+","+s+",0,0,"+ +(d*p>u*h)+","+(this._x1=e+w*l)+","+(this._y1=t+w*c)}},arc:function(e,t,n,r,s,a){e=+e,t=+t,n=+n,a=!!a;var i=n*Math.cos(r),l=n*Math.sin(r),c=e+i,u=t+l,d=1^a,m=a?r-s:s-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>em||Math.abs(this._y1-u)>em)&&(this._+="L"+c+","+u),n&&(m<0&&(m=m%S9+S9),m>i_t?this._+="A"+n+","+n+",0,1,"+d+","+(e-i)+","+(t-l)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=u):m>em&&(this._+="A"+n+","+n+",0,"+ +(m>=C9)+","+d+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function An(e){return function(){return e}}var Bte=Math.abs,sa=Math.atan2,Gf=Math.cos,o_t=Math.max,s6=Math.min,Dl=Math.sin,Qh=Math.sqrt,ri=1e-12,pb=Math.PI,pM=pb/2,R2=2*pb;function l_t(e){return e>1?0:e<-1?pb:Math.acos(e)}function Vte(e){return e>=1?pM:e<=-1?-pM:Math.asin(e)}function c_t(e){return e.innerRadius}function u_t(e){return e.outerRadius}function d_t(e){return e.startAngle}function f_t(e){return e.endAngle}function m_t(e){return e&&e.padAngle}function p_t(e,t,n,r,s,a,i,l){var c=n-e,u=r-t,d=i-s,m=l-a,p=m*c-d*u;if(!(p*p<ri))return p=(d*(t-a)-m*(e-s))/p,[e+p*c,t+p*u]}function lS(e,t,n,r,s,a,i){var l=e-n,c=t-r,u=(i?a:-a)/Qh(l*l+c*c),d=u*c,m=-u*l,p=e+d,h=t+m,g=n+d,y=r+m,x=(p+g)/2,v=(h+y)/2,b=g-p,_=y-h,w=b*b+_*_,C=s-a,S=p*y-g*h,E=(_<0?-1:1)*Qh(o_t(0,C*C*w-S*S)),M=(S*_-b*E)/w,k=(-S*b-_*E)/w,N=(S*_+b*E)/w,P=(-S*b+_*E)/w,L=M-x,O=k-v,A=N-x,j=P-v;return L*L+O*O>A*A+j*j&&(M=N,k=P),{cx:M,cy:k,x01:-d,y01:-m,x11:M*(s/C-1),y11:k*(s/C-1)}}function h_t(){var e=c_t,t=u_t,n=An(0),r=null,s=d_t,a=f_t,i=m_t,l=null;function c(){var u,d,m=+e.apply(this,arguments),p=+t.apply(this,arguments),h=s.apply(this,arguments)-pM,g=a.apply(this,arguments)-pM,y=Bte(g-h),x=g>h;if(l||(l=u=uo()),p<m&&(d=p,p=m,m=d),!(p>ri))l.moveTo(0,0);else if(y>R2-ri)l.moveTo(p*Gf(h),p*Dl(h)),l.arc(0,0,p,h,g,!x),m>ri&&(l.moveTo(m*Gf(g),m*Dl(g)),l.arc(0,0,m,g,h,x));else{var v=h,b=g,_=h,w=g,C=y,S=y,E=i.apply(this,arguments)/2,M=E>ri&&(r?+r.apply(this,arguments):Qh(m*m+p*p)),k=s6(Bte(p-m)/2,+n.apply(this,arguments)),N=k,P=k,L,O;if(M>ri){var A=Vte(M/m*Dl(E)),j=Vte(M/p*Dl(E));(C-=A*2)>ri?(A*=x?1:-1,_+=A,w-=A):(C=0,_=w=(h+g)/2),(S-=j*2)>ri?(j*=x?1:-1,v+=j,b-=j):(S=0,v=b=(h+g)/2)}var T=p*Gf(v),I=p*Dl(v),U=m*Gf(w),B=m*Dl(w);if(k>ri){var D=p*Gf(b),W=p*Dl(b),z=m*Gf(_),$=m*Dl(_),X;if(y<pb&&(X=p_t(T,I,z,$,D,W,U,B))){var q=T-X[0],Y=I-X[1],G=D-X[0],J=W-X[1],K=1/Dl(l_t((q*G+Y*J)/(Qh(q*q+Y*Y)*Qh(G*G+J*J)))/2),te=Qh(X[0]*X[0]+X[1]*X[1]);N=s6(k,(m-te)/(K-1)),P=s6(k,(p-te)/(K+1))}}S>ri?P>ri?(L=lS(z,$,T,I,p,P,x),O=lS(D,W,U,B,p,P,x),l.moveTo(L.cx+L.x01,L.cy+L.y01),P<k?l.arc(L.cx,L.cy,P,sa(L.y01,L.x01),sa(O.y01,O.x01),!x):(l.arc(L.cx,L.cy,P,sa(L.y01,L.x01),sa(L.y11,L.x11),!x),l.arc(0,0,p,sa(L.cy+L.y11,L.cx+L.x11),sa(O.cy+O.y11,O.cx+O.x11),!x),l.arc(O.cx,O.cy,P,sa(O.y11,O.x11),sa(O.y01,O.x01),!x))):(l.moveTo(T,I),l.arc(0,0,p,v,b,!x)):l.moveTo(T,I),!(m>ri)||!(C>ri)?l.lineTo(U,B):N>ri?(L=lS(U,B,D,W,m,-N,x),O=lS(T,I,z,$,m,-N,x),l.lineTo(L.cx+L.x01,L.cy+L.y01),N<k?l.arc(L.cx,L.cy,N,sa(L.y01,L.x01),sa(O.y01,O.x01),!x):(l.arc(L.cx,L.cy,N,sa(L.y01,L.x01),sa(L.y11,L.x11),!x),l.arc(0,0,m,sa(L.cy+L.y11,L.cx+L.x11),sa(O.cy+O.y11,O.cx+O.x11),x),l.arc(O.cx,O.cy,N,sa(O.y11,O.x11),sa(O.y01,O.x01),!x))):l.arc(0,0,m,w,_,x)}if(l.closePath(),u)return l=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-pb/2;return[Gf(d)*u,Dl(d)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:An(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:An(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:An(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:An(+u),c):r},c.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:An(+u),c):s},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:An(+u),c):a},c.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:An(+u),c):i},c.context=function(u){return arguments.length?(l=u??null,c):l},c}function kwe(e){this._context=e}kwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Xm(e){return new kwe(e)}function s$(e){return e[0]}function a$(e){return e[1]}function i$(){var e=s$,t=a$,n=An(!0),r=null,s=Xm,a=null;function i(l){var c,u=l.length,d,m=!1,p;for(r==null&&(a=s(p=uo())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(d,c,l),+t(d,c,l));if(p)return a=null,p+""||null}return i.x=function(l){return arguments.length?(e=typeof l=="function"?l:An(+l),i):e},i.y=function(l){return arguments.length?(t=typeof l=="function"?l:An(+l),i):t},i.defined=function(l){return arguments.length?(n=typeof l=="function"?l:An(!!l),i):n},i.curve=function(l){return arguments.length?(s=l,r!=null&&(a=s(r)),i):s},i.context=function(l){return arguments.length?(l==null?r=a=null:a=s(r=l),i):r},i}function g_t(){var e=s$,t=null,n=An(0),r=a$,s=An(!0),a=null,i=Xm,l=null;function c(d){var m,p,h,g=d.length,y,x=!1,v,b=new Array(g),_=new Array(g);for(a==null&&(l=i(v=uo())),m=0;m<=g;++m){if(!(m<g&&s(y=d[m],m,d))===x)if(x=!x)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=m-1;h>=p;--h)l.point(b[h],_[h]);l.lineEnd(),l.areaEnd()}x&&(b[m]=+e(y,m,d),_[m]=+n(y,m,d),l.point(t?+t(y,m,d):b[m],r?+r(y,m,d):_[m]))}if(v)return l=null,v+""||null}function u(){return i$().defined(s).curve(i).context(a)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:An(+d),t=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:An(+d),c):e},c.x1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:An(+d),c):t},c.y=function(d){return arguments.length?(n=typeof d=="function"?d:An(+d),r=null,c):n},c.y0=function(d){return arguments.length?(n=typeof d=="function"?d:An(+d),c):n},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:An(+d),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(n)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(t).y(n)},c.defined=function(d){return arguments.length?(s=typeof d=="function"?d:An(!!d),c):s},c.curve=function(d){return arguments.length?(i=d,a!=null&&(l=i(a)),c):i},c.context=function(d){return arguments.length?(d==null?a=l=null:l=i(a=d),c):a},c}function y_t(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function x_t(e){return e}function v_t(){var e=x_t,t=y_t,n=null,r=An(0),s=An(R2),a=An(0);function i(l){var c,u=l.length,d,m,p=0,h=new Array(u),g=new Array(u),y=+r.apply(this,arguments),x=Math.min(R2,Math.max(-R2,s.apply(this,arguments)-y)),v,b=Math.min(Math.abs(x)/u,a.apply(this,arguments)),_=b*(x<0?-1:1),w;for(c=0;c<u;++c)(w=g[h[c]=c]=+e(l[c],c,l))>0&&(p+=w);for(t!=null?h.sort(function(C,S){return t(g[C],g[S])}):n!=null&&h.sort(function(C,S){return n(l[C],l[S])}),c=0,m=p?(x-u*_)/p:0;c<u;++c,y=v)d=h[c],w=g[d],v=y+(w>0?w*m:0)+_,g[d]={data:l[d],index:c,value:w,startAngle:y,endAngle:v,padAngle:b};return g}return i.value=function(l){return arguments.length?(e=typeof l=="function"?l:An(+l),i):e},i.sortValues=function(l){return arguments.length?(t=l,n=null,i):t},i.sort=function(l){return arguments.length?(n=l,t=null,i):n},i.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:An(+l),i):r},i.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:An(+l),i):s},i.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:An(+l),i):a},i}var b_t=Nwe(Xm);function Twe(e){this._curve=e}Twe.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function Nwe(e){function t(n){return new Twe(e(n))}return t._curve=e,t}function __t(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(Nwe(n)):t()._curve},e}function w_t(){return __t(i$().curve(b_t))}function cS(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}var M9=Array.prototype.slice;function C_t(e){return e.source}function S_t(e){return e.target}function o$(e){var t=C_t,n=S_t,r=s$,s=a$,a=null;function i(){var l,c=M9.call(arguments),u=t.apply(this,c),d=n.apply(this,c);if(a||(a=l=uo()),e(a,+r.apply(this,(c[0]=u,c)),+s.apply(this,c),+r.apply(this,(c[0]=d,c)),+s.apply(this,c)),l)return a=null,l+""||null}return i.source=function(l){return arguments.length?(t=l,i):t},i.target=function(l){return arguments.length?(n=l,i):n},i.x=function(l){return arguments.length?(r=typeof l=="function"?l:An(+l),i):r},i.y=function(l){return arguments.length?(s=typeof l=="function"?l:An(+l),i):s},i.context=function(l){return arguments.length?(a=l??null,i):a},i}function E_t(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,s,r,s)}function M_t(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+s)/2,r,n,r,s)}function k_t(e,t,n,r,s){var a=cS(t,n),i=cS(t,n=(n+s)/2),l=cS(r,n),c=cS(r,s);e.moveTo(a[0],a[1]),e.bezierCurveTo(i[0],i[1],l[0],l[1],c[0],c[1])}function T_t(){return o$(E_t)}function N_t(){return o$(M_t)}function j_t(){var e=o$(k_t);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}function $te(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function jwe(e){this._context=e}jwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$te(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$te(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function A_t(e){return new jwe(e)}function Wte(e){return e<0?-1:1}function Hte(e,t,n){var r=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(r||s<0&&-0),i=(n-e._y1)/(s||r<0&&-0),l=(a*s+i*r)/(r+s);return(Wte(a)+Wte(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(l))||0}function zte(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function a6(e,t,n){var r=e._x0,s=e._y0,a=e._x1,i=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,s+l*t,a-l,i-l*n,a,i)}function hM(e){this._context=e}hM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a6(this,this._t0,zte(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,a6(this,zte(this,n=Hte(this,e,t)),n);break;default:a6(this,this._t0,n=Hte(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};Object.create(hM.prototype).point=function(e,t){hM.prototype.point.call(this,t,e)};function I_t(e){return new hM(e)}function Awe(e){this._context=e}Awe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Gte(e),s=Gte(t),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Gte(e){var t,n=e.length-1,r,s=new Array(n),a=new Array(n),i=new Array(n);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(s[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function R_t(e){return new Awe(e)}function ry(e,t){if((i=e.length)>1)for(var n=1,r,s,a=e[t[0]],i,l=a.length;n<i;++n)for(s=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function sy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function P_t(e,t){return e[t]}function l$(){var e=An([]),t=sy,n=ry,r=P_t;function s(a){var i=e.apply(this,arguments),l,c=a.length,u=i.length,d=new Array(u),m;for(l=0;l<u;++l){for(var p=i[l],h=d[l]=new Array(c),g=0,y;g<c;++g)h[g]=y=[0,+r(a[g],p,g,a)],y.data=a[g];h.key=p}for(l=0,m=t(d);l<u;++l)d[m[l]].index=l;return n(d,m),d}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:An(M9.call(a)),s):e},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:An(+a),s):r},s.order=function(a){return arguments.length?(t=a==null?sy:typeof a=="function"?a:An(M9.call(a)),s):t},s.offset=function(a){return arguments.length?(n=a??ry,s):n},s}function O_t(e,t){if((r=e.length)>0){for(var n,r,s=0,a=e[0].length,i;s<a;++s){for(i=n=0;n<r;++n)i+=e[n][s][1]||0;if(i)for(n=0;n<r;++n)e[n][s][1]/=i}ry(e,t)}}function L_t(e,t){if((c=e.length)>0)for(var n,r=0,s,a,i,l,c,u=e[t[0]].length;r<u;++r)for(i=l=0,n=0;n<c;++n)(a=(s=e[t[n]][r])[1]-s[0])>0?(s[0]=i,s[1]=i+=a):a<0?(s[1]=l,s[0]=l+=a):(s[0]=0,s[1]=a)}function D_t(e,t){if((s=e.length)>0){for(var n=0,r=e[t[0]],s,a=r.length;n<a;++n){for(var i=0,l=0;i<s;++i)l+=e[i][n][1]||0;r[n][1]+=r[n][0]=-l/2}ry(e,t)}}function F_t(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var n=0,r=1,s,a,i;r<a;++r){for(var l=0,c=0,u=0;l<i;++l){for(var d=e[t[l]],m=d[r][1]||0,p=d[r-1][1]||0,h=(m-p)/2,g=0;g<l;++g){var y=e[t[g]],x=y[r][1]||0,v=y[r-1][1]||0;h+=x-v}c+=m,u+=h*m}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,ry(e,t)}}function U_t(e){var t=e.map(B_t);return sy(e).sort(function(n,r){return t[n]-t[r]})}function B_t(e){for(var t=-1,n=0,r=e.length,s,a=-1/0;++t<r;)(s=+e[t][1])>a&&(a=s,n=t);return n}function Iwe(e){var t=e.map(Rwe);return sy(e).sort(function(n,r){return t[n]-t[r]})}function Rwe(e){for(var t=0,n=-1,r=e.length,s;++n<r;)(s=+e[n][1])&&(t+=s);return t}function V_t(e){return Iwe(e).reverse()}function $_t(e){var t=e.length,n,r,s=e.map(Rwe),a=U_t(e),i=0,l=0,c=[],u=[];for(n=0;n<t;++n)r=a[n],i<l?(i+=s[r],c.push(r)):(l+=s[r],u.push(r));return u.reverse().concat(c)}function W_t(e){return sy(e).reverse()}var H_t=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function k9(){return k9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k9.apply(this,arguments)}function z_t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function V5(e){var t=e.children,n=e.id,r=e.from,s=e.to,a=e.x1,i=e.y1,l=e.x2,c=e.y2,u=e.fromOffset,d=u===void 0?"0%":u,m=e.fromOpacity,p=m===void 0?1:m,h=e.toOffset,g=h===void 0?"100%":h,y=e.toOpacity,x=y===void 0?1:y,v=e.rotate,b=e.transform,_=e.vertical,w=_===void 0?!0:_,C=z_t(e,H_t),S=a,E=l,M=i,k=c;return w&&!S&&!E&&!M&&!k&&(S="0",E="0",M="0",k="1"),R.createElement("defs",null,R.createElement("linearGradient",k9({id:n,x1:S,y1:M,x2:E,y2:k,gradientTransform:v?"rotate("+v+")":b},C),!!t&&t,!t&&R.createElement("stop",{offset:d,stopColor:r,stopOpacity:p}),!t&&R.createElement("stop",{offset:g,stopColor:s,stopOpacity:x})))}V5.propTypes={id:Ue.string.isRequired,from:Ue.string,to:Ue.string,x1:Ue.oneOfType([Ue.string,Ue.number]),x2:Ue.oneOfType([Ue.string,Ue.number]),y1:Ue.oneOfType([Ue.string,Ue.number]),y2:Ue.oneOfType([Ue.string,Ue.number]),fromOffset:Ue.oneOfType([Ue.string,Ue.number]),fromOpacity:Ue.oneOfType([Ue.string,Ue.number]),toOffset:Ue.oneOfType([Ue.string,Ue.number]),toOpacity:Ue.oneOfType([Ue.string,Ue.number]),rotate:Ue.oneOfType([Ue.string,Ue.number]),transform:Ue.string,children:Ue.node,vertical:Ue.bool};function zv(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function G_t(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $5(e){let t,n,r;e.length!==2?(t=zv,n=(l,c)=>zv(e(l),c),r=(l,c)=>e(l)-c):(t=e===zv||e===G_t?e:q_t,n=e,r=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(l[m],c)<0?u=m+1:d=m}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(l[m],c)<=0?u=m+1:d=m}while(u<d)}return u}function i(l,c,u=0,d=l.length){const m=s(l,c,u,d-1);return m>u&&r(l[m-1],c)>-r(l[m],c)?m-1:m}return{left:s,center:i,right:a}}function q_t(){return 0}function Pwe(e){return e===null?NaN:+e}const K_t=$5(zv),Ex=K_t.right;$5(Pwe).center;function gi(e,t){let n,r;if(t===void 0)for(const s of e)s!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class qte extends Map{constructor(t,n=X_t){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(Kte(this,t))}has(t){return super.has(Kte(this,t))}set(t,n){return super.set(Y_t(this,t),n)}delete(t){return super.delete(Q_t(this,t))}}function Kte({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Y_t({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Q_t({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function X_t(e){return e!==null&&typeof e=="object"?e.valueOf():e}var T9=Math.sqrt(50),N9=Math.sqrt(10),j9=Math.sqrt(2);function A9(e,t,n){var r,s=-1,a,i,l;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(l=Owe(e,t,n))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),u=Math.round(t/l);for(c*l<e&&++c,u*l>t&&--u,i=new Array(a=u-c+1);++s<a;)i[s]=(c+s)*l}else{l=-l;let c=Math.round(e*l),u=Math.round(t*l);for(c/l<e&&++c,u/l>t&&--u,i=new Array(a=u-c+1);++s<a;)i[s]=(c+s)/l}return r&&i.reverse(),i}function Owe(e,t,n){var r=(t-e)/Math.max(0,n),s=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,s);return s>=0?(a>=T9?10:a>=N9?5:a>=j9?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(a>=T9?10:a>=N9?5:a>=j9?2:1)}function I9(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/s;return a>=T9?s*=10:a>=N9?s*=5:a>=j9&&(s*=2),t<e?-s:s}function Z_t(e,t,n=Pwe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,a=Math.floor(s),i=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return i+(l-i)*(s-a)}}function J_t(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(s);++r<s;)a[r]=e+r*n;return a}function Fo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Yte=Symbol("implicit");function c$(){var e=new qte,t=[],n=[],r=Yte;function s(a){let i=e.get(a);if(i===void 0){if(r!==Yte)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new qte;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return c$(t,n).unknown(r)},Fo.apply(s,arguments),s}function u$(){var e=c$().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,a,i,l=!1,c=0,u=0,d=.5;delete e.unknown;function m(){var p=t().length,h=s<r,g=h?s:r,y=h?r:s;a=(y-g)/Math.max(1,p-c+u*2),l&&(a=Math.floor(a)),g+=(y-g-a*(p-c))*d,i=a*(1-c),l&&(g=Math.round(g),i=Math.round(i));var x=J_t(p).map(function(v){return g+a*v});return n(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([r,s]=p,r=+r,s=+s,m()):[r,s]},e.rangeRound=function(p){return[r,s]=p,r=+r,s=+s,l=!0,m()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),m()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),m()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,m()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),m()):d},e.copy=function(){return u$(t(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},Fo.apply(m(),arguments)}function Lwe(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Lwe(t())},e}function ewt(){return Lwe(u$.apply(null,arguments).paddingInner(1))}function Mx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function X_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Cf(){}var Zm=.7,ay=1/Zm,xg="\\s*([+-]?\\d+)\\s*",hb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",twt=/^#([0-9a-f]{3,8})$/,nwt=new RegExp(`^rgb\\(${xg},${xg},${xg}\\)$`),rwt=new RegExp(`^rgb\\(${lc},${lc},${lc}\\)$`),swt=new RegExp(`^rgba\\(${xg},${xg},${xg},${hb}\\)$`),awt=new RegExp(`^rgba\\(${lc},${lc},${lc},${hb}\\)$`),iwt=new RegExp(`^hsl\\(${hb},${lc},${lc}\\)$`),owt=new RegExp(`^hsla\\(${hb},${lc},${lc},${hb}\\)$`),Qte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mx(Cf,gb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xte,formatHex:Xte,formatHex8:lwt,formatHsl:cwt,formatRgb:Zte,toString:Zte});function Xte(){return this.rgb().formatHex()}function lwt(){return this.rgb().formatHex8()}function cwt(){return Dwe(this).formatHsl()}function Zte(){return this.rgb().formatRgb()}function gb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=twt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jte(t):n===3?new Ps(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?uS(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?uS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nwt.exec(e))?new Ps(t[1],t[2],t[3],1):(t=rwt.exec(e))?new Ps(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=swt.exec(e))?uS(t[1],t[2],t[3],t[4]):(t=awt.exec(e))?uS(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iwt.exec(e))?nne(t[1],t[2]/100,t[3]/100,1):(t=owt.exec(e))?nne(t[1],t[2]/100,t[3]/100,t[4]):Qte.hasOwnProperty(e)?Jte(Qte[e]):e==="transparent"?new Ps(NaN,NaN,NaN,0):null}function Jte(e){return new Ps(e>>16&255,e>>8&255,e&255,1)}function uS(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ps(e,t,n,r)}function d$(e){return e instanceof Cf||(e=gb(e)),e?(e=e.rgb(),new Ps(e.r,e.g,e.b,e.opacity)):new Ps}function R9(e,t,n,r){return arguments.length===1?d$(e):new Ps(e,t,n,r??1)}function Ps(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Mx(Ps,R9,X_(Cf,{brighter(e){return e=e==null?ay:Math.pow(ay,e),new Ps(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zm:Math.pow(Zm,e),new Ps(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ps(Mm(this.r),Mm(this.g),Mm(this.b),gM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ene,formatHex:ene,formatHex8:uwt,formatRgb:tne,toString:tne}));function ene(){return`#${fm(this.r)}${fm(this.g)}${fm(this.b)}`}function uwt(){return`#${fm(this.r)}${fm(this.g)}${fm(this.b)}${fm((isNaN(this.opacity)?1:this.opacity)*255)}`}function tne(){const e=gM(this.opacity);return`${e===1?"rgb(":"rgba("}${Mm(this.r)}, ${Mm(this.g)}, ${Mm(this.b)}${e===1?")":`, ${e})`}`}function gM(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fm(e){return e=Mm(e),(e<16?"0":"")+e.toString(16)}function nne(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tl(e,t,n,r)}function Dwe(e){if(e instanceof tl)return new tl(e.h,e.s,e.l,e.opacity);if(e instanceof Cf||(e=gb(e)),!e)return new tl;if(e instanceof tl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,l=a-s,c=(a+s)/2;return l?(t===a?i=(n-r)/l+(n<r)*6:n===a?i=(r-t)/l+2:i=(t-n)/l+4,l/=c<.5?a+s:2-a-s,i*=60):l=c>0&&c<1?0:i,new tl(i,l,c,e.opacity)}function P9(e,t,n,r){return arguments.length===1?Dwe(e):new tl(e,t,n,r??1)}function tl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Mx(tl,P9,X_(Cf,{brighter(e){return e=e==null?ay:Math.pow(ay,e),new tl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zm:Math.pow(Zm,e),new tl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Ps(i6(e>=240?e-240:e+120,s,r),i6(e,s,r),i6(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new tl(rne(this.h),dS(this.s),dS(this.l),gM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gM(this.opacity);return`${e===1?"hsl(":"hsla("}${rne(this.h)}, ${dS(this.s)*100}%, ${dS(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rne(e){return e=(e||0)%360,e<0?e+360:e}function dS(e){return Math.max(0,Math.min(1,e||0))}function i6(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fwe=Math.PI/180,Uwe=180/Math.PI,yM=18,Bwe=.96422,Vwe=1,$we=.82521,Wwe=4/29,vg=6/29,Hwe=3*vg*vg,dwt=vg*vg*vg;function zwe(e){if(e instanceof cc)return new cc(e.l,e.a,e.b,e.opacity);if(e instanceof fu)return Gwe(e);e instanceof Ps||(e=d$(e));var t=u6(e.r),n=u6(e.g),r=u6(e.b),s=o6((.2225045*t+.7168786*n+.0606169*r)/Vwe),a,i;return t===n&&n===r?a=i=s:(a=o6((.4360747*t+.3850649*n+.1430804*r)/Bwe),i=o6((.0139322*t+.0971045*n+.7141733*r)/$we)),new cc(116*s-16,500*(a-s),200*(s-i),e.opacity)}function O9(e,t,n,r){return arguments.length===1?zwe(e):new cc(e,t,n,r??1)}function cc(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Mx(cc,O9,X_(Cf,{brighter(e){return new cc(this.l+yM*(e??1),this.a,this.b,this.opacity)},darker(e){return new cc(this.l-yM*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Bwe*l6(t),e=Vwe*l6(e),n=$we*l6(n),new Ps(c6(3.1338561*t-1.6168667*e-.4906146*n),c6(-.9787684*t+1.9161415*e+.033454*n),c6(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function o6(e){return e>dwt?Math.pow(e,1/3):e/Hwe+Wwe}function l6(e){return e>vg?e*e*e:Hwe*(e-Wwe)}function c6(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function u6(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function fwt(e){if(e instanceof fu)return new fu(e.h,e.c,e.l,e.opacity);if(e instanceof cc||(e=zwe(e)),e.a===0&&e.b===0)return new fu(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Uwe;return new fu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function L9(e,t,n,r){return arguments.length===1?fwt(e):new fu(e,t,n,r??1)}function fu(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Gwe(e){if(isNaN(e.h))return new cc(e.l,0,0,e.opacity);var t=e.h*Fwe;return new cc(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Mx(fu,L9,X_(Cf,{brighter(e){return new fu(this.h,this.c,this.l+yM*(e??1),this.opacity)},darker(e){return new fu(this.h,this.c,this.l-yM*(e??1),this.opacity)},rgb(){return Gwe(this).rgb()}}));var qwe=-.14861,f$=1.78277,m$=-.29227,W5=-.90649,yb=1.97294,sne=yb*W5,ane=yb*f$,ine=f$*m$-W5*qwe;function mwt(e){if(e instanceof km)return new km(e.h,e.s,e.l,e.opacity);e instanceof Ps||(e=d$(e));var t=e.r/255,n=e.g/255,r=e.b/255,s=(ine*r+sne*t-ane*n)/(ine+sne-ane),a=r-s,i=(yb*(n-s)-m$*a)/W5,l=Math.sqrt(i*i+a*a)/(yb*s*(1-s)),c=l?Math.atan2(i,a)*Uwe-120:NaN;return new km(c<0?c+360:c,l,s,e.opacity)}function D9(e,t,n,r){return arguments.length===1?mwt(e):new km(e,t,n,r??1)}function km(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Mx(km,D9,X_(Cf,{brighter(e){return e=e==null?ay:Math.pow(ay,e),new km(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zm:Math.pow(Zm,e),new km(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Fwe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),s=Math.sin(e);return new Ps(255*(t+n*(qwe*r+f$*s)),255*(t+n*(m$*r+W5*s)),255*(t+n*(yb*r)),this.opacity)}}));const H5=e=>()=>e;function Kwe(e,t){return function(n){return e+n*t}}function pwt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function p$(e,t){var n=t-e;return n?Kwe(e,n>180||n<-180?n-360*Math.round(n/360):n):H5(isNaN(e)?t:e)}function hwt(e){return(e=+e)==1?Os:function(t,n){return n-t?pwt(t,n,e):H5(isNaN(t)?n:t)}}function Os(e,t){var n=t-e;return n?Kwe(e,n):H5(isNaN(e)?t:e)}const F9=function e(t){var n=hwt(t);function r(s,a){var i=n((s=R9(s)).r,(a=R9(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),u=Os(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=e,r}(1);function gwt(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=e[s]*(1-a)+t[s]*a;return r}}function ywt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xwt(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)s[i]=h$(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(l){for(i=0;i<r;++i)a[i]=s[i](l);return a}}function vwt(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function xM(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bwt(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=h$(e[s],t[s]):r[s]=t[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var U9=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d6=new RegExp(U9.source,"g");function _wt(e){return function(){return e}}function wwt(e){return function(t){return e(t)+""}}function Cwt(e,t){var n=U9.lastIndex=d6.lastIndex=0,r,s,a,i=-1,l=[],c=[];for(e=e+"",t=t+"";(r=U9.exec(e))&&(s=d6.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),l[i]?l[i]+=a:l[++i]=a),(r=r[0])===(s=s[0])?l[i]?l[i]+=s:l[++i]=s:(l[++i]=null,c.push({i,x:xM(r,s)})),n=d6.lastIndex;return n<t.length&&(a=t.slice(n),l[i]?l[i]+=a:l[++i]=a),l.length<2?c[0]?wwt(c[0].x):_wt(t):(t=c.length,function(u){for(var d=0,m;d<t;++d)l[(m=c[d]).i]=m.x(u);return l.join("")})}function h$(e,t){var n=typeof t,r;return t==null||n==="boolean"?H5(t):(n==="number"?xM:n==="string"?(r=gb(t))?(t=r,F9):Cwt:t instanceof gb?F9:t instanceof Date?vwt:ywt(t)?gwt:Array.isArray(t)?xwt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bwt:xM)(e,t)}function Ywe(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Qwe(e){return function(t,n){var r=e((t=P9(t)).h,(n=P9(n)).h),s=Os(t.s,n.s),a=Os(t.l,n.l),i=Os(t.opacity,n.opacity);return function(l){return t.h=r(l),t.s=s(l),t.l=a(l),t.opacity=i(l),t+""}}}const Swt=Qwe(p$);var Ewt=Qwe(Os);function Mwt(e,t){var n=Os((e=O9(e)).l,(t=O9(t)).l),r=Os(e.a,t.a),s=Os(e.b,t.b),a=Os(e.opacity,t.opacity);return function(i){return e.l=n(i),e.a=r(i),e.b=s(i),e.opacity=a(i),e+""}}function Xwe(e){return function(t,n){var r=e((t=L9(t)).h,(n=L9(n)).h),s=Os(t.c,n.c),a=Os(t.l,n.l),i=Os(t.opacity,n.opacity);return function(l){return t.h=r(l),t.c=s(l),t.l=a(l),t.opacity=i(l),t+""}}}const kwt=Xwe(p$);var Twt=Xwe(Os);function Zwe(e){return function t(n){n=+n;function r(s,a){var i=e((s=D9(s)).h,(a=D9(a)).h),l=Os(s.s,a.s),c=Os(s.l,a.l),u=Os(s.opacity,a.opacity);return function(d){return s.h=i(d),s.s=l(d),s.l=c(Math.pow(d,n)),s.opacity=u(d),s+""}}return r.gamma=t,r}(1)}const Nwt=Zwe(p$);var jwt=Zwe(Os);function Awt(e){return function(){return e}}function Jwe(e){return+e}var one=[0,1];function ec(e){return e}function B9(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Awt(isNaN(t)?NaN:.5)}function Iwt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Rwt(e,t,n){var r=e[0],s=e[1],a=t[0],i=t[1];return s<r?(r=B9(s,r),a=n(i,a)):(r=B9(r,s),a=n(a,i)),function(l){return a(r(l))}}function Pwt(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)s[i]=B9(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(l){var c=Ex(e,l,1,r)-1;return a[c](s[c](l))}}function Z_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function z5(){var e=one,t=one,n=h$,r,s,a,i=ec,l,c,u;function d(){var p=Math.min(e.length,t.length);return i!==ec&&(i=Iwt(e[0],e[p-1])),l=p>2?Pwt:Rwt,c=u=null,m}function m(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(r),t,n)))(r(i(p)))}return m.invert=function(p){return i(s((u||(u=l(t,e.map(r),xM)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,Jwe),d()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),n=Ywe,d()},m.clamp=function(p){return arguments.length?(i=p?!0:ec,d()):i!==ec},m.interpolate=function(p){return arguments.length?(n=p,d()):n},m.unknown=function(p){return arguments.length?(a=p,m):a},function(p,h){return r=p,s=h,d()}}function g$(){return z5()(ec,ec)}function Owt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vM(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function iy(e){return e=vM(Math.abs(e)),e?e[1]:NaN}function Lwt(e,t){return function(n,r){for(var s=n.length,a=[],i=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=e[i=(i+1)%e.length];return a.reverse().join(t)}}function Dwt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Fwt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xb(e){if(!(t=Fwt.exec(e)))throw new Error("invalid format: "+e);var t;return new y$({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}xb.prototype=y$.prototype;function y$(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}y$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Uwt(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var eCe;function Bwt(e,t){var n=vM(e,t);if(!n)return e+"";var r=n[0],s=n[1],a=s-(eCe=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+vM(e,Math.max(0,t+a-1))[0]}function lne(e,t){var n=vM(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const cne={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Owt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>lne(e*100,t),r:lne,s:Bwt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function une(e){return e}var dne=Array.prototype.map,fne=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Vwt(e){var t=e.grouping===void 0||e.thousands===void 0?une:Lwt(dne.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?une:Dwt(dne.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(m){m=xb(m);var p=m.fill,h=m.align,g=m.sign,y=m.symbol,x=m.zero,v=m.width,b=m.comma,_=m.precision,w=m.trim,C=m.type;C==="n"?(b=!0,C="g"):cne[C]||(_===void 0&&(_=12),w=!0,C="g"),(x||p==="0"&&h==="=")&&(x=!0,p="0",h="=");var S=y==="$"?n:y==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",E=y==="$"?r:/[%p]/.test(C)?i:"",M=cne[C],k=/[defgprs%]/.test(C);_=_===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function N(P){var L=S,O=E,A,j,T;if(C==="c")O=M(P)+O,P="";else{P=+P;var I=P<0||1/P<0;if(P=isNaN(P)?c:M(Math.abs(P),_),w&&(P=Uwt(P)),I&&+P==0&&g!=="+"&&(I=!1),L=(I?g==="("?g:l:g==="-"||g==="("?"":g)+L,O=(C==="s"?fne[8+eCe/3]:"")+O+(I&&g==="("?")":""),k){for(A=-1,j=P.length;++A<j;)if(T=P.charCodeAt(A),48>T||T>57){O=(T===46?s+P.slice(A+1):P.slice(A))+O,P=P.slice(0,A);break}}}b&&!x&&(P=t(P,1/0));var U=L.length+P.length+O.length,B=U<v?new Array(v-U+1).join(p):"";switch(b&&x&&(P=t(B+P,B.length?v-O.length:1/0),B=""),h){case"<":P=L+P+O+B;break;case"=":P=L+B+P+O;break;case"^":P=B.slice(0,U=B.length>>1)+L+P+O+B.slice(U);break;default:P=B+L+P+O;break}return a(P)}return N.toString=function(){return m+""},N}function d(m,p){var h=u((m=xb(m),m.type="f",m)),g=Math.max(-8,Math.min(8,Math.floor(iy(p)/3)))*3,y=Math.pow(10,-g),x=fne[8+g/3];return function(v){return h(y*v)+x}}return{format:u,formatPrefix:d}}var fS,x$,tCe;$wt({thousands:",",grouping:[3],currency:["$",""]});function $wt(e){return fS=Vwt(e),x$=fS.format,tCe=fS.formatPrefix,fS}function Wwt(e){return Math.max(0,-iy(Math.abs(e)))}function Hwt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(iy(t)/3)))*3-iy(Math.abs(e)))}function zwt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,iy(t)-iy(e))+1}function Gwt(e,t,n,r){var s=I9(e,t,n),a;switch(r=xb(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Hwt(s,i))&&(r.precision=a),tCe(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=zwt(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Wwt(s))&&(r.precision=a-(r.type==="%")*2);break}}return x$(r)}function J_(e){var t=e.domain;return e.ticks=function(n){var r=t();return A9(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return Gwt(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,a=r.length-1,i=r[s],l=r[a],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=s,s=a,a=u);d-- >0;){if(u=Owe(i,l,n),u===c)return r[s]=i,r[a]=l,t(r);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function nCe(){var e=g$();return e.copy=function(){return Z_(e,nCe())},Fo.apply(e,arguments),J_(e)}function rCe(e,t){e=e.slice();var n=0,r=e.length-1,s=e[n],a=e[r],i;return a<s&&(i=n,n=r,r=i,i=s,s=a,a=i),e[n]=t.floor(s),e[r]=t.ceil(a),e}function mne(e){return Math.log(e)}function pne(e){return Math.exp(e)}function qwt(e){return-Math.log(-e)}function Kwt(e){return-Math.exp(-e)}function Ywt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Qwt(e){return e===10?Ywt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Xwt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function hne(e){return(t,n)=>-e(-t,n)}function Zwt(e){const t=e(mne,pne),n=t.domain;let r=10,s,a;function i(){return s=Xwt(r),a=Qwt(r),n()[0]<0?(s=hne(s),a=hne(a),e(qwt,Kwt)):e(mne,pne),t}return t.base=function(l){return arguments.length?(r=+l,i()):r},t.domain=function(l){return arguments.length?(n(l),i()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const m=d<u;m&&([u,d]=[d,u]);let p=s(u),h=s(d),g,y;const x=l==null?10:+l;let v=[];if(!(r%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(g=1;g<r;++g)if(y=p<0?g/a(-p):g*a(p),!(y<u)){if(y>d)break;v.push(y)}}else for(;p<=h;++p)for(g=r-1;g>=1;--g)if(y=p>0?g/a(-p):g*a(p),!(y<u)){if(y>d)break;v.push(y)}v.length*2<x&&(v=A9(u,d,x))}else v=A9(p,h,Math.min(h-p,x)).map(a);return m?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=xb(c)).precision==null&&(c.trim=!0),c=x$(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let m=d/a(Math.round(s(d)));return m*r<r-.5&&(m*=r),m<=u?c(d):""}},t.nice=()=>n(rCe(n(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),t}function sCe(){const e=Zwt(z5()).domain([1,10]);return e.copy=()=>Z_(e,sCe()).base(e.base()),Fo.apply(e,arguments),e}function gne(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function yne(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Jwt(e){var t=1,n=e(gne(t),yne(t));return n.constant=function(r){return arguments.length?e(gne(t=+r),yne(t)):t},J_(n)}function aCe(){var e=Jwt(z5());return e.copy=function(){return Z_(e,aCe()).constant(e.constant())},Fo.apply(e,arguments)}function xne(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eCt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tCt(e){return e<0?-e*e:e*e}function nCt(e){var t=e(ec,ec),n=1;function r(){return n===1?e(ec,ec):n===.5?e(eCt,tCt):e(xne(n),xne(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,r()):n},J_(t)}function v$(){var e=nCt(z5());return e.copy=function(){return Z_(e,v$()).exponent(e.exponent())},Fo.apply(e,arguments),e}function rCt(){return v$.apply(null,arguments).exponent(.5)}function vne(e){return Math.sign(e)*e*e}function sCt(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function iCe(){var e=g$(),t=[0,1],n=!1,r;function s(a){var i=sCt(e(a));return isNaN(i)?r:n?Math.round(i):i}return s.invert=function(a){return e.invert(vne(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,Jwe)).map(vne)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return iCe(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Fo.apply(s,arguments),J_(s)}function oCe(){var e=[],t=[],n=[],r;function s(){var i=0,l=Math.max(1,t.length);for(n=new Array(l-1);++i<l;)n[i-1]=Z_t(e,i/l);return a}function a(i){return i==null||isNaN(i=+i)?r:t[Ex(n,i)]}return a.invertExtent=function(i){var l=t.indexOf(i);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let l of i)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(zv),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return oCe().domain(e).range(t).unknown(r)},Fo.apply(a,arguments)}function lCe(){var e=0,t=1,n=1,r=[.5],s=[0,1],a;function i(c){return c!=null&&c<=c?s[Ex(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},i.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},i.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return r.slice()},i.copy=function(){return lCe().domain([e,t]).range(s).unknown(a)},Fo.apply(J_(i),arguments)}function cCe(){var e=[.5],t=[0,1],n,r=1;function s(a){return a!=null&&a<=a?t[Ex(e,a,0,r)]:n}return s.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return cCe().domain(e).range(t).unknown(n)},Fo.apply(s,arguments)}const f6=new Date,m6=new Date;function Es(e,t,n,r){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),l=s.ceil(a);return a-i<l-a?i:l},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<i)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<i);return c},s.filter=a=>Es(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!a(i););else for(;--l>=0;)for(;t(i,1),!a(i););}),n&&(s.count=(a,i)=>(f6.setTime(+a),m6.setTime(+i),e(f6),e(m6),Math.floor(n(f6,m6))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?i=>r(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const bM=Es(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bM.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Es(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):bM);bM.range;const mu=1e3,Mo=mu*60,pu=Mo*60,Pu=pu*24,b$=Pu*7,bne=Pu*30,p6=Pu*365,hu=Es(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*mu)},(e,t)=>(t-e)/mu,e=>e.getUTCSeconds());hu.range;const G5=Es(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mu)},(e,t)=>{e.setTime(+e+t*Mo)},(e,t)=>(t-e)/Mo,e=>e.getMinutes());G5.range;const q5=Es(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Mo)},(e,t)=>(t-e)/Mo,e=>e.getUTCMinutes());q5.range;const K5=Es(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mu-e.getMinutes()*Mo)},(e,t)=>{e.setTime(+e+t*pu)},(e,t)=>(t-e)/pu,e=>e.getHours());K5.range;const Y5=Es(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*pu)},(e,t)=>(t-e)/pu,e=>e.getUTCHours());Y5.range;const kx=Es(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mo)/Pu,e=>e.getDate()-1);kx.range;const ew=Es(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pu,e=>e.getUTCDate()-1);ew.range;const uCe=Es(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pu,e=>Math.floor(e/Pu));uCe.range;function Ap(e){return Es(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Mo)/b$)}const tw=Ap(0),_M=Ap(1),aCt=Ap(2),iCt=Ap(3),oy=Ap(4),oCt=Ap(5),lCt=Ap(6);tw.range;_M.range;aCt.range;iCt.range;oy.range;oCt.range;lCt.range;function Ip(e){return Es(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/b$)}const nw=Ip(0),wM=Ip(1),cCt=Ip(2),uCt=Ip(3),ly=Ip(4),dCt=Ip(5),fCt=Ip(6);nw.range;wM.range;cCt.range;uCt.range;ly.range;dCt.range;fCt.range;const rw=Es(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());rw.range;const Q5=Es(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Q5.range;const yl=Es(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());yl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Es(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});yl.range;const wc=Es(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Es(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});wc.range;function dCe(e,t,n,r,s,a){const i=[[hu,1,mu],[hu,5,5*mu],[hu,15,15*mu],[hu,30,30*mu],[a,1,Mo],[a,5,5*Mo],[a,15,15*Mo],[a,30,30*Mo],[s,1,pu],[s,3,3*pu],[s,6,6*pu],[s,12,12*pu],[r,1,Pu],[r,2,2*Pu],[n,1,b$],[t,1,bne],[t,3,3*bne],[e,1,p6]];function l(u,d,m){const p=d<u;p&&([u,d]=[d,u]);const h=m&&typeof m.range=="function"?m:c(u,d,m),g=h?h.range(u,+d+1):[];return p?g.reverse():g}function c(u,d,m){const p=Math.abs(d-u)/m,h=$5(([,,x])=>x).right(i,p);if(h===i.length)return e.every(I9(u/p6,d/p6,m));if(h===0)return bM.every(Math.max(I9(u,d,m),1));const[g,y]=i[p/i[h-1][2]<i[h][2]/p?h-1:h];return g.every(y)}return[l,c]}const[mCt,pCt]=dCe(wc,Q5,nw,uCe,Y5,q5),[hCt,gCt]=dCe(yl,rw,tw,kx,K5,G5);function h6(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function g6(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function T0(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function yCt(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,a=e.days,i=e.shortDays,l=e.months,c=e.shortMonths,u=N0(s),d=j0(s),m=N0(a),p=j0(a),h=N0(i),g=j0(i),y=N0(l),x=j0(l),v=N0(c),b=j0(c),_={a:I,A:U,b:B,B:D,c:null,d:Mne,e:Mne,f:BCt,g:QCt,G:ZCt,H:DCt,I:FCt,j:UCt,L:fCe,m:VCt,M:$Ct,p:W,q:z,Q:Nne,s:jne,S:WCt,u:HCt,U:zCt,V:GCt,w:qCt,W:KCt,x:null,X:null,y:YCt,Y:XCt,Z:JCt,"%":Tne},w={a:$,A:X,b:q,B:Y,c:null,d:kne,e:kne,f:rSt,g:mSt,G:hSt,H:eSt,I:tSt,j:nSt,L:pCe,m:sSt,M:aSt,p:G,q:J,Q:Nne,s:jne,S:iSt,u:oSt,U:lSt,V:cSt,w:uSt,W:dSt,x:null,X:null,y:fSt,Y:pSt,Z:gSt,"%":Tne},C={a:N,A:P,b:L,B:O,c:A,d:Sne,e:Sne,f:RCt,g:Cne,G:wne,H:Ene,I:Ene,j:NCt,L:ICt,m:TCt,M:jCt,p:k,q:kCt,Q:OCt,s:LCt,S:ACt,u:wCt,U:CCt,V:SCt,w:_Ct,W:ECt,x:j,X:T,y:Cne,Y:wne,Z:MCt,"%":PCt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(K,te){return function(re){var se=[],me=-1,oe=0,ge=K.length,xe,ye,_e;for(re instanceof Date||(re=new Date(+re));++me<ge;)K.charCodeAt(me)===37&&(se.push(K.slice(oe,me)),(ye=_ne[xe=K.charAt(++me)])!=null?xe=K.charAt(++me):ye=xe==="e"?" ":"0",(_e=te[xe])&&(xe=_e(re,ye)),se.push(xe),oe=me+1);return se.push(K.slice(oe,me)),se.join("")}}function E(K,te){return function(re){var se=T0(1900,void 0,1),me=M(se,K,re+="",0),oe,ge;if(me!=re.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(te&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(oe=g6(T0(se.y,0,1)),ge=oe.getUTCDay(),oe=ge>4||ge===0?wM.ceil(oe):wM(oe),oe=ew.offset(oe,(se.V-1)*7),se.y=oe.getUTCFullYear(),se.m=oe.getUTCMonth(),se.d=oe.getUTCDate()+(se.w+6)%7):(oe=h6(T0(se.y,0,1)),ge=oe.getDay(),oe=ge>4||ge===0?_M.ceil(oe):_M(oe),oe=kx.offset(oe,(se.V-1)*7),se.y=oe.getFullYear(),se.m=oe.getMonth(),se.d=oe.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),ge="Z"in se?g6(T0(se.y,0,1)).getUTCDay():h6(T0(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(ge+5)%7:se.w+se.U*7-(ge+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,g6(se)):h6(se)}}function M(K,te,re,se){for(var me=0,oe=te.length,ge=re.length,xe,ye;me<oe;){if(se>=ge)return-1;if(xe=te.charCodeAt(me++),xe===37){if(xe=te.charAt(me++),ye=C[xe in _ne?te.charAt(me++):xe],!ye||(se=ye(K,re,se))<0)return-1}else if(xe!=re.charCodeAt(se++))return-1}return se}function k(K,te,re){var se=u.exec(te.slice(re));return se?(K.p=d.get(se[0].toLowerCase()),re+se[0].length):-1}function N(K,te,re){var se=h.exec(te.slice(re));return se?(K.w=g.get(se[0].toLowerCase()),re+se[0].length):-1}function P(K,te,re){var se=m.exec(te.slice(re));return se?(K.w=p.get(se[0].toLowerCase()),re+se[0].length):-1}function L(K,te,re){var se=v.exec(te.slice(re));return se?(K.m=b.get(se[0].toLowerCase()),re+se[0].length):-1}function O(K,te,re){var se=y.exec(te.slice(re));return se?(K.m=x.get(se[0].toLowerCase()),re+se[0].length):-1}function A(K,te,re){return M(K,t,te,re)}function j(K,te,re){return M(K,n,te,re)}function T(K,te,re){return M(K,r,te,re)}function I(K){return i[K.getDay()]}function U(K){return a[K.getDay()]}function B(K){return c[K.getMonth()]}function D(K){return l[K.getMonth()]}function W(K){return s[+(K.getHours()>=12)]}function z(K){return 1+~~(K.getMonth()/3)}function $(K){return i[K.getUTCDay()]}function X(K){return a[K.getUTCDay()]}function q(K){return c[K.getUTCMonth()]}function Y(K){return l[K.getUTCMonth()]}function G(K){return s[+(K.getUTCHours()>=12)]}function J(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var te=S(K+="",_);return te.toString=function(){return K},te},parse:function(K){var te=E(K+="",!1);return te.toString=function(){return K},te},utcFormat:function(K){var te=S(K+="",w);return te.toString=function(){return K},te},utcParse:function(K){var te=E(K+="",!0);return te.toString=function(){return K},te}}}var _ne={"-":"",_:" ",0:"0"},Fs=/^\s*\d+/,xCt=/^%/,vCt=/[\\^$*+?|[\]().{}]/g;function Un(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(t)+s:s)}function bCt(e){return e.replace(vCt,"\\$&")}function N0(e){return new RegExp("^(?:"+e.map(bCt).join("|")+")","i")}function j0(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function _Ct(e,t,n){var r=Fs.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function wCt(e,t,n){var r=Fs.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function CCt(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function SCt(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ECt(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function wne(e,t,n){var r=Fs.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Cne(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function MCt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kCt(e,t,n){var r=Fs.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function TCt(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Sne(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function NCt(e,t,n){var r=Fs.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ene(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function jCt(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ACt(e,t,n){var r=Fs.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ICt(e,t,n){var r=Fs.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function RCt(e,t,n){var r=Fs.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PCt(e,t,n){var r=xCt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function OCt(e,t,n){var r=Fs.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function LCt(e,t,n){var r=Fs.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Mne(e,t){return Un(e.getDate(),t,2)}function DCt(e,t){return Un(e.getHours(),t,2)}function FCt(e,t){return Un(e.getHours()%12||12,t,2)}function UCt(e,t){return Un(1+kx.count(yl(e),e),t,3)}function fCe(e,t){return Un(e.getMilliseconds(),t,3)}function BCt(e,t){return fCe(e,t)+"000"}function VCt(e,t){return Un(e.getMonth()+1,t,2)}function $Ct(e,t){return Un(e.getMinutes(),t,2)}function WCt(e,t){return Un(e.getSeconds(),t,2)}function HCt(e){var t=e.getDay();return t===0?7:t}function zCt(e,t){return Un(tw.count(yl(e)-1,e),t,2)}function mCe(e){var t=e.getDay();return t>=4||t===0?oy(e):oy.ceil(e)}function GCt(e,t){return e=mCe(e),Un(oy.count(yl(e),e)+(yl(e).getDay()===4),t,2)}function qCt(e){return e.getDay()}function KCt(e,t){return Un(_M.count(yl(e)-1,e),t,2)}function YCt(e,t){return Un(e.getFullYear()%100,t,2)}function QCt(e,t){return e=mCe(e),Un(e.getFullYear()%100,t,2)}function XCt(e,t){return Un(e.getFullYear()%1e4,t,4)}function ZCt(e,t){var n=e.getDay();return e=n>=4||n===0?oy(e):oy.ceil(e),Un(e.getFullYear()%1e4,t,4)}function JCt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Un(t/60|0,"0",2)+Un(t%60,"0",2)}function kne(e,t){return Un(e.getUTCDate(),t,2)}function eSt(e,t){return Un(e.getUTCHours(),t,2)}function tSt(e,t){return Un(e.getUTCHours()%12||12,t,2)}function nSt(e,t){return Un(1+ew.count(wc(e),e),t,3)}function pCe(e,t){return Un(e.getUTCMilliseconds(),t,3)}function rSt(e,t){return pCe(e,t)+"000"}function sSt(e,t){return Un(e.getUTCMonth()+1,t,2)}function aSt(e,t){return Un(e.getUTCMinutes(),t,2)}function iSt(e,t){return Un(e.getUTCSeconds(),t,2)}function oSt(e){var t=e.getUTCDay();return t===0?7:t}function lSt(e,t){return Un(nw.count(wc(e)-1,e),t,2)}function hCe(e){var t=e.getUTCDay();return t>=4||t===0?ly(e):ly.ceil(e)}function cSt(e,t){return e=hCe(e),Un(ly.count(wc(e),e)+(wc(e).getUTCDay()===4),t,2)}function uSt(e){return e.getUTCDay()}function dSt(e,t){return Un(wM.count(wc(e)-1,e),t,2)}function fSt(e,t){return Un(e.getUTCFullYear()%100,t,2)}function mSt(e,t){return e=hCe(e),Un(e.getUTCFullYear()%100,t,2)}function pSt(e,t){return Un(e.getUTCFullYear()%1e4,t,4)}function hSt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ly(e):ly.ceil(e),Un(e.getUTCFullYear()%1e4,t,4)}function gSt(){return"+0000"}function Tne(){return"%"}function Nne(e){return+e}function jne(e){return Math.floor(+e/1e3)}var ph,sw,gCe;ySt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ySt(e){return ph=yCt(e),sw=ph.format,ph.parse,gCe=ph.utcFormat,ph.utcParse,ph}function xSt(e){return new Date(e)}function vSt(e){return e instanceof Date?+e:+new Date(+e)}function _$(e,t,n,r,s,a,i,l,c,u){var d=g$(),m=d.invert,p=d.domain,h=u(".%L"),g=u(":%S"),y=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),b=u("%b %d"),_=u("%B"),w=u("%Y");function C(S){return(c(S)<S?h:l(S)<S?g:i(S)<S?y:a(S)<S?x:r(S)<S?s(S)<S?v:b:n(S)<S?_:w)(S)}return d.invert=function(S){return new Date(m(S))},d.domain=function(S){return arguments.length?p(Array.from(S,vSt)):p().map(xSt)},d.ticks=function(S){var E=p();return e(E[0],E[E.length-1],S??10)},d.tickFormat=function(S,E){return E==null?C:u(E)},d.nice=function(S){var E=p();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?p(rCe(E,S)):d},d.copy=function(){return Z_(d,_$(e,t,n,r,s,a,i,l,c,u))},d}function bSt(){return Fo.apply(_$(hCt,gCt,yl,rw,tw,kx,K5,G5,hu,sw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _St(){return Fo.apply(_$(mCt,pCt,wc,Q5,nw,ew,Y5,q5,hu,gCe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wSt(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function CSt(e,t){t.range&&("padding"in e,e.range(t.range))}function SSt(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function ESt(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function MSt(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function kSt(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function TSt(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var Ane={lab:Mwt,hcl:kwt,"hcl-long":Twt,hsl:Swt,"hsl-long":Ewt,cubehelix:Nwt,"cubehelix-long":jwt,rgb:F9};function NSt(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return Ane[e]}var t=e.type,n=e.gamma,r=Ane[t];return typeof n>"u"?r:r.gamma(n)}function jSt(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=NSt(t.interpolate);e.interpolate(n)}}var ASt=new Date(Date.UTC(2020,1,2,3,4,5)),ISt="%Y-%m-%d %H:%M";function yCe(e){var t=e.tickFormat(1,ISt)(ASt);return t==="2020-02-02 03:04"}var Ine={day:kx,hour:K5,minute:G5,month:rw,second:hu,week:tw,year:yl},Rne={day:ew,hour:Y5,minute:q5,month:Q5,second:hu,week:nw,year:wc};function RSt(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,s=yCe(r);if(typeof n=="string")r.nice(s?Rne[n]:Ine[n]);else{var a=n.interval,i=n.step,l=(s?Rne[a]:Ine[a]).every(i);l!=null&&r.nice(l)}}}}function PSt(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function OSt(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function LSt(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(Ywe))}function DSt(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function FSt(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],s=n[1],a=s<r,i=a?[s,r]:[r,s],l=i[0],c=i[1],u=[Math.min(0,l),Math.max(0,c)];e.domain(a?u.reverse():u)}}var xCe=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],USt={domain:wSt,nice:RSt,zero:FSt,interpolate:jSt,round:LSt,align:SSt,base:ESt,clamp:MSt,constant:kSt,exponent:TSt,padding:PSt,range:CSt,reverse:OSt,unknown:DSt};function ei(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),s=xCe.filter(function(a){return r.has(a)});return function(i,l){return typeof l<"u"&&s.forEach(function(c){USt[c](i,l)}),i}}var BSt=ei("domain","range","reverse","align","padding","round");function w$(e){return BSt(u$(),e)}var VSt=ei("domain","range","reverse","align","padding","round");function aw(e){return VSt(ewt(),e)}var $St=ei("domain","range","reverse","clamp","interpolate","nice","round","zero");function ef(e){return $St(nCe(),e)}var WSt=ei("domain","range","clamp","nice","round","unknown");function HSt(e){return WSt(iCe(),e)}var zSt=ei("domain","range","reverse","clamp","interpolate","nice","round");function Rp(e){return zSt(bSt(),e)}var GSt=ei("domain","range","reverse","clamp","interpolate","nice","round");function vCe(e){return GSt(_St(),e)}var qSt=ei("domain","range","reverse","base","clamp","interpolate","nice","round");function C$(e){return qSt(sCe(),e)}var KSt=ei("domain","range","reverse","clamp","exponent","interpolate","nice","round","zero");function bCe(e){return KSt(v$(),e)}var YSt=ei("domain","range","reverse","unknown");function S$(e){return YSt(c$(),e)}var QSt=ei("domain","range","reverse","nice","zero");function _Ce(e){return QSt(lCe(),e)}var XSt=ei("domain","range","reverse");function wCe(e){return XSt(oCe(),e)}var ZSt=ei("domain","range","reverse","clamp","constant","nice","zero","round");function CCe(e){return ZSt(aCe(),e)}var JSt=ei("domain","range","reverse");function SCe(e){return JSt(cCe(),e)}var e2t=ei("domain","range","reverse","clamp","interpolate","nice","round","zero");function ECe(e){return e2t(rCt(),e)}function t2t(e){if(typeof e<"u"&&"type"in e)switch(e.type){case"linear":return ef(e);case"log":return C$(e);case"pow":return bCe(e);case"sqrt":return ECe(e);case"symlog":return CCe(e);case"time":return Rp(e);case"utc":return vCe(e);case"quantile":return wCe(e);case"quantize":return _Ce(e);case"threshold":return SCe(e);case"ordinal":return S$(e);case"point":return aw(e);case"band":return w$(e)}return ef(e)}var n2t=ei.apply(void 0,xCe);function r2t(e,t){return n2t(e.copy(),t)}function s2t(e){return"paddingInner"in e?"band":"padding"in e?"point":"quantiles"in e?"quantile":"base"in e?"log":"exponent"in e?e.exponent()===.5?"sqrt":"pow":"constant"in e?"symlog":"clamp"in e?e.ticks()[0]instanceof Date?yCe(e)?"utc":"time":"linear":"nice"in e?"quantize":"invertExtent"in e?"threshold":"ordinal"}function iw(e){if((typeof e=="function"||typeof e=="object"&&e)&&"valueOf"in e){var t=e.valueOf();if(typeof t=="number")return t}return e}function X5(e,t){var n=e;return"ticks"in n?n.ticks(t):n.domain().filter(function(r,s,a){return t==null||a.length<=t||s%Math.round((a.length-1)/t)===0})}function MCe(e){return e?.toString()}var a2t=new Set(["linear","pow","quantize","sqrt","symlog"]);function i2t(e){return a2t.has(e.type)}const o2t=Object.freeze(Object.defineProperty({__proto__:null,coerceNumber:iw,createScale:t2t,getTicks:X5,inferScaleType:s2t,scaleBand:w$,scaleCanBeZeroed:i2t,scaleLinear:ef,scaleLog:C$,scaleOrdinal:S$,scalePoint:aw,scalePower:bCe,scaleQuantile:wCe,scaleQuantize:_Ce,scaleRadial:HSt,scaleSqrt:ECe,scaleSymlog:CCe,scaleThreshold:SCe,scaleTime:Rp,scaleUtc:vCe,toString:MCe,updateScale:r2t},Symbol.toStringTag,{value:"Module"}));function hr(e,t){e(t)}var CM={ascending:Iwe,descending:V_t,insideout:$_t,none:sy,reverse:W_t},l2t=Object.keys(CM);function Z5(e){return e&&CM[e]||CM.none}var SM={expand:O_t,diverging:L_t,none:ry,silhouette:D_t,wiggle:F_t},c2t=Object.keys(SM);function J5(e){return e&&SM[e]||SM.none}function E$(e){var t=e===void 0?{}:e,n=t.innerRadius,r=t.outerRadius,s=t.cornerRadius,a=t.startAngle,i=t.endAngle,l=t.padAngle,c=t.padRadius,u=h_t();return n!=null&&hr(u.innerRadius,n),r!=null&&hr(u.outerRadius,r),s!=null&&hr(u.cornerRadius,s),a!=null&&hr(u.startAngle,a),i!=null&&hr(u.endAngle,i),l!=null&&hr(u.padAngle,l),c!=null&&hr(u.padRadius,c),u}function eT(e){var t=e===void 0?{}:e,n=t.x,r=t.x0,s=t.x1,a=t.y,i=t.y0,l=t.y1,c=t.defined,u=t.curve,d=g_t();return n&&hr(d.x,n),r&&hr(d.x0,r),s&&hr(d.x1,s),a&&hr(d.y,a),i&&hr(d.y0,i),l&&hr(d.y1,l),c&&d.defined(c),u&&d.curve(u),d}function Qu(e){var t=e===void 0?{}:e,n=t.x,r=t.y,s=t.defined,a=t.curve,i=i$();return n&&hr(i.x,n),r&&hr(i.y,r),s&&i.defined(s),a&&i.curve(a),i}function kCe(e){var t=e===void 0?{}:e,n=t.startAngle,r=t.endAngle,s=t.padAngle,a=t.value,i=t.sort,l=t.sortValues,c=v_t();return(i===null||i!=null)&&c.sort(i),(l===null||l!=null)&&c.sortValues(l),a!=null&&c.value(a),s!=null&&hr(c.padAngle,s),n!=null&&hr(c.startAngle,n),r!=null&&hr(c.endAngle,r),c}function TCe(e){var t=e===void 0?{}:e,n=t.angle,r=t.radius,s=t.defined,a=t.curve,i=w_t();return n&&hr(i.angle,n),r&&hr(i.radius,r),s&&i.defined(s),a&&i.curve(a),i}function NCe(e){var t=e.keys,n=e.value,r=e.order,s=e.offset,a=l$();return t&&a.keys(t),n&&hr(a.value,n),r&&a.order(Z5(r)),s&&a.offset(J5(s)),a}var u2t=["className","data","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","children","innerRef"];function V9(){return V9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V9.apply(this,arguments)}function d2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function jCe(e){var t=e.className,n=e.data,r=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,i=e.startAngle,l=e.endAngle,c=e.padAngle,u=e.padRadius,d=e.children,m=e.innerRef,p=d2t(e,u2t),h=E$({innerRadius:r,outerRadius:s,cornerRadius:a,startAngle:i,endAngle:l,padAngle:c,padRadius:u});return d?R.createElement(R.Fragment,null,d({path:h})):!n&&(i==null||l==null||r==null||s==null)?(console.warn("[@visx/shape/Arc]: expected data because one of startAngle, endAngle, innerRadius, outerRadius is undefined. Bailing."),null):R.createElement("path",V9({ref:m,className:V("visx-arc",t),d:h(n)||""},p))}var f2t=["top","left","transform","className","children","innerRef"];function $9(){return $9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$9.apply(this,arguments)}function m2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ba(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.transform,i=e.className,l=e.children,c=e.innerRef,u=m2t(e,f2t);return R.createElement("g",$9({ref:c,className:V("visx-group",i),transform:a||"translate("+s+", "+n+")"},u),l)}ba.propTypes={top:Ue.number,left:Ue.number,transform:Ue.string,className:Ue.string,children:Ue.node,innerRef:Ue.oneOfType([Ue.string,Ue.func,Ue.object])};const p2t=Object.freeze(Object.defineProperty({__proto__:null,Group:ba},Symbol.toStringTag,{value:"Module"}));var h2t=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function W9(){return W9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W9.apply(this,arguments)}function g2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function y2t(e){var t=e.className,n=e.top,r=e.left,s=e.data,a=s===void 0?[]:s,i=e.centroid,l=e.innerRadius,c=l===void 0?0:l,u=e.outerRadius,d=e.cornerRadius,m=e.startAngle,p=e.endAngle,h=e.padAngle,g=e.padRadius,y=e.pieSort,x=e.pieSortValues,v=e.pieValue,b=e.children,_=e.fill,w=_===void 0?"":_,C=g2t(e,h2t),S=E$({innerRadius:c,outerRadius:u,cornerRadius:d,padRadius:g}),E=kCe({startAngle:m,endAngle:p,padAngle:h,value:v,sort:y,sortValues:x}),M=E(a);return b?R.createElement(R.Fragment,null,b({arcs:M,path:S,pie:E})):R.createElement(ba,{className:"visx-pie-arcs-group",top:n,left:r},M.map(function(k,N){return R.createElement("g",{key:"pie-arc-"+N},R.createElement("path",W9({className:V("visx-pie-arc",t),d:S(k)||"",fill:w==null||typeof w=="string"?w:w(k)},C)),i?.(S.centroid(k),k))}))}var x2t=["from","to","fill","className","innerRef"];function H9(){return H9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H9.apply(this,arguments)}function v2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function tT(e){var t=e.from,n=t===void 0?{x:0,y:0}:t,r=e.to,s=r===void 0?{x:1,y:1}:r,a=e.fill,i=a===void 0?"transparent":a,l=e.className,c=e.innerRef,u=v2t(e,x2t),d=n.x===s.x||n.y===s.y;return R.createElement("line",H9({ref:c,className:V("visx-line",l),x1:n.x,y1:n.y,x2:s.x,y2:s.y,fill:i,shapeRendering:d?"crispEdges":"auto"},u))}var b2t=["children","data","x","y","fill","className","curve","innerRef","defined"];function z9(){return z9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z9.apply(this,arguments)}function _2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ACe(e){var t=e.children,n=e.data,r=n===void 0?[]:n,s=e.x,a=e.y,i=e.fill,l=i===void 0?"transparent":i,c=e.className,u=e.curve,d=e.innerRef,m=e.defined,p=m===void 0?function(){return!0}:m,h=_2t(e,b2t),g=Qu({x:s,y:a,defined:p,curve:u});return t?R.createElement(R.Fragment,null,t({path:g})):R.createElement("path",z9({ref:d,className:V("visx-linepath",c),d:g(r)||"",fill:l,strokeLinecap:"round"},h))}var w2t=["className","angle","radius","defined","curve","data","innerRef","children","fill"];function G9(){return G9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G9.apply(this,arguments)}function C2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function S2t(e){var t=e.className,n=e.angle,r=e.radius,s=e.defined,a=e.curve,i=e.data,l=i===void 0?[]:i,c=e.innerRef,u=e.children,d=e.fill,m=d===void 0?"transparent":d,p=C2t(e,w2t),h=TCe({angle:n,radius:r,defined:s,curve:a});return u?R.createElement(R.Fragment,null,u({path:h})):R.createElement("path",G9({ref:c,className:V("visx-line-radial",t),d:h(l)||"",fill:m},p))}var E2t=["children","x","x0","x1","y","y0","y1","data","defined","className","curve","innerRef"];function q9(){return q9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q9.apply(this,arguments)}function M2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function k2t(e){var t=e.children,n=e.x,r=e.x0,s=e.x1,a=e.y,i=e.y0,l=e.y1,c=e.data,u=c===void 0?[]:c,d=e.defined,m=d===void 0?function(){return!0}:d,p=e.className,h=e.curve,g=e.innerRef,y=M2t(e,E2t),x=eT({x:n,x0:r,x1:s,y:a,y0:i,y1:l,defined:m,curve:h});return t?R.createElement(R.Fragment,null,t({path:x})):R.createElement("path",q9({ref:g,className:V("visx-area",p),d:x(u)||""},y))}var T2t=["x","x0","x1","y","y1","y0","yScale","data","defined","className","curve","innerRef","children"];function K9(){return K9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K9.apply(this,arguments)}function N2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function cy(e){var t=e.x,n=e.x0,r=e.x1,s=e.y,a=e.y1,i=e.y0,l=e.yScale,c=e.data,u=c===void 0?[]:c,d=e.defined,m=d===void 0?function(){return!0}:d,p=e.className,h=e.curve,g=e.innerRef,y=e.children,x=N2t(e,T2t),v=eT({x:t,x0:n,x1:r,defined:m,curve:h});return i==null?v.y0(l.range()[0]):hr(v.y0,i),s&&!a&&hr(v.y1,s),a&&!s&&hr(v.y1,a),y?R.createElement(R.Fragment,null,y({path:v})):R.createElement("path",K9({ref:g,className:V("visx-area-closed",p),d:v(u)||""},x))}var j2t=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function Y9(){return Y9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y9.apply(this,arguments)}function A2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ICe(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,i=e.curve,l=e.defined,c=e.x,u=e.x0,d=e.x1,m=e.y0,p=e.y1,h=e.value,g=e.order,y=e.offset,x=e.color,v=e.children,b=A2t(e,j2t),_=NCe({keys:s,value:h,order:g,offset:y}),w=eT({x:c,x0:u,x1:d,y0:m,y1:p,curve:i,defined:l}),C=_(a);return v?R.createElement(R.Fragment,null,v({stacks:C,path:w,stack:_})):R.createElement(ba,{top:n,left:r},C.map(function(S,E){return R.createElement("path",Y9({className:V("visx-stack",t),key:"stack-"+E+"-"+(S.key||""),d:w(S)||"",fill:x?.(S.key,E)},b))}))}var I2t=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function EM(){return EM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EM.apply(this,arguments)}function R2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function P2t(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,i=e.curve,l=e.defined,c=e.x,u=e.x0,d=e.x1,m=e.y0,p=e.y1,h=e.value,g=e.order,y=e.offset,x=e.color,v=e.children,b=R2t(e,I2t);return R.createElement(ICe,EM({className:t,top:n,left:r,keys:s,data:a,curve:i,defined:l,x:c,x0:u,x1:d,y0:m,y1:p,value:h,order:g,offset:y,color:x},b),v||function(_){var w=_.stacks,C=_.path;return w.map(function(S,E){return R.createElement("path",EM({className:V("visx-area-stack",t),key:"area-stack-"+E+"-"+(S.key||""),d:C(S)||"",fill:x?.(S.key,E)},b))})})}var O2t=["className","innerRef"];function Q9(){return Q9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q9.apply(this,arguments)}function L2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Tx(e){var t=e.className,n=e.innerRef,r=L2t(e,O2t);return R.createElement("rect",Q9({ref:n,className:V("visx-bar",t)},r))}var D2t=["children","className","innerRef","x","y","width","height","radius","all","top","bottom","left","right","topLeft","topRight","bottomLeft","bottomRight"];function X9(){return X9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X9.apply(this,arguments)}function F2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function U2t(e){var t=e.all,n=e.bottom,r=e.bottomLeft,s=e.bottomRight,a=e.height,i=e.left,l=e.radius,c=e.right,u=e.top,d=e.topLeft,m=e.topRight,p=e.width,h=e.x,g=e.y;m=t||u||c||m,s=t||n||c||s,r=t||n||i||r,d=t||u||i||d,l=Math.max(1,Math.min(l,Math.min(p,a)/2));var y=2*l,x=("M"+(h+l)+","+g+" h"+(p-y)+`
 `+(m?"a"+l+","+l+" 0 0 1 "+l+","+l:"h"+l+"v"+l)+`
 v`+(a-y)+`
 `+(s?"a"+l+","+l+" 0 0 1 "+-l+","+l:"v"+l+"h"+-l)+`
 h`+(y-p)+`
 `+(r?"a"+l+","+l+" 0 0 1 "+-l+","+-l:"h"+-l+"v"+-l)+`
 v`+(y-a)+`
 `+(d?"a"+l+","+l+" 0 0 1 "+l+","+-l:"v"+-l+"h"+l)+`
z`).split(`
`).join("");return x}function B2t(e){var t=e.children,n=e.className,r=e.innerRef,s=e.x,a=e.y,i=e.width,l=e.height,c=e.radius,u=e.all,d=u===void 0?!1:u,m=e.top,p=m===void 0?!1:m,h=e.bottom,g=h===void 0?!1:h,y=e.left,x=y===void 0?!1:y,v=e.right,b=v===void 0?!1:v,_=e.topLeft,w=_===void 0?!1:_,C=e.topRight,S=C===void 0?!1:C,E=e.bottomLeft,M=E===void 0?!1:E,k=e.bottomRight,N=k===void 0?!1:k,P=F2t(e,D2t),L=U2t({x:s,y:a,width:i,height:l,radius:c,all:d,top:p,bottom:g,left:x,right:b,topLeft:w,topRight:S,bottomLeft:M,bottomRight:N});return t?R.createElement(R.Fragment,null,t({path:L})):R.createElement("path",X9({ref:r,className:V("visx-bar-rounded",n),d:L},P))}function nT(e){if("bandwidth"in e)return e.bandwidth();var t=e.range(),n=e.domain();return Math.abs(t[t.length-1]-t[0])/n.length}var V2t=["data","className","top","left","x0","x0Scale","x1Scale","yScale","color","keys","height","children"];function Z9(){return Z9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z9.apply(this,arguments)}function $2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function W2t(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x0,i=e.x0Scale,l=e.x1Scale,c=e.yScale,u=e.color,d=e.keys,m=e.height,p=e.children,h=$2t(e,V2t),g=nT(l),y=t.map(function(x,v){return{index:v,x0:i(a(x)),bars:d.map(function(b,_){var w=x[b];return{index:_,key:b,value:w,width:g,x:l(b)||0,y:c(w)||0,color:u(b,_),height:m-(c(w)||0)}})}});return p?R.createElement(R.Fragment,null,p(y)):R.createElement(ba,{className:V("visx-bar-group",n),top:r,left:s},y.map(function(x){return R.createElement(ba,{key:"bar-group-"+x.index+"-"+x.x0,left:x.x0},x.bars.map(function(v){return R.createElement(Tx,Z9({key:"bar-group-bar-"+x.index+"-"+v.index+"-"+v.value+"-"+v.key,x:v.x,y:v.y,width:v.width,height:v.height,fill:v.color},h))}))}))}var H2t=["data","className","top","left","x","y0","y0Scale","y1Scale","xScale","color","keys","width","children"];function J9(){return J9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J9.apply(this,arguments)}function z2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function G2t(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,i=a===void 0?function(){return 0}:a,l=e.y0,c=e.y0Scale,u=e.y1Scale,d=e.xScale,m=e.color,p=e.keys;e.width;var h=e.children,g=z2t(e,H2t),y=nT(u),x=t.map(function(v,b){return{index:b,y0:c(l(v))||0,bars:p.map(function(_,w){var C=v[_];return{index:w,key:_,value:C,height:y,x:i(C)||0,y:u(_)||0,color:m(_,w),width:d(C)||0}})}});return h?R.createElement(R.Fragment,null,h(x)):R.createElement(ba,{className:V("visx-bar-group-horizontal",n),top:r,left:s},x.map(function(v){return R.createElement(ba,{key:"bar-group-"+v.index+"-"+v.y0,top:v.y0},v.bars.map(function(b){return R.createElement(Tx,J9({key:"bar-group-bar-"+v.index+"-"+b.index+"-"+b.value+"-"+b.key,x:b.x,y:b.y,width:b.width,height:b.height,fill:b.color},g))}))}))}function Uo(e){return typeof e?.x=="number"?e?.x:0}function Bo(e){return typeof e?.y=="number"?e?.y:0}function Vo(e){return e?.source}function $o(e){return e?.target}function RCe(e){return e?.[0]}function PCe(e){return e?.[1]}var q2t=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eO.apply(this,arguments)}function K2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Y2t(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,i=e.y0,l=i===void 0?RCe:i,c=e.y1,u=c===void 0?PCe:c,d=e.xScale,m=e.yScale,p=e.color,h=e.keys,g=e.value,y=e.order,x=e.offset,v=e.children,b=K2t(e,q2t),_=l$();h&&_.keys(h),g&&hr(_.value,g),y&&_.order(Z5(y)),x&&_.offset(J5(x));var w=_(t),C=nT(d),S=w.map(function(E,M){var k=E.key;return{index:M,key:k,bars:E.map(function(N,P){var L=(m(l(N))||0)-(m(u(N))||0),O=m(u(N)),A="bandwidth"in d?d(a(N.data)):Math.max((d(a(N.data))||0)-C/2);return{bar:N,key:k,index:P,height:L,width:C,x:A||0,y:O||0,color:p(E.key,P)}})}});return v?R.createElement(R.Fragment,null,v(S)):R.createElement(ba,{className:V("visx-bar-stack",n),top:r,left:s},S.map(function(E){return E.bars.map(function(M){return R.createElement(Tx,eO({key:"bar-stack-"+E.index+"-"+M.index,x:M.x,y:M.y,height:M.height,width:M.width,fill:M.color},b))})}))}var Q2t=["data","className","top","left","y","x0","x1","xScale","yScale","color","keys","value","order","offset","children"];function tO(){return tO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tO.apply(this,arguments)}function X2t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Z2t(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.y,i=e.x0,l=i===void 0?RCe:i,c=e.x1,u=c===void 0?PCe:c,d=e.xScale,m=e.yScale,p=e.color,h=e.keys,g=e.value,y=e.order,x=e.offset,v=e.children,b=X2t(e,Q2t),_=l$();h&&_.keys(h),g&&hr(_.value,g),y&&_.order(Z5(y)),x&&_.offset(J5(x));var w=_(t),C=nT(m),S=w.map(function(E,M){var k=E.key;return{index:M,key:k,bars:E.map(function(N,P){var L=(d(u(N))||0)-(d(l(N))||0),O=d(l(N)),A="bandwidth"in m?m(a(N.data)):Math.max((m(a(N.data))||0)-L/2);return{bar:N,key:k,index:P,height:C,width:L,x:O||0,y:A||0,color:p(E.key,P)}})}});return v?R.createElement(R.Fragment,null,v(S)):R.createElement(ba,{className:V("visx-bar-stack-horizontal",n),top:r,left:s},S.map(function(E){return E.bars.map(function(M){return R.createElement(Tx,tO({key:"bar-stack-"+E.index+"-"+M.index,x:M.x,y:M.y,height:M.height,width:M.width,fill:M.color},b))})}))}var OCe=function(t){return Math.PI/180*t},J2t=["className","children","data","innerRef","path","x","y","source","target"];function nO(){return nO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nO.apply(this,arguments)}function eEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function LCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=T_t();return i.x(r),i.y(s),i.source(t),i.target(n),i(a)}}function tEt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.x,l=i===void 0?Bo:i,c=e.y,u=c===void 0?Uo:c,d=e.source,m=d===void 0?Vo:d,p=e.target,h=p===void 0?$o:p,g=eEt(e,J2t),y=a||LCe({source:m,target:h,x:l,y:u});return n?R.createElement(R.Fragment,null,n({path:y})):R.createElement("path",nO({ref:s,className:V("visx-link visx-link-horizontal-diagonal",t),d:y(r)||""},g))}var nEt=["className","children","data","innerRef","path","x","y","source","target"];function rO(){return rO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rO.apply(this,arguments)}function rEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function DCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=N_t();return i.x(r),i.y(s),i.source(t),i.target(n),i(a)}}function sEt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.x,l=i===void 0?Uo:i,c=e.y,u=c===void 0?Bo:c,d=e.source,m=d===void 0?Vo:d,p=e.target,h=p===void 0?$o:p,g=rEt(e,nEt),y=a||DCe({source:m,target:h,x:l,y:u});return n?R.createElement(R.Fragment,null,n({path:y})):R.createElement("path",rO({ref:s,className:V("visx-link visx-link-vertical-diagonal",t),d:y(r)||""},g))}var aEt=["className","children","data","innerRef","path","angle","radius","source","target"];function sO(){return sO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sO.apply(this,arguments)}function iEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function FCe(e){var t=e.source,n=e.target,r=e.angle,s=e.radius;return function(a){var i=j_t();return i.angle(r),i.radius(s),i.source(t),i.target(n),i(a)}}function oEt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.angle,l=i===void 0?Uo:i,c=e.radius,u=c===void 0?Bo:c,d=e.source,m=d===void 0?Vo:d,p=e.target,h=p===void 0?$o:p,g=iEt(e,aEt),y=a||FCe({source:m,target:h,angle:l,radius:u});return n?R.createElement(R.Fragment,null,n({path:y})):R.createElement("path",sO({ref:s,className:V("visx-link visx-link-radial-diagonal",t),d:y(r)||""},g))}var lEt=["className","children","data","innerRef","path","percent","x","y","source","target"];function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aO.apply(this,arguments)}function cEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function UCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),d=s(l),m=r(c),p=s(c),h=m-u,g=p-d,y=a*(h+g),x=a*(g-h),v=uo();return v.moveTo(u,d),v.bezierCurveTo(u+y,d+x,m+x,p-y,m,p),v.toString()}}function uEt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?Bo:c,d=e.y,m=d===void 0?Uo:d,p=e.source,h=p===void 0?Vo:p,g=e.target,y=g===void 0?$o:g,x=cEt(e,lEt),v=a||UCe({source:h,target:y,x:u,y:m,percent:l});return n?R.createElement(R.Fragment,null,n({path:v})):R.createElement("path",aO({ref:s,className:V("visx-link visx-link-horizontal-curve",t),d:v(r)||""},x))}var dEt=["className","children","data","innerRef","path","percent","x","y","source","target"];function iO(){return iO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iO.apply(this,arguments)}function fEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function BCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),d=s(l),m=r(c),p=s(c),h=m-u,g=p-d,y=a*(h+g),x=a*(g-h),v=uo();return v.moveTo(u,d),v.bezierCurveTo(u+y,d+x,m+x,p-y,m,p),v.toString()}}function mEt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?Uo:c,d=e.y,m=d===void 0?Bo:d,p=e.source,h=p===void 0?Vo:p,g=e.target,y=g===void 0?$o:g,x=fEt(e,dEt),v=a||BCe({source:h,target:y,x:u,y:m,percent:l});return n?R.createElement(R.Fragment,null,n({path:v})):R.createElement("path",iO({ref:s,className:V("visx-link visx-link-vertical-curve",t),d:v(r)||""},x))}var pEt=["className","children","data","innerRef","path","percent","x","y","source","target"];function oO(){return oO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oO.apply(this,arguments)}function hEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function VCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l)-Math.PI/2,d=s(l),m=r(c)-Math.PI/2,p=s(c),h=Math.cos(u),g=Math.sin(u),y=Math.cos(m),x=Math.sin(m),v=d*h,b=d*g,_=p*y,w=p*x,C=_-v,S=w-b,E=a*(C+S),M=a*(S-C),k=uo();return k.moveTo(v,b),k.bezierCurveTo(v+E,b+M,_+M,w-E,_,w),k.toString()}}function gEt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?Uo:c,d=e.y,m=d===void 0?Bo:d,p=e.source,h=p===void 0?Vo:p,g=e.target,y=g===void 0?$o:g,x=hEt(e,pEt),v=a||VCe({source:h,target:y,x:u,y:m,percent:l});return n?R.createElement(R.Fragment,null,n({path:v})):R.createElement("path",oO({ref:s,className:V("visx-link visx-link-radial-curve",t),d:v(r)||""},x))}var yEt=["className","children","innerRef","data","path","x","y","source","target"];function lO(){return lO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lO.apply(this,arguments)}function xEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function $Ce(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),d=r(l),m=s(l),p=uo();return p.moveTo(c,u),p.lineTo(d,m),p.toString()}}function vEt(e){var t=e.className,n=e.children,r=e.innerRef,s=e.data,a=e.path,i=e.x,l=i===void 0?Bo:i,c=e.y,u=c===void 0?Uo:c,d=e.source,m=d===void 0?Vo:d,p=e.target,h=p===void 0?$o:p,g=xEt(e,yEt),y=a||$Ce({source:m,target:h,x:l,y:u});return n?R.createElement(R.Fragment,null,n({path:y})):R.createElement("path",lO({ref:r,className:V("visx-link visx-link-horizontal-line",t),d:y(s)||""},g))}var bEt=["className","innerRef","data","path","x","y","source","target","children"];function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cO.apply(this,arguments)}function _Et(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function WCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),d=r(l),m=s(l),p=uo();return p.moveTo(c,u),p.lineTo(d,m),p.toString()}}function wEt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?Uo:a,l=e.y,c=l===void 0?Bo:l,u=e.source,d=u===void 0?Vo:u,m=e.target,p=m===void 0?$o:m,h=e.children,g=_Et(e,bEt),y=s||WCe({source:d,target:p,x:i,y:c});return h?R.createElement(R.Fragment,null,h({path:y})):R.createElement("path",cO({ref:n,className:V("visx-link visx-link-vertical-line",t),d:y(r)||""},g))}var CEt=["className","innerRef","data","path","x","y","source","target","children"];function uO(){return uO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uO.apply(this,arguments)}function SEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function HCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i)-Math.PI/2,u=s(i),d=r(l)-Math.PI/2,m=s(l),p=Math.cos(c),h=Math.sin(c),g=Math.cos(d),y=Math.sin(d),x=uo();return x.moveTo(u*p,u*h),x.lineTo(m*g,m*y),x.toString()}}function EEt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?Uo:a,l=e.y,c=l===void 0?Bo:l,u=e.source,d=u===void 0?Vo:u,m=e.target,p=m===void 0?$o:m,h=e.children,g=SEt(e,CEt),y=s||HCe({source:d,target:p,x:i,y:c});return h?R.createElement(R.Fragment,null,h({path:y})):R.createElement("path",uO({ref:n,className:V("visx-link visx-link-radial-line",t),d:y(r)||""},g))}var MEt=["className","innerRef","data","path","percent","x","y","source","target","children"];function dO(){return dO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dO.apply(this,arguments)}function kEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function zCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),d=s(l),m=r(c),p=s(c),h=uo();return h.moveTo(u,d),h.lineTo(u+(m-u)*a,d),h.lineTo(u+(m-u)*a,p),h.lineTo(m,p),h.toString()}}function TEt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,i=a===void 0?.5:a,l=e.x,c=l===void 0?Bo:l,u=e.y,d=u===void 0?Uo:u,m=e.source,p=m===void 0?Vo:m,h=e.target,g=h===void 0?$o:h,y=e.children,x=kEt(e,MEt),v=s||zCe({source:p,target:g,x:c,y:d,percent:i});return y?R.createElement(R.Fragment,null,y({path:v})):R.createElement("path",dO({ref:n,className:V("visx-link visx-link-horizontal-step",t),d:v(r)||""},x))}var NEt=["className","innerRef","data","path","percent","x","y","source","target","children"];function fO(){return fO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fO.apply(this,arguments)}function jEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function GCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),d=s(l),m=r(c),p=s(c),h=uo();return h.moveTo(u,d),h.lineTo(u,d+(p-d)*a),h.lineTo(m,d+(p-d)*a),h.lineTo(m,p),h.toString()}}function AEt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,i=a===void 0?.5:a,l=e.x,c=l===void 0?Uo:l,u=e.y,d=u===void 0?Bo:u,m=e.source,p=m===void 0?Vo:m,h=e.target,g=h===void 0?$o:h,y=e.children,x=jEt(e,NEt),v=s||GCe({source:p,target:g,x:c,y:d,percent:i});return y?R.createElement(R.Fragment,null,y({path:v})):R.createElement("path",fO({ref:n,className:V("visx-link visx-link-vertical-step",t),d:v(r)||""},x))}var IEt=["className","innerRef","data","path","x","y","source","target","children"];function mO(){return mO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mO.apply(this,arguments)}function REt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function qCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),d=r(l),m=s(l),p=c-Math.PI/2,h=u,g=d-Math.PI/2,y=m,x=Math.cos(p),v=Math.sin(p),b=Math.cos(g),_=Math.sin(g),w=Math.abs(g-p)>Math.PI?g<=p:g>p;return`
      M`+h*x+","+h*v+`
      A`+h+","+h+",0,0,"+(w?1:0)+","+h*b+","+h*_+`
      L`+y*b+","+y*_+`
    `}}function PEt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?Uo:a,l=e.y,c=l===void 0?Bo:l,u=e.source,d=u===void 0?Vo:u,m=e.target,p=m===void 0?$o:m,h=e.children,g=REt(e,IEt),y=s||qCe({source:d,target:p,x:i,y:c});return h?R.createElement(R.Fragment,null,h({path:y})):R.createElement("path",mO({ref:n,className:V("visx-link visx-link-radial-step",t),d:y(r)||""},g))}var OEt=["sides","size","center","rotate","className","children","innerRef","points"];function pO(){return pO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pO.apply(this,arguments)}function LEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var KCe={x:0,y:0},YCe=function(t){var n=t.sides,r=n===void 0?4:n,s=t.size,a=s===void 0?25:s,i=t.center,l=i===void 0?KCe:i,c=t.rotate,u=c===void 0?0:c,d=t.side,m=360/r*d-u,p=OCe(m);return{x:l.x+a*Math.cos(p),y:l.y+a*Math.sin(p)}},QCe=function(t){var n=t.sides,r=t.size,s=t.center,a=t.rotate;return new Array(n).fill(0).map(function(i,l){return YCe({sides:n,size:r,center:s,rotate:a,side:l})})};function DEt(e){var t=e.sides,n=t===void 0?4:t,r=e.size,s=r===void 0?25:r,a=e.center,i=a===void 0?KCe:a,l=e.rotate,c=l===void 0?0:l,u=e.className,d=e.children,m=e.innerRef,p=e.points,h=LEt(e,OEt),g=p||QCe({sides:n,size:s,center:i,rotate:c}).map(function(y){var x=y.x,v=y.y;return[x,v]});return d?R.createElement(R.Fragment,null,d({points:g})):R.createElement("polygon",pO({ref:m,className:V("visx-polygon",u),points:g.join(" ")},h))}var FEt=["className","innerRef"];function hO(){return hO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hO.apply(this,arguments)}function UEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function BEt(e){var t=e.className,n=e.innerRef,r=UEt(e,FEt);return R.createElement("circle",hO({ref:n,className:V("visx-circle",t)},r))}var Pne="http://www.w3.org/2000/svg";function VEt(e){var t=document.getElementById(e);if(!t){var n=document.createElementNS(Pne,"svg");n.setAttribute("aria-hidden","true"),n.style.opacity="0",n.style.width="0",n.style.height="0",n.style.position="absolute",n.style.top="-100%",n.style.left="-100%",n.style.pointerEvents="none",t=document.createElementNS(Pne,"path"),t.setAttribute("id",e),n.appendChild(t),document.body.appendChild(n)}return t}var $Et="__visx_splitpath_svg_path_measurement_id",One=function(){return!0};function WEt(e){var t=e.path,n=e.pointsInSegments,r=e.segmentation,s=r===void 0?"x":r,a=e.sampleRate,i=a===void 0?1:a;try{var l=VEt($Et);l.setAttribute("d",t);var c=l.getTotalLength(),u=n.length,d=n.map(function(){return[]});if(s==="x"||s==="y")for(var m=n.map(function(O){var A;return(A=O.find(function(j){return typeof j[s]=="number"}))==null?void 0:A[s]}),p=l.getPointAtLength(0),h=l.getPointAtLength(c),g=h[s]>p[s],y=g?m.map(function(O){return typeof O>"u"?One:function(A){return A>=O}}):m.map(function(O){return typeof O>"u"?One:function(A){return A<=O}}),x=0,v=0;v<=c;v+=i){for(var b=l.getPointAtLength(v),_=b[s];x<u-1&&y[x+1](_);)x+=1;d[x].push(b)}else{var w=n.map(function(O){return O.length}),C=w.reduce(function(O,A){return O+A},0),S=c/Math.max(1,C-1),E=w.slice(0,u-1);E.unshift(0);for(var M=2;M<u;M+=1)E[M]+=E[M-1];for(var k=0;k<u;k+=1)E[k]*=S;for(var N=0,P=0;P<=c;P+=i){for(var L=l.getPointAtLength(P);N<u-1&&P>=E[N+1];)N+=1;d[N].push(L)}}return d}catch{return[]}}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gO.apply(this,arguments)}var HEt=function(t){return t.x||0},zEt=function(t){return t.y||0};function XCe(e){var t=e.children,n=e.className,r=e.curve,s=e.defined,a=e.segmentation,i=e.sampleRate,l=e.segments,c=e.x,u=e.y,d=e.styles,m=f.useMemo(function(){var g=typeof c=="number"||typeof c>"u"?function(){return c}:c,y=typeof u=="number"||typeof u>"u"?function(){return u}:u;return l.map(function(x){return x.map(function(v,b){return{x:g(v,b,x),y:y(v,b,x)}})})},[c,u,l]),p=f.useMemo(function(){var g=Qu({x:c,y:u,defined:s,curve:r});return g(l.flat())||""},[c,u,s,r,l]),h=f.useMemo(function(){return WEt({path:p,segmentation:a,pointsInSegments:m,sampleRate:i})},[p,a,m,i]);return R.createElement("g",null,h.map(function(g,y){return t?R.createElement(R.Fragment,{key:y},t({index:y,segment:g,styles:d[y]||d[y%d.length]})):R.createElement(ACe,gO({key:y,className:n,data:g,x:HEt,y:zEt},d[y]||d[y%d.length]))}))}XCe.propTypes={segments:Ue.arrayOf(Ue.array).isRequired,styles:Ue.array.isRequired,children:Ue.func,className:Ue.string};const GEt=Object.freeze(Object.defineProperty({__proto__:null,Arc:jCe,Area:k2t,AreaClosed:cy,AreaStack:P2t,Bar:Tx,BarGroup:W2t,BarGroupHorizontal:G2t,BarRounded:B2t,BarStack:Y2t,BarStackHorizontal:Z2t,Circle:BEt,Line:tT,LinePath:ACe,LineRadial:S2t,LinkHorizontal:tEt,LinkHorizontalCurve:uEt,LinkHorizontalLine:vEt,LinkHorizontalStep:TEt,LinkRadial:oEt,LinkRadialCurve:gEt,LinkRadialLine:EEt,LinkRadialStep:PEt,LinkVertical:sEt,LinkVerticalCurve:mEt,LinkVerticalLine:wEt,LinkVerticalStep:AEt,Pie:y2t,Polygon:DEt,STACK_OFFSETS:SM,STACK_OFFSET_NAMES:c2t,STACK_ORDERS:CM,STACK_ORDER_NAMES:l2t,SplitLinePath:XCe,Stack:ICe,arc:E$,area:eT,degreesToRadians:OCe,getPoint:YCe,getPoints:QCe,line:Qu,pathHorizontalCurve:UCe,pathHorizontalDiagonal:LCe,pathHorizontalLine:$Ce,pathHorizontalStep:zCe,pathRadialCurve:VCe,pathRadialDiagonal:FCe,pathRadialLine:HCe,pathRadialStep:qCe,pathVerticalCurve:BCe,pathVerticalDiagonal:DCe,pathVerticalLine:WCe,pathVerticalStep:GCe,pie:kCe,radialLine:TCe,stack:NCe,stackOffset:J5,stackOrder:Z5},Symbol.toStringTag,{value:"Module"})),Lne="pplx://www.pplx.com";function M$({href:e,inApp:t,queryParams:n}){if(!t||e==null)return e;const r=new URL(e,Lne);return n?.forEach((s,a)=>{r.searchParams.get(a)||r.searchParams.set(a,s??"")}),r.pathname.startsWith("/app")||(r.pathname.startsWith("/")?r.pathname=`/app${r.pathname}`:r.pathname=`/app/${r.pathname}`),r.href.replace(Lne,"")}const Xu=R.memo(({children:e,href:t,...n})=>{const{inApp:r}=wl(),s=Ut();return o.jsx(Ye,{...n,href:M$({href:t,inApp:r,queryParams:s}),children:e})});Xu.displayName="CanonicalLink";const qEt=R.memo(e=>e.href?o.jsx(Xu,{...e}):e.children);qEt.displayName="CanonicalLinkMaybe";const KEt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"finance-india",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},YEt="pplx.finance-country",rT={US:"US",IN:"IN"},ZCe=e=>rT[e?.toUpperCase()],QEt=e=>ZCe(e)??rT.US,JCe=Yt("FinanceIndexContext",{country:rT.US,setCountry:()=>{},enabled:!1}),eSe=()=>{const e=f.useContext(JCe);if(!e)throw new Error("useFinanceCountry must be used within a FinanceCountryProvider");return e},XEt={US:ee({defaultMessage:"US Markets",id:"7T1wl9MB1D"}),IN:ee({defaultMessage:"India Markets",id:"ty1NgqpFg/"})},imn=e=>XEt[e]??ee({defaultMessage:"Markets",id:"sITCHuqY3F"}),omn=e=>{switch(e){case"IN":return"Asia/Kolkata";case"US":default:return"America/New_York"}},lmn=({children:e})=>{const t=Tp(),[n,r]=O_(YEt,null),{session:s}=Nt(),{variation:a}=KEt(!0,{userEmail:s?.user?.email??""}),i=ZCe(n)??QEt(t??null);return o.jsx(JCe.Provider,{value:{country:a?i:rT.US,setCountry:r,enabled:a},children:e})},k$=R.memo(({value:e,format:t,suffix:n,animated:r=!0})=>{const{locale:s}=Z();return r?o.jsx(No,{value:e,format:t,suffix:n}):o.jsx("span",{children:Intl.NumberFormat(s,t).format(e)})});k$.displayName="FinanceNumberFlow";const ZEt=e=>e===0?"":e>0?"+":"-",JEt=(e,t)=>e===0||!t?null:e>0?xa:i7e,eMt=e=>e===0?"light":e>0?"positive":"negative",Jm=R.memo(({change:e,variant:t="small",includeIcon:n=!1,className:r,animated:s=!0,background:a=!0,mono:i=!0,format:l={style:"percent",minimumFractionDigits:0,maximumFractionDigits:e/100>1?0:2}})=>{const c=JEt(e,n);return o.jsxs(F,{variant:t,color:eMt(e),className:V("flex shrink-0 grow-0 items-center justify-center gap-[0.1em] rounded text-center font-mono",{"bg-positive/10":e>0&&a,"bg-negative/10":e<0&&a,"bg-subtle":e===0&&a,"px-[0.6em] py-[0.15em]":a,"!pl-[0.3em]":a&&n&&e!==0},r),children:[c?o.jsx(le,{icon:c,className:V("inline-flex size-[1.2em]",{"!mt-px":i})}):o.jsx("span",{className:i?"font-mono":"",children:ZEt(e)}),o.jsx("span",{className:V("whitespace-nowrap",{"font-mono":i}),children:o.jsx(k$,{value:Math.abs(e)/100,format:l,animated:s})})]})});Jm.displayName="FinancePriceChange";var T$=lw(),Jt=e=>ow(e,T$),N$=lw();Jt.write=e=>ow(e,N$);var sT=lw();Jt.onStart=e=>ow(e,sT);var j$=lw();Jt.onFrame=e=>ow(e,j$);var A$=lw();Jt.onFinish=e=>ow(e,A$);var bg=[];Jt.setTimeout=(e,t)=>{const n=Jt.now()+t,r=()=>{const a=bg.findIndex(i=>i.cancel==r);~a&&bg.splice(a,1),Cd-=~a?1:0},s={time:n,handler:e,cancel:r};return bg.splice(tSe(n),0,s),Cd+=1,nSe(),s};var tSe=e=>~(~bg.findIndex(t=>t.time>e)||~bg.length);Jt.cancel=e=>{sT.delete(e),j$.delete(e),A$.delete(e),T$.delete(e),N$.delete(e)};Jt.sync=e=>{yO=!0,Jt.batchedUpdates(e),yO=!1};Jt.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,Jt.onStart(n)}return r.handler=e,r.cancel=()=>{sT.delete(n),t=null},r};var I$=typeof window<"u"?window.requestAnimationFrame:()=>{};Jt.use=e=>I$=e;Jt.now=typeof performance<"u"?()=>performance.now():Date.now;Jt.batchedUpdates=e=>e();Jt.catch=console.error;Jt.frameLoop="always";Jt.advance=()=>{Jt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):sSe()};var wd=-1,Cd=0,yO=!1;function ow(e,t){yO?(t.delete(e),e(0)):(t.add(e),nSe())}function nSe(){wd<0&&(wd=0,Jt.frameLoop!=="demand"&&I$(rSe))}function tMt(){wd=-1}function rSe(){~wd&&(I$(rSe),Jt.batchedUpdates(sSe))}function sSe(){const e=wd;wd=Jt.now();const t=tSe(wd);if(t&&(aSe(bg.splice(0,t),n=>n.handler()),Cd-=t),!Cd){tMt();return}sT.flush(),T$.flush(e?Math.min(64,wd-e):16.667),j$.flush(),N$.flush(),A$.flush()}function lw(){let e=new Set,t=e;return{add(n){Cd+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Cd-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Cd-=t.size,aSe(t,r=>r(n)&&e.add(r)),Cd+=e.size,t=e)}}}function aSe(e,t){e.forEach(n=>{try{t(n)}catch(r){Jt.catch(r)}})}var nMt=Object.defineProperty,rMt=(e,t)=>{for(var n in t)nMt(e,n,{get:t[n],enumerable:!0})},xl={};rMt(xl,{assign:()=>aMt,colors:()=>Pd,createStringInterpolator:()=>P$,skipAnimation:()=>oSe,to:()=>iSe,willAdvance:()=>O$});function xO(){}var sMt=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),ze={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Jc(e,t){if(ze.arr(e)){if(!ze.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Gt=(e,t)=>e.forEach(t);function Cc(e,t,n){if(ze.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var $a=e=>ze.und(e)?[]:ze.arr(e)?e:[e];function Gv(e,t){if(e.size){const n=Array.from(e);e.clear(),Gt(n,t)}}var iv=(e,...t)=>Gv(e,n=>n(...t)),R$=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),P$,iSe,Pd=null,oSe=!1,O$=xO,aMt=e=>{e.to&&(iSe=e.to),e.now&&(Jt.now=e.now),e.colors!==void 0&&(Pd=e.colors),e.skipAnimation!=null&&(oSe=e.skipAnimation),e.createStringInterpolator&&(P$=e.createStringInterpolator),e.requestAnimationFrame&&Jt.use(e.requestAnimationFrame),e.batchedUpdates&&(Jt.batchedUpdates=e.batchedUpdates),e.willAdvance&&(O$=e.willAdvance),e.frameLoop&&(Jt.frameLoop=e.frameLoop)},qv=new Set,So=[],y6=[],MM=0,aT={get idle(){return!qv.size&&!So.length},start(e){MM>e.priority?(qv.add(e),Jt.onStart(iMt)):(lSe(e),Jt(vO))},advance:vO,sort(e){if(MM)Jt.onFrame(()=>aT.sort(e));else{const t=So.indexOf(e);~t&&(So.splice(t,1),cSe(e))}},clear(){So=[],qv.clear()}};function iMt(){qv.forEach(lSe),qv.clear(),Jt(vO)}function lSe(e){So.includes(e)||cSe(e)}function cSe(e){So.splice(oMt(So,t=>t.priority>e.priority),0,e)}function vO(e){const t=y6;for(let n=0;n<So.length;n++){const r=So[n];MM=r.priority,r.idle||(O$(r),r.advance(e),r.idle||t.push(r))}return MM=0,y6=So,y6.length=0,So=t,So.length>0}function oMt(e,t){const n=e.findIndex(t);return n<0?e.length:n}var lMt={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},rl="[-+]?\\d*\\.?\\d+",kM=rl+"%";function iT(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var cMt=new RegExp("rgb"+iT(rl,rl,rl)),uMt=new RegExp("rgba"+iT(rl,rl,rl,rl)),dMt=new RegExp("hsl"+iT(rl,kM,kM)),fMt=new RegExp("hsla"+iT(rl,kM,kM,rl)),mMt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,pMt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hMt=/^#([0-9a-fA-F]{6})$/,gMt=/^#([0-9a-fA-F]{8})$/;function yMt(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=hMt.exec(e))?parseInt(t[1]+"ff",16)>>>0:Pd&&Pd[e]!==void 0?Pd[e]:(t=cMt.exec(e))?(hh(t[1])<<24|hh(t[2])<<16|hh(t[3])<<8|255)>>>0:(t=uMt.exec(e))?(hh(t[1])<<24|hh(t[2])<<16|hh(t[3])<<8|Une(t[4]))>>>0:(t=mMt.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=gMt.exec(e))?parseInt(t[1],16)>>>0:(t=pMt.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=dMt.exec(e))?(Dne(Fne(t[1]),mS(t[2]),mS(t[3]))|255)>>>0:(t=fMt.exec(e))?(Dne(Fne(t[1]),mS(t[2]),mS(t[3]))|Une(t[4]))>>>0:null}function x6(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Dne(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,a=x6(s,r,e+1/3),i=x6(s,r,e),l=x6(s,r,e-1/3);return Math.round(a*255)<<24|Math.round(i*255)<<16|Math.round(l*255)<<8}function hh(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Fne(e){return(parseFloat(e)%360+360)%360/360}function Une(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function mS(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Bne(e){let t=yMt(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,a=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${a})`}var vb=(e,t,n)=>{if(ze.fun(e))return e;if(ze.arr(e))return vb({range:e,output:t,extrapolate:n});if(ze.str(e.output[0]))return P$(e);const r=e,s=r.output,a=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const d=vMt(u,a);return xMt(u,a[d],a[d+1],s[d],s[d+1],c,i,l,r.map)}};function xMt(e,t,n,r,s,a,i,l,c){let u=c?c(e):e;if(u<t){if(i==="identity")return u;i==="clamp"&&(u=t)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=a(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function vMt(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var bMt={linear:e=>e},bb=Symbol.for("FluidValue.get"),uy=Symbol.for("FluidValue.observers"),wo=e=>!!(e&&e[bb]),oi=e=>e&&e[bb]?e[bb]():e,Vne=e=>e[uy]||null;function _Mt(e,t){e.eventObserved?e.eventObserved(t):e(t)}function _b(e,t){const n=e[uy];n&&n.forEach(r=>{_Mt(r,t)})}var uSe=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");wMt(this,e)}},wMt=(e,t)=>dSe(e,bb,t);function Nx(e,t){if(e[bb]){let n=e[uy];n||dSe(e,uy,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function wb(e,t){const n=e[uy];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[uy]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var dSe=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),P2=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,CMt=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,$ne=new RegExp(`(${P2.source})(%|[a-z]+)`,"i"),SMt=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,oT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,fSe=e=>{const[t,n]=EMt(e);if(!t||R$())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&oT.test(n))return fSe(n);if(n)return n}return e},EMt=e=>{const t=oT.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},v6,MMt=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,mSe=e=>{v6||(v6=Pd?new RegExp(`(${Object.keys(Pd).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(a=>oi(a).replace(oT,fSe).replace(CMt,Bne).replace(v6,Bne)),n=t.map(a=>a.match(P2).map(Number)),s=n[0].map((a,i)=>n.map(l=>{if(!(i in l))throw Error('The arity of each "output" value must be equal');return l[i]})).map(a=>vb({...e,output:a}));return a=>{const i=!$ne.test(t[0])&&t.find(c=>$ne.test(c))?.replace(P2,"");let l=0;return t[0].replace(P2,()=>`${s[l++](a)}${i||""}`).replace(SMt,MMt)}},L$="react-spring: ",pSe=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${L$}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},kMt=pSe(console.warn);function TMt(){kMt(`${L$}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var NMt=pSe(console.warn);function jMt(){NMt(`${L$}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function lT(e){return ze.str(e)&&(e[0]=="#"||/\d/.test(e)||!R$()&&oT.test(e)||e in(Pd||{}))}var mm=R$()?f.useEffect:f.useLayoutEffect,AMt=()=>{const e=f.useRef(!1);return mm(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function D$(){const e=f.useState()[1],t=AMt();return()=>{t.current&&e(Math.random())}}function IMt(e,t){const[n]=f.useState(()=>({inputs:t,result:e()})),r=f.useRef(),s=r.current;let a=s;return a?t&&a.inputs&&RMt(t,a.inputs)||(a={inputs:t,result:e()}):a=n,f.useEffect(()=>{r.current=a,s==n&&(n.inputs=n.result=void 0)},[a]),a.result}function RMt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var F$=e=>f.useEffect(e,PMt),PMt=[];function bO(e){const t=f.useRef();return f.useEffect(()=>{t.current=e}),t.current}var Cb=Symbol.for("Animated:node"),OMt=e=>!!e&&e[Cb]===e,Hl=e=>e&&e[Cb],U$=(e,t)=>sMt(e,Cb,t),cT=e=>e&&e[Cb]&&e[Cb].getPayload(),hSe=class{constructor(){U$(this,this)}getPayload(){return this.payload||[]}},cw=class extends hSe{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,ze.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new cw(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return ze.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,ze.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Sb=class extends cw{constructor(e){super(0),this._string=null,this._toString=vb({output:[e,e]})}static create(e){return new Sb(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(ze.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=vb({output:[this.getValue(),e]})),this._value=0,super.reset()}},TM={dependencies:null},uT=class extends hSe{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Cc(this.source,(n,r)=>{OMt(n)?t[r]=n.getValue(e):wo(n)?t[r]=oi(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Gt(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Cc(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){TM.dependencies&&wo(e)&&TM.dependencies.add(e);const t=cT(e);t&&Gt(t,n=>this.add(n))}},gSe=class extends uT{constructor(e){super(e)}static create(e){return new gSe(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(LMt)),!0)}};function LMt(e){return(lT(e)?Sb:cw).create(e)}function _O(e){const t=Hl(e);return t?t.constructor:ze.arr(e)?gSe:lT(e)?Sb:cw}var Wne=(e,t)=>{const n=!ze.fun(e)||e.prototype&&e.prototype.isReactComponent;return f.forwardRef((r,s)=>{const a=f.useRef(null),i=n&&f.useCallback(g=>{a.current=UMt(s,g)},[s]),[l,c]=FMt(r,t),u=D$(),d=()=>{const g=a.current;if(n&&!g)return;(g?t.applyAnimatedValues(g,l.getValue(!0)):!1)===!1&&u()},m=new DMt(d,c),p=f.useRef();mm(()=>(p.current=m,Gt(c,g=>Nx(g,m)),()=>{p.current&&(Gt(p.current.deps,g=>wb(g,p.current)),Jt.cancel(p.current.update))})),f.useEffect(d,[]),F$(()=>()=>{const g=p.current;Gt(g.deps,y=>wb(y,g))});const h=t.getComponentProps(l.getValue());return f.createElement(e,{...h,ref:i})})},DMt=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Jt.write(this.update)}};function FMt(e,t){const n=new Set;return TM.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new uT(e),TM.dependencies=null,[e,n]}function UMt(e,t){return e&&(ze.fun(e)?e(t):e.current=t),t}var Hne=Symbol.for("AnimatedComponent"),BMt=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new uT(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},a=i=>{const l=zne(i)||"Anonymous";return ze.str(i)?i=a[i]||(a[i]=Wne(i,s)):i=i[Hne]||(i[Hne]=Wne(i,s)),i.displayName=`Animated(${l})`,i};return Cc(e,(i,l)=>{ze.arr(e)&&(l=zne(i)),a[l]=a(i)}),{animated:a}},zne=e=>ze.str(e)?e:e&&ze.str(e.displayName)?e.displayName:ze.fun(e)&&e.name||null;function li(e,...t){return ze.fun(e)?e(...t):e}var Kv=(e,t)=>e===!0||!!(t&&e&&(ze.fun(e)?e(t):$a(e).includes(t))),ySe=(e,t)=>ze.obj(e)?t&&e[t]:e,xSe=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,VMt=e=>e,dT=(e,t=VMt)=>{let n=$Mt;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const a=t(e[s],s);ze.und(a)||(r[s]=a)}return r},$Mt=["config","onProps","onStart","onChange","onPause","onResume","onRest"],WMt={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function HMt(e){const t={};let n=0;if(Cc(e,(r,s)=>{WMt[s]||(t[s]=r,n++)}),n)return t}function B$(e){const t=HMt(e);if(t){const n={to:t};return Cc(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function Eb(e){return e=oi(e),ze.arr(e)?e.map(Eb):lT(e)?xl.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function vSe(e){for(const t in e)return!0;return!1}function wO(e){return ze.fun(e)||ze.arr(e)&&ze.obj(e[0])}function CO(e,t){e.ref?.delete(e),t?.delete(e)}function bSe(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var zMt={default:{tension:170,friction:26}},SO={...zMt.default,mass:1,damping:1,easing:bMt.linear,clamp:!1},GMt=class{constructor(){this.velocity=0,Object.assign(this,SO)}};function qMt(e,t,n){n&&(n={...n},Gne(n,t),t={...n,...t}),Gne(e,t),Object.assign(e,t);for(const i in SO)e[i]==null&&(e[i]=SO[i]);let{frequency:r,damping:s}=e;const{mass:a}=e;return ze.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*a,e.friction=4*Math.PI*s*a/r),e}function Gne(e,t){if(!ze.und(t.decay))e.duration=void 0;else{const n=!ze.und(t.tension)||!ze.und(t.friction);(n||!ze.und(t.frequency)||!ze.und(t.damping)||!ze.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var qne=[],KMt=class{constructor(){this.changed=!1,this.values=qne,this.toValues=null,this.fromValues=qne,this.config=new GMt,this.immediate=!1}};function _Se(e,{key:t,props:n,defaultProps:r,state:s,actions:a}){return new Promise((i,l)=>{let c,u,d=Kv(n.cancel??r?.cancel,t);if(d)h();else{ze.und(n.pause)||(s.paused=Kv(n.pause,t));let g=r?.pause;g!==!0&&(g=s.paused||Kv(g,t)),c=li(n.delay||0,t),g?(s.resumeQueue.add(p),a.pause()):(a.resume(),p())}function m(){s.resumeQueue.add(p),s.timeouts.delete(u),u.cancel(),c=u.time-Jt.now()}function p(){c>0&&!xl.skipAnimation?(s.delayed=!0,u=Jt.setTimeout(h,c),s.pauseQueue.add(m),s.timeouts.add(u)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(m),s.timeouts.delete(u),e<=(s.cancelId||0)&&(d=!0);try{a.start({...n,callId:e,cancel:d},i)}catch(g){l(g)}}})}var V$=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?_g(e.get()):t.every(n=>n.noop)?wSe(e.get()):Zo(e.get(),t.every(n=>n.finished)),wSe=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Zo=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),_g=e=>({value:e,cancelled:!0,finished:!1});function CSe(e,t,n,r){const{callId:s,parentId:a,onRest:i}=t,{asyncTo:l,promise:c}=n;return!a&&e===l&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=dT(t,(x,v)=>v==="onRest"?void 0:x);let d,m;const p=new Promise((x,v)=>(d=x,m=v)),h=x=>{const v=s<=(n.cancelId||0)&&_g(r)||s!==n.asyncId&&Zo(r,!1);if(v)throw x.result=v,m(x),x},g=(x,v)=>{const b=new Kne,_=new Yne;return(async()=>{if(xl.skipAnimation)throw Mb(n),_.result=Zo(r,!1),m(_),_;h(b);const w=ze.obj(x)?{...x}:{...v,to:x};w.parentId=s,Cc(u,(S,E)=>{ze.und(w[E])&&(w[E]=S)});const C=await r.start(w);return h(b),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),C})()};let y;if(xl.skipAnimation)return Mb(n),Zo(r,!1);try{let x;ze.arr(e)?x=(async v=>{for(const b of v)await g(b)})(e):x=Promise.resolve(e(g,r.stop.bind(r))),await Promise.all([x.then(d),p]),y=Zo(r.get(),!0,!1)}catch(x){if(x instanceof Kne)y=x.result;else if(x instanceof Yne)y=x.result;else throw x}finally{s==n.asyncId&&(n.asyncId=a,n.asyncTo=a?l:void 0,n.promise=a?c:void 0)}return ze.fun(i)&&Jt.batchedUpdates(()=>{i(y,r,r.item)}),y})()}function Mb(e,t){Gv(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Kne=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Yne=class extends Error{constructor(){super("SkipAnimationSignal")}},EO=e=>e instanceof $$,YMt=1,$$=class extends uSe{constructor(){super(...arguments),this.id=YMt++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Hl(this);return e&&e.getValue()}to(...e){return xl.to(this,e)}interpolate(...e){return TMt(),xl.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){_b(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||aT.sort(this),_b(this,{type:"priority",parent:this,priority:e})}},ep=Symbol.for("SpringPhase"),SSe=1,ESe=2,MSe=4,b6=e=>(e[ep]&SSe)>0,id=e=>(e[ep]&ESe)>0,A0=e=>(e[ep]&MSe)>0,Qne=(e,t)=>t?e[ep]|=ESe|SSe:e[ep]&=-3,Xne=(e,t)=>t?e[ep]|=MSe:e[ep]&=-5,QMt=class extends $${constructor(e,t){if(super(),this.animation=new KMt,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ze.und(e)||!ze.und(t)){const n=ze.obj(e)?{...e}:{...t,from:e};ze.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(id(this)||this._state.asyncTo)||A0(this)}get goal(){return oi(this.animation.to)}get velocity(){const e=Hl(this);return e instanceof cw?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return b6(this)}get isAnimating(){return id(this)}get isPaused(){return A0(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:a}=r,i=cT(r.to);!i&&wo(r.to)&&(s=$a(oi(r.to))),r.values.forEach((u,d)=>{if(u.done)return;const m=u.constructor==Sb?1:i?i[d].lastPosition:s[d];let p=r.immediate,h=m;if(!p){if(h=u.lastPosition,a.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const y=r.fromValues[d],x=u.v0!=null?u.v0:u.v0=ze.arr(a.velocity)?a.velocity[d]:a.velocity;let v;const b=a.precision||(y==m?.005:Math.min(1,Math.abs(m-y)*.001));if(ze.und(a.duration))if(a.decay){const _=a.decay===!0?.998:a.decay,w=Math.exp(-(1-_)*g);h=y+x/(1-_)*(1-w),p=Math.abs(u.lastPosition-h)<=b,v=x*w}else{v=u.lastVelocity==null?x:u.lastVelocity;const _=a.restVelocity||b/10,w=a.clamp?0:a.bounce,C=!ze.und(w),S=y==m?u.v0>0:y<m;let E,M=!1;const k=1,N=Math.ceil(e/k);for(let P=0;P<N&&(E=Math.abs(v)>_,!(!E&&(p=Math.abs(m-h)<=b,p)));++P){C&&(M=h==m||h>m==S,M&&(v=-v*w,h=m));const L=-a.tension*1e-6*(h-m),O=-a.friction*.001*v,A=(L+O)/a.mass;v=v+A*k,h=h+v*k}}else{let _=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,u.durationProgress>0&&(u.elapsedTime=a.duration*u.durationProgress,g=u.elapsedTime+=e)),_=(a.progress||0)+g/this._memoizedDuration,_=_>1?1:_<0?0:_,u.durationProgress=_),h=y+a.easing(_)*(m-y),v=(h-u.lastPosition)/e,p=_==1}u.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),p=!0)}i&&!i[d].done&&(p=!1),p?u.done=!0:t=!1,u.setValue(h,a.round)&&(n=!0)});const l=Hl(this),c=l.getValue();if(t){const u=oi(r.to);(c!==u||n)&&!a.decay?(l.setValue(u),this._onChange(u)):n&&a.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return Jt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(id(this)){const{to:e,config:t}=this.animation;Jt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return ze.und(e)?(n=this.queue||[],this.queue=[]):n=[ze.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>V$(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Mb(this._state,e&&this._lastCallId),Jt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=ze.obj(n)?n[t]:n,(n==null||wO(n))&&(n=void 0),r=ze.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return b6(this)||(e.reverse&&([n,r]=[r,n]),r=oi(r),ze.und(r)?Hl(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,dT(e,(i,l)=>/^on/.test(l)?ySe(i,n):i)),Jne(this,e,"onProps"),R0(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return _Se(++this._lastCallId,{key:n,props:e,defaultProps:r,state:a,actions:{pause:()=>{A0(this)||(Xne(this,!0),iv(a.pauseQueue),R0(this,"onPause",Zo(this,I0(this,this.animation.to)),this))},resume:()=>{A0(this)&&(Xne(this,!1),id(this)&&this._resume(),iv(a.resumeQueue),R0(this,"onResume",Zo(this,I0(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(i=>{if(e.loop&&i.finished&&!(t&&i.noop)){const l=kSe(e);if(l)return this._update(l,!0)}return i})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(_g(this));const r=!ze.und(e.to),s=!ze.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(_g(this));const{key:a,defaultProps:i,animation:l}=this,{to:c,from:u}=l;let{to:d=c,from:m=u}=e;s&&!r&&(!t.default||ze.und(d))&&(d=m),t.reverse&&([d,m]=[m,d]);const p=!Jc(m,u);p&&(l.from=m),m=oi(m);const h=!Jc(d,c);h&&this._focus(d);const g=wO(t.to),{config:y}=l,{decay:x,velocity:v}=y;(r||s)&&(y.velocity=0),t.config&&!g&&qMt(y,li(t.config,a),t.config!==i.config?li(i.config,a):void 0);let b=Hl(this);if(!b||ze.und(d))return n(Zo(this,!0));const _=ze.und(t.reset)?s&&!t.default:!ze.und(m)&&Kv(t.reset,a),w=_?m:this.get(),C=Eb(d),S=ze.num(C)||ze.arr(C)||lT(C),E=!g&&(!S||Kv(i.immediate||t.immediate,a));if(h){const P=_O(d);if(P!==b.constructor)if(E)b=this._set(C);else throw Error(`Cannot animate between ${b.constructor.name} and ${P.name}, as the "to" prop suggests`)}const M=b.constructor;let k=wo(d),N=!1;if(!k){const P=_||!b6(this)&&p;(h||P)&&(N=Jc(Eb(w),C),k=!N),(!Jc(l.immediate,E)&&!E||!Jc(y.decay,x)||!Jc(y.velocity,v))&&(k=!0)}if(N&&id(this)&&(l.changed&&!_?k=!0:k||this._stop(c)),!g&&((k||wo(c))&&(l.values=b.getPayload(),l.toValues=wo(d)?null:M==Sb?[1]:$a(C)),l.immediate!=E&&(l.immediate=E,!E&&!_&&this._set(c)),k)){const{onRest:P}=l;Gt(ZMt,O=>Jne(this,t,O));const L=Zo(this,I0(this,c));iv(this._pendingCalls,L),this._pendingCalls.add(n),l.changed&&Jt.batchedUpdates(()=>{l.changed=!_,P?.(L,this),_?li(i.onRest,L):l.onStart?.(L,this)})}_&&this._set(w),g?n(CSe(t.to,t,this._state,this)):k?this._start():id(this)&&!h?this._pendingCalls.add(n):n(wSe(w))}_focus(e){const t=this.animation;e!==t.to&&(Vne(this)&&this._detach(),t.to=e,Vne(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;wo(t)&&(Nx(t,this),EO(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;wo(e)&&wb(e,this)}_set(e,t=!0){const n=oi(e);if(!ze.und(n)){const r=Hl(this);if(!r||!Jc(n,r.getValue())){const s=_O(n);!r||r.constructor!=s?U$(this,s.create(n)):r.setValue(n),r&&Jt.batchedUpdates(()=>{this._onChange(n,t)})}}return Hl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,R0(this,"onStart",Zo(this,I0(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),li(this.animation.onChange,e,this)),li(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Hl(this).reset(oi(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),id(this)||(Qne(this,!0),A0(this)||this._resume())}_resume(){xl.skipAnimation?this.finish():aT.start(this)}_stop(e,t){if(id(this)){Qne(this,!1);const n=this.animation;Gt(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),_b(this,{type:"idle",parent:this});const r=t?_g(this.get()):Zo(this.get(),I0(this,e??n.to));iv(this._pendingCalls,r),n.changed&&(n.changed=!1,R0(this,"onRest",r,this))}}};function I0(e,t){const n=Eb(t),r=Eb(e.get());return Jc(r,n)}function kSe(e,t=e.loop,n=e.to){const r=li(t);if(r){const s=r!==!0&&B$(r),a=(s||e).reverse,i=!s||s.reset;return kb({...e,loop:t,default:!1,pause:void 0,to:!a||wO(n)?n:void 0,from:i?e.from:void 0,reset:i,...s})}}function kb(e){const{to:t,from:n}=e=B$(e),r=new Set;return ze.obj(t)&&Zne(t,r),ze.obj(n)&&Zne(n,r),e.keys=r.size?Array.from(r):null,e}function XMt(e){const t=kb(e);return ze.und(t.default)&&(t.default=dT(t)),t}function Zne(e,t){Cc(e,(n,r)=>n!=null&&t.add(r))}var ZMt=["onStart","onRest","onChange","onPause","onResume"];function Jne(e,t,n){e.animation[n]=t[n]!==xSe(t,n)?ySe(t[n],e.key):void 0}function R0(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var JMt=["onStart","onChange","onRest"],ekt=1,TSe=class{constructor(e,t){this.id=ekt++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];ze.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(kb(e)),this}start(e){let{queue:t}=this;return e?t=$a(e).map(kb):this.queue=[],this._flush?this._flush(this,t):(RSe(this,t),MO(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Gt($a(t),r=>n[r].stop(!!e))}else Mb(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(ze.und(e))this.start({pause:!0});else{const t=this.springs;Gt($a(e),n=>t[n].pause())}return this}resume(e){if(ze.und(e))this.start({pause:!1});else{const t=this.springs;Gt($a(e),n=>t[n].resume())}return this}each(e){Cc(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Gv(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const a=!r&&this._started,i=s||a&&n.size?this.get():null;s&&t.size&&Gv(t,([l,c])=>{c.value=i,l(c,this,this._item)}),a&&(this._started=!1,Gv(n,([l,c])=>{c.value=i,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Jt.onFrame(this._onFrame)}};function MO(e,t){return Promise.all(t.map(n=>NSe(e,n))).then(n=>V$(e,n))}async function NSe(e,t,n){const{keys:r,to:s,from:a,loop:i,onRest:l,onResolve:c}=t,u=ze.obj(t.default)&&t.default;i&&(t.loop=!1),s===!1&&(t.to=null),a===!1&&(t.from=null);const d=ze.arr(s)||ze.fun(s)?s:void 0;d?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):Gt(JMt,y=>{const x=t[y];if(ze.fun(x)){const v=e._events[y];t[y]=({finished:b,cancelled:_})=>{const w=v.get(x);w?(b||(w.finished=!1),_&&(w.cancelled=!0)):v.set(x,{value:null,finished:b||!1,cancelled:_||!1})},u&&(u[y]=t[y])}});const m=e._state;t.pause===!m.paused?(m.paused=t.pause,iv(t.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(t.pause=!0);const p=(r||Object.keys(e.springs)).map(y=>e.springs[y].start(t)),h=t.cancel===!0||xSe(t,"cancel")===!0;(d||h&&m.asyncId)&&p.push(_Se(++e._lastAsyncId,{props:t,state:m,actions:{pause:xO,resume:xO,start(y,x){h?(Mb(m,e._lastAsyncId),x(_g(e))):(y.onRest=l,x(CSe(d,y,m,e)))}}})),m.paused&&await new Promise(y=>{m.resumeQueue.add(y)});const g=V$(e,await Promise.all(p));if(i&&g.finished&&!(n&&g.noop)){const y=kSe(t,i,s);if(y)return RSe(e,[y]),NSe(e,y,!0)}return c&&Jt.batchedUpdates(()=>c(g,e,e.item)),g}function kO(e,t){const n={...e.springs};return t&&Gt($a(t),r=>{ze.und(r.keys)&&(r=kb(r)),ze.obj(r.to)||(r={...r,to:void 0}),ISe(n,r,s=>ASe(s))}),jSe(e,n),n}function jSe(e,t){Cc(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,Nx(n,e))})}function ASe(e,t){const n=new QMt;return n.key=e,t&&Nx(n,t),n}function ISe(e,t,n){t.keys&&Gt(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function RSe(e,t){Gt(t,n=>{ISe(e.springs,n,r=>ASe(r,e))})}var uw=({children:e,...t})=>{const n=f.useContext(NM),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=IMt(()=>({pause:r,immediate:s}),[r,s]);const{Provider:a}=NM;return f.createElement(a,{value:t},e)},NM=tkt(uw,{});uw.Provider=NM.Provider;uw.Consumer=NM.Consumer;function tkt(e,t){return Object.assign(e,f.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var PSe=()=>{const e=[],t=function(r){jMt();const s=[];return Gt(e,(a,i)=>{if(ze.und(r))s.push(a.start());else{const l=n(r,a,i);l&&s.push(a.start(l))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Gt(e,r=>r.pause(...arguments)),this},t.resume=function(){return Gt(e,r=>r.resume(...arguments)),this},t.set=function(r){Gt(e,(s,a)=>{const i=ze.fun(r)?r(a,s):r;i&&s.set(i)})},t.start=function(r){const s=[];return Gt(e,(a,i)=>{if(ze.und(r))s.push(a.start());else{const l=this._getProps(r,a,i);l&&s.push(a.start(l))}}),s},t.stop=function(){return Gt(e,r=>r.stop(...arguments)),this},t.update=function(r){return Gt(e,(s,a)=>s.update(this._getProps(r,s,a))),this};const n=function(r,s,a){return ze.fun(r)?r(a,s):r};return t._getProps=n,t};function nkt(e,t,n){const r=ze.fun(t)&&t;r&&!n&&(n=[]);const s=f.useMemo(()=>r||arguments.length==3?PSe():void 0,[]),a=f.useRef(0),i=D$(),l=f.useMemo(()=>({ctrls:[],queue:[],flush(v,b){const _=kO(v,b);return a.current>0&&!l.queue.length&&!Object.keys(_).some(C=>!v.springs[C])?MO(v,b):new Promise(C=>{jSe(v,_),l.queue.push(()=>{C(MO(v,b))}),i()})}}),[]),c=f.useRef([...l.ctrls]),u=[],d=bO(e)||0;f.useMemo(()=>{Gt(c.current.slice(e,d),v=>{CO(v,s),v.stop(!0)}),c.current.length=e,m(d,e)},[e]),f.useMemo(()=>{m(0,Math.min(d,e))},n);function m(v,b){for(let _=v;_<b;_++){const w=c.current[_]||(c.current[_]=new TSe(null,l.flush)),C=r?r(_,w):t[_];C&&(u[_]=XMt(C))}}const p=c.current.map((v,b)=>kO(v,u[b])),h=f.useContext(uw),g=bO(h),y=h!==g&&vSe(h);mm(()=>{a.current++,l.ctrls=c.current;const{queue:v}=l;v.length&&(l.queue=[],Gt(v,b=>b())),Gt(c.current,(b,_)=>{s?.add(b),y&&b.start({default:h});const w=u[_];w&&(bSe(b,w.ref),b.ref?b.queue.push(w):b.start(w))})}),F$(()=>()=>{Gt(l.ctrls,v=>v.stop(!0))});const x=p.map(v=>({...v}));return s?[x,s]:x}function W$(e,t){const n=ze.fun(e),[[r],s]=nkt(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}function H$(e,t,n){const r=ze.fun(t)&&t,{reset:s,sort:a,trail:i=0,expires:l=!0,exitBeforeEnter:c=!1,onDestroyed:u,ref:d,config:m}=r?r():t,p=f.useMemo(()=>r||arguments.length==3?PSe():void 0,[]),h=$a(e),g=[],y=f.useRef(null),x=s?null:y.current;mm(()=>{y.current=g}),F$(()=>(Gt(g,A=>{p?.add(A.ctrl),A.ctrl.ref=p}),()=>{Gt(y.current,A=>{A.expired&&clearTimeout(A.expirationId),CO(A.ctrl,p),A.ctrl.stop(!0)})}));const v=skt(h,r?r():t,x),b=s&&y.current||[];mm(()=>Gt(b,({ctrl:A,item:j,key:T})=>{CO(A,p),li(u,j,T)}));const _=[];if(x&&Gt(x,(A,j)=>{A.expired?(clearTimeout(A.expirationId),b.push(A)):(j=_[j]=v.indexOf(A.key),~j&&(g[j]=A))}),Gt(h,(A,j)=>{g[j]||(g[j]={key:v[j],item:A,phase:"mount",ctrl:new TSe},g[j].ctrl.item=A)}),_.length){let A=-1;const{leave:j}=r?r():t;Gt(_,(T,I)=>{const U=x[I];~T?(A=g.indexOf(U),g[A]={...U,item:h[T]}):j&&g.splice(++A,0,U)})}ze.fun(a)&&g.sort((A,j)=>a(A.item,j.item));let w=-i;const C=D$(),S=dT(t),E=new Map,M=f.useRef(new Map),k=f.useRef(!1);Gt(g,(A,j)=>{const T=A.key,I=A.phase,U=r?r():t;let B,D;const W=li(U.delay||0,T);if(I=="mount")B=U.enter,D="enter";else{const q=v.indexOf(T)<0;if(I!="leave")if(q)B=U.leave,D="leave";else if(B=U.update)D="update";else return;else if(!q)B=U.enter,D="enter";else return}if(B=li(B,A.item,j),B=ze.obj(B)?B$(B):{to:B},!B.config){const q=m||S.config;B.config=li(q,A.item,j,D)}w+=i;const z={...S,delay:W+w,ref:d,immediate:U.immediate,reset:!1,...B};if(D=="enter"&&ze.und(z.from)){const q=r?r():t,Y=ze.und(q.initial)||x?q.from:q.initial;z.from=li(Y,A.item,j)}const{onResolve:$}=z;z.onResolve=q=>{li($,q);const Y=y.current,G=Y.find(J=>J.key===T);if(G&&!(q.cancelled&&G.phase!="update")&&G.ctrl.idle){const J=Y.every(K=>K.ctrl.idle);if(G.phase=="leave"){const K=li(l,G.item);if(K!==!1){const te=K===!0?0:K;if(G.expired=!0,!J&&te>0){te<=2147483647&&(G.expirationId=setTimeout(C,te));return}}}J&&Y.some(K=>K.expired)&&(M.current.delete(G),c&&(k.current=!0),C())}};const X=kO(A.ctrl,z);D==="leave"&&c?M.current.set(A,{phase:D,springs:X,payload:z}):E.set(A,{phase:D,springs:X,payload:z})});const N=f.useContext(uw),P=bO(N),L=N!==P&&vSe(N);mm(()=>{L&&Gt(g,A=>{A.ctrl.start({default:N})})},[N]),Gt(E,(A,j)=>{if(M.current.size){const T=g.findIndex(I=>I.key===j.key);g.splice(T,1)}}),mm(()=>{Gt(M.current.size?M.current:E,({phase:A,payload:j},T)=>{const{ctrl:I}=T;T.phase=A,p?.add(I),L&&A=="enter"&&I.start({default:N}),j&&(bSe(I,j.ref),(I.ref||p)&&!k.current?I.update(j):(I.start(j),k.current&&(k.current=!1)))})},s?void 0:n);const O=A=>f.createElement(f.Fragment,null,g.map((j,T)=>{const{springs:I}=E.get(j)||j.ctrl,U=A({...I},j.item,j,T);return U&&U.type?f.createElement(U.type,{...U.props,key:ze.str(j.key)||ze.num(j.key)?j.key:j.ctrl.id,ref:U.ref}):U}));return p?[O,p]:O}var rkt=1;function skt(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(a=>{const i=r&&r.find(l=>l.item===a&&l.phase!=="leave"&&!s.has(l));return i?(s.add(i),i.key):rkt++})}return ze.und(n)?e:ze.fun(n)?e.map(n):$a(n)}var OSe=class extends $${constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=vb(...t);const n=this._get(),r=_O(n);U$(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Jc(t,n)||(Hl(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&ere(this._active)&&_6(this)}_get(){const e=ze.arr(this.source)?this.source.map(oi):$a(oi(this.source));return this.calc(...e)}_start(){this.idle&&!ere(this._active)&&(this.idle=!1,Gt(cT(this),e=>{e.done=!1}),xl.skipAnimation?(Jt.batchedUpdates(()=>this.advance()),_6(this)):aT.start(this))}_attach(){let e=1;Gt($a(this.source),t=>{wo(t)&&Nx(t,this),EO(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Gt($a(this.source),e=>{wo(e)&&wb(e,this)}),this._active.clear(),_6(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=$a(this.source).reduce((t,n)=>Math.max(t,(EO(n)?n.priority:0)+1),0))}};function akt(e){return e.idle!==!1}function ere(e){return!e.size||Array.from(e).every(akt)}function _6(e){e.idle||(e.idle=!0,Gt(cT(e),t=>{t.done=!0}),_b(e,{type:"idle",parent:e}))}var ikt=(e,...t)=>new OSe(e,t);xl.assign({createStringInterpolator:mSe,to:(e,t)=>new OSe(e,t)});var LSe=/^--/;function okt(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!LSe.test(e)&&!(Yv.hasOwnProperty(e)&&Yv[e])?t+"px":(""+t).trim()}var tre={};function lkt(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:a,scrollTop:i,scrollLeft:l,viewBox:c,...u}=t,d=Object.values(u),m=Object.keys(u).map(p=>n||e.hasAttribute(p)?p:tre[p]||(tre[p]=p.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));a!==void 0&&(e.textContent=a);for(const p in s)if(s.hasOwnProperty(p)){const h=okt(p,s[p]);LSe.test(p)?e.style.setProperty(p,h):e.style[p]=h}m.forEach((p,h)=>{e.setAttribute(p,d[h])}),r!==void 0&&(e.className=r),i!==void 0&&(e.scrollTop=i),l!==void 0&&(e.scrollLeft=l),c!==void 0&&e.setAttribute("viewBox",c)}var Yv={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ckt=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),ukt=["Webkit","Ms","Moz","O"];Yv=Object.keys(Yv).reduce((e,t)=>(ukt.forEach(n=>e[ckt(n,t)]=e[t]),e),Yv);var dkt=/^(matrix|translate|scale|rotate|skew)/,fkt=/^(translate)/,mkt=/^(rotate|skew)/,w6=(e,t)=>ze.num(e)&&e!==0?e+t:e,O2=(e,t)=>ze.arr(e)?e.every(n=>O2(n,t)):ze.num(e)?e===t:parseFloat(e)===t,pkt=class extends uT{constructor({x:e,y:t,z:n,...r}){const s=[],a=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),a.push(i=>[`translate3d(${i.map(l=>w6(l,"px")).join(",")})`,O2(i,0)])),Cc(r,(i,l)=>{if(l==="transform")s.push([i||""]),a.push(c=>[c,c===""]);else if(dkt.test(l)){if(delete r[l],ze.und(i))return;const c=fkt.test(l)?"px":mkt.test(l)?"deg":"";s.push($a(i)),a.push(l==="rotate3d"?([u,d,m,p])=>[`rotate3d(${u},${d},${m},${w6(p,c)})`,O2(p,0)]:u=>[`${l}(${u.map(d=>w6(d,c)).join(",")})`,O2(u,l.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new hkt(s,a)),super(r)}},hkt=class extends uSe{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Gt(this.inputs,(n,r)=>{const s=oi(n[0]),[a,i]=this.transforms[r](ze.arr(s)?s:n.map(oi));e+=" "+a,t=t&&i}),t?"none":e}observerAdded(e){e==1&&Gt(this.inputs,t=>Gt(t,n=>wo(n)&&Nx(n,this)))}observerRemoved(e){e==0&&Gt(this.inputs,t=>Gt(t,n=>wo(n)&&wb(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),_b(this,e)}},gkt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];xl.assign({batchedUpdates:Qs.unstable_batchedUpdates,createStringInterpolator:mSe,colors:lMt});var ykt=BMt(gkt,{applyAnimatedValues:lkt,createAnimatedStyle:e=>new pkt(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),vu=ykt.animated;function nre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function xkt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nre(Object(n),!0).forEach(function(r){vkt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qv(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qv=function(t){return typeof t}:Qv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(e)}function vkt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jM(){return jM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jM.apply(this,arguments)}function bkt(e,t){if(e){if(typeof e=="string")return rre(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rre(e,t)}}function rre(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DSe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bkt(e))||t){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,i=!1,l;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return a=c.done,c},e:function(c){i=!0,l=c},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(i)throw l}}}}function _kt(e,t){var n=[],r=[];function s(a,i){if(a.length===1)n.push(a[0]),r.push(a[0]);else{for(var l=Array(a.length-1),c=0;c<l.length;c++)c===0&&n.push(a[0]),c===l.length-1&&r.push(a[c+1]),l[c]=[(1-i)*a[c][0]+i*a[c+1][0],(1-i)*a[c][1]+i*a[c+1][1]];s(l,i)}}return e.length&&s(e,t),{left:n,right:r.reverse()}}function wkt(e){var t={};return e.length===4&&(t.x2=e[2][0],t.y2=e[2][1]),e.length>=3&&(t.x1=e[1][0],t.y1=e[1][1]),t.x=e[e.length-1][0],t.y=e[e.length-1][1],e.length===4?t.type="C":e.length===3?t.type="Q":t.type="L",t}function Ckt(e,t){t=t||2;for(var n=[],r=e,s=1/t,a=0;a<t-1;a++){var i=s/(1-s*a),l=_kt(r,i);n.push(l.left),r=l.right}return n.push(r),n}function Skt(e,t,n){var r=[[e.x,e.y]];return t.x1!=null&&r.push([t.x1,t.y1]),t.x2!=null&&r.push([t.x2,t.y2]),r.push([t.x,t.y]),Ckt(r,n).map(wkt)}var Ekt=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,wg={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(wg).forEach(function(e){wg[e.toLowerCase()]=wg[e]});function TO(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t;return n}function Mkt(e){return"".concat(e.type).concat(wg[e.type].map(function(t){return e[t]}).join(","))}function kkt(e,t){var n={x1:"x",y1:"y",x2:"x",y2:"y"},r=["xAxisRotation","largeArcFlag","sweepFlag"];if(e.type!==t.type&&t.type.toUpperCase()!=="M"){var s={};Object.keys(t).forEach(function(a){var i=t[a],l=e[a];l===void 0&&(r.includes(a)?l=i:(l===void 0&&n[a]&&(l=e[n[a]]),l===void 0&&(l=0))),s[a]=l}),s.type=t.type,e=s}return e}function Tkt(e,t,n){var r=[];if(t.type==="L"||t.type==="Q"||t.type==="C")r=r.concat(Skt(e,t,n));else{var s=jM({},e);s.type==="M"&&(s.type="L"),r=r.concat(TO(n-1).map(function(){return s})),r.push(t)}return r}function sre(e,t,n){var r=e.length-1,s=t.length-1,a=r/s,i=TO(s).reduce(function(c,u,d){var m=Math.floor(a*d);if(n&&m<e.length-1&&n(e[m],e[m+1])){var p=a*d%1<.5;c[m]&&(p?m>0?m-=1:m<e.length-1&&(m+=1):m<e.length-1?m+=1:m>0&&(m-=1))}return c[m]=(c[m]||0)+1,c},[]),l=i.reduce(function(c,u,d){if(d===e.length-1){var m=TO(u,jM({},e[e.length-1]));return m[0].type==="M"&&m.forEach(function(p){p.type="L"}),c.concat(m)}return c.concat(Tkt(e[d],e[d+1],u))},[]);return l.unshift(e[0]),l}function are(e){for(var t=(e||"").match(Ekt)||[],n=[],r,s,a=0;a<t.length;++a)if(r=wg[t[a]],r){s={type:t[a]};for(var i=0;i<r.length;++i)s[r[i]]=+t[a+i+1];a+=r.length,n.push(s)}return n}function Nkt(e,t,n){var r=e==null?[]:e.slice(),s=t==null?[]:t.slice(),a=Qv(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},i=a.excludeSegment,l=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return[]};var c=(r.length===0||r[r.length-1].type==="Z")&&(s.length===0||s[s.length-1].type==="Z");r.length>0&&r[r.length-1].type==="Z"&&r.pop(),s.length>0&&s[s.length-1].type==="Z"&&s.pop(),r.length?s.length||s.push(r[0]):r.push(s[0]);var u=Math.abs(s.length-r.length);u!==0&&(s.length>r.length?r=sre(r,s,i):s.length<r.length&&(s=sre(s,r,i))),r=r.map(function(m,p){return kkt(m,s[p])});var d=r.map(function(m){return xkt({},m)});return c&&(d.push({type:"Z"}),r.push({type:"Z"})),function(p){if(p===1&&l)return t??[];if(p===0)return r;for(var h=0;h<d.length;++h){var g=r[h],y=s[h],x=d[h],v=DSe(wg[x.type]),b;try{for(v.s();!(b=v.n()).done;){var _=b.value;x[_]=(1-p)*g[_]+p*y[_],(_==="largeArcFlag"||_==="sweepFlag")&&(x[_]=Math.round(x[_]))}}catch(w){v.e(w)}finally{v.f()}}return d}}function jkt(e,t,n){var r=are(e),s=are(t),a=Qv(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},i=a.excludeSegment,l=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return""};var c=Nkt(r,s,{excludeSegment:i,snapEndsToInput:l});return function(d){if(d===1&&l)return t??"";var m=c(d),p="",h=DSe(m),g;try{for(h.s();!(g=h.n()).done;){var y=g.value;p+=Mkt(y)}}catch(x){h.e(x)}finally{h.f()}return p}}const FSe=I_t,dw="geometricPrecision",USe="pointer-events-none overflow-visible font-sans",fT=200,BSe="relative isolate select-none touch-none touch-pan-down",Cg={duration:.2,delay:fT/1e3,ease:fi},VSe={opacity:0,transition:{duration:0,delay:0}},$Se=4,WSe=3,ma={blue:"oklch(var(--positive-color))",red:"oklch(var(--negative-color))",gray:"oklch(var(--foreground-quieter-color))",black:"oklch(var(--foreground-color))",transparent:"#00000000"},z$=16,HSe=-5,Akt={fill:ma.gray,fontSize:12,dy:`${HSe}px`,textAnchor:"start",fontFamily:"var(--font-family-sans)"},NO=e=>V("transition-opacity duration-500",{"opacity-0":e}),Ikt=({tick:e,history:t,yScale:n,xScale:r,xOffset:s,yOffset:a,yHeight:i,yWidth:l,yGet:c,baseline:u})=>{if(!t||t.length===0)return!1;const m=n(e)+a,p=m-i;if(Number.isFinite(u)){const g=n(u);if(g>=p&&g<=m)return!0}const h=s+l;for(let g=0;g<t.length;g++){const y=t[g],x=r(_s(y));if(!y||!x||x<s)continue;if(x>h)break;const v=n(c(y));if(v>=p&&v<=m)return!0}return!1},zSe=({tick:e,history:t,yScale:n,xScale:r,yGet:s,baseline:a})=>({...Akt,opacity:Ikt({tick:e,history:t,yScale:n,xScale:r,xOffset:z$+5,yOffset:HSe,yHeight:16,yWidth:25,yGet:s,baseline:a})?.4:1}),GSe={fill:ma.gray,fontSize:12,textAnchor:"start",dx:"6px",fontFamily:"var(--font-family-sans)"},Sd={POSITIVE:"positive",NEGATIVE:"negative",NEUTRAL:"neutral",TRANSPARENT:"transparent"},Tb={[Sd.POSITIVE]:"blue",[Sd.NEGATIVE]:"red",[Sd.NEUTRAL]:"gray",[Sd.TRANSPARENT]:"transparent"},au=e=>e.date,qSe=e=>new Date(e),_s=e=>qSe(e.date),Rkt=e=>{const t=e.match(/(\d{2}):(\d{2})/);return t?t[0]:void 0},ire=(e,t)=>t?e.replace(/T\d{2}:\d{2}/,`T${t}`):e,Pkt={lunch_break:{valence:Sd.TRANSPARENT,backgroundColor:Tb[Sd.TRANSPARENT],backgroundOpacity:0,lineOpacity:0},pre_market:{backgroundOpacity:.5},after_hours:{backgroundOpacity:.5}},ore={lunch_break:ee({defaultMessage:"Lunch Break",id:"tHK2Aeii37"}),pre_market:ee({defaultMessage:"Pre-Market",id:"8y93h1dAbn"}),after_hours:ee({defaultMessage:"After-Hours",id:"19IROpkyrs"})},Ph=(e,t)=>{const n=Rkt(t);if(n)return e?.find(r=>{const s=r.open,a=r.close;return s<=a?n>=s&&n<=a:n>=s||n<=a})},Okt=e=>({backgroundColor:Tb[e],backgroundOpacity:1,lineColor:Tb[e],lineOpacity:1,valence:e}),Lkt={"1d":{0:0,15:5,30:10},"5d":null,"1m":null,"6m":null,"3m":null,ytd:null,"1y":null,"5y":{0:10},max:null};function KSe(e){if(!Array.isArray(e)||e.length<22)return new Set;const r=[];let s=0,a=0;const i=[],l=u=>{i.push(u);const d=u-s;s+=d/i.length,a+=d*(u-s)},c=()=>{const u=i.shift(),d=u-s;s-=d/i.length,a-=d*(u-s)};for(let u=1;u<=20;u++){const d=Math.log(e[u].close/e[u-1].close);l(d)}for(let u=21;u<e.length;u++){const d=Math.log(e[u].close/e[u-1].close),m=i.length>1?a/i.length:0,p=Math.sqrt(m),h=p>0&&Number.isFinite(p),g=h?Math.abs((d-s)/p):0;h&&g>20&&r.push(u),c(),l(d)}return new Set(r.map(u=>e[u].date))}const Dkt=(e,t=0)=>{if(t===0||!e?.length)return e;const n=[...e];let r=0;for(let s=0;s<e.length;s++){const a=e[s].close;if(r+=a,s>=t){const l=e[s-t].close;r-=l}const i=s<t?s+1:t;s===0||s===e.length-1||(n[s]={...e[s],close:r/i})}return n},G$=(e,t)=>{const n=Lkt[t];if(!n)return e;const r=Object.keys(n).reduce((s,a)=>Math.abs(e.length-+s)<Math.abs(e.length-+a)?+s:+a,0);return Dkt(e,n[r]??0)},YSe=(e,t=!0)=>{const n=f.useRef(e),r=f.useRef(e),s=!t||!n.current||!r.current,[a,i]=W$(()=>({t:0,immediate:s,easing:Jd}));return f.useEffect(()=>{r.current!==e&&(n.current=r.current,r.current=e,t&&i.start({from:{t:0},to:{t:1},config:{duration:fT}}))},[e,t,i]),t?a.t.to(l=>n.current===r.current?e:jkt(n.current,r.current)(l)):e},Fkt=e=>e?.includes?.("00:00:00"),QSe=(e,t,n)=>{if(!e)return null;const r=new Date(e),s=!Fkt(e);return r.toLocaleString(t,{month:"short",day:"numeric",timeZone:n,minute:s?"2-digit":void 0,hour:s?"numeric":void 0,year:s?void 0:"numeric",timeZoneName:s?"short":void 0})},q$=(e,t,n)=>new Intl.NumberFormat(n,{style:t?"currency":"decimal",currency:t??void 0,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),Ukt=$5(e=>_s(e)).left,Bkt=(e,t)=>{if("invert"in e)return e.invert(t);const n=e.step(),r=e.domain(),s=e.range()[0],a=Math.round((t-s)/n);return r[Math.max(0,Math.min(r.length-1,a))]};function K$(e,t,n){const r=Math.max(0,e),s=Ukt(n,Bkt(t,r),0);return{d:n[s]??n[n.length-1],index:s,x:r}}const dy=R.memo(({countryCode:e,square:t,...n})=>{const r=e??"NEU",s=t?`square/${r}`:r;return o.jsx("img",{src:`https://r2cdn.perplexity.ai/images/country_flags/${s}.svg`,alt:e??"NEU",...n})});dy.displayName="CountryFlag";const Vkt={COMMODITY:"",FOREX:"FX",INDEX:"INDEX",CRYPTO:"CRYPTO"},tp=R.memo(({price:e,currency:t,sign:n,variant:r="small",animated:s=!0,className:a})=>{const i=f.useMemo(()=>({style:t?"currency":"decimal",currency:t||void 0,minimumFractionDigits:e<1e3?2:0,maximumFractionDigits:2,signDisplay:n?"exceptZero":void 0}),[t,e,n]);return o.jsx(F,{variant:r,color:"light",className:a,children:o.jsx(No,{value:e,format:i,animated:s})})});tp.displayName="Price";const XSe=({name:e,variant:t="smallBold"})=>e?o.jsx(F,{variant:t,className:"min-w-0 truncate break-words",as:"span",children:e}):null,mT=({symbol:e,exchange:t,country:n,gap:r="xs"})=>{const s=f.useMemo(()=>e&&decodeURIComponent(e).split(".")[0],[e]),a=f.useMemo(()=>t&&(Vkt[t]??t),[t]);if(!s)return null;if(!a)return s;const i=n||null;return o.jsxs(Ru,{className:V("whitespace-nowrap",{"gap-xs":r==="xs","gap-sm":r==="sm"}),children:[o.jsx(Vr,{id:"symbol",children:s}),o.jsx(Vr,{id:"exchange",children:a}),i&&o.jsx(Vr,{id:"country",children:o.jsxs("div",{className:"relative flex w-[1.2em] shrink-0 items-center",children:[o.jsx(dy,{countryCode:i}),o.jsx("div",{className:"absolute inset-0 border border-black/10 dark:border-0"})]})})]})},ZSe=({symbol:e,children:t,className:n})=>{const{inApp:r}=wl(),s=Ut(),a=M$({href:`/finance/${e}`,inApp:r,queryParams:s}),i=Ca(),{scrollContainerRef:l}=Za(),c=f.useCallback(()=>{i&&l?.current?.scrollTo({behavior:"smooth",top:0})},[i,l]);return o.jsx(Ye,{href:a,className:V("py-sm px-md hover:bg-subtler block border-b duration-150 last:border-b-0",n),onClick:c,children:t})},JSe=e=>{const{trackEvent:t}=je(),n=f.useCallback((r,s)=>{switch(e){case"discover":t("discover home widget clicked",{widgetType:r,destinationUrl:s});break;case"market":case"crypto":t("finance homepage widget clicked",{pageType:e,widgetType:r,destinationUrl:s});break}},[t,e]);return f.useMemo(()=>({onClick:n}),[n])},cmn=({enter:e,exit:t})=>{const{trackEvent:n}=je(),r=f.useRef(performance.now()),s=f.useRef(!0);f.useEffect(()=>{n(e,{});const a=()=>{s.current&&n(t,{timeOnPageMs:Math.ceil(performance.now()-r.current)})},i=()=>{document.hidden?(a(),s.current=!1):(r.current=performance.now(),s.current=!0)};return document.addEventListener("visibilitychange",i),window.addEventListener("beforeunload",a),()=>{document.removeEventListener("visibilitychange",i),window.removeEventListener("beforeunload",a),a()}},[n,e,t])},$kt=(e,t,n)=>{const r=()=>{t.removeEventListener("scrollend",r),n?.()};n&&t.addEventListener("scrollend",r),t.scrollTo({top:e,behavior:"smooth"})},Wkt=60;function AM(e){const t=e.scrollHeight,n=e.clientHeight,r=e.scrollTop;return Math.abs(t-n-r)<=1}const Hkt=()=>{const{scrollContainerRef:e}=Za(),t=f.useCallback(()=>{if(!e?.current)return;const n=e.current,r=n.querySelector("#coin50-section");if(!r)return;const s=r.getBoundingClientRect().top,a=n.scrollTop,i=s+a-Wkt;$kt(i,n)},[e]);return f.useMemo(()=>({scrollToCoin50Section:t}),[t])},e2e="#1FB8CD",t2e="#B4413C",zkt=[e2e,"#FFC185",t2e,"#ECEBD5","#5D878F","#DB4545","#D2BA4C","#964325"],n2e="#20808D",r2e="#A84B2F",Gkt=[n2e,r2e,"#1B474D","#BCE2E7","#944454","#FFC553","#848456","#6E522B"],qkt={tickColor:"#2F3031",axisColor:"#2F3031",textColor:"#aaaaaa",colorSchema:zkt},Kkt={tickColor:"#D9D9D0",axisColor:"#D9D9D0",textColor:"#A0A0A0",colorSchema:Gkt},Pp=(e="sm")=>{const[t,n]=f.useState(e);f.useEffect(()=>{const c=()=>{window.innerWidth>=1536?n("2xl"):window.innerWidth>=1280?n("xl"):window.innerWidth>=1024?n("lg"):window.innerWidth>=768?n("md"):window.innerWidth>=640&&n("sm")};return window.addEventListener("resize",c),c(),()=>window.removeEventListener("resize",c)},[]);const r=!0,s=["md","lg","xl","2xl"].includes(t),a=["lg","xl","2xl"].includes(t),i=["xl","2xl"].includes(t),l=["2xl"].includes(t);return f.useMemo(()=>({breakpoint:t,isSmallScreen:r,isMediumScreen:s,isLargeScreen:a,isXLargeScreen:i,is2XLargeScreen:l}),[t,l,a,s,r,i])},Xv=e=>new Date(e.date),C6=e=>e.close,Ykt={blue:e2e,red:t2e},Qkt={blue:n2e,red:r2e},Y$=R.memo(({history:e,symbol:t,valence:n,width:r=150,height:s=25,strokeWidth:a=1.2,className:i})=>{const{colorScheme:l}=Jr(),c=f.useMemo(()=>{const x=[...e],v=KSe(x),b=x.filter(_=>!v.has(_.date));return G$(b,"1d")},[e]),u=f.useMemo(()=>{const x=l==="dark"?Ykt:Qkt;return n==="positive"?x.blue:x.red},[l,n]),d=f.useMemo(()=>Rp({domain:gi(c,Xv),range:[0,r]}),[c,r]),m=f.useMemo(()=>ef({domain:gi(c,C6),range:[s,0]}),[c,s]),p=f.useMemo(()=>Qu().x(x=>d(Xv(x))??0).y(x=>m(C6(x))??0).curve(A_t),[d,m]),h=f.useMemo(()=>p(c),[p,c]),g=f.useCallback(x=>d(Xv(x))??0,[d]),y=f.useCallback(x=>m(C6(x))??0,[m]);return o.jsxs("svg",{height:s,width:r,viewBox:`0 0 ${r} ${s}`,className:V("overflow-visible",i),children:[o.jsx("path",{d:h,stroke:u,strokeWidth:a,fill:"none",shapeRendering:"geometricPrecision"}),o.jsx(V5,{from:`${u}22`,to:`${u}00`,id:`ticker-line-${t}`}),o.jsx(cy,{data:c,x:g,y,yScale:m,fill:`url(#ticker-line-${t})`})]})});Y$.displayName="TickerLine";const Xkt=({ticker:e,showExchange:t})=>{const{onClick:n}=JSe("crypto"),{scrollToCoin50Section:r}=Hkt(),s=()=>{n("top_indices","scroll"),r()};return o.jsx("div",{className:"min-w-0 shrink-0 cursor-pointer",onClick:s,children:o.jsx(pT,{symbol:e.symbol,currency:e.currency,name:e.name,price:e.price,change:e.change,history:e.history,showExchange:t})})},Zkt=({ticker:e,marketType:t,showExchange:n})=>{const{onClick:r}=JSe(t),s=f.useCallback(()=>{r("top_indices",`/finance/${e.symbol}`)},[r,e.symbol]);return o.jsx(Xu,{href:`/finance/${e.symbol}`,className:"min-w-0 shrink-0",onClick:s,children:o.jsx(pT,{currency:e.currency,symbol:e.symbol,exchange:e.exchange,name:e.name,price:e.price,change:e.change,history:e.history,showExchange:n})})},Jkt=e=>{const{country:t}=eSe();return We({queryKey:cbt(e,"1d",t),queryFn:()=>ubt({groupId:e,historyPeriod:"1d",country:t}),refetchInterval:1e3*30})},e3t=R.memo(({groupId:e,className:t})=>{const{data:n,isLoading:r}=Jkt(e);return o.jsx(s2e,{groupId:e,data:n,isLoading:r,className:t})});e3t.displayName="KeyTickersWithQuery";const s2e=R.memo(({groupId:e,className:t,data:n,isLoading:r,showExchange:s=!0})=>(Sp("mini-graphs",{skip:!n}),o.jsxs("div",{className:t,children:[n?.map(a=>o.jsx(H,{children:a.symbol==="COIN50USD"?o.jsx(Xkt,{ticker:a,showExchange:s}):o.jsx(Zkt,{ticker:a,marketType:e,showExchange:s})},`markets-${a.symbol}`)),r&&[1,2,3,4].map(a=>o.jsx(a2e,{},a))]})));s2e.displayName="KeyTickers";const pT=R.memo(({symbol:e,name:t,currency:n,price:r,change:s,history:a,exchange:i,showExchange:l})=>{const c=s/(r-s)*100,u=t,{isXLargeScreen:d}=Pp(),{isMobileStyle:m}=Ce(),p=m&&r>1e6?r/1e6:r,h=m&&r>1e6?"M":"",g=f.useMemo(()=>a?.slice().sort((v,b)=>Xv(v).getTime()-Xv(b).getTime()),[a]),y=s<0?"negative":"positive",x=f.useMemo(()=>({style:n?"currency":"decimal",currency:n??void 0,trailingZeroDisplay:"stripIfInteger"}),[n]);return o.jsxs(un,{className:"py-sm gap-xs hover:shadow-subtle flex select-none flex-col transition-all duration-200 hover:scale-[1.02]",children:[o.jsxs("div",{className:"px-sm min-w-0",children:[o.jsxs("div",{className:"gap-xs flex min-w-0 items-center justify-between",children:[o.jsx(F,{variant:"smallBold",className:"min-w-0 truncate",children:u}),o.jsx(Jm,{className:"translate-x-xs",change:c,variant:"tiny",includeIcon:!0})]}),o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(F,{variant:"micro",color:"light",className:"whitespace-nowrap",children:o.jsx(mT,{symbol:e,exchange:!m&&l?i:void 0})}),o.jsx(Jm,{className:"-translate-x-two mt-px",change:s*100,background:!1,variant:"micro",format:x})]})]}),g&&g.length>0&&o.jsx("div",{className:"my-sm flex w-full",children:o.jsx("div",{className:"px-sm flex flex-1",children:o.jsx(Y$,{history:g,symbol:e,valence:y,className:"h-auto w-0 flex-1",strokeWidth:d?1.6:1})})}),o.jsx(F,{variant:"baseSemi",className:"px-sm -mb-xs -mt-xs",children:o.jsx(k$,{value:p,format:x,suffix:h})})]})});pT.displayName="KeyTicker";const a2e=R.memo(()=>{const e=f.useMemo(()=>[{date:"2025-01-01",close:100},{date:"2025-01-02",close:100}],[]);return o.jsxs(wn,{className:"pointer-events-none relative","aria-hidden":"true",children:[o.jsx("div",{className:"invisible",children:o.jsx(pT,{symbol:"XXX",name:"XXX",price:100,change:100,history:e})}),o.jsx("div",{className:"absolute inset-0",children:o.jsxs(un,{className:"py-sm gap-xs flex h-full flex-col",children:[o.jsxs("div",{className:"px-sm",children:[o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-4 w-3/5 max-w-24 rounded"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-1/4 max-w-12 rounded-full"})]}),o.jsxs("div",{className:"gap-sm mt-xs flex items-center justify-between",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-1/4 max-w-10 rounded"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-1/3 max-w-14 rounded"})]})]}),o.jsx("div",{className:"mx-sm my-xs flex-1",children:o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle size-full rounded"})}),o.jsx("div",{className:"px-sm",children:o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-2/5 max-w-20 rounded"})})]})})]})});a2e.displayName="KeyTickerSkeleton";const Q$=R.memo(({widgetId:e,showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=Z(),{symbol:a,quote:i,prices:l,isLoading:c,updateStockSettings:u}=t_t(e,r),d=f.useCallback(b=>{u({symbol:b,version:1})},[u]),m=f.useMemo(()=>({style:"currency",currency:i.currency??"USD",minimumFractionDigits:i.price<1e3?2:0,maximumFractionDigits:2}),[i]),p=l[0]?.entries,h=p?.[0]?.price,g=p?.[p.length-1]?.price,y=g&&g>(i?.previousClose??h)?"positive":"negative",x=o.jsx("div",{className:V("h-full transform-gpu rounded-2xl"),children:o.jsxs("div",{className:"gap-xs flex h-full flex-1 flex-col justify-between p-2.5 pb-0 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex flex-col gap-px",children:[o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(F,{variant:"smallBold",className:"min-w-0 truncate",children:a}),i&&!c&&typeof i.changesPercentage=="number"&&o.jsx(Jm,{change:i.changesPercentage,variant:"micro",includeIcon:!0,className:"-translate-y-0.5 translate-x-0.5 rounded-md"})]}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate whitespace-nowrap",children:c?s({defaultMessage:"Loading...",id:"gjBiyjshwX"}):i?.name||a})]}),ya(l)&&ya(l[0]?.entries)&&i?.price&&typeof i.price=="number"&&o.jsx("div",{className:"pointer-events-none",children:o.jsx(Y$,{history:p?.map(b=>({date:b.date,close:b.price}))??fe,symbol:a,valence:y,width:140,height:60,strokeWidth:1.6,className:"h-auto w-full"})}),i?.price&&typeof i.price=="number"?o.jsx(F,{variant:"section-title",className:"-translate-x-two -translate-y-px",children:o.jsx("span",{className:"font-mono",children:o.jsx(No,{value:i.price,format:m,animated:!0})})}):i?.price?o.jsx(F,{variant:"page-title",className:"-translate-x-two -translate-y-px",children:o.jsx("span",{className:"font-mono text-xl",children:i.price})}):null]})}),v=f.useCallback(()=>n?.(!1),[n]);return r==="thumbnail"?x:o.jsxs(o.Fragment,{children:[o.jsx(un,{shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ye,{draggable:!1,href:`/finance/${a}`,className:"relative block size-full",children:o.jsx("div",{className:"absolute inset-0 select-none",children:x})})}),o.jsx(Je,{children:t&&o.jsx(Mwe,{onClose:v,onSelectStock:d,currentSymbol:a})})]})});Q$.displayName="StockWidget";const jO=R.memo(({hostname:e,title:t,context:n})=>{const r=["teal","maroon","purple","orange","blue"],s=e.split("").reduce((d,m)=>m.charCodeAt(0)+((d<<5)-d),0),a=Math.abs(s)%r.length,i=r[a],l=(t||e)?.[0]?.toUpperCase()??"",c={teal:"bg-[#21808D] dark:bg-[#32B8C6]",maroon:"bg-[#944454] dark:bg-[#FFB3C9]",purple:"bg-[#865D95] dark:bg-[#C48ED8]",orange:"bg-[#DB7100] dark:bg-[#FFAB44]",blue:"bg-[#19789E] dark:bg-[#54B4E3]"},u={teal:"text-[#B1EFF7] dark:text-[#082125]",maroon:"text-[#FFDFE9] dark:text-[#2D171B]",purple:"text-[#FFE4FF] dark:text-[#2E1836]",orange:"text-[#FFE6C8] dark:text-[#3B0F00]",blue:"text-[#CEF4FF] dark:text-[#071F2B]"};return o.jsx("span",{className:`pt-two flex select-none items-center justify-center rounded-full font-sans text-xs font-medium ${c[i]} ${u[i]} ${n==="thumbnail"?"size-4":"size-6"}`,children:l})});jO.displayName="FaviconFallback";const lre=4,hT=R.memo(({context:e,disabled:t})=>{const[n,r]=f.useState({}),{data:s=[]}=j_e();if(e==="thumbnail")return o.jsx("div",{className:"gap-sm grid size-full grid-rows-3",children:s.length>=3?s.slice(0,3).map(i=>{const c=new URL(i.url).host;return o.jsx(ov,{width:"w-16",disabled:t,thumbnail:n[i.url]?o.jsx(jO,{hostname:c,title:i.title,context:"thumbnail"}):o.jsx("img",{src:L1(i.url),alt:"Favicon",className:"size-full",onError:()=>{r(u=>({...u,[i.url]:!0}))}})},i.url)}):o.jsxs(o.Fragment,{children:[o.jsx(ov,{width:"w-16",disabled:t}),o.jsx(ov,{width:"w-12",disabled:t}),o.jsx(ov,{width:"w-14",disabled:t})]})});const a=Math.max(lre-s.length,0);return o.jsxs("div",{className:V("flex w-full flex-wrap items-center justify-center gap-3",{"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))]":e==="sortable-widgets"}),children:[s.slice(0,lre).map(i=>{const c=new URL(i.url).host,u=I_(c);return o.jsx(En,{tooltipText:i.title||i.url,tooltipLayout:"bottom",asChild:!0,children:o.jsx(Ye,{href:i.url,children:o.jsxs(un,{shadow:!0,className:V("p-sm gap-sm flex w-full select-none items-center rounded-lg border"),bgHover:"subtler",children:[n[i.url]?o.jsx(jO,{hostname:c,title:i.title}):o.jsx("img",{src:L1(i.url),alt:"Favicon",className:"size-6 rounded-md",onError:()=>{r(d=>({...d,[i.url]:!0}))}}),o.jsx(F,{variant:"tiny",className:"line-clamp-1 text-left capitalize",color:"light",children:u.replace(/\./g," ")})]})})},i.url)}),new Array(a).fill("").map((i,l)=>o.jsx("div",{className:"h-[42px]"},l))]})});hT.displayName="TopMostUrls";const ov=R.memo(({width:e,thumbnail:t,disabled:n})=>o.jsxs(un,{shadow:!0,fullBleed:!0,className:"gap-sm px-sm flex flex-row items-center !rounded-lg",children:[o.jsx("div",{className:V("empty:bg-subtle size-4 overflow-hidden rounded-[4px]",{"opacity-50":n}),children:t}),o.jsx("div",{className:V("bg-subtle h-1.5 rounded-full",e,{"opacity-50":n})})]}));ov.displayName="TopMostUrlsThumbnailItem";const i2e="weather-widget-cache";function t3t(){try{const e=Oe.getItem(i2e);if(e)return JSON.parse(e)}catch{}return null}function n3t(e){try{Oe.setItem(i2e,JSON.stringify(e))}catch{}}function cre(e="widget",t="default",n=!1){if(e!=="widget")return{version:1,prefersMetric:n};const r=Sx("WEATHER",t);return r?{version:1,prefersMetric:r.prefersMetric??n}:{version:1,prefersMetric:n}}function r3t(e,t="widget",n="default"){t==="widget"&&Np("WEATHER",n,{version:1,prefersMetric:e.prefersMetric})}function s3t(e="default",t="widget"){const{locale:n}=Z(),{location:r}=mx(),s=r?.latitude??null,a=r?.longitude??null,i=t3t(),l=cre(t,e,i?.is_metric_preferred),[c,u]=f.useState(l),{data:d,isLoading:m}=We({queryKey:[yV,s,a].map(String),queryFn:async()=>{const k=await s1e({location:r,locale:n,reason:"weather-comet-home-widget"});return k&&n3t(k),u(N=>{const P=cre(t,e,k?.is_metric_preferred);return{...N,prefersMetric:P.prefersMetric}}),k},refetchInterval:1e3*60*5,staleTime:1e3*60,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,placeholderData:i}),p="patchy-rain-possible-day",h=c.prefersMetric?16:62,g="Rainy",y="San Francisco, CA",x=d||i,v=x&&x.current&&x.location,b=!!d,_=!!r,w=v?x.current.condition?.icon:p,C=v?c.prefersMetric?x.current.temp_c??h:x.current.temp_f??h:h,S=v?x.current.condition?.text??g:g,E=v?`${x.location.name}${x.location.is_usa&&x.location.region?`, ${x.location.region}`:x.location.country?`, ${x.location.country}`:""}`:y,M=f.useCallback(k=>{u(k),r3t(k,t,e)},[u,t,e]);return f.useMemo(()=>({icon:w,temperature:C,condition:S,locationName:E,isLoading:m,hasError:!1,hasRealData:b,hasLocation:_,weatherSettings:c,updateWeatherSettings:M}),[w,C,S,E,m,b,_,c,M])}const L2=f.memo(({width:e,height:t,variant:n})=>{const[r,s]=f.useState(!1),a=n==="hail"?20:n==="normal"?50:120,i=400,l=n==="hail"?1:20,c=n==="hail"?3:n==="normal"?30:80,u=100,d=n==="hail"?.8:.5,m=n==="hail"?.3:.1,p=Gy();return f.useEffect(()=>{s(!0)},[]),!r||p?null:o.jsx("div",{className:"absolute inset-0",children:o.jsx(Je,{children:Array.from({length:a}).map((h,g)=>{const y=Math.floor(Math.random()*(e-1)),x=Math.floor(Math.random()*(c-l+1))+l,v=Math.floor(Math.random()*(u+1)),b=Math.random()*(d-m)+m,_=Math.floor(Math.random()*i)+1,w=n==="hail"?x:1;return o.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:y,top:0,height:t},className:"absolute",children:[o.jsx("div",{style:{width:w,height:x,animationDuration:i+v+"ms",animationDelay:-_+"ms",animationTimingFunction:"linear",opacity:b,maskImage:n!=="hail"?"linear-gradient(to bottom, transparent, black, transparent)":void 0},className:V("absolute rounded-full bg-white",{"rounded-full":n==="hail"},"animation-weather-rain")}),n!=="hail"&&o.jsx("div",{style:{animationDuration:i+v+"ms",animationDelay:-_+"ms",opacity:b},className:V("-right-two absolute bottom-0 h-px w-[4px] rounded-full bg-white","animation-weather-rain-splash")})]},g)})})})});L2.displayName="Rain";const AO=f.memo(({width:e,height:t,variant:n})=>{const[r,s]=f.useState(!1),a=n==="normal"?50:80,i=n==="normal"?2e3:1e3,l=1,c=8,u=n==="normal"?1500:800,d=.5,m=.1,p=2,h=Gy();return f.useEffect(()=>{s(!0)},[]),!r||h?null:o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:V("absolute inset-x-0 bottom-0 translate-y-[80%] bg-white opacity-20 blur-sm",{"rounded-m blur-xs -left-xl -right-xl h-lg":n==="heavy"},{"h-md rounded-[50%]":n==="normal"})}),o.jsx(Je,{children:Array.from({length:a}).map((g,y)=>{const x=Math.floor(Math.random()*(e-1)),v=Math.floor(Math.random()*(c-l+1))+l,b=Math.floor(Math.random()*(u+1)),_=Math.floor(Math.random()*p)+1,w=Math.random()*(d-m)+m,C=Math.floor(Math.random()*i)+1;return o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:x,top:0,height:t},className:"absolute",children:o.jsx("div",{style:{animationDuration:i+b+"ms",animationTimingFunction:"linear",animationDelay:-C+"ms",opacity:w},className:V("absolute rounded-full bg-white","animation-weather-snow"),children:o.jsx("div",{style:{width:v,height:v,animationDuration:"inherit",maskImage:"radial-gradient(black 20%, transparent)"},className:V("absolute rounded-full bg-white",_===1&&"animation-weather-snow-wave")})})},y)})})]})});AO.displayName="Snow";const o2e=f.memo(({width:e,height:t,context:n})=>{const[r,s]=f.useState(!1),a=70,i=2,l=1,c=2,u=500,d=1e3,m=.5,p=.2,h=Gy();return f.useEffect(()=>{s(!0)},[]),!r||h?null:o.jsxs("div",{className:"absolute inset-0",children:[o.jsx(Je,{children:Array.from({length:a}).map((g,y)=>{const x=Math.floor(Math.random()*(e-1)),v=Math.floor(Math.random()*(t-1)),b=Math.floor(Math.random()*(i-l+1))+l,_=Math.floor(Math.random()*c)+1,w=Math.floor(Math.random()*(u+1)),C=Math.floor(Math.random()*(d+1)),S=Math.random()*(m-p)+p;return o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:x,top:v},className:"absolute",children:o.jsx("div",{style:{width:b,height:b,animationDuration:5e3+w+"ms",animationDelay:C+"ms",opacity:S},className:V("absolute rounded-full bg-white",{"animation-weather-star-twinkle":_===1})})},y)})}),o.jsx("div",{className:V("w-lg absolute left-0 h-px bg-white","animation-weather-star-shoot",{"context-ntp":n==="ntp"})})]})});o2e.displayName="Stars";const gT=["clear-day","clear-night","partly-cloudy-day","partly-cloudy-night","cloudy-day","cloudy-night","patchy-rain-possible-day","patchy-rain-possible-night","possible-thunder-day","possible-thunder-night","overcast","fog","snow","sleet","patchy-freezing-drizzle","heavy-snow","blizzard","drizzle","hail","light-shower","heavy-rain","lightning-rain","lightning-snow"],IM=R.memo(({variant:e,context:t,className:n})=>{const r=f.useCallback(h=>{switch(h){case"clear-day":default:return["#FF813A","#FFC700","#1F84CD"];case"partly-cloudy-day":return["#8E8E8E","#D5D5D5","#1F84CD"];case"partly-cloudy-night":return["#8E8E8E","#6A6A6A","#0B1B39"];case"cloudy-day":case"overcast":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"drizzle":case"light-shower":case"heavy-rain":case"blizzard":case"heavy-snow":case"sleet":case"snow":case"fog":case"possible-thunder-day":case"hail":case"lightning-rain":case"lightning-snow":return["#B8B8B8","#8791AB","#486289"];case"cloudy-night":case"possible-thunder-night":case"patchy-rain-possible-night":return["#222938","#3E475A","#1B2230"];case"clear-night":return["#44344A","#091937","#091937"]}},[]),s=f.useCallback(h=>{switch(h){default:return null;case"partly-cloudy-night":case"cloudy-night":case"possible-thunder-night":case"clear-night":return"stars";case"light-shower":case"sleet":case"drizzle":case"patchy-rain-possible-night":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"lightning-rain":return"rain";case"hail":return"rain-hail";case"heavy-rain":return"rain-heavy";case"snow":return"snow";case"heavy-snow":case"blizzard":case"lightning-snow":return"snow-heavy"}},[]),a=r(e),[i,l,c]=a,[u,{width:d,height:m}]=vc(),p=s(e);return o.jsxs("div",{style:{backgroundColor:c},className:V("absolute inset-0 overflow-hidden rounded-md shadow-md",n),children:[o.jsx("div",{className:"-inset-xl absolute translate-y-1/4 rounded-[50%] opacity-75",style:{backgroundColor:l}}),o.jsx("div",{className:"-inset-xl absolute translate-y-[60%] rounded-[50%] opacity-75",style:{backgroundColor:i}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 overflow-hidden",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),o.jsx("div",{className:"absolute inset-0",ref:u,children:p==="stars"?o.jsx(o2e,{height:m,width:d,context:t}):p==="rain"?o.jsx(L2,{height:m,width:d,variant:"normal"}):p==="rain-heavy"?o.jsx(L2,{height:m,width:d,variant:"heavy"}):p==="snow"?o.jsx(AO,{height:m,width:d,variant:"normal"}):p==="snow-heavy"?o.jsx(AO,{height:m,width:d,variant:"heavy"}):p==="rain-hail"?o.jsx(L2,{height:m,width:d,variant:"hail"}):null}),o.jsx("div",{className:"absolute inset-0 rounded-md border border-transparent"})]})});IM.displayName="WeatherGradient";const Nb={"clear-day":i_,"clear-night":w7e,"partly-cloudy-day":tq,"partly-cloudy-night":eq,"cloudy-day":tq,"cloudy-night":eq,"patchy-rain-possible-day":_7e,"patchy-rain-possible-night":b7e,"possible-thunder-day":v7e,"possible-thunder-night":x7e,overcast:y7e,fog:g7e,snow:h7e,sleet:p7e,"patchy-freezing-drizzle":m7e,"heavy-snow":f7e,blizzard:d7e,drizzle:u7e,hail:c7e,"light-shower":l7e,"heavy-rain":o7e,"lightning-rain":JG,"lightning-snow":JG},X$=R.memo(({widgetId:e="default",showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=Z(),a=s3t(e,r),[i,l]=f.useState(!1),c=f.useCallback(()=>n?.(!1),[n]),{permissionStatus:u}=mx(),{openModal:d}=wt();f.useEffect(()=>{u==="granted"&&l(!0)},[u]);const m=f.useCallback(()=>{d("locationPermissionModal",{onPermissionGranted:()=>{l(!0)},origin:"weather_widget"})},[d]);if(!a.hasRealData&&!a.hasLocation&&a.isLoading)return o.jsxs("div",{className:V("h-full transform-gpu rounded-2xl"),children:[o.jsx(IM,{variant:"clear-day",className:"rounded-2xl",context:"ntp"}),o.jsx("div",{className:"gap-sm flex h-full flex-1 flex-col items-center justify-center p-2.5 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:o.jsx(F,{variant:"tiny",color:"white",className:"opacity-75",children:s({defaultMessage:"Loading weather...",id:"kTpqlc9m9M"})})})]});const p=Ik(gT,a.icon)?Nb[a.icon]:i_,h=o.jsxs("div",{className:V("h-full transform-gpu overflow-hidden rounded-2xl"),children:[o.jsx(IM,{variant:a.icon,className:"!rounded-2xl",context:"ntp"}),o.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0 pt-1 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex flex-row items-start justify-between",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"page-title",color:"white",children:o.jsxs("span",{className:"font-mono",children:[a.temperature,"",a.weatherSettings.prefersMetric?"C":"F"]})}),o.jsx(F,{variant:"tinyRegular",color:"white",className:"-mt-xs opacity-60",children:a.condition})]}),o.jsx(F,{variant:"page-title",color:"white",className:"mr-0.5 mt-2",children:o.jsx(le,{icon:p,size:36,className:"-mt-xs"})})]}),o.jsx(F,{variant:"tiny",color:"white",className:"mb-1.5 line-clamp-2 flex items-center",children:a.locationName})]})]});return r==="thumbnail"?h:o.jsxs(o.Fragment,{children:[o.jsx(un,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(Ye,{href:`/search/new?q=${s({defaultMessage:"weather near {location}",id:"vi8HXN1mDE"},{location:a.locationName})}
          `,draggable:!1,className:"relative block size-full",children:o.jsx("div",{className:"absolute inset-0 select-none",children:h})})}),o.jsx(Je,{children:t&&o.jsx(_f,{onClose:c,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(F,{variant:"entry-title-300",children:s({defaultMessage:"Weather settings",id:"RMurwlcxbd"})}),o.jsx("div",{className:"flex flex-col gap-3",children:o.jsx("div",{className:"flex w-full flex-col",children:o.jsxs("div",{className:"border-subtlest flex w-full gap-2 rounded-lg border p-1",children:[o.jsxs("label",{className:V("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-subtler dark:bg-subtle":a.weatherSettings.prefersMetric}),children:[o.jsx("input",{type:"radio",name:"tempUnit",checked:a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!0};a.updateWeatherSettings(g)},className:"hidden"}),o.jsx(F,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"default":"light",children:s({defaultMessage:"Celsius",id:"y/PhoM9SbF"})})]}),o.jsxs("label",{className:V("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-subtler dark:bg-subtle":!a.weatherSettings.prefersMetric}),children:[o.jsx("input",{type:"radio",name:"tempUnit",checked:!a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!1};a.updateWeatherSettings(g)},className:"hidden"}),o.jsx(F,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"light":"default",children:s({defaultMessage:"Fahrenheit",id:"K2DDr1Ji/l"})})]})]})})}),o.jsx(H,{className:"border-t"}),o.jsxs("div",{className:"flex flex-row items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(F,{variant:"smallBold",children:s({defaultMessage:"Precise Location",id:"WP8KG0QkTf"})}),o.jsx(F,{variant:"small",className:"leading-tight",color:"light",children:s({defaultMessage:"Use your device location to get the most accurate weather information.",id:"Dsn2unk3pR"})})]}),o.jsx(a3t,{permissionStatus:u,children:o.jsx("div",{onClick:i?void 0:m,children:o.jsx(Ji,{active:i,disabled:i})})})]}),o.jsx(H,{className:"border-t"}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(pe,{variant:"primary",size:"small",onClick:c,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});X$.displayName="WeatherWidget";const a3t=({children:e,permissionStatus:t})=>{const{$t:n}=Z(),r=n({defaultMessage:"Currently using precise location. This can be disabled from Comet Settings.",id:"5Z0PWou5EU"});return t==="granted"?o.jsx(En,{asChild:!0,tooltipText:r,delayDuration:0,bodyTextClassName:"text-center",children:e}):e},i3t="chrome://wormhole",ure="wormhole-widgets-enabled-cache";function o3t(){const{value:e,loading:t}=$r({flag:"wormhole-widget",defaultValue:!1}),[n,r]=f.useState(()=>{const s=Oe.getItem(ure);return s?JSON.parse(s):!1});return f.useEffect(()=>{t||e!==n&&(r(e),Oe.setItem(ure,JSON.stringify(e)))},[e,t,n]),n}const Z$=R.memo(({context:e="widget"})=>{const t=Jn(),n=f.useCallback(()=>{t.openTab({url:i3t,key:"openWormhole"})},[t]),r=o.jsx("div",{className:"group relative size-full",children:o.jsx("img",{src:"/static/images/wormhole/thumbnail.png",alt:"Wormhole",className:"pointer-events-none absolute inset-0 object-cover"})});return e==="thumbnail"?r:o.jsx(un,{fullBleed:!0,shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full cursor-pointer overflow-hidden !rounded-2xl",onClick:n,children:r})});Z$.displayName="WormholeWidget";const J$=R.memo(({context:e="widget"})=>{const t=o.jsx("div",{className:V("relative size-full cursor-pointer select-none",{"active:!bg-subtler dark:active:!bg-subtle":e==="widget"}),children:o.jsx("div",{className:"group relative size-full",children:o.jsx("img",{src:"/static/images/zen/thumbnail.png",alt:"Zen",className:"pointer-events-none absolute inset-0 object-cover"})})});return e==="thumbnail"?t:o.jsx(un,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:o.jsx(Ye,{href:"/b/zen",className:"cursor-pointer",draggable:!1,children:t})})});J$.displayName="ZenWidget";const l3t=500,l2e=R.memo(function({id:t,editMode:n,onDelete:r,onShowSettings:s,widget:a}){const[i,l]=f.useState(!1),{isMobileStyle:c}=Ce(),{$t:u}=Z(),[d,m]=f.useState(!1),[p,h]=f.useState(!1),[g,y]=f.useState(!1),x=f.useRef(null),{trackEvent:v}=je(),b=f.useCallback((A,j)=>{v(`comet home widget ${A}`,{widgetType:j,widgetName:a?.name})},[v,a?.name]);f.useEffect(()=>{i&&(m(!1),y(!1))},[i]),f.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]);const _=f.useCallback(()=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{y(!0),b("hovered",a?.type)},l3t)},[b,a?.type]),w=f.useCallback(()=>{x.current&&clearTimeout(x.current),d||y(!1)},[d]),C=f.useCallback(A=>{s(A),h(A)},[s]);f.useEffect(()=>{y(!1)},[p]);const{attributes:S,isDragging:E,listeners:M,setNodeRef:k}=W0t({id:t,disabled:!n}),N=A=>{switch(A){case"ANALOG_CLOCK":return o.jsx(QV,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C,showCity:!0});case"STICKY":return o.jsx(ZV,{widgetId:t,showSettings:p,setShowSettings:C,context:"widget",defaultText:""});case"TOP_URLS":return o.jsx(hT,{context:"sortable-widgets"});case"WEATHER":return o.jsx(X$,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C});case"STOCK":return o.jsx(Q$,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C});case"DISCOVER":return o.jsx(XV,{context:"widget",showSettings:p,setShowSettings:C});case"ASSISTANT":return o.jsx(YV,{widgetId:t,context:"widget",defaultQuery:u({defaultMessage:"Find important unanswered emails",id:"D8O0cB/SKH"}),showSettings:p,setShowSettings:C});case"SHORTCUT":return o.jsx(KV,{widgetId:t,context:"widget",defaultName:u({defaultMessage:"quick-dinner",id:"7f3tHXsIWC"}),defaultQuery:u({defaultMessage:"Give me 3 ideas of one-pan meals I can make for dinner tonight",id:"sgqIZmDyDW"}),showSettings:p,setShowSettings:C});case"WORMHOLE":return o.jsx(Z$,{widgetId:t,context:"widget"});case"ZEN":return o.jsx(J$,{context:"widget"});case"EXPLORE_ASSISTANT":return o.jsx(ewe,{context:"widget"},`${t}-widget`);default:return null}},P=f.useMemo(()=>{const A={type:"default",text:u({defaultMessage:"Remove",id:"G/yZLul6P1"}),destructive:!0,onClick:()=>{r?.(),b("dismissed",a?.type)}},j={type:"default",text:u({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:()=>C(!p)};return[...a?.settings?[j]:[],...a?.cannotBeDeleted?[]:[A]]},[u,r,p,a?.cannotBeDeleted,a?.settings,C,b,a?.type]),L=f.useCallback(()=>m(!0),[m]),O=f.useCallback(()=>{m(!1),y(!1)},[]);return a?o.jsxs(ve.div,{layout:!0,ref:k,className:V("relative isolate",a.width===4?"col-span-full":a.width===3?"col-span-3":a.width===2?"col-span-2":"col-span-1",{"z-[100]":E||i}),drag:n,dragSnapToOrigin:!0,onMouseEnter:_,onMouseLeave:w,onDragStart:()=>{l(!0)},onDragTransitionEnd:()=>{l(!1)},exit:{opacity:0},transition:no,onClick:()=>b("selected",a?.type),children:[o.jsx(Je,{children:(n||g)&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:no,className:"absolute -left-2 -top-2 z-10",children:o.jsx(sn,{isMobileStyle:c,items:P,placement:"bottom-start",onOpen:L,onClose:O,children:o.jsx(H,{as:"button",onClick:L,variant:"raised",className:"active:!bg-subtler dark:active:!bg-subtle shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:o.jsx(le,{icon:$d,size:"sm"})})})})}),n&&o.jsx("div",{className:V("absolute inset-0 z-[9] cursor-grab",{"cursor-grabbing":E}),onMouseDown:()=>m(!1),...S,...M}),N(a.type)]}):null});l2e.displayName="WidgetItem";const c2e=R.memo(({widget:e,widgetData:t,editMode:n,handleDelete:r,onShowSettings:s})=>{const a=f.useCallback(()=>r(e.id),[r,e.id]);return t?e.shouldHide?o.jsx("div",{className:V("h-px",{"col-span-full":t.width===4,"col-span-1":t.width===1,"col-span-2":t.width===2,"col-span-3":t.width===3}),style:{opacity:0}},e.id):o.jsx(Pr,{fallback:null,children:o.jsx(l2e,{id:e.id,editMode:n,onDelete:a,widget:t,onShowSettings:s})},e.id):null});c2e.displayName="WidgetsFactory";const u2e=R.memo(({aspectRatio:e,onClick:t,widget:n,widgetIsAdded:r,hideIconOutline:s,manuallyDisabled:a=!1})=>{const i=n.singleton&&r||a,l=u=>{switch(u){case"ANALOG_CLOCK":return o.jsx(QV,{widgetId:n.type,context:"thumbnail"});case"STICKY":return o.jsx(ZV,{widgetId:n.type,context:"thumbnail",defaultText:"My great sticky..."});case"WEATHER":return o.jsx(X$,{widgetId:n.type,context:"thumbnail"});case"TOP_URLS":return o.jsx(hT,{context:"thumbnail",disabled:i});case"STOCK":return o.jsx(Q$,{widgetId:n.type,context:"thumbnail"});case"DISCOVER":return o.jsx(XV,{context:"thumbnail"});case"ASSISTANT":return o.jsx(YV,{widgetId:n.type,context:"thumbnail",defaultQuery:"Find important unanswered emails"});case"SHORTCUT":return o.jsx(KV,{widgetId:n.type,context:"thumbnail",defaultName:"quick-dinner",defaultQuery:"Give me 3 ideas of one-pan meals I can make for dinner tonight"});case"WORMHOLE":return o.jsx(Z$,{widgetId:n.type,context:"thumbnail"});case"ZEN":return o.jsx(J$,{context:"thumbnail"});case"EXPLORE_ASSISTANT":return o.jsx(ewe,{context:"thumbnail"},`${n.type}-thumbnail`);default:return o.jsx("div",{})}},c=f.useMemo(()=>({aspectRatio:e}),[e]);return o.jsxs("div",{className:"gap-sm relative flex flex-col items-center justify-center",children:[!i&&o.jsx("div",{className:"absolute -top-2 left-1/2 z-10 translate-x-[-68px]",children:o.jsx(H,{as:"button",variant:"raised",onClick:i?void 0:t,className:"active:!bg-subtler dark:active:!bg-subtle shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:o.jsx(le,{icon:ur,size:"sm"})})}),o.jsx(un,{shadow:!0,fullBleed:!s,onClick:i?void 0:t,style:c,className:V("h-[120px] cursor-pointer overflow-hidden",{"pointer-events-none":i,"!overflow-visible !rounded-none border-none !bg-transparent shadow-none":s}),children:o.jsx("div",{className:"absolute inset-0",children:l(n.type)})}),o.jsx(F,{variant:"small",color:i?"ultraLight":"default",children:n.name})]})});u2e.displayName="WidgetsTrayItem";const c3t=25,d2e=R.memo(({widget:e,handleAdd:t,userWidgets:n,handleRequestWeatherPermission:r,topSitesData:s})=>{const a=f.useMemo(()=>e.type==="TOP_URLS"&&s.length===0||n.length>=c3t,[s.length,n.length,e.type]),i=f.useCallback(()=>{t(e),r()},[t,r,e]);if(!e||e.cannotBeDeleted)return null;const l=n.some(c=>c.type===e.type);return o.jsx(Pr,{fallback:null,children:o.jsx(u2e,{aspectRatio:1/1,widget:e,widgetIsAdded:l,hideIconOutline:e.type==="TOP_URLS",onClick:i,manuallyDisabled:a})})});d2e.displayName="WidgetsTrayFactory";const u3t=({widgets:e,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r,handleAdd:s})=>e.map((a,i)=>o.jsx(d2e,{widget:a,handleAdd:s,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r},i)),f2e=R.memo(({children:e,setEditMode:t,containerRef:n,maxWidgetsReached:r})=>{const{$t:s}=Z(),a=f.useCallback(()=>t(!1),[t]);return o.jsx(pf,{portalTarget:n.current??document.body,children:o.jsx(ve.div,{initial:{y:"100%",x:"-50%"},animate:{y:0,x:"-50%"},exit:{y:"100%",x:"-50%"},transition:no,className:"md:px-xl fixed bottom-0 left-1/2 z-[100] w-full pb-3",children:o.jsx("div",{className:"px-xl mx-auto max-w-[800px]",children:o.jsxs(H,{variant:"raised",className:"dark:!bg-base shadow-overlay size-full rounded-2xl pb-3",children:[o.jsx("div",{className:"scrollbar-none max-h-[250px] w-full overflow-scroll",children:e}),o.jsxs("div",{className:"pl-md border-subtlest sticky left-0 flex w-full flex-row items-center border-t pr-3 pt-3",children:[r&&o.jsx(F,{variant:"small",color:"ultraLight",children:s({defaultMessage:"You have reached the maximum number of widgets",id:"fRBSTWO49U"})}),o.jsx(pe,{variant:"primary",size:"small",extraCSS:"ml-auto",text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"}),onClick:a})]})]})})})})});f2e.displayName="WidgetTray";const d3t=()=>{const{$t:e}=Z();return f.useMemo(()=>[{type:"TOP_URLS",name:e({defaultMessage:"Top Sites",id:"v/BAbysxv5"}),singleton:!0,width:4},{type:"ANALOG_CLOCK",name:e({defaultMessage:"Clock",id:"qCyPKfisKN"}),settings:!0,width:1},{type:"STICKY",name:e({defaultMessage:"Sticky",id:"kpXiKrXCK9"}),settings:!0,width:1},{type:"WEATHER",name:e({defaultMessage:"Weather",id:"O2sqh9Nj5X"}),settings:!0,singleton:!0,width:1},{type:"STOCK",name:e({defaultMessage:"Stock",id:"vuKrlWBaI3"}),settings:!0,width:1},{type:"DISCOVER",name:e({defaultMessage:"Discover",id:"cE4HfwyEyr"}),singleton:!0,width:1},{type:"ASSISTANT",name:e({defaultMessage:"Assistant",id:"wSAvhubuX6"}),settings:!0,width:1},{type:"SHORTCUT",name:e({defaultMessage:"Shortcut",id:"tceWOrncgz"}),settings:!0,width:1},{type:"WORMHOLE",name:e({defaultMessage:"Wormhole",id:"GrT4LLPa93"}),singleton:!0,width:1},{type:"ZEN",name:e({defaultMessage:"Zen",id:"wpzEtliq4X"}),singleton:!0,width:1},{type:"EXPLORE_ASSISTANT",name:e({defaultMessage:"Try Agent in Action",id:"7swKDXB5AP"}),singleton:!0,width:1}],[e])},f3t=1e4,m3t=1e3*60,p3t=["comet-default-browser-status"],m2e=()=>{const e=Jn(),{data:t=null,isLoading:n}=We({queryKey:p3t,queryFn:async()=>{try{return await e.getIsCometDefaultBrowser("check_default_browser")}catch{return null}},refetchInterval:r=>r?.state?.data?m3t:f3t,refetchIntervalInBackground:!0,staleTime:0});return{isDefaultBrowser:t,isDefaultBrowserLoading:n}},dre="set-default-browser-promo-settings-cache",h3t=()=>{const{value:e}=jB({flag:"set-default-browser-banner-promo",defaultValue:{}}),[t,n]=f.useState(()=>{const r=Oe.getItem(dre);return r?JSON.parse(r):!1});return f.useEffect(()=>{e!==t&&(n(e),Oe.setItem(dre,JSON.stringify(e)))},[e,t]),t},pS="comet_default_browser_banner_data",g3t=4,y3t=24,x3t=60*60*1e3,v3t=({source:e})=>{const t=Jn(),{isDefaultBrowser:n}=m2e(),[r,s]=f.useState(!1),a=h3t(),{trackEvent:i}=je(),l=typeof a.promoCooldownPeriodHours<"u"&&typeof a.promoMaxCloseCount<"u",c=f.useCallback(p=>{if(p===0)return!1;const h=Date.now()-p,g=x3t*(a?.promoCooldownPeriodHours??y3t);return h<g},[a?.promoCooldownPeriodHours]);f.useEffect(()=>{(()=>{const h=Oe.getItem(pS);if(!h){s(!1);return}try{const g=JSON.parse(h);if(g.count>=(a?.promoMaxCloseCount??g3t)){s(!0);return}if(c(g.lastClosedTime)){s(!0);return}s(!1)}catch{Oe.removeItem(pS),s(!1)}})()},[a?.promoMaxCloseCount,c]);const u=f.useCallback(()=>{const p=Oe.getItem(pS);let h;try{h=p?JSON.parse(p):{count:0,lastClosedTime:0}}catch{h={count:0,lastClosedTime:0}}if(c(h.lastClosedTime)){s(!0);return}const g={count:h.count+1,lastClosedTime:Date.now()};i("default browser upsell closed",{closedCount:h.count,cometSurface:e}),Oe.setItem(pS,JSON.stringify(g)),s(!0)},[e,i,c]),d=f.useCallback(async()=>{try{u(),await t.setCometAsDefaultBrowser("set_default_browser"),i("default browser upsell selected",{cometSurface:e})}catch{}},[t,e,i,u]),m=l&&n===!1&&!r;return f.useMemo(()=>({shouldShowBanner:m,handleBannerClose:u,setDefaultBrowser:d}),[m,u,d])},fre=25,b3t=()=>null,p2e=R.memo(({editMode:e,setEditMode:t,containerRef:n,askInput:r})=>{const s="sortable-widgets",a="comet_home",{trackEventOnce:i}=je(),{defaultWidgets:l}=uvt(),{showStudentWidgets:c}=bvt(),{shouldShowWidget:u}=HV(),[d,m]=f.useState(I_e(l)),p=pxt(mxt(UV)),h=f.useRef(!1);avt(d);const{show:g,title:y,actionLabel:x,icon:v,onDismiss:b,onClick:_,isLoading:w,upsellName:C}=K0t(),{shouldShowBanner:S,handleBannerClose:E,setDefaultBrowser:M}=v3t({source:a}),{data:k=[]}=j_e(),N=d3t();f.useEffect(()=>{if(!h.current){h.current=!0;return}WV(d)},[d]),f.useEffect(()=>{!S||g||i("default browser upsell viewed",{cometSurface:a})},[i,S,a,g]);const P=f.useCallback(z=>{const{active:$,over:X}=z;X&&$.id!==X.id&&m(q=>{const Y=q.findIndex(J=>J.id===$.id),G=q.findIndex(J=>J.id===X.id);return VV(q,Y,G)})},[]),L=f.useCallback(z=>{d.length>=fre||m($=>[...$,{id:Ir(),type:z.type}])},[d]),O=f.useCallback(z=>{m($=>$.filter(X=>X.id!==z))},[]),A=f.useCallback(()=>{navigator.geolocation.getCurrentPosition(ne.info)},[]),j=o3t(),T=Uvt(),{data:I}=D5({reason:s,enabled:T}),[U,B]=f.useState(!1);f.useEffect(()=>{if(!T||!I||U)return;const z=I?.map?.(Y=>Y.task_id)??fe,X=d.filter(Y=>Y.type==="SHORTCUT").map(Y=>{const{taskId:G}=A_e({context:"widget",widgetId:Y.id});return{...Y,taskId:G}}).filter(Y=>!z.includes(Y.taskId)).filter(Y=>Y.taskId!==$V).map(Y=>Y.id);if(X.length===0)return;X.forEach(Y=>{evt(Y)});const q=d.filter(Y=>!X.includes(Y.id));m(q)},[I,d,T,U]);const D=f.useMemo(()=>d.filter(z=>z.type==="EXPLORE_ASSISTANT"?u:rvt(z.id)?c:z.type==="SHORTCUT"?T:z.type==="WORMHOLE"?j:!0).map(z=>({...z,shouldHide:z.type==="TOP_URLS"&&k.length===0})),[d,k,u,T,j,c]),W=f.useMemo(()=>N.filter(z=>z.type==="WORMHOLE"?j:z.type==="EXPLORE_ASSISTANT"?u:z.type==="SHORTCUT"?T:z.type==="ASSISTANT"?!T:!0),[N,j,u,T]);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-lg flex min-h-full w-full items-center justify-center",children:o.jsxs("div",{style:{width:800},className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-3",children:[g?o.jsx(B_e,{shouldShow:g,title:y,actionLabel:x,icon:v,onDismiss:b,onClick:_}):o.jsx(U_e,{shouldShow:S&&!w&&C==="comet_ntp_set_default",onClose:E,onSetDefault:M}),o.jsx(m0t,{sensors:p,collisionDetection:_xt,onDragOver:P,children:o.jsxs(L0t,{items:D,strategy:b3t,children:[o.jsx(ve.div,{layout:!0,transition:no,className:"-mb-md col-span-full",children:r}),o.jsx(Je,{children:D.map(z=>o.jsx(c2e,{widget:z,editMode:e,handleDelete:O,widgetData:X0t(N,z.type),onShowSettings:B},z.id))})]})})]})}),o.jsx(Je,{children:e&&o.jsx(f2e,{containerRef:n,setEditMode:t,maxWidgetsReached:d.length>=fre,children:o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"grid w-full grid-cols-[repeat(auto-fill,minmax(120px,1fr))] flex-row gap-6 p-6",children:o.jsx(u3t,{widgets:W,handleAdd:L,userWidgets:d,handleRequestWeatherPermission:A,topSitesData:k})})})})})]})});p2e.displayName="HomeWidgets";const _3t=["cometInvitesDashboard"],w3t=({reason:e})=>{const{data:t,isFetching:n}=We({queryFn:()=>P0e({reason:e}),queryKey:_3t});return f.useMemo(()=>({data:t,isFetching:n}),[t,n])},S6="comet.ntp-invite-button.cachedCount",hS="comet.ntp-invite-button.dismissed",E6=3e3,C3t=e=>{const[t,n]=f.useState(null),[r,s]=f.useState(!0),[a,i]=f.useState(!1),[l,c]=f.useState(!1),u=f.useRef(null),d=f.useRef(-1),m=f.useRef(!1);f.useEffect(()=>{if(m.current)return;m.current=!0;const h=Oe.getItem(S6),g=Oe.getItem(hS)==="true";if(h!==null){const y=parseInt(h,10);n(y),s(!1),!g&&y>0&&(i(!0),c(!0),u.current=setTimeout(()=>{c(!1),u.current=null},E6))}else s(!0)},[]),f.useEffect(()=>{if(e===void 0||e<0||e===d.current)return;d.current=e;const h=Oe.getItem(S6),g=h?parseInt(h,10):null;if(g===null)setTimeout(()=>{n(e),s(!1),e>0&&(i(!0),c(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!1),u.current=null},E6))},100);else{n(e),s(!1);const y=Oe.getItem(hS)==="true";e>g?(Oe.removeItem(hS),i(!0),c(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!1),u.current=null},E6)):!y&&e>0?i(!0):(i(!1),c(!1))}return Oe.setItem(S6,e.toString()),()=>{u.current&&(clearTimeout(u.current),u.current=null)}},[e]);const p=f.useCallback(()=>{Oe.setItem(hS,"true"),i(!1),c(!1),u.current&&(clearTimeout(u.current),u.current=null)},[]);return{displayCount:e!==void 0?e:t,shouldShowInitialText:r,hasNewInvites:a,shouldShowShimmer:l,dismissNewInvites:p}},h2e=R.memo(e=>{const{$t:t}=Z(),n=_t(),{trackEvent:r}=je(),{data:s}=w3t({reason:"ntp-invite-button"}),a=s?.remaining_invites!==void 0?Math.max(s.remaining_invites,0):void 0,{displayCount:i,shouldShowInitialText:l,hasNewInvites:c,shouldShowShimmer:u,dismissNewInvites:d}=C3t(a),m=f.useCallback(()=>{r("comet ntp invite button clicked",{availableInvites:i??0,hasNewInvites:c,cometSurface:"comet_home"}),d(),n.push("/browser/invite")},[n,d,r,i,c]),p=f.useMemo(()=>{const g=u||c,y=g?c?"shimmer-state":"normal-state":void 0,x=o.jsx(o.Fragment,{children:l?o.jsx("span",{children:t({defaultMessage:"Invites",id:"Wy+IdbkBFc"})}):i!==null?u?o.jsxs(wn,{variant:"default",speed:"slow",as:"span",className:"relative inline-flex items-center gap-1",children:[o.jsx("span",{className:"text-super",children:o.jsx(No,{value:i,animated:!0,willChange:!0})}),o.jsx("span",{className:"text-super",children:t({defaultMessage:"{count, plural, one {invite} other {invites}} left",id:"zsKWZENN9/"},{count:i})})]}):o.jsxs(o.Fragment,{children:[o.jsx(No,{value:i,animated:!0,willChange:!0}),o.jsx("span",{className:"ml-1",children:t({defaultMessage:"{count, plural, one {invite} other {invites}} left",id:"zsKWZENN9/"},{count:i})})]}):o.jsx("span",{children:t({defaultMessage:"Invites",id:"Wy+IdbkBFc"})})});return g?o.jsx(Je,{mode:"popLayout",initial:!1,children:o.jsx(ve.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"inline-flex items-center",children:x},y)}):o.jsx("span",{className:"inline-flex items-center",children:x})},[i,l,t,u,c]),h=f.useMemo(()=>o.jsx(Je,{mode:"wait",children:i!==null&&i>0&&c&&o.jsx(ve.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.3,ease:[.4,0,.2,1]},children:o.jsx("div",{className:"bg-super text-inverse py-three flex items-center rounded-full px-1.5",children:o.jsx(F,{variant:"micro",color:"defaultInverted",className:"font-medium uppercase leading-none tracking-wider",children:t({defaultMessage:"NEW",id:"5Jcaq49T38"})})})},"new-pill")}),[i,c,t]);return o.jsx("div",{className:"inline-block",children:o.jsx(pe,{...e,icon:gp,text:p,trailingComponent:h,onClick:m})})});h2e.displayName="NTPInviteButton";const S3t=()=>{const{value:e}=$r({flag:"comet-invite-system",defaultValue:!0});return e};function E3t(){const{value:e}=Dt({flag:"at-mention-spaces",subjectType:"user_nextauth_id",defaultValue:!0});return e}function M3t({reason:e,collectionName:t,isLazy:n=!0,enabled:r=!0}){const{$t:s}=Z(),[a,i]=f.useState(()=>!n),{isMobileStyle:l}=Ce(),c=lt(),u=E3t()&&r,{data:d,isStale:m,refetch:p}=We({queryKey:ev(),queryFn:()=>vit({reason:e}),enabled:u&&a,staleTime:10*60*1e3}),h=f.useCallback(()=>{a?m&&p():i(!0)},[a,m,p]),g=f.useMemo(()=>(d?.spaces??[]).map(v=>({uuid:v.uuid,variant:"space",label:v.title,emoji:v.emoji||void 0})),[d]),y=f.useMemo(()=>{const x=zet();if(!(!u||l||!c||x))return t?s({defaultMessage:"Ask anything about { space } or @ mention a Space",id:"NpwyMmamjs"},{space:t}):s({defaultMessage:"Ask anything or @mention a Space",id:"5FEHAEZOKs"})},[s,t,u,l,c]);return f.useMemo(()=>({isAtMentionSpacesEnabled:u,mentionSpacesOptions:g,inputPlaceholder:y,onTrigger:h}),[y,u,g,h])}function fw(){const{value:e}=$r({flag:"shortcut-tasks",defaultValue:!0});return e&&pi()}function yT(){const{gpt4Limit:e,pplxAlphaLimit:t,pplxBetaLimit:n}=rr(),{specialCapabilities:r}=ls(),s=lt(),{hasAccessToProFeatures:a,isMax:i}=Et(),l=ux(),c=!r.unlimitedProSearch&&e<=0&&!a,u=!r.unlimitedResearch&&(e<=0||t<=0),d=e<=0||n<=0,{session:m}=Nt(),p=m?.user?.email??"",{isStudent:h}=c5({email:p,reason:"study-mode-access"});return f.useCallback(g=>{const y=Si[g],x=y===ce.SEARCH&&![de.DEFAULT,de.PRO].includes(g);if(g===de.DEFAULT)return!0;if(s)return Yr(g)===ce.STUDY&&!h?!1:i?!0:c||Yr(g)===ce.RESEARCH&&u||Yr(g)===ce.STUDIO&&d||l(y)?!1:!(!a&&x&&!r.unlimitedProSearch);{const v=r.unlimitedProSearch&&Yr(g)===ce.SEARCH&&!l(y),b=r.unlimitedResearch&&Yr(g)===ce.RESEARCH&&!l(y);return v||b}},[c,u,d,a,r.unlimitedProSearch,r.unlimitedResearch,s,l,i,h])}function mw(){const{$t:e}=Z(),t=lt(),{openVisitorLoginUpsell:n}=gr({enabled:!t}),r=ux(),s=yT(),a=co(),{specialCapabilities:i}=ls(),l=f.useCallback((u,d)=>{const m=Si[u];if(u===de.DEFAULT&&!d)return!1;const p=s(u)===!1||d;if(t)if(p){const h={[ce.SEARCH]:e({defaultMessage:"Want more {copilot}?",id:"Kf+JzdHL3c"},{copilot:"Pro Search"}),[ce.RESEARCH]:e({defaultMessage:"Want more Research?",id:"4cKm89wwuR"}),[ce.STUDIO]:e({defaultMessage:"Try Perplexity Labs",id:"y2BN7EwBoA"}),[ce.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},g={[ce.SEARCH]:e({defaultMessage:"With {pplx} {pro}, get as many as you want",id:"jRMiP6Ut4n"},{pplx:"Perplexity",pro:"Pro"}),[ce.RESEARCH]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Research.",id:"WuvGBcnhvG"}):e({defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),[ce.STUDIO]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Labs.",id:"jmWIIwpGtp"}):e({defaultMessage:"Exclusive access for subscribers",id:"1LB4QwRSMw"}),[ce.STUDY]:e({defaultMessage:"Ask questions and learn",id:"8RzCMAs2/c"})},y=h[m??ce.SEARCH],x=g[m??ce.SEARCH],b={[ce.SEARCH]:De.TRY_COPILOT,[ce.RESEARCH]:De.TRY_RESEARCH,[ce.STUDIO]:De.TRY_LABS}[m??ce.SEARCH]??De.TRY_COPILOT;return a({pitchMessage:{title:y,description:x},origin:b}),!0}else return!1;else{if(u===de.PRO&&i.unlimitedProSearch)return!1;const h={[ce.SEARCH]:e({defaultMessage:"Sign in to access Pro Search",id:"AARKXJYL5U"}),[ce.RESEARCH]:e({defaultMessage:"Sign in to access Perplexity Research",id:"D/01NxLK/G"}),[ce.STUDIO]:e({defaultMessage:"Sign in to try Perplexity Labs",id:"xJYMyIruMK"}),[ce.STUDY]:e({defaultMessage:"Sign in to access Perplexity Study",id:"PiR4Uw7Ibg"})},g={[ce.SEARCH]:e({defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"}),[ce.RESEARCH]:e({defaultMessage:"Deep research and analysis on any topic",id:"vZzVhXmhZo"}),[ce.STUDIO]:e({defaultMessage:"Create projects from scratch, exclusive access for subscribers",id:"STPFx+8/sC"}),[ce.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},y=h[m??ce.SEARCH],x=g[m??ce.SEARCH];return n({title:y,description:x,origin:De.TRY_PRO}),!0}},[e,s,t,a,n,r,i.unlimitedProSearch]),c=f.useCallback(u=>s(u)?!1:(t?a({pitchMessage:{title:e({defaultMessage:"Choose a model",id:"fXlc3idTcy"}),description:e({defaultMessage:"With Perplexity Pro, you get unlimited access to all the latest AI models in one subscription",id:"YHjeXkhaC/"})},origin:De.MODEL_SELECTOR}):n({title:e({defaultMessage:"Sign in to choose a model",id:"BhbQUiYsTB"}),description:e({defaultMessage:"Access the latest AI models from Perplexity, OpenAI, Anthropic (Claude), Google Gemini and more",id:"DDVABeGeBG"}),origin:De.MODEL_SELECTOR}),!0),[s,t,a,n,e]);return f.useMemo(()=>({gateSearchModeSelection:l,gateSearchModelSelection:c}),[l,c])}function g2e(){const e=Xa(),{actions:t}=_n(),{setConfiguredModel:n,setConfiguredSearchMode:r,gpt4Limit:s}=rr(),{specialCapabilities:a}=ls(),{gateSearchModelSelection:i}=mw(),{hasAccessToProFeatures:l}=Et(),c=f.useCallback(()=>!a.unlimitedProSearch&&(s<=0||!l)?de.DEFAULT:de.PRO,[s,l,a.unlimitedProSearch]);return f.useCallback((u=c(),d=e)=>{i(u)||(t.setPreferredSearchModel(d,u),n(u),r(d))},[e,i,c,n,r,t])}function jx(){const e=g2e(),{device:{isWindowsApp:t}}=Lt(),{safeWindowsIpcPublish:n,safeWindowsIpcSubscribe:r}=M5(),s=f.useRef(e);f.useEffect(()=>{s.current=e},[e]);const a=f.useRef(r);return f.useEffect(()=>{a.current=r},[r]),f.useEffect(()=>{if(!t)return;const l=a.current(zh,c=>{c.type===zh&&s.current(c.model,c.searchMode)});return()=>{l?.()}},[t]),f.useCallback((l,c)=>{n(zh,{type:zh,model:l,searchMode:c}),s.current(l,c)},[n])}function k3t({reason:e,enabled:t=!0}){const{$t:n}=Z(),[r,s]=f.useState(!1),{openModal:a}=wt(),i=Ca(),l=lt(),c=fw()&&t,u=jx(),{overwriteSources:d}=H_({reason:e}),{data:m,isStale:p,refetch:h}=D5({reason:e,enabled:c&&r,staleTime:10*60*1e3}),g=f.useCallback(()=>{r?p&&h():s(!0)},[r,p,h]),y=f.useCallback(()=>{a("taskShortcutModal",{source:"typeahead_create"})},[a]),x=f.useMemo(()=>{if(!(!c||i||!l))return n({defaultMessage:"Ask anything. Type @ for mentions and / for shortcuts.",id:"KO0XLRzele"})},[n,i,c,l]),v=f.useCallback((_,w)=>{let C=ce.SEARCH;_===de.ALPHA?C=ce.RESEARCH:_===de.BETA&&(C=ce.STUDIO),u(_,C),d(w)},[u,d]),b=f.useMemo(()=>{const w=(m??[]).map(C=>({uuid:C.task_id,variant:"shortcut",label:`/${C.task_name}`,queryText:C.prompt,className:"group/shortcut-typeahead-option",action:()=>v(C.model_preference,C.sources),convertToNode:!0,rightElement:({focused:S})=>o.jsx(T3t,{shortcut:C,focused:S})}));return c&&l&&w.push({uuid:"create-a-shortcut",variant:"shortcut",label:n({defaultMessage:"+ Create a shortcut",id:"P9a8R5IRCb"}),action:y,convertToNode:!1,isAlwaysVisible:!0}),w},[m,c,l,v,n,y]);return f.useMemo(()=>({isShortcutTasksEnabled:c,shortcutsTypeaheadOptions:b,inputPlaceholder:x,onTrigger:g}),[c,b,x,g])}function T3t({shortcut:e,focused:t}){const{openModal:n}=wt(),r=f.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:K_e(e)})},[n,e]);return o.jsx("div",{className:V("h-5 transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:o.jsx(Te,{icon:Vu,size:"tiny",variant:"common",noPadding:!0,onMouseDown:r})})}const N3t=(e,t)=>{const[n,r]=f.useState(e),s=Uy(r,t);return f.useEffect(()=>{s(e)},[e,s]),n};var j3t={};const A3t=5e3,I3t=3e3,R3t=(e,t=!0)=>{const{$t:n}=Z(),r=pn(),s=t&&r,{sidecarSourceTab:{url:a}}=cs(),i=N3t(a,I3t),l=f.useMemo(()=>j3t.NEXT_PUBLIC_IS_SIDECAR_BUILD?["get_tabs_for_sidecar",i]:["get_tabs_for_ntp"],[i]),{data:c=fe}=We({queryKey:l,queryFn:async()=>(await e.fetchOpenedTabs()).map(m=>({uuid:String(m.tabId),variant:"tab",label:m.title,url:m.url,src:L1(m.url)})),staleTime:A3t,enabled:s}),u=f.useMemo(()=>s?n({defaultMessage:"Ask anything or @mention a tab",id:"37eMdtX5Pe"}):void 0,[n,s]);return f.useMemo(()=>({tabs:c,tabAttachmentsEnabled:s,inputPlaceholder:u}),[u,s,c])},xT=({reason:e,isLazy:t=!0,variants:n,collectionName:r})=>{const[s,a]=f.useState(""),i=Jn(),l=n===void 0||n.includes("tab"),c=n===void 0||n.includes("space"),u=n===void 0||n.includes("shortcut"),{tabs:d,tabAttachmentsEnabled:m,inputPlaceholder:p}=R3t(i,l),{isAtMentionSpacesEnabled:h,mentionSpacesOptions:g,onTrigger:y,inputPlaceholder:x}=M3t({reason:e,collectionName:r,isLazy:t,enabled:c}),{isShortcutTasksEnabled:v,shortcutsTypeaheadOptions:b,inputPlaceholder:_,onTrigger:w}=k3t({reason:e,enabled:u}),C=m||h||v,S=f.useMemo(()=>[...m&&s==="@"?d:[],...h&&s==="@"?g:[],...v&&s==="/"?b:[]],[m,s,d,h,g,v,b]),E=f.useCallback(k=>{a(k),k==="@"?y():k==="/"&&w()},[w,y]),M=f.useMemo(()=>{try{if(typeof document>"u")return""}catch{return}return _??p??x},[_,x,p]);return f.useMemo(()=>({useLexical:C,mentionTypeaheadOptions:S,inputPlaceholder:M,onTriggerTypeahead:E}),[C,S,M,E])};function P3t(){const{value:e}=r5({flag:"enable-audio-video-uploads-attachments",subjectType:"user_nextauth_id",defaultValue:"False"});return f.useMemo(()=>({isAudioVideoFilesEnabled:e==="True"}),[e])}const eW=({reason:e})=>{const t=xt(),{mutateAsync:n}=St({mutationKey:NC(),mutationFn:async i=>(await Frt({request:{url:i.url,thread_id:i.thread_id},reason:e})).file_url,onSuccess:(i,l,c)=>{t.setQueryData(NC(l.url),i),l.callback?.(i,!1)},onError:(i,l,c)=>{l.callback?.("",!1)},retry:!1}),r=f.useCallback(i=>{const l=t.getQueryData(NC(i));return typeof l=="string"?l:null},[t]),s=f.useCallback(async i=>{i.callback?.("",!0);const l=r(i.url);if(l)return i.callback?.(l,!1),l;const c=await n(i);return i.callback?.(c,!1),c},[r,n]),a=f.useCallback(async(i,l)=>{const c=URL.createObjectURL(l);t.setQueryData(NC(i),c)},[t]);return f.useMemo(()=>({getCachedImageDownloadUrl:r,getImageDownloadUrl:s,cacheImageDownloadUrl:a}),[a,r,s])};function O3t(){const{value:e}=Dt({flag:"async-file-attachments-v2",defaultValue:!1,subjectType:"user_nextauth_id"});return e}const L3t=1e4,RM=["autosuggest"],D3t=()=>{const{device:{isMobile:e}}=Lt(),t=xt();return f.useCallback(n=>{const r=t.getQueryData(RM),s=t.getQueryData([...RM,n]);if(s?.length&&s.length===hg(e))return s;if(r){const a=n.replace(/\s+/g,"").toLocaleLowerCase(),i=[];for(const d of r){if(e&&d.url)continue;const[m,p]=e1e(a,d);if(m&&(i.push([p,d]),i.length===hg(e)))break}const l=i.sort(([d],[m])=>d-m).map(([d,m])=>m),[c,u]=J8(l,e,n);if(s?.length){const d=[...s];for(const m of c)if(!d.find(p=>p.query===m.query)&&(d.push(m),d.length===hg(e)))break;return J8(d,e,n)[1]}return u}return fe},[e,t])},F3t=()=>{const{suggestions:e}=ea(),{setSuggestions:t}=to(),n=f.useRef(e);n.current=e;const r=xt(),s=D3t(),a=f.useRef(!1),{device:{isMobile:i}}=Lt(),l=f.useRef(null),c=f.useRef(null),u=f.useRef([]),d=f.useRef({lastMessageID:0}),m=f.useCallback((y,x=!1)=>{const v=s(y);!x&&!v.length||(n.current.length!==v.length||cLe(n.current,v,"query").length!==v.length)&&(n.current=v,t(v))},[s,t]),p=f.useCallback(y=>{try{const x=new WebSocket("wss://suggest.perplexity.ai/suggest/ws");x.onopen=()=>{y?.()},x.onmessage=v=>{let b;try{if(b=JSON.parse(v.data),b.length!==4){ne.error("Invalid autosuggest message",b);return}}catch(P){ne.error("Error parsing autosuggest message",P);return}const[_,w,C,S]=b,E=parseInt(C),M=tft(S),[k,N]=J8(M,i);if(r.setQueryData(RM,(P=fe)=>k.length?pue([...k,...P],"query").sort((L,O)=>L.query.localeCompare(O.query)):P),r.setQueryData([...RM,_],N),E===d.current.lastMessageID&&a.current&&m(_,!0),d.current[E]){const P=performance.now()-d.current[E];u.current.push(P)}},l.current=x}catch(x){ne.error("Error connecting to autosuggest socket",x)}},[i,m,r]),h=f.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{l.current&&(l.current.close(),l.current=null)},L3t)},[]);f.useEffect(()=>(p(),h(),()=>{l.current&&l.current.close(),c.current&&clearTimeout(c.current)}),[p,h]);const g=f.useCallback((y,x=!0)=>{if(a.current=!!y,!a.current)return;m(y);const v=[WebSocket.OPEN,WebSocket.CONNECTING];if(!l.current||!v.includes(l.current.readyState)){x&&p(()=>{g(y,!1)});return}else h();const b=d.current.lastMessageID+1,_=b.toString();d.current.lastMessageID=b;try{const w=JSON.stringify({q:y,uuid:_,full_completion:!0});if(l.current.readyState===WebSocket.CONNECTING)return;l.current.send(w),d.current[b]=performance.now()}catch(w){ne.error("Error sending query for autosuggest",w)}},[p,h,m]);return f.useEffect(()=>{const y=setInterval(()=>{u.current.length!==0&&(lKe({latencies:u.current,isMobile:i}),u.current=[])},Qdt);return()=>clearInterval(y)},[i]),f.useMemo(()=>({handleUpdateAutosuggestions:g}),[g])},U3t=({fileUploadRef:e,showFileUpload:t,attachments:n,setAttachments:r,handleChange:s,setIsUploadingFile:a,focusInput:i,onFileAttachComplete:l})=>{const{inputRef:c}=ea(),u=tV(),[d,m]=f.useState(null),p=f.useCallback(b=>{const _=n===void 0?"paste.txt":`paste-${n.length+1}.txt`,w=new File([b],_,{type:"text/plain"}),C=new DataTransfer;C.items.add(w),m({content:b,fileName:_}),e.current?.uploadFiles(C.files)},[n,e]),h=f.useCallback(()=>{m(null)},[]),g=f.useCallback(b=>{const _=b.clipboardData;if(_&&_.items.length>0){const w=new DataTransfer;for(const C of _.items){if(C.kind==="file"){b.preventDefault();const S=C.getAsFile();S&&w.items.add(S)}if(C.type==="text/plain"){const S=b.clipboardData.getData("Text");S.length>um&&(b.preventDefault(),p(S))}}e.current?.uploadFiles(w.files)}requestAnimationFrame(()=>{c.current&&(c.current.trim(),s(c.current.value,c.current.json))})},[e,s,c,p]),y=f.useCallback(b=>{s(b),c.current?.focus()},[s,c]),x=f.useCallback(b=>{a(!1),b.length>0?(r(b),i(),l?.(b)):r(void 0)},[a,r,i,l]),v=f.useCallback(async b=>{const _=new DataTransfer;for(const w of b){if(w.kind==="file"){const C=w.webkitGetAsEntry();if(!C)continue;if(oxe(C)){const S=w.getAsFile();S&&_.items.add(S)}else if(lxe(C)){const S=await hrt(C);for(const E of S)_.items.add(E)}}if(w.type==="text/plain"&&w.getAsString(C=>{C.length>um?p(C):c.current&&(c.current.append(C),s(c.current.value,c.current.json))}),_.items.length>u)break}e.current?.uploadFiles(_.files)},[e,c,s,u,p]);return f.useEffect(()=>{t||(r(void 0),m(null))},[t,r]),f.useMemo(()=>({handlePaste:g,handlePasteQuery:y,handleCompleteFileUpload:x,handleFileSelect:v,autoCreatedTextFile:d,dismissNotification:h,setAutoCreatedTextFile:m}),[x,v,g,y,d,h])};function B3t(){const{value:e}=Dt({flag:"resize-image-attachments",defaultValue:!1,subjectType:"user_nextauth_id"});return e}function V3t(){const{value:e}=qu({flag:"attachment-token-estimation-params",defaultValue:{max_total_tokens:5e5,type_bytes_per_token:{text:4,image:500},type_subtype_bytes_per_token:{"application/pdf":200,"application/msword":500,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":500,"application/vnd.openxmlformats-officedocument.presentationml.presentation":500},default_bytes_per_token:100},subjectType:"user_nextauth_id"});return e}function $3t(e){return e.every(t=>t instanceof File)}const W3t=({fileInputRef:e,isSignedIn:t,uploadRateLimit:n,maxFilesUpload:r,attachmentTokenEstimationParams:s,forwardedRef:a,existingAttachments:i,showPrivacyWarning:l,connectorsMap:c,onFilePickerOpen:u,onStart:d,onComplete:m,openLoginModal:p,openPricingModal:h,openCompanyDataPrivacyModal:g,closeModal:y,openVisitorLoginUpsell:x,openMicrosoftPicker:v,closeMicrosoftPicker:b,errorMicrosoftPicker:_,toPickerDocument:w,setUploadRateLimit:C,isFollowUp:S,isClearAttachmentsEnabled:E=!1,forceImage:M,refreshBoxCredentials:k,logMicrosoft:N,asyncAttachmentsEnabled:P=!1,setUploadsReady:L,getImageUrl:O,isAudioVideoFilesEnabled:A=!1,reason:j,incompleteParsingEnabled:T=!1,isImageAttachmentResizingEnabled:I=!1,maxAttachmentFileSizeMB:U=Mqe,specialCapabilities:B={unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1},onRemoveFile:D})=>{const{$t:W}=Z(),[z,$]=f.useState(null),[X,q]=f.useState(null),[Y,G]=f.useState([]),[J,K]=f.useState(Y&&Y.length>0?"success":"idle"),[te,re]=f.useState(null),se=`${U}MB`,me=f.useCallback(async(Me,Ze,$e)=>{if(!hi(Me))return null;const at=$e?{type:$e}:void 0,ut=JB(Me)?Me:await O?.(Me)??Me;if(!ut)return new File([],Ze,at);try{const gn=await(await fetch(ut)).blob();return new File([gn],Ze,at)}catch{return new File([],Ze,at)}},[O]);f.useEffect(()=>{E?G([]):(async()=>{const Ze=await Promise.all((i??fe).map(async $e=>{const at=K8($e.split("/").pop()||"file"),ut=S2($e);let Bt=new File([],at,{type:ut}),gn;if(hi(Bt)){const Gn=await me($e,at,ut);Bt=Gn??Bt,gn=Gn?URL.createObjectURL(Gn):void 0}return{id:Ir(),file:Bt,nextURL:$e,status:"success",thumbnailSource:gn}}));G(Ze)})()},[E,i,me]),f.useEffect(()=>{if(!L)return;if(!P||!Y.length){L(!0);return}const Me=$e=>T?$e.status==="parsing"||$e.status==="success"||$e.status==="failed":$e.status==="success"||$e.status==="failed",Ze=Y.every(Me);L(Ze)},[Y,P,L,T]),f.useImperativeHandle(a,()=>({uploadFiles:Me=>ue(Array.from(Me)),clearFiles:oe}));const oe=f.useCallback(()=>{G([]),K("idle"),m?.([]),e.current?.value&&(e.current.value=""),re(null)},[e,m]),ge=f.useCallback((Me,Ze)=>{G($e=>{let at=$e;return Me?at=$e.filter(ut=>ut.nextURL!==Me):Ze&&(at=$e.filter(ut=>!ut.nextURL?.includes(Ze))),at.length===0&&K("idle"),m?.(at.filter(ut=>!!ut.nextURL).map(ut=>({url:ut.nextURL??"",file:ut.file,resizedFile:ut.resizedFile}))??[]),D?.(Me,Ze),at}),e.current?.value&&(e.current.value="")},[e,m,D]),xe=f.useCallback(()=>{G([]),K("idle"),e.current?.value&&(e.current.value=""),re(null)},[e]),ye=f.useCallback(Me=>{q(null),$(Me??W(Ol[Uv.generic_upload_error])),Y?.length&&K("success")},[W,Y?.length]),_e=f.useCallback(()=>{if(!p)return;const Me=W({defaultMessage:"Sign in to upload files and photos",id:"gEOi1eLJ7C"}),Ze=W({defaultMessage:"Analyze files and photos for free",id:"nu4bK5/Y5T"});x?x({title:Me,description:Ze,origin:De.FILE_UPLOAD,sheetModalVariant:S?"bottom-sheet-gradient":"full-sheet"}):p({origin:De.FILE_UPLOAD,pitchMessage:{title:Me,description:Ze}})},[W,S,p,x]),be=f.useCallback(()=>{if(!h)return;const Me=W({defaultMessage:"Want more uploads?",id:"iInvIJ0Dv/"}),Ze=W({defaultMessage:"Upgrade access for subscribers",id:"UwiL3wLZE3"});h({pitchMessage:{title:Me,description:Ze},origin:De.FILE_UPLOAD})},[W,h]),Ne=f.useCallback(async(Me,Ze)=>{let $e;P?$e=await put({request:{file_uuids:[Me]},reason:j}):$e={file_uuid:Me,success:!0,error_code:null};const at=$e.success?"success":"failed";at==="failed"?(ye(W(Ol[$e.error_code??G8.parsing_error],{filename:Ze})),G(ut=>ut.filter(Bt=>Bt.file_uuid!==Me))):G(ut=>[...(ut??[]).map(Bt=>Bt.file_uuid===Me?{...Bt,status:at}:Bt)])},[ye,P,W,j]),Ee=f.useCallback(Me=>Me instanceof File&&HY.includes(Me.type)||!(Me instanceof File)&&Me.mimeType&&HY.includes(Me.mimeType)?W(Ol[Uv.unsupported_type]):Me instanceof File&&Me.size>U*WY||!(Me instanceof File)&&Me.sizeBytes&&Me.sizeBytes>U*WY?W(Ol[Uv.too_large],{max:se}):Me instanceof File&&Me.size<$Y||!(Me instanceof File)&&Me.sizeBytes&&Me.sizeBytes<$Y?W(Ol.too_small):Me.name?null:W(Ol.no_name),[W,se,U]),Re=f.useCallback(async(Me,Ze,$e,at,ut,Bt)=>{if(!Me.ok){ye(),ne.warn(`[localAttachmentUpload] upload failed for ${Bt}, response=${Me}`);return}let gn=null;try{const Zt=await Me.json();if(Zt?.moderation?.[0]?.status==="rejected"){ye(W(Ol.failed_moderation)),ne.warn(`[localAttachmentUpload] upload failed moderation for ${Bt}, response=${Me}`);return}gn=q8(Zt?.eager?.[0]?.secure_url??Zt?.secure_url)}catch{gn=`${$e}${at}`.replace("${filename}",`${Ze.name}`)}if(!gn){ye();return}const Gn=Em(gn)?"success":"parsing";G(Zt=>Zt.map(Hr=>Hr.id===ut?{...Hr,nextURL:gn,file_uuid:Bt,status:Gn}:Hr)),K("success"),re("local"),Bt&&Gn=="parsing"&&await Ne(Bt,Ze.name)},[ye,W,Ne]),Ae=f.useCallback(async(Me,Ze,$e)=>{if(!Me?.success){ye();return}if(Me.rate_limited){be(),ye(W(Ol.rate_limited));return}if(!Me.filename||!Me.url){ye();return}const at=Me.url&&Em(Me.url)?q8(Me.url):K8(Me.url),ut=S2(at);console.log(Me.url,Me.filename,ut);const Bt=await me(Me.url,Me.filename,ut),gn=Em(Me.url)?"success":"parsing";G(Gn=>Gn.map(Zt=>Zt.id===$e?{...Zt,file:Bt??Zt.file,nextURL:at,file_uuid:Me.file_uuid??void 0,status:gn,thumbnailSource:Bt?URL.createObjectURL(Bt):void 0}:Zt)),K("success"),re(Ze),Me.file_uuid&&gn=="parsing"&&await Ne(Me.file_uuid,Me.filename)},[me,ye,be,W,Ne]),st=f.useCallback(async(Me,Ze)=>{if(Me?.rate_limited){be(),ye(W(Ol.rate_limited));return}if(!Me||!Me.fields||!Me.s3_bucket_url){ye();return}fxe(Ze)&&G(at=>at.map(ut=>ut.id===Ze.id?{...ut,thumbnailSource:URL.createObjectURL(Ze.file)}:ut));const $e=new FormData;Object.entries(Me.fields).forEach(([at,ut])=>{$e.append(at,ut)}),$e.append("file",Ze.file);try{const at=await fetch(Me.s3_bucket_url,{method:"POST",body:$e});await Re(at,Ze.file,Me.s3_bucket_url,Me.fields.key,Ze.id,Me.file_uuid??void 0)}catch(at){ne.warn(`[localAttachmentUpload] upload failed for ${Me.file_uuid} with error=${at}`),ye()}},[be,ye,W,Re]),it=f.useCallback(Me=>{const Ze=Me.filter(at=>at.status==="success").reduce((at,ut)=>{const Bt=ut.file.type,gn=Bt.split("/")[0],Gn=s?.type_subtype_bytes_per_token?.[Bt],Zt=s?.type_bytes_per_token?.[gn],Hr=s?.default_bytes_per_token,Ni=Gn??Zt??Hr,td=ut.file.size,fo=Ni?td/Ni:0;return at+fo},0),$e=s?.max_total_tokens;return $e&&Ze>$e},[s]);f.useEffect(()=>{if(!Y.length)return;Y.every(Ze=>Ze.status==="success"||Ze.status==="failed")&&it(Y)&&q(W({defaultMessage:"Performance may be degraded for larger files.",id:"xwKpaJzWgU"}))},[Y,it,W,z]);const Se=f.useCallback((Me,Ze,$e)=>{if($3t(Me)){let at=0;Promise.all(Me.map(async ut=>{const Bt=Ee(ut);if(Bt){ye(Bt);return}let gn=ut;if(hi(ut))try{I&&(gn=await Zct(ut))}catch{ne.warn(`Unable to resize image file: ${ut.name}`)}const Gn={id:Ir(),file:gn,status:"uploading"};G(Hr=>[...Hr??[],Gn]);const Zt=await oV({file:gn,fileSource:$e,forceImage:M,reason:j});st(Zt,Gn),at++})).then(()=>{n&&n>0&&C&&C(at)})}else Ze&&Me.forEach(at=>{const ut=Ee(at);if(ut)ye(ut);else{const Bt=S2(at.name??""),gn=new File([""],at.name??"",{type:Bt}),Gn={id:at.id,file:gn,status:"uploading"};G(Zt=>[...Zt??[],Gn]),mut({remote_file_id:at.id,connection_type:Ze.toUpperCase(),reason:j}).then(Zt=>{Ae(Zt,Ze,Gn.id)})}})},[n,C,Ee,M,j,ye,I,st,Ae]),ue=f.useCallback((Me,Ze,$e)=>{if(!(!Me||Me.length===0)){if($e!==YF){if(!t&&!B.fileUpload){_e();return}if(n&&n<=0){be();return}if(Me.length+(Y?.length??0)>r){$(W(Ol.over_file_count,{maxNumFiles:r}));return}}d?.(),K("loading"),Se(Me,Ze,$e)}},[t,n,Y,r,Se,d,_e,be,W,B.fileUpload]),ke=f.useCallback(async(Me,Ze,$e)=>{try{const ut=await(await fetch(Me)).blob(),Bt=$e||ut.type||"application/octet-stream";return new File([ut],Ze,{type:Bt})}catch{return new File([],Ze,$e?{type:$e}:void 0)}},[]),et=f.useCallback(async(Me,Ze,$e)=>{const ut=($e?$e.startsWith("image/"):hi(Me))?await me(Me,Ze,$e):await ke(Me,Ze,$e);ut&&ue([ut],"local")},[ke,me,ue]),{openPicker:Ge,isReady:ft}=Qxe({clientId:c?.google_drive?.picker_credentials?.client_id??"",apiKey:c?.google_drive?.picker_credentials?.api_key??"",loginHint:c?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:A}),[Qe,Ve]=f.useState(!1),[Le,ot]=f.useState(""),vt=f.useCallback(()=>Ve(!1),[]),Rt=f.useCallback(Me=>{const Ze=Me.map($e=>({id:$e.id,name:$e.name,sizeBytes:$e.size,mimeType:D8[$e.extension]}));ue(Ze,"box"),vt()},[ue,vt]),{openPicker:jt,cleanupPicker:dn}=mxe({apiKey:(Le||c?.box?.picker_credentials?.api_key)??"",mode:"attachment",isAudioVideoFilesEnabled:A,onPicked:Rt,onCancel:vt}),On=f.useCallback(async()=>{const Me=c?.box?.picker_credentials?.expires_at??"";if(Me&&k){const Ze=new Date(Me);if(isNaN(Ze.getTime())){Ve(!0);return}if(Ze<new Date){const at=await k();ot(at?.api_key??"")}}Ve(!0)},[c?.box?.picker_credentials?.expires_at,k]);f.useEffect(()=>{Qe&&jt()},[Qe,jt]);const yr=f.useCallback((Me,Ze)=>{if(!w||Ze!=="onedrive"&&Ze!=="sharepoint")return;const $e=Me.map(at=>w(at,Ze)).filter(at=>at!==null);ue($e,Ze),b?.()},[w,ue,b]),{openPicker:Ke}=yxe({clientId:c?.dropbox?.picker_credentials?.client_id??""}),Xe=f.useCallback(Me=>{const Ze=Me.map($e=>{const at=E_($e.name);return at?{id:$e.id,name:$e.name,sizeBytes:$e.bytes,mimeType:D8[at]}:null}).filter($e=>$e!==null);ue(Ze,"dropbox")},[ue]),gt=f.useCallback(()=>ye(W({defaultMessage:"Unable to retrieve files from connector.",id:"4seKuUP1Wo"})),[ye,W]),zt=f.useCallback((Me,Ze)=>{if(Me=="google_drive"&&ft)Ge({mode:"attachment",onPicked:$e=>ue($e,Me)});else if(Me==="onedrive"||Me==="sharepoint"){const $e=c?.[Me];v?.({connector:Me,clientId:$e?.picker_credentials?.client_id??"",tenantName:$e?.picker_credentials?.tenant_name??"",loginHint:$e?.connection_display_name??"",webUrl:Ze,mode:"attachment",isAudioVideoFilesEnabled:A,onPicked:at=>yr(at,Me),onError:_,onCancel:b,log:N})}else Me==="dropbox"?Ke({mode:"attachment",isAudioVideoFilesEnabled:A,onPicked:Xe,onError:gt}):Me=="box"&&On()},[ft,c,Ge,ue,v,yr,b,_,Ke,Xe,gt,On,N,A]),hn=f.useCallback(Me=>{g&&g(()=>{y?.(),!Me||Me==="local"?(e.current?.click(),u?.()):zt(Me)})},[e,y,g,zt,u]),zn=f.useCallback(Me=>{if(!t&&!B.fileUpload){_e();return}if(n&&n<=0){be();return}if(l&&!Fn(c8)){hn(Me),rn(c8,"true",{expires:30});return}!Me||Me==="local"?(e.current?.click(),u?.()):zt(Me)},[t,n,l,e,_e,be,hn,zt,u,B.fileUpload]);return f.useEffect(()=>{let Me=null;return X&&(Me=setTimeout(()=>{q(null)},Eqe)),()=>{Me&&clearTimeout(Me)}},[X]),f.useEffect(()=>{Y&&m?.(Y.filter(Me=>!!Me.nextURL).map(Me=>({url:Me.nextURL??"",file:Me.file,resizedFile:Me.resizedFile})))},[Y,m]),f.useMemo(()=>({errorMessage:z,warningMessage:X,uploadedFiles:Y,uploadSource:te,status:J,fileInputRef:e,handleClearFiles:oe,handleRemoveFile:ge,handleStartUpload:zn,handleFileInput:ue,attachFromUrl:et,removeAllFiles:xe,handleOpenLoginModal:_e,handleOpenPricingModal:be,isBoxOpen:Qe,onCloseBox:vt,cleanupBoxPicker:dn,setErrorMessage:$}),[z,X,Y,te,J,e,oe,ge,zn,ue,et,xe,_e,be,Qe,vt,dn])},H3t=({fileUploadRef:e,disablePrivacyWarning:t,isAudioVideoFilesEnabled:n,isClearAttachmentsEnabled:r,isFollowUp:s,existingAttachments:a,organization:i,lastResult:l,onStartFileUpload:c,onCompleteFileUpload:u,setUploadsReady:d,reason:m,incompleteParsingEnabled:p=!1,specialCapabilities:h,askInputRef:g,onRemoveFile:y})=>{const x=f.useRef(null),{inputRef:v}=ea(),{openModal:b,closeModal:_}=wt(),w=tV(),C=V3t(),{value:S}=Dt({flag:"async-attachment-processing",defaultValue:!1,subjectType:"user_nextauth_id"}),E=B3t(),M=lt(),{openVisitorLoginUpsell:k}=gr({enabled:!M}),N=co(),{hasDataRetentionWarning:P,connectorLimits:L}=Sa({reason:m}),{connectorsMap:O}=M_({reason:m}),{uploadRateLimit:A,setUploadRateLimit:j}=rr(),{hasActiveSubscription:T}=Et(),I=A??(T?Wpe:$pe),U=f.useCallback(xe=>b("loginModal",xe),[b]),B=f.useCallback(xe=>{N(xe)},[N]),D=f.useCallback(xe=>b("companyDataPrivacyModal",{organizationName:i?.display_name??"",onContinue:xe}),[b,i]),{onOpen:W,onClose:z,onError:$,toPickerDocument:X,options:q,onSelectSite:Y,isOpen:G,log:J}=xxe({reason:m,mode:"attachment"}),{mutateAsync:K}=hxe({reason:m}),{getCachedImageDownloadUrl:te,getImageDownloadUrl:re}=eW({reason:m}),se=f.useCallback(async xe=>l?.backend_uuid?await re({url:xe,thread_id:l.backend_uuid}):te(xe),[te,re,l?.backend_uuid]),me=W3t({fileInputRef:x,isSignedIn:M,uploadRateLimit:I,maxFilesUpload:w,attachmentTokenEstimationParams:C,forwardedRef:e,showPrivacyWarning:P&&!t,existingAttachments:a,connectorsMap:O,onStart:c,onComplete:u,openLoginModal:U,openPricingModal:B,openCompanyDataPrivacyModal:D,closeModal:_,openVisitorLoginUpsell:k,openMicrosoftPicker:W,closeMicrosoftPicker:z,errorMicrosoftPicker:$,toPickerDocument:X,setUploadRateLimit:j,isFollowUp:s,isClearAttachmentsEnabled:r,refreshBoxCredentials:K,logMicrosoft:J,asyncAttachmentsEnabled:S,setUploadsReady:d,getImageUrl:se,isAudioVideoFilesEnabled:n,reason:m,incompleteParsingEnabled:p,isImageAttachmentResizingEnabled:E,maxAttachmentFileSizeMB:L?.max_attachment_file_size_mb,specialCapabilities:h,onRemoveFile:y}),{attachFromUrl:oe,removeAllFiles:ge}=me;return f.useImperativeHandle(g??null,()=>({addMediaFile:async(xe,ye,_e)=>{await oe(xe,ye,_e)},focusInput:()=>{v.current?.focus()},removeAttachments:()=>{ge()}}),[oe,v,ge]),f.useMemo(()=>({...me,fileInputRef:x,microsoftFilePickerOptions:q,handleSelectSharepointSite:Y,isMicrosoftFilePickerOpen:G,onCloseMicrosoft:z,addMediaFile:oe,removeAllFiles:ge}),[me,Y,G,q,z,oe,ge])};var z3t={};const G3t=({setInput:e})=>{const t=Ut();f.useEffect(()=>{if(!t||!z3t.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const n=t.get("p_q");n&&e(n)},[t,e])},umn="web.frontend.realtime.voice",dmn="oai-realtime-v2v-tool-call",fmn=4096,q3t=.7;var mre;(function(e){e.ControlBrowser="control_browser",e.CloseBrowserTabs="close_browser_tabs",e.GroupOpenBrowserTabs="group_open_browser_tabs",e.OpenNewBrowserTab="open_page",e.SearchBrowser="search_browser",e.UngroupOpenBrowserTabs="ungroup_open_browser_tabs"})(mre||(mre={}));var pre;(function(e){e.MobileWeb="mobile_web",e.Web="web",e.macOS="macos",e.iOS="ios",e.Android="android",e.Windows="windows"})(pre||(pre={}));function K3t(){return Intl.DateTimeFormat().resolvedOptions().timeZone}async function mmn({body:e,reason:t}){try{const n=await ae.POST("/rest/realtime/v1/session",t,{timeoutMs:Fe({productionMs:1e4,clientSideMs:1e4}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const s=n.response.statusText||"Unknown realtime session error";return{status:n.response.status,error:`Failed to get realtime session: ${s}`}}return{data:n.data,status:n.response.status,error:null}}catch(n){return ne.error("Failed to get realtime session",n),{data:null,status:500,error:`Failed to get realtime session: ${n.message||"Internal server error"}`}}}async function Y3t({body:e,reason:t}){try{const n=await ae.POST("/rest/realtime/transcription-session",t,{timeoutMs:Fe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});return n.response.ok?{data:n.data,status:n.response.status,error:null}:{status:n.response.status,error:`Failed to get realtime transcription session: ${n.response.statusText}`}}catch(n){return ne.error("Failed to get realtime transcription session",n),{data:null,status:500,error:`Failed to get realtime transcription session: ${n}`}}}async function pmn({body:e,reason:t}){try{const n=await ae.POST("/rest/realtime/execute-tools",t,{timeoutMs:Fe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const s=await n.response.text();throw new Error(`Failed to execute tools: ${s}`)}return n.data}catch(n){ne.error("Failed to execute tools",n);return}}async function hmn({entry:e,analyticsParams:t,reason:n}){try{const r=await ae.POST("/rest/realtime/create-entry",n,{timeoutMs:Fe({productionMs:5e3}),numRetries:1,body:{...e,analytics_params:{...t,timezone:K3t(),visitor_id:S_()}},headers:{"content-type":"application/json"}});if(!r.response.ok){const s=await r.response.text();throw new Error(`Failed to create entry: ${s}`)}return r.data}catch(r){ne.error("Failed to create entry",r);return}}const Q3t=({callbacks:e,config:t,reason:n})=>{const[r,s]=f.useState(!1),[a,i]=f.useState(""),[l,c]=f.useState(!1),[u,d]=f.useState(null),[m,p]=f.useState(()=>{const K=Oe.getItem(J4);return K?K==="true":null}),{device:{isWindowsApp:h}}=Lt(),{trackEvent:g}=je(),y=t.silenceThreshold??30,x=t.silenceDuration??5e3,v=f.useRef(null),b=f.useRef(null),_=f.useRef(""),w=f.useRef(null),C=f.useRef(!1),S=f.useRef(null),E=f.useRef(null),M=f.useRef(null),k=f.useRef(null),N=f.useRef(null),P=f.useRef(new Map),L=f.useRef(null),O=f.useRef(null),A=f.useRef(null),j=f.useRef([]),T=f.useRef(null),I=f.useCallback(async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(te=>te.stop()),p(!0),Oe.setItem(J4,"true"),!0}catch(K){return d(`Microphone permission denied. ${K}`),p(!1),Oe.setItem(J4,"false"),!1}},[]),U=f.useRef(!1),B=f.useCallback(()=>{w.current&&(w.current.getTracks().forEach(K=>K.stop()),w.current=null)},[]),D=f.useCallback(()=>{if(C.current=!1,M.current&&(clearTimeout(M.current),M.current=null),S.current&&(S.current.close(),S.current=null,E.current=null),v.current&&r&&v.current.stop(),T.current&&(clearInterval(T.current),T.current=null),A.current&&(A.current.port.onmessage=null,A.current.disconnect(),A.current=null),b.current&&b.current.stop(),B(),_.current="",i(""),P.current.clear(),s(!1),N.current&&(N.current.close(),N.current=null),k.current){const K=Date.now()-k.current;g("stop transcription",{durationMs:K})}k.current=null,e?.onStop?.()},[e,B,g,r]),W=f.useCallback(K=>{if(!K||!C.current)return;const te=K.frequencyBinCount,re=new Uint8Array(te);K.getByteFrequencyData(re),re.reduce((me,oe)=>me+oe)/te<y?M.current||(M.current=setTimeout(()=>{C.current&&e?.onSilence?.()},x)):M.current&&(clearTimeout(M.current),M.current=null),C.current&&requestAnimationFrame(()=>W(K))},[e,y,x]),z=f.useCallback(()=>Array.from(P.current.values()).map(te=>te.finalTranscript||te.partialTranscript||"").join(" ").trim(),[P]),$=f.useCallback(K=>{const{type:te,item_id:re}=K;if(!re)return;P.current.has(re)||P.current.set(re,{itemId:re,partialTranscript:"",finalTranscript:""});const se=P.current.get(re),me=O.current||"";switch(te){case"conversation.item.input_audio_transcription.delta":{const{delta:oe}=K;me==="whisper-1"?se.partialTranscript=oe:se.partialTranscript+=oe;break}case"conversation.item.input_audio_transcription.completed":{const{transcript:oe}=K;typeof oe=="string"&&(se.finalTranscript=oe);break}case"input_audio_buffer.committed":{K.previous_item_id&&(se.previousItemId=K.previous_item_id);break}}P.current.set(re,se),i(z())},[z]),X=f.useCallback(async()=>{const K=await Y3t({body:{source:h?h3:Hpe,timezone:qF,turn_detection_threshold:q3t,response_language:"en"},reason:n});if(!K.data?.client_secret)throw ne.error("No ephemeral key from server"),new Error("Unable to start OAI session");L.current=K.data.session_id,O.current=K.data.model_name;const re=["realtime",`openai-insecure-api-key.${K.data.client_secret}`,"openai-beta.realtime-v1"],se=new WebSocket("wss://api.openai.com/v1/realtime?intent=transcription",re);N.current=se,se.onopen=()=>ne.info("OpenAI WS connected (base64 PCM approach)"),se.onerror=me=>{ne.error("OAI WS error:",me),d("OpenAI WS error")},se.onclose=me=>{ne.info("OAI WS closed:",me.code)},se.onmessage=me=>{try{const oe=JSON.parse(me.data);$(oe)}catch(oe){ne.error("Invalid OAI WS message:",me.data,oe)}}},[$,h,n]),q=f.useCallback(K=>{let te=0;for(const me of K)te+=me.length;const re=new Int16Array(te);let se=0;for(const me of K)re.set(me,se),se+=me.length;return re},[]),Y=f.useCallback(K=>{const te=K.buffer;let re="";const se=new Uint8Array(te);for(const me of se)re+=String.fromCharCode(me);return btoa(re)},[]),G=f.useCallback(async K=>{const te=new AudioContext;S.current=te,await te.audioWorklet.addModule("/audio-worklet.js");const re=new AudioWorkletNode(te,"pcm-worklet-processor");A.current=re,re.port.onmessage=me=>{if(!C.current)return;const oe=me.data;j.current.push(oe)},T.current||(T.current=setInterval(()=>{if(!C.current||!N.current||N.current.readyState!==WebSocket.OPEN||j.current.length===0)return;const me=q(j.current);j.current=[];const oe=Y(me),ge={event_id:`evt-${Date.now()}`,type:"input_audio_buffer.append",audio:oe};N.current.send(JSON.stringify(ge))},500));const se=te.createMediaStreamSource(K);se.connect(re),re.connect(te.destination),E.current=te.createAnalyser(),E.current.fftSize=256,se.connect(E.current),requestAnimationFrame(()=>W(E.current))},[W,q,Y]),J=f.useCallback(async()=>{if(d(null),k.current=Date.now(),g("start transcription"),C.current=!0,(m===null||m===!1)&&(c(!0),!await I())){c(!1),d("Microphone permission is required for voice input"),e?.onStop?.(),C.current=!1;return}try{await X();const K=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(async te=>{if(p(!1),!await I())throw te;return navigator.mediaDevices.getUserMedia({audio:!0})});w.current=K,await G(K),U.current&&b.current&&(_.current="",i(""),b.current.start(),b.current.onspeechend=()=>D()),s(!0),c(!1),e?.onStart?.()}catch(K){d(`Failed to start recording. ${K}`),C.current=!1}},[e,m,I,g,D,X,G]);return f.useMemo(()=>({isTranscribing:r,isInitializing:l,transcription:a,error:u,startTranscription:J,stopTranscription:D}),[u,l,r,J,D,a])};function He(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function y2e(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);n.search=r.toString(),console.warn(`Minified Lexical warning #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const jl=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,X3t=jl&&"documentMode"in document?document.documentMode:null,Jo=jl&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),np=jl&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),PM=!(!jl||!("InputEvent"in window)||X3t)&&"getTargetRanges"in new window.InputEvent("input"),jb=jl&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),fy=jl&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Z3t=jl&&/Android/.test(navigator.userAgent),x2e=jl&&/^(?=.*Chrome).*/i.test(navigator.userAgent),hre=jl&&Z3t&&x2e,Ab=jl&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&Jo&&!x2e;function v2e(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}const J3t=1,e5t=3,t5t=9,n5t=11,rp=0,b2e=1,my=2,r5t=0,s5t=1,a5t=2,OM=4,LM=8,tW=128,i5t=1792|(112|(3|OM|LM)|tW),nW=1,rW=2,sW=3,aW=4,iW=5,oW=6,vT=jb||fy||Ab?"":"",Ou=`

`,o5t=np?"":vT,sp={bold:1,capitalize:1024,code:16,highlight:tW,italic:2,lowercase:256,strikethrough:OM,subscript:32,superscript:64,underline:LM,uppercase:512},l5t={directionless:1,unmergeable:2},gre={center:rW,end:oW,justify:aW,left:nW,right:sW,start:iW},c5t={[rW]:"center",[oW]:"end",[aW]:"justify",[nW]:"left",[sW]:"right",[iW]:"start"},u5t={normal:0,segmented:2,token:1},d5t={[r5t]:"normal",[a5t]:"segmented",[s5t]:"token"},yre="$config";function _2e(e,t,n,r,s,a){let i=e.getFirstChild();for(;i!==null;){const l=i.__key;i.__parent===t&&(Pe(i)&&_2e(i,l,n,r,s,a),n.has(l)||a.delete(l),s.push(l)),i=i.getNextSibling()}}const f5t=100;let IO=!1,lW=0;function m5t(e){lW=e.timeStamp}function M6(e,t,n){const r=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||r&&e.previousSibling===s)||r&&kT(e,n)!==void 0}function p5t(e,t,n){const r=Ec(Io(n));let s=null,a=null;r!==null&&r.anchorNode===e&&(s=r.anchorOffset,a=r.focusOffset);const i=e.nodeValue;i!==null&&EW(t,i,s,a,!1)}function h5t(e,t,n){if(Be(e)){const r=e.anchor.getNode();if(r.is(n)&&e.format!==r.getFormat())return!1}return Zu(t)&&n.isAttached()}function g5t(e,t,n,r){for(let s=e;s&&!fTt(s);s=vw(s)){const a=kT(s,t);if(a!==void 0){const i=Is(a,n);if(i)return Vn(i)||!os(s)?void 0:[s,i]}else if(s===r)return[r,gEe(n)]}}function w2e(e,t,n){IO=!0;const r=performance.now()-lW>f5t;try{$i(e,()=>{const s=rt()||function(p){return p.getEditorState().read(()=>{const h=rt();return h!==null?h.clone():null})}(e),a=new Map,i=e.getRootElement(),l=e._editorState,c=e._blockCursorElement;let u=!1,d="";for(let p=0;p<t.length;p++){const h=t[p],g=h.type,y=h.target,x=g5t(y,e,l,i);if(!x)continue;const[v,b]=x;if(g==="characterData")r&&nt(b)&&Zu(y)&&h5t(s,y,b)&&p5t(y,b,e);else if(g==="childList"){u=!0;const _=h.addedNodes;for(let S=0;S<_.length;S++){const E=_[S],M=pEe(E),k=E.parentNode;if(k!=null&&E!==c&&M===null&&!M6(E,k,e)){if(np){const N=(os(E)?E.innerText:null)||E.nodeValue;N&&(d+=N)}k.removeChild(E)}}const w=h.removedNodes,C=w.length;if(C>0){let S=0;for(let E=0;E<C;E++){const M=w[E];(M6(M,y,e)||c===M)&&(y.appendChild(M),S++)}C!==S&&a.set(v,b)}}}if(a.size>0)for(const[p,h]of a)h.reconcileObservedMutation(p,e);const m=n.takeRecords();if(m.length>0){for(let p=0;p<m.length;p++){const h=m[p],g=h.addedNodes,y=h.target;for(let x=0;x<g.length;x++){const v=g[x],b=v.parentNode;b==null||v.nodeName!=="BR"||M6(v,y,e)||b.removeChild(v)}}n.takeRecords()}s!==null&&(u&&_a(s),np&&bEe(e)&&s.insertRawText(d))})}finally{IO=!1}}function C2e(e){const t=e._observer;t!==null&&w2e(e,t.takeRecords(),t)}function S2e(e){(function(t){lW===0&&Io(t).addEventListener("textInput",m5t,!0)})(e),e._observer=new MutationObserver((t,n)=>{w2e(e,t,n)})}function y5t(e){const t=new Map,n=new Set;for(let r=typeof e=="function"?e:e.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:s}=AW(r);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&n.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:n,sharedConfigMap:t}}let x5t=class E2e{node;knownState;unknownState;sharedNodeState;size;constructor(t,n,r=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=n,this.unknownState=r,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,l=a!==void 0?a:function(c,u,d){let m=d.size;if(u)for(const p in u){const h=c.get(p);h&&d.has(h)||m++}return m}(i,r,s);this.size=l}getValue(t){const n=this.knownState.get(t);if(n!==void 0)return n;this.sharedNodeState.sharedConfigMap.set(t.key,t);let r=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(r=t.parse(s)),this.updateFromKnown(t,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},n={};for(const[r,s]of this.knownState)r.isEqual(s,r.defaultValue)?delete t[r.key]:t[r.key]=r.unparse(s);for(const r of this.sharedNodeState.flatKeys)r in t&&(n[r]=t[r],delete t[r]);return xre(t)&&(n.$=t),n}getWritable(t){if(this.node===t)return this;const{sharedNodeState:n,unknownState:r}=this,s=new Map(this.knownState);return new E2e(t,n,function(a,i,l){let c;if(l)for(const[u,d]of Object.entries(l)){const m=a.get(u);m?i.has(m)||i.set(m,m.parse(d)):(c=c||{},c[u]=d)}return c}(n.sharedConfigMap,s,r),s,this.size)}updateFromKnown(t,n){const r=t.key;this.sharedNodeState.sharedConfigMap.set(r,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&r in a||(a&&(delete a[r],this.unknownState=xre(a)),this.size++),s.set(t,n)}updateFromUnknown(t,n){const r=this.sharedNodeState.sharedConfigMap.get(t);r?this.updateFromKnown(r,r.parse(n)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=n)}updateFromJSON(t){const{knownState:n}=this;for(const r of n.keys())n.set(r,r.defaultValue);if(this.size=n.size,this.unknownState=void 0,t)for(const[r,s]of Object.entries(t))this.updateFromUnknown(r,s)}};function v5t(e){const t=e.getWritable(),n=t.__state?t.__state.getWritable(t):new x5t(t,M2e(t));return t.__state=n,n}function M2e(e){return e.__state?e.__state.sharedNodeState:fEe(NW(),e.getType()).sharedNodeState}function xre(e){if(e)for(const t in e)return e}function vre(e,t,n){for(const[r,s]of t.knownState){if(e.has(r.key))continue;e.add(r.key);const a=n?n.getValue(r):r.defaultValue;if(a!==s&&!r.isEqual(a,s))return!0}return!1}function bre(e,t,n){const{unknownState:r}=t,s=n?n.unknownState:void 0;if(r){for(const[a,i]of Object.entries(r))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function _re(e,t){const n=e.__state;return n&&n.node===e?n.getWritable(t):n}function wre(e,t){const n=e.__mode,r=e.__format,s=e.__style,a=t.__mode,i=t.__format,l=t.__style,c=e.__state,u=t.__state;return(n===null||n===a)&&(r===null||r===i)&&(s===null||s===l)&&(e.__state===null||c===u||function(d,m){if(d===m)return!0;if(d&&m&&d.size!==m.size)return!1;const p=new Set;return!(d&&vre(p,d,m)||m&&vre(p,m,d)||d&&bre(p,d,m)||m&&bre(p,m,d))}(c,u))}function Cre(e,t){const n=e.mergeWithSibling(t),r=Rr()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function Sre(e){let t,n,r=e;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(t=r.getPreviousSibling())!==null&&nt(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(wre(t,r)){r=Cre(t,r);break}break}t.remove()}for(;(n=r.getNextSibling())!==null&&nt(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(n.__text!==""){if(wre(r,n)){r=Cre(r,n);break}break}n.remove()}}else r.remove()}function Ib(e){return Ere(e.anchor),Ere(e.focus),e}function Ere(e){for(;e.type==="element";){const t=e.getNode(),n=e.offset;let r,s;if(n===t.getChildrenSize()?(r=t.getChildAtIndex(n-1),s=!0):(r=t.getChildAtIndex(n),s=!1),nt(r)){e.set(r.__key,s?r.getTextContentSize():0,"text",!0);break}if(!Pe(r))break;e.set(r.__key,s?r.getChildrenSize():0,"element",!0)}}let ap,ga,Rb,bT,RO,PO,ip,il,OO,Pb,bs="",Bl=null,Vl="",ru="",Oh=!1,DM=!1;function FM(e,t){const n=ip.get(e);if(t!==null){const r=UO(e);r.parentNode===t&&t.removeChild(r)}if(il.has(e)||ga._keyToDOMMap.delete(e),Pe(n)){const r=BM(n,ip);LO(r,0,r.length-1,null)}n!==void 0&&MW(Pb,Rb,bT,n,"destroyed")}function LO(e,t,n,r){let s=t;for(;s<=n;++s){const a=e[s];a!==void 0&&FM(a,r)}}function qf(e,t){e.setProperty("text-align",t)}const b5t="40px";function k2e(e,t){const n=ap.theme.indent;if(typeof n=="string"){const s=e.classList.contains(n);t>0&&!s?e.classList.add(n):t<1&&s&&e.classList.remove(n)}const r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||b5t;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${r})`)}function T2e(e,t){const n=e.style;t===0?qf(n,""):t===nW?qf(n,"left"):t===rW?qf(n,"center"):t===sW?qf(n,"right"):t===aW?qf(n,"justify"):t===iW?qf(n,"start"):t===oW&&qf(n,"end")}function DO(e,t){const n=function(r){const s=r.__dir;if(s!==null)return s;if(Cs(r))return null;const a=r.getParentOrThrow();return Cs(a)&&a.__dir===null?"auto":null}(t);n!==null?e.dir=n:e.removeAttribute("dir")}function UM(e,t){const n=il.get(e);n===void 0&&He(60);const r=n.createDOM(ap,ga);if(function(s,a,i){const l=i._keyToDOMMap;(function(c,u,d){const m=`__lexicalKey_${u._key}`;c[m]=d})(a,i,s),l.set(s,a)}(e,r,ga),nt(n)?r.setAttribute("data-lexical-text","true"):Vn(n)&&r.setAttribute("data-lexical-decorator","true"),Pe(n)){const s=n.__indent,a=n.__size;if(DO(r,n),s!==0&&k2e(r,s),a!==0){const l=a-1;FO(BM(n,il),n,0,l,n.getDOMSlot(r))}const i=n.__format;i!==0&&T2e(r,i),n.isInline()||N2e(null,n,r),TT(n)&&(bs+=Ou,ru+=Ou)}else{const s=n.getTextContent();if(Vn(n)){const a=n.decorate(ga,ap);a!==null&&j2e(e,a),r.contentEditable="false"}bs+=s,ru+=s}return t!==null&&t.insertChild(r),MW(Pb,Rb,bT,n,"created"),r}function FO(e,t,n,r,s){const a=bs;bs="";let i=n;for(;i<=r;++i){UM(e[i],s);const l=il.get(e[i]);l!==null&&nt(l)&&(Bl===null&&(Bl=l.getFormat()),Vl===""&&(Vl=l.getStyle()))}TT(t)&&(bs+=Ou),s.element.__lexicalTextContent=bs,bs=a+bs}function Mre(e,t){if(e){const n=e.__last;if(n){const r=t.get(n);if(r)return dc(r)?"line-break":Vn(r)&&r.isInline()?"decorator":null}return"empty"}return null}function N2e(e,t,n){const r=Mre(e,ip),s=Mre(t,il);r!==s&&t.getDOMSlot(n).setManagedLineBreak(s)}function _5t(e,t,n){var r;Bl=null,Vl="",function(s,a,i){const l=bs,c=s.__size,u=a.__size;bs="";const d=i.element;if(c===1&&u===1){const m=s.__first,p=a.__first;if(m===p)lv(m,d);else{const g=UO(m),y=UM(p,null);try{d.replaceChild(y,g)}catch(x){if(typeof x=="object"&&x!=null){const v=`${x.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${p}}, old child: {tag: ${g.tagName}, key: ${m}}.`;throw new Error(v)}throw x}FM(m,null)}const h=il.get(p);nt(h)&&(Bl===null&&(Bl=h.getFormat()),Vl===""&&(Vl=h.getStyle()))}else{const m=BM(s,ip),p=BM(a,il);if(m.length!==c&&He(227),p.length!==u&&He(228),c===0)u!==0&&FO(p,a,0,u-1,i);else if(u===0){if(c!==0){const h=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;LO(m,0,c-1,h?null:d),h&&(d.textContent="")}}else(function(h,g,y,x,v,b){const _=x-1,w=v-1;let C,S,E=b.getFirstChild(),M=0,k=0;for(;M<=_&&k<=w;){const L=g[M],O=y[k];if(L===O)E=k6(lv(O,b.element)),M++,k++;else{C===void 0&&(C=new Set(g)),S===void 0&&(S=new Set(y));const j=S.has(L),T=C.has(O);if(j)if(T){const I=op(ga,O);I===E?E=k6(lv(O,b.element)):(b.withBefore(E).insertChild(I),lv(O,b.element)),M++,k++}else UM(O,b.withBefore(E)),k++;else E=k6(UO(L)),FM(L,b.element),M++}const A=il.get(O);A!==null&&nt(A)&&(Bl===null&&(Bl=A.getFormat()),Vl===""&&(Vl=A.getStyle()))}const N=M>_,P=k>w;if(N&&!P){const L=y[w+1],O=L===void 0?null:ga.getElementByKey(L);FO(y,h,k,w,b.withBefore(O))}else P&&!N&&LO(g,M,_,b.element)})(a,m,p,c,u,i)}TT(a)&&(bs+=Ou),d.__lexicalTextContent=bs,bs=l+bs}(e,t,t.getDOMSlot(n)),r=t,Bl==null||Bl===r.__textFormat||DM||r.setTextFormat(Bl),function(s){Vl===""||Vl===s.__textStyle||DM||s.setTextStyle(Vl)}(t)}function BM(e,t){const n=[];let r=e.__first;for(;r!==null;){const s=t.get(r);s===void 0&&He(101),n.push(r),r=s.__next}return n}function lv(e,t){const n=ip.get(e);let r=il.get(e);n!==void 0&&r!==void 0||He(61);const s=Oh||PO.has(e)||RO.has(e),a=op(ga,e);if(n===r&&!s){if(Pe(n)){const i=a.__lexicalTextContent;i!==void 0&&(bs+=i,ru+=i)}else{const i=n.getTextContent();ru+=i,bs+=i}return a}if(n!==r&&s&&MW(Pb,Rb,bT,r,"updated"),r.updateDOM(n,a,ap)){const i=UM(e,null);return t===null&&He(62),t.replaceChild(i,a),FM(e,null),i}if(Pe(n)&&Pe(r)){const i=r.__indent;(Oh||i!==n.__indent)&&k2e(a,i);const l=r.__format;if((Oh||l!==n.__format)&&T2e(a,l),s&&(_5t(n,r,a),Cs(r)||r.isInline()||N2e(n,r,a)),TT(r)&&(bs+=Ou,ru+=Ou),(Oh||r.__dir!==n.__dir)&&(DO(a,r),Cs(r)&&!Oh))for(const c of r.getChildren())Pe(c)&&DO(op(ga,c.getKey()),c)}else{const i=r.getTextContent();if(Vn(r)){const l=r.decorate(ga,ap);l!==null&&j2e(e,l)}bs+=i,ru+=i}if(!DM&&Cs(r)&&r.__cachedText!==ru){const i=r.getWritable();i.__cachedText=ru,r=i}return a}function j2e(e,t){let n=ga._pendingDecorators;const r=ga._decorators;if(n===null){if(r[e]===t)return;n=hEe(ga)}n[e]=t}function k6(e){let t=e.nextSibling;return t!==null&&t===ga._blockCursorElement&&(t=t.nextSibling),t}function w5t(e,t,n,r,s,a){bs="",ru="",Oh=r===my,ga=n,ap=n._config,Rb=n._nodes,bT=ga._listeners.mutation,RO=s,PO=a,ip=e._nodeMap,il=t._nodeMap,DM=t._readOnly,OO=new Map(n._keyToDOMMap);const i=new Map;return Pb=i,lv("root",null),ga=void 0,Rb=void 0,RO=void 0,PO=void 0,ip=void 0,il=void 0,ap=void 0,OO=void 0,Pb=void 0,i}function UO(e){const t=OO.get(e);return t===void 0&&He(75,e),t}function Xt(e){return{type:e}}const A2e=Xt("SELECTION_CHANGE_COMMAND"),C5t=Xt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),S5t=Xt("CLICK_COMMAND"),uc=Xt("DELETE_CHARACTER_COMMAND"),Sg=Xt("INSERT_LINE_BREAK_COMMAND"),BO=Xt("INSERT_PARAGRAPH_COMMAND"),Tm=Xt("CONTROLLED_TEXT_INSERTION_COMMAND"),pw=Xt("PASTE_COMMAND"),VM=Xt("REMOVE_TEXT_COMMAND"),py=Xt("DELETE_WORD_COMMAND"),hy=Xt("DELETE_LINE_COMMAND"),pm=Xt("FORMAT_TEXT_COMMAND"),I2e=Xt("UNDO_COMMAND"),R2e=Xt("REDO_COMMAND"),E5t=Xt("KEYDOWN_COMMAND"),P2e=Xt("KEY_ARROW_RIGHT_COMMAND"),M5t=Xt("MOVE_TO_END"),O2e=Xt("KEY_ARROW_LEFT_COMMAND"),k5t=Xt("MOVE_TO_START"),L2e=Xt("KEY_ARROW_UP_COMMAND"),D2e=Xt("KEY_ARROW_DOWN_COMMAND"),gy=Xt("KEY_ENTER_COMMAND"),T5t=Xt("KEY_SPACE_COMMAND"),cW=Xt("KEY_BACKSPACE_COMMAND"),F2e=Xt("KEY_ESCAPE_COMMAND"),uW=Xt("KEY_DELETE_COMMAND"),U2e=Xt("KEY_TAB_COMMAND"),N5t=Xt("OUTDENT_CONTENT_COMMAND"),B2e=Xt("DROP_COMMAND"),V2e=Xt("DRAGSTART_COMMAND"),j5t=Xt("DRAGOVER_COMMAND"),A5t=Xt("DRAGEND_COMMAND"),dW=Xt("COPY_COMMAND"),fW=Xt("CUT_COMMAND"),VO=Xt("SELECT_ALL_COMMAND"),I5t=Xt("CLEAR_EDITOR_COMMAND"),gmn=Xt("CLEAR_HISTORY_COMMAND"),ymn=Xt("CAN_REDO_COMMAND"),xmn=Xt("CAN_UNDO_COMMAND"),R5t=Xt("FOCUS_COMMAND"),P5t=Xt("BLUR_COMMAND"),O5t=Xt("KEY_MODIFIER_COMMAND"),Hc=Object.freeze({}),$O=30,WO=[["keydown",function(e,t){if(Zv=e.timeStamp,$2e=e.key,!t.isComposing()&&!ht(t,E5t,e)&&e.key!=null){if(T6&&ese(e))return $i(t,()=>{gS(t,N6)}),T6=!1,void(N6="");if(function(n){return qn(n,"ArrowRight",{shiftKey:"any"})}(e))ht(t,P2e,e);else if(function(n){return qn(n,"ArrowRight",Yc)}(e))ht(t,M5t,e);else if(function(n){return qn(n,"ArrowLeft",{shiftKey:"any"})}(e))ht(t,O2e,e);else if(function(n){return qn(n,"ArrowLeft",Yc)}(e))ht(t,k5t,e);else if(function(n){return qn(n,"ArrowUp",{altKey:"any",shiftKey:"any"})}(e))ht(t,L2e,e);else if(function(n){return qn(n,"ArrowDown",{altKey:"any",shiftKey:"any"})}(e))ht(t,D2e,e);else if(function(n){return qn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(e))Jv=!0,ht(t,gy,e);else if(function(n){return n.key===" "}(e))ht(t,T5t,e);else if(function(n){return Jo&&qn(n,"o",{ctrlKey:!0})}(e))e.preventDefault(),Jv=!0,ht(t,Sg,!0);else if(function(n){return qn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(e))Jv=!1,ht(t,gy,e);else if(function(n){return qn(n,"Backspace",{shiftKey:"any"})||Jo&&qn(n,"h",{ctrlKey:!0})}(e))ese(e)?ht(t,cW,e):(e.preventDefault(),ht(t,uc,!0));else if(function(n){return n.key==="Escape"}(e))ht(t,F2e,e);else if(function(n){return qn(n,"Delete",{})||Jo&&qn(n,"d",{ctrlKey:!0})}(e))(function(n){return n.key==="Delete"})(e)?ht(t,uW,e):(e.preventDefault(),ht(t,uc,!1));else if(function(n){return qn(n,"Backspace",Jre)}(e))e.preventDefault(),ht(t,py,!0);else if(function(n){return qn(n,"Delete",Jre)}(e))e.preventDefault(),ht(t,py,!1);else if(function(n){return Jo&&qn(n,"Backspace",{metaKey:!0})}(e))e.preventDefault(),ht(t,hy,!0);else if(function(n){return Jo&&(qn(n,"Delete",{metaKey:!0})||qn(n,"k",{ctrlKey:!0}))}(e))e.preventDefault(),ht(t,hy,!1);else if(function(n){return qn(n,"b",Yc)}(e))e.preventDefault(),ht(t,pm,"bold");else if(function(n){return qn(n,"u",Yc)}(e))e.preventDefault(),ht(t,pm,"underline");else if(function(n){return qn(n,"i",Yc)}(e))e.preventDefault(),ht(t,pm,"italic");else if(function(n){return qn(n,"Tab",{shiftKey:"any"})}(e))ht(t,U2e,e);else if(function(n){return qn(n,"z",Yc)}(e))e.preventDefault(),ht(t,I2e,void 0);else if(function(n){return Jo?qn(n,"z",{metaKey:!0,shiftKey:!0}):qn(n,"y",{ctrlKey:!0})||qn(n,"z",{ctrlKey:!0,shiftKey:!0})}(e))e.preventDefault(),ht(t,R2e,void 0);else{const n=t._editorState._selection;n===null||Be(n)?tse(e)&&(e.preventDefault(),ht(t,VO,e)):function(r){return qn(r,"c",Yc)}(e)?(e.preventDefault(),ht(t,dW,e)):function(r){return qn(r,"x",Yc)}(e)?(e.preventDefault(),ht(t,fW,e)):tse(e)&&(e.preventDefault(),ht(t,VO,e))}(function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey})(e)&&ht(t,O5t,e)}}],["pointerdown",function(e,t){const n=e.target,r=e.pointerType;Rx(n)&&r!=="touch"&&r!=="pen"&&e.button===0&&$i(t,()=>{Qre(n)||(zO=!0)})}],["compositionstart",function(e,t){$i(t,()=>{const n=rt();if(Be(n)&&!t.isComposing()){const r=n.anchor,s=n.anchor.getNode();Gs(r.key),(e.timeStamp<Zv+$O||r.type==="element"||!n.isCollapsed()||s.getFormat()!==n.format||nt(s)&&s.getStyle()!==n.style)&&ht(t,Tm,o5t)}})}],["compositionend",function(e,t){np?P0=!0:fy||!jb&&!Ab?$i(t,()=>{gS(t,e.data)}):(T6=!0,N6=e.data)}],["input",function(e,t){e.stopPropagation(),$i(t,()=>{if(os(e.target)&&Qre(e.target))return;const n=rt(),r=e.data,s=q2e(e);if(r!=null&&Be(n)&&z2e(n,s,r,e.timeStamp,!1)){P0&&(gS(t,r),P0=!1);const a=n.anchor.getNode(),i=Ec(Io(t));if(i===null)return;const l=n.isBackward(),c=l?n.anchor.offset:n.focus.offset,u=l?n.focus.offset:n.anchor.offset;PM&&!n.isCollapsed()&&nt(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,c)+r+a.getTextContent().slice(c+u)===vEe(i.anchorNode)||ht(t,Tm,r);const d=r.length;np&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(n.anchor.offset-=d),jb||fy||Ab||!t.isComposing()||(Zv=0,Gs(null))}else SW(!1,t,r!==null?r:void 0),P0&&(gS(t,r||void 0),P0=!1);(function(){zs();const a=Rr();C2e(a)})()},{event:e}),Lh=null}],["click",function(e,t){$i(t,()=>{const n=rt(),r=Ec(Io(t)),s=gw();if(r){if(Be(n)){const a=n.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&n.isCollapsed()&&!Cs(i)&&lr().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&n.is(s))r.removeAllRanges(),n.dirty=!0;else if(e.detail===3&&!n.isCollapsed()&&i!==n.focus.getNode()){const l=Eo(i,c=>Pe(c)&&!c.isInline());Pe(l)&&l.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=r.anchorNode;(os(a)||Zu(a))&&_a(pW(s,r,t,e))}}ht(t,S5t,e)})}],["cut",Hc],["copy",Hc],["dragstart",Hc],["dragover",Hc],["dragend",Hc],["paste",Hc],["focus",Hc],["blur",Hc],["drop",Hc]];PM&&WO.push(["beforeinput",(e,t)=>function(n,r){const s=n.inputType,a=q2e(n);s==="deleteCompositionText"||np&&bEe(r)||s!=="insertCompositionText"&&$i(r,()=>{const i=rt();if(s==="deleteContentBackward"){if(i===null){const h=gw();if(!Be(h))return;_a(h.clone())}if(Be(i)){const h=i.anchor.key===i.focus.key;if(l=n.timeStamp,$2e==="MediaLast"&&l<Zv+$O&&r.isComposing()&&h){if(Gs(null),Zv=0,setTimeout(()=>{$i(r,()=>{Gs(null)})},$O),Be(i)){const g=i.anchor.getNode();g.markDirty(),nt(g)||He(142),G2e(i,g)}}else{Gs(null),n.preventDefault();const g=i.anchor.getNode(),y=g.getTextContent(),x=g.canInsertTextAfter(),v=i.anchor.offset===0&&i.focus.offset===y.length;let b=hre&&h&&!v&&x;if(b&&i.isCollapsed()&&(b=!Vn(iTt(i.anchor,!0))),!b){ht(r,uc,!0);const _=rt();hre&&Be(_)&&_.isCollapsed()&&(sm=_,setTimeout(()=>sm=null))}}return}}var l;if(!Be(i))return;const c=n.data;Lh!==null&&SW(!1,r,Lh),i.dirty&&Lh===null||!i.isCollapsed()||Cs(i.anchor.getNode())||a===null||i.applyDOMRange(a),Lh=null;const u=i.anchor,d=i.focus,m=u.getNode(),p=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(n.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ht(r,Tm,n);break;case"insertFromComposition":Gs(null),ht(r,Tm,n);break;case"insertLineBreak":Gs(null),ht(r,Sg,!1);break;case"insertParagraph":Gs(null),Jv&&!fy?(Jv=!1,ht(r,Sg,!1)):ht(r,BO,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ht(r,pw,n);break;case"deleteByComposition":(function(h,g){return h!==g||Pe(h)||Pe(g)||!Nm(h)||!Nm(g)})(m,p)&&ht(r,VM,n);break;case"deleteByDrag":case"deleteByCut":ht(r,VM,n);break;case"deleteContent":ht(r,uc,!1);break;case"deleteWordBackward":ht(r,py,!0);break;case"deleteWordForward":ht(r,py,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ht(r,hy,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ht(r,hy,!1);break;case"formatStrikeThrough":ht(r,pm,"strikethrough");break;case"formatBold":ht(r,pm,"bold");break;case"formatItalic":ht(r,pm,"italic");break;case"formatUnderline":ht(r,pm,"underline");break;case"historyUndo":ht(r,I2e,void 0);break;case"historyRedo":ht(r,R2e,void 0)}else{if(c===`
`)n.preventDefault(),ht(r,Sg,!1);else if(c===Ou)n.preventDefault(),ht(r,BO,void 0);else if(c==null&&n.dataTransfer){const h=n.dataTransfer.getData("text/plain");n.preventDefault(),i.insertRawText(h)}else c!=null&&z2e(i,a,c,n.timeStamp,!0)?(n.preventDefault(),ht(r,Tm,c)):Lh=c;W2e=n.timeStamp}})}(e,t)]);let Zv=0,$2e=null,W2e=0,Lh=null;const $M=new WeakMap;let HO=!1,zO=!1,Jv=!1,P0=!1,T6=!1,N6="",sm=null,H2e=[0,"",0,"root",0];function z2e(e,t,n,r,s){const a=e.anchor,i=e.focus,l=a.getNode(),c=Rr(),u=Ec(Io(c)),d=u!==null?u.anchorNode:null,m=a.key,p=c.getElementByKey(m),h=n.length;return m!==i.key||!nt(l)||(!s&&(!PM||W2e<r+50)||l.isDirty()&&h<2||yEe(n))&&a.offset!==i.offset&&!l.isComposing()||eu(l)||l.isDirty()&&h>1||(s||!PM)&&p!==null&&!l.isComposing()&&d!==xy(p)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||l.getFormat()!==e.format||l.getStyle()!==e.style||function(g,y){if(y.isSegmented())return!0;if(!g.isCollapsed())return!1;const x=g.anchor.offset,v=y.getParentOrThrow(),b=Nm(y);return x===0?!y.canInsertTextBefore()||!v.canInsertTextBefore()&&!y.isComposing()||b||function(_){const w=_.getPreviousSibling();return(nt(w)||Pe(w)&&w.isInline())&&!w.canInsertTextAfter()}(y):x===y.getTextContentSize()&&(!y.canInsertTextAfter()||!v.canInsertTextAfter()&&!y.isComposing()||b)}(e,l)}function kre(e,t){return Zu(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function Tre(e,t,n){const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:i}=e;HO&&(HO=!1,kre(r,s)&&kre(a,i)&&!sm)||$i(t,()=>{if(!n)return void _a(null);if(!ET(t,r,a))return;let l=rt();if(sm&&Be(l)&&l.isCollapsed()){const c=l.anchor,u=sm.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(l=sm.clone(),_a(l))}if(sm=null,Be(l)){const c=l.anchor,u=c.getNode();if(l.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(l.dirty=!0);const d=Io(t).event,m=d?d.timeStamp:performance.now(),[p,h,g,y,x]=H2e,v=lr(),b=t.isComposing()===!1&&v.getTextContent()==="";if(m<x+200&&c.offset===g&&c.key===y)D2(l,p,h);else if(c.type==="text")nt(u)||He(141),G2e(l,u);else if(c.type==="element"&&!b){Pe(u)||He(259);const _=c.getNode();_.isEmpty()?function(w,C){const S=C.getTextFormat(),E=C.getTextStyle();D2(w,S,E)}(l,_):D2(l,0,"")}}else{const d=c.key,m=l.focus.key,p=l.getNodes(),h=p.length,g=l.isBackward(),y=g?i:s,x=g?s:i,v=g?m:d,b=g?d:m;let _=i5t,w=!1;for(let C=0;C<h;C++){const S=p[C],E=S.getTextContentSize();if(nt(S)&&E!==0&&!(C===0&&S.__key===v&&y===E||C===h-1&&S.__key===b&&x===0)&&(w=!0,_&=S.getFormat(),_===0))break}l.format=w?_:0}}ht(t,A2e,void 0)})}function D2(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function G2e(e,t){D2(e,t.getFormat(),t.getStyle())}function q2e(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function gS(e,t){const n=e._compositionKey;if(Gs(null),n!==null&&t!=null){if(t===""){const r=Is(n),s=xy(e.getElementByKey(n));return void(s!==null&&s.nodeValue!==null&&nt(r)&&EW(r,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const r=rt();if(Be(r)){const s=r.focus;return r.anchor.set(s.key,s.offset,s.type),void ht(e,gy,null)}}}SW(!0,e,t)}function K2e(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Eg=new Map;function Y2e(e){const t=uTt(e.target);if(t===null)return;const n=wW(t.anchorNode);if(n===null)return;zO&&(zO=!1,$i(n,()=>{const c=gw(),u=t.anchorNode;(os(u)||Zu(u))&&_a(pW(c,t,n,e))}));const r=CW(n),s=r[r.length-1],a=s._key,i=Eg.get(a),l=i||s;l!==n&&Tre(t,l,!1),Tre(t,n,!0),n!==s?Eg.set(a,n):i&&Eg.delete(a)}function Nre(e){e._lexicalHandled=!0}function jre(e){return e._lexicalHandled===!0}function L5t(e){const t=e.ownerDocument,n=$M.get(t);if(n===void 0)return;const r=n-1;r>=0||He(164),$M.set(t,r),r===0&&t.removeEventListener("selectionchange",Y2e);const s=MT(e);_W(s)?(function(i){if(i._parentEditor!==null){const l=CW(i),c=l[l.length-1]._key;Eg.get(c)===i&&Eg.delete(c)}else Eg.delete(i._key)}(s),e.__lexicalEditor=null):s&&He(198);const a=K2e(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function GO(e,t,n){zs();const r=e.__key,s=e.getParent();if(s===null)return;const a=function(l){const c=rt();if(!Be(c)||!Pe(l))return c;const{anchor:u,focus:d}=c,m=u.getNode(),p=d.getNode();return XO(m,l)&&u.set(l.__key,0,"element"),XO(p,l)&&d.set(l.__key,0,"element"),c}(e);let i=!1;if(Be(a)&&t){const l=a.anchor,c=a.focus;l.key===r&&(HM(l,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),c.key===r&&(HM(c,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else bu(a)&&t&&e.isSelected()&&e.selectPrevious();if(Be(a)&&t&&!i){const l=e.getIndexWithinParent();jm(e),WM(a,s,l,-1)}else jm(e);n||vl(s)||s.canBeEmpty()||!s.isEmpty()||GO(s,t),t&&a&&Cs(s)&&s.isEmpty()&&s.selectEnd()}class Od{__type;__key;__parent;__prev;__next;__state;static getType(){const{ownNodeType:t}=AW(this);return t===void 0&&He(64,this.name),t}static clone(t){He(65,this.name)}$config(){return{}}config(t,n){const r=n.extends||Object.getPrototypeOf(this.constructor);return Object.assign(n,{extends:r,type:t}),{[t]:n}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}static importDOM;constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),rTt(this,t)}getType(){return this.__type}isInline(){He(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const n=Is(t);if(n===null)break;t=n.__parent}return!1}isSelected(t){const n=t||rt();if(n==null)return!1;const r=n.getNodes().some(s=>s.__key===this.__key);if(nt(this))return r;if(Be(n)&&n.anchor.type==="element"&&n.focus.type==="element"){if(n.isCollapsed())return!1;const s=this.getParent();if(Vn(this)&&this.isInline()&&s){const a=n.isBackward()?n.focus:n.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let n=t.getFirstChild(),r=0;for(;n!==null;){if(this.is(n))return r;r++,n=n.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:Is(t)}getParentOrThrow(){const t=this.getParent();return t===null&&He(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const n=t.getParent();if(vl(n))return Pe(t)||t===this&&Vn(t)||He(194),t;t=n}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&He(67,this.__key),t}getParents(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n),n=n.getParent();return t}getParentKeys(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n.__key),n=n.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:Is(t)}getPreviousSiblings(){const t=[],n=this.getParent();if(n===null)return t;let r=n.getFirstChild();for(;r!==null&&!r.is(this);)t.push(r),r=r.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:Is(t)}getNextSiblings(){const t=[];let n=this.getNextSibling();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getCommonAncestor(t){const n=Pe(this)?this:this.getParent(),r=Pe(t)?t:t.getParent(),s=n&&r?U2(n,r):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const n=U2(this,t);return n!==null&&(n.type==="descendant"||(n.type==="branch"?MEe(n)===-1:(n.type!=="same"&&n.type!=="ancestor"&&He(279),!1)))}isParentOf(t){const n=U2(this,t);return n!==null&&n.type==="ancestor"}getNodesBetween(t){const n=this.isBefore(t),r=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),r.push(a)),a===t)break;const l=Pe(a)?n?a.getFirstChild():a.getLastChild():null;if(l!==null){a=l;continue}const c=n?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||r.push(u),u===t)break;let d=null,m=u;do{if(m===null&&He(68),d=n?m.getNextSibling():m.getPreviousSibling(),m=m.getParent(),m===null)break;d!==null||s.has(m.__key)||r.push(m)}while(d===null);a=d}return n||r.reverse(),r}isDirty(){const t=Rr()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=Is(this.__key);return t===null&&He(113),t}getWritable(){zs();const t=Sf(),n=Rr(),r=t._nodeMap,s=this.__key,a=this.getLatest(),i=n._cloneNotNeeded,l=rt();if(l!==null&&l.setCachedNodes(null),i.has(s))return GM(a),a;const c=wEe(a);return i.add(s),GM(c),r.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,n){He(70)}updateDOM(t,n,r){He(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){He(18,this.name)}updateFromJSON(t){return function(n,r){const s=n.getWritable(),a=r.$;let i=a;for(const l of M2e(s).flatKeys)l in r&&(i!==void 0&&i!==a||(i={...a}),i[l]=r[l]);return(s.__state||i)&&v5t(n).updateFromJSON(i),s}(this,t)}static transform(){return null}remove(t){GO(this,!0,t)}replace(t,n){zs();let r=rt();r!==null&&(r=r.clone()),O6(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,l=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;jm(l);const d=s.getPreviousSibling(),m=s.getNextSibling(),p=s.__prev,h=s.__next,g=s.__parent;if(GO(s,!1,!0),d===null?c.__first=i:d.getWritable().__next=i,l.__prev=p,m===null?c.__last=i:m.getWritable().__prev=i,l.__next=h,l.__parent=g,c.__size=u,n&&(Pe(this)&&Pe(l)||He(139),this.getChildren().forEach(y=>{l.append(y)})),Be(r)){_a(r);const y=r.anchor,x=r.focus;y.key===a&&Pre(y,l),x.key===a&&Pre(x,l)}return Ed()===a&&Gs(i),l}insertAfter(t,n=!0){zs(),O6(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=rt();let l=!1,c=!1;if(a!==null){const h=t.getIndexWithinParent();if(jm(s),Be(i)){const g=a.__key,y=i.anchor,x=i.focus;l=y.type==="element"&&y.key===g&&y.offset===h+1,c=x.type==="element"&&x.key===g&&x.offset===h+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),m=s.__key,p=r.__next;if(u===null?d.__last=m:u.getWritable().__prev=m,d.__size++,r.__next=m,s.__next=p,s.__prev=r.__key,s.__parent=r.__parent,n&&Be(i)){const h=this.getIndexWithinParent();WM(i,d,h+1);const g=d.__key;l&&i.anchor.set(g,h+2,"element"),c&&i.focus.set(g,h+2,"element")}return t}insertBefore(t,n=!0){zs(),O6(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.__key;jm(s);const i=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),c=r.__prev,u=this.getIndexWithinParent();i===null?l.__first=a:i.getWritable().__next=a,l.__size++,r.__prev=a,s.__prev=c,s.__next=r.__key,s.__parent=r.__parent;const d=rt();return n&&Be(d)&&WM(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return Sr()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,n){zs();const r=this.getPreviousSibling(),s=this.getParentOrThrow();if(r===null)return s.select(0,0);if(Pe(r))return r.select();if(!nt(r)){const a=r.getIndexWithinParent()+1;return s.select(a,a)}return r.select(t,n)}selectNext(t,n){zs();const r=this.getNextSibling(),s=this.getParentOrThrow();if(r===null)return s.select();if(Pe(r))return r.select(0,0);if(!nt(r)){const a=r.getIndexWithinParent();return s.select(a,a)}return r.select(t,n)}markDirty(){this.getWritable()}reconcileObservedMutation(t,n){this.markDirty()}}class Ax extends Od{static getType(){return"linebreak"}static clone(t){return new Ax(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(n){const r=n.parentElement;if(r!==null&&qM(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&yS(s)){const a=r.lastChild;if(a===n||a.previousSibling===n&&yS(a))return!0}}return!1}(t)||function(n){const r=n.parentElement;if(r!==null&&qM(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&yS(s))return!1;const a=r.lastChild;if(a===n||a.previousSibling===n&&yS(a))return!0}return!1}(t)?null:{conversion:D5t,priority:0}}}static importJSON(t){return ro().updateFromJSON(t)}}function D5t(e){return{node:ro()}}function ro(){return Wo(new Ax)}function dc(e){return e instanceof Ax}function yS(e){return Zu(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function j6(e,t){return 16&t?"code":t&tW?"mark":32&t?"sub":64&t?"sup":null}function A6(e,t){return 1&t?"strong":2&t?"em":"span"}function Q2e(e,t,n,r,s){const a=r.classList;let i=Mg(s,"base");i!==void 0&&a.add(...i),i=Mg(s,"underlineStrikethrough");let l=!1;const c=t&LM&&t&OM;i!==void 0&&(n&LM&&n&OM?(l=!0,c||a.add(...i)):c&&a.remove(...i));for(const u in sp){const d=sp[u];if(i=Mg(s,u),i!==void 0)if(n&d){if(l&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function X2e(e,t,n){const r=t.firstChild,s=n.isComposing(),a=e+(s?vT:"");if(r==null)t.textContent=a;else{const i=r.nodeValue;if(i!==a)if(s||np){const[l,c,u]=function(d,m){const p=d.length,h=m.length;let g=0,y=0;for(;g<p&&g<h&&d[g]===m[g];)g++;for(;y+g<p&&y+g<h&&d[p-y-1]===m[h-y-1];)y++;return[g,p-g-y,m.slice(g,h-y)]}(i,a);c!==0&&r.deleteData(l,c),r.insertData(l,u)}else r.nodeValue=a}}function Are(e,t,n,r,s,a){X2e(s,e,t);const i=a.theme.text;i!==void 0&&Q2e(0,0,r,e,i)}function xS(e,t){const n=document.createElement(t);return n.appendChild(e),n}class Lc extends Od{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(t){return new Lc(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",n){super(n),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return d5t[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Ed()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const n=sp[t];return!!(this.getFormat()&n)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,n){return zM(this.getLatest().__format,t,n)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,n){const r=this.__format,s=j6(0,r),a=A6(0,r),i=s===null?a:s,l=document.createElement(i);let c=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),l.appendChild(c)),Are(c,this,0,r,this.__text,t);const u=this.__style;return u!==""&&(l.style.cssText=u),l}updateDOM(t,n,r){const s=this.__text,a=t.__format,i=this.__format,l=j6(0,a),c=j6(0,i),u=A6(0,a),d=A6(0,i);if((l===null?u:l)!==(c===null?d:c))return!0;if(l===c&&u!==d){const y=n.firstChild;y==null&&He(48);const x=document.createElement(d);return Are(x,this,0,i,s,r),n.replaceChild(x,y),!1}let m=n;c!==null&&l!==null&&(m=n.firstChild,m==null&&He(49)),X2e(s,m,this);const p=r.theme.text;p!==void 0&&a!==i&&Q2e(0,a,i,m,p);const h=t.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:V5t,priority:0}),b:()=>({conversion:U5t,priority:0}),code:()=>({conversion:zc,priority:0}),em:()=>({conversion:zc,priority:0}),i:()=>({conversion:zc,priority:0}),mark:()=>({conversion:zc,priority:0}),s:()=>({conversion:zc,priority:0}),span:()=>({conversion:F5t,priority:0}),strong:()=>({conversion:zc,priority:0}),sub:()=>({conversion:zc,priority:0}),sup:()=>({conversion:zc,priority:0}),u:()=>({conversion:zc,priority:0})}}static importJSON(t){return er().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:n}=super.exportDOM(t);return os(n)||He(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=xS(n,"b")),this.hasFormat("italic")&&(n=xS(n,"i")),this.hasFormat("strikethrough")&&(n=xS(n,"s")),this.hasFormat("underline")&&(n=xS(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,n){}setFormat(t){const n=this.getWritable();return n.__format=typeof t=="string"?sp[t]:t,n}setDetail(t){const n=this.getWritable();return n.__detail=typeof t=="string"?l5t[t]:t,n}setStyle(t){const n=this.getWritable();return n.__style=t,n}toggleFormat(t){const n=zM(this.getFormat(),t,null);return this.setFormat(n)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const n=u5t[t];if(this.__mode===n)return this;const r=this.getWritable();return r.__mode=n,r}setTextContent(t){if(this.__text===t)return this;const n=this.getWritable();return n.__text=t,n}select(t,n){zs();let r=t,s=n;const a=rt(),i=this.getTextContent(),l=this.__key;if(typeof i=="string"){const c=i.length;r===void 0&&(r=c),s===void 0&&(s=c)}else r=0,s=0;if(!Be(a))return eEe(l,r,l,s,"text","text");{const c=Ed();c!==a.anchor.key&&c!==a.focus.key||Gs(l),a.setTextNodeRange(this,r,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,n,r,s){const a=this.getWritable(),i=a.__text,l=r.length;let c=t;c<0&&(c=l+c,c<0&&(c=0));const u=rt();if(s&&Be(u)){const m=t+l;u.setTextNodeRange(a,m,a,m)}const d=i.slice(0,c)+r+i.slice(c+n);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){zs();const n=this.getLatest(),r=n.getTextContent();if(r==="")return[];const s=n.__key,a=Ed(),i=r.length;t.sort((M,k)=>M-k),t.push(i);const l=[],c=t.length;for(let M=0,k=0;M<i&&k<=c;k++){const N=t[k];N>M&&(l.push(r.slice(M,N)),M=N)}const u=l.length;if(u===1)return[n];const d=l[0],m=n.getParent();let p;const h=n.getFormat(),g=n.getStyle(),y=n.__detail;let x=!1,v=null,b=null;const _=rt();if(Be(_)){const[M,k]=_.isBackward()?[_.focus,_.anchor]:[_.anchor,_.focus];M.type==="text"&&M.key===s&&(v=M),k.type==="text"&&k.key===s&&(b=k)}n.isSegmented()?(p=er(d),p.__format=h,p.__style=g,p.__detail=y,p.__state=_re(n,p),x=!0):p=n.setTextContent(d);const w=[p];for(let M=1;M<u;M++){const k=er(l[M]);k.__format=h,k.__style=g,k.__detail=y,k.__state=_re(n,k);const N=k.__key;a===s&&Gs(N),w.push(k)}const C=v?v.offset:null,S=b?b.offset:null;let E=0;for(const M of w){if(!v&&!b)break;const k=E+M.getTextContentSize();if(v!==null&&C!==null&&C<=k&&C>=E&&(v.set(M.getKey(),C-E,"text"),C<k&&(v=null)),b!==null&&S!==null&&S<=k&&S>=E){b.set(M.getKey(),S-E,"text");break}E=k}if(m!==null){(function(N){const P=N.getPreviousSibling(),L=N.getNextSibling();P!==null&&GM(P),L!==null&&GM(L)})(this);const M=m.getWritable(),k=this.getIndexWithinParent();x?(M.splice(k,0,w),this.remove()):M.splice(k,1,w),Be(_)&&WM(_,m,k,u-1)}return w}mergeWithSibling(t){const n=t===this.getPreviousSibling();n||t===this.getNextSibling()||He(50);const r=this.__key,s=t.__key,a=this.__text,i=a.length;Ed()===s&&Gs(r);const l=rt();if(Be(l)){const m=l.anchor,p=l.focus;m!==null&&m.key===s&&Vre(m,n,r,t,i),p!==null&&p.key===s&&Vre(p,n,r,t,i)}const c=t.__text,u=n?c+a:a+c;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function F5t(e){return{forChild:mW(e.style),node:null}}function U5t(e){const t=e,n=t.style.fontWeight==="normal";return{forChild:mW(t.style,n?void 0:"bold"),node:null}}const Ire=new WeakMap;function B5t(e){if(!os(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function V5t(e){const t=e;e.parentElement===null&&He(129);let n=t.textContent||"";if(function(r){let s,a=r.parentNode;const i=[r];for(;a!==null&&(s=Ire.get(a))===void 0&&!B5t(a);)i.push(a),a=a.parentNode;const l=s===void 0?a:s;for(let c=0;c<i.length;c++)Ire.set(i[c],l);return l}(t)!==null){const r=n.split(/(\r?\n|\t)/),s=[],a=r.length;for(let i=0;i<a;i++){const l=r[i];l===`
`||l===`\r
`?s.push(ro()):l==="	"?s.push(hw()):l!==""&&s.push(er(l))}return{node:s}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),n==="")return{node:null};if(n[0]===" "){let r=t,s=!0;for(;r!==null&&(r=Rre(r,!1))!==null;){const a=r.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(n=n.slice(1)),s=!1;break}}s&&(n=n.slice(1))}if(n[n.length-1]===" "){let r=t,s=!0;for(;r!==null&&(r=Rre(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(n=n.slice(0,n.length-1))}return n===""?{node:null}:{node:er(n)}}function Rre(e,t){let n=e;for(;;){let r;for(;(r=t?n.nextSibling:n.previousSibling)===null;){const a=n.parentElement;if(a===null)return null;n=a}if(n=r,os(n)){const a=n.style.display;if(a===""&&!eL(n)||a!==""&&!a.startsWith("inline"))return null}let s=n;for(;(s=t?n.firstChild:n.lastChild)!==null;)n=s;if(Zu(n))return n;if(n.nodeName==="BR")return null}}const $5t={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function zc(e){const t=$5t[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:mW(e.style,t),node:null}}function er(e=""){return Wo(new Lc(e))}function nt(e){return e instanceof Lc}function mW(e,t){const n=e.fontWeight,r=e.textDecoration.split(" "),s=n==="700"||n==="bold",a=r.includes("line-through"),i=e.fontStyle==="italic",l=r.includes("underline"),c=e.verticalAlign;return u=>(nt(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),l&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class Ix extends Lc{static getType(){return"tab"}static clone(t){return new Ix(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const n=super.createDOM(t),r=Mg(t.theme,"tab");return r!==void 0&&n.classList.add(...r),n}static importJSON(t){return hw().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&y2e(126),super.setTextContent("	")}spliceText(t,n,r,s){return r===""&&n===0||r==="	"&&n===1||He(286),this}setDetail(t){return t!==2&&He(127),this}setMode(t){return t!=="normal"&&He(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function hw(){return Wo(new Ix)}function _T(e){return e instanceof Ix}class W5t{key;offset;type;_selection;constructor(t,n,r){this._selection=null,this.key=t,this.offset=n,this.type=r}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:EEe(tc(Du(this,"next")),tc(Du(t,"next")))<0}getNode(){const t=Is(this.key);return t===null&&He(20),t}set(t,n,r,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===n&&this.type===r||(this.key=t,this.offset=n,this.type=r,yw()||(Ed()===i&&Gs(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function Sc(e,t,n){return new W5t(e,t,n)}function I6(e,t){let n=t.__key,r=e.offset,s="element";if(nt(t)){s="text";const a=t.getTextContentSize();r>a&&(r=a)}else if(!Pe(t)){const a=t.getNextSibling();if(nt(a))n=a.__key,r=0,s="text";else{const i=t.getParent();i&&(n=i.__key,r=t.getIndexWithinParent()+1)}}e.set(n,r,s)}function Pre(e,t){if(Pe(t)){const n=t.getLastDescendant();Pe(n)||nt(n)?I6(e,n):I6(e,t)}else I6(e,t)}class wT{_nodes;_cachedNodes;dirty;constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!bu(t))return!1;const n=this._nodes,r=t._nodes;return n.size===r.size&&Array.from(n).every(s=>r.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new wT(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const n=this.getNodes(),r=n.length,s=n[r-1];let a;if(nt(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<r;i++)n[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=this._nodes,r=[];for(const s of n){const a=Is(s);a!==null&&r.push(a)}return yw()||(this._cachedNodes=r),r}getTextContent(){const t=this.getNodes();let n="";for(let r=0;r<t.length;r++)n+=t[r].getTextContent();return n}deleteNodes(){const t=this.getNodes();if((rt()||gw())===this&&t[0]){const n=Zs(t[0],"next");_Tt(tf(n,n))}for(const n of t)n.remove()}}function Be(e){return e instanceof Op}class Op{format;style;anchor;focus;_cachedNodes;dirty;constructor(t,n,r,s){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Be(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=function(r){const s=[],[a,i]=r.getTextSlices();a&&s.push(a.caret.origin);const l=new Set,c=new Set;for(const u of r)if(fc(u)){const{origin:d}=u;s.length===0?l.add(d):(c.add(d),s.push(d))}else{const{origin:d}=u;Pe(d)&&c.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),by(r.focus)&&Pe(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let u=Lu(r.focus.origin,"previous");fc(u)&&l.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=PW(u))l.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Pe(u)||c.has(u)||u.isEmpty()||l.has(u))break;s.pop()}if(s.length===0&&r.isCollapsed()){const u=tc(r.anchor),d=tc(r.anchor.getFlipped()),m=h=>Dd(h)?h.origin:h.getNodeAtCaret(),p=m(u)||m(d)||(r.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(p)}return s}(TEe(ose(this),"next"));return yw()||(this._cachedNodes=n),n}setTextNodeRange(t,n,r,s){this.anchor.set(t.__key,n,"text"),this.focus.set(r.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const n=t[0],r=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[l,c]=qO(this);let u="",d=!0;for(let m=0;m<t.length;m++){const p=t[m];if(Pe(p)&&!p.isInline())d||(u+=`
`),d=!p.isEmpty();else if(d=!1,nt(p)){let h=p.getTextContent();p===n?p===r?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(h=l<c?h.slice(l,c):h.slice(c,l)):h=i?h.slice(l):h.slice(c):p===r&&(h=i?h.slice(0,c):h.slice(0,l)),u+=h}else!Vn(p)&&!dc(p)||p===r&&this.isCollapsed()||(u+=p.getTextContent())}return u}applyDOMRange(t){const n=Rr(),r=n.getEditorState()._selection,s=J2e(t.startContainer,t.startOffset,t.endContainer,t.endOffset,n,r);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),Ib(this)}clone(){const t=this.anchor,n=this.focus;return new Op(Sc(t.key,t.offset,t.type),Sc(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(t){this.format=zM(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const n=sp[t];return!!(this.format&n)}insertRawText(t){const n=t.split(/(\r?\n|\t)/),r=[],s=n.length;for(let a=0;a<s;a++){const i=n[a];i===`
`||i===`\r
`?r.push(ro()):i==="	"?r.push(hw()):r.push(er(i))}this.insertNodes(r)}insertText(t){const n=this.anchor,r=this.focus,s=this.format,a=this.style;let i=n,l=r;!this.isCollapsed()&&r.isBefore(n)&&(i=r,l=n),i.type==="element"&&function(x,v,b,_){const w=x.getNode(),C=w.getChildAtIndex(x.offset),S=er();if(S.setFormat(b),S.setStyle(_),Ld(C))C.splice(0,0,[S]);else{const E=Cs(w)?Sr().append(S):S;C===null?w.append(E):C.insertBefore(E)}x.is(v)&&v.set(S.__key,0,"text"),x.set(S.__key,0,"text")}(i,l,s,a),l.type==="element"&&Db(l,tc(Du(l,"next")));const c=i.offset;let u=l.offset;const d=this.getNodes(),m=d.length;let p=d[0];nt(p)||He(26);const h=p.getTextContent().length,g=p.getParentOrThrow();let y=d[m-1];if(m===1&&l.type==="element"&&(u=h,l.set(i.key,u,"text")),this.isCollapsed()&&c===h&&(eu(p)||!p.canInsertTextAfter()||!g.canInsertTextAfter()&&p.getNextSibling()===null)){let x=p.getNextSibling();if(nt(x)&&x.canInsertTextBefore()&&!eu(x)||(x=er(),x.setFormat(s),x.setStyle(a),g.canInsertTextAfter()?p.insertAfter(x):g.insertAfter(x)),x.select(0,0),p=x,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(eu(p)||!p.canInsertTextBefore()||!g.canInsertTextBefore()&&p.getPreviousSibling()===null)){let x=p.getPreviousSibling();if(nt(x)&&!eu(x)||(x=er(),x.setFormat(s),g.canInsertTextBefore()?p.insertBefore(x):g.insertBefore(x)),x.select(),p=x,t!=="")return void this.insertText(t)}else if(p.isSegmented()&&c!==h){const x=er(p.getTextContent());x.setFormat(s),p.replace(x),p=x}else if(!this.isCollapsed()&&t!==""){const x=y.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||Pe(x)&&(!x.canInsertTextBefore()||!x.canInsertTextAfter()))return this.insertText(""),Z2e(this.anchor,this.focus,null),void this.insertText(t)}if(m===1){if(Nm(p)){const _=er(t);return _.select(),void p.replace(_)}const x=p.getFormat(),v=p.getStyle();if(c!==u||x===s&&v===a){if(_T(p)){const _=er(t);return _.setFormat(s),_.setStyle(a),_.select(),void p.replace(_)}}else{if(p.getTextContent()!==""){const _=er(t);if(_.setFormat(s),_.setStyle(a),_.select(),c===0)p.insertBefore(_,!1);else{const[w]=p.splitText(c);w.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}p.setFormat(s),p.setStyle(a)}const b=u-c;p=p.spliceText(c,b,t,!0),p.getTextContent()===""?p.remove():this.anchor.type==="text"&&(p.isComposing()?this.anchor.offset-=t.length:(this.format=x,this.style=v))}else{const x=new Set([...p.getParentKeys(),...y.getParentKeys()]),v=Pe(p)?p:p.getParentOrThrow();let b=Pe(y)?y:y.getParentOrThrow(),_=y;if(!v.is(b)&&b.isInline())do _=b,b=b.getParentOrThrow();while(b.isInline());if(l.type==="text"&&(u!==0||y.getTextContent()==="")||l.type==="element"&&y.getIndexWithinParent()<u)if(nt(y)&&!Nm(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const M=er(y.getTextContent());y.replace(M),y=M}Cs(l.getNode())||l.type!=="text"||(y=y.spliceText(0,u,"")),x.add(y.__key)}else{const M=y.getParentOrThrow();M.canBeEmpty()||M.getChildrenSize()!==1?y.remove():M.remove()}else x.add(y.__key);const w=b.getChildren(),C=new Set(d),S=v.is(b),E=v.isInline()&&p.getNextSibling()===null?v:p;for(let M=w.length-1;M>=0;M--){const k=w[M];if(k.is(p)||Pe(k)&&k.isParentOf(p))break;k.isAttached()&&(!C.has(k)||k.is(_)?S||E.insertAfter(k,!1):k.remove())}if(!S){let M=b,k=null;for(;M!==null;){const N=M.getChildren(),P=N.length;(P===0||N[P-1].is(k))&&(x.delete(M.__key),k=M),M=M.getParent()}}if(Nm(p))if(c===h)p.select();else{const M=er(t);M.select(),p.replace(M)}else p=p.spliceText(c,h-c,t,!0),p.getTextContent()===""?p.remove():p.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let M=1;M<m;M++){const k=d[M],N=k.__key;x.has(N)||k.remove()}}}removeText(){const t=rt()===this;B2(this,wTt(ose(this))),t&&rt()!==this&&_a(this)}formatText(t,n=null){if(this.isCollapsed())return this.toggleFormat(t),void Gs(null);const r=this.getNodes(),s=[];for(const w of r)nt(w)&&s.push(w);const a=w=>{r.forEach(C=>{if(Pe(C)){const S=C.getFormatFlags(t,w);C.setTextFormat(S)}})},i=s.length;if(i===0)return this.toggleFormat(t),Gs(null),void a(n);const l=this.anchor,c=this.focus,u=this.isBackward(),d=u?c:l,m=u?l:c;let p=0,h=s[0],g=d.type==="element"?0:d.offset;if(d.type==="text"&&g===h.getTextContentSize()&&(p=1,h=s[1],g=0),h==null)return;const y=h.getFormatFlags(t,n);a(y);const x=i-1;let v=s[x];const b=m.type==="text"?m.offset:v.getTextContentSize();if(h.is(v)){if(g===b)return;if(eu(h)||g===0&&b===h.getTextContentSize())h.setFormat(y);else{const w=h.splitText(g,b),C=g===0?w[0]:w[1];C.setFormat(y),d.type==="text"&&d.set(C.__key,0,"text"),m.type==="text"&&m.set(C.__key,b-g,"text")}return void(this.format=y)}g===0||eu(h)||([,h]=h.splitText(g),g=0),h.setFormat(y);const _=v.getFormatFlags(t,y);b>0&&(b===v.getTextContentSize()||eu(v)||([v]=v.splitText(b)),v.setFormat(_));for(let w=p+1;w<x;w++){const C=s[w],S=C.getFormatFlags(t,_);C.setFormat(S)}d.type==="text"&&d.set(h.__key,g,"text"),m.type==="text"&&m.set(v.__key,b,"text"),this.format=y|_}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const g=rt();return Be(g)||He(134),g.insertNodes(t)}const n=(this.isBackward()?this.focus:this.anchor).getNode(),r=Eo(n,xd),s=t[t.length-1];if(Pe(r)&&"__language"in r){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const g=R6(this);r.splice(g,0,t),s.selectEnd()}return}if(!t.some(g=>(Pe(g)||Vn(g))&&!g.isInline())){Pe(r)||He(211,n.constructor.name,n.getType());const g=R6(this);return r.splice(g,0,t),void s.selectEnd()}const a=function(g){const y=Sr();let x=null;for(let v=0;v<g.length;v++){const b=g[v],_=dc(b);if(_||Vn(b)&&b.isInline()||Pe(b)&&b.isInline()||nt(b)||b.isParentRequired()){if(x===null&&(x=b.createParentElementNode(),y.append(x),_))continue;x!==null&&x.append(b)}else y.append(b),x=null}return y}(t),i=a.getLastDescendant(),l=a.getChildren(),c=!Pe(r)||!r.isEmpty()?this.insertParagraph():null,u=l[l.length-1];let d=l[0];var m;Pe(m=d)&&xd(m)&&!m.isEmpty()&&Pe(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(Pe(r)||He(211,n.constructor.name,n.getType()),r.append(...d.getChildren()),d=l[1]),d&&(r===null&&He(212,n.constructor.name,n.getType()),function(g,y,x){const v=y.getParentOrThrow().getLastChild();let b=y;const _=[y];for(;b!==v;)b.getNextSibling()||He(140),b=b.getNextSibling(),_.push(b);let w=g;for(const C of _)w=w.insertAfter(C)}(r,d));const p=Eo(i,xd);c&&Pe(p)&&(c.canMergeWhenEmpty()||xd(u))&&(p.append(...c.getChildren()),c.remove()),Pe(r)&&r.isEmpty()&&r.remove(),i.selectEnd();const h=Pe(r)?r.getLastChild():null;dc(h)&&p!==r&&h.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=Sr();return lr().splice(this.anchor.offset,0,[i]),i.select(),i}const t=R6(this),n=Eo(this.anchor.getNode(),xd);Pe(n)||He(213);const r=n.getChildAtIndex(t),s=r?[r,...r.getNextSiblings()]:[],a=n.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const n=ro();if(this.insertNodes([n]),t){const r=n.getParentOrThrow(),s=n.getIndexWithinParent();r.select(s,s)}}extract(){const t=[...this.getNodes()],n=t.length;let r=t[0],s=t[n-1];const[a,i]=qO(this),l=this.isBackward(),[c,u]=l?[this.focus,this.anchor]:[this.anchor,this.focus],[d,m]=l?[i,a]:[a,i];if(n===0)return[];if(n===1){if(nt(r)&&!this.isCollapsed()){const p=r.splitText(d,m),h=d===0?p[0]:p[1];return h?(c.set(h.getKey(),0,"text"),u.set(h.getKey(),h.getTextContentSize(),"text"),[h]):[]}return[r]}if(nt(r)&&(d===r.getTextContentSize()?t.shift():d!==0&&([,r]=r.splitText(d),t[0]=r,c.set(r.getKey(),0,"text"))),nt(s)){const p=s.getTextContent().length;m===0?t.pop():m!==p&&([s]=s.splitText(m),t[t.length-1]=s,u.set(s.getKey(),s.getTextContentSize(),"text"))}return t}modify(t,n,r){if($re(this,t,n,r))return;const s=t==="move",a=Rr(),i=Ec(Io(a));if(!i)return;const l=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||l===null||!Pe(u)||u.isInline()||u.canBeEmpty()||ZO(l,a,c),this.dirty){let d=op(a,this.anchor.key),m=op(a,this.focus.key);this.anchor.type==="text"&&(d=xy(d)),this.focus.type==="text"&&(m=xy(m)),d&&m&&rEe(i,d,this.anchor.offset,m,this.focus.offset)}if(function(d,m,p,h){d.modify(m,p,h)}(i,t,n?"backward":"forward",r),i.rangeCount>0){const d=i.getRangeAt(0),m=this.anchor.getNode(),p=Cs(m)?m:lTt(m);if(this.applyDOMRange(d),this.dirty=!0,!s){const h=this.getNodes(),g=[];let y=!1;for(let x=0;x<h.length;x++){const v=h[x];XO(v,p)?g.push(v):y=!0}if(y&&g.length>0)if(n){const x=g[0];Pe(x)?x.selectStart():x.getParentOrThrow().selectStart()}else{const x=g[g.length-1];Pe(x)?x.selectEnd():x.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||function(x){const v=x.focus,b=x.anchor,_=b.key,w=b.offset,C=b.type;b.set(v.key,v.offset,v.type,!0),v.set(_,w,C,!0)}(this)}}r==="lineboundary"&&$re(this,t,n,r,"decorators")}forwardDeletion(t,n,r){if(!r&&(t.type==="element"&&Pe(n)&&t.offset===n.getChildrenSize()||t.type==="text"&&t.offset===n.getTextContentSize())){const s=n.getParent(),a=n.getNextSibling()||(s===null?null:s.getNextSibling());if(Pe(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const n=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let s=r.getNode();if(this.forwardDeletion(r,s,t))return;const a=LW(Du(r,t?"previous":"next"));if(a.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(fc(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(l.type==="merge-block")break;if(Pe(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=tc(c);B2(this,tf(u,u)),a.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:c,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(by(c)){if(Pe(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else l={block:c.origin,type:"merge-next-block"};continue}if(Vn(c.origin)){if(!c.origin.isIsolated())if(l.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Pe(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=nEe();u.add(c.origin.getKey()),_a(u)}else c.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:c,block:u}=l;return B2(this,tf(!c.origin.isEmpty()&&u.isEmpty()?DW(Zs(u,c.direction)):a.anchor,c)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&r.offset===0&&Lre(this,r.getNode()))return}else{const l=i.type==="text"?i.getNode():null;if(s=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const c=i.offset,u=l.getTextContentSize();if(l.is(s)||t&&c!==u||!t&&c!==0)return void Dre(l,t,c)}else if(s!==null&&s.isSegmented()){const c=r.offset,u=s.getTextContentSize();if(s.is(l)||t&&c!==0||!t&&c!==u)return void Dre(s,t,c)}(function(c,u){const d=c.anchor,m=c.focus,p=d.getNode(),h=m.getNode();if(p===h&&d.type==="text"&&m.type==="text"){const g=d.offset,y=m.offset,x=g<y,v=x?g:y,b=x?y:g,_=b-1;v!==_&&function(w){return!(yEe(w)||H5t(w))}(p.getTextContent().slice(v,b))&&(u?m.set(m.key,_,m.type):d.set(d.key,_,d.type))}})(this,t)}}if(this.removeText(),t&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&Cs(r.getParent())&&r.getPreviousSibling()===null&&Lre(this,r)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const n=this.anchor,r=n.getNode();if(this.forwardDeletion(n,r,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function bu(e){return e instanceof wT}function Ore(e){const t=e.offset;if(e.type==="text")return t;const n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function qO(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[n,r]=t;return n.type==="element"&&r.type==="element"&&n.key===r.key&&n.offset===r.offset?[0,0]:[Ore(n),Ore(r)]}function Lre(e,t){for(let n=t;n;n=n.getParent()){if(Pe(n)){if(n.collapseAtStart(e))return!0;if(vl(n))break}if(n.getPreviousSibling())break}return!1}const H5t=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function Dre(e,t,n){const r=e,s=r.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,l=0;for(let u=0;u<a;u++){const d=u===a-1;if(l=i,i+=s[u].length,t&&i===n||i>n||d){s.splice(u,1),d&&(l=void 0);break}}const c=s.join("").trim();c===""?r.remove():(r.setTextContent(c),r.select(l,l))}function Fre(e,t,n,r){let s,a=t;if(os(e)){let i=!1;const l=e.childNodes,c=l.length,u=r._blockCursorElement;a===c&&(i=!0,a=c-1);let d=l[a],m=!1;if(d===u)d=l[a+1],m=!0;else if(u!==null){const p=u.parentNode;e===p&&t>Array.prototype.indexOf.call(p.children,u)&&a--}if(s=Xh(d),nt(s))a=Fd(s,i?"next":"previous");else{let p=Xh(e);if(p===null)return null;if(Pe(p)){const h=r.getElementByKey(p.getKey());h===null&&He(214),[p,a]=p.getDOMSlot(h).resolveChildIndex(p,h,e,t),Pe(p)||He(215),i&&a>=p.getChildrenSize()&&(a=Math.max(0,p.getChildrenSize()-1));let y=p.getChildAtIndex(a);if(Pe(y)&&function(x,v,b){const _=x.getParent();return b===null||_===null||!_.canBeEmpty()||_!==b.getNode()}(y,0,n)){const x=i?y.getLastDescendant():y.getFirstDescendant();x===null?p=y:(y=x,p=Pe(y)?y:y.getParentOrThrow()),a=0}nt(y)?(s=y,p=null,a=Fd(y,i?"next":"previous")):y!==p&&i&&!m&&(Pe(p)||He(216),a=Math.min(p.getChildrenSize(),a+1))}else{const h=p.getIndexWithinParent();a=t===0&&Vn(p)&&Xh(e)===p?h:h+1,p=p.getParentOrThrow()}if(Pe(p))return Sc(p.__key,a,"element")}}else s=Xh(e);return nt(s)?Sc(s.__key,Fd(s,a,"clamp"),"text"):null}function Ure(e,t,n){const r=e.offset,s=e.getNode();if(r===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((n||!t)&&a===null&&Pe(i)&&i.isInline()){const l=i.getPreviousSibling();nt(l)&&e.set(l.__key,l.getTextContent().length,"text")}}else Pe(a)&&!n&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):nt(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(r===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&Pe(a)&&a.isInline())e.set(a.__key,0,"element");else if((n||t)&&a===null&&Pe(i)&&i.isInline()&&!i.canInsertTextAfter()){const l=i.getNextSibling();nt(l)&&e.set(l.__key,0,"text")}}}function Z2e(e,t,n){if(e.type==="text"&&t.type==="text"){const r=e.isBefore(t),s=e.is(t);Ure(e,r,s),Ure(t,!r,s),s&&t.set(e.key,e.offset,e.type);const a=Rr();if(a.isComposing()&&a._compositionKey!==e.key&&Be(n)){const i=n.anchor,l=n.focus;e.set(i.key,i.offset,i.type,!0),t.set(l.key,l.offset,l.type,!0)}}}function J2e(e,t,n,r,s,a){if(e===null||n===null||!ET(s,e,n))return null;const i=Fre(e,t,Be(a)?a.anchor:null,s);if(i===null)return null;const l=Fre(n,r,Be(a)?a.focus:null,s);if(l===null)return null;if(i.type==="element"&&l.type==="element"){const c=Xh(e),u=Xh(n);if(Vn(c)&&Vn(u))return null}return Z2e(i,l,a),[i,l]}function KO(e){return Pe(e)&&!e.isInline()}function eEe(e,t,n,r,s,a){const i=Sf(),l=new Op(Sc(e,t,s),Sc(n,r,a),0,"");return l.dirty=!0,i._selection=l,l}function tEe(){const e=Sc("root",0,"element"),t=Sc("root",0,"element");return new Op(e,t,0,"")}function nEe(){return new wT(new Set)}function pW(e,t,n,r){const s=n._window;if(s===null)return null;const a=r||s.event,i=a?a.type:void 0,l=i==="selectionchange",c=!IO&&(l||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,m,p;if(Be(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,m=t.anchorOffset,p=t.focusOffset,l&&Be(e)&&!ET(n,u,d))return e.clone();const h=J2e(u,m,d,p,n,e);if(h===null)return null;const[g,y]=h;return new Op(g,y,Be(e)?e.format:0,Be(e)?e.style:"")}function rt(){return Sf()._selection}function gw(){return Rr()._editorState._selection}function WM(e,t,n,r=1){const s=e.anchor,a=e.focus,i=s.getNode(),l=a.getNode();if(!t.is(i)&&!t.is(l))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(n<=u&&r>0||n<u&&r<0){const d=Math.max(0,u+r);s.set(c,d,"element"),a.set(c,d,"element"),Bre(e)}}else{const u=e.isBackward(),d=u?a:s,m=d.getNode(),p=u?s:a,h=p.getNode();if(t.is(m)){const g=d.offset;(n<=g&&r>0||n<g&&r<0)&&d.set(c,Math.max(0,g+r),"element")}if(t.is(h)){const g=p.offset;(n<=g&&r>0||n<g&&r<0)&&p.set(c,Math.max(0,g+r),"element")}}Bre(e)}function Bre(e){const t=e.anchor,n=t.offset,r=e.focus,s=r.offset,a=t.getNode(),i=r.getNode();if(e.isCollapsed()){if(!Pe(a))return;const l=a.getChildrenSize(),c=n>=l,u=c?a.getChildAtIndex(l-1):a.getChildAtIndex(n);if(nt(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),r.set(u.__key,d,"text")}}else{if(Pe(a)){const l=a.getChildrenSize(),c=n>=l,u=c?a.getChildAtIndex(l-1):a.getChildAtIndex(n);if(nt(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(Pe(i)){const l=i.getChildrenSize(),c=s>=l,u=c?i.getChildAtIndex(l-1):i.getChildAtIndex(s);if(nt(u)){let d=0;c&&(d=u.getTextContentSize()),r.set(u.__key,d,"text")}}}}function HM(e,t,n,r,s){let a=null,i=0,l=null;r!==null?(a=r.__key,nt(r)?(i=r.getTextContentSize(),l="text"):Pe(r)&&(i=r.getChildrenSize(),l="element")):s!==null&&(a=s.__key,nt(s)?l="text":Pe(s)&&(l="element")),a!==null&&l!==null?e.set(a,i,l):(i=t.getIndexWithinParent(),i===-1&&(i=n.getChildrenSize()),e.set(n.__key,i,"element"))}function Vre(e,t,n,r,s){e.type==="text"?e.set(n,e.offset+(t?0:s),"text"):e.offset>r.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function rEe(e,t,n,r,s){try{e.setBaseAndExtent(t,n,r,s)}catch{}}function z5t(e,t,n,r,s,a,i){const l=r.anchorNode,c=r.focusNode,u=r.anchorOffset,d=r.focusOffset,m=document.activeElement;if(s.has(uEe)&&m!==a||m!==null&&mEe(m))return;if(!Be(t))return void(e!==null&&ET(n,l,c)&&r.removeAllRanges());const p=t.anchor,h=t.focus,g=p.key,y=h.key,x=op(n,g),v=op(n,y),b=p.offset,_=h.offset,w=t.format,C=t.style,S=t.isCollapsed();let E=x,M=v,k=!1;if(p.type==="text"){E=xy(x);const j=p.getNode();k=j.getFormat()!==w||j.getStyle()!==C}else Be(e)&&e.anchor.type==="text"&&(k=!0);var N,P,L,O,A;if(h.type==="text"&&(M=xy(v)),E!==null&&M!==null&&(S&&(e===null||k||Be(e)&&(e.format!==w||e.style!==C))&&(N=w,P=C,L=b,O=g,A=performance.now(),H2e=[N,P,L,O,A]),u!==b||d!==_||l!==E||c!==M||r.type==="Range"&&S||(m!==null&&a.contains(m)||a.focus({preventScroll:!0}),p.type==="element"))){if(rEe(r,E,b,M,_),!s.has(X5t)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const j=Be(t)&&t.anchor.type==="element"?E.childNodes[b]||null:r.rangeCount>0?r.getRangeAt(0):null;if(j!==null){let T;if(j instanceof Text){const I=document.createRange();I.selectNode(j),T=I.getBoundingClientRect()}else T=j.getBoundingClientRect();(function(I,U,B){const D=_Ee(B),W=kW(D);if(D===null||W===null)return;let{top:z,bottom:$}=U,X=0,q=0,Y=B;for(;Y!==null;){const G=Y===D.body;if(G)X=0,q=Io(I).innerHeight;else{const K=Y.getBoundingClientRect();X=K.top,q=K.bottom}let J=0;if(z<X?J=-(X-z):$>q&&(J=$-q),J!==0)if(G)W.scrollBy(0,J);else{const K=Y.scrollTop;Y.scrollTop+=J;const te=Y.scrollTop-K;z-=te,$-=te}if(G)break;Y=vw(Y)}})(n,T,a)}}HO=!0}}function R6(e){let t=e;e.isCollapsed()||t.removeText();const n=rt();Be(n)&&(t=n),Be(t)||He(161);const r=t.anchor;let s=r.getNode(),a=r.offset;for(;!xd(s);){const i=s;if([s,a]=G5t(s,a),i.is(s))break}return a}function G5t(e,t){const n=e.getParent();if(!n){const s=Sr();return lr().append(s),s.select(),[lr(),0]}if(nt(e)){const s=e.splitText(t);if(s.length===0)return[n,e.getIndexWithinParent()];const a=t===0?0:1;return[n,s[0].getIndexWithinParent()+a]}if(!Pe(e)||t===0)return[n,e.getIndexWithinParent()];const r=e.getChildAtIndex(t);if(r){const s=new Op(Sc(e.__key,t,"element"),Sc(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(r,...r.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}function $re(e,t,n,r,s="decorators-and-blocks"){if(t==="move"&&r==="character"&&!e.isCollapsed()){const[d,m]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return m.set(d.key,d.offset,d.type),!0}const a=Du(e.focus,n?"previous":"next"),i=r==="lineboundary",l=t==="move";let c=a,u=s==="decorators-and-blocks";if(!kEe(c)){for(const d of c){u=!1;const{origin:m}=d;if(!Vn(m)||m.isIsolated()||(c=d,!i||!m.isInline()))break}if(u)for(const d of LW(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(fc(d))d.origin.isInline()||(c=d);else{if(Pe(d.origin))continue;Vn(d.origin)&&!d.origin.isInline()&&(c=d)}break}}if(c===a)return!1;if(l&&!i&&Vn(c.origin)&&c.origin.isKeyboardSelectable()){const d=nEe();return d.add(c.origin.getKey()),_a(d),!0}return c=tc(c),l&&Db(e.anchor,c),Db(e.focus,c),u||!i}let js=null,As=null,_i=!1,P6=!1,F2=0;const Wre={characterData:!0,childList:!0,subtree:!0};function yw(){return _i||js!==null&&js._readOnly}function zs(){_i&&He(13)}function sEe(){F2>99&&He(14)}function Sf(){return js===null&&He(195,aEe()),js}function Rr(){return As===null&&He(196,aEe()),As}function aEe(){let e=0;const t=new Set,n=yy.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=MT(s);if(_W(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===n&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let r=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(r+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),r}function q5t(){return As}function Hre(e,t,n){const r=t.__type,s=fEe(e,r);let a=n.get(r);a===void 0&&(a=Array.from(s.transforms),n.set(r,a));const i=a.length;for(let l=0;l<i&&(a[l](t),t.isAttached());l++);}function zre(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function iEe(e,t){if(!t)return;const n=e._updateTags;let r=t;Array.isArray(t)||(r=[t]);for(const s of r)n.add(s)}function K5t(e){return hW(e,Rr()._nodes)}function hW(e,t){const n=e.type,r=t.get(n);r===void 0&&He(17,n);const s=r.klass;e.type!==s.getType()&&He(18,s.name);const a=s.importJSON(e),i=e.children;if(Pe(a)&&Array.isArray(i))for(let l=0;l<i.length;l++){const c=hW(i[l],t);a.append(c)}return a}function Gre(e,t,n){const r=js,s=_i,a=As;js=t,_i=!0,As=e;try{return n()}finally{js=r,_i=s,As=a}}function iu(e,t){const n=e._pendingEditorState,r=e._rootElement,s=e._headless||r===null;if(n===null)return;const a=e._editorState,i=a._selection,l=n._selection,c=e._dirtyType!==rp,u=js,d=_i,m=As,p=e._updating,h=e._observer;let g=null;if(e._pendingEditorState=null,e._editorState=n,!s&&c&&h!==null){As=e,js=n,_i=!1,e._updating=!0;try{const S=e._dirtyType,E=e._dirtyElements,M=e._dirtyLeaves;h.disconnect(),g=w5t(a,n,e,S,E,M)}catch(S){if(S instanceof Error&&e._onError(S),P6)throw S;return dEe(e,null,r,n),S2e(e),e._dirtyType=my,P6=!0,iu(e,a),void(P6=!1)}finally{h.observe(r,Wre),e._updating=p,js=u,_i=d,As=m}}n._readOnly||(n._readOnly=!0);const y=e._dirtyLeaves,x=e._dirtyElements,v=e._normalizedNodes,b=e._updateTags,_=e._deferred;c&&(e._dirtyType=rp,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(S,E){const M=S._decorators;let k=S._pendingDecorators||M;const N=E._nodeMap;let P;for(P in k)N.has(P)||(k===M&&(k=hEe(S)),delete k[P])}(e,n);const w=s?null:Ec(Io(e));if(e._editable&&w!==null&&(c||l===null||l.dirty)&&r!==null&&!b.has(Z5t)){As=e,js=n;try{if(h!==null&&h.disconnect(),c||l===null||l.dirty){const S=e._blockCursorElement;S!==null&&ZO(S,e,r),z5t(i,l,e,w,b,r)}(function(S,E,M){let k=S._blockCursorElement;if(Be(M)&&M.isCollapsed()&&M.anchor.type==="element"&&E.contains(document.activeElement)){const N=M.anchor,P=N.getNode(),L=N.offset;let O=!1,A=null;if(L===P.getChildrenSize())L6(P.getChildAtIndex(L-1))&&(O=!0);else{const j=P.getChildAtIndex(L);if(j!==null&&L6(j)){const T=j.getPreviousSibling();(T===null||L6(T))&&(O=!0,A=S.getElementByKey(j.__key))}}if(O){const j=S.getElementByKey(P.__key);return k===null&&(S._blockCursorElement=k=function(T){const I=T.theme,U=document.createElement("div");U.contentEditable="false",U.setAttribute("data-lexical-cursor","true");let B=I.blockCursor;if(B!==void 0){if(typeof B=="string"){const D=v2e(B);B=I.blockCursor=D}B!==void 0&&U.classList.add(...B)}return U}(S._config)),E.style.caretColor="transparent",void(A===null?j.appendChild(k):j.insertBefore(k,A))}}k!==null&&ZO(k,S,E)})(e,r,l)}finally{h!==null&&h.observe(r,Wre),As=m,js=u}}g!==null&&function(S,E,M,k,N){const P=Array.from(S._listeners.mutation),L=P.length;for(let O=0;O<L;O++){const[A,j]=P[O];for(const T of j){const I=E.get(T);I!==void 0&&A(I,{dirtyLeaves:k,prevEditorState:N,updateTags:M})}}}(e,g,b,y,a),Be(l)||l===null||i!==null&&i.is(l)||e.dispatchCommand(A2e,void 0);const C=e._pendingDecorators;C!==null&&(e._decorators=C,e._pendingDecorators=null,e1("decorator",e,!0,C)),function(S,E,M){const k=Xre(E),N=Xre(M);k!==N&&e1("textcontent",S,!0,N)}(e,t||a,n),e1("update",e,!0,{dirtyElements:x,dirtyLeaves:y,editorState:n,mutatedNodes:g,normalizedNodes:v,prevEditorState:t||a,tags:b}),function(S,E){if(S._deferred=[],E.length!==0){const M=S._updating;S._updating=!0;try{for(let k=0;k<E.length;k++)E[k]()}finally{S._updating=M}}}(e,_),function(S){const E=S._updates;if(E.length!==0){const M=E.shift();if(M){const[k,N]=M;CT(S,k,N)}}}(e)}function e1(e,t,n,...r){const s=t._updating;t._updating=n;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,r)}finally{t._updating=s}}function qre(e,t){const n=e._updates;let r=t||!1;for(;n.length!==0;){const s=n.shift();if(s){const[a,i]=s,l=e._pendingEditorState;let c;i!==void 0&&(c=i.onUpdate,i.skipTransforms&&(r=!0),i.discrete&&(l===null&&He(191),l._flushSync=!0),c&&e._deferred.push(c),iEe(e,i.tag)),l==null?CT(e,a,i):a()}}return r}function CT(e,t,n){const r=e._updateTags;let s,a=!1,i=!1;n!==void 0&&(s=n.onUpdate,iEe(e,n.tag),a=n.skipTransforms||!1,i=n.discrete||!1),s&&e._deferred.push(s);const l=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=oEe(c||l),u=!0),c._flushSync=i;const d=js,m=_i,p=As,h=e._updating;js=c,_i=!1,e._updating=!0,As=e;const g=e._headless||e.getRootElement()===null;vW(null);try{u&&(g?l._selection!==null&&(c._selection=l._selection.clone()):c._selection=function(b,_){const w=b.getEditorState()._selection,C=Ec(Io(b));return Be(w)||w==null?pW(w,C,b,_):w.clone()}(e,n&&n.event||null));const x=e._compositionKey;t(),a=qre(e,a),function(b,_){const w=_.getEditorState()._selection,C=b._selection;if(Be(C)){const S=C.anchor,E=C.focus;let M;if(S.type==="text"&&(M=S.getNode(),M.selectionTransform(w,C)),E.type==="text"){const k=E.getNode();M!==k&&k.selectionTransform(w,C)}}}(c,e),e._dirtyType!==rp&&(a?function(b,_){const w=_._dirtyLeaves,C=b._nodeMap;for(const S of w){const E=C.get(S);nt(E)&&E.isAttached()&&E.isSimpleText()&&!E.isUnmergeable()&&Sre(E)}}(c,e):function(b,_){const w=_._dirtyLeaves,C=_._dirtyElements,S=b._nodeMap,E=Ed(),M=new Map;let k=w,N=k.size,P=C,L=P.size;for(;N>0||L>0;){if(N>0){_._dirtyLeaves=new Set;for(const O of k){const A=S.get(O);nt(A)&&A.isAttached()&&A.isSimpleText()&&!A.isUnmergeable()&&Sre(A),A!==void 0&&zre(A,E)&&Hre(_,A,M),w.add(O)}if(k=_._dirtyLeaves,N=k.size,N>0){F2++;continue}}_._dirtyLeaves=new Set,_._dirtyElements=new Map,P.delete("root")&&P.set("root",!0);for(const O of P){const A=O[0],j=O[1];if(C.set(A,j),!j)continue;const T=S.get(A);T!==void 0&&zre(T,E)&&Hre(_,T,M)}k=_._dirtyLeaves,N=k.size,P=_._dirtyElements,L=P.size,F2++}_._dirtyLeaves=w,_._dirtyElements=C}(c,e),qre(e),function(b,_,w,C){const S=b._nodeMap,E=_._nodeMap,M=[];for(const[k]of C){const N=E.get(k);N!==void 0&&(N.isAttached()||(Pe(N)&&_2e(N,k,S,E,M,C),S.has(k)||C.delete(k),M.push(k)))}for(const k of M)E.delete(k);for(const k of w){const N=E.get(k);N===void 0||N.isAttached()||(S.has(k)||w.delete(k),E.delete(k))}}(l,c,e._dirtyLeaves,e._dirtyElements)),x!==e._compositionKey&&(c._flushSync=!0);const v=c._selection;if(Be(v)){const b=c._nodeMap,_=v.anchor.key,w=v.focus.key;b.get(_)!==void 0&&b.get(w)!==void 0||He(19)}else bu(v)&&v._nodes.size===0&&(c._selection=null)}catch(x){return x instanceof Error&&e._onError(x),e._pendingEditorState=l,e._dirtyType=my,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void iu(e)}finally{js=d,_i=m,As=p,e._updating=h,F2=0}e._dirtyType!==rp||e._deferred.length>0||function(x,v){const b=v.getEditorState()._selection,_=x._selection;if(_!==null){if(_.dirty||!_.is(b))return!0}else if(b!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,iu(e)):u&&tTt(()=>{iu(e)}):(c._flushSync=!1,u&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function $i(e,t,n){As===e&&n===void 0?t():CT(e,t,n)}class t1{element;before;after;constructor(t,n,r){this.element=t,this.before=n||null,this.after=r||null}withBefore(t){return new t1(this.element,t,this.after)}withAfter(t){return new t1(this.element,this.before,t)}withElement(t){return this.element===t?this:new t1(t,this.before,this.after)}insertChild(t){const n=this.before||this.getManagedLineBreak();return n!==null&&n.parentElement!==this.element&&He(222),this.element.insertBefore(t,n),this}removeChild(t){return t.parentElement!==this.element&&He(223),this.element.removeChild(t),this}replaceChild(t,n){return n.parentElement!==this.element&&He(224),this.element.replaceChild(t,n),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const n=t==="decorator"&&(Ab||fy||jb);this.insertManagedLineBreak(n)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const n=this.element,r=t.nodeName==="IMG"?t.nextSibling:null;r&&n.removeChild(r),n.removeChild(t),n.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const n=this.getManagedLineBreak();if(n){if(t===(n.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,s=this.before,a=document.createElement("br");if(r.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",r.insertBefore(i,a),r.__lexicalLineBreak=i}else r.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let n=this.after;n!==null;n=n.previousSibling)t++;return t}resolveChildIndex(t,n,r,s){if(r===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=Kre(n,r);a.push(s);const i=Kre(n,this.element);let l=t.getIndexWithinParent();for(let c=0;c<i.length;c++){const u=a[c],d=i[c];if(u===void 0||u<d)break;if(u>d){l+=1;break}}return[t.getParentOrThrow(),l]}}function Kre(e,t){const n=[];let r=t;for(;r!==e&&r!==null;r=r.parentNode){let s=0;for(let a=r.previousSibling;a!==null;a=a.previousSibling)s++;n.push(s)}return r!==e&&He(225),n.reverse()}class so extends Od{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return c5t[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getChildrenKeys(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n.__key),n=n.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=Rr()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(t)}getAllTextNodes(){const t=[];let n=this.getFirstChild();for(;n!==null;){if(nt(n)&&t.push(n),Pe(n)){const r=n.getAllTextNodes();t.push(...r)}n=n.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Pe(t);){const n=t.getFirstChild();if(n===null)break;t=n}return t}getLastDescendant(){let t=this.getLastChild();for(;Pe(t);){const n=t.getLastChild();if(n===null)break;t=n}return t}getDescendantByIndex(t){const n=this.getChildren(),r=n.length;if(t>=r){const a=n[r-1];return Pe(a)&&a.getLastDescendant()||a||null}const s=n[t];return Pe(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Is(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&He(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Is(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&He(96,this.__key),t}getChildAtIndex(t){const n=this.getChildrenSize();let r,s;if(t<n/2){for(r=this.getFirstChild(),s=0;r!==null&&s<=t;){if(s===t)return r;r=r.getNextSibling(),s++}return null}for(r=this.getLastChild(),s=n-1;r!==null&&s>=t;){if(s===t)return r;r=r.getPreviousSibling(),s--}return null}getTextContent(){let t="";const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContent(),Pe(a)&&s!==r-1&&!a.isInline()&&(t+=Ou)}return t}getTextContentSize(){let t=0;const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContentSize(),Pe(a)&&s!==r-1&&!a.isInline()&&(t+=Ou.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const n=gre[t];return!!(this.getFormat()&n)}return!1}hasTextFormat(t){const n=sp[t];return!!(this.getTextFormat()&n)}getFormatFlags(t,n){return zM(this.getLatest().__textFormat,t,n)}getTextStyle(){return this.getLatest().__textStyle}select(t,n){zs();const r=rt();let s=t,a=n;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&n===0){const c=this.getFirstChild();if(nt(c)||Pe(c))return c.select(0,0)}else if(!(t!==void 0&&t!==i||n!==void 0&&n!==i)){const c=this.getLastChild();if(nt(c)||Pe(c))return c.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const l=this.__key;return Be(r)?(r.anchor.set(l,s,"element"),r.focus.set(l,a,"element"),r.dirty=!0,r):eEe(l,s,l,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(n=>n.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const n=this.getWritable();return n.__dir=t,n}setFormat(t){return this.getWritable().__format=t!==""?gre[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const n=this.getWritable();return n.__textFormat=t,n}setTextStyle(t){const n=this.getWritable();return n.__textStyle=t,n}setIndent(t){return this.getWritable().__indent=t,this}splice(t,n,r){const s=r.length,a=this.getChildrenSize(),i=this.getWritable();t+n<=a||He(226,String(t),String(n),String(a));const l=i.__key,c=[],u=[],d=this.getChildAtIndex(t+n);let m=null,p=a-n+s;if(t!==0)if(t===a)m=this.getLastChild();else{const g=this.getChildAtIndex(t);g!==null&&(m=g.getPreviousSibling())}if(n>0){let g=m===null?this.getFirstChild():m.getNextSibling();for(let y=0;y<n;y++){g===null&&He(100);const x=g.getNextSibling(),v=g.__key;jm(g.getWritable()),u.push(v),g=x}}let h=m;for(let g=0;g<s;g++){const y=r[g];h!==null&&y.is(h)&&(m=h=h.getPreviousSibling());const x=y.getWritable();x.__parent===l&&p--,jm(x);const v=y.__key;if(h===null)i.__first=v,x.__prev=null;else{const b=h.getWritable();b.__next=v,x.__prev=b.__key}y.__key===l&&He(76),x.__parent=l,c.push(v),h=y}if(t+n===a)h!==null&&(h.getWritable().__next=null,i.__last=h.__key);else if(d!==null){const g=d.getWritable();if(h!==null){const y=h.getWritable();g.__prev=h.__key,y.__next=d.__key}else g.__prev=null}if(i.__size=p,u.length){const g=rt();if(Be(g)){const y=new Set(u),x=new Set(c),{anchor:v,focus:b}=g;Yre(v,y,x)&&HM(v,v.getNode(),this,m,d),Yre(b,y,x)&&HM(b,b.getNode(),this,m,d),p!==0||this.canBeEmpty()||vl(this)||this.remove()}}return i}getDOMSlot(t){return new t1(t)}exportDOM(t){const{element:n}=super.exportDOM(t);if(os(n)){const r=this.getIndent();r>0&&(n.style.paddingInlineStart=40*r+"px");const s=this.getDirection();s&&(n.dir=s)}return{element:n}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},n=this.getTextFormat(),r=this.getTextStyle();return n!==0&&(t.textFormat=n),r!==""&&(t.textStyle=r),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,n){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,n,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,n){const r=this.getDOMSlot(t);let s=r.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=n.getElementByKey(a.getKey());i!==null&&(s==null?(r.insertChild(i),s=i):s!==i&&r.replaceChild(i,s),s=s.nextSibling)}}}function Pe(e){return e instanceof so}function Yre(e,t,n){let r=e.getNode();for(;r;){const s=r.__key;if(t.has(s)&&!n.has(s))return!0;r=r.getParent()}return!1}class ST extends Od{decorate(t,n){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Vn(e){return e instanceof ST}class Lp extends so{__cachedText;static getType(){return"root"}static clone(){return new Lp}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){He(51)}getTextContent(){const t=this.__cachedText;return!yw()&&Rr()._dirtyType!==rp||t===null?super.getTextContent():t}remove(){He(52)}replace(t){He(53)}insertBefore(t){He(54)}insertAfter(t){He(55)}updateDOM(t,n){return!1}splice(t,n,r){for(const s of r)Pe(s)||Vn(s)||He(282);return super.splice(t,n,r)}static importJSON(t){return lr().updateFromJSON(t)}collapseAtStart(){return!0}}function Cs(e){return e instanceof Lp}function oEe(e){return new xw(new Map(e._nodeMap))}function gW(){return new xw(new Map([["root",new Lp]]))}function lEe(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&He(130,n.name),Pe(e)){const r=t.children;Array.isArray(r)||He(59,n.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=lEe(s[a]);r.push(i)}}return t}function Y5t(e){return e instanceof xw}class xw{_nodeMap;_selection;_flushSync;_readOnly;constructor(t,n){this._nodeMap=t,this._selection=n||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,n){return Gre(n&&n.editor||null,this,t)}clone(t){const n=new xw(this._nodeMap,t===void 0?this._selection:t);return n._readOnly=!0,n}toJSON(){return Gre(null,this,()=>({root:lEe(lr())}))}}const Q5t="historic",vmn="history-push",n1="history-merge",cEe="paste",uEe="collaboration",X5t="skip-scroll-into-view",Z5t="skip-dom-selection";class yW extends so{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class Dp extends so{static getType(){return"paragraph"}static clone(t){return new Dp(t.__key)}createDOM(t){const n=document.createElement("p"),r=Mg(t.theme,"paragraph");return r!==void 0&&n.classList.add(...r),n}updateDOM(t,n,r){return!1}static importDOM(){return{p:t=>({conversion:J5t,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(os(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r)}return{element:n}}static importJSON(t){return Sr().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,n){const r=Sr();r.setTextFormat(t.format),r.setTextStyle(t.style);const s=this.getDirection();return r.setDirection(s),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,n),r}collapseAtStart(){const t=this.getChildren();if(t.length===0||nt(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function J5t(e){const t=Sr();return e.style&&(t.setFormat(e.style.textAlign),jW(e,t)),{node:t}}function Sr(){return Wo(new Dp)}function Ld(e){return e instanceof Dp}const ps=0,Ob=1,Gc=2;function dEe(e,t,n,r){const s=e._keyToDOMMap;s.clear(),e._editorState=gW(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=rp,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),n!==null&&(n.textContent="",s.set("root",n))}function xW(e){const t=e||{},n=q5t(),r=t.theme||{},s=e===void 0?n:t.parentEditor||null,a=t.disableEvents||!1,i=gW(),l=t.namespace||(s!==null?s._config.namespace:xEe()),c=t.editorState,u=[Lp,Lc,Ax,Ix,Dp,yW,...t.nodes||[]],{onError:d,html:m}=t,p=t.editable===void 0||t.editable;let h;if(e===void 0&&n!==null)h=n._nodes;else{h=new Map;for(let y=0;y<u.length;y++){let x=u[y],v=null,b=null;if(typeof x!="function"){const E=x;x=E.replace,v=E.with,b=E.withKlass||null}const{ownNodeConfig:_}=AW(x),w=x.getType(),C=x.transform(),S=new Set;_&&_.$transform&&S.add(_.$transform),C!==null&&S.add(C),h.set(w,{exportDOM:m&&m.export?m.export.get(x):void 0,klass:x,replace:v,replaceWithKlass:b,sharedNodeState:y5t(u[y]),transforms:S})}}const g=new yy(i,s,h,{disableEvents:a,namespace:l,theme:r},d||console.error,function(y,x){const v=new Map,b=new Set,_=w=>{Object.keys(w).forEach(C=>{let S=v.get(C);S===void 0&&(S=[],v.set(C,S)),S.push(w[C])})};return y.forEach(w=>{const C=w.klass.importDOM;if(C==null||b.has(C))return;b.add(C);const S=C.call(w.klass);S!==null&&_(S)}),x&&_(x),v}(h,m?m.import:void 0),p,e);return c!==void 0&&(g._pendingEditorState=c,g._dirtyType=my),g}class yy{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(t,n,r,s,a,i,l,c){this._createEditorArgs=c,this._parentEditor=n,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=rp,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=xEe(),this._onError=a,this._htmlConversions=i,this._editable=l,this._headless=n!==null&&n._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const n=this._listeners.update;return n.add(t),()=>{n.delete(t)}}registerEditableListener(t){const n=this._listeners.editable;return n.add(t),()=>{n.delete(t)}}registerDecoratorListener(t){const n=this._listeners.decorator;return n.add(t),()=>{n.delete(t)}}registerTextContentListener(t){const n=this._listeners.textcontent;return n.add(t),()=>{n.delete(t)}}registerRootListener(t){const n=this._listeners.root;return t(this._rootElement,null),n.add(t),()=>{t(null,this._rootElement),n.delete(t)}}registerCommand(t,n,r){r===void 0&&He(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&He(36,String(t));const i=a[r];return i.add(n),()=>{i.delete(n),a.every(l=>l.size===0)&&s.delete(t)}}registerMutationListener(t,n,r){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(n);i===void 0&&(i=new Set,a.set(n,i)),i.add(s);const l=r&&r.skipInitialization;return l!==void 0&&l||this.initializeMutationListener(n,s),()=>{i.delete(s),i.size===0&&a.delete(n)}}getRegisteredNode(t){const n=this._nodes.get(t.getType());return n===void 0&&He(37,t.name),n}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,n){const r=this._editorState,s=sse(r).get(n.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,n){const r=this.getRegisteredNode(t);return r.transforms.add(n),r}registerNodeTransform(t,n){const r=this.registerNodeTransformToKlass(t,n),s=[r],a=r.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,n);s.push(i)}return function(i,l){const c=sse(i.getEditorState()),u=[];for(const d of l){const m=c.get(d);m&&u.push(m)}u.length!==0&&i.update(()=>{for(const d of u)for(const m of d.keys()){const p=Is(m);p&&p.markDirty()}},i._pendingEditorState===null?{tag:n1}:void 0)}(this,s.map(i=>i.klass.getType())),()=>{s.forEach(i=>i.transforms.delete(n))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,n){return ht(this,t,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const n=this._rootElement;if(t!==n){const r=Mg(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,dEe(this,n,t,s),n!==null&&(this._config.disableEvents||L5t(n),r!=null&&n.classList.remove(...r)),t!==null){const a=kW(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=my,S2e(this),this._updateTags.add(n1),iu(this),this._config.disableEvents||function(l,c){const u=l.ownerDocument,d=$M.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",Y2e),$M.set(u,(d||0)+1),l.__lexicalEditor=c;const m=K2e(l);for(let p=0;p<WO.length;p++){const[h,g]=WO[p],y=typeof g=="function"?x=>{jre(x)||(Nre(x),(c.isEditable()||h==="click")&&g(x,c))}:x=>{if(jre(x))return;Nre(x);const v=c.isEditable();switch(h){case"cut":return v&&ht(c,fW,x);case"copy":return ht(c,dW,x);case"paste":return v&&ht(c,pw,x);case"dragstart":return v&&ht(c,V2e,x);case"dragover":return v&&ht(c,j5t,x);case"dragend":return v&&ht(c,A5t,x);case"focus":return v&&ht(c,R5t,x);case"blur":return v&&ht(c,P5t,x);case"drop":return v&&ht(c,B2e,x)}};l.addEventListener(h,y),m.push(()=>{l.removeEventListener(h,y)})}}(t,this),r!=null&&t.classList.add(...r)}else this._window=null,this._updateTags.add(n1),iu(this);e1("root",this,!1,t,n)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,n){t.isEmpty()&&He(38);let r=t;r._readOnly&&(r=oEe(t),r._selection=t._selection?t._selection.clone():null),C2e(this);const s=this._pendingEditorState,a=this._updateTags,i=n!==void 0?n.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),iu(this)),this._pendingEditorState=r,this._dirtyType=my,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||iu(this)}parseEditorState(t,n){return function(r,s,a){const i=gW(),l=js,c=_i,u=As,d=s._dirtyElements,m=s._dirtyLeaves,p=s._cloneNotNeeded,h=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,js=i,_i=!1,As=s,vW(null);try{const g=s._nodes;hW(r.root,g),a&&a(),i._readOnly=!0}catch(g){g instanceof Error&&s._onError(g)}finally{s._dirtyElements=d,s._dirtyLeaves=m,s._cloneNotNeeded=p,s._dirtyType=h,js=l,_i=c,As=u}return i}(typeof t=="string"?JSON.parse(t):t,this,n)}read(t){return iu(this),this.getEditorState().read(t,{editor:this})}update(t,n){(function(r,s,a){r._updating?r._updates.push([s,a]):CT(r,s,a)})(this,t,n)}focus(t,n={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),$i(this,()=>{const s=rt(),a=lr();s!==null?s.dirty||_a(s.clone()):a.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),QO("focus"),oTt(()=>{r.removeAttribute("autocapitalize"),t&&t()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const n=Ec(this._window);n!==null&&n.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,e1("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}yy.version="0.36.1+prod.esm";let YO=null;function vW(e){YO=e}let eTt=1;function fEe(e,t){const n=bW(e,t);return n===void 0&&He(30,t),n}function bW(e,t){return e._nodes.get(t)}const tTt=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function Qre(e){return Vn(vy(e))}function mEe(e){const t=document.activeElement;if(!os(t))return!1;const n=t.nodeName;return Vn(vy(e))&&(n==="INPUT"||n==="TEXTAREA"||t.contentEditable==="true"&&MT(t)==null)}function ET(e,t,n){const r=e.getRootElement();try{return r!==null&&r.contains(t)&&r.contains(n)&&t!==null&&!mEe(t)&&wW(t)===e}catch{return!1}}function _W(e){return e instanceof yy}function wW(e){let t=e;for(;t!=null;){const n=MT(t);if(_W(n))return n;t=vw(t)}return null}function MT(e){return e?e.__lexicalEditor:null}function Nm(e){return _T(e)||e.isToken()}function eu(e){return Nm(e)||e.isSegmented()}function Zu(e){return Rx(e)&&e.nodeType===e5t}function nTt(e){return Rx(e)&&e.nodeType===t5t}function xy(e){let t=e;for(;t!=null;){if(Zu(t))return t;t=t.firstChild}return null}function zM(e,t,n){const r=sp[t];if(n!==null&&(e&r)==(n&r))return e;let s=e^r;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function rTt(e,t){const n=function(){const i=YO;return YO=null,i}();if((t=t||n&&n.__key)!=null)return void(e.__key=t);zs(),sEe();const r=Rr(),s=Sf(),a=""+eTt++;s._nodeMap.set(a,e),Pe(e)?r._dirtyElements.set(a,!0):r._dirtyLeaves.add(a),r._cloneNotNeeded.add(a),r._dirtyType=b2e,e.__key=a}function jm(e){const t=e.getParent();if(t!==null){const n=e.getWritable(),r=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,l=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(r.__first=i),a===null&&(r.__last=l),c!==null&&(c.__next=i),u!==null&&(u.__prev=l),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function GM(e){sEe();const t=e.getLatest(),n=t.__parent,r=Sf(),s=Rr(),a=r._nodeMap,i=s._dirtyElements;n!==null&&function(c,u,d){let m=c;for(;m!==null;){if(d.has(m))return;const p=u.get(m);if(p===void 0)break;d.set(m,!1),m=p.__parent}}(n,a,i);const l=t.__key;s._dirtyType=b2e,Pe(e)?i.set(l,!0):s._dirtyLeaves.add(l)}function Gs(e){zs();const t=Rr(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,n!==null){const r=Is(n);r!==null&&r.getWritable()}if(e!==null){const r=Is(e);r!==null&&r.getWritable()}}}function Ed(){return yw()?null:Rr()._compositionKey}function Is(e,t){const n=(t||Sf())._nodeMap.get(e);return n===void 0?null:n}function pEe(e,t){const n=kT(e,Rr());return n!==void 0?Is(n,t):null}function kT(e,t){return e[`__lexicalKey_${t._key}`]}function vy(e,t){let n=e;for(;n!=null;){const r=pEe(n,t);if(r!==null)return r;n=vw(n)}return null}function hEe(e){const t=e._decorators,n=Object.assign({},t);return e._pendingDecorators=n,n}function Xre(e){return e.read(()=>lr().getTextContent())}function lr(){return gEe(Sf())}function gEe(e){return e._nodeMap.get("root")}function _a(e){zs();const t=Sf();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function Xh(e){const t=Rr(),n=function(r,s){let a=r;for(;a!=null;){const i=kT(a,s);if(i!==void 0)return i;a=vw(a)}return null}(e,t);return n===null?e===t.getRootElement()?Is("root"):null:Is(n)}function yEe(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function CW(e){const t=[];let n=e;for(;n!==null;)t.push(n),n=n._parentEditor;return t}function xEe(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function vEe(e){return Zu(e)?e.nodeValue:null}function SW(e,t,n){const r=Ec(Io(t));if(r===null)return;const s=r.anchorNode;let{anchorOffset:a,focusOffset:i}=r;if(s!==null){let l=vEe(s);const c=vy(s);if(l!==null&&nt(c)){if(l===vT&&n){const u=n.length;l=n,a=u,i=u}l!==null&&EW(c,l,a,i,e)}}}function EW(e,t,n,r,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let l=t;(i||s)&&t[t.length-1]===vT&&(l=t.slice(0,-1));const c=a.getTextContent();if(s||l!==c){if(l===""){if(Gs(null),jb||fy||Ab)a.remove();else{const y=Rr();setTimeout(()=>{y.update(()=>{a.isAttached()&&a.remove()})},20)}return}const u=a.getParent(),d=gw(),m=a.getTextContentSize(),p=Ed(),h=a.getKey();if(a.isToken()||p!==null&&h===p&&!i||Be(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===m&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const g=rt();if(!Be(g)||n===null||r===null)return void Zre(a,l,g);if(g.setTextNodeRange(a,n,a,r),a.isSegmented()){const y=er(a.getTextContent());a.replace(y),a=y}Zre(a,l,g)}}}function Zre(e,t,n){if(e.setTextContent(t),Be(n)){const r=e.getKey();for(const s of["anchor","focus"]){const a=n[s];a.type==="text"&&a.key===r&&(a.offset=Fd(e,a.offset,"clamp"))}}}function vS(e,t,n){const r=t[n]||!1;return r==="any"||r===e[n]}function sTt(e,t){return vS(e,t,"altKey")&&vS(e,t,"ctrlKey")&&vS(e,t,"shiftKey")&&vS(e,t,"metaKey")}function qn(e,t,n){return sTt(e,n)&&e.key.toLowerCase()===t.toLowerCase()}const Yc={ctrlKey:!Jo,metaKey:Jo},Jre={altKey:Jo,ctrlKey:!Jo};function ese(e){return e.key==="Backspace"}function tse(e){return qn(e,"a",Yc)}function aTt(e){const t=lr();if(Be(e)){const n=e.anchor,r=e.focus,s=n.getNode().getTopLevelElementOrThrow().getParentOrThrow();return n.set(s.getKey(),0,"element"),r.set(s.getKey(),s.getChildrenSize(),"element"),Ib(e),e}{const n=t.select(0,t.getChildrenSize());return _a(Ib(n)),n}}function Mg(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const n=e.__lexicalClassNameCache,r=n[t];if(r!==void 0)return r;const s=e[t];if(typeof s=="string"){const a=v2e(s);return n[t]=a,a}return s}function MW(e,t,n,r,s){if(n.size===0)return;const a=r.__type,i=r.__key,l=t.get(a);l===void 0&&He(33,a);const c=l.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const d=u.get(i),m=d==="destroyed"&&s==="created";(d===void 0||m)&&u.set(i,m?"updated":s)}function nse(e,t,n){const r=e.getParent();let s=n,a=e;return r!==null&&(n===0&&(s=a.getIndexWithinParent(),a=r)),a.getChildAtIndex(s-1)}function iTt(e,t){const n=e.offset;if(e.type==="element")return nse(e.getNode(),t,n);{const r=e.getNode();if(n===0){const s=r.getPreviousSibling();return s===null?nse(r.getParentOrThrow(),t,r.getIndexWithinParent()+0):s}}return null}function bEe(e){const t=Io(e).event,n=t&&t.inputType;return n==="insertFromPaste"||n==="insertFromPasteAsQuotation"}function ht(e,t,n){return function(r,s,a){const i=CW(r);for(let l=4;l>=0;l--)for(let c=0;c<i.length;c++){const u=i[c],d=u._commands.get(s);if(d!==void 0){const m=d[l];if(m!==void 0){const p=Array.from(m),h=p.length;let g=!1;if($i(u,()=>{for(let y=0;y<h;y++)if(p[y](a,r))return void(g=!0)}),g)return g}}}return!1}(e,t,n)}function TT(e){return!Cs(e)&&!e.isLastChild()&&!e.isInline()}function op(e,t){const n=e._keyToDOMMap.get(t);return n===void 0&&He(75,t),n}function vw(e){const t=e.assignedSlot||e.parentElement;return JO(t)?t.host:t}function _Ee(e){return nTt(e)?e:os(e)?e.ownerDocument:null}function QO(e){zs(),Rr()._updateTags.add(e)}function oTt(e){zs(),Rr()._deferred.push(e)}function XO(e,t){let n=e.getParent();for(;n!==null;){if(n.is(t))return!0;n=n.getParent()}return!1}function kW(e){const t=_Ee(e);return t?t.defaultView:null}function Io(e){const t=e._window;return t===null&&He(78),t}function lTt(e){let t=e.getParentOrThrow();for(;t!==null;){if(vl(t))return t;t=t.getParentOrThrow()}return t}function vl(e){return Cs(e)||Pe(e)&&e.isShadowRoot()}function Wo(e){const t=Rr(),n=e.getType(),r=bW(t,n);r===void 0&&He(200,e.constructor.name,n);const{replace:s,replaceWithKlass:a}=r;if(s!==null){const i=s(e),l=i.constructor;return a!==null?i instanceof a||He(201,a.name,a.getType(),l.name,l.getType(),e.constructor.name,n):i instanceof e.constructor&&l!==e.constructor||He(202,l.name,l.getType(),e.constructor.name,n),i.__key===e.__key&&He(203,e.constructor.name,n,l.name,l.getType()),i}return e}function O6(e,t){!Cs(e.getParent())||Pe(t)||Vn(t)||He(99)}function cTt(e){const t=Is(e);return t===null&&He(63,e),t}function L6(e){return(Vn(e)||Pe(e)&&!e.canBeEmpty())&&!e.isInline()}function ZO(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;const r=e.parentElement;r!==null&&r.removeChild(e)}function Ec(e){return jl?(e||window).getSelection():null}function uTt(e){const t=kW(e);return t?t.getSelection():null}function TW(e){return os(e)&&e.tagName==="A"}function os(e){return Rx(e)&&e.nodeType===J3t}function Rx(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function JO(e){return Rx(e)&&e.nodeType===n5t}function eL(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function qM(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function xd(e){if(Vn(e)&&!e.isInline())return!0;if(!Pe(e)||vl(e))return!1;const t=e.getFirstChild(),n=t===null||dc(t)||nt(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&n}function NW(){return Rr()}const rse=new WeakMap,dTt=new Map;function sse(e){if(!e._readOnly&&e.isEmpty())return dTt;e._readOnly||He(192);let t=rse.get(e);return t||(t=function(n){const r=new Map;for(const[s,a]of n._nodeMap){const i=a.__type;let l=r.get(i);l||(l=new Map,r.set(i,l)),l.set(s,a)}return r}(e),rse.set(e,t)),t}function wEe(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function jW(e,t){const n=parseInt(e.style.paddingInlineStart,10)||0,r=Math.round(n/40);t.setIndent(r)}function fTt(e){return e.__lexicalUnmanaged===!0}function O0(e,t){return function(n,r){return Object.prototype.hasOwnProperty.call(n,r)}(e,t)&&e[t]!==Od[t]}function AW(e){const t=yre in e.prototype?e.prototype[yre]():void 0,n=function(i){if(!(i===Od||i.prototype instanceof Od)){let l="<unknown>",c="<unknown>";try{l=i.getType()}catch{}try{yy.version&&(c=JSON.parse(yy.version))}catch{}He(290,i.name,l,c)}return i===ST||i===so||i===Od}(e),r=!n&&O0(e,"getType")?e.getType():void 0;let s,a=r;if(t)if(r)s=t[r];else for(const[i,l]of Object.entries(t))a=i,s=l;if(!n&&a&&(O0(e,"getType")||(e.getType=()=>a),O0(e,"clone")||(e.clone=i=>(vW(i),new e)),O0(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!O0(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function CEe(e){const t=NW();return zs(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const Eo=(e,t)=>{let n=e;for(;n!=null&&!Cs(n);){if(t(n))return n;n=n.getParent()}return null},mTt={next:"previous",previous:"next"};class IW{origin;constructor(t){this.origin=t}[Symbol.iterator](){return SEe({hasNext:by,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return Zs(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Zs(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,n){const r=this.getNodeAtCaret();return t.is(this.origin)||t.is(r)||(r===null?this.insert(t):r.replace(t,n)),this}splice(t,n,r="next"){const s=r===this.direction?n:Array.from(n).reverse();let a=this;const i=this.getParentAtCaret(),l=new Map;for(let c=a.getAdjacentCaret();c!==null&&l.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();l.set(u.getKey(),u)}for(const c of s){if(l.size>0){const u=a.getNodeAtCaret();if(u){if(l.delete(u.getKey()),l.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const d=c.getParent();d&&d.is(i)&&c.remove(),u.replace(c)}}else u===null&&He(263,Array.from(l).join(" "))}else a.insert(c);a=Zs(c,this.direction)}for(const c of l.values())c.remove();return this}}class Lb extends IW{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Lu(t,this.direction)}getParentCaret(t="root"){return Zs(RW(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Px(this.direction);return Zs(this.getNodeAtCaret(),t)||Lu(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof Lb&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const pTt={root:Cs,shadowRoot:vl};function Px(e){return mTt[e]}function RW(e,t="root"){return pTt[t](e)?null:e}class lp extends IW{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Zs(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Pe(this.origin)?Lu(this.origin,this.direction):null}getParentCaret(t="root"){return Zs(RW(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Px(this.direction);return Zs(this.getNodeAtCaret(),t)||Lu(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof lp&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof lp||t instanceof cp)&&this.direction===t.direction&&this.origin.is(t.origin)}}class cp extends IW{type="text";offset;constructor(t,n){super(t),this.offset=n}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:up(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Zs(RW(this.getParentAtCaret(),t),this.direction)}getFlipped(){return up(this.origin,Px(this.direction),this.offset)}isSamePointCaret(t){return t instanceof cp&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof lp||t instanceof cp)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Zs(this.origin,this.direction)}}function Dd(e){return e instanceof cp}function by(e){return e instanceof lp}function fc(e){return e instanceof Lb}const hTt={next:class extends cp{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends cp{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},gTt={next:class extends lp{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends lp{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},yTt={next:class extends Lb{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends Lb{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Zs(e,t){return e?new gTt[t](e):null}function up(e,t,n){return e?new hTt[t](e,Fd(e,n)):null}function Fd(e,t,n="error"){const r=e.getTextContentSize();let s=t==="next"?r:t==="previous"?0:t;return(s<0||s>r)&&(n!=="clamp"&&y2e(284,String(t),String(r),e.getKey()),s=s<0?0:r),s}function ase(e,t){return new vTt(e,t)}function Lu(e,t){return Pe(e)?new yTt[t](e):null}function xTt(e){return e&&e.getChildCaret()||e}function PW(e){return e&&xTt(e.getAdjacentCaret())}class OW{type="node-caret-range";direction;anchor;focus;constructor(t,n,r){this.anchor=t,this.focus=n,this.direction=r}getLatest(){const t=this.anchor.getLatest(),n=this.focus.getLatest();return t===this.anchor&&n===this.focus?this:new OW(t,n,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return Dd(a)?function(i,l){const{direction:c,origin:u}=i,d=Fd(u,l==="focus"?Px(c):c);return ase(i,d-i.offset)}(a,s):null},n=t("anchor"),r=t("focus");if(n&&r){const{caret:s}=n,{caret:a}=r;if(s.isSameNodeCaret(a))return[ase(s,a.offset-s.offset),null]}return[n,r]}iterNodeCarets(t="root"){const n=Dd(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),s=Dd(r),a=i=>i.isSameNodeCaret(r)?null:PW(i)||i.getParentCaret(t);return SEe({hasNext:i=>i!==null&&!(s&&r.isSameNodeCaret(i)),initial:n.isSameNodeCaret(r)?null:a(n),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class vTt{type="slice";caret;distance;constructor(t,n){this.caret=t,this.distance=n}getSliceIndices(){const{distance:t,caret:{offset:n}}=this,r=n+t;return r<n?[r,n]:[n,r]}getTextContent(){const[t,n]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,n)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:n}}=this,[r,s]=this.getSliceIndices(),a=t.getTextContent();return up(t.setTextContent(a.slice(0,r)+a.slice(s)),n,r)}}function LW(e){return tf(e,Zs(lr(),e.direction))}function bTt(e){return tf(e,e)}function tf(e,t){return e.direction!==t.direction&&He(265),new OW(e,t,e.direction)}function SEe(e){const{initial:t,hasNext:n,step:r,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!n(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=r(a),i}}}function EEe(e,t){const n=U2(e.origin,t.origin);switch(n===null&&He(275,e.origin.getKey(),t.origin.getKey()),n.type){case"same":{const r=e.type==="text",s=t.type==="text";return r&&s?function(a,i){return Math.sign(a-i)}(e.offset,t.offset):e.type===t.type?0:r?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return MEe(n)}}function MEe(e){const{a:t,b:n}=e,r=t.__key,s=n.__key;let a=t,i=n;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===r)return 1}return a===null?1:-1}function bS(e,t){return t.is(e)}function ise(e){return Pe(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function U2(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const n=new Map;for(let[r,s]=ise(e);r;s=r,r=r.getParent())n.set(r,s);for(let[r,s]=ise(t);r;s=r,r=r.getParent()){const a=n.get(r);if(a!==void 0)return a===null?(bS(e,r)||He(276),{commonAncestor:r,type:"ancestor"}):s===null?(bS(t,r)||He(277),{commonAncestor:r,type:"descendant"}):((Pe(a)||bS(e,a))&&(Pe(s)||bS(t,s))&&r.is(a.getParent())&&r.is(s.getParent())||He(278),{a,b:s,commonAncestor:r,type:"branch"})}return null}function Du(e,t){const{type:n,key:r,offset:s}=e,a=cTt(e.key);return n==="text"?(nt(a)||He(266,a.getType(),r),up(a,t,s)):(Pe(a)||He(267,a.getType(),r),CTt(a,e.offset,t))}function Db(e,t){const{origin:n,direction:r}=t,s=r==="next";Dd(t)?e.set(n.getKey(),t.offset,"text"):by(t)?nt(n)?e.set(n.getKey(),Fd(n,r),"text"):e.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(s?1:0),"element"):(fc(t)&&Pe(n)||He(268),e.set(n.getKey(),s?0:n.getChildrenSize(),"element"))}function _Tt(e){const t=rt(),n=Be(t)?t:tEe();return B2(n,e),_a(n),n}function B2(e,t){Db(e.anchor,t.anchor),Db(e.focus,t.focus)}function ose(e){const{anchor:t,focus:n}=e,r=Du(t,"next"),s=Du(n,"next"),a=EEe(r,s)<=0?"next":"previous";return tf(_y(r,a),_y(s,a))}function DW(e){const{direction:t,origin:n}=e,r=Zs(n,Px(t)).getNodeAtCaret();return r?Zs(r,t):Lu(n.getParentOrThrow(),t)}function lse(e,t="root"){const n=[e];for(let r=fc(e)?e.getParentCaret(t):e.getSiblingCaret();r!==null;r=r.getParentCaret(t))n.push(DW(r));return n}function D6(e){return!!e&&e.origin.isAttached()}function wTt(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const n="root",r="next";let s=t;const a=TEe(e,r),i=lse(a.anchor,n),l=lse(a.focus.getFlipped(),n),c=new Set,u=[];for(const g of a.iterNodeCarets(n))if(fc(g))c.add(g.origin.getKey());else if(by(g)){const{origin:y}=g;Pe(y)&&!c.has(y.getKey())||u.push(y)}for(const g of u)g.remove();for(const g of a.getTextSlices()){if(!g)continue;const{origin:y}=g.caret,x=y.getTextContentSize(),v=DW(Zs(y,r)),b=y.getMode();if(Math.abs(g.distance)===x&&s==="removeEmptySlices"||b==="token"&&g.distance!==0)v.remove();else if(g.distance!==0){s="removeEmptySlices";let _=g.removeTextSlice();const w=g.caret.origin;if(b==="segmented"){const C=_.origin,S=er(C.getTextContent()).setStyle(C.getStyle()).setFormat(C.getFormat());v.replaceOrInsert(S),_=up(S,r,_.offset)}w.is(i[0].origin)&&(i[0]=_),w.is(l[0].origin)&&(l[0]=_.getFlipped())}}let d,m;for(const g of i)if(D6(g)){d=tc(g);break}for(const g of l)if(D6(g)){m=tc(g);break}const p=function(g,y,x){if(!g||!y)return null;const v=g.getParentAtCaret(),b=y.getParentAtCaret();if(!v||!b)return null;const _=v.getParents().reverse();_.push(v);const w=b.getParents().reverse();w.push(b);const C=Math.min(_.length,w.length);let S;for(S=0;S<C&&_[S]===w[S];S++);const E=(N,P)=>{let L;for(let O=S;O<N.length;O++){const A=N[O];if(vl(A))return;!L&&P(A)&&(L=A)}return L},M=E(_,xd),k=M&&E(w,N=>x.has(N.getKey())&&xd(N));return M&&k?[M,k]:null}(d,m,c);if(p){const[g,y]=p;Lu(g,"previous").splice(0,y.getChildren()),y.remove()}const h=[d,m,...i,...l].find(D6);if(h)return bTt(_y(tc(h),e.direction));He(269,JSON.stringify(i.map(g=>g.origin.__key)))}function tc(e){const t=function(s){let a=s;for(;fc(a);){const i=PW(a);if(!fc(i))break;a=i}return a}(e.getLatest()),{direction:n}=t;if(nt(t.origin))return Dd(t)?t:up(t.origin,n,n);const r=t.getAdjacentCaret();return by(r)&&nt(r.origin)?up(r.origin,n,Px(n)):t}function kEe(e){return Dd(e)&&e.offset!==Fd(e.origin,e.direction)}function _y(e,t){return e.direction===t?e:e.getFlipped()}function TEe(e,t){return e.direction===t?e:tf(_y(e.focus,t),_y(e.anchor,t))}function CTt(e,t,n){let r=Lu(e,"next");for(let s=0;s<t;s++){const a=r.getAdjacentCaret();if(a===null)break;r=a}return _y(r,n)}function bmn(e){return e}function _mn(...e){return e}function wmn(e){return e}function STt(e,t){if(!t||e===t)return e;for(const n in t)if(e[n]!==t[n])return{...e,...t};return e}const tL=new Map;function NEe(e){const t={};if(!e)return t;const n=e.split(";");for(const r of n)if(r!==""){const[s,a]=r.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function cse(e){let t=tL.get(e);return t===void 0&&(t=NEe(e),tL.set(e,t)),t}function jEe(e){const t=NW().getElementByKey(e.getKey());if(t===null)return null;const n=t.ownerDocument.defaultView;return n===null?null:n.getComputedStyle(t)}function ETt(e){return jEe(Cs(e)?e:e.getParentOrThrow())}function MTt(e,t){const n=e.getStartEndPoints();if(t.isSelected(e)&&!eu(t)&&n!==null){const[r,s]=n,a=e.isBackward(),i=r.getNode(),l=s.getNode(),c=t.is(i),u=t.is(l);if(c||u){const[d,m]=qO(e),p=i.is(l),h=t.is(a?l:i),g=t.is(a?i:l);let y,x=0;p?(x=d>m?m:d,y=d>m?d:m):h?(x=a?m:d,y=void 0):g&&(x=0,y=a?d:m),t.__text=t.__text.slice(x,y)}}return t}function kTt(e){const t=e.getStyle(),n=NEe(t);tL.set(t,n)}function AEe(e){const t=IEe(e);return t!==null&&t.writingMode==="vertical-rl"}function IEe(e){const t=e.anchor.getNode();return Pe(t)?jEe(t):ETt(t)}function use(e,t){let n=AEe(e)?!t:t;REe(e)&&(n=!n);const r=Du(e.focus,n?"previous":"next");if(kEe(r))return!1;for(const s of LW(r)){if(fc(s))return!s.origin.isInline();if(!Pe(s.origin)){if(Vn(s.origin))return!0;break}}return!1}function TTt(e,t,n,r){e.modify(t?"extend":"move",n,r)}function REe(e){const t=IEe(e);return t!==null&&t.direction==="rtl"}function dse(e,t,n){const r=REe(e);let s;s=AEe(e)||r?!n:n,TTt(e,t,s,"character")}function NTt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const FW=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,jTt=FW&&"documentMode"in document?document.documentMode:null;!(!FW||!("InputEvent"in window)||jTt)&&"getTargetRanges"in new window.InputEvent("input");const ATt=FW&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function PEe(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}function Mc(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}const ITt=ATt;function kc(e,...t){const n=PEe(...t);n.length>0&&e.classList.add(...n)}function UW(e,...t){const n=PEe(...t);n.length>0&&e.classList.remove(...n)}function RTt(e){return e?e.getAdjacentCaret():null}function PTt(e){const t=Eo(e,n=>Pe(n)&&!n.isInline());return Pe(t)||NTt(4,e.__key),t}function Fb(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function OTt(e,t){const n=t.body?t.body.childNodes:[];let r=[];const s=[];for(let a=0;a<n.length;a++){const i=n[a];if(!LEe.has(i.nodeName)){const l=DEe(i,e,s,!1);l!==null&&(r=r.concat(l))}}return function(a){for(const i of a)i.getNextSibling()instanceof yW&&i.insertAfter(ro());for(const i of a){const l=i.getChildren();for(const c of l)i.insertBefore(c);i.remove()}}(s),r}function LTt(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=lr().getChildren();for(let s=0;s<r.length;s++)OEe(e,r[s],n,t);return n.innerHTML}function OEe(e,t,n,r=null){let s=r===null||t.isSelected(r);const a=Pe(t)&&t.excludeFromCopy("html");let i=t;if(r!==null){let h=wEe(t);h=nt(h)&&r!==null?MTt(r,h):h,i=h}const l=Pe(i)?i.getChildren():[],c=bW(e,i.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,i):i.exportDOM(e);const{element:d,after:m}=u;if(!d)return!1;const p=document.createDocumentFragment();for(let h=0;h<l.length;h++){const g=l[h],y=OEe(e,g,p,r);!s&&Pe(t)&&y&&t.extractWithChild(g,r,"html")&&(s=!0)}if(s&&!a){if((os(d)||JO(d))&&d.append(p),n.append(d),m){const h=m.call(i,d);h&&(JO(d)?d.replaceChildren(h):d.replaceWith(h))}}else n.append(p);return s}const LEe=new Set(["STYLE","SCRIPT"]);function DEe(e,t,n,r,s=new Map,a){let i=[];if(LEe.has(e.nodeName))return i;let l=null;const c=function(g,y){const{nodeName:x}=g,v=y._htmlConversions.get(x.toLowerCase());let b=null;if(v!==void 0)for(const _ of v){const w=_(g);w!==null&&(b===null||(b.priority||0)<=(w.priority||0))&&(b=w)}return b!==null?b.conversion:null}(e,t),u=c?c(e):null;let d=null;if(u!==null){d=u.after;const g=u.node;if(l=Array.isArray(g)?g[g.length-1]:g,l!==null){for(const[,y]of s)if(l=y(l,a),!l)break;l&&i.push(...Array.isArray(g)?g:[l])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const m=e.childNodes;let p=[];const h=(l==null||!vl(l))&&(l!=null&&KO(l)||r);for(let g=0;g<m.length;g++)p.push(...DEe(m[g],t,n,h,new Map(s),l));return d!=null&&(p=d(p)),qM(e)&&(p=DTt(e,p,h?()=>{const g=new yW;return n.push(g),g}:Sr)),l==null?p.length>0?i=i.concat(p):qM(e)&&function(g){return g.nextSibling==null||g.previousSibling==null?!1:eL(g.nextSibling)&&eL(g.previousSibling)}(e)&&(i=i.concat(ro())):Pe(l)&&l.append(...p),i}function DTt(e,t,n){const r=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const l=t[i];if(KO(l))r&&!l.getFormat()&&l.setFormat(r),s.push(l);else if(a.push(l),i===t.length-1||i<t.length-1&&KO(t[i+1])){const c=n();c.setFormat(r),c.append(...a),s.push(c),a=[]}}return s}function FTt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function UTt(e,t=rt()){return t==null&&FTt(166),Be(t)&&t.isCollapsed()||t.getNodes().length===0?"":LTt(e,t)}function fse(e,t){const n=e.getData("text/plain")||e.getData("text/uri-list");n!=null&&t.insertRawText(n)}function mse(e,t,n){const r=e.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===n._config.namespace&&Array.isArray(l.nodes))return nL(n,BTt(l.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const l=new DOMParser().parseFromString(function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c}(s),"text/html");return nL(n,OTt(n,l),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(Be(t)){const l=i.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let c=0;c<l.length;c++){const u=rt();if(Be(u)){const d=l[c];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([hw()]):u.insertText(d)}}}else t.insertRawText(i)}function nL(e,t,n){e.dispatchCommand(C5t,{nodes:t,selection:n})||(n.insertNodes(t),function(r){if(Be(r)&&r.isCollapsed()){const s=r.anchor;let a=null;const i=Du(s,"previous");if(i)if(Dd(i))a=i.origin;else{const l=tf(i,Lu(lr(),"next").getFlipped());for(const c of l){if(nt(c.origin)){a=c.origin;break}if(Pe(c.origin)&&!c.origin.isInline())break}}if(a&&nt(a)){const l=a.getFormat(),c=a.getStyle();r.format===l&&r.style===c||(r.format=l,r.style=c,r.dirty=!0)}}}(n))}function BTt(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],s=K5t(r);nt(s)&&kTt(s),t.push(s)}return t}const VTt=Symbol.for("preact-signals");function NT(){if(Ud>1)return void Ud--;let e,t=!1;for(;r1!==void 0;){let n=r1;for(r1=void 0,rL++;n!==void 0;){const r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&FEe(n))try{n.c()}catch(s){t||(e=s,t=!0)}n=r}}if(rL=0,Ud--,t)throw e}function Cmn(e){if(Ud>0)return e();Ud++;try{return e()}finally{NT()}}let Wn,r1;function pse(e){const t=Wn;Wn=void 0;try{return e()}finally{Wn=t}}let Ud=0,rL=0,V2=0;function hse(e){if(Wn===void 0)return;let t=e.n;return t===void 0||t.t!==Wn?(t={i:0,S:e,p:Wn.s,n:void 0,t:Wn,e:void 0,x:void 0,r:t},Wn.s!==void 0&&(Wn.s.n=t),Wn.s=t,e.n=t,32&Wn.f&&e.S(t),t):t.i===-1?(t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=Wn.s,t.n=void 0,Wn.s.n=t,Wn.s=t),t):void 0}function ja(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function $Tt(e,t){return new ja(e,t)}function FEe(e){for(let t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function gse(e){for(let t=e.s;t!==void 0;t=t.n){const n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function UEe(e){let t,n=e.s;for(;n!==void 0;){const r=n.p;n.i===-1?(n.S.U(n),r!==void 0&&(r.n=n.n),n.n!==void 0&&(n.n.p=r)):t=n,n.S.n=n.r,n.r!==void 0&&(n.r=void 0),n=r}e.s=t}function gh(e,t){ja.call(this,void 0),this.x=e,this.s=void 0,this.g=V2-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function BEe(e){const t=e.u;if(e.u=void 0,typeof t=="function"){Ud++;const n=Wn;Wn=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,BW(e),r}finally{Wn=n,NT()}}}function BW(e){for(let t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,BEe(e)}function WTt(e){if(Wn!==this)throw new Error("Out-of-order effect");UEe(this),Wn=e,this.f&=-2,8&this.f&&BW(this),NT()}function Dh(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}function sL(e,t){const n=new Dh(e,t);try{n.c()}catch(s){throw n.d(),s}const r=n.d.bind(n);return r[Symbol.dispose]=r,r}function HTt(e,t={}){const n={};for(const r in e){const s=t[r],a=$Tt(s===void 0?e[r]:s);n[r]=a}return n}ja.prototype.brand=VTt,ja.prototype.h=function(){return!0},ja.prototype.S=function(e){const t=this.t;t!==e&&e.e===void 0&&(e.x=t,this.t=e,t!==void 0?t.e=e:pse(()=>{var n;(n=this.W)==null||n.call(this)}))},ja.prototype.U=function(e){if(this.t!==void 0){const t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n,n===void 0&&pse(()=>{var r;(r=this.Z)==null||r.call(this)}))}},ja.prototype.subscribe=function(e){return sL(()=>{const t=this.value,n=Wn;Wn=void 0;try{e(t)}finally{Wn=n}},{name:"sub"})},ja.prototype.valueOf=function(){return this.value},ja.prototype.toString=function(){return this.value+""},ja.prototype.toJSON=function(){return this.value},ja.prototype.peek=function(){const e=Wn;Wn=void 0;try{return this.value}finally{Wn=e}},Object.defineProperty(ja.prototype,"value",{get(){const e=hse(this);return e!==void 0&&(e.i=this.i),this.v},set(e){if(e!==this.v){if(rL>100)throw new Error("Cycle detected");this.v=e,this.i++,V2++,Ud++;try{for(let t=this.t;t!==void 0;t=t.x)t.t.N()}finally{NT()}}}}),gh.prototype=new ja,gh.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===V2))return!0;if(this.g=V2,this.f|=1,this.i>0&&!FEe(this))return this.f&=-2,!0;const e=Wn;try{gse(this),Wn=this;const t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return Wn=e,UEe(this),this.f&=-2,!0},gh.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(let t=this.s;t!==void 0;t=t.n)t.S.S(t)}ja.prototype.S.call(this,e)},gh.prototype.U=function(e){if(this.t!==void 0&&(ja.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(let t=this.s;t!==void 0;t=t.n)t.S.U(t)}},gh.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let e=this.t;e!==void 0;e=e.x)e.t.N()}},Object.defineProperty(gh.prototype,"value",{get(){if(1&this.f)throw new Error("Cycle detected");const e=hse(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),Dh.prototype.c=function(){const e=this.S();try{if(8&this.f||this.x===void 0)return;const t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}},Dh.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,BEe(this),gse(this),Ud++;const e=Wn;return Wn=this,WTt.bind(this,e)},Dh.prototype.N=function(){2&this.f||(this.f|=2,this.o=r1,r1=this)},Dh.prototype.d=function(){this.f|=8,1&this.f||BW(this)},Dh.prototype.dispose=function(){this.d()};function zTt(){const e=lr(),t=rt(),n=Sr();e.clear(),e.append(n),t!==null&&n.select(),Be(t)&&(t.format=0)}function Smn(e,t=zTt){return e.registerCommand(I5t,n=>(e.update(t),!0),ps)}function ar(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function VEe(e,t){if(e&&t&&!Array.isArray(t)&&typeof e=="object"&&typeof t=="object"){const n=e,r=t;for(const s in r)n[s]=VEe(n[s],r[s]);return e}return t}const Kn={unmarked:0,temporary:1,permanent:2,configured:3,initialized:4,built:5,registered:6,afterRegistration:7};function F6(e){return e.id===Kn.unmarked}function $Ee(e){return e.id===Kn.permanent}function GTt(e){return function(t){return t.id===Kn.temporary}(e)||ar(305,String(e.id),String(Kn.temporary)),Object.assign(e,{id:Kn.permanent})}const qTt=new Set;let KTt=class{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(t,n){this.builder=t,this.extension=n,this.configs=new Set,this.state={id:Kn.unmarked}}mergeConfigs(){let t=this.extension.config||{};const n=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):STt;for(const r of this.configs)t=n(t,r);return t}init(t){const n=this.state;$Ee(n)||ar(306,String(n.id));const r={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},s={...r,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},a=function(l,c,u){return Object.assign(l,{config:c,id:Kn.configured,registerState:u})}(n,this.mergeConfigs(),r);let i;this.state=a,this.extension.init&&(i=this.extension.init(t,a.config,r)),this.state=function(l,c,u){return Object.assign(l,{id:Kn.initialized,initResult:c,registerState:u})}(a,i,s)}build(t){const n=this.state;let r;n.id!==Kn.initialized&&ar(307,String(n.id),String(Kn.built)),this.extension.build&&(r=this.extension.build(t,n.config,n.registerState));const s={...n.registerState,getOutput:()=>r,getSignal:this.getSignal.bind(this)};this.state=function(a,i,l){return Object.assign(a,{id:Kn.built,output:i,registerState:l})}(n,r,s)}register(t,n){this._signal=n;const r=this.state;r.id!==Kn.built&&ar(308,String(r.id),String(Kn.built));const s=this.extension.register&&this.extension.register(t,r.config,r.registerState);return this.state=function(a){return Object.assign(a,{id:Kn.registered})}(r),()=>{const a=this.state;a.id!==Kn.afterRegistration&&ar(309,String(r.id),String(Kn.afterRegistration)),this.state=function(i){return Object.assign(i,{id:Kn.built})}(a),s&&s()}}afterRegistration(t){const n=this.state;let r;return n.id!==Kn.registered&&ar(310,String(n.id),String(Kn.registered)),this.extension.afterRegistration&&(r=this.extension.afterRegistration(t,n.config,n.registerState)),this.state=function(s){return Object.assign(s,{id:Kn.afterRegistration})}(n),r}getSignal(){return this._signal===void 0&&ar(311),this._signal}getInitResult(){this.extension.init===void 0&&ar(312,this.extension.name);const t=this.state;return function(n){return n.id>=Kn.initialized}(t)||ar(313,String(t.id),String(Kn.initialized)),t.initResult}getInitPeer(t){const n=this.builder.extensionNameMap.get(t);return n?n.getExtensionInitDependency():void 0}getExtensionInitDependency(){const t=this.state;return function(n){return n.id>=Kn.configured}(t)||ar(314,String(t.id),String(Kn.configured)),{config:t.config}}getPeer(t){const n=this.builder.extensionNameMap.get(t);return n?n.getExtensionDependency():void 0}getInitDependency(t){const n=this.builder.getExtensionRep(t);return n===void 0&&ar(315,this.extension.name,t.name),n.getExtensionInitDependency()}getDependency(t){const n=this.builder.getExtensionRep(t);return n===void 0&&ar(315,this.extension.name,t.name),n.getExtensionDependency()}getState(){const t=this.state;return function(n){return n.id>=Kn.afterRegistration}(t)||ar(316,String(t.id),String(Kn.afterRegistration)),t}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||qTt}getPeerNameSet(){let t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(([n])=>n)),this._peerNameSet=t),t}getExtensionDependency(){if(!this._dependency){const t=this.state;(function(n){return n.id>=Kn.built})(t)||ar(317,this.extension.name),this._dependency={config:t.config,init:t.initResult,output:t.output}}return this._dependency}};const yse={tag:n1};function YTt(){const e=lr();e.isEmpty()&&e.append(Sr())}const QTt={config:{setOptions:yse,updateOptions:yse},init:({$initialEditorState:e=YTt})=>({$initialEditorState:e,initialized:!1}),afterRegistration(e,{updateOptions:t,setOptions:n},r){const s=r.getInitResult();if(!s.initialized){s.initialized=!0;const{$initialEditorState:a}=s;if(Y5t(a))e.setEditorState(a,n);else if(typeof a=="function")e.update(()=>{a(e)},t);else if(a&&(typeof a=="string"||typeof a=="object")){const i=e.parseEditorState(a);e.setEditorState(i,n)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[Lp,Lc,Ax,Ix,Dp]},xse=Symbol.for("@lexical/extension/LexicalBuilder");function vse(){}function XTt(e){throw e}function _S(e){return Array.isArray(e)?e:[e]}const U6="0.36.1+prod.esm";let WEe=class $2{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(t){this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=U6,this.roots=t;for(const n of t)this.addExtension(n)}static fromExtensions(t){const n=[_S(QTt)];for(const r of t)n.push(_S(r));return new $2(n)}static maybeFromEditor(t){const n=t[xse];return n&&(n.PACKAGE_VERSION!==U6&&ar(292,n.PACKAGE_VERSION,U6),n instanceof $2||ar(293)),n}static fromEditor(t){const n=$2.maybeFromEditor(t);return n===void 0&&ar(294),n}constructEditor(){const{$initialEditorState:t,onError:n,...r}=this.buildCreateEditorArgs(),s=Object.assign(xW({...r,...n?{onError:a=>{n(a,s)}}:{}}),{[xse]:this});for(const a of this.sortedExtensionReps())a.build(s);return s}buildEditor(){let t=vse;function n(){try{t()}finally{t=vse}}const r=Object.assign(this.constructEditor(),{dispose:n,[Symbol.dispose]:n});return t=Mc(this.registerEditor(r),()=>r.setRootElement(null)),r}hasExtensionByName(t){return this.extensionNameMap.has(t)}getExtensionRep(t){const n=this.extensionNameMap.get(t.name);if(n)return n.extension!==t&&ar(295,t.name),n}addEdge(t,n,r){const s=this.outgoingConfigEdges.get(t);s?s.set(n,r):this.outgoingConfigEdges.set(t,new Map([[n,r]]));const a=this.incomingEdges.get(n);a?a.add(t):this.incomingEdges.set(n,new Set([t]))}addExtension(t){this._sortedExtensionReps!==void 0&&ar(296);const n=_S(t),[r]=n;typeof r.name!="string"&&ar(297,typeof r.name);let s=this.extensionNameMap.get(r.name);if(s!==void 0&&s.extension!==r&&ar(298,r.name),!s){s=new KTt(this,r),this.extensionNameMap.set(r.name,s);const a=this.conflicts.get(r.name);typeof a=="string"&&ar(299,r.name,a);for(const i of r.conflictsWith||[])this.extensionNameMap.has(i)&&ar(299,r.name,i),this.conflicts.set(i,r.name);for(const i of r.dependencies||[]){const l=_S(i);this.addEdge(r.name,l[0].name,l.slice(1)),this.addExtension(l)}for(const[i,l]of r.peerDependencies||[])this.addEdge(r.name,i,l?[l]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;const t=[],n=(r,s)=>{let a=r.state;if($Ee(a))return;const i=r.extension.name;var l;F6(a)||ar(300,i,s||"[unknown]"),F6(l=a)||ar(304,String(l.id),String(Kn.unmarked)),a=Object.assign(l,{id:Kn.temporary}),r.state=a;const c=this.outgoingConfigEdges.get(i);if(c)for(const u of c.keys()){const d=this.extensionNameMap.get(u);d&&n(d,i)}a=GTt(a),r.state=a,t.push(r)};for(const r of this.extensionNameMap.values())F6(r.state)&&n(r);for(const r of t)for(const[s,a]of this.outgoingConfigEdges.get(r.extension.name)||[])if(a.length>0){const i=this.extensionNameMap.get(s);if(i)for(const l of a)i.configs.add(l)}for(const[r,...s]of this.roots)if(s.length>0){const a=this.extensionNameMap.get(r.name);a===void 0&&ar(301,r.name);for(const i of s)a.configs.add(i)}return this._sortedExtensionReps=t,this._sortedExtensionReps}registerEditor(t){const n=this.sortedExtensionReps(),r=new AbortController,s=[()=>r.abort()],a=r.signal;for(const i of n){const l=i.register(t,a);l&&s.push(l)}for(const i of n){const l=i.afterRegistration(t);l&&s.push(l)}return Mc(...s)}buildCreateEditorArgs(){const t={},n=new Set,r=new Map,s=new Map,a={},i={},l=this.sortedExtensionReps();for(const d of l){const{extension:m}=d;if(m.onError!==void 0&&(t.onError=m.onError),m.disableEvents!==void 0&&(t.disableEvents=m.disableEvents),m.parentEditor!==void 0&&(t.parentEditor=m.parentEditor),m.editable!==void 0&&(t.editable=m.editable),m.namespace!==void 0&&(t.namespace=m.namespace),m.$initialEditorState!==void 0&&(t.$initialEditorState=m.$initialEditorState),m.nodes)for(const p of m.nodes){if(typeof p!="function"){const h=r.get(p.replace);h&&ar(302,m.name,p.replace.name,h.extension.name),r.set(p.replace,d)}n.add(p)}if(m.html){if(m.html.export)for(const[p,h]of m.html.export.entries())s.set(p,h);m.html.import&&Object.assign(a,m.html.import)}m.theme&&VEe(i,m.theme)}Object.keys(i).length>0&&(t.theme=i),n.size&&(t.nodes=[...n]);const c=Object.keys(a).length>0,u=s.size>0;(c||u)&&(t.html={},c&&(t.html.import=a),u&&(t.html.export=s));for(const d of l)d.init(t);return t.onError||(t.onError=XTt),t}};function Mmn(e,t){const n=WEe.fromEditor(e).extensionNameMap.get(t);return n?n.getExtensionDependency():void 0}let HEe=class zEe extends ST{static getType(){return"horizontalrule"}static clone(t){return new zEe(t.__key)}static importJSON(t){return GEe().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:ZTt,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const n=document.createElement("hr");return kc(n,t.theme.hr),n}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}};function ZTt(){return{node:GEe()}}function GEe(){return CEe(HEe)}function kmn(e){return e instanceof HEe}const JTt=new Set(["http:","https:","mailto:","sms:","tel:"]);let Ox=class qEe extends so{__url;__target;__rel;__title;static getType(){return"link"}static clone(t){return new qEe(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",n={},r){super(r);const{target:s=null,rel:a=null,title:i=null}=n;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const n=document.createElement("a");return this.updateLinkDOM(null,n,t),kc(n,t.theme.link),n}updateLinkDOM(t,n,r){if(TW(n)){t&&t.__url===this.__url||(n.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?n[s]=i:n.removeAttribute(s))}}}updateDOM(t,n,r){return this.updateLinkDOM(t,n,r),!1}static importDOM(){return{a:t=>({conversion:eNt,priority:1})}}static importJSON(t){return wy().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=_se(t);try{const n=new URL(_se(t));if(!JTt.has(n.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const n=this.getWritable();return n.__url=t,n}getTarget(){return this.getLatest().__target}setTarget(t){const n=this.getWritable();return n.__target=t,n}getRel(){return this.getLatest().__rel}setRel(t){const n=this.getWritable();return n.__rel=t,n}getTitle(){return this.getLatest().__title}setTitle(t){const n=this.getWritable();return n.__title=t,n}insertNewAfter(t,n=!0){const r=wy(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,n,r){if(!Be(n))return!1;const s=n.anchor.getNode(),a=n.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&n.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function eNt(e){let t=null;if(TW(e)){const n=e.textContent;(n!==null&&n!==""||e.children.length>0)&&(t=wy(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function wy(e="",t){return Wo(new Ox(e,t))}function bo(e){return e instanceof Ox}let VW=class KEe extends Ox{__isUnlinked;constructor(t="",n={},r){super(t,n,r),this.__isUnlinked=n.isUnlinked!==void 0&&n.isUnlinked!==null&&n.isUnlinked}static getType(){return"autolink"}static clone(t){return new KEe(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const n=this.getWritable();return n.__isUnlinked=t,n}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,n,r){return super.updateDOM(t,n,r)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return aL().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,n=!0){const r=this.getParentOrThrow().insertNewAfter(t,n);if(Pe(r)){const s=aL(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(s),s}return null}};function aL(e="",t){return Wo(new VW(e,t))}function Kl(e){return e instanceof VW}const iL=Xt("TOGGLE_LINK_COMMAND");function bse(e,t){if(e.type==="element"){const n=e.getNode();return Pe(n)||function(r,...s){const a=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",r);for(const l of s)i.append("v",l);throw a.search=i.toString(),Error(`Minified Lexical error #${r}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),n.getChildren()[e.offset+t]||null}return null}function B6(e,t={}){let n;if(e&&typeof e=="object"){const{url:d,...m}=e;n=d,t={...m,...t}}else n=e;const{target:r,title:s}=t,a=t.rel===void 0?"noreferrer":t.rel,i=rt();if(i===null||!Be(i)&&!bu(i))return;if(bu(i)){const d=i.getNodes();return d.length===0?void 0:void d.forEach(m=>{if(n===null){const p=Eo(m,h=>!Kl(h)&&bo(h));p&&(p.insertBefore(m),p.getChildren().length===0&&p.remove())}else{const p=Eo(m,h=>!Kl(h)&&bo(h));if(p)p.setURL(n),r!==void 0&&p.setTarget(r),a!==void 0&&p.setRel(a);else{const h=wy(n,{rel:a,target:r});m.insertBefore(h),h.append(m)}}})}const l=i.extract();if(n===null)return void l.forEach(d=>{const m=Eo(d,p=>!Kl(p)&&bo(p));if(m){const p=m.getChildren();for(let h=0;h<p.length;h++)m.insertBefore(p[h]);m.remove()}});const c=new Set,u=d=>{c.has(d.getKey())||(c.add(d.getKey()),d.setURL(n),r!==void 0&&d.setTarget(r),a!==void 0&&d.setRel(a),s!==void 0&&d.setTitle(s))};if(l.length===1){const d=l[0],m=Eo(d,bo);if(m!==null)return u(m)}(function(d){const m=rt();if(!Be(m))return d();const p=Ib(m),h=p.isBackward(),g=bse(p.anchor,h?-1:0),y=bse(p.focus,h?0:-1);if(d(),g||y){const x=rt();if(Be(x)){const v=x.clone();if(g){const b=g.getParent();b&&v.anchor.set(b.getKey(),g.getIndexWithinParent()+(h?1:0),"element")}if(y){const b=y.getParent();b&&v.focus.set(b.getKey(),y.getIndexWithinParent()+(h?0:1),"element")}_a(Ib(v))}}})(()=>{let d=null;for(const m of l){if(!m.isAttached())continue;const p=Eo(m,bo);if(p){u(p);continue}if(Pe(m)){if(!m.isInline())continue;if(bo(m)){if(!(Kl(m)||d!==null&&d.getParentOrThrow().isParentOf(m))){u(m),d=m;continue}for(const g of m.getChildren())m.insertBefore(g);m.remove();continue}}const h=m.getPreviousSibling();bo(h)&&h.is(d)?h.append(m):(d=wy(n,{rel:a,target:r,title:s}),m.insertAfter(d),d.append(m))}})}const tNt=/^\+?[0-9\s()-]{5,}$/;function _se(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:tNt.test(e)?`tel:${e}`:`https://${e}`}function Tmn(e,t){return Mc(sL(()=>e.registerCommand(iL,n=>{const r=t.validateUrl.peek(),s=t.attributes.peek();if(n===null)return B6(null),!0;if(typeof n=="string")return!(r!==void 0&&!r(n))&&(B6(n,s),!0);{const{url:a,target:i,rel:l,title:c}=n;return B6(a,{...s,rel:l,target:i,title:c}),!0}},Ob)),sL(()=>{const n=t.validateUrl.value;if(!n)return;const r=t.attributes.value;return e.registerCommand(pw,s=>{const a=rt();if(!Be(a)||a.isCollapsed()||!Fb(s,ClipboardEvent)||s.clipboardData===null)return!1;const i=s.clipboardData.getData("text");return!!n(i)&&!a.getNodes().some(l=>Pe(l))&&(e.dispatchCommand(iL,{...r,url:i}),s.preventDefault(),!0)},Ob)}))}function nNt(e,t,n={}){const r=a=>{const i=a.target;if(!Rx(i))return;const l=wW(i);if(l===null)return;let c=null,u=null;if(l.update(()=>{const p=vy(i);if(p!==null){const h=Eo(p,Pe);if(!t.disabled.peek())if(bo(h))c=h.sanitizeUrl(h.getURL()),u=h.getTarget();else{const g=function(y,x){let v=y;for(;v!=null;){if(x(v))return v;v=v.parentNode}return null}(i,TW);g!==null&&(c=g.href,u=g.target)}}}),c===null||c==="")return;const d=e.getEditorState().read(rt);if(Be(d)&&!d.isCollapsed())return void a.preventDefault();const m=a.type==="auxclick"&&a.button===1;window.open(c,t.newTab.peek()||m||a.metaKey||a.ctrlKey||u==="_blank"?"_blank":"_self"),a.preventDefault()},s=a=>{a.button===1&&r(a)};return e.registerRootListener((a,i)=>{i!==null&&(i.removeEventListener("click",r),i.removeEventListener("mouseup",s)),a!==null&&(a.addEventListener("click",r,n),a.addEventListener("mouseup",s,n))})}function Nmn(e,t=n=>n){return n=>{const r=e.exec(n);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:t(r[0])}}}function YEe(e,t){for(let n=0;n<t.length;n++){const r=t[n](e);if(r)return r}return null}const rNt=/[.,;\s]/;function KM(e){return rNt.test(e)}function QEe(e){return KM(e[e.length-1])}function oL(e){return KM(e[0])}function XEe(e){let t=e.getPreviousSibling();return Pe(t)&&(t=t.getLastDescendant()),t===null||dc(t)||nt(t)&&QEe(t.getTextContent())}function ZEe(e){let t=e.getNextSibling();return Pe(t)&&(t=t.getFirstDescendant()),t===null||dc(t)||nt(t)&&oL(t.getTextContent())}function sNt(e,t,n,r){return(e>0?KM(n[e-1]):XEe(r[0]))?t<n.length?KM(n[t]):ZEe(r[r.length-1]):!1}function aNt(e,t,n){const r=[],s=[],a=[];let i=0,l=0;const c=[...e];for(;c.length>0;){const u=c[0],d=u.getTextContent().length,m=l;l+d<=t?(r.push(u),i+=d):m>=n?a.push(u):s.push(u),l+=d,c.shift()}return[i,r,s,a]}function iNt(e,t,n,r){const s=aL(r.url,r.attributes);if(e.length===1){let a,i=e[0];t===0?[a,i]=i.splitText(n):[,a,i]=i.splitText(t,n);const l=er(r.text);return l.setFormat(a.getFormat()),l.setDetail(a.getDetail()),l.setStyle(a.getStyle()),s.append(l),a.replace(s),i}if(e.length>1){const a=e[0];let i,l=a.getTextContent().length;t===0?i=a:[,i]=a.splitText(t);const c=[];let u;for(let h=1;h<e.length;h++){const g=e[h],y=g.getTextContent().length,x=l;if(x<n)if(l+y<=n)c.push(g);else{const[v,b]=g.splitText(n-x);c.push(v),u=b}l+=y}const d=rt(),m=d?d.getNodes().find(nt):void 0,p=er(i.getTextContent());return p.setFormat(i.getFormat()),p.setDetail(i.getDetail()),p.setStyle(i.getStyle()),s.append(p,...c),m&&m===i&&(Be(d)?p.select(d.anchor.offset,d.focus.offset):bu(d)&&p.select(0,p.getTextContent().length)),i.replace(s),u}}function V6(e,t,n){const r=e.getChildren(),s=r.length;for(let c=0;c<s;c++){const u=r[c];if(!nt(u)||!u.isSimpleText())return W2(e),void n(null,e.getURL())}const a=e.getTextContent(),i=YEe(a,t);if(i===null||i.text!==a||!XEe(e)||!ZEe(e))return W2(e),void n(null,e.getURL());const l=e.getURL();if(l!==i.url&&(e.setURL(i.url),n(i.url,l)),i.attributes){const c=e.getRel();c!==i.attributes.rel&&(e.setRel(i.attributes.rel||null),n(i.attributes.rel||null,c));const u=e.getTarget();u!==i.attributes.target&&(e.setTarget(i.attributes.target||null),n(i.attributes.target||null,u))}}function W2(e){const t=e.getChildren();for(let n=t.length-1;n>=0;n--)e.insertAfter(t[n]);return e.remove(),t.map(n=>n.getLatest())}const oNt={changeHandlers:[],matchers:[]};function jmn(e,t=oNt){const{matchers:n,changeHandlers:r}=t,s=(a,i)=>{for(const l of r)l(a,i)};return Mc(e.registerNodeTransform(Lc,a=>{const i=a.getParentOrThrow(),l=a.getPreviousSibling();if(Kl(i)&&!i.getIsUnlinked())V6(i,n,s);else if(!bo(i)){if(a.isSimpleText()&&(oL(a.getTextContent())||!Kl(l))){const c=function(u){const d=[u];let m=u.getNextSibling();for(;m!==null&&nt(m)&&m.isSimpleText()&&(d.push(m),!/[\s]/.test(m.getTextContent()));)m=m.getNextSibling();return d}(a);(function(u,d,m){let p=[...u];const h=p.map(v=>v.getTextContent()).join("");let g,y=h,x=0;for(;(g=YEe(y,d))&&g!==null;){const v=g.index,b=v+g.length;if(sNt(x+v,x+b,h,p)){const[_,,w,C]=aNt(p,x+v,x+b),S=iNt(w,x+v-_,x+b-_,g);p=S?[S,...C]:C,m(g.url,null),x=0}else x+=b;y=y.substring(b)}})(c,n,s)}(function(c,u,d){const m=c.getPreviousSibling(),p=c.getNextSibling(),h=c.getTextContent();var g;!Kl(m)||m.getIsUnlinked()||oL(h)&&(g=h,!(m.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(g):/^\.[a-zA-Z0-9]{1,}/.test(g)))||(m.append(c),V6(m,u,d),d(null,m.getURL())),!Kl(p)||p.getIsUnlinked()||QEe(h)||(W2(p),V6(p,u,d),d(null,p.getURL()))})(a,n,s)}}),e.registerCommand(iL,a=>{const i=rt();return a!==null||!Be(i)||i.extract().forEach(l=>{const c=l.getParent();Kl(c)&&(c.setIsUnlinked(!c.getIsUnlinked()),c.markDirty())}),!1},Ob))}function cv(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function lNt(e){let t=1,n=e.getParent();for(;n!=null;){if(ca(n)){const r=n.getParent();if(tr(r)){t++,n=r.getParent();continue}cv(40)}return t}return t}function Yl(e){return ca(e)&&tr(e.getFirstChild())}function wse(e){return Fu().append(e)}function JEe(e,t){e.splice(e.getChildrenSize(),0,t)}function $W(e,t){const n=e.getLastChild(),r=t.getFirstChild();n&&r&&Yl(n)&&Yl(r)&&($W(n.getFirstChild(),r.getFirstChild()),r.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function cNt(e){const t=e.getListType()!=="check";let n=e.getStart();for(const r of e.getChildren())ca(r)&&(r.getValue()!==n&&r.setValue(n),t&&r.getLatest().__checked!=null&&r.setChecked(void 0),tr(r.getFirstChild())||n++)}function uNt(e){const t=new Set;if(Yl(e)||t.has(e.getKey()))return;const n=e.getParent(),r=e.getNextSibling(),s=e.getPreviousSibling();if(Yl(r)&&Yl(s)){const a=s.getFirstChild();if(tr(a)){a.append(e);const i=r.getFirstChild();tr(i)&&(JEe(a,i.getChildren()),r.remove(),t.add(r.getKey()))}}else if(Yl(r)){const a=r.getFirstChild();if(tr(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(Yl(s)){const a=s.getFirstChild();tr(a)&&a.append(e)}else if(tr(n)){const a=Fu().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=mc(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):r?r.insertBefore(a):n.append(a)}}function dNt(e){if(Yl(e))return;const t=e.getParent(),n=t?t.getParent():void 0;if(tr(n?n.getParent():void 0)&&ca(n)&&tr(t)){const r=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(r))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(s))n.insertAfter(e),t.isEmpty()&&n.remove();else{const a=t.getListType(),i=Fu(),l=mc(a);i.append(l),e.getPreviousSiblings().forEach(d=>l.append(d));const c=Fu(),u=mc(a);c.append(u),JEe(u,e.getNextSiblings()),n.insertBefore(i),n.insertAfter(c),n.replace(e)}}}function YM(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}let jT=class extends so{__value;__checked;$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const n=t.getParent();tr(n)&&n.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:so,importDOM:{li:()=>({conversion:fNt,priority:0})}})}constructor(t=1,n=void 0,r){super(r),this.__value=t===void 0?1:t,this.__checked=n}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const n=document.createElement("li");return this.updateListItemDOM(null,n,t),n}updateListItemDOM(t,n,r){(function(i,l,c){const u=l.getParent();!tr(u)||u.getListType()!=="check"||tr(l.getFirstChild())?(i.removeAttribute("role"),i.removeAttribute("tabIndex"),i.removeAttribute("aria-checked")):(i.setAttribute("role","checkbox"),i.setAttribute("tabIndex","-1"),c&&l.__checked===c.__checked||i.setAttribute("aria-checked",l.getChecked()?"true":"false"))})(n,this,t),n.value=this.__value,function(i,l,c){const u=[],d=[],m=l.list,p=m?m.listitem:void 0;let h;if(m&&m.nested&&(h=m.nested.listitem),p!==void 0&&u.push(...YM(p)),m){const g=c.getParent(),y=tr(g)&&g.getListType()==="check",x=c.getChecked();y&&!x||d.push(m.listitemUnchecked),y&&x||d.push(m.listitemChecked),y&&u.push(x?m.listitemChecked:m.listitemUnchecked)}if(h!==void 0){const g=YM(h);c.getChildren().some(y=>tr(y))?u.push(...g):d.push(...g)}d.length>0&&UW(i,...d),u.length>0&&kc(i,...u)}(n,r.theme,this);const s=t?t.__style:"",a=this.__style;s!==a&&(a===""?n.removeAttribute("style"):n.style.cssText=a),function(i,l,c){const u=cse(l.__textStyle);for(const d in u)i.style.setProperty(`--listitem-marker-${d}`,u[d]);if(c)for(const d in cse(c.__textStyle))d in u||i.style.removeProperty(`--listitem-marker-${d}`)}(n,this,t)}updateDOM(t,n,r){const s=n;return this.updateListItemDOM(t,s,r),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const n=this.createDOM(t._config),r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();return s&&(n.dir=s),{element:n}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let n=0;n<t.length;n++){const r=t[n];if(Pe(r)&&this.canMergeWith(r)){const s=r.getChildren();this.append(...s),r.remove()}else super.append(r)}return this}replace(t,n){if(ca(t))return super.replace(t);this.setIndent(0);const r=this.getParentOrThrow();if(!tr(r))return t;if(r.__first===this.getKey())r.insertBefore(t);else if(r.__last===this.getKey())r.insertAfter(t);else{const s=mc(r.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}r.insertAfter(t),t.insertAfter(s)}return n&&(Pe(t)||cv(139),this.getChildren().forEach(s=>{t.append(s)})),this.remove(),r.getChildrenSize()===0&&r.remove(),t}insertAfter(t,n=!0){const r=this.getParentOrThrow();if(tr(r)||cv(39),ca(t))return super.insertAfter(t,n);const s=this.getNextSiblings();if(r.insertAfter(t,n),s.length!==0){const a=mc(r.getListType());s.forEach(i=>a.append(i)),t.insertAfter(a,n)}return t}remove(t){const n=this.getPreviousSibling(),r=this.getNextSibling();super.remove(t),n&&r&&Yl(n)&&Yl(r)&&($W(n.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(t,n=!0){const r=Fu().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,n),r}collapseAtStart(t){const n=Sr();this.getChildren().forEach(i=>n.append(i));const r=this.getParentOrThrow(),s=r.getParentOrThrow(),a=ca(s);if(r.getChildrenSize()===1)if(a)r.remove(),s.select();else{r.insertBefore(n),r.remove();const i=t.anchor,l=t.focus,c=n.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(c,i.offset,"element"),l.type==="element"&&l.getNode().is(this)&&l.set(c,l.offset,"element")}else r.insertBefore(n),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const n=this.getWritable();return n.__value=t,n}getChecked(){const t=this.getLatest();let n;const r=this.getParent();return tr(r)&&(n=r.getListType()),n==="check"?!!t.__checked:void 0}setChecked(t){const n=this.getWritable();return n.__checked=t,n}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let n=t.getParentOrThrow(),r=0;for(;ca(n);)n=n.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(t){typeof t!="number"&&cv(117),(t=Math.floor(t))>=0||cv(199);let n=this.getIndent();for(;n!==t;)n<t?(uNt(this),n++):(dNt(this),n--);return this}canInsertAfter(t){return ca(t)}canReplaceWith(t){return ca(t)}canMergeWith(t){return ca(t)||Ld(t)}extractWithChild(t,n){if(!Be(n))return!1;const r=n.anchor.getNode(),s=n.focus.getNode();return this.isParentOf(r)&&this.isParentOf(s)&&this.getTextContent().length===n.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return mc("bullet")}canMergeWhenEmpty(){return!0}};function fNt(e){if(e.classList.contains("task-list-item")){for(const n of e.children)if(n.tagName==="INPUT")return mNt(n)}const t=e.getAttribute("aria-checked");return{node:Fu(t==="true"||t!=="false"&&void 0)}}function mNt(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:Fu(e.hasAttribute("checked"))}}function Fu(e){return Wo(new jT(void 0,e))}function ca(e){return e instanceof jT}let AT=class extends so{__tag;__start;__listType;$config(){return this.config("list",{$transform:t=>{(function(n){const r=n.getNextSibling();tr(r)&&n.getListType()===r.getListType()&&$W(n,r)})(t),cNt(t)},extends:so,importDOM:{ol:()=>({conversion:Sse,priority:0}),ul:()=>({conversion:Sse,priority:0})}})}constructor(t="number",n=1,r){super(r);const s=hNt[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=n}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const n=this.getWritable();return n.__listType=t,n.__tag=t==="number"?"ol":"ul",n}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const n=this.getWritable();return n.__start=t,n}createDOM(t,n){const r=this.__tag,s=document.createElement(r);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,Cse(s,t.theme,this),s}updateDOM(t,n,r){return t.__tag!==this.__tag||t.__listType!==this.__listType||(Cse(n,r.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const n=this.createDOM(t._config,t);return os(n)&&(this.__start!==1&&n.setAttribute("start",String(this.__start)),this.__listType==="check"&&n.setAttribute("__lexicalListType","check")),{element:n}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,n,r){let s=r;for(let a=0;a<r.length;a++){const i=r[a];ca(i)||(s===r&&(s=[...r]),s[a]=Fu().append(!Pe(i)||tr(i)||i.isInline()?i:er(i.getTextContent())))}return super.splice(t,n,s)}extractWithChild(t){return ca(t)}};function Cse(e,t,n){const r=[],s=[],a=t.list;if(a!==void 0){const i=a[`${n.__tag}Depth`]||[],l=lNt(n)-1,c=l%i.length,u=i[c],d=a[n.__tag];let m;const p=a.nested,h=a.checklist;if(p!==void 0&&p.list&&(m=p.list),d!==void 0&&r.push(d),h!==void 0&&n.__listType==="check"&&r.push(h),u!==void 0){r.push(...YM(u));for(let g=0;g<i.length;g++)g!==c&&s.push(n.__tag+g)}if(m!==void 0){const g=YM(m);l>1?r.push(...g):s.push(...g)}}s.length>0&&UW(e,...s),r.length>0&&kc(e,...r)}function pNt(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(ca(r)){t.push(r);const s=r.getChildren();s.length>1&&s.forEach(a=>{tr(a)&&t.push(wse(a))})}else t.push(wse(r))}return t}function Sse(e){const t=e.nodeName.toLowerCase();let n=null;return t==="ol"?n=mc("number",e.start):t==="ul"&&(n=function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const s of r.childNodes)if(os(s)&&s.hasAttribute("aria-checked"))return!0;return!1}(e)?mc("check"):mc("bullet")),{after:pNt,node:n}}const hNt={ol:"number",ul:"bullet"};function mc(e="number",t=1){return Wo(new AT(e,t))}function tr(e){return e instanceof AT}function gNt(e){const t=window.location.origin,n=r=>{if(r.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=r.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const l=i.payload;if(l&&l.functionId==="makeChanges"){const c=l.args;if(c){const[u,d,m,p,h]=c;e.update(()=>{const g=rt();if(Be(g)){const y=g.anchor;let x=y.getNode(),v=0,b=0;if(nt(x)&&u>=0&&d>=0&&(v=u,b=u+d,g.setTextNodeRange(x,v,x,b)),v===b&&m===""||(g.insertRawText(m),x=y.getNode()),nt(x)){v=p,b=p+h;const _=x.getTextContentSize();v=v>_?_:v,b=b>_?_:b,g.setTextNodeRange(x,v,x,b)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const eMe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,yNt=eMe&&"documentMode"in document?document.documentMode:null;!(!eMe||!("InputEvent"in window)||yNt)&&"getTargetRanges"in new window.InputEvent("input");let WW=class tMe extends so{static getType(){return"quote"}static clone(t){return new tMe(t.__key)}createDOM(t){const n=document.createElement("blockquote");return kc(n,t.theme.quote),n}updateDOM(t,n){return!1}static importDOM(){return{blockquote:t=>({conversion:xNt,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(os(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return HW().updateFromJSON(t)}insertNewAfter(t,n){const r=Sr(),s=this.getDirection();return r.setDirection(s),this.insertAfter(r,n),r}collapseAtStart(){const t=Sr();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function HW(){return Wo(new WW)}function lL(e){return e instanceof WW}let zW=class nMe extends so{__tag;static getType(){return"heading"}static clone(t){return new nMe(t.__tag,t.__key)}constructor(t,n){super(n),this.__tag=t}getTag(){return this.__tag}setTag(t){const n=this.getWritable();return this.__tag=t,n}createDOM(t){const n=this.__tag,r=document.createElement(n),s=t.theme.heading;if(s!==void 0){const a=s[n];kc(r,a)}return r}updateDOM(t,n,r){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:yh,priority:0}),h2:t=>({conversion:yh,priority:0}),h3:t=>({conversion:yh,priority:0}),h4:t=>({conversion:yh,priority:0}),h5:t=>({conversion:yh,priority:0}),h6:t=>({conversion:yh,priority:0}),p:t=>{const n=t.firstChild;return n!==null&&Ese(n)?{conversion:()=>({node:null}),priority:3}:null},span:t=>Ese(t)?{conversion:n=>({node:Zh("h1")}),priority:3}:null}}exportDOM(t){const{element:n}=super.exportDOM(t);if(os(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return Zh(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,n=!0){const r=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&r===s.getTextContentSize()||!t?Sr():Zh(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,n),r===0&&!this.isEmpty()&&t){const l=Sr();l.select(),this.replace(l,!0)}return a}collapseAtStart(){const t=this.isEmpty()?Sr():Zh(this.getTag());return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}extractWithChild(){return!0}};function Ese(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function yh(e){const t=e.nodeName.toLowerCase();let n=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(n=Zh(t),e.style!==null&&(jW(e,n),n.setFormat(e.style.textAlign))),{node:n}}function xNt(e){const t=HW();return e.style!==null&&(t.setFormat(e.style.textAlign),jW(e,t)),{node:t}}function Zh(e="h1"){return Wo(new zW(e))}function vNt(e){return e instanceof zW}var $6={exports:{}},Mse;function bNt(){return Mse||(Mse=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},l={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function b(_){return _ instanceof c?new c(_.type,b(_.content),_.alias):Array.isArray(_)?_.map(b):_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++a}),b.__id},clone:function b(_,w){w=w||{};var C,S;switch(l.util.type(_)){case"Object":if(S=l.util.objId(_),w[S])return w[S];C={},w[S]=C;for(var E in _)_.hasOwnProperty(E)&&(C[E]=b(_[E],w));return C;case"Array":return S=l.util.objId(_),w[S]?w[S]:(C=[],w[S]=C,_.forEach(function(M,k){C[k]=b(M,w)}),C);default:return _}},getLanguage:function(b){for(;b;){var _=s.exec(b.className);if(_)return _[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,_){b.className=b.className.replace(RegExp(s,"gi"),""),b.classList.add("language-"+_)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(C){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(b){var _=document.getElementsByTagName("script");for(var w in _)if(_[w].src==b)return _[w]}return null}},isActive:function(b,_,w){for(var C="no-"+_;b;){var S=b.classList;if(S.contains(_))return!0;if(S.contains(C))return!1;b=b.parentElement}return!!w}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(b,_){var w=l.util.clone(l.languages[b]);for(var C in _)w[C]=_[C];return w},insertBefore:function(b,_,w,C){C=C||l.languages;var S=C[b],E={};for(var M in S)if(S.hasOwnProperty(M)){if(M==_)for(var k in w)w.hasOwnProperty(k)&&(E[k]=w[k]);w.hasOwnProperty(M)||(E[M]=S[M])}var N=C[b];return C[b]=E,l.languages.DFS(l.languages,function(P,L){L===N&&P!=b&&(this[P]=E)}),E},DFS:function b(_,w,C,S){S=S||{};var E=l.util.objId;for(var M in _)if(_.hasOwnProperty(M)){w.call(_,M,_[M],C||M);var k=_[M],N=l.util.type(k);N==="Object"&&!S[E(k)]?(S[E(k)]=!0,b(k,w,null,S)):N==="Array"&&!S[E(k)]&&(S[E(k)]=!0,b(k,w,M,S))}}},plugins:{},highlightAll:function(b,_){l.highlightAllUnder(document,b,_)},highlightAllUnder:function(b,_,w){var C={callback:w,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),l.hooks.run("before-all-elements-highlight",C);for(var S=0,E;E=C.elements[S++];)l.highlightElement(E,_===!0,C.callback)},highlightElement:function(b,_,w){var C=l.util.getLanguage(b),S=l.languages[C];l.util.setLanguage(b,C);var E=b.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(E,C);var M=b.textContent,k={element:b,language:C,grammar:S,code:M};function N(L){k.highlightedCode=L,l.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,l.hooks.run("after-highlight",k),l.hooks.run("complete",k),w&&w.call(k.element)}if(l.hooks.run("before-sanity-check",k),E=k.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!k.code){l.hooks.run("complete",k),w&&w.call(k.element);return}if(l.hooks.run("before-highlight",k),!k.grammar){N(l.util.encode(k.code));return}if(_&&r.Worker){var P=new Worker(l.filename);P.onmessage=function(L){N(L.data)},P.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else N(l.highlight(k.code,k.grammar,k.language))},highlight:function(b,_,w){var C={code:b,grammar:_,language:w};if(l.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=l.tokenize(C.code,C.grammar),l.hooks.run("after-tokenize",C),c.stringify(l.util.encode(C.tokens),C.language)},tokenize:function(b,_){var w=_.rest;if(w){for(var C in w)_[C]=w[C];delete _.rest}var S=new m;return p(S,S.head,b),d(b,S,_,S.head,0),g(S)},hooks:{all:{},add:function(b,_){var w=l.hooks.all;w[b]=w[b]||[],w[b].push(_)},run:function(b,_){var w=l.hooks.all[b];if(!(!w||!w.length))for(var C=0,S;S=w[C++];)S(_)}},Token:c};r.Prism=l;function c(b,_,w,C){this.type=b,this.content=_,this.alias=w,this.length=(C||"").length|0}c.stringify=function b(_,w){if(typeof _=="string")return _;if(Array.isArray(_)){var C="";return _.forEach(function(N){C+=b(N,w)}),C}var S={type:_.type,content:b(_.content,w),tag:"span",classes:["token",_.type],attributes:{},language:w},E=_.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(S.classes,E):S.classes.push(E)),l.hooks.run("wrap",S);var M="";for(var k in S.attributes)M+=" "+k+'="'+(S.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+M+">"+S.content+"</"+S.tag+">"};function u(b,_,w,C){b.lastIndex=_;var S=b.exec(w);if(S&&C&&S[1]){var E=S[1].length;S.index+=E,S[0]=S[0].slice(E)}return S}function d(b,_,w,C,S,E){for(var M in w)if(!(!w.hasOwnProperty(M)||!w[M])){var k=w[M];k=Array.isArray(k)?k:[k];for(var N=0;N<k.length;++N){if(E&&E.cause==M+","+N)return;var P=k[N],L=P.inside,O=!!P.lookbehind,A=!!P.greedy,j=P.alias;if(A&&!P.pattern.global){var T=P.pattern.toString().match(/[imsuy]*$/)[0];P.pattern=RegExp(P.pattern.source,T+"g")}for(var I=P.pattern||P,U=C.next,B=S;U!==_.tail&&!(E&&B>=E.reach);B+=U.value.length,U=U.next){var D=U.value;if(_.length>b.length)return;if(!(D instanceof c)){var W=1,z;if(A){if(z=u(I,B,b,O),!z||z.index>=b.length)break;var Y=z.index,$=z.index+z[0].length,X=B;for(X+=U.value.length;Y>=X;)U=U.next,X+=U.value.length;if(X-=U.value.length,B=X,U.value instanceof c)continue;for(var q=U;q!==_.tail&&(X<$||typeof q.value=="string");q=q.next)W++,X+=q.value.length;W--,D=b.slice(B,X),z.index-=B}else if(z=u(I,0,D,O),!z)continue;var Y=z.index,G=z[0],J=D.slice(0,Y),K=D.slice(Y+G.length),te=B+D.length;E&&te>E.reach&&(E.reach=te);var re=U.prev;J&&(re=p(_,re,J),B+=J.length),h(_,re,W);var se=new c(M,L?l.tokenize(G,L):G,j,G);if(U=p(_,re,se),K&&p(_,U,K),W>1){var me={cause:M+","+N,reach:te};d(b,_,w,U.prev,B,me),E&&me.reach>E.reach&&(E.reach=me.reach)}}}}}}function m(){var b={value:null,prev:null,next:null},_={value:null,prev:b,next:null};b.next=_,this.head=b,this.tail=_,this.length=0}function p(b,_,w){var C=_.next,S={value:w,prev:_,next:C};return _.next=S,C.prev=S,b.length++,S}function h(b,_,w){for(var C=_.next,S=0;S<w&&C!==b.tail;S++)C=C.next;_.next=C,C.prev=_,b.length-=S}function g(b){for(var _=[],w=b.head.next;w!==b.tail;)_.push(w.value),w=w.next;return _}if(!r.document)return r.addEventListener&&(l.disableWorkerMessageHandler||r.addEventListener("message",function(b){var _=JSON.parse(b.data),w=_.language,C=_.code,S=_.immediateClose;r.postMessage(l.highlight(C,l.languages[w],w)),S&&r.close()},!1)),l;var y=l.util.currentScript();y&&(l.filename=y.src,y.hasAttribute("data-manual")&&(l.manual=!0));function x(){l.manual||l.highlightAll()}if(!l.manual){var v=document.readyState;v==="loading"||v==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",x):window.requestAnimationFrame?window.requestAnimationFrame(x):window.setTimeout(x,16)}return l}(t);e.exports&&(e.exports=n),typeof qi<"u"&&(qi.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};l["language-"+a]={pattern:/[\s\S]+/,inside:n.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,s){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:n.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var a=r.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",s=function(y,x){return" Error "+y+" while fetching file: "+x},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",c="loading",u="loaded",d="failed",m="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+c+'"])';function p(y,x,v){var b=new XMLHttpRequest;b.open("GET",y,!0),b.onreadystatechange=function(){b.readyState==4&&(b.status<400&&b.responseText?x(b.responseText):b.status>=400?v(s(b.status,b.statusText)):v(a))},b.send(null)}function h(y){var x=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(x){var v=Number(x[1]),b=x[2],_=x[3];return b?_?[v,Number(_)]:[v,void 0]:[v,v]}}n.hooks.add("before-highlightall",function(y){y.selector+=", "+m}),n.hooks.add("before-sanity-check",function(y){var x=y.element;if(x.matches(m)){y.code="",x.setAttribute(l,c);var v=x.appendChild(document.createElement("CODE"));v.textContent=r;var b=x.getAttribute("data-src"),_=y.language;if(_==="none"){var w=(/\.(\w+)$/.exec(b)||[,"none"])[1];_=i[w]||w}n.util.setLanguage(v,_),n.util.setLanguage(x,_);var C=n.plugins.autoloader;C&&C.loadLanguages(_),p(b,function(S){x.setAttribute(l,u);var E=h(x.getAttribute("data-range"));if(E){var M=S.split(/\r\n?|\n/g),k=E[0],N=E[1]==null?M.length:E[1];k<0&&(k+=M.length),k=Math.max(0,Math.min(k-1,M.length)),N<0&&(N+=M.length),N=Math.max(0,Math.min(N,M.length)),S=M.slice(k,N).join(`
`),x.hasAttribute("data-start")||x.setAttribute("data-start",String(k+1))}v.textContent=S,n.highlightElement(v)},function(S){x.setAttribute(l,d),v.textContent=S})}}),n.plugins.fileHighlight={highlight:function(x){for(var v=(x||document).querySelectorAll(m),b=0,_;_=v[b++];)n.highlightElement(_)}};var g=!1;n.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}($6)),$6.exports}bNt();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};s["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(m){d!==m&&(e.languages.markdown[d].inside.content.inside[m]=e.languages.markdown[m])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function m(p){if(!(!p||typeof p=="string"))for(var h=0,g=p.length;h<g;h++){var y=p[h];if(y.type!=="code"){m(y.content);continue}var x=y.content[1],v=y.content[3];if(x&&v&&x.type==="code-language"&&v.type==="code-block"&&typeof x.content=="string"){var b=x.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");b=(/[a-z][\w-]*/i.exec(b)||[""])[0].toLowerCase();var _="language-"+b;v.alias?typeof v.alias=="string"?v.alias=[v.alias,_]:v.alias.push(_):v.alias=[_]}}}m(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var m="",p=0,h=d.classes.length;p<h;p++){var g=d.classes[p],y=/language-(.+)/.exec(g);if(y){m=y[1];break}}var x=e.languages[m];if(x)d.content=e.highlight(u(d.content),x,m);else if(m&&m!=="none"&&e.plugins.autoloader){var v="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=v,e.plugins.autoloader.loadLanguages(m,function(){var b=document.getElementById(v);b&&(b.innerHTML=e.highlight(b.textContent,e.languages[m],m))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),l={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(d){var m=d.replace(i,"");return m=m.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,h){if(h=h.toLowerCase(),h[0]==="#"){var g;return h[1]==="x"?g=parseInt(h.slice(2),16):g=Number(h.slice(1)),c(g)}else{var y=l[h];return y||p}}),m}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var kse={},Tse;function _Nt(){return Tse||(Tse=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),kse}_Nt();var Nse={},jse;function wNt(){return jse||(jse=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),Nse}wNt();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var Ase={},Ise;function CNt(){return Ise||(Ise=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),Ase}CNt();var Rse={},Pse;function SNt(){return Pse||(Pse=1,function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism)),Rse}SNt();var Ose={},Lse;function ENt(){return Lse||(Lse=1,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Prism)),Ose}ENt();function rMe(e,t){for(const n of e.childNodes){if(os(n)&&n.tagName===t)return!0;rMe(n,t)}return!1}const uv="data-language",L0="data-highlight-language",wS="data-theme";let GW=class sMe extends so{__language;__theme;__isSyntaxHighlightSupported;static getType(){return"code"}static clone(t){return new sMe(t.__language,t.__key)}constructor(t,n){super(n),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const n=document.createElement("code");kc(n,t.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(uv,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(L0,r));const s=this.getTheme();s&&n.setAttribute(wS,s);const a=this.getStyle();return a&&n.setAttribute("style",a),n}updateDOM(t,n,r){const s=this.__language,a=t.__language;s?s!==a&&n.setAttribute(uv,s):a&&n.removeAttribute(uv);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&n.setAttribute(L0,s):n.removeAttribute(L0):i&&s&&n.setAttribute(L0,s);const l=this.__theme,c=t.__theme;l?l!==c&&n.setAttribute(wS,l):c&&n.removeAttribute(wS);const u=this.__style,d=t.__style;return u?u!==d&&n.setAttribute("style",u):d&&n.removeAttribute("style"),!1}exportDOM(t){const n=document.createElement("pre");kc(n,t._config.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(uv,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(L0,r));const s=this.getTheme();s&&n.setAttribute(wS,s);const a=this.getStyle();return a&&n.setAttribute("style",a),{element:n}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||rMe(t,"BR"))?{conversion:Dse,priority:1}:null,div:()=>({conversion:MNt,priority:1}),pre:()=>({conversion:Dse,priority:0}),table:t=>W6(t)?{conversion:kNt,priority:3}:null,td:t=>{const n=t,r=n.closest("table");return n.classList.contains("js-file-line")||r&&W6(r)?{conversion:Fse,priority:3}:null},tr:t=>{const n=t.closest("table");return n&&W6(n)?{conversion:Fse,priority:3}:null}}}static importJSON(t){return gu().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,n=!0){const r=this.getChildren(),s=r.length;if(s>=2&&r[s-1].getTextContent()===`
`&&r[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){r[s-1].remove(),r[s-2].remove();const c=Sr();return this.insertAfter(c,n),c}const{anchor:a,focus:i}=t,l=(a.isBefore(i)?a:i).getNode();if(nt(l)){let c=NNt(l);const u=[];for(;;)if(_T(c))u.push(hw()),c=c.getNextSibling();else{if(!lMe(c))break;{let x=0;const v=c.getTextContent(),b=c.getTextContentSize();for(;x<b&&v[x]===" ";)x++;if(x!==0&&u.push(oMe(" ".repeat(x))),x!==b)break;c=c.getNextSibling()}}const d=l.splitText(a.offset)[0],m=a.offset===0?0:1,p=d.getIndexWithinParent()+m,h=l.getParentOrThrow(),g=[ro(),...u];h.splice(p,0,g);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(qW(l)){const{offset:c}=t.anchor;l.splice(c,0,[ro()]),l.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=Sr();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}setLanguage(t){const n=this.getWritable();return n.__language=t||void 0,n}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const n=this.getWritable();return n.__isSyntaxHighlightSupported=t,n}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const n=this.getWritable();return n.__theme=t||void 0,n}getTheme(){return this.getLatest().__theme}};function gu(e,t){return CEe(GW).setLanguage(e).setTheme(t)}function qW(e){return e instanceof GW}function Dse(e){return{node:gu(e.getAttribute(uv))}}function MNt(e){const t=e,n=Use(t);return n||function(r){let s=r.parentElement;for(;s!==null;){if(Use(s))return!0;s=s.parentElement}return!1}(t)?{node:n?gu():null}:{node:null}}function kNt(){return{node:gu()}}function Fse(){return{node:null}}function Use(e){return e.style.fontFamily.match("monospace")!==null}function W6(e){return e.classList.contains("js-file-line-container")}let aMe=class iMe extends Lc{__highlightType;constructor(t="",n,r){super(t,r),this.__highlightType=n}static getType(){return"code-highlight"}static clone(t){return new iMe(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const n=this.getWritable();return n.__highlightType=t||void 0,n}canHaveFormat(){return!1}createDOM(t){const n=super.createDOM(t),r=H6(t.theme,this.__highlightType);return kc(n,r),n}updateDOM(t,n,r){const s=super.updateDOM(t,n,r),a=H6(r.theme,t.__highlightType),i=H6(r.theme,this.__highlightType);return a!==i&&(a&&UW(n,a),i&&kc(n,i)),s}static importJSON(t){return oMe().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return gu()}};function H6(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function oMe(e="",t){return Wo(new aMe(e,t))}function lMe(e){return e instanceof aMe}function TNt(e,t){let n=e;for(let r=Zs(e,t);r&&(lMe(r.origin)||_T(r.origin));r=RTt(r))n=r.origin;return n}function NNt(e){return TNt(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],s=[];/^\w+$/.test(n)||s.push(/\w+/.exec(n)[0]),n==="diff"&&s.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);function cL(e,t){const n={};for(const r of e){const s=t(r);s&&(n[s]?n[s].push(r):n[s]=[r])}return n}function cMe(e){const t=cL(e,n=>n.type);return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const QM=/[!-/:-@[-`{-~\s]/,jNt=/^\s{0,3}$/;function ANt(e){if(!Ld(e))return!1;const t=e.getFirstChild();return t==null||e.getChildrenSize()===1&&nt(t)&&jNt.test(t.getTextContent())}function INt(e,t){const n=function(s,a){const i=s.match(a.openTagsRegExp);if(i==null)return null;for(const l of i){const c=l.replace(/^\s/,""),u=a.fullMatchRegExpByTag[c];if(u==null)continue;const d=s.match(u),m=a.transformersByTag[c];if(d!=null&&m!=null){if(m.intraword!==!1)return d;const{index:p=0}=d,h=s[p-1],g=s[p+d[0].length];if((!h||QM.test(h))&&(!g||QM.test(g)))return d}}return null}(e.getTextContent(),t);if(!n)return null;const r=n.index||0;return{endIndex:r+n[0].length,match:n,startIndex:r,transformer:t.transformersByTag[n[1]]}}function tm(e){return nt(e)&&!e.hasFormat("code")}function nm(e,t,n){let r=INt(e,t),s=function(i,l){const c=i;let u,d,m,p;for(const h of l){if(!h.replace||!h.importRegExp)continue;const g=c.getTextContent().match(h.importRegExp);if(!g)continue;const y=g.index||0,x=h.getEndIndex?h.getEndIndex(c,g):y+g[0].length;x!==!1&&(u===void 0||d===void 0||y<u&&x>d)&&(u=y,d=x,m=h,p=g)}return u===void 0||d===void 0||m===void 0||p===void 0?null:{endIndex:d,match:p,startIndex:u,transformer:m}}(e,n);if(r&&s&&(r.startIndex<=s.startIndex&&r.endIndex>=s.endIndex||s.startIndex>r.endIndex?s=null:r=null),r){const i=function(l,c,u,d,m){const p=l.getTextContent();let h,g,y;if(m[0]===p?h=l:c===0?[h,g]=l.splitText(u):[y,h,g]=l.splitText(c,u),h.setTextContent(m[2]),d)for(const x of d.format)h.hasFormat(x)||h.toggleFormat(x);return{nodeAfter:g,nodeBefore:y,transformedNode:h}}(e,r.startIndex,r.endIndex,r.transformer,r.match);tm(i.nodeAfter)&&nm(i.nodeAfter,t,n),tm(i.nodeBefore)&&nm(i.nodeBefore,t,n),tm(i.transformedNode)&&nm(i.transformedNode,t,n)}else if(s){const i=function(l,c,u,d,m){let p,h,g;return c===0?[p,h]=l.splitText(u):[g,p,h]=l.splitText(c,u),d.replace?{nodeAfter:h,nodeBefore:g,transformedNode:d.replace(p,m)||void 0}:null}(e,s.startIndex,s.endIndex,s.transformer,s.match);if(!i)return;tm(i.nodeAfter)&&nm(i.nodeAfter,t,n),tm(i.nodeBefore)&&nm(i.nodeBefore,t,n),tm(i.transformedNode)&&nm(i.transformedNode,t,n)}const a=e.getTextContent().replace(/\\([*_`~\\])/g,"$1").replace(/&#(\d+);/g,(i,l)=>String.fromCodePoint(l));e.setTextContent(a)}function RNt(e,t=!1){const n=cMe(e),r=function(s){const a={},i={},l=[],c="(?<![\\\\])";for(const u of s){const{tag:d}=u;a[d]=u;const m=d.replace(/(\*|\^|\+)/g,"\\$1");l.push(m),d.length===1?i[d]=new RegExp(`(?<![\\\\${m}])(${m})((\\\\${m})?.*?[^${m}\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?![\\\\${m}])`):i[d]=new RegExp(`(?<!\\\\)(${m})((\\\\${m})?.*?[^\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?!\\\\)`)}return{fullMatchRegExpByTag:i,openTagsRegExp:new RegExp(`${c}(${l.join("|")})`,"g"),transformersByTag:a}}(n.textFormat);return(s,a)=>{const i=s.split(`
`),l=i.length,c=a||lr();c.clear();for(let d=0;d<l;d++){const m=i[d],[p,h]=PNt(i,d,n.multilineElement,c);p?d=h:ONt(m,c,n.element,r,n.textMatch,t)}const u=c.getChildren();for(const d of u)!t&&ANt(d)&&c.getChildrenSize()>1&&d.remove();rt()!==null&&c.selectStart()}}function PNt(e,t,n,r){for(const s of n){const{handleImportAfterStartMatch:a,regExpEnd:i,regExpStart:l,replace:c}=s,u=e[t].match(l);if(!u)continue;if(a){const g=a({lines:e,rootNode:r,startLineIndex:t,startMatch:u,transformer:s});if(g===null)continue;if(g)return g}const d=typeof i=="object"&&"regExp"in i?i.regExp:i,m=i&&typeof i=="object"&&"optional"in i?i.optional:!i;let p=t;const h=e.length;for(;p<h;){const g=d?e[p].match(d):null;if(!g&&(!m||m&&p<h-1)){p++;continue}if(g&&t===p&&g.index===u.index){p++;continue}const y=[];if(g&&t===p)y.push(e[t].slice(u[0].length,-g[0].length));else for(let x=t;x<=p;x++)if(x===t){const v=e[x].slice(u[0].length);y.push(v)}else if(x===p&&g){const v=e[x].slice(0,-g[0].length);y.push(v)}else y.push(e[x]);if(c(r,null,u,g,y,!0)!==!1)return[!0,p];break}}return[!1,t]}function ONt(e,t,n,r,s,a){const i=er(e),l=Sr();l.append(i),t.append(l);for(const{regExp:c,replace:u}of n){const d=e.match(c);if(d&&(i.setTextContent(e.slice(d[0].length)),u(l,[i],d,!0)!==!1))break}if(nm(i,r,s),l.isAttached()&&e.length>0){const c=l.getPreviousSibling();if(!a&&(Ld(c)||lL(c)||tr(c))){let u=c;if(tr(c)){const d=c.getLastDescendant();u=d==null?null:Eo(d,ca)}u!=null&&u.getTextContentSize()>0&&(u.splice(u.getChildrenSize(),0,[ro(),...l.getChildren()]),l.remove())}}}function LNt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const uMe=/^(\s*)(\d{1,})\.\s/,dMe=/^(\s*)[-*+]\s/,DNt=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,uL=/^(#{1,6})\s/,fMe=/^>\s/,mMe=/^[ \t]*```([\w-]+)?/,pMe=/[ \t]*```$/,FNt=/^[ \t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/,UNt=/^(?:\|)(.+)(?:\|)\s?$/,BNt=/^(\| ?:?-*:? ?)+\|\s?$/,hMe=e=>(t,n,r,s)=>{const a=e(r);a.append(...n),t.replace(a),s||a.select(0,0)},gMe=e=>(t,n,r,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),l=Fu(e==="check"?r[3]==="x":void 0);if(tr(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(l):i.append(l),t.remove()}else if(tr(a)&&a.getListType()===e)a.append(l),t.remove();else{const u=mc(e,e==="number"?Number(r[2]):void 0);u.append(l),t.replace(u)}l.append(...n),s||l.select(0,0);const c=function(u){const d=u.match(/\t/g),m=u.match(/ /g);let p=0;return d&&(p+=d.length),m&&(p+=Math.floor(m.length/4)),p}(r[1]);c&&l.setIndent(c)},KW=(e,t,n)=>{const r=[],s=e.getChildren();let a=0;for(const i of s)if(ca(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(tr(d)){r.push(KW(d,t,n+1));continue}}const l=" ".repeat(4*n),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";r.push(l+u+t(i)),a++}return r.join(`
`)},VNt={dependencies:[zW],export:(e,t)=>{if(!vNt(e))return null;const n=Number(e.getTag().slice(1));return"#".repeat(n)+" "+t(e)},regExp:uL,replace:hMe(e=>{const t="h"+e[1].length;return Zh(t)}),type:"element"},$Nt={dependencies:[WW],export:(e,t)=>{if(!lL(e))return null;const n=t(e).split(`
`),r=[];for(const s of n)r.push("> "+s);return r.join(`
`)},regExp:fMe,replace:(e,t,n,r)=>{if(r){const a=e.getPreviousSibling();if(lL(a))return a.splice(a.getChildrenSize(),0,[ro(),...t]),void e.remove()}const s=HW();s.append(...t),e.replace(s),r||s.select(0,0)},type:"element"},WNt={dependencies:[GW],export:e=>{if(!qW(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:pMe},regExpStart:mMe,replace:(e,t,n,r,s,a)=>{let i,l;if(!t&&s){if(s.length===1)r?(i=gu(),l=n[1]+s[0]):(i=gu(n[1]),l=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=gu(n[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();l=s.join(`
`)}const c=er(l);i.append(c),e.append(i)}else t&&hMe(c=>gu(c?c[1]:void 0))(e,t,n,a)},type:"multiline-element"},HNt={dependencies:[AT,jT],export:(e,t)=>tr(e)?KW(e,t,0):null,regExp:dMe,replace:gMe("bullet"),type:"element"},zNt={dependencies:[AT,jT],export:(e,t)=>tr(e)?KW(e,t,0):null,regExp:uMe,replace:gMe("number"),type:"element"},GNt={format:["code"],tag:"`",type:"text-format"},qNt={format:["highlight"],tag:"==",type:"text-format"},KNt={format:["bold","italic"],tag:"***",type:"text-format"},YNt={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},QNt={format:["bold"],tag:"**",type:"text-format"},XNt={format:["bold"],intraword:!1,tag:"__",type:"text-format"},ZNt={format:["strikethrough"],tag:"~~",type:"text-format"},JNt={format:["italic"],tag:"*",type:"text-format"},e4t={format:["italic"],intraword:!1,tag:"_",type:"text-format"},t4t={dependencies:[Ox],export:(e,t,n)=>{if(!bo(e)||Kl(e))return null;const r=e.getTitle(),s=t(e);return r?`[${s}](${e.getURL()} "${r}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,n,r,s]=t,a=wy(r,{title:s}),i=n.split("[").length-1,l=n.split("]").length-1;let c=n,u="";if(i<l)return;if(i>l){const m=n.split("[");u="["+m[0],c=m.slice(1).join("[")}const d=er(c);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(er(u)),d},trigger:")",type:"text-match"},n4t=[VNt,$Nt,HNt,zNt],r4t=[WNt],s4t=[GNt,KNt,YNt,QNt,XNt,qNt,JNt,e4t,ZNt],yMe=[t4t],xMe=[...n4t,...r4t,...s4t,...yMe];function Bse(e,t,n){const r=n.length;for(let s=t;s>=r;s--){const a=s-r;if(vMe(e,a,n,0,r)&&e[a+r]!==" ")return a}return-1}function vMe(e,t,n,r,s){for(let a=0;a<s;a++)if(e[t+a]!==n[r+a])return!1;return!0}function Rmn(e,t=xMe){const n=cMe(t),r=cL(n.textFormat,({tag:i})=>i[i.length-1]),s=cL(n.textMatch,({trigger:i})=>i);for(const i of t){const l=i.type;if(l==="element"||l==="text-match"||l==="multiline-element"){const c=i.dependencies;for(const u of c)e.hasNode(u)||LNt(173,u.getType())}}const a=(i,l,c)=>{(function(u,d,m,p){const h=u.getParent();if(!vl(h)||u.getFirstChild()!==d)return!1;const g=d.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExp:y,replace:x}of p){const v=g.match(y);if(v&&v[0].length===(v[0].endsWith(" ")?m:m-1)){const b=d.getNextSiblings(),[_,w]=d.splitText(m);if(x(u,w?[w,...b]:b,v,!1)!==!1)return _.remove(),!0}}return!1})(i,l,c,n.element)||function(u,d,m,p){const h=u.getParent();if(!vl(h)||u.getFirstChild()!==d)return!1;const g=d.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExpStart:y,replace:x,regExpEnd:v}of p){if(v&&!("optional"in v)||v&&"optional"in v&&!v.optional)continue;const b=g.match(y);if(b&&b[0].length===(b[0].endsWith(" ")?m:m-1)){const _=d.getNextSiblings(),[w,C]=d.splitText(m);if(x(u,C?[C,..._]:_,b,null,null,!1)!==!1)return w.remove(),!0}}return!1}(i,l,c,n.multilineElement)||function(u,d,m){let p=u.getTextContent();const h=m[p[d-1]];if(h==null)return!1;d<p.length&&(p=p.slice(0,d));for(const g of h){if(!g.replace||!g.regExp)continue;const y=p.match(g.regExp);if(y===null)continue;const x=y.index||0,v=x+y[0].length;let b;return x===0?[b]=u.splitText(v):[,b]=u.splitText(x,v),b.selectNext(0,0),g.replace(b,y),!0}return!1}(l,c,s)||function(u,d,m){const p=u.getTextContent(),h=d-1,g=p[h],y=m[g];if(!y)return!1;for(const x of y){const{tag:v}=x,b=v.length,_=h-b+1;if(b>1&&!vMe(p,_,v,0,b)||p[_-1]===" ")continue;const w=p[h+1];if(x.intraword===!1&&w&&!QM.test(w))continue;const C=u;let S=C,E=Bse(p,_,v),M=S;for(;E<0&&(M=M.getPreviousSibling())&&!dc(M);)if(nt(M)){if(M.hasFormat("code"))continue;const I=M.getTextContent();S=M,E=Bse(I,I.length,v)}if(E<0||S===C&&E+b===_)continue;const k=S.getTextContent();if(E>0&&k[E-1]===g)continue;const N=k[E-1];if(x.intraword===!1&&N&&!QM.test(N))continue;const P=C.getTextContent(),L=P.slice(0,_)+P.slice(h+1);C.setTextContent(L);const O=S===C?L:k;S.setTextContent(O.slice(0,E)+O.slice(E+b));const A=rt(),j=tEe();_a(j);const T=h-b*(S===C?2:1)+1;j.anchor.set(S.__key,E,"text"),j.focus.set(C.__key,T,"text");for(const I of x.format)j.hasFormat(I)||j.formatText(I);j.anchor.set(j.focus.key,j.focus.offset,j.focus.type);for(const I of x.format)j.hasFormat(I)&&j.toggleFormat(I);return Be(A)&&(j.format=A.format),!0}}(l,c,r)};return e.registerUpdateListener(({tags:i,dirtyLeaves:l,editorState:c,prevEditorState:u})=>{if(i.has(uEe)||i.has(Q5t)||e.isComposing())return;const d=c.read(rt),m=u.read(rt);if(!Be(m)||!Be(d)||!d.isCollapsed()||d.is(m))return;const p=d.anchor.key,h=d.anchor.offset,g=c._nodeMap.get(p);!nt(g)||!l.has(p)||h!==1&&h>m.anchor.offset+1||e.update(()=>{if(!tm(g))return;const y=g.getParent();y===null||qW(y)||a(y,g,d.anchor.offset)})})}function dL(e,t=xMe,n,r=!1,s=!1){const a=r?e:function(i,l=!1){const c=i.split(`
`);let u=!1;const d=[];for(let m=0;m<c.length;m++){const p=c[m],h=d[d.length-1];FNt.test(p)?d.push(p):mMe.test(p)||pMe.test(p)?(u=!u,d.push(p)):u||p===""||h===""||!h||uL.test(h)||uL.test(p)||fMe.test(p)||uMe.test(p)||dMe.test(p)||DNt.test(p)||UNt.test(p)||BNt.test(p)||!l?d.push(p):d[d.length-1]=h+p}return d.join(`
`)}(e,s);return RNt(t,r)(a,n)}const bMe=f.createContext(null);function a4t(e,t){return{getTheme:function(){return t??null}}}function Uu(){const e=f.useContext(bMe);return e==null&&function(t,...n){const r=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of n)s.append("v",a);throw r.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}function i4t({newTab:e=!0,disabled:t=!1}){const[n]=Uu();return f.useEffect(()=>nNt(n,HTt({disabled:t,newTab:e})),[n,e,t]),null}const _Me=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,o4t=_Me?f.useLayoutEffect:f.useEffect,CS={tag:n1};function l4t({initialConfig:e,children:t}){const n=f.useMemo(()=>{const{theme:r,namespace:s,nodes:a,onError:i,editorState:l,html:c}=e,u=a4t(null,r),d=xW({editable:e.editable,html:c,namespace:s,nodes:a,onError:m=>i(m,d),theme:r});return function(m,p){if(p!==null){if(p===void 0)m.update(()=>{const h=lr();if(h.isEmpty()){const g=Sr();h.append(g);const y=_Me?document.activeElement:null;(rt()!==null||y!==null&&y===m.getRootElement())&&g.select()}},CS);else if(p!==null)switch(typeof p){case"string":{const h=m.parseEditorState(p);m.setEditorState(h,CS);break}case"object":m.setEditorState(p,CS);break;case"function":m.update(()=>{lr().isEmpty()&&p(m)},CS)}}}(d,l),[d,u]},[]);return o4t(()=>{const r=e.editable,[s]=n;s.setEditable(r===void 0||r)},[]),o.jsx(bMe.Provider,{value:n,children:t})}function c4t(){return lr().getTextContent()}function u4t(e,t=!0){if(e)return!1;let n=c4t();return t&&(n=n.trim()),n===""}function d4t(e){if(!u4t(e,!1))return!1;const t=lr().getChildren(),n=t.length;if(n>1)return!1;for(let r=0;r<n;r++){const s=t[r];if(Vn(s))return!1;if(Pe(s)){if(!Ld(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let l=0;l<i;l++){const c=a[r];if(!nt(c))return!1}}}return!0}function wMe(e){return()=>d4t(e)}const CMe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function f4t({editor:e,ariaActiveDescendant:t,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:l,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:m,ariaRequired:p,autoCapitalize:h,className:g,id:y,role:x="textbox",spellCheck:v=!0,style:b,tabIndex:_,"data-testid":w,...C},S){const[E,M]=f.useState(e.isEditable()),k=f.useCallback(P=>{P&&P.ownerDocument&&P.ownerDocument.defaultView?e.setRootElement(P):e.setRootElement(null)},[e]),N=f.useMemo(()=>function(...P){return L=>{for(const O of P)typeof O=="function"?O(L):O!=null&&(O.current=L)}}(S,k),[k,S]);return CMe(()=>(M(e.isEditable()),e.registerEditableListener(P=>{M(P)})),[e]),o.jsx("div",{"aria-activedescendant":E?t:void 0,"aria-autocomplete":E?n:"none","aria-controls":E?r:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":E&&x==="combobox"?!!i:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":E?m:void 0,"aria-readonly":!E||void 0,"aria-required":p,autoCapitalize:h,className:g,contentEditable:E,"data-testid":w,id:y,ref:N,role:x,spellCheck:v,style:b,tabIndex:_,...C})}const m4t=f.forwardRef(f4t);function Vse(e){return e.getEditorState().read(wMe(e.isComposing()))}const p4t=f.forwardRef(h4t);function h4t(e,t){const{placeholder:n,...r}=e,[s]=Uu();return o.jsxs(o.Fragment,{children:[o.jsx(m4t,{editor:s,...r,ref:t}),n!=null&&o.jsx(g4t,{editor:s,content:n})]})}function g4t({content:e,editor:t}){const n=function(i){const[l,c]=f.useState(()=>Vse(i));return CMe(()=>{function u(){const d=Vse(i);c(d)}return u(),Mc(i.registerUpdateListener(()=>{u()}),i.registerEditableListener(()=>{u()}))},[i]),l}(t),[r,s]=f.useState(t.isEditable());if(f.useLayoutEffect(()=>(s(t.isEditable()),t.registerEditableListener(i=>{s(i)})),[t]),!n)return null;let a=null;return typeof e=="function"?a=e(r):e!==null&&(a=e),a===null?null:o.jsx("div",{"aria-hidden":!0,children:a})}const y4t=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function x4t(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function v4t(){return function(e){const[t]=Uu(),n=f.useMemo(()=>e(t),[t,e]),[r,s]=f.useState(()=>n.initialValueFn()),a=f.useRef(r);return y4t(()=>{const{initialValueFn:i,subscribe:l}=n,c=i();return a.current!==c&&(a.current=c,s(c)),l(u=>{a.current=u,s(u)})},[n,e]),r}(x4t)}const b4t={name:"@lexical/react/ReactProvider"},Fp=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,_4t=Fp&&"documentMode"in document?document.documentMode:null,w4t=Fp&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),C4t=!(!Fp||!("InputEvent"in window)||_4t)&&"getTargetRanges"in new window.InputEvent("input"),S4t=Fp&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),$se=Fp&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,E4t=Fp&&/^(?=.*Chrome).*/i.test(navigator.userAgent),M4t=Fp&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&w4t&&!E4t;function Wse(e,t){t.update(()=>{if(e!==null){const n=Fb(e,KeyboardEvent)?null:e.clipboardData,r=rt();if(r!==null&&n!=null){e.preventDefault();const s=UTt(t);s!==null&&n.setData("text/html",s),n.setData("text/plain",r.getTextContent())}}})}function k4t(e){return Mc(e.registerCommand(uc,t=>{const n=rt();return!!Be(n)&&(n.deleteCharacter(t),!0)},ps),e.registerCommand(py,t=>{const n=rt();return!!Be(n)&&(n.deleteWord(t),!0)},ps),e.registerCommand(hy,t=>{const n=rt();return!!Be(n)&&(n.deleteLine(t),!0)},ps),e.registerCommand(Tm,t=>{const n=rt();if(!Be(n))return!1;if(typeof t=="string")n.insertText(t);else{const r=t.dataTransfer;if(r!=null)fse(r,n);else{const s=t.data;s&&n.insertText(s)}}return!0},ps),e.registerCommand(VM,()=>{const t=rt();return!!Be(t)&&(t.removeText(),!0)},ps),e.registerCommand(Sg,t=>{const n=rt();return!!Be(n)&&(n.insertLineBreak(t),!0)},ps),e.registerCommand(BO,()=>{const t=rt();return!!Be(t)&&(t.insertLineBreak(),!0)},ps),e.registerCommand(O2e,t=>{const n=rt();if(!Be(n))return!1;const r=t,s=r.shiftKey;return!!use(n,!0)&&(r.preventDefault(),dse(n,s,!0),!0)},ps),e.registerCommand(P2e,t=>{const n=rt();if(!Be(n))return!1;const r=t,s=r.shiftKey;return!!use(n,!1)&&(r.preventDefault(),dse(n,s,!1),!0)},ps),e.registerCommand(cW,t=>{const n=rt();return!!Be(n)&&(!$se||navigator.language!=="ko-KR")&&(t.preventDefault(),e.dispatchCommand(uc,!0))},ps),e.registerCommand(uW,t=>{const n=rt();return!!Be(n)&&(t.preventDefault(),e.dispatchCommand(uc,!1))},ps),e.registerCommand(gy,t=>{const n=rt();if(!Be(n))return!1;if(t!==null){if(($se||S4t||M4t)&&C4t)return!1;t.preventDefault()}return e.dispatchCommand(Sg,!1)},ps),e.registerCommand(VO,()=>(aTt(),!0),ps),e.registerCommand(dW,t=>{const n=rt();return!!Be(n)&&(Wse(t,e),!0)},ps),e.registerCommand(fW,t=>{const n=rt();return!!Be(n)&&(function(r,s){Wse(r,s),s.update(()=>{const a=rt();Be(a)&&a.removeText()})}(t,e),!0)},ps),e.registerCommand(pw,t=>{const n=rt();return!!Be(n)&&(function(r,s){r.preventDefault(),s.update(()=>{const a=rt(),i=Fb(r,ClipboardEvent)?r.clipboardData:null;i!=null&&Be(a)&&fse(i,a)},{tag:cEe})}(t,e),!0)},ps),e.registerCommand(B2e,t=>{const n=rt();return!!Be(n)&&(t.preventDefault(),!0)},ps),e.registerCommand(V2e,t=>{const n=rt();return!!Be(n)&&(t.preventDefault(),!0)},ps))}function T4t(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const YW=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function N4t({editor:e,ErrorBoundary:t}){return function(n,r){const[s,a]=f.useState(()=>n.getDecorators());return YW(()=>n.registerDecoratorListener(i=>{Qs.flushSync(()=>{a(i)})}),[n]),f.useEffect(()=>{a(n.getDecorators())},[n]),f.useMemo(()=>{const i=[],l=Object.keys(s);for(let c=0;c<l.length;c++){const u=l[c],d=o.jsx(r,{onError:p=>n._onError(p),children:o.jsx(f.Suspense,{fallback:null,children:s[u]})}),m=n.getElementByKey(u);m!==null&&i.push(Qs.createPortal(d,m,u))}return i},[r,s,n])}(e,t)}function j4t({editor:e,ErrorBoundary:t}){return function(n){const r=WEe.maybeFromEditor(n);if(r&&r.hasExtensionByName(b4t.name)){for(const s of["@lexical/plain-text","@lexical/rich-text"])r.hasExtensionByName(s)&&T4t(320,s);return!0}return!1}(e)?null:o.jsx(N4t,{editor:e,ErrorBoundary:t})}function Hse(e){return e.getEditorState().read(wMe(e.isComposing()))}function A4t({contentEditable:e,placeholder:t=null,ErrorBoundary:n}){const[r]=Uu();return function(s){YW(()=>Mc(k4t(s),gNt(s)),[s])}(r),o.jsxs(o.Fragment,{children:[e,o.jsx(I4t,{content:t}),o.jsx(j4t,{editor:r,ErrorBoundary:n})]})}function I4t({content:e}){const[t]=Uu(),n=function(s){const[a,i]=f.useState(()=>Hse(s));return YW(()=>{function l(){const c=Hse(s);i(c)}return l(),Mc(s.registerUpdateListener(()=>{l()}),s.registerEditableListener(()=>{l()}))},[s]),a}(t),r=v4t();return n?typeof e=="function"?e(r):e:null}const zse="startTransition",fL=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,R4t=fL?f.useLayoutEffect:f.useEffect;let P4t=class{key;ref;constructor(t){this.key=t,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(t){this.ref={current:t}}};const Gse=e=>{const t=document.getElementById("typeahead-menu");if(!t)return;const n=t.getBoundingClientRect();n.top+n.height>window.innerHeight&&t.scrollIntoView({block:"center"}),n.top<0&&t.scrollIntoView({block:"center"}),e.scrollIntoView({block:"nearest"})};function qse(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.top>=r.top-6&&n.top<=r.bottom+6}function O4t(e,t,n,r){const[s]=Uu();f.useEffect(()=>{if(t!=null&&e!=null){const a=s.getRootElement(),i=a!=null?function(m,p){let h=getComputedStyle(m);const g=h.position==="absolute",y=/(auto|scroll)/;if(h.position==="fixed")return document.body;for(let x=m;x=x.parentElement;)if(h=getComputedStyle(x),(!g||h.position!=="static")&&y.test(h.overflow+h.overflowY+h.overflowX))return x;return document.body}(a):document.body;let l=!1,c=qse(t,i);const u=function(){l||(window.requestAnimationFrame(function(){n(),l=!1}),l=!0);const m=qse(t,i);m!==c&&(c=m,r?.(m))},d=new ResizeObserver(n);return window.addEventListener("resize",n),document.addEventListener("scroll",u,{capture:!0,passive:!0}),d.observe(t),()=>{d.unobserve(t),window.removeEventListener("resize",n),document.removeEventListener("scroll",u,!0)}}},[t,s,r,n,e])}const Kse=Xt("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function L4t({close:e,editor:t,anchorElementRef:n,resolution:r,options:s,menuRenderFn:a,onSelectOption:i,shouldSplitNodeWithQuery:l=!1,commandPriority:c=Ob,preselectFirstItem:u=!0}){const[d,m]=f.useState(null),p=r.match&&r.match.matchingString;f.useEffect(()=>{u&&m(0)},[p,u]);const h=f.useCallback(y=>{t.update(()=>{const x=r.match!=null&&l?function(v){const b=rt();if(!Be(b)||!b.isCollapsed())return null;const _=b.anchor;if(_.type!=="text")return null;const w=_.getNode();if(!w.isSimpleText())return null;const C=_.offset,S=w.getTextContent().slice(0,C),E=v.replaceableString.length,M=C-function(N,P,L){let O=L;for(let A=O;A<=P.length;A++)N.slice(-A)===P.substring(0,A)&&(O=A);return O}(S,v.matchingString,E);if(M<0)return null;let k;return M===0?[k]=w.splitText(C):[,k]=w.splitText(M,C),k}(r.match):null;i(y,x,e,r.match?r.match.matchingString:"")})},[t,l,r.match,i,e]),g=f.useCallback(y=>{const x=t.getRootElement();x!==null&&(x.setAttribute("aria-activedescendant","typeahead-item-"+y),m(y))},[t]);return f.useEffect(()=>()=>{const y=t.getRootElement();y!==null&&y.removeAttribute("aria-activedescendant")},[t]),R4t(()=>{s===null?m(null):d===null&&u&&g(0)},[s,d,g,u]),f.useEffect(()=>Mc(t.registerCommand(Kse,({option:y})=>!(!y.ref||y.ref.current==null)&&(Gse(y.ref.current),!0),c)),[t,g,c]),f.useEffect(()=>Mc(t.registerCommand(D2e,y=>{const x=y;if(s!==null&&s.length){const v=d===null?0:d!==s.length-1?d+1:0;g(v);const b=s[v];b.ref!=null&&b.ref.current&&t.dispatchCommand(Kse,{index:v,option:b}),x.preventDefault(),x.stopImmediatePropagation()}return!0},c),t.registerCommand(L2e,y=>{const x=y;if(s!==null&&s.length){const v=d===null?s.length-1:d!==0?d-1:s.length-1;g(v);const b=s[v];b.ref!=null&&b.ref.current&&Gse(b.ref.current),x.preventDefault(),x.stopImmediatePropagation()}return!0},c),t.registerCommand(F2e,y=>{const x=y;return x.preventDefault(),x.stopImmediatePropagation(),e(),!0},c),t.registerCommand(U2e,y=>{const x=y;return s!==null&&d!==null&&s[d]!=null&&(x.preventDefault(),x.stopImmediatePropagation(),h(s[d]),!0)},c),t.registerCommand(gy,y=>s!==null&&d!==null&&s[d]!=null&&(y!==null&&(y.preventDefault(),y.stopImmediatePropagation()),h(s[d]),!0),c)),[h,e,t,s,d,g,c]),a(n,f.useMemo(()=>({options:s,selectOptionAndCleanUp:h,selectedIndex:d,setHighlightedIndex:m}),[h,d,s]),r.match?r.match.matchingString:"")}function Yse(e,t){t!=null&&(e.className=t),e.setAttribute("aria-label","Typeahead menu"),e.setAttribute("role","listbox"),e.style.display="block",e.style.position="absolute"}function D4t({options:e,onQueryChange:t,onSelectOption:n,onOpen:r,onClose:s,menuRenderFn:a,triggerFn:i,anchorClassName:l,commandPriority:c=Ob,parent:u,preselectFirstItem:d=!0,ignoreEntityBoundary:m=!1}){const[p]=Uu(),[h,g]=f.useState(null),y=function(b,_,w,C=fL?document.body:void 0,S=!0){const[E]=Uu(),M=fL?document.createElement("div"):null,k=f.useRef(M),N=f.useCallback(()=>{if(k.current===null||C===void 0)return;k.current.style.top=k.current.style.bottom;const L=E.getRootElement(),O=k.current,A=O.firstChild;if(L!==null&&b!==null){const{left:j,top:T,width:I,height:U}=b.getRect(),B=k.current.offsetHeight;if(O.style.top=`${T+B+3+(S?window.pageYOffset:0)}px`,O.style.left=`${j+window.pageXOffset}px`,O.style.height=`${U}px`,O.style.width=`${I}px`,A!==null){A.style.top=`${T}`;const D=A.getBoundingClientRect(),W=D.height,z=D.width,$=L.getBoundingClientRect();j+z>$.right&&(O.style.left=`${$.right-z+window.pageXOffset}px`),(T+W>window.innerHeight||T+W>$.bottom)&&T-$.top>W+U&&(O.style.top=`${T-W-U+(S?window.pageYOffset:0)}px`)}O.isConnected||(Yse(O,w),C.append(O)),O.setAttribute("id","typeahead-menu"),L.setAttribute("aria-controls","typeahead-menu")}},[E,b,S,w,C]);f.useEffect(()=>{const L=E.getRootElement();return b!==null&&N(),()=>{L!==null&&L.removeAttribute("aria-controls");const O=k.current;O!==null&&O.isConnected&&(O.remove(),O.removeAttribute("id"))}},[E,N,b]);const P=f.useCallback(L=>{b!==null&&(L||_(null))},[b,_]);return O4t(b,k.current,N,P),M!=null&&M===k.current&&(Yse(M,w),C?.append(M)),k}(h,g,l,u),x=f.useCallback(()=>{g(null),s!=null&&h!==null&&s()},[s,h]),v=f.useCallback(b=>{g(b),r!=null&&h===null&&r(b)},[r,h]);return f.useEffect(()=>{const b=p.registerUpdateListener(()=>{p.getEditorState().read(()=>{if(!p.isEditable())return void x();const _=p._window||window,w=_.document.createRange(),C=rt(),S=function(k){let N=null;return k.getEditorState().read(()=>{const P=rt();Be(P)&&(N=function(L){const O=L.anchor;if(O.type!=="text")return null;const A=O.getNode();if(!A.isSimpleText())return null;const j=O.offset;return A.getTextContent().slice(0,j)}(P))}),N}(p);if(!Be(C)||!C.isCollapsed()||S===null||w===null)return void x();const E=i(S,p);if(t(E?E.matchingString:null),E!==null&&(m||!function(k,N){return N===0&&k.getEditorState().read(()=>{const P=rt();if(Be(P)){const L=P.anchor.getNode().getPreviousSibling();return nt(L)&&L.isTextEntity()}return!1})}(p,E.leadOffset))&&function(N,P,L){const O=Ec(L);if(O===null||!O.isCollapsed)return!1;const A=O.anchorNode,j=N,T=O.anchorOffset;if(A==null||T==null)return!1;try{P.setStart(A,j),P.setEnd(A,T)}catch{return!1}return!0}(E.leadOffset,w,_)!==null)return M=()=>v({getRect:()=>w.getBoundingClientRect(),match:E}),void(zse in R?R[zse](M):M());var M;x()})});return()=>{b()}},[p,i,t,h,x,v,m]),f.useEffect(()=>p.registerEditableListener(b=>{b||x()}),[p,x]),h===null||p===null||y.current===null?null:o.jsx(L4t,{close:x,resolution:h,editor:p,anchorElementRef:y,options:e,menuRenderFn:a,shouldSplitNodeWithQuery:!0,onSelectOption:n,commandPriority:c,preselectFirstItem:d})}const z6=245,G6=240,QW=100,XW=["@","/"].join(""),SMe=`\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'"~=<>_:;`,EMe="[^"+XW+SMe+"\\s]",F4t="(?:\\.[ |$]| |["+SMe+"]|)",MMe=new RegExp("(^|\\s|\\()(["+XW+"]((?:"+EMe+F4t+"){0,"+QW+"}))$"),kMe=new RegExp("(^|\\s|\\()(["+XW+"]((?:"+EMe+"){0,"+QW+"}))$"),U4t=10,B4t={shortcut:5},ZW=250,Qse={tab:0,file:1,space:2,shortcuts:3};function V4t(e,t){let n=MMe.exec(e);if(n===null&&(n=kMe.exec(e)),n!==null){const r=n[1],s=n[3];if(s.length>=t)return{leadOffset:n.index+r.length,matchingString:s,replaceableString:n[2]}}return null}class $4t extends P4t{uuid;variant;label;url;src;emoji;queryText;action;convertToNode;isAlwaysVisible;rightElement;className;constructor(t,n,r,s,a,i,l,c,u,d,m,p,h){super(t),this.uuid=n,this.variant=r,this.label=s,this.url=a,this.src=i,this.emoji=l,this.queryText=c,this.action=u,this.convertToNode=d,this.isAlwaysVisible=m,this.rightElement=p,this.className=h}}const TMe=R.memo(({options:e,onOpen:t=Pn,onClose:n=Pn,onTrigger:r=Pn,ref:s})=>{const{$t:a}=Z(),[i]=Uu(),[l,c]=f.useState(!1),[u,d]=f.useState(null),[m,p]=f.useState(null),[h,g]=f.useState(!1),y=f.useCallback(()=>g(!0),[]),x=f.useCallback(()=>g(!1),[]),v=f.useCallback(()=>{c(!0),t()},[t]),b=f.useCallback(()=>{c(!1),d(null),n()},[n]),_=f.useCallback(P=>{switch(P){case"tab":return a({defaultMessage:"Tabs",id:"M56d6aRPai"});case"file":return a({defaultMessage:"Files",id:"m4vqJl0/FT"});case"space":return a({defaultMessage:"Spaces",id:"ZMoczsYew9"});case"shortcut":return a({defaultMessage:"Shortcuts",id:"7FAwwkYilD"});default:return P.toLocaleUpperCase()}},[a]);f.useEffect(()=>i.registerRootListener((P,L)=>{P&&(P.addEventListener("focus",y),P.addEventListener("blur",x)),L&&(L.removeEventListener("focus",y),L.removeEventListener("blur",x))}),[i,x,y]);const w=f.useMemo(()=>{const P=m?.toLocaleLowerCase().trim();if(u==="/"&&m?.includes(" "))return[];const L=e.filter(T=>P?T.label.toLowerCase().includes(P)||T.url?.includes(P)||T.isAlwaysVisible:!0).sort((T,I)=>(Qse[T.variant]??Number.MAX_SAFE_INTEGER)-(Qse[I.variant]??Number.MAX_SAFE_INTEGER));let O="",A=0;const j=[];return L.forEach(T=>{T.variant!==O&&(O=T.variant,A=0);const I=B4t[O]??U4t;A>=I&&!T.isAlwaysVisible||(j.push(T),A+=1)}),j.map(T=>new $4t(T.uuid,T.uuid,T.variant,T.label,T.url,T.src,T.emoji,T.queryText,T.action,T.convertToNode,T.isAlwaysVisible,T.rightElement,T.className))},[m,u,e]),C=f.useMemo(()=>w.some(P=>P.convertToNode===void 0||P.convertToNode),[w]),S=f.useCallback(P=>{p(P)},[]),E=f.useCallback(P=>{const L=V4t(P,0);return L?.replaceableString?.[0]&&(d(L.replaceableString[0]),r(L.replaceableString[0])),L},[r]),M=f.useCallback((P,L,O,A)=>{let j="";const T=[];return P.forEach((I,U)=>{I.variant!==j&&(j=I.variant,T.push({type:"separator",show:!0,text:_(j)})),T.push({type:"default",text:I.label,className:I.className,focused:U===L,customTextNode:o.jsx(F,{variant:"small",children:o.jsx(JW,{text:I.label,src:I.src,emoji:I.emoji,mentionVariant:I.variant,truncate:I.rightElement?"small":"medium",variant:"extraSmall",iconClassName:"mx-1 relative top-[-1.25px] h-4 w-4",emojiClassName:"mx-1 pl-[2px] align-middle shrink-0"})}),tooltipText:ey(I.queryText??"",ZW),onMouseMove:()=>{A(U)},onMouseDown:B=>{B.preventDefault(),A(U),O(I)},rightElement:I.rightElement?.({focused:U===L}),preserveRightElementSpace:!I.rightElement})}),T},[_]),k=f.useCallback((P,L,O)=>{if(P.action&&(setTimeout(()=>{P.action?.()},0),P.convertToNode===!1)){O();return}i.update(()=>{const A=eH({uuid:P.uuid,variant:P.variant,text:P.label,url:P.url,src:P.src,emoji:P.emoji,queryText:P.queryText});L&&L.replace(A);const j=er(" ");A.insertAfter(j),j.selectEnd(),O()})},[i]),N=f.useCallback((P,{selectedIndex:L,selectOptionAndCleanUp:O,setHighlightedIndex:A})=>{const j=()=>{if(!P.current)return{isTop:!1,leftOffset:0};const U=P.current.getBoundingClientRect(),D=window.innerHeight-U.bottom<z6&&U.top>z6;let W=0;const z=U.left+G6;return z>window.innerWidth&&(W=window.innerWidth-z-16),U.left+W<16&&(W=16-U.left),{isTop:D,leftOffset:W}},{isTop:T,leftOffset:I}=j();return P.current&&w.length?Qs.createPortal(o.jsx(vU,{removeScrollBar:!1,enabled:!0,children:o.jsx(H,{variant:u3.background,className:"shadow-overlay p-xs scrollable-container scrollbar overflow-y-auto overflow-x-hidden rounded-xl [scrollbar-gutter:stable]",style:{width:G6,minWidth:G6,maxHeight:z6,...T&&{bottom:"48px",position:"absolute"},...I!==0&&{left:`${I}px`,position:"absolute"}},children:o.jsx(Yd,{items:M(w,C?L??-1:-1,O,A),disableScrollArea:!0,disableHoverStyles:C})})}),P.current):null},[w,M,C]);return f.useImperativeHandle(s,()=>({canSubmit:()=>!l||!C}),[l,C]),h?o.jsx(D4t,{onQueryChange:S,onSelectOption:k,triggerFn:E,preselectFirstItem:C,onOpen:v,onClose:b,options:w,menuRenderFn:N}):null});TMe.displayName="MentionsPlugin";const W4t=Object.freeze(Object.defineProperty({__proto__:null,AtSignMentionsRegex:MMe,AtSignMentionsRegexAliasRegex:kMe,LENGTH_LIMIT:QW,TOOLTIP_MAX_NUM_CHARACTERS:ZW,default:TMe},Symbol.toStringTag,{value:"Module"})),JW=R.memo(({className:e,textClassName:t,iconClassName:n,emojiClassName:r,text:s,src:a,color:i,truncate:l,variant:c,emoji:u,mentionVariant:d,tooltipText:m})=>{const p=f.useMemo(()=>{let h;try{h=u?String.fromCodePoint(parseInt(u,16)):null}catch{h=null}return d==="space"?h?o.jsx("span",{className:V("inline-block select-none",r),children:h}):o.jsx(le,{icon:yi,className:V("text-quiet inline-block shrink-0 rounded-sm",n)}):a?o.jsx("i",{className:V("inline-block shrink-0 select-none rounded-sm bg-cover bg-center bg-no-repeat",n),style:{backgroundImage:`url(${a})`,fontSize:"0.78rem"}}):null},[n,r,d,a,u]);return o.jsx(En,{tooltipText:m,showTooltip:!!m,children:o.jsxs("span",{className:V("inline-flex min-w-0 items-center align-top",{"max-w-[168px]":l==="small","max-w-[208px]":l==="medium","max-w-[250px]":l==="large"},e),spellCheck:!1,children:[p,o.jsx(F,{className:V("inline-block min-w-0 truncate",t),color:i,as:"span",variant:c,children:s})]})})});JW.displayName="MentionNodeTextContent";const NMe=R.memo(e=>o.jsx(JW,{...e,className:"px-sm border-subtlest bg-subtler dark:bg-subtle rounded-md border-[0.2px]",textClassName:"leading-[1.3]",iconClassName:"mr-1 h-[0.88rem] w-[0.88rem]",emojiClassName:"mr-1 text-[0.80rem]",truncate:"large"}));NMe.displayName="MentionNodeDecorator";function H4t(e){const t=e.textContent,n=e.getAttribute("data-mention-uuid"),r=e.getAttribute("data-mention-variant"),s=e.getAttribute("data-mention-url")??void 0,a=e.getAttribute("data-mention-src")??void 0,i=e.getAttribute("data-mention-emoji")??void 0,l=e.getAttribute("data-mention-query-text")??void 0;return t!==null&&n!==null&&r!==null?{node:eH({uuid:n,variant:r,text:t,url:s,src:a,emoji:i,queryText:l})}:null}class IT extends ST{__props;static getType(){return"mention"}static clone(t){return new IT(t.__props,t.__key)}static importJSON(t){return eH(t.props).updateFromJSON(t)}constructor(t,n){super(n),this.__props=t}exportJSON(){return{...super.exportJSON(),props:this.__props}}createDOM(){return document.createElement("span")}isIsolated(){return!0}updateDOM(){return!1}decorate(){return o.jsx(NMe,{text:this.__props.text,src:this.__props.src,emoji:this.__props.emoji,mentionVariant:this.__props.variant,tooltipText:ey(this.__props.queryText??"",ZW)})}getTextContent(){switch(this.__props.variant){case"space":return"";case"shortcut":return this.__props.queryText??"";case"tab":return this.__props.url?`[${this.__props.text||this.__props.url}](${this.__props.url})`:this.__props.text;default:return this.__props.text}}exportDOM(){const t=document.createElement("span");return t.setAttribute("data-mention-uuid",this.__props.uuid),t.setAttribute("data-mention-variant",this.__props.variant),t.setAttribute("data-mention-url",this.__props.url??""),t.setAttribute("data-mention-src",this.__props.src??""),t.setAttribute("data-mention-emoji",this.__props.emoji??""),t.textContent=this.__props.text,{element:t}}static importDOM(){return{span:t=>!t.hasAttribute("data-mention-uuid")||!t.hasAttribute("data-mention-variant")?null:{conversion:H4t,priority:4}}}}function eH(e){return Wo(new IT(e))}const jMe=[IT,VW,Ox],H2=[...yMe],mL=(()=>{try{return new RegExp("(?<![-.+():%])"),!0}catch{return!1}})(),RT=e=>{if(!e)return"";const n=xW({namespace:"text-value",nodes:jMe});return n.update(()=>{const r=lr();r.clear(),mL?dL(e,H2,void 0,!0):r.append(Sr().append(er(e)))},{discrete:!0}),n.read(()=>lr().getTextContent())},D0=e=>{if(!e||!e.root)return"";const t=n=>{let r="";if(n.type==="text"&&"text"in n)r=n.text;else if(n.type==="linebreak")r=`
`;else{if((n.type==="link"||n.type==="autolink")&&"url"in n)return r=`[${"children"in n&&Array.isArray(n.children)&&n.children.map(t).reduce((a,i)=>(a+=i,a),"")||""}](${n.url})`,r;if(n.type==="mention"){const a=n.props;if(a.variant==="tab")return r=`[${a.text||a.url}](${a.url})`,r;if(a.variant==="space")return r="",r;if(a.variant==="shortcut")return r=a.queryText??"",r}}return"children"in n&&Array.isArray(n.children)?n.children.map(t).reduce((s,a)=>(s+=a,s),r):r};return t(e.root)},rs={outerWrapper:{base:["bg-raised","w-full","outline-none","flex","items-center","border","rounded-2xl"],darkMode:"dark:bg-offset",transition:"duration-75 transition-all"},inputWrapper:{base:"overflow-hidden relative flex h-full w-full",expanded:["col-start-1","col-end-4","pb-3"],compact:["flex-grow","flex-shrink","p-sm","order-1"],disabled:"opacity-50 pointer-events-none cursor-not-allowed"},inputElement:["overflow-auto","max-h-[45vh]","lg:max-h-[40vh]","sm:max-h-[25vh]","outline-none","font-sans","resize-none","caret-super","selection:bg-super/30","selection:text-foreground","dark:selection:bg-super/10","dark:selection:text-super","text-foreground","bg-transparent","placeholder-quieter","placeholder:select-none","scrollbar-subtle"],attribution:{left:{base:["gap-sm","flex"],expanded:"col-start-1 row-start-2 -ml-two",compact:"order-0 ml-px"},right:{base:["flex","items-center","justify-self-end"],expanded:"col-start-3 row-start-2",compact:"order-2 mr-px"}},placeholder:{base:["absolute","inset-0","pointer-events-none","select-none","text-quieter"],compact:"p-sm"}},z4t=({isActive:e,isHighlighted:t})=>t?"border-super dark:border-super/85":e?"border-subtle":"border-subtler",G4t=({hasShadow:e,hasQuote:t})=>e&&!t?"shadow-sm dark:shadow-md shadow-super/10 dark:shadow-black/10":"",AMe=R.memo(({quote:e,onClear:t})=>e?o.jsx("div",{className:"py-sm bg-subtler dark:bg-base animate-slideDownAndFadeIn z-[49] mx-3 rounded-lg px-3",children:o.jsxs("div",{className:"gap-sm flex items-start",children:[o.jsx(F,{color:"light",className:"mt-px flex items-center pt-1",variant:"tinyRegular",children:o.jsx(le,{icon:C7e,size:"xs",className:"rotate-180"})}),o.jsx(F,{className:"py-xs line-clamp-3 flex-1 overflow-hidden text-ellipsis",variant:"tinyRegular",color:"light",children:e}),o.jsx("div",{className:"shrink-0",children:o.jsx(Te,{icon:It,onClick:t,size:"tiny",pill:!0,toolTip:"Clear quote"})})]})}):null);AMe.displayName="QuotePreview";const q4t=we(async()=>{const{ClearEditorPlugin:e}=await Q(async()=>{const{ClearEditorPlugin:t}=await import("./LexicalClearEditorPlugin.prod-DTmk1W38.js");return{ClearEditorPlugin:t}},__vite__mapDeps([102,3,1,6,5,4]));return{default:e}}),K4t=we(async()=>{const{HistoryPlugin:e}=await Q(async()=>{const{HistoryPlugin:t}=await import("./LexicalHistoryPlugin.prod-DviiX6lM.js");return{HistoryPlugin:t}},__vite__mapDeps([103,3,1,6,5,4]));return{default:e}}),Y4t=we(async()=>{const{OnChangePlugin:e}=await Q(async()=>{const{OnChangePlugin:t}=await import("./OnChangePlugin-CKTIqjwy.js");return{OnChangePlugin:t}},__vite__mapDeps([104,3,1,6,5,4]));return{default:e}}),Q4t=we(async()=>{const{EditorRefPlugin:e}=await Q(async()=>{const{EditorRefPlugin:t}=await import("./LexicalEditorRefPlugin.prod-Bp0aUw8p.js");return{EditorRefPlugin:t}},__vite__mapDeps([105,3,1,6,5,4]));return{default:e}}),X4t=we(async()=>{const{default:e}=await Q(async()=>{const{default:t}=await Promise.resolve().then(()=>W4t);return{default:t}},void 0);return{default:e}}),Z4t=we(async()=>{const{default:e}=await Q(async()=>{const{default:t}=await import("./AutoLinkPlugin-CrmoIWQ5.js");return{default:t}},__vite__mapDeps([106,3,1,6,5,4]));return{default:e}}),J4t=we(async()=>{const{default:e}=await Q(async()=>{const{default:t}=await import("./LinkPlugin-CqZgK-l8.js");return{default:t}},__vite__mapDeps([107,3,1,6,5,4]));return{default:e}}),ejt=we(async()=>{const{MarkdownShortcutPlugin:e}=await Q(async()=>{const{MarkdownShortcutPlugin:t}=await import("./LexicalMarkdownShortcutPlugin.prod-DSgMAtst.js");return{MarkdownShortcutPlugin:t}},__vite__mapDeps([108,3,1,6,5,4]));return{default:e}});function tjt(e,t){switch(t.type){case"SET_EXPANDED":return{...e,isExpanded:t.payload};case"SET_ACTIVE":return{...e,isActive:t.payload};case"SET_COMPOSING":return{...e,isComposing:t.payload};default:return e}}const bw=Yt("ResizableInputContext",{state:{isExpanded:!0,isActive:!1,isComposing:!1},dispatch:()=>{}}),IMe=(e,t,n,r,s)=>{f.useEffect(()=>{const a=n?15:40;e&&e.length>a||e?.includes(`
`)?s(!0):r!==(t==="expanded")&&s(t==="expanded")},[e,t,n,r,s])},PT=R.memo(({initialLayout:e="expanded",wrapperClass:t,size:n,hasShadow:r,isHighlighted:s,quote:a,setQuote:i,attachmentsList:l,inputWarnings:c,children:u,inputRef:d,ref:m})=>{const[p,h]=f.useReducer(tjt,{isExpanded:e==="expanded",isActive:!1,isComposing:!1}),{isActive:g,isExpanded:y}=p,x=f.useMemo(()=>{const w=z4t({isActive:g,isHighlighted:s}),C=G4t({hasShadow:r,hasQuote:!!a});return V(...rs.outerWrapper.base,rs.outerWrapper.darkMode,rs.outerWrapper.transition,t,w,C,{"px-0 pt-3 pb-3":n==="large"&&y,"py-sm px-0":n==="large"&&!y})},[g,t,r,a,n,y,s]),v=f.useCallback(()=>d?.current?.focus(),[d]),b=f.useCallback(w=>{const C=w.target,S=d?.current?.element();S&&C!==S&&!S.contains(C)&&w.preventDefault()},[d]),_=f.useCallback(()=>i?.(null),[i]);return o.jsx(bw.Provider,{value:{state:p,dispatch:h},children:o.jsx("div",{className:"relative rounded-2xl",ref:m,onClick:v,onMouseDownCapture:b,children:o.jsxs("div",{className:V(x,"gap-y-md grid items-center"),children:[(c||a||l)&&o.jsxs("div",{className:V({"pt-xs":!y},"gap-y-sm grid items-center"),children:[c,a&&o.jsx(AMe,{quote:a,onClear:_}),l]}),o.jsx("div",{className:V({"px-3":n==="large"&&!y,"px-3.5":n==="large"&&y,flex:!y,"grid-rows-1fr-auto grid grid-cols-3":y}),children:u})]})})})});PT.displayName="ResizeableInputWrapper";const njt=({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",minRows:a,maxRows:i,onChange:l,onClick:c,onBlur:u,onFocus:d,onKeyDown:m,onPaste:p,isMobileStyle:h,isMobileUserAgent:g,testId:y,id:x,ref:v})=>{const{state:b,dispatch:_}=f.useContext(bw),{isActive:w,isComposing:C,isExpanded:S}=b,E=f.useRef(w);E.current=w;const M=wp(n),k=f.useRef(null),N=f.useMemo(()=>V(rs.inputWrapper.base,{[rs.inputWrapper.expanded.join(" ")]:S,[rs.inputWrapper.compact.join(" ")]:!S,[rs.inputWrapper.disabled]:n}),[n,S]),P=f.useMemo(()=>V(...rs.inputElement,"w-full"),[]),L=f.useCallback(q=>{_({type:"SET_EXPANDED",payload:q})},[_]),O=f.useCallback(q=>{_({type:"SET_ACTIVE",payload:q})},[_]),A=f.useCallback(q=>{_({type:"SET_COMPOSING",payload:q})},[_]),j=f.useCallback(q=>{d?.(q.nativeEvent),O(!0)},[d,O]),T=f.useCallback(q=>{u?.(q.nativeEvent)!==!1&&O(!1)},[u,O]),I=f.useCallback(()=>{if(k.current){const q=k.current.value.length;k.current.focus(),k.current.setSelectionRange(q,q),k.current.scrollTop=k.current.scrollHeight}},[]),U=f.useCallback(q=>{if(!k?.current)return!0;const Y=k.current,{selectionStart:G,selectionEnd:J,value:K}=Y;if(G!==J)return!1;const te=document.createElement("div"),re=window.getComputedStyle(Y);te.style.position="absolute",te.style.visibility="hidden",te.style.whiteSpace=re.whiteSpace,te.style.wordWrap=re.wordWrap,te.style.font=re.font,te.style.padding=re.padding,te.style.border=re.border,te.style.width=Y.offsetWidth+"px",te.style.lineHeight=re.lineHeight,document.body.appendChild(te);try{const se=parseInt(re.lineHeight)||24,me=K.substring(0,G);te.textContent=me;const oe=te.offsetHeight;return q==="first"?oe<=se:(te.textContent=K,te.offsetHeight-oe<se)}finally{document.body.removeChild(te)}},[]),B=f.useCallback(q=>{c?.(q.nativeEvent)},[c]),D=f.useCallback(q=>{sb(q.nativeEvent,{isMobileUserAgent:g,isComposing:C,onKeyDown:m})},[m,C,g]),W=f.useCallback(()=>QU(A),[A]),z=f.useCallback(()=>XU(A),[A]),$=f.useCallback(q=>{p?.(q.nativeEvent)},[p]),X=f.useCallback(q=>{l?.(q.target.value)},[l]);return f.useImperativeHandle(v,()=>{const q=k.current;return q.focusAtEnd=I,q.isFocused=()=>E.current,q.inLine=U,q.append=Y=>{k.current&&(k.current.value+=Y)},q.scrollToEnd=()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},q.trim=()=>{k.current&&(k.current.value=k.current.value.trim())},q.element=()=>k.current,q},[I,U]),f.useEffect(()=>{!g&&k.current&&e&&(I(),O(!0))},[g,k,e,O,I]),f.useEffect(()=>{M!==n&&!n&&!g&&e&&setTimeout(()=>{k.current?.focus()},200)}),IMe(r,s,h,S,L),o.jsx("div",{className:N,children:o.jsx(Nye,{ref:k,placeholder:t,minRows:a,maxRows:i,value:r,onClick:B,onChange:X,onKeyDown:D,onBlur:T,onCompositionStart:W,onCompositionEnd:z,onFocus:j,onPaste:$,className:P,autoComplete:"off","data-test-id":y,rows:a,id:x,disabled:n,"data-1p-ignore":!0})})},pL="external-update",hL="focus",rjt="blur",sjt=new Set([pL,hL,rjt]),ajt=({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",json:a,minRows:i,onChange:l,onClick:c,onBlur:u,onFocus:d,onKeyDown:m,onPaste:p,isMobileStyle:h,isMobileUserAgent:g,testId:y,id:x,namespace:v="ResizableLexicalInput",mentionTypeaheadOptions:b=fe,onMentionMenuOpen:_,onMentionMenuClose:w,onTriggerTypeahead:C,ref:S})=>{const E=f.useRef(null),[M,k]=f.useState(null),{state:N,dispatch:P}=f.useContext(bw),{isActive:L,isComposing:O,isExpanded:A}=N,j=f.useRef(O),T=f.useRef(L),I=f.useRef(""),U=f.useRef(null),B=f.useRef(e),D=f.useRef(null),W=f.useRef(l),z=f.useRef(c),$=f.useRef(u),X=f.useRef(d),q=f.useRef(m),Y=f.useRef(p);W.current=l,z.current=c,$.current=u,X.current=d,q.current=m,Y.current=p,j.current=O,T.current=L,B.current=e;const G=wp(n),J=f.useMemo(()=>V(rs.inputWrapper.base,{[rs.inputWrapper.expanded.join(" ")]:A,[rs.inputWrapper.compact.join(" ")]:!A}),[A]),K=f.useMemo(()=>V(...rs.inputElement,"size-full"),[]),te=f.useMemo(()=>V(...rs.placeholder.base,{[rs.placeholder.compact]:!A}),[A]),re=f.useCallback(Le=>P({type:"SET_EXPANDED",payload:Le}),[P]),se=f.useCallback(Le=>P({type:"SET_ACTIVE",payload:Le}),[P]),me=f.useCallback(Le=>P({type:"SET_COMPOSING",payload:Le}),[P]),oe=f.useCallback(Le=>{ne.error(Le)},[]),ge=f.useCallback(Le=>{X.current?.(Le),se(!0)},[se]),xe=f.useCallback(Le=>{$.current?.(Le)!==!1&&se(!1)},[se]),ye=f.useCallback(Le=>{Y.current?.(Le)},[]),_e=f.useCallback(Le=>{z.current?.(Le)},[]),be=f.useCallback((Le,ot,vt)=>{const Rt=[...vt];let jt;if(Rt.length>0&&Rt.every(dn=>sjt.has(dn)))if(Rt.includes(hL)){if(jt=D0(Le.toJSON()),jt===I.current)return}else return;jt===void 0&&(jt=D0(Le.toJSON())),I.current=jt??"",U.current=Le.toJSON(),W.current?.(I.current,U.current)},[]),Ne=f.useCallback(()=>me(!0),[me]),Ee=f.useCallback(()=>me(!1),[me]),Re=f.useCallback(Le=>{sb(Le,{isMobileUserAgent:g,isComposing:j.current,onKeyDown:q.current})},[g]),Ae=f.useCallback(()=>M?.update(()=>{QO(hL),lr().selectEnd()}),[M]),st=f.useCallback(Le=>M?.update(()=>{const ot=lr(),vt=er(Le),Rt=ot.getLastChild();if(Ld(Rt))Rt.append(vt);else throw new Error("Last child is not a paragraph node");ot.selectEnd()}),[M]),it=f.useCallback(()=>M?.update(()=>{const ot=lr().getLastChild();if(Ld(ot)){const vt=ot.getLastChild();nt(vt)&&(vt.getTextContent().trimEnd()===""?vt.remove():vt.setTextContent(vt.getTextContent().trimEnd()));const Rt=ot.getFirstChild();nt(Rt)&&(Rt.getTextContent().trimStart()===""?Rt.remove():Rt.setTextContent(Rt.getTextContent().trimStart()))}else throw new Error("Last child is not a paragraph node")}),[M]),Se=f.useCallback(Le=>M?M.getEditorState().read(()=>{const ot=rt();if(!Be(ot))return!0;if(!ot.isCollapsed())return!1;const vt=window.getSelection();if(!vt||vt.rangeCount===0)return!0;const jt=vt.getRangeAt(0).getBoundingClientRect(),dn=M.getElementByKey(lr().getFirstChild()?.getKey()??"")?.getBoundingClientRect();if(!dn)return!0;const On=4;return Le==="first"?Math.abs(jt.top-dn.top)<=On:Math.abs(jt.bottom-dn.bottom)<=On}):!0,[M]),ue=f.useCallback(()=>{_?.()},[_]),ke=f.useCallback(()=>{w?.()},[w]),et=f.useCallback(Le=>{M||_e(Le.nativeEvent)},[M,_e]);f.useImperativeHandle(S,()=>({append:st,trim:it,focusAtEnd:Ae,isFocused:()=>T.current,inLine:Se,focus:()=>M?.focus(),blur:()=>M?.blur(),scrollIntoView:Le=>M?.getRootElement()?.scrollIntoView(Le),scrollToEnd:()=>M?.getRootElement()?.scrollIntoView({block:"end",behavior:"auto"}),element:()=>E?.current,get scrollHeight(){return M?.getRootElement()?.scrollHeight??0},get value(){return D0(M?.getEditorState()?.toJSON())},set value(Le){throw new Error("setValue is not supported in Lexical")},get json(){return M?.getEditorState().toJSON()}}),[st,Ae,it,M,Se]),IMe(r,s,h,A,re),f.useEffect(()=>{!g&&M&&e&&(Ae(),se(!0))},[g,e,se,M,Ae]),f.useEffect(()=>{G!==n&&!n&&!g&&e&&setTimeout(()=>Ae(),200)}),f.useEffect(()=>M?.registerRootListener((Le,ot)=>{Le&&(Le.addEventListener("focus",ge),Le.addEventListener("blur",xe),Le.addEventListener("compositionstart",Ne),Le.addEventListener("compositionend",Ee),Le.addEventListener("keydown",Re),Le.addEventListener("paste",ye),Le.addEventListener("click",_e)),ot&&(ot.removeEventListener("focus",ge),ot.removeEventListener("blur",xe),ot.removeEventListener("compositionstart",Ne),ot.removeEventListener("compositionend",Ee),ot.removeEventListener("keydown",Re),ot.removeEventListener("paste",ye),ot.removeEventListener("click",_e))}),[xe,_e,Ee,ge,Re,ye,Ne,M]),f.useEffect(()=>{M&&(r&&a&&!ys(a,U.current)?Promise.resolve().then(()=>{M.setEditorState(M.parseEditorState(a),{tag:pL}),B.current&&Ae(),U.current=M.getEditorState().toJSON(),I.current=D0(U.current)}):I.current!==r&&(M.update(()=>{QO(pL);const Le=lr();Le.clear(),mL?dL(r,H2,void 0,!0):Le.append(Sr().append(er(r))),B.current&&Le.selectEnd()},{discrete:!0}),U.current=M.getEditorState().toJSON(),I.current=D0(U.current)))},[r,a,M,Ae]),f.useEffect(()=>{const Le=M?.registerCommand(uc,Ke=>{const Xe=rt(),gt=Xe?.getNodes();return gt?.length===1&&Vn(gt[0])?(gt[0].remove(),!0):Be(Xe)?(Xe.deleteCharacter(Ke),!0):bu(Xe)?(Xe.deleteNodes(),!0):!1},Gc),ot=M?.registerCommand(py,Ke=>{const Xe=rt();return Be(Xe)?(Xe.deleteWord(Ke),!0):!1},Gc),vt=M?.registerCommand(hy,Ke=>{const Xe=rt();return Be(Xe)?(Xe.deleteLine(Ke),!0):!1},Gc),Rt=M?.registerCommand(VM,()=>{const Ke=rt();return Be(Ke)?(Ke.removeText(),!0):!1},Gc),jt=M?.registerCommand(Tm,Ke=>{const Xe=rt();if(typeof Ke=="string")Xe!==null&&Xe.insertText(Ke);else{if(Xe===null)return!1;const gt=Ke.dataTransfer;if(gt!==null)mse(gt,Xe,M);else if(Be(Xe)){const zt=Ke.data;return zt&&Xe.insertText(zt),!0}}return!0},Gc),dn=M?.registerCommand(pw,Ke=>{if("clipboardData"in Ke){const gt=Ke.clipboardData?.getData("text/plain");if(gt&&gt.length>um)return Ke.preventDefault(),!0}const Xe=rt();return Be(Xe)?(Ke.preventDefault(),M.update(()=>{const gt=rt(),zt=Fb(Ke,InputEvent)||Fb(Ke,KeyboardEvent)?null:"clipboardData"in Ke?Ke.clipboardData:null;if(zt&&gt){const{types:hn}=zt;if(hn.includes("text/html")||hn.includes("application/x-lexical-editor")||zt.files.length>0||!mL)mse(zt,gt,M);else{const zn=gt.clone(),Me=Sr();dL(zt.getData("text/plain"),H2,Me,!0);const Ze=[];Me.getChildren().forEach($e=>{Ld($e)?(Ze.length&&Ze.push(ro()),$e.getChildren().forEach(at=>{(nt(at)||Vn(at)||dc(at)||bo(at))&&Ze.push(at)})):Ze.push($e)}),_a(zn),nL(M,Ze,zn)}}},{tag:cEe}),!0):!1},Gc),On=M?.registerCommand(cW,Ke=>{const Xe=vy(Ke.target);if(Vn(Xe))return!1;const gt=rt();if(Be(gt)){const{anchor:zt}=gt,hn=zt.getNode();if(gt.isCollapsed()&&zt.offset===0&&!Cs(hn)&&PTt(hn).getIndent()>0)return Ke.preventDefault(),M.dispatchCommand(N5t,void 0);if(ITt&&navigator.language==="ko-KR")return!1}else if(!bu(gt))return!1;return Ke.preventDefault(),M.dispatchCommand(uc,!0)},Gc),yr=M?.registerCommand(uW,Ke=>{const Xe=vy(Ke.target);if(Vn(Xe))return!1;const gt=rt();return Be(gt)||bu(gt)?(Ke.preventDefault(),M.dispatchCommand(uc,!1)):!1},Gc);return M?.registerNodeTransform(Lc,Ke=>{Ke.getFormat()!==0&&Ke.setFormat(0)}),M?.registerNodeTransform(Lp,Ke=>{if(Ke.getChildrenSize()>1){const Xe=Ke.getChildren(),gt=Sr();Xe.forEach(zt=>{Pe(zt)&&(gt.getChildren().length&&gt.append(ro()),zt.getChildren().forEach(hn=>{(nt(hn)||Vn(hn)||dc(hn)||bo(hn))&&gt.append(hn)}))}),Ke.clear().append(gt).selectEnd()}}),M?.registerNodeTransform(Dp,Ke=>{const Xe=Ke.getParent();Xe instanceof Ox&&(Ke.getChildren().forEach(zt=>{Xe.append(zt)}),Ke.remove())}),()=>{Le?.(),ot?.(),vt?.(),Rt?.(),jt?.(),dn?.(),On?.(),yr?.()}},[M,ye]),f.useEffect(()=>{const Le=M?.registerCommand(gy,ot=>!ot||D.current&&!D.current.canSubmit()?!1:(sb(ot,{isMobileUserAgent:g,isComposing:j.current,onKeyDown:q.current}),ot.defaultPrevented),Gc);return()=>{Le?.()}},[M,ke,g]),f.useEffect(()=>{!n&&M&&!M.isEditable()&&M.setEditable(!0)},[n,M]);const Ge=f.useMemo(()=>({namespace:v,onError:oe,nodes:jMe,theme:{link:"text-super hover:underline",text:{strikethrough:"line-through"}},editable:!n}),[v,oe,n]),ft=f.useMemo(()=>({minHeight:`${(i??1)*1.5}em`}),[i]),Qe=f.useMemo(()=>o.jsx("div",{className:te,children:t}),[t,te]),Ve=f.useMemo(()=>o.jsx(p4t,{className:K,"aria-placeholder":t,placeholder:Qe,"data-test-id":y,id:x}),[x,t,Qe,K,y]);return f.useMemo(()=>o.jsx("div",{className:J,children:o.jsx("div",{className:"w-full",style:ft,ref:E,onClick:et,children:o.jsxs(l4t,{initialConfig:Ge,children:[o.jsx(A4t,{contentEditable:Ve,ErrorBoundary:Pr}),o.jsx(K4t,{}),o.jsx(q4t,{}),o.jsx(Y4t,{onChange:be,ignoreSelectionChange:!0}),o.jsx(Q4t,{editorRef:k}),o.jsx(X4t,{ref:D,onClose:ke,onOpen:ue,options:b,onTrigger:C}),o.jsx(Z4t,{}),o.jsx(J4t,{}),o.jsx(i4t,{}),o.jsx(ejt,{transformers:H2})]})})}),[J,ft,et,Ge,Ve,be,ke,ue,b,C])},OT=e=>{const t=e.useLexical?ajt:njt;return o.jsx(t,{...e})},RMe=R.memo(({children:e})=>{const{state:t}=f.useContext(bw),{isExpanded:n}=t;return e!==null?o.jsx("div",{className:V(...rs.attribution.left.base,{[rs.attribution.left.expanded]:n,[rs.attribution.left.compact]:!n}),children:e}):null});RMe.displayName="LeftAttribution";const PMe=R.memo(({isLoading:e,children:t})=>{const{state:n}=f.useContext(bw),{isExpanded:r}=n;return o.jsxs("div",{className:V(...rs.attribution.right.base,{[rs.attribution.right.expanded]:r,[rs.attribution.right.compact]:!r}),children:[e?o.jsx(F,{color:"light",className:"mr-3",children:o.jsx(le,{icon:Kue,size:"xs",className:"animate-spin"})}):null,t]})});PMe.displayName="RightAttribution";const OMe=R.memo(({value:e,suggestDropdownProps:t,ResizeableInputWrapperProps:n,ResizeableInputProps:r,leftAttributionComponents:s,rightAttributionComponents:a,syncUncontrolledOnce:i})=>{const l=r.onChange,c=r.ref,u=f.useRef(null),d=f.useRef(e);d.current=e;const m=f.useRef(null),p=f.useRef(!1),h=f.useCallback(g=>{u.current=g,c instanceof Function?c(g):c&&(c.current=g)},[c]);return f.useEffect(()=>{const g=u.current?.value;g&&g!==d.current&&(!i||!p.current)&&l?.(g),i&&(p.current=!0)},[l,i]),Sp("ask-input"),o.jsx(gx,{...t,floatingStrategy:"absolute",shouldEnableStacking:!0,portalTarget:m.current??void 0,value:e,children:o.jsxs(PT,{...n,ref:m,children:[o.jsx(OT,{...r,ref:h}),s,a]})})});OMe.displayName="AskInputBase";const Ef=R.memo(({size:e,inverse:t,incognitoType:n=Qd.DEFAULT})=>o.jsx(H,{variant:"background",className:V("w-lg text-foreground flex aspect-square shrink-0 items-center justify-center rounded-full border",{"!w-[24px]":e==="small","!w-[16px]":e==="tiny"},{"!bg-inverse !text-inverse border-0":t}),children:n===Qd.GOVERNMENT?o.jsx("svg",{width:e==="tiny"?"10":e==="small"?"12":"16",height:"auto",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fill:"currentColor",d:"M2.75 12.5h2.5v-7h1.5v7h2.5v-7h1.5v7h2.5v-7h1.5v7H16V14H0v-1.5h1.25v-7h1.5zM16 3v1.5H0V3l8-3z"})}):o.jsx("svg",{width:e==="tiny"?"12":e==="small"?"16":"24",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1927 4.54688C11.4375 4.71875 11.651 4.86458 12 4.86458C12.3453 4.86458 12.5529 4.72184 12.7993 4.55235L12.8073 4.54688L12.8084 4.54609C13.152 4.31187 13.5635 4.03125 14.5 4.03125C16.0885 4.03125 17.2083 6.30729 17.9375 8.6875C20.401 9.14062 22 9.875 22 10.6979C22 11.4427 20.6979 12.1094 18.6354 12.5677C18.6562 12.776 18.6667 12.9844 18.6667 13.1979C18.6667 14.0833 18.4948 14.9271 18.1823 15.6979H18.1965C17.2165 18.1697 14.8115 19.9169 12 19.9169C9.18854 19.9169 6.78355 18.1697 5.80356 15.6979H5.81771C5.50521 14.9271 5.33333 14.0833 5.33333 13.1979C5.33333 12.9844 5.34375 12.776 5.36458 12.5677C3.30208 12.1094 2 11.4427 2 10.6979C2 9.875 3.59896 9.14062 6.0625 8.6875C6.79167 6.30729 7.91146 4.03125 9.5 4.03125C10.4365 4.03125 10.848 4.31187 11.1916 4.54609L11.1927 4.54688ZM14.2708 15.6979H14.9167C16.0677 15.6979 17 14.7656 17 13.6146V12.8646C15.5312 13.0781 13.8229 13.1979 12 13.1979C10.1771 13.1979 8.46875 13.0781 7 12.8646V13.6146C7 14.7656 7.93229 15.6979 9.08333 15.6979H9.73437C10.5885 15.6979 11.3542 15.1458 11.625 14.3333C11.7448 13.9687 12.2604 13.9687 12.3802 14.3333C12.651 15.1458 13.4115 15.6979 14.2708 15.6979Z",fill:"currentColor"})})}));Ef.displayName="IncognitoIcon";const _w=R.memo(({className:e,color:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:t||"currentColor",viewBox:"0 0 66 24",className:e,children:[o.jsx("path",{d:"M33.569 17.032a1.919 1.919 0 0 1-.799-1.593c0-1.277.935-1.982 2.857-2.157l4.956-.473v.134c0 .784-.127 1.492-.378 2.105a3.958 3.958 0 0 1-1.012 1.456c-.834.753-1.993 1.15-3.354 1.15-.94 0-1.724-.215-2.27-.622Z"}),o.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M60.756 1.398c1.886.991 3.382 2.457 4.443 4.353 1.03 1.813 1.55 3.918 1.55 6.257 0 2.339-.521 4.444-1.55 6.257a10.934 10.934 0 0 1-2.475 3.027l-7.77-9.445 5.845-7.145V3.92h-3.135l-.076.096-4.626 5.837h-.009l-4.626-5.837-.075-.096h-3.136v.782l5.847 7.146-5.847 7.145v.782h3.136l.075-.095 4.626-5.837h.01l7.214 9.087-.017.01c-1.293.703-1.948 1.06-3.755 1.06H.25V1.862C.25.834 1.085 0 2.113 0h52.932c2.063 0 3.985.482 5.711 1.398ZM27.842 19.773V9.272c0-1.69-.55-3.073-1.59-4.002-.954-.851-2.28-1.301-3.834-1.301-1.375 0-2.54.306-3.463.91-.62.407-1.137.946-1.572 1.642a.1.1 0 0 1-.175-.008 4.35 4.35 0 0 0-1.35-1.605c-.864-.624-1.97-.94-3.285-.94-2.436 0-3.62.89-4.327 1.824-.059.077-.181.038-.181-.06V4.32H5.063v15.452h3.09V10.71c0-1.377.358-2.442 1.064-3.166.65-.665 1.597-1.017 2.74-1.017.967 0 1.712.26 2.215.772.488.499.736 1.221.736 2.148v10.326h3.09V10.71c0-1.377.358-2.442 1.063-3.165.65-.666 1.597-1.018 2.74-1.018.967 0 1.712.26 2.215.773.489.498.736 1.221.736 2.148v10.325h3.09Zm15.8 0 .001-10.003c0-1.821-.64-3.32-1.85-4.334-1.146-.96-2.862-1.468-4.72-1.468-1.856 0-3.49.467-4.723 1.35-1.213.87-2.003 2.096-2.254 3.557-.057.331-.04.736-.04.736h3.008l.027-.22c.122-.963.521-1.708 1.185-2.213.669-.51 1.587-.768 2.738-.768s2.038.27 2.636.8c.619.55.933 1.391.933 2.502v.682l-5.356.507c-3.577.344-5.547 1.997-5.547 4.656 0 1.375.564 2.531 1.63 3.346 1.023.781 2.436 1.194 4.088 1.194 1.43 0 2.66-.304 3.656-.903a5.177 5.177 0 0 0 1.408-1.237c.059-.075.179-.033.179.063v1.753h3.002Z"})]}));_w.displayName="MaxBadge";const tH=R.memo(({className:e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 51 24",className:e,children:[o.jsx("path",{d:"M35.069 7.954c-1.723 1.74-1.706 6.368 0 8.121 1.597 1.799 5.273 1.817 6.855 0 .873-.922 1.315-2.417 1.315-4.075 0-1.66-.442-3.144-1.317-4.048-1.584-1.853-5.256-1.834-6.853.002Z"}),o.jsx("path",{fillRule:"evenodd",d:"m48.958 5.715-.009-.015a10.792 10.792 0 0 0-4.387-4.301l-.01-.006C42.81.47 40.861 0 38.761 0H1.905C.866 0 .002.84 0 1.88V24h3.818V4.359h3.245v1.284c0 .132.161.196.252.1 2.987-3.275 9.077-2.319 11.216 1.723.725 1.234 1.092 2.759 1.092 4.534.102 4.584-3.017 8.265-7.55 8.235-2.031 0-3.629-.79-4.757-1.978a.146.146 0 0 0-.253.1V24h31.7c2.1 0 4.045-.468 5.78-1.39l.011-.005a10.795 10.795 0 0 0 4.394-4.302l.009-.016C49.98 16.483 50.5 14.368 50.5 12s-.52-4.482-1.543-6.285ZM30.112 7.42a24.93 24.93 0 0 1-.86-.003c-1.338-.02-2.845-.041-3.676.819-.549.54-.827 1.468-.827 2.759v8.809h-3.243V4.359h3.243v1.284c0 .148.194.202.271.077.314-.506.65-.852 1.012-1.05.616-.353 1.462-.532 2.514-.532h1.566V7.42Zm8.399 12.814c-4.77.033-8.068-3.395-7.973-8.235 0-1.716.348-3.21 1.033-4.442 2.714-5.062 11.157-5.068 13.852-.002.704 1.234 1.06 2.729 1.06 4.444.08 4.807-3.207 8.268-7.972 8.235Z",clipRule:"evenodd"}),o.jsx("path",{d:"M16.378 12c0 1.657-.442 3.153-1.314 4.075-1.583 1.816-5.26 1.798-6.857 0-1.706-1.753-1.722-6.381 0-8.121 1.597-1.836 5.27-1.855 6.854-.003.875.904 1.317 2.39 1.317 4.049Z"})]}));tH.displayName="ProBadge";const dv=R.memo(({isMax:e,className:t})=>e?o.jsx("div",{style:{"--mode-color":"oklch(var(--max-color))"},children:o.jsx(_w,{className:`text-max ${t||""}`})}):o.jsx("div",{style:{"--mode-color":"oklch(var(--super-color))"},children:o.jsx(tH,{className:`text-super ${t||""}`})}));dv.displayName="SearchModeBadge";function ou(e){switch(e){case ce.SEARCH:return de.PRO;case ce.RESEARCH:return de.ALPHA;case ce.STUDIO:return de.BETA;case ce.STUDY:return de.STUDY;default:return de.PRO}}const LMe=R.memo(e=>{const{isFollowUp:t,value:n,onChange:r,buttonSize:s="small",variant:a="primaryGhost"}=e,i=ux(),{$t:l}=Z(),c=jx(),u=Xa(),d=f.useMemo(()=>n!==void 0?Si[n]||ce.SEARCH:u,[n,u]),{isMax:m,hasAccessToProFeatures:p}=Et(),h=lt(),{gpt4Limit:g,pplxAlphaLimit:y,pplxBetaLimit:x}=rr(),{specialCapabilities:v}=ls(),{preferredSearchModels:b,actions:_}=_n(),w=Ca(),C=yT(),{isMaxUpsellEnabled:S}=Ku(),[E,M]=f.useState(()=>{const j=b[ce.SEARCH];return v.unlimitedProSearch?!0:j===de.DEFAULT?!1:h});E&&g===0&&!v.unlimitedProSearch&&M(!1);const{gateSearchModeSelection:k}=mw(),N=f.useCallback(()=>{k(de.BETA,!0)},[k]),P=f.useCallback(j=>k(j?de.PRO:de.DEFAULT)?(M(!1),_.setPreferredSearchModel(ce.SEARCH,de.DEFAULT),!1):(M(j),_.setPreferredSearchModel(ce.SEARCH,j?de.PRO:de.DEFAULT),j),[_,k]),L=f.useCallback(j=>{(j===ce.SEARCH||S)&&_.setPreferredSearchMode(j);let T;switch(j){case ce.SEARCH:{E?T=b[j]??ou(j):T=de.DEFAULT;break}case ce.RESEARCH:{S?T=b[j]??ou(j):T=ou(j);break}case ce.STUDIO:{S?T=b[j]??ou(j):T=ou(j);break}default:{T=de.DEFAULT;break}}if(!C(T)){k(T);return}r?r(T):c(T,j)},[_,S,E,r,b,c,C,k]),O=f.useMemo(()=>{function j(D,W){return{active:d===D,description:l(gs[D].description),icon:Yg[D],onClick(){L(D)},text:l(gs[D].name),type:"default",...W}}const T=D=>h&&D<=10&&!m,I=[];I.push(j(ce.SEARCH,{customDescriptionNode:p?void 0:o.jsxs(o.Fragment,{children:[o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(he,{...gs[ce.SEARCH].description})}),o.jsxs("div",{className:"gap-md flex flex-col",children:[o.jsx("hr",{className:"border-subtler bg-subtler -mr-5 mt-3"}),o.jsxs("div",{className:"gap-sm -mr-5 flex items-start justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("button",{onClick:()=>{k(v.unlimitedProSearch?de.PRO:de.SONAR)},type:"button",children:o.jsx(F,{className:"font-medium underline",color:"super",variant:"tiny",children:o.jsx(he,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})})}),o.jsx(dv,{isMax:m,className:"h-2.5"})]}),o.jsx(F,{className:"italic",color:"super",variant:"tinyRegular",children:o.jsx(he,{defaultMessage:"Advanced search with 10x the sources",id:"MZLTMODV37"})}),h&&g<=10&&o.jsx(F,{className:"mt-1 font-light",color:"super",variant:"tinyRegular",children:o.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:g}})})]}),o.jsx(DMe,{isProSearchEnabled:E,selectSearchModel:c,selectedSearchMode:d,setIsProSearchEnabled:P})]})]})]}),customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(F,{variant:"smallBold",children:o.jsx(he,{...gs[ce.SEARCH].name})}),o.jsx(dv,{isMax:m,className:"h-2.5"})]})}));const U=Math.min(g,y);I.push(j(ce.RESEARCH,{customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(F,{variant:"smallBold",children:o.jsx(he,{...gs[ce.RESEARCH].name})}),o.jsx(dv,{isMax:m||i(ce.RESEARCH),className:"h-2.5"})]}),customDescriptionNode:o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(he,{...gs[ce.RESEARCH].description})}),T(U)&&o.jsxs("div",{children:[o.jsx(F,{color:"super",variant:"tinyRegular",children:o.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:U}})}),i(ce.RESEARCH)&&o.jsx(pe,{onClick:N,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:l({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})}));const B=Math.min(g,x);return I.push(j(ce.STUDIO,{customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(F,{variant:"smallBold",children:o.jsx(he,{...gs[ce.STUDIO].name})}),o.jsx(dv,{isMax:m||i(ce.STUDIO),className:"h-2.5"})]}),customDescriptionNode:o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(he,{...gs[ce.STUDIO].description})}),T(B)&&o.jsxs("div",{children:[o.jsx(F,{color:"max",variant:"tinyRegular",children:o.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:B}})}),i(ce.STUDIO)&&o.jsx(pe,{onClick:N,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:l({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})})),I},[p,m,h,g,E,c,d,P,y,i,N,l,x,L,k,v.unlimitedProSearch]),A=f.useMemo(()=>o.jsx(le,{icon:Bn,size:"xs",className:V("-mx-xs -mb-two opacity-50",{"-ml-sm":t})}),[t]);return o.jsx(sn,{isMobileStyle:w,items:O,placement:"bottom-start",children:o.jsx(pe,{icon:Yg[d],size:s,text:t?o.jsx(o.Fragment,{children:""}):l(gs[d].name),variant:a,trailingComponent:A})})});LMe.displayName="SearchModeDropdownMenu";const DMe=R.memo(({isProSearchEnabled:e,selectSearchModel:t,selectedSearchMode:n,setIsProSearchEnabled:r})=>{const s=f.useCallback(i=>{r(i)&&n===ce.SEARCH&&t(i?de.PRO:de.DEFAULT)},[t,n,r]),a=f.useMemo(()=>({onClick(i){i.stopPropagation()}}),[]);return o.jsx(Ji,{active:e,onChange:s,size:"small",switchProps:a})});DMe.displayName="SwitchFactory";const FMe=()=>{const{base:e}=_t(),t=Ft();return t===(e||"/")||t?.startsWith("/welcome")||t?.startsWith("/finance")},Xse=10,UMe=R.memo(e=>{const{children:t,tooltipContent:n,triggeredSearchModeElement:r,isOpen:s,setIsOpen:a}=e,{showSuggestDropdown:i}=ea(),[l,c]=f.useState(!1),u=s!==void 0?s:l,d=a||c,m=f.useRef(0),[p,h]=vc(),[g,y]=vc(),v=f.useCallback(()=>{const{left:E=0,width:M=0}=r?.getBoundingClientRect()??{};return h.width===0||E===0?0:E-h.left+M/2-Xse/2},[h,r])();let b=v!==0;v!==0&&v!==m.current&&(b=m.current!==0,m.current=v);const _=f.useCallback(E=>{E||(m.current=0),d(E)},[d]),w=f.useCallback(E=>{E.preventDefault()},[]),C=f.useCallback(()=>{d(!1)},[d]),S=f.useCallback(E=>{E.preventDefault()},[]);return o.jsx(FF,{delayDuration:i?1e3:400,skipDelayDuration:100,children:o.jsxs(epe,{onOpenChange:_,open:u,children:[o.jsx(UF,{asChild:!0,className:"focus:outline-none",onBlur:C,onClick:w,onPointerDown:S,children:t}),o.jsx(VF,{children:o.jsx($F,{className:V("group/tooltip-content data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn ease-outExpo duration-300"),"data-color-scheme":"dark",sideOffset:4,side:"bottom",ref:p,children:o.jsxs(ve.div,{className:V("bg-base shadow-overlay flex w-72 flex-col rounded-lg"),animate:{height:y.height||void 0},transition:{duration:.05,ease:Jd},children:[o.jsxs(ve.div,{className:'absolute left-0 group-data-[side="bottom"]/tooltip-content:top-0 group-data-[side="top"]/tooltip-content:bottom-0',animate:{opacity:m.current?1:void 0,x:b?v:void 0},initial:{opacity:0},transition:{duration:.05,ease:Jd},style:{x:v,width:Xse},children:[o.jsx(bE,{className:"fill-inverse"}),o.jsx(bE,{className:"fill-inverse -translate-y-px scale-[99%]"})]}),o.jsx("div",{className:V("relative overflow-hidden"),children:o.jsx("div",{className:"whitespace-normal",ref:g,children:n})})]})})})]})})});UMe.displayName="SearchModeTooltip";const BMe={[ce.SEARCH]:de.DEFAULT,[ce.RESEARCH]:de.ALPHA,[ce.STUDIO]:de.BETA,[ce.STUDY]:de.DEFAULT},LT=R.memo(e=>{const{children:t,className:n,searchMode:r,...s}=e,{gateSearchModeSelection:a}=mw();return o.jsx("button",{className:V("group",n),onClick:()=>{a(BMe[r],!0)},type:"button",...s,children:o.jsx(F,{className:"!text-[var(--mode-color)] underline decoration-transparent transition-[text-decoration-color] group-hover:decoration-[var(--mode-color)]",variant:"smallBold",children:t})})});LT.displayName="SearchModeTooltipUpgradeButton";const DT=R.memo(e=>{const{badgeNode:t,color:n,enabledText:r,isEnabled:s,upgradeButton:a,isMaxUpsell:i=!1}=e;return o.jsxs("div",{className:"gap-sm flex items-center",style:{"--mode-color":n==="super"?"oklch(var(--super-color))":"oklch(var(--max-color))"},children:[t,s?o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(F,{className:"!text-[var(--mode-color)]",variant:"smallBold",children:r}),!i&&o.jsx(Ar,{className:"text-[var(--mode-color)]",size:18})]}):o.jsx(o.Fragment,{children:a})]})});DT.displayName="SearchModeTooltipFooter";const VMe=R.memo(e=>{const{searchMode:t}=e,{$t:n}=Z(),r=lt(),{hasAccessToProFeatures:s}=Et(),{gateSearchModeSelection:a}=mw(),i=ux(),{specialCapabilities:l}=ls(),c=f.useCallback(()=>{a(BMe[t],!0)},[a,t]);return i(t)?o.jsx(pe,{onClick:c,variant:"maxGold",size:"small",fullWidth:!0,text:n({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})}):l.unlimitedProSearch||l.unlimitedResearch||r&&s||t===ce.STUDY?null:o.jsx(pe,{onClick:c,variant:"primary",size:"small",fullWidth:!0,testId:"upgrade-to-pro-button",text:r?o.jsx(he,{defaultMessage:"Upgrade to Pro",id:"5N04mo7WNC"}):o.jsx(he,{defaultMessage:"Sign in for access",id:"w6mjA9GP58"})})});VMe.displayName="SearchModeTooltipUpsellButton";const ww=R.memo(e=>{const{footerNode:t,includeNewBadge:n,searchMode:r}=e,{$t:s}=Z();return o.jsxs("div",{className:"p-md flex flex-col gap-4",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"relative",children:[o.jsx(F,{className:"text-box-trim-both",variant:"smallExtraBold",children:s(gs[r].name)}),n&&o.jsx(H,{className:"absolute -right-1 -top-1 rounded-md px-2 py-1",variant:"subtle",children:o.jsx(F,{variant:"tiny",children:o.jsx(he,{defaultMessage:"New",id:"bW7B87wFFp"})})})]}),o.jsx(F,{variant:"small",className:"text-pretty",children:s(gs[r].description)})]}),o.jsx("hr",{className:"border-subtler bg-subtler"}),o.jsx("div",{className:"gap-xs flex flex-col",children:t}),o.jsx(VMe,{searchMode:r})]})});ww.displayName="SearchModeTooltipContentContainer";const FT=R.memo(({isMaxUpsell:e=!1})=>{const{isMax:t,isPro:n}=Et();return t||e?o.jsx(_w,{className:"text-max h-3"}):n?o.jsx(tH,{className:"text-super h-3"}):null});FT.displayName="SearchModeBadge";const nH=({isMax:e,isPro:t,isMaxUpsell:n=!1})=>e||n?"max":"super",$Me=R.memo(e=>{const{isToggleActive:t,onToggleChange:n}=e,r=lt(),{hasAccessToProFeatures:s,isMax:a,isPro:i}=Et(),{gpt4Limit:l}=rr(),{specialCapabilities:c,isGovernmentRequestOrigin:u}=ls(),d=!r&&!c.unlimitedProSearch?null:s||c.unlimitedProSearch?u?o.jsx(he,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):o.jsx(he,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):l>0&&l<=10?o.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:l}}):null,m=f.useMemo(()=>o.jsx(FT,{}),[]),p=f.useMemo(()=>({onClick(x){x.stopPropagation()}}),[]),h=f.useMemo(()=>o.jsx(LT,{searchMode:ce.SEARCH,children:o.jsx(he,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})}),[]),g=f.useMemo(()=>o.jsx(he,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[]),y=f.useMemo(()=>o.jsxs("div",{className:"flex",children:[o.jsxs("div",{className:"gap-xs flex w-full flex-col",children:[o.jsx(DT,{badgeNode:m,color:nH({isMax:a,isPro:i}),enabledText:g,isEnabled:s||c.unlimitedProSearch,upgradeButton:h}),o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(he,{defaultMessage:"Advanced search with 10x the sources; powered by top models",id:"IKFeqUH+w0"})}),d&&o.jsx(F,{color:"default",variant:"small",className:"mt-xs opacity-60",children:d})]}),!s&&!c.unlimitedProSearch&&o.jsx("div",{children:o.jsx(Ji,{active:t,onChange:n,switchProps:p})})]}),[m,g,s,a,i,t,n,d,p,h,c.unlimitedProSearch]);return o.jsx(ww,{footerNode:y,searchMode:ce.SEARCH})});$Me.displayName="ProSearchModeTooltip";const WMe=R.memo(()=>{const e=lt(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=Et(),{gpt4Limit:s,pplxAlphaLimit:a}=rr(),{specialCapabilities:i,isGovernmentRequestOrigin:l}=ls(),c=ux(),u=c(ce.RESEARCH),d=!e&&!i.unlimitedResearch||Math.min(s,a)<0||c(ce.RESEARCH)?null:i.unlimitedResearch&&l?o.jsx(he,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):n?o.jsx(he,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):a<=10?o.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:a}}):o.jsx(he,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),m=f.useMemo(()=>o.jsx(FT,{isMaxUpsell:u}),[u]),p=f.useMemo(()=>u?o.jsx(he,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(he,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[u]),h=f.useMemo(()=>o.jsx(LT,{searchMode:ce.RESEARCH,children:e?u?o.jsx(he,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(he,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}):o.jsx(he,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,u]),g=f.useMemo(()=>o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(DT,{badgeNode:m,color:nH({isMax:n,isPro:r,isMaxUpsell:u}),enabledText:p,isEnabled:t||i.unlimitedResearch,upgradeButton:h,isMaxUpsell:u}),o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(he,{defaultMessage:"In-depth reports with more sources, charts, and advanced reasoning",id:"9V0OqZ9HGl"})}),d&&o.jsx(F,{color:"default",variant:"small",className:"mt-xs opacity-60",children:d})]}),[m,p,t,n,r,u,d,h,i.unlimitedResearch]);return o.jsx(ww,{footerNode:g,searchMode:ce.RESEARCH})});WMe.displayName="ResearchModeTooltip";const HMe=R.memo(()=>{const e=lt(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=Et(),{gpt4Limit:s,pplxBetaLimit:a}=rr(),i=ux(),l=i(ce.STUDIO),c=(()=>{if(!e)return null;if(!t)return o.jsx(he,{defaultMessage:"Upgrade to get access",id:"eRbSgHbjUP"});const h=Math.min(s,a);return h<0||i(ce.STUDIO)?null:n?o.jsx(he,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):o.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:h}})})(),u=f.useMemo(()=>o.jsx(FT,{isMaxUpsell:l}),[l]),d=f.useMemo(()=>l?o.jsx(he,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(he,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[l]),m=f.useMemo(()=>o.jsx(LT,{searchMode:ce.STUDIO,children:e?l?o.jsx(he,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(he,{defaultMessage:"Access for subscribers only",id:"Ez3b/pzas/"}):o.jsx(he,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,l]),p=f.useMemo(()=>o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(DT,{badgeNode:u,color:nH({isMax:n,isPro:r,isMaxUpsell:l}),enabledText:d,isEnabled:t,upgradeButton:m,isMaxUpsell:l}),o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:l?o.jsx(he,{defaultMessage:"Draft, design, deliver your ideas.",id:"I1aIhz4l3D"}):o.jsx(he,{defaultMessage:"Turn your ideas into completed docs, slides, dashboards, and more",id:"WRu1tcOhoj"})}),c&&o.jsx(F,{color:"default",variant:"small",className:"mt-xs opacity-60",children:c})]}),[u,d,t,n,r,l,c,m]);return o.jsx(ww,{footerNode:p,searchMode:ce.STUDIO,includeNewBadge:!0})});HMe.displayName="StudioModeTooltip";const zMe=R.memo(()=>{const e=R.useMemo(()=>o.jsx("div",{children:o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(he,{defaultMessage:"Interactive learning and study tools that guide you toward deeper understanding beyond quick answers. ",id:"ZRKKxSc+oV"})})}),[]);return o.jsx(ww,{footerNode:e,searchMode:ce.STUDY,includeNewBadge:!0})});zMe.displayName="StudyModeTooltip";var rH="Radio",[ijt,GMe]=Mi(rH),[ojt,ljt]=ijt(rH),qMe=f.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:i,value:l="on",onCheck:c,form:u,...d}=e,[m,p]=f.useState(null),h=Hn(t,x=>p(x)),g=f.useRef(!1),y=m?u||!!m.closest("form"):!0;return o.jsxs(ojt,{scope:n,checked:s,disabled:i,children:[o.jsx(mn.button,{type:"button",role:"radio","aria-checked":s,"data-state":XMe(s),"data-disabled":i?"":void 0,disabled:i,value:l,...d,ref:h,onClick:Wt(e.onClick,x=>{s||c?.(),y&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})}),y&&o.jsx(QMe,{control:m,bubbles:!g.current,name:r,value:l,checked:s,required:a,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});qMe.displayName=rH;var KMe="RadioIndicator",YMe=f.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=ljt(KMe,n);return o.jsx(wa,{present:r||a.checked,children:o.jsx(mn.span,{"data-state":XMe(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});YMe.displayName=KMe;var cjt="RadioBubbleInput",QMe=f.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=f.useRef(null),l=Hn(i,a),c=ZU(n),u=i3(t);return f.useEffect(()=>{const d=i.current;if(!d)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const g=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(g)}},[c,n,r]),o.jsx(mn.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});QMe.displayName=cjt;function XMe(e){return e?"checked":"unchecked"}var ujt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],UT="RadioGroup",[djt,Omn]=Mi(UT,[U5,GMe]),ZMe=U5(),JMe=GMe(),[fjt,mjt]=djt(UT),eke=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:m,...p}=e,h=ZMe(n),g=q3(u),[y,x]=Cl({prop:a,defaultProp:s??null,onChange:m,caller:UT});return o.jsx(fjt,{scope:n,name:r,required:i,disabled:l,value:y,onValueChange:x,children:o.jsx(fwe,{asChild:!0,...h,orientation:c,dir:g,loop:d,children:o.jsx(mn.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...p,ref:t})})})});eke.displayName=UT;var tke="RadioGroupItem",nke=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=mjt(tke,n),i=a.disabled||r,l=ZMe(n),c=JMe(n),u=f.useRef(null),d=Hn(t,u),m=a.value===s.value,p=f.useRef(!1);return f.useEffect(()=>{const h=y=>{ujt.includes(y.key)&&(p.current=!0)},g=()=>p.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[]),o.jsx(mwe,{asChild:!0,...l,focusable:!i,active:m,children:o.jsx(qMe,{disabled:i,required:a.required,checked:m,...c,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:Wt(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:Wt(s.onFocus,()=>{p.current&&u.current?.click()})})})});nke.displayName=tke;var pjt="RadioGroupIndicator",rke=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=JMe(n);return o.jsx(YMe,{...s,...r,ref:t})});rke.displayName=pjt;const hjt=e=>{const t=Fn(e);if(!t)return 0;const n=parseInt(t);return isNaN(n)?1:n},Zse=(e,t)=>{rn(e,t.toString(),{expires:365})},sH=({cueKey:e,impressionsLimit:t,enabled:n})=>{const[r,s]=f.useState(!1),[a,i]=f.useState(0);f.useEffect(()=>{if(!n){s(!1);return}const c=hjt(e);i(c),c<t&&(s(!0),Zse(e,c+1),i(c+1))},[e,t,n]);const l=f.useCallback(()=>{Zse(e,t),i(t),s(!1)},[e,t]);return f.useMemo(()=>({shouldShow:r,currentCount:a,setReachedImpressions:l}),[r,a,l])},gjt={xs:"px-xs py-xxs",sm:"px-sm py-xs"},yjt=e=>{switch(e){case"common":return{background:"dark bg-base",titleText:"!text-light font-semibold",subtitleText:"!text-light mt-xxs opacity-90",arrow:"dark fill-base [&>path]:stroke-subtler dark:[&>path]:stroke-1 [clip-path:inset(1px_1px_0px_1px)]",borderRadius:"rounded-md"};default:return{background:"!bg-super !shadow-none",titleText:"!text-inverse",subtitleText:"!text-inverse mt-xs opacity-90",arrow:"fill-super",borderRadius:"rounded-md"}}},BT=R.memo(({cueKey:e,title:t,subtitle:n,children:r,enabled:s,impressionsLimit:a=1,variant:i="primary",size:l="xs",placement:c="bottom",sideOffset:u=10,className:d})=>{const[m,p]=f.useState(!1),{shouldShow:h}=sH({cueKey:e,impressionsLimit:a,enabled:s}),g=yjt(i),y=h&&!m,x=()=>!t&&!n?null:o.jsxs("div",{className:V(gjt[l],d),children:[t&&o.jsx(F,{variant:"tiny",className:g.titleText,children:t}),n&&o.jsx(F,{variant:"tiny",className:g.subtitleText,children:n})]}),v=f.useCallback(()=>{p(!0)},[]),b=f.useMemo(()=>({removeScroll:!1,animationClassName:"z-[2000]"}),[]);return o.jsx(lo,{content:x(),contentClassName:g.background,arrowClassName:g.arrow,borderRadius:g.borderRadius,isOpen:s&&y,onClose:v,placement:c,sideOffset:u,overlayProps:b,children:r})});BT.displayName="Cue";const aH=R.memo(e=>{const{className:t="",layoutKey:n="",options:r,value:s,backgroundClassName:a="",radioGroupIndicatorClassName:i="",variant:l="default",areCuesEnabled:c=!1,...u}=e,d=(()=>{switch(l){case"subtle":return"";case"default":return"bg-white dark:bg-black dark:bg-gradient-to-b dark:from-super/20 dark:to-super/20";default:Kt(l)}})(),{$t:m}=Z(),p=f.useMemo(()=>({study:m({defaultMessage:"Learn with Study Mode",id:"kJFaTtzXAA"})}),[m]),h=f.useMemo(()=>r.map(y=>{const x=y.value===s;return o.jsx(BT,{cueKey:`segmented-control-${y.value}`,enabled:!!p[y.value]&&c,placement:"top",title:p[y.value],children:o.jsxs(nke,{...y.elementProps,"aria-label":y.label,disabled:y.disabled??void 0,className:"segmented-control group/segmented-control relative focus:outline-none",value:y.value,children:[x&&o.jsx(rke,{asChild:!0,className:V("pointer-events-none absolute inset-0 z-0 block",d,"border-super dark:border-super/30 border","rounded-lg","shadow-super/30 dark:shadow-super/5 shadow-[0_1px_3px_0]","dark:text-super","transition-colors duration-300","group-focus-visible/segmented-control:border-dashed",i),children:o.jsx(ve.div,{layoutId:`segmented-control-active-indicator-${n}`,transition:{duration:.1}})}),y.children]})},y.value)}),[r,s,p,c,d,i,n]),g=(()=>{switch(l){case"subtle":return"bg-subtle";case"default":return"bg-super/10 dark:bg-black/[0.18]";default:Kt(l)}})();return o.jsxs(eke,{...u,className:V("group relative isolate flex h-fit",t),value:s,children:[o.jsx("div",{className:V("absolute inset-0",g,"dark:border dark:border-black/[0.04]","rounded-[10px]","transition-colors duration-300",a)}),o.jsx("div",{className:"p-two flex shrink-0 items-center",children:h})]})});aH.displayName="SegmentedControl";const iH=R.memo(e=>{const{className:t="",isActiveOption:n,icon:r,label:s,activeColor:a="text-super"}=e,i=V("transition-colors duration-300",{[a]:n,"text-quiet group-hover/segmented-control:text-foreground":!n});return o.jsxs("div",{className:V("relative z-10 flex h-8 min-w-9 items-center justify-center",{"py-xs gap-xs px-2.5":n||s},t),children:[r&&o.jsx(Iv,{buttonSize:"small",icon:r,iconClassName:V(i),showClicked:!1}),s&&o.jsx("div",{className:V("px-two font-sans text-sm leading-[1.125rem]",i),children:s})]})});iH.displayName="SegmentedControlOption";const ske=R.memo(e=>{const{isFollowUp:t,layoutKey:n,value:r,onChange:s,className:a,variant:i}=e,l=Xa(),c=f.useMemo(()=>r!==void 0?Si[r]||ce.SEARCH:l,[r,l]),{$t:u}=Z(),d=jx(),m=Ft(),{inputRef:p}=ea(),h=lt(),{gpt4Limit:g}=rr(),{specialCapabilities:y}=ls(),x=FMe(),v=jbe(),{currentOpenedModal:b}=wt(),{preferredSearchModels:_,actions:w}=_n(),{isMaxUpsellEnabled:C}=Ku(),[S,E]=f.useState(ce.SEARCH),M=f.useRef(null),[k,N]=f.useState(!1),P=f.useRef(null);f.useEffect(()=>()=>{P.current&&clearTimeout(P.current)},[]);const{gateSearchModeSelection:L}=mw(),[O,A]=f.useState(()=>_[ce.SEARCH]===de.DEFAULT?!1:h||y.unlimitedProSearch),j=f.useCallback(q=>L(q?de.PRO:de.DEFAULT)?(A(!1),w.setPreferredSearchModel(ce.SEARCH,de.DEFAULT),!1):(A(q),w.setPreferredSearchModel(ce.SEARCH,q?de.PRO:de.DEFAULT),q),[w,L]),T=f.useCallback(q=>{switch(q){case ce.SEARCH:return O?_[q]??ou(q):de.DEFAULT;case ce.RESEARCH:return _[q]??ou(q);case ce.STUDIO:return _[q]??ou(q);case ce.STUDY:return de.STUDY}},[O,_]),I=yT(),U=I(de.STUDY),B=f.useCallback(q=>{(q===ce.SEARCH||C)&&w.setPreferredSearchMode(q);const Y=T(q);I(Y)?(s?s(Y):d(Y,q),p.current?.focus(),N(!1)):L(Y)},[w,I,L,T,p,C,s,d,N]),D=f.useCallback(q=>{if(j(q),c===ce.SEARCH){const Y=q?de.PRO:de.DEFAULT;s?s(Y):d(Y)}},[s,d,c,j]),W=f.useMemo(()=>{const q=U?_Q:_Q.filter(G=>G!==ce.STUDY);function Y(G){const{searchMode:J}=G,K=T(J),te=q.length<3&&!t;return{children:o.jsx("div",{"data-testid":`search-mode-${J}`,children:o.jsx(iH,{label:te?o.jsx(he,{...gs[J].name}):void 0,icon:Yg[J],isActiveOption:c===J})}),elementProps:{"aria-disabled":I(K)===!1?!0:void 0,onPointerEnter(re){P.current&&clearTimeout(P.current),M.current=re.currentTarget,E(J),P.current=setTimeout(()=>{N(!0)},800)},onPointerLeave(){P.current&&(clearTimeout(P.current),P.current=null)},onClick(){P.current&&(clearTimeout(P.current),P.current=null),p.current?.focus(),N(!1)}},label:u(gs[J].name),value:J}}return q.map(G=>Y({searchMode:G}))},[T,t,u,c,I,p,U]);O&&g===0&&!y.unlimitedProSearch&&A(!1);let z;switch(S){case ce.SEARCH:{z=o.jsx($Me,{isToggleActive:O,onToggleChange:D});break}case ce.RESEARCH:{z=o.jsx(WMe,{});break}case ce.STUDIO:{z=o.jsx(HMe,{});break}case ce.STUDY:{z=o.jsx(zMe,{});break}}const $=f.useMemo(()=>o.jsx(Je,{initial:!1,mode:"popLayout",children:o.jsx(ve.div,{animate:{opacity:1},exit:{opacity:0},initial:{opacity:0},transition:{duration:.15},children:z},S)}),[z,S]),X=f.useCallback(q=>{q.target.tagName===document.activeElement?.tagName&&(M.current=q.target,E(c),N(!0))},[c]);return o.jsx(UMe,{tooltipContent:$,triggeredSearchModeElement:M.current,isOpen:k,setIsOpen:N,children:o.jsx(aH,{layoutKey:`segmented-search-mode-selector_${n??m}`,options:W,onFocus:X,onValueChange:B,value:c,className:a,variant:i,areCuesEnabled:x&&!v&&!b})})});ske.displayName="SegmentedSearchModeSelector";const ake="(pointer: coarse)";function Jse(){return typeof window>"u"?!1:window.matchMedia(ake).matches}function xjt(){const e=Ca(),[t,n]=f.useState(()=>Jse()||e);return f.useLayoutEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia(ake);function s(){n(Jse())}return r.addEventListener("change",s),s(),function(){r.removeEventListener("change",s)}},[]),t}const oH=R.memo(({isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,buttonSize:a,variant:i="default"})=>{const l=xjt(),c=Ca();if(l||c){const u=(()=>{switch(i){case"default":return"primaryGhost";case"subtle":return"common"}})();return o.jsx(LMe,{isFollowUp:e,value:n,onChange:r,buttonSize:a,variant:u})}else return o.jsx(ske,{isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,variant:i})});oH.displayName="SearchModeSelector";const vjt=({showIncognitoHint:e,showSearchModeSelector:t=!0,isFollowUp:n,layoutKey:r})=>{const s="ask-input-left-attributions",{$t:a}=Z(),{device:{isMacOS:i}}=Lt(),{isIncognito:l,incognitoType:c}=Qa({reason:s}),{isGovernmentRequestOrigin:u}=ls();return o.jsx(RMe,{children:o.jsx(jc,{children:o.jsx("div",{className:V("gap-xs flex items-center"),children:o.jsxs(Je,{initial:!1,mode:"popLayout",children:[l&&e&&o.jsx(ve.div,{className:"mr-xs flex shrink-0 items-center",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},children:o.jsx(En,{className:"max-w-[280px]",tooltipText:c===Qd.GOVERNMENT?a({defaultMessage:"Zero Data Usage active",id:"9i8r+oh3pt"}):a({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:u?void 0:i?["",";"]:["ctrl",";"],asChild:!0,children:o.jsx("span",{children:o.jsx(Ef,{size:"small",inverse:!0,incognitoType:c})})})}),t&&o.jsx(oH,{isFollowUp:n,layoutKey:r})]})})})})},ike=R.memo(vjt);ike.displayName="AskInputLeftAttribution";const oke=R.memo(({children:e,placement:t,isOpen:n,onOpen:r,onClose:s,connectorMenuItems:a,width:i="250px"})=>{const{isMobileStyle:l}=Ce(),c=f.useMemo(()=>({style:{width:i}}),[i]);return o.jsx(Je,{initial:!1,mode:"popLayout",children:o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:Jd},children:o.jsx(sn,{placement:t,items:a,isMobileStyle:l,isOpen:n,onOpen:r,onClose:s,boxProps:c,children:e})},"attachment-selector")})});oke.displayName="AttachmentSelector";var eae={};const lke=R.memo(({isOpen:e,fileType:t,size:n,tooltip:r,onOpen:s,onClose:a,onFilePickerOpen:i,onFilePickerClose:l,areFileAttachmentsAllowed:c,fileUploadErrorMessage:u,fileUploadWarningMessage:d,activeConnector:m=null,uploadedFiles:p=fe,handleStartUpload:h,handleFileInput:g,isBoxFilePickerOpen:y=!1,handleCloseBoxFilePicker:x,cleanupBoxFilePicker:v,microsoftFilePickerOptions:b=null,handleCloseMicrosoftFilePicker:_,handleSelectSharepointSite:w,isMicrosoftFilePickerOpen:C=!1,fileInputRef:S,isAudioVideoFilesEnabled:E=!1,setAttachmentErrorMessage:M})=>{const k="file-upload-button",{$t:N}=Z(),P=f.useRef(!1),{fileUploadUpsellTooltipOpen:L}=ea(),{setFileUploadUpsellTooltipOpen:O}=to(),A=Ca(),j=lt(),{uploadRateLimit:T}=rr(),{hasActiveSubscription:I}=Et(),U=T??(I?Wpe:$pe),B=f.useCallback(Ae=>Ae.preventDefault(),[]),{trackEvent:D}=je(),{referrer:W,referrerId:z}=bB({mode:"file"}),{connectorsMap:$}=M_({reason:k}),{enabledFileConnectors:X}=k_({reason:k}),{disabledFileConnectors:q}=vB({reason:k}),Y=f.useMemo(()=>$?.onedrive?.connected||$?.sharepoint?.connected,[$?.onedrive?.connected,$?.sharepoint?.connected]),G=f.useCallback(()=>{switch(t){case"image":return N({defaultMessage:"images",id:"HVUWg4/ofn"});case"all":return N({defaultMessage:"files",id:"l17U7PEF+6"});default:return N({defaultMessage:"text or PDF files",id:"XFh9ob267W"})}},[N,t]),J=f.useCallback(()=>{switch(t){case"image":return Tqe;case"all":return E?Rqe:Nqe;default:return E?Aqe:kqe}},[t,E]),K=f.useCallback(Ae=>{Ae?D("attempt connector file attachment",{connectorName:Ae}):D("opened file selector",{}),h?.(Ae)},[h,D]),{handleConnect:te}=Q3({reason:k}),[re,se]=f.useState(!1),me=f.useMemo(()=>{const Ae={type:"default",text:N({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),size:"small",icon:Eue,onMouseDown:B,onClick:()=>K("local")},st=X.map(it=>{const Se=it.name;return{type:"default",text:Ra(Se)??"",avatar:o.jsx("img",{src:nl(Se)??"",alt:Ra(Se),width:20,height:20}),onMouseDown:B,onClick:()=>K(Se),show:Xqe.includes(it.name)}});return q.length>0&&!A&&st.push({type:"nested",submenu:q.map(it=>({type:"default",size:"small",text:Ra(it.name),avatar:o.jsx("img",{src:nl(it.name)??"",alt:Ra(it.name),width:20,height:20}),rightElement:o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(le,{icon:xa,size:"sm"})}),onClick:()=>te({connectorName:it.name,customReferrer:W??void 0,customReferrerId:z??void 0})})),isSubmenuOpen:re,onSubmenuOpen:()=>se(!0),onSubmenuClose:()=>se(!1),text:N({defaultMessage:"Connect files",id:"geEGjFxpOA"}),icon:Ok,onMouseDown:B}),[Ae,...eae.NEXT_PUBLIC_IS_SIDECAR_BUILD?[]:st]},[N,X,q,B,K,re,te,W,z,A]),oe=f.useCallback(()=>{me.length<=1||p.length>0?K(m??void 0):s?.()},[me,p,m,K,s]),ge=f.useCallback(()=>{a?.()},[a]),xe=f.useMemo(()=>{if(r)return r;let Ae=`${N({defaultMessage:"Attach",id:"Ye0Clmvfec"})} ${G()}`;return j?c?U!=null&&U>0&&U<=100?Ae+=`. ${N({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:U})}`:Fn(c8)&&(Ae=N({defaultMessage:"Files attached to threads are retained for 7 days",id:"hTclTOMwb7"})):Ae=N({defaultMessage:"File attachments are disabled by your organization",id:"HmmaBNCmcH"}):Ae+=`. ${N({defaultMessage:"Sign in to attach files",id:"Ei6nUBg77Q"})}`,Ae},[r,U,j,N,G,c]);f.useEffect(()=>{const Ae=()=>{P.current&&(l?.(),P.current=!1)};return window.addEventListener("focus",Ae),()=>window.removeEventListener("focus",Ae)},[l]);const ye=f.useCallback(()=>{O(!1)},[O]),_e=f.useCallback(()=>_?.(),[_]),be=f.useCallback(()=>x?.(),[x]),Ne=f.useCallback(Ae=>w?.(Ae),[w]),Ee=f.useCallback(()=>v?.(),[v]),Re=f.useCallback(()=>{M?.("")},[M]);return o.jsx("div",{className:"flex items-center",children:o.jsx(En,{tooltipText:N({defaultMessage:"Attach files",id:"8d3exg7mte"}),open:L,offset:3,closeOnClick:!0,onClickOutsideTooltip:ye,asChild:!0,children:o.jsxs("div",{children:[o.jsx(oke,{placement:"bottom-start",connectorMenuItems:me,isOpen:e,onOpen:oe,onClose:ge,children:o.jsx(Te,{size:n,icon:Fk,disabled:!c,toolTip:xe})}),o.jsx("input",{type:"file",multiple:!0,onClick:()=>{P.current=!0,i?.()},ref:S,onChange:Ae=>{P.current=!1,g?.(Ae.target.files?Array.from(Ae.target.files):fe)},accept:J(),style:{display:"none"}}),Y&&!eae.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(IB,{options:b,isOpen:C,onClose:_e,onSelectSite:Ne}),$?.box?.connected&&o.jsx(uB,{isOpen:y,onClose:be,cleanupPicker:Ee}),o.jsx(Xd,{isVisible:!!u,variant:"error",message:u??"",handleClose:Re}),o.jsx(Xd,{isVisible:!!d&&!u,variant:"warning",message:d??"",timeout:4})]})})})});lke.displayName="FileUploadButton";var Br;(function(e){e[e.FOCUS=0]="FOCUS",e[e.SOURCES=1]="SOURCES",e[e.RECENCY=2]="RECENCY",e[e.PRO_MODEL_PREFERENCE=3]="PRO_MODEL_PREFERENCE",e[e.ATTACHMENTS=4]="ATTACHMENTS",e[e.SEARCH_MODEL_SELECTOR=5]="SEARCH_MODEL_SELECTOR"})(Br||(Br={}));const VT=R.memo(({children:e,focusItems:t,placement:n,width:r="200px",isMobileStyle:s,isOpen:a=!1,onOpen:i,onClose:l,menuType:c=Br.FOCUS,isSpace:u=!1})=>{const{$t:d}=Z(),{isMax:m}=Et(),p=Z(),h=f.useMemo(()=>{switch(c){case Br.RECENCY:return d({defaultMessage:"Choose recency",id:"qyxEklVz9W"});case Br.SOURCES:default:return d({defaultMessage:"Choose sources",id:"5HzLAl6K6z"})}},[c,d]),g=f.useCallback(_=>{_?.stopPropagation(),i?.()},[i]),y=f.useCallback(()=>{l?.()},[l]),x=f.useMemo(()=>o.jsx("div",{className:"gap-x-xs p-sm bg-subtle flex items-center justify-center rounded-t-xl text-center",children:o.jsx(F,{color:"light",variant:"tinyRegular",children:o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(le,{icon:yi,size:"xs"}),p.formatMessage({defaultMessage:"Search includes all context from this space.",id:"uhJN0zDnSy"})]})})}),[p]),v=f.useMemo(()=>({width:r}),[r]),b=f.useMemo(()=>o.jsxs(H,{className:V("flex flex-col",{"max-h-[37vh]":u,"max-h-[42vh]":!u,"max-super-override":m}),style:v,children:[u&&c===Br.SOURCES&&x,o.jsx(fl,{orientation:"vertical",showIndicatorOnHover:!1,className:V("min-h-0 flex-1 overflow-auto",{"p-xs":u&&c===Br.SOURCES}),children:o.jsx(Yd,{items:t,disableScrollArea:!0})})]}),[x,t,u,c,v,m]);return s?o.jsxs(o.Fragment,{children:[o.jsx(on,{title:h,titleTextVariant:"baseSemi",variant:"bottom-left-sheet",actionList:fe,isOpen:a,onClose:y,noPadding:!0,children:o.jsx(Yd,{textColor:"light",items:t})}),o.jsx("span",{onClick:g,children:e})]}):o.jsx(lo,{isFileSearchEnabled:!0,isOpen:a,placement:n,onClose:y,onOpen:g,avoidSizeCollisions:!1,contentClassName:u&&c===Br.SOURCES?"!p-0":"",content:b,hasInteractiveContent:!0,children:e})});VT.displayName="FocusDropdown";const cke=R.memo(({isOpen:e,onOpen:t,onClose:n})=>{const r="recency-switcher",{$t:s}=Z(),a=Z(),{isMobileStyle:i}=Ce(),l=_l(),{trackEvent:c}=je(),{sources:u,recency:d,setRecency:m}=rr(),p=Array.isArray(l?.slug)?l.slug[0]:l?.slug,{collection:h}=Oc({collectionSlug:p,reason:r}),g=h?.focused_web_config?.link_configs??fe,y=u&&u.includes("web"),x=u&&g.length>0,v=!y&&!x,_=u&&u.includes("crunchbase")?!0:v,w=f.useCallback(E=>{m(E),c("search recency click",{recency:E}),n()},[c,m,n]),C=f.useMemo(()=>[{value:null,label:s({defaultMessage:"All Time",id:"52UMW3b1Z0"})},{value:"DAY",label:s({defaultMessage:"Today",id:"zWgbGgjUUg"})},{value:"WEEK",label:s({defaultMessage:"Last Week",id:"P3YB9A5Yho"})},{value:"MONTH",label:s({defaultMessage:"Last Month",id:"cfMkrE1iIn"})},{value:"YEAR",label:s({defaultMessage:"Last Year",id:"7PhUtcTRXC"})}],[s]),S=f.useMemo(()=>C.map(E=>({type:"default",text:E.label,active:d===E.value,onClick:()=>w(E.value)})),[C,d,w]);return o.jsx(VT,{focusItems:S,placement:"bottom-start",width:"200px",isMobileStyle:i,isOpen:e,onOpen:t,onClose:n,menuType:Br.RECENCY,children:o.jsx(Te,{toolTip:a.formatMessage({defaultMessage:"Set recency for web search",id:"3/OG+oV8gT"}),size:"small",icon:_p,disabled:_})})});cke.displayName="RecencySwitcher";const bjt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"search-model-reasoning-toggle",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function lH(){const{variation:e,loading:t}=bjt(!1);return f.useMemo(()=>({isSearchModelReasoningToggleEnabled:e,isSearchModelReasoningToggleEnabledLoading:t}),[e,t])}const uke=(e,t)=>{const{value:n,loading:r}=qu({flag:"model-outage-on-model-selector-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},_jt=ee({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),wjt=ee({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"});function dke({reason:e,selectedSearchMode:t,currentModel:n,onModelSelect:r,isRewrite:s}){const{$t:a}=Z(),{organization:i}=kn({reason:e}),l=co(),c=Ca(),u=i?.settings?.disabled_model_preferences??fe,{isMax:d}=Et(),{isMaxUpsellEnabled:m}=Ku(),{specialCapabilities:p}=ls(),h=f.useRef(null),{variation:g}=uke({}),y="left",x=0,v=f.useCallback(w=>{![de.PRO,de.ALPHA,de.BETA].includes(w)&&n!==void 0&&t===ce.SEARCH&&(h.current=w),r(w)},[r,t,n]),{menuItems:b,selectOptions:_}=f.useMemo(()=>{const w=c?"description":"tooltipText";function C(N,P){const L=[],O=[];return N.filter(A=>!P?.includes(A.search_model)).forEach(A=>{if(u.includes(A.search_model))return;const j=!!g[A.search_model];let T,I="super";A.subscription_tier===jn.MAX?(T=a({defaultMessage:"max",id:"+LmzMnWE+j"}),I="maxBorder"):A.has_new_tag&&(T=a({defaultMessage:"new",id:"qlTe+eC7Ec"}),I="superBorder");const U={active:n===A.search_model,[w]:a(qr[A.search_model]?.description),tooltipLayout:y,tooltipDelayDuration:x,bottomElement:j?o.jsx("div",{children:o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"red",children:A.search_model===de.O3?a({defaultMessage:"This model will be deprecated on Oct 1",id:"PK03c9DN95"}):a({defaultMessage:"Temporary degraded performance",id:"Kc/pdbXoxJ"})})}):void 0,onClick(){if(m&&!d&&(t===ce.STUDIO||t===ce.RESEARCH||t===ce.SEARCH&&A.subscription_tier===jn.MAX&&!p.maxModelSelection)){l({origin:s?De.RETRY_BUTTON:De.MODEL_SELECTOR,pitchMessage:{title:a(_jt,{searchMode:a(gs[t].name)}),description:a(wjt)}});return}v(A.search_model)},size:"tiny",type:"default",text:a(qr[A.search_model].name),badge:T,badgeVariant:I},B={value:A.search_model,label:a(qr[A.search_model].name)},D=m&&!d&&A.subscription_tier===jn.MAX;L.push(U),D||O.push(B)}),{menuItems:L,selectOptions:O}}const S=[],E=[],M=Cjt(),k=M.filter(N=>!u.includes(N.search_model))[0]?.search_model||de.SONAR;if(t===ce.SEARCH){const N={selected:n===de.PRO,[w]:a({defaultMessage:"Selects the best model for each query",id:"TFsbkdJ4zc"}),onClick(){if(n===de.PRO){const O=h.current;v(O||k)}else v(de.PRO)},size:"tiny",text:a(qr[de.PRO].name),type:"toggle",tooltipLayout:y,tooltipDelayDuration:x},P={value:de.PRO,label:a(qr[de.PRO].name)};if(!s)S.push(N,{type:"separator",show:!0}),E.push(P);else{const O={active:n===de.ALPHA,[w]:a({defaultMessage:"In-depth reports on complex topics",id:"j7wjX6Ljpq"}),onClick(){v(de.ALPHA)},size:"tiny",text:a({defaultMessage:"Research",id:"JEe7dVso7F"}),type:"default",tooltipLayout:y,tooltipDelayDuration:x},A={value:de.ALPHA,label:a(qr[de.ALPHA].name)};S.push(O),E.push(A);const j={active:n===de.BETA,[w]:a({defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}),onClick(){v(de.BETA)},size:"tiny",text:a({defaultMessage:"Labs",id:"ylFNoY79wa"}),type:"default",tooltipLayout:y,tooltipDelayDuration:x},T={value:de.BETA,label:a(qr[de.BETA].name)};S.push(j,{type:"separator",show:!0}),E.push(T)}const L=C(M,!p.maxModelSelection&&!m&&!d?M.filter(O=>O.subscription_tier===jn.MAX).map(O=>O.search_model):void 0);S.push(...L.menuItems),E.push(...L.selectOptions)}return{menuItems:S,selectOptions:E}},[u,a,t,n,g,d,m,l,v,s,c,p.maxModelSelection]);return f.useMemo(()=>({menuItems:b,selectOptions:_}),[b,_])}const Cjt=()=>[...tge],Sjt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"enable-sonar-internal-testing-in-web-frontend",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Ejt=[{label:qr[de.SONAR].name,search_model:de.SONAR,reasoning_model:null,has_new_tag:!1,subscription_tier:jn.PRO},{label:qr[de.CLAUDE_2].name,search_model:de.CLAUDE_2,reasoning_model:de.CLAUDE_3_7_SONNET_THINKING,has_new_tag:!1,subscription_tier:jn.PRO},{label:qr[de.GPT_5].name,search_model:de.GPT_5,reasoning_model:de.GPT_5_THINKING,has_new_tag:!1,subscription_tier:jn.PRO},{label:qr[de.O3].name,search_model:de.O3,reasoning_model:null,has_new_tag:!1,subscription_tier:jn.PRO},{label:qr[de.GEMINI_2_FLASH].name,search_model:null,reasoning_model:de.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:jn.PRO},{label:qr[de.GROK_4].name,search_model:null,reasoning_model:de.GROK_4,has_new_tag:!1,subscription_tier:jn.PRO},{label:qr[de.CLAUDE_4_1_OPUS].name,search_model:de.CLAUDE_4_1_OPUS,reasoning_model:de.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,subscription_tier:jn.MAX},{label:qr[de.O3_PRO].name,search_model:null,reasoning_model:de.O3_PRO,has_new_tag:!1,subscription_tier:jn.MAX}],gL=e=>{const t=[...Ejt];if(e){const n={label:qr[de.PPLX_SONAR_INTERNAL_TESTING].name,search_model:de.PPLX_SONAR_INTERNAL_TESTING,reasoning_model:null,has_new_tag:!1,subscription_tier:jn.PRO},r={label:qr[de.PPLX_SONAR_INTERNAL_TESTING_V2].name,search_model:de.PPLX_SONAR_INTERNAL_TESTING_V2,reasoning_model:null,has_new_tag:!1,subscription_tier:jn.PRO};t.push(n),t.push(r)}return t},Mjt=e=>gL(e).reduce((t,n)=>(n.search_model&&(t[n.search_model]=n),n.reasoning_model&&(t[n.reasoning_model]=n),t),{});function fke(e,t){return e in t}const tae=(e,t)=>fke(e,t)?t[e]:{label:qr[e].name,search_model:e,reasoning_model:e,has_new_tag:!1,subscription_tier:jn.PRO},q6=pt({best:{defaultMessage:"Best",id:"PzlMqGwwkm"},reasoning:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},max:{defaultMessage:"max",id:"+LmzMnWE+j"},new:{defaultMessage:"new",id:"qlTe+eC7Ec"}}),kjt=ee({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),Tjt=ee({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"}),Njt=ee({defaultMessage:"This model will be deprecated on Oct 1",id:"PK03c9DN95"}),jjt=ee({defaultMessage:"Temporary degraded performance",id:"Kc/pdbXoxJ"}),Ajt=e=>{const{label:t,searchModel:n,reasoningModel:r,selected:s,badge:a,notice:i,onChange:l}=e,{$t:c}=Z(),u=f.useCallback(()=>{const y=r??n;if(!y){g1.error("ModelMenuItem: No model to select",{searchModel:n,reasoningModel:r});return}l(y)},[l,n,r]),d=f.useCallback(()=>{!r||!n||l(r===s?n:r)},[l,r,n,s]),m=!n,p=s===n||s===r,h=c({defaultMessage:"Model does not have a fast model and reasoning will be used",id:"yeyas85Pgq"}),g=m?h:void 0;return o.jsxs(H,{variant:p?"subtler":void 0,className:"rounded-lg",children:[o.jsx(JU,{text:t,role:"menuitem",active:p,onClick:u,...a}),p&&i&&o.jsx(F,{className:"max-w-44 px-2 py-1 text-left",variant:"tinyRegular",color:"red",children:i}),p&&r&&o.jsx(eB,{selected:s===r,text:c({defaultMessage:"With reasoning",id:"xwd+5Brxnr"}),textClassName:"text-quiet",role:"menuitem",active:s===r,onClick:d,disabled:m,tooltipText:g})]})},fv=de.PRO,mke=({currentModel:e,onModelSelect:t,origin:n,searchMode:r=ce.SEARCH})=>{const s="use-model-menu-items-with-reasoning",{$t:a}=Z(),{isMax:i}=Et(),{organization:l}=kn({reason:s}),{isMaxUpsellEnabled:c}=Ku(),{specialCapabilities:u}=ls(),d=co(),m=f.useRef(null),{variation:p}=Sjt(!1),h=f.useMemo(()=>Mjt(p),[p]),{variation:g}=uke({}),y=u.maxModelSelection||c||i,x=l?.settings?.disabled_model_preferences??fe,v=f.useCallback(E=>{const M=tae(E,h);return c&&!i&&M.subscription_tier===jn.MAX&&!u.maxModelSelection},[c,i,u.maxModelSelection,h]),b=f.useCallback(()=>{d({origin:n??De.MODEL_SELECTOR,pitchMessage:{title:a(kjt,{searchMode:a(gs[r].name)}),description:a(Tjt)}})},[d,a,n,r]),_=f.useCallback(E=>{m.current=E,t(E)},[t]),w=f.useCallback(()=>{const E=gL(p).at(0)?.search_model??de.SONAR;t(e===fv?m.current||E:fv)},[e,t,p]),C=f.useCallback(E=>E&&x.includes(E),[x]),S=f.useMemo(()=>{const E=L=>{if(L.subscription_tier===jn.MAX)return{badge:a(q6.max),badgeVariant:"maxBorder"};if(L.has_new_tag)return{badge:a(q6.new),badgeVariant:"superBorder"}},M={active:e===fv,onClick:w,size:"tiny",text:a(q6.best),type:"default"},k={type:"separator",show:!0},P=gL(p).filter(L=>!(!y&&L.subscription_tier===jn.MAX||C(L.search_model)&&C(L.reasoning_model))).map(L=>{const O=C(L.search_model)?null:L.search_model,A=C(L.reasoning_model)?null:L.reasoning_model;if(!O&&!A)return null;const j=!!(O&&g[O]||A&&g[A]),T=O===de.O3||A===de.O3,I=j?a(jjt):T?a(Njt):void 0;return{type:"custom",text:a(L.label),children:R.createElement(Ajt,{label:a(L.label),selected:e,searchModel:O,reasoningModel:A,notice:I,onChange:U=>{if(v(U)){b();return}_(U)},badge:E(L)})}}).filter(L=>L!==null);if(!fke(e,h)&&e!==fv){const L=tae(e,h);P.push({type:"default",active:e===L.search_model,text:a(L.label),value:e,onClick:()=>_(e),...E(L)})}return n===De.RETRY_BUTTON?[k,M,...P]:[M,k,...P]},[a,n,e,y,C,g,v,b,_,w,p,h]);return f.useMemo(()=>({menuItems:S}),[S])},Ijt=pt({chooseModel:{defaultMessage:"Choose a model",id:"fXlc3idTcy"}}),pke=f.memo(({isOpen:e,onOpen:t,onClose:n,selectedModel:r,onModelChange:s})=>{const{$t:a}=Z(),{isMax:i}=Et(),{onActiveMenuChange:l}=to(),{activeMenu:c}=ea(),u=Xa(),{configuredModel:d}=rr(),m=jx(),{isMobileStyle:p}=Ce(),h=u===ce.SEARCH,g=f.useCallback(P=>{m(P,u)},[m,u]),y=f.useCallback(()=>{l(Br.SEARCH_MODEL_SELECTOR)},[l]),x=f.useCallback(()=>{l(null)},[l]),v=r??d,b=s??g,_=e??c===Br.SEARCH_MODEL_SELECTOR,w=t??y,C=n??x,E=!!Ut()?.get("openSearchModeSelector");f.useEffect(()=>{E&&y()},[E,y]);const{menuItems:M}=mke({currentModel:v,onModelSelect:b,searchMode:u}),k=v===fv,N=f.useMemo(()=>({className:V("max-h-[40vh]",{"max-super-override":i})}),[i]);return o.jsx(Je,{initial:!1,mode:"popLayout",children:h&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:o.jsx(sn,{placement:"bottom-end",boxProps:N,items:M,isMobileStyle:p,isOpen:_,onOpen:w,onClose:C,children:o.jsx(Te,{extraCSS:"max-w-24 sm:max-w-none",icon:ID,size:"small",textClassName:"text-[0.8125rem]",toolTip:a(k?Ijt.chooseModel:qr[v].name),variant:k?"common":"super"})})},"search-model-selector")})});pke.displayName="SearchModelSelectorWithReasoning";const Rjt=({selectedModel:e,onModelChange:t}={})=>{const n="search-model-selector",{isMobileStyle:r}=Ce(),{$t:s}=Z(),{onActiveMenuChange:a}=to(),{activeMenu:i}=ea(),l=Xa(),{configuredModel:c}=rr(),u=jx();lH();const d=e||c,{isMax:m}=Et(),p=l===ce.SEARCH,h=[de.DEFAULT,de.PRO,de.ALPHA,de.BETA].includes(d),y=!!Ut()?.get("openSearchModeSelector");f.useEffect(()=>{y&&a(Br.SEARCH_MODEL_SELECTOR)},[y,a]);const x=f.useCallback(C=>{u(C,l)},[u,l]),{menuItems:v}=dke({reason:n,selectedSearchMode:l,currentModel:d,onModelSelect:t||x}),b=f.useCallback(()=>{a(Br.SEARCH_MODEL_SELECTOR)},[a]),_=f.useCallback(()=>{a(null)},[a]),w=f.useMemo(()=>({className:V("max-h-[40vh]",{"max-super-override":m})}),[m]);return o.jsx(Je,{initial:!1,mode:"popLayout",children:p&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:o.jsx(sn,{placement:"bottom-end",boxProps:w,items:v,isMobileStyle:r,isOpen:i===Br.SEARCH_MODEL_SELECTOR,onOpen:b,onClose:_,children:o.jsx(Te,{extraCSS:"max-w-24 sm:max-w-none",icon:ID,size:"small",textClassName:"text-[0.8125rem]",toolTip:s(h?{defaultMessage:"Choose a model",id:"fXlc3idTcy"}:qr[d].name),variant:h?"common":"super"})})},"search-model-selector")})},hke=R.memo(({selectedModel:e,onModelChange:t})=>{const{isSearchModelReasoningToggleEnabled:n}=lH();return n?o.jsx(pke,{selectedModel:e,onModelChange:t}):o.jsx(Rjt,{selectedModel:e,onModelChange:t})});hke.displayName="SearchModelSelector";const gke=R.memo(()=>{const{isMaxAssistantMode:e,actions:t}=_n(),n=JOe(),[r,s]=f.useState(!n),a=f.useRef(null),i=f.useRef(null),l=f.useCallback(()=>{t.setIsMaxAssistantModeEnabled(!e)},[t,e]),c=f.useCallback(()=>{s(!r)},[r]);f.useEffect(()=>{r&&eLe()},[r]),f.useEffect(()=>{const d=m=>{r&&i.current&&!i.current.contains(m.target)&&a.current&&!a.current.contains(m.target)&&s(!1)};return r&&document.addEventListener("mousedown",d,!0),()=>{document.removeEventListener("mousedown",d,!0)}},[r]);const u=f.useMemo(()=>o.jsxs("div",{"data-color-scheme":"dark",ref:i,className:V("bg-base absolute bottom-full left-1/2 z-50 mb-1 -translate-x-1/2 px-4 py-3","shadow-overlay w-72 rounded-lg"),children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{color:"default",variant:"baseSemi",children:o.jsx(he,{defaultMessage:"Enable Max Assistant",id:"148Ehuq5Qh"})}),o.jsx(_w,{className:"text-max h-3"})]}),o.jsx("div",{className:"flex items-center gap-6",children:o.jsx(Ji,{active:e??!1,onChange:l,size:"default"})})]}),o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(he,{defaultMessage:"Thinks longer with deeper reasoning for complex workflows and questions.",id:"UOpEyLDsXA"})})]}),[e,l]);return o.jsxs("div",{className:"relative",ref:a,children:[o.jsx(Te,{size:Qt.small,variant:"common",icon:$d,onClick:c}),r&&u]})});gke.displayName="SidecarMoreMenuButton";const yke=R.memo(({handleFileInput:e})=>{const{$t:t}=Z(),{sidecarSourceTab:{url:n}}=cs(),r=Jn();f.useEffect(()=>r.subscribeScreenshotCaptured(a=>{e?.([a],"local",YF)}),[r,e]);const s=f.useCallback(async()=>{r.captureSourceTabScreenshotV2({sourceTabUrl:n})},[r,n]);return o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Te,{onClick:s,size:Qt.small,variant:"common",toolTip:t({defaultMessage:"Screenshot",id:"9a+SKtXKhe"}),icon:S7e})})});yke.displayName="SidecarScreenshotButton";const xke=({serverName:e,iconUrl:t,size:n="md",border:r=!1})=>t?o.jsx("img",{src:t,alt:e,className:V("object-contain",n==="sm"&&"size-5",n==="md"&&"p-xs size-11",n==="lg"&&"p-sm size-14",n==="xl"&&"p-xs size-12",r&&"ring-subtlest rounded-md ring-1")}):o.jsxs("span",{className:V("flex flex-col items-center justify-center font-medium leading-none",n==="sm"&&"size-5 text-xs",n==="md"&&"p-xs size-11 text-sm",n==="lg"&&"p-sm size-14 text-sm",n==="xl"&&"p-xs size-12 text-sm",r&&"border-subtlest bg-subtler rounded-lg border"),children:[o.jsx("span",{children:e.slice(0,2).toUpperCase()}),o.jsx("span",{className:"font-mono text-[6px]",children:"MCP"})]}),Pjt=()=>typeof window<"u"&&window.location?.origin?window.location.origin:"https://www.perplexity.ai",nae=e=>{const t=Pjt();return q0e(`${t}${e}`)?.href||`${t}${e}`},Ojt=()=>[{id:"imessage",icon_url:nae("/static/mcpb/imessage.png"),download_url:nae("/static/mcpb/imessage_v0.0.8.mcpb"),manifest:{$schema:"https://static.modelcontextprotocol.io/schemas/2025-08-26/mcpb.manifest.schema.json",dxt_version:"0.1",name:"imessage",display_name:"iMessage",version:"0.0.8",description:"Send and read messages using Apple's Messages app",long_description:`This tool lets Perplexity work with your Mac's Messages app. You can send messages, read messages, and ask Perplexity to help you understand what's important.

It uses Mac system features to connect to Messages. Your Mac will ask for permission before it can access Messages or Contacts. This is not made by Apple.`,license:"MIT",author:{name:"Perplexity Inc",email:"support@perplexity.ai",url:"https://www.perplexity.ai/"},homepage:"https://www.perplexity.ai/",icon:"icon.png",tools:[{name:"list_contacts",description:'List contacts. When query is provided, search for contacts by name. Use it first to get a handle id, phone numbers, or emails. This tool is more preferred to be used first than "list_chats" tool. If this tool returns empty results, try to use "list_chats" tool to find a contact.'},{name:"list_chats",description:"List chats from iMessage. When query is provided, search for chats by phone number (preferrable) or chat name (if phone number is not available)."},{name:"create_chat",description:"Create a new chat with a specific contact"},{name:"read_chat",description:"Read iMessages from a specific chat"},{name:"send_imessage",description:"Send an iMessage to specific chat"}],server:{type:"node",entry_point:"server/index.js",mcp_config:{command:"node",args:["${__dirname}/server/index.js"],env:{HOME:"${HOME}"}}},compatibility:{comet:">=139.0.0",platforms:["darwin"],runtimes:{node:">=22.0.0"}}}}],vke=()=>{const e=cs(),t=f.useMemo(()=>{if(!e.platformInfo)return;const{isMac:n,isWindows:r,isLinux:s}=e.platformInfo;if(n)return"darwin";if(r)return"win32";if(s)return"linux"},[e.platformInfo]);return We({queryKey:["comet/available_dxts",t],queryFn:async()=>Ojt().filter(n=>n.manifest.compatibility?.platforms?t&&n.manifest.compatibility.platforms.includes(t):!0)})},bke=(e,t)=>t.dxt_name?e?.find(n=>n.id===t.dxt_name)?.icon_url:void 0,cH=()=>{const{$t:e}=Z(),t=cs(),{data:n}=vke(),r=f.useCallback((i,l)=>i.status!=="running"||!i.tools_count?e({defaultMessage:"Server is not running",id:"uHAMkeMTHv"}):l===i.tools_count?e({defaultMessage:"{total} tools available",id:"uPrPRhtLz8"},{total:i.tools_count}):e({defaultMessage:"{enabled} of {total} tools available",id:"KLHoDUDmUH"},{enabled:l,total:i.tools_count}),[e]),s=f.useMemo(()=>Object.fromEntries(t.mcpStdioServers?.map(i=>{const l=Upe(t.installedDxts,i),c=bke(n,i),u=l?.display_name??l?.name??i.name,d=t.mcpTools?.[i.name]??[],m=t.mcpToolsSettings?.[i.name]??{},p=d.filter(h=>{const g=h.tool?.name??h.id??"",y=m[g];return y?y.enabled!==!1:!0});return[i.name,{icon:void 0,avatar:o.jsx(xke,{serverName:u,iconUrl:c,size:"sm"}),text:u,disabled:i.status!=="running"||!i.tools_count,description:r(i,p.length),type:"toggle"}]})??[]),[t.mcpStdioServers,t.mcpTools,t.mcpToolsSettings,t.installedDxts,n,r]),a=f.useCallback(i=>{const l=t.mcpDisabledServers??new Set,c=new Set(l);l.has(i)?c.delete(i):c.add(i),t.actions.setMcpDisabledServers(c)},[t.actions,t.mcpDisabledServers]);return f.useMemo(()=>({cometMcpSources:s,toggleCometMcpSource:a,cometMcpDisabledServers:t.mcpDisabledServers}),[s,a,t.mcpDisabledServers])},Ljt=async({connectionType:e,reason:t,referrer:n,referrerId:r})=>{try{const s={connection_type:e};n&&(s.referrer=n),r&&(s.referrer_id=r);const{data:a,error:i}=await ae.GET("/rest/connections/connect",t,{params:{query:s},timeoutMs:Fe()});if(i)throw new Error(`Failed to get ${e} connection url`,{cause:i});return a}catch(s){throw ne.error(`Error fetching ${e} connection url:`,s),s}},Djt=async({connectionType:e,reason:t})=>{try{const{data:n,error:r}=await ae.GET("/rest/connections/oauth_callback_merge",t,{params:{query:{connection_type:e}},timeoutMs:Fe()});if(r)throw new Error(`Failed to handle OAuth callback for ${e}`,{cause:r});return n}catch(n){throw ne.error(`Error handling OAuth callback for ${e}:`,n),n}},_ke=Yt("MergeAgentHandlerContext",null),Fjt=()=>{const e=f.useContext(_ke);if(!e)throw new Error("useMergeAgentHandler must be used within a MergeAgentHandlerProvider");return e},Ujt=({children:e})=>{const t=xt(),[n,r]=f.useState(null),s=f.useCallback(async()=>{const{connectionType:m,onError:p,onSuccess:h}=n??{};if(!m){const g=new Error("Connection type is not defined for OAuth callback");g1.error("Connection type is not defined for OAuth callback"),p?.(g);return}try{await Djt({reason:"merge_oauth_success",connectionType:m}),t.invalidateQueries({queryKey:$3()}),h?.()}catch(g){g1.error("Failed to handle OAuth callback:",g),p?.(g)}finally{r(null)}},[n,t]),a=f.useCallback(()=>{const{onExit:m}=n??{};r(null),m?.()},[n]),{open:i,isReady:l}=j0e({linkToken:n?.token||"",onSuccess:s,onExit:a});f.useEffect(()=>{l&&n?.token&&i()},[l,n?.token,i]);const c=f.useCallback(m=>{r(m)},[]),u=f.useCallback(()=>{r(null)},[]),d=f.useMemo(()=>({startMergeAuth:c,clearActiveAuth:u}),[c,u]);return o.jsx(_ke.Provider,{value:d,children:e})},Bjt=({reason:e})=>{const{trackEvent:t}=je(),{deprecatedOpenToast:n}=Mn(),{$t:r}=Z(),s=Ft(),{startMergeAuth:a}=Fjt(),{handleConnect:i}=Q3({reason:e}),l=f.useCallback(async(c,u)=>{const d=zct(c);if(!d){ne.error("Connection type is not defined for OAuth callback");return}if(Gct(d)){try{const{redirect_url:m,token:p}=await Ljt({connectionType:d,reason:e,referrer:u?.referrer,referrerId:u?.referrerId});if(m)ml(m,"Enabling connector");else if(p)a({token:p,connectionType:d,connectorName:c});else throw new Error("No redirect URL or token received")}catch{n(r({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3)}return}if(d==="GCAL"){await i({connectorName:c,redirectPath:s||void 0,unauthedRedirectPath:s||void 0});return}await i({connectorName:c}),t("attempt connector authentication",{connectorName:c})},[r,s,e,i,n,t,a]);return f.useMemo(()=>({enableConnection:l}),[l])},Li=(e,t,n)=>{const r=nl(e),s=Ra(e),a={avatar:r?o.jsx(Pt,{user:r,size:"small",rounded:!1,showBackground:!1,altText:s}):void 0,text:s};if(t)return{...a,icon:void 0,type:"toggle"};const l=Ndt(e)?()=>n.openModal(e):()=>n.enableConnection(e);return{...a,icon:void 0,type:"default",rightElement:o.jsx(F,{color:"light",children:o.jsx(le,{icon:xa,size:"sm"})}),onClick:l}},Vjt=({reason:e})=>{const t=Z(),n=_t(),{isMobileStyle:r}=Ce(),{hasAccessToProFeatures:s}=Et(),{openModal:a,closeModal:i}=wt(),{isEnterprise:l,organization:c}=kn({reason:e}),u=AB({reason:e,feature:Ad.SOURCES}),{enableConnection:d}=Bjt({reason:e}),m=pn(),{enabledConnectors:p,enabledFileConnectors:h}=k_({reason:e}),g=Gu(),{isAllowed:y,isConnected:x}=xbe({reason:e}),{referrer:v,referrerId:b}=bB({mode:"file"}),[_,w]=f.useState(!1),C=f.useCallback(()=>{w(!0)},[]),S=f.useCallback(()=>{w(!1)},[]),E=f.useCallback(G=>{const J=nl(G);a("connectorsEnableModal",{connectorName:G,connectorAvatar:J,handleEnable:()=>{d(G,{referrer:v??void 0,referrerId:b??void 0}),i()}})},[a,i,d,v,b]),M=f.useMemo(()=>({enableConnection:d,openModal:E}),[d,E]),{value:k}=$r({flag:"gcal-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:c?.uuid??""}}),{value:N}=$r({flag:"enable-remote-mcp-tools",defaultValue:!1,extraAttributes:{orgUuid:c?.uuid??""}}),P=N&&s,L=k&&!m,{value:O}=$r({flag:"outlook-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:c?.uuid??""}}),A=f.useCallback(G=>{G.stopPropagation(),n.push(`${g}/files`)},[n,g]),j=f.useMemo(()=>o.jsx("div",{className:"mr-sm flex",children:o.jsx(En,{tooltipText:t.formatMessage({defaultMessage:"Manage my files",id:"o8eQg7byBv"}),children:o.jsx(F,{color:"light",onClick:A,children:o.jsx(le,{icon:MD,size:"sm"})})})}),[t,A]),{cometMcpSources:T,toggleCometMcpSource:I}=cH(),U=f.useMemo(()=>Object.fromEntries(Object.entries(T)?.map(([G,J])=>[`comet_mcp_${G}`,{...J,onClick:()=>{I(G)}}])),[T,I]),B=f.useMemo(()=>{const G=P&&y("linear_alt")?{linear_alt:Li("linear_alt",x("linear_alt"),M)}:{},J=y("google_drive")&&u?{google_drive:Li("google_drive",x("google_drive"),M)}:{},K=P&&y("slack")?{slack:Li("slack",x("slack"),M)}:{},te=L&&y("gcal")?{gcal:Li("gcal",x("gcal"),M)}:{},re=P&&y("notion_mcp")?{notion_mcp:Li("notion_mcp",x("notion_mcp"),M)}:{},se=P&&y("github_mcp_direct")?{github_mcp_direct:Li("github_mcp_direct",x("github_mcp_direct"),M)}:{},me=P&&y("asana_mcp_direct")?{asana_mcp_direct:Li("asana_mcp_direct",x("asana_mcp_direct"),M)}:{},oe=P&&y("asana_mcp_merge")?{asana_mcp_merge:Li("asana_mcp_merge",x("asana_mcp_merge"),M)}:{},ge=P&&y("atlassian_mcp_direct")?{atlassian_mcp_direct:Li("atlassian_mcp_direct",x("atlassian_mcp_direct"),M)}:{},xe=P&&y("slack_direct")?{slack_direct:Li("slack_direct",x("slack_direct"),M)}:{},ye=P&&y("jira_mcp_merge")?{jira_mcp_merge:Li("jira_mcp_merge",x("jira_mcp_merge"),M)}:{},_e=P&&y("confluence_mcp_merge")?{confluence_mcp_merge:Li("confluence_mcp_merge",x("confluence_mcp_merge"),M)}:{},be=P&&y("microsoft_teams_mcp_merge")?{microsoft_teams_mcp_merge:Li("microsoft_teams_mcp_merge",x("microsoft_teams_mcp_merge"),M)}:{};return{...G,...re,...se,...K,...te,...J,...me,...oe,...ge,...xe,...ye,..._e,...be,...U,...p?.some(Ee=>Ee.name==="crunchbase")?{crunchbase:{icon:void 0,avatar:o.jsx(Pt,{user:x3,rounded:!1,showBackground:!1,size:"small",altText:"Crunchbase"}),text:v3,type:"toggle"}}:{},...p?.some(Ee=>Ee.name==="factset")?{factset:{icon:void 0,avatar:o.jsx(Pt,{user:g3,rounded:!1,showBackground:!1,size:"small",altText:"FactSet"}),text:y3,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="ONEDRIVE")&&u?{onedrive:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.ONEDRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:Gd}),text:Gd,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="SHAREPOINT")&&u?{sharepoint:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.SHAREPOINT)||"",rounded:!1,showBackground:!1,size:"small",altText:qd}),text:qd,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="WILEY")&&l?{wiley:{icon:void 0,avatar:o.jsx(Pt,{user:Nu,rounded:!1,showBackground:!1,size:"small",altText:"Wiley"}),text:b3,type:"toggle"}}:{},...N&&y("wiley_mcp_cashmere")?{wiley_mcp_cashmere:{icon:void 0,avatar:o.jsx(Pt,{user:Nu,rounded:!1,showBackground:!1,size:"small",altText:D1}),text:D1,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="DROPBOX")&&u?{dropbox:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.DROPBOX)||"",rounded:!1,showBackground:!1,size:"small",altText:ju}),text:ju,type:"toggle"}}:{},...p?.some(Ee=>Ee.connection_type==="OUTLOOK")&&O?{outlook:{icon:void 0,avatar:o.jsx(Pt,{user:Bi(Ot.OUTLOOK)||"",rounded:!1,showBackground:!1,size:"small",altText:qg}),text:qg,type:"toggle"}}:{}}},[p,l,u,L,O,P,N,y,x,U,M]),{selectedConnectors:D,excessToggleConnectors:W}=f.useMemo(()=>{const G=Object.entries(B);if(G.length===0)return{selectedConnectors:[],excessToggleConnectors:[]};const J=G.filter(([,se])=>se.type==="toggle"),K=G.filter(([,se])=>se.type==="default");if(r)return{selectedConnectors:[...J,...K],excessToggleConnectors:[]};const te=[...J.slice(0,3),...K].slice(0,3),re=J.slice(3);return{selectedConnectors:te,excessToggleConnectors:re}},[B,r]),z=f.useMemo(()=>{if(W.length===0)return null;const G=W.map(([,J])=>J.avatar).filter(Boolean);return G.length===0?null:qm(G,{maxVisuals:5,size:"sm",stackDirection:"right",shape:"square",overlappingClassName:"bg-transparent ring-transparent",containerClass:"flex items-center h-5",innerClassName:"flex items-center gap-1",showRemainderCount:!1})},[W]),$=f.useMemo(()=>({type:"default",icon:Ok,text:t.formatMessage({defaultMessage:"Browse all connectors",id:"vyHg7PluiB"}),rightElement:o.jsx(F,{color:"light",children:o.jsx(le,{icon:xa,size:"sm"})}),onClick:()=>n.push(`${g}/connectors`)}),[t,n,g]),X=f.useMemo(()=>{if(D.length===0)return null;const G=Object.fromEntries(D);return W.length===0?G.browse_all_connectors=$:G.more_connectors={type:"nested",text:t.formatMessage({defaultMessage:"More connectors",id:"3l4CuVEyHY"}),submenuItems:[...W,{type:"separator",show:!0},$],isSubmenuOpen:_,onSubmenuOpen:C,onSubmenuClose:S,textTrailingElement:z,menuWidth:"300px"},{groupId:"connectors",sources:G}},[D,W,$,t,_,C,S,z]),q=f.useMemo(()=>{const G=h.map(re=>{const se=re.name,me=nl(se)??"";return o.jsx(Pt,{user:me,rounded:!1,showBackground:!1,size:"small"},se)});let J=null;G.length>0&&(J=qm(G,{...G.length<=3&&{rightText:o.jsx(F,{color:"light",variant:"tinyRegular",children:t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})})},maxVisuals:G.length,size:"sm"}));const K=[],te={web:{icon:uf,avatar:void 0,text:t.formatMessage({defaultMessage:"Web",id:"B6CB3748fZ"}),description:t.formatMessage({defaultMessage:"Search across the entire Internet",id:"L+Gw+J7uDs"}),type:"toggle"},scholar:{icon:v1,avatar:void 0,text:t.formatMessage({defaultMessage:"Academic",id:"mbxIJyT8C5"}),description:t.formatMessage({defaultMessage:"Search academic papers",id:"IVRQQmrqTD"}),type:"toggle"},social:{icon:ND,avatar:void 0,text:t.formatMessage({defaultMessage:"Social",id:"qOLogguG/7"}),description:t.formatMessage({defaultMessage:"Discussions and opinions",id:"g9xPuArp4v"}),type:"toggle"},edgar:{icon:TD,avatar:void 0,text:ZF,description:"Search SEC filings",type:"toggle"},...l?{org:{icon:kD,avatar:void 0,text:t.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),description:t.formatMessage({defaultMessage:"Search files from your organization",id:"Ak5CW53mGi"}),type:"toggle"}}:{},...u&&l?{my_files:{icon:Vk,avatar:void 0,text:t.formatMessage({defaultMessage:"My files",id:"bYbrKKlKgS"}),description:h.length===0?t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"}):"",bottomElement:J??void 0,rightElement:j,type:"toggle"}}:{}};return Object.keys(te).length>0&&K.push({groupId:"core",sources:te}),X&&K.push(X),K},[h,t,l,u,j,X]),Y=f.useMemo(()=>{const G={};return q.forEach(J=>{Object.entries(J.sources).forEach(([K,te])=>{te.type==="toggle"&&(G[K]=te)})}),G},[q]);return f.useMemo(()=>({RootSources:Y,RootSourceGroups:q,ConnectionSources:B}),[B,Y,q])},wke=f.memo(({children:e})=>o.jsx("div",{className:"flex size-5 items-center justify-center",children:e}));wke.displayName="IconWrapper";const Cke=f.memo(({isOpen:e,onOpen:t,onClose:n,defaultSource:r,selectedSources:s,onSourcesChange:a,variant:i="icon",hiddenSources:l,buttonVariant:c="default",useThreadSources:u=!1})=>{const d="sources-switcher",{$t:m}=Z(),{isMobileStyle:p}=Ce(),{trackEvent:h}=je(),{fileRepoInfo:g}=Do({reason:d}),y=g?.file_repository_type==="COLLECTION",{RootSources:x,RootSourceGroups:v,ConnectionSources:b}=Vjt({reason:d}),{updateSources:_}=H_({defaultSource:r,reason:d}),{sources:w}=rr(),{firstResult:C}=Ht(),{cometMcpSources:S,cometMcpDisabledServers:E}=cH(),M=C?.sources?.sources??fe,k=f.useMemo(()=>s??(u?M:w),[s,u,M,w]),N=a??_,P=f.useCallback(D=>D.preventDefault(),[]),L=f.useCallback(D=>{D.preventDefault(),D.stopPropagation()},[]),O=f.useCallback(D=>{h("search source click",{source:D}),N(D)},[h,N]),A=f.useMemo(()=>[...k,...Object.keys(S).filter(D=>!E?.has(D)).map(D=>`comet_mcp_${D}`)],[k,S,E]),j=f.useCallback((D,W)=>{const z=A?.includes(D);return{type:W.type,text:W.text,description:W.description,size:"small",selected:z,icon:W.icon,avatar:W.avatar,link:W.link,onMouseDown:L,onClick:()=>W.onClick?W.onClick():O(D),onLinkClick:W.onLinkClick,bottomElement:W.bottomElement,rightElement:W.rightElement,testId:`source-toggle-${D}`,submenu:W.submenuItems?.map($=>{if(Array.isArray($)&&$.length===2){const[X,q]=$;return j(X,q)}return $}),isSubmenuOpen:W.isSubmenuOpen,onSubmenuOpen:W.onSubmenuOpen,onSubmenuClose:W.onSubmenuClose,textTrailingElement:W.textTrailingElement,menuWidth:W.menuWidth}},[A,L,O]),T=f.useMemo(()=>{const D={type:"separator",show:!0};return v.map($=>Object.entries($.sources).filter(([X])=>!l?.includes(X)).map(([X,q])=>j(X,q))).flatMap(($,X)=>X===0?$:[D,...$])},[v,l,j]),I=f.useMemo(()=>{if(!A?.length)return o.jsx(le,{icon:Lm,size:"sm"});const D=[];return A.forEach(W=>{let z;if(W in x?z=x[W]:W in b&&(z=b[W]),z){const $=z,X=$.avatar||o.jsx(wke,{children:$.icon?o.jsx(le,{icon:$.icon,size:"sm"}):o.jsx(le,{icon:Lm,size:"sm"})});D.push(X)}}),qm(D,{isOverlapping:!0,maxVisuals:Ske,size:"md",stackDirection:"right"})},[A,x,b]),U=f.useMemo(()=>{if(A?.length===1){const D=A[0]??"";return D in x?x[D]?.text:D in b?b[D]?.text:D}return m({defaultMessage:"{count} sources",id:"l1+6PggBqU"},{count:A?.length||0})},[A,x,b,m]),B=(()=>{switch(c){case"subtle":return"bg-subtle";case"default":return"!bg-subtler";default:Kt(c)}})();return u&&(!A||A.length===0)?null:o.jsx(VT,{focusItems:T,placement:"bottom-end",width:"300px",isMobileStyle:p,isOpen:e,onOpen:u?void 0:t,onClose:n,menuType:Br.SOURCES,isSpace:y,children:i==="button"?o.jsx(pe,{text:U,extraCSS:V("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal",B),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Bn,onMouseDown:u?void 0:P,disabled:u,"data-testid":"sources-switcher-button"}):o.jsx(Te,{toolTip:m(u?{defaultMessage:"Start a new thread to change sources",id:"jKXi56aXv8"}:{defaultMessage:"Set sources for search",id:"yAyuRoLEjt"}),size:"small",onMouseDown:u?void 0:P,"data-testid":"sources-switcher-button",variant:u?"noHover":"common",extraCSS:V("px-[4px]",{"!aspect-auto":A&&A.length>1},{"!cursor-default [&:active]:!scale-100 [&:active]:!duration-0":u}),leadingComponent:I})})});Cke.displayName="SourcesSwitcherV2";const $jt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"sources-switcher-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Ske=5,Eke=R.memo(({children:e})=>o.jsx("div",{className:"flex size-5 items-center justify-center",children:e}));Eke.displayName="IconWrapper";const Mke=R.memo(e=>{const t="sources-switcher",{$t:n}=Z(),{isOpen:r,onOpen:s,onClose:a,defaultSource:i,selectedSources:l,onSourcesChange:c,variant:u="icon",hiddenSources:d,buttonVariant:m="default",useThreadSources:p=!1,allowCometRestrictions:h=!0}=e,{isMobileStyle:g}=Ce(),{trackEvent:y}=je(),{fileRepoInfo:x}=Do({reason:t}),v=x?.file_repository_type==="COLLECTION",{RootSources:b,ConnectionSources:_,NestedConnectionSources:w}=vbe({reason:t,allowCometRestrictions:h}),{updateSources:C}=H_({defaultSource:i,reason:t}),{sources:S}=rr(),{isEnterprise:E}=kn({reason:t}),{firstResult:M}=Ht(),k=M?.sources?.sources??fe,N=f.useMemo(()=>l??(p?k:S),[l,p,k,S]),P=c??C,L=f.useCallback(G=>G.preventDefault(),[]),O=f.useCallback(G=>{G.preventDefault(),G.stopPropagation()},[]),A=f.useCallback(G=>{y("search source click",{source:G}),P(G)},[y,P]),j=f.useCallback((G,J)=>{const K=N?.includes(G);return{type:J.type,text:J.text,description:J.description,size:"small",selected:K,icon:J.icon,avatar:J.avatar,link:J.link,onMouseDown:O,onClick:()=>A(G),onLinkClick:J.onLinkClick,bottomElement:J.bottomElement,rightElement:J.rightElement,testId:`source-toggle-${G}`}},[N,O,A]),{cometMcpSources:T,toggleCometMcpSource:I,cometMcpDisabledServers:U}=cH(),B=f.useCallback((G,J)=>{const K=U?.has(G),te=()=>{I(G)};return{...j(G,J),selected:!K,testId:`comet-mcp-toggle-${G}`,onClick:te}},[j,I,U]),D=f.useMemo(()=>[...N,...Object.keys(T).filter(G=>!U?.has(G))],[N,T,U]),W=f.useMemo(()=>{const G=Object.entries(b),J=G.filter(([te])=>!d?.includes(te));return[...(d?.length?G.filter(([te])=>!d.includes(te)):J).map(([te,re])=>j(te,re)),...Object.entries(T).map(([te,re])=>B(te,re))]},[b,j,d,T,B]),z=f.useMemo(()=>{const G=w.submenuItems.filter(J=>{if(Array.isArray(J)){const[K]=J;return!d?.includes(K)}return!0}).map(J=>{if(Array.isArray(J)){const[K,te]=J;return j(K,te)}return J});return{...w,submenu:G}},[w,j,d]),$=f.useMemo(()=>[...W,...g||!E?[]:[{type:"separator"},z]].filter(Boolean),[E,W,z,g]),X=f.useMemo(()=>{if(!D?.length)return o.jsx(le,{icon:Lm,size:"sm"});const G=[];return D.forEach(J=>{let K;if(J in b?K=b[J]:J in _?K=_[J]:J in T&&(K=T[J]),K){const te=K.avatar||o.jsx(Eke,{children:K.icon?o.jsx(le,{icon:K.icon,size:"sm"}):o.jsx(le,{icon:Lm,size:"sm"})});G.push(te)}}),qm(G,{isOverlapping:!0,maxVisuals:Ske,size:"md",stackDirection:"right"})},[D,b,_,T]),q=f.useMemo(()=>{if(D?.length===1){const G=D[0]??"";return G in b?b[G]?.text:G in _?_[G]?.text:G in T?T[G]?.text:G}return n({defaultMessage:"{count} sources",id:"l1+6PggBqU"},{count:D?.length||0})},[D,b,_,T,n]),Y=(()=>{switch(m){case"subtle":return"bg-subtle";case"default":return"!bg-subtler";default:Kt(m)}})();return p&&(!N||N.length===0)?null:o.jsx(VT,{focusItems:$,placement:"bottom-end",width:"300px",isMobileStyle:g,isOpen:r,onOpen:p?void 0:s,onClose:a,menuType:Br.SOURCES,isSpace:v,children:u==="button"?o.jsx(pe,{text:q,extraCSS:V("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal",Y),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Bn,onMouseDown:p?void 0:L,disabled:p,"data-testid":"sources-switcher-button"}):o.jsx(Te,{toolTip:p?void 0:n({defaultMessage:"Set sources for search",id:"yAyuRoLEjt"}),size:"small",onMouseDown:p?void 0:L,"data-testid":"sources-switcher-button",variant:p?"noHover":"common",extraCSS:V("px-[4px]",{"!aspect-auto":N&&N.length>1},{"!cursor-default [&:active]:!scale-100 [&:active]:!duration-0":p}),leadingComponent:X})})});Mke.displayName="SourcesSwitcherV1";const uH=R.memo(e=>{const{variation:t}=$jt(!1);return t?o.jsx(Ujt,{children:o.jsx(Cke,{...e})}):o.jsx(Mke,{...e})});uH.displayName="SourcesSwitcher";const kke=R.memo(({isTranscribing:e,isInitializing:t,startTranscription:n,stopTranscription:r,variant:s="primary"})=>{const{$t:a}=Z(),[i,l]=f.useState(t),c=()=>{l(!0),n?.()},u=()=>{l(!1),r?.()};return f.useEffect(()=>{e&&l(!1)},[e]),o.jsx(o.Fragment,{children:s==="primary"?o.jsxs("div",{className:"relative ml-2",children:[e&&o.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),o.jsx(pe,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||i,icon:e?b1:nq,variant:"primary",onClick:e?u:c,disabled:!1,size:Qt.small})]}):o.jsxs("div",{className:"relative",children:[e&&o.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),o.jsx(Te,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||i,icon:e?b1:nq,variant:"common",onClick:e?u:c,disabled:!1,size:Qt.small})]})})});kke.displayName="DictationButton";const Wjt={hidden(){return{opacity:0,scale:.2}},visible(){return{opacity:1,scale:1}}},Tke=R.memo(({onStopButtonClick:e,variant:t="inverted"})=>{const{$t:n}=Z();return o.jsx(ve.div,{animate:"visible",exit:"hidden",initial:"hidden",variants:Wjt,children:o.jsx(pe,{testId:"stop-generating-response-button",toolTip:n({defaultMessage:"Stop generating response",id:"wXXKXUJh1s"}),variant:t,icon:b1,onClick:e,size:"small",extraCSS:"text-caution hover:!bg-caution hover:!text-white ml-2"})},"stop-button")});Tke.displayName="StopButton";var Hjt={};const Nke=R.memo(()=>{const{openModal:e}=wt(),{$t:t}=Z(),n=lt(),r=_t(),s=f.useCallback(()=>{n?Hjt.NEXT_PUBLIC_IS_SIDECAR_BUILD?r.push("/speak"):e("voiceToVoiceModal",null):e("loginModal",{origin:De.VOICE_TO_VOICE_BUTTON,pitchMessage:{title:"Sign in to unlock voice mode"}})},[n,e,r]);return o.jsx("div",{className:"ml-2",children:o.jsx(pe,{onClick:s,size:Qt.small,icon:E7e,variant:"primary",disabled:!1,toolTip:t({defaultMessage:"Voice mode",id:"OnF9aqAuar"})})})});Nke.displayName="VoiceToVoiceButton";const jke=(e,t)=>{const{value:n,loading:r}=Dt({flag:"max_assistant_tooltip_enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function Ake(){const{value:e}=Dt({flag:"enable-clarifying-questions",subjectType:"user_nextauth_id",defaultValue:!1});return e}const Ike=R.memo(({toolTip:e,icon:t,isDisabled:n,value:r,querySource:s,size:a=Qt.small,handleSubmit:i,...l})=>o.jsx(pe,{...l,ariaLabel:"Submit",toolTip:e,icon:t,variant:"primary",size:a,onClick:n?void 0:()=>i({query:r,querySource:s}),disabled:n,extraCSS:"!duration-100"}));Ike.displayName="SubmitButton";var SS={};const K6=({className:e,...t})=>o.jsx("div",{className:e,children:o.jsx(Ike,{...t,value:""})}),zjt=({value:e,json:t,submitWillFork:n,isFollowUp:r,isDisabled:s,querySource:a,errorMessage:i,handleSubmit:l,fileUploadRef:c,showFileUpload:u,fileUploadTooltip:d,showStopButton:m,showModelSelector:p,onStopButtonClick:h,onFilePickerOpen:g,onFilePickerClose:y,showSources:x,useThreadSources:v,showRecency:b,disableActionButtons:_,startTranscription:w,stopTranscription:C,isTranscribing:S,isTranscriptionInitializing:E,isTranscriptionAvailable:M,fileUploadErrorMessage:k,fileUploadWarningMessage:N,activeConnector:P=null,uploadedFiles:L,handleStartUpload:O,handleFileInput:A,isBoxFilePickerOpen:j=!1,handleCloseBoxFilePicker:T,cleanupBoxFilePicker:I,microsoftFilePickerOptions:U=null,handleCloseMicrosoftFilePicker:B,handleSelectSharepointSite:D,isMicrosoftFilePickerOpen:W=!1,fileInputRef:z,hasQuery:$,isAudioVideoFilesEnabled:X=!1,setAttachmentErrorMessage:q,isCometHome:Y,isMissionControl:G})=>{const J="ask-input-right-attributions",{isMobileStyle:K,isMobileUserAgent:te}=Ce(),{screenshotToolEnabled:re}=cs(),{openModal:se}=wt(),{organization:me}=kn({reason:J}),{$t:oe}=Z(),ge=Ake(),{activeMenu:xe}=ea(),{onActiveMenuChange:ye}=to(),{device:{isWindowsApp:_e}}=Lt(),be=Ut(),{fileRepoInfo:Ne}=Do({reason:J}),{isMax:Ee}=Et(),Re=Ne.file_repository_type==="COLLECTION",Ae=b&&Re&&!r,st=f.useRef(e),it=f.useRef(t);st.current=e,it.current=t;const{variation:Se}=jke(!1),ue=f.useCallback(({querySource:jt})=>{l({query:st.current,json:it.current,querySource:jt})},[l]),ke=yet(bet),et=Yr(ke?.display_model)==ce.RESEARCH||Yr(ke?.display_model)==ce.STUDIO;f.useEffect(()=>{if(!_e)return;const jt=new URLSearchParams(window.location.search);jt.get("voice-mode")?(ny({"voice-mode":void 0}),w?.()):jt.get("v2v")&&(ny({v2v:void 0}),se("voiceToVoiceModal",null))},[be,_e,w,se]),f.useEffect(()=>{const jt=()=>{M&&(S?C?.():w?.())},dn=()=>{se("voiceToVoiceModal",null)};return document.addEventListener("toggleVoiceToVoice",dn),document.addEventListener("toggleDictation",jt),()=>{document.removeEventListener("toggleDictation",jt),document.removeEventListener("toggleVoiceToVoice",dn)}},[S,M,w,C,se]);const Ge=!G&&!r&&!Y&&(!te&&!K||!!SS.NEXT_PUBLIC_IS_SIDECAR_BUILD),ft=n?o_:SS.NEXT_PUBLIC_IS_SIDECAR_BUILD||r?_D:a_,Qe=m&&ge&&et,Ve=()=>{if(_)return o.jsx(K6,{className:"ml-2",isDisabled:!0,icon:ft,querySource:a??"home",handleSubmit:Pn});if(m){const On=Qe?"common":"inverted";return o.jsx(Tke,{onStopButtonClick:h,variant:On})}const jt=a&&o.jsx(K6,{className:"ml-2",toolTip:i||(n?oe({defaultMessage:"Start your own thread",id:"TAA16rUT4G"}):""),icon:ft,isDisabled:s,querySource:a,handleSubmit:ue,"data-testid":"submit-button"},"submit-button"),dn=[];if(SS.NEXT_PUBLIC_IS_SIDECAR_BUILD&&Ee&&Se&&dn.push(o.jsx(gke,{},"sidecar-more-menu-button")),SS.NEXT_PUBLIC_IS_SIDECAR_BUILD&&re&&dn.push(o.jsx(yke,{handleFileInput:A},"sidecar-screenshot-button")),M&&dn.push(o.jsx(kke,{isTranscribing:S,isInitializing:E,stopTranscription:C,startTranscription:w,variant:S?"primary":"common"},"dictation-button")),Ge){const On=(L?.length||$)&&a&&!S;On?dn.push(jt):!S&&!On&&dn.push(o.jsx(Nke,{},"voice-to-voice-button"))}else S||dn.push(jt);return M||Ge?dn:jt},Le=f.useCallback(()=>ye(null),[ye]),ot=f.useCallback(()=>ye(Br.SOURCES),[ye]),vt=f.useCallback(()=>ye(Br.RECENCY),[ye]),Rt=f.useCallback(()=>ye(Br.ATTACHMENTS),[ye]);return o.jsxs(PMe,{children:[x&&o.jsx(uH,{isOpen:xe===Br.SOURCES,onOpen:ot,onClose:Le,useThreadSources:v}),p&&o.jsx(hke,{}),Ae&&o.jsx(cke,{isOpen:xe===Br.RECENCY,onOpen:vt,onClose:Le}),u&&o.jsx(lke,{isOpen:xe===Br.ATTACHMENTS,onOpen:Rt,onClose:Le,size:"small",forwardedRef:c,fileType:"all",tooltip:d,onFilePickerOpen:g,onFilePickerClose:y,areFileAttachmentsAllowed:me?.settings?.file_attachments_allowed!==!1,fileUploadErrorMessage:k??null,fileUploadWarningMessage:N??null,activeConnector:P,uploadedFiles:L??fe,handleStartUpload:O,handleFileInput:A,isBoxFilePickerOpen:j,handleCloseBoxFilePicker:T,cleanupBoxFilePicker:I,microsoftFilePickerOptions:U,handleCloseMicrosoftFilePicker:B,handleSelectSharepointSite:D,isMicrosoftFilePickerOpen:W,fileInputRef:z,isAudioVideoFilesEnabled:X,setAttachmentErrorMessage:q}),a&&o.jsxs(o.Fragment,{children:[Ve(),Qe&&o.jsx("div",{className:s?"pointer-events-none opacity-50":"",children:o.jsx(K6,{className:"ml-3",toolTip:i||oe({defaultMessage:"Anything else to consider?",id:"DDAw7Ictpp"}),icon:ft,querySource:a,isDisabled:!1,handleSubmit:ue})})]})]})},Rke=R.memo(zjt);Rke.displayName="AskInputRightAttribution";const Pke=R.memo(({uploadedFiles:e,onRemoveFile:t,incompleteParsingEnabled:n,ref:r})=>o.jsxs("div",{ref:r,className:"gap-x-sm scrollbar-none flex snap-x snap-mandatory overflow-x-auto",children:[o.jsx("div",{className:"w-xs shrink-0"}),e.map((s,a)=>o.jsx(Oke,{uploadedFile:s,onRemoveFile:t,incompleteParsingEnabled:n},a)),o.jsx("div",{className:"w-xs shrink-0"})]}));Pke.displayName="UploadedFilesList";const Oke=R.memo(({uploadedFile:e,onRemoveFile:t,incompleteParsingEnabled:n})=>{const r="uploaded-files-list",{trackEvent:s}=je(),a=n?e.status==="uploading":e.status==="uploading"||e.status==="parsing",{$t:i}=Z(),{fileRepoInfo:l}=Do({reason:r}),{saveFile:c,isLoading:u}=Egt({fileRepoInfo:l,reason:r}),{data:d}=TV({fileRepoInfo:l,fileName:e.file.name,reason:r}),m=Object.values(yo),p=E_(e.file.name),g=p&&!hi(e.file.name)&&m.includes(p)&&act(e.nextURL),y=l.file_repository_type==="COLLECTION"&&!a&&g,x=f.useMemo(()=>i(d?{defaultMessage:"File exists in Space",id:"pD1m2AH9FU"}:{defaultMessage:"Save attachment to Space",id:"/Pbth8CiTs"}),[d,i]),v=f.useMemo(()=>fxe(e)?df:xrt(e)?M7e:vrt(e)?t_:brt(e)?Fi:wu,[e]),b=f.useCallback(()=>{s("remove attachment clicked"),e.nextURL&&t?.(e.nextURL,e.file_uuid??"")},[s,e,t]),_=f.useCallback(()=>c(e),[c,e]);return o.jsxs("div",{className:V("scroll-mx-md px-sm py-xs border-subtlest bg-subtler dark:bg-subtle gap-x-md flex h-[48px] w-fit snap-start items-center justify-between rounded-lg",{"opacity-70":a}),children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[e.thumbnailSource&&!a?o.jsx(Ss,{alt:e.file.name,src:e.thumbnailSource,containerClassName:"size-8 shrink-0",imageClassName:"w-full h-full object-cover object-center",rounded:"md",includeLightBoxModal:!1}):o.jsx("div",{className:"p-sm bg-subtle dark:bg-subtler rounded-lg","data-testid":a?"file-loading-icon":"file-type-icon",children:o.jsx(le,{icon:a?Kue:v,size:"sm",color:"#64645F",className:a?"animate-spin":void 0})}),o.jsxs("div",{className:"flex-col",children:[o.jsx(F,{variant:"tiny",color:"light",className:"text-nowrap",children:yrt(e.file.name,30)}),e.file.size>0&&o.jsx(F,{variant:"tinyRegular",color:"light",className:"text-nowrap",children:_rt(e.file.size)})]})]}),o.jsxs("div",{className:"gap-x-sm flex items-center",children:[y&&o.jsx(Te,{icon:k7e,size:"tiny",onClick:_,disabled:d||u,variant:"common",toolTip:x,isLoading:u,pill:!0,noPadding:!0}),e.nextURL&&o.jsx(Te,{icon:It,size:"tiny",testId:"remove-uploaded-file",onClick:b,variant:"common",pill:!0,noPadding:!0})]})]})});Oke.displayName="UploadedFilePreview";var Gjt={};function qjt({handleSubmit:e,inputQuery:t}){const{trackEvent:n}=je(),r=f.useRef(t);r.current=t;const s=Xa(),{sidecarSourceTab:{url:a}}=cs();return f.useCallback((l,c)=>{const u=Ei();if(n("auto suggestion accepted",{mode:"dropdown-complete",query:r.current,completion:l.query,completion_uuid:l.query_uuid,completion_position:c,url:l.url,isNavigational:!!l.url,frontendContextUUID:u,searchMode:s,isPersonalized:l.isPersonalized,sourceDomain:Gjt.NEXT_PUBLIC_IS_SIDECAR_BUILD?ha(a):void 0}),l.url){window.open(l.url,"_self");return}e({query:l.submission_query??l.query,promptSource:"autosuggest",querySource:"autosuggest",newFrontendContextUUID:u})},[e,s,n,a])}var Kjt={};function Yjt({inputQuery:e}){const{trackEventBatch:t}=je(),n=f.useRef(e);n.current=e;const r=Xa(),{sidecarSourceTab:{url:s}}=cs();return f.useCallback(i=>{if(n.current.length!==0)return;const l=i.map((c,u)=>({name:"auto suggestion blank state viewed",data:{mode:"dropdown-complete",query:n.current,completion:c.query,completion_uuid:c.query_uuid,completion_position:u,url:c.url,isNavigational:!!c.url,searchMode:r,sourceDomain:Kjt.NEXT_PUBLIC_IS_SIDECAR_BUILD?ha(s):void 0}}));t(l)},[r,t,s])}const Qjt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"sidecar-personalized-query-suggestions",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},dH="sidecar-personalized-queries-cache",yL=1e3*60*10,Xjt="sidecar";function Zjt(e){try{let n=new URL(e).hostname.toLowerCase();return n.startsWith("www.")&&(n=n.slice(4)),n}catch{return""}}function Jjt(){try{const e=Oe.getItem(dH);if(e)return JSON.parse(e)}catch{}return null}function eAt(e){Oe.setItem(dH,JSON.stringify(e))}async function tAt(e,t,n){if(e!==null&&e.nonce!==null&&e.timestamp>n-yL&&e.domain_suggestions.length>0)return{nonce:e.nonce,domain_suggestions:e.domain_suggestions};const r=await ae.POST("/rest/browser/personalization/sidecar-recommended-queries",Xjt,{body:{last_refresh_timestamp_ms:e?.timestamp??0,nonce:e?.nonce??"",history_items:t},timeoutMs:3e4});return r.error?(ne.error("Failed to fetch sidecar personalized queries:",r.error),{domain_suggestions:[],nonce:""}):r?.data?.domain_suggestions===null||!r?.data?.domain_suggestions?{domain_suggestions:e?.domain_suggestions??[],nonce:e?.nonce??""}:r.data}function nAt(e,t){const n=e.find(r=>r.domain===t);return n?n.suggestions.map(r=>({query:r.query})):[]}const rAt=14,sAt=1500,aAt=(e,t)=>{const{session:n}=Nt(),r=Jn(!1),s=Zjt(e),{variation:a,loading:i}=Qjt(!1,{userEmail:n?.user?.email??""}),l=Jjt(),{data:c}=We({queryKey:["sidecar-personalized-queries",t,a,i],queryFn:async()=>{if(!r||!e||!t)return[];if(!a)return i||Oe.removeItem(dH),[];const u=Date.now();if(l&&l.domain_suggestions.length>0&&u-l.timestamp<yL)return l.domain_suggestions;try{const m=((await r.SearchBrowser({queries:[],sources:["HISTORY"],key:"sidecar-personalized-suggestions-history",request_id:"sidecar-personalized-suggestions",start_time:rAt*24*60*60*1e3,history_max_results:sAt,open_tabs_max_results:0,closed_tabs_max_results:0})).history_results??[]).map(g=>({url:g.url,title:g.title,last_accessed:g.last_accessed,visit_count:g.visit_count})),p=await tAt(l,m,u),h={nonce:p.nonce,timestamp:u,domain_suggestions:p.domain_suggestions};return h.domain_suggestions.length>0&&eAt(h),p.domain_suggestions}catch(d){return ne.error(d),l?.domain_suggestions??[]}},placeholderData:()=>t?l?.domain_suggestions??[]:[],refetchInterval:yL});return nAt(c??[],s)},iAt=async({query:e,keywords:t,reason:n})=>{try{const{error:r,data:s}=await ae.POST("/rest/autosuggest/reformulate-query",n,{body:{query:e,keywords:t}});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r});return s.reformulated_query}catch(r){return ne.error("Failed to fetch refinement query",r),null}},oAt=async({sources:e,attachments:t,searchMode:n,sourceTabUrl:r,entropyRenderingPlace:s,reason:a})=>{try{const{error:i,data:l}=await ae.POST("/rest/autosuggest/list-autosuggest",a,{body:{query:"",sources:e,attachments:t,search_mode:n,source_tab_url:r,entropy_rendering_place:s}});if(i)throw new Ie("API_CLIENTS_ERROR",{cause:i});return l.results??fe}catch(i){return ne.error(i),fe}},lAt=async({reason:e,onCreateShortcut:t})=>{try{const i=[...[...(await D_e({reason:e}))?.tasks??[]].sort(()=>Math.random()-.5).slice(0,2).map(l=>({query:l.prompt,title:l.task_name,shouldShowTitle:!0,category:"shortcuts"}))];return t&&i.push({query:"",query_uuid:"create-shortcut-button",title:"Create a shortcut",description:"",category:"shortcuts",icon:"plus",shouldShowTitle:!0,actionHandler:t}),i}catch(n){return ne.error("Failed to fetch shortcuts suggestions",n),fe}},Lke=async({cometBrowser:e,type:t,locale:n})=>{const r=await e.getPersonalSuggestions({source:"ntp",type:t,locale:n},"get-personal-suggestions");return r.is_success?r.suggestions:[]},cAt=async(e,t)=>{const n=await Lke(e);return n.length<=t?n:hue(n).slice(0,t)},uAt=({cometBrowser:e,type:t,locale:n})=>{const{data:r=[]}=We({queryKey:["comet-personal-suggests-async",t,n],queryFn:async()=>hue(await Lke({cometBrowser:e,type:t,locale:n})),staleTime:3e5,gcTime:3e5});return r},Y6=({sources:e,attachments:t,searchMode:n,focus:r,isCometHome:s,reason:a,enabled:i})=>{const{sidecarSourceTab:{url:l}}=cs(),u=xi().erp,{isMobileUserAgent:d}=Ce(),m=Jn(),p=fw(),{openModal:h}=wt(),g=aAt(l||"",u==="sidecar"),y=f.useCallback(()=>{h("taskShortcutModal",{source:"suggestions_dropdown"})},[h]),x=f.useMemo(()=>s&&n===ce.SEARCH?["comet-blank-state-suggest",n,p]:r==="finance"?["finance-blank-state-suggest"]:["blank-state-suggest",e,t,n,u==="sidecar"?l:""],[e,t,n,r,s,l,u,p]);return We({queryKey:x,enabled:i,queryFn:async()=>{if(s&&n===ce.SEARCH){const[_,w]=await Promise.all([cAt({cometBrowser:m,type:"input-blank-state"},hg(d,p)),p?lAt({reason:a,onCreateShortcut:y}):Promise.resolve([])]);return[...(_??fe).map(C=>({...C,is_comet_assistant:!0,category:"suggestion"})),...w]}if(r==="finance")return(await b9({query:"",reason:a,country:"US"})).map((C,S)=>({query:C.query||`suggestion-${S}`,title:C.title??void 0,image:C.image??void 0,description:C.description??void 0,category:C.category??void 0,query_uuid:C.query_uuid??void 0,url:C.url??void 0,metadata:C.metadata??void 0}));const[v,b]=await Promise.all([oAt({sources:e,attachments:t,searchMode:n,sourceTabUrl:u==="sidecar"?l:"",entropyRenderingPlace:u,reason:a}),u==="sidecar"?xqe({entropyBrowser:m,url:l}):Promise.resolve([])]);return[...g.map(_=>({..._,isPersonalized:!0})),...b,...v].slice(0,hg(d))}})},dAt=e=>{const{setSuggestions:t,setBlankStateSuggestions:n}=to(),{sidecarSourceTab:{url:r,secondaryTab:s}}=cs(),i=xi().erp,l=f.useRef(void 0),c=f.useRef(e.selectedSearchMode),{blankStateSuggestions:u}=ea(),d=u[e.selectedSearchMode],m=r?ha(r):void 0,p=f.useMemo(()=>{if(e.suggestionsDisabled)return!0;const x=i==="sidecar";return x&&m&&m===l.current||x&&s},[e.suggestionsDisabled,i,m,s]);!p&&l.current!==m&&(l.current=m);const{data:h}=Y6({...e,searchMode:ce.SEARCH,enabled:!p}),{data:g}=Y6({...e,searchMode:ce.RESEARCH,enabled:!p}),{data:y}=Y6({...e,searchMode:ce.STUDIO,enabled:!p});return f.useEffect(()=>{h&&n(h,ce.SEARCH),g&&n(g,ce.RESEARCH),y&&n(y,ce.STUDIO),p&&(n([],ce.SEARCH),n([],ce.RESEARCH),n([],ce.STUDIO))},[h,g,y,n,p]),f.useEffect(()=>{(e.query?.length??0)>0||d&&((i==="sidecar"||c.current!==e.selectedSearchMode)&&t(d),c.current=e.selectedSearchMode)},[e.query,e.selectedSearchMode,d,t,i]),null};function Dke({userInputQuery:e,userInputJson:t,suggestionsDisabled:n,suggestions:r,focusedIndex:s,setFocusedIndex:a,onChange:i,handleSuggestionSubmission:l,placement:c="bottom",inputRef:u}){const d=f.useRef(e),m=f.useRef(t),p=f.useRef(r),h=f.useRef(s);d.current=e,m.current=t,p.current=r,h.current=s;const g=f.useCallback((_,w)=>{if(w>0){const C=(h.current+1)%w,S=p.current[C];if(S?.query){const E=S.query;i(E)}return _.preventDefault(),C}return null},[i]),y=f.useCallback(_=>{let w=h.current-1;if(w<0)w=-1,h.current===0&&(_.preventDefault(),i(d.current,m.current));else{_.preventDefault();const C=p.current[w];if(C?.query){const S=C.query;i(S)}}return w},[i]),x=f.useCallback((_,w)=>{if(w>0){const C=h.current<=0?w-1:(h.current-1)%w,S=p.current[C];if(S?.query){const E=S.query;i(E)}return _.preventDefault(),C}return null},[i]),v=f.useCallback((_,w)=>{let C=h.current+1;if(C>=w||C===0)C=-1,h.current===w-1&&(_.preventDefault(),i(d.current,m.current));else{_.preventDefault();const S=p.current[C];if(S?.query){const E=S.query;i(E)}}return C},[i]);return f.useCallback(_=>{if(n)return!1;const w=da.isArrowDown(_),C=da.isArrowUp(_);if(w){if(c==="bottom"&&h.current===-1&&!u.current?.inLine("last"))return!1;const S=c==="bottom"?g(_,p.current.length):v(_,p.current.length);if(S!==null)return a(S),!0}else if(C){if(c==="top"&&h.current===-1&&!u.current?.inLine("first"))return!1;const S=c==="bottom"?y(_):x(_,p.current.length);if(S!==null)return a(S),!0}else if(da.isEnterKeyWithoutShift(_)&&h.current>=0&&h.current<p.current.length){const S=p.current[h.current];if(S)return l(S,h.current),!0}return!1},[n,c,u,g,v,a,y,x,l])}var rae={};const fAt=e=>e==="travel"||e==="shopping"||e==="academic"||e==="sports",mAt=({autosuggestionsEnabled:e=!0,inputQuery:t,inputJson:n,isInputActive:r,onChange:s,handleSuggestionSubmission:a,handleSuggestionView:i,querySource:l,hasThreadContent:c,isMentionMenuOpened:u,placement:d="bottom",inputRef:m})=>{const{isWindowsAppPanelView:p}=kp(),[h,g]=f.useState(-1),[y,x]=f.useState(t),[v,b]=f.useState(),_=Ft(),{isSuggestionsDisabled:w}=_n(),C=FMe(),S=L1e(_),E=Smt(_),{activeMenu:M,suggestions:k}=ea(),{currentOpenedModal:N}=wt(),{setSuggestions:P,setShowSuggestDropdown:L}=to(),O=f.useMemo(()=>w||!e||!C&&!S&&!p&&!E&&!fAt(l)&&!rae.NEXT_PUBLIC_IS_SIDECAR_BUILD||l!=="finance"&&t.length>Ydt&&!k.some(({query:j})=>j===t)||!!rae.NEXT_PUBLIC_IS_SIDECAR_BUILD&&c,[w,e,C,S,E,p,l,t,c,k]),A=Dke({userInputQuery:y,userInputJson:v,suggestionsDisabled:O,suggestions:k,focusedIndex:h,setFocusedIndex:g,onChange:s,handleSuggestionSubmission:a,placement:d,inputRef:m});return f.useEffect(()=>{h===-1&&(x(t),b(n))},[t,h,x,b,n]),f.useEffect(()=>{O&&(P(fe),g(-1))},[O,P,g]),f.useEffect(()=>{const j=!O&&r&&!M&&!N&&k.length>0&&!u;L(j),j&&i(k)},[O,r,M,N,k,u,L,i]),f.useMemo(()=>({focusedIndex:h,setFocusedIndex:g,suggestionsDisabled:O,userInputQuery:y,handleSuggestDropdownNavigation:A,placement:d}),[h,A,O,y,d])};class pAt{static isAnyInputElementFocused(){const t=document.activeElement;return!!(t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.getAttribute("contenteditable")==="true"||t.getAttribute("role")==="textbox"))}}function hAt({value:e,json:t,isDisabled:n,handleSubmit:r,handleSuggestDropdownNavigation:s,querySource:a,focusInput:i,isInputActive:l}){const{isMobileUserAgent:c}=Ce(),u=f.useRef(e),d=f.useRef(t);u.current=e,d.current=t;const m=f.useCallback(x=>n&&da.isEnterKeyWithoutShift(x)?(x.preventDefault(),!0):!1,[n]),p=f.useCallback(x=>x.isComposing?(x.preventDefault(),!0):!1,[]),h=f.useCallback(x=>{da.isEnterKeyWithoutShift(x)&&!c&&(x.preventDefault(),r({query:u.current,json:d.current,querySource:a}))},[r,a,c]),g=f.useCallback(x=>{const v=da.isCtrlOrCmdJ(x),b=da.isOnlySlashKey(x);if(v||b){if(l||pAt.isAnyInputElementFocused())return;x.preventDefault(),i()}},[i,l]);return f.useEffect(()=>(document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[g]),f.useCallback(x=>{m(x)||p(x)||s(x)||h(x)},[m,p,s,h])}const gAt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"clear-ask-input-suggestions-when-disabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function yAt({value:e,json:t,querySource:n,disableSubmission:r=!1,disableInput:s=!1,autofocus:a=!0,isUploadingFile:i=!1,onChange:l,onFocus:c,handleSubmit:u,handleUpdateAutosuggestions:d,autosuggestionsEnabled:m=!0,errorMessage:p,sources:h,attachments:g,selectedSearchMode:y,isInputActive:x,setIsInputActive:v,updateOnFocus:b=!1,inFlight:_=!1,resultsLength:w=0,quote:C,isMentionMenuOpened:S,isCometHome:E=!1,reason:M,placement:k="bottom"}){const{activeMenu:N,inputRef:P}=ea(),L=Vgt(),{setShouldTriggerFocus:O}=z_(),{blankStateSuggestions:A}=ea(),{setSuggestions:j}=to(),{onActiveMenuChange:T}=to(),{device:{isAndroid:I}}=Lt(),U=f.useMemo(()=>!!C||e.trim().length>0||!!g&&g.length>0,[C,e,g]),B=r||s||!!p||i||!U,D=f.useCallback(oe=>{const{mentions:ge}=V_e(t?.root);u({...oe,mentions:ge.length>0?ge:void 0})},[t,u]),W=qjt({handleSubmit:D,inputQuery:e}),z=Yjt({inputQuery:e}),{focusedIndex:$,setFocusedIndex:X,suggestionsDisabled:q,userInputQuery:Y,handleSuggestDropdownNavigation:G}=mAt({autosuggestionsEnabled:m,inputQuery:e,inputJson:t,isInputActive:x&&m,onChange:l,handleSuggestionView:z,handleSuggestionSubmission:W,querySource:n,hasThreadContent:_||w>0,isMentionMenuOpened:S,placement:k,inputRef:P});dAt({sources:h,attachments:g,selectedSearchMode:y,suggestionsDisabled:q,focus:n==="finance"?"finance":void 0,query:e,isCometHome:E,reason:M});const J=f.useCallback(()=>{P.current?.focus(),v(!0)},[P,v]),K=f.useCallback(oe=>{c?.(oe),v(!0),T(null),b&&d(P.current?.value??""),I&&setTimeout(()=>{P.current?.scrollIntoView({behavior:"smooth",block:"center"})},300)},[c,T,d,v,b,P,I]);f.useEffect(()=>{L&&a&&(J(),O(!1))},[L,J,O,a]);const te=f.useCallback(()=>(v(!1),X(-1),!0),[X,v]),{variation:re}=gAt(!1),se=f.useCallback((oe,ge)=>{if(l(oe,ge),q){re&&j([]);return}oe.trim().length===0&&A[y]?(j(A[y]),d(oe)):eft(oe)&&d(oe)},[l,q,d,A,j,y,re]),me=hAt({value:e,json:t,isDisabled:B,handleSubmit:D,handleSuggestDropdownNavigation:G,querySource:n,focusInput:J,isInputActive:x});return f.useEffect(()=>{N!==null?P.current?.blur():a&&J()},[N,P,J,a]),f.useMemo(()=>({isDisabled:B,focusedIndex:$,setFocusedIndex:X,userInputQuery:Y,handleSuggestionSubmission:W,handleFocus:K,handleBlur:te,handleChange:se,handleKeyDown:me,focusInput:J,hasQuery:U}),[J,$,te,se,K,me,W,U,B,X,Y])}const xAt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"search-files-v2-enabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function vAt(){const{value:e}=Dt({flag:"clear-attachment-on-submission",subjectType:"user_nextauth_id",defaultValue:!1});return e}const bAt=({entropyBrowser:e,isSidecar:t,focusInput:n})=>{f.useEffect(()=>{if(!e||!t)return;const r=()=>{document.visibilityState==="visible"&&n()},s=e.subscribeQuickActionButtonFired(()=>{n()});return document.addEventListener("visibilitychange",r),()=>{s(),window.removeEventListener("visibilitychange",r)}},[e,n,t])},Fke=R.memo(function(t){const{children:n,condition:r,Wrapper:s,...a}=t;return r?o.jsx(s,{...a,children:n}):n});Fke.displayName="ConditionalWrapper";var _At={};const wAt=({value:e,json:t,querySource:n,placeholder:r,disableSubmission:s=!1,disableInput:a=!1,initialLayout:i="expanded",minRows:l=1,isFollowUp:c=!1,submitWillFork:u=!1,showSources:d=!1,useThreadSources:m=!1,showRecency:p=!1,showModelSelector:h=!0,showSearchModeSelector:g=!0,showFileUpload:y=!1,disableActionButtons:x=!1,showIncognitoHint:v,hasShadow:b=!1,autofocus:_=!0,disablePrivacyWarning:w=!1,fileUploadTooltip:C,className:S,headerComponent:E,initializeAttachmentsFromLastResult:M=!1,showStopButton:k=!1,forceHideSuggestions:N=!1,onChange:P,onFocus:L,onClick:O,onSubmit:A,onStopButtonClick:j=Pn,onFilePickerOpen:T,onFilePickerClose:I,autosuggestionsEnabled:U=!0,dropdownPlacement:B="bottom",dropdownClassName:D,disableModeSelector:W=!1,useLexical:z=!1,mentionTypeaheadOptions:$,isCometHome:X=!1,syncUncontrolledOnce:q=!1,onTriggerTypeahead:Y,layoutKey:G,isHighlighted:J,isMissionControl:K,ref:te,onRemoveFile:re,onFileAttachComplete:se,renderAttachments:me=!0})=>{const oe=`ask-input-inner-${n}`,ge=f.useRef(!1),[xe,ye]=f.useState(!1),[_e,be]=f.useState(_),{suggestions:Ne,blankStateSuggestions:Ee,showSuggestDropdown:Re}=ea(),{setSuggestions:Ae}=to(),{isMobileStyle:st,isMobileUserAgent:it}=Ce(),{promptSkipped:Se}=ogt(),{inputRef:ue}=ea(),[ke,et]=f.useState(!0),Ge=f.useRef(null),{currentOpenedModal:ft}=wt(),Qe=!!ft,Ve=lt(),{quote:Le,setQuote:ot}=ta(),vt=vAt(),Rt=Xa(),{sources:jt}=rr(),{specialCapabilities:dn}=ls(),{lastResult:On,inFlight:yr,resultsLength:Ke}=Ht(),Xe=Jn(),gt=Z(),zt=f.useRef(null),[hn,zn]=f.useState(!1),Me=f.useCallback(()=>zn(!0),[]),Ze=f.useCallback(()=>zn(!1),[]),{cacheImageDownloadUrl:$e}=eW({reason:oe}),{variation:at,loading:ut}=xAt(!1),Bt=M&&!ut&&!at?On?.attachments:void 0,[gn,Gn]=f.useState(void 0),Zt=f.useMemo(()=>gn?.map(xr=>xr.url),[gn]),{value:Hr,loading:Ni}=jB({flag:"windows-app-dictation-config",defaultValue:XY}),td=f.useMemo(()=>Ni?XY:{eppoTranscriptionConfig:Hr,runImmediately:!0},[Hr,Ni]),fo=f.useMemo(()=>{if(e.length>um)return gt.formatMessage({defaultMessage:"Query is { numCharacters } characters too long",id:"yw04s2k4La"},{numCharacters:e.length-um})},[e,gt]),Al=f.useCallback(xr=>{if(!(ge.current||!ke)){if(ge.current=!0,!xr.query&&Zt&&Zt.length>0){const Ai=u5(Zt[0]);xr.query=Ai!=="File"?Ai:"File Attached"}fo?ge.current=!1:(setTimeout(()=>ge.current=!1,zV),A?.({query:xr.query,json:xr.json,attachments:Zt,promptSource:xr.promptSource,querySource:xr.querySource,mentions:xr.mentions}),gn?.forEach(Ai=>{Ai.file&&Ai.file.size>0&&hi(Ai.url)&&$e(Ai.url,Ai.resizedFile??Ai.file)}),(vt||K)&&zt.current?.clearFiles())}},[fo,Zt,A,vt,K,$e,gn,ke]);f.useEffect(()=>Xe.subscribeForceSubmitQuery(xr=>{Al(xr)}),[Xe,Al]);const{handleUpdateAutosuggestions:Wp}=F3t(),{isDisabled:Hp,focusedIndex:zp,setFocusedIndex:bt,userInputQuery:zr,handleSuggestionSubmission:zo,handleFocus:Uc,handleBlur:Gp,handleChange:ji,handleKeyDown:qp,focusInput:Il,hasQuery:nC}=yAt({value:e,json:t,querySource:n,disableSubmission:s,disableInput:a,autofocus:_,isUploadingFile:xe,onChange:P,onFocus:L,handleSubmit:Al,handleUpdateAutosuggestions:Wp,autosuggestionsEnabled:U,errorMessage:fo,sources:jt,attachments:Zt,selectedSearchMode:Rt,setIsInputActive:be,isInputActive:_e,inFlight:yr,resultsLength:Ke,quote:Le,isMentionMenuOpened:hn,isCometHome:X,reason:oe,placement:B});G3t({setInput:ji}),bAt({entropyBrowser:Xe,focusInput:Il,isSidecar:!!_At.NEXT_PUBLIC_IS_SIDECAR_BUILD}),f.useEffect(()=>{Se&&ue.current?.focus()},[ue,Se]),f.useEffect(()=>{Le&&Il()},[Le,Il]);const{deprecatedOpenToast:Ma}=Mn(),rC=f.useMemo(()=>({onStart:()=>{Il()},onStop:()=>{Il()},onSilence:()=>{Ma("No audio detected. Make sure your microphone is connected and unmuted","error",4)}}),[Il,Ma]),{startTranscription:Kp,stopTranscription:sC,error:Xx,isTranscribing:Yp,isInitializing:Zx,transcription:Rl}=Q3t({callbacks:rC,config:td,reason:oe});f.useEffect(()=>{Xx&&Ma(`Audio Error: ${Xx}`,"error",4)},[Xx,Ma]);const nd=f.useRef("");f.useEffect(()=>{if(!Yp){nd.current="";return}if(Rl&&Rl!==nd.current){const xr=Rl.startsWith(nd.current)?Rl.slice(nd.current.length).trim():Rl;if(xr){const Ai=e?` ${xr}`:xr;ue.current?.trim(),ue.current?.append(Ai),ji(ue.current?.value??"",ue.current?.json)}nd.current=Rl}},[Rl,Yp,e,ji,ue]);const{isAudioVideoFilesEnabled:aC}=P3t(),Qp=O3t(),{organization:Xp}=kn({reason:oe}),QN=f.useCallback(()=>ye(!0),[]),{handlePaste:iC,handlePasteQuery:Zp,handleCompleteFileUpload:XN,handleFileSelect:ZN,autoCreatedTextFile:Pl,dismissNotification:kr,setAutoCreatedTextFile:oC}=U3t({fileUploadRef:zt,showFileUpload:y,attachments:Zt,setAttachments:Gn,handleChange:ji,setIsUploadingFile:ye,focusInput:Il,onFileAttachComplete:se}),{fileInputRef:lC,errorMessage:Jx,warningMessage:cC,uploadSource:e0,uploadedFiles:Af,handleRemoveFile:uC,handleStartUpload:RG,handleFileInput:PG,isBoxOpen:OG,onCloseBox:LG,cleanupBoxPicker:DG,microsoftFilePickerOptions:FG,isMicrosoftFilePickerOpen:UG,handleSelectSharepointSite:BG,onCloseMicrosoft:VG,setErrorMessage:$G}=H3t({fileUploadRef:zt,disablePrivacyWarning:w,isAudioVideoFilesEnabled:aC,isClearAttachmentsEnabled:K||vt,isFollowUp:c,existingAttachments:Bt,organization:Xp,lastResult:On,onStartFileUpload:QN,onCompleteFileUpload:XN,setUploadsReady:et,reason:oe,incompleteParsingEnabled:Qp,specialCapabilities:dn,askInputRef:te,onRemoveFile:re}),WG=f.useCallback(()=>{if(Pl){if(ue.current?.append(Pl.content),ji(ue.current?.value??"",ue.current?.json),Zt){const xr=Zt.find(Ai=>Ai.includes(Pl.fileName));xr&&uC(xr)}oC(null)}},[Pl,ue,ji,Zt,uC,oC]),HG=f.useRef(e);HG.current=e;const zG=f.useCallback(xr=>{be(!0),HG.current.length===0&&Ee[Rt]&&Ae(Ee[Rt]),O?.(xr)},[be,Ae,Ee,Rt,O]),GG=f.useCallback(xr=>{ue.current=xr},[ue]),COe=f.useMemo(()=>({isOpen:(Re&&!N)??!1,suggestedQueries:Ne,focusedIndex:zp,setFocusedIndex:bt,handlePasteQuery:Zp,handleSubmit:zo,userInputQuery:zr,placement:B,dropdownClassName:D,allowNonSequentialMatch:Ne!==Ee[Rt],isCometHome:X,scrollableShards:Af.length>0?[Ge]:[]}),[Ee,D,B,zp,N,Zp,zo,X,Rt,bt,Re,Ne,Af,Ge,zr]),SOe=f.useMemo(()=>({initialLayout:i,wrapperClass:V({"transition-none p-lg":Re,"border-b-none rounded-b-none":Re&&!N&&B==="bottom","border-t-none rounded-t-none rounded-b-2xl":Re&&!N&&B==="top","bg-base":Le}),size:"large",hasShadow:b,isHighlighted:J,showStopButton:k,quote:Le??void 0,inputWarnings:Pl&&o.jsxs(H,{variant:"subtler",className:"mx-sm mb-xs px-sm py-xs dark:bg-base flex items-center justify-between rounded-lg",children:[o.jsx("div",{className:"gap-x-sm flex items-center",children:o.jsxs(F,{variant:"tiny",color:"light",children:["Text is"," ",Math.max(1,Math.round((Pl.content.length-um)/um*100)),"% over the limit and is attached as a file."," ",o.jsx(Te,{variant:"super",size:"tiny",onClick:WG,text:"Paste as text"})]})}),o.jsx(Te,{icon:It,size:"tiny",onClick:kr,variant:"common",pill:!0,noPadding:!0})]}),attachmentsList:Af.length>0&&me&&o.jsx(Pke,{uploadedFiles:Af,onRemoveFile:uC,incompleteParsingEnabled:Qp,ref:Ge}),setQuote:ot,inputRef:ue}),[Pl,kr,B,N,uC,b,i,ue,Qp,WG,Le,ot,k,Re,Af,J,me]),EOe=f.useMemo(()=>({ref:GG,id:"ask-input",value:e,json:t,initialLayout:i,minRows:l,placeholder:r,disableInput:a,autoFocus:_,onClick:zG,onChange:ji,onKeyDown:qp,onBlur:Gp,onFocus:Uc,onPaste:iC,onMentionMenuOpen:Me,onMentionMenuClose:Ze,isMobileStyle:st,isMobileUserAgent:it,useLexical:z,mentionTypeaheadOptions:z?$:void 0,onTriggerTypeahead:z?Y:void 0}),[_,a,Gp,ji,zG,Uc,qp,iC,i,st,it,t,$,l,Ze,Me,Y,r,GG,z,e]),MOe=f.useMemo(()=>o.jsx(Rke,{value:e,json:t,showSources:d,useThreadSources:m,showRecency:p,submitWillFork:u,isFollowUp:c,isDisabled:Hp||!ke,querySource:n,errorMessage:fo,handleSubmit:Al,fileUploadRef:zt,showFileUpload:y,showModelSelector:h,disableActionButtons:x,fileUploadTooltip:C,disablePrivacyWarning:w,showStopButton:k,onStopButtonClick:j,onFilePickerOpen:T,onFilePickerClose:I,startTranscription:Kp,stopTranscription:sC,isTranscribing:Yp,isTranscriptionInitializing:Zx,isTranscriptionAvailable:!k,fileUploadErrorMessage:Jx,fileUploadWarningMessage:cC,activeConnector:e0,uploadedFiles:Af,handleStartUpload:RG,handleFileInput:PG,isBoxFilePickerOpen:OG,handleCloseBoxFilePicker:LG,cleanupBoxFilePicker:DG,microsoftFilePickerOptions:FG,handleCloseMicrosoftFilePicker:VG,handleSelectSharepointSite:BG,isMicrosoftFilePickerOpen:UG,fileInputRef:lC,hasQuery:nC,isAudioVideoFilesEnabled:aC,setAttachmentErrorMessage:$G,isCometHome:X,isMissionControl:K}),[e0,DG,x,w,fo,lC,Jx,C,cC,LG,PG,BG,RG,Al,nC,aC,OG,Hp,c,Zx,UG,Yp,t,FG,VG,I,T,j,n,$G,y,h,p,d,m,k,Kp,sC,u,Af,ke,e,X,K]),{isMax:kOe}=Et();return o.jsx(Fke,{condition:Ve&&y,Wrapper:OB,onDrop:ZN,disabled:Qe,allowDropAnywhere:!0,children:o.jsxs(H,{variant:"subtler",className:V(S,"relative rounded-2xl",{"max-super-override":kOe}),children:[E,o.jsx(OMe,{value:e,suggestDropdownProps:COe,ResizeableInputWrapperProps:SOe,ResizeableInputProps:EOe,syncUncontrolledOnce:q,leftAttributionComponents:W?null:o.jsx(SV,{inRenderingPlace:"sidecar",children:o.jsx(ike,{showIncognitoHint:v,showSearchModeSelector:g,isFollowUp:c,layoutKey:G})}),rightAttributionComponents:MOe})]})})},Cw=R.memo(wAt);Cw.displayName="AskInput";const CAt=(e=!1,t)=>{const{fetchVariation:n}=Dt({flag:"comet-onboarding",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id",skip:!0});return n},SAt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"try-assistant-page-enabled",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function EAt(){const{value:e}=qu({flag:"comet-ntp-welcome-suggestions",subjectType:"visitor_id",defaultValue:{groups:[]}});return e}const MAt=we(async()=>{const{WelcomeOverlay:e}=await Q(async()=>{const{WelcomeOverlay:t}=await import("./WelcomeOverlay-Cd9ZE4RE.js");return{WelcomeOverlay:t}},__vite__mapDeps([109,3,1,4,5,6]));return{default:e}}),kAt=e=>e.reduce((t,n)=>n.condition==="ALWAYS"?[...t,...n.suggests.map(r=>({query:r,icon:n.icon,image:n.image}))]:t,[]),Uke=R.memo(()=>{const e=f.useRef(null),{$t:t,locale:n}=Z(),r=_t(),s=Ut(),{trackEvent:a}=je(),[i,l]=f.useState(!1),[c,u]=f.useState(!0),[d,m]=f.useState(!1),[p,h]=f.useState(!1),g=f.useRef(null),y=Jn(),x=f.useRef(null),{isMobileStyle:v}=Ce(),b=S3t(),_=Zyt(),{variation:w,loading:C}=SAt(!1),S=CAt(!1),E=lt(),{openVisitorLoginUpsell:M}=gr({enabled:!E}),k=f.useMemo(()=>Oe.getItem("hasSeenSignupModal"),[]),N=f.useMemo(()=>fP()===0,[]);f.useEffect(()=>{const $=_[0];$&&(Qs.preload($.videoSrc,{as:"video"}),Qs.preload($.previewSrc,{as:"image"}))},[_]);const P=uAt({cometBrowser:y,type:"welcome-modal",locale:n}),L=EAt(),O=f.useMemo(()=>kAt(L.groups),[L]),A=f.useCallback(()=>{if(!E)return;const $=Oe.getItem("hasClosedWelcomeModal"),X=Oe.getItem("hasSeenInviteFriendsModal");if(!C){if(!X&&N){m(!0);return}if(w){if($)return;Oe.setItem("hasClosedWelcomeModal","true");try{y.openTab({url:`${window.location.origin}/b/try-assistant`,key:"openTryAssistant"})}catch{window.location.href="/b/try-assistant"}a("new signup ntp education viewed");return}$?u(!1):(a("new signup ntp education viewed"),l(!0))}},[E,w,y,a,C,N]),j=f.useCallback(()=>{m(!1),Oe.setItem("hasSeenInviteFriendsModal","true"),A()},[A]),T=f.useCallback(()=>!E&&k!=="true"?(M({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:De.COMET_NTP,sheetModalVariant:"centered-sheet"}),Oe.setItem("hasSeenSignupModal","true"),!0):!1,[E,k,M,t]);f.useEffect(()=>{const $=tLe();N&&!$&&S().then(q=>{if(nLe(),q){try{y.openTab({url:`${window.location.origin}/onboarding-comet`,key:"openCometOnboarding"})}catch{window.location.href="/onboarding-comet"}return}else{if(T())return;A()}})},[C,A,T,s,S,E,N,y]),f.useEffect(()=>{s?.get("tryAssistant")==="true"&&E&&(u(!0),l(!0),a("new signup ntp education viewed"),ny({tryAssistant:void 0}))},[s,E,a]);const I=f.useCallback(()=>{if(E)if(w){u(!1);try{y.openTab({url:`${window.location.origin}/b/try-assistant`,key:"tryAssistantButtonClick"})}catch{r.push("/b/try-assistant")}return}else c||u(!0),l(!0),a("ntp education selected");else M({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:De.TRY_ASSISTANT_BUTTON,sheetModalVariant:"centered-sheet"})},[r,E,M,t,c,a,w,y]),U=Tde(),B=f.useCallback(()=>{l(!1)},[]),D=()=>{navigator.geolocation.getCurrentPosition(ne.info)},W=f.useCallback(()=>{D(),h(!0)},[]),z=f.useMemo(()=>E&&U,[E,U]);return o.jsxs("div",{ref:e,className:"mx-auto flex size-full flex-col",style:v?void 0:{marginLeft:Kh*-.5+"px"},children:[o.jsx(ve.div,{initial:{paddingBottom:80},animate:{paddingBottom:p?320:80},exit:{paddingBottom:80},transition:no,className:"px-md relative isolate mx-auto flex w-full max-w-[800px] grow flex-col items-center justify-center pb-[80px]",children:o.jsx(p2e,{containerRef:e,editMode:p,setEditMode:h,askInput:o.jsx(fH,{})})}),o.jsxs("div",{className:"gap-sm fixed bottom-0 left-1/2 mt-auto flex w-full max-w-[800px] -translate-x-1/2 justify-center py-6 pt-12",children:[o.jsx("div",{ref:g,children:o.jsx(pe,{pill:!0,size:"small",variant:"border",icon:wi,text:t({defaultMessage:"Try Assistant",id:"E4vPUv5Uqt"}),extraCSS:"z-[2] relative",onClick:I})}),z&&o.jsx(pe,{pill:!0,size:"small",variant:"border",icon:Yue,text:t({defaultMessage:"Background Assistants",id:"UmjY7aC43f"}),extraCSS:"z-[2] relative",href:"/b/assistants"}),o.jsx(pe,{pill:!0,size:"small",variant:"border",icon:T7e,text:t({defaultMessage:"Edit widgets",id:"T1DvA9w3pt"}),extraCSS:"z-[2] relative",onClick:W}),b&&o.jsx(h2e,{pill:!0,size:"small",variant:"border",extraCSS:"z-[2] relative"}),o.jsx("div",{style:{maskImage:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 75%)"},className:"bg-base absolute inset-0"})]}),c&&Qs.createPortal(o.jsx(MAt,{isOpen:i,onClose:B,suggestions:P.length?P:O,suggestionsScrollContainerRef:x,buttonRef:g}),document.body),d&&o.jsx(n_e,{isOpen:d,onClose:j})]})});Uke.displayName="CometHomePage";const fH=R.memo(()=>o.jsx(bc,{children:o.jsx(NAt,{})}));fH.displayName="Input";const TAt=R.memo(()=>o.jsxs(o.Fragment,{children:[o.jsx(fH,{}),o.jsx("div",{className:"pt-md h-2xl w-full",children:o.jsx(hT,{context:"sortable-widgets"})})]}));TAt.displayName="InputWrapper";const NAt=()=>{const e="comet-ask-input",{mentionTypeaheadOptions:t,inputPlaceholder:n,onTriggerTypeahead:r}=xT({reason:e,isLazy:!0}),[s,a,i]=F5({csrRedirect:!0});return o.jsx(H,{className:V("static flex w-full flex-col items-center justify-center md:mt-0","z-10"),children:o.jsx("div",{className:"mb-md w-full",children:o.jsx(Cw,{...i,value:s,json:a,querySource:"home",autofocus:!0,minRows:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!0,dropdownPlacement:"bottom",useLexical:!0,mentionTypeaheadOptions:t,placeholder:n??i.placeholder,isCometHome:!0,onTriggerTypeahead:r})})})},Bke=Yt("SearchSideContainerContext",{container:null,setContainer:()=>{},isOpen:!1,setIsOpen:()=>{},width:720,setWidth:()=>{},isResizing:!1,setIsResizing:()=>{}}),Vke=R.memo(({children:e})=>{const[t,n]=f.useState(null),r=720,{isXLargeScreen:s}=Pp(),[a,i]=O_("search-side-content-width",r),[l,c]=f.useState(!1),[u,d]=f.useState(()=>{if(typeof window<"u"){const y=window.innerWidth;return a||(s?Math.min(800,y*.5):y*.6)}return r}),[m,p]=f.useState(!1),h=f.useCallback(y=>{d(y),i(y)},[i,d]),g=f.useMemo(()=>({container:t,setContainer:n,isOpen:l,setIsOpen:c,width:u,setWidth:h,isResizing:m,setIsResizing:p}),[t,n,l,c,u,h,m,p]);return o.jsx(Bke.Provider,{value:g,children:e})});Vke.displayName="SearchSideContainerProvider";const Lx=()=>f.useContext(Bke),jAt=f.memo(({children:e,title:t,onClose:n,toolbarContent:r,resizable:s=!1})=>{const{container:a,setIsOpen:i}=Lx();return f.useEffect(()=>{i(!0)},[i]),xf(()=>{i(!1)}),a?Qs.createPortal(o.jsx(Wke,{title:t,onClose:n,toolbarContent:r,resizable:s,children:e}),a):null}),$ke=f.memo(({containerRef:e})=>{const{setWidth:t,setIsResizing:n,isResizing:r}=Lx(),s=f.useRef(null);xf(()=>{s.current&&s.current()});const a=f.useCallback(i=>{i.preventDefault(),n(!0),document.body.style.userSelect="none",document.body.style.cursor="col-resize";const l=i.clientX,c=e.current?.offsetWidth??0,u=p=>{const h=p.clientX-l,g=c-h;t(g)},d=()=>{n(!1),document.body.style.userSelect="",document.body.style.cursor="",document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m),document.removeEventListener("contextmenu",m),s.current=null},m=()=>{d()};document.addEventListener("mousemove",u),document.addEventListener("mouseup",m),document.addEventListener("contextmenu",m),s.current=d},[t,n,e]);return o.jsxs("div",{className:"group absolute inset-y-0 left-0 z-10 hidden cursor-col-resize xl:block",children:[o.jsx(H,{variant:"background",className:"absolute inset-y-0 left-0 h-full w-px",children:o.jsx("div",{className:V("group-hover:bg-super duration-normal bg-subtle pointer-events-none absolute inset-0 origin-center group-hover:scale-x-[250%]",{"!bg-super scale-x-[250%] delay-0":r,"delay-0 group-hover:delay-300":!r})})}),o.jsx(H,{variant:"background",className:V("left-half py-two duration-quick absolute top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full group-hover:!opacity-0",{"!opacity-0 delay-0":r,"delay-0 group-hover:delay-300":!r}),children:o.jsx(H,{variant:"textColor",className:"w-two h-5 rounded-full opacity-20"})}),o.jsx("div",{className:"absolute top-0 h-full w-5 -translate-x-1/2 cursor-col-resize",onMouseDown:a})]})});$ke.displayName="ResizeHandle";const Wke=f.memo(({children:e,title:t,onClose:n,toolbarContent:r,resizable:s=!1})=>{const{isResizing:a}=Lx(),i=f.useRef(null);return o.jsxs("div",{ref:i,className:"group/search-side-content relative flex h-full min-h-0 flex-1 flex-col",children:[s&&o.jsx($ke,{containerRef:i}),o.jsxs(H,{variant:"background",className:"h-headerHeight gap-sm px-md erp-tab:rounded-none sticky top-0 flex items-center rounded-t-lg border-b",children:[t&&o.jsx(F,{variant:"baseSemi",className:"truncate",children:t}),o.jsx("div",{className:"gap-sm flex flex-1 items-center",children:r}),o.jsx(Te,{icon:It,onClick:n,size:"small",pill:!0,variant:"common"})]}),o.jsxs(H,{variant:"background",className:"md:gap-xs erp-tab:rounded-none scrollbar-subtle relative isolate h-0 flex-1 overflow-y-auto overflow-x-hidden rounded-b-lg bg-clip-border shadow-sm",children:[e,a&&o.jsx("div",{className:"absolute inset-0"})]})]})});Wke.displayName="SearchSideContentBody";const Hke=f.memo(()=>{const{isMobileStyle:e}=Ce(),{setContainer:t,isOpen:n,isResizing:r}=Lx(),s=zke(),{isXLargeScreen:a}=Pp();return e?o.jsx(on,{variant:"full-sheet",isOpen:n,headerClassname:"hidden",wrapperClassname:"flex-1 !px-0 !pb-0",modalContentClassname:"min-h-0 !flex-1 !p-0",children:o.jsx("div",{ref:t,className:"flex h-full min-h-0 flex-1 flex-col"})}):o.jsx(H,{className:V("fixed inset-y-0 right-0 z-[100] flex h-full w-[60vw] min-w-0 flex-1 flex-col text-clip border-l shadow-lg transition-transform duration-200 xl:w-[calc(min(800px,_50vw))] xl:border-l-0 xl:shadow-none",{"pointer-events-none w-0 translate-x-full opacity-0":!n,"duration-quick transition-transform":!r}),style:{width:n&&a?s:void 0},ref:t})});Hke.displayName="SearchSideContentWrapper";jAt.displayName="SearchSideContent";const zke=()=>{const{width:e}=Lx(),{width:t}=Rct(),{isSidebarPinned:n}=_n();return f.useMemo(()=>`calc(max(500px,min(calc(100vw - ${n?720:520}px),${e/t*100}vw)))`,[e,t,n])},Gke=f.memo(({children:e})=>{const{isOpen:t,isResizing:n}=Lx(),{isXLargeScreen:r}=Pp(),s=zke();return o.jsx("div",{className:V("flex size-full flex-1",{"duration-0":n,"duration-200":!n}),style:{transition:n?"none":"padding 0.2s ease-in-out",paddingRight:t&&r?s:void 0},children:e})});Gke.displayName="SearchSideContentLayoutWrapper";const ES=30,$T=({autoFetch:e,reason:t})=>{const{session:n}=Nt(),r=xt(),s=async({pageParam:h=0})=>{(!h||h<0)&&(h=1);const g=(h-1)*ES;return await ert({params:{limit:ES,offset:g},reason:t})},a=$u({queryKey:xn,enabled:e&&!!n,initialPageParam:0,queryFn:({pageParam:h})=>s({pageParam:h}),getNextPageParam:(h,g)=>h&&h[0]?.has_next_page?g.length+1:void 0}),i=a.data?.pageParams?.length??1,l=a.data?.pages??fe,c=f.useMemo(()=>l.flat(),[l]),u=l[l.length-1]?.[0]?.has_next_page,d=f.useMemo(()=>({currentPage:i,hasNextPage:!!u,hasPreviousPage:i>1,getNextPage:()=>a.fetchNextPage(),getPreviousPage:()=>a.fetchPreviousPage()}),[i,u,a]),m=f.useCallback(h=>{const g=[],y=[];let x=0;for(;x<h.length;)y.push(g.length),g.push(h.slice(x,x+ES)),x+=ES;r.setQueryData(xn,{pages:g,pageParams:y})},[r]),p=f.useCallback(()=>{!d.hasNextPage||a.isLoading||d.getNextPage()},[a.isLoading,d]);return f.useMemo(()=>({...a,fetchNextPage:p,collections:c,paginationInfo:d,updateCache:m}),[c,p,d,a,m])},AAt=({reason:e})=>{const{collections:t}=$T({autoFetch:!0,reason:e}),{data:n}=u0e({reason:e}),r=t?.filter(i=>!Jg(i.user_permission)),s=n?.[0]?.link;return r?.length===0?"/spaces/templates/":s||"/spaces/templates/"};function IAt(e){return e==="you"||e==="top"||e==="trending"?null:e}const qke=R.memo(e=>{const{$t:t}=Z(),{isMobileStyle:n}=Ce();return o.jsx(on,{...e,title:t({defaultMessage:"Make it yours",id:"RBKgNODPrT"}),variant:n?"bottom-left-sheet":void 0,children:o.jsx("div",{className:"mb-safeAreaInsetBottom md:-m-md md:-mb-10",children:o.jsx("div",{className:"-m-md md:m-0",children:o.jsx(Kke,{title:t({defaultMessage:"Select topics and interests to customize your Discover experience",id:"EmIFJDqmup"}),onSave:e.onSave,discoverTopicMap:e.discoverTopicMap,userSelectedTopics:e.userSelectedTopics})})})})});qke.displayName="InterestConfigurationSheet";const Kke=R.memo(({title:e,subtitle:t,onClose:n,onSave:r,discoverTopicMap:s,userSelectedTopics:a,variant:i})=>{const{$t:l}=Z(),[c,u]=f.useState(a),d=lt(),{openVisitorLoginUpsell:m}=gr({enabled:!d}),{trackEvent:p}=je();f.useEffect(()=>{p("discover topics picker opened",{})},[p]);const h=f.useCallback(()=>{m({title:l({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:De.DISCOVER_TOPICS,sheetModalVariant:"bottom-sheet-gradient"})},[l,m]),g=v=>{if(p(c.includes(v)?"discover topic unselected":"discover topic selected",{topicUUID:IAt(v)}),!d){h();return}u(b=>b.includes(v)?b.filter(_=>_!==v):b.concat(v))},y=f.useCallback(()=>{if(p("discover topics picker saved",{}),!d){h();return}r(c)},[c,d,r,h,p]),x=f.useCallback(v=>{v.stopPropagation()},[]);return o.jsxs(H,{variant:"background",className:"p-md relative rounded-xl",onClick:x,children:[o.jsxs("div",{className:"relative z-[2]",children:[o.jsxs("div",{className:"mb-md flex items-start justify-between",children:[o.jsxs("div",{children:[e&&o.jsx(F,{variant:"baseSemi",children:e}),t&&o.jsx(F,{color:"light",variant:"small",children:t})]}),n&&o.jsx(Te,{icon:It,size:"tiny",pill:!0,onClick:n,extraCSS:"-mt-sm -mr-sm hover:!bg-inverse/5"})]}),o.jsx("div",{className:"gap-sm flex flex-wrap",children:Object.values(s).map(v=>v.isAlwaysShown?null:o.jsx(Yke,{topic:v.id,topicData:v,onClick:g,selected:c.includes(v.id)},v.id))}),o.jsx("div",{className:"mt-md bg-inverse h-px opacity-10"}),o.jsx("div",{className:"mt-md",children:o.jsx(pe,{text:l({defaultMessage:"Save Interests",id:"YbI1HM86Ih"}),variant:"primary",size:"small",extraCSS:"w-full",onClick:y})})]}),i==="offset"&&o.jsx("div",{className:"rounded-inherit absolute inset-0 z-[1] dark:bg-black",children:o.jsx("div",{className:"bg-super/10 dark:bg-super/25 dark:border-super/5 rounded-inherit absolute inset-0 z-[1] dark:border"})})]})});Kke.displayName="InterestConfigurationBox";const Yke=R.memo(({topic:e,topicData:t,selected:n,onClick:r})=>o.jsxs(ve.button,{className:V("px-sm py-xs inline-flex cursor-pointer items-center gap-1.5 rounded-md duration-150 active:scale-[0.95]",{"bg-super/15 dark:bg-white/5":!n},{"bg-super":n}),onClick:()=>r(e),children:[o.jsx(Je,{mode:"popLayout",initial:!1,children:o.jsx(ve.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2,type:"spring",bounce:.2},children:o.jsx(le,{icon:n?AD:t.icon,size:"sm",className:V({"text-quiet":!n},{"text-inverse":n})})},n?`selected-${e}`:e)}),o.jsx(F,{variant:"small",className:V({"text-quiet":!n},{"text-inverse":n}),children:t.name})]}));Yke.displayName="InterestPill";const RAt={palette:I7e,flask:A7e,tv:Xue,microchip_ai:ID,dollar_circle:j7e,medal:wD,plane:Uk,paint_brush:Que},PAt=({allTopics:e})=>{const{$t:t}=Z();return f.useMemo(()=>[{id:"you",slug:"you",name:t({defaultMessage:"For You",id:"5KhEnUXBTF"}),icon:N7e,description:t({defaultMessage:"Stories curated for you",id:"2sibbc2gbI"}),isAlwaysShown:!0},{id:"top",slug:"top",name:t({defaultMessage:"Top",id:"X/9XdXSCBu"}),icon:vP,isAlwaysShown:!0},...e.map(r=>({id:r.id,name:r.translated_name??r.name,icon:RAt[r.icon]??vP,slug:r.slug}))],[e,t])},OAt=({reason:e})=>{const t=xt();return St({mutationKey:["discover_update_topics",{}],mutationFn:r=>N1t({topics:r,reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:bye()}),t.invalidateQueries({queryKey:Zc()})}})},XM=f.memo(()=>o.jsx(wn,{speed:"slow",className:"flex flex-col gap-2",children:Array.from({length:4}).map((e,t)=>o.jsxs(H,{className:V("grid place-items-center",{"w-[90%]":t===0||t===1,"w-[70%]":t===2,"w-[60%]":t===3}),children:[o.jsx(F,{variant:"small",className:"opacity-0",style:{gridArea:"1/-1"},children:""}),o.jsx(H,{variant:"subtle",className:"h-2 w-full rounded-full",style:{gridArea:"1/-1"}})]},t))}));XM.displayName="SidebarListLoader";const Ub=f.memo(({children:e})=>o.jsx("div",{className:"flex flex-col gap-[10px]",children:e}));Ub.displayName="SidebarSubMenu";const Bb=f.memo(()=>o.jsx("div",{className:"bg-subtle h-px"}));Bb.displayName="SidebarDivider";const Cy=f.memo(({text:e,accessory:t,className:n,href:r,onClick:s,onMouseOver:a,testId:i})=>{const l=o.jsx(F,{variant:"tiny",color:"light",className:"group-hover:text-foreground",children:e}),c=r?o.jsxs(Ye,{href:r,className:"group relative block",onClick:s,onMouseOver:a,"data-testid":i||"library-button",draggable:!1,children:[o.jsx(H,{variant:"subtle",className:"-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100"}),o.jsxs("span",{className:"relative flex items-center gap-0.5",children:[l,o.jsx(Zn,{className:"text-quiet group-hover:text-foreground -me-xs duration-quick size-4 opacity-0 group-hover/header:opacity-100 rtl:rotate-180"})]})]}):l;return o.jsxs("div",{className:V("group/header gap-xs flex h-6 items-center justify-between",n),children:[c,o.jsx(Je,{initial:!1,children:t&&o.jsx(ve.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:t})})]})});Cy.displayName="SidebarSubMenuHeader";const xL=f.memo(({href:e,text:t,onMouseOver:n,onClick:r})=>o.jsx(Ye,{href:e,className:"block",onMouseOver:n,onClick:r,children:o.jsx(F,{variant:"tinyRegular",color:"light",className:"duration-quick hover:opacity-60",children:t})}));xL.displayName="SidebarLink";const qs=f.memo(({href:e,text:t,icon:n,fadeOut:r,onClick:s,selected:a,deemphasized:i,menuItems:l,testId:c,sidebarOpen:u,accessory:d,loading:m,id:p})=>{const h=xx(),{openDropdownId:g,setOpenDropdownId:y}=HVt(),x=o.jsxs(o.Fragment,{children:[o.jsx(H,{variant:"subtle",className:V("-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100",{"opacity-100":a||g===p})}),o.jsxs(F,{className:"relative flex items-center gap-2",variant:"small",color:i?"light":void 0,children:[n&&(f.isValidElement(n)?n:o.jsx(le,{icon:n,className:"size-[18px]"})),o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:r?h?"linear-gradient(to left, black 85%, transparent 97%)":"linear-gradient(to right, black 85%, transparent 97%)":void 0},children:t}),o.jsx(Je,{initial:!1,children:d&&o.jsx(ve.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:d})}),l&&u&&!m&&o.jsxs(H,{as:"span",style:{maskImage:h?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},variant:"underlay",className:V("bg-subtle ps-md -end-xs duration-quick absolute top-1/2 inline-flex -translate-y-1/2 translate-x-px opacity-0 group-hover:opacity-100",{"opacity-100":g===p}),children:[o.jsx(H,{variant:"subtle",className:"p-xs pointer-events-none absolute inset-0 flex items-center justify-end"}),o.jsx(sn,{isMobileStyle:!1,items:l,placement:h?"left":"right",isOpen:g===p,onOpen:()=>{y(p)},onClose:()=>{y(null)},children:o.jsx("div",{onClick:v=>{v.preventDefault()},className:"hover:bg-inverse/5 p-xs duration-quick rounded",children:o.jsx(le,{icon:$d,size:14,className:"text-quiet"})})})]}),m&&o.jsx("span",{style:{maskImage:h?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},className:V("group-hover:bg-subtle text-super ps-md -end-xs absolute top-1/2 -translate-x-0.5 -translate-y-1/2",{"bg-subtle":a,"bg-subtler":!a}),children:o.jsx("div",{className:"flex size-[14px] items-center justify-center",children:o.jsx(Zr,{size:12})})})]})]});return e?o.jsx(Ye,{href:e,className:"group relative block","data-testid":c,draggable:!1,children:o.jsx("div",{className:"group relative block",onClick:s,children:x})}):o.jsx("button",{onClick:s,className:"group relative block appearance-none text-left",type:"button","data-testid":c,children:x})});qs.displayName="SidebarSubMenuItem";function LAt({userSelectedTopics:e,topics:t}){const n=e.map(s=>s.id);return Object.fromEntries(t.map(s=>{const a={...s,userSelected:n.includes(s.id)};return[s.id,a]}))}const sae=e=>{const t=e?.split("/").slice(1);return t?t[1]:null},Qke=f.memo(({isConfiguring:e,setConfiguring:t,sidebarOpen:n})=>{const r="discover-sidebar",s=lt(),a=Ft(),{data:i,isLoading:l}=T1t(),c=lt(),u=PAt({allTopics:i?.allTopics??fe}),d=i?.userSelectedTopics??fe,m=LAt({userSelectedTopics:d,topics:u}),p=d.length>0?"selected":"default",h=f.useCallback(_=>_.id==="top"||_.id==="trending"?!0:_.id==="you"?s:p==="default"?!0:!!_.userSelected,[p,s]),g=f.useMemo(()=>{const _=[],w=[];return Object.values(m).map(C=>{const{name:S,icon:E,slug:M}=C;h(C)?_.push({text:S,icon:E,link:`/discover/${M}`,active:sae(a)===M}):w.push({text:S,icon:E,link:`/discover/${M}`,active:sae(a)===M})}),{activeItems:_,overflowItems:w}},[m,h,a]),y=d.map(_=>_.id),x=OAt({reason:r}),v=_=>{x.mutate(Array.from(_)),e&&t(!1)},{$t:b}=Z();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-[12px]",children:[o.jsx(Cy,{text:b({defaultMessage:"Topics",id:"kc79d3WUbd"})}),l?o.jsx(XM,{}):o.jsx(Ub,{children:g.activeItems.map(_=>o.jsx(qs,{id:_.text,href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))}),g.overflowItems.length>0&&c&&o.jsxs(o.Fragment,{children:[o.jsx(Cy,{text:b({defaultMessage:"More",id:"I5NMJ8llIi"})}),o.jsx(Ub,{children:g.overflowItems.map(_=>o.jsx(qs,{id:_.text,href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))})]})]}),o.jsx(qke,{isOpen:e,onClose:()=>t(!1),onSave:v,discoverTopicMap:m,userSelectedTopics:y})]})});Qke.displayName="DiscoverSidebar";const z2="recentItems";async function DAt({reason:e}){try{const t=await ae.GET("/rest/thread/list_recent",e),n=t.data;if(!t.response.ok)throw new Error("Failed to get recent threads.");return n??fe}catch(t){return ne.error("Failed to get recent threads.",t),fe}}const FAt=({reason:e})=>{const{isIncognito:t}=Qa({reason:e}),{inFlightLatest:n}=Ht(),{session:r}=Nt(),s=r?.user?.email,{data:a,refetch:i,isLoading:l}=We({queryKey:[z2,s],queryFn:async()=>!s||t?fe:await DAt({reason:e})});return f.useEffect(()=>{n||i({cancelRefetch:!1})},[n,i]),f.useMemo(()=>!s||t?{data:[],isLoading:!1}:{data:a??fe,isLoading:l},[a,s,t,l])},UAt={about:Cu,born:e4,age:e4,died:e4,parents:hP,siblings:hP,children:$7e,spouse:bP,spouses:bP,education:v1,educated_at:v1,net_worth:V7e,ratings:vP,directed_by:Jue,starring:Cu,watch_on:Uue,treatment:B7e,symptoms:U7e,specialists:F7e};function BAt(e){return e&&UAt[e]||null}const VAt={EXTERNAL_LINK_TYPE_UNSPECIFIED:_1,PRIMARY:_1,WIKIPEDIA:D7e,X:L7e,INSTAGRAM:O7e,TIKTOK:P7e,YOUTUBE:Zue,FACEBOOK:R7e,MAYOCLINIC:io,IMDB:Tue};function aae(e){return VAt[e]}const Xke=Yt("PanelContext",{menuItems:void 0}),Dx=()=>{const e=f.useContext(Xke);if(!e)throw new Error("usePanel must be used within PanelContext");return e},br=({children:e,menuItems:t,variant:n,className:r})=>o.jsx(Pr,{fallback:null,children:o.jsx(Xke.Provider,{value:{menuItems:t},children:n==="noChrome"?o.jsx(H,{className:r||"mb-md",children:e}):o.jsx(un,{shadow:!0,className:`${r||"mb-md"} p-md`,children:e})})}),$At=({menuItems:e,buttonClass:t,placement:n})=>{const{isMobileStyle:r}=Ce();return e.length<=0?null:o.jsx(sn,{items:e,isMobileStyle:r,placement:n,children:o.jsx(Te,{size:"tiny",pill:!0,icon:$d,extraCSS:t})})},WAt=({title:e,href:t,subtitle:n,image_url:r,links:s,children:a,entryUUID:i,data:l})=>{const{trackEvent:c}=je(),u=f.useCallback(d=>{c("knowledge card link clicked",{label:"social media",socialMediaType:d.type,value:d.url,entryUUID:i,type:l?.type??"",name:l?.title??"",id:l?.source_url??""})},[l?.source_url,l?.title,l?.type,i,c]);return o.jsx(H,{className:"gap-sm flex w-full justify-between",children:o.jsxs("div",{className:"gap-md flex grow items-start",children:[r?o.jsx("div",{className:"flex-none",children:o.jsx(Ss,{imageClassName:"size-[120px] object-cover object-top",rounded:"md",src:r,alt:e,includeLightBoxModal:!1})}):null,o.jsxs("div",{className:"flex h-full grow flex-col",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"gap-sm mb-two flex items-start",children:[o.jsx(F,{variant:"section-title",className:"flex-1",children:t?o.jsx(Ye,{href:t,target:"_blank",className:"hover:text-super flex-1 duration-150",children:e}):e}),a]}),n&&o.jsx(F,{variant:"small",className:"mb-sm mr-sm text-pretty",children:n})]}),s&&s.length>0&&o.jsx("div",{className:"gap-sm flex flex-wrap",children:s.map(d=>o.jsx(Zke,{link:d,solo:s.length===1,handleLinkClick:u},d.type))})]})]})})},Zke=R.memo(({link:e,solo:t,handleLinkClick:n})=>{const r=f.useCallback(()=>n(e),[n,e]);return t?o.jsx(pe,{icon:aae(e.type),text:e.title,textClassName:"font-normal ml-2xs text-quiet ",size:"tiny",href:e.url,target:"_blank",onClick:r},e.url):o.jsx(pe,{icon:aae(e.type),size:"tiny",href:e.url,target:"_blank",onClick:r},e.type)});Zke.displayName="ButtonFactory";const HAt=({name:e,title:t,value:n})=>{const r=BAt(e);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-sm flex min-w-[120px]",children:[r&&o.jsx(F,{variant:"smallBold",color:"light",className:"w-5",children:o.jsx(le,{icon:r,size:"sm"})}),o.jsx(F,{variant:"smallBold",color:"light",children:t})]}),o.jsx(F,{variant:"small",children:n})]})},zAt=({children:e})=>o.jsx(H,{className:"pt-sm px-md border-t",children:e});br.Title=WAt;br.Item=HAt;br.Menu=$At;br.Footer=zAt;const Jke=R.memo(({graphData:e})=>{const[t,n]=f.useState(!1),r=e.url,s=e.name,a=f.useCallback(()=>n(!1),[]);return o.jsxs("div",{className:"flex justify-center",children:[o.jsx("img",{src:r,alt:s,className:"max-h-[50vh] overflow-hidden rounded align-middle",onClick:()=>n(!0)}),o.jsx(e3e,{isOpen:t,onClose:a,alt:s,src:r})]})});Jke.displayName="StaticImageGraph";const e3e=R.memo(({isOpen:e,onClose:t,alt:n,src:r})=>{const s=f.useCallback(()=>t(!1),[t]);return o.jsxs(on,{onClose:s,isOpen:e,variant:"hide-chrome",disableAnimation:!1,children:[o.jsx("div",{className:"flex place-content-center",onClick:()=>t(!1),children:o.jsx("div",{className:"gap-xs p-md md:p-xl flex flex-col items-center justify-between",children:o.jsx("div",{className:"grow",children:o.jsx("img",{alt:n,src:r,className:"max-h-[50vh]"})})})}),o.jsx(pe,{onClick:s,icon:It,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});e3e.displayName="ImageModal";const t3e=R.memo(({graphData:e})=>o.jsxs(br,{className:"gap-md bg-subtler p-md flex flex-col rounded-md text-center",children:[o.jsx(br.Title,{title:e.name,subtitle:""}),o.jsx(Jke,{graphData:e})]}));t3e.displayName="GraphPanel";const GAt={pendingClarifications:[],addClarification:()=>{},clearClarifications:()=>{}},n3e=Yt("DeepResearchContext",GAt),qAt=({children:e})=>{const[t,n]=f.useState([]),r=f.useCallback(i=>{n(t.concat([i]))},[t]),s=f.useCallback(()=>{n([])},[]),a={pendingClarifications:t,clearClarifications:s,addClarification:r};return o.jsx(n3e.Provider,{value:a,children:e})},mH=()=>{const e=f.useContext(n3e);if(!e)throw new Error("useDeepResearchState must be used within DeepResearchContext");return e};var Fl={},iae;function KAt(){if(iae)return Fl;iae=1;var e=Fl&&Fl.__values||function(s){var a=typeof Symbol=="function"&&s[Symbol.iterator],i=0;return a?a.call(s):{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}}},t=Fl&&Fl.__read||function(s,a){var i=typeof Symbol=="function"&&s[Symbol.iterator];if(!i)return s;var l=i.call(s),c,u=[],d;try{for(;(a===void 0||a-- >0)&&!(c=l.next()).done;)u.push(c.value)}catch(m){d={error:m}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(d)throw d.error}}return u};Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.selectState=function(s){return s};function n(){var s,a,i;function l(c){var u=0,d;function m(h){var g,y;s||(s={state:h,version:1}),s.state!==h&&(s.state=h,s.version+=1);var x=s.version,v;if(d){if(x===d.stateVersion)return d.value;var b=!1;try{for(var _=e(d.dependencies.entries()),w=_.next();!w.done;w=_.next()){var C=t(w.value,2),S=C[0],E=C[1];if(S(h)!==E){b=!0,v=S;break}}}catch(P){g={error:P}}finally{try{w&&!w.done&&(y=_.return)&&y.call(_)}finally{if(g)throw g.error}}if(!b)return d.value}u+=1;var M=new Map,k=Object.assign(function(P){if(M.has(P))return M.get(P);var L=P(h);return M.set(P,L),L},{reason:v}),N=i?i(function(){return c(k)},p,h,v):c(k);if(M.size===0)throw new Error("[rereselect] Selector malfunction: The selection logic must select some data by calling `query(selector)` at least once.");return d={stateVersion:x,dependencies:M,value:N},N}var p=Object.assign(function(g){return a?a(function(){return m(g)},p,g):m(g)},{selectionLogic:c,recomputations:function(){return u},resetRecomputations:function(){return u=0},introspect:function(){return d}});return p}return{makeSelector:l,setInvocationWrapper:function(c){a=c},setComputationWrapper:function(c){i=c}}}Fl.createSelectionContext=n;var r=n();return Fl.makeSelector=r.makeSelector,Fl}var Tt=KAt();const MS=.2,r3e=R.memo(({title:e,loading:t})=>{const{isMobileStyle:n}=Ce(),r=n;return o.jsx(wn,{active:t,className:"gap-sm flex w-full items-center",speed:"slow",children:o.jsx(Je,{mode:"popLayout",initial:!1,children:o.jsx(ve.div,{initial:{y:"-50%",opacity:0},animate:{y:0,opacity:1,transition:{y:{duration:.2,ease:va,delay:MS+.1},opacity:{duration:.2,ease:"linear",delay:MS+.1}}},exit:{y:"50%",opacity:0,transition:{y:{duration:.2,ease:$de,delay:MS},opacity:{duration:.2,ease:"linear",delay:MS}}},className:"w-full",children:o.jsx(F,{variant:r?"baseSemi":"section-title",color:t?"ultraLight":void 0,children:e})},e)})})});r3e.displayName="EntityGroupTitle";const s3e=Yt("EntityGroupContext",void 0),YAt=()=>{const e=f.useContext(s3e);if(!e)throw new Error("useEntityGroup must be used within an EntityGroupProvider");return e},a3e=R.memo(({children:e})=>{const[t,n]=f.useState(!1);return o.jsx(s3e.Provider,{value:{viewMoreOpen:t,setViewMoreOpen:n},children:e})});a3e.displayName="EntityGroupProvider";const Sw=e=>{let t;if("meta_data"in e?t=e.meta_data:t=Qr(e).with({place_widget_block:yu.nonNullable},n=>({...n.place_widget_block,object:"PlaceWidget"})).with({shopping_widget_block:yu.nonNullable},n=>({...n.shopping_widget_block,progress:Qc.DONE,object:"ShopifyWidget"})).with({search_result_widget_block:yu.nonNullable},n=>{const r=n.search_result_widget_block.metadata||{},s=r.object;if(s==="WeatherWidget")return{...r,progress:Qc.DONE,object:"WeatherWidget"};if(s==="TimeWidget")return{...r,progress:Qc.DONE,object:"TimeWidget"};if(s==="CalculatorWidget")return{...r,progress:Qc.DONE,object:"CalculatorWidget"};if(s==="TaskWidget")return{...r,progress:Qc.DONE,object:"TaskWidget"};if(s==="TimerWidget")return{...r,progress:Qc.DONE,object:"TimerWidget"};if(s==="CurrencyExchangeWidget")return{...r,progress:Qc.DONE,object:"CurrencyExchangeWidget"}}).otherwise(()=>{}),!!t)return t},i3e=Yt("ScrollToWidgetContext",{selectedWidgetId:void 0,scrollToWidget:()=>{},entityRefs:{}}),pH=()=>{const e=f.useContext(i3e);if(!e)throw new Error("useScrollToWidget must be used within ScrollToWidgetContext");return e},o3e=R.memo(({children:e,entities:t})=>{const[n,r]=f.useState({}),[s,a]=f.useState(void 0),{scrollContainerRef:i}=Za(),l=f.useRef(null);f.useEffect(()=>()=>{r({})},[]),f.useEffect(()=>{r(u=>{const d=u;let m=!1;return t?.map(p=>{const h=Sw(p);if(!h)return;if(h.object==="ShopifyWidget"){const y=h.id;if(!n[y]){m=!0;const x=f.createRef();d[y]=x}}}),m?d:u})},[t,n]);const c=u=>{l.current&&clearTimeout(l.current);const d=n[u]?.current;if(d&&i?.current){const p=d.getBoundingClientRect().top+i.current?.scrollTop-200;i?.current?.scrollTo({top:p,behavior:"smooth"})}a(u),l.current=setTimeout(()=>{a(void 0)},2e3)};return o.jsx(i3e.Provider,{value:{selectedWidgetId:s,scrollToWidget:c,entityRefs:n},children:e})});o3e.displayName="ScrollToWidgetProvider";const QAt=3,l3e=R.memo(({onClick:e,disabled:t,images:n})=>{const{$t:r}=Z();return o.jsx("div",{className:"flex items-center justify-center",children:o.jsxs(H,{variant:"background",bgHover:"subtler",className:V("gap-sm py-md group flex w-full cursor-pointer items-center justify-center rounded-lg border",{"pointer-events-none opacity-50":t}),onClick:e,children:[o.jsx("div",{className:"mx-xs flex items-center",children:n.slice(0,QAt).map((s,a)=>o.jsxs("div",{className:V("-ml-xs dark:ring-inverse relative size-6 shrink-0 overflow-hidden rounded bg-white p-[0.1rem] shadow-sm duration-150 dark:ring",{"group-hover:-translate-x-sm":a===1},{"group-hover:-translate-x-md":a===0}),children:[o.jsx(Ss,{src:s.src,containerClassName:V("relative size-full"),alt:"",maskClassName:"!rounded-[0.18rem]",includeLightBoxModal:!1,imageClassName:"w-full h-full object-contain bg-white"}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-transparent"})]},s.src))}),o.jsx(F,{variant:"smallBold",children:r({defaultMessage:"All Products",id:"enAu2bZ4pg"})})]})})});l3e.displayName="ViewAllButton";const c3e=R.memo(()=>o.jsx(u3e,{}));c3e.displayName="WidgetPlaceholder";const u3e=R.memo(()=>{const e=f.useMemo(()=>({maskImage:"linear-gradient(to bottom, black, transparent)"}),[]);return o.jsx(ve.div,{children:o.jsx(H,{variant:"subtler",className:"flex h-[200px] animate-pulse rounded-lg",style:e})})});u3e.displayName="HighIntentWidgetAnimationPlaceholder";const d3e=Yt("EntityContext",{entityId:"",menuItems:void 0,variant:void 0}),Ew=()=>{const e=f.useContext(d3e);if(!e)throw new Error("useEntity must be used within EntityContext");return e},XAt=({children:e,id:t,menuItems:n,className:r,entityVariant:s})=>o.jsx(d3e.Provider,{value:{entityId:t,menuItems:n,variant:s},children:o.jsx(un,{variant:s==="hide-chrome"?"transparent":void 0,className:V("group/card flex flex-col",{"p-md":s!=="hide-chrome"},r),children:e})}),ZAt=({className:e,...t})=>o.jsx(H,{className:V("gap-sm md:gap-md relative flex flex-col rounded-lg md:flex-row",e),...t}),JAt=({primaryButtonText:e,onPrimaryButtonClick:t,listNumber:n,className:r,children:s,...a})=>o.jsxs("div",{className:V("relative md:w-[calc(30%_-_8px)]",r),...a,children:[o.jsxs("div",{className:"gap-md flex h-full flex-col justify-between",children:[s,e&&t&&o.jsx("div",{className:"flex flex-col items-stretch md:max-w-[160px]",children:o.jsx(pe,{text:e,variant:"primary",onClick:t,pill:!0,size:"small"})})]}),typeof n=="number"&&o.jsx(F,{variant:"smallCaps",color:"light",className:"border-subtler bg-base absolute -left-1.5 -top-1.5 flex size-5 shrink-0 items-center justify-center rounded-full border shadow-sm",children:n})]}),e6t=({className:e,buttonProps:t,secondaryButtonProps:n,trailingComponent:r,children:s,...a})=>{const{menuItems:i}=Ew();return o.jsx("div",{className:V("flex min-w-0 flex-1 flex-col",e),...a,children:o.jsxs("div",{className:"gap-sm md:gap-md flex flex-1 flex-col justify-between rounded-lg",children:[o.jsx("div",{className:"gap-xs flex flex-col justify-between",children:o.jsx("div",{className:V("gap-xs relative mb-4 mt-2 flex flex-col md:mt-0"),children:s})}),(t||n)&&o.jsxs("div",{className:"gap-sm flex w-full items-center",children:[t&&o.jsx(pe,{variant:"primary",pill:!0,size:"small",...t,extraCSS:`${t.extraCSS} w-full max-w-[160px]`}),n&&o.jsx(pe,{variant:"border",pill:!0,size:"small",...n,extraCSS:`${n.extraCSS}`}),r,i&&i.length>0&&o.jsx("div",{className:"duration-150 group-hover/card:opacity-100 md:opacity-0",children:o.jsx(br.Menu,{menuItems:i,placement:"bottom-start"})})]})]})})},t6t=({title:e,onTitleClick:t,className:n})=>{const{selectedWidgetId:r}=pH(),{entityId:s}=Ew(),{isMobileStyle:a}=Ce();return o.jsx("div",{onClick:t,className:n,children:o.jsx(F,{variant:a?"section-title":"entry-title",className:V("line-clamp-3 cursor-pointer !leading-tight duration-150 hover:opacity-70 md:text-2xl"),children:o.jsx("span",{className:V("rounded-md duration-300",{"bg-super/10":r===s}),children:e})})})},n6t=({loading:e,className:t,onClick:n,trailingText:r})=>{const{$t:s}=Z();return o.jsxs(H,{className:V("group relative flex h-12 items-center",{"opacity-50":e,"cursor-pointer":!e},t),onClick:e?void 0:n,children:[!e&&o.jsx(H,{variant:"subtle",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),o.jsxs("div",{className:"relative w-full",children:[o.jsxs("div",{className:V("gap-md relative flex w-full items-center justify-between",{"opacity-0":e}),children:[o.jsx(F,{variant:"smallBold",color:"light",children:s({defaultMessage:"View More",id:"QQSdHPJWXu"})}),o.jsxs(F,{variant:"tiny",color:"light",className:"gap-sm flex items-center",children:[r,o.jsx(le,{icon:Zn,size:"xs"})]})]}),e&&o.jsxs("div",{className:"absolute inset-0 flex items-center justify-between",children:[o.jsx(H,{className:"h-2 w-[100px] rounded-full",variant:"subtle"}),o.jsx(le,{icon:Zn,className:"text-quietest",size:"sm"})]})]})]})},r6t=({title:e,className:t,children:n,trailingContent:r,defaultExpanded:s=!1})=>{const[a,i]=f.useState(!s);return o.jsxs(H,{className:t,children:[o.jsxs("div",{onClick:()=>i(!a),className:"group relative flex h-12 cursor-pointer select-none items-center justify-between",children:[o.jsx(H,{variant:"subtle",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),o.jsx(F,{variant:"smallBold",color:"light",className:"relative",children:e}),o.jsxs("div",{className:"gap-md relative flex items-center",children:[o.jsx("div",{className:"gap-xs flex items-stretch",children:r}),o.jsx(le,{icon:Bn,className:V("text-foreground relative opacity-50",{"rotate-180":!a}),size:"sm"})]})]}),o.jsx(na,{transition:{ease:Ci(.16,1,.3,1),duration:.2},initial:!1,children:!a&&o.jsx(is,{transition:{duration:.1},exit:{y:-5,opacity:0},animate:{y:0,opacity:1},initial:{y:-5,opacity:0},children:o.jsx("div",{className:"pb-4",children:n})})})]})},f3e=XAt,Lmn=ZAt,Dmn=t6t,Fmn=r6t,Umn=JAt,Bmn=e6t,Vmn=n6t,WT=R.memo(({isOpen:e,children:t,placement:n,hoverOpen:r=!1,disabled:s=!1,onOpen:a,onClose:i,content:l,contentWidth:c="360px",isMobileStyle:u,boxProps:d,canOutsideClickClose:m,removeScroll:p,ref:h,...g})=>{const[y,x]=f.useState(!1),v=f.useMemo(()=>e!==void 0,[e]),b=f.useMemo(()=>v?e:y,[v,e,y]),_=f.useCallback(()=>{!b&&!s&&(a?.(),v||x(!0))},[s,v,a,b]),w=f.useCallback(()=>{b&&!s&&(i?.(),v||x(!1))},[s,v,i,b]);f.useImperativeHandle(h,()=>({dismiss:w}),[w]);const C=f.useMemo(()=>({width:c??void 0}),[c]),S=f.useMemo(()=>o.jsx(H,{style:C,...d,children:l}),[C,d,l]),E=f.useMemo(()=>({canOutsideClickClose:m??!0,removeScroll:p}),[m,p]);return u?o.jsxs(o.Fragment,{children:[o.jsx(on,{variant:"bottom-left-sheet",actionList:fe,isOpen:b,onClose:w,children:l}),o.jsx("span",{onClick:_,children:t})]}):o.jsx(lo,{isOpen:b,hoverOpen:r,placement:n,onClose:w,onOpen:_,overlayProps:E,content:S,hasInteractiveContent:!0,...g,children:t})});WT.displayName="DropDownModal";const s6t=R.memo(({inFlight:e,chooseIfReason:t,chooseIfLeadInCopy:n,pros:r,cons:s,className:a,viewState:i="collapsed",id:l})=>{const c=!t&&e;return o.jsx(wn,{active:c,className:V("relative",a),children:o.jsx(na,{children:o.jsx(is,{children:o.jsxs("div",{className:"gap-sm pb-xs relative mt-3 flex flex-col rounded-md md:mx-0",children:[o.jsx(m3e,{reason:t,leadInCopy:n,loading:c}),o.jsx(Vb,{pros:r??fe,cons:s??fe,loading:c,viewState:i,id:l})]})})})})});s6t.displayName="EntityItemGuidance";const m3e=R.memo(({reason:e,leadInCopy:t,loading:n,textVariant:r="base"})=>{const{variant:s}=Ew();return!e&&!n?null:o.jsx("div",{className:V("flex items-start gap-[12px] rounded-md md:items-center"),children:o.jsx("div",{className:"w-full",children:n?o.jsxs("div",{className:"gap-sm pb-sm flex flex-col",children:[o.jsx(H,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 w-full rounded-full"}),o.jsx(H,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 rounded-full"}),o.jsx(H,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 w-1/2 rounded-full"})]}):o.jsxs(F,{variant:r,children:[o.jsx("span",{className:"font-medium",children:t})," ",e]})})})});m3e.displayName="EntityItemChooseIf";const p3e=3,h3e=2,Vb=R.memo(({pros:e,cons:t,loading:n,className:r,viewState:s="collapsed",id:a,scrollOnMobile:i=!0})=>!n&&e.length===0&&t.length===0?null:o.jsx("div",{className:r,children:s==="collapsed"?o.jsx(y3e,{loading:n,pros:e,cons:t,id:a,scrollOnMobile:i}):o.jsx(x3e,{loading:n,pros:e,cons:t})}));Vb.displayName="EntityItemProsCons";const g3e=R.memo(({children:e,loading:t,scrollOnMobile:n=!0})=>{const{isMobileStyle:r}=Ce(),{variant:s}=Ew();return r&&n?o.jsx("div",{className:"-mx-md",children:o.jsx(fl,{orientation:"horizontal",showScrollIndicator:!1,children:o.jsx("div",{className:"flex",children:o.jsx("ul",{className:"gap-sm px-md flex shrink-0",children:e})})})}):o.jsx("ul",{className:V("flex flex-wrap",{"gap-0":s==="dense-card"&&!t,"gap-sm":s!=="dense-card"||t}),children:e})});g3e.displayName="ProsConsCollapsedContainer";const y3e=R.memo(({loading:e,pros:t,cons:n,id:r,scrollOnMobile:s=!0})=>o.jsx(g3e,{loading:e,scrollOnMobile:s,children:o.jsx(Je,{initial:!1,children:o.jsx(jc,{children:e?Array.from({length:3}).map((a,i)=>o.jsx(G2,{asPlaceholder:!0,text:"",type:"con",label:"",id:r},i)):o.jsxs(o.Fragment,{children:[t.map(a=>o.jsx(G2,{text:a.description,type:"pro",label:a.label,id:r},a.label+r)).slice(0,p3e),n.map(a=>o.jsx(G2,{text:a.description,type:"con",label:a.label,id:r},a.label+r)).slice(0,h3e)]})})})}));y3e.displayName="ProsConsCollapsed";const x3e=R.memo(({loading:e,pros:t,cons:n})=>o.jsx("div",{className:"-mx-6",children:o.jsx(fl,{orientation:"horizontal",showScrollIndicator:!1,children:o.jsx("ul",{className:"gap-sm flex px-6",children:e?Array.from({length:3}).map((r,s)=>o.jsx(v3e,{},s)):o.jsxs(o.Fragment,{children:[t.map(r=>o.jsx(vL,{text:r.description,type:"pro",label:r.label},r.label)).slice(0,p3e),n.map(r=>o.jsx(vL,{text:r.description,type:"con",label:r.label},r.label)).slice(0,h3e)]})})})}));x3e.displayName="ProsConsExpanded";const G2=R.memo(({text:e,label:t,type:n,asPlaceholder:r,id:s})=>{const{trackEvent:a}=je(),{variant:i}=Ew(),l=()=>{r||a("shopping pro con hover",{type:n,label:t})},c={initial:{opacity:0,x:-3},animate:{opacity:1,x:0}},u=f.useMemo(()=>o.jsx("div",{className:V("p-sm pointer-events-none translate-y-0"),children:o.jsx(F,{variant:"small",children:e})}),[e]);return o.jsx(ve.li,{variants:c,initial:"initial",animate:"animate",transition:{duration:.1,ease:va},className:V("group inline-flex shrink-0 cursor-default rounded-full duration-150",{"gap-xs":i!=="dense-card","gap-sm":i==="dense-card","hover:bg-subtler":!r,"border-subtlest border duration-150":!r&&i!=="dense-card","!border-transparent !bg-transparent":r}),onMouseEnter:l,children:o.jsx(WT,{hoverOpen:!0,placement:"bottom-start",contentWidth:"200px",removeScroll:!1,content:u,isMobileStyle:!1,delayTime:1,disabled:r,hasInteractiveContent:!1,childrenClassName:"inline-flex",children:o.jsxs("div",{className:V("p-xs relative inline-flex items-center pr-[10px]",{"bg-subtler dark:bg-subtle":r,"h-[26px] rounded-full":r,"gap-2xs":i==="dense-card","gap-xs":i!=="dense-card"}),children:[o.jsx("div",{className:V("size-md flex shrink-0 items-center justify-center rounded-full",{"text-super":n==="pro"},{"text-quiet":n==="con"},{"bg-transparent":r}),children:o.jsx(F,{variant:"tiny",color:n==="pro"?"super":"light",className:"inline-flex",children:o.jsx(le,{className:r?"opacity-0":"",icon:n==="pro"?Ar:It,size:"xs"})})}),r?o.jsx(F,{variant:"tiny",className:"w-10 shrink-0",children:""}):o.jsx(F,{variant:"tiny",color:"light",children:o.jsx("span",{className:V({"text-super":n==="pro"}),children:t})})]})})},t+s)});G2.displayName="EntityItemProConItem";const v3e=R.memo(()=>o.jsx(H,{className:"p-sm h-[136px] w-[200px] rounded-md",variant:"subtler"}));v3e.displayName="ExpandedLoading";const vL=R.memo(({text:e,label:t,type:n})=>o.jsxs(H,{className:"p-sm w-[200px] rounded-md",variant:"subtler",children:[o.jsxs("div",{className:"mb-2xs gap-xs flex items-center",children:[o.jsx(H,{variant:n==="pro"?"super":"textColor",className:V("size-md flex shrink-0 items-center justify-center rounded-full",{"opacity-50":n==="con"}),children:o.jsx(le,{icon:n==="pro"?Ar:It,className:"text-inverse shrink-0",size:"xs"})}),o.jsx(F,{variant:"smallBold",color:n==="pro"?"super":"light",children:t})]}),o.jsx(F,{variant:"small",color:"light",children:e})]}));vL.displayName="ProConItemExpanded";const bL=f.memo(({src:e,onClick:t,showViewMore:n,onMouseEnter:r,onMouseLeave:s,className:a,imageClassName:i,albumSize:l})=>{const{$t:c}=Z();return o.jsxs("div",{onClick:t,onMouseEnter:r,onMouseLeave:s,className:V("bg-subtle group relative aspect-square size-full cursor-pointer overflow-hidden rounded duration-150",a),children:[o.jsx("img",{src:e,alt:"",className:V("m-0 size-full object-contain duration-150 group-hover:scale-[1.02]",i),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:"lazy",decoding:"async"}),l&&o.jsx("div",{className:"absolute bottom-1.5 right-1.5 flex items-center justify-center rounded-full bg-black/40",children:o.jsxs(F,{variant:"tiny",color:"white",className:"gap-sm px-sm py-xs relative flex items-center",children:[l,o.jsx(le,{icon:W7e,size:"xs"})]})}),n&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 dark:bg-black/80",children:o.jsxs(F,{variant:"tiny",color:"white",className:"px-sm py-xs relative rounded-full",children:[o.jsx("span",{className:"rounded-inherit absolute inset-0 bg-black opacity-30 dark:bg-white dark:opacity-10"}),o.jsx("span",{className:"relative opacity-80 dark:opacity-60",children:c({defaultMessage:"View More",id:"QQSdHPJWXu"})})]})})]})});bL.displayName="EntityItemImage";const a6t=()=>{const[e,t]=f.useState(!1),n=f.useRef(null),r=f.useRef(!1),s=f.useRef({x:0,y:0}),a=f.useRef(null);f.useEffect(()=>{const c=u=>{s.current={x:u.clientX,y:u.clientY}};return document.addEventListener("mousemove",c,{passive:!0}),()=>document.removeEventListener("mousemove",c)},[]);const i=f.useCallback(()=>{if(!n.current)return;const c=n.current.getBoundingClientRect(),{x:u,y:d}=s.current,m=u>=c.left&&u<=c.right&&d>=c.top&&d<=c.bottom;r.current&&!m&&(t(!0),r.current=!1,a.current&&(clearInterval(a.current),a.current=null))},[]),l=f.useCallback(()=>{t(!1),r.current=!0,a.current=setInterval(i,50)},[i]);return f.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),[e,n,l]},hH=f.memo(({images:e,className:t,badgeText:n,imageClassName:r})=>{const[s,a]=f.useState(0),[i,l]=f.useState(!1),c=f.useRef(null),u=4,[d,m,p]=a6t(),h=f.useCallback(()=>{i||(l(!0),c.current=setInterval(()=>{a(x=>x===e.length-1?0:x+1)},1e3))},[i,e.length]),g=f.useCallback(()=>{l(!1),c.current&&(clearInterval(c.current),c.current=null),a(0)},[]),y=f.useCallback(()=>{p(),h()},[p,h]);return f.useEffect(()=>{d&&g()},[d,g]),f.useEffect(()=>()=>{c.current&&(clearInterval(c.current),c.current=null)},[]),o.jsxs("div",{className:"relative w-full",children:[o.jsx("div",{ref:m,className:V("p-xs grid grid-cols-1 grid-rows-1 rounded bg-white",t),onMouseEnter:y,children:i?e.map((x,v)=>o.jsx(bL,{src:x,className:V("rounded-inherit col-start-1 row-start-1 bg-white !duration-100",{"opacity-0":v!==s,hidden:v!==s&&!i}),imageClassName:V(r,"!scale-100")},v)):o.jsx(bL,{src:e[s]??e[0]??"",className:"rounded-inherit col-start-1 row-start-1 bg-white",imageClassName:V(r,"!scale-100")})}),e.length>1&&o.jsx("div",{className:V("bottom-sm pointer-events-none absolute left-1/2 -translate-x-1/2 duration-150",{"translate-y-0 opacity-50":i,"translate-y-0.5 opacity-0":!i}),children:o.jsx(b3e,{images:e,activeIndex:s,maxDots:u,isAnimating:i})}),n&&o.jsx("div",{className:"gap-sm right-xs top-xs pointer-events-none absolute flex items-center",children:n&&o.jsx(F,{variant:"smallCaps",className:"bg-inverse/70 !text-inverse dark:bg-subtler dark:!text-foreground flex h-5 items-center whitespace-nowrap rounded-full px-1.5 !text-[10px] backdrop-blur-sm",children:n})})]})});hH.displayName="EntityItemImageFadeCarousel";const b3e=f.memo(({images:e,activeIndex:t,maxDots:n,isAnimating:r})=>o.jsx(ve.div,{layout:!0,layoutRoot:!0,className:"gap-xs flex items-center justify-center",children:o.jsx(Je,{mode:"popLayout",children:e.map((s,a)=>{let i=0,l=0;return t<n?(i=Math.max(t-Math.floor(n/2),0),l=i+n):(l=Math.min(t+Math.floor(n/2),e.length-1),i=l-n),a>l||a<i?null:o.jsx(ve.div,{initial:{opacity:0,x:4},animate:{opacity:1,x:0,scale:a===t?1:.6},exit:{opacity:0,x:-4},transition:{duration:.15},layout:"position",children:o.jsx("div",{className:V("bg-dark h-1.5 rounded-full border border-white p-px duration-200",{"w-4":a===t,"w-1.5":a!==t}),children:o.jsx(ve.div,{className:"h-full rounded-full bg-white/50",initial:{width:"0",opacity:0},animate:{width:a===t&&r?"100%":"0",opacity:r?1:0},transition:{width:{duration:1},opacity:{duration:.15}}},s+"progress")})},a)})})}));b3e.displayName="AnimateDots";const i6t=25,gH=R.memo(({rating:e,className:t,reviewCount:n,size:r="xs",textVariant:s="small",reviewTextVariant:a="small",reviewTextColor:i="light",variant:l,showCount:c=!0,minReviewCount:u=i6t,showRatingLabel:d=!0,url:m,color:p="default"})=>{const h=Math.floor(e),g=e%1===0?0:1,y=5-h-g;if(e===0||!n||n<u)return null;const x=o.jsxs("div",{className:V("gap-xs flex items-center",t),children:[o.jsxs("div",{className:"flex items-center",children:[l==="truncated"?o.jsx(le,{icon:Nd,size:r,className:"text-super -translate-y-px"}):Array.from({length:h}).map((v,b)=>o.jsx(le,{icon:Nd,size:r,className:"text-super"},`rating-star-full-${b}`)),l!=="truncated"&&Array.from({length:g}).map((v,b)=>o.jsx(_3e,{fraction:e%1,size:r},`rating-star-half-${b}`)),l!=="truncated"&&Array.from({length:y}).map((v,b)=>o.jsx("span",{className:"inline-flex opacity-20",children:o.jsx(le,{icon:Nd,size:r,className:"text-super"},b)},`rating-star-empty-${b}`))]}),d&&o.jsx(F,{variant:s,className:"group-hover/link:text-super relative font-medium leading-none",color:p,children:o.jsx(SP,{value:e,maximumFractionDigits:1})}),n&&n>0&&c&&o.jsxs(F,{variant:a,color:i,className:"group-hover/link:text-super relative leading-none",children:["(",o.jsx(SP,{value:n}),")"]})]});return m?o.jsx(Ye,{href:m,target:"_blank",className:"group/link",children:x}):x});gH.displayName="EntityItemRating";const _3e=R.memo(({fraction:e,size:t})=>o.jsxs("div",{className:"isolate inline-grid grid-cols-1 grid-rows-1",children:[o.jsx("span",{className:"text-foreground relative col-start-1 row-start-1 inline-flex items-center opacity-30",children:o.jsx("span",{className:"inline-flex",children:o.jsx(le,{icon:Nd,size:t})})}),o.jsx("span",{className:"relative col-start-1 row-start-1 inline-flex items-center",children:o.jsx("span",{className:"text-super inline-flex overflow-hidden",style:{width:e*100+"%"},children:o.jsx(le,{icon:Nd,size:t,className:"shrink-0"})})})]}));_3e.displayName="HalfStar";const w3e=R.memo(()=>o.jsx("svg",{className:"h-auto w-full",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 4635.92 708.22",children:o.jsx("path",{d:"M4806.79,746.44a25,25,0,1,0,25,25A25,25,0,0,0,4806.79,746.44Zm0,46.08a21.08,21.08,0,1,1,21.08-21.07A21.09,21.09,0,0,1,4806.79,792.52Zm8.12-25.33c0-4.55-3.25-7.25-8-7.25h-8v22.77h3.94v-8.26h4.26l4.13,8.26h4.23L4811,773.6A6.59,6.59,0,0,0,4814.91,767.19Zm-8.16,3.78h-3.87v-7.55h3.87c2.63,0,4.23,1.33,4.23,3.77S4809.38,771,4806.75,771ZM569.17,605.31a97.95,97.95,0,1,1-97.94-97.94A97.94,97.94,0,0,1,569.17,605.31Zm552.18,0a97.95,97.95,0,1,1-97.95-97.94A97.95,97.95,0,0,1,1121.35,605.31ZM1099,304.09C998.87,235.77,878,195.89,747.32,195.89a619.47,619.47,0,0,0-351,108.2H195.89l90.17,98.12a274.9,274.9,0,0,0-89.89,203.66c0,152.19,123.38,275.57,275.57,275.57A274.54,274.54,0,0,0,659,808l88.34,96.12L835.66,808a274.54,274.54,0,0,0,187.23,73.4c152.19,0,275.68-123.38,275.68-275.57a274.9,274.9,0,0,0-89.89-203.66l90.17-98.12ZM471.74,792.36c-103,0-186.49-83.49-186.49-186.49s83.5-186.49,186.49-186.49,186.5,83.49,186.5,186.49S574.74,792.36,471.74,792.36ZM747.37,600.5c0-122.73-89.26-228-207-273.06a538.15,538.15,0,0,1,413.93,0C836.62,372.49,747.37,477.78,747.37,600.5Zm462,5.37c0,103-83.5,186.49-186.49,186.49s-186.5-83.49-186.5-186.49,83.5-186.49,186.5-186.49S1209.38,502.87,1209.38,605.87Zm654.11-173.45h43.37v85.84h-50.75c-39.09,0-64.17,19.18-64.17,58.28V792.36h-92.78V432.42h92.78V492.9C1800.05,450.12,1829.56,432.42,1863.49,432.42Zm186.35-85.59a56.06,56.06,0,0,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S2049.84,315.11,2049.84,346.83Zm-102.33,85.59H2040V792.36h-92.53Zm347.35-6.08a179,179,0,0,0-109.22,36.52V432.42h-92.52V898h92.52V761.92a179,179,0,0,0,109.22,36.52c102.76,0,186-83.3,186-186.05S2397.62,426.34,2294.86,426.34Zm-8.15,287.12a101.07,101.07,0,1,1,101.07-101.07A101.07,101.07,0,0,1,2286.71,713.46Zm1890.57-34.8c0,69.4-59.54,119.78-141.57,119.78-85.12,0-144.57-51.57-144.57-125.42v-2h90.54v2c0,30.82,22,51.53,54.78,51.53,31.42,0,52.53-15.33,52.53-38.14,0-21.61-14.61-33.69-53.89-44.56l-51.71-14.1c-54.34-14.71-85.5-50.12-85.5-97.14,0-60.42,57-104.27,135.57-104.27,79.3,0,132.58,43.88,132.58,109.21v2.05h-85.3v-2.05c0-22.18-20.77-39.55-47.28-39.55-27.84,0-47.28,12.78-47.28,31.09,0,18.76,13.84,29.66,49.36,38.91l54,14.81C4162.05,600.16,4177.28,644.7,4177.28,678.66Zm-1368-215.8A179,179,0,0,0,2700,426.34c-102.76,0-186.05,83.3-186.05,186.05S2597.26,798.44,2700,798.44a179,179,0,0,0,109.22-36.52v30.44h92.52V432.42h-92.52Zm0,149.54a101.07,101.07,0,1,1-101.07-101.08A101.08,101.08,0,0,1,2809.24,612.4ZM3236,462.86a179,179,0,0,0-109.22-36.52c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05A179,179,0,0,0,3236,761.92v30.44h92.53V304.3H3236Zm-101.06,250.6A101.07,101.07,0,1,1,3236,612.39,101.07,101.07,0,0,1,3134.89,713.46Zm623.34-281h92.53V792.36h-92.53Zm102.33-85.59a56.06,56.06,0,1,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S3860.56,315.11,3860.56,346.83Zm530.71,79.51c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05,186-83.3,186-186.05S4494,426.34,4391.27,426.34Zm0,287.12a101.07,101.07,0,1,1,101.07-101.07A101.06,101.06,0,0,1,4391.27,713.46ZM1744.55,386.87H1613.14V792.36h-92.22V386.87H1389.51V304.3h355Zm1877.76,45.55h97.21L3595.31,792.36H3484L3360.47,432.42h97.2L3540,693.79Zm1162.19,0h43.37v85.84h-50.75c-39.09,0-64.18,19.18-64.18,58.28V792.36h-92.77V432.42h92.77V492.9C4721.06,450.12,4750.57,432.42,4784.5,432.42Z",transform:"translate(-195.89 -195.89)",fill:"currentColor"})}));w3e.displayName="TripadvisorLogo";const C3e=R.memo(()=>o.jsxs("svg",{className:"h-auto w-full",viewBox:"0 0 1000 385",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M806.495 227.151L822.764 223.392C823.106 223.313 823.671 223.183 824.361 222.96C828.85 221.753 832.697 218.849 835.091 214.862C837.485 210.874 838.241 206.113 837.198 201.582C837.175 201.482 837.153 201.388 837.13 201.289C836.596 199.117 835.66 197.065 834.37 195.239C832.547 192.926 830.291 190.991 827.728 189.542C824.711 187.82 821.553 186.358 818.289 185.171L800.452 178.659C790.441 174.937 780.432 171.309 770.328 167.771C763.776 165.439 758.224 163.393 753.4 161.901C752.49 161.62 751.485 161.34 750.669 161.058C744.837 159.271 740.739 158.53 737.272 158.505C734.956 158.42 732.649 158.841 730.511 159.738C728.283 160.699 726.282 162.119 724.639 163.906C723.822 164.835 723.054 165.806 722.337 166.815C721.665 167.843 721.049 168.907 720.491 170.001C719.876 171.174 719.348 172.391 718.911 173.642C715.6 183.428 713.951 193.7 714.032 204.029C714.091 213.368 714.342 225.354 719.475 233.479C720.712 235.564 722.372 237.366 724.348 238.769C728.004 241.294 731.7 241.627 735.544 241.904C741.289 242.316 746.855 240.905 752.403 239.623L806.45 227.135L806.495 227.151Z",fill:"currentColor"}),o.jsx("path",{d:"M987.995 140.779C983.553 131.457 977.581 122.947 970.328 115.601C969.39 114.669 968.385 113.806 967.321 113.02C966.339 112.283 965.318 111.598 964.264 110.967C963.18 110.373 962.065 109.837 960.924 109.362C958.668 108.476 956.25 108.077 953.829 108.19C951.513 108.322 949.254 108.956 947.207 110.049C944.105 111.591 940.748 114.07 936.283 118.221C935.666 118.834 934.891 119.525 934.195 120.177C930.511 123.641 926.413 127.911 921.536 132.883C914.002 140.497 906.583 148.152 899.21 155.89L886.017 169.571C883.601 172.071 881.401 174.771 879.441 177.643C877.771 180.07 876.59 182.799 875.963 185.678C875.6 187.886 875.653 190.142 876.12 192.329C876.143 192.429 876.164 192.523 876.187 192.622C877.229 197.154 879.988 201.103 883.883 203.637C887.778 206.172 892.505 207.094 897.068 206.211C897.791 206.106 898.352 205.982 898.693 205.898L969.033 189.646C974.576 188.365 980.202 187.191 985.182 184.3C988.522 182.363 991.699 180.443 993.878 176.569C995.043 174.441 995.748 172.092 995.948 169.675C997.027 160.089 992.021 149.202 987.995 140.779Z",fill:"currentColor"}),o.jsx("path",{d:"M862.1 170.358C867.197 163.955 867.184 154.41 867.64 146.607C869.174 120.536 870.79 94.4619 872.07 68.3766C872.56 58.4962 873.624 48.7498 873.036 38.7944C872.552 30.5816 872.492 21.1521 867.307 14.4122C858.154 2.52688 838.636 3.50371 825.319 5.34732C821.239 5.91358 817.153 6.6749 813.099 7.64807C809.045 8.62124 805.033 9.6841 801.108 10.9412C788.329 15.127 770.365 22.8103 767.323 37.5341C765.608 45.858 769.672 54.3727 772.824 61.9691C776.645 71.1774 781.865 79.4721 786.622 88.1401C799.198 111.024 812.008 133.765 824.782 156.53C828.597 163.326 832.755 171.933 840.135 175.454C840.623 175.667 841.121 175.856 841.628 176.018C844.937 177.272 848.545 177.513 851.993 176.712C852.201 176.664 852.405 176.617 852.608 176.57C855.792 175.704 858.675 173.973 860.937 171.568C861.345 171.185 861.734 170.782 862.1 170.358Z",fill:"currentColor"}),o.jsx("path",{d:"M855.997 240.155C854.008 237.355 851.184 235.258 847.931 234.162C844.677 233.065 841.16 233.027 837.881 234.051C837.111 234.307 836.361 234.618 835.636 234.983C834.515 235.554 833.445 236.221 832.439 236.976C829.507 239.148 827.039 241.97 824.791 244.8C824.221 245.522 823.7 246.483 823.022 247.1L811.708 262.663C805.295 271.382 798.971 280.123 792.7 289.003C788.608 294.735 785.068 299.576 782.273 303.859C781.743 304.666 781.193 305.567 780.689 306.284C777.338 311.469 775.441 315.252 774.467 318.622C773.735 320.862 773.503 323.234 773.788 325.572C774.1 328.008 774.92 330.35 776.195 332.447C776.873 333.499 777.604 334.516 778.385 335.495C779.196 336.436 780.058 337.332 780.966 338.18C781.936 339.105 782.973 339.957 784.07 340.729C791.879 346.162 800.428 350.066 809.421 353.083C816.904 355.567 824.682 357.053 832.555 357.504C833.894 357.572 835.237 357.543 836.572 357.417C837.809 357.309 839.04 357.136 840.26 356.9C841.479 356.615 842.681 356.266 843.863 355.853C846.162 354.993 848.255 353.66 850.008 351.94C851.667 350.279 852.944 348.276 853.749 346.07C855.057 342.81 855.917 338.671 856.483 332.526C856.532 331.652 856.657 330.604 856.744 329.644C857.19 324.545 857.395 318.556 857.723 311.514C858.276 300.685 858.71 289.903 859.053 279.09C859.053 279.09 859.782 259.875 859.78 259.865C859.946 255.437 859.81 250.53 858.582 246.121C858.042 244.008 857.17 241.994 855.997 240.155V240.155Z",fill:"currentColor"}),o.jsx("path",{d:"M983.707 270.24C981.346 267.651 978 265.069 972.722 261.878C971.961 261.453 971.068 260.886 970.244 260.392C965.85 257.749 960.557 254.969 954.374 251.611C944.876 246.396 935.372 241.312 925.778 236.271L908.825 227.28C907.946 227.024 907.053 226.389 906.225 225.989C902.968 224.432 899.516 222.978 895.932 222.311C894.697 222.074 893.444 221.944 892.186 221.923C891.375 221.913 890.565 221.962 889.761 222.07C886.371 222.595 883.234 224.178 880.795 226.591C878.356 229.005 876.74 232.128 876.178 235.513C875.919 237.667 875.998 239.847 876.411 241.976C877.24 246.487 879.254 250.95 881.338 254.858L890.391 271.824C895.428 281.394 900.526 290.907 905.752 300.391C909.123 306.578 911.929 311.871 914.557 316.26C915.055 317.085 915.62 317.974 916.046 318.738C919.245 324.013 921.815 327.333 924.421 329.715C926.109 331.345 928.132 332.586 930.349 333.351C932.68 334.124 935.146 334.398 937.59 334.155C938.832 334.008 940.066 333.795 941.286 333.516C942.488 333.193 943.672 332.808 944.833 332.362C946.087 331.889 947.305 331.327 948.478 330.678C955.36 326.82 961.703 322.07 967.345 316.552C974.112 309.894 980.093 302.633 984.745 294.321C985.392 293.145 985.952 291.924 986.422 290.667C986.86 289.504 987.24 288.319 987.558 287.118C987.834 285.896 988.045 284.662 988.191 283.418C988.422 280.977 988.138 278.514 987.358 276.19C986.591 273.963 985.345 271.932 983.707 270.24V270.24Z",fill:"currentColor"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M400.03 105.19C400.03 91.2089 411.42 79.7877 425.167 79.7877C438.717 79.7877 449.714 91.2089 450.303 105.387V303.682C450.303 317.663 438.913 329.084 425.167 329.084C411.027 329.084 400.03 317.663 400.03 303.682V105.19ZM376.657 227.672C376.461 231.61 375.479 238.896 370.373 244.213C364.874 249.923 357.412 251.302 353.092 251.302C335.123 251.4 317.155 251.45 299.187 251.499C281.218 251.548 263.248 251.597 245.279 251.696C246.85 256.619 249.992 264.101 257.062 270.994C261.382 275.129 265.506 277.492 267.273 278.476C269.434 279.855 276.896 283.793 286.126 283.793C295.945 283.793 304.586 280.642 313.03 276.31L313.736 275.945C319.604 272.904 325.66 269.766 332.079 268.631C338.363 267.646 345.04 268.827 349.949 273.16C355.841 278.279 358.197 285.762 356.037 293.442C353.484 302.106 346.218 309.589 338.559 314.118C334.239 316.678 329.526 318.844 324.813 320.617C318.725 322.783 312.441 324.358 306.157 325.343C299.872 326.327 293.392 326.721 286.911 326.524H286.911C283.769 326.524 280.431 326.524 277.092 326.13C273.558 325.736 270.023 324.949 266.684 324.161C261.186 322.98 256.08 321.207 250.974 318.844C246.064 316.678 241.155 313.921 236.638 310.771C232.121 307.62 227.997 303.879 224.07 299.94C220.338 296.002 216.804 291.67 213.662 286.944C203.057 270.797 198.147 250.908 199.129 231.61C199.915 212.706 206.199 193.802 217.589 178.443C218.823 176.519 220.247 174.883 221.596 173.333C222.18 172.663 222.75 172.008 223.284 171.354C237.35 154.158 256.142 148.716 263.894 146.471L264.328 146.345C286.519 140.044 304.978 144.179 312.441 146.345C316.172 147.33 337.185 153.828 353.484 171.354C354.27 172.141 356.43 174.701 359.179 178.443C369.505 192.508 373.066 205.605 374.272 210.042L374.301 210.146C375.479 214.478 376.657 220.386 376.657 227.672ZM261.382 195.181C249.992 204.436 246.85 216.251 246.064 219.992H331.686C330.901 216.448 327.562 204.436 316.172 195.181C304.586 185.925 292.41 185.335 288.679 185.335C284.948 185.335 272.772 185.925 261.382 195.181ZM586.98 142.998C564.593 142.998 544.169 153.041 529.637 169.385V168.794C529.048 155.6 518.05 144.967 504.696 144.967C490.753 144.967 479.56 156.191 479.56 170.172V359.409C479.56 373.391 490.753 384.615 504.696 384.615C518.64 384.615 529.833 373.391 529.833 359.409V352.123V300.334C544.365 316.482 564.593 326.721 587.176 326.721C632.147 326.721 668.674 285.959 668.674 235.155C668.478 184.35 631.951 142.998 586.98 142.998ZM575.983 285.566C550.453 285.566 529.637 263.314 529.637 235.549C529.637 207.586 550.257 185.335 575.983 185.335C601.512 185.335 622.328 207.586 622.328 235.549C622.132 263.314 601.512 285.566 575.983 285.566ZM161.425 248.348L153.177 266.464C149.446 274.341 145.715 282.415 142.18 290.488C141.052 292.966 139.916 295.494 138.764 298.057C123.068 332.981 104.44 374.43 63.8242 383.236C44.1861 387.568 14.5327 381.661 3.5354 363.15C-7.4619 344.443 8.83767 322.979 29.8504 327.902C33.1646 328.641 36.4235 330.266 39.7101 331.904C45.187 334.635 50.7406 337.404 56.7545 336.173C62.4495 335.188 65.9844 331.053 70.5011 325.736C76.7853 318.45 79.5346 310.771 80.7129 306.242C80.6147 306.045 80.5165 305.798 80.4183 305.552C80.3201 305.306 80.2219 305.06 80.1237 304.863C75.0117 295.326 70.5473 286.8 66.8178 279.677C64.3868 275.034 62.2681 270.987 60.4857 267.646C56.8287 260.714 54.0662 255.473 51.918 251.398C45.6449 239.497 44.609 237.532 41.8296 232.398C35.7418 220.78 29.2612 209.555 22.5843 198.331C15.3182 186.122 7.85577 172.535 13.9436 158.16C18.8531 146.542 31.4214 140.634 43.4006 144.376C56.0403 148.212 61.6377 160.239 66.8724 171.487C67.8188 173.52 68.7534 175.528 69.7156 177.458C78.16 194.196 86.4079 210.934 94.6559 227.672C95.382 229.336 96.4917 231.605 97.8402 234.362C99.0447 236.824 100.44 239.676 101.922 242.834C102.697 244.475 103.434 246.002 104.101 247.382C104.954 249.149 105.691 250.676 106.242 251.892C110.072 242.342 113.95 232.841 117.829 223.34C121.707 213.839 125.586 204.337 129.415 194.787C129.522 194.253 130.436 192.216 131.813 189.145C132.977 186.549 134.473 183.215 136.092 179.427C136.64 178.133 137.191 176.79 137.755 175.417C142.856 162.995 148.988 148.06 162.604 143.982C172.423 141.028 183.42 144.967 189.115 153.237C192.061 157.372 193.239 162.098 193.435 166.824C193.593 177.275 188.545 188.491 184.212 198.115C183.157 200.459 182.144 202.708 181.26 204.829C181.219 204.91 181.048 205.296 180.739 205.988C179.541 208.679 176.278 216.005 170.655 228.066C168.626 232.389 166.679 236.713 164.707 241.09C163.626 243.491 162.538 245.907 161.425 248.348Z",fill:"currentColor"}),o.jsx("path",{d:"M687.728 310.153H689.549C690.447 310.153 691.167 309.923 691.706 309.462C692.256 308.99 692.532 308.395 692.532 307.676C692.532 306.833 692.29 306.232 691.807 305.872C691.324 305.502 690.56 305.316 689.515 305.316H687.728V310.153ZM695.043 307.608C695.043 308.507 694.801 309.305 694.318 310.002C693.846 310.687 693.178 311.198 692.313 311.535L696.324 318.193H693.492L690.004 312.226H687.728V318.193H685.234V303.176H689.633C691.498 303.176 692.863 303.541 693.728 304.271C694.605 305.002 695.043 306.114 695.043 307.608ZM677.228 310.676C677.228 308.429 677.79 306.322 678.914 304.356C680.037 302.389 681.582 300.839 683.549 299.704C685.515 298.569 687.633 298.002 689.902 298.002C692.15 298.002 694.256 298.564 696.223 299.687C698.189 300.811 699.74 302.356 700.874 304.322C702.009 306.288 702.577 308.406 702.577 310.676C702.577 312.889 702.032 314.968 700.942 316.912C699.852 318.856 698.324 320.412 696.358 321.58C694.391 322.749 692.24 323.333 689.902 323.333C687.577 323.333 685.431 322.754 683.464 321.597C681.498 320.429 679.964 318.872 678.863 316.929C677.773 314.985 677.228 312.901 677.228 310.676ZM678.998 310.676C678.998 312.62 679.487 314.44 680.464 316.136C681.442 317.822 682.773 319.153 684.459 320.131C686.155 321.097 687.97 321.58 689.902 321.58C691.858 321.58 693.672 321.092 695.346 320.114C697.02 319.136 698.346 317.816 699.324 316.153C700.313 314.479 700.807 312.653 700.807 310.676C700.807 308.721 700.318 306.906 699.341 305.232C698.363 303.558 697.037 302.232 695.363 301.255C693.7 300.266 691.88 299.771 689.902 299.771C687.947 299.771 686.133 300.26 684.459 301.238C682.785 302.215 681.453 303.541 680.464 305.215C679.487 306.878 678.998 308.698 678.998 310.676Z",fill:"currentColor"})]}));C3e.displayName="YelpLogo";const o6t=({className:e})=>o.jsx(F,{className:V("w-10",e),children:o.jsx(C3e,{})}),l6t=({className:e})=>o.jsx(F,{className:V("w-[70px]",e),children:o.jsx(w3e,{})}),c6t=e=>{const t=f.useMemo(()=>Qr(e).with(yu.string.includes("yelp.com"),()=>o6t).with(yu.string.includes("tripadvisor.com"),()=>l6t).otherwise(()=>null),[e]);return f.useMemo(()=>({SearchClientLogo:t}),[t])},u6t=({entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s,reason:a})=>{const i=xt(),l=["place_result_reviews",`${n}_${s}`],{refetch:c,data:u,isFetching:d,error:m}=We({queryKey:l,enabled:!1,queryFn:async()=>{let p={summary:"",review_quality_score:0,pros:[],cons:[],key_features:[],review_search_results:[]},h="PENDING",g="";try{await ae.SSE("/rest/sse/places_review_summary_bulk",a,{params:{places:[{entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s}]},handlers:{message:y=>{y.blocks?.[0]?.review_summary_block&&(p={...p,...y.blocks[0].review_summary_block}),h=y.status??"FAILED",g=y.id??"",i.setQueryData(l,{review_summary:p,status:h,id:g})}}})}catch{}return{review_summary:p,status:h,id:g}}});return f.useMemo(()=>({generateReviewSummaryForPlace:c,reviewSummary:u?.review_summary,isFetching:d,error:m}),[u?.review_summary,m,c,d])};function S3e(){const{locale:e}=Z(),t=new Intl.Locale(e),{value:n,loading:r}=$r({flag:"canonical-hotel-pages-enabled",defaultValue:!1,extraAttributes:{cfLanguage:t.language,appApiVersion:Sl}});return f.useMemo(()=>({initialized:!r,value:n}),[n,r])}const E3e=R.memo(({operatingHours:e})=>{const{locale:t}=Z();return e?o.jsx("div",{className:"gap-xs flex flex-col",children:e.map(({day:n,hours:r,is_today:s})=>o.jsxs("div",{className:"gap-md flex items-center justify-between",children:[o.jsx(F,{variant:"tiny",color:"white",className:s?void 0:"opacity-50",children:qB(n,t)}),o.jsx(F,{variant:"tiny",color:"white",className:s?void 0:"opacity-50",children:r.join(", ")})]},`place-hours-${n}`))}):null});E3e.displayName="PlaceOperatingHours";var lu;(function(e){e.DEFAULT="default",e.DALLE3="dall-e-3",e.PLAYGROUND="playground",e.FLUX="flux",e.GPT4O_IMAGE="gpt-4o",e.GEMINI_FLASH="gemini-flash"})(lu||(lu={}));const M3e=e=>{switch(e){case lu.DALLE3:return"DALL-E 3";case lu.PLAYGROUND:return"Playground";case lu.FLUX:return"FLUX";case lu.GPT4O_IMAGE:return"GPT-4o Image";case lu.GEMINI_FLASH:return"Gemini Flash";default:return"AI"}},yH=e=>{if(e==="dalle"||Object.values(lu).includes(e))return!0;const t=e.toLowerCase();return Object.values(lu).some(n=>t.includes(n.toLowerCase()))},k3e=R.memo(({mediaItem:e})=>{const{name:t,url:n,image:r,source:s,author_name:a,author_url:i}=e,l=yH(s??""),c=n?.includes("unsplash.com"),u=a&&i;let d=t;c&&(d="Unsplash");const m=f.useCallback(p=>{p.stopPropagation()},[]);return o.jsx(Ye,{className:"cursor-pointer",target:"_blank",rel:"noopener nofollow",href:n??r??"",children:u?o.jsxs(H,{className:"flex max-w-[300px] items-stretch overflow-hidden",children:[o.jsxs("div",{className:"gap-sm hover:bg-subtler flex shrink-0 items-center rounded-md p-[7px] duration-300",children:[n&&o.jsx(pl,{domain:n}),o.jsx(F,{color:"white",variant:"tiny",className:"truncate",children:d})]}),o.jsx(Ye,{href:i,target:"_blank",className:"gap-sm p-sm hover:bg-subtler group flex items-center overflow-hidden rounded-md pr-[10px] duration-300",onClick:m,children:o.jsx(F,{color:"white",variant:"tiny",className:"truncate opacity-50 duration-300 group-hover:opacity-75",children:a})})]}):o.jsx(H,{className:"hover:bg-subtle max-w-[250px] rounded-md p-[7px] px-[10px] duration-300",variant:l?"subtler":"transparent",children:n&&o.jsx(eo,{color:"white",url:n,source:d,truncate:!1,isAttachment:!1,variant:"tiny"})})})});k3e.displayName="ImageGalleryCitation";const xH=R.memo(({image:e,name:t,url:n,fallbackSrc:r,onClick:s,AIProps:a,softBlockSaveImage:i,imageClassName:l,includeLightBoxModal:c,lightboxSrc:u,rounded:d="sm",onFail:m,onLoad:p,className:h,style:g,containerClassName:y,maskClassName:x,ref:v})=>{const b=f.useMemo(()=>({url:n,name:t}),[t,n]),_=f.useMemo(()=>({draggable:!1}),[]);return o.jsx("div",{onClick:s,className:h,style:g,children:o.jsx(Ss,{AIProps:a,origin:b,fadeIn:!1,hasShadow:!1,includeLightBoxModal:c,lightboxSrc:u,imageClassName:V("max-h-[70vh] object-cover w-full",l),imageRef:v,alt:t,src:e,fallback:null,fallbackSrc:r,softBlockSaveImage:i,rounded:d,onFail:m,onLoad:p,containerClassName:y,maskClassName:x,imageProps:_,draggable:!1},n)})});xH.displayName="RenderImage";const T3e=R.memo(({mediaItem:e,softBlockSaveImage:t})=>{const{image:n,name:r,url:s,thumbnail:a,source:i}=e,l=n??a;return l?o.jsx("div",{className:"py-md px-lg flex size-full select-none items-center justify-center","data-color-scheme":"dark",children:o.jsx(xH,{image:l,name:r,fallbackSrc:a,url:s,AIProps:i?{isAI:yH(i),AILabel:M3e(i)}:void 0,includeLightBoxModal:!1,softBlockSaveImage:t,maskClassName:"bg-subtler"})}):(ne.warn(new Error("Invalid media item in image gallery"),{extra:{mediaItem:e}}),null)});T3e.displayName="ImageGalleryMain";const N3e=R.memo(({mediaItem:e,isHighlighed:t,onClick:n,imageRef:r})=>{const{image:s,name:a,url:i,thumbnail:l,source:c}=e,u=l??s,[d,m]=f.useState(!1),[p,h]=f.useState(!1),g=f.useCallback(()=>m(!0),[]),y=f.useCallback(()=>h(!0),[]);return!u||d?(ne.warn(new Error("Invalid media item in image gallery sidebar"),{extra:{mediaItem:e}}),null):o.jsx(xH,{className:V("cursor-pointer select-none rounded-lg border-transparent transition-all duration-200 ease-in-out",{"ring-super ring-2 ring-offset-2 ring-offset-black":t,"hover:opacity-70":!t,"animate-in fade-in duration-300 ease-in":p,hidden:!p}),AIProps:c?{isAI:yH(c),AILabel:M3e(c)}:void 0,image:u,name:a,fallbackSrc:void 0,url:i,includeLightBoxModal:!1,onClick:n,maskClassName:"bg-subtler !rounded-lg",imageClassName:"select-none",onFail:g,onLoad:y,ref:r})});N3e.displayName="GalleryImage";class d6t extends R.Component{static defaultProps={columnsCount:3,gutter:"0"};getColumns(){const{children:t,columnsCount:n=3}=this.props,r=Array.from({length:n},()=>[]);let s=0;return R.Children.forEach(t,a=>{a&&R.isValidElement(a)&&(r[s%n].push(a),s++)}),r}renderColumns(){const{gutter:t="0"}=this.props;return this.getColumns().map((n,r)=>o.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:t},children:n.map(s=>s)},r))}render(){const{columnsCount:t,gutter:n="0",style:r,...s}=this.props;return o.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:n,...r},...s,children:this.renderColumns()})}}const j3e=R.memo(({mainIndex:e,images:t,onClick:n,mainIndexRef:r})=>o.jsx(d6t,{className:"p-sm select-none pr-1",columnsCount:2,gutter:"8px",children:t.map((s,a)=>o.jsx(A3e,{mediaItem:s,index:a,mainIndex:e,onClick:n,mainIndexRef:r},"galleryImage "+a))}));j3e.displayName="ImageGallerySidebar";const A3e=R.memo(({mediaItem:e,index:t,mainIndex:n,onClick:r,mainIndexRef:s})=>{const a=f.useCallback(()=>r(t),[t,r]);return o.jsx(N3e,{mediaItem:e,isHighlighed:t===n,onClick:a,imageRef:t===n?s:void 0})});A3e.displayName="GalleryImageFactory";const Ql=R.memo(({children:e,isOpen:t,onClose:n,...r})=>o.jsx(Xy,{isOpen:t,onClose:n,center:!1,variant:"lightbox",...r,children:o.jsx("div",{className:"flex h-screen flex-col",children:e})}));Ql.displayName="Gallery";const I3e=R.memo(({className:e="",headerText:t,children:n,onClose:r,...s})=>o.jsxs("div",{className:V("mx-md gap-md border-subtler h-headerHeight flex items-center justify-between border-b",e),"data-color-scheme":"dark",...s,children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx(za,{variant:"mark",color:"white",size:"tiny"}),t&&o.jsx(F,{color:"white",variant:"section-title",className:"line-clamp-1",children:t})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[n,o.jsx(pe,{pill:!0,icon:It,onClick:r,size:"small",extraCSS:"!bg-subtle"})]})]}));I3e.displayName="GalleryHeader";const R3e=R.memo(({className:e,style:t,...n})=>o.jsx("div",{className:V("col-span-6 h-[50dvh] min-h-0 w-full flex-1 shrink-0 md:size-auto lg:col-span-7",e),style:{colorScheme:"dark",...t},...n})),P3e=R.memo(({children:e,className:t,style:n,...r})=>o.jsx("div",{className:V("col-span-4 flex h-[50dvh] min-h-0 flex-col md:h-auto lg:col-span-3",t),"data-color-scheme":"dark",style:n,...r,children:o.jsx("div",{className:"scrollbar-subtle min-h-0 flex-1 overflow-y-auto",children:e})}));P3e.displayName="GallerySidebar";R3e.displayName="GalleryMain";const O3e=R.memo(({className:e,...t})=>o.jsx("div",{className:V("gap-lg flex min-h-0 flex-1 grow flex-col md:grid md:grid-cols-10 md:gap-0",e),...t}));O3e.displayName="GalleryContent";Ql.Header=I3e;Ql.Main=R3e;Ql.Sidebar=P3e;Ql.Content=O3e;const vH=R.memo(({mainImageIndex:e,title:t,isOpen:n,onClose:r=Pn,onSelect:s,images:a,softBlockSaveImage:i})=>{const[l,c]=f.useState(e),u=f.useRef(null),d=f.useCallback(({initial:v})=>{u.current?.scrollIntoView({inline:"nearest",block:v?"center":"nearest",behavior:v?"auto":"smooth"})},[u]);f.useEffect(()=>{c(e)},[e,n]),f.useEffect(()=>{d({initial:!1})},[d,l]);const m=f.useCallback(()=>{c(v=>(v+1)%a.length)},[a.length]),p=f.useCallback(()=>{c(v=>(v-1+a.length)%a.length)},[a.length]),h=f.useCallback(()=>{c(v=>{const b=v-2;return b>=0?b:v})},[]),g=f.useCallback(()=>{c(v=>{const b=v+2;return b<a.length?b:v})},[a.length]);f.useEffect(()=>{const v=b=>{n&&(b.key==="ArrowRight"?m():b.key==="ArrowLeft"?p():b.key==="ArrowUp"?(b.preventDefault(),h()):b.key==="ArrowDown"&&(b.preventDefault(),g()))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[n,m,p,h,g]);const y=f.useCallback(v=>{a[v]&&(c(v),s?.(a[v]))},[a,s]);f.useEffect(()=>{n&&setTimeout(()=>{d({initial:!0})},0)},[n,d]);const x=a[l];return o.jsxs(Ql,{isOpen:n,onClose:r,children:[o.jsx(Ql.Header,{headerText:t,onClose:r,children:x&&o.jsx(k3e,{mediaItem:x})}),o.jsxs(Ql.Content,{children:[o.jsx(Ql.Main,{children:x&&o.jsx(T3e,{mediaItem:x,softBlockSaveImage:i})}),o.jsx(Ql.Sidebar,{children:o.jsx(j3e,{images:a,mainIndex:l,onClick:y,mainIndexRef:u})})]})]})});vH.displayName="ImageGallery";const f6t=4,L3e=R.memo(({dollarCount:e,priceRange:t,className:n="",dollarColor:r="default",textVariant:s="tiny",currencySymbol:a,...i})=>{const l=t&&/^(.+?)\s*(\1\s*)+$/.test(t.trim());return l&&(e=t.replace(/\u200A/g,"").length??0),o.jsx("div",{className:`flex items-center ${n}`,...i,children:t&&!l?o.jsx(F,{variant:s,color:r,children:t}):o.jsx("div",{className:"flex gap-px",children:Array.from({length:f6t},(c,u)=>o.jsx(F,{variant:s,className:"inline-flex",color:u<e?r:"ultraLight",children:a||"$"},u))})})});L3e.displayName="DollarRange";const D3e=R.memo(({place:e,menuItems:t,className:n,entryUUID:r,contextUUID:s,onHover:a})=>{const i="place-widget",{$t:l}=Z(),[c,u]=f.useState(!1),{SearchClientLogo:d}=c6t(e.url),m=S3e(),{generateReviewSummaryForPlace:p,reviewSummary:h,isFetching:g}=u6t({entity_id:String(e.id),entity_name:e.name,entry_uuid:r??"",data_source:e.client,url:e.url,reason:i}),{trackEvent:y}=je();f.useEffect(()=>{r&&y("place card viewed",{entryUUID:r,contextUUID:s??"",inline:!1,itemID:e.url})},[r,s,e.url,y]),f.useEffect(()=>{e.review_summary||h||p()},[e.review_summary,h]);const x=f.useMemo(()=>e.review_summary??h,[e.review_summary,h]),v=f.useMemo(()=>{const O=[];return e.image_url&&O.push(e.image_url),e.images&&e.images.forEach(A=>{A!==e.image_url&&O.push(A)}),O.length?O.map(A=>({image:A,url:A.includes("tripadvisor.com")?e.url:e.entity_url??e.url})):null},[e.image_url,e.images,e.url,e.entity_url]),b=f.useMemo(()=>Qr(e.url).with(yu.string.includes("yelp.com"),()=>l({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Yelp"})).with(yu.string.includes("tripadvisor.com"),()=>l({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Tripadvisor"})).otherwise(()=>null),[l,e.url]),_=f.useCallback(()=>{const O=e.entity_url??e.url,A=m.initialized&&m.value?e.canonical_page_path??O:O;window.open(A)},[m,e.canonical_page_path,e.entity_url,e.url]),{isMobileStyle:w}=Ce(),C=!!x?.summary.length,{hasProsOrCons:S,isLoadingProsCons:E}=f.useMemo(()=>{const O=x?.pros_detailed?.length??0,A=x?.cons_detailed?.length??0;return{hasProsOrCons:O||A||g,isLoadingProsCons:g&&!C&&(O+A<3||!O||!A)}},[x?.pros_detailed,x?.cons_detailed,C,g]),M=f.useCallback(O=>{O.stopPropagation()},[]),k=f.useCallback(()=>{a&&a(void 0)},[a]),N=f.useCallback(()=>{a&&a(e.url)},[a,e.url]),P=f.useCallback(()=>{_()},[_]),L=f.useCallback(()=>{u(!1)},[]);return o.jsxs(o.Fragment,{children:[o.jsx(f3e,{id:String(e.id),entityVariant:"dense-card",menuItems:t,className:"relative !p-0",children:o.jsxs(H,{as:"button","data-widget-id":e.id,className:V("group/root gap-sm p-md md:gap-md group flex h-full cursor-pointer appearance-none flex-col text-left duration-150",n),onMouseEnter:N,onMouseLeave:k,onClick:P,children:[o.jsxs("div",{className:"gap-md flex flex-1",children:[v&&v.length>0&&o.jsx("div",{className:"border-subtlest shadow-subtle size-20 shrink-0 rounded-md border bg-white md:size-28 dark:border-0",children:o.jsx(hH,{images:v.map(O=>O.image),className:"size-full bg-white",imageClassName:"object-cover"})}),o.jsxs("div",{className:"gap-sm flex flex-1 flex-col",children:[o.jsx(F,{variant:w?"baseSemi":"section-title",className:"group-hover:text-super line-clamp-3 leading-tight transition-colors duration-150",children:e.name}),!!e.operating_hours&&w&&o.jsx(_L,{place:e}),(e.rating||e.price||e.price_range)&&o.jsxs(Ru,{className:"gap-xs text-quiet text-xs",children:[!!e.operating_hours&&!w&&o.jsx(Vr,{id:"is-open",children:o.jsx(_L,{place:e})}),(e.price||e.price_range)&&o.jsx(Vr,{id:"price",children:o.jsx(L3e,{dollarCount:e.price?.replace(/\u200A/g,"").length??0,priceRange:e.price_range,currencySymbol:e.currency_char})}),e.rating&&o.jsx(Vr,{id:"rating",children:o.jsx(gH,{minReviewCount:1,reviewCount:e.num_reviews,rating:e.rating,size:"sm",variant:"truncated",textVariant:"tiny"})}),d&&o.jsx(Vr,{id:"logo",children:e.url?o.jsx(Ye,{href:e.url,target:"_blank",className:"cursor-pointer duration-150 hover:opacity-70",onClick:M,children:o.jsx(d,{})}):o.jsx(d,{})})]}),o.jsxs("div",{className:"mt-xs gap-xs flex flex-col",children:[!!e.address?.length&&o.jsx(q2,{icon:$k,href:`https://maps.google.com/?q=${e.address.join(", ")}`,target:"_blank",label:e.address.join(", ")}),!!e.phone&&o.jsx(q2,{icon:H7e,label:e.phone,href:`tel:${e.phone}`}),!!e.url&&b&&!d&&o.jsx(q2,{icon:CD,label:b,href:e.url})]})]})]}),S&&o.jsx(wn,{active:E,children:o.jsx(H,{className:"mt-xs pt-sm border-t",children:o.jsx("div",{className:"-ml-sm",children:o.jsx(Vb,{id:String(e.id),pros:x?.pros_detailed??fe,cons:x?.cons_detailed??fe,loading:E})})})})]})}),o.jsx(vH,{title:e.name,mainImageIndex:0,isOpen:c,images:v??fe,onClose:L})]})});D3e.displayName="PlaceWidget";const _L=R.memo(({place:e})=>{const{$t:t}=Z(),n=f.useMemo(()=>{if(e.is_open){const s=e.operating_hours?.find(a=>a.is_today)?.hours;return!s||s.length===0||s.length>1?null:s?.[0]?.split(" - ")[1]}return null},[e.is_open,e.operating_hours]),r=f.useMemo(()=>o.jsx(E3e,{operatingHours:e.operating_hours}),[e.operating_hours]);return o.jsx(En,{tooltipText:r,asChild:!0,children:o.jsx(F,{variant:"tiny",color:e.is_open?"super":"red",children:e.is_open?n?t({defaultMessage:"Open until {time}",id:"abDRIJdom/"},{time:n}):t({defaultMessage:"Open",id:"JfG49wNHKP"}):t({defaultMessage:"Closed",id:"Fv1ZSzMOV6"})})})});_L.displayName="OpenUntil";const q2=R.memo(({icon:e,label:t,href:n,target:r})=>{const s=f.useCallback(i=>{i.stopPropagation()},[]),a=o.jsxs(F,{variant:"tiny",color:"light",className:"gap-xs flex items-start md:items-center",children:[o.jsx(le,{icon:e,size:"sm",className:"-translate-x-0.5"}),t]});return n?o.jsx(Ye,{href:n,target:r,className:"cursor-pointer",onClick:s,children:o.jsx(F,{superHover:!0,color:"light",children:a})}):a});q2.displayName="MetaDataItem";const F3e=R.memo(({url:e,children:t,className:n})=>{const r=f.useCallback(s=>{s.stopPropagation()},[]);return e?o.jsx("div",{className:V("inline-flex",n),children:o.jsx(Ye,{href:e,target:"_blank",className:"inline-flex min-w-0 items-center gap-0 duration-150 hover:opacity-60",onClick:r,children:t})}):t});F3e.displayName="LogoWrapper";const U3e=R.memo(({merchantName:e,merchantDomain:t,itemUrl:n,className:r,textVariant:s,iconSize:a,faviconSize:i})=>o.jsx(F3e,{url:n??void 0,className:r,iconSize:a,children:o.jsx(B3e,{name:e,domain:t,faviconSize:i,textVariant:s})}));U3e.displayName="EntityItemMerchantInfo";const B3e=R.memo(({name:e,domain:t,faviconSize:n,textVariant:r="tiny"})=>o.jsxs(F,{variant:r,color:"light",className:"gap-xs flex items-center",children:[o.jsx(pl,{className:"-translate-y-half shrink-0",domain:t,size:n}),o.jsx("span",{className:"truncate whitespace-nowrap",children:e})]}));B3e.displayName="EntityMerchantLogoName";const Q6=e=>{if(e.indexOf("$")===-1)return e;const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),n=e.replace(/[$,]/g,"");return t.format(parseFloat(n))},V3e=R.memo(({price:e,comparePrice:t,soldOut:n,size:r,textVariant:s})=>{const{$t:a}=Z(),{isMobileStyle:i}=Ce(),l=Q6(n&&t?t:e);return o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(F,{variant:s||(i||r==="small"?"smallBold":"baseSemi"),className:n?"line-through":void 0,color:t?"default":void 0,children:l}),n?o.jsx(F,{variant:s??"small",color:"red",children:a({defaultMessage:"Sold Out",id:"MwUAGRNkR/"})}):t&&o.jsx(F,{variant:s??"small",color:"light",className:"line-through",children:Q6(t)})]})});V3e.displayName="EntityItemPrice";const m6t=({enabled:e,reason:t})=>{const{data:n,isPending:r,refetch:s}=We({queryKey:["create_firmly_session"],queryFn:async()=>vft({reason:t}),enabled:e});return f.useMemo(()=>({createFirmlySessionData:n,isPending:r,refetch:s}),[n,r,s])},$3e=R.memo(({className:e})=>o.jsx(F,{variant:"tiny",color:"super",className:V("flex shrink-0 items-center gap-[5px] !text-[11px]",e),children:"Buy now"}));$3e.displayName="BuyWithProIndicator";const W3e=R.memo(({className:e,textVariant:t="tiny"})=>{const{$t:n}=Z();return o.jsx(En,{asChild:!0,tooltipLayout:"top",tooltipText:n({defaultMessage:"Shipping is free while shopping with Perplexity Pro",id:"UMkYrflCjt"}),children:o.jsx(F,{color:"light",variant:t,className:e,children:n({defaultMessage:"Free Delivery",id:"d7c64sMLc7"})})})});W3e.displayName="FreeShippingIndicator";const p6t=({reason:e,enabled:t=!0})=>{const n=xt(),{data:r,isLoading:s}=We({queryKey:vj(),queryFn:()=>xft({reason:e}),enabled:t}),a=f.useCallback(()=>{setTimeout(()=>{n.invalidateQueries({queryKey:vj()})},3e3)},[n]),i=f.useCallback(({paymentMethodId:l,type:c="card",link:u=null,card:d=null})=>{a(),n.setQueryData(vj(),m=>m&&m.customer?{...m,customer:{...m.customer,default_payment_method_type:c,default_payment_method:c==="card"?{id:l,brand:d?.brand,last_digits:d?.last_digits}:null,default_payment_method_link:c==="link"?{id:l,email:u?.email}:null}}:m)},[a,n]);return f.useMemo(()=>({customerShoppingInfo:r,isCustomerShoppingInfoLoading:s,setDefaultPaymentMethod:i}),[r,s,i])},bH=({ref:e,onInView:t,onNotInView:n,once:r=!0})=>{const[s,a]=f.useState(!1),i=YWe(e);f.useEffect(()=>{const l=r?!s:!0;i&&l?(t(),a(!0)):!i&&l&&n&&(n(),a(!0))},[r,s,a,t,i,n])},H3e=R.memo(()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"70",height:"auto","aria-labelledby":"shop-pay-logo",viewBox:"0 0 424 102",fill:"none",children:[o.jsx("title",{id:"shop-pay-logo",children:"Shop Pay"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M204.916 30.0997C208.894 25.1796 215.067 21.1016 222.436 21.1016C238.98 21.1016 252.012 34.7983 252.001 51.6974C252.001 69.3058 238.903 82.3375 223.189 82.3375C214.834 82.3375 208.44 78.06 206.102 74.4918H205.88V100.356C205.88 100.512 205.818 100.661 205.708 100.771C205.598 100.881 205.449 100.943 205.293 100.943H190.566C190.409 100.943 190.258 100.882 190.146 100.772C190.035 100.662 189.97 100.513 189.967 100.356V21.6779C189.967 21.5192 190.03 21.3669 190.143 21.2547C190.255 21.1425 190.407 21.0795 190.566 21.0795H204.329C204.486 21.0824 204.635 21.1467 204.745 21.2586C204.855 21.3705 204.916 21.5211 204.916 21.6779V30.0997ZM221.179 67.3428C219.958 67.3814 218.73 67.2768 217.521 67.0265C214.479 66.397 211.694 64.8745 209.522 62.6536C207.35 60.4328 205.89 57.6146 205.329 54.5595C205.167 53.6817 205.082 52.7958 205.072 51.9114C205.061 50.9204 205.144 49.926 205.323 48.9415C205.879 45.8886 207.331 43.0704 209.495 40.8465C211.659 38.6226 214.436 37.094 217.473 36.4557C218.689 36.2001 219.924 36.0919 221.153 36.1288C223.15 36.1534 225.123 36.5679 226.962 37.3492C228.825 38.141 230.513 39.2939 231.929 40.7413C233.344 42.1887 234.459 43.902 235.209 45.7824C235.959 47.6628 236.329 49.6731 236.299 51.6974C236.299 51.6977 236.299 51.698 236.299 51.6983C236.331 53.7263 235.962 55.7408 235.214 57.626C234.465 59.5114 233.351 61.2304 231.937 62.6843C230.522 64.1382 228.834 65.2983 226.97 66.098C225.138 66.8837 223.171 67.3063 221.179 67.3428Z",fill:"currentColor"}),o.jsx("path",{d:"M109.306 32.8701C105.904 25.7337 99.4543 21.1238 89.7359 21.1238C86.753 21.1758 83.8218 21.9123 81.1685 23.2765C78.5151 24.6406 76.2106 26.5959 74.4325 28.9916L74.0779 29.4238V1.45428C74.0779 1.29264 74.0137 1.13763 73.8994 1.02333C73.7851 0.909028 73.6301 0.844803 73.4684 0.844803H59.7275C59.5678 0.847707 59.4156 0.913196 59.3037 1.02718C59.1917 1.14117 59.1291 1.29454 59.1291 1.45428V81.6837C59.1291 81.8424 59.1921 81.9946 59.3044 82.1068C59.4166 82.219 59.5688 82.2821 59.7275 82.2821H74.4436C74.6033 82.2821 74.7567 82.2194 74.8707 82.1075C74.9847 81.9956 75.0502 81.8434 75.0531 81.6837V47.4754C75.0531 40.8265 79.4856 36.1169 86.5777 36.1169C94.3347 36.1169 96.2961 42.4998 96.2961 49.0046V81.6837C96.2961 81.8424 96.3592 81.9946 96.4714 82.1068C96.5836 82.219 96.7358 82.2821 96.8945 82.2821H111.577C111.737 82.2821 111.891 82.2194 112.004 82.1075C112.118 81.9956 112.184 81.8434 112.187 81.6837V47.0543C112.187 45.8686 112.187 44.705 112.032 43.5747C111.78 39.8707 110.856 36.2435 109.306 32.8701V32.8701Z",fill:"currentColor"}),o.jsx("path",{d:"M35.8249 44.7604C35.8249 44.7604 28.3339 42.9985 25.5746 42.2893C22.8153 41.5801 17.9949 40.073 17.9949 36.4272C17.9949 32.7814 21.8845 31.6179 25.8295 31.6179C29.7745 31.6179 34.1627 32.5709 34.5062 36.948C34.5201 37.1058 34.5927 37.2525 34.7097 37.3593C34.8267 37.466 34.9795 37.5249 35.1379 37.5243L49.6434 37.4689C49.7288 37.4691 49.8133 37.4517 49.8916 37.4178C49.9699 37.3838 50.0404 37.3341 50.0987 37.2717C50.1569 37.2093 50.2017 37.1356 50.2301 37.0551C50.2585 36.9746 50.2701 36.8891 50.264 36.804C49.3664 22.7971 37.0771 17.7883 25.7408 17.7883C12.2991 17.7883 2.46987 26.6534 2.46987 36.4272C2.46987 43.5636 4.48669 50.2568 20.3442 54.911C23.1256 55.7199 26.9044 56.7727 30.2066 57.6924C34.1738 58.8006 36.3125 60.4739 36.3125 63.1112C36.3125 66.1697 31.8799 68.2973 27.5249 68.2973C21.2196 68.2973 16.7427 65.9592 16.377 61.7593C16.358 61.6056 16.2832 61.4642 16.1667 61.362C16.0502 61.2599 15.9003 61.2041 15.7454 61.2052L1.27307 61.2717C1.18823 61.2717 1.10425 61.2887 1.02614 61.3218C0.94802 61.355 0.877379 61.4035 0.818427 61.4645C0.759474 61.5255 0.713411 61.5978 0.683003 61.677C0.652596 61.7562 0.638464 61.8407 0.641441 61.9255C1.30633 75.1456 14.0721 82.271 25.9735 82.271C43.7038 82.271 51.7156 72.2977 51.7156 62.9561C51.7378 58.5679 50.7294 48.5724 35.8249 44.7604Z",fill:"currentColor"}),o.jsx("path",{d:"M146.384 17.6442C132.654 17.6442 125.806 22.3095 120.31 26.0439L120.143 26.1547C119.86 26.3488 119.66 26.6427 119.584 26.9775C119.508 27.3124 119.562 27.6637 119.733 27.961L125.163 37.3137C125.265 37.4887 125.404 37.6391 125.571 37.754C125.738 37.869 125.928 37.9457 126.127 37.9786C126.323 38.0139 126.523 38.0053 126.715 37.9536C126.907 37.9018 127.084 37.8082 127.235 37.6794L127.668 37.3248C130.493 34.9534 135.026 31.7841 145.996 30.9197C152.102 30.4322 157.377 32.0279 161.266 35.6626C165.544 39.6076 168.104 45.9794 168.104 52.7058C168.104 65.0837 160.812 72.8629 149.099 73.018C139.447 72.9626 132.965 67.9317 132.965 60.496C132.965 56.5511 134.749 53.9802 138.228 51.4093C138.494 51.2193 138.682 50.9395 138.757 50.6217C138.832 50.304 138.79 49.9696 138.638 49.6806L133.762 40.4608C133.672 40.2958 133.551 40.1502 133.404 40.0323C133.258 39.9144 133.089 39.8266 132.909 39.7738C132.725 39.7188 132.531 39.7033 132.34 39.7281C132.149 39.7529 131.965 39.8176 131.801 39.9179C126.327 43.1647 119.611 49.1043 119.977 60.5182C120.42 75.0459 132.499 86.1384 148.201 86.5927H148.988H150.063C168.724 85.9833 182.199 72.1315 182.199 53.3485C182.199 36.1059 169.633 17.6442 146.384 17.6442Z",fill:"currentColor"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M282.375 1.04428H408.027C416.699 1.04428 423.73 8.07446 423.73 16.7466V85.54C423.73 94.2121 416.699 101.242 408.027 101.242H282.375C273.703 101.242 266.673 94.2121 266.673 85.54V16.7466C266.673 8.07446 273.703 1.04428 282.375 1.04428ZM310.566 55.5316C321.049 55.5316 328.551 47.8854 328.551 37.1697C328.551 26.5093 321.049 18.8188 310.566 18.8188H292.06C291.84 18.8188 291.628 18.9064 291.473 19.0623C291.317 19.2181 291.229 19.4295 291.229 19.65V70.4361C291.232 70.6556 291.32 70.8653 291.476 71.0206C291.631 71.1758 291.841 71.2643 292.06 71.2672H299.019C299.24 71.2672 299.451 71.1796 299.607 71.0237C299.763 70.8679 299.85 70.6565 299.85 70.4361V56.3627C299.85 56.1423 299.938 55.9309 300.094 55.775C300.25 55.6191 300.461 55.5316 300.682 55.5316H310.566ZM310.034 26.5315C315.73 26.5315 319.93 31.0306 319.93 37.1697C319.93 43.3198 315.73 47.8078 310.034 47.8078H300.682C300.463 47.8078 300.253 47.7218 300.098 47.5683C299.942 47.4149 299.853 47.2063 299.85 46.9878V27.3626C299.853 27.1431 299.942 26.9334 300.097 26.7781C300.252 26.6229 300.462 26.5344 300.682 26.5315H310.034ZM330.601 61.5266C330.529 59.8838 330.868 58.2489 331.588 56.7704C332.308 55.2919 333.386 54.0167 334.724 53.0604C337.428 51.0325 341.616 49.9798 347.833 49.736L354.426 49.5144V47.564C354.426 43.6745 351.811 42.0233 347.611 42.0233C343.412 42.0233 340.763 43.5082 340.143 45.9351C340.093 46.1065 339.988 46.2564 339.843 46.3609C339.698 46.4653 339.523 46.5183 339.345 46.5113H332.84C332.72 46.5143 332.601 46.491 332.492 46.4431C332.382 46.3952 332.284 46.3238 332.205 46.2341C332.126 46.1443 332.067 46.0383 332.033 45.9235C331.999 45.8086 331.991 45.6878 332.009 45.5694C332.984 39.807 337.749 35.4299 347.911 35.4299C358.704 35.4299 362.593 40.4498 362.593 50.0352V70.4028C362.595 70.5129 362.575 70.6221 362.533 70.7243C362.492 70.8264 362.431 70.9193 362.354 70.9977C362.277 71.076 362.185 71.1382 362.083 71.1807C361.981 71.2232 361.872 71.245 361.762 71.245H355.191C355.081 71.245 354.972 71.2232 354.87 71.1807C354.769 71.1382 354.677 71.076 354.599 70.9977C354.522 70.9193 354.461 70.8264 354.42 70.7243C354.379 70.6221 354.358 70.5129 354.36 70.4028V68.8846C354.371 68.7514 354.339 68.6183 354.268 68.5049C354.197 68.3915 354.092 68.3041 353.967 68.2555C353.842 68.207 353.706 68.1999 353.577 68.2354C353.448 68.2709 353.334 68.347 353.252 68.4525C351.29 70.5912 348.099 72.1426 343.013 72.1426C335.555 72.1647 330.601 68.2641 330.601 61.5266ZM354.426 57.094V55.5205L345.894 55.9637C341.395 56.1964 338.768 58.0692 338.768 61.2163C338.768 64.0643 341.173 65.6489 345.362 65.6489C351.058 65.6489 354.426 62.5682 354.426 57.1051V57.094ZM369.198 80.7196V86.6481C369.188 86.8397 369.242 87.0293 369.353 87.1861C369.463 87.3429 369.623 87.4579 369.807 87.5124C370.966 87.8283 372.164 87.9739 373.365 87.9446C379.736 87.9446 385.554 85.6175 388.879 76.553L403.506 37.5353C403.548 37.4097 403.559 37.276 403.54 37.1451C403.52 37.0142 403.47 36.8897 403.394 36.7817C403.317 36.6738 403.216 36.5854 403.099 36.5238C402.982 36.4622 402.852 36.4291 402.719 36.4272H395.904C395.727 36.4257 395.554 36.4809 395.411 36.5845C395.267 36.6882 395.161 36.8349 395.106 37.0034L387.05 61.7149C386.989 61.8769 386.879 62.0163 386.737 62.1147C386.594 62.2131 386.425 62.2658 386.252 62.2658C386.079 62.2658 385.91 62.2131 385.767 62.1147C385.625 62.0163 385.516 61.8769 385.454 61.7149L376.168 36.9369C376.106 36.7782 375.998 36.6417 375.858 36.5449C375.718 36.4481 375.552 36.3956 375.381 36.394H368.732C368.6 36.3959 368.47 36.429 368.353 36.4906C368.236 36.5522 368.135 36.6406 368.058 36.7485C367.981 36.8564 367.931 36.9809 367.912 37.1119C367.892 37.2428 367.904 37.3765 367.946 37.5021L381.62 72.6301C381.687 72.8126 381.687 73.0129 381.62 73.1953L381.188 74.5583C380.684 76.2492 379.627 77.722 378.186 78.7407C376.746 79.7593 375.005 80.265 373.243 80.1766C372.22 80.1755 371.2 80.079 370.195 79.8885C370.073 79.8656 369.948 79.87 369.828 79.9012C369.708 79.9325 369.596 79.9898 369.501 80.0692C369.406 80.1486 369.329 80.2481 369.277 80.3605C369.224 80.4729 369.197 80.5956 369.198 80.7196Z",fill:"currentColor"})]}));H3e.displayName="ShopPayIcon";const h6t=(e,t)=>{const n=parseFloat(t.replace(/[^0-9.-]+/g,"")),r=parseFloat(e.replace(/[^0-9.-]+/g,"")),s=Math.trunc((n-r)/n*100);return s===0?null:`${s}%`},g6t=(e,t)=>{let n;return e.thumbnails&&e.thumbnails?.length===1?n=[...e.thumbnails,...e.images]:n=e.thumbnails?.length>0?e.thumbnails:e.images,n.filter(r=>r.variants.includes(t.id)).concat(n.filter(r=>r.variants.length===0))},y6t=we(async()=>{const{ShoppingDetailsModal:e}=await Q(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-lzPr9UKf.js");return{ShoppingDetailsModal:t}},__vite__mapDeps([110,3,1,41,111,4,46,47,48,6,5,42,112,113,114,115,116,117,118]));return{default:e}}),x6t=we(async()=>{const{ShopifyPurchaseModal:e}=await Q(async()=>{const{ShopifyPurchaseModal:t}=await import("./ShopifyPurchaseModal-C_UGRk67.js");return{ShopifyPurchaseModal:t}},__vite__mapDeps([119,3,1,4,120,46,47,48,6,5,43]));return{default:e}}),v6t=(e,t)=>{switch(t.type){case"setItemDetailsOpen":return{...e,itemDetailsOpen:t.open};case"setSelectedImageIndex":return{...e,selectedImageIndex:t.index};case"setImageGalleryOpen":return{...e,imageGalleryOpen:t.open};case"setTryOnImageUrl":return{...e,tryOnImageUrl:t.url};case"setIsGeneratingTryOn":return{...e,isGeneratingTryOn:t.isGenerating}}},z3e={userDiscountOffer:null,shouldShowBuyWithPro:!1,selectedVariant:null,shopifyPurchaseModalOpen:!1,purchaseUrl:"",hideReviewSummary:!1,hasReviewSummary:!1,isShopifyPurchase:null,carouselImages:[],badgeText:"",needsUpsell:!1,showDiscountTag:!1,inViewRef:R.createRef(),reviewSummaryLoading:!1,buttonTitle:"",buttonTrailingComponent:null,selectedImageIndex:0,hasProsOrCons:!1,itemDetailsOpen:!1,imageGalleryOpen:!1,onPrimaryButtonClick:()=>{},tryOnImageUrl:null,isGeneratingTryOn:!1},b6t={setItemDetailsOpen:()=>{},setSelectedImageIndex:()=>{},setImageGalleryOpen:()=>{},setTryOnImageUrl:()=>{},setIsGeneratingTryOn:()=>{}},G3e=Yt("ShoppingWidgetDataContext",z3e),q3e=Yt("ShoppingWidgetApiContext",b6t),_6t=()=>f.useContext(G3e),w6t=()=>f.useContext(q3e),K3e=R.memo(({contextUUID:e,item:t,inFlight:n,entryUUID:r,onBuyWithProButtonClick:s,onShopifyButtonClick:a,children:i,canTryOn:l=!1})=>{const c="shopping-widget-provider",{$t:u}=Z(),[d,m]=f.useReducer(v6t,{...z3e}),[p,h]=f.useState(1),[g,y]=f.useState(!1),[x,v]=f.useState(t.variants.find(ke=>ke.available)||t.variants[0]),{trackEvent:b}=je(),{openModal:_}=wt(),{hasAccessToProFeatures:w}=Et(),C=lt(),{openVisitorLoginUpsell:S}=gr({enabled:!C}),E=co(),k=Tp()==="US",{env:{isLocalhost:N}}=Lt(),P=k||N,L=f.useRef(null),{isMobileStyle:O}=Ce();bH({ref:L,onInView:()=>{e&&b("shown shopping product",{contextUUID:e,entryUUID:r??"",productId:t.id,productName:t.name,productURL:t.url,client:t.client})}});const A=!!t.review_summary?.buy_if,j=!A&&n;let T=null;x?.id&&t?.merchant_info?.merchant_domain&&t.client!=="shopify_catalogue"&&(T=`https://${t.merchant_info.merchant_domain}/cart/${x.id}:${p}`);const I=f.useMemo(()=>{const ke=x?g6t(t,x):[];return d.tryOnImageUrl?[{src:d.tryOnImageUrl,variants:[]},...ke]:ke},[t,x,d.tryOnImageUrl]),U=f.useMemo(()=>{const ke=t.images.map(et=>({image:et.src||"",url:et.src||""}));return d.tryOnImageUrl?[{image:d.tryOnImageUrl,url:d.tryOnImageUrl},...ke]:ke},[t.images,d.tryOnImageUrl]),B=f.useMemo(()=>t.merchant_info.pro_shop_enabled&&P,[t.merchant_info.pro_shop_enabled,P]),{customerShoppingInfo:D}=p6t({enabled:B??!1,reason:c}),W=f.useMemo(()=>!D?.customer?.shipping_address?.address.city,[D]),z=f.useCallback(()=>{const ke=p+1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:ke}),h(ke)},[e,t.name,p,b]),$=f.useCallback(()=>{const ke=p>1?p-1:1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:ke}),h(ke)},[e,t.name,p,b]),X=f.useCallback(async()=>{x?.price?_("shoppingPaymentModal",{product:t,onSuccess:ke=>{_("purchaseConfirmationModal",{order:ke})}}):window.open(t.url)},[t,_,x]),q=f.useCallback(()=>{_("shoppingOnboardingModal",{onContinue:()=>{X()}})},[X,_]),Y=f.useCallback(()=>{e&&T&&(b("shopping modal button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:x?.price??"",client:t.client}),window.open(T),y(!1))},[e,T,b,t.url,t.id,t.name,t.client,x]),G=f.useCallback(ke=>{e&&t.url&&b("shopping card button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:x?.price??"",cta:ke,client:t.client})},[e,t.url,t.id,t.name,t.client,b,x]),J=f.useMemo(()=>{if(x?.compare_at_price&&x?.price){const ke=h6t(x.price,x.compare_at_price);if(ke)return u({defaultMessage:"{amount} off",id:"+Fpudsk35l"},{amount:ke})}return null},[x,u]),K=f.useMemo(()=>!!t.review_summary&&t.review_summary.review_quality_score===0,[t.review_summary]),te=f.useCallback((ke,et)=>{if(!t.variants)return;const Ge=t.variants.find(ft=>[ft.option1,ft.option2,ft.option3].every((Ve,Le)=>Le===et?Ve===ke:Ve===x?.[`option${Le+1}`]));Ge&&v(Ge),e&&b("shopping product option selected",{contextUUID:e,productName:t.name})},[e,t.name,t.variants,x,v,b]),re=f.useMemo(()=>T,[T]),se=f.useMemo(()=>B&&(!C||!w),[B,C,w]),me=f.useMemo(()=>u(B||T?{defaultMessage:"Buy with",id:"bw7bvygIAi"}:{defaultMessage:"Visit Site",id:"Ppy3I8Cd73"}),[B,T,u]),oe=f.useMemo(()=>B?o.jsx(T3,{sizeVariant:"small",fillColor:"fill-inverse",width:"w-[26px] ml-0.5"}):T?o.jsx("div",{className:"h-[14px] [&>*]:ml-0.5 [&>*]:w-auto",children:o.jsx(H3e,{})}):void 0,[B,T]),ge=f.useCallback(()=>{a?a():y(!0)},[a,y]),xe=f.useCallback(()=>{if(B){if(!C){S({origin:De.BUY_WITH_PRO_BUTTON,description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"}),title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),sheetModalVariant:"bottom-sheet-gradient"});return}if(!w){E({origin:De.BUY_WITH_PRO_BUTTON,pitchMessage:{title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"})}});return}W?q():X(),s?.()}else re?ge():window.open(t.url)},[X,q,ge,re,t.url,s,W,C,w,E,S,B,u]),ye=f.useCallback(()=>{G(B?"buy with pro":re?"buy with shop":"visit site")},[G,re,B]),_e=f.useCallback(()=>{xe(),ye()},[xe,ye]),be=f.useMemo(()=>j?!0:(t.review_summary?.pros_detailed?.length??0)>0||(t.review_summary?.cons_detailed?.length??0)>0,[t.review_summary?.pros_detailed,t.review_summary?.cons_detailed,j]),Ne=f.useMemo(()=>({...d,shouldShowBuyWithPro:B,selectedVariant:x,shopifyPurchaseModalOpen:g,purchaseUrl:T,hideReviewSummary:K,hasReviewSummary:A,isShopifyPurchase:re,carouselImages:I,badgeText:J,needsUpsell:se,inViewRef:L,reviewSummaryLoading:j,buttonTitle:me,buttonTrailingComponent:oe,hasProsOrCons:be,onPrimaryButtonClick:_e}),[d,B,x,g,T,K,A,re,I,J,se,L,j,me,oe,be,_e]),Ee=f.useMemo(()=>({setItemDetailsOpen:ke=>m({type:"setItemDetailsOpen",open:ke}),setSelectedImageIndex:ke=>m({type:"setSelectedImageIndex",index:ke}),setImageGalleryOpen:ke=>m({type:"setImageGalleryOpen",open:ke}),setTryOnImageUrl:ke=>m({type:"setTryOnImageUrl",url:ke}),setIsGeneratingTryOn:ke=>m({type:"setIsGeneratingTryOn",isGenerating:ke})}),[m]),Re=f.useCallback(()=>{Ee.setItemDetailsOpen(!1)},[Ee]),Ae=f.useCallback(()=>{Ee.setItemDetailsOpen(!1),y(!0)},[Ee,y]),st=f.useCallback(()=>{Ee.setItemDetailsOpen(!1)},[Ee]),it=f.useCallback(()=>{y(!1)},[y]),Se=f.useCallback(ke=>{Ee.setSelectedImageIndex(ke),O||requestAnimationFrame(()=>{Ee.setImageGalleryOpen(!0)})},[Ee,O]),ue=f.useCallback(()=>{Ee.setImageGalleryOpen(!1)},[Ee]);return o.jsx(G3e.Provider,{value:Ne,children:o.jsxs(q3e.Provider,{value:Ee,children:[i,o.jsx(y6t,{isOpen:d.itemDetailsOpen,onClose:Re,onShopifyButtonClick:Ae,inFlight:n,onBuyWithProButtonClick:st,item:t,canTryOn:l,menuItems:fe}),o.jsx(x6t,{open:g,onOptionSelect:te,onQuantityIncrement:z,onQuantityDecrement:$,onClose:it,quantity:p,item:t,selectedVariant:x,handleBuyClick:Y,selectedImageIndex:d.selectedImageIndex,handleImageClick:Se,images:I}),o.jsx(vH,{title:t.name,mainImageIndex:d.selectedImageIndex,isOpen:d.imageGalleryOpen,images:U,onClose:ue})]})})});K3e.displayName="ShoppingWidgetProvider";const Y3e=R.memo(({contextUUID:e,entryUUID:t,item:n,inFlight:r,innerRef:s,className:a,showProsCons:i=!0,context:l})=>{const{result:{answer_modes:c}}=ln(),u=f.useMemo(()=>c.find(m=>m.answer_mode_type===yn.SHOPPING)?.shopping_config?.can_try_on??!1,[c]);return o.jsx(K3e,{contextUUID:e,item:n,inFlight:r,entryUUID:t,canTryOn:u,children:o.jsx(Q3e,{item:n,className:a,contextUUID:e,entryUUID:t,inFlight:r,innerRef:s,showProsCons:i,context:l})})});Y3e.displayName="ShoppingWidgetDense";const Q3e=R.memo(({item:e,className:t,contextUUID:n,entryUUID:r,innerRef:s,showProsCons:a,context:i})=>{const l="widget-inner",{inViewRef:c,shouldShowBuyWithPro:u,carouselImages:d,badgeText:m,selectedVariant:p,reviewSummaryLoading:h,hasProsOrCons:g}=_6t(),{setItemDetailsOpen:y}=w6t(),{isMobileStyle:x}=Ce(),{trackEvent:v}=je(),b=f.useCallback(()=>{y(!0),v("shopping card body clicked",{productId:e.id,productURL:e.url,contextUUID:n??"",client:e.client}),i==="answersMode"&&v("answer mode tab item selected",{answerMode:"shopping",entryUUID:r??"",contextUUID:n??"",itemID:e.id})},[i,n,r,e.client,e.id,e.url,y,v]);m6t({enabled:e.client==="firmly",reason:l});const _=f.useCallback(()=>{b()},[b]);return o.jsx(f3e,{id:e.id,entityVariant:"dense-card",className:V("relative !p-0",t),children:o.jsxs(H,{as:"button","data-widget-id":e.id,ref:nve([s,c]),className:V("group/root gap-sm md:gap-md flex cursor-pointer flex-col p-[10px] duration-150"),onClick:_,children:[o.jsxs("div",{className:V("md:gap-md flex flex-1 items-start gap-[12px]",{"md:items-center":!a||!g,"md:items-start":a&&g}),children:[e.image_url&&o.jsx("div",{className:"border-subtlest size-[88px] shrink-0 rounded-lg border bg-white md:size-28 dark:border-0",children:o.jsx(hH,{images:d.map(w=>w.src),className:"size-full rounded-lg bg-white",badgeText:m??void 0})}),o.jsxs("div",{className:"gap-xs flex flex-1 flex-col",children:[o.jsx("div",{className:"gap-xs flex items-start justify-between",children:o.jsxs("div",{className:"gap-xs flex flex-col",children:[e.merchant_info&&o.jsx(U3e,{merchantName:e.merchant,merchantDomain:e.merchant_info.merchant_domain,itemUrl:e.url,className:"md:mb-xs"}),u&&o.jsx("div",{className:"border-super/10 md:right-sm md:top-sm bg-super/10 md:px-sm md:py-xs absolute right-0 top-0 rounded-bl rounded-tr-[11px] border border-r-0 border-t-0 px-[6px] py-0.5 duration-150 md:rounded md:rounded-tr-[6px] md:border-r md:border-t",children:o.jsx($3e,{})}),o.jsx(F,{variant:x?"smallBold":"baseSemi",className:"line-clamp-2 text-pretty text-left leading-tight",children:e.name}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(V3e,{textVariant:x?"tiny":void 0,comparePrice:p?.compare_at_price??void 0,price:e.price,size:"small"}),u&&o.jsx(W3e,{className:"inline-flex"})]}),typeof e.rating=="number"&&o.jsx(gH,{reviewCount:e.num_reviews,rating:e.rating,size:"xs",variant:"truncated",textVariant:x?"tiny":void 0})]})}),!x&&g&&a&&o.jsx(wn,{active:h,className:"-ml-xs mt-1",children:o.jsx(Vb,{pros:e.review_summary?.pros_detailed??fe,cons:e.review_summary?.cons_detailed??fe,loading:h,id:e.id})})]})]}),x&&g&&a&&o.jsx(Vb,{pros:e.review_summary?.pros_detailed??fe,cons:e.review_summary?.cons_detailed??fe,loading:h,className:"mt-2",id:e.id})]})})});Q3e.displayName="WidgetInner";const C6t=we(async()=>{const{ShoppingDetailsModal:e}=await Q(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-lzPr9UKf.js");return{ShoppingDetailsModal:t}},__vite__mapDeps([110,3,1,41,111,4,46,47,48,6,5,42,112,113,114,115,116,117,118]));return{default:e}}),S6t=we(async()=>{const{ShoppingViewMoreModal:e}=await Q(async()=>{const{ShoppingViewMoreModal:t}=await import("./ShoppingViewMoreModal-CpV_BaLl.js");return{ShoppingViewMoreModal:t}},__vite__mapDeps([121,3,1,122,4,120,46,47,48,6,5,43,123,111,42,112,113,114,115,116,117,118,124]));return{default:e}}),E6t=R.memo(({data:e,contextUUID:t,entryUUID:n,entryTitle:r,title:s,menuItemFn:a,innerRef:i,isEntryInFlight:l,entityVariant:c,includeViewAll:u,className:d,groupClassName:m,entityClassName:p,loading:h,textLoading:g,onRemoveResults:y})=>{const{$t:x}=Z(),{entityRefs:v}=pH(),{viewMoreOpen:b,setViewMoreOpen:_}=YAt(),[w,C]=f.useState(null),{trackEvent:S}=je(),E=f.useCallback(()=>{_(!0),n&&S("view all clicked",{entryUUID:n,src:"button"})},[n,_,S]),M=f.useMemo(()=>{const P=[],L=[],O=[];return e.forEach(A=>{const j=Sw(A);if(!j)return;const T=j.object;if(T==="ShopifyWidget")P.push(A),L.push(j),ya(j.images)&&O.push(j.images[0]);else if(T==="PlaceWidget"&&(P.push(A),L.push(j),ya(j.images))){const I=j.images[0];O.push({src:I,variants:[]})}}),{widgetResults:P,widgets:L,images:O}},[e]),k=f.useCallback(()=>_(!1),[_]),N=f.useCallback(()=>C(null),[]);return o.jsxs(o.Fragment,{children:[o.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,ease:an},ref:i,className:V("gap-sm relative isolate flex flex-col",m),children:[s&&o.jsxs("div",{className:"mt-md flex items-end justify-between",children:[o.jsx(r3e,{title:s,loading:h}),o.jsx("div",{className:"gap-sm flex items-center",children:o.jsxs(Je,{mode:"popLayout",initial:!1,children:[u&&!h&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,ease:va},children:o.jsx(pe,{text:x({defaultMessage:"View All",id:"wbcwKddwLa"}),variant:"border",size:"tiny",pill:!0,onClick:E})},"view-all-button"),!h&&y&&o.jsx(pe,{variant:"border",size:"tiny",pill:!0,icon:It,onClick:y,toolTip:x({defaultMessage:"Remove results",id:"eLqO1aEzzN"})},"remove-results-button")]})})]}),g?o.jsx(c3e,{}):o.jsx(X3e,{validatedWidgets:M,className:d,menuItemFn:a,contextUUID:t,entryUUID:n,isEntryInFlight:l,entityRefs:v,entityVariant:c,entityClassName:p,includeViewAll:u,onClickViewAll:E})]}),n&&o.jsxs(o.Fragment,{children:[w&&o.jsx(C6t,{isOpen:w!==null,onClose:N,item:w,onShopifyButtonClick:Pn,onBuyWithProButtonClick:Pn,inFlight:l,menuItems:fe}),o.jsx(S6t,{open:b,onClose:k,entryUUID:n,title:r??"",initialResults:M.widgetResults.filter(P=>"meta_data"in P)})]})]})});E6t.displayName="EntityGroup";const X3e=R.memo(({validatedWidgets:e,className:t,menuItemFn:n,contextUUID:r,entryUUID:s,isEntryInFlight:a,entityRefs:i,entityClassName:l,includeViewAll:c,onClickViewAll:u})=>o.jsxs("div",{className:V("gap-sm flex flex-col",t),children:[e.widgetResults.map((d,m)=>{const p=n?n(d):void 0,h=e.widgets[m];return Qr(h).with({object:"ShopifyWidget"},g=>o.jsx(Y3e,{item:g,contextUUID:r,entryUUID:s,innerRef:i[g.id],inFlight:a,className:l},g.id)).with({object:"PlaceWidget"},g=>o.jsx(D3e,{place:g,contextUUID:r,entryUUID:s,menuItems:p,inFlight:a,className:l},g.id)).otherwise(()=>null)}),c&&o.jsx(l3e,{onClick:u,disabled:a,images:e.images})]}));X3e.displayName="HighIntentWidgetGroup";const M6t=(e,t)=>e.concat(t).reduce((r,s)=>{const a=Sw(s);if(!a)return r;const i=a.object;return(i==="ShopifyWidget"||i==="PlaceWidget")&&(r[i]||(r[i]=[]),r[i].push(s)),r},{}),k6t=e=>{const t=Sw(e);if(t)switch(t.object){case"ShopifyWidget":return!0;default:return!1}return!1},Z3e=["GenericFallbackWidget"],T6t=(e,t)=>{if(!e)return;const n=e.filter(r=>r.plan_block&&r.intended_usage=="plan").map(r=>r.plan_block);if(n&&n.length>0){const r=[];let s=!1;for(const a of n){for(const i of a?.goals??[])if(i.description!==null)if(r.length==0||r[r.length-1]?.final)r.push({...i});else{const l=r[r.length-1];l&&(l.description+=i.description,l.final=i.final)}a?.final&&(s=!0)}if(r.length>0)return{goals:r,final:s,channel_uuid:"",comprehensive_mode:!1}}return t},N6t=e=>e.blocks??fe,mv=e=>{const t=e.filter(s=>s.plan_block&&s.intended_usage=="pro_search_steps").map(s=>s.plan_block),n={};for(let s=0;s<t.length;s++)n[t[s]?.steps[0]?.uuid??""]=s;return t.filter((s,a)=>n[s.steps[0]?.uuid??""]===a).map(s=>s.steps.map(a=>({step_type:a.step_type,uuid:a.uuid??"",content:a?.initial_query_content??a?.attachment_content??a?.terminate_content??a?.search_web_content??a?.web_results_content??a?.code_content??a?.table_status_content??a?.entropy_request_content??a?.thought_content??a?.browser_search_content??a?.browser_open_tab_content??a?.browser_open_tab_results_content??a?.url_navigate_content??a?.browser_get_site_content_content??a?.user_clarification_content??a?.browser_get_history_summary_content??a?.browser_get_open_tab_content_content??a?.read_calendar_content??a?.read_calendar_response_content??a?.read_email_content??a?.read_email_response_content??a?.update_calendar_content??a?.generate_image_content??a?.generate_image_results_content??a?.generate_video_content??a?.generate_video_results_content??a?.search_tabs_content??a?.search_tabs_results_content??a?.create_app_results_content??a?.browser_close_tabs_content??a?.browser_close_tabs_results_content??a?.update_calendar_response_content??a?.browser_group_tabs_content??a?.browser_group_tabs_results_content??a?.create_chart_content??a?.get_url_content_content??a?.create_client_app_content??a?.get_user_info_content??a?.get_user_info_response_content??a?.get_free_busy_content??a?.get_free_busy_response_content??a?.send_email_content??a?.send_email_response_content??a?.browser_ungroup_content??a?.browser_search_tab_groups_content??a?.browser_search_tab_groups_result_content??a?.search_browser_content??a?.search_browser_results_content??a?.clarifying_questions_content??a?.clarifying_questions_output_content??a?.email_calendar_agent_content??a?.email_calendar_agent_response_content??a?.mcp_tool_input_content??a?.mcp_tool_output_content??a?.blocking_clarifying_questions_content??a?.create_tasks_content??a?.create_tasks_response_content??a?.flights_search_content??a?.flights_booking_content??a?.flights_search_response_content??a?.flights_booking_response_content??a?.flights_agent_content??{},assets:a.assets}))).flat()},j6t=e=>e?.filter(t=>t.reasoning_plan_block&&t.intended_usage==="reasoning_plan").map(t=>t.reasoning_plan_block),A6t=e=>{let t=!1;if(e&&e.length>0){const n=new Map;for(const a of e){if(a.goals){for(const i of a.goals)if(i.id)if(n.has(i.id)){const l=n.get(i.id);l.description+=i.description,n.set(i.id,l)}else n.set(i.id,{...i})}t=a.progress==="DONE"}const r=Array.from(n.values()),s=e.flatMap(a=>a.web_results??fe);return{goals:r,web_results:s,final:t}}};function I6t(e){const t={},n=[];return e?.forEach(r=>{if(r.widget_block){const s=t[r.intended_usage]??n.length;t[r.intended_usage]=s,n[s]=Yrt(n[s],r.widget_block)}}),n}function R6t(e){return(e?.filter(t=>t.media_block).flatMap(t=>t.media_block.media_items)??[]).filter(t=>!t.sponsored_uuid)}function P6t(e){return e?.filter(t=>t.media_block).flatMap(t=>t.media_block.generated_media_items)??[]}function O6t(e=fe){return e.reduce((t,n)=>{if(n.is_code_interpreter&&n.is_image)t.codeInterpreterImages.push(n);else{const r=n.meta_data?.source==="quartr"?{...n,snippet:""}:n;t.webResultsStandard.push(r)}return t},{webResultsStandard:[],codeInterpreterImages:[]})}function L6t(e){return e?.flatMap(t=>t.inline_entity_block?.knowledge_card_block?t.inline_entity_block.knowledge_card_block.knowledge_cards:t.knowledge_card_block?t.knowledge_card_block.knowledge_cards:[])??[]}function D6t(e){return e??fe}function F6t(e){return e?.filter(t=>t.citation_block).flatMap(t=>t.citation_block.citations)??fe}function U6t(e){const t=e?.find(r=>r?.inline_entity_block?.finance_inline_block&&r.intended_usage==="answer_finance_widget")?.inline_entity_block?.finance_inline_block;return t===void 0?void 0:{object:"FinanceWidget",data:t.data_json.map(r=>JSON.parse(r)),data_v2:t?.data_json_v2?.map(r=>JSON.parse(r))}}function B6t(e){const t=e?.map(s=>s.widget_block)?.find(s=>s?.widget_type==="sports");if(!t?.sports_widget_block?.data)return;const r=t.sports_widget_block.data;switch(r.object){case"SportsEventsWidget":return r;case"SportsIndvScheduleWidget":return r;case"SportsStandingsWidget":return r;case"SportsIndvEventsWidget":return r;default:return}}function V6t(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="WeatherWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function $6t(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TimeWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function W6t(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="TimerWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function H6t(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="CalculatorWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function z6t(e,t){return e&&e.length>0?e.map(n=>({name:n.widget_type||"",url:"",snippet:"",timestamp:"",meta_data:{object:n.widget_type||"unknown",...n},is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""})):t||[]}function G6t(e){const t=e.find(r=>r?.meta_data?.object==="TableWidget");return t?t.meta_data.search_results:fe}function q6t(e){return e.filter(t=>Z3e.includes(t?.meta_data?.object))}function K6t(e){return e.filter(t=>!Z3e.includes(t?.meta_data?.object))}function Y6t(e){const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TaskWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function Q6t(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="FlightStatusWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function X6t(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="CurrencyExchangeWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function Z6t(e){if(!e?.length)return[];const t=[];return e.forEach(n=>{n.intended_usage==="pro_search_steps"&&n.plan_block?.steps&&n.plan_block.steps.forEach(r=>{r.clarifying_questions_output_content?.clarification&&t.push(r.clarifying_questions_output_content.clarification)})}),t}function J6t(e){return e?e.find(n=>n.intended_usage==="refinement_filters")?.refinement_filters_block:void 0}function eIt(e){return e?e.find(n=>n.inline_entity_block?.maps_preview_block&&n.intended_usage==="answer_maps_preview")?.inline_entity_block?.maps_preview_block:void 0}const Ms=e=>e.result,Or=Tt.makeSelector(e=>N6t(e(Ms))),tIt=Tt.makeSelector(e=>{const t=e(Or),n={};return t.forEach(r=>{r.intended_usage&&(n[r.intended_usage]=r)}),n}),nIt=Tt.makeSelector(e=>e(Ms).mode),_H=Tt.makeSelector(e=>e(Ms).display_model),rIt=Tt.makeSelector(e=>!!e(Ms).is_pro_reasoning_mode),J3e=Tt.makeSelector(e=>e(Ms).search_implementation_mode),wH=Tt.makeSelector(e=>vn.isStatusFailed(e(Ms))),sIt=Tt.makeSelector(e=>vn.isStatusPending(e(Ms))),aIt=Tt.makeSelector(e=>vn.isStatusBlocked(e(Ms))),iIt=Tt.makeSelector(e=>e(Ms).plan),e5e=Tt.makeSelector(e=>e(Ms).widget_data??fe),HT=Tt.makeSelector(e=>vn.parseAskTextField(e(Ms))??void 0),t5e=Tt.makeSelector(e=>vn.isStatusPending(e(Ms))),oIt=Tt.makeSelector(e=>Qlt(e(Ms))),n5e=Tt.makeSelector(e=>e(Ms).expect_search_results),wL=Tt.makeSelector(e=>{const t=e(HT),n=vn.isStatusCompleted(e(Ms));return t?vn.hasAnswer(t,n):!1}),r5e=Tt.makeSelector(e=>e(a5e).length>0),ZM=Tt.makeSelector(e=>mv(e(Or))),CH=Tt.makeSelector(e=>T6t(e(Or),e(iIt))),lIt=Tt.makeSelector(e=>j6t(e(Or))),CL=Tt.makeSelector(e=>A6t(e(lIt))),SH=Tt.makeSelector(e=>Yr(e(_H))),cIt=Tt.makeSelector(e=>{const t=e(SH),n=e(Ms),r=vn.parseStructuredAnswerBlocks(n);return r!==null&&r.some(s=>s.intended_usage==="answer_generated_image"||s.intended_usage==="answer_generated_video")&&!r.some(s=>!!s.markdown_block?.answer||!!s.markdown_block?.chunks)&&t===ce.SEARCH}),s5e=Tt.makeSelector(e=>I6t(e(Or))),a5e=Tt.makeSelector(e=>O6t(e(HT)?.web_results).webResultsStandard),i5e=Tt.makeSelector(e=>V6t(e(Or))),o5e=Tt.makeSelector(e=>$6t(e(Or))),l5e=Tt.makeSelector(e=>W6t(e(Or))),c5e=Tt.makeSelector(e=>X6t(e(Or))),u5e=Tt.makeSelector(e=>H6t(e(Or))),d5e=Tt.makeSelector(e=>Q6t(e(Or))),zT=Tt.makeSelector(e=>z6t(e(s5e),e(e5e))),uIt=Tt.makeSelector(e=>Xlt(e(Or),e(_H),e(ZM))),dIt=Tt.makeSelector(e=>e(HT)?.answer==="Answer skipped."||e(Or).some(t=>t.markdown_block?.answer==="Answer skipped.")),fIt=Tt.makeSelector(e=>e(nIt)===ug.COPILOT||e(ZM)!=null&&e(ZM).length>0),mIt=Tt.makeSelector(e=>e(wH)?fe:R6t(e(Or))),pIt=Tt.makeSelector(e=>e(wH)?fe:P6t(e(Or))),hIt=Tt.makeSelector(e=>{const t=e(CH);return e(J3e)==="fast"||!!t&&t.goals.length===1&&t.goals[0]?.description==="Searching the web"}),gIt=Tt.makeSelector(e=>e(Ms).attachment_processing_progress??fe),f5e=Tt.makeSelector(e=>!!e(gIt).length),m5e=Tt.makeSelector(e=>e(Ms).search_focus==="writing"),p5e=Tt.makeSelector(e=>{const t=e(t5e),n=e(n5e),r=e(m5e);return!!t&&n!=="false"&&!r}),yIt=Tt.makeSelector(e=>{const t=e(r5e),n=e(p5e);return t||n}),xIt=Tt.makeSelector(e=>e(_H)===de.O3_PRO&&!e(wL)?!0:e(hIt)&&!e(CL)?!1:!!(!e(wL)&&(e(CH)||e(CL)||e(SH)!==ce.SEARCH||e(J3e)==="multi_step"||e(f5e)))),vIt=Tt.makeSelector(e=>L6t(e(Or))),bIt=Tt.makeSelector(e=>D6t(e(Ms).related_query_items)),_It=Tt.makeSelector(e=>F6t(e(Or))),h5e=Tt.makeSelector(e=>U6t(e(Or))),g5e=Tt.makeSelector(e=>B6t(e(Or))),y5e=Tt.makeSelector(e=>G6t(e(zT))),wIt=Tt.makeSelector(e=>q6t(e(zT))),CIt=Tt.makeSelector(e=>K6t(e(zT))),SIt=Tt.makeSelector(e=>M6t(e(zT),e(s5e))),EIt=Tt.makeSelector(e=>[...e(a5e),...e(y5e)]),MIt=Tt.makeSelector(e=>Y6t(e(Or))),kIt=Tt.makeSelector(e=>{const t=e(g5e),n=e(h5e),r=e(i5e),s=e(o5e),a=e(u5e),i=e(d5e),l=e(l5e),c=e(c5e);return!!(t||n||r||s||a||i||l||c)}),TIt=Tt.makeSelector(e=>Z6t(e(Or))),NIt=Tt.makeSelector(e=>J6t(e(Or))),jIt=Tt.makeSelector(e=>eIt(e(Or))),x5e=e=>{const{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:c=[]}=e,u=TIt(e),d=n.backend_uuid?c.filter(h=>h.entryUUID===n.backend_uuid).map(h=>h.content):[],m=Array.from(new Set([...u,...d])),p=NIt(e);return{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,isPending:sIt(e),isBlocked:aIt(e),isFinalStep:uIt(e),isFailed:wH(e),isProReasoningMode:rIt(e),widgetData:e5e(e),response:HT(e),isEntryInFlight:t5e(e),hasLLMToken:oIt(e),isAnswerSkipped:dIt(e),expectWebResults:n5e(e),steps:ZM(e),researchPlan:CH(e),reasoningPlan:CL(e),searchMode:SH(e),hasMediaOnlyLayout:cIt(e),hasAnswer:wL(e),hasWebResults:r5e(e),weatherWidgetData:i5e(e),timeWidgetData:o5e(e),timerWidgetData:l5e(e),calculatorWidgetData:u5e(e),currencyExchangeWidgetData:c5e(e),flightStatusWidgetData:d5e(e),isCopilot:fIt(e),mediaItems:mIt(e),generatedMediaItems:pIt(e),hasPendingFiles:f5e(e),showAgentWorkflow:xIt(e),knowledgeCards:vIt(e),relatedQueryItems:bIt(e),webResultCitations:_It(e),financeWidgetData:h5e(e),sportsWidgetData:g5e(e),tableWebResults:y5e(e),highPriorityWidgets:wIt(e),lowPriorityWidgets:CIt(e),groupedEntityWidgets:SIt(e),webResults:EIt(e),taskWidgetData:MIt(e),hasFastWidget:kIt(e),userClarifications:m,refinementFiltersData:p,selectedFilterIds:p?.selected_filter_ids??[],focusIsWriting:m5e(e),expectSearchResults:p5e(e),hasSources:yIt(e),blocksByIntendedUsage:tIt(e),mapsPreviewData:jIt(e)}},AIt=e=>Po()((n,r)=>({editQueryValue:e.result?.query_str??"",isEditingQuery:!1,isStatusUpdaterOpen:!1,wasStatusUpdaterManuallyOpened:!1,selectedRefinementQuery:null,...x5e(e),actions:{setEditQueryValue:s=>n({editQueryValue:s}),setIsEditingQuery:s=>n({isEditingQuery:s}),setStatusUpdaterOpen:s=>n({isStatusUpdaterOpen:s}),setWasStatusUpdaterManuallyOpened:s=>n({wasStatusUpdaterManuallyOpened:s}),setSelectedRefinementQuery:s=>n({selectedRefinementQuery:s}),setSelectedFilterIds:s=>n({selectedFilterIds:s}),handleSourcesCuration:s=>{r().result?.frontend_context_uuid&&(r().result?.backend_uuid&&r().scrollToListItem?.(r().result.backend_uuid,{smooth:!0}),r().submitQuery({existingEntryUUID:r().result?.backend_uuid??void 0,newFrontendContextUUID:null,existingFrontendContextUUID:r().result?.frontend_context_uuid,deletedUrls:s,rawQuery:r().result?.query_str??"",existingUuid:r().result?.uuid??void 0,collection:null,promptSource:"user",querySource:"citation_modal"}))}}})),{Context:IIt,useTrackedState:RIt}=C_("ThreadEntryContext"),EH=R.memo(({idx:e,children:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l})=>{const c=f.useRef(r),{trackEvent:u}=hx(),{pendingClarifications:d}=mH(),[m]=f.useState(()=>AIt({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:d})),h=m(g=>g.isFinalStep);return f.useEffect(()=>{const g=()=>{const v=setTimeout(()=>{u("engaged",{})},1e4);return()=>{clearTimeout(v)}},y=a&&s,x=c.current&&!r;if(y&&x&&h)return g();c.current=r},[r,h,s,a,u]),f.useEffect(()=>{m.setState(x5e({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:d}))},[e,n,r,s,a,i,l,d,m]),o.jsx(IIt.Provider,{value:m,children:t})});EH.displayName="ThreadEntryProvider";const ln=RIt;function GT(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=ln(),n=Gge(),r=n(e??"")??n(t);return f.useCallback((s,a)=>r?.addTiming(s,a),[r])}function v5e(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=ln(),n=Gge(),r=n(e??"")??n(t);return f.useCallback((s,a)=>r?.addTimingOnce(s,a),[r])}const PIt=({widgetType:e,widgetName:t,widgetSize:n="full"})=>{const{trackEvent:r}=je(),{result:{backend_uuid:s,frontend_context_uuid:a}}=ln(),i=f.useMemo(()=>({widgetType:e,widgetName:t,widgetLocation:"thread",widgetSize:n,position:0,frontendUUID:a,entryUUID:s}),[e,t,s,a,n]),l=f.useCallback(()=>{r("widget viewed",i)},[r,i]),c=f.useCallback(()=>{r("widget hovered",i)},[r,i]),u=f.useCallback(d=>{r("widget selected",{...i,widgetCTA:{type:"internal_url",permalink:d}})},[r,i]);return f.useMemo(()=>({widgetViewed:l,widgetHovered:c,widgetSelected:u}),[l,c,u])},Ho=R.memo(e=>{const{children:t,...n}=e,{widgetSelected:r,widgetViewed:s,widgetHovered:a}=PIt(n),i=f.useRef({hovered:!1,viewed:!1}),{ref:l,isIntersecting:c}=J0e({threshold:.5,freezeOnceVisible:!0});f.useEffect(()=>{c&&!i.current.viewed&&(s(),i.current.viewed=!0)},[c,s]);const u=f.useCallback(()=>{i.current.hovered||(a(),i.current.hovered=!0)},[a]);return o.jsx("div",{ref:l,onMouseEnter:u,"data-testid":e.widgetType+"-widget",children:typeof t=="function"?t({widgetSelected:r}):t})});Ho.displayName="WithThreadWidgetInteractionEvents";const b5e=R.memo(e=>{const{data:t}=e,{menuItems:n}=Dx();return t?.result==null?null:o.jsx(Ho,{widgetType:"calculator",widgetName:"calculator",widgetSize:"full",children:o.jsx(H,{className:"flex",children:o.jsxs("div",{className:"flex w-full items-center",children:[o.jsx(F,{color:"light",variant:"smallBold",children:o.jsx(le,{className:"mt-two text-2xl leading-none",icon:z7e,size:"sm"})}),o.jsx(F,{children:o.jsx(H,{className:"pl-md font-mono text-2xl",children:Wot(t.result)})}),n&&n.length>0&&o.jsx("div",{className:"flex grow items-start justify-end",children:o.jsx(br.Menu,{menuItems:n})})]})})})});b5e.displayName="CalculatorWidget";function Bu(e){return Array.isArray?Array.isArray(e):C5e(e)==="[object Array]"}function OIt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function LIt(e){return e==null?"":OIt(e)}function nc(e){return typeof e=="string"}function _5e(e){return typeof e=="number"}function DIt(e){return e===!0||e===!1||FIt(e)&&C5e(e)=="[object Boolean]"}function w5e(e){return typeof e=="object"}function FIt(e){return w5e(e)&&e!==null}function Wi(e){return e!=null}function X6(e){return!e.trim().length}function C5e(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const UIt="Incorrect 'index' type",BIt=e=>`Invalid value for key ${e}`,VIt=e=>`Pattern length exceeds max of ${e}.`,$It=e=>`Missing ${e} property in key`,WIt=e=>`Property 'weight' in key '${e}' must be a positive integer`,oae=Object.prototype.hasOwnProperty;class HIt{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=S5e(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function S5e(e){let t=null,n=null,r=null,s=1,a=null;if(nc(e)||Bu(e))r=e,t=lae(e),n=SL(e);else{if(!oae.call(e,"name"))throw new Error($It("name"));const i=e.name;if(r=i,oae.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(WIt(i));t=lae(i),n=SL(i),a=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:a}}function lae(e){return Bu(e)?e:e.split(".")}function SL(e){return Bu(e)?e.join("."):e}function zIt(e,t){let n=[],r=!1;const s=(a,i,l)=>{if(Wi(a))if(!i[l])n.push(a);else{let c=i[l];const u=a[c];if(!Wi(u))return;if(l===i.length-1&&(nc(u)||_5e(u)||DIt(u)))n.push(LIt(u));else if(Bu(u)){r=!0;for(let d=0,m=u.length;d<m;d+=1)s(u[d],i,l+1)}else i.length&&s(u,i,l+1)}};return s(e,nc(t)?t.split("."):t,0),r?n:n[0]}const GIt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},qIt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},KIt={location:0,threshold:.6,distance:100},YIt={useExtendedSearch:!1,getFn:zIt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var qt={...qIt,...GIt,...KIt,...YIt};const QIt=/[^ ]+/g;function XIt(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const a=s.match(QIt).length;if(n.has(a))return n.get(a);const i=1/Math.pow(a,.5*e),l=parseFloat(Math.round(i*r)/r);return n.set(a,l),l},clear(){n.clear()}}}class MH{constructor({getFn:t=qt.getFn,fieldNormWeight:n=qt.fieldNormWeight}={}){this.norm=XIt(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,nc(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();nc(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Wi(t)||X6(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,a)=>{let i=s.getFn?s.getFn(t):this.getFn(t,s.path);if(Wi(i)){if(Bu(i)){let l=[];const c=[{nestedArrIndex:-1,value:i}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(Wi(d))if(nc(d)&&!X6(d)){let m={v:d,i:u,n:this.norm.get(d)};l.push(m)}else Bu(d)&&d.forEach((m,p)=>{c.push({nestedArrIndex:p,value:m})})}r.$[a]=l}else if(nc(i)&&!X6(i)){let l={v:i,n:this.norm.get(i)};r.$[a]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function E5e(e,t,{getFn:n=qt.getFn,fieldNormWeight:r=qt.fieldNormWeight}={}){const s=new MH({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(S5e)),s.setSources(t),s.create(),s}function ZIt(e,{getFn:t=qt.getFn,fieldNormWeight:n=qt.fieldNormWeight}={}){const{keys:r,records:s}=e,a=new MH({getFn:t,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(s),a}function kS(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=qt.distance,ignoreLocation:a=qt.ignoreLocation}={}){const i=t/e.length;if(a)return i;const l=Math.abs(r-n);return s?i+l/s:l?1:i}function JIt(e=[],t=qt.minMatchCharLength){let n=[],r=-1,s=-1,a=0;for(let i=e.length;a<i;a+=1){let l=e[a];l&&r===-1?r=a:!l&&r!==-1&&(s=a-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}const am=32;function eRt(e,t,n,{location:r=qt.location,distance:s=qt.distance,threshold:a=qt.threshold,findAllMatches:i=qt.findAllMatches,minMatchCharLength:l=qt.minMatchCharLength,includeMatches:c=qt.includeMatches,ignoreLocation:u=qt.ignoreLocation}={}){if(t.length>am)throw new Error(VIt(am));const d=t.length,m=e.length,p=Math.max(0,Math.min(r,m));let h=a,g=p;const y=l>1||c,x=y?Array(m):[];let v;for(;(v=e.indexOf(t,g))>-1;){let E=kS(t,{currentLocation:v,expectedLocation:p,distance:s,ignoreLocation:u});if(h=Math.min(E,h),g=v+d,y){let M=0;for(;M<d;)x[v+M]=1,M+=1}}g=-1;let b=[],_=1,w=d+m;const C=1<<d-1;for(let E=0;E<d;E+=1){let M=0,k=w;for(;M<k;)kS(t,{errors:E,currentLocation:p+k,expectedLocation:p,distance:s,ignoreLocation:u})<=h?M=k:w=k,k=Math.floor((w-M)/2+M);w=k;let N=Math.max(1,p-k+1),P=i?m:Math.min(p+k,m)+d,L=Array(P+2);L[P+1]=(1<<E)-1;for(let A=P;A>=N;A-=1){let j=A-1,T=n[e.charAt(j)];if(y&&(x[j]=+!!T),L[A]=(L[A+1]<<1|1)&T,E&&(L[A]|=(b[A+1]|b[A])<<1|1|b[A+1]),L[A]&C&&(_=kS(t,{errors:E,currentLocation:j,expectedLocation:p,distance:s,ignoreLocation:u}),_<=h)){if(h=_,g=j,g<=p)break;N=Math.max(1,2*p-g)}}if(kS(t,{errors:E+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:u})>h)break;b=L}const S={isMatch:g>=0,score:Math.max(.001,_)};if(y){const E=JIt(x,l);E.length?c&&(S.indices=E):S.isMatch=!1}return S}function tRt(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class M5e{constructor(t,{location:n=qt.location,threshold:r=qt.threshold,distance:s=qt.distance,includeMatches:a=qt.includeMatches,findAllMatches:i=qt.findAllMatches,minMatchCharLength:l=qt.minMatchCharLength,isCaseSensitive:c=qt.isCaseSensitive,ignoreLocation:u=qt.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(p,h)=>{this.chunks.push({pattern:p,alphabet:tRt(p),startIndex:h})},m=this.pattern.length;if(m>am){let p=0;const h=m%am,g=m-h;for(;p<g;)d(this.pattern.substr(p,am),p),p+=am;if(h){const y=m-am;d(this.pattern.substr(y),y)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,t.length-1]]),g}const{location:s,distance:a,threshold:i,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let d=[],m=0,p=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:x})=>{const{isMatch:v,score:b,indices:_}=eRt(t,g,y,{location:s+x,distance:a,threshold:i,findAllMatches:l,minMatchCharLength:c,includeMatches:r,ignoreLocation:u});v&&(p=!0),m+=b,v&&_&&(d=[...d,..._])});let h={isMatch:p,score:p?m/this.chunks.length:1};return p&&r&&(h.indices=d),h}}class Mf{constructor(t){this.pattern=t}static isMultiMatch(t){return cae(t,this.multiRegex)}static isSingleMatch(t){return cae(t,this.singleRegex)}search(){}}function cae(e,t){const n=e.match(t);return n?n[1]:null}class nRt extends Mf{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class rRt extends Mf{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class sRt extends Mf{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class aRt extends Mf{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class iRt extends Mf{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class oRt extends Mf{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class k5e extends Mf{constructor(t,{location:n=qt.location,threshold:r=qt.threshold,distance:s=qt.distance,includeMatches:a=qt.includeMatches,findAllMatches:i=qt.findAllMatches,minMatchCharLength:l=qt.minMatchCharLength,isCaseSensitive:c=qt.isCaseSensitive,ignoreLocation:u=qt.ignoreLocation}={}){super(t),this._bitapSearch=new M5e(t,{location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class T5e extends Mf{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],a=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+a,s.push([r,n-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const EL=[nRt,T5e,sRt,aRt,oRt,iRt,rRt,k5e],uae=EL.length,lRt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,cRt="|";function uRt(e,t={}){return e.split(cRt).map(n=>{let r=n.trim().split(lRt).filter(a=>a&&!!a.trim()),s=[];for(let a=0,i=r.length;a<i;a+=1){const l=r[a];let c=!1,u=-1;for(;!c&&++u<uae;){const d=EL[u];let m=d.isMultiMatch(l);m&&(s.push(new d(m,t)),c=!0)}if(!c)for(u=-1;++u<uae;){const d=EL[u];let m=d.isSingleMatch(l);if(m){s.push(new d(m,t));break}}}return s})}const dRt=new Set([k5e.type,T5e.type]);class fRt{constructor(t,{isCaseSensitive:n=qt.isCaseSensitive,includeMatches:r=qt.includeMatches,minMatchCharLength:s=qt.minMatchCharLength,ignoreLocation:a=qt.ignoreLocation,findAllMatches:i=qt.findAllMatches,location:l=qt.location,threshold:c=qt.threshold,distance:u=qt.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:i,ignoreLocation:a,location:l,threshold:c,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=uRt(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let a=0,i=[],l=0;for(let c=0,u=n.length;c<u;c+=1){const d=n[c];i.length=0,a=0;for(let m=0,p=d.length;m<p;m+=1){const h=d[m],{isMatch:g,indices:y,score:x}=h.search(t);if(g){if(a+=1,l+=x,r){const v=h.constructor.type;dRt.has(v)?i=[...i,...y]:i.push(y)}}else{l=0,a=0,i.length=0;break}}if(a){let m={isMatch:!0,score:l/a};return r&&(m.indices=i),m}}return{isMatch:!1,score:1}}}const ML=[];function mRt(...e){ML.push(...e)}function kL(e,t){for(let n=0,r=ML.length;n<r;n+=1){let s=ML[n];if(s.condition(e,t))return new s(e,t)}return new M5e(e,t)}const JM={AND:"$and",OR:"$or"},TL={PATH:"$path",PATTERN:"$val"},NL=e=>!!(e[JM.AND]||e[JM.OR]),pRt=e=>!!e[TL.PATH],hRt=e=>!Bu(e)&&w5e(e)&&!NL(e),dae=e=>({[JM.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function N5e(e,t,{auto:n=!0}={}){const r=s=>{let a=Object.keys(s);const i=pRt(s);if(!i&&a.length>1&&!NL(s))return r(dae(s));if(hRt(s)){const c=i?s[TL.PATH]:a[0],u=i?s[TL.PATTERN]:s[c];if(!nc(u))throw new Error(BIt(c));const d={keyId:SL(c),pattern:u};return n&&(d.searcher=kL(u,t)),d}let l={children:[],operator:a[0]};return a.forEach(c=>{const u=s[c];Bu(u)&&u.forEach(d=>{l.children.push(r(d))})}),l};return NL(e)||(e=dae(e)),r(e)}function gRt(e,{ignoreFieldNorm:t=qt.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:a,score:i})=>{const l=s?s.weight:null;r*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(t?1:a))}),n.score=r})}function yRt(e,t){const n=e.matches;t.matches=[],Wi(n)&&n.forEach(r=>{if(!Wi(r.indices)||!r.indices.length)return;const{indices:s,value:a}=r;let i={indices:s,value:a};r.key&&(i.key=r.key.src),r.idx>-1&&(i.refIndex=r.idx),t.matches.push(i)})}function xRt(e,t){t.score=e.score}function vRt(e,t,{includeMatches:n=qt.includeMatches,includeScore:r=qt.includeScore}={}){const s=[];return n&&s.push(yRt),r&&s.push(xRt),e.map(a=>{const{idx:i}=a,l={item:t[i],refIndex:i};return s.length&&s.forEach(c=>{c(a,l)}),l})}class Fx{constructor(t,n={},r){this.options={...qt,...n},this.options.useExtendedSearch,this._keyStore=new HIt(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof MH))throw new Error(UIt);this._myIndex=n||E5e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Wi(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const a=this._docs[r];t(a,r)&&(this.removeAt(r),r-=1,s-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:a,sortFn:i,ignoreFieldNorm:l}=this.options;let c=nc(t)?nc(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return gRt(c,{ignoreFieldNorm:l}),a&&c.sort(i),_5e(n)&&n>-1&&(c=c.slice(0,n)),vRt(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=kL(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:a,i,n:l})=>{if(!Wi(a))return;const{isMatch:c,score:u,indices:d}=n.searchIn(a);c&&s.push({item:a,idx:i,matches:[{score:u,value:a,norm:l,indices:d}]})}),s}_searchLogical(t){const n=N5e(t,this.options),r=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:p}=l,h=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:p});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const d=[];for(let m=0,p=l.children.length;m<p;m+=1){const h=l.children[m],g=r(h,c,u);if(g.length)d.push(...g);else if(l.operator===JM.AND)return[]}return d},s=this._myIndex.records,a={},i=[];return s.forEach(({$:l,i:c})=>{if(Wi(l)){let u=r(n,l,c);u.length&&(a[c]||(a[c]={idx:c,item:l,matches:[]},i.push(a[c])),u.forEach(({matches:d})=>{a[c].matches.push(...d)}))}}),i}_searchObjectList(t){const n=kL(t,this.options),{keys:r,records:s}=this._myIndex,a=[];return s.forEach(({$:i,i:l})=>{if(!Wi(i))return;let c=[];r.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:i[d],searcher:n}))}),c.length&&a.push({idx:l,item:i,matches:c})}),a}_findMatches({key:t,value:n,searcher:r}){if(!Wi(n))return[];let s=[];if(Bu(n))n.forEach(({v:a,i,n:l})=>{if(!Wi(a))return;const{isMatch:c,score:u,indices:d}=r.searchIn(a);c&&s.push({score:u,key:t,value:a,idx:i,norm:l,indices:d})});else{const{v:a,n:i}=n,{isMatch:l,score:c,indices:u}=r.searchIn(a);l&&s.push({score:c,key:t,value:a,norm:i,indices:u})}return s}}Fx.version="7.0.0";Fx.createIndex=E5e;Fx.parseIndex=ZIt;Fx.config=qt;Fx.parseQuery=N5e;mRt(fRt);const Ko=(e,t)=>{if(e==null||e===void 0)return null;let n=2;const r=2;return e>1e5&&(n=1),e.toLocaleString(t.locale,{style:t.currency?"currency":"decimal",notation:"compact",currency:t.currency,minimumFractionDigits:n,maximumFractionDigits:r})};function fae(e,t,n){return e==null||t==null?null:`${Ko(e,n)} - ${Ko(t,n)}`}const mae=(e,t,n)=>e==null||e===void 0?null:e.toLocaleString(t.locale,{style:"decimal",notation:"compact",...n});function bRt(e,t=6){if(e===0)return{minimumFractionDigits:0,maximumFractionDigits:1};let n=0,r=2;if(e!==0&&Math.abs(e)<1){let s=0,a=Math.abs(e);for(;a<1&&s<t;)a*=10,s++;n=Math.max(0,s-1),r=s}return{minimumFractionDigits:n,maximumFractionDigits:r}}const pae=(e,t,n)=>{if(e==null||e===void 0)return null;let{minimumFractionDigits:r,maximumFractionDigits:s}=bRt(e,6);return r=n?.minimumFractionDigits??r,s=n?.maximumFractionDigits??s,r>s&&(s=r),e===0?"":e.toLocaleString(t.locale,{style:"percent",...n,minimumFractionDigits:r,maximumFractionDigits:s})},Nr={previousClose:e=>Ko(e.d.previousClose,e),open:e=>Ko(e.d.open,e),dayRange:e=>fae(e.d.dayLow,e.d.dayHigh,e),yearRange:e=>fae(e.d.yearLow,e.d.yearHigh,e),eps:e=>Ko(e.d.eps,e),dayHigh:e=>Ko(e.d.dayHigh,e),dayLow:e=>Ko(e.d.dayLow,e),marketCap:e=>Ko(e.d.marketCap,e),pe:e=>mae(e.d.pe,e,{minimumFractionDigits:2}),dividendYieldTTM:e=>pae(e.d.dividendYieldTTM,e,{minimumFractionDigits:2}),volume:e=>mae(e.d.volume,e),dollarVolume24h:e=>Ko(e.d.dollarVolume24h,e),yearHigh:e=>Ko(e.d.yearHigh,e),yearLow:e=>Ko(e.d.yearLow,e),fundingRate:e=>pae(e.d.fundingRate?+e.d.fundingRate*100:null,e)},_Rt={previousClose:Nr.previousClose,volume:Nr.volume,dayHigh:Nr.dayHigh,open:Nr.open,dayLow:Nr.dayLow,yearHigh:Nr.yearHigh,yearLow:Nr.yearLow},wRt={previousClose:Nr.previousClose,dollarVolume24h:Nr.dollarVolume24h,dayHigh:Nr.dayHigh,open:Nr.open,dayLow:Nr.dayLow,yearHigh:Nr.yearHigh,yearLow:Nr.yearLow,fundingRate:Nr.fundingRate},CRt={previousClose:Nr.previousClose,yearRange:Nr.yearRange,marketCap:Nr.marketCap,open:Nr.open,pe:Nr.pe,dividendYieldTTM:Nr.dividendYieldTTM,dayRange:Nr.dayRange,volume:Nr.volume,eps:Nr.eps},hae={DEFAULT:CRt,CRYPTO:wRt,COMMODITY:_Rt};function SRt({quote:e,type:t,currency:n,locale:r}){const s=hae[t||"DEFAULT"]??hae.DEFAULT;return Object.entries(s).map(([i,l])=>{const c=l({d:e,locale:r,currency:n});return c==null?null:{value:c,label:i,id:i}}).filter(i=>i!==null)}const ERt=({dt:e,dd:t,id:n})=>{const{isMobileStyle:r}=Ce(),{breakpoint:s}=Pp(),a=["md","sm"].includes(s)&&r;return o.jsxs("div",{className:"gap-x-sm py-xs px-sm md:p-sm flex flex-col flex-wrap md:flex-row md:justify-between",children:[o.jsx("dt",{children:o.jsx(F,{variant:a?"tinyRegular":"small",color:"light",children:e})}),o.jsx("dd",{children:o.jsx(F,{variant:a?"tinyRegular":"small",children:t})})]},n)},gae=({children:e})=>o.jsx(H,{variant:"raised",children:e}),j5e=R.memo(({entries:e,border:t})=>{const n=(3-e.length%3)%3;return o.jsxs(H,{className:"grid grid-cols-3 gap-px",variant:t?"subtler":"transparent",children:[e.map(({label:r,value:s})=>o.jsx(gae,{children:o.jsx(ERt,{dt:r,dd:s,id:r})},r)),Array.from({length:n}).map((r,s)=>o.jsx(gae,{},s))]})});j5e.displayName="FinanceGenericTable";const MRt=pt({finance:{defaultMessage:"Finance",id:"Fm3M+yFIbr"},analysis:{defaultMessage:"Analysis",id:"VMIM8/fAKn"},companyOverview:{defaultMessage:"Overview",id:"9uOFF3L8kp"},balanceSheet:{defaultMessage:"Balance Sheet",id:"ak91fL/u+x"},incomeStatement:{defaultMessage:"Income Statement",id:"HFT+V86brH"},keyStats:{defaultMessage:"Key Stats",id:"0FPlBr741P"},cashFlow:{defaultMessage:"Cash Flow",id:"mtw9A2k000"},date:{defaultMessage:"Date",id:"P7PLVjLe4f"},marketSummary:{defaultMessage:"Market Summary",id:"/4s4TMc/a+"},price:{defaultMessage:"Price",id:"b1zuN9KTHI"},symbol:{defaultMessage:"Symbol",id:"3HepmQoEZ+"},value:{defaultMessage:"Value",id:"GufXy52FNI"},percentage:{defaultMessage:"Percentage",id:"HyMpO2UIBG"},currency:{defaultMessage:"Currency",id:"55hdQy4uHO"},open:{defaultMessage:"Open",id:"JfG49wNHKP"},dayHigh:{defaultMessage:"High",id:"AxMhQrcUDC"},dayLow:{defaultMessage:"Low",id:"477I0ggSYe"},marketCap:{defaultMessage:"Market Cap",id:"9Mp3OYduig"},pe:{defaultMessage:"P/E Ratio",id:"fWnwRImZ9W"},volume24h:{defaultMessage:"24H Volume",id:"w7Tm/B63El"},dollarVolume24h:{defaultMessage:"24H Volume",id:"w7Tm/B63El"},volumeChange24h:{defaultMessage:"24H Volume Change",id:"CndnNLlEs+"},fundingRate:{defaultMessage:"Funding Rate",id:"CB1174SKrI"},volume:{defaultMessage:"Volume",id:"y867VsgbzT"},yearHigh:{defaultMessage:"Year High",id:"yh2gWeU/Gz"},yearLow:{defaultMessage:"Year Low",id:"fZpEs5CIaC"},avgVolume:{defaultMessage:"Avg. Volume",id:"MDNqWO8yDU"},dayRange:{defaultMessage:"Day Range",id:"6VJrMyvXcR"},yearRange:{defaultMessage:"52W Range",id:"FkJo44zhH6"},eps:{defaultMessage:"EPS",id:"JncK2a8+G4"},dividendYieldTTM:{defaultMessage:"Dividend Yield",id:"P3CiJnt5+6"},dividendYielTTM:{defaultMessage:"Dividend Yield",id:"P3CiJnt5+6"},previousClose:{defaultMessage:"Prev Close",id:"0jUP9zUh5z"},priceComparison:{defaultMessage:"Price Comparison",id:"MFuchsfwj7"},stockPerformance:{defaultMessage:"Stock Performance",id:"qEQxp1ikMt"},companyFinancials:{defaultMessage:"{company} Financials",id:"gWNvqjwoWh"},"13FFilings":{defaultMessage:"13F Filings",id:"XzGhyAgjmS"},pricePerformance:{defaultMessage:"Price & Performance",id:"nCv3Ti2cp5"},peers:{defaultMessage:"Peers",id:"JjgJTAa2wL"},transcriptLogin:{defaultMessage:"Login to view transcripts from {quartr}",id:"xY8csKCosL"},newsAndMarketInsights:{defaultMessage:"Latest News",id:"BlFeZAX10O"},recentTranscripts:{defaultMessage:"Recent Transcripts",id:"tiSu9ozyS4"},earnings:{defaultMessage:"Earnings",id:"14sEVuq+Kb"},related:{defaultMessage:"Related",id:"KQsZBWlEw/"},topMovers:{defaultMessage:"Top Movers",id:"e+JmwAUicC"}}),kRt=(e,t)=>{if(!t)return"";const n=MRt[t];return n?e(n):""},A5e=R.memo(({quote:e,type:t})=>{const{$t:n,locale:r}=Z(),s=f.useMemo(()=>e?SRt({quote:e,type:t,currency:e?.currency||void 0,locale:r}).map(i=>({...i,label:kRt(n,i.label),value:i.value})):[],[e,t,n,r]);return Sp("financial-profile",{skip:!s.length}),o.jsx(j5e,{entries:s})});A5e.displayName="FinanceFinancialProfile";const I5e=R.memo(({quote:e,type:t})=>e?o.jsx(un,{className:"px-sm overflow-hidden",testId:"financial-profile-box",children:o.jsx(A5e,{quote:e,type:t})}):null);I5e.displayName="FinanceFinancialProfileCard";var Z6,yae;function TRt(){if(yae)return Z6;yae=1,Z6=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var i=n(r,s,a);return i&&{start:i[0],end:i[1],pre:a.slice(0,i[0]),body:a.slice(i[0]+r.length,i[1]),post:a.slice(i[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var i,l,c,u,d,m=a.indexOf(r),p=a.indexOf(s,m+1),h=m;if(m>=0&&p>0){for(i=[],c=a.length;h>=0&&!d;)h==m?(i.push(h),m=a.indexOf(r,h+1)):i.length==1?d=[i.pop(),p]:(l=i.pop(),l<c&&(c=l,u=p),p=a.indexOf(s,h+1)),h=m<p&&m>=0?m:p;i.length&&(d=[c,u])}return d}return Z6}var J6,xae;function NRt(){if(xae)return J6;xae=1,J6=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var i=n(r,s,a);return i&&{start:i[0],end:i[1],pre:a.slice(0,i[0]),body:a.slice(i[0]+r.length,i[1]),post:a.slice(i[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var i,l,c,u,d,m=a.indexOf(r),p=a.indexOf(s,m+1),h=m;if(m>=0&&p>0){if(r===s)return[m,p];for(i=[],c=a.length;h>=0&&!d;)h==m?(i.push(h),m=a.indexOf(r,h+1)):i.length==1?d=[i.pop(),p]:(l=i.pop(),l<c&&(c=l,u=p),p=a.indexOf(s,h+1)),h=m<p&&m>=0?m:p;i.length&&(d=[c,u])}return d}return J6}var eI,vae;function jRt(){if(vae)return eI;vae=1;var e=NRt();eI=t;function t(s,a,i){var l=s;return n(s,a).reduce(function(c,u){return c.replace(u.functionIdentifier+"("+u.matches.body+")",r(u.matches.body,u.functionIdentifier,i,l,a))},s)}function n(s,a){var i=[],l=typeof a=="string"?new RegExp("\\b("+a+")\\("):a;do{var c=l.exec(s);if(!c)return i;if(c[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+a);var u=c[1],d=c.index,m=e("(",")",s.substring(d));if(!m||m.start!==c[0].length-1)throw new SyntaxError(u+"(): missing closing ')' in the value '"+s+"'");i.push({matches:m,functionIdentifier:u}),s=m.post}while(l.test(s));return i}function r(s,a,i,l,c){return i(t(s,c,i),a,l)}return eI}var tI,bae;function ARt(){if(bae)return tI;bae=1;var e=function(t){this.value=t};return e.math={isDegree:!0,acos:function(t){return e.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,n){return t+n},asin:function(t){return e.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return e.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,n){var r=1,s=t-n,a=n;a<s&&(a=s,s=n);for(var i=a+1;i<=t;i++)r*=i;return r/e.math.fact(s)},changeSign:function(t){return-t},cos:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,n){return t/n},fact:function(t){if(t%1!==0)return"NaN";for(var n=1,r=2;r<=t;r++)n*=r;return n},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,n){return t%n},mul:function(t,n){return t*n},P:function(t,n){for(var r=1,s=Math.floor(t)-Math.floor(n)+1;s<=Math.floor(t);s++)r*=s;return r},Pi:function(t,n,r){for(var s=1,a=t;a<=n;a++)s*=Number(r.postfixEval({n:a}));return s},pow10x:function(t){for(var n=1;t--;)n*=10;return n},sigma:function(t,n,r){for(var s=0,a=t;a<=n;a++)s+=Number(r.postfixEval({n:a}));return s},sin:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,n){return t-n},tan:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.tan(t)},tanh:function(t){return e.sinha(t)/e.cosha(t)},toRadian:function(t){return t*Math.PI/180},and:function(t,n){return t&n}},e.Exception=function(t){this.message=t},tI=e,tI}var nI,_ae;function IRt(){if(_ae)return nI;_ae=1;var e=ARt();function t(b,_){for(var w=0;w<b.length;w++)b[w]+=_;return b}for(var n=[{token:"sin",show:"sin",type:0,value:e.math.sin},{token:"cos",show:"cos",type:0,value:e.math.cos},{token:"tan",show:"tan",type:0,value:e.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:e.math.P},{token:"C",show:"C",type:10,value:e.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:e.math.asin},{token:"acos",show:"acos",type:0,value:e.math.acos},{token:"atan",show:"atan",type:0,value:e.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:e.math.cosh},{token:"acosh",show:"acosh",type:0,value:e.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:e.math.div},{token:"!",show:"!",type:7,value:e.math.fact},{token:"tanh",show:"tanh",type:0,value:e.math.tanh},{token:"atanh",show:"atanh",type:0,value:e.math.atanh},{token:"Mod",show:" Mod ",type:2,value:e.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:e.math.mul},{token:"sinh",show:"sinh",type:0,value:e.math.sinh},{token:"asinh",show:"asinh",type:0,value:e.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:e.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:e.math.add},{token:"-",show:"-",type:9,value:e.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:e.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:e.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:e.math.and}],r={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11},s=0;s<n.length;s++)n[s].precedence=r[n[s].type];var a={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},i={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},l={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},c={},u={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},d={1:!0},m=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function p(b,_,w,C){for(var S=0;S<C;S++)if(b[w+S]!==_[S])return!1;return!0}e.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14},e.addToken=function(b){for(var _=0;_<b.length;_++){var w=b[_].token.length,C=-1;b[_].type===e.tokenTypes.FUNCTION_WITH_N_ARGS&&b[_].numberOfArguments===void 0&&(b[_].numberOfArguments=2),m[w]=m[w]||[];for(var S=0;S<m[w].length;S++)if(b[_].token===m[w][S]){C=h(m[w][S],n);break}C===-1?(n.push(b[_]),b[_].precedence=r[b[_].type],m.length<=b[_].token.length&&(m[b[_].token.length]=[]),m[b[_].token.length].push(b[_].token)):(n[C]=b[_],b[_].precedence=r[b[_].type])}};function h(b,_){for(var w=0;w<_.length;w++)if(_[w].token===b)return w;return-1}function g(b){for(var _=[],w=b.length,C,S,E,M=0;M<w;M++)if(!(M<w-1&&b[M]===" "&&b[M+1]===" ")){for(C="",S=b.length-M>m.length-2?m.length-1:b.length-M;S>0;S--)if(m[S]!==void 0)for(E=0;E<m[S].length;E++)p(b,m[S][E],M,S)&&(C=m[S][E],E=m[S].length,S=0);if(M+=C.length-1,C==="")throw new e.Exception("Can't understand after "+b.slice(M));_.push(n[h(C,n)])}return _}var y={value:e.math.changeSign,type:0,pre:21,show:"-"},x={value:")",show:")",type:5,pre:0},v={value:"(",type:4,pre:0,show:"("};return e.lex=function(b,_){var w=[v],C=[],S=b,E=a,M=0,k=c,N="",P;typeof _<"u"&&e.addToken(_);var L={},O=g(S);for(P=0;P<O.length;P++){var A=O[P];if(A.type===14){if(P>0&&P<O.length-1&&O[P+1].type===1&&(O[P-1].type===1||O[P-1].type===6))throw new e.Exception("Unexpected Space");continue}var j=A.token,T=A.type,I=A.value,U=A.precedence,B=A.show,D=w[w.length-1],W;for(W=C.length;W--&&C[W]===0;)if([0,2,3,4,5,9,11,12,13].indexOf(T)!==-1){if(E[T]!==!0)throw new e.Exception(j+" is not allowed after "+N);w.push(x),E=i,k=u,C.pop()}if(E[T]!==!0)throw new e.Exception(j+" is not allowed after "+N);if(k[T]===!0&&(T=2,I=e.math.mul,B="&times;",U=3,P=P-1),L={value:I,type:T,pre:U,show:B,numberOfArguments:A.numberOfArguments},T===0)E=a,k=c,t(C,2),w.push(L),O[P+1].type!==4&&(w.push(v),C.push(2));else if(T===1)D.type===1?(D.value+=I,t(C,1)):w.push(L),E=i,k=l;else if(T===2)E=a,k=c,t(C,2),w.push(L);else if(T===3)w.push(L),E=i,k=u;else if(T===4)t(C,1),M++,E=a,k=c,w.push(L);else if(T===5){if(!M)throw new e.Exception("Closing parenthesis are more than opening one, wait What!!!");M--,E=i,k=u,w.push(L),t(C,1)}else if(T===6){if(D.hasDec)throw new e.Exception("Two decimals are not allowed in one number");D.type!==1&&(D={value:0,type:1,pre:0},w.push(D)),E=d,t(C,1),k=c,D.value+=I,D.hasDec=!0}else T===7&&(E=i,k=u,t(C,1),w.push(L));T===8?(E=a,k=c,t(C,A.numberOfArguments+2),w.push(L),O[P+1].type!==4&&(w.push(v),C.push(A.numberOfArguments+2))):T===9?(D.type===9?D.value===e.math.add?(D.value=I,D.show=B,t(C,1)):D.value===e.math.sub&&B==="-"&&(D.value=e.math.add,D.show="+",t(C,1)):D.type!==5&&D.type!==7&&D.type!==1&&D.type!==3&&D.type!==13?j==="-"&&(E=a,k=c,t(C,2).push(2),w.push(y),w.push(v)):(w.push(L),t(C,2)),E=a,k=c):T===10?(E=a,k=c,t(C,2),w.push(L)):T===11?(E=a,k=c,w.push(L)):T===12?(E=a,k=c,t(C,6),w.push(L),O[P+1].type!==4&&(w.push(v),C.push(6))):T===13&&(E=i,k=u,w.push(L)),t(C,-1),N=j}for(W=C.length;W--;)w.push(x);if(E[5]!==!0)throw new e.Exception("complete the expression");for(;M--;)w.push(x);return w.push(x),new e(w)},nI=e,nI}var rI,wae;function RRt(){if(wae)return rI;wae=1;var e=IRt();return e.prototype.toPostfix=function(){for(var t=[],n,r,s,a,i,l=[{value:"(",type:4,pre:0}],c=this.value,u=1;u<c.length;u++)if(c[u].type===1||c[u].type===3||c[u].type===13)c[u].type===1&&(c[u].value=Number(c[u].value)),t.push(c[u]);else if(c[u].type===4)l.push(c[u]);else if(c[u].type===5)for(;(r=l.pop()).type!==4;)t.push(r);else if(c[u].type===11){for(;(r=l.pop()).type!==4;)t.push(r);l.push(r)}else{n=c[u],a=n.pre,i=l[l.length-1],s=i.pre;var d=i.value=="Math.pow"&&n.value=="Math.pow";if(a>s)l.push(n);else{for(;s>=a&&!d||d&&a<s;)r=l.pop(),i=l[l.length-1],t.push(r),s=i.pre,d=n.value=="Math.pow"&&i.value=="Math.pow";l.push(n)}}return new e(t)},rI=e,rI}var sI,Cae;function PRt(){if(Cae)return sI;Cae=1;var e=RRt();return e.prototype.postfixEval=function(t){t=t||{},t.PI=Math.PI,t.E=Math.E;for(var n=[],r,s,a,i=this.value,l=typeof t.n<"u",c=0;c<i.length;c++)if(i[c].type===1)n.push({value:i[c].value,type:1});else if(i[c].type===3)n.push({value:t[i[c].value],type:1});else if(i[c].type===0)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(i[c]):n[n.length-1].value=i[c].value(n[n.length-1].value);else if(i[c].type===7)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(i[c]):n[n.length-1].value=i[c].value(n[n.length-1].value);else if(i[c].type===8){for(var u=[],d=0;d<i[c].numberOfArguments;d++)u.push(n.pop().value);n.push({type:1,value:i[c].value.apply(i[c],u.reverse())})}else i[c].type===10?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s.value=s.concat(r),s.value.push(i[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(i[c]),n.push(r)):n.push({type:1,value:i[c].value(s.value,r.value)})):i[c].type===2||i[c].type===9?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s=s.concat(r),s.push(i[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(i[c]),n.push(r)):n.push({type:1,value:i[c].value(s.value,r.value)})):i[c].type===12?(r=n.pop(),typeof r.type<"u"&&(r=[r]),s=n.pop(),a=n.pop(),n.push({type:1,value:i[c].value(a.value,s.value,new e(r))})):i[c].type===13&&(l?n.push({value:t[i[c].value],type:3}):n.push([i[c]]));if(n.length>1)throw new e.Exception("Uncaught Syntax error");return n[0].value>1e15?"Infinity":parseFloat(n[0].value.toFixed(15))},e.eval=function(t,n,r){return typeof n>"u"?this.lex(t).toPostfix().postfixEval():typeof r>"u"?typeof n.length<"u"?this.lex(t,n).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(n):this.lex(t,n).toPostfix().postfixEval(r)},sI=e,sI}var aI,Sae;function ORt(){if(Sae)return aI;Sae=1;var e=PRt();return e.prototype.formulaEval=function(){for(var t,n,r,s=[],a=this.value,i=0;i<a.length;i++)a[i].type===1||a[i].type===3?s.push({value:a[i].type===3?a[i].show:a[i].value,type:1}):a[i].type===13?s.push({value:a[i].show,type:1}):a[i].type===0?s[s.length-1]={value:a[i].show+(a[i].show!="-"?"(":"")+s[s.length-1].value+(a[i].show!="-"?")":""),type:0}:a[i].type===7?s[s.length-1]={value:(s[s.length-1].type!=1?"(":"")+s[s.length-1].value+(s[s.length-1].type!=1?")":"")+a[i].show,type:7}:a[i].type===10?(t=s.pop(),n=s.pop(),a[i].show==="P"||a[i].show==="C"?s.push({value:"<sup>"+n.value+"</sup>"+a[i].show+"<sub>"+t.value+"</sub>",type:10}):s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+"<sup>"+t.value+"</sup>",type:1})):a[i].type===2||a[i].type===9?(t=s.pop(),n=s.pop(),s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+a[i].show+(t.type!=1?"(":"")+t.value+(t.type!=1?")":""),type:a[i].type})):a[i].type===12&&(t=s.pop(),n=s.pop(),r=s.pop(),s.push({value:a[i].show+"("+r.value+","+n.value+","+t.value+")",type:12}));return s[0].value},aI=e,aI}var iI,Eae;function LRt(){if(Eae)return iI;Eae=1;var e=TRt(),t=jRt(),n=ORt(),r=100,s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,a;iI=i;function i(c,u){a=0,u=Math.pow(10,u===void 0?5:u),c=c.replace(/\n+/g," ");function d(p,h,g){if(a++>r)throw a=0,new Error("Call stack overflow for "+g);if(p==="")throw new Error(h+"(): '"+g+"' must contain a non-whitespace string");p=m(p,g);var y=l(p);if(y.length>1||p.indexOf("var(")>-1)return h+"("+p+")";var x=y[0]||"";x==="%"&&(p=p.replace(/\b[0-9\.]+%/g,function(_){return parseFloat(_.slice(0,-1))*.01}));var v=p.replace(new RegExp(x,"gi"),""),b;try{b=n.eval(v)}catch{return h+"("+p+")"}return x==="%"&&(b*=100),(h.length||x==="%")&&(b=Math.round(b*u)/u),b+=x,b}function m(p,h){p=p.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var g="",y=p,x;x=s.exec(y);){x[0].index>0&&(g+=y.substring(0,x[0].index));var v=e("(",")",y.substring([0].index));if(v.body==="")throw new Error("'"+p+"' must contain a non-whitespace string");var b=d(v.body,"",h);g+=v.pre+b,y=v.post}return g+y}return t(c,/((?:\-[a-z]+\-)?calc)\(/,d)}function l(c){for(var u=[],d=[],m=/[\.0-9]([%a-z]+)/gi,p=m.exec(c);p;)!p||!p[1]||(d.indexOf(p[1].toLowerCase())===-1&&(u.push(p[1]),d.push(p[1].toLowerCase())),p=m.exec(c));return u}return iI}var DRt=LRt();const oI=Ka(DRt);var lI,Mae;function FRt(){if(Mae)return lI;Mae=1;var e=typeof qi=="object"&&qi&&qi.Object===Object&&qi;return lI=e,lI}var cI,kae;function kH(){if(kae)return cI;kae=1;var e=FRt(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return cI=n,cI}var uI,Tae;function R5e(){if(Tae)return uI;Tae=1;var e=kH(),t=e.Symbol;return uI=t,uI}var dI,Nae;function URt(){if(Nae)return dI;Nae=1;var e=R5e(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function a(i){var l=n.call(i,s),c=i[s];try{i[s]=void 0;var u=!0}catch{}var d=r.call(i);return u&&(l?i[s]=c:delete i[s]),d}return dI=a,dI}var fI,jae;function BRt(){if(jae)return fI;jae=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return fI=n,fI}var mI,Aae;function VRt(){if(Aae)return mI;Aae=1;var e=R5e(),t=URt(),n=BRt(),r="[object Null]",s="[object Undefined]",a=e?e.toStringTag:void 0;function i(l){return l==null?l===void 0?s:r:a&&a in Object(l)?t(l):n(l)}return mI=i,mI}var pI,Iae;function P5e(){if(Iae)return pI;Iae=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return pI=e,pI}var hI,Rae;function $Rt(){if(Rae)return hI;Rae=1;var e=VRt(),t=P5e(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function i(l){if(!t(l))return!1;var c=e(l);return c==r||c==s||c==n||c==a}return hI=i,hI}var gI,Pae;function WRt(){if(Pae)return gI;Pae=1;var e=kH(),t=e["__core-js_shared__"];return gI=t,gI}var yI,Oae;function HRt(){if(Oae)return yI;Oae=1;var e=WRt(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return yI=n,yI}var xI,Lae;function zRt(){if(Lae)return xI;Lae=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return xI=n,xI}var vI,Dae;function GRt(){if(Dae)return vI;Dae=1;var e=$Rt(),t=HRt(),n=P5e(),r=zRt(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,l=Object.prototype,c=i.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!n(p)||t(p))return!1;var h=e(p)?d:a;return h.test(r(p))}return vI=m,vI}var bI,Fae;function qRt(){if(Fae)return bI;Fae=1;function e(t,n){return t?.[n]}return bI=e,bI}var _I,Uae;function O5e(){if(Uae)return _I;Uae=1;var e=GRt(),t=qRt();function n(r,s){var a=t(r,s);return e(a)?a:void 0}return _I=n,_I}var wI,Bae;function qT(){if(Bae)return wI;Bae=1;var e=O5e(),t=e(Object,"create");return wI=t,wI}var CI,Vae;function KRt(){if(Vae)return CI;Vae=1;var e=qT();function t(){this.__data__=e?e(null):{},this.size=0}return CI=t,CI}var SI,$ae;function YRt(){if($ae)return SI;$ae=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return SI=e,SI}var EI,Wae;function QRt(){if(Wae)return EI;Wae=1;var e=qT(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(a){var i=this.__data__;if(e){var l=i[a];return l===t?void 0:l}return r.call(i,a)?i[a]:void 0}return EI=s,EI}var MI,Hae;function XRt(){if(Hae)return MI;Hae=1;var e=qT(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var a=this.__data__;return e?a[s]!==void 0:n.call(a,s)}return MI=r,MI}var kI,zae;function ZRt(){if(zae)return kI;zae=1;var e=qT(),t="__lodash_hash_undefined__";function n(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&s===void 0?t:s,this}return kI=n,kI}var TI,Gae;function JRt(){if(Gae)return TI;Gae=1;var e=KRt(),t=YRt(),n=QRt(),r=XRt(),s=ZRt();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,TI=a,TI}var NI,qae;function ePt(){if(qae)return NI;qae=1;function e(){this.__data__=[],this.size=0}return NI=e,NI}var jI,Kae;function tPt(){if(Kae)return jI;Kae=1;function e(t,n){return t===n||t!==t&&n!==n}return jI=e,jI}var AI,Yae;function KT(){if(Yae)return AI;Yae=1;var e=tPt();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return AI=t,AI}var II,Qae;function nPt(){if(Qae)return II;Qae=1;var e=KT(),t=Array.prototype,n=t.splice;function r(s){var a=this.__data__,i=e(a,s);if(i<0)return!1;var l=a.length-1;return i==l?a.pop():n.call(a,i,1),--this.size,!0}return II=r,II}var RI,Xae;function rPt(){if(Xae)return RI;Xae=1;var e=KT();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return RI=t,RI}var PI,Zae;function sPt(){if(Zae)return PI;Zae=1;var e=KT();function t(n){return e(this.__data__,n)>-1}return PI=t,PI}var OI,Jae;function aPt(){if(Jae)return OI;Jae=1;var e=KT();function t(n,r){var s=this.__data__,a=e(s,n);return a<0?(++this.size,s.push([n,r])):s[a][1]=r,this}return OI=t,OI}var LI,eie;function iPt(){if(eie)return LI;eie=1;var e=ePt(),t=nPt(),n=rPt(),r=sPt(),s=aPt();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,LI=a,LI}var DI,tie;function oPt(){if(tie)return DI;tie=1;var e=O5e(),t=kH(),n=e(t,"Map");return DI=n,DI}var FI,nie;function lPt(){if(nie)return FI;nie=1;var e=JRt(),t=iPt(),n=oPt();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return FI=r,FI}var UI,rie;function cPt(){if(rie)return UI;rie=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return UI=e,UI}var BI,sie;function YT(){if(sie)return BI;sie=1;var e=cPt();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return BI=t,BI}var VI,aie;function uPt(){if(aie)return VI;aie=1;var e=YT();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return VI=t,VI}var $I,iie;function dPt(){if(iie)return $I;iie=1;var e=YT();function t(n){return e(this,n).get(n)}return $I=t,$I}var WI,oie;function fPt(){if(oie)return WI;oie=1;var e=YT();function t(n){return e(this,n).has(n)}return WI=t,WI}var HI,lie;function mPt(){if(lie)return HI;lie=1;var e=YT();function t(n,r){var s=e(this,n),a=s.size;return s.set(n,r),this.size+=s.size==a?0:1,this}return HI=t,HI}var zI,cie;function pPt(){if(cie)return zI;cie=1;var e=lPt(),t=uPt(),n=dPt(),r=fPt(),s=mPt();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,zI=a,zI}var GI,uie;function hPt(){if(uie)return GI;uie=1;var e=pPt(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var a=function(){var i=arguments,l=s?s.apply(this,i):i[0],c=a.cache;if(c.has(l))return c.get(l);var u=r.apply(this,i);return a.cache=c.set(l,u)||c,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,GI=n,GI}var gPt=hPt();const yPt=Ka(gPt);var die="__react_svg_text_measurement_id";function xPt(e,t){try{var n=document.getElementById(die);if(!n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("aria-hidden","true"),r.style.width="0",r.style.height="0",r.style.position="absolute",r.style.top="-100%",r.style.left="-100%",n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttribute("id",die),r.appendChild(n),document.body.appendChild(r)}return Object.assign(n.style,t),n.textContent=e,n.getComputedTextLength()}catch{return null}}const jL=yPt(xPt,function(e,t){return e+"_"+JSON.stringify(t)});var vPt=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function bPt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function qI(e){return typeof e=="number"}function fie(e){return typeof e=="number"&&Number.isFinite(e)||typeof e=="string"}function L5e(e){var t=e.verticalAnchor,n=t===void 0?"end":t,r=e.scaleToFit,s=r===void 0?!1:r,a=e.angle,i=e.width,l=e.lineHeight,c=l===void 0?"1em":l,u=e.capHeight,d=u===void 0?"0.71em":u,m=e.children,p=e.style,h=bPt(e,vPt),g=h.x,y=g===void 0?0:g,x=h.y,v=x===void 0?0:x,b=!fie(y)||!fie(v),_=f.useMemo(function(){var k=m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/);return{wordsWithWidth:k.map(function(N){return{word:N,wordWidth:jL(N,p)||0}}),spaceWidth:jL("",p)||0}},[m,p]),w=_.wordsWithWidth,C=_.spaceWidth,S=f.useMemo(function(){return b?[]:i||s?w.reduce(function(k,N){var P=N.word,L=N.wordWidth,O=k[k.length-1];if(O&&(i==null||s||(O.width||0)+L+C<i))O.words.push(P),O.width=O.width||0,O.width+=L+C;else{var A={words:[P],width:L};k.push(A)}return k},[]):[{words:m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/)}]},[b,i,s,m,w,C]),E=f.useMemo(function(){var k=b?"":oI(n==="start"?"calc("+d+")":n==="middle"?"calc("+(S.length-1)/2+" * -"+c+" + ("+d+" / 2))":"calc("+(S.length-1)+" * -"+c+")");return k},[b,n,d,S.length,c]),M=f.useMemo(function(){var k=[];if(b)return"";if(qI(y)&&qI(v)&&qI(i)&&s&&S.length>0){var N=S[0].width||1,P=s==="shrink-only"?Math.min(i/N,1):i/N,L=P,O=y-P*y,A=v-L*v;k.push("matrix("+P+", 0, 0, "+L+", "+O+", "+A+")")}return a&&k.push("rotate("+a+", "+y+", "+v+")"),k.length>0?k.join(" "):""},[b,y,v,i,s,S,a]);return{wordsByLines:S,startDy:E,transform:M}}var _Pt=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function AL(){return AL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AL.apply(null,arguments)}function wPt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var CPt={overflow:"visible"};function QT(e){var t=e.dx,n=t===void 0?0:t,r=e.dy,s=r===void 0?0:r,a=e.textAnchor,i=a===void 0?"start":a,l=e.innerRef,c=e.innerTextRef;e.verticalAnchor,e.angle;var u=e.lineHeight,d=u===void 0?"1em":u;e.scaleToFit,e.capHeight,e.width;var m=wPt(e,_Pt),p=m.x,h=p===void 0?0:p,g=m.fontSize,y=L5e(e),x=y.wordsByLines,v=y.startDy,b=y.transform;return R.createElement("svg",{ref:l,x:n,y:s,fontSize:g,style:CPt},x.length>0?R.createElement("text",AL({ref:c,transform:b},m,{textAnchor:i}),x.map(function(_,w){return R.createElement("tspan",{key:w,x:h,dy:w===0?v:d},_.words.join(" "))})):null)}const SPt=Object.freeze(Object.defineProperty({__proto__:null,Text:QT,getStringWidth:jL,useText:L5e},Symbol.toStringTag,{value:"Module"}));var Fa={top:"top",left:"left",bottom:"bottom"};function EPt(e){var t=e.labelOffset,n=e.labelProps,r=e.orientation,s=e.range,a=e.tickLabelFontSize,i=e.tickLength,l=r===Fa.left||r===Fa.top?-1:1,c,u,d;if(r===Fa.top||r===Fa.bottom){var m=r===Fa.bottom&&typeof n.fontSize=="number"?n.fontSize:0;c=(Number(s[0])+Number(s[s.length-1]))/2,u=l*(i+t+a+m)}else c=l*((Number(s[0])+Number(s[s.length-1]))/2),u=-(i+t),d="rotate("+l*90+")";return{x:c,y:u,transform:d}}function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s1.apply(null,arguments)}function MPt(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.tickClassName,a=e.tickComponent,i=e.tickLabelProps,l=e.tickStroke,c=l===void 0?"#222":l,u=e.tickTransform,d=e.ticks,m=e.strokeWidth,p=e.tickLineProps;return d.map(function(h){var g,y=h.value,x=h.index,v=h.from,b=h.to,_=h.formattedValue,w=(g=i[x])!=null?g:{},C=Math.max(10,typeof w.fontSize=="number"&&w.fontSize||0),S=b.y+(n&&r!==Fa.top?C:0);return R.createElement(ba,{key:"visx-tick-"+y+"-"+x,className:V("visx-axis-tick",s),transform:u},!t&&R.createElement(tT,s1({from:v,to:b,stroke:c,strokeWidth:m,strokeLinecap:"square"},p)),a?a(s1({},w,{x:b.x,y:S,formattedValue:_})):R.createElement(QT,s1({x:b.x,y:S},w),_))})}function a1(){return a1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a1.apply(null,arguments)}var mie={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function kPt(e){var t=e.axisFromPoint,n=e.axisLineClassName,r=e.axisToPoint,s=e.hideAxisLine,a=e.hideTicks,i=e.horizontal,l=e.label,c=l===void 0?"":l,u=e.labelClassName,d=e.labelOffset,m=d===void 0?14:d,p=e.labelProps,h=e.orientation,g=h===void 0?Fa.bottom:h,y=e.scale,x=e.stroke,v=x===void 0?"#222":x,b=e.strokeDasharray,_=e.strokeWidth,w=_===void 0?1:_,C=e.tickClassName,S=e.tickComponent,E=e.tickLineProps,M=e.tickLabelProps,k=e.tickLength,N=k===void 0?8:k,P=e.tickStroke,L=P===void 0?"#222":P,O=e.tickTransform,A=e.ticks,j=e.ticksComponent,T=j===void 0?MPt:j,I=a1({},mie,p),U=a1({},mie,typeof M=="object"?M:null),B=A.map(function(W){var z=W.value,$=W.index;return typeof M=="function"?M(z,$,A):U}),D=Math.max.apply(Math,[10].concat(B.map(function(W){return typeof W.fontSize=="number"?W.fontSize:0})));return R.createElement(R.Fragment,null,T({hideTicks:a,horizontal:i,orientation:g,scale:y,tickClassName:C,tickComponent:S,tickLabelProps:B,tickStroke:L,tickTransform:O,ticks:A,strokeWidth:w,tickLineProps:E}),!s&&R.createElement(tT,{className:V("visx-axis-line",n),from:t,to:r,stroke:v,strokeWidth:w,strokeDasharray:b}),c&&R.createElement(QT,a1({className:V("visx-axis-label",u)},EPt({labelOffset:m,labelProps:I,orientation:g,range:y.range(),tickLabelFontSize:D,tickLength:N}),I),c))}function TPt(e,t){t===void 0&&(t="center");var n=e;if(t!=="start"&&"bandwidth"in n){var r=n.bandwidth();return t==="center"&&(r/=2),n.round()&&(r=Math.round(r)),function(s){var a=n(s);return typeof a=="number"?a+r:a}}return e}function NPt(e){var t=e;return"tickFormat"in t?t.tickFormat():MCe}var Tc=function(){function e(n){var r=n.x,s=r===void 0?0:r,a=n.y,i=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=i}var t=e.prototype;return t.value=function(){return{x:this.x,y:this.y}},t.toArray=function(){return[this.x,this.y]},e}();function jPt(e,t){return new Tc({x:e.x+t.x,y:e.y+t.y})}function APt(e,t){return new Tc({x:e.x-t.x,y:e.y-t.y})}const IPt=Object.freeze(Object.defineProperty({__proto__:null,Point:Tc,subtractPoints:APt,sumPoints:jPt},Symbol.toStringTag,{value:"Module"}));function TS(e,t){var n=e.x,r=e.y;return new Tc(t?{x:n,y:r}:{x:r,y:n})}function IL(){return IL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IL.apply(null,arguments)}var KI=0;function RPt(e){return e===void 0&&(e=KI),typeof e=="number"?{start:e,end:e}:IL({start:KI,end:KI},e)}var PPt=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function RL(){return RL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RL.apply(null,arguments)}function OPt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function nf(e){var t=e.children,n=t===void 0?kPt:t,r=e.axisClassName,s=e.hideAxisLine,a=s===void 0?!1:s,i=e.hideTicks,l=i===void 0?!1:i,c=e.hideZero,u=c===void 0?!1:c,d=e.innerRef,m=e.left,p=m===void 0?0:m,h=e.numTicks,g=h===void 0?10:h,y=e.orientation,x=y===void 0?Fa.bottom:y,v=e.rangePadding,b=v===void 0?0:v,_=e.scale,w=e.tickFormat,C=e.tickLength,S=C===void 0?8:C,E=e.tickValues,M=e.top,k=M===void 0?0:M,N=OPt(e,PPt),P=w??NPt(_),L=x===Fa.left,O=x===Fa.top,A=O||x===Fa.bottom,j=TPt(_),T=L||O?-1:1,I=_.range(),U=RPt(b),B=TS({x:Number(I[0])+.5-U.start,y:0},A),D=TS({x:Number(I[I.length-1])+.5+U.end,y:0},A),W=(E??X5(_,g)).filter(function($){return!u||$!==0&&$!=="0"}).map(function($,X){return{value:$,index:X}}),z=W.map(function($){var X=$.value,q=$.index,Y=iw(j(X));return{value:X,index:q,from:TS({x:Y,y:0},A),to:TS({x:Y,y:S*T},A),formattedValue:P(X,q,W)}});return R.createElement(ba,{className:V("visx-axis",r),innerRef:d,top:k,left:p},n(RL({},N,{axisFromPoint:B,axisToPoint:D,hideAxisLine:a,hideTicks:l,hideZero:u,horizontal:A,numTicks:g,orientation:x,rangePadding:b,scale:_,tickFormat:P,tickLength:S,tickPosition:j,tickSign:T,ticks:z})))}function LPt(e){return!!e&&e instanceof Element}function DPt(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function FPt(e){return!!e&&"createSVGPoint"in e}function UPt(e){return!!e&&"getScreenCTM"in e}function BPt(e){return!!e&&"changedTouches"in e}function VPt(e){return!!e&&"clientX"in e}function $Pt(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i1.apply(this,arguments)}var YI={x:0,y:0};function WPt(e){if(!e)return i1({},YI);if(BPt(e))return e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:i1({},YI);if(VPt(e))return{x:e.clientX,y:e.clientY};var t=e?.target,n=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return n?{x:n.x+n.width/2,y:n.y+n.height/2}:i1({},YI)}function pie(e,t){if(!e||!t)return null;var n=WPt(t),r=DPt(e)?e.ownerSVGElement:e,s=UPt(r)?r.getScreenCTM():null;if(FPt(r)&&s){var a=r.createSVGPoint();return a.x=n.x,a.y=n.y,a=a.matrixTransform(s.inverse()),new Tc({x:a.x,y:a.y})}var i=e.getBoundingClientRect();return new Tc({x:n.x-i.left-e.clientLeft,y:n.y-i.top-e.clientTop})}function TH(e,t){if(LPt(e)&&t)return pie(e,t);if($Pt(e)){var n=e,r=n.target;if(r)return pie(r,n)}return null}var NS={},hie;function D5e(){if(hie)return NS;hie=1,NS.__esModule=!0,NS.default=i;var e=r(Fy()),t=r(e_()),n=["from","to","fill","className","innerRef"];function r(l){return l&&l.__esModule?l:{default:l}}function s(){return s=Object.assign?Object.assign.bind():function(l){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d])}return l},s.apply(this,arguments)}function a(l,c){if(l==null)return{};var u={},d=Object.keys(l),m,p;for(p=0;p<d.length;p++)m=d[p],!(c.indexOf(m)>=0)&&(u[m]=l[m]);return u}function i(l){var c=l.from,u=c===void 0?{x:0,y:0}:c,d=l.to,m=d===void 0?{x:1,y:1}:d,p=l.fill,h=p===void 0?"transparent":p,g=l.className,y=l.innerRef,x=a(l,n),v=u.x===m.x||u.y===m.y;return e.default.createElement("line",s({ref:y,className:(0,t.default)("visx-line",g),x1:u.x,y1:u.y,x2:m.x,y2:m.y,fill:h,shapeRendering:v?"crispEdges":"auto"},x))}return NS}var HPt=D5e();const F5e=Ka(HPt);function U5e(e){return"bandwidth"in e?e.bandwidth():0}var zPt=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function PL(){return PL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PL.apply(this,arguments)}function GPt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Up(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,i=e.width,l=e.stroke,c=l===void 0?"#eaf0f6":l,u=e.strokeWidth,d=u===void 0?1:u,m=e.strokeDasharray,p=e.className,h=e.children,g=e.numTicks,y=g===void 0?10:g,x=e.lineStyle,v=e.offset,b=e.tickValues,_=GPt(e,zPt),w=b??X5(a,y),C=(v??0)+U5e(a)/2,S=w.map(function(E,M){var k,N=((k=iw(a(E)))!=null?k:0)+C;return{index:M,from:new Tc({x:0,y:N}),to:new Tc({x:i,y:N})}});return R.createElement(ba,{className:V("visx-rows",p),top:n,left:s},h?h({lines:S}):S.map(function(E){var M=E.from,k=E.to,N=E.index;return R.createElement(F5e,PL({key:"row-line-"+N,from:M,to:k,stroke:c,strokeWidth:d,strokeDasharray:m,style:x},_))}))}Up.propTypes={tickValues:Ue.array,width:Ue.number.isRequired};var qPt=["top","left","scale","height","stroke","strokeWidth","strokeDasharray","className","numTicks","lineStyle","offset","tickValues","children"];function OL(){return OL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OL.apply(this,arguments)}function KPt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function NH(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,i=e.height,l=e.stroke,c=l===void 0?"#eaf0f6":l,u=e.strokeWidth,d=u===void 0?1:u,m=e.strokeDasharray,p=e.className,h=e.numTicks,g=h===void 0?10:h,y=e.lineStyle,x=e.offset,v=e.tickValues,b=e.children,_=KPt(e,qPt),w=v??X5(a,g),C=(x??0)+U5e(a)/2,S=w.map(function(E,M){var k,N=((k=iw(a(E)))!=null?k:0)+C;return{index:M,from:new Tc({x:N,y:0}),to:new Tc({x:N,y:i})}});return R.createElement(ba,{className:V("visx-columns",p),top:n,left:s},b?b({lines:S}):S.map(function(E){var M=E.from,k=E.to,N=E.index;return R.createElement(F5e,OL({key:"column-line-"+N,from:M,to:k,stroke:c,strokeWidth:d,strokeDasharray:m,style:y},_))}))}NH.propTypes={tickValues:Ue.array,height:Ue.number.isRequired};var YPt=["tooltipOpen"];function QPt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function ek(){return ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ek.apply(null,arguments)}function jH(e){var t=f.useState(ek({tooltipOpen:!1},e)),n=t[0],r=t[1],s=f.useCallback(function(i){return r(typeof i=="function"?function(l){l.tooltipOpen;var c=QPt(l,YPt);return ek({},i(c),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:i.tooltipLeft,tooltipTop:i.tooltipTop,tooltipData:i.tooltipData})},[r]),a=f.useCallback(function(){return r({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[r]);return{tooltipOpen:n.tooltipOpen,tooltipLeft:n.tooltipLeft,tooltipTop:n.tooltipTop,tooltipData:n.tooltipData,updateTooltip:r,showTooltip:s,hideTooltip:a}}var XPt=["className","top","left","offsetLeft","offsetTop","style","children","unstyled","applyPositionStyle"];function tk(){return tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tk.apply(null,arguments)}function ZPt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var B5e={position:"absolute",backgroundColor:"white",color:"#666666",padding:".3rem .5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"},AH=R.forwardRef(function(e,t){var n=e.className,r=e.top,s=e.left,a=e.offsetLeft,i=a===void 0?10:a,l=e.offsetTop,c=l===void 0?10:l,u=e.style,d=u===void 0?B5e:u,m=e.children,p=e.unstyled,h=p===void 0?!1:p,g=e.applyPositionStyle,y=g===void 0?!1:g,x=ZPt(e,XPt);return R.createElement("div",tk({ref:t,className:V("visx-tooltip",n),style:tk({top:r==null||c==null?r:r+c,left:s==null||i==null?s:s+i},y&&{position:"absolute"},!h&&d)},x),m)});AH.propTypes={children:Ue.node,className:Ue.string,left:Ue.number,offsetLeft:Ue.number,offsetTop:Ue.number,top:Ue.number,applyPositionStyle:Ue.bool,unstyled:Ue.bool};AH.displayName="Tooltip";function LL(){return LL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LL.apply(null,arguments)}function JPt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,DL(e,t)}function DL(e,t){return DL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},DL(e,t)}var gie={top:0,right:0,bottom:0,left:0,width:0,height:0};function e8t(e){var t;return t=function(n){function r(a){var i;return i=n.call(this,a)||this,i.state={rect:void 0,parentRect:void 0},i.nodeRef=R.createRef(),i.getRects=i.getRects.bind(i),i}JPt(r,n);var s=r.prototype;return s.componentDidMount=function(){var i,l=this;this.node=(i=this.nodeRef)!=null&&i.current?this.nodeRef.current:due.findDOMNode(this),this.setState(function(){return l.getRects()})},s.getRects=function(){if(!this.node)return this.state;var i=this.node,l=i.parentNode,c=i.getBoundingClientRect?i.getBoundingClientRect():gie,u=l!=null&&l.getBoundingClientRect?l.getBoundingClientRect():gie;return{rect:c,parentRect:u}},s.render=function(){return R.createElement(e,LL({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},r}(R.PureComponent),t.displayName="withBoundingRects("+(e.displayName||"")+")",t}var V5e=f.createContext({isFlippedVertically:!1,isFlippedHorizontally:!1}),t8t=V5e.Provider;V5e.Consumer;var n8t=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nk.apply(null,arguments)}function r8t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function $5e(e){var t=e.children;e.getRects;var n=e.left,r=n===void 0?0:n,s=e.offsetLeft,a=s===void 0?10:s,i=e.offsetTop,l=i===void 0?10:i,c=e.parentRect,u=e.rect,d=e.style,m=d===void 0?B5e:d,p=e.top,h=p===void 0?0:p,g=e.unstyled,y=g===void 0?!1:g,x=e.nodeRef,v=r8t(e,n8t),b,_=!1,w=!1;if(u&&c){var C=r,S=h;if(c.width){var E=C+a+u.width-c.width,M=u.width-C-a;_=E>0&&E>M}else{var k=C+a+u.width-window.innerWidth,N=u.width-C-a;_=k>0&&k>N}if(c.height){var P=S+l+u.height-c.height,L=u.height-S-l;w=P>0&&P>L}else w=S+l+u.height>window.innerHeight;C=_?C-u.width-a:C+a,S=w?S-u.height-l:S+l,C=Math.round(C),S=Math.round(S),b="translate("+C+"px, "+S+"px)"}return R.createElement(AH,nk({ref:x,style:nk({left:0,top:0,transform:b},!y&&m)},v),R.createElement(t8t,{value:{isFlippedVertically:!w,isFlippedHorizontally:!_}},t))}$5e.propTypes={nodeRef:Ue.oneOfType([Ue.string,Ue.func,Ue.object])};const W5e=e8t($5e),Sy=200,s8t={top:24,right:8,bottom:24,left:16},a8t=sw("%b %d"),i8t=sw("%b"),o8t=sw("%Y");function l8t(e){return e?(e=new Date(e),(rw(e)<e?a8t:yl(e)<e?i8t:o8t)(e)):""}const $mn=(e,t,n)=>{if(!e&&(e!==0||!n?.renderZero))return"";const s=t&&/^[A-Z]{3}$/.test(t)?t:void 0,a=e%1===0&&!n?.alwaysShowMinor||n?.roundToMajor?0:2;let i=n?.roundToMajor?0:2;if(e>0&&e<1){const c=Math.abs(e).toExponential();i=Math.abs(parseInt(c.split("e")[1]))+1}const l=Intl.NumberFormat(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:1,maximumFractionDigits:1,currencyDisplay:n?.currencyDisplay??"narrowSymbol"});return n?.truncate&&e>=1e6?`${l.format(e/1e6)}M`:n?.truncate&&e>=1e3?`${l.format(e/1e3)}k`:e.toLocaleString(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:a,maximumFractionDigits:i,currencyDisplay:n?.currencyDisplay??"narrowSymbol"})};function c8t(e,t){const n=e>1?0:2;return e.toLocaleString(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:n})}const u8t={time:e=>new Date(e),linear:e=>+e,band:e=>e,ordinal:e=>e,log:e=>+e,point:e=>e};function QI(e,t){if(!e)return r=>null;if(t===void 0)return r=>r[e];const n=u8t[t]||(r=>r);return r=>n(r[e])}function xh(e,t){return typeof t=="function"?t(e):typeof t=="string"?t.replace("%s",e):e instanceof Date?l8t(e):String(e)}const Qi={time:Rp,linear:ef,band:w$,log:C$,point:aw,ordinal:S$},yie=["band","ordinal","point"];function d8t({width:e,height:t,margin:n,hasAxis:r,maxYLabelWidth:s=0}){const a=n.left+(r?s+15:0),i=e-n.right-n.left,l=t-n.bottom,c=n.top,u=[a,i],d=[l,c],m=Math.max(0,i-a);return{innerHeight:Math.max(0,l-c),innerWidth:m,xRange:u,yRange:d}}function Wmn(e,t,n){const r=[];let s="";return e.forEach(a=>{const i=t(a),l=i.toISOString().slice(0,10);l!==s&&(s=l,r.push(i))}),r.filter((a,i)=>i%n===0)}function XT(e){const{colorScheme:t}=Jr(),n=Ds(),r=f.useMemo(()=>n?t==="dark":!1,[t,n]);return f.useMemo(()=>({...r?qkt:Kkt,...e}),[r,e])}function ZT(e){return f.useMemo(()=>e.data.map(n=>({__key:Math.random(),...n})),[e.data])}function JT({config:e}){const t=f.useMemo(()=>QI(e.x.accessor,e.x.scale),[e.x]),n=f.useMemo(()=>QI(e.y.accessor,e.y.scale),[e.y]),r=f.useMemo(()=>QI(e.z?.accessor,e.z?.scale),[e.z]);return f.useMemo(()=>({xGet:t,yGet:n,zGet:r}),[t,n,r])}function eN({config:e}){const t=f.useCallback(l=>xh(l,e.x.format),[e.x]),n=f.useCallback(l=>xh(l,e.y.format),[e.y]),r=f.useCallback(l=>xh(l,e.z?.format),[e.z]),s=f.useCallback(l=>xh(l,e.x.tooltipFormat??e.x.format),[e.x]),a=f.useCallback(l=>xh(l,e.y.tooltipFormat??e.y.format),[e.y]),i=f.useCallback(l=>xh(l,e.z?.tooltipFormat??e.z?.format),[e.z]);return f.useMemo(()=>({xFormat:t,yFormat:n,zFormat:r,xTooltipFormat:s,yTooltipFormat:a,zTooltipFormat:i}),[t,n,r,s,a,i])}function Mw({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}){return f.useMemo(()=>d8t({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}),[e,t,n,r,s])}function IH({config:e,xGet:t,yGet:n,data:r,endTime:s,previousClose:a}){const i=f.useMemo(()=>{if(yie.includes(e.x.scale))return[...new Set(r.map(t))];const u=gi(r,t);return e.x.tickValues?gi([...e.x.tickValues,...u]):u},[e.x.tickValues,e.x.scale,r,t]),l=f.useMemo(()=>{if(yie.includes(e.y.scale))return[...new Set(r.map(n))];const d=[...gi(r,n)];a!==void 0&&d.push(a),e.y.tickValues&&d.push(...e.y.tickValues);const[m,p]=gi(d),g=(p-m)*.05;return[m-g,p+g]},[e.y.tickValues,e.y.scale,r,n,a]),c=f.useMemo(()=>{if(!s||!i||i.length<2||e.x.scale!=="time")return i;const[u,d]=i;return new Date(d).toDateString()!==s.toDateString()?i:Date.now()<s.getTime()&&d<s?[u,s]:i},[i,s,e.x.scale]);return f.useMemo(()=>({xDomain:c,yDomain:l}),[c,l])}function RH(e){const[t,n]=f.useState({width:0,height:0,resizing:!1});return f.useEffect(()=>{let r;const s=()=>{e.current&&(clearTimeout(r),n(a=>{const i=e.current?.offsetWidth??0,l=e.current?.offsetHeight??0,c=Math.round(a.width)!==Math.round(i);return{width:i,height:l,resizing:c}}),r=setTimeout(()=>{n(a=>({...a,resizing:!1}))},500))};return s(),window.addEventListener("resize",s),()=>{clearTimeout(r),window.removeEventListener("resize",s)}},[e]),t}const hm=30,H5e=({height:e,render:t,children:n})=>{const r=f.useRef(null),{width:s,resizing:a}=RH(r);return o.jsx("div",{style:{width:"100%",height:e},ref:r,className:V("relative"),children:o.jsx(Je,{children:t&&!a&&o.jsx(ve.div,{className:"absolute",style:{top:0,left:0,right:0,bottom:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:n(s)})})})},f8t=({children:e,style:t})=>o.jsx(H,{className:"p-sm pb-md flex h-full",children:o.jsx(H,{className:"flex size-full items-center justify-center",variant:"raised",style:t,children:o.jsx(F,{variant:"small",color:"light",children:e})})}),z5e=()=>o.jsx(f8t,{style:{height:Sy,marginBottom:hm},children:o.jsx(he,{id:"iuY8kxCDQT",defaultMessage:"Something went wrong."})}),m8t="animate-in fade-in shadow-subtle transition-colors duration-500",PH=f.memo(({marginTop:e,tooltipLeft:t=0,innerHeight:n,color:r,strokeWidth:s=1})=>{const a=f.useMemo(()=>({x:t,y:e}),[e,t]),i=f.useMemo(()=>({x:t,y:n+e}),[n,e,t]);return isNaN(a.x+i.x+a.y+i.y)?null:o.jsx(ve.line,{x1:a.x,y1:a.y,x2:i.x,y2:i.y,stroke:r,strokeWidth:s,pointerEvents:"none",className:m8t,initial:{opacity:0,strokeWidth:0},animate:{opacity:.6,strokeWidth:s},exit:{opacity:0,strokeWidth:0},transition:{duration:.1}})});PH.displayName="YCrosshair";const p8t={pointerEvents:"none",position:"absolute",overflow:"visible"},G5e=({children:e,y:t,x:n,pill:r})=>o.jsx(W5e,{top:t,left:n,style:p8t,children:o.jsx("div",{className:V("m-xs shadow-subtle dark:bg-subtle relative border bg-white/75 backdrop-blur-sm",{"rounded-full":r,"rounded-lg":!r}),children:e})}),xie=["1d","5d"],q5e=6,K5e=(e,t,n,r,s)=>{const a=t(e);return!(a===void 0||a<r||a>n-s)},kw=(e,t,n)=>K5e(e,t,n,25,70),Tw=(e,t,n)=>K5e(e,t,n,20,20),h8t=({xScale:e,width:t})=>{if("ticks"in e)return e.ticks(q5e).map(n=>({date:n,label:kw(n,e,t),line:Tw(n,e,t)}))},g8t=e=>{const t=e.match(/(\d{4})-(\d{2})-(\d{2})/);return t?t[0]:void 0},y8t=({history:e,xGet:t,xGetUnparsed:n,width:r,xScale:s})=>{const a=[],i=new Set;return e.forEach(l=>{const c=t(l),u=g8t(n(l));u&&!i.has(u)&&(a.push({date:c,label:kw(c,s,r),line:Tw(c,s,r)}),i.add(u))}),a};function x8t(e){const t=new Date(e.getFullYear(),e.getMonth(),1).getDay(),n=t===0?6:t-1;return Math.ceil((e.getDate()+n)/7)}const v8t=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getMonth(),u=x8t(l),d=`${c}-${u}`;a.has(d)||(s.push({date:l,label:kw(l,r,n),line:Tw(l,r,n)}),a.add(d))}),s.filter((i,l,c)=>l?i.date.getTime()-c[l-1].date.getTime()>1e3*60*60*24*6:!0)},jS=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getMonth(),d=`${l.getFullYear()}-${c}`;a.has(d)||(s.push({date:l,label:kw(l,r,n),line:Tw(l,r,n)}),a.add(d))}),s},vie=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getFullYear();a.has(c)||(s.push({date:l,label:kw(l,r,n),line:Tw(l,r,n)}),a.add(c))}),s},b8t={"1d":h8t,"5d":y8t,"1m":v8t,"6m":jS,"3m":jS,ytd:jS,"1y":jS,"5y":vie,max:vie},od=(e,t)=>e.date.toLocaleDateString(e.locale,{timeZone:e.timezone??void 0,...t}),_8t=e=>{const t=e.date.getMinutes()!==0;return e.date.toLocaleTimeString(e.locale,{timeZone:e.timezone??void 0,hour:"numeric",minute:t?"numeric":void 0})},w8t={"1d":e=>_8t(e),"5d":e=>od(e,{month:"short",day:"numeric"}),"1m":e=>od(e,{month:"short",day:"numeric"}),"6m":e=>od(e,{month:"short"}),"3m":e=>od(e,{month:"short"}),ytd:e=>od(e,{month:"short"}),"1y":e=>od(e,{month:"short"}),"5y":e=>od(e,{year:"numeric"}),max:e=>od(e,{year:"numeric"})},Y5e=({history:e,xGet:t,xGetUnparsed:n,timezone:r,locale:s,period:a,width:i,xScale:l})=>{const c=i<400?3:6,u=f.useMemo(()=>{const g=b8t[a]({history:e,xGet:t,xGetUnparsed:n,locale:s,period:a,xScale:l,width:i});return g&&(g.length>c?g.map((y,x)=>({...y,label:y.label&&x%Math.floor(g.length/c)===0})):g)},[e,t,n,s,a,l,i,c]),d=f.useMemo(()=>{const g=u?.filter(y=>y.label).map(y=>y.date);return g?.length?g:void 0},[u]),m=f.useMemo(()=>{const g=u?.filter(y=>y.line).map(y=>y.date);return g?.length?g:void 0},[u]),p=f.useCallback(g=>w8t[a]({date:g,locale:s,timezone:r}),[a,s,r]);return{xTickLabels:d,xTickFormatter:p,xTickLines:m,xTickCount:d?void 0:q5e}},Md=e=>e.close,vh=({value:e,baseline:t,annotation:n})=>{const r=n?Pkt[n.type]:void 0,s=e>=t?Sd.POSITIVE:Sd.NEGATIVE;return{...Okt(s),backgroundColor:Tb[s],lineColor:Tb[s],backgroundOpacity:1,valence:s,...r}},OH=(e,t)=>{const[n,r]=t;return n===r?0:(e-n)/(r-n)*100},C8t=({history:e,baseline:t,exchangeHoursAnnotations:n,xScale:r,width:s,xMaskingSupported:a})=>{if(!e?.length)return[];a||(n=[]);const i=[];e.forEach((u,d)=>{const m=e[d-1],p=Ph(n,au(u));if(!m){i.push({...vh({value:Md(u),baseline:t,annotation:p}),x:0,type:p?.type});return}const h=Md(m),g=Md(u),y=Ph(n,au(m)),x=Ph(n,au(u));if(y!==x){const b=r(_s(m))??0;i.push({...vh({value:h,baseline:t,annotation:y}),x:b,type:y?.type}),i.push({...vh({value:g,baseline:t,annotation:Ph(n,au(u))}),x:b,type:x?.type})}if(y===x&&(h<t&&g>=t||h>=t&&g<t)){const v=r(_s(m))??0,b=r(_s(u))??0,_=(t-h)/(g-h),w=v+_*(b-v);i.push({...vh({value:h,baseline:t,annotation:y}),x:w,type:y?.type}),i.push({...vh({value:g,baseline:t,annotation:x}),x:w,type:x?.type})}});const l=e[e.length-1],c=Ph(n,au(l));return i.push({...vh({value:Md(l),baseline:t,annotation:c}),x:s,type:c?.type}),i},S8t=({l:e,id:t,animationId:n,history:r,baseline:s,stops:a,yScale:i,style:l,xDomainData:c,height:u,marginBottom:d})=>{const m=f.useMemo(()=>{const h=i(s),g=e(r);return g?`${g} L ${c[1]},${h} L ${c[0]},${h} Z`:""},[e,r,i,s,c]),p=f.useMemo(()=>{const h=i.domain(),g=h[1]-h[0],y=(h[1]-s)/g*100,x=(u-d)/u*100;return y*(x/100)},[i,s,u,d]);return o.jsxs(o.Fragment,{children:[o.jsxs("defs",{children:[o.jsx("linearGradient",{id:`ticker-area-color-gradient-${t}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",colorInterpolation:"linearRGB",spreadMethod:"pad",children:a.map((h,g)=>o.jsx("stop",{offset:`${OH(h.x,c)}%`,stopColor:ma[h.backgroundColor],stopOpacity:h.backgroundOpacity},g))}),o.jsxs("linearGradient",{id:`ticker-area-opacity-gradient-${t}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.3"}),o.jsx("stop",{offset:`${Math.max(0,p-20)}%`,stopColor:"white",stopOpacity:"0.1"}),o.jsx("stop",{offset:`${p}%`,stopColor:"white",stopOpacity:"0.00"}),o.jsx("stop",{offset:`${Math.min(100,p+20)}%`,stopColor:"white",stopOpacity:"0.1"}),o.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0.3"})]}),o.jsx("mask",{id:`ticker-area-mask-${t}`,children:o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#ticker-area-opacity-gradient-${t})`})})]}),o.jsx("g",{mask:`url(#ticker-area-mask-${t})`,children:o.jsx(Je,{mode:"wait",children:o.jsx(ve.path,{d:m,fill:`url(#ticker-area-color-gradient-${t})`,stroke:"none",shapeRendering:dw,style:{mixBlendMode:"multiply",...l},initial:{opacity:0},animate:{opacity:1,transition:Cg},exit:VSe},n)})})]})},E8t=({l:e,history:t,stops:n,xDomainData:r,id:s})=>{const a=f.useMemo(()=>e(t),[e,t]),i=YSe(a);return o.jsxs(o.Fragment,{children:[o.jsx("defs",{children:o.jsx("linearGradient",{id:`ticker-line-gradient-${s}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:n.map((l,c)=>o.jsx("stop",{offset:`${OH(l.x,r)}%`,stopColor:ma[l.backgroundColor],stopOpacity:l.lineOpacity},c))})}),o.jsx(vu.path,{d:i,stroke:n?.length?`url(#ticker-line-gradient-${s})`:ma.blue,strokeWidth:1.75,fill:"none",shapeRendering:dw})]})},M8t=({id:e,stops:t,height:n,opacity:r,size:s,style:a,xBounds:i})=>o.jsxs("g",{children:[o.jsxs("defs",{children:[o.jsx("pattern",{id:`ticker-after-hours-dot-grid-${e}`,patternUnits:"userSpaceOnUse",width:s,height:s,children:o.jsx("circle",{cx:s/2,cy:s/2,r:s*.12,fill:ma.gray,opacity:r})}),o.jsx("linearGradient",{id:`ticker-after-hours-mask-gradient-${e}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:t.map((l,c)=>{const u=!!l.type;return o.jsx("stop",{offset:`${OH(l.x,i)}%`,stopColor:"white",stopOpacity:u?1:0},c)})}),o.jsx("mask",{id:`ticker-after-hours-mask-${e}`,children:o.jsx("rect",{x:0,y:"0",width:i[1],height:n,fill:`url(#ticker-after-hours-mask-gradient-${e})`})})]}),o.jsx("rect",{x:0,y:"0",style:a,width:i[1],height:n,fill:`url(#ticker-after-hours-dot-grid-${e})`,mask:`url(#ticker-after-hours-mask-${e})`})]}),k8t=({exchangeHoursAnnotations:e,data:t,xScale:n,xBounds:r})=>{const{$t:s}=Z(),{tooltipData:a,hideTooltip:i,showTooltip:l}=jH(),c=f.useCallback(u=>{const d="touches"in u;u.stopPropagation();const m=TH(u);if(!m)return;const{d:p,x:h}=K$(m.x,n,t);if(!p)return;const g=Ph(e,p.date),y=g?.type&&ore[g.type]?s(ore[g.type]):void 0,x=Math.min(Math.max(r[0],h),r[1]);l({tooltipData:{data:p,x,y:d?0:m.y,annotation:y}})},[t,n,l,e,s,r]);return f.useMemo(()=>({tooltipData:a,hideTooltip:i,showTooltip:c}),[a,i,c])},T8t=({currency:e,absoluteChange:t,relativeChange:n})=>{const{locale:r}=Z(),s=f.useMemo(()=>t===void 0?null:q$(t,e,r),[t,e,r]),a=f.useMemo(()=>n===void 0?null:n.toLocaleString(r,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"}),[n,r]),i=f.useMemo(()=>t?t>0?"positive":"negative":"light",[t]);return!t&&!n?null:o.jsx(H,{className:"relative border-t",children:o.jsx(F,{variant:"tinyRegular",color:i,className:"px-sm py-xs whitespace-nowrap",children:o.jsx(he,{id:"TqEJGQaMg0",defaultMessage:"{absoluteChange} ({relativeChange})",values:{absoluteChange:s,relativeChange:a}})})})},N8t=({x:e,y:t,close:n,date:r,annotation:s,absoluteChange:a,relativeChange:i,currency:l,exchangeTimezone:c})=>{const{locale:u}=Z();return o.jsxs(G5e,{y:t,x:e,children:[o.jsxs(H,{className:"py-sm relative px-[12px]",children:[o.jsx(F,{variant:"baseSemi",children:q$(n,l,u)}),o.jsx(F,{variant:"tinyRegular",className:"whitespace-nowrap",color:"light",children:QSe(r,u,c)}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"whitespace-nowrap",children:s})]}),o.jsx(T8t,{currency:l,absoluteChange:a,relativeChange:i})]})},j8t=({baseline:e,history:t,yScale:n,chartWidth:r,children:s})=>{const a=f.useMemo(()=>{const l=n(e),c=10,u=25,d=t.slice(-Math.max(3,Math.floor(t.length*.1))),m=d.reduce((y,x)=>y+n(Md(x)),0)/d.length,p=Math.abs(m-l),g=!(l<u)&&(p>=c?!0:m>l);return{opacity:1,top:l,left:r-10,transform:`translate(-100%, ${g?"-100%":"0"})`}},[e,t,n,r]),i=f.useMemo(()=>({...a,opacity:0}),[a]);return r<25?null:o.jsx(ve.div,{className:"pointer-events-none absolute z-50",initial:i,animate:a,transition:{duration:.5,ease:"easeInOut"},children:s})},A8t=(e,t)=>{if(!e?.length)return;const n=gi(e,au),r=ire(n[0],t?.open??""),s=ire(n[1],t?.close??"");let a=n[0],i=n[1];return r<a&&(a=r),s>i&&(i=s),[new Date(a),new Date(i)]},I8t=(e,t,n,r)=>{const[s,a]=f.useState(null),i=f.useCallback(()=>{e?.x&&a(e.x)},[e?.x]),l=f.useCallback(()=>{a(null)},[]),c=f.useMemo(()=>s===null?null:K$(s,t,n).d,[t,n,s]),u=f.useMemo(()=>{if(!c||!e)return null;const[x,v]=[e.data,c].sort((b,_)=>_.date.localeCompare(b.date));return{absolute:x.close-v.close,relative:(x.close-v.close)/v.close}},[c,e]),d=f.useMemo(()=>t.range()[1],[t]),m=f.useMemo(()=>!s||!c?null:t(_s(c)),[t,c,s]),p=f.useMemo(()=>!s||!c||!e?null:t(_s(e.data))??d,[t,c,s,e,d]),h=f.useMemo(()=>!c||!e||!s?`M 0 0 L ${d} 0 L ${d} ${r} L 0 ${r} Z`:`M ${m} 0 L ${p} 0 L ${p} ${r} L ${m} ${r} Z`,[c,e,s,r,m,p,d]),g="finance-chart-clip-path",y=f.useMemo(()=>({clipPath:`url(#${g})`}),[g]);return{id:g,path:h,style:y,animate:!s,absoluteChange:u?.absolute,relativeChange:u?.relative,handleMouseDown:i,handleMouseUp:l,leftX:m,rightX:p}},R8t=e=>e&&e<0?ma.red:e&&e>0?ma.blue:ma.gray,P8t=({id:e,path:t})=>o.jsx("defs",{children:o.jsx("clipPath",{id:e,children:o.jsx(vu.path,{d:t})})}),Q5e=f.memo(({symbol:e,exchangeTimezone:t,exchangeHours:n,period:r,currency:s,history:a,previousClose:i,width:l,height:c,exchangeHoursAnnotations:u=[]})=>{const{locale:d}=Z(),m=r==="1d",p=f.useMemo(()=>a.toSorted((J,K)=>J.date.localeCompare(K.date)),[a]),h=f.useMemo(()=>xie.includes(r)?KSe(p):new Set,[p,r]),g=f.useMemo(()=>p.filter(J=>!h.has(J.date)),[p,h]),y=f.useMemo(()=>G$(g,r),[g,r]),x=f.useMemo(()=>m?Rp({domain:A8t(p,n),range:[0,l]}):aw({domain:p.map(_s),range:[0,l]}),[p,l,m,n]),v=f.useMemo(()=>gi(a,_s).map(J=>x(J)),[x,a]),b=f.useMemo(()=>[0,l],[l]),_=f.useMemo(()=>gi(y,Md),[y]),w=i??a[a.length-1].close,C=f.useMemo(()=>{w&&(_[0]=Math.min(_[0],w),_[1]=Math.max(_[1],w));const J=_[1]-_[0];return _[0]-=J*.05,_[1]+=J*.05,ef({nice:!1,domain:_,range:[c-hm,0]})},[c,w,_]),S=f.useMemo(()=>Qu().x(J=>x(_s(J))??0).y(J=>C(Md(J))??0).curve(FSe),[x,C]),{tooltipData:E,hideTooltip:M,showTooltip:k}=k8t({data:p,exchangeHoursAnnotations:u,xScale:x,xBounds:v}),{handleMouseDown:N,handleMouseUp:P,leftX:L,rightX:O,...A}=I8t(E,x,p,c),j=R8t(A.absoluteChange),T=f.useCallback(()=>{P(),M()},[P,M]),{isMobileStyle:I}=Ce(),U=I?WSe:$Se,B=f.useMemo(()=>C.ticks(U),[C,U]),D=`${r}-${e}`,W=xie.includes(r)&&!!u.length,{xTickLabels:z,xTickFormatter:$,xTickLines:X,xTickCount:q}=Y5e({history:p,xGet:_s,xGetUnparsed:au,timezone:t,locale:d,period:r,xScale:x,width:l}),Y=f.useMemo(()=>C8t({xMaskingSupported:W,history:y,baseline:w,xScale:x,width:l,exchangeHoursAnnotations:u??[]}),[y,w,x,u,l,W]),G=f.useCallback(J=>zSe({tick:J,history:y,yScale:C,xScale:x,yGet:Md,baseline:w}),[y,C,x,w]);return o.jsxs("div",{className:BSe,onMouseDown:N,onMouseMove:k,onMouseLeave:T,onMouseOut:T,onMouseUp:P,onTouchStart:k,onTouchMove:k,onTouchEnd:T,onTouchCancel:T,children:[o.jsxs("svg",{height:c,width:l,className:USe,children:[o.jsx(Je,{initial:!1,mode:"wait",children:!W&&o.jsxs(ve.g,{initial:{opacity:0},animate:{opacity:1},transition:Cg,children:[o.jsx(Up,{tickValues:B,scale:C,width:l,stroke:ma.gray,strokeWidth:1,opacity:.1,className:"transition-all duration-1000"}),o.jsx(NH,{scale:x,opacity:.1,height:c*2,stroke:ma.gray,style:{transform:`translateY(-${c}px)`},numTicks:q,strokeWidth:1,tickValues:X})]},D)}),o.jsx(P8t,{id:A.id,path:A.path}),o.jsx(S8t,{l:S,id:e,animationId:D,history:y,baseline:w,stops:Y,yScale:C,style:A.style,xDomainData:v,height:c,marginBottom:hm}),o.jsx(Je,{mode:"wait",children:o.jsxs(ve.g,{initial:{opacity:0},exit:VSe,animate:{opacity:1},transition:Cg,children:[o.jsx(M8t,{id:e,stops:Y,height:c*3,style:{transform:`translateY(-${c*3/2}px)`},width:l,opacity:.33,size:5,xBounds:b}),o.jsx("g",{opacity:E?0:1,className:NO(!!E),children:o.jsx(nf,{scale:C,hideTicks:!0,hideAxisLine:!0,numTicks:U,left:z$,orientation:"right",tickLabelProps:G})}),o.jsx(nf,{scale:x,hideAxisLine:!0,hideTicks:!0,numTicks:q,tickValues:z,tickFormat:$,orientation:"bottom",top:c-hm,tickLabelProps:GSe})]},D)}),o.jsx(E8t,{l:S,id:e,history:y,baseline:w,stops:Y,xDomainData:v}),o.jsx(Je,{children:o.jsx(ve.line,{stroke:ma.gray,initial:{opacity:0},transition:{duration:fT/1e3,ease:"easeInOut"},animate:{opacity:1,x1:0,x2:l,y1:C(w),y2:C(w)},exit:{opacity:0},strokeDasharray:"4 4",strokeWidth:.8,shapeRendering:dw})}),o.jsx(Je,{children:E&&o.jsx(PH,{marginTop:-c,tooltipLeft:E.x,innerHeight:c*3,color:j})})]}),o.jsx(Je,{children:m&&o.jsx(j8t,{baseline:w,history:p,yScale:C,chartWidth:l,children:o.jsx(H,{className:V("m-sm px-sm py-xs shadow-subtle dark:bg-subtle relative rounded-full border bg-white/75 backdrop-blur-sm dark:shadow-md",NO(!!E)),children:o.jsx(F,{variant:"micro",color:"light",className:"relative whitespace-nowrap",children:o.jsx(he,{id:"ZjNVXgqGKh",defaultMessage:"Prev close: {price}",values:{price:q$(w,s,d)}})})})})}),o.jsx(Je,{children:wv(L)&&wv(O)&&o.jsx(ve.div,{animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"pointer-events-none absolute inset-0",style:{left:O>L?L:O,right:l-(O>L?O:L),top:-c,bottom:-c},children:o.jsx(ve.div,{className:"bg-inverse absolute inset-0 rounded-md opacity-5"})})}),o.jsx("div",{style:{height:c-hm,width:l},className:"pointer-events-none absolute inset-0",children:E&&o.jsx(N8t,{x:E.x,y:E.y,annotation:E.annotation,close:E.data.close,date:E.data.date,absoluteChange:A.absoluteChange,relativeChange:A.relativeChange,currency:s,exchangeTimezone:t??void 0})})]})});Q5e.displayName="Chart";const O8t=f.memo(function({quote:t,period:n}){return o.jsx(Pr,{fallback:z5e,children:o.jsx(H5e,{height:Sy,render:!!t,children:r=>!t||!n||r<100||!t.history?.length?null:o.jsx(Q5e,{symbol:t.symbol,currency:t.currency,period:n,history:t.history,previousClose:t.historicalPreviousClose??void 0,exchangeHours:t.exchangeHours,exchangeTimezone:t.exchangeTimezone,exchangeHoursAnnotations:t.exchangeHoursAnnotations,width:r,height:Sy})})})}),bie=["oklch(var(--hydra-450))","oklch(var(--jenova-450))","oklch(var(--costa-400))","oklch(var(--rosa-450))","oklch(var(--kuja-450))","oklch(var(--dalmasca-400))","oklch(var(--terra-450))","oklch(var(--limsa-450))","oklch(var(--gridania-450))"],o1=e=>bie[e%bie.length],L8t=4,K2=e=>e.changesPercentage,D8t=({d:e})=>{const t=YSe(e??"");return e?o.jsx(vu.path,{strokeWidth:1.75,fill:"none",shapeRendering:dw,d:t}):null},F8t=({data:e,yScale:t})=>H$(e||[],{keys:r=>r.quote.symbol,from:{r:0},enter:{r:L8t},leave:{r:0},config:{tension:400,friction:30}})((r,s)=>o.jsx(U8t,{x:s.x,yv:s.yv,color:s.quote.color,yScale:t,r:r.r.to(a=>Math.max(a,0))},s.quote.symbol)),U8t=({x:e,yv:t,color:n,yScale:r,r:s})=>{const a=W$({x:e,yv:t,opacity:1,config:{tension:400,friction:30}});return o.jsx(vu.circle,{cx:a.x,cy:a.yv.to(i=>r(i)),r:s,opacity:a.opacity,fill:n})},B8t=({data:e,timeZone:t,locale:n,x:r})=>{const s=f.useMemo(()=>e.reduce((i,l)=>Math.abs(l.x-r)<Math.abs(i.x-r)?l:i,e[0]),[e,r]),a=f.useMemo(()=>{if(!s)return null;const i=s.date;return i?QSe(i,n,t??void 0):null},[s,n,t]);return o.jsx(F,{variant:"tinyRegular",color:"light",className:"px-sm py-xs",children:a})},V8t=(e,t)=>{const n={color:e.color,symbol:e.symbol,name:e.name,exchange:e.exchange,currency:e.currency,image:e.image,imageDark:e.imageDark,exchangeTimezone:e.exchangeTimezone};return t?{quote:{...n,price:t.close,historicalChange:t.close-(e.historicalPreviousClose??0),historicalPercentChange:t.changesPercentage*100},date:t.date}:{quote:{...n,price:e.price,historicalChange:e.historicalChange??0,historicalPercentChange:e.historicalPercentChange??0},date:null}},$8t=({data:e,dataMovingAverage:t,xScale:n,xBounds:r,setHoveredComparisons:s})=>{const{tooltipData:a,hideTooltip:i,showTooltip:l}=jH(),c=f.useCallback(d=>{const m=TH(d);if(!m)return;const p=Math.min(Math.max(r[0],m.x),r[1]),h=t.map((g,y)=>{const x=K$(p,n,g.history),v=e[y].history[Math.min(x.index,e[y].history.length-1)],b=V8t(e[y],v);return{date:b.date,quote:b.quote,x:n(_s(x.d))??0,yv:K2(x.d)}});h.every(g=>g.x)&&(s(h.map(g=>g.quote)),l({tooltipData:{data:h,x:m.x,y:-30}}))},[e,t,n,l,r,s]),u=f.useCallback(()=>{i(),s([])},[i,s]);return f.useMemo(()=>({tooltipData:a,hideTooltip:u,showTooltip:c}),[a,u,c])},W8t=e=>{if(e.length===0)return!0;const t=e[0].map(_s);for(let n=1;n<e.length;++n){const r=e[n];if(r?.length!==t.length)return!1;for(let s=0;s<t.length-1;++s)if(_s(r[s]).getTime()!==t[s].getTime())return!1}return!0},H8t=(e,t)=>t?(e-t)/t:0,_ie=e=>{const t=e.historicalPreviousClose||e.history[0].close,n=e.history.map(r=>({...r,changesPercentage:H8t(r.close,t),change:r.close-t}));return{...e,history:n}},z8t=(e,t)=>({...e,history:G$(e.history,t)}),G8t=(e,t)=>!e||e===t?1:.2,q8t=({quotes:e,period:t,width:n,height:r,setHoveredComparisons:s,focused:a})=>{const{locale:i,timeZone:l}=Z(),{isMobileStyle:c}=Ce(),u=c?WSe:$Se,d=f.useMemo(()=>{const j=[...new Set(e.map(T=>T.exchangeTimezone))];return j.length===1?j[0]:l},[l,e]),m=f.useMemo(()=>e.map(_ie),[e]),p=f.useMemo(()=>e.map(j=>_ie(z8t(j,t))),[e,t]),h=f.useMemo(()=>p.flatMap(j=>j.history).sort((j,T)=>_s(j).getTime()-_s(T).getTime()),[p]),g=f.useMemo(()=>ef({nice:!1,domain:gi(m.flatMap(j=>j.history),K2),range:[r-hm,0]}),[r,m]),y=f.useMemo(()=>W8t(m.map(j=>j.history)),[m]),x=f.useMemo(()=>t==="1d"||!y?Rp({domain:gi(h,_s),range:[0,n]}):aw({domain:Array.from(new Set(h.map(au))).sort().map(qSe),range:[0,n]}),[n,h,y,t]),{xTickLabels:v,xTickFormatter:b,xTickLines:_,xTickCount:w}=Y5e({history:h,xGet:_s,xGetUnparsed:au,timezone:d,locale:i,period:t,xScale:x,width:n}),C=f.useMemo(()=>Qu().x(j=>x(_s(j))??0).y(j=>g(K2(j))??0).curve(FSe),[x,g]),S=f.useMemo(()=>p.map((j,T)=>({path:C(j.history),color:o1(T),quote:j})),[p,C]),E=f.useMemo(()=>g.ticks(u).filter(j=>j!==0),[g,u]),M=f.useMemo(()=>[...m.map(j=>j.symbol),t].join("-"),[m,t]),k=f.useMemo(()=>[0,n],[n]),{tooltipData:N,hideTooltip:P,showTooltip:L}=$8t({data:m,dataMovingAverage:p,xScale:x,xBounds:k,setHoveredComparisons:s}),O=f.useCallback(j=>j.toLocaleString(i,{style:"percent"}),[i]),A=f.useCallback(j=>{const T=p.map(I=>zSe({tick:j,history:I.history,yScale:g,xScale:x,yGet:K2}));return T.find(I=>I.opacity<1)??T[0]},[p,g,x]);return o.jsxs("div",{className:BSe,onMouseMove:L,onMouseLeave:P,onMouseOut:P,onTouchStart:L,onTouchMove:L,onTouchEnd:P,onTouchCancel:P,children:[o.jsxs("svg",{height:r,width:n,className:USe,children:[o.jsx(Je,{initial:!1,mode:"wait",children:o.jsxs(ve.g,{initial:{opacity:0},animate:{opacity:1},transition:Cg,children:[o.jsx("g",{opacity:N?0:1,className:NO(!!N),children:o.jsx(nf,{scale:g,hideTicks:!0,hideAxisLine:!0,numTicks:u,tickFormat:O,left:z$,orientation:"right",tickLabelProps:A})}),o.jsx(nf,{scale:x,hideAxisLine:!0,hideTicks:!0,numTicks:w,tickValues:v,tickFormat:b,orientation:"bottom",top:r-hm,tickLabelProps:GSe}),o.jsx(Up,{tickValues:E,scale:g,width:n,stroke:ma.gray,strokeWidth:1,opacity:.1,className:"transition-all duration-1000"}),o.jsx(NH,{scale:x,opacity:.1,height:r*2,stroke:ma.gray,style:{transform:`translateY(-${r}px)`},numTicks:w,strokeWidth:1,tickValues:_})]},M)}),o.jsx(Je,{children:S.map((j,T)=>o.jsx(ve.g,{initial:{opacity:0,transition:Cg},exit:{opacity:0,transition:Cg},animate:{stroke:j.color,opacity:G8t(a,j.quote.symbol),transition:{delay:0,duration:.25}},children:o.jsx(D8t,{d:j.path})},T))}),o.jsx(Je,{children:o.jsx(ve.line,{stroke:ma.gray,initial:{opacity:0},transition:{duration:fT/1e3,ease:"easeInOut"},animate:{opacity:1,x1:0,x2:n,y1:g(0),y2:g(0)},exit:{opacity:0},strokeDasharray:"4 4",strokeWidth:2,shapeRendering:dw})}),o.jsx(Je,{children:N&&o.jsx(PH,{marginTop:-r,tooltipLeft:N.x,innerHeight:r*3,color:ma.gray})}),o.jsx(F8t,{data:N?.data,yScale:g})]}),N&&o.jsx(G5e,{x:N.x,y:N.y,pill:!0,children:o.jsx(B8t,{data:N.data,timeZone:d,x:N.x,locale:i})})]})},K8t=f.memo(function({quotes:t,period:n,focused:r,setHoveredComparisons:s}){return o.jsx(Pr,{fallback:z5e,children:o.jsx(H5e,{height:Sy,render:!!t?.length,children:a=>!t?.length||!n||a<100||!t.every(i=>i?.history?.length)?null:o.jsx(q8t,{quotes:t,period:n,width:a,height:Sy,focused:r,setHoveredComparisons:s})})})}),Y8t=({root:e,quote:t,removeComparison:n,setFocused:r,className:s,href:a})=>{const i=f.useCallback(()=>{r(t.symbol)},[r,t.symbol]),l=f.useCallback(()=>{r(null)},[r]),c=f.useCallback(u=>{u.preventDefault(),u.stopPropagation(),l(),n(t.symbol)},[n,t.symbol,l]);return o.jsxs(Xu,{href:a,className:V("hover:bg-subtler flex items-center justify-start duration-150",{"bg-subtlest":e},s),onMouseEnter:i,onMouseLeave:l,children:[o.jsx(H,{className:"w-xs my-xs ml-xs shrink-0 self-stretch rounded-full",style:{background:t.color}}),o.jsxs(H,{className:"p-sm py-xs gap-sm md:gap-md flex w-full items-center justify-between",children:[o.jsxs(H,{className:V("gap-sm duration-quick grid w-full items-center transition-opacity [grid-template-columns:2fr_1fr_1fr] md:[grid-template-columns:5fr_1fr_1fr_1fr]",{"pointer-events-none opacity-0":t.loading}),children:[o.jsxs(H,{className:"gap-sm flex items-center",children:[o.jsx(B5,{symbol:t.symbol??"",src:t.image??"",srcDark:t.imageDark??""}),o.jsxs(H,{children:[o.jsx(F,{variant:"smallBold",className:"line-clamp-1 text-ellipsis",children:t.name??t.symbol}),o.jsx(F,{variant:"tinyMono",color:"light",children:o.jsx(mT,{symbol:t.symbol,exchange:t.exchange})})]})]}),o.jsx("span",{children:wv(t.price)&&o.jsx(tp,{variant:"small",price:t.price??0,currency:t.currency,animated:!1,className:"text-right"})}),o.jsx("span",{className:"hidden text-center md:block",children:wv(t.historicalChange)&&o.jsx(tp,{variant:"small",price:t.historicalChange??0,currency:t.currency,animated:!1,sign:!0})}),o.jsx("span",{children:wv(t.historicalPercentChange)&&o.jsx(Jm,{change:t.historicalPercentChange??0,variant:"tiny",includeIcon:!0,mono:!1,animated:!1})})]}),o.jsx(H,{className:V("flex items-center justify-end active:scale-95",{"pointer-events-none invisible":e}),children:o.jsx(pe,{onClick:c,variant:"border",icon:It,pill:!0,size:"tiny"},t.symbol)})]})]})},X5e=f.memo(({comparisons:e,removeComparison:t,setFocused:n})=>{const r=f.useCallback(()=>{n(null)},[n]),s=f.useCallback(a=>{const i=[a.symbol,...e.map(l=>l.symbol).filter(l=>l!==a.symbol)];return`/finance/${a.symbol}?comparing=${i.join(",")}`},[e]);return o.jsx(H,{className:"m-0 flex flex-col overflow-hidden p-0",onMouseLeave:r,children:e.map((a,i)=>o.jsx(Y8t,{quote:a,root:i===0,removeComparison:t,setFocused:n,href:s(a)},`${a.symbol}-${i===0}`))})});X5e.displayName="FinanceStockHistoryComparisonList";const Z5e="recent-tickers:2",Q8t=5,X8t=()=>{if(typeof window>"u")return[];try{const e=Oe.getItem(Z5e);return e?JSON.parse(e):[]}catch{return[]}},wie=e=>{if(!(typeof window>"u"))try{Oe.setItem(Z5e,JSON.stringify(e))}catch{}},LH=()=>{const[e,t]=f.useState([]);f.useEffect(()=>{t(X8t())},[]);const n=f.useCallback(s=>{t(a=>{const i=a.filter(c=>c.symbol!==s.symbol),l=[s,...i].slice(0,Q8t);return wie(l),l})},[]),r=f.useCallback(()=>{t([]),wie([])},[]);return f.useMemo(()=>({recentTickers:e,addRecentTicker:n,clearRecentTickers:r}),[e,n,r])},J5e=f.memo(({defaultSuggestions:e=[],placeholder:t,type:n="header",onClick:r,hideRecent:s=!1,inputClassName:a})=>{const[i,l]=f.useState(!1),[c,u]=f.useState(""),[d,m]=f.useState(null),p="finance-navigational-searchbar",{isMobileStyle:h}=Ce(),{$t:g}=Z(),{country:y}=eSe(),x=xt(),{data:v,isLoading:b}=We({queryKey:Lte(c,y),queryFn:()=>b9({query:c,reason:p,country:y}),staleTime:0,enabled:i}),_=f.useRef(null),w=_t(),C=f.useCallback(G=>{G?.url&&w.push(G.url)},[w]),S=r??C,E=g(h?{defaultMessage:"Enter Symbol",id:"Z+VSV2W9rg"}:{defaultMessage:"Search for companies, tickers, or crypto",id:"qKfwse3EGh"}),M=f.useRef(c);f.useEffect(()=>{M.current=c,m(c===""?null:0)},[c]);const k=f.useMemo(()=>e?.length&&c===""?"suggestions":v?.length&&c===""?"trending":"search",[e,c,v?.length]),N=f.useMemo(()=>{if(k==="suggestions")return g({defaultMessage:"Suggested",id:"a0lFbMbzyl"});if(k==="trending")return g({defaultMessage:"Trending",id:"ll/ufR0/ED"})},[k,g]),P=f.useMemo(()=>{if(k==="suggestions")return e;const G=v?.filter(J=>J.category==="ticker");return G?G.map(J=>({symbol:J.query??"",name:J.title??"",image:J.image??"",darkImage:J.image_dark??"",url:J.url??"",exchange:J.metadata?.price_info?.exchange??"",country:J.metadata?.price_info?.exchangeCountry??"",currency:J.metadata?.price_info?.currency??"",change:J.metadata?.price_info?.changePercentage??void 0,currentPrice:J.metadata?.price_info?.currentPrice??void 0,changesPercentage:J.metadata?.price_info?.changePercentage??void 0})):[]},[v,e,k]),{recentTickers:L,addRecentTicker:O}=LH(),A=f.useMemo(()=>({recentTickers:L.length&&c===""&&!s?L:[],suggestions:P?.length?P:[]}),[L,P,c,s]),j=f.useMemo(()=>[...A.recentTickers,...A.suggestions],[A.recentTickers,A.suggestions]);f.useEffect(()=>{d!==null&&d>T.current-1&&m(Math.max(0,T.current-1))},[A,d]);const T=f.useRef(0),I=f.useRef(null),U=f.useRef(j);f.useEffect(()=>{T.current=A.recentTickers.length+A.suggestions.length},[A]),f.useEffect(()=>{I.current=d},[d]),f.useEffect(()=>{U.current=j},[j]);const B=f.useCallback(G=>{u(G)},[]),D=f.useCallback(()=>{requestAnimationFrame(()=>{_.current&&_.current.focusAtEnd()})},[]),W=f.useCallback(G=>{S(G),l(!1),u(""),G&&O({symbol:G.symbol,name:G.name,image:G.image,darkImage:G.darkImage,url:G.url,exchange:G.exchange,country:G.country,currency:G.currency,change:G.change,currentPrice:G.currentPrice,changesPercentage:G.changesPercentage})},[O,S,l,u]),z=f.useCallback(G=>{const J=T.current;G.key==="ArrowDown"?(m(K=>K===null?0:Math.min(K+1,J-1)),D()):G.key==="ArrowUp"?(m(K=>K===null?0:Math.max(K-1,0)),D()):G.key==="Enter"&&I.current!==null&&(l(!1),W(U.current[I.current]))},[D,W]),$=f.useCallback(()=>{l(!1),m(null),window.removeEventListener("keydown",z)},[z]),X=f.useCallback(()=>{l(!0),window.addEventListener("keydown",z),window.addEventListener("click",$,{once:!0})},[$,z]),q=f.useCallback(G=>{G.stopPropagation()},[]);f.useEffect(()=>{x.prefetchQuery({queryKey:Lte("",y),queryFn:()=>b9({query:"",reason:p,country:y}),staleTime:0})},[x,y,p]),xf(()=>{window.removeEventListener("click",$),window.removeEventListener("keydown",z)});const Y=f.useCallback(()=>{l(!1),m(null)},[]);return o.jsxs("div",{className:V("relative",{"pt-one md:w-full md:max-w-[360px]":n==="header","w-full":n==="inline"}),onClick:q,children:[o.jsx(Wr,{type:"search",placeholder:t??E,isMobileUserAgent:!1,onFocus:X,onChange:B,className:V("!focus:ring-super/50 dark:focus:!ring-super/50 bg-subtler h-9 w-full !border-none !py-0",{"!bg-subtlest":n==="inline"},a),ref:_}),o.jsx(Je,{children:i&&o.jsx(eTe,{title:N,isLoadingSuggestions:b,items:A,value:c,focusedIndex:d,onScrimClick:Y,setIsFocused:l,setValue:u,type:n,hideRecent:s,openAsset:W})})]})});J5e.displayName="FinanceNavigationalSearchbar";const eTe=f.memo(({title:e,isLoadingSuggestions:t,items:n,value:r,focusedIndex:s,onScrimClick:a,setIsFocused:i,setValue:l,type:c,hideRecent:u,openAsset:d})=>{const{recentTickers:m,clearRecentTickers:p}=LH(),{isMobileStyle:h}=Ce(),{$t:g}=Z(),{inApp:y}=wl(),x=f.useCallback(()=>{p()},[p]),v=f.useMemo(()=>o.jsx("div",{className:"flex h-0 items-center",children:o.jsx(Te,{icon:It,size:"tiny",pill:!0,onClick:x,extraCSS:"-mr-sm opacity-50 hover:opacity-100",toolTip:g({defaultMessage:"Clear recents",id:"4k9F3xn5kg"})})}),[x,g]);return!n.suggestions?.length&&!t?null:o.jsxs(o.Fragment,{children:[o.jsx(ve.div,{className:V({"top-headerHeight bg-base fixed inset-x-0 bottom-0 md:hidden":c==="header",hidden:c==="inline"}),onClick:a,initial:{opacity:0},animate:{opacity:.8},exit:{opacity:0},transition:{ease:an,duration:.2}}),o.jsx(ve.div,{className:V("md:w-auto",{"top-headerHeight md:-inset-x-xl fixed inset-x-0 w-screen md:absolute md:top-full":c==="header","absolute inset-x-0 top-full":c==="inline"}),initial:{opacity:0,y:-10,scale:h?1:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:h?1:.98},transition:{ease:an,duration:.2},children:o.jsx(H,{variant:"raised",className:V("md:translate-y-xs relative flex flex-col overflow-hidden shadow-md",{"rounded-b-xl md:rounded-xl md:border md:shadow-xl":c==="header","rounded-xl border shadow-xl":c==="inline","-mt-one":y&&c==="header"}),children:n.suggestions&&n.suggestions.length>0?o.jsxs(o.Fragment,{children:[!!m.length&&r===""&&!u&&o.jsxs(o.Fragment,{children:[o.jsx(FL,{title:g({defaultMessage:"Recent",id:"iXpep1vGVo"}),trailing:v}),o.jsx("div",{className:"gap-xs p-sm flex flex-wrap",children:n.recentTickers.map((b,_)=>o.jsx(tTe,{ticker:b,isFocused:s===_,openAsset:d},`${b.symbol}-recent`))})]}),e?o.jsx(FL,{title:e}):o.jsx(H,{className:"border-b"}),n.suggestions.map((b,_)=>o.jsx(nTe,{ticker:b,openAsset:d,isFocused:s===_+n.recentTickers.length,setIsFocused:i,setValue:l},b.symbol+"suggestion"))]}):t?o.jsx("div",{className:"p-md flex items-center justify-center opacity-50",children:o.jsx(Zr,{size:14})}):n.suggestions?.length===0&&r!==""?o.jsx(F,{variant:"small",color:"light",className:"p-md text-center",children:g({defaultMessage:"No results",id:"jHJmjfxD4s"})}):null})})]})});eTe.displayName="NavigationalMenu";const FL=f.memo(({title:e,trailing:t})=>o.jsxs("div",{className:"bg-subtler gap-sm px-md py-sm flex items-center justify-between",children:[o.jsx(F,{variant:"tinyMono",color:"light",children:e}),t]}));FL.displayName="Header";const tTe=f.memo(({ticker:e,isFocused:t,openAsset:n})=>o.jsxs(H,{className:"pl-xs pr-sm group relative inline-flex cursor-pointer overflow-hidden rounded-full border py-0.5",as:"button",onClick:()=>n(e),children:[o.jsx(H,{className:V("absolute inset-0 rounded-full group-hover:opacity-50",t?"opacity-50":"opacity-0"),variant:"raisedOffset"}),o.jsxs("div",{className:"gap-xs relative flex items-center",children:[o.jsx(v5,{watchlistType:"FINANCE",image:e.image,imageDark:e.darkImage,alt:e.name,imageClassName:"!size-4 overflow-hidden rounded"}),o.jsx(F,{variant:"tiny",children:e.name}),o.jsx(F,{variant:"tinyMono",color:"light",children:e.symbol})]})]}));tTe.displayName="NavigationalSearchbarRecentItem";const nTe=f.memo(({ticker:e,isFocused:t,openAsset:n})=>{const{addRecentTicker:r}=LH(),s=f.useCallback(()=>{r(e),n(e)},[r,e,n]);return o.jsxs(H,{className:"gap-sm px-md py-sm group relative flex cursor-pointer appearance-none items-center justify-between border-b text-left last:border-b-0",onClick:s,as:"button",children:[o.jsx(H,{className:V("absolute inset-0 opacity-0 group-hover:opacity-50",t&&"opacity-50"),variant:"raisedOffset"}),o.jsxs("div",{className:"gap-md relative flex w-full items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex min-w-0 items-center",children:[o.jsx(v5,{watchlistType:"FINANCE",image:e.image,imageDark:e.darkImage,alt:e.name,className:"shrink-0 overflow-hidden rounded"}),o.jsxs("div",{className:"min-w-0",children:[o.jsx(F,{variant:"smallBold",className:"truncate",children:e.name}),o.jsx(F,{variant:"tinyMono",color:"light",children:o.jsx(mT,{symbol:e.symbol,exchange:e.exchange,country:e.country})})]})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[e.currentPrice&&e.currency?o.jsx(F,{variant:"tinyMono",color:"light",children:e.currentPrice.toLocaleString("en-US",{style:"currency",currency:e.currency})}):null,e.change?o.jsx(Jm,{change:e.change,variant:"tinyMono",includeIcon:!0}):null,o.jsx(le,{icon:Zn,size:"sm",className:"text-quiet -mr-xs"})]})]})]})});nTe.displayName="NavigationalSearchbarItem";const rTe=f.memo(({peers:e,addComparison:t})=>{const{$t:n}=Z(),r=f.useMemo(()=>e.map(s=>s)?.slice(0,5),[e]);return o.jsx(H,{className:"flex flex-col",children:o.jsx(H,{className:"z-10 w-full",children:o.jsx(J5e,{placeholder:n({defaultMessage:"Compare to...",id:"54IHNaS6Nj"}),hideRecent:!0,defaultSuggestions:r,type:"inline",onClick:s=>{s&&t({symbol:s.symbol,name:s.name,image:s.image,imageDark:s.darkImage,exchange:s.exchange,price:s.currentPrice,currency:s.currency,historicalChange:s.change,historicalPercentChange:s.changesPercentage})}})})})});rTe.displayName="FinanceStockHistoryChartComparisonSearch";const Z8t=R.memo(({children:e})=>o.jsx(Pr,{fallback:null,children:o.jsx("div",{className:"h-full",children:e})}));Z8t.displayName="CanonicalSidebarSection";const J8t=R.memo(({children:e,className:t})=>o.jsx("div",{className:V("mt-md pb-lg space-y-lg",t),children:e}));J8t.displayName="CanonicalSidebarColumn";const e9t=R.memo(({children:e,className:t})=>o.jsx(F,{variant:"smallBold",className:V("pb-sm px-sm",t),children:e}));e9t.displayName="CanonicalSidebarSectionTitle";const sTe=R.memo(({children:e,className:t})=>o.jsx(un,{className:V("py-sm",t),children:e}));sTe.displayName="CanonicalSidebarSectionContent";const t9t="-my-sm gap-x-sm grid w-full grid-cols-[1fr_min-content_min-content]",n9t=R.memo(e=>{const{isLoading:t,isStale:n,movers:r,skinny:s,approxItemCount:a,itemProps:i}=e;return o.jsx(sTe,{className:V("overflow-hidden duration-150",{"opacity-50":t}),children:o.jsxs(ve.div,{className:V(t9t,{"pointer-events-none invisible":t}),initial:{opacity:0,filter:"grayscale(0%)"},animate:{opacity:n?.75:1,filter:n?"grayscale(50%)":"grayscale(0%)"},exit:{opacity:0},transition:{duration:.5},"aria-hidden":t,children:[t&&o.jsx(r9t,{size:a??5,...e}),r?.map(l=>f.createElement(aTe,{...i,key:l.symbol,symbol:l.symbol,price:l.price,exchange:l.exchange??void 0,currency:l.currency??void 0,name:l.name??"",changesPercentage:l.changesPercentage,skinty:s,useImage:!s,image:l.image??void 0,imageDark:l.imageDark??void 0}))]},"top-mover")})});n9t.displayName="MoverTable";const aTe=e=>e.skinty?o.jsx(a9t,{...e}):o.jsx(s9t,{...e}),r9t=({size:e,...t})=>[...Array(e).fill(null)].map((n,r)=>o.jsx(aTe,{...t,symbol:"NVDA",price:110,currency:"USD",name:"XXX",changesPercentage:110,exchange:"XX",useImage:!t.skinny,skinty:t.skinny},r)),s9t=e=>o.jsx(ZSe,{symbol:e.symbol,className:"col-span-3 flex min-w-0",children:o.jsx(i9t,{...e})});function a9t({symbol:e,name:t,price:n,currency:r,changesPercentage:s,trailingComponent:a}){return o.jsxs(ZSe,{symbol:e,className:"col-span-3 grid grid-cols-subgrid",children:[o.jsx(XSe,{name:t,variant:"small"}),o.jsx(tp,{price:n,currency:r}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(Nw,{changesPercentage:s,includeIcon:!0,variant:"tiny",className:"w-full"}),a&&a({symbol:e})]})]})}const Nw=R.memo(({changesPercentage:e,background:t,variant:n,includeIcon:r=!1,className:s})=>o.jsx(Jm,{change:e,variant:n,includeIcon:r,background:t,mono:!1,className:s}));Nw.displayName="FinanceMoverChange";function i9t({symbol:e,price:t,currency:n,name:r,changesPercentage:s,useImage:a=!0,exchange:i,image:l,imageDark:c,trailingComponent:u,className:d}){return o.jsxs("div",{className:V("gap-sm flex w-full min-w-0 items-center",{"-ml-xs":!!a},d),children:[a&&o.jsx(B5,{symbol:e,src:l??"",srcDark:c}),o.jsxs(H,{className:"flex min-w-0 flex-1 flex-col",children:[o.jsxs(H,{className:"gap-md flex min-w-0 items-center justify-between",children:[o.jsx(XSe,{name:r}),o.jsx(tp,{price:t,currency:n})]}),o.jsxs(H,{className:"gap-sm flex items-center justify-between text-right",children:[o.jsx(F,{variant:"tinyMono",className:"whitespace-nowrap",color:"light",children:o.jsx(mT,{symbol:e,exchange:i})}),o.jsx(Nw,{changesPercentage:s,background:!1})]})]}),u&&u({symbol:e})]})}const DH=({shouldAnimate:e,animationDuration:t=1,animationName:n})=>{const r=f.useRef(0),s=f.useRef(null),[a,i]=f.useState(!1);f.useEffect(()=>{if(s.current&&(clearTimeout(s.current),s.current=null),e)i(!0),r.current=performance.now();else if(r.current>0){const m=(performance.now()-r.current)/(t*1e3)%1;s.current=setTimeout(()=>{i(!1),r.current=0,s.current=null},(1-m)*t*1e3)}else i(!1),r.current=0;return()=>{s.current&&(clearTimeout(s.current),s.current=null)}},[e,t]);const l=V(n,"fill-mode-both h-full w-auto shrink-0 transform-gpu will-change-transform"),c="h-full w-auto shrink-0 transform-gpu";return f.useMemo(()=>({_shouldAnimate:a,sequenceProps:{className:l,style:{animationDuration:`${t}s`}},staticProps:{className:c}}),[a,t,l])},tN=f.memo(({children:e,className:t,size:n,aspectRatio:r=1})=>o.jsx("div",{className:V("text-foreground flex shrink-0 items-center justify-start overflow-hidden",t),style:{height:n,aspectRatio:r},children:e}));tN.displayName="SpriteAnimationWrapper";const iTe=f.memo(({lineThickness:e,...t})=>o.jsxs("svg",{width:"2820",height:"74",viewBox:"0 0 2820 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[o.jsx("path",{d:"M29.6848 25.4603L48.3092 41.1547V64.3955L29.6848 49.0293M29.6848 25.4603L10.9465 41.2436V64.7306L29.6316 49.0293M29.6848 25.4603H3.35229V49.1113H10.3379M29.6848 25.4603H56.0553V49.1113H48.6552M29.6848 25.4603L10.9465 9.77618V24.7752M29.6848 25.4603L48.3092 9.77618V24.7591M29.6848 25.4603L29.6848 2.77313V24.382M29.6848 25.4603V49.1113M29.6848 25.4603V71.6755V49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M209.685 49.029L226.532 65.889V42.256L209.685 25.46L189.647 39.835L189.532 64.785L207.207 50.797",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M209.685 25.46L207.549 47.423V71.566L209.685 49.084M209.685 25.46L183.516 24.701V47.433L189.594 47.823M209.685 25.46L235.855 26.937V50.943L226.655 50.299M209.685 25.46L192.558 8.218V24.1M209.685 25.46L229.708 10.542V26.546M209.685 25.46L211.798 2.855V24.76M209.685 25.46V49.111M269.685 49.029L285.993 66.318V42.675L269.685 25.46L249.061 39.22V63.11L266.369 51.263",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M269.685 25.46L266.606 47.86V71.511L269.685 49.084M269.685 25.46L243.571 22.835V46.558L248.794 47.068M269.685 25.46L295.788 27.702V51.6L286.585 50.723M269.685 25.46L253.227 7.67V24.726M269.685 25.46L290.377 11.28V27.133M269.685 25.46L272.71 2.923V23.098M269.685 25.46V49.111M329.685 49.03L345.299 67.137V43.3L329.685 25.46L308.331 38.51V62.29L325.293 51.73",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M329.685 25.46L325.565 47.635V71.334L329.685 49.084M329.685 25.46L304.726 21.906V45.738L307.934 46.296M329.685 25.46L355.721 28.687V52.584L345.937 51.279M329.685 25.46L314.048 7.233V23.17M329.685 25.46L351.015 11.882V27.907M329.685 25.46L333.714 2.992V22.74M329.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 49.029L404.201 67.538L404.352 43.92L389.685 25.46L367.86 37.607V61.387L384.2 52.113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 25.46L384.523 47.3V71.156L389.685 49.084M389.685 25.46L363.9 20.922V44.754L367.262 45.322M389.685 25.46L415.508 29.78V54.723L404.436 51.688M389.685 25.46L375.021 6.57701V22.724",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 25.46L411.715 12.838V29.235M389.685 25.46L394.754 3.19701V22.344M389.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 49.029L463.072 68.404L463.215 44.53L449.685 25.46L427.054 36.842V60.595L442.826 52.515",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 25.46L443.117 47.129V70.924L449.685 49.084M449.685 25.46L424.143 19.8V44.76L426.599 44.184M449.685 25.46L475.28 30.683V54.58L463.735 52.113M449.685 25.46L436.176 5.976V22.356",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 25.46L472.414 13.727V30.403M449.685 25.46L456.192 3.539L456.33 21.994M449.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 49.029L521.673 68.656L521.879 45.127L509.685 25.46L486.385 35.611V59.501L501.389 52.742",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 25.46L501.711 46.575V70.418L509.685 49.084M509.685 25.46L484.477 18.515V42.481L485.621 42.781M509.685 25.46L534.754 32.077V55.906L522.17 52.482",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 25.46L497.606 5.374L497.3 22.124M509.685 25.46L533.189 14.79V31.499M509.685 25.46L517.651 3.84V21.876M509.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M569.685 49.03L580.306 69.736V45.91L569.685 25.46L545.564 34.271V58.134L559.659 52.802",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M569.685 25.46L560 46.322V69.98L569.685 49.084M569.685 25.46L545.086 17.121V40.813L545.119 40.824M569.685 25.46L594.185 33.444L594.238 57.334L580.581 52.76M569.685 25.46L559.096 4.69V21.458M569.685 25.46L593.98 16.31L594.119 33.415M569.685 25.46L579.4 4.36V21.53M569.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 49.03L638.275 70.78V46.58L629.685 25.46L604.774 32.603V56.576L617.836 52.61",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 25.46L618.29 45.14V69.27L629.685 49.084M629.685 25.46L605.937 15.508V32.273M629.685 25.46L653.478 35.112V58.838L638.453 52.696M629.685 25.46L621.102 3.98V21.387",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 25.46L654.664 17.842V41.941L653.7 42.217M629.685 25.46L641.361 5.084V21.818M629.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 49.029L696.089 71.244V47.065L689.685 25.46L664.074 30.744V54.552L675.799 52.019",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 25.46L676.002 44.34V68.094L689.685 49.084M689.685 25.46L667.092 14.721V29.977M689.685 25.46L712.323 36.944V60.698L696.503 52.601M689.685 25.46L683.353 3.433V21.908",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 25.46L715.303 19.948V43.855L712.658 44.398M689.685 25.46L703.459 6.06799V22.442M689.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 49.029L753.271 71.747V47.493L749.685 25.46L723.558 28.365V52.201L733.357 51.009",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 25.46L733.714 43.157V66.918L749.685 49.084M749.685 25.46L728.673 11.707V27.76M749.685 25.46L770.772 38.83V62.694L753.503 51.57M749.685 25.46L746.12 3.05V22.72",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 25.46L775.789 22.19V46.083L771.103 46.627",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M765.679 23.49V7.408L749.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 49.029L809.977 72.045L809.685 47.568V25.46H783.345V49.467L790.992 49.34",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 25.46L791.205 41.503V64.753L809.685 49.083M809.685 25.46L790.832 9.656V25.143M809.685 25.46L828.674 41.127V64.754L809.685 49.11M809.685 25.46L809.343 2.735",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 25.46L836.063 25.033V48.753L829.072 48.848M809.685 25.46L828.172 9.24001V25.106M809.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 49.03L866.405 71.53L866.065 47.01L869.685 25.46L843.558 22.37V46.186L848.429 46.717",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 25.46L848.696 38.865V62.789L866.042 51.462M869.685 25.46L854.76 7.497V23.406M869.685 25.46L885.633 43.096V66.959L869.685 49.111M869.685 25.46L873.235 3.132V22.9",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 25.46L895.82 28.304V52.088L885.776 50.944M869.685 25.46L890.726 11.618V27.652M869.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 49.028L922.004 70.99V46.713L929.685 25.46L904.439 18.734V42.44L906.137 42.884",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 25.46L906.294 35.826V59.59L921.769 52.64M929.685 25.46L917.34 5.48701L917.202 21.692M929.685 25.46L942.076 45.065V68.9L929.685 49.111M929.685 25.46L937.401 3.78801V21.63",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 25.46L954.747 31.858V55.698L942.558 52.481M929.685 25.46L953.068 14.763V31.197M929.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 49.03L977.622 69.38V45.26L989.685 25.46L966.203 15.125V31.444",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 25.46L964.683 32.077V56.008L977.63 52.423M989.685 25.46L981.627 4.01001V21.74M989.685 25.46L997.788 46.787V70.513L989.685 49.111M989.685 25.46L1001.81 5.23701V21.8",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 25.46L1013.17 35.468V59.279L998 52.711",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1013.48 42.742L1014.79 42.37V18.372L989.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 49.029L1034.75 66.743V43.12L1049.68 25.46L1028.76 11.652V27.197",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 25.46L1023.45 28.18V52.112L1033.53 50.949M1049.68 25.46L1046.22 3.026V22.739M1049.68 25.46L1053.2 47.361V71.388L1049.68 49.111M1049.68 25.46L1065.79 7.507V23.295",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 25.46L1070.59 38.786V62.78L1053.32 51.489",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1070.94 46.661L1075.96 46.101V22.391L1049.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1108.51 49.947L1090.23 64.228V40.474L1109.68 25.46L1091.89 8.78101V24.188",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1109.68 25.46L1084.75 24.27V48.175L1090.22 48.405M1109.68 25.46L1110.87 2.862L1110.71 24.747M1109.68 25.46L1108.57 47.033V71.716L1109.68 49.111M1109.68 25.46L1129.08 10.132V25.747",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1109.68 25.46L1127.46 41.848V65.568L1109.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1127.63 49.715L1135.96 50.034V26.328L1109.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1163.88 52.298L1147.7 61.414V37.531L1169.68 25.46L1155.29 6.59399V22.504",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1169.68 25.46L1143.85 20.662V44.552L1147.51 45.194M1169.68 25.46L1175.13 3.327L1174.79 22.093M1169.68 25.46L1164.62 47.033L1164.2 71.17L1169.68 49.111L1184.23 67.947V44.145L1169.68 25.46ZM1169.68 25.46L1191.87 12.948V28.924",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1184.43 51.662L1195.53 54.743V29.828L1169.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1220.25 52.825L1206.12 58.508V34.662L1229.68 25.46L1218.52 5.036V21.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1229.68 25.46L1204.75 17.627V41.49L1205.54 41.7M1229.68 25.46L1238.81 4.256L1238.64 21.334M1229.68 25.46L1220.73 46.404V70.24L1229.68 49.111L1240.89 69.588V45.758L1229.68 25.46ZM1229.68 25.46L1253.58 15.873V32.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1241.03 52.54L1254.41 56.678V32.863L1229.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 25.46L1264.5 32.081V55.974L1277.2 52.472M1289.68 25.46L1281.65 3.97V21.309M1289.68 25.46L1266.25 14.747V31.563M1289.68 25.46L1301.82 5.35V21.67",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 49.111L1277.57 69.174V45.365L1289.68 25.46L1314.76 18.389V42.272L1314.08 42.458",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 25.46L1297.73 46.798V70.544L1289.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1297.9 52.673L1313.16 59.44V35.488L1289.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 25.46L1323.79 29.631V53.515L1334.71 51.624M1349.68 25.46L1344.45 3.259V22.232M1349.68 25.46L1327.68 12.87V28.975M1349.68 25.46L1364.34 6.717V22.43",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 49.111L1335.01 67.943V44.053L1349.68 25.46L1375.61 20.877V44.761L1372.31 45.315",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 25.46L1354.73 47.317V71.173L1349.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1354.79 52.049L1371.71 61.573V37.785L1349.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 25.46L1383.5 27.452V51.428L1392.53 50.601M1409.68 25.46L1407.03 2.95801V23.477M1409.68 25.46L1389.23 11.092V26.894M1409.68 25.46L1426.44 7.97501V23.577",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 49.112L1393.01 66.522V42.522L1409.68 25.46L1435.92 23.037V46.975L1430.43 47.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 25.46L1412.44 47.563V71.501L1409.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1412.62 51.087L1430.15 63.391V39.466L1409.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 25.46L1443.5 25.626V49.323L1450.99 49.239M1469.68 25.46L1469.63 2.79401V2.86401M1469.68 25.46L1450.9 9.64301V25.562M1469.68 25.46L1488.17 9.37001V24.736",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 49.112L1451.33 65.182V41.237L1469.68 25.46L1496.16 25.142V48.807L1488.91 48.89",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 25.46L1470 47.754V71.638L1469.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 49.029L1488.52 64.754V40.916L1469.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 25.46L1503.5 23.874V47.758L1509.37 48.043M1529.68 25.46L1531.55 2.84801V23.465M1529.68 25.46L1512.36 8.33001V24.23M1529.68 25.46L1549.57 10.545V26.025",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 49.111L1509.84 63.869V40.061L1529.68 25.46L1556.02 26.756V50.694L1547.51 50.182",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 25.46L1527.94 47.918V71.474L1529.68 49.111V25.46ZM1529.68 25.46L1547.05 42.091V66.098L1529.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1589.68 25.46L1563.5 22.18V46.007L1568.24 46.554M1589.68 25.46L1593.34 3.09401V22.586M1589.68 25.46L1573.79 7.40001V23.212M1589.68 25.46L1610.79 11.584V27.55",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1585.87 51.573L1568.66 62.693V38.803L1589.68 25.46L1615.89 28.242V52.307L1606.05 51.107",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1589.68 25.46L1586.05 47.645V71.31L1589.68 49.111V25.46ZM1589.68 25.46L1605.57 43.075V67.082L1589.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1649.68 25.46L1623.96 20.819V44.572L1627.42 45.172M1649.68 25.46L1654.72 3.17599V21.958M1649.68 25.46L1635.13 6.55299V22.64M1649.68 25.46L1671.73 12.842V28.897",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1644.41 52.059L1627.59 61.463V37.628L1649.68 25.46L1675.55 29.8V54.747L1664.45 51.7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1649.68 25.46L1644.38 47.317V71.255L1649.68 49.111V25.46ZM1649.68 25.46L1664.25 44.019V67.929L1649.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1709.68 25.46L1684.35 19.59V43.25L1686.64 43.77M1709.68 25.46L1716.47 3.58701V21.618M1709.68 25.46L1696.43 5.87001V22.235M1709.68 25.46L1732.55 14.018V30.154",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1702.93 52.469L1686.93 60.424V36.452L1709.68 25.46L1735.25 31.14V54.76L1722.16 51.964",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1709.68 25.46L1702.88 47.085V70.9L1709.68 49.111V25.46ZM1709.68 25.46L1722.9 44.757V68.558L1709.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1769.68 25.46L1744.79 18.471V42.224L1746.02 42.562M1769.68 25.46L1777.81 3.99701V21.415M1769.68 25.46L1757.68 5.32301V21.924M1769.68 25.46L1793.25 15.056V31.36",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1761.32 52.76L1746.01 59.44V35.467L1769.68 25.46L1794.76 32.084V55.97L1781.58 52.363",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1769.68 25.46L1761.49 46.729V70.489L1769.68 49.111V25.46ZM1769.68 25.46L1781.63 45.222V69.146L1769.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1829.68 25.46L1805.1 17.39V41.163L1805.4 41.259M1829.68 25.46L1839 4.35201V21.335M1829.68 25.46L1818.87 4.703V21.707M1829.68 25.46L1853.83 15.986V32.568",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1820.07 52.787L1805.53 58.347V34.647L1829.68 25.46L1854.34 33.21V57.037L1841 52.75",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1829.68 25.46L1820.32 46.305V70.148L1829.68 49.111V25.46ZM1829.68 25.46L1840.49 45.66V69.638L1829.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1889.68 25.46L1865.62 16.478L1865.29 33.368M1889.68 25.46L1900.06 4.68V21.433M1889.68 25.46L1879.96 4.42V21.716M1889.68 25.46L1914.28 16.834V40.88L1914.24 40.895M1889.68 25.46L1865.16 33.554V57.444L1879.17 52.685",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1899.9 52.822L1913.91 57.912V34.058L1889.68 25.46L1879.29 45.868V69.806L1889.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1889.68 49.029L1899.43 69.806V46.015L1889.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1949.68 25.46L1925.99 15.695V31.95M1949.68 25.46L1961.1 5.063V21.494M1949.68 25.46L1940.84 4.092V21.5M1949.68 25.46L1974.68 17.79L1974.47 41.702L1973.9 41.872M1949.68 25.46L1924.76 32.706V56.596L1938.1 52.605",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1958.83 52.837L1973.52 58.814V34.733L1949.68 25.46L1938.23 45.615V69.41L1949.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1949.68 49.029L1958.5 70.298V46.37L1949.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2009.68 25.46L1986.3 14.757V31.231M2009.68 25.46L2021.92 5.44601V21.716M2009.68 25.46L2001.76 3.87401V21.862M2009.68 25.46L2034.73 18.584V42.522L2033.42 42.892M2009.68 25.46L1984.49 31.943V55.858L1997.18 52.461",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2017.96 52.797L2033.06 59.525V35.698L2009.68 25.46L1997.49 45.136V69.026L2009.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2009.68 49.029L2017.51 70.544V46.63L2009.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2069.68 25.46L2046.84 14.317V30.256M2069.68 25.46L2082.74 5.82901V21.933M2069.68 25.46L2062.64 3.71001V21.922M2069.68 25.46L2095.2 19.377V43.287L2092.94 43.803M2069.68 25.46L2044.28 31.26V55.065L2056.51 52.199",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2076.98 52.648L2092.73 60.29V36.218L2069.68 25.46L2056.73 44.713V68.576L2069.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2069.68 49.03L2076.74 70.79V47.018L2069.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2129.68 25.46L2107.19 13.74V29.597M2129.68 25.46L2143.31 6.211V22.141M2129.68 25.46L2123.43 3.464V21.942M2129.68 25.46L2155.41 20.033L2155.2 43.916L2152.65 44.436M2129.68 25.46L2103.94 30.658V54.463L2115.78 52.002",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2136.31 52.545L2152.21 60.783V36.874L2129.68 25.46L2115.95 44.384V68.274L2129.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2129.68 49.029L2135.9 70.968V47.032L2129.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2189.68 25.46L2167.64 13.069V28.892M2189.68 25.46L2204.01 6.43V22.382M2189.68 25.46L2184.31 3.3V22.194M2189.68 25.46L2215.62 20.58V44.518L2212.13 45.137M2189.68 25.46L2163.85 29.865L2163.94 53.862L2174.73 51.834",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2195.71 52.442L2211.87 61.385V37.448L2189.68 25.46L2175.33 44.111V67.974L2189.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2189.68 49.029L2195.25 71.118V47.114L2189.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2249.68 25.46L2227.97 12.556V28.31M2249.68 25.46L2264.62 6.676V22.45M2249.68 25.46L2244.76 3.08V22.463M2249.68 25.46L2275.62 21.072V45.229L2271.85 45.793M2249.68 25.46L2223.76 29.346L2223.94 53.233L2234.52 51.539",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2254.75 52.153L2271.51 61.713V37.913L2249.68 25.46L2234.72 43.728V67.618L2249.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2249.68 49.029L2254.55 71.146V47.14L2249.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2309.68 25.46L2288.37 12.072V27.909M2309.68 25.46L2325.14 7.196V22.866M2309.68 25.46L2305.5 3.026V22.507M2309.68 25.46L2335.72 21.7L2335.62 45.502L2331.57 46.066M2309.68 25.46L2284.77 28.853V52.66L2294.05 51.244",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2314.36 51.989L2331.05 62.26V38.46L2309.68 25.46L2294.2 43.51V67.29L2309.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2309.68 49.029L2313.94 71.378V47.36L2309.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2348.71 27.302V11.671L2369.68 25.46L2385.56 7.414V23.034",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2369.68 25.46L2366.04 2.944V23.073M2369.68 25.46L2395.82 22.11L2395.62 46.158L2391.12 46.671M2369.68 25.46L2343.55 28.222V52.167L2353.56 50.996",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2374.76 51.665L2390.75 62.643V38.813L2369.68 25.46L2353.78 43.14V67.003L2369.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2369.68 49.029L2373.21 71.378V47.332L2369.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2429.68 25.46L2409.04 11.326V26.962M2429.68 25.46L2446.08 7.66V23.246M2429.68 25.46L2426.62 2.944V23.177M2429.68 25.46L2455.93 22.548V46.568L2450.64 47.08M2429.68 25.46L2403.43 27.948V51.62L2413.16 50.69",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2433.12 51.449L2450.35 63.189V39.251L2429.68 25.46L2413.32 42.771V66.69L2429.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2429.68 49.03L2432.71 71.46V47.332L2429.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2489.68 25.46L2469.4 11.01V26.644M2489.68 25.46L2506.48 7.88001V23.456M2489.68 25.46L2487.23 2.91701V24.713M2489.68 25.46L2516 23.095V46.98L2510.45 47.43M2489.68 25.46L2463.4 27.429L2463.43 51.292L2472.71 50.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2492.62 51.175L2510.11 63.49V39.415L2489.68 25.46L2472.91 42.553V66.457L2489.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2489.68 49.029L2492.24 71.474V47.4L2489.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2549.68 25.46L2529.67 10.693V26.371M2549.68 25.46L2566.81 8.098V24.768M2549.68 25.46L2547.67 2.821V24.777M2549.68 25.46L2576.07 23.45V47.39L2570.31 47.765M2549.68 25.46L2523.37 27.019L2523.43 50.964L2532.28 50.339",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2551.97 50.759L2569.78 64.726V39.606L2549.68 25.46L2532.56 42.252V66.142L2549.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2549.68 49.029L2551.77 71.515V47.333L2549.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2609.68 25.46L2589.92 10.392V25.937M2609.68 25.46L2627.12 8.31701V23.877M2609.68 25.46L2608.05 2.80701V23.983M2609.68 25.46L2636.14 23.888V47.744L2629.74 48.075M2609.68 25.46L2583.34 26.663L2583.38 50.526L2591.88 50.069",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2611.76 50.677L2629.29 63.873V40.071L2609.68 25.46L2592.23 42.074V65.971L2609.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2609.68 49.029L2611.33 71.542V47.305L2609.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2669.68 25.46L2650.26 10.242V25.778M2669.68 25.46L2687.45 8.56301V24.107M2669.68 25.46L2668.45 2.79401V24.457M2669.68 25.46L2696.14 24.161V48.127L2689.77 48.364M2669.68 25.46L2643.32 26.335L2643.33 50.253L2651.65 49.893",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2671.01 50.121L2689.05 63.9V40.235L2669.68 25.46L2651.95 41.828V65.698L2669.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2669.68 49.029L2670.93 71.556V47.387L2669.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2729.68 25.46L2710.5 9.982V25.512M2729.68 25.46L2747.69 8.782V24.307M2729.68 25.46L2728.87 2.78V24.433M2729.68 25.46L2756.14 24.49V48.236L2749.71 48.449M2729.68 25.46L2703.29 25.782V49.597L2711.26 49.45",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2730.41 49.695L2748.94 64.53V40.59L2729.68 25.46L2711.6 41.705V65.493L2729.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2729.68 49.029L2730.61 71.638V47.606L2729.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2789.68 25.46L2770.67 9.72201V25.286M2789.68 25.46L2807.94 9.00001V24.505M2789.68 25.46L2789.16 2.76601V24.416M2789.68 25.46L2816.14 24.763V48.673L2809.16 48.789M2789.68 25.46H2763.29V49.337L2771.24 49.269",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2790.41 49.7L2808.83 64.72V40.727L2789.68 25.46L2771.41 41.493V65.383L2789.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2789.68 49.029L2790.25 71.611V47.742L2789.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M89.6848 25.4603L108.309 41.4828V65.1065L89.6848 49.0293M89.6848 25.4603L70.5359 40.7925L70.5892 64.669L89.6316 49.0293M89.6848 25.4603L89.0273 47.9151V71.6481L89.6848 49.0839M89.6848 25.4603L63.4071 24.7588V48.5542L70.0911 48.6959M89.6848 25.4603L115.988 25.7611V49.5761L108.665 49.4467M89.6848 25.4603L71.3722 9.03792L71.2884 24.5988M89.6848 25.4603L108.796 9.74877V25.4474M89.6848 25.4603L90.293 2.75943V24.3785M89.6848 25.4603V49.1113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M149.676 25.4488L167.472 41.872L167.285 65.449L149.676 49.0179M149.676 25.4488L130.087 40.3914V64.2269L148.148 50.1661M149.676 25.4488L148.969 47.3567V71.6093L149.676 49.0725M149.676 25.4488L123.453 24.2184V47.9959L129.828 48.2643M149.676 25.4488L175.913 26.3511V50.1388L167.428 49.8028M149.676 25.4488L131.911 8.67098V24.5132M149.676 25.4488L169.243 10.0381V26.0706M149.676 25.4488L150.984 2.73438V24.3846M149.676 25.4488V49.0999",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})]}));iTe.displayName="Sequence";const oTe=f.memo(({lineThickness:e,...t})=>o.jsx("svg",{width:"60",height:"74",viewBox:"0 0 60 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:o.jsx("path",{d:"M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})}));oTe.displayName="Static";const o9t=e=>{switch(e){case"asIcon":return 4.7;case"normal":return 3.3}},jw=f.memo(({size:e=32,shouldAnimate:t=!0,lineThickness:n="asIcon",className:r})=>{const{_shouldAnimate:s,sequenceProps:a,staticProps:i}=DH({shouldAnimate:t,animationDuration:1,animationName:"animate-pplxIndicator"}),l=o9t(n);return o.jsx(tN,{size:e,className:r,aspectRatio:60/74,children:s?o.jsx(iTe,{lineThickness:l,...a}):o.jsx(oTe,{lineThickness:l,...i})})});jw.displayName="MarkSpinner";const lTe=Object.freeze(Object.defineProperty({__proto__:null,MarkSpinner:jw},Symbol.toStringTag,{value:"Module"})),UL="shadow-subtle rounded-lg border backdrop-blur-sm bg-white/75 dark:bg-subtlest",cTe=f.memo(()=>{const[e,t]=f.useState(!1),[n,r]=f.useState({x:0,y:0}),[s,a]=f.useState(!1),i=f.useCallback(()=>{t(!0)},[t]),l=f.useCallback(()=>{t(!1),r({x:0,y:0})},[t]),c=f.useCallback(m=>{const p=m.currentTarget.getBoundingClientRect(),h=p.width/2,g=p.height/2,y=m.clientX-p.left,x=m.clientY-p.top,v=y-h,b=x-g,_=150,w=Math.sqrt(v*v+b*b),C=Math.max(0,1-w/_)*.15,S=v*C,E=b*C;t(!0),r({x:S,y:E})},[t,r]),u=f.useCallback(m=>{m.key==="PrintScreen"&&a(!0),(m.metaKey||m.ctrlKey)&&m.shiftKey&&a(!0)},[a]),d=f.useCallback(()=>{a(!1)},[a]);return f.useEffect(()=>(document.addEventListener("keydown",u),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",d)}),[u,d]),o.jsxs(H,{className:V("relative flex h-full items-center justify-center",UL),variant:"transparent",onMouseLeave:l,onMouseEnter:c,onMouseMove:c,onMouseOut:l,onMouseDown:i,onMouseUp:l,children:[o.jsx(H,{className:"flex h-full items-center justify-center",children:o.jsx(ve.div,{animate:{x:n.x,y:n.y},transition:{type:"spring",ease:"easeInOut",stiffness:200,damping:40},className:"flex aspect-square h-full items-center justify-center",children:o.jsx(jw,{size:20,shouldAnimate:e,className:"text-super"})})}),s&&o.jsx("div",{className:"hidden md:block",children:o.jsx(za,{variant:"text",className:"-ml-1 h-4 w-auto pr-[10px] [&>svg]:h-4 [&>svg]:w-auto"})})]})});cTe.displayName="Mark";const Cie=({children:e,animationId:t,showChange:n,absoluteChange:r,percentChange:s,currency:a,period:i,setPeriod:l,isLoading:c,periods:u})=>{const{isMobileStyle:d}=Ce(),m=d?"tinyRegular":"small",p=d?35:38;return o.jsx(un,{className:"overflow-hidden",children:o.jsxs(H,{className:"gap-y-sm md:gap-y-lg flex flex-col justify-between",children:[o.jsxs("div",{className:"p-md gap-sm z-[1] flex flex-wrap items-stretch justify-between md:flex-row",children:[o.jsxs("div",{className:"gap-x-sm flex h-full items-stretch",style:{height:p},children:[o.jsx(cTe,{}),o.jsx("div",{className:"gap-x-sm flex items-stretch justify-center",children:o.jsx(Lbt,{id:t,periods:u,period:i,setPeriod:l,className:UL})})]}),n&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:o.jsxs(H,{className:V("gap-x-sm px-sm flex items-center transition-all duration-500",UL),variant:"transparent",style:{height:p},children:[r&&o.jsx(tp,{price:r,currency:a??void 0,sign:!0,variant:m}),s&&o.jsx(Nw,{changesPercentage:s,background:!1,includeIcon:!0,variant:m})]})})]}),o.jsx(ve.div,{initial:{opacity:1},animate:{opacity:c?.5:1},transition:{duration:.5,delay:.5},children:e})]})})},uTe=({price:e,currency:t,change:n,percentChange:r,children:s,className:a,variant:i})=>{const l=f.useMemo(()=>({style:t?"currency":"decimal",currency:t??void 0,minimumFractionDigits:e<1e3?2:0,maximumFractionDigits:2}),[t,e]),c=i==="sm";return o.jsxs(H,{className:V("flex w-full flex-col",a),children:[o.jsxs(H,{className:"gap-sm flex w-full items-center justify-between",children:[o.jsx(F,{variant:c?"baseSemi":"entry-title-200",className:"m-0 p-0",children:o.jsx(No,{value:e,format:l,animated:!0})}),o.jsxs(H,{className:"gap-xs flex items-center",children:[!c&&o.jsx(tp,{price:n??0,currency:t,sign:!0,variant:c?"tiny":"base"}),o.jsx(Nw,{changesPercentage:r??0,variant:i==="sm"?"tiny":"base",background:!1,includeIcon:!0})]})]}),o.jsx(H,{className:"gap-sm flex items-center justify-between",children:s})]})},dTe="flex items-center gap-xs truncate min-w-0",fTe="size-[.8rem] min-w-[.8rem] max-w-[.8rem] translate-y-[-.05rem] text-max",mTe=R.memo(({price:e,currency:t,change:n,percentChange:r,timestamp:s,open:a,closes:i,timezone:l,variant:c})=>{const{$t:u,locale:d}=Z(),m=f.useMemo(()=>{const p=s?new Date(s*1e3).toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",day:"numeric",month:"short",second:c==="lg"?"2-digit":void 0,timeZoneName:"short",timeZone:l}):null;return!a&&i?c==="sm"?p:u({defaultMessage:"At close: {time}",id:"Fib7mn4gfB"},{time:p}):p},[s,d,a,u,i,l,c]);return o.jsx(uTe,{price:e,currency:t,change:n,percentChange:r,variant:c,children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:dTe,children:[m,i&&o.jsx(Oue,{className:fTe})]})})});mTe.displayName="StockPriceBig";const pTe=R.memo(({price:e,currency:t,change:n,percentChange:r,timestamp:s,timezone:a,variant:i})=>{const{$t:l,locale:c}=Z(),u=new Date(s*1e3).toLocaleTimeString(c,{hour:"numeric",minute:"2-digit",day:"numeric",month:"short",second:i==="lg"?"2-digit":void 0,timeZoneName:i==="lg"?"short":void 0,timeZone:a}),d=i==="sm"?u:l({defaultMessage:"After hours: {time}",id:"elF1mrf0Os"},{time:u});return o.jsx(uTe,{price:e,currency:t,change:n,percentChange:r,variant:i,children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:dTe,children:[d,o.jsx(G7e,{className:fTe})]})})});pTe.displayName="AfterHoursPriceBig";const Sie=({children:e,variant:t})=>o.jsx(un,{className:V({"flex-1":t==="sm"},"px-md py-sm rounded-md border md:min-w-[250px] md:flex-none"),children:e}),hTe=R.memo(({quote:e})=>{const t=!!e.afterHoursPrice;Sp("mini-graphs");const{isMobileStyle:n}=Ce(),r=n&&t?"sm":"lg",s=f.useMemo(()=>o.jsx(mTe,{variant:r,price:e.price,currency:e.currency,change:e.change,percentChange:e.changesPercentage,timestamp:e.timestamp,open:e.isMarketOpen,closes:e.exchange!=="CRYPTO",timezone:e.exchangeTimezone??void 0}),[e,r]),a=f.useMemo(()=>o.jsx(pTe,{price:e.afterHoursPrice,change:e.afterHoursChange,percentChange:e.afterHoursPercentChange,timestamp:e.afterHoursTimestamp,currency:e.currency,timezone:e.exchangeTimezone??void 0,variant:r}),[e,r]);return o.jsxs(H,{className:"gap-sm flex flex-wrap",children:[o.jsx(Sie,{variant:r,children:s}),t&&o.jsx(Sie,{variant:r,children:a})]})});hTe.displayName="BeforeAfterHours";const l9t=[],Eie="1y",c9t=7,BL=Cwe.filter(e=>e.value!=="5d"),u9t=(e,t,n,r)=>{const s=xt(),a=f.useCallback(async l=>{const[c,u]=await Promise.all([s.ensureQueryData({queryKey:mb({symbol:e}),queryFn:()=>Zd({symbol:e}),staleTime:1e4}),s.ensureQueryData({queryKey:mb({symbol:e,historyPeriod:l,withHistory:!0,historyAfterHours:!0}),queryFn:()=>Zd({symbol:e,historyPeriod:l,withHistory:!0,historyAfterHours:!0}),staleTime:6e4})]);return{quote:{...c,history:u?.history,historicalChange:u?.historicalChange,historicalPercentChange:u?.historicalPercentChange,historicalPreviousClose:u?.historicalPreviousClose},period:l}},[e,s]),i=We({queryKey:["finance/quote-history",e,t],queryFn:async()=>{const l=await a(t);return!l?.quote?.history&&t!==Eie?await a(Eie):l},staleTime:0,refetchOnMount:!0,refetchInterval:1e3*10,placeholderData:l=>{if(l)return l;if(r)return{quote:r,period:t}},enabled:n});return{isLoading:i.isLoading,quote:i.data?.quote??void 0,period:i.data?.period??t}},d9t=(e,t,n)=>{const r=xt(),s=We({queryKey:["finance/comparison",t,...e],queryFn:async()=>{const a=t,i=e.map(async u=>await r.ensureQueryData({queryKey:mb({symbol:u,historyPeriod:t,withHistory:!0,historyAfterHours:!1}),queryFn:()=>Zd({symbol:u,historyPeriod:t,withHistory:!0,historyAfterHours:!1}),staleTime:3e4}));return{quotes:(await Promise.all(i))?.filter(u=>!!u)?.map((u,d)=>({...u,color:o1(d)}))??[],period:a}},placeholderData:mf,refetchInterval:1e3*10,enabled:n});return{isLoading:s.isLoading,quotes:s.data?.quotes??l9t,period:s.data?.period??t}},f9t=e=>{const t=Ft(),n=wp(t),r=Ut();f.useEffect(()=>{t&&n&&t!==n&&!r?.get("comparing")&&e([])},[t,n,r,e])},m9t=(e,t,n)=>{const r=Ut(),s=_t(),a=f.useCallback(C=>{const S=new URLSearchParams(window.location.search);S.set("comparing",C.join(",")),s.replace(`?${S.toString()}`)},[s]),[i,l]=f.useState(r?.get("comparing")?.split(",")??n??[]),c=f.useMemo(()=>[e,...i.filter(C=>C!==e)],[i,e]),u=c.length>1,[d,m]=f.useState({}),p=f.useCallback(C=>{C.symbol&&l(S=>{const E=[...new Set([e,...S,C.symbol])];return E.length>c9t&&E.splice(-2,1),a(E),m(M=>({...Object.fromEntries(Object.entries(M).filter(([k])=>E.includes(k))),[C.symbol]:C})),E})},[l,m,e,a]),h=f.useCallback(C=>{l(S=>{const E=S.filter(M=>M!==C);return a(E),E}),m(S=>{const E={...S};return delete E[C],E})},[l,m,a]),g=f.useCallback(()=>{l([])},[]);f9t(l);const y=g9t(c,t),x=d9t(c,y,u),{comparisonQuotes:v,setHoveredComparisons:b}=h9t(c,x.quotes,d),_=p9t(e,c);return{peers:f.useMemo(()=>_.data.filter(C=>!c.includes(C.symbol)),[_.data,c]),isComparing:u,quotes:x.quotes,comparisonPeriod:x.period??y,comparisonQuotesLoading:x.isLoading,comparisonQuotes:v,setHoveredComparisons:b,addComparison:p,removeComparison:h,resetComparisons:g}},p9t=(e,t)=>{const{data:n,isLoading:r,isPlaceholderData:s}=We({queryKey:obt(e,!0),queryFn:()=>lbt({symbol:e,index:!0}),placeholderData:mf});return{data:f.useMemo(()=>n?.filter(i=>!t.some(l=>l===i.symbol)&&i.symbol!==e)??[],[n,t,e]),isLoading:r||s}},h9t=(e,t,n)=>{const[r,s]=f.useState([]),a=f.useMemo(()=>e.map((u,d)=>{const m=t.find(h=>h.symbol===u)??n[u];return m?{symbol:m.symbol,name:m.name,image:m.image,imageDark:m.imageDark,exchange:m.exchange,currency:m.currency||void 0,price:m.price,exchangeTimezone:m.exchangeTimezone,historicalChange:m.historicalChange,historicalPercentChange:m.historicalPercentChange,color:o1(d)}:{symbol:u,loading:!0,color:o1(d)}}),[e,t,n]),i=f.useMemo(()=>r.map((c,u)=>({...c,color:o1(u)})),[r]);return{comparisonQuotes:i.length>0?i:a,setHoveredComparisons:s}},g9t=(e,t)=>e.length&&!BL.some(n=>n.value===t)?BL[0].value:t,y9t=e=>{const t=Ut(),n=_t(),[r,s]=f.useState(t?.get("period")??e??"1d"),a=f.useCallback(i=>{const l=new URLSearchParams(window.location.search);l.set("period",i),n.replace(`?${l.toString()}`),s(i)},[s,n]);return{period:r,setPeriod:a}},x9t=({symbol:e,comparisons:t,initialQuote:n,initialPeriod:r,search:s=!0,price:a=!0,profile:i=!0})=>{const{isMobileStyle:l}=Ce(),{period:c,setPeriod:u}=y9t(r),[d,m]=f.useState(null),p=l?null:d,h=m9t(e,c,t),g=u9t(e,c,!h.isComparing,n),{$t:y}=Z();return o.jsxs(o.Fragment,{children:[a&&o.jsx(hTe,{quote:g.quote}),h.isComparing?o.jsx(Cie,{animationId:h.comparisonQuotes.map(x=>x.symbol).join("-"),showChange:!1,period:c,periods:BL,setPeriod:u,isLoading:h.comparisonQuotesLoading,children:o.jsx(K8t,{quotes:h.quotes,period:h.comparisonPeriod,focused:p,setHoveredComparisons:h.setHoveredComparisons})}):o.jsx(Cie,{animationId:e,showChange:!!(g?.quote?.historicalChange||g?.quote?.historicalPercentChange),periods:Cwe,absoluteChange:g?.quote?.historicalChange,percentChange:g?.quote?.historicalPercentChange,currency:g?.quote?.currency,period:c,setPeriod:u,isLoading:g.isLoading,children:o.jsx(O8t,{quote:g.quote,period:g.period})}),s&&o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx("div",{className:"w-full",children:o.jsx(rTe,{peers:h.peers,addComparison:h.addComparison})}),h.isComparing&&o.jsx(Te,{onClick:h.resetComparisons,size:"tiny",pill:!0,text:y({defaultMessage:"Reset",id:"jm/spnRSn+"})})]}),o.jsx(na,{className:"-mt-sm",children:h.isComparing&&o.jsx(is,{className:"py-sm",children:o.jsx(X5e,{comparisons:h.comparisonQuotes,removeComparison:h.removeComparison,setFocused:m})})}),i&&o.jsx(I5e,{quote:g.quote,type:g.quote?.exchange})]})},VL=[{currencyCode:"AED",type:"fiat",currency:ee({defaultMessage:"United Arab Emirates dirham",id:"u/noLkGMVn"}),countryCode:"AE",symbol:"."},{currencyCode:"AFN",type:"fiat",currency:ee({defaultMessage:"Afghan afghani",id:"HbCn83pcga"}),countryCode:"AF",symbol:""},{currencyCode:"ALL",type:"fiat",currency:ee({defaultMessage:"Albanian lek",id:"/il1Hf7GWO"}),countryCode:"AL",symbol:"L"},{currencyCode:"AMD",type:"fiat",currency:ee({defaultMessage:"Armenian dram",id:"Sab4a7TKLH"}),countryCode:"AM",symbol:""},{currencyCode:"ARS",type:"fiat",currency:ee({defaultMessage:"Argentine peso",id:"52+/SFD8VZ"}),countryCode:"AR",symbol:"$"},{currencyCode:"AUD",type:"fiat",currency:ee({defaultMessage:"Australian dollar",id:"iWILeLEVYR"}),countryCode:"AU",symbol:"$"},{currencyCode:"AWG",type:"fiat",currency:ee({defaultMessage:"Aruban florin",id:"BEGfukujzF"}),countryCode:"AW",symbol:""},{currencyCode:"BAM",type:"fiat",currency:ee({defaultMessage:"Bosnia and Herzegovina convertible mark",id:"b09sYvQVre"}),countryCode:"BA",symbol:"KM"},{currencyCode:"BBD",type:"fiat",currency:ee({defaultMessage:"Barbadian dollar",id:"VlWuwU66Ue"}),countryCode:"BB",symbol:"$"},{currencyCode:"BDT",type:"fiat",currency:ee({defaultMessage:"Bangladeshi taka",id:"nzdEshqHWS"}),countryCode:"BD",symbol:""},{currencyCode:"BGN",type:"fiat",currency:ee({defaultMessage:"Bulgarian lev",id:"IDTjXBqV4N"}),countryCode:"BG",symbol:""},{currencyCode:"BHD",type:"fiat",currency:ee({defaultMessage:"Bahraini dinar",id:"eq8qHJx0kM"}),countryCode:"BH",symbol:".."},{currencyCode:"BIF",type:"fiat",currency:ee({defaultMessage:"Burundian franc",id:"o/KpEtmYi4"}),countryCode:"BI",symbol:"FBu"},{currencyCode:"BMD",type:"fiat",currency:ee({defaultMessage:"Bermudian dollar",id:"kO0KeiZ+IN"}),countryCode:"BM",symbol:"$"},{currencyCode:"BND",type:"fiat",currency:ee({defaultMessage:"Brunei dollar",id:"GRkirfzc48"}),countryCode:"BN",symbol:"$"},{currencyCode:"BOB",type:"fiat",currency:ee({defaultMessage:"Bolivian boliviano",id:"l7UUEAhjL1"}),countryCode:"BO",symbol:"Bs."},{currencyCode:"BRL",type:"fiat",currency:ee({defaultMessage:"Brazilian real",id:"x+BZGn5rek"}),countryCode:"BR",symbol:"R$"},{currencyCode:"BSD",type:"fiat",currency:ee({defaultMessage:"Bahamian dollar",id:"u9nfam/El1"}),countryCode:"BS",symbol:"$"},{currencyCode:"BTN",type:"fiat",currency:ee({defaultMessage:"Bhutanese ngultrum",id:"EbzIZvY2C3"}),countryCode:"BT",symbol:"Nu."},{currencyCode:"BWP",type:"fiat",currency:ee({defaultMessage:"Botswana pula",id:"TvRjxCQudG"}),countryCode:"BW",symbol:"P"},{currencyCode:"BZD",type:"fiat",currency:ee({defaultMessage:"Belize dollar",id:"tnMfFVDwiX"}),countryCode:"BZ",symbol:"$"},{currencyCode:"CAD",type:"fiat",currency:ee({defaultMessage:"Canadian dollar",id:"L4ftYFzYiG"}),countryCode:"CA",symbol:"$"},{currencyCode:"CDF",type:"fiat",currency:ee({defaultMessage:"Congolese franc",id:"6DNXExdai2"}),countryCode:"CD",symbol:"FC"},{currencyCode:"CHF",type:"fiat",currency:ee({defaultMessage:"Swiss franc",id:"113zTX3mKi"}),countryCode:"CH",symbol:"Fr."},{currencyCode:"CLP",type:"fiat",currency:ee({defaultMessage:"Chilean peso",id:"tLhKy6Swhn"}),countryCode:"CL",symbol:"$"},{currencyCode:"CNH",type:"fiat",currency:ee({defaultMessage:"Chinese yuan (offshore)",id:"wAShedQ5+o"}),countryCode:"CN",symbol:""},{currencyCode:"CNY",type:"fiat",currency:ee({defaultMessage:"Chinese yuan",id:"/sleu+8FUs"}),countryCode:"CN",symbol:""},{currencyCode:"COP",type:"fiat",currency:ee({defaultMessage:"Colombian peso",id:"KR2NhLe6wO"}),countryCode:"CO",symbol:"$"},{currencyCode:"CRC",type:"fiat",currency:ee({defaultMessage:"Costa Rican coln",id:"OLgF3rrfev"}),countryCode:"CR",symbol:""},{currencyCode:"CUP",type:"fiat",currency:ee({defaultMessage:"Cuban peso",id:"ua/JslQGFc"}),countryCode:"CU",symbol:"$"},{currencyCode:"CVE",type:"fiat",currency:ee({defaultMessage:"Cape Verdean escudo",id:"gg39Xd9NoM"}),countryCode:"CV",symbol:"$"},{currencyCode:"CYP",type:"fiat",currency:ee({defaultMessage:"Cypriot pound",id:"xJn7heFKbn"}),countryCode:"CY",symbol:""},{currencyCode:"CZK",type:"fiat",currency:ee({defaultMessage:"Czech koruna",id:"xpMdKvcamT"}),countryCode:"CZ",symbol:"K"},{currencyCode:"DJF",type:"fiat",currency:ee({defaultMessage:"Djiboutian franc",id:"WtP9AoFz2A"}),countryCode:"DJ",symbol:"Fdj"},{currencyCode:"DKK",type:"fiat",currency:ee({defaultMessage:"Danish krone",id:"Xy5G3y8jOw"}),countryCode:"DK",symbol:"kr"},{currencyCode:"DOP",type:"fiat",currency:ee({defaultMessage:"Dominican peso",id:"2i/KFaPpw5"}),countryCode:"DO",symbol:"RD$"},{currencyCode:"DZD",type:"fiat",currency:ee({defaultMessage:"Algerian dinar",id:"6sTpFM3olk"}),countryCode:"DZ",symbol:""},{currencyCode:"EGP",type:"fiat",currency:ee({defaultMessage:"Egyptian pound",id:"PxOcvtceh8"}),countryCode:"EG",symbol:""},{currencyCode:"ETB",type:"fiat",currency:ee({defaultMessage:"Ethiopian birr",id:"6VjP5tvzWg"}),countryCode:"ET",symbol:"Br"},{currencyCode:"EUR",type:"fiat",currency:ee({defaultMessage:"Euro",id:"Zz6d8XMgGD"}),countryCode:"EU",symbol:""},{currencyCode:"FJD",type:"fiat",currency:ee({defaultMessage:"Fijian dollar",id:"w33lAGgTZS"}),countryCode:"FJ",symbol:"$"},{currencyCode:"GBP",type:"fiat",currency:ee({defaultMessage:"Pound sterling",id:"uU25lEI6GM"}),countryCode:"GB",symbol:""},{currencyCode:"GEL",type:"fiat",currency:ee({defaultMessage:"Georgian lari",id:"m4gS106RpO"}),countryCode:"GE",symbol:""},{currencyCode:"GHS",type:"fiat",currency:ee({defaultMessage:"Ghanaian cedi",id:"2k7sXvkoLP"}),countryCode:"GH",symbol:""},{currencyCode:"GMD",type:"fiat",currency:ee({defaultMessage:"Gambian dalasi",id:"zT8nD3rOKp"}),countryCode:"GM",symbol:"D"},{currencyCode:"GNF",type:"fiat",currency:ee({defaultMessage:"Guinean franc",id:"kZk7wkuU9a"}),countryCode:"GN",symbol:"FG"},{currencyCode:"GTQ",type:"fiat",currency:ee({defaultMessage:"Guatemalan quetzal",id:"0eSFsz1h5U"}),countryCode:"GT",symbol:"Q"},{currencyCode:"GYD",type:"fiat",currency:ee({defaultMessage:"Guyanese dollar",id:"pvTNSDiMVb"}),countryCode:"GY",symbol:"$"},{currencyCode:"HKD",type:"fiat",currency:ee({defaultMessage:"Hong Kong dollar",id:"tSeK2eAo7a"}),countryCode:"HK",symbol:"$"},{currencyCode:"HNL",type:"fiat",currency:ee({defaultMessage:"Honduran lempira",id:"u1All4YZ/M"}),countryCode:"HN",symbol:"L"},{currencyCode:"HRK",type:"fiat",currency:ee({defaultMessage:"Croatian kuna",id:"m4/bILMdtE"}),countryCode:"HR",symbol:"kn"},{currencyCode:"HTG",type:"fiat",currency:ee({defaultMessage:"Haitian gourde",id:"fYPjhPHJw5"}),countryCode:"HT",symbol:"G"},{currencyCode:"HUF",type:"fiat",currency:ee({defaultMessage:"Hungarian forint",id:"Bhl6SxOjG0"}),countryCode:"HU",symbol:"Ft"},{currencyCode:"IDR",type:"fiat",currency:ee({defaultMessage:"Indonesian rupiah",id:"JnQBDoCEpL"}),countryCode:"ID",symbol:"Rp"},{currencyCode:"ILS",type:"fiat",currency:ee({defaultMessage:"Israeli new shekel",id:"IxD6vfIMsj"}),countryCode:"IL",symbol:""},{currencyCode:"INR",type:"fiat",currency:ee({defaultMessage:"Indian rupee",id:"XnsufP9pQC"}),countryCode:"IN",symbol:""},{currencyCode:"IQD",type:"fiat",currency:ee({defaultMessage:"Iraqi dinar",id:"rmzi7U/4iu"}),countryCode:"IQ",symbol:"."},{currencyCode:"ISK",type:"fiat",currency:ee({defaultMessage:"Icelandic krna",id:"+QCFy0sZgh"}),countryCode:"IS",symbol:"kr"},{currencyCode:"JMD",type:"fiat",currency:ee({defaultMessage:"Jamaican dollar",id:"EkOwDtWSVs"}),countryCode:"JM",symbol:"J$"},{currencyCode:"JOD",type:"fiat",currency:ee({defaultMessage:"Jordanian dinar",id:"B2GvyCUDsS"}),countryCode:"JO",symbol:"."},{currencyCode:"JPY",type:"fiat",currency:ee({defaultMessage:"Japanese yen",id:"2PiQsV1fPp"}),countryCode:"JP",symbol:""},{currencyCode:"KES",type:"fiat",currency:ee({defaultMessage:"Kenyan shilling",id:"JIjYrchwhv"}),countryCode:"KE",symbol:"KSh"},{currencyCode:"KHR",type:"fiat",currency:ee({defaultMessage:"Cambodian riel",id:"KCKOEaCtcY"}),countryCode:"KH",symbol:""},{currencyCode:"KMF",type:"fiat",currency:ee({defaultMessage:"Comorian franc",id:"WV9ZQdQeR+"}),countryCode:"KM",symbol:"CF"},{currencyCode:"KRW",type:"fiat",currency:ee({defaultMessage:"South Korean won",id:"EiHQBnRax2"}),countryCode:"KR",symbol:""},{currencyCode:"KWD",type:"fiat",currency:ee({defaultMessage:"Kuwaiti dinar",id:"fkOQdpZmRV"}),countryCode:"KW",symbol:"."},{currencyCode:"KYD",type:"fiat",currency:ee({defaultMessage:"Cayman Islands dollar",id:"RsdrXusNMV"}),countryCode:"KY",symbol:"$"},{currencyCode:"KZT",type:"fiat",currency:ee({defaultMessage:"Kazakhstani tenge",id:"2qtVTeGWCE"}),countryCode:"KZ",symbol:""},{currencyCode:"LAK",type:"fiat",currency:ee({defaultMessage:"Lao kip",id:"Fgzd1G5Yfn"}),countryCode:"LA",symbol:""},{currencyCode:"LBP",type:"fiat",currency:ee({defaultMessage:"Lebanese pound",id:"FGzeEqNQzF"}),countryCode:"LB",symbol:"."},{currencyCode:"LKR",type:"fiat",currency:ee({defaultMessage:"Sri Lankan rupee",id:"a4/joWlRVu"}),countryCode:"LK",symbol:"Rs"},{currencyCode:"LRD",type:"fiat",currency:ee({defaultMessage:"Liberian dollar",id:"FI1z5I01J6"}),countryCode:"LR",symbol:"$"},{currencyCode:"LSL",type:"fiat",currency:ee({defaultMessage:"Lesotho loti",id:"csvFpR0QuR"}),countryCode:"LS",symbol:"L"},{currencyCode:"LTL",type:"fiat",currency:ee({defaultMessage:"Lithuanian litas",id:"0eziwi9562"}),countryCode:"LT",symbol:"Lt"},{currencyCode:"LYD",type:"fiat",currency:ee({defaultMessage:"Libyan dinar",id:"MHH+Pd33wK"}),countryCode:"LY",symbol:"."},{currencyCode:"MAD",type:"fiat",currency:ee({defaultMessage:"Moroccan dirham",id:"ECYUhp5Zzw"}),countryCode:"MA",symbol:".."},{currencyCode:"MDL",type:"fiat",currency:ee({defaultMessage:"Moldovan leu",id:"b0q4AtgUSW"}),countryCode:"MD",symbol:"L"},{currencyCode:"MGA",type:"fiat",currency:ee({defaultMessage:"Malagasy ariary",id:"7X6Af0dVLl"}),countryCode:"MG",symbol:"Ar"},{currencyCode:"MKD",type:"fiat",currency:ee({defaultMessage:"Macedonian denar",id:"RCCw/rBMD7"}),countryCode:"MK",symbol:""},{currencyCode:"MMK",type:"fiat",currency:ee({defaultMessage:"Burmese kyat",id:"09O/caoUOd"}),countryCode:"MM",symbol:"K"},{currencyCode:"MOP",type:"fiat",currency:ee({defaultMessage:"Macanese pataca",id:"WSCDGHnfAP"}),countryCode:"MO",symbol:"P"},{currencyCode:"MUR",type:"fiat",currency:ee({defaultMessage:"Mauritian rupee",id:"B7EPhc2k1/"}),countryCode:"MU",symbol:""},{currencyCode:"MVR",type:"fiat",currency:ee({defaultMessage:"Maldivian rufiyaa",id:"WKep/6FHLO"}),countryCode:"MV",symbol:"Rf"},{currencyCode:"MWK",type:"fiat",currency:ee({defaultMessage:"Malawian kwacha",id:"0QSRp0Tfcl"}),countryCode:"MW",symbol:"MK"},{currencyCode:"MXN",type:"fiat",currency:ee({defaultMessage:"Mexican peso",id:"cAJvdQ+v2Y"}),countryCode:"MX",symbol:"$"},{currencyCode:"MXV",type:"fiat",currency:ee({defaultMessage:"Mexican Unidad de Inversion (UDI)",id:"pJjurDaC1J"}),countryCode:"MX",symbol:"UDI"},{currencyCode:"MYR",type:"fiat",currency:ee({defaultMessage:"Malaysian ringgit",id:"BJOmmIMKBn"}),countryCode:"MY",symbol:"RM"},{currencyCode:"MZN",type:"fiat",currency:ee({defaultMessage:"Mozambican metical",id:"KVoUcWYwrs"}),countryCode:"MZ",symbol:"MT"},{currencyCode:"NAD",type:"fiat",currency:ee({defaultMessage:"Namibian dollar",id:"ofXViiQOEO"}),countryCode:"NA",symbol:"$"},{currencyCode:"NGN",type:"fiat",currency:ee({defaultMessage:"Nigerian naira",id:"YtrB6By6fQ"}),countryCode:"NG",symbol:""},{currencyCode:"NIO",type:"fiat",currency:ee({defaultMessage:"Nicaraguan crdoba",id:"NJJMgSKcDP"}),countryCode:"NI",symbol:"C$"},{currencyCode:"NOK",type:"fiat",currency:ee({defaultMessage:"Norwegian krone",id:"X7p/vNj1w0"}),countryCode:"NO",symbol:"kr"},{currencyCode:"NPR",type:"fiat",currency:ee({defaultMessage:"Nepalese rupee",id:"KpP5Ur9yKv"}),countryCode:"NP",symbol:""},{currencyCode:"NZD",type:"fiat",currency:ee({defaultMessage:"New Zealand dollar",id:"uoVYggIiS7"}),countryCode:"NZ",symbol:"$"},{currencyCode:"OMR",type:"fiat",currency:ee({defaultMessage:"Omani rial",id:"YuZlkmlwz6"}),countryCode:"OM",symbol:".."},{currencyCode:"PAB",type:"fiat",currency:ee({defaultMessage:"Panamanian balboa",id:"WsXJoQA7BU"}),countryCode:"PA",symbol:"B/."},{currencyCode:"PEN",type:"fiat",currency:ee({defaultMessage:"Peruvian sol",id:"Gzey/zBCdq"}),countryCode:"PE",symbol:"S/."},{currencyCode:"PGK",type:"fiat",currency:ee({defaultMessage:"Papua New Guinean kina",id:"1odcdptMV2"}),countryCode:"PG",symbol:"K"},{currencyCode:"PHP",type:"fiat",currency:ee({defaultMessage:"Philippine peso",id:"Ze94/Fib/J"}),countryCode:"PH",symbol:""},{currencyCode:"PKR",type:"fiat",currency:ee({defaultMessage:"Pakistani rupee",id:"xg2ovH8pDh"}),countryCode:"PK",symbol:""},{currencyCode:"PLN",type:"fiat",currency:ee({defaultMessage:"Polish zoty",id:"5nGZooUDXi"}),countryCode:"PL",symbol:"z"},{currencyCode:"PYG",type:"fiat",currency:ee({defaultMessage:"Paraguayan guaran",id:"faGTF61Eyw"}),countryCode:"PY",symbol:""},{currencyCode:"QAR",type:"fiat",currency:ee({defaultMessage:"Qatari riyal",id:"DuHEQnjrPb"}),countryCode:"QA",symbol:"."},{currencyCode:"RON",type:"fiat",currency:ee({defaultMessage:"Romanian leu",id:"lXgl4aKBP3"}),countryCode:"RO",symbol:"lei"},{currencyCode:"RSD",type:"fiat",currency:ee({defaultMessage:"Serbian dinar",id:"giqvsRUiA5"}),countryCode:"RS",symbol:"."},{currencyCode:"RUB",type:"fiat",currency:ee({defaultMessage:"Russian ruble",id:"4U+m5Kd694"}),countryCode:"RU",symbol:""},{currencyCode:"RWF",type:"fiat",currency:ee({defaultMessage:"Rwandan franc",id:"URbs3Tt0On"}),countryCode:"RW",symbol:"FRw"},{currencyCode:"SAR",type:"fiat",currency:ee({defaultMessage:"Saudi riyal",id:"p6D2TLqko8"}),countryCode:"SA",symbol:"."},{currencyCode:"SCR",type:"fiat",currency:ee({defaultMessage:"Seychellois rupee",id:"V7Ju6HZQJK"}),countryCode:"SC",symbol:""},{currencyCode:"SDG",type:"fiat",currency:ee({defaultMessage:"Sudanese pound",id:"FsgRxw4tdm"}),countryCode:"SD",symbol:".."},{currencyCode:"SEK",type:"fiat",currency:ee({defaultMessage:"Swedish krona",id:"WoyUwT/z0X"}),countryCode:"SE",symbol:"kr"},{currencyCode:"SGD",type:"fiat",currency:ee({defaultMessage:"Singapore dollar",id:"SCjBmFU+PM"}),countryCode:"SG",symbol:"$"},{currencyCode:"SHP",type:"fiat",currency:ee({defaultMessage:"Saint Helena pound",id:"XZdS6/MxwW"}),countryCode:"SH",symbol:""},{currencyCode:"SLL",type:"fiat",currency:ee({defaultMessage:"Sierra Leonean leone",id:"DFZ4yqf1EG"}),countryCode:"SL",symbol:"Le"},{currencyCode:"SOS",type:"fiat",currency:ee({defaultMessage:"Somali shilling",id:"e7cANdrF41"}),countryCode:"SO",symbol:"Sh.So."},{currencyCode:"SVC",type:"fiat",currency:ee({defaultMessage:"Salvadoran coln",id:"A2mT13SXuX"}),countryCode:"SV",symbol:""},{currencyCode:"SZL",type:"fiat",currency:ee({defaultMessage:"Swazi lilangeni",id:"+kNQR2VJjT"}),countryCode:"SZ",symbol:"E"},{currencyCode:"THB",type:"fiat",currency:ee({defaultMessage:"Thai baht",id:"Yz36aOmXMd"}),countryCode:"TH",symbol:""},{currencyCode:"TJS",type:"fiat",currency:ee({defaultMessage:"Tajikistani somoni",id:"G3q+8He+TZ"}),countryCode:"TJ",symbol:"M"},{currencyCode:"TMT",type:"fiat",currency:ee({defaultMessage:"Turkmenistan manat",id:"iV0j+gxDPN"}),countryCode:"TM",symbol:"m"},{currencyCode:"TND",type:"fiat",currency:ee({defaultMessage:"Tunisian dinar",id:"l6iU1LyMSk"}),countryCode:"TN",symbol:"."},{currencyCode:"TRY",type:"fiat",currency:ee({defaultMessage:"Turkish lira",id:"hQ9m98Llgt"}),countryCode:"TR",symbol:""},{currencyCode:"TTD",type:"fiat",currency:ee({defaultMessage:"Trinidad and Tobago dollar",id:"Op/jRg7//J"}),countryCode:"TT",symbol:"TT$"},{currencyCode:"TWD",type:"fiat",currency:ee({defaultMessage:"New Taiwan dollar",id:"yAeWHzFY54"}),countryCode:"TW",symbol:"NT$"},{currencyCode:"TZS",type:"fiat",currency:ee({defaultMessage:"Tanzanian shilling",id:"7YNH90CDt1"}),countryCode:"TZ",symbol:"TSh"},{currencyCode:"UAH",type:"fiat",currency:ee({defaultMessage:"Ukrainian hryvnia",id:"HCy2dyACi0"}),countryCode:"UA",symbol:""},{currencyCode:"UGX",type:"fiat",currency:ee({defaultMessage:"Ugandan shilling",id:"P5STuJcFRi"}),countryCode:"UG",symbol:"USh"},{currencyCode:"USD",type:"fiat",currency:ee({defaultMessage:"United States dollar",id:"BPRJDRwXU1"}),countryCode:"US",symbol:"$"},{currencyCode:"UYU",type:"fiat",currency:ee({defaultMessage:"Uruguayan peso",id:"HtXUCx6BL1"}),countryCode:"UY",symbol:"$U"},{currencyCode:"UZS",type:"fiat",currency:ee({defaultMessage:"Uzbekistani som",id:"lv4m0Kbuw1"}),countryCode:"UZ",symbol:"so'm"},{currencyCode:"VND",type:"fiat",currency:ee({defaultMessage:"Vietnamese ng",id:"We/RqEPpOp"}),countryCode:"VN",symbol:""},{currencyCode:"XAF",type:"fiat",currency:ee({defaultMessage:"Central African CFA franc",id:"fZwFESvHCw"}),countryCode:"CF",symbol:"FCFA"},{currencyCode:"XAG",type:"commodity",currency:ee({defaultMessage:"Silver (troy ounce)",id:"XVTnv5Liuj"}),countryCode:"ZZ",symbol:"XAG"},{currencyCode:"XAU",type:"commodity",currency:ee({defaultMessage:"Gold (troy ounce)",id:"s3i6lUYb/y"}),countryCode:"ZZ",symbol:"XAU"},{currencyCode:"XCD",type:"fiat",currency:ee({defaultMessage:"East Caribbean dollar",id:"pXF3HmkspQ"}),countryCode:"AG",symbol:"$"},{currencyCode:"XDR",type:"fiat",currency:ee({defaultMessage:"Special drawing rights",id:"X4eXXVN7wq"}),countryCode:"ZZ",symbol:"SDR"},{currencyCode:"XOF",type:"fiat",currency:ee({defaultMessage:"West African CFA franc",id:"cezzLNBm20"}),countryCode:"SN",symbol:"CFA"},{currencyCode:"XPF",type:"fiat",currency:ee({defaultMessage:"CFP franc",id:"txe+aX9vvZ"}),countryCode:"PF",symbol:""},{currencyCode:"YER",type:"fiat",currency:ee({defaultMessage:"Yemeni rial",id:"lRXRuW4arm"}),countryCode:"YE",symbol:""},{currencyCode:"ZAC",type:"fiat",currency:ee({defaultMessage:"South African rand (financial)",id:"GsJykrhxvK"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZAR",type:"fiat",currency:ee({defaultMessage:"South African rand",id:"MbU2//IGEL"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZMW",type:"fiat",currency:ee({defaultMessage:"Zambian kwacha",id:"ZJnHTLBz2v"}),countryCode:"ZM",symbol:"ZK"},{currencyCode:"BTC",type:"crypto",currency:ee({defaultMessage:"Bitcoin",id:"RkW5weBw8q"}),symbol:""},{currencyCode:"ETH",type:"crypto",currency:ee({defaultMessage:"Ethereum",id:"ohE0sWxJfP"}),symbol:""},{currencyCode:"XRP",type:"crypto",currency:ee({defaultMessage:"XRP",id:"rwHxdc9N83"}),symbol:"XRP"},{currencyCode:"BNB",type:"crypto",currency:ee({defaultMessage:"BNB",id:"+x/JA+cbSg"}),symbol:"BNB"},{currencyCode:"USDT",type:"crypto",currency:ee({defaultMessage:"Tether",id:"G17JtC1DRO"}),symbol:"USDT"},{currencyCode:"SOL",type:"crypto",currency:ee({defaultMessage:"Solana",id:"RmbsLR1XI9"}),symbol:"SOL"},{currencyCode:"HYPE",type:"crypto",currency:ee({defaultMessage:"HYPE",id:"sRJuK+IQu7"}),symbol:"HYPE"},{currencyCode:"STETH",type:"crypto",currency:ee({defaultMessage:"stETH",id:"VNvqEhRv0o"}),symbol:"stETH"},{currencyCode:"WTRX",type:"crypto",currency:ee({defaultMessage:"Wrapped TRX",id:"hi8IgS7Vvh"}),symbol:"WTRX"},{currencyCode:"DOGE",type:"crypto",currency:ee({defaultMessage:"Dogecoin",id:"Q4KOhNgUFl"}),symbol:"DOGE"},{currencyCode:"ADA",type:"crypto",currency:ee({defaultMessage:"Cardano",id:"Zk+zRo7Vav"}),symbol:"ADA"},{currencyCode:"TRX",type:"crypto",currency:ee({defaultMessage:"TRON",id:"fLtNc/n43W"}),symbol:"TRX"},{currencyCode:"USDC",type:"crypto",currency:ee({defaultMessage:"USD Coin",id:"tPc0IbLJq0"}),symbol:"USDC"},{currencyCode:"WBTC",type:"crypto",currency:ee({defaultMessage:"Wrapped Bitcoin",id:"AO1Xrr+Cwk"}),symbol:"WBTC"},{currencyCode:"WSTETH",type:"crypto",currency:ee({defaultMessage:"Wrapped stETH",id:"Fg7h7ipjGE"}),symbol:"wstETH"},{currencyCode:"EDLC",type:"crypto",currency:ee({defaultMessage:"EDLC",id:"FplbXN+574"}),symbol:"EDLC"},{currencyCode:"LINK",type:"crypto",currency:ee({defaultMessage:"Chainlink",id:"d/A799ZTa/"}),symbol:"LINK"},{currencyCode:"AIC",type:"crypto",currency:ee({defaultMessage:"AIC",id:"RSOIsb9pEC"}),symbol:"AIC"},{currencyCode:"XLM",type:"crypto",currency:ee({defaultMessage:"Stellar",id:"+uYwRW10Bd"}),symbol:"XLM"},{currencyCode:"WETH",type:"crypto",currency:ee({defaultMessage:"Wrapped Ether",id:"s8UwDT+8t2"}),symbol:"WETH"},{currencyCode:"BCH",type:"crypto",currency:ee({defaultMessage:"Bitcoin Cash",id:"hLt+wzROTK"}),symbol:"BCH"},{currencyCode:"UST",type:"crypto",currency:ee({defaultMessage:"TerraUSD",id:"wot2OPkJDe"}),symbol:"UST"},{currencyCode:"AVAX",type:"crypto",currency:ee({defaultMessage:"Avalanche",id:"C9K+TI7R4G"}),symbol:"AVAX"},{currencyCode:"SUI",type:"crypto",currency:ee({defaultMessage:"Sui",id:"CvmoCbTblr"}),symbol:"SUI"},{currencyCode:"LTC",type:"crypto",currency:ee({defaultMessage:"Litecoin",id:"oyKw8Dr6hh"}),symbol:"LTC"},{currencyCode:"TON",type:"crypto",currency:ee({defaultMessage:"Toncoin",id:"V2AxdWxVB/"}),symbol:"TON"},{currencyCode:"HBAR",type:"crypto",currency:ee({defaultMessage:"Hedera",id:"yLSpOa++/L"}),symbol:"HBAR"},{currencyCode:"WHBAR",type:"crypto",currency:ee({defaultMessage:"Wrapped HBAR",id:"rfimaaddr1"}),symbol:"WHBAR"},{currencyCode:"UNI",type:"crypto",currency:ee({defaultMessage:"Uniswap",id:"hincAkLfxR"}),symbol:"UNI"},{currencyCode:"BTCB",type:"crypto",currency:ee({defaultMessage:"Bitcoin BEP2",id:"T7D16Bt6JS"}),symbol:"BTCB"},{currencyCode:"OKB",type:"crypto",currency:ee({defaultMessage:"OKB",id:"6ZLe/X3P+I"}),symbol:"OKB"},{currencyCode:"SHIB",type:"crypto",currency:ee({defaultMessage:"Shiba Inu",id:"dwuQAuovNP"}),symbol:"SHIB"},{currencyCode:"USDS",type:"crypto",currency:ee({defaultMessage:"StableUSD",id:"DAzSEb0LeA"}),symbol:"USDS"},{currencyCode:"WBT",type:"crypto",currency:ee({defaultMessage:"WhiteBIT Coin",id:"Lj9Zp416rG"}),symbol:"WBT"},{currencyCode:"BGB",type:"crypto",currency:ee({defaultMessage:"Bitget Token",id:"OEQgkmdE1O"}),symbol:"BGB"},{currencyCode:"DAI",type:"crypto",currency:ee({defaultMessage:"Dai",id:"7g+Z6oltsB"}),symbol:"DAI"},{currencyCode:"DOT",type:"crypto",currency:ee({defaultMessage:"Polkadot",id:"iS7ue2zjn0"}),symbol:"DOT"},{currencyCode:"XMR",type:"crypto",currency:ee({defaultMessage:"Monero",id:"RydJABkA4a"}),symbol:"XMR"},{currencyCode:"MNT",type:"crypto",currency:ee({defaultMessage:"MNT",id:"90qNZszLR/"}),symbol:"MNT"},{currencyCode:"PEPE",type:"crypto",currency:ee({defaultMessage:"Pepe",id:"x9wJbmzZhn"}),symbol:"PEPE"},{currencyCode:"AAVE",type:"crypto",currency:ee({defaultMessage:"Aave",id:"kFjzNltaTL"}),symbol:"AAVE"},{currencyCode:"CRO",type:"crypto",currency:ee({defaultMessage:"Cronos",id:"2cg8W1gIo3"}),symbol:"CRO"},{currencyCode:"ETC",type:"crypto",currency:ee({defaultMessage:"Ethereum Classic",id:"Bv9Xkw6kNg"}),symbol:"ETC"},{currencyCode:"FD",type:"crypto",currency:ee({defaultMessage:"FD",id:"+Q62UIi/LA"}),symbol:"FD"},{currencyCode:"TUSD",type:"crypto",currency:ee({defaultMessage:"TrueUSD",id:"whDnhXYdIe"}),symbol:"TUSD"},{currencyCode:"NEAR",type:"crypto",currency:ee({defaultMessage:"NEAR Protocol",id:"E9RsfkMwMk"}),symbol:"NEAR"},{currencyCode:"METAGAMES",type:"crypto",currency:ee({defaultMessage:"MetaGames",id:"C0GGroVhnP"}),symbol:"METAGAMES"},{currencyCode:"TAO",type:"crypto",currency:ee({defaultMessage:"Bittensor",id:"6+C0Ut5hKl"}),symbol:"TAO"},{currencyCode:"ICP",type:"crypto",currency:ee({defaultMessage:"Internet Computer",id:"q9uyMXlX+M"}),symbol:"ICP"},{currencyCode:"GT",type:"crypto",currency:ee({defaultMessage:"GateToken",id:"dSGfpIcmmI"}),symbol:"GT"},{currencyCode:"RETH",type:"crypto",currency:ee({defaultMessage:"Rocket Pool ETH",id:"pg4o1kZ2d4"}),symbol:"rETH"},{currencyCode:"MRS",type:"crypto",currency:ee({defaultMessage:"MRS",id:"CABw3watNU"}),symbol:"MRS"},{currencyCode:"APT",type:"crypto",currency:ee({defaultMessage:"Aptos",id:"/U15UItsIY"}),symbol:"APT"},{currencyCode:"KAS",type:"crypto",currency:ee({defaultMessage:"Kaspa",id:"1MwSSUoCwu"}),symbol:"KAS"},{currencyCode:"ALGO",type:"crypto",currency:ee({defaultMessage:"Algorand",id:"TijDBb1K3w"}),symbol:"ALGO"},{currencyCode:"PENGU",type:"crypto",currency:ee({defaultMessage:"PENGU",id:"esTSdYyjL9"}),symbol:"PENGU"},{currencyCode:"VET",type:"crypto",currency:ee({defaultMessage:"VeChain",id:"o3b918Uwm9"}),symbol:"VET"},{currencyCode:"OTRUMP",type:"crypto",currency:ee({defaultMessage:"OTRUMP",id:"dwjxu1ZNrs"}),symbol:"OTRUMP"},{currencyCode:"ARB",type:"crypto",currency:ee({defaultMessage:"Arbitrum",id:"2qF6KBPwqc"}),symbol:"ARB"},{currencyCode:"LUNA1",type:"crypto",currency:ee({defaultMessage:"Terra (LUNA1)",id:"g5JtKAkJm/"}),symbol:"LUNA1"},{currencyCode:"MKR",type:"crypto",currency:ee({defaultMessage:"Maker",id:"iVoUggHR7n"}),symbol:"MKR"},{currencyCode:"QNT",type:"crypto",currency:ee({defaultMessage:"Quant",id:"kZiBtRgPXK"}),symbol:"QNT"},{currencyCode:"BONK",type:"crypto",currency:ee({defaultMessage:"BONK",id:"/WOyXrLUEt"}),symbol:"BONK"},{currencyCode:"ATOM",type:"crypto",currency:ee({defaultMessage:"Cosmos",id:"VfvhDOBZSq"}),symbol:"ATOM"},{currencyCode:"FTN",type:"crypto",currency:ee({defaultMessage:"FTN",id:"+BtHlnfKBJ"}),symbol:"FTN"},{currencyCode:"KCS",type:"crypto",currency:ee({defaultMessage:"KuCoin Token",id:"J6x8n/y945"}),symbol:"KCS"},{currencyCode:"RNDR",type:"crypto",currency:ee({defaultMessage:"Render",id:"fI33PYpQj/"}),symbol:"RNDR"},{currencyCode:"BNX",type:"crypto",currency:ee({defaultMessage:"BNX",id:"/mzOvKP3DB"}),symbol:"BNX"},{currencyCode:"FIL",type:"crypto",currency:ee({defaultMessage:"Filecoin",id:"O60m1dM5+I"}),symbol:"FIL"},{currencyCode:"WBNB",type:"crypto",currency:ee({defaultMessage:"Wrapped BNB",id:"6oPoIEcEKM"}),symbol:"WBNB"},{currencyCode:"DUCK",type:"crypto",currency:ee({defaultMessage:"DUCK",id:"Wy2n2zHjyn"}),symbol:"DUCK"},{currencyCode:"ONDO",type:"crypto",currency:ee({defaultMessage:"Ondo",id:"Mdh4nCMVFp"}),symbol:"ONDO"},{currencyCode:"EZETH",type:"crypto",currency:ee({defaultMessage:"EZETH",id:"GquMfdHRpr"}),symbol:"EZETH"},{currencyCode:"DHN",type:"crypto",currency:ee({defaultMessage:"DHN",id:"3DBrwMVTuR"}),symbol:"DHN"},{currencyCode:"SPX",type:"crypto",currency:ee({defaultMessage:"SPX",id:"78Gbn14660"}),symbol:"SPX"},{currencyCode:"XDC",type:"crypto",currency:ee({defaultMessage:"XDC Network",id:"f4v54xCFpd"}),symbol:"XDC"},{currencyCode:"ENA",type:"crypto",currency:ee({defaultMessage:"ENA",id:"G6NRdu/3/f"}),symbol:"ENA"},{currencyCode:"SOLVBTCBBN",type:"crypto",currency:ee({defaultMessage:"SOLVBTCBBN",id:"U+VGyLBIbO"}),symbol:"SOLVBTCBBN"},{currencyCode:"LDO",type:"crypto",currency:ee({defaultMessage:"Lido DAO",id:"Hm40klV7dx"}),symbol:"LDO"},{currencyCode:"INJ",type:"crypto",currency:ee({defaultMessage:"Injective",id:"Zy5gqTZCK/"}),symbol:"INJ"},{currencyCode:"USD0",type:"crypto",currency:ee({defaultMessage:"USD0",id:"I8k7Is+SUX"}),symbol:"USD0"},{currencyCode:"FLR",type:"crypto",currency:ee({defaultMessage:"Flare",id:"EuWzA+LwQr"}),symbol:"FLR"},{currencyCode:"PY",type:"crypto",currency:ee({defaultMessage:"PY",id:"2WmUk53rca"}),symbol:"PY"},{currencyCode:"SEI",type:"crypto",currency:ee({defaultMessage:"Sei",id:"uIVFPKXueM"}),symbol:"SEI"},{currencyCode:"MSOL",type:"crypto",currency:ee({defaultMessage:"Marinade Staked SOL",id:"Sgo9VGem0+"}),symbol:"mSOL"},{currencyCode:"CRV",type:"crypto",currency:ee({defaultMessage:"Curve DAO Token",id:"hv2sTxuyJY"}),symbol:"CRV"},{currencyCode:"FTM",type:"crypto",currency:ee({defaultMessage:"Fantom",id:"FdV4Gc/fz2"}),symbol:"FTM"},{currencyCode:"FLOKI",type:"crypto",currency:ee({defaultMessage:"FLOKI",id:"d2sPiyXVq8"}),symbol:"FLOKI"},{currencyCode:"CMETH",type:"crypto",currency:ee({defaultMessage:"CMETH",id:"ZXQlnD2obl"}),symbol:"CMETH"},{currencyCode:"SLISBNB",type:"crypto",currency:ee({defaultMessage:"SLISBNB",id:"wqx7ZL4lbr"}),symbol:"SLISBNB"},{currencyCode:"FARTCOIN",type:"crypto",currency:ee({defaultMessage:"FARTCOIN",id:"qFlNIb5L+O"}),symbol:"FARTCOIN"},{currencyCode:"EETH",type:"crypto",currency:ee({defaultMessage:"eETH",id:"tCrC5owpVn"}),symbol:"eETH"},{currencyCode:"KAIA",type:"crypto",currency:ee({defaultMessage:"KAIA",id:"fDXZE/gzgq"}),symbol:"KAIA"},{currencyCode:"GRT",type:"crypto",currency:ee({defaultMessage:"The Graph",id:"oFrVNds2cX"}),symbol:"GRT"},{currencyCode:"IMX",type:"crypto",currency:ee({defaultMessage:"Immutable",id:"+0mthqqK1s"}),symbol:"IMX"},{currencyCode:"WIF",type:"crypto",currency:ee({defaultMessage:"WIF",id:"tK0cRtUi/S"}),symbol:"WIF"},{currencyCode:"RAY",type:"crypto",currency:ee({defaultMessage:"Raydium",id:"pSdm2ZTXHD"}),symbol:"RAY"},{currencyCode:"OP",type:"crypto",currency:ee({defaultMessage:"Optimism",id:"ghDrrz64nC"}),symbol:"OP"},{currencyCode:"XAUT",type:"crypto",currency:ee({defaultMessage:"Tether Gold",id:"pobzwuxAfg"}),symbol:"XAUT"},{currencyCode:"PENDLE",type:"crypto",currency:ee({defaultMessage:"Pendle",id:"z8diWExCd3"}),symbol:"PENDLE"}],bh=(e,t="default")=>{if(!e)return"";const n=t==="indian"?"en-IN":"en-US",r=new Intl.NumberFormat(n,{useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:100}),s=e.endsWith("."),a=e.split("."),i=a[0]||"0",l=a[1]||"",c=parseFloat(e);if(isNaN(c))return"";let d=r.format(parseFloat(i));return a.length>1?d+="."+l:s&&(d+="."),d},gTe=R.memo(({value:e,onChange:t,placeholder:n="0",disabled:r=!1,className:s="",min:a,max:i,step:l=1,formatting:c="default"})=>{const u=f.useRef(null),[d,m]=f.useState(bh(e,c)),p=f.useCallback(x=>x.replace(/,/g,""),[]),h=f.useCallback(x=>{const v=x.target.value,b=p(v),_=x.target.selectionStart||0;if(b===""||/^\d*\.?\d*$/.test(b)&&!/e/i.test(v)){const w=bh(b,c);m(w),t(b),requestAnimationFrame(()=>{if(u.current){const C=v.substring(0,_),S=p(C);let E=0,M=0;const k=S.replace(".","").length,N=S.includes(".")&&S.endsWith(".");for(let P=0;P<w.length;P++){const L=w[P];if(L==="."){if(N&&E===k){M=P+1;break}}else if(L!==","&&(E++,!N&&E===k)){M=P+1;break}}u.current.setSelectionRange(M,M)}})}},[p,t,c]),g=f.useCallback(x=>{const v=u.current;if(!v||(x.metaKey||x.ctrlKey)&&(x.key==="z"||x.key==="Z"))return;const{selectionStart:b,selectionEnd:_,value:w}=v;if(x.key==="ArrowUp"||x.key==="ArrowDown"){x.preventDefault();const C=parseFloat(p(e))||0,S=x.key==="ArrowUp"?l:-l;let E=C+S;a!==void 0&&E<a&&(E=a),i!==void 0&&E>i&&(E=i);const M=E.toString(),k=bh(M,c);m(k),t(M);return}if(x.key==="Backspace"&&b===_){if(b===null)return;if(w[b-1]===","){x.preventDefault();const S=w.substring(0,b-1),E=w.substring(b),M=S[S.length-1];if(M&&/\d/.test(M)){const k=S.slice(0,-1)+E,N=p(k),P=bh(N,c);m(P),t(N),setTimeout(()=>{const L=P.length-p(E).length;v.setSelectionRange(L,L)},0)}}}},[p,t,e,l,a,i,c]),y=f.useCallback(x=>{x.preventDefault();const v=x.clipboardData.getData("text"),b=p(v);if(/^\d*\.?\d*$/.test(b)&&!/e/i.test(v)){const _=bh(b,c);m(_),t(b)}},[p,t,c]);return R.useEffect(()=>{const x=bh(e,c);m(x)},[e,c]),o.jsx("input",{ref:u,type:"text",value:d,onChange:h,onKeyDown:g,onPaste:y,placeholder:n,disabled:r,className:s,inputMode:"decimal"})});gTe.displayName="CurrencyInput";const yTe=R.memo(e=>{const{data:t}=e,{source_currency:n,target_currency:r,source_amount:s,converted_amount:a,exchange_rate:i}=t,l=!0,{menuItems:c}=Dx(),[u,d]=f.useState(s),[m,p]=f.useState(U(a)),[h,g]=f.useState(n),[y,x]=f.useState(r),[v,b]=f.useState(i),{colorScheme:_}=Jr(),w=_==="dark",{$t:C}=Z(),S=`${h}${y}`,{data:E,isLoading:M,error:k}=We({queryKey:dbt(h,y,u),queryFn:()=>fbt({sourceCurrency:h,targetCurrency:y,amount:u}),enabled:!!h&&!!y&&u>0}),N=f.useRef(E?.source_currency),P=f.useRef(E?.target_currency),L=f.useRef(E?.exchange_rate),O=f.useRef(E?.source_img),A=f.useRef(E?.source_img_dark),j=f.useRef(E?.target_img),T=f.useRef(E?.target_img_dark);f.useEffect(()=>{E&&(E?.source_currency!==N.current||E?.target_currency!==P.current)&&(p(U(E.converted_amount)),N.current=E.source_currency,P.current=E.target_currency),E&&E.exchange_rate!==L.current&&(b(E.exchange_rate),L.current=E.exchange_rate),E&&E.source_img!==O.current&&(O.current=E.source_img),E&&E.source_img_dark!==A.current&&(A.current=E.source_img_dark),E&&E.target_img!==j.current&&(j.current=E.target_img),E&&E.target_img_dark!==T.current&&(T.current=E.target_img_dark)},[E]);function I(z){return VL.find($=>$.currencyCode===z)}function U(z){return z>1?parseFloat(z.toFixed(2)):parseFloat(z.toPrecision(2))}function B(z){return z==="INR"||z==="PKR"||z==="BDT"||z==="NPR"}const D=I(h),W=I(y);return o.jsx(Ho,{widgetType:"finance",widgetName:"currency_exchange",widgetSize:"full",children:o.jsxs("div",{className:"gap-sm pb-sm flex flex-col overflow-visible",children:[o.jsx(un,{shadow:!0,className:"w-full overflow-hidden",children:o.jsxs(H,{variant:"subtler",className:"grid w-full grid-cols-1 gap-px md:grid-cols-2",children:[o.jsxs(H,{variant:"raised",className:"p-md pb-sm gap-sm flex w-full flex-col",children:[o.jsx("div",{className:"flex-1",children:o.jsxs(F,{variant:"entry-title-200",className:"flex font-mono !text-2xl",children:[o.jsx("span",{className:"text-quieter",children:D?.symbol}),o.jsx(WL,{value:u.toString(),error:!!k,onChange:z=>{const $=parseFloat(z);d($),$>0?p(U($*v)):p(0)},formatting:B(D?.currencyCode)?"indian":"default"})]})}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx($L,{onSelect:z=>g(z),currency:D?C(D.currency):h,icon:D&&D.type==="crypto"?o.jsx(H,{variant:"subtler",className:"size-full overflow-hidden rounded-full",children:(w?A.current:O.current)&&o.jsx("img",{src:w?A.current??"":O.current??"",alt:C(D.currency),className:"size-full object-contain"})}):D&&D.type==="commodity"?o.jsx(H,{className:V("size-full rounded-full",{"!bg-[gold]":D?.currencyCode==="XAU","!bg-[silver]":D?.currencyCode==="XAG"})}):o.jsx(dy,{className:"size-full object-contain",countryCode:D?.countryCode})}),o.jsx("div",{className:"ml-auto grid grid-cols-1 grid-rows-1 items-center",children:o.jsxs(Je,{children:[M&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:no,className:"col-start-1 row-start-1 ml-auto",children:o.jsx(F,{color:"ultraLight",children:o.jsx(Zr,{size:12})})},"loading"),!M&&k&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:no,className:"col-start-1 row-start-1 ml-auto",children:o.jsx(F,{color:"light",variant:"small",children:C({defaultMessage:"Not supported",id:"+FiyOTaUCW"})})},"error")]})})]})]}),o.jsxs(H,{variant:"raised",className:V("p-md pb-sm gap-md flex w-full flex-col",{"!gap-sm":l}),children:[o.jsx("div",{className:"flex-1",children:o.jsxs(F,{variant:"entry-title-200",color:"default",className:"flex font-mono !text-2xl",children:[o.jsx("span",{className:"text-quieter",children:W?.symbol}),o.jsx(WL,{value:m.toString(),error:!!k,onChange:z=>{const $=parseFloat(z);p($),$>0?d(U($/v)):d(0)},formatting:B(W?.currencyCode)?"indian":"default"})]})}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx($L,{onSelect:z=>x(z),currency:W?C(W.currency):y,icon:W&&W.type==="crypto"?o.jsx(H,{variant:"subtler",className:"size-full overflow-hidden rounded-full",children:(w?T.current:j.current)&&o.jsx("img",{src:w?T.current??"":j.current??"",alt:C(W.currency),className:"size-full object-contain"})}):W&&W.type==="commodity"?o.jsx(H,{className:V("size-full rounded-full",{"!bg-[gold]":W?.currencyCode==="XAU","!bg-[silver]":W?.currencyCode==="XAG"})}):o.jsx(dy,{className:"size-full object-contain",countryCode:W?.countryCode})}),c&&c.length>0&&o.jsx("div",{className:"ml-auto",children:o.jsx(br.Menu,{menuItems:c})})]})]})]})}),o.jsx("div",{children:o.jsx(x9t,{symbol:S,initialPeriod:"1y",search:!1,price:!1,profile:!1})})]})})});yTe.displayName="CurrencyConversion";const $L=R.memo(({currency:e,icon:t,onSelect:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=Ce(),[a,i]=f.useState(""),l=f.useMemo(()=>["CNY","EUR","GBP","JPY","USD","BTC","ETH"].map(y=>VL.find(x=>x.currencyCode===y)),[]),c=f.useMemo(()=>{const g=VL.map(y=>({...y,localizedCurrency:r(y.currency)}));return new Fx(g,{keys:["localizedCurrency","currencyCode","countryCode"],threshold:.3})},[r]),u=f.useMemo(()=>c.search(a)??[],[c,a]),d=f.useMemo(()=>l.map(g=>({type:"default",text:g?.currencyCode?r(g.currency):"",onClick:()=>{g?.currencyCode&&(n(g.currencyCode),i(""))}})),[l,n,r]),m=f.useMemo(()=>u.map(g=>({type:"default",text:r(g.item?.currency)??"",onClick:()=>{g?.item?.currencyCode&&(n(g.item?.currencyCode),i(""))}})),[u,n,r]),p=f.useMemo(()=>[{type:"default",text:r({defaultMessage:"No results",id:"jHJmjfxD4s"}),disabled:!0}],[r]),h=f.useMemo(()=>o.jsx(Wr,{autoFocus:!0,className:V({"!-mx-xs":s,"!px-xs py-sm mb-xs border-none !bg-transparent shadow-none outline-none focus:!ring-0":!s}),pill:!1,isMobileUserAgent:s,placeholder:r({defaultMessage:"Search currencies...",id:"fDMc8k+hJQ"}),value:a,onChange:g=>i(g),disable1pass:!0}),[s,a,r]);return o.jsx(sn,{alwaysShowChildren:!0,placement:"bottom-start",showFooterOnMobile:!0,items:a.length>0?m.length>0?m:p:d,isMobileStyle:s,wrapperClassName:"flex",header:h,footer:s&&h,children:o.jsx(Te,{chevron:!0,noPadding:!0,extraCSS:"!px-sm -ml-sm",leadingComponent:o.jsx("div",{className:"mr-0.5 size-5",children:t}),variant:"primary",size:"small",text:e})})});$L.displayName="CurrencyPicker";const WL=R.memo(({value:e,onChange:t,error:n,formatting:r="default"})=>n?o.jsx("span",{className:"!text-quieter",children:"---"}):o.jsx(gTe,{className:V("placeholder:text-quieter w-full overflow-hidden bg-transparent transition-colors duration-200 [appearance:textfield] focus:outline-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",{"!text-quieter":n}),value:e??"",disabled:n,placeholder:"0",onChange:t,min:0,formatting:r}));WL.displayName="ConversionInput";const pv=(e,t,n)=>{const r=vXe({start:e,end:t}),s=r.days||0,a=r.hours||0,i=r.minutes||0;return s>0?a===0&&i===0?n({id:"sSynIO3ThU",defaultMessage:"{days}d"},{days:s}):i===0?n({id:"10cSZzeWte",defaultMessage:"{days}d {hours}h"},{days:s,hours:a}):n({id:"OWk1HjddEb",defaultMessage:"{days}d {hours}h {minutes}m"},{days:s,hours:a,minutes:i.toString().padStart(2,"0")}):a===0?n({id:"VvfhE21OJI",defaultMessage:"{minutes}m"},{minutes:i}):i===0?n({id:"unuVj1l7KW",defaultMessage:"{hours}h"},{hours:a}):n({id:"0Yp4jJ7rzm",defaultMessage:"{hours}h {minutes}m"},{hours:a,minutes:i.toString().padStart(2,"0")})},xTe=R.memo(({flightMetadata:e,departureTime:t,arrivalTime:n,actualDepartureTime:r,actualArrivalTime:s,estimatedDepartureTime:a,estimatedArrivalTime:i,delayed:l=!1,rightContent:c})=>{const{$t:u,locale:d}=Z(),m=f.useMemo(()=>new Date,[]),{cancelled:p,diverted:h,status:g,flightNumber:y,departureCity:x,departureAirport:v,arrivalAirport:b,arrivalCity:_}=e,w=f.useMemo(()=>t.toLocaleDateString(d,{month:"short",day:"numeric",year:"numeric"}),[t,d]),C=r||a||t,S=s||i||n,E=f.useMemo(()=>pv(m,C,u),[m,C,u]),M=f.useMemo(()=>pv(C,m,u),[m,C,u]),k=f.useMemo(()=>pv(S,m,u),[m,S,u]),N=f.useMemo(()=>pv(m,S,u),[m,S,u]),P=C<=m,L=S<=m,O=f.useMemo(()=>L?u({id:"mtuHNb+mRc",defaultMessage:"Arrived {time} ago"},{time:k}):P?u({id:"b6q320RasU",defaultMessage:"Departed {time} ago"},{time:M}):u({id:"/JLglYfuNX",defaultMessage:"Departing in {time}"},{time:E}),[P,L,E,M,k,u]),A=f.useMemo(()=>p?u({id:"3wsVWFbC1x",defaultMessage:"Cancelled"}):h?u({id:"/N1ZeWQc8B",defaultMessage:"Diverted"}):g,[p,h,u,g]);return o.jsxs("div",{className:"gap-sm flex flex-col justify-between sm:flex-row",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"section-title",children:o.jsx(he,{id:"5KgWVKDR/R",defaultMessage:"{flightNumber}  {departureCity} ({departureAirport}) to {arrivalCity} ({arrivalAirport})",values:{flightNumber:y,departureCity:x,departureAirport:v,arrivalAirport:b,arrivalCity:_}})}),o.jsx("div",{className:"gap-sm flex flex-row",children:o.jsxs(Ru,{className:"gap-xs flex flex-row flex-wrap",children:[o.jsx(Vr,{id:"day",children:o.jsx(F,{variant:"smallBold",color:"light",children:w})}),!p&&o.jsx(Vr,{id:"relative-departure-time",children:o.jsx(F,{variant:"smallBold",color:"light",children:O})}),P&&!L&&!p&&o.jsx(Vr,{id:"relative-arrival-time",children:o.jsx(F,{variant:"smallBold",color:"light",children:o.jsx(he,{id:"z8jWKRSOak",defaultMessage:"Arriving in {time}",values:{time:N}})})}),o.jsx(Vr,{id:"status",children:o.jsx(F,{variant:"smallBold",color:p||h||l?"negative":"super",children:A})})]})})]}),c]})});xTe.displayName="FlightHeader";const kf=()=>{const{firstResult:{status:e,privacy_state:t}={}}=Ht(),n=Oo(),{isIncognitoLocal:r}=_n();return f.useMemo(()=>{if(!e)return!1;const s=!!t&&(r&&t!==$g.INCOGNITO||!r&&t===$g.INCOGNITO);return!n&&e!==Xn.PENDING||s},[r,t,n,e])},AS={initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(2px)"},transition:{duration:.5,ease:fi}},FH=R.memo(({children:e,animationKey:t,...n})=>o.jsx(Je,{mode:"popLayout",initial:!1,children:o.jsx(ve.div,{initial:AS.initial,animate:AS.animate,exit:AS.exit,transition:AS.transition,children:o.jsx(F,{...n,children:e})},t)}));FH.displayName="FlightTextSwitcher";const vTe=R.memo(({terminal:e,gate:t,alignEnd:n})=>{const{$t:r}=Z();return o.jsxs("div",{className:V("gap-lg flex w-full flex-row",n&&"justify-end"),children:[e&&o.jsx(HL,{label:r({id:"GAHVEi8lHA",defaultMessage:"Terminal"}),value:e}),t&&o.jsx(HL,{label:r({id:"W+gH70jajX",defaultMessage:"Gate"}),value:t})]})});vTe.displayName="FlightTerminalGate";const HL=R.memo(({label:e,value:t})=>o.jsxs("div",{children:[o.jsx(F,{variant:"tinyMono",color:"light",children:e}),o.jsx(FH,{animationKey:t,variant:"entry-title-200",children:t})]}));HL.displayName="FlightAttribute";const IS={initial:{opacity:0,height:0,filter:"blur(2px)"},animate:{opacity:1,height:"auto",filter:"blur(0px)"},exit:{opacity:0,height:0,filter:"blur(2px)"},transition:{duration:.3,ease:an}},zL=R.memo(({airport:e,time:t,actualTime:n,estimatedTime:r,timezone:s,terminal:a,gate:i,variant:l="departure",delayed:c=!1,cancelled:u=!1})=>{const{locale:d,$t:m}=Z(),{submitQuery:p}=ta(),h=kf(),{firstResult:g}=Ht(),y=g?.frontend_context_uuid,x=f.useMemo(()=>m(l==="departure"?{id:"BtqAemWTLK",defaultMessage:"Departure"}:{id:"WOIPGxfmZn",defaultMessage:"Arrival"}),[l,m]),v=l==="arrival",b=f.useMemo(()=>{const S=n||r;return S&&S.getTime()===t.getTime()?null:S},[n,r,t]),_=f.useMemo(()=>t.toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",timeZone:s}),[t,s,d]),w=f.useMemo(()=>b?.toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",timeZone:s}),[b,s,d]),C=f.useCallback(()=>{const S=h,E=Ei();p({fork:S,rawQuery:m({id:"xxqvnlQO57",defaultMessage:"Airport {airport}"},{airport:e}),collection:null,newFrontendContextUUID:S?E:null,existingFrontendContextUUID:S?void 0:y,promptSource:"user",querySource:"entity_link",shouldRedirectToBackendUUID:S})},[e,h,y,p,m]);return o.jsxs("div",{className:"gap-md col-span-3 flex flex-col justify-between",children:[o.jsxs("div",{className:V("gap-sm flex flex-col",v&&"items-end"),children:[o.jsxs(F,{variant:"tinyMono",color:"light",className:"gap-sm flex flex-row",children:[x,o.jsx("button",{className:"text-foreground hover:text-super cursor-pointer underline transition-colors duration-150 ease-in-out",onClick:C,children:e})]}),o.jsxs("div",{className:V("flex flex-col",v&&"items-end"),children:[o.jsx(FH,{animationKey:_,as:"span",variant:"entry-title-200",color:c?"negative":"super",className:V("-translate-y-px !font-mono transition-colors duration-500",u&&"text-quiet line-through"),children:b?w:_}),o.jsx(Je,{initial:!1,children:b&&o.jsx(ve.div,{initial:IS.initial,animate:IS.animate,exit:IS.exit,transition:IS.transition,className:"overflow-hidden",children:o.jsx(F,{as:"span",variant:b?"small":"entry-title-200",color:"super",className:V("-translate-y-px !font-mono",b&&"!text-quiet line-through"),children:_})})})]})]}),o.jsx(vTe,{terminal:a,gate:i,alignEnd:v})]})});zL.displayName="FlightDepartureArrival";const v9t=ve(H),bTe=R.memo(({progress:e,departureTime:t,arrivalTime:n,delayed:r,cancelled:s})=>{const{$t:a}=Z(),i=f.useMemo(()=>pv(t,n,a),[t,n,a]),l=f.useMemo(()=>e===void 0||s?0:Math.max(0,Math.min(100,e)),[e,s]),{left:c,width:u}=f.useMemo(()=>({left:`${l}%`,width:`${l}%`}),[l]),d=f.useMemo(()=>({left:0}),[]),m=f.useMemo(()=>({duration:2,ease:an,delay:.5}),[]),p=f.useMemo(()=>({left:c,opacity:1,scale:1}),[c]),h=f.useMemo(()=>({...d,opacity:0,scale:1.2,top:"50%",translateX:"-50%",translateY:"-50%"}),[d]),g=f.useMemo(()=>({width:u}),[u]);return o.jsx("div",{className:"px-xs order-last col-span-6 flex flex-col items-center justify-center sm:order-[unset] sm:px-0",children:o.jsxs("div",{className:"gap-md flex w-full flex-col items-center",children:[o.jsx(F,{variant:"tinyMono",color:"light",children:i}),o.jsxs("div",{className:"relative flex w-full flex-1 items-center",children:[o.jsx("div",{className:"bg-inverse/10 relative h-0.5 w-full overflow-hidden rounded-full",children:o.jsx(ve.div,{className:V("!bg-inverse/50 absolute inset-y-0 left-0 transition-colors duration-500"),initial:d,animate:g,transition:m})}),o.jsx(v9t,{variant:"raised",className:"absolute left-0 flex aspect-square w-6 items-center justify-center",initial:h,animate:p,transition:m,children:o.jsx(le,{className:V("text-quiet transition-colors duration-500",e&&e>0&&!r&&"!text-super",r&&"!text-negative",s&&"!text-quiet"),icon:Uk})})]})]})})});bTe.displayName="FlightProgress";const _Te=R.memo(({departureTime:e,arrivalTime:t,actualDepartureTime:n,actualArrivalTime:r,estimatedDepartureTime:s,estimatedArrivalTime:a,flightMetadata:i,delayed:l=!1})=>{const{cancelled:c,departureAirport:u,arrivalAirport:d,departureTimezone:m,arrivalTimezone:p,terminal:h,gate:g,arrivalTerminal:y,arrivalGate:x,progressPercent:v}=i;return o.jsxs(un,{className:"p-md gap-md grid w-full grid-cols-2 overflow-hidden shadow-sm sm:grid-cols-12",children:[o.jsx(zL,{variant:"departure",airport:u,time:e,actualTime:n,estimatedTime:s,timezone:m,terminal:h,gate:g,delayed:l,cancelled:c}),o.jsx(bTe,{departureTime:e,arrivalTime:t,progress:v,delayed:l,cancelled:c}),o.jsx(zL,{variant:"arrival",airport:d,time:t,actualTime:r,estimatedTime:a,timezone:p,terminal:y,gate:x,delayed:l,cancelled:c})]})});_Te.displayName="FlightStatusCard";const wTe=R.memo(({flights:e,selectedFlight:t,setSelectedFlight:n})=>{const{locale:r,$t:s}=Z(),{isMobileStyle:a}=Ce(),i=f.useCallback(u=>{const d=new Date(u.departureTime),m=h9(d,u.departureTimezone);let p;if(EU(m)?p=s({id:"zWgbGgjUUg",defaultMessage:"Today"}):NXe(m)?p=s({id:"6dIxDP1C8c",defaultMessage:"Yesterday"}):TXe(m)?p=s({id:"MtrTNyxuSU",defaultMessage:"Tomorrow"}):p=d.toLocaleDateString(r,{weekday:"short",month:"short",day:"numeric"}),e.filter(g=>{if(g.departureTimezone!==u.departureTimezone)return!1;const y=h9(new Date(g.departureTime),g.departureTimezone);return Kd(y).getTime()===Kd(m).getTime()}).length>1){const g=d.toLocaleTimeString(r,{hour:"numeric",minute:"2-digit"});p=s({id:"Fr3TxQz4BU",defaultMessage:"{dateString} - {timeString}"},{dateString:p,timeString:g})}return p},[r,e,s]),l=f.useMemo(()=>e.map(u=>({type:"default",text:i(u),value:u.flightAwareId,onClick:()=>n(u),active:u.flightAwareId===t?.flightAwareId})),[e,i,n,t?.flightAwareId]),c=f.useMemo(()=>t?i(t):"",[t,i]);return o.jsx("div",{children:o.jsx(sn,{items:l,isMobileStyle:a,children:o.jsx(pe,{variant:"border",text:c,chevron:!0,pill:!0})})})});wTe.displayName="FlightStatusSwitcher";const RS=new Date,CTe=R.memo(({data:e})=>{const t=f.useMemo(()=>[...e.data.flights].sort((h,g)=>new Date(h.departureTime).getTime()-new Date(g.departureTime).getTime()),[e.data.flights]),n=f.useMemo(()=>{const h=new Date().getTime();if(t.length!==0)return t.reduce((g,y)=>{const x=new Date(y.departureTime).getTime(),v=new Date(g.departureTime).getTime(),b=Math.abs(x-h),_=Math.abs(v-h);return b<_?y:g})},[t]),[r,s]=f.useState(n),{departureTime:a,arrivalTime:i,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d}=f.useMemo(()=>{const h=g=>g?new Date(g):void 0;return r?{departureTime:new Date(r.departureTime),arrivalTime:new Date(r.arrivalTime),actualDepartureTime:h(r.actualDepartureTime),actualArrivalTime:h(r.actualArrivalTime),estimatedDepartureTime:h(r.estimatedDepartureTime),estimatedArrivalTime:h(r.estimatedArrivalTime)}:{}},[r]),m=f.useMemo(()=>c?c>i:d?d>i:!1,[c,i,d]),p=f.useMemo(()=>t.length<2?null:o.jsx(wTe,{flights:t,selectedFlight:r,setSelectedFlight:s}),[t,r,s]);return r?o.jsx(br,{"data-testid":"flight-status-widget",className:"w-full",variant:"noChrome",children:o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(xTe,{flightMetadata:r,departureTime:a||RS,arrivalTime:i||RS,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d,delayed:m,rightContent:p}),o.jsx(_Te,{departureTime:a||RS,arrivalTime:i||RS,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d,flightMetadata:r,delayed:m})]})}):null});CTe.displayName="FlightStatusWidget";const STe=R.memo(({children:e,entries:t,size:n="sm",footer:r})=>{const s=n!=="sm";return o.jsxs(un,{shadow:!0,className:V("relative",s?"mb-lg pb-md":""),children:[e,o.jsx(H,{className:V("grid border-t"),children:t.map(({text:a,href:i,onClick:l})=>o.jsx("div",{className:"p-xs border-subtlest border-b last:border-b-0",onClickCapture:l,children:o.jsx(Te,{fullWidth:!0,variant:"super",chevron:!0,chevronIcon:Zn,size:"small",text:a,href:i,extraCSS:"rounded-md"})},i))}),r]})});STe.displayName="WidgetCta";const ETe=R.memo(({data:{title:e,text:t,image_url:n,canonical_pages:r}})=>{const{$t:s}=Z();return o.jsx("div",{className:"mb-md gap-md flex flex-col",children:o.jsx(STe,{entries:r.map(a=>({text:a.cta??s({defaultMessage:"View More",id:"QQSdHPJWXu"}),href:a.url_web})),size:"sm",children:o.jsxs("div",{className:"gap-md p-md flex items-center md:items-start",children:[n&&o.jsx("img",{alt:"",className:"max-h-[65px] rounded",src:n}),o.jsxs("div",{className:"mr-sm w-full",children:[e&&o.jsx(F,{variant:"baseSemi",children:e}),t&&o.jsx(F,{variant:"small",color:"light",children:t})]})]})})})});ETe.displayName="GenericFallbackWidget";const pc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},MTe=Object.create(null);for(const e in pc)Object.hasOwn(pc,e)&&(MTe[pc[e]]=e);const ws={to:{},get:{}};ws.get=function(e){const t=e.slice(0,3).toLowerCase();let n,r;switch(t){case"hsl":{n=ws.get.hsl(e),r="hsl";break}case"hwb":{n=ws.get.hwb(e),r="hwb";break}default:{n=ws.get.rgb(e),r="rgb";break}}return n?{model:r,value:n}:null};ws.get.rgb=function(e){if(!e)return null;const t=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^(\w+)$/;let i=[0,0,0,1],l,c,u;if(l=e.match(n)){for(u=l[2],l=l[1],c=0;c<3;c++){const d=c*2;i[c]=Number.parseInt(l.slice(d,d+2),16)}u&&(i[3]=Number.parseInt(u,16)/255)}else if(l=e.match(t)){for(l=l[1],u=l[3],c=0;c<3;c++)i[c]=Number.parseInt(l[c]+l[c],16);u&&(i[3]=Number.parseInt(u+u,16)/255)}else if(l=e.match(r)){for(c=0;c<3;c++)i[c]=Number.parseInt(l[c+1],10);l[4]&&(i[3]=l[5]?Number.parseFloat(l[4])*.01:Number.parseFloat(l[4]))}else if(l=e.match(s)){for(c=0;c<3;c++)i[c]=Math.round(Number.parseFloat(l[c+1])*2.55);l[4]&&(i[3]=l[5]?Number.parseFloat(l[4])*.01:Number.parseFloat(l[4]))}else return(l=e.match(a))?l[1]==="transparent"?[0,0,0,0]:Object.hasOwn(pc,l[1])?(i=pc[l[1]],i[3]=1,i):null:null;for(c=0;c<3;c++)i[c]=Bd(i[c],0,255);return i[3]=Bd(i[3],0,1),i};ws.get.hsl=function(e){if(!e)return null;const t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=Bd(Number.parseFloat(n[2]),0,100),i=Bd(Number.parseFloat(n[3]),0,100),l=Bd(Number.isNaN(r)?1:r,0,1);return[s,a,i,l]}return null};ws.get.hwb=function(e){if(!e)return null;const t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=Bd(Number.parseFloat(n[2]),0,100),i=Bd(Number.parseFloat(n[3]),0,100),l=Bd(Number.isNaN(r)?1:r,0,1);return[s,a,i,l]}return null};ws.to.hex=function(...e){return"#"+PS(e[0])+PS(e[1])+PS(e[2])+(e[3]<1?PS(Math.round(e[3]*255)):"")};ws.to.rgb=function(...e){return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};ws.to.rgb.percent=function(...e){const t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};ws.to.hsl=function(...e){return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};ws.to.hwb=function(...e){let t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};ws.to.keyword=function(...e){return MTe[e.slice(0,3)]};function Bd(e,t,n){return Math.min(Math.max(t,e),n)}function PS(e){const t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}const kTe={};for(const e of Object.keys(pc))kTe[pc[e]]=e;const ct={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},_u=(6/29)**3;function kg(e){const t=e>.0031308?1.055*e**.4166666666666667-.055:e*12.92;return Math.min(Math.max(0,t),1)}function Tg(e){return e>.04045?((e+.055)/1.055)**2.4:e/12.92}for(const e of Object.keys(ct)){if(!("channels"in ct[e]))throw new Error("missing channels property: "+e);if(!("labels"in ct[e]))throw new Error("missing channel labels property: "+e);if(ct[e].labels.length!==ct[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=ct[e];delete ct[e].channels,delete ct[e].labels,Object.defineProperty(ct[e],"channels",{value:t}),Object.defineProperty(ct[e],"labels",{value:n})}ct.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(t,n,r),a=Math.max(t,n,r),i=a-s;let l,c;switch(a){case s:{l=0;break}case t:{l=(n-r)/i;break}case n:{l=2+(r-t)/i;break}case r:{l=4+(t-n)/i;break}}l=Math.min(l*60,360),l<0&&(l+=360);const u=(s+a)/2;return a===s?c=0:u<=.5?c=i/(a+s):c=i/(2-a-s),[l,c*100,u*100]};ct.rgb.hsv=function(e){let t,n,r,s,a;const i=e[0]/255,l=e[1]/255,c=e[2]/255,u=Math.max(i,l,c),d=u-Math.min(i,l,c),m=function(p){return(u-p)/6/d+1/2};if(d===0)s=0,a=0;else{switch(a=d/u,t=m(i),n=m(l),r=m(c),u){case i:{s=r-n;break}case l:{s=1/3+t-r;break}case c:{s=2/3+n-t;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,a*100,u*100]};ct.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const s=ct.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[s,a*100,r*100]};ct.rgb.oklab=function(e){const t=Tg(e[0]/255),n=Tg(e[1]/255),r=Tg(e[2]/255),s=Math.cbrt(.4122214708*t+.5363325363*n+.0514459929*r),a=Math.cbrt(.2119034982*t+.6806995451*n+.1073969566*r),i=Math.cbrt(.0883024619*t+.2817188376*n+.6299787005*r),l=.2104542553*s+.793617785*a-.0040720468*i,c=1.9779984951*s-2.428592205*a+.4505937099*i,u=.0259040371*s+.7827717662*a-.808675766*i;return[l*100,c*100,u*100]};ct.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(1-t,1-n,1-r),a=(1-t-s)/(1-s)||0,i=(1-n-s)/(1-s)||0,l=(1-r-s)/(1-s)||0;return[a*100,i*100,l*100,s*100]};function b9t(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}ct.rgb.keyword=function(e){const t=kTe[e];if(t)return t;let n=Number.POSITIVE_INFINITY,r;for(const s of Object.keys(pc)){const a=pc[s],i=b9t(e,a);i<n&&(n=i,r=s)}return r};ct.keyword.rgb=function(e){return pc[e]};ct.rgb.xyz=function(e){const t=Tg(e[0]/255),n=Tg(e[1]/255),r=Tg(e[2]/255),s=t*.4124564+n*.3575761+r*.1804375,a=t*.2126729+n*.7151522+r*.072175,i=t*.0193339+n*.119192+r*.9503041;return[s*100,a*100,i*100]};ct.rgb.lab=function(e){const t=ct.rgb.xyz(e);let n=t[0],r=t[1],s=t[2];n/=95.047,r/=100,s/=108.883,n=n>_u?n**(1/3):7.787*n+16/116,r=r>_u?r**(1/3):7.787*r+16/116,s=s>_u?s**(1/3):7.787*s+16/116;const a=116*r-16,i=500*(n-r),l=200*(r-s);return[a,i,l]};ct.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let s,a;if(n===0)return a=r*255,[a,a,a];const i=r<.5?r*(1+n):r+n-r*n,l=2*r-i,c=[0,0,0];for(let u=0;u<3;u++)s=t+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?a=l+(i-l)*6*s:2*s<1?a=i:3*s<2?a=l+(i-l)*(2/3-s)*6:a=l,c[u]=a*255;return c};ct.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,s=n;const a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=a<=1?a:2-a;const i=(r+n)/2,l=r===0?2*s/(a+s):2*n/(r+n);return[t,l*100,i*100]};ct.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const s=Math.floor(t)%6,a=t-Math.floor(t),i=255*r*(1-n),l=255*r*(1-n*a),c=255*r*(1-n*(1-a));switch(r*=255,s){case 0:return[r,c,i];case 1:return[l,r,i];case 2:return[i,r,c];case 3:return[i,l,r];case 4:return[c,i,r];case 5:return[r,i,l]}};ct.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,s=Math.max(r,.01);let a,i;i=(2-n)*r;const l=(2-n)*s;return a=n*s,a/=l<=1?l:2-l,a=a||0,i/=2,[t,a*100,i*100]};ct.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const s=n+r;let a;s>1&&(n/=s,r/=s);const i=Math.floor(6*t),l=1-r;a=6*t-i,i&1&&(a=1-a);const c=n+a*(l-n);let u,d,m;switch(i){default:case 6:case 0:{u=l,d=c,m=n;break}case 1:{u=c,d=l,m=n;break}case 2:{u=n,d=l,m=c;break}case 3:{u=n,d=c,m=l;break}case 4:{u=c,d=n,m=l;break}case 5:{u=l,d=n,m=c;break}}return[u*255,d*255,m*255]};ct.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=e[3]/100,a=1-Math.min(1,t*(1-s)+s),i=1-Math.min(1,n*(1-s)+s),l=1-Math.min(1,r*(1-s)+s);return[a*255,i*255,l*255]};ct.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let s,a,i;return s=t*3.2404542+n*-1.5371385+r*-.4985314,a=t*-.969266+n*1.8760108+r*.041556,i=t*.0556434+n*-.2040259+r*1.0572252,s=kg(s),a=kg(a),i=kg(i),[s*255,a*255,i*255]};ct.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>_u?t**(1/3):7.787*t+16/116,n=n>_u?n**(1/3):7.787*n+16/116,r=r>_u?r**(1/3):7.787*r+16/116;const s=116*n-16,a=500*(t-n),i=200*(n-r);return[s,a,i]};ct.xyz.oklab=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=Math.cbrt(.8189330101*t+.3618667424*n-.1288597137*r),a=Math.cbrt(.0329845436*t+.9293118715*n+.0361456387*r),i=Math.cbrt(.0482003018*t+.2643662691*n+.633851707*r),l=.2104542553*s+.793617785*a-.0040720468*i,c=1.9779984951*s-2.428592205*a+.4505937099*i,u=.0259040371*s+.7827717662*a-.808675766*i;return[l*100,c*100,u*100]};ct.oklab.oklch=function(e){return ct.lab.lch(e)};ct.oklab.xyz=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(.999999998*t+.396337792*n+.215803758*r)**3,a=(1.000000008*t-.105561342*n-.063854175*r)**3,i=(1.000000055*t-.089484182*n-1.291485538*r)**3,l=1.227013851*s-.55779998*a+.281256149*i,c=-.040580178*s+1.11225687*a-.071676679*i,u=-.076381285*s-.421481978*a+1.58616322*i;return[l*100,c*100,u*100]};ct.oklab.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(t+.3963377774*n+.2158037573*r)**3,a=(t-.1055613458*n-.0638541728*r)**3,i=(t-.0894841775*n-1.291485548*r)**3,l=kg(4.0767416621*s-3.3077115913*a+.2309699292*i),c=kg(-1.2684380046*s+2.6097574011*a-.3413193965*i),u=kg(-.0041960863*s-.7034186147*a+1.707614701*i);return[l*255,c*255,u*255]};ct.oklch.oklab=function(e){return ct.lch.lab(e)};ct.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let s,a,i;a=(t+16)/116,s=n/500+a,i=a-r/200;const l=a**3,c=s**3,u=i**3;return a=l>_u?l:(a-16/116)/7.787,s=c>_u?c:(s-16/116)/7.787,i=u>_u?u:(i-16/116)/7.787,s*=95.047,a*=100,i*=108.883,[s,a,i]};ct.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const i=Math.sqrt(n*n+r*r);return[t,i,s]};ct.lch.lab=function(e){const t=e[0],n=e[1],s=e[2]/360*2*Math.PI,a=n*Math.cos(s),i=n*Math.sin(s);return[t,a,i]};ct.rgb.ansi16=function(e,t=null){const[n,r,s]=e;let a=t===null?ct.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),a===0)return 30;let i=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return a===2&&(i+=60),i};ct.hsv.ansi16=function(e){return ct.rgb.ansi16(ct.hsv.rgb(e),e[2])};ct.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t>>4===n>>4&&n>>4===r>>4?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};ct.ansi16.rgb=function(e){e=e[0];let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(Math.trunc(e>50)+1)*.5,r=(t&1)*n*255,s=(t>>1&1)*n*255,a=(t>>2&1)*n*255;return[r,s,a]};ct.ansi256.rgb=function(e){if(e=e[0],e>=232){const a=(e-232)*10+8;return[a,a,a]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,s=t%6/5*255;return[n,r,s]};ct.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};ct.hex.rgb=function(e){const t=e.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=[...n].map(l=>l+l).join(""));const r=Number.parseInt(n,16),s=r>>16&255,a=r>>8&255,i=r&255;return[s,a,i]};ct.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.max(Math.max(t,n),r),a=Math.min(Math.min(t,n),r),i=s-a;let l;const c=i<1?a/(1-i):0;return i<=0?l=0:s===t?l=(n-r)/i%6:s===n?l=2+(r-t)/i:l=4+(t-n)/i,l/=6,l%=1,[l*360,i*100,c*100]};ct.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[e[0],r*100,s*100]};ct.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[e[0],r*100,s*100]};ct.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],a=t%1*6,i=a%1,l=1-i;let c=0;switch(Math.floor(a)){case 0:{s[0]=1,s[1]=i,s[2]=0;break}case 1:{s[0]=l,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=i;break}case 3:{s[0]=0,s[1]=l,s[2]=1;break}case 4:{s[0]=i,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=l}return c=(1-n)*r,[(n*s[0]+c)*255,(n*s[1]+c)*255,(n*s[2]+c)*255]};ct.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let s=0;return r>0&&(s=t/r),[e[0],s*100,r*100]};ct.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let s=0;return r>0&&r<.5?s=t/(2*r):r>=.5&&r<1&&(s=t/(2*(1-r))),[e[0],s*100,r*100]};ct.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};ct.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,s=r-t;let a=0;return s<1&&(a=(r-s)/(1-s)),[e[0],s*100,a*100]};ct.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};ct.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};ct.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};ct.gray.hsl=function(e){return[0,0,e[0]]};ct.gray.hsv=ct.gray.hsl;ct.gray.hwb=function(e){return[0,100,e[0]]};ct.gray.cmyk=function(e){return[0,0,0,e[0]]};ct.gray.lab=function(e){return[e[0],0,0]};ct.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".slice(r.length)+r};ct.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};function _9t(){const e={},t=Object.keys(ct);for(let{length:n}=t,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function w9t(e){const t=_9t(),n=[e];for(t[e].distance=0;n.length>0;){const r=n.pop(),s=Object.keys(ct[r]);for(let{length:a}=s,i=0;i<a;i++){const l=s[i],c=t[l];c.distance===-1&&(c.distance=t[r].distance+1,c.parent=r,n.unshift(l))}}return t}function C9t(e,t){return function(n){return t(e(n))}}function S9t(e,t){const n=[t[e].parent,e];let r=ct[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),r=C9t(ct[t[s].parent][s],r),s=t[s].parent;return r.conversion=n,r}function E9t(e){const t=w9t(e),n={},r=Object.keys(t);for(let{length:s}=r,a=0;a<s;a++){const i=r[a];t[i].parent!==null&&(n[i]=S9t(i,t))}return n}const Rs={},M9t=Object.keys(ct);function k9t(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function T9t(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=e(n);if(typeof s=="object")for(let{length:a}=s,i=0;i<a;i++)s[i]=Math.round(s[i]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}for(const e of M9t){Rs[e]={},Object.defineProperty(Rs[e],"channels",{value:ct[e].channels}),Object.defineProperty(Rs[e],"labels",{value:ct[e].labels});const t=E9t(e),n=Object.keys(t);for(const r of n){const s=t[r];Rs[e][r]=T9t(s),Rs[e][r].raw=k9t(s)}}const TTe=["keyword","gray","hex"],GL={};for(const e of Object.keys(Rs))GL[[...Rs[e].labels].sort().join("")]=e;const qL={};function pr(e,t){if(!(this instanceof pr))return new pr(e,t);if(t&&t in TTe&&(t=null),t&&!(t in Rs))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof pr)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const s=ws.get(e);if(s===null)throw new Error("Unable to parse color from string: "+e);this.model=s.model,r=Rs[this.model].channels,this.color=s.value.slice(0,r),this.valpha=typeof s.value[r]=="number"?s.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=Rs[this.model].channels;const s=Array.prototype.slice.call(e,0,r);this.color=KL(s,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const s=Object.keys(e);"alpha"in e&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const a=s.sort().join("");if(!(a in GL))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=GL[a];const{labels:i}=Rs[this.model],l=[];for(n=0;n<i.length;n++)l.push(e[i[n]]);this.color=KL(l)}if(qL[this.model])for(r=Rs[this.model].channels,n=0;n<r;n++){const s=qL[this.model][n];s&&(this.color[n]=s(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}pr.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in ws.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return ws.to[t.model](...n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return ws.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=Rs[this.model],{labels:n}=Rs[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new pr([...this.color.map(j9t(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new pr([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:Lr("rgb",0,ms(255)),green:Lr("rgb",1,ms(255)),blue:Lr("rgb",2,ms(255)),hue:Lr(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:Lr("hsl",1,ms(100)),lightness:Lr("hsl",2,ms(100)),saturationv:Lr("hsv",1,ms(100)),value:Lr("hsv",2,ms(100)),chroma:Lr("hcg",1,ms(100)),gray:Lr("hcg",2,ms(100)),white:Lr("hwb",1,ms(100)),wblack:Lr("hwb",2,ms(100)),cyan:Lr("cmyk",0,ms(100)),magenta:Lr("cmyk",1,ms(100)),yellow:Lr("cmyk",2,ms(100)),black:Lr("cmyk",3,ms(100)),x:Lr("xyz",0,ms(95.047)),y:Lr("xyz",1,ms(100)),z:Lr("xyz",2,ms(108.833)),l:Lr("lab",0,ms(100)),a:Lr("lab",1),b:Lr("lab",2),keyword(e){return e!==void 0?new pr(e):Rs[this.model].keyword(this.color)},hex(e){return e!==void 0?new pr(e):ws.to.hex(...this.rgb().round().color)},hexa(e){if(e!==void 0)return new pr(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),ws.to.hex(...t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const s=r/255;t[n]=s<=.04045?s/12.92:((s+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return pr.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),s=t===void 0?.5:t,a=2*s-1,i=n.alpha()-r.alpha(),l=((a*i===-1?a:(a+i)/(1+a*i))+1)/2,c=1-l;return pr.rgb(l*n.red()+c*r.red(),l*n.green()+c*r.green(),l*n.blue()+c*r.blue(),n.alpha()*s+r.alpha()*(1-s))}};for(const e of Object.keys(Rs)){if(TTe.includes(e))continue;const{channels:t}=Rs[e];pr.prototype[e]=function(...n){return this.model===e?new pr(this):n.length>0?new pr(n,e):new pr([...A9t(Rs[this.model][e].raw(this.color)),this.valpha],e)},pr[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=KL(n,t)),new pr(r,e)}}function N9t(e,t){return Number(e.toFixed(t))}function j9t(e){return function(t){return N9t(t,e)}}function Lr(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(qL[r]||=[])[t]=n;return e=e[0],function(r){let s;return r!==void 0?(n&&(r=n(r)),s=this[e](),s.color[t]=r,s):(s=this[e]().color[t],n&&(s=n(s)),s)}}function ms(e){return function(t){return Math.max(0,Math.min(e,t))}}function A9t(e){return Array.isArray(e)?e:[e]}function KL(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}const Ux=R.memo(({size:e="default",className:t,includeDot:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=Ce();return o.jsx("div",{className:V("flex shrink-0 items-center justify-center",t),children:o.jsxs(F,{variant:e==="tiny"||s?"micro":"tiny",color:"super",className:V("bg-superBG pt-three flex shrink-0 items-center rounded-full py-0.5 tracking-wider",{"px-2.5":e==="default","pl-2":e==="default"&&n,"px-2":e==="small","px-1.5":e==="tiny"}),children:[n&&o.jsxs("span",{className:"grid",children:[o.jsx("span",{className:"bg-super mr-1 size-1.5 rounded-full",style:{gridArea:"1/-1"}}),o.jsx("span",{className:"bg-super mr-1 size-1.5 animate-ping rounded-full",style:{gridArea:"1/-1"}})]}),r({defaultMessage:"Live",id:"Dn82ALx/+V"}).toUpperCase()]})})});Ux.displayName="LiveIndicator";const I9t=["West First Round","East First Round","Western Conference Semifinals","Eastern Conference Semifinals","Western Conference Finals","Eastern Conference Finals","NBA Finals"],NTe=e=>I9t.includes(e);function R9t(e){return e!==null&&typeof e=="object"&&"is_bye_event"in e&&typeof e.is_bye_event=="boolean"}function jTe(e,t){return t.find(n=>String(n.teamId)===String(e))}const P9t=e=>{switch(e){case"nba":case"wnba":case"ncaam":case"ncaaw":case"mlb":case"atp":case"wta":return"/static/images/sports/nba/logos/nba-logo-generic.png";case"nfl":return"/static/images/sports/nfl/logos/nfl-logo-generic.png";case"ipl":case"cricket":case"icc":return"/static/images/sports/cricket/logos/cricket-logo-generic.png";default:return""}},O9t="#64645F";function Ey(e,t,n){const r={teamId:e,logo:P9t(n),color:O9t};return jTe(e,t)??r}function L9t(e,t){return t.find(n=>n.teamId===e)}function Aw(e){return[...e].sort((t,n)=>n.teamLocationType.teamLocationTypeId-t.teamLocationType.teamLocationTypeId)}function rk(e){if(!e||e.wins+e.losses+e.ties===0)return"";const{wins:t,losses:n,ties:r}=e;return r?`${t}-${n}-${r}`:`${t}-${n}`}function D9t(e,t){return t.winProbabilities?.find(n=>n.teamId===e)}function F9t(e,t,n,r){const s=Ey(e,n,r),a=L9t(e,t),i=t.find(c=>c.teamId===e)?.seed,l=U9t(r);return{teamId:a.teamId,logo:s.logo,color:s.color,nickname:l?a.location:a.nickname,abbreviation:a.abbreviation,record:a.record,winner:a.isWinner,score:a.score,seed:i}}const U9t=e=>e==="ncaam"||e==="ncaaw";function B9t(e,t,n,r){const s=Ey(e,n,r),a=t.find(i=>i.id===e);return a?{teamId:a.id,logo:s.logo,color:s.color,nickname:a.title??"",abbreviation:a.abbreviation??""}:{teamId:e,logo:s.logo,color:s.color,nickname:"",abbreviation:""}}function V9t(e,t,n){return Aw(e)?.map(r=>F9t(r.teamId,e,t,n))}function Hmn(e,t,n){return e.map(r=>B9t(r.id,e,t,n))}function zmn(e,t){for(const n of t)for(const r of n.divisions)for(const s of r.teams)if(s.teamId===e)return{conference:n.abbreviation,division:r.name};return null}const Gmn=e=>e?"nickname"in e?e.nickname:e.title:null,qmn=e=>e?"teamId"in e?e.teamId:e.id:null,Kmn=e=>"score"in e?e.score:e.sub_text&&e.text?`${e.text} ${e.sub_text}`:e.text,$9t=e=>"isWinner"in e?e.isWinner:e.won,Ymn=e=>e?e.some(t=>$9t(t)):!1,Qmn=e=>e?"teamId"in(e[0]??{})?e.every(t=>"teamId"in t)&&!e.some(t=>!t.teamId||String(t.teamId)==="TBD"):e.every(t=>"id"in t)&&!e.some(t=>t.id==="TBD"):!1,Xmn=e=>!e.team_1||!e.team_2||R9t(e.extra)&&e.extra.is_bye_event?!1:!!(e.team_1.id&&e.team_2.id&&e.team_1.id!=="TBD"&&e.team_2.id!=="TBD"),Zmn=e=>"id"in e,Jmn=e=>!!e.team_1.won||!!e.team_2.won;var F0={},Mie;function Iw(){if(Mie)return F0;Mie=1,F0.__esModule=!0,F0.default=void 0;var e={top:"top",left:"left",right:"right",bottom:"bottom"};return F0.default=e,F0}var W9t=Iw();const H9t=Ka(W9t);function OS(e,t,n,r,s){var a;switch(e){case"center":return s;case"min":return n??0;case"max":return r??0;case"outside":default:return(a=(t??0)<s?n:r)!=null?a:0}}function kie(e){var t=e.from,n=e.to;return{fromX:t.x,toX:n.x,fromY:t.y,toY:n.y,opacity:1}}function ATe(e){var t=e.scale,n=e.animateXOrY,r=e.animationTrajectory,s=r===void 0?"outside":r,a=n==="x";return f.useMemo(function(){var i=t.range().map(iw),l=i[0],c=i[1],u=c!=null&&l!=null&&c<l,d=u?[c,l]:[l,c],m=d[0],p=d[1],h=c!=null&&l!=null?Math.abs(c-l):0,g=(m??0)+h/2,y=s;!a&&s==="min"&&(y="max"),!a&&s==="max"&&(y="min");var x=function(b){var _=b.from,w=b.to;return{fromX:a?OS(y,_.x,m,p,g):_.x,toX:a?OS(y,_.x,m,p,g):w.x,fromY:a?_.y:OS(y,_.y,m,p,g),toY:a?w.y:OS(y,_.y,m,p,g),opacity:0}};return{from:x,leave:x,enter:kie,update:kie}},[t,a,s])}function l1(){return l1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l1.apply(null,arguments)}function z9t(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.scale,a=e.tickClassName,i=e.tickComponent,l=e.tickLabelProps,c=e.tickStroke,u=c===void 0?"#222":c,d=e.tickTransform,m=e.ticks,p=e.tickLineProps,h=e.animationTrajectory,g=H$(m,l1({},ATe({scale:s,animateXOrY:n?"x":"y",animationTrajectory:h}),{keys:function(x){return"tick-"+x.value+"-"+x.index}}));return R.createElement(R.Fragment,null,g(function(y,x,v,b){var _,w,C=y.fromX,S=y.toX,E=y.fromY,M=y.toY,k=y.opacity,N=v.key,P=(_=(w=l[b])!=null?w:l[0])!=null?_:{};return x==null||N==null?null:R.createElement(vu.g,{key:N,className:V("visx-axis-tick",a),transform:d},!t&&R.createElement(vu.line,l1({x1:C,x2:S,y1:E,y2:M,stroke:u,strokeLinecap:"square",strokeOpacity:k},p)),R.createElement(vu.g,{key:b,transform:ikt([S,M],function(L,O){var A;return"translate("+L+","+(O+(r===H9t.bottom&&typeof P.fontSize=="number"?(A=P.fontSize)!=null?A:10:0))+")"}),opacity:k},i?i(l1({},P,{x:S,y:M,formattedValue:x?.formattedValue})):R.createElement(QT,P,x?.formattedValue)))}))}var LS={};const UH=$y(p2t),BH=$y(o2t);var DS={};const ITe=$y(GEt),RTe=$y(SPt);var FS={},Tie;function G9t(){if(Tie)return FS;Tie=1,FS.__esModule=!0,FS.default=n;var e=t(Iw());function t(r){return r&&r.__esModule?r:{default:r}}function n(r){var s=r.labelOffset,a=r.labelProps,i=r.orientation,l=r.range,c=r.tickLabelFontSize,u=r.tickLength,d=i===e.default.left||i===e.default.top?-1:1,m,p,h;if(i===e.default.top||i===e.default.bottom){var g=i===e.default.bottom&&typeof a.fontSize=="number"?a.fontSize:0;m=(Number(l[0])+Number(l[l.length-1]))/2,p=d*(u+s+c+g)}else m=d*((Number(l[0])+Number(l[l.length-1]))/2),p=-(u+s),h="rotate("+d*90+")";return{x:m,y:p,transform:h}}return FS}var US={},Nie;function q9t(){if(Nie)return US;Nie=1,US.__esModule=!0,US.default=c;var e=i(Fy()),t=i(e_()),n=ITe,r=UH,s=RTe,a=i(Iw());function i(u){return u&&u.__esModule?u:{default:u}}function l(){return l=Object.assign?Object.assign.bind():function(u){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var p in m)({}).hasOwnProperty.call(m,p)&&(u[p]=m[p])}return u},l.apply(null,arguments)}function c(u){var d=u.hideTicks,m=u.horizontal,p=u.orientation,h=u.tickClassName,g=u.tickComponent,y=u.tickLabelProps,x=u.tickStroke,v=x===void 0?"#222":x,b=u.tickTransform,_=u.ticks,w=u.strokeWidth,C=u.tickLineProps;return _.map(function(S){var E,M=S.value,k=S.index,N=S.from,P=S.to,L=S.formattedValue,O=(E=y[k])!=null?E:{},A=Math.max(10,typeof O.fontSize=="number"&&O.fontSize||0),j=P.y+(m&&p!==a.default.top?A:0);return e.default.createElement(r.Group,{key:"visx-tick-"+M+"-"+k,className:(0,t.default)("visx-axis-tick",h),transform:b},!d&&e.default.createElement(n.Line,l({from:N,to:P,stroke:v,strokeWidth:w,strokeLinecap:"square"},C)),g?g(l({},O,{x:P.x,y:j,formattedValue:L})):e.default.createElement(s.Text,l({x:P.x,y:j},O),L))})}return US}var jie;function K9t(){if(jie)return DS;jie=1,DS.__esModule=!0,DS.default=d;var e=l(Fy()),t=l(e_()),n=ITe,r=RTe,s=l(G9t()),a=l(Iw()),i=l(q9t());function l(m){return m&&m.__esModule?m:{default:m}}function c(){return c=Object.assign?Object.assign.bind():function(m){for(var p=1;p<arguments.length;p++){var h=arguments[p];for(var g in h)({}).hasOwnProperty.call(h,g)&&(m[g]=h[g])}return m},c.apply(null,arguments)}var u={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function d(m){var p=m.axisFromPoint,h=m.axisLineClassName,g=m.axisToPoint,y=m.hideAxisLine,x=m.hideTicks,v=m.horizontal,b=m.label,_=b===void 0?"":b,w=m.labelClassName,C=m.labelOffset,S=C===void 0?14:C,E=m.labelProps,M=m.orientation,k=M===void 0?a.default.bottom:M,N=m.scale,P=m.stroke,L=P===void 0?"#222":P,O=m.strokeDasharray,A=m.strokeWidth,j=A===void 0?1:A,T=m.tickClassName,I=m.tickComponent,U=m.tickLineProps,B=m.tickLabelProps,D=m.tickLength,W=D===void 0?8:D,z=m.tickStroke,$=z===void 0?"#222":z,X=m.tickTransform,q=m.ticks,Y=m.ticksComponent,G=Y===void 0?i.default:Y,J=c({},u,E),K=c({},u,typeof B=="object"?B:null),te=q.map(function(se){var me=se.value,oe=se.index;return typeof B=="function"?B(me,oe,q):K}),re=Math.max.apply(Math,[10].concat(te.map(function(se){return typeof se.fontSize=="number"?se.fontSize:0})));return e.default.createElement(e.default.Fragment,null,G({hideTicks:x,horizontal:v,orientation:k,scale:N,tickClassName:T,tickComponent:I,tickLabelProps:te,tickStroke:$,tickTransform:X,ticks:q,strokeWidth:j,tickLineProps:U}),!y&&e.default.createElement(n.Line,{className:(0,t.default)("visx-axis-line",h),from:p,to:g,stroke:L,strokeWidth:j,strokeDasharray:O}),_&&e.default.createElement(r.Text,c({className:(0,t.default)("visx-axis-label",w)},(0,s.default)({labelOffset:S,labelProps:J,orientation:k,range:N.range(),tickLabelFontSize:re,tickLength:W}),J),_))}return DS}var BS={},Aie;function Y9t(){if(Aie)return BS;Aie=1,BS.__esModule=!0,BS.default=e;function e(t,n){n===void 0&&(n="center");var r=t;if(n!=="start"&&"bandwidth"in r){var s=r.bandwidth();return n==="center"&&(s/=2),r.round()&&(s=Math.round(s)),function(a){var i=r(a);return typeof i=="number"?i+s:i}}return t}return BS}var VS={},Iie;function Q9t(){if(Iie)return VS;Iie=1,VS.__esModule=!0,VS.default=t;var e=BH;function t(n){var r=n;return"tickFormat"in r?r.tickFormat():e.toString}return VS}var $S={};const PTe=$y(IPt);var Rie;function X9t(){if(Rie)return $S;Rie=1,$S.__esModule=!0,$S.default=t;var e=PTe;function t(n,r){var s=n.x,a=n.y;return new e.Point(r?{x:s,y:a}:{x:a,y:s})}return $S}var _h={},Pie;function Z9t(){if(Pie)return _h;Pie=1,_h.__esModule=!0,_h.default=n,_h.defaultAxisRangePadding=void 0;function e(){return e=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)({}).hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},e.apply(null,arguments)}var t=_h.defaultAxisRangePadding=0;function n(r){return r===void 0&&(r=t),typeof r=="number"?{start:r,end:r}:e({start:t,end:t},r)}return _h}var Oie;function J9t(){if(Oie)return LS;Oie=1,LS.__esModule=!0,LS.default=g,m(fV());var e=m(Fy()),t=m(e_()),n=UH,r=BH,s=m(K9t()),a=m(Y9t()),i=m(Q9t()),l=m(X9t()),c=m(Iw()),u=m(Z9t()),d=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function m(y){return y&&y.__esModule?y:{default:y}}function p(){return p=Object.assign?Object.assign.bind():function(y){for(var x=1;x<arguments.length;x++){var v=arguments[x];for(var b in v)({}).hasOwnProperty.call(v,b)&&(y[b]=v[b])}return y},p.apply(null,arguments)}function h(y,x){if(y==null)return{};var v={};for(var b in y)if({}.hasOwnProperty.call(y,b)){if(x.includes(b))continue;v[b]=y[b]}return v}function g(y){var x=y.children,v=x===void 0?s.default:x,b=y.axisClassName,_=y.hideAxisLine,w=_===void 0?!1:_,C=y.hideTicks,S=C===void 0?!1:C,E=y.hideZero,M=E===void 0?!1:E,k=y.innerRef,N=y.left,P=N===void 0?0:N,L=y.numTicks,O=L===void 0?10:L,A=y.orientation,j=A===void 0?c.default.bottom:A,T=y.rangePadding,I=T===void 0?0:T,U=y.scale,B=y.tickFormat,D=y.tickLength,W=D===void 0?8:D,z=y.tickValues,$=y.top,X=$===void 0?0:$,q=h(y,d),Y=B??(0,i.default)(U),G=j===c.default.left,J=j===c.default.top,K=J||j===c.default.bottom,te=(0,a.default)(U),re=G||J?-1:1,se=U.range(),me=(0,u.default)(I),oe=(0,l.default)({x:Number(se[0])+.5-me.start,y:0},K),ge=(0,l.default)({x:Number(se[se.length-1])+.5+me.end,y:0},K),xe=(z??(0,r.getTicks)(U,O)).filter(function(_e){return!M||_e!==0&&_e!=="0"}).map(function(_e,be){return{value:_e,index:be}}),ye=xe.map(function(_e){var be=_e.value,Ne=_e.index,Ee=(0,r.coerceNumber)(te(be));return{value:be,index:Ne,from:(0,l.default)({x:Ee,y:0},K),to:(0,l.default)({x:Ee,y:W*re},K),formattedValue:Y(be,Ne,xe)}});return e.default.createElement(n.Group,{className:(0,t.default)("visx-axis",b),innerRef:k,top:X,left:P},v(p({},q,{axisFromPoint:oe,axisToPoint:ge,hideAxisLine:w,hideTicks:S,hideZero:M,horizontal:K,numTicks:O,orientation:j,rangePadding:I,scale:U,tickFormat:Y,tickLength:W,tickPosition:te,tickSign:re,ticks:ye})))}return LS}var eOt=J9t();const tOt=Ka(eOt);var nOt=["animationTrajectory","tickComponent"];function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sk.apply(null,arguments)}function rOt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function sOt(e){var t=e.animationTrajectory,n=e.tickComponent,r=rOt(e,nOt),s=f.useMemo(function(){return function(i){return R.createElement(z9t,sk({},i,{tickComponent:n,animationTrajectory:t}))}},[t,n]);return R.createElement(tOt,sk({},r,{ticksComponent:s}))}var WS={},HS={},Lie;function aOt(){if(Lie)return HS;Lie=1,HS.__esModule=!0,HS.default=e;function e(t){return"bandwidth"in t?t.bandwidth():0}return HS}var Die;function iOt(){if(Die)return WS;Die=1,WS.__esModule=!0,WS.default=p;var e=u(fV()),t=u(Fy()),n=u(e_()),r=u(D5e()),s=UH,a=PTe,i=BH,l=u(aOt()),c=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function u(h){return h&&h.__esModule?h:{default:h}}function d(){return d=Object.assign?Object.assign.bind():function(h){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(h[x]=y[x])}return h},d.apply(this,arguments)}function m(h,g){if(h==null)return{};var y={},x=Object.keys(h),v,b;for(b=0;b<x.length;b++)v=x[b],!(g.indexOf(v)>=0)&&(y[v]=h[v]);return y}function p(h){var g=h.top,y=g===void 0?0:g,x=h.left,v=x===void 0?0:x,b=h.scale,_=h.width,w=h.stroke,C=w===void 0?"#eaf0f6":w,S=h.strokeWidth,E=S===void 0?1:S,M=h.strokeDasharray,k=h.className,N=h.children,P=h.numTicks,L=P===void 0?10:P,O=h.lineStyle,A=h.offset,j=h.tickValues,T=m(h,c),I=j??(0,i.getTicks)(b,L),U=(A??0)+(0,l.default)(b)/2,B=I.map(function(D,W){var z,$=((z=(0,i.coerceNumber)(b(D)))!=null?z:0)+U;return{index:W,from:new a.Point({x:0,y:$}),to:new a.Point({x:_,y:$})}});return t.default.createElement(s.Group,{className:(0,n.default)("visx-rows",k),top:y,left:v},N?N({lines:B}):B.map(function(D){var W=D.from,z=D.to,$=D.index;return t.default.createElement(r.default,d({key:"row-line-"+$,from:W,to:z,stroke:C,strokeWidth:E,strokeDasharray:M,style:O},T))}))}return p.propTypes={tickValues:e.default.array,width:e.default.number.isRequired},WS}var oOt=iOt();const lOt=Ka(oOt);var cOt=["scale","lines","animationTrajectory","animateXOrY","lineKey","lineStyle"];function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ak.apply(null,arguments)}function uOt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function OTe(e){var t=e.scale,n=e.lines,r=e.animationTrajectory,s=e.animateXOrY,a=e.lineKey,i=e.lineStyle,l=uOt(e,cOt),c=H$(n,ak({},ATe({scale:t,animateXOrY:s,animationTrajectory:r}),{key:a}));return R.createElement(R.Fragment,null,c(function(u,d,m){var p=u.fromX,h=u.toX,g=u.fromY,y=u.toY,x=u.opacity,v=m.key;return R.createElement(vu.line,ak({key:v,x1:p,x2:h,y1:g,y2:y,strokeOpacity:x,style:i},l))}))}OTe.propTypes={lineKey:Ue.func.isRequired};var dOt=["scale","width","numTicks","tickValues","offset","className","animationTrajectory","top","left"];function YL(){return YL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YL.apply(null,arguments)}function fOt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function LTe(e){var t=e.scale,n=e.width,r=e.numTicks,s=e.tickValues,a=e.offset,i=e.className,l=e.animationTrajectory,c=e.top,u=e.left,d=fOt(e,dOt);return R.createElement(lOt,{scale:t,width:n,numTicks:r,tickValues:s,className:i,top:c,left:u,offset:a},function(m){var p=m.lines;return R.createElement(OTe,YL({scale:t,lines:p,animationTrajectory:l,animateXOrY:"y",lineKey:function(g){var y,x;return"row-"+((y=g==null||(x=g.from)==null?void 0:x.y)!=null?y:"")+"-"+g.index}},d))})}function Fie({ref:e}){const t=e.current,[n,r,s]=f.useMemo(()=>{if(t){const a=t.querySelectorAll(".visx-axis-tick"),i=Array.from(a).map(l=>{const{width:c,height:u}=l.getBBox();return[c,u]});if(i.length){const l=Math.max(...i.map(u=>u[0])),c=Math.max(...i.map(u=>u[1]));return[l,c,i.length*l]}}return[0,0,0]},[t]);return f.useMemo(()=>({minRequiredWidth:s,maxLabelWidth:n,maxLabelHeight:r}),[r,n,s])}function nN(){const e=f.useRef(null),{maxLabelWidth:t,minRequiredWidth:n}=Fie({ref:e}),r=f.useRef(null),{maxLabelWidth:s}=Fie({ref:r});return f.useMemo(()=>({xAxisRef:e,yAxisRef:r,maxXLabelWidth:t,maxYLabelWidth:s,minXRequiredWidth:n}),[t,s,n])}const Uie=40,XI=e=>typeof e=="number";function rN({config:e,innerWidth:t,innerHeight:n,maxXLabelWidth:r}){let s=Math.floor(t/(r+Uie));XI(e?.x?.numTicks)&&XI(s)&&(s=Math.min(s,e.x.numTicks)),r||(s=void 0);let a=Math.floor(n/Uie);return XI(e?.y?.numTicks)&&(a=Math.min(a,e.y.numTicks)),{xTiltTicks:!1,xNumTicks:s,yNumTicks:a}}const DTe="fill-quiet font-mono text-xs font-bold truncate max-w-[100px]",Bie="fill-quiet text-xs font-semibold font-sans",mOt=(e,t,n)=>n?{transform:"rotate(-10deg)",transformOrigin:`${e}px ${t}px`,textAnchor:"end"}:{textAnchor:"middle"};function pOt(e){const{shouldTilt:t,x:n,y:r,formattedValue:s,style:a,className:i,...l}=e;return o.jsx("text",{...l,x:n,y:r,dy:"2px",className:V(DTe,i),style:{...a,...mOt(n,r,t)},children:s})}const Rw=R.memo(function(t){const{margin:n,height:r,width:s,xScale:a,yScale:i,xFormat:l,yFormat:c,yNumTicks:u,xNumTicks:d,xTickValues:m,yTickValues:p,xTiltTicks:h,animated:g,tickColor:y,axisColor:x,xAxisRef:v,yAxisRef:b,xAxisLabel:_,yAxisLabel:w,gridDashed:C=!1,gridStrokeWidth:S=.5}=t,E=Ds(),M=g?sOt:nf,k=g?LTe:Up,N=f.useCallback(L=>o.jsx(pOt,{...L,shouldTilt:h}),[h]),P=f.useMemo(()=>({className:DTe,textAnchor:"start",dx:"0.75em",dy:"-0.25em"}),[]);return o.jsxs(o.Fragment,{children:[o.jsx(nf,{orientation:Fa.bottom,top:r-n.bottom,scale:a,stroke:x,hideAxisLine:!0,label:_,labelClassName:Bie,tickFormat:l,numTicks:d,tickStroke:y,innerRef:v,tickValues:m,tickComponent:N,axisClassName:"select-none"}),o.jsx(M,{orientation:Fa.left,left:n.left,hideAxisLine:!0,label:w,labelOffset:7.5,labelClassName:Bie,scale:i,tickFormat:c,stroke:x,tickStroke:y,hideTicks:!0,innerRef:b,tickLabelProps:P,numTicks:u,tickValues:p,axisClassName:"select-none"}),E&&o.jsx(k,{left:n.left,scale:i,width:s-n.right-n.left*2,strokeDasharray:C?"8,4":void 0,stroke:x,strokeWidth:S,numTicks:u})]})});Rw.displayName="Axes";const FTe=R.memo(({color:e})=>o.jsx("div",{className:"size-[14px] rounded-full",style:{backgroundColor:e}}));FTe.displayName="Tile";const Pw=R.memo(({entries:e})=>o.jsx("ol",{className:"my-sm gap-x-md gap-y-xs flex flex-wrap",children:e.map(({key:t,color:n})=>o.jsxs("li",{className:"gap-xs fade-in flex items-center transition-all duration-200",children:[o.jsx(FTe,{color:n}),o.jsx(F,{variant:"tiny",color:"light",children:String(t)})]},String(t)))}));Pw.displayName="Legend";const Bx=R.memo(({width:e,height:t,children:n,ref:r})=>{const s=f.useMemo(()=>({position:"relative",height:t,overflow:"visible"}),[t]);return o.jsx(H,{style:s,children:o.jsx("svg",{width:e,ref:r,height:t,style:{position:"absolute",left:0,top:0,overflow:"visible"},children:n})})});Bx.displayName="Svg";function Vie(e){return function(){return e}}function hOt(e){return e[0]}function gOt(e){return e[1]}function ik(){this._=null}function sN(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ik.prototype={constructor:ik,insert:function(e,t){var n,r,s;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=$ie(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(s=r.R,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.R&&(U0(this,n),e=n,n=e.U),n.C=!1,r.C=!0,B0(this,r))):(s=r.L,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.L&&(B0(this,n),e=n,n=e.U),n.C=!1,r.C=!0,U0(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,s=e.R,a,i;if(r?s?a=$ie(s):a=r:a=s,t?t.L===e?t.L=a:t.R=a:this._=a,r&&s?(i=a.C,a.C=e.C,a.L=r,r.U=a,a!==s?(t=a.U,a.U=e.U,e=a.R,t.L=e,a.R=s,s.U=a):(a.U=t,t=a,e=a.R)):(i=e.C,e=a),e&&(e.U=t),!i){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,U0(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,B0(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,U0(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,B0(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,U0(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,B0(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function U0(e,t){var n=t,r=t.R,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function B0(e,t){var n=t,r=t.L,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function $ie(e){for(;e.L;)e=e.L;return e}function hv(e,t,n,r){var s=[null,null],a=la.push(s)-1;return s.left=e,s.right=t,n&&ok(s,e,t,n),r&&ok(s,t,e,r),zi[e.index].halfedges.push(a),zi[t.index].halfedges.push(a),s}function V0(e,t,n){var r=[t,n];return r.left=e,r}function ok(e,t,n,r){!e[0]&&!e[1]?(e[0]=r,e.left=t,e.right=n):e.left===n?e[1]=r:e[0]=r}function yOt(e,t,n,r,s){var a=e[0],i=e[1],l=a[0],c=a[1],u=i[0],d=i[1],m=0,p=1,h=u-l,g=d-c,y;if(y=t-l,!(!h&&y>0)){if(y/=h,h<0){if(y<m)return;y<p&&(p=y)}else if(h>0){if(y>p)return;y>m&&(m=y)}if(y=r-l,!(!h&&y<0)){if(y/=h,h<0){if(y>p)return;y>m&&(m=y)}else if(h>0){if(y<m)return;y<p&&(p=y)}if(y=n-c,!(!g&&y>0)){if(y/=g,g<0){if(y<m)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>m&&(m=y)}if(y=s-c,!(!g&&y<0)){if(y/=g,g<0){if(y>p)return;y>m&&(m=y)}else if(g>0){if(y<m)return;y<p&&(p=y)}return!(m>0)&&!(p<1)||(m>0&&(e[0]=[l+m*h,c+m*g]),p<1&&(e[1]=[l+p*h,c+p*g])),!0}}}}}function xOt(e,t,n,r,s){var a=e[1];if(a)return!0;var i=e[0],l=e.left,c=e.right,u=l[0],d=l[1],m=c[0],p=c[1],h=(u+m)/2,g=(d+p)/2,y,x;if(p===d){if(h<t||h>=r)return;if(u>m){if(!i)i=[h,n];else if(i[1]>=s)return;a=[h,s]}else{if(!i)i=[h,s];else if(i[1]<n)return;a=[h,n]}}else if(y=(u-m)/(p-d),x=g-y*h,y<-1||y>1)if(u>m){if(!i)i=[(n-x)/y,n];else if(i[1]>=s)return;a=[(s-x)/y,s]}else{if(!i)i=[(s-x)/y,s];else if(i[1]<n)return;a=[(n-x)/y,n]}else if(d<p){if(!i)i=[t,y*t+x];else if(i[0]>=r)return;a=[r,y*r+x]}else{if(!i)i=[r,y*r+x];else if(i[0]<t)return;a=[t,y*t+x]}return e[0]=i,e[1]=a,!0}function vOt(e,t,n,r){for(var s=la.length,a;s--;)(!xOt(a=la[s],e,t,n,r)||!yOt(a,e,t,n,r)||!(Math.abs(a[0][0]-a[1][0])>mr||Math.abs(a[0][1]-a[1][1])>mr))&&delete la[s]}function bOt(e){return zi[e.index]={site:e,halfedges:[]}}function _Ot(e,t){var n=e.site,r=t.left,s=t.right;return n===s&&(s=r,r=n),s?Math.atan2(s[1]-r[1],s[0]-r[0]):(n===r?(r=t[1],s=t[0]):(r=t[0],s=t[1]),Math.atan2(r[0]-s[0],s[1]-r[1]))}function UTe(e,t){return t[+(t.left!==e.site)]}function wOt(e,t){return t[+(t.left===e.site)]}function COt(){for(var e=0,t=zi.length,n,r,s,a;e<t;++e)if((n=zi[e])&&(a=(r=n.halfedges).length)){var i=new Array(a),l=new Array(a);for(s=0;s<a;++s)i[s]=s,l[s]=_Ot(n,la[r[s]]);for(i.sort(function(c,u){return l[u]-l[c]}),s=0;s<a;++s)l[s]=r[i[s]];for(s=0;s<a;++s)r[s]=l[s]}}function SOt(e,t,n,r){var s=zi.length,a,i,l,c,u,d,m,p,h,g,y,x,v=!0;for(a=0;a<s;++a)if(i=zi[a]){for(l=i.site,u=i.halfedges,c=u.length;c--;)la[u[c]]||u.splice(c,1);for(c=0,d=u.length;c<d;)g=wOt(i,la[u[c]]),y=g[0],x=g[1],m=UTe(i,la[u[++c%d]]),p=m[0],h=m[1],(Math.abs(y-p)>mr||Math.abs(x-h)>mr)&&(u.splice(c,0,la.push(V0(l,g,Math.abs(y-e)<mr&&r-x>mr?[e,Math.abs(p-e)<mr?h:r]:Math.abs(x-r)<mr&&n-y>mr?[Math.abs(h-r)<mr?p:n,r]:Math.abs(y-n)<mr&&x-t>mr?[n,Math.abs(p-n)<mr?h:t]:Math.abs(x-t)<mr&&y-e>mr?[Math.abs(h-t)<mr?p:e,t]:null))-1),++d);d&&(v=!1)}if(v){var b,_,w,C=1/0;for(a=0,v=null;a<s;++a)(i=zi[a])&&(l=i.site,b=l[0]-e,_=l[1]-t,w=b*b+_*_,w<C&&(C=w,v=i));if(v){var S=[e,t],E=[e,r],M=[n,r],k=[n,t];v.halfedges.push(la.push(V0(l=v.site,S,E))-1,la.push(V0(l,E,M))-1,la.push(V0(l,M,k))-1,la.push(V0(l,k,S))-1)}}for(a=0;a<s;++a)(i=zi[a])&&(i.halfedges.length||delete zi[a])}var BTe=[],VH;function EOt(){sN(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jh(e){var t=e.P,n=e.N;if(!(!t||!n)){var r=t.site,s=e.site,a=n.site;if(r!==a){var i=s[0],l=s[1],c=r[0]-i,u=r[1]-l,d=a[0]-i,m=a[1]-l,p=2*(c*m-u*d);if(!(p>=-1e-12)){var h=c*c+u*u,g=d*d+m*m,y=(m*h-u*g)/p,x=(c*g-d*h)/p,v=BTe.pop()||new EOt;v.arc=e,v.site=s,v.x=y+i,v.y=(v.cy=x+l)+Math.sqrt(y*y+x*x),e.circle=v;for(var b=null,_=$b._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x)if(_.L)_=_.L;else{b=_.P;break}else if(_.R)_=_.R;else{b=_;break}$b.insert(b,v),b||(VH=v)}}}}function Ng(e){var t=e.circle;t&&(t.P||(VH=t.N),$b.remove(t),BTe.push(t),sN(t),e.circle=null)}var VTe=[];function MOt(){sN(this),this.edge=this.site=this.circle=null}function Wie(e){var t=VTe.pop()||new MOt;return t.site=e,t}function ZI(e){Ng(e),jg.remove(e),VTe.push(e),sN(e)}function kOt(e){var t=e.circle,n=t.x,r=t.cy,s=[n,r],a=e.P,i=e.N,l=[e];ZI(e);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<mr&&Math.abs(r-c.circle.cy)<mr;)a=c.P,l.unshift(c),ZI(c),c=a;l.unshift(c),Ng(c);for(var u=i;u.circle&&Math.abs(n-u.circle.x)<mr&&Math.abs(r-u.circle.cy)<mr;)i=u.N,l.push(u),ZI(u),u=i;l.push(u),Ng(u);var d=l.length,m;for(m=1;m<d;++m)u=l[m],c=l[m-1],ok(u.edge,c.site,u.site,s);c=l[0],u=l[d-1],u.edge=hv(c.site,u.site,null,s),Jh(c),Jh(u)}function TOt(e){for(var t=e[0],n=e[1],r,s,a,i,l=jg._;l;)if(a=$Te(l,n)-t,a>mr)l=l.L;else if(i=t-NOt(l,n),i>mr){if(!l.R){r=l;break}l=l.R}else{a>-1e-6?(r=l.P,s=l):i>-1e-6?(r=l,s=l.N):r=s=l;break}bOt(e);var c=Wie(e);if(jg.insert(r,c),!(!r&&!s)){if(r===s){Ng(r),s=Wie(r.site),jg.insert(c,s),c.edge=s.edge=hv(r.site,c.site),Jh(r),Jh(s);return}if(!s){c.edge=hv(r.site,c.site);return}Ng(r),Ng(s);var u=r.site,d=u[0],m=u[1],p=e[0]-d,h=e[1]-m,g=s.site,y=g[0]-d,x=g[1]-m,v=2*(p*x-h*y),b=p*p+h*h,_=y*y+x*x,w=[(x*b-h*_)/v+d,(p*_-y*b)/v+m];ok(s.edge,u,g,w),c.edge=hv(u,e,null,w),s.edge=hv(e,g,null,w),Jh(r),Jh(s)}}function $Te(e,t){var n=e.site,r=n[0],s=n[1],a=s-t;if(!a)return r;var i=e.P;if(!i)return-1/0;n=i.site;var l=n[0],c=n[1],u=c-t;if(!u)return l;var d=l-r,m=1/a-1/u,p=d/u;return m?(-p+Math.sqrt(p*p-2*m*(d*d/(-2*u)-c+u/2+s-a/2)))/m+r:(r+l)/2}function NOt(e,t){var n=e.N;if(n)return $Te(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var mr=1e-6,jg,zi,$b,la;function jOt(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function AOt(e,t){return t[1]-e[1]||t[0]-e[0]}function QL(e,t){var n=e.sort(AOt).pop(),r,s,a;for(la=[],zi=new Array(e.length),jg=new ik,$b=new ik;;)if(a=VH,n&&(!a||n[1]<a.y||n[1]===a.y&&n[0]<a.x))(n[0]!==r||n[1]!==s)&&(TOt(n),r=n[0],s=n[1]),n=e.pop();else if(a)kOt(a.arc);else break;if(COt(),t){var i=+t[0][0],l=+t[0][1],c=+t[1][0],u=+t[1][1];vOt(i,l,c,u),SOt(i,l,c,u)}this.edges=la,this.cells=zi,jg=$b=la=zi=null}QL.prototype={constructor:QL,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(r){return UTe(t,e[r])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(l=(a=n.halfedges).length)for(var s=n.site,a,i=-1,l,c,u=t[a[l-1]],d=u.left===s?u.right:u.left;++i<l;)c=d,u=t[a[i]],d=u.left===s?u.right:u.left,c&&d&&r<c.index&&r<d.index&&jOt(s,c,d)<0&&e.push([s.data,c.data,d.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r=this,s,a=r._found||0,i=r.cells.length,l;!(l=r.cells[a]);)if(++a>=i)return null;var c=e-l.site[0],u=t-l.site[1],d=c*c+u*u;do l=r.cells[s=a],a=null,l.halfedges.forEach(function(m){var p=r.edges[m],h=p.left;if(!((h===l.site||!h)&&!(h=p.right))){var g=e-h[0],y=t-h[1],x=g*g+y*y;x<d&&(d=x,a=h.index)}});while(a!==null);return r._found=s,n==null||d<=n*n?l.site:null}};function IOt(){var e=hOt,t=gOt,n=null;function r(s){return new QL(s.map(function(a,i){var l=[Math.round(e(a,i,s)/mr)*mr,Math.round(t(a,i,s)/mr)*mr];return l.index=i,l.data=a,l}),n)}return r.polygons=function(s){return r(s).polygons()},r.links=function(s){return r(s).links()},r.triangles=function(s){return r(s).triangles()},r.x=function(s){return arguments.length?(e=typeof s=="function"?s:Vie(+s),r):e},r.y=function(s){return arguments.length?(t=typeof s=="function"?s:Vie(+s),r):t},r.extent=function(s){return arguments.length?(n=s==null?null:[[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(s){return arguments.length?(n=s==null?null:[[0,0],[+s[0],+s[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}var Hie=1;function ROt(e){var t=e.width,n=t===void 0?0:t,r=e.height,s=r===void 0?0:r,a=e.x,i=e.y,l=IOt();return a&&l.x(a),i&&l.y(i),l.extent([[-1,-1],[n+Hie,s+Hie]]),l}function aN({data:e,innerHeight:t,innerWidth:n,xScale:r,yScale:s,xGet:a,yGet:i,voronoiRadius:l=void 0}){const{showTooltip:c,hideTooltip:u,tooltipData:d}=jH(),m=f.useMemo(()=>ROt({width:n,height:t,x:g=>r(a(g)),y:g=>s(i(g))})(e),[e,n,t,r,s,a,i]),p=f.useCallback(h=>{const{x:g,y}=TH(h)??{x:0,y:0},x=m.find(g,y,l);if(!x)return u();c({tooltipData:{localPoint:{x:g,y},voronoiSite:x}})},[c,u,m,l]);return f.useMemo(()=>({showTooltip:c,hideTooltip:u,handleTooltip:p,tooltipData:d}),[p,u,c,d])}const Ow=R.memo(function({margin:t,height:n,width:r,tooltipHandle:s,tooltipHide:a,maxYLabelWidth:i}){const c=f.useCallback(()=>a(),[a]);return o.jsx(Tx,{x:t.left+i-2.5,y:t.top,width:r-t.right-t.left*2-i+2.5*2,height:n-t.bottom-t.top,fill:"transparent",onTouchStart:s,onTouchMove:s,onMouseMove:s,onMouseLeave:c})});Ow.displayName="TooltipListener";const Wb=R.memo(({cx:e,cy:t,color:n,r=3})=>o.jsx("circle",{cx:e,cy:t,r,fill:n,stroke:n,strokeWidth:1}));Wb.displayName="YDot";const My=R.memo(({marginTop:e,tooltipLeft:t=0,innerHeight:n,color:r,strokeWidth:s=1,dotted:a=!1})=>{const i=f.useMemo(()=>({x:t,y:e}),[e,t]),l=f.useMemo(()=>({x:t,y:n+e}),[n,e,t]);return o.jsx("g",{children:o.jsx(tT,{from:i,to:l,stroke:r,strokeWidth:s,strokeDasharray:a?"4 4":void 0,pointerEvents:"none",className:"animate-in fade-in duration-300"})})});My.displayName="YCrosshair";const JI=e=>e,WTe=R.memo(({entry:e,xFormat:t=JI,yFormat:n=JI,zFormat:r=JI,xGet:s,yGet:a,zGet:i})=>{const l=[{value:t(s(e))},{value:n(a(e))}];i&&l.unshift({value:r(i(e))});const c=l.filter(u=>u.value);return o.jsx(H,{children:c.map(({value:u},d)=>o.jsx(F,{variant:"tiny",className:"py-two",children:String(u)},d))})});WTe.displayName="InnerToolTip";const HTe=R.memo(({tooltipTop:e=0,tooltipLeft:t=0,children:n})=>{const r=f.useMemo(()=>({position:"absolute",pointerEvents:"none"}),[]);return o.jsx(W5e,{top:e,left:t,style:r,children:o.jsx(H,{variant:"background",className:"p-sm dark:border-inverse rounded-md border shadow-sm",children:n})})});HTe.displayName="Tooltip";const Lw=R.memo(({tooltipTop:e,tooltipLeft:t,entry:n,data:r,config:s,UserToolTip:a,xFormat:i,yFormat:l,zFormat:c,zGet:u,xGet:d,yGet:m})=>o.jsx(HTe,{tooltipTop:e,tooltipLeft:t,children:a?o.jsx(a,{entry:n,config:s,data:r}):o.jsx(WTe,{entry:n,config:s,xFormat:i,yFormat:l,zFormat:c,zGet:u,xGet:d,yGet:m})}));Lw.displayName="ComposedTooltip";const wh=0,zTe=R.memo(function(t){const{width:n,height:r,margin:s,config:a,tooltip:i,colors:l,axes:c=!0}=t,{colorSchema:u,axisColor:d,tickColor:m}=XT(l),p=Ds(),h=ZT({data:t.data}),{xAxisRef:g,yAxisRef:y,maxYLabelWidth:x,maxXLabelWidth:v,minXRequiredWidth:b}=nN(),{innerHeight:_,innerWidth:w,xRange:C,yRange:S}=Mw({width:n,height:r,margin:s,maxYLabelWidth:x,hasAxis:c}),{xNumTicks:E,yNumTicks:M,xTiltTicks:k}=rN({config:a,innerWidth:w,innerHeight:_,maxXLabelWidth:v}),{xGet:N,yGet:P,zGet:L}=JT({config:a}),{xFormat:O,yFormat:A,xTooltipFormat:j,yTooltipFormat:T,zTooltipFormat:I}=eN({config:a}),U=f.useMemo(()=>{if(!a?.z?.accessor)return[{key:"default",data:h}];const oe=a.z.accessor,ge=tb(h,xe=>String(xe[oe]));return Object.entries(ge).map(([xe,ye])=>({key:xe,data:ye}))},[h,a.z]),B=U.length>1,D=B?U.map(({key:oe})=>oe):h.map(N),W=Qi.band({range:C,domain:D,padding:.4}),z=[...new Set(h.map(N))],$=Qi.band({range:[0,W.bandwidth()],domain:z,padding:.1}),X=f.useMemo(()=>{const[oe,ge]=gi(h,P),xe=Math.min(wh,oe),ye=Math.max(wh,ge);return[xe,ye]},[h,P]),q=f.useMemo(()=>Qi.linear({range:S,domain:X}),[S,X]),Y=Qi.ordinal({range:u.slice(0,z.length),domain:B?z:D}),{tooltipData:G,hideTooltip:J,handleTooltip:K}=aN({data:h,innerHeight:_,innerWidth:w,xScale:B?$:W,yScale:q,xGet:N,yGet:P}),re=f.useCallback(({localPoint:oe})=>{const ge=B?$:W,xe=ge.bandwidth(),ye=(ge.step()-xe)/4;if(isNaN(oe?.x??NaN)||isNaN(oe?.y??NaN))return null;const _e=oe?.x,be=oe?.y;return h.reduce((Ne,Ee)=>{let Re=ge(N(Ee))||0;const Ae=q(P(Ee)),st=Math.abs(Ae-q(0));return B&&(Re+=W(Ee.z)||0),Re!==void 0&&Ae!==void 0&&_e>=Re-ye&&_e<=Re+xe+ye&&be>=Ae-st&&be<=Ae+st?{x:Re,y:Ae,data:Ee}:Ne},null)},[h,W,N,q,P,B,$])({localPoint:G?.localPoint}),se=f.useMemo(()=>({marginLeft:s.left,marginRight:s.right}),[s.left,s.right]),me=f.useMemo(()=>[wh],[]);return o.jsxs(H,{className:"relative",children:[B&&z.length>1&&o.jsx(H,{style:se,children:o.jsx(Pw,{entries:z.map(oe=>({key:oe,color:Y(oe)}))})}),o.jsxs(Bx,{width:n,height:r,children:[o.jsx(Rw,{xScale:W,yScale:q,xFormat:O,yFormat:A,width:n,height:r,margin:s,yNumTicks:M,xNumTicks:E,yTickValues:a.y.tickValues,xTickValues:a.x.tickValues,xAxisLabel:a.x.label,yAxisLabel:a.y.label,animated:!0,tickColor:m,axisColor:d,xAxisRef:g,yAxisRef:y,xTiltTicks:k}),p&&o.jsx(LTe,{left:s.left,scale:q,width:n-s.right-s.left*2,stroke:d,tickValues:me,strokeWidth:2}),U.map(({key:oe,data:ge})=>o.jsx(ba,{left:W(oe),children:ge.map((xe,ye)=>{const _e=B?$:W;return o.jsx(ve.rect,{rx:2,ry:2,x:_e(N(xe)),width:_e.bandwidth(),fill:Y(B?ye:oe),initial:{y:q(wh),height:0,opacity:0},animate:{y:q(Math.max(wh,P(xe))),height:Math.abs(q(P(xe))-q(wh)),opacity:1},transition:{duration:.5,ease:"easeInOut"}},ye)})},oe)),o.jsx(Ow,{margin:s,tooltipHandle:K,tooltipHide:J,height:r,width:n,maxYLabelWidth:x})]}),re&&G&&o.jsx(Lw,{UserToolTip:i,tooltipTop:G?.localPoint?.y,tooltipLeft:G?.localPoint?.x,entry:re.data,data:h,config:a,xFormat:j,yFormat:T,zFormat:I,zGet:L,xGet:N,yGet:P})]})});zTe.displayName="BarChart";function POt({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),i=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[i]}function OOt({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",i=f.useMemo(()=>[...(n.find(({key:m})=>m===a)||n[0])?.d||[]].sort((m,p)=>s(m)-s(p)),[a,n,s]),l=e?.localPoint.x,c=f.useMemo(()=>i.map(s),[i,s]);return f.useMemo(()=>{if(l==null)return;if("invert"in r){const p=r.invert(l),h=Ex(c,p);if(h<=0)return i[0];if(h>=c.length)return i[c.length-1];const g=i[h-1],y=i[h];return Math.abs(s(g)-p)<Math.abs(s(y)-p)?g:y}const d=POt({xScale:r,xPosition:l}),m=i.find(p=>String(s(p))===String(d));return m||i.reduce((p,h)=>Math.abs(s(h)-d)<Math.abs(s(p)-d)?h:p,i[0])},[l,r,i,s,c])}const GTe=R.memo(function(t){const{$t:n}=Z(),{width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:i,tooltip:l,axes:c=!0,colors:u,animate:d=!0,includeLegend:m=!0,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y=!1,children:x}=t,[v,b]=f.useState(null),_=ZT({data:t.data}),w=f.useRef(new Set),{colorSchema:C,tickColor:S,axisColor:E,textColor:M}=XT(u),{colorScheme:k}=Jr(),N=k==="dark",{xAxisRef:P,yAxisRef:L,maxYLabelWidth:O,maxXLabelWidth:A,minXRequiredWidth:j}=nN(),{xGet:T,yGet:I,zGet:U}=JT({config:i}),{xFormat:B,yFormat:D,xTooltipFormat:W,yTooltipFormat:z,zTooltipFormat:$}=eN({config:i}),{xDomain:X,yDomain:q}=IH({config:i,data:_,xGet:T,yGet:I,endTime:p,previousClose:h}),{innerHeight:Y,innerWidth:G,xRange:J,yRange:K}=Mw({width:r,height:s,margin:a,maxYLabelWidth:O,hasAxis:c}),{xNumTicks:te,yNumTicks:re,xTiltTicks:se}=rN({config:i,innerWidth:G,innerHeight:Y,maxXLabelWidth:A}),me=f.useMemo(()=>Qi[i.x.scale]({range:[J[0],A?J[1]-A/2:J[1]],domain:X}),[i.x.scale,J,X,A]),oe=f.useMemo(()=>{const Qe=i.y.scale==="log";return Qi[i.y.scale]({range:K,domain:q,base:Qe?2:void 0,nice:!Qe,round:!0})},[i.y.scale,K,q]),ge=f.useMemo(()=>{if(!i.z?.accessor)return[{key:"",d:_}];const Qe=i.z.accessor,Ve=tb(_,Le=>String(Le[Qe]));return Object.entries(Ve).map(([Le,ot])=>({key:Le,d:ot}))},[_,i?.z?.accessor]),xe=f.useMemo(()=>{if(ge.length<=1)return null;const Qe=new Map;return ge.forEach(Le=>{Le.d.forEach(ot=>{const vt=T(ot);Qe.set(vt,ot)})}),Array.from(Qe.values()).sort((Le,ot)=>T(Le)-T(ot))},[ge,T]),{tooltipData:ye,hideTooltip:_e,handleTooltip:be}=aN({data:_,innerHeight:Y,innerWidth:G,xScale:me,yScale:oe,xGet:T,yGet:I}),Ne=OOt({tooltipData:ye,config:i,groups:ge,xScale:me,xGet:T}),Ee=f.useMemo(()=>!y||!ge.length||!ge[0].d.length?null:ge[0].d.at(-1),[ge,y]),Re=f.useMemo(()=>Qu().x(Qe=>me(T(Qe))).y(Qe=>oe(I(Qe))).curve(Xm),[me,oe,T,I]),Ae=f.useMemo(()=>Qi.ordinal({domain:ge.map(({key:Qe})=>Qe),range:C}),[C,ge]),st=f.useCallback(()=>{ye&&b(Ne||null)},[ye,Ne]),it=f.useCallback(()=>{b(null)},[]),Se=f.useMemo(()=>{const Qe={};if(!v||!Ne||!ge.length)return Qe;const Ve=T(v),Le=T(Ne),[ot,vt]=Ve<Le?[Ve,Le]:[Le,Ve],Rt=On=>{const yr=i.z?.accessor?On[i.z.accessor]:ge[0].key,Ke=ge.find(({key:Xe})=>Xe===yr);return Ke?Ke.d.filter(Xe=>{const gt=T(Xe);return gt>=ot&&gt<=vt}):[]},jt=i.z?.accessor?v[i.z.accessor]:ge[0].key;Qe[jt]=Rt(v);const dn=i.z?.accessor?Ne[i.z.accessor]:ge[0].key;return jt!==dn&&(Qe[dn]=Rt(Ne)),Qe},[v,Ne,ge,T,i.z?.accessor]),ue=f.useMemo(()=>{const Qe=Se[i.z?.accessor?v?.[i.z.accessor]:ge[0]?.key]||[],Ve=Se[i.z?.accessor?Ne?.[i.z.accessor]:ge[0]?.key]||[],Le=[...Qe,...Ve],ot=new Map;return Le.forEach(Rt=>{ot.set(T(Rt),Rt)}),Array.from(ot.values()).sort((Rt,jt)=>T(Rt)-T(jt))},[Se,i.z?.accessor,v,Ne,ge,T]),ke=f.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),et=f.useMemo(()=>[h],[h]),Ge=f.useCallback(Qe=>me(T(Qe))??0,[me,T]),ft=f.useCallback(Qe=>oe(I(Qe))??0,[oe,I]);return o.jsxs(H,{children:[i.z&&ge?.length>1&&m&&o.jsx(H,{style:ke,children:o.jsx(Pw,{entries:ge.map(({key:Qe})=>({key:Qe,color:Ae(Qe)}))})}),o.jsxs(H,{className:"relative",onMouseDown:st,onMouseUp:it,onMouseLeave:it,children:[o.jsxs(Bx,{width:r,height:s,children:[c&&o.jsx(Rw,{width:r,height:s,margin:a,xScale:me,yScale:oe,xFormat:B,yFormat:D,yNumTicks:re,xNumTicks:te,yTickValues:i.y.tickValues,xTickValues:i.x.tickValues,tickColor:S,axisColor:E,xAxisRef:P,yAxisRef:L,xTiltTicks:se,xAxisLabel:i.x.label,yAxisLabel:i.y.label}),x&&x({xScale:me,yScale:oe,xGet:T,yGet:I}),h&&o.jsx("text",{x:r-a.right-10,y:oe(h)-5,fill:M,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?n({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof i.y.format=="function"?i.y.format(h):h}):n({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof i.y.format=="function"?i.y.format(h):h})}),h&&o.jsx(Up,{left:a.left,scale:oe,width:r-a.right-a.left*2,stroke:M,tickValues:et,strokeWidth:2,strokeDasharray:"2,6",opacity:N?.6:1}),Ne&&o.jsx(My,{marginTop:a.top,tooltipLeft:me(T(Ne)),innerHeight:Y,color:E,strokeWidth:1}),v&&o.jsx(My,{marginTop:a.top,tooltipLeft:me(T(v)),innerHeight:Y,color:E,strokeWidth:1}),xe&&ge.length>1&&ge[1]?.key&&o.jsx(ve.path,{d:Re(xe),stroke:Ae(ge[1].key),strokeWidth:1.5,fill:"none",shapeRendering:"geometricPrecision",initial:d?{pathLength:d?0:1,opacity:d?0:1}:void 0,animate:d?{pathLength:1,opacity:1}:void 0,transition:d?{duration:.8,ease:fi}:void 0}),ge.map(({d:Qe,key:Ve},Le)=>{const ot=w.current.has(Ve),vt=ot||!d?{initial:void 0,animate:{pathLength:1,opacity:1}}:{initial:{pathLength:d?0:1,opacity:d?0:1},animate:{pathLength:1,opacity:1},transition:{duration:.8,ease:fi,delay:Le/ge.length}};return ot||w.current.add(Ve),o.jsx(ve.path,{d:Re(Qe),stroke:Ae(Ve),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",...vt},Ve)}),(Ne||Ee)&&o.jsxs(ve.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[o.jsx(Wb,{cx:me(T(Ne||Ee)),cy:oe(I(Ne||Ee)),color:Ae(i.z?.accessor?(Ne||Ee)?.[i.z.accessor]:""),r:5}),v&&Ne&&o.jsxs(o.Fragment,{children:[o.jsx(Wb,{cx:me(T(v)),cy:oe(I(v)),color:Ae(i.z?.accessor?v[i.z.accessor]:""),r:5}),ue.length>1&&o.jsx(cy,{data:ue,x:Ge,y:ft,fill:Ae(ge[0].key),fillOpacity:.2,stroke:"none",yScale:oe,curve:Xm})]})]}),(ge.length===1||ge.length===2)&&ge.map(({d:Qe,key:Ve},Le)=>{const ot=Ae(Ve);return o.jsx(ve.g,{initial:d?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:d?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:d?{duration:.8,ease:fi,delay:Le/ge.length}:void 0,children:!v&&(ge.length===1||Le===0)&&o.jsxs(o.Fragment,{children:[o.jsx(V5,{from:`${ot}22`,to:`${ot}00`,id:Ve}),o.jsx(cy,{data:Qe,x:Ge,y:ft,strokeWidth:0,yScale:oe,fill:`url('#${Ve}')`},Ve)]})},Ve)}),o.jsx(Ow,{margin:a,tooltipHandle:be,tooltipHide:_e,height:s,width:r,maxYLabelWidth:O})]}),Ne&&ye&&o.jsx(Lw,{tooltipTop:ye.localPoint.y,tooltipLeft:ye.localPoint.x,entry:Ne,UserToolTip:l?Qe=>o.jsx(l,{...Qe,comparisonEntry:v||void 0}):void 0,data:_,config:i,xFormat:W,yFormat:z,zFormat:$,zGet:U,xGet:T,yGet:I})]})]})});GTe.displayName="CompositeLineChart";function LOt({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),i=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[i]}function DOt({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",i=f.useMemo(()=>[...(n.find(({key:d})=>d===a)||n[0])?.d||[]].sort((d,m)=>s(d)-s(m)),[a,n,s]),l=e?.localPoint.x;return f.useMemo(()=>{if(!l)return;if("invert"in r){const m=r.invert(l),p=Ex(i.map(s),m);return i?.[p-1]}const u=LOt({xScale:r,xPosition:l});return i.find(m=>String(s(m))===String(u))},[l,r,i,s])}const qTe=R.memo(e=>{const{$t:t}=Z(),{enableComparison:n=!0,width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:i,tooltip:l,axes:c=!0,colors:u,animate:d=!0,includeLegend:m=!0,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y=!1,children:x}=e,[v,b]=f.useState(null),_=ZT({data:e.data}),w=Ds(),{colorSchema:C,tickColor:S,axisColor:E,textColor:M}=XT(u),{colorScheme:k}=Jr(),N=f.useMemo(()=>w?k==="dark":!1,[k,w]),{xAxisRef:P,yAxisRef:L,maxYLabelWidth:O,maxXLabelWidth:A,minXRequiredWidth:j}=nN(),{xGet:T,yGet:I,zGet:U}=JT({config:i}),{xFormat:B,yFormat:D,xTooltipFormat:W,yTooltipFormat:z,zTooltipFormat:$}=eN({config:i}),{xDomain:X,yDomain:q}=IH({config:i,data:_,xGet:T,yGet:I,endTime:p,previousClose:h}),{innerHeight:Y,innerWidth:G,xRange:J,yRange:K}=Mw({width:r,height:s,margin:a,maxYLabelWidth:O,hasAxis:c}),{xNumTicks:te,yNumTicks:re,xTiltTicks:se}=rN({config:i,innerWidth:G,innerHeight:Y,maxXLabelWidth:A}),me=f.useMemo(()=>Qi[i.x.scale]({range:[J[0],A?J[1]-A/2:J[1]],domain:X}),[i.x.scale,J,X,A]),oe=f.useMemo(()=>{const Ge=i.y.scale==="log";return Qi[i.y.scale]({range:K,domain:q,base:Ge?2:void 0,nice:!Ge,round:!0})},[i.y.scale,K,q]),ge=f.useMemo(()=>{if(!i.z?.accessor)return[{key:"",d:_}];const Ge=i.z.accessor,ft=tb(_,Qe=>String(Qe[Ge]));return Object.entries(ft).map(([Qe,Ve])=>({key:Qe,d:Ve}))},[_,i?.z?.accessor]),{tooltipData:xe,hideTooltip:ye,handleTooltip:_e}=aN({data:_,innerHeight:Y,innerWidth:G,xScale:me,yScale:oe,xGet:T,yGet:I}),be=DOt({tooltipData:xe,config:i,groups:ge,xScale:me,xGet:T}),Ne=f.useMemo(()=>!y||!ge.length||!ge[0].d.length?null:ge[0].d.at(-1),[ge,y]),Ee=f.useMemo(()=>Qu().x(Ge=>me(T(Ge))).y(Ge=>oe(I(Ge))).curve(Xm),[me,oe,T,I]),Re=f.useMemo(()=>Qi.ordinal({range:C}),[C]),Ae=f.useCallback(()=>{!xe||!n||b(be||null)},[n,xe,be]),st=f.useCallback(()=>{n&&b(null)},[n]),it=f.useMemo(()=>{if(!v||!be||!ge.length)return[];const Ge=ge[0],ft=T(v),Qe=T(be),[Ve,Le]=ft<Qe?[ft,Qe]:[Qe,ft];return Ge.d.filter(ot=>{const vt=T(ot);return vt>=Ve&&vt<=Le})},[v,be,ge,T]),Se=f.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),ue=f.useCallback(Ge=>me(T(Ge))??0,[me,T]),ke=f.useCallback(Ge=>oe(I(Ge))??0,[oe,I]),et=f.useMemo(()=>[h],[h]);return o.jsxs(H,{children:[i.z&&ge?.length>1&&m&&o.jsx(H,{style:Se,children:o.jsx(Pw,{entries:ge.map(({key:Ge})=>({key:Ge,color:Re(Ge)}))})}),o.jsxs(H,{className:"relative",onMouseDown:Ae,onMouseUp:st,onMouseLeave:st,children:[o.jsxs(Bx,{width:r,height:s,children:[c&&o.jsx(Rw,{width:r,height:s,margin:a,xScale:me,yScale:oe,xFormat:B,yFormat:D,yNumTicks:re,xNumTicks:te,yTickValues:i.y.tickValues,xTickValues:i.x.tickValues,tickColor:S,axisColor:E,xAxisRef:P,yAxisRef:L,xTiltTicks:se,xAxisLabel:i.x.label,yAxisLabel:i.y.label}),x&&x({xScale:me,yScale:oe,xGet:T,yGet:I}),h&&o.jsx("text",{x:r-a.right-10,y:oe(h)-5,fill:M,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?t({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof i.y.format=="function"?i.y.format(h):h}):t({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof i.y.format=="function"?i.y.format(h):h})}),h&&o.jsx(Up,{left:a.left,scale:oe,width:r-a.right-a.left*2,stroke:M,tickValues:et,strokeWidth:2,strokeDasharray:"2,6",opacity:N?.6:1}),be&&o.jsx(My,{marginTop:a.top,tooltipLeft:me(T(be)),innerHeight:Y,color:E,strokeWidth:1}),v&&o.jsx(My,{marginTop:a.top,tooltipLeft:me(T(v)),innerHeight:Y,color:E,strokeWidth:1}),(be||Ne)&&o.jsxs(ve.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[o.jsx(Wb,{cx:me(T(be||Ne)),cy:oe(I(be||Ne)),color:Re(i.z?.accessor?(be||Ne)?.[i.z.accessor]:""),r:5}),v&&be&&it.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(Wb,{cx:me(T(v)),cy:oe(I(v)),color:Re(i.z?.accessor?v[i.z.accessor]:""),r:5}),o.jsx(cy,{data:it,x:ue,y:ke,fill:Re(i.z?.accessor?v[i.z.accessor]:""),fillOpacity:.2,stroke:"none",yScale:oe,curve:Xm})]})]}),ge.length===1&&ge.map(({d:Ge,key:ft},Qe)=>{const Ve=Re(ft);return o.jsx(ve.g,{initial:d?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:d?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:d?{duration:.8,ease:"easeInOut",delay:Qe/ge.length}:void 0,children:!v&&o.jsxs(o.Fragment,{children:[o.jsx(V5,{from:`${Ve}22`,to:`${Ve}00`,id:ft}),o.jsx(cy,{data:Ge,x:ue,y:ke,strokeWidth:0,yScale:oe,fill:`url('#${ft}')`},ft)]})},ft)}),ge.map(({d:Ge,key:ft},Qe)=>o.jsx(ve.path,{d:Ee(Ge),stroke:Re(ft),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",initial:d?{pathLength:0,opacity:0}:void 0,animate:d?{pathLength:1,opacity:1}:void 0,transition:d?{duration:.8,ease:"easeInOut",delay:Qe/ge.length}:void 0},ft)),o.jsx(Ow,{margin:a,tooltipHandle:_e,tooltipHide:ye,height:s,width:r,maxYLabelWidth:O})]}),be&&xe&&o.jsx(Lw,{tooltipTop:xe.localPoint.y,tooltipLeft:xe.localPoint.x,entry:be,UserToolTip:l?Ge=>o.jsx(l,{...Ge,comparisonEntry:v||void 0}):void 0,data:_,config:i,xFormat:W,yFormat:z,zFormat:$,zGet:U,xGet:T,yGet:I})]})]})});qTe.displayName="LineChart";const KTe=R.memo(e=>{const{width:t,height:n,margin:r,config:s,tooltip:a,colors:i,axes:l=!0}=e,c=3,u=ZT({data:e.data}),{colorSchema:d,tickColor:m,axisColor:p}=XT(i),{xAxisRef:h,yAxisRef:g,maxYLabelWidth:y,maxXLabelWidth:x,minXRequiredWidth:v}=nN(),{innerHeight:b,innerWidth:_,xRange:w,yRange:C}=Mw({width:t,height:n,margin:r,maxYLabelWidth:y,hasAxis:l}),{xNumTicks:S,yNumTicks:E,xTiltTicks:M}=rN({config:s,innerWidth:_,innerHeight:b,maxXLabelWidth:x}),{xGet:k,yGet:N,zGet:P}=JT({config:s}),{xFormat:L,yFormat:O,xTooltipFormat:A,yTooltipFormat:j,zTooltipFormat:T}=eN({config:s}),{xDomain:I,yDomain:U}=IH({data:u,config:s,xGet:k,yGet:N}),B=f.useMemo(()=>Qi[s.x.scale]({range:w,domain:I}),[s.x.scale,w,I]),D=f.useMemo(()=>Qi[s.y.scale]({range:C,domain:U,nice:!0,round:!0}),[s.y.scale,C,U]),{tooltipData:W,handleTooltip:z,hideTooltip:$}=aN({data:u,innerHeight:b,innerWidth:_,xScale:B,yScale:D,xGet:k,yGet:N,voronoiRadius:c*2}),X=f.useMemo(()=>Qi.ordinal({range:d}),[d]),q=f.useMemo(()=>{if(!s.z?.accessor)return[];const J=new Set([]);return u.forEach(K=>J.add(K[s?.z?.accessor])),Array.from(J)},[u,s.z]),Y=W?.voronoiSite,G=f.useMemo(()=>({marginLeft:r.left,marginRight:r.right}),[r.left,r.right]);return o.jsxs(H,{children:[q.length>1&&o.jsx(H,{style:G,children:o.jsx(Pw,{entries:q.map(J=>({key:J,color:X(J)}))})}),o.jsxs(H,{className:"relative",children:[o.jsxs(Bx,{width:t,height:n,children:[o.jsx(Rw,{xScale:B,yScale:D,xFormat:L,yFormat:O,width:t,height:n,margin:r,yTickValues:s.y.tickValues,xTickValues:s.x.tickValues,tickColor:m,axisColor:p,xAxisRef:h,yAxisRef:g,yNumTicks:E,xNumTicks:S,xTiltTicks:M}),Y&&o.jsx(My,{marginTop:r.top,tooltipLeft:Y[0],innerHeight:b,color:p}),o.jsx("g",{children:u.map((J,K)=>{const te=Y?.data?.__key==J.__key,re=s.z?.accessor?X(J[s.z.accessor]):X("");return o.jsx(ve.circle,{"data-hint":`${k(J)}: ${N(J)}`,cx:B(k(J)),cy:D(N(J)),r:c,strokeWidth:c/2,stroke:re,fill:te?"transparent":re,initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,ease:"easeInOut",delay:K/u.length}},J.__key)})}),o.jsx(Ow,{margin:r,tooltipHandle:z,tooltipHide:$,height:n,width:t,maxYLabelWidth:y})]}),Y&&o.jsx(Lw,{tooltipTop:Y?.[1],tooltipLeft:Y?.[0],UserToolTip:a,entry:Y.data,data:u,config:s,xFormat:A,yFormat:j,zFormat:T,zGet:P,xGet:k,yGet:N})]})]})});KTe.displayName="ScatterChart";function FOt(e){const{type:t,config:n,width:r,data:s,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,children:x,enableComparison:v}=e;return t==="line"?o.jsx(qTe,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,enableComparison:v,children:x}):t==="bar"?o.jsx(zTe,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,colors:u,includeLegend:m}):t==="scatter"?o.jsx(KTe,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,colors:u,includeLegend:m}):t==="compositeLine"?o.jsx(GTe,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,children:x}):null}const YTe=R.memo(function({type:t,config:n,data:r,tooltip:s,height:a=Sy,margin:i=s8t,axes:l,className:c,colors:u,includeLegend:d,endTime:m,previousClose:p,exchangeName:h,showLastPoint:g,animate:y,children:x,enableComparison:v}){const b=f.useRef(null),{width:_}=RH(b);return o.jsx("div",{ref:b,className:c,children:o.jsx(FOt,{type:t,data:r,config:n,width:_,height:a,margin:i,tooltip:s,axes:l,colors:u,includeLegend:d,endTime:m,previousClose:p,exchangeName:h,showLastPoint:g,animate:y,enableComparison:v,children:x})})});YTe.displayName="Chart";const epn=({data:e,brands:t,teams:n,isLive:r,isFinal:s,startLabel:a,endLabel:i,nowLabel:l,shouldAdjustColors:c=!0,nicknameFormatter:u,tooltip:d})=>{const m=f.useMemo(()=>n.map((j,T)=>({...j,uniqueName:j.name+"".repeat(T+1)})),[n]),{teamsData:p}=f.useMemo(()=>({teamsData:m.map(j=>{const T=j.brand||jTe(j.id,t),I=e[j.id]?.candlesticks||[];return{id:j.id,name:j.name,uniqueName:j.uniqueName,brand:T,candlesticks:I}})}),[m,e,t]),{colorScheme:h,isColorSchemeReady:g}=Jr(),{earliestTimestamp:y,latestTimestamp:x}=f.useMemo(()=>{let j=1/0,T=0;return p.forEach(I=>{if(I.candlesticks.length>0){const U=I.candlesticks[0]?.timestamp,B=I.candlesticks[I.candlesticks.length-1]?.timestamp;U&&(j=Math.min(j,U)),B&&(T=Math.max(T,B))}}),{earliestTimestamp:j===1/0?0:j,latestTimestamp:T}},[p]),v=f.useMemo(()=>y?new Date(y*1e3):null,[y]),b=f.useMemo(()=>x?new Date(x*1e3):null,[x]),_=f.useMemo(()=>p.flatMap(j=>j.candlesticks.map(T=>({timestamp:new Date(T.timestamp*1e3),value:(T.price.open+T.price.close)/2,team:j.uniqueName}))),[p]),{locale:w}=Z(),C=!r&&!s,[S,E]=f.useState(!1),{isMobileStyle:M}=Ce();f.useEffect(()=>{E(!0)},[]);const k=f.useMemo(()=>{const j=[];if((r||s)&&v&&b)j.push(v,b);else if(C&&v&&b){const T=b.getTime()-v.getTime();j.push(v,new Date(v.getTime()+T/2),b)}return j},[r,s,C,v,b]),P={x:{accessor:"timestamp",scale:"time",format:f.useMemo(()=>{const j=k.map((T,I)=>{const U=I===0||I>0&&T.toDateString()!==k[I-1]?.toDateString();return{date:T,shouldShowDate:U}});return T=>C?j.find(B=>B.date.getTime()===T.getTime())?.shouldShowDate??!0?M?T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):M?T.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):T.toLocaleString(w,{hour:"numeric",minute:"numeric"}):!v||!b?"":T.getTime()===v.getTime()?a:T.getTime()===b.getTime()?s?i:r?l:"":M?T.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):r?T.toLocaleString(w,{hour:"numeric",minute:"numeric"}):T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},[k,C,M,w,v,b,s,r,a,i,l]),tickValues:k.length>0?k:void 0,tooltipFormat:j=>j.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},y:{accessor:"value",scale:"linear",format:j=>c8t(j/100)},z:{accessor:"team",scale:"ordinal",label:"team",format:j=>j.replace(/\u200B/g,"")}},L=f.useMemo(()=>{if(!S||!c)return p.map(I=>I.brand?.color||"#4a90e2");let j=null;return p.map(I=>{const U=pr(I.brand?.color||"#4a90e2"),B=lk(U,h==="dark"),D=pr(I.brand?.color||"#4a90e2"),W=lk(D,h==="dark"),z=XL(B,W,h==="dark",2);if(j){const $=XL(z,j,z.isDark(),2);return j=$,$.hex()}return j=z,z.hex()}).map(I=>I.toString())},[p,h,g,S,c]),{$t:O}=Z(),A=n.length>2;return o.jsxs("div",{children:[o.jsxs(H,{className:V("mb-sm pb-sm -mx-md -mt-sm px-md flex border-b",{"flex-col":A,"items-center justify-between":!A}),children:[o.jsx(F,{variant:"baseSemi",className:A?"mb-sm":void 0,children:O({id:"J3+o0a6LLR",defaultMessage:"Odds to win"})}),o.jsx("div",{className:V("gap-md flex items-center",{"flex-wrap":A}),children:p.map((j,T)=>o.jsx($Ot,{nickname:u?u(j.name):j.name,color:L[T]||"#4a90e2"},j.id))})]}),o.jsx(YTe,{type:"line",data:_,config:P,height:200,margin:UOt,className:"w-full",includeLegend:!1,colors:{colorSchema:L},enableComparison:!1,tooltip:d})]})},UOt={top:16,right:-6,bottom:10,left:8},lk=(e,t)=>{const n="#f7f1f2",r="#1f2121";return e?XL(e,pr(t?r:n),t):pr(n)},XL=(e,t,n,r=3)=>{if(!e)return pr(t);let s=pr(e),a=0,i=0;for(;s.contrast(pr(t))<r&&(s=n?BOt(s,a):VOt(s,a),a+=.01,i++,!(i>20)););return s};function BOt(e,t){const n=e.lightness();return e.lightness(n+(100-n)*t)}function VOt(e,t){const n=e.lightness();return e.lightness(n-n*t)}const $Ot=({nickname:e,color:t})=>o.jsxs(H,{className:"gap-xs flex items-center",children:[o.jsx(H,{className:"size-2 rounded-full",style:{backgroundColor:t}}),o.jsx(F,{variant:"small",children:e})]}),WOt=({event:e})=>{const t=e.event.status==="live",n=e.event.extra.pitch_outcome,r=n?.count?.outs??0,s=n?.count?.balls??0,a=n?.count?.strikes??0,i=n?.runners,l=n?.count,c=n?.type!=="half_over"&&r!==3&&s!==4&&a!==3;return t?o.jsxs("div",{className:"mt-lg md:mt-md flex flex-col items-center gap-0",children:[o.jsx(HOt,{runners:i}),o.jsx(zOt,{outs:r}),o.jsx(GOt,{count:l,show:c})]}):null},HOt=({runners:e})=>{const t=e?.filter(n=>!n.out).map(n=>n.ending_base);return o.jsx("div",{style:{transformStyle:"preserve-3d",perspective:"1000px"},className:"inline-flex",children:o.jsx("div",{style:{transform:"rotateX(45deg)"},children:o.jsxs("div",{className:"gap-three grid rotate-45 grid-cols-2 grid-rows-2",children:[o.jsx(eR,{active:t?.includes(2)??!1}),o.jsx(eR,{active:t?.includes(1)??!1}),o.jsx(eR,{active:t?.includes(3)??!1})]})})})},eR=({active:e})=>o.jsx("div",{className:V("size-3 duration-150 md:size-4",e?"bg-super":"bg-inverse/25")}),zOt=({outs:e})=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(tR,{filled:e>=1}),o.jsx(tR,{filled:e>=2}),o.jsx(tR,{filled:e>=3})]}),tR=({filled:e})=>o.jsx("div",{className:V("relative size-1 rounded-full duration-150",e?"bg-inverse":"bg-inverse/25"),children:e&&o.jsx("div",{className:"bg-inverse repeat-1 absolute inset-0 animate-ping rounded-full"})}),GOt=({count:e,show:t})=>{const n=e?.balls??0,r=e?.strikes??0,s=n===0&&r===0;return o.jsx(F,{variant:"micro",color:s?"ultraLight":"light",className:V("mt-1 duration-150",t?"opacity-100":"opacity-0"),children:o.jsx("span",{className:"font-mono",children:t?`${n}-${r}`:o.jsx(o.Fragment,{children:""})})})};function qOt({children:e,className:t}){return o.jsx(F,{variant:"micro",className:V("py-xs !font-mono uppercase",t),color:"light",children:e})}const tpn="[&_tr>td:first-child]:pl-md [&_tr>th:first-child]:pl-md [&_tr>td:last-child]:pr-md [&_tr>th:last-child]:pr-md",iN=({className:e,textCenter:t,finalText:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=Ce();return o.jsx("div",{className:V("flex items-center justify-center",e),children:o.jsx(F,{variant:s?"micro":"tiny",color:"light",className:"bg-subtler dark:bg-subtle pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n?n.toUpperCase():r({defaultMessage:"Final",id:"6/JzkWi0di"}).toUpperCase()})})},QTe=({className:e,textCenter:t=!1})=>{const{$t:n}=Z(),{isMobileStyle:r}=Ce();return o.jsx("div",{className:V("flex items-center justify-center",e),children:o.jsx(F,{variant:r?"micro":"tiny",color:"light",className:"bg-subtler dark:bg-subtle pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n({defaultMessage:"Upcoming",id:"6/aEFZbs2i"}).toUpperCase()})})},XTe=R.memo(function({attributions:t}){const{$t:n}=Z(),r=t.join("  ");return o.jsxs(H,{className:"mt-md pt-md pb-lg flex flex-col gap-1 border-t",children:[o.jsx(F,{variant:"tiny",color:"ultraLight",className:"text-center",children:r}),o.jsx(F,{variant:"micro",color:"ultraLight",className:"text-center",children:n({defaultMessage:"{perplexity} is not affiliated with, endorsed by, or sponsored by any sports leagues or teams. All trademarks, team names, logos, and player images are the property of their respective owners. The content provided on this page is for informational purposes only and is intended to help users follow sports news and updates.",id:"M0PBu8vKH2"},{perplexity:"Perplexity"})})]})});XTe.displayName="SportsSources";const ZTe=R.memo(({children:e,innerRef:t,canScrollLeft:n,canScrollRight:r,fadeOut:s})=>o.jsx("div",{className:"gap-md flex w-full flex-col overflow-hidden",children:o.jsxs(fl,{orientation:"horizontal",viewportRef:t,showScrollIndicator:!1,className:"relative",children:[o.jsx("div",{className:"p-md pt-0",children:e}),n&&s&&o.jsx(H,{className:"w-xl to-offset pointer-events-none absolute inset-y-0 left-0 bg-gradient-to-l from-transparent"}),r&&s&&o.jsx(H,{className:"w-xl from-offset pointer-events-none absolute inset-y-0 right-0 bg-gradient-to-l to-transparent"})]})}));ZTe.displayName="CanonicalScroll";const oN=R.memo(({title:e,subtitle:t,children:n,scrollable:r,fadeOut:s,trailing:a,titleClassName:i})=>{const l=f.useRef(null),[c,u]=f.useState(!1),[d,m]=f.useState(!1),p=f.useCallback(()=>{l.current?.scrollTo({left:l.current.scrollLeft-l.current.clientWidth,behavior:"smooth"})},[l]),h=f.useCallback(()=>{l.current?.scrollTo({left:l.current.scrollLeft+l.current.clientWidth,behavior:"smooth"})},[l]),g=f.useCallback(()=>{l.current&&(u(l.current.scrollLeft>0),m(l.current.scrollLeft+l.current.clientWidth+10<l.current.scrollWidth&&l.current.scrollWidth>l.current.clientWidth))},[l]);return f.useEffect(()=>{const y=l.current;return y?.addEventListener("scroll",g),()=>{y?.removeEventListener("scroll",g)}},[g,l]),f.useEffect(()=>{const y=new ResizeObserver(g);return y.observe(window.document.body),()=>{y.disconnect()}},[g,l]),f.useEffect(()=>{g()},[g]),o.jsxs(H,{className:"gap-md flex flex-col",children:[o.jsxs(JTe,{title:e,subtitle:t,className:i,children:[a,r&&o.jsxs("div",{className:"-mr-sm flex items-center",children:[o.jsx(Te,{icon:hp,size:"small",onClick:p,disabled:!c,variant:c?void 0:"noHover"}),o.jsx(Te,{icon:Zn,size:"small",onClick:h,disabled:!d,variant:d?void 0:"noHover"})]})]}),r?o.jsx(ZTe,{innerRef:l,canScrollLeft:c,canScrollRight:d,fadeOut:s,children:n}):o.jsx("div",{ref:l,className:"gap-md px-md pb-md flex flex-col",children:n})]})});oN.displayName="CanonicalSection";const JTe=R.memo(({children:e,title:t,subtitle:n,className:r})=>o.jsxs(H,{className:V("gap-md px-md py-sm flex items-center justify-between border-b",r),children:[o.jsxs(H,{className:"flex items-center justify-between",children:[t&&o.jsx(F,{variant:"baseSemi",children:t}),n&&o.jsx(F,{variant:"smallCaps",color:"light",children:n})]}),e]}));JTe.displayName="SectionTitle";const KOt={tiny:"size-[16px]",small:"size-[24px]",medium:"size-[32px]",large:"xl:size-[64px] size-[50px]"},YOt={tiny:"p-[0.5px]",small:"p-[0.5px]",medium:"p-[0.5px]",large:"p-[0.5px]"},QOt={tiny:"border-[1px]",small:"border-[1px]",medium:"border-[2px]",large:"border-[4px]"},Ls=f.memo(({includeStripe:e=!0,includeShadow:t=!1,className:n,includeBackground:r=!1,size:s="large",logo:a,color:i,...l})=>{const c=f.useMemo(()=>{let u=KOt[s];return r&&(u+=` ${YOt[s]}`),u},[r,s]);return o.jsx("div",{className:V(c,{"shadow-subtle":t&&r,"border-subtlest rounded-full border bg-white dark:border-transparent":r},n),...l,children:o.jsx("div",{className:V("rounded-inherit relative flex size-full items-center justify-center",{[QOt[s]]:e&&r}),style:{borderColor:r?i:void 0},children:o.jsx("img",{src:a,alt:"",width:r?"70%":"100%",height:"auto"})})})});Ls.displayName="SportsTeamLogo";function ky(e,t){return e=Math.abs(e/100),e.toLocaleString(t,{style:"percent",maximumFractionDigits:0})}const XOt=new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]]),ZOt=new Intl.PluralRules("en-US",{type:"ordinal"});function eNe(e){if(!e&&e!==0||isNaN(e))return"";const t=XOt.get(ZOt.select(e));return`${e}${t}`}function JOt(e,t){if(t!=="upcoming"||e<new Date)return!1;const n=new Date;return Math.abs(+e-+n)<1e3*60*60*24}function npn(e){return new Date(e.toLocaleDateString(void 0,{timeZone:"UTC"}))}function ck(e,t){const n=eve();return f.useMemo(()=>!n||!t?e:lk(pr(e),t==="dark").toString(),[e,t,n])}const rpn=(e,t,n,r)=>{if(!e||!t)return n;const s=new Date(e),a=new Date(t),i={month:"short",day:"numeric"};s.getFullYear()!==a.getFullYear()&&(i.year="numeric");const l=s.toLocaleDateString(r,i),c=a.toLocaleDateString(r,{...i,year:"numeric"});return s.toDateString()===a.toDateString()?c:s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()?`${s.toLocaleDateString(r,{month:"short"})} ${s.getDate()}-${a.getDate()}, ${a.getFullYear()}`:`${l} - ${c}`},eLt=(e,t)=>({title:null,team_1_super_text:null,team_2_super_text:null,team_1_text:e,team_2_text:t,team_1_emphasis:!1,team_2_emphasis:!1,isTextColorSuper:!0}),spn=e=>{const t=e.stat_columns||[],n=[{show:e.team_1.text&&e.team_2.text,team1:e.team_1.text,team2:e.team_2.text},{show:e.team_1.sub_text&&e.team_2.sub_text,team1:e.team_1.sub_text,team2:e.team_2.sub_text}].filter(r=>r.show).map(r=>eLt(r.team1,r.team2));return[...t,...n]},tNe=R.memo(({variant:e="common",active:t,vertical:n,onClick:r,indicatorPos:s="bottom",extraCSS:a,showNewIndicator:i,styleProps:l,isNewRedesign:c=!1,disabled:u,innerRef:d,...m})=>{const p=V("absolute",{"right-0 h-full w-[3px] rounded-l-sm":s=="right","left-0 h-full w-[3px] rounded-l-sm":s=="left","bottom-0 left-0 right-0 h-[3px] rounded-t-sm":s=="bottom","top-0 left-0 right-0 h-[3px] rounded-b-sm":s=="top","bg-inverse":e==="primary","bg-inverse/70":e==="common"},l?.indicatorClass),h=V({"px-xs transition duration-300 relative ":n,"flex items-center":t&&n,"justify-center px-xs":!n,"!cursor-not-allowed":u,"my-0.5 [&_*]:!font-normal [&_*]:!text-foreground [&_a]:hover:bg-subtler":c,"[&_a]:bg-subtle [&_a]:text-foreground [&_a]:hover:bg-subtle":c&&t,"opacity-70 cursor-not-allowed":u},t?l?.activeBgClass:l?.bgClass);return o.jsxs("div",{onClick:u?void 0:r,className:h,children:[i&&o.jsx("div",{className:"right-md top-sm text-super absolute z-10",children:""}),o.jsx(Te,{variant:u?"noHover":t?"primary":"common",...m,fullWidth:!0,extraCSS:V("py-md focus-visible:!bg-transparent before:absolute before:opacity-0 focus-visible:before:opacity-100 before:ring-super/50 before:ring-[1.5px] before:inset-y-0 before:inset-x-[-10px] before:rounded-md",{"cursor-not-allowed":u},a),noXPadding:!n,disabled:u,ref:d??void 0}),t&&!u&&o.jsx(ve.div,{layout:"position",layoutId:"tab-indicator",className:p,transition:{duration:.1,ease:"easeOut"}})]})});tNe.displayName="TabButton";const Dw=R.memo(({actionList:e,size:t=Qt.regular,variant:n="primary",fillSpace:r=!1,vertical:s=!1,layout:a="left",indicatorPos:i,iconOnly:l,allowScroll:c,tabClass:u,testId:d,layoutGroupId:m,styleProps:p,isNewRedesign:h=!1,activeTabRef:g})=>{const y=V({"w-full":r&&!c,"flex w-auto":c,"justify-center":a==="center","justify-end":a==="right"},p?.wrapperClass),x=V("items-center relative",{"justify-center":a==="center","flex-1":r,"w-full":r&&!c,"w-auto overflow-hidden flex":c},p?.innerClass),v=V("flex",{"w-full":r&&!c,"w-auto overflow-x-auto overflow-y-hidden flex-1 scrollbar-none":c},p?.scrollClass),b=V("items-center relative scrollbar-none",{"flex-1":r,"space-y-xs":s&&!h,"gap-x-md flex h-14":!s&&t!=="tiny","gap-x-sm flex h-10":!s&&t==="tiny","w-full":!s&&!c,"flex px-md w-auto overflow-x-auto":c},p?.scrollInnerClass),_=V("relative",{"h-full flex items-center":!s,"justify-center":r,"w-full":r&&!c,"flex-1 shrink-0":c},p?.itemClass);return o.jsx("div",{className:y,"data-test-id":d,children:o.jsx("div",{className:x,children:o.jsx("div",{className:v,children:o.jsx("div",{className:b,children:o.jsx(jc,{id:m,children:e.map(w=>w.show?o.jsxs(H,{className:_,children:[o.jsx(tNe,{testId:w.testId,ariaLabel:w.ariaLabel,vertical:s,text:l?void 0:w.text,size:t,variant:n,onClick:w.onClick,fullWidth:r,active:w.active,icon:w.icon,href:w.href,target:w.target,layout:a,tooltipLayout:i==="right"?"right":"top",toolTip:w.tooltip,indicatorPos:i,trailingComponent:w.trailingComponent,extraCSS:u,showNewIndicator:w.showNewIndicator,styleProps:p?.tabButton,isNewRedesign:h,disabled:w.disabled,innerRef:w.active?g:void 0}),!l&&w.badge&&o.jsx(F,{className:"bg-super pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 rounded-md px-1 py-0.5 text-white",variant:"tiny",children:w.badge}),w.children&&o.jsx(o.Fragment,{children:w.children})]},w.key??w.text):null)})})})})})});Dw.displayName="TabBar";const tLt=[17,16];function apn({event:e,brands:t,isLive:n}){const{$t:r}=Z(),[s,a]=f.useState(!1),[i,l]=f.useState("all"),c=f.useMemo(()=>(e.matchEvents?e.matchEvents.liveData.event:[]).filter(d=>i==="all"?!0:tLt.includes(d.typeId[0])).reduce((d,m)=>(d[m.periodId[1].toString()]=d[m.periodId[1].toString()]||[],d[m.periodId[1].toString()]?.push(m),d),{}),[e?.matchEvents,i]),u=f.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>l("all"),show:!0,active:i==="all"},{text:r({defaultMessage:"Key Plays",id:"CyNRXF54hv"}),onClick:()=>l("key"),show:!0,active:i==="key"}],[i,r]);return o.jsxs(o.Fragment,{children:[o.jsx(H,{variant:"raised",className:"rounded-xl border",children:o.jsx(oN,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:o.jsx("div",{className:"-mb-sm",children:o.jsx(Dw,{actionList:u,layoutGroupId:"soccer-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:o.jsx("div",{className:"-my-md",children:o.jsx($H,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:!0,brands:t,inModal:!1})})})}),s&&o.jsx(aLt,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:!0,setOpen:a})]})}const nNe=({isRed:e,className:t})=>o.jsx("svg",{width:"16",height:"19",viewBox:"0 0 16 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:V("shrink-0",t),children:o.jsx("rect",{x:"4.29248",y:"0.726685",width:"12",height:"15",rx:"2",transform:"rotate(14.6454 4.29248 0.726685)",fill:e?"#EB4E45":"#f6c825"})}),$H=f.memo(({plays:e,onViewAll:t,playsToRender:n=1/0,reverse:r=!0,brands:s,inModal:a=!1})=>{const{$t:i}=Z(),l=r?[...Object.keys(e)].reverse():Object.keys(e),c=f.useMemo(()=>{let u=n;return o.jsxs(H,{children:[l.map(d=>{let m=0;const p=e[d]?.length??0;return u<=0?null:(u<p?(m=u,u=0):(m=p,u-=p),o.jsx(nLt,{plays:e[d]??fe,playsToRender:m,period:d,reverse:r,brands:s},d))}),!a&&t&&o.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:o.jsx(Te,{variant:"super",chevron:!0,chevronIcon:Zn,text:i({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:t})})]})},[e,n,r,a,t,i,l,s]);return a?c:o.jsx(na,{className:"relative isolate",mode:"popLayout",transition:{duration:.2,ease:an},children:o.jsx(is,{children:c})})});$H.displayName="PlaysByPeriod";function nLt({plays:e,playsToRender:t,period:n,reverse:r,brands:s}){const a=f.useMemo(()=>r?[...e].reverse():e,[e,r]),i=Ds();return o.jsxs(H,{children:[t>0&&o.jsx(H,{variant:"subtle",className:V("-mx-md px-md py-sm sticky top-0 z-10 flex items-center justify-between"),children:o.jsx(F,{variant:"smallCaps",color:"light",children:n})}),o.jsx(jc,{children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:a.slice(0,t).map(l=>o.jsx(rNe,{play:l,brands:s,parentHasMounted:i},l.id))})})]})}const rNe=f.memo(({play:e,brands:t,parentHasMounted:n})=>{const{$t:r}=Z(),s=f.useRef(!n),a=Ey(e.contestantId,t,"soccer"),{colorScheme:i}=Jr(),l=ck(a.color,i).toString();return o.jsxs(ve.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:s.current?void 0:{opacity:0},animate:s.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:an},opacity:{duration:.2,ease:va}},layout:"position",children:[o.jsx("div",{className:"left-xs inset-y-xs absolute w-1 rounded-full opacity-50",style:{backgroundColor:l}}),!s.current&&o.jsx(ve.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:va,delay:.2}}),o.jsxs("div",{className:"gap-md relative flex items-center",children:[o.jsx(Ls,{logo:a.logo,color:a.color,size:"small",includeStripe:!1}),o.jsxs("div",{className:"gap-sm flex flex-1 flex-row items-center",children:[o.jsxs("div",{className:"gap-md flex items-baseline",children:[o.jsx(F,{variant:"tiny",color:"light",className:"whitespace-nowrap",children:e.periodId[1]==="PENALTIES"?`${r({defaultMessage:"PK",id:"mG6A02k2Ar"})} ${e.timeMin}`:`${e.timeMin}'`}),o.jsx(F,{variant:"small",children:e.commentary_text})]}),rLt(e)&&o.jsx(nNe,{isRed:sLt(e)==="red"})]})]})]})});rNe.displayName="Play";const rLt=e=>e.typeId[0]===17,sLt=e=>{const t=e.commentary_text.toLowerCase();return t.includes("second yellow card")||t.includes("red card")?"red":t.includes("yellow card")?"yellow":null},aLt=({plays:e,isOpen:t,setOpen:n,event:r,brands:s,reverse:a})=>{const i=f.useRef(null),{isMobileStyle:l}=Ce();return o.jsx(on,{modalContentClassname:"!py-0 mb-0 min-h-0",modalClassname:"[&_>div]:min-h-0",isOpen:t,onClose:()=>n(!1),variant:l?"bottom-sheet":"side-sheet",includeBlur:!1,children:o.jsxs("div",{className:"flex min-h-0 flex-1 flex-col",children:[o.jsx(F,{variant:"section-title",className:"py-sm -mt-sm -mx-md px-md border-subtlest shadow-subtle border-b",children:"Play by Play"}),o.jsx("div",{ref:i,className:"-mx-md px-md scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:o.jsx($H,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})]})})},iLt=({event:e})=>{const n=[...e.matchStats?.contestantStats.map(r=>{const s=r.goal_events.map(i=>({type:"goal",event:i})),a=r.red_card_events.map(i=>({type:"red_card",event:i}));return[...s,...a]})??[]].map(r=>r.sort((s,a)=>s.event[0]-a.event[0]));return!n||n.length===0?null:o.jsx("div",{className:"gap-md p-md grid grid-cols-2",children:n.map((r,s)=>o.jsx(oLt,{events:r,position:s===0?"left":"right"},s))})},oLt=({events:e,position:t})=>o.jsx("div",{className:V("gap-xs flex flex-col",{"items-start":t==="left","items-end":t==="right"}),children:e.map((n,r)=>o.jsx(lLt,{event:n,position:t},r))}),lLt=({event:e,position:t})=>o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsxs(F,{variant:"tiny",className:V("flex items-center gap-1",{"flex-row-reverse":t==="right"}),children:[o.jsx(cLt,{event:e})," ",e.event[1]]}),o.jsxs(F,{variant:"tiny",color:"light",children:[e.event[0],"'"]})]}),cLt=({event:e})=>e.type!=="goal"?o.jsx(nNe,{isRed:!0,className:"size-md inline-block"}):o.jsx("div",{className:"size-md inline-block",children:""}),sNe=R.memo(()=>o.jsx("div",{}));sNe.displayName="SportsWidgetErrorFallback";const zie=new Set,uLt=e=>e.status==="live"||e.status==="upcoming";function dLt({widget:e}){const{isMobileStyle:t}=Ce(),{result:{backend_uuid:n,mode:r}}=ln(),s=GT();if(f.useEffect(()=>{!n||!e||!e?.events?.length||zie.has(n)||(s("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:r}),zie.add(n))},[n,e?.events?.length,r,e,s]),!e?.events?.length)return null;const a=e.canonical_pages?.[0]?.url_web,i=e.events.at(0),l=!t&&(i&&uLt(i)||e.events.length<5),c=e.league??"nba";return o.jsx(Pr,{fallback:sNe,children:o.jsx(Ho,{widgetType:"sports",widgetName:e.object,children:({widgetSelected:u})=>o.jsx(aNe,{canonicalPageLink:a,children:o.jsx(yLt,{events:e.events,showHero:l,widgetSelected:u,league:c})})})})}const aNe=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(H,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(Ye,{href:t,children:o.jsxs(F,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Zn,{size:18})]})}):null]})},iNe=({initialData:e,refetch:t=!1,reason:n})=>We({initialData:e,queryKey:["sports/events/widget",e.id],queryFn:async()=>{if(!e.refetch_url)return e;const r=await Er({urlPath:e.refetch_url,timeoutMs:0,reason:n});if(!r.ok)throw ne.error("Failed to fetch sport event",{url:e.refetch_url,status:r.status,statusText:r.statusText}),new Error(`Failed to fetch sport event ${r.status} ${r.statusText}`);return await r.json()},refetchInterval:r=>r.state.data?.refetch_url?r.state.data?.refetch_interval_secs*1e3:!1,enabled:!!e.refetch_url&&t}),fLt=({event:e,onClick:t,eventCount:n,league:r})=>{const{data:s}=iNe({initialData:e,refetch:!0,reason:"sports-event-row"}),a=oNe(),i=r==="nba"&&NTe(s.title[0]??""),l=dNe(s.team_1,s.team_2),c=i?l:null,u=f.useMemo(()=>[{title:s.team_1.title,score:s.team_1.text,subscore:s.team_1.sub_text,image:s.team_1.img,emphasized:s.team_1.won,period:s.period_text},{title:s.team_2.title,score:s.team_2.text,subscore:s.team_2.sub_text,image:s.team_2.img,emphasized:s.team_2.won,period:s.period_text}],[s]);return o.jsx(uNe,{href:s.url?.url_web,onClick:()=>t(s.url?.url_web),children:o.jsx(bLt,{title:s.status==="live"?"LIVE":a(s.datetime,s.datetime_tba,s.datetime_end),isLive:s.status==="live",items:u,period:lNe(s.period_text,s.period_time,r)??null,eventCount:n,subtitle:c??void 0},s.id)})},mLt=({events:e,onClick:t,league:n})=>o.jsx("div",{className:V("bg-subtlest grid grid-cols-1 rounded-b-lg md:grid-cols-2",{"lg:grid-cols-3":e.length>2}),children:e.map(r=>o.jsx(fLt,{event:r,onClick:t,eventCount:e.length,league:n},r.id))}),pLt=e=>{const{locale:t}=Z();return e?new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):""},hLt=e=>e.join("  "),oNe=({includeTime:e=!0}={})=>{const{$t:t}=Z(),{locale:n}=Z();return f.useCallback((r,s,a)=>{if(a){if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const m=new Date(r),p=new Date(a),h=m.getFullYear();if(!(h===new Date().getFullYear())){const w=m.toLocaleDateString(n,{month:"short"}),C=p.toLocaleDateString(n,{month:"short"}),S=m.getDate(),E=p.getDate();return w===C?`${w} ${S}-${E}, ${h}`:`${w} ${S}-${C} ${E}, ${h}`}const y=m.toLocaleDateString(n,{month:"short"}),x=p.toLocaleDateString(n,{month:"short"}),v=m.getDate(),b=p.getDate();let _;if(y===x?_=`${y} ${v}-${b}`:_=`${y} ${v}-${x} ${b}`,e){const w=s?"TBA":m.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${_}, ${w}`}return _}if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const i=new Date(r),l=r&&s,c=i.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});if(p5(i))return e?`${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}, ${c}`:t({defaultMessage:"Today",id:"zWgbGgjUUg"});if(but(i))return e?`${t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"})}, ${c}`:t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"});if(Sve(i))return e?`${t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"})}, ${c}`:t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"});if(i.getFullYear()!==new Date().getFullYear())return new Date(i).toLocaleDateString(n,{month:"short",day:"numeric",year:"numeric"});const u=i.toLocaleDateString(n,{month:"short",day:"numeric"});if(!e)return u;const d=l?"TBA":i.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${u}, ${d}`},[n,t,e])},lNe=(e,t,n)=>{if(n==="mlb")return gLt(e);if(!e||typeof t?.seconds!="number"&&typeof t?.minutes!="number")return e;const r=t?.seconds?.toString().padStart(2,"0")??"00",s=t?.minutes??0;return`${e} ${s}:${r}`},gLt=e=>e?.replace("Top","").replace("Bot",""),yLt=({events:e,showHero:t,widgetSelected:n,league:r})=>{const s=f.useMemo(()=>t?e.slice(1):e,[e,t]),{data:a}=iNe({initialData:e[0],refetch:t,reason:"sports-widget-dense"});return o.jsxs(H,{children:[t&&o.jsxs(uNe,{href:a?.url?.url_web,onClick:()=>{n(a?.url?.url_web)},children:[o.jsx(xLt,{event:a,includeBorder:s.length>0,league:r,statusExtra:a&&r==="mlb"&&a.status==="live"?o.jsx(WOt,{event:{event:a}}):null}),r==="championsleague"&&a&&o.jsx(iLt,{event:{event:a,brands:[],candlestickData:null,matchEvents:null,matchStats:a.extra?.match_stats??null,eventExtra:null}})]}),o.jsx(mLt,{events:s,onClick:n,league:r})]})},cNe=()=>o.jsx("span",{className:"text-quietest",children:""}),uNe=({children:e,href:t,onClick:n})=>t?o.jsx(Ye,{href:t,className:"group/link group",onClick:n,children:e}):o.jsx("div",{className:"group",onClick:n,children:e}),dNe=(e,t)=>{const{$t:n}=Z(),r=e.subtitle?.split("-"),s=t.subtitle?.split("-"),a=ya(r)?+r[0]:null,i=ya(s)?+s[0]:null,l=4;if(a===null||i===null)return null;const c=a>i?e.abbreviation:t.abbreviation,u=a>i?a:i,d=a>i?i:a;return a>=l||i>=l?n({defaultMessage:"{leadingTeam} Wins {leadingScore}-{trailingScore}",id:"T1UC+k87MZ"},{leadingTeam:c,leadingScore:u,trailingScore:d}):a===i?n({defaultMessage:"Series Tied {team1Record}-{team2Record}",id:"Liahhq+hIg"},{team1Record:a,team2Record:i}):n({defaultMessage:"{leadingTeam} Leads {leadingScore}-{trailingScore}",id:"oO28OWtTlZ"},{leadingTeam:c,leadingScore:u,trailingScore:d})},xLt=({event:e,includeBorder:t=!1,className:n,league:r,scoreExtra:s,statusExtra:a})=>{const{$t:i}=Z(),l=e.team_1.title,c=e.team_2.title,u=e.team_1.text,d=e.team_1.sub_text,m=e.team_2.text,p=e.team_2.sub_text,h=r==="nba"&&NTe(e.title[0]??""),g=dNe(e.team_1,e.team_2),y=h?g:null,x=oNe({includeTime:!1}),v=pLt(e.datetime),b=e.datetime_tba?i({defaultMessage:"TBA",id:"ZfAWFLTzx/"}):v,_=hLt(e.title),w=eve(),{colorScheme:C}=Jr(),S=lNe(e.period_text,e.period_time,r),E=e.team_1.won||e.team_2.won,M=f.useMemo(()=>{let k;return E?(e.team_1.won?k=e.team_1.color:k=e.team_2.color,w?lk(k?pr(k):null,C==="dark"):k):null},[e.team_1.won,e.team_1.color,e.team_2.color,C,E,w]);return o.jsxs(H,{className:V(n,"rounded-inherit relative",{"border-b":t}),children:[E&&o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 overflow-hidden",style:{color:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"},children:o.jsx(xV,{className:"-inset-xl rounded-inherit !absolute ![--dog-bg-highlight:currentColor]",dotClassName:"!text-[currentColor]",highlightClassName:"!bg-black/5 dark:!bg-white/5"})}),o.jsx("div",{className:"px-md gap-sm relative flex items-start justify-between pt-[12px]",children:o.jsxs(F,{variant:"tiny",color:"light",children:[_,y&&" "+y]})}),o.jsxs("div",{className:"p-md md:px-lg md:py-md gap-sm relative grid grid-cols-[1fr_auto_1fr] items-center justify-start md:justify-between md:gap-[12px]",children:[o.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row md:justify-start md:gap-[12px]",children:[o.jsx(Kie,{record:e.team_1.subtitle,name:l,logo:e.team_1.img}),o.jsx("div",{className:"md:mx-auto",children:o.jsx(Gie,{position:"leading",score:u,subscore:d,isWinner:e.team_1.won,hasWinner:E,scoreExtra:s,team:e.team_1,teamIdx:0,league:r})})]}),o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(vLt,{status:e.status,date:x(e.datetime,e.datetime_tba,e.datetime_end),time:b,isUpcoming:e.datetime?JOt(new Date(e.datetime),e.status):void 0,period:S??null}),a]}),o.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row-reverse md:gap-[12px]",children:[o.jsx(Kie,{record:e.team_2.subtitle,name:c,logo:e.team_2.img}),o.jsx("div",{className:"md:mx-auto",children:o.jsx(Gie,{score:m,subscore:p,position:"trailing",isWinner:e.team_2.won,hasWinner:E,scoreExtra:s,team:e.team_2,teamIdx:1,league:r})})]})]}),e.live_text&&o.jsx("div",{className:"bg-subtlest px-md relative py-[12px]",children:o.jsxs(F,{variant:"tiny",color:"light",className:"gap-sm line-clamp-1 flex items-start md:items-center",children:[o.jsx(q7e,{size:16,className:"opacity-80 md:-translate-y-px"}),e.live_text]})}),E&&o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 opacity-20 mix-blend-multiply dark:opacity-60 dark:mix-blend-soft-light",style:{backgroundColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&o.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[12px] border opacity-40",style:{borderColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&o.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[13px] border opacity-20 dark:opacity-40",style:{borderColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}})]})},Gie=({score:e,subscore:t,position:n,emptyPlaceholder:r=o.jsx(cNe,{}),isWinner:s,hasWinner:a,scoreExtra:i,team:l,teamIdx:c,league:u})=>{const{isMobileStyle:d}=Ce(),m=u==="ipl"||u==="cricket"||u==="icc"||u==="atp"||u==="wta";return o.jsxs("div",{className:V("md:gap-xs flex flex-col items-center justify-center",{"items-start":n==="leading","items-end":n==="trailing","opacity-50":a&&!s}),children:[o.jsxs(F,{variant:d?m?"section-title":"display":"section-title",className:"gap-xs md:gap-sm flex items-center sm:!text-2xl lg:!text-3xl",children:[s&&n==="trailing"&&o.jsx(qie,{className:"size-3 rotate-180 md:size-4"}),o.jsxs("span",{className:"font-mono",children:[i&&o.jsx("span",{className:"mr-xs",children:i(l,c)}),e??r]}),s&&n==="leading"&&o.jsx(qie,{className:"size-2.5 md:size-4"})]}),t&&o.jsx(F,{variant:"tiny",color:"light",children:o.jsx("span",{className:"font-mono",children:t})})]})},qie=({className:e})=>o.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),Kie=({name:e,logo:t,record:n})=>e?o.jsxs("div",{className:"gap-sm flex flex-col items-center justify-between md:gap-0",children:[t&&o.jsx(Ls,{logo:t,color:"#000000"}),o.jsx(F,{variant:"baseSemi",children:e}),n&&o.jsx(F,{variant:"tiny",color:"light",children:o.jsx("span",{className:"font-mono",children:n})})]}):null,vLt=({status:e,date:t,time:n,isUpcoming:r,variant:s="stacked",period:a})=>{const i=e==="live",l=e==="final",{isMobileStyle:c}=Ce();return o.jsx("div",{className:V("gap-sm flex",{"flex-row items-center":s==="row","flex-col items-center justify-center":s==="stacked"}),children:i?o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(Ux,{size:c?"small":"default",includeDot:!0}),a&&o.jsx(F,{variant:"tiny",color:"light",children:a})]}):o.jsxs("div",{className:V("gap-xs flex",{"flex-col":s==="stacked","flex-row items-center":s==="row"}),children:[r&&o.jsx(QTe,{textCenter:!0,className:"mb-1 hidden md:block"}),l&&o.jsx(iN,{textCenter:!0,className:"-mt-0.5 md:mb-1 md:mt-0 md:block"}),o.jsx(F,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:t}),n&&!l&&o.jsx(F,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:n})]})})},bLt=({items:e,title:t,subtitle:n,isLive:r,period:s,eventCount:a})=>{const i=e.some(d=>d.emphasized),{isMobileStyle:l}=Ce(),{isLargeScreen:c,isMediumScreen:u}=Pp();return o.jsx(H,{variant:"raised",className:V("px-md h-full py-[12px]",{"border-b border-r-0 group-last:border-b-0 group-even:border-r-0":l,"border-b group-odd:border-r":u&&!c,"group-[&:nth-child(2n):nth-last-child(-n+3)~a]:border-b-0":u&&!c&&a>2,"border-b border-r group-[&:nth-child(3n)]:border-r-0":c,"group-[&:nth-child(3n):nth-last-child(-n+4)~a]:border-b-0":c&&a>3,"!border-b-0":c&&a<=3||u&&!c&&a<=2}),children:o.jsxs("div",{className:"gap-sm flex size-full flex-col items-start justify-between duration-150 group-hover/link:opacity-75",children:[r?o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(Ux,{size:"small",className:"-ml-1"}),s&&o.jsx(F,{variant:"tiny",color:"super",children:s})]}):t?o.jsx(F,{variant:"tinyRegular",color:"light",children:t}):null,o.jsx("div",{className:"w-full",children:e.map((d,m)=>o.jsx(_Lt,{item:d,anyEmphasized:i},d.title+m))}),n&&o.jsx(F,{variant:"tinyRegular",color:"light",children:n})]})})},_Lt=({item:e,anyEmphasized:t})=>{const n=f.useMemo(()=>e.score?e.subscore?`${e.score} ${e.subscore}`:e.score:o.jsx(cNe,{}),[e.score,e.subscore]);return o.jsxs(H,{className:"flex w-full items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[e.image&&o.jsx("img",{src:e.image,alt:e.title,className:"size-[24px]"}),o.jsx(F,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:e.title})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[e.emphasized&&o.jsx(Wk,{size:14,className:"text-super -translate-y-half"}),o.jsx(F,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:n})]})]})},fNe=R.memo(()=>o.jsx("div",{children:"Error loading individual event widget."}));fNe.displayName="IndvEventsWidgetErrorFallback";const Yie=new Set,wLt=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(H,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(Ye,{href:t,children:o.jsxs(F,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Zn,{size:18})]})}):null]})},CLt=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleDateString(t,{month:"short",day:"numeric"})}catch{return""}},SLt=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/^0+/,"")}catch{return""}},mNe=({competitor:e})=>o.jsxs(H,{className:"gap-sm border-subtlest px-md py-sm flex items-center border-b last:border-b-0",children:[o.jsx(F,{className:"w-4 text-center",children:e.rank}),o.jsxs("div",{className:"gap-sm flex grow items-center",children:[e.primary_img_url?o.jsx(Ls,{logo:e.primary_img_url,color:"transparent",size:"small",className:"shrink-0"}):o.jsx(H,{className:"flex h-5 w-8 shrink-0 items-center justify-center rounded-sm bg-[#44403c] text-xs",children:e.abbreviation}),o.jsxs("div",{className:"flex grow flex-col",children:[o.jsx(F,{variant:"smallBold",children:e.title}),o.jsxs(F,{variant:"tiny",color:"light",children:[e.metadata[0]," "]})]})]}),o.jsxs(H,{className:"flex flex-col items-end text-right",children:[o.jsx(F,{variant:"smallBold",children:e.metadata[1]}),o.jsx(F,{variant:"tiny",color:"light",children:e.metadata[2]})]})]},e.id),ELt=({event:e,league:t})=>{const{locale:n}=Z(),r=e.subtitle,{$t:s}=Z(),a=SLt(e.datetime,n),i=e.datetime?EU(new Date(e.datetime))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):Sve(new Date(e.datetime))?s({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"}):new Date(e.datetime).toLocaleDateString(n,{weekday:"short",month:"short",day:"numeric"}):"";return o.jsxs(H,{className:"flex flex-col",children:[o.jsxs(H,{className:"p-md border-subtler flex items-end justify-between border-b",children:[o.jsxs(H,{className:"flex flex-col",children:[o.jsx(F,{variant:"baseSemi",children:e.title.join(" ")}),o.jsxs(F,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})]}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx(F,{variant:"small",children:i}),o.jsx(F,{variant:"small",color:"light",children:a})]})]}),e.image_url&&o.jsx(H,{className:"aspect-video w-full overflow-hidden rounded-lg bg-[#292524]",children:o.jsx(Ss,{src:e.image_url,alt:`${e.title.join(" ")} circuit map`,className:"size-full object-contain"})}),o.jsx(H,{className:"gap-xs p-md flex flex-col",children:e.metadata?.map((l,c)=>o.jsxs(H,{className:"flex justify-between",children:[o.jsx(F,{className:"text-sm",color:"light",children:l[0]}),o.jsx(F,{className:"text-sm",children:l[1]})]},c))})]})},MLt=({event:e,league:t})=>{const{locale:n}=Z(),r=CLt(e.datetime,n),s=e.competitors.slice(0,3),a=e.subtitle;return o.jsxs(H,{className:"flex flex-col",children:[o.jsxs(H,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",className:"flex justify-between",children:o.jsx("span",{children:e.title.join(" ")})}),o.jsxs(F,{variant:"small",color:"light",children:[t.toUpperCase(),a&&`${a}`]})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(F,{variant:"small",color:"light",children:r}),o.jsx(iN,{})]})]}),o.jsx(H,{className:"flex flex-col",children:s.map(i=>o.jsx(mNe,{competitor:i},i.id))})]})},kLt=({event:e,league:t})=>{const n=e.competitors.slice(0,3),r=e.subtitle;return o.jsxs(H,{className:"flex flex-col",children:[o.jsxs(H,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",className:"flex justify-between",children:o.jsx("span",{children:e.title.join(" ")})}),o.jsx("div",{children:o.jsxs(F,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})})]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ux,{includeDot:!0}),e.period_text&&o.jsx(F,{color:"light",variant:"small",children:e.period_text})]})]}),o.jsx(H,{className:"flex flex-col",children:n.map(s=>o.jsx(mNe,{competitor:s},s.id))})]})},TLt=({event:e,league:t})=>{switch(e.status){case"upcoming":return o.jsx(ELt,{event:e,league:t});case"live":return o.jsx(kLt,{event:e,league:t});case"final":return o.jsx(MLt,{event:e,league:t});default:return null}};function NLt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=ln(),r=GT(),s=f.useMemo(()=>e?.event,[e]),a=f.useMemo(()=>e?.league,[e]);if(f.useEffect(()=>{!t||!e||!s||Yie.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),Yie.add(t))},[t,s,n,e,r]),!e||!s)return null;const i=e.canonical_page?.url_web,l=`indv-event-${s.id??"unknown"}`;return o.jsx(Pr,{fallback:fNe,children:o.jsx(Ho,{widgetType:"sports",widgetName:l,children:({})=>o.jsx(wLt,{canonicalPageLink:i,children:o.jsx(TLt,{event:s,league:a})})})})}const pNe=R.memo(()=>o.jsx("div",{children:"Error loading individual schedule widget."}));pNe.displayName="IndvScheduleWidgetErrorFallback";const Qie=new Set,jLt=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(H,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(Ye,{href:t,children:o.jsxs(F,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Zn,{size:18})]})}):null]})},ALt=(e,t,n)=>{if(!e)return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2");try{return new Date(e).toLocaleTimeString(n,{hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"}).replace(/^0+/,"")}catch{return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2")}},nR=({event:e,isFinal:t,isLive:n})=>{const{locale:r}=Z(),s=e.metadata?.[0],a=e.metadata?.[1]??"",i=ALt(e.datetime,a,r),{isMobileStyle:l}=Ce(),c=!!e.url?.url_web,u=o.jsxs(o.Fragment,{children:[o.jsxs(H,{className:"p-md col-span-3 grid grid-cols-subgrid items-center md:col-span-4",children:[o.jsx(H,{className:"flex flex-col items-start",children:o.jsx(RLt,{date:e.datetime??""})}),o.jsxs(H,{className:"gap-xs flex flex-col md:gap-0",children:[o.jsx(F,{variant:"baseSemi",className:"text-base leading-snug",children:e.title.join(" ")}),s&&o.jsxs(F,{variant:l?"tiny":"small",className:"mt-0 pt-0",color:"light",children:[!t&&!n&&o.jsxs(o.Fragment,{children:[i,"  "]}),s]})]}),o.jsx("div",{className:"hidden md:block",children:e.live_text&&o.jsx(F,{variant:"small",className:"text-right",children:e.live_text})}),o.jsx("div",{children:t?o.jsx(iN,{}):n?o.jsx(Ux,{includeDot:!0}):null})]}),o.jsx("div",{className:"p-md -mt-sm col-span-2 col-start-2 pl-0 pt-0 md:hidden",children:e.live_text&&o.jsx(F,{variant:"tiny",className:"border-subtlest p-xs px-sm rounded border",color:"light",children:e.live_text})})]}),d="col-span-3 grid grid-cols-subgrid border-b border-subtlest last:border-b-0 md:col-span-4";return c?o.jsx(Ye,{href:e.url?.url_web??"",className:V(d,"hover:bg-subtler duration-150"),children:u}):o.jsx(H,{className:d,children:u})};function ILt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=ln(),r=GT(),s=f.useMemo(()=>e?.events??[],[e]);if(f.useEffect(()=>{!t||!e||!s?.length||Qie.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),Qie.add(t))},[t,e,s,n,r]),!e||!s||s.length===0)return null;const a=e.canonical_page?.url_web,i=`indv-schedule-${e.league??"unknown"}`;return o.jsx(Pr,{fallback:pNe,children:o.jsx(Ho,{widgetType:"sports",widgetName:i,children:({})=>o.jsx(jLt,{canonicalPageLink:a,children:o.jsx(H,{className:"gap-x-md grid grid-cols-[min-content,1fr,min-content] md:grid-cols-[min-content,1fr,1fr,min-content]",children:s.map(l=>{switch(l.status){case"upcoming":return o.jsx(nR,{event:l},l.id);case"live":return o.jsx(nR,{event:l,isLive:!0},l.id);case"final":return o.jsx(nR,{event:l,isFinal:!0},l.id);default:return null}})})})})})}const RLt=({date:e})=>{const{locale:t}=Z(),n=new Date(e).toLocaleDateString(t,{day:"numeric"}),r=new Date(e).toLocaleDateString(t,{month:"short"}),{isMobileStyle:s}=Ce();return o.jsxs("div",{className:"dark:bg-subtle bg-subtler py-xs flex w-full flex-col items-center justify-center rounded-lg px-0.5 md:p-[6px]",children:[o.jsx(F,{className:"px-sm -mb-0.5 rounded-full text-center",variant:"tinyRegular",color:"light",children:r}),o.jsx(F,{className:"px-sm -mb-1 text-center",variant:s?"baseSemi":"section-title",children:n})]})},PLt=({result:e})=>{let t="",n=null;return e==="W"?(t="bg-[#059669] text-white",n=Ar):e==="D"?(t="bg-[#64748b] text-white",n=Hk):e==="L"&&(t="bg-[#e11d48] text-white",n=It),o.jsx("div",{className:V("flex size-4 items-center justify-center rounded-full",t),children:n&&o.jsx(n,{size:12,strokeWidth:2.5})})},WH=({form:e})=>{const t=String(e).replace(/\s/g,"");return o.jsx("div",{className:"flex gap-0.5",children:t.split("").map((n,r)=>o.jsx(PLt,{result:n},r))})};WH.displayName="FormDisplay";const OLt={form:e=>{const t=e.display_value??e.value??"";return o.jsx(WH,{form:String(t)})},movement:e=>{const t=e.display_value??e.value??"";return o.jsx(LLt,{value:String(t)})}},LLt=({value:e})=>{const t=e.includes(""),n=e.includes(""),r=e==="-",s=e.replace(/[^0-9]/g,"");return o.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[o.jsx(le,{icon:t?K7e:n?Y7e:Hk,size:"sm",className:V("scale-90",{"text-quietest":r,"text-positive":t,"text-negative":n})}),!r&&o.jsx(F,{variant:"tinyMono",color:t?"positive":"negative",className:"w-[2ch] shrink-0 text-left",children:s})]})};WH.displayName="FormDisplay";const hNe=(e="left")=>{switch(e){case"center":return"text-center";case"right":return"text-right";case"left":default:return"text-left"}},DLt=(e=!1)=>e?"w-full":"w-0",rR=(e="normal",t)=>{if(t==="pos")return"smallCaps";switch(e){case"bold":return"smallBold";case"normal":default:return"small"}},FLt=(e="")=>e==="pos"?"light":"default",ULt=({cell:e,column:t,columnRenderers:n=OLt})=>{const{inApp:r}=wl();if(!e)return o.jsx("td",{className:"md:px-md p-sm"});let s;const a=t.column_type??"text",i=e.display_value??e.value??"-";t.column_id&&n[t.column_id]?s=n[t.column_id]?.(e,t):(a==="entity"||a==="image")&&e.image_url?s=o.jsxs("div",{className:"md:gap-md gap-sm flex items-center",children:[o.jsx(Ls,{logo:e.image_url,color:"transparent",size:"small",className:"shrink-0"}),o.jsxs("div",{children:[o.jsx(F,{variant:rR(t.font_weight??"normal",t.column_id),children:i}),a==="entity"&&e.sub_text&&o.jsx(F,{variant:"tiny",color:"light",children:e.sub_text})]})]}):a==="entity"&&!e.image_url?s=o.jsxs("div",{children:[o.jsx(F,{variant:rR(t.font_weight??"normal",t.column_id),children:i}),e.sub_text&&o.jsx(F,{variant:"tiny",color:"light",children:e.sub_text})]}):s=o.jsx(F,{variant:rR(t.font_weight??"normal",t.column_id),color:FLt(t.column_id),children:i});const l=V("md:pl-md pl-sm last:px-sm md:last:px-md py-sm align-middle",hNe(t.alignment),DLt(t.should_fill_width));return e.canonical_page?o.jsx("td",{className:l,children:o.jsx(Xu,{href:r?e.canonical_page.url_app:e.canonical_page.url_web,className:"block",children:s})}):o.jsx("td",{className:l,children:s})},BLt=({row:e,columns:t,columnRenderers:n})=>{const r=new Map(e.cells.map(s=>[s.column_id,s]));return o.jsx("tr",{className:V("border-subtlest border-b last:border-b-0"),children:t.map(s=>o.jsx(ULt,{cell:r.get(s.column_id),column:s,columnRenderers:n},s.column_id))})},VLt=({table:e,variant:t="subtler",title:n,className:r,noWrapTitle:s=!1,onGroupClick:a,columnRenderers:i})=>{const[l,c]=f.useState(e?.groups?.[0]?.group_id??""),[u,d]=f.useState(!1),{$t:m}=Z();if(Sp("standings"),!e||!e.groups?.length)return null;const p=n??e.title??"Standings",h=e.groups.find(v=>v.group_id===l),g=e.groups.length>1;if(!h)return null;const y=u?h.rows:h.rows.slice(0,10),x=e.groups.map(v=>({type:"default",text:v.title??v.group_id,onClick:()=>{c(v.group_id),a?.(v.group_id)},active:l===v.group_id,show:!0}));return o.jsx(un,{className:r,header:o.jsxs("div",{className:"md:pl-md gap-sm sm:gap-md mb-sm flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(F,{variant:"baseSemi",className:V(s?"flex-shrink-0":void 0,"max-sm:pl-sm"),children:p}),g?o.jsx(sn,{items:x,isMobileStyle:!1,wrapperClassName:"min-w-0",children:o.jsx(pe,{text:h.title??h.group_id,chevron:!0,size:"small",extraCSS:"w-full"})}):o.jsx("div",{className:"invisible min-h-10"})]}),children:o.jsxs("div",{className:"rounded-inherit",children:[o.jsx("div",{className:"rounded-t-inherit overflow-hidden",children:o.jsx(fl,{orientation:"horizontal",children:o.jsxs("table",{className:V("w-full table-auto border-collapse"),children:[o.jsx(H,{as:"thead",variant:t==="raised"?"raisedOffset":"subtle",children:o.jsx("tr",{children:h.columns.map(v=>o.jsx("th",{className:V("md:pl-md pl-sm last:px-sm md:last:px-md py-xs whitespace-nowrap align-middle",hNe(v.alignment)),children:o.jsx(qOt,{className:V({"w-[200px] md:w-auto":v.should_fill_width}),children:v.header_label})},v.column_id))})}),o.jsx("tbody",{children:y.map(v=>o.jsx(BLt,{row:v,columns:h.columns,columnRenderers:i},v.row_id))})]})})}),h.rows.length>10&&o.jsx(H,{className:"p-xs border-t",children:o.jsx(Te,{text:m(u?{id:"UOYN/MXiOT",defaultMessage:"View Less"}:{id:"wbcwKddwLa",defaultMessage:"View All"}),size:"small",fullWidth:!0,onClick:()=>d(v=>!v)})})]},h.group_id)})},gNe=R.memo(()=>o.jsx("div",{children:"Error loading standings widget."}));gNe.displayName="StandingsWidgetErrorFallback";const $Lt=new Set,WLt=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(H,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(Ye,{href:t,children:o.jsxs(F,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Zn,{size:18})]})}):null]})};function HLt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=ln(),r=GT(),s=f.useMemo(()=>e?.standings_table?e.standings_table:null,[e]);if(f.useEffect(()=>{!t||!e||!s||$Lt.has(t)||r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n})},[t,s,n,e,r]),!e||!s)return null;const a=e.canonical_pages?.[0]?.url_web,i=`standings-${s.table_id??"unknown"}`;return o.jsx(Pr,{fallback:gNe,children:o.jsx(Ho,{widgetType:"sports",widgetName:i,children:({})=>o.jsx(WLt,{canonicalPageLink:a,children:o.jsx(VLt,{table:s,variant:"raised",className:"!rounded-none border-0"})})})})}const Hb={staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0},zLt=({headshotImageUrl:e,flagUrl:t,name:n,isCompositeFlag:r})=>!e&&!t?null:o.jsxs("div",{className:"relative size-6 shrink-0 rounded md:size-8",children:[o.jsx("img",{src:e??t,alt:n,className:V("rounded-inherit relative size-full shrink-0",{"object-contain":r,"object-cover":!r})}),!r&&o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-white/10"}),e&&o.jsxs("div",{className:"ml-xs ring-raised absolute right-[90%] top-[90%] size-3 shrink-0 -translate-y-1/2 translate-x-1/2 rounded-full ring-2 md:size-4",children:[o.jsx("img",{src:t,alt:n,className:"rounded-inherit relative size-full shrink-0 object-cover"}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-white/10"})]})]}),yNe=({event:e,team1:t,team2:n,isLive:r})=>{const s=e.datetime&&new Date(e.datetime)>new Date,a=r?t.sub_text:null,i=r?n.sub_text:null,{isMobileStyle:l}=Ce(),c=f.useMemo(()=>e?.stat_columns?.map(d=>({team1:{score:d.team_1_text,scoreSuper:d.team_1_super_text,emphasis:d.team_1_emphasis,super:!1},team2:{score:d.team_2_text,scoreSuper:d.team_2_super_text,emphasis:d.team_2_emphasis,super:!1}})),[e?.stat_columns]),u=f.useMemo(()=>r?[...c??[],{team1:{score:t.text,scoreSuper:null,emphasis:!1,super:!0},team2:{score:n.text,scoreSuper:null,emphasis:!1,super:!0}}]:c,[c,r,t.text,n.text]);return s?o.jsxs("div",{className:"gap-sm pr-sm flex h-full flex-col justify-around",children:[o.jsx(F,{variant:"base",color:"ultraLight",className:"opacity-50",children:""}),o.jsx(F,{variant:"base",color:"ultraLight",className:"opacity-50",children:""})]}):c?o.jsxs("div",{className:V("gap-x-md grid h-16 auto-cols-auto grid-flow-col",{"gap-x-sm":l}),children:[u?.map((d,m)=>o.jsxs("div",{className:"gap-sm grid h-full grid-cols-subgrid",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(F,{variant:l?"smallBold":"section-title",className:"min-w-[2ch] text-center !font-mono leading-none",color:d.team1.super&&d.team1.score?"super":d.team1.emphasis?"default":"ultraLight",children:[d.team1.score??"",d.team1.scoreSuper&&o.jsx("sup",{className:"-translate-y-sm text-2xs !font-mono tracking-tight",children:d.team1.scoreSuper})]})}),o.jsx("div",{className:"flex items-center",children:o.jsxs(F,{variant:l?"smallBold":"section-title",className:"min-w-[2ch] text-center !font-mono leading-none",color:d.team2.super&&d.team2.score?"super":d.team2.emphasis?"default":"ultraLight",children:[d.team2.score??"",d.team2.scoreSuper&&o.jsx("sup",{className:"-translate-y-sm text-2xs !font-mono tracking-tight",children:d.team2.scoreSuper})]})})]},m)),(a||i)&&o.jsxs("div",{className:"gap-sm grid h-full grid-cols-subgrid place-items-center",children:[o.jsx(Xie,{score:a}),o.jsx(Xie,{score:i})]})]}):null},Xie=({score:e})=>{const{isMobileStyle:t}=Ce();return o.jsx(H,{variant:"superLight",className:V("px-xs flex w-full items-center justify-center rounded py-0.5",{"opacity-0":!e}),children:o.jsx(F,{variant:t?"smallBold":"section-title",color:"super",className:"flex min-w-[2ch] items-center justify-center",children:o.jsx("span",{className:"font-mono",children:e??""})})})},GLt=({children:e,className:t})=>o.jsx(ve.div,{layout:!0,layoutRoot:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{ease:an,duration:.5},className:V("p-sm isolate flex-col items-end md:flex",t),children:o.jsx("ul",{className:"-mb-xs flex w-full flex-col items-start",children:o.jsx(jc,{id:"index",children:e})})}),xNe=R.memo(({extraCss:e})=>o.jsx(H,{className:`h-[12px] w-[60px] rounded-full ${e}`,variant:"subtler"}));xNe.displayName="ArticleSkeletonItem";const qLt=({widgetData:e,onClick:t,highlighted:n,idx:r})=>o.jsxs("div",{className:"gap-xs pt-sm ml-6 flex items-center",onClick:t.bind(null,e.id),children:[o.jsx(F,{className:V("border-subtler bg-base relative -top-px inline-flex size-4 shrink-0 scale-[.85] items-center justify-center rounded-full border shadow-sm duration-150",{"border-foreground bg-inverse !text-inverse opacity-70":n}),variant:"smallCaps",color:"light",children:r+1}),o.jsx(F,{variant:"tiny",color:n?void 0:"light",className:V("line-clamp-1 cursor-pointer opacity-80 duration-150 hover:!opacity-100",{"!opacity-100":n}),children:e.name})]}),KLt=({highlighted:e,scrollTopOffset:t,scrollThumbHeight:n,widgets:r,loading:s})=>o.jsxs("div",{className:V("bg-base w-two absolute inset-y-0 left-0 z-[2] rounded-full",{"opacity-0 delay-1000":!e}),children:[o.jsx("div",{className:V("absolute inset-0 overflow-hidden duration-150",{"opacity-0":r.length===0||!e,"opacity-1":r.length>0}),children:o.jsx("div",{className:V("absolute left-0 top-0 w-full rounded-full",{"bg-inverse/70":s},{"bg-inverse":!s}),style:{top:`min(${t}%, calc(100% - 8px - ${n}%))`,height:n+"%"}})}),o.jsx("div",{className:"bg-inverse/10 absolute inset-0 rounded-full"})]}),vNe=(e,t,n=100)=>{const s=e.getBoundingClientRect().top,a=t.clientHeight/2;return s-a<=n},YLt=({title:e,onClick:t,idx:n,onWidgetClick:r,highlighted:s=!1,isStaged:a,loading:i,id:l,widgets:c=fe,ref:u,testId:d})=>{const m=s&&!i,[p,h]=f.useState(0),[g,y]=f.useState(0),[x,v]=f.useState(""),b=2,{entityRefs:_}=pH(),{scrollContainerRef:w}=Za(),C=f.useRef(null),S=f.useCallback(()=>{const k=u?.current;if(k){const N=k.getBoundingClientRect().height,P=k.getBoundingClientRect().top;h(Math.max((1-(N+P)/N)*100,0))}},[u]),E=f.useMemo(()=>Uy(()=>{let k=[];Object.keys(_).map(N=>{_[N]?.current&&w?.current&&vNe(_[N]?.current,w.current)&&(k=[...k,N])}),v(k[k.length-1]??"")},100),[v,_,w]);f.useEffect(()=>{const k=w.current;if(k)return c&&c.length>=b&&s?(k.addEventListener("scroll",E),k.addEventListener("scroll",S)):(k.removeEventListener("scroll",E),k.removeEventListener("scroll",S)),()=>{k.removeEventListener("scroll",E),k.removeEventListener("scroll",S)}},[s,E,S,c,w]),f.useEffect(()=>{const k=u?.current;if(C.current&&(C.current.disconnect(),C.current=null),k?.nodeType===Node.ELEMENT_NODE){const N=new ResizeObserver(([P])=>{if(P&&ya(P.borderBoxSize)){const{blockSize:L}=P.borderBoxSize[0];y(window.innerHeight/L*100)}});N.observe(k),C.current=N}return()=>{C.current?.disconnect(),C.current=null}},[u,n]);const M=f.useMemo(()=>c.length>=b&&o.jsx("span",{className:"ml-xs inline-flex",children:o.jsx(le,{icon:Bn,size:"xs"})}),[c.length,b]);return o.jsxs(wn,{as:"li",active:i,speed:"slow",className:"group relative flex select-none flex-col",children:[o.jsx(na,{mode:"popLayout",initial:!0,children:o.jsx(is,{children:a&&!e?o.jsx("div",{className:"ml-md flex h-[20px] items-center",children:o.jsx(xNe,{extraCss:"!w-[100px] !h-[10px]"})}):o.jsxs("div",{children:[o.jsx("div",{onClick:t.bind(null,n),"data-testid":d,children:o.jsxs(F,{variant:"small",color:m?"default":a?"ultraLight":"light",className:V("gap-xs pl-md line-clamp-2 cursor-pointer opacity-80 duration-150 group-hover:opacity-100",{"font-[450] !opacity-100":m}),children:[e,M]})}),s&&!a&&c.length>=b&&o.jsx(ve.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0,transition:{delay:.15}},exit:{opacity:0,y:-4},className:"pb-1",children:c.map((k,N)=>{const P=k.meta_data;return P.object==="ShopifyWidget"?o.jsx(qLt,{widgetData:P,onClick:r,idx:N,highlighted:!i&&x===k.meta_data?.id},k.meta_data?.id):null})},e)]})},a&&!e?"placeholder":e)}),o.jsx("div",{className:"h-sm text-inverse relative z-[5] inline-flex w-full",children:o.jsx("svg",{width:"2",height:"10",viewBox:"0 0 2 10",fill:"none",className:"inline-flex",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M2 0C2 0.552284 1.55228 1 1 1C0.447716 1 0 0.552284 0 0V10C0 9.44772 0.447716 9 1 9C1.55228 9 2 9.44772 2 10V0Z",fill:"currentColor"})})}),i&&o.jsx("div",{className:"w-two absolute inset-y-0 left-0 z-[4] animate-pulse rounded-full",children:o.jsx("div",{className:V("bg-inverse absolute inset-0 opacity-10")})}),o.jsx("div",{className:V("bg-base w-two absolute inset-y-0 left-0 z-[3] opacity-0 duration-150",{"!opacity-100":a})}),c.length>=b&&o.jsx(KLt,{highlighted:s,scrollTopOffset:p,scrollThumbHeight:g,widgets:c,loading:i??!1}),s&&o.jsx(ve.div,{layoutId:"layout"+l,transition:{ease:an,duration:.3},className:V("bg-inverse w-two absolute inset-y-0 left-0 z-[1] rounded-full",{"!bg-inverse/70":a||i},{"opacity-0 delay-100":c.length>=b})}),o.jsx("div",{className:V("bg-inverse w-two absolute inset-y-0 left-0 z-[1] rounded-full opacity-10 duration-150")})]})},QLt=({items:e,sectionRefs:t,onItemClick:n,onWidgetClick:r,className:s,id:a})=>{const[i,l]=f.useState(0),c=h=>{r?.(h)},{scrollContainerRef:u}=Za(),d=h=>{h===0?u?.current?.scrollTo({top:0,behavior:"smooth"}):n(h)},m=f.useMemo(()=>Uy(()=>{if(!u?.current)return;const h=u.current;if((h?.scrollTop??0)===0){l(0);return}if(AM(h)){l(e.length-1);return}let y=[];Array.from({length:Object.keys(t).length}).map((x,v)=>{const b=t?.[v]?.current;b&&vNe(b,h,0)&&(y=[...y,v])}),l(y[y.length-1]??0)},100),[t,l,e.length,u]),p=f.useCallback(()=>{m()},[m]);return f.useEffect(()=>{const h=u?.current;return h?.addEventListener("scroll",p),()=>{h?.removeEventListener("scroll",p)}},[p,u]),o.jsx(GLt,{className:s,children:e.filter(h=>h.show).map((h,g)=>o.jsx(YLt,{title:h.title,onClick:d,onWidgetClick:c,idx:g,loading:h.loading,highlighted:g===i,isStaged:h.staged,id:a,testId:h.testId,widgets:g!==0?h.widgets:void 0,ref:t[g]},h.id))})},bNe=R.memo(()=>o.jsx("div",{}));bNe.displayName="MenuSectionErrorFallback";const _Ne=R.memo(({children:e,entries:t,className:n,showMenu:r=!0,header:s,footer:a,variant:i="default",id:l})=>{const{isMobileStyle:c}=Ce();return o.jsxs("div",{className:V(n,"mx-md mb-md max-w-threadWidth gap-x-lg md:mx-lg relative md:grid",{"grid-cols-4":i==="default","grid-cols-3":i==="twoThirds"}),children:[o.jsx("div",{className:V("space-y-md pt-md",{"col-span-3":i==="default","col-span-2":i==="twoThirds"}),children:e}),o.jsx("div",{className:V("relative",{"col-span-1 col-start-4":i==="default","col-span-1":i==="twoThirds"}),children:r&&!c&&o.jsxs("div",{className:"sticky top-0",children:[s&&o.jsx("div",{children:s}),o.jsx(wNe,{entries:t,id:l}),a&&o.jsx("div",{children:a})]})})]})});_Ne.displayName="WithMenu";const sR=({children:e,className:t,show:n=!0,ref:r})=>n?o.jsx(Pr,{fallback:bNe,children:o.jsx("div",{ref:r,className:t,children:e})}):null,wNe=R.memo(({entries:e,id:t})=>{const{scrollContainerRef:n}=Za();R.useEffect(()=>{const i=window.location.hash.slice(1);if(i){const l=e.find(c=>c.id===i);l?.ref.current&&Zie(l.ref.current,!1,n.current)}},[e,n]);const r=f.useMemo(()=>Object.fromEntries(e.filter(i=>i.show).map((i,l)=>[l,i.ref])),[e]),s=f.useMemo(()=>e.map(i=>({title:i.title,id:i.id,loading:!1,show:i.show??!0})).filter(i=>i.show),[e]),a=f.useCallback(i=>{r[i]?.current&&Zie(r[i].current,!0,n.current)},[r,n]);return o.jsx(QLt,{className:"pt-md",items:s,sectionRefs:r,onItemClick:a,id:`menu-list-${t}`})});wNe.displayName="MenuList";function Zie(e,t=!0,n){const r=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--header-height"))||50,s=parseFloat(window.getComputedStyle(e).marginTop),{top:a}=e.getBoundingClientRect();if(!n)return;const i=a+n.scrollTop-r-s;n.scrollTo({top:i,behavior:t?"smooth":"auto"})}async function XLt(){const{error:e,data:t}=await ae.GET("/rest/sports/f1/","f1-index",{timeoutMs:0});if(e)throw new Ie("API_CLIENTS_ERROR",{details:{league:"f1"}});return t?.data}async function ZLt(){const{error:e,data:t}=await ae.GET("/rest/sports/nba","nba-index",{timeoutMs:0});if(e)throw new Ie("API_CLIENTS_ERROR",{details:{league:"nba"}});return t?.data??null}async function JLt(){const{error:e,data:t}=await ae.GET("/rest/sports/wnba/","wnba-index",{timeoutMs:0});if(e)throw new Ie("API_CLIENTS_ERROR",{details:{league:"wnba"}});return t?.data}async function e7t(){const{error:e,data:t}=await ae.GET("/rest/sports/pga/","pga-index",{timeoutMs:0});if(e)throw new Ie("API_CLIENTS_ERROR",{details:{league:"pga"}});return t?.data}async function t7t(){const{error:e,data:t}=await ae.GET("/rest/sports/european_tour/","european-tour-index",{timeoutMs:0});if(e)throw new Ie("API_CLIENTS_ERROR",{details:{league:"european_tour"}});return t?.data}async function n7t(e){const{error:t,data:n}=await ae.GET("/rest/sports/tennis/{league}",`${e}-index-client-page`,{params:{path:{league:e}},timeoutMs:3e4});if(t)throw new Ie("API_CLIENTS_ERROR",{cause:t,details:{league:e}});return n?.data}async function r7t(){const{error:e,data:t}=await ae.GET("/rest/sports/mlb","mlb-index",{timeoutMs:0});if(e)throw new Ie("API_CLIENTS_ERROR",{details:{league:"mlb"}});return t?.data}async function s7t(){const{error:e,data:t}=await ae.GET("/rest/sports/ipl","ipl-index",{timeoutMs:0});if(e)throw new Ie("API_CLIENTS_ERROR",{details:{league:"ipl"}});return t?.data??null}async function a7t(){const e=await ae.GET("/rest/sports/cricket/icc","icc-index",{timeoutMs:0,numRetries:0});if(e.error)throw new Ie("API_CLIENTS_ERROR",{details:{league:"icc"}});return e.data}const i7t=e=>["sports/",e],CNe=e=>["wsc-story",e];async function SNe({eventId:e,headers:t}){const n=await ae.GET("/rest/sports/wsc/story/{event_id}","wsc-story-fetch",{params:{path:{event_id:String(e)}},headers:t,timeoutMs:0});if(n.error)throw new Ie("API_CLIENTS_ERROR",{details:{eventId:e,endpoint:"/rest/sports/wsc/story"}});if(!n.data)throw new Error(`No URL found in WSC story response for event ${e}`);return n.data}async function ENe({league:e,headers:t,reason:n}){try{const{error:r,data:s}=await ae.GET("/rest/sports/{league}/hype",n,{params:{path:{league:e}},headers:t,timeoutMs:0});if(r)throw new Ie("API_CLIENTS_ERROR",{details:{league:e,reason:n}});return s.data}catch(r){return ne.error(r),null}}const ipn=Object.freeze(Object.defineProperty({__proto__:null,getEuropeanTourIndex:t7t,getF1Index:XLt,getICCIndex:a7t,getIPLIndex:s7t,getMLBIndex:r7t,getNBAIndex:ZLt,getPGAIndex:e7t,getSportsLeagueHype:ENe,getTennisIndex:n7t,getWNBAIndex:JLt,getWscStory:SNe,sportsIndexKey:i7t,wscStoryKey:CNe},Symbol.toStringTag,{value:"Module"})),MNe=R.memo(({query:e,children:t,nofollow:n=!0,sources:r,...s})=>{const a=`/search/new?q=${encodeURIComponent(e)}${r?`&sources=${r.join(",")}`:""}`,i=f.useCallback(()=>XFe({query:e}),[e]);return o.jsx(Ye,{href:QFe()?void 0:a,rel:n?"nofollow":void 0,onClick:i,...s,children:t})});MNe.displayName="CanonicalQuery";var aR,lN="HoverCard",[kNe,opn]=Mi(lN,[Yy]),cN=Yy(),[o7t,uN]=kNe(lN),TNe=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:s,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=e,c=cN(t),u=f.useRef(0),d=f.useRef(0),m=f.useRef(!1),p=f.useRef(!1),[h,g]=Cl({prop:r,defaultProp:s??!1,onChange:a,caller:lN}),y=f.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>g(!0),i)},[i,g]),x=f.useCallback(()=>{clearTimeout(u.current),!m.current&&!p.current&&(d.current=window.setTimeout(()=>g(!1),l))},[l,g]),v=f.useCallback(()=>g(!1),[g]);return f.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),o.jsx(o7t,{scope:t,open:h,onOpenChange:g,onOpen:y,onClose:x,onDismiss:v,hasSelectionRef:m,isPointerDownOnContentRef:p,children:o.jsx(RF,{...c,children:n})})};TNe.displayName=lN;var NNe="HoverCardTrigger",jNe=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=uN(NNe,n),a=cN(n);return o.jsx(o3,{asChild:!0,...a,children:o.jsx(mn.a,{"data-state":s.open?"open":"closed",...r,ref:t,onPointerEnter:Wt(e.onPointerEnter,dk(s.onOpen)),onPointerLeave:Wt(e.onPointerLeave,dk(s.onClose)),onFocus:Wt(e.onFocus,s.onOpen),onBlur:Wt(e.onBlur,s.onClose),onTouchStart:Wt(e.onTouchStart,i=>i.preventDefault())})})});jNe.displayName=NNe;var HH="HoverCardPortal",[l7t,c7t]=kNe(HH,{forceMount:void 0}),ANe=e=>{const{__scopeHoverCard:t,forceMount:n,children:r,container:s}=e,a=uN(HH,t);return o.jsx(l7t,{scope:t,forceMount:n,children:o.jsx(wa,{present:n||a.open,children:o.jsx(x_,{asChild:!0,container:s,children:r})})})};ANe.displayName=HH;var uk="HoverCardContent",INe=f.forwardRef((e,t)=>{const n=c7t(uk,e.__scopeHoverCard),{forceMount:r=n.forceMount,...s}=e,a=uN(uk,e.__scopeHoverCard);return o.jsx(wa,{present:r||a.open,children:o.jsx(u7t,{"data-state":a.open?"open":"closed",...s,onPointerEnter:Wt(e.onPointerEnter,dk(a.onOpen)),onPointerLeave:Wt(e.onPointerLeave,dk(a.onClose)),ref:t})})});INe.displayName=uk;var u7t=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,...l}=e,c=uN(uk,n),u=cN(n),d=f.useRef(null),m=Hn(t,d),[p,h]=f.useState(!1);return f.useEffect(()=>{if(p){const g=document.body;return aR=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=aR,g.style.webkitUserSelect=aR}}},[p]),f.useEffect(()=>{if(d.current){const g=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),f.useEffect(()=>{d.current&&m7t(d.current).forEach(y=>y.setAttribute("tabindex","-1"))}),o.jsx(g_,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:Wt(a,g=>{g.preventDefault()}),onDismiss:c.onDismiss,children:o.jsx(PF,{...u,...l,onPointerDown:Wt(l.onPointerDown,g=>{g.currentTarget.contains(g.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:m,style:{...l.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),d7t="HoverCardArrow",f7t=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=cN(n);return o.jsx(OF,{...s,...r,ref:t})});f7t.displayName=d7t;function dk(e){return t=>t.pointerType==="touch"?void 0:e()}function m7t(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var zH=TNe,GH=jNe,qH=ANe,KH=INe;const iR="text-foreground text-left hover:text-super focus:text-super mb-xs transition-color line-clamp-2 cursor-pointer font-sans text-sm font-medium duration-150",Fw=R.memo(({hideHoverCard:e=!1,children:t,contentProps:n,linkProps:r,result:s,webResultCitation:a,timestampComponent:i,trackEvent:l,getAttachmentUrl:c})=>{const u=s?.is_conversation_history??!1,d=s?.is_memory??!1,m=u||d,[p,h]=f.useState(!1),[g,y]=f.useState(null),x=s.is_attachment??!1,v=dx(s),b=hi(s.url),_=f.useCallback(async()=>{if(!c)return;const $=await c(s.url);b&&(y($),h(!0),N(!1),P.current=!1)},[c,s.url,b]),w=D_(s),C=_ve(s),S=C||m&&!w?null:s.meta_data?.generated_file_title??s.name,E=a?.cited_texts??[],M=s.meta_data?.generated_file_description??s.snippet,[k,N]=f.useState(!1),P=f.useRef(!1),[L,O]=f.useState(!1),A=!!(s.url&&Cp(s.url)),j=Gy(),T=s.meta_data?.authors,I=typeof s.meta_data?.wiley_book_uuid=="string",U=typeof s.meta_data?.domain_name=="string"?s.meta_data?.domain_name:void 0,B=f.useMemo(()=>ZB(s),[s]);f.useEffect(()=>{if(typeof window>"u")return;function $(){P.current=!1}return document.addEventListener("visibilitychange",$),()=>{window.removeEventListener("visibilitychange",$)}},[]);const D=s.url||w,W=f.useCallback(()=>h(!1),[]),z=f.useMemo(()=>({src:g??void 0}),[g]);return o.jsxs(zH,{onOpenChange:$=>{!$&&P.current||N(e?!1:$)},open:k,openDelay:200,closeDelay:200,children:[A&&s.url&&o.jsx(U_,{isOpen:L,name:S,setisOpen:O,url:s.url}),b&&g&&o.jsx(px,{isOpen:p,onClose:W,imgProps:z}),o.jsx(GH,{asChild:!0,"aria-label":S,onPointerEnter:()=>{P.current=!0},onClick:()=>{N(!1),P.current=!1},onPointerLeave:()=>{P.current=!1},children:t}),o.jsx(qH,{children:o.jsx(KH,{className:V({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!j}),side:"bottom",sideOffset:8,...n,children:o.jsxs("div",{className:"bg-base dark:border-subtler px-md w-80 rounded-xl border py-3 shadow-lg",children:[m&&!w?o.jsx(dV,{variant:"medium",searchType:d?"memory":"conversation-history"}):o.jsxs("div",{className:"gap-sm flex flex-col",children:[(D||i)&&o.jsxs("div",{className:"flex items-center justify-between",children:[D&&o.jsx(eo,{className:"text-right",variant:"tiny",color:"light",url:s.url,isAttachment:x,source:U,connectionType:s.meta_data?.connection_type}),i]}),A?o.jsx("button",{className:iR,onClick:()=>{O(!0)},children:S}):v?o.jsx("button",{className:iR,onClick:_,children:S}):B?o.jsx(uV,{className:iR,result:s,trackEvent:l,...r,children:S}):o.jsx("span",{className:"text-foreground mb-xs line-clamp-2 text-left font-sans text-sm",children:S})]}),T?o.jsx(F,{color:"light",variant:"small",className:"line-clamp-3",children:T.join(", ")}):null,C?o.jsx(F,{variant:"small",color:"light",children:o.jsx(he,{defaultMessage:"This is a private source.",id:"jKReyt0qq8",description:"Text shown when a source is private and obfuscated"})}):null,S!==s.name&&!d&&!C?o.jsx(F,{variant:"small",color:"light",children:s.name}):null,E.length>0?o.jsx("ul",{children:E.map(($,X)=>o.jsx("li",{className:"border-b last:border-b-0",children:o.jsx(F,{variant:"small",className:"line-clamp-[20] italic",children:$})},X))}):M&&o.jsx(F,{variant:"small",className:"line-clamp-4 whitespace-pre-wrap",children:M}),I?o.jsxs(H,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(le,{size:"sm",icon:Lue})}),o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(he,{defaultMessage:"Premium Source",id:"K/sjkPqxv7",description:"title"})})]}):null,w&&!C?o.jsxs(H,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(le,{size:"sm",icon:Sv})}),o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(he,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})})})]})});Fw.displayName="CitationHoverCard";const hc=R.memo(({variant:e=u3.subtle,label:t,accessory:n,onClick:r,className:s,size:a="default",textColor:i="default",icon:l,iconClassName:c,iconOnly:u=!1,tooltip:d,truncate:m=!1,hover:p=!0,href:h,linkBehavior:g="none",trackEvent:y})=>{const x=f.useCallback(w=>{g==="external"&&h&&y&&y("click citation",{source:"inline",citation_url:h}),g!=="external"&&r?.(w)},[r,g,h,y]),v=o.jsxs(H,{as:"span",variant:e,className:V("text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums",{"py-[0.1875rem] leading-snug":a==="default","py-[0.175rem] leading-none":a==="small","py-[0.125rem] leading-none":a==="extraSmall"},{"px-[0.3rem]":!u,"inline-block px-[0.1875rem]":u,"[@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white":p}),onClick:g==="external"?void 0:r,children:[l&&o.jsx(le,{icon:l,size:"2xs",className:V("-mt-px inline-block align-middle opacity-80",{"mr-xs":!u},c)}),o.jsx("span",{ref:w=>{if(w&&m){const C=w.scrollWidth>w.clientWidth;w.style.maskImage=C?"linear-gradient(to right, black 70%, transparent 100%)":""}},className:V("relative -mt-px inline-block align-middle",{"max-w-[25ch] overflow-hidden":m}),children:t}),!!n&&o.jsx("span",{className:"ml-xs -mt-px mr-px inline-block align-middle",children:n})]}),b=d?o.jsx(En,{tooltipText:d,tooltipLayout:"top",asChild:!0,children:v}):v,_=o.jsx(F,{as:"span",color:i,className:V("relative -mt-px select-none whitespace-nowrap",{"-top-px":a==="default","-top-[3px] leading-none":a==="small","-top-two leading-none":a==="extraSmall"},s),children:b});return g==="external"&&h?o.jsx(Ye,{href:h,target:"_blank",rel:"noopener",className:"inline",onClick:x,children:_}):_});hc.displayName="CitationBubble";const dN=R.memo(e=>o.jsx(hc,{...e}));dN.displayName="CitationNumberBubble";const YH=R.memo(({sources:e,count:t,variant:n="default",className:r})=>{const s="clip-path-small",a="clip-path-default",i=Math.min(e.length,t),l=f.useMemo(()=>e.slice(0,i),[e,i]);return i===0?null:o.jsxs(o.Fragment,{children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:a,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z",fill:"#D9D9D9"})})})}),o.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:s,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z",fill:"#D9D9D9"})})})}),o.jsx("div",{className:V("gap-xs relative flex shrink-0 items-center",r),children:o.jsx("div",{className:"ml-xs flex",children:l.map((c,u)=>o.jsx(pl,{domain:c,size:n==="small"?12:14,className:V("bg-subtle relative z-0 shrink-0",{"-ml-[5px]":n==="default"},{"-ml-xs":n==="small"}),style:u!==i-1?{clipPath:`url(#${n==="small"?s:a})`}:void 0},u))})})]})});YH.displayName="CitationPile";function p7t(e,t){return e==null?1:t==null?-1:e==null&&t==null?0:!isNaN(Number(e))&&!isNaN(Number(t))?Number(e)-Number(t):String(e).localeCompare(String(t))}const h7t=({children:e,...t})=>o.jsx("table",{...t,children:e}),g7t=({children:e,...t})=>o.jsx("tr",{...t,children:e}),y7t=({children:e,index:t,id:n,data:r,...s})=>o.jsx("td",{...s,children:o.jsx(F,{variant:"tiny",className:V({"font-normal":t}),children:e})}),x7t=({SortButton:e,children:t})=>o.jsx("th",{className:"py-sm pr-sm text-left align-text-top outline-none",children:o.jsxs(H,{className:V("group relative flex items-center justify-between"),children:[o.jsx(F,{variant:"tiny",color:"light",children:t}),e]})}),RNe=R.memo(function({name:t,setSortDescriptor:n}){return o.jsx("button",{className:"right-sm absolute opacity-0 transition-opacity duration-200 group-hover:opacity-100",onClick:()=>{n(r=>({...r,column:t,reverse:!r.reverse}))},children:o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(le,{icon:Q7e,size:"xs"})})})});RNe.displayName="SortButton";const PNe=R.memo(({collapsed:e,setCollapsed:t,viewMoreText:n,viewLessText:r})=>{const s=f.useCallback(()=>{t(a=>!a)},[t]);return o.jsx(H,{className:"pb-sm",children:o.jsx(pe,{pill:!0,variant:"border",size:"tiny",chevron:!0,chevronIcon:e?Bn:Vy,text:e?n:r,onClick:s})})});PNe.displayName="ResponsiveTableExpander";const Jie="focus-visible:outline-super focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-0",ONe=R.memo(function(t){const{data:n,columns:r,compareFunction:s,RowCell:a,HeaderCell:i,Row:l,Table:c,limit:u}=t,[d,m]=f.useState({column:void 0,reverse:!1}),p=n.at(0),h=f.useMemo(()=>r??Object.keys(p??{}).map(w=>({name:w})),[p,r]),g=s??p7t,y=f.useMemo(()=>{const w=n.map(C=>({data:C,key:C.key??Math.random().toString(36).substring(7)}));return d.column&&w.sort((C,S)=>g(C.data[d.column],S.data[d.column])*(d.reverse?-1:1)),w.slice(0,u||w.length)},[n,u,d,g]),x=i??x7t,v=c??h7t,b=l??g7t,_=a??y7t;return o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(v,{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsx(b,{id:"_header",children:h.map((w,C)=>o.jsx(LNe,{index:C,HeaderCell:x,setSortDescriptor:m,...w},w.name))})}),o.jsx("tbody",{children:y.map(w=>o.jsx(b,{id:w.key,className:V("group",Jie,"border-subtlest border-t border-dashed !outline-none first:border-solid"),children:h.map(({name:C},S)=>o.jsx(_,{id:C,index:S,data:w.data,className:V("pr-sm align-text-top last:pr-0",Jie,'group-data-[selected="true"]:first:border-l-super py-sm group-data-[selected="true"]:border-super group-data-[selected="true"]:bg-super/10 group-data-[selected="true"]:first:pl-xs group-data-[selected="true"]:last:pr-xs dark:group-data-[selected="true"]:bg-super/10 rounded-sm outline-none transition-all duration-300 ease-in-out group-data-[selected="true"]:first:border-l-2 group-data-[selected="true"]:last:border-r-2'),children:String(w.data[C])},C))},w.key))})]})})});ONe.displayName="ResponsiveTable";const LNe=R.memo(({index:e,HeaderCell:t,setSortDescriptor:n,...r})=>{const s=f.useMemo(()=>o.jsx(RNe,{name:r.name,setSortDescriptor:n}),[r.name,n]);return o.jsx(t,{index:e,id:r.name,data:r,SortButton:s,children:r.label??r.name},r.name)});LNe.displayName="HeaderCellFactory";const ZL=3,fk=R.memo(({children:e})=>o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx("time",{className:"text-nowrap",children:e})}));fk.displayName="Timestamp";const DNe=R.memo(({source:e,includeRootLink:t=!0})=>{const{$t:n}=Z(),{trackEvent:r}=je(),s=f.useMemo(()=>({onClick(){r("click citation",{source:"hoverCard",citation_url:e.url})}}),[e.url,r]),a=f.useMemo(()=>({color:"light"}),[]);return o.jsx(Fw,{timestampComponent:e.timestamp?o.jsx(h5,{recentlyUpdatedLabel:n({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:e.timestamp,timestampProps:a,children:n({defaultMessage:"Updated",id:"xrk6zgu9jU"})}):null,linkProps:s,result:e,children:o.jsx(v7t,{url:t?e.url:void 0,children:o.jsx(dN,{label:`${e.id}`,className:"mb-xs"})})})});DNe.displayName="Citation";const v7t=({children:e,url:t,ref:n,...r})=>t!==void 0?o.jsx(Ye,{href:t,target:"_blank",rel:"noopener nofollow",ref:n,...r,children:e}):o.jsx("span",{ref:n,...r,children:e}),b7t=(e,t)=>{if(!e)return"";const n=new Date(e),r=new Date;return Math.abs(+n-+r)<1e3*60*60*24?new Intl.RelativeTimeFormat(t,{localeMatcher:"best fit",numeric:"auto",style:"long"}).format(0,"day"):n.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},FNe=R.memo(({post:e})=>{const{locale:t}=Z(),{isMobileStyle:n}=Ce(),r=f.useMemo(()=>e.timestamp?b7t(e.timestamp,t):"",[e.timestamp,t]);return o.jsx(H,{children:o.jsx(MNe,{query:e.headline,nofollow:!0,children:o.jsxs("span",{className:"group/post pb-xs cursor-pointer",children:[o.jsxs(F,{variant:n?"smallBold":"baseSemi",className:"mb-xs gap-sm flex items-baseline justify-between",children:[o.jsx("span",{className:"leading-snug duration-150",children:e.headline}),o.jsxs("div",{className:"flex translate-x-1 items-center gap-0.5",children:[e.timestamp&&!n&&o.jsx(H,{className:"gap-sm capitalize",children:o.jsx(fk,{children:r})}),o.jsx(le,{icon:Zn,size:"sm",className:"text-quiet group-hover/post:text-foreground translate-y-1 opacity-75 duration-150 md:translate-y-0"})]})]}),o.jsxs(F,{variant:n?"small":"base",className:"text-pretty leading-tight",children:[o.jsx("span",{className:"opacity-75",children:e.text}),o.jsx("span",{className:"ml-xs inline-flex",children:e.sources.map((s,a)=>o.jsx("span",{className:"mr-xs",children:o.jsx(DNe,{source:s,includeRootLink:!1},s.id)},a))})]}),e.timestamp&&n&&o.jsxs(H,{className:"mt-sm gap-xs flex items-center capitalize",children:[o.jsx(_p,{className:"text-quiet opacity-80",size:16}),o.jsx(fk,{children:r})]})]})})})});FNe.displayName="Post";const UNe=R.memo(({created:e,posts:t,title:n,variant:r})=>{const{$t:s}=Z(),[a,i]=f.useState(!0),[l,c]=f.useState(!1),{locale:u}=Z(),[d,m]=f.useState(Date.now());f.useEffect(()=>{const b=setInterval(()=>m(Date.now()),15e3);return()=>clearInterval(b)},[]);const p=Ds(),h=f.useMemo(()=>{if(!e||!p)return"";const b=Date.parse(e),_=d-b;let w=_/6e4,C="days";w<1?(w=_/1e3,C="seconds"):w<60?(w=_/6e4,C="minutes"):w<1440?(w=_/36e5,C="hours"):(w=_/864e5,C="days"),w=-Math.abs(Math.floor(w));const S=new Intl.RelativeTimeFormat(u,{localeMatcher:"best fit",numeric:"auto",style:"short"});return s({defaultMessage:"Updated {time}",id:"0aJxT29U/1"},{time:S.format(w,C)})},[e,d,s,u,p]),g=f.useMemo(()=>{if(!t?.length)return[];const b=t.flatMap(_=>_.sources).map(_=>[_.id,_]);return Object.values(Object.fromEntries(b))},[t]),y=f.useMemo(()=>g.map(b=>b.url),[g]),x=f.useCallback(()=>c(!0),[]),v=f.useCallback(()=>c(!1),[]);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs(H,{className:V("gap-xs px-md py-sm flex flex-wrap items-center justify-between",{"border-b":r!=="raised"}),children:[o.jsxs(F,{variant:"baseSemi",color:t.length>0?"super":"ultraLight",className:"gap-sm flex items-center",as:"h2",children:[o.jsx(C7t,{animate:t.length>0}),o.jsx("span",{children:n??s({defaultMessage:"What's Happening",id:"wVxgwE2ray"})})]}),o.jsx(fk,{children:h})]}),o.jsxs(H,{variant:r,className:V({"rounded-xl border":r==="raised"}),children:[o.jsx(na,{transition:{ease:an,duration:.2},children:o.jsx(is,{children:t.length===0?o.jsx(_7t,{}):o.jsx("ul",{className:"pb-md grid",children:t.slice(0,a?ZL:t.length).map((b,_)=>o.jsx(ve.li,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{y:{ease:an,duration:.2}},className:"mx-md border-subtlest py-md block border-b last:border-b-0 last:pb-0",children:o.jsx(FNe,{post:b},_)},b.headline))})})}),t.length>0&&o.jsxs(o.Fragment,{children:[t.length>ZL&&o.jsx(H,{className:"px-md",children:o.jsx(PNe,{collapsed:a,setCollapsed:i,viewMoreText:s({defaultMessage:"View More",id:"QQSdHPJWXu"}),viewLessText:s({defaultMessage:"View Less",id:"UOYN/MXiOT"})})}),o.jsx("div",{className:"pb-md pl-md",children:o.jsxs(H,{as:"button",bgHover:"subtle",className:"gap-sm px-sm inline-flex items-center rounded-full border py-1.5",onClick:x,children:[o.jsx(YH,{sources:y,count:4}),o.jsxs(F,{variant:"tiny",color:"light",children:[g.length," Sources"]})]})})]})]})]}),o.jsx(hV,{isOpen:l,onClose:v,webResults:g})]})});UNe.displayName="WhatsHappening";const _7t=()=>o.jsx(wn,{className:"px-md",children:o.jsx("div",{className:"divide-y",style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},children:Array.from({length:ZL}).map((e,t)=>o.jsx(w7t,{},t))})}),w7t=()=>o.jsxs(H,{className:"gap-sm py-md flex flex-col",children:[o.jsx(H,{className:"mb-sm h-2 w-4/5 rounded-full",variant:"subtle"}),o.jsx(H,{className:"h-2 w-3/5 rounded-full",variant:"subtle"}),o.jsx(H,{className:"h-2 w-3/5 rounded-full",variant:"subtle"}),o.jsx(H,{className:"h-2 w-2/5 rounded-full",variant:"subtle"})]}),zS=(e,t)=>t?{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,repeat:1/0,repeatDelay:5,ease:va,delay:e}}:{opacity:1},C7t=({animate:e})=>o.jsx("svg",{viewBox:"0 0 576 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-super inline-block h-[1em] overflow-visible align-[-0.125em]",children:o.jsxs("g",{children:[o.jsx(ve.path,{d:"M99.8 69.4C110 77.8 111.4 93 103 103.2C68.6 144.7 48 197.9 48 256C48 314.1 68.6 367.3 103 408.8C111.4 419 110 434.1 99.8 442.6C89.6 451.1 74.5 449.6 66 439.4C24.8 389.6 0 325.7 0 256C0 186.3 24.8 122.4 66 72.6C74.4 62.4 89.6 61 99.8 69.4ZM476.3 69.4C486.5 61 501.6 62.4 510.1 72.6C551.3 122.4 576.1 186.4 576.1 256C576.1 325.6 551.3 389.6 510.1 439.4C501.7 449.6 486.5 451 476.3 442.6C466.1 434.2 464.7 419 473.1 408.8C507.4 367.3 528.1 314.1 528.1 256C528.1 197.9 507.5 144.7 473.1 103.2C464.7 93 466.1 77.9 476.3 69.4Z",fill:"currentColor",...zS(.3,e)}),o.jsx(ve.path,{...zS(.15,e),d:"M160 256C160 226.4 170 199.2 186.9 177.5C195 167 193.2 151.9 182.7 143.8C172.2 135.7 157.1 137.5 149 148C125.8 177.8 112 215.3 112 256C112 296.7 125.8 334.2 149 364C157.2 374.5 172.2 376.4 182.7 368.2C193.2 360 195 345 186.9 334.5C170 312.8 160 285.6 160 256Z",fill:"currentColor"}),o.jsx(ve.path,{...zS(.15,e),d:"M464 256C464 215.3 450.2 177.8 427 148C418.8 137.5 403.8 135.6 393.3 143.8C382.8 152 381 167 389.1 177.5C406 199.2 416 226.4 416 256C416 285.6 406 312.8 389.1 334.5C381 345 382.8 360.1 393.3 368.2C403.8 376.3 418.9 374.5 427 364C450.2 334.2 464 296.7 464 256Z",fill:"currentColor"}),o.jsx(ve.path,{...zS(0,e),d:"M259.716 227.716C252.214 235.217 248 245.391 248 256C248 266.609 252.214 276.783 259.716 284.284C267.217 291.786 277.391 296 288 296C298.609 296 308.783 291.786 316.284 284.284C323.786 276.783 328 266.609 328 256C328 245.391 323.786 235.217 316.284 227.716C308.783 220.214 298.609 216 288 216C277.391 216 267.217 220.214 259.716 227.716Z",fill:"currentColor"})]})}),S7t=({hype:e,title:t,variant:n})=>o.jsx(UNe,{title:t,created:e?.created,posts:e?.posts??fe,variant:n}),E7t=({hype:e,variant:t="subtler",className:n})=>{const{$t:r}=Z(),s=r({defaultMessage:"Latest News",id:"BlFeZAX10O"});return o.jsx(Pr,{children:o.jsx(H,{variant:t==="raised"?"transparent":"subtler",className:V("rounded",n),children:o.jsx(S7t,{variant:t!=="raised"?"transparent":t,hype:e,title:s})})})},M7t=({eventId:e,enabled:t})=>We({queryKey:CNe(e??""),queryFn:()=>SNe({eventId:e??""}),enabled:!!e&&!!t,retry:!1,staleTime:5*60*1e3}),lpn=({league:e,story:t})=>o.jsx(VNe,{league:e,story:t,children:o.jsxs(H,{className:"bg-subtle hover:bg-subtler gap-sm py-xs flex w-fit place-items-center rounded-full pl-3 pr-2 transition-colors",variant:"subtle",children:[o.jsx(F,{variant:"smallBold",color:"light",children:o.jsx(he,{defaultMessage:"Watch the highlights",id:"Z2uaDmB5pt"})}),o.jsx(BNe,{story:t,className:"p-two size-9",border:!1})]})}),BNe=({story:e,className:t,border:n=!0})=>{const r=e?.storyThumbnailUrls?.find(s=>s.aspectRatio==="1x1")?.url||e?.storyThumbnailUrl;return o.jsx(H,{variant:"super",className:V("group rounded-full",{"p-one sm:p-three":n},t),children:o.jsx(H,{className:V({"p-two rounded-full bg-white dark:bg-black":n}),children:o.jsx(H,{className:"relative overflow-hidden rounded-full",children:o.jsx("img",{src:r,alt:e.title||"",className:V("aspect-square object-cover transition-opacity group-hover:opacity-80"),loading:"lazy"})})})})},VNe=({league:e,story:t,children:n})=>{const{trackEvent:r}=je(),{inApp:s}=wl(),a=f.useCallback(()=>{r("sports wsc story clicked",{eventId:t.id,league:e})},[r,e,t?.id]);return o.jsx("a",{href:t.storyUrl,target:s?void 0:"_blank",onClick:a,className:"cursor-pointer",children:n})};function k7t({className:e,league:t,story:n}){return n?.id?o.jsx(VNe,{league:t,story:n,children:o.jsx(BNe,{story:n,className:e})}):null}function T7t({type:e,season:t,imgUrl:n,eventId:r}){Sp("header");const{$t:s}=Z(),a="#84754E",{data:i}=M7t({eventId:r,enabled:!!r}),l=f.useCallback(p=>{if(!p)return null;const h=new Date(p+"T00:00:00");return isNaN(h.getTime())?null:h.toLocaleDateString("en-US",{month:"short",day:"numeric"})},[]),c=l(t.start_date),u=l(t.end_date),d=f.useMemo(()=>[c&&u?s({defaultMessage:"{startDate} - {endDate},",id:"uLiKxHxStJ"},{startDate:c,endDate:u}):c||u,t.year].filter(Boolean).join(" "),[c,u,t.year,s]),m=t?e==="season"?s({defaultMessage:"{year} Season",id:"oERTY0/4Zj"},{year:t.year}):e==="tournament"?d:null:null;return o.jsxs("div",{className:"gap-sm p-md relative flex h-[120px] items-end overflow-hidden rounded-xl",style:{"--header-bg":a},children:[o.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-xl dark:after:absolute dark:after:inset-0 dark:after:rounded-xl dark:after:border dark:after:border-white/10",children:o.jsx(xV,{className:"-inset-xl !absolute !bg-[var(--header-bg,#84754E)] ![--dot-bg:var(--header-bg,#84754E)]",dotClassName:"!text-[white]",highlightClassName:"!bg-white/10"})}),o.jsx("div",{className:"gap-md flex items-end md:items-center",children:o.jsxs("div",{className:"gap-sm relative flex flex-col items-start",children:[o.jsx("img",{className:"relative w-[180px]",src:n,alt:"Laver Cup Logo"}),o.jsx(F,{variant:"small",color:"white",className:"leading-tight opacity-80",children:m}),i&&o.jsx(k7t,{league:"atp",story:i})]})})]})}function $Ne({src:e,name:t,onBroken:n,className:r}){const[s,a]=f.useState(void 0),i=f.useRef(null),l=()=>{a(!0),n?.()},c=()=>{i.current&&i.current.naturalHeight>0&&a(!1)};return f.useEffect(()=>{i.current&&(i.current.complete&&i.current.naturalHeight===0?(a(!0),n?.()):a(!1))},[i,n]),s||!e?o.jsxs("svg",{viewBox:"0 0 62 62",children:[o.jsx("mask",{id:"mask0_634_1278",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"62",height:"62",children:o.jsx("path",{d:"M31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62Z"})}),o.jsxs("g",{mask:"url(#mask0_634_1278)",children:[o.jsx("path",{d:"M31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62Z",className:"fill-subtle"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31 44C39.8366 44 47 36.165 47 26.5C47 16.835 39.8366 9 31 9C22.1634 9 15 16.835 15 26.5C15 36.165 22.1634 44 31 44ZM-11 70.5C-11 57.1768 1.57462 45.9165 18.8426 42.2547C22.1373 45.2176 26.3757 47 31 47C35.6243 47 39.8627 45.2176 43.1574 42.2547C60.4254 45.9165 73 57.1768 73 70.5C73 86.7924 54.196 100 31 100C7.80404 100 -11 86.7924 -11 70.5Z",className:"fill-foreground opacity-10"})]})]}):o.jsx("img",{ref:i,src:e,className:V(r,{"opacity-0":s===void 0}),alt:t,onError:l,onLoad:c})}const cpn=({style:e,...t})=>o.jsx("div",{className:"bg-subtle relative size-10 shrink-0 overflow-hidden rounded-full md:size-[60px]",style:e,children:o.jsx($Ne,{...t,className:"block size-full object-cover object-center"})}),N7t=(e,t,n)=>{if(!e||!t)return null;try{return e.toLocaleString(n,{style:"currency",currency:t,notation:"compact",compactDisplay:"short"})}catch{return null}},j7t=({title:e=!0,tournamentInfo:t})=>{const{$t:n}=Z(),{season:r}=t,{info:s,competition:a}=r,{isMobileStyle:i}=Ce(),l=f.useMemo(()=>[{label:n({defaultMessage:"Location",id:"rvirM238ZE"}),value:s?.complex},{label:n({defaultMessage:"Surface",id:"/AElfCMvxg"}),value:s?.surface_text},{label:n({defaultMessage:"Competitors",id:"GnmePy5BjJ"}),value:s?.number_of_competitors},{label:n({defaultMessage:"Prize Money",id:"bFVLOCMwiJ"}),value:N7t(s?.prize_money,s?.prize_currency)},{label:n({defaultMessage:"Level",id:"y1Qr811Pys"}),value:a?.level_text}].filter(c=>c.value!=null&&c.value!==""),[s,a,n]);return i?o.jsx("div",{children:o.jsx(I7t,{children:l.map(c=>o.jsx(mk,{...c},c.label))})}):o.jsx(un,{header:e&&o.jsx(F,{variant:"baseSemi",className:"ml-md mb-sm",children:n({defaultMessage:"Tournament Info",id:"Z/95hzDc2J"})}),children:o.jsx(A7t,{children:l.map(c=>o.jsx(mk,{...c},c.label))})})},A7t=({children:e})=>o.jsx("div",{className:"p-md gap-sm flex flex-col overflow-hidden",children:o.jsx(H,{className:"gap-sm grid grid-cols-[1fr_1fr_1fr] lg:grid-cols-[1fr_1fr_1fr_1fr]",children:e})}),I7t=({children:e})=>o.jsx("div",{className:"gap-sm -mx-md scrollbar-none flex overflow-x-auto",children:o.jsx("div",{className:"px-md gap-sm flex",children:e})});function mk({label:e,value:t,className:n}){const{isMobileStyle:r}=Ce(),s=r?un:H,a=r?"py-sm px-[12px]":void 0;return t==null||t===""?null:o.jsxs(s,{className:V(a,n),children:[o.jsx(F,{variant:r?"tinyRegular":"small",color:"light",className:r?"whitespace-nowrap":void 0,children:e}),o.jsx(F,{variant:"smallBold",children:t})]})}function R7t({teams:e}){const{europe:t,world:n}=Uw();return o.jsxs(H,{className:"gap-lg mt-lg flex flex-col",children:[o.jsxs(H,{children:[o.jsx(eoe,{name:"europe",color:t,prevWinner:!0}),o.jsx(toe,{config:e.europe,color:t,team:"europe"})]}),o.jsxs(H,{children:[o.jsx(eoe,{name:"world",color:n}),o.jsx(toe,{config:e.world,color:n,team:"world"})]})]})}const eoe=({name:e,color:t,prevWinner:n})=>{const r=e==="europe"?"Europe":"World",{$t:s}=Z();return o.jsxs("div",{className:"gap-sm mb-sm pl-sm md:pl-md flex items-center",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("div",{className:"flex size-6 items-center justify-center rounded-md",style:{backgroundColor:t},children:o.jsx("img",{src:zNe[e],alt:e})}),o.jsx(F,{variant:"baseSemi",children:s({defaultMessage:"Team {name}",id:"HTz+p5sZsy"},{name:r})})]}),n&&o.jsxs(H,{className:"px-sm py-xs gap-xs ml-auto flex items-center rounded-full border",children:[o.jsx(le,{icon:Wk,size:"2xs",className:"opacity-50"}),o.jsx(F,{variant:"tinyRegular",color:"light",children:s({defaultMessage:"Defending Champion",id:"4+F8AQjH+h"})})]})]})},toe=({config:e,color:t,team:n})=>{const{$t:r}=Z(),{captain:s,viceCaptain:a,players:i}=e;return o.jsxs(un,{className:"p-md relative overflow-hidden border-none",children:[o.jsx("div",{className:"absolute inset-0 opacity-10 dark:opacity-25",style:{backgroundColor:t,maskImage:"linear-gradient(to bottom right, black, transparent 40%, rgba(0, 0, 0, 0))"}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border opacity-10",style:{borderColor:t,maskImage:"linear-gradient(to bottom right, black, transparent 40%, rgba(0, 0, 0, 0))"}}),o.jsx(H,{className:"rounded-inherit absolute inset-0 border"}),o.jsxs("div",{className:"relative",children:[o.jsxs(P7t,{children:[o.jsx(mk,{label:r({defaultMessage:"Captain",id:"n47Ce9YDZE"}),value:s,className:"gap-sm items-center !bg-transparent md:flex"}),o.jsx(mk,{label:r({defaultMessage:"Vice Captain",id:"M46+waT3VZ"}),value:a,className:"gap-sm items-center !bg-transparent md:flex"})]}),o.jsx(H,{className:"gap-md flex flex-col",children:i.map(l=>o.jsx(O7t,{...l,team:n},l.name))})]})]})},P7t=({children:e})=>{const{isMobileStyle:t}=Ce();return t?o.jsx(H,{className:"pb-md mb-md gap-sm flex border-b",children:e}):o.jsx(H,{className:"pb-md mb-md gap-lg flex items-center border-b",children:e})},noe='path(evenodd, "M -10 -10 L 58 -10 L 58 68 L -10 68 Z M 18 40 Q 14 40 14 44 L 14 56 Q 14 60 18 60 L 30 60 Q 34 60 34 56 L 34 44 Q 34 40 30 40 Z")',O7t=({name:e,img:t,rank:n,country:r,description:s,team:a})=>{const{europe:i,world:l}=Uw(),c=a==="europe"?i:l;return o.jsxs(H,{className:"grid grid-cols-[1fr_auto] gap-3",children:[o.jsxs(H,{className:"size-xl relative translate-y-1",children:[o.jsx("div",{className:"shadow-overlay aspect-square overflow-hidden rounded-full",style:{clipPath:noe,WebkitClipPath:noe},children:o.jsx($Ne,{src:t,name:e,className:"block size-full"})}),o.jsx(dy,{countryCode:r,className:"shadow-subtle absolute left-1/2 top-full w-4 -translate-x-1/2 -translate-y-1/2 rounded-sm"})]}),o.jsxs(H,{children:[o.jsxs(H,{className:"gap-sm flex items-center justify-start",children:[o.jsx(F,{variant:"baseSemi",children:e}),o.jsxs(F,{variant:"tiny",color:"light",className:"relative rounded-md px-[6px] py-0.5",children:[o.jsx("span",{className:"rounded-inherit mix-blend-hardlight absolute inset-0 opacity-10 dark:opacity-20",style:{backgroundColor:c}}),o.jsx("span",{className:"relative inline-flex translate-y-px",style:{color:c},children:n})]})]}),o.jsx(F,{variant:"small",color:"light",children:s})]})]})},WNe=R.memo(({children:e,maxFaces:t=3,showMore:n=!0,clickable:r=!1,size:s="medium",onAvatarClick:a,backgroundClass:i})=>{const l=R.Children.count(e);return o.jsxs(H,{onClick:r?a:void 0,bgHover:r?"subtler":void 0,className:V("group flex items-center",{"p-xs cursor-pointer rounded-full transition-all":r}),children:[R.Children.map(e,(c,u)=>u<t?o.jsx(H,{variant:"background",className:V("rounded-full group-hover:bg-transparent",{"relative transition-all duration-200 ease-in-out":u!==0,"p-two group-hover:-ml-xs -ml-[10px]":u!==0&&s==="small","p-two group-hover:-ml-sm -ml-[16px]":u!==0&&s==="medium"},i),children:o.jsx("div",{children:c})},u):null),n&&l>t&&o.jsx(H,{children:o.jsxs(F,{variant:"smallCaps",color:"light",className:"px-xs",children:["+",l-t]})})]})});WNe.displayName="AvatarList";const roe=({score:e,team:t,players:n,last:r,winner:s,loser:a})=>{const{$t:i}=Z(),{isMobileStyle:l}=Ce(),c=zNe[t.toLowerCase()],{europe:u,world:d}=Uw(),m=t.toLowerCase()==="europe"?u:d;return o.jsxs(un,{className:V("relative flex items-center overflow-hidden border-none",{"flex-row-reverse":r,"gap-sm p-[12px]":l,"p-md gap-md":!l,"opacity-50":a}),children:[o.jsxs("div",{className:"rounded-inherit absolute inset-0",children:[o.jsx("div",{className:"rounded-inherit absolute inset-0 opacity-10 dark:opacity-25",style:{backgroundColor:m,maskImage:r?"linear-gradient(to right, transparent, black)":"linear-gradient(to left, transparent, black)"}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border opacity-10",style:{borderColor:m}})]}),o.jsxs("div",{className:V("relative flex aspect-square w-12 items-center justify-center rounded-md",{hidden:l}),style:{backgroundColor:m},children:[o.jsx("img",{src:c,alt:t,className:"relative h-auto w-10 object-contain"}),s&&o.jsx(H,{className:V("p-xs absolute top-0 z-10 -translate-y-1/3 rounded-full border",{"left-0 -translate-x-1/3":!r,"right-0 translate-x-1/3":r}),style:{borderColor:"white",borderWidth:1,backgroundColor:m},children:o.jsx(Wk,{size:15,color:"white"})})]}),o.jsx("div",{className:"gap-sm relative flex flex-col items-center",children:o.jsxs("div",{className:V("gap-xs flex flex-col",{"items-end":r,"items-start":!r}),children:[o.jsx(H,{className:"gap-xs flex items-center",children:o.jsx(F,{variant:"smallBold",className:"whitespace-nowrap",children:i({defaultMessage:"Team {team}",id:"5gr4uNrlJ2"},{team:t})})}),n&&o.jsx(H,{className:"gap-sm flex flex-col",children:o.jsx(WNe,{size:"small",backgroundClass:"bg-transparent",showMore:!1,maxFaces:6,children:n.filter(p=>p.img).map(p=>o.jsx(Pt,{size:"small",user:p.img??"",className:"shadow-overlay rounded-full bg-white",showBackground:!1},p.img))})})]})}),o.jsxs("div",{className:V("-mt-xs relative flex flex-col items-center",{"mr-sm ml-auto":!r,"ml-sm mr-auto":r}),children:[o.jsx(F,{variant:l?"section-title":"page-title",className:"leading-none",color:e>0?"default":"light",children:o.jsx(No,{animated:!0,value:e,format:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}})}),o.jsx(F,{variant:l?"tinyRegular":"small",color:"light",className:V("leading-none",{"-mt-xs":!l}),children:i({defaultMessage:"{count, plural, one {point} other {points}}",id:"OTgg6EBiyt"},{count:e})})]})]})};function L7t({scoreEurope:e,scoreWorld:t,teams:n}){const{$t:r}=Z(),{europe:s,world:a}=Uw(),i=e>=13||t>=13,l=i&&e>t,c=i&&t>e;return o.jsxs(H,{className:"grid grid-cols-[1fr_auto_1fr] items-center",children:[o.jsx(roe,{loser:c,winner:l,score:e,team:r({defaultMessage:"Europe",id:"X3AIiKlYIf"}),players:n?.europe.players}),o.jsxs(H,{className:"relative z-10 mx-[-12px] flex size-8 items-center justify-center rounded-full shadow-md",variant:"raised",children:[o.jsxs("div",{className:"absolute inset-0 opacity-25",children:[o.jsx("div",{className:"absolute inset-0 rounded-full border",style:{borderColor:a,maskImage:"linear-gradient(to right, transparent, black)"}}),o.jsx("div",{className:"absolute inset-0 rounded-full border",style:{borderColor:s,maskImage:"linear-gradient(to left, transparent, black)"}})]}),o.jsx(F,{variant:"smallCaps",color:"light",className:"relative text-center",children:"VS"})]}),o.jsx(roe,{loser:l,winner:c,score:t,team:r({defaultMessage:"World",id:"jqdzk6QquP"}),players:n?.world.players,last:!0})]})}const HNe="laver-cup-client-page",D7t=async e=>{const{error:t,data:n}=await ae.GET("/rest/sports/tennis/atp/tournaments/lavercup",HNe,{params:{query:{year:e}},timeoutMs:0});if(t)throw new Ie("API_CLIENTS_ERROR",{cause:t,details:{year:e}});return n},GS={europe:{light:"#003359",dark:"#006CBD"},world:{light:"#782327",dark:"#C53A40"}},Uw=()=>{const{colorScheme:e}=Jr();return{europe:e==="dark"?GS.europe.dark:GS.europe.light,world:e==="dark"?GS.world.dark:GS.world.light}},zNe={europe:"https://lavercup.com/wp-content/themes/lavercup_spark/assets/graphics/trophy-europe-no-text.svg",world:"https://lavercup.com/wp-content/themes/lavercup_spark/assets/graphics/trophy-world-no-text.svg"},F7t=()=>+(Ut().get("year")??new Date().getFullYear());function upn(){const e=F7t(),{data:t,isLoading:n}=We({...Hb,queryFn:()=>D7t(e),queryKey:["/sports/atp/tournaments/lavercup"]}),{data:r}=We({...Hb,queryFn:()=>ENe({league:`${e} Laver Cup`,reason:HNe}),queryKey:["/sports/hype/lavercup"]}),{$t:s}=Z(),a=f.useMemo(()=>({tournamentInfo:{title:s({defaultMessage:"Tournament Info",id:"Z/95hzDc2J"}),id:"tournamentInfo",ref:f.createRef(),show:!0},schedule:{title:s({defaultMessage:"Schedule",id:"hGQqkWwmJD"}),id:"schedule",ref:f.createRef(),show:!!t?.events&&t?.events?.length>0},participants:{title:s({defaultMessage:"Participants",id:"zx0myyxie/"}),id:"participants",ref:f.createRef(),show:!!t?.teams},latestNews:{title:s({defaultMessage:"Latest News",id:"BlFeZAX10O"}),id:"latestNews",show:!0,ref:f.createRef()}}),[s,t?.teams,t?.events]),i=f.useMemo(()=>Object.values(a),[a]);if(!t?.tournamentInfo||n)return null;const l=t.events.map(p=>p.team_1.id),c=t.events.map(p=>p.team_2.id),u=t.brands.filter(p=>c.includes(String(p.teamId))),d=t.brands.filter(p=>l.includes(String(p.teamId))),m={world:u,europe:d};return o.jsx("div",{children:o.jsxs(_Ne,{entries:i,children:[o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(T7t,{season:t.tournamentInfo.season,league:"atp",type:"tournament",imgUrl:"/static/images/sports/atp/laver-cup-logo.svg",eventId:"lavercup"}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(j7t,{tournamentInfo:t.tournamentInfo,title:!1}),o.jsx(L7t,{scoreEurope:t.scoreEurope,scoreWorld:t.scoreWorld,teams:t.teams})]})]}),o.jsx(sR,{ref:a.schedule?.ref,show:a.schedule?.show,children:o.jsx(NDt,{events:t.events,players:m})}),o.jsx(sR,{ref:a.participants?.ref,show:a.participants?.show,children:o.jsx(R7t,{teams:t.teams})}),o.jsx(sR,{show:a.latestNews?.show,ref:a.latestNews?.ref,children:o.jsx(E7t,{hype:r??null,variant:"raised"})}),o.jsx(XTe,{attributions:[s({defaultMessage:"Data: {provider}",id:"dSwg4JBLt6"},{provider:"Sportradar"})]})]})})}const U7t=e=>{try{const t=e.split("-").map(Number);if(t.length!==3||t.some(isNaN))return null;const[n,r,s]=t;return new Date(n,r-1,s)}catch{return null}},B7t=({selectedDate:e,eventsByDay:t,setSelectedDate:n})=>{const r=f.useMemo(()=>Object.keys(t),[t]),{$t:s}=Z();return!r.length||r?.length<=1?o.jsx(F,{variant:"baseSemi",className:"ml-md mb-sm",children:s({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}):o.jsx("div",{className:"mb-sm gap-sm flex flex-row justify-around",children:r.map(a=>{const i=U7t(a);return i?o.jsx(V7t,{date:i,selected:e.toDateString()===i.toDateString(),onClick:()=>n(i)},a):null})})},V7t=({date:e,selected:t,onClick:n})=>{const r=e.toLocaleDateString("en-US",{weekday:"short"}),s=e.toLocaleDateString("en-US",{day:"numeric"}),{isMobileStyle:a}=Ce();return o.jsxs("button",{className:"group flex flex-1 appearance-none flex-col items-center gap-1 rounded-lg",onClick:n,children:[o.jsx(H,{className:V("flex items-center justify-center rounded-full duration-150",{"group-hover:bg-subtler":!t,"size-8":a,"size-10":!a}),variant:t?"textColor":"transparent",children:o.jsx(F,{variant:a?"baseSemi":"section-title",color:t?"defaultInverted":"default",children:s})}),o.jsx(F,{variant:t?"tiny":"tinyRegular",color:t?"default":"light",children:r})]})},JL=({value:e,digitClassName:t,className:n})=>{const[r,s]=f.useState(!1),a=String(e).split("");return f.useEffect(()=>{s(!0)},[]),o.jsx("div",{className:V("flex",n),children:a.map((i,l)=>isNaN(parseInt(i))?o.jsx("span",{className:t,children:i},l):o.jsx($7t,{className:t,value:parseInt(i),animate:r,idx:l,hasValue:+e.replace(/[^\d.-]/g,"")>0},l))})},$7t=({value:e,className:t,hasValue:n,animate:r,idx:s})=>{const[a,{height:i}]=vc();return o.jsxs("div",{className:"relative overflow-hidden",style:{maskImage:"linear-gradient(to bottom, transparent, black 4px, black calc(100% - 4px), transparent)"},children:[o.jsx("div",{className:"pointer-events-none flex opacity-0",ref:a,children:o.jsx("span",{className:t,children:"0"})}),o.jsx("div",{className:"absolute inset-0",children:o.jsx(ve.div,{initial:{opacity:.25},animate:{opacity:r&&n?1:void 0,y:r?-1*e*i:void 0},className:"flex flex-col",transition:{y:{ease:an,duration:1,delay:s*.1},opacity:{ease:"linear",duration:.5}},children:Array.from({length:10}).map((l,c)=>o.jsx("span",{className:V("flex",t),children:c},c))})})]})};function soe(e){return!isNaN(new Date(e).getTime())}function aoe(e){const t=e+"+00:00";return soe(t)?t:soe(e)?e:null}function W7t(e){if(typeof e.startDate=="string")return{full:aoe(e.startDate)??"",dateType:"UTC",year:0,month:0,date:0,hour:0,minute:0};const t=e.startDate?.find(r=>r.dateType==="UTC");if(!t)return;const n=aoe(t.full);if(n)return{...t,full:n}}function dpn(e){return!isNaN(e.hour)&&!isNaN(e.minute)}function H7t(e){const t=e?.tvStations?.[0]?.name;switch(t){case"Amazon Prime Video":return"Prime Video";default:return t}}function z7t(e){return e?.venue?.name||""}function G7t(e){return[e?.venue?.city,e?.venue?.state?.abbreviation].filter(Boolean).join(", ")}function q7t(e,t){const n=e?.[0]?.forecasts?.[0],r=n?.condition;return{temperature:n?.temperature?.find(a=>a.temperatureScaleId===(t?2:1)),weatherCondition:r}}function Vx(e){return typeof e.eventStatus=="string"?e.eventStatus==="live":e?.eventStatus?.eventStatusId===2}function dp(e){return typeof e.eventStatus=="string"?e.eventStatus==="final":e.eventStatus?.eventStatusId===4}function fpn(e){return Vx(e)||dp(e)}function mpn(e,t){return Aw(e.teams)[1]?.teamId===t.teamId}function GNe(e,t=4){return t===2?e.period===1&&e.minutes===0&&e.seconds===0&&e.isActive===!1:e.period===2&&e.minutes===0&&e.seconds===0&&e.isActive===!1}function ppn(e){return e.status==="live"}function hpn(e){return e.status==="final"}function gpn(e){return"id"in e}function ypn(e,t){return new Date(e.datetime).toLocaleString(t,{month:"short",day:"numeric"})}const K7t=pt({perplexitySports:{defaultMessage:"{pplx} Sports",id:"K65/hgZBjY"},teamVsTeam:{defaultMessage:"{team1} vs {team2}",id:"lyaxuodMxh"},nfl:{defaultMessage:"NFL",id:"Lv6pQppd/V"},nba:{defaultMessage:"NBA",id:"D+pbqZQpNj"},wnba:{defaultMessage:"WNBA",id:"avDAamqQm4"},ncaam:{defaultMessage:"NCAAM",id:"gC9NSK3/R6"},ncaaw:{defaultMessage:"NCAAW",id:"eERAIF8MIh"},cricket:{defaultMessage:"Cricket",id:"hJ+aKKEPPW"},conference:{defaultMessage:"Conference",id:"E0mu0BuhfL"},division:{defaultMessage:"Division",id:"dETzL9JuSD"},league:{defaultMessage:"League",id:"P3y4FpCWKK"},nflByeNote:{defaultMessage:"Plays lowest remaining seed",id:"ivzjhdMH5D"},playoffBracket:{defaultMessage:"Playoff Bracket",id:"5T8u2ZRrKO"},watchOn:{defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},overview:{defaultMessage:"Overview",id:"9uOFF3L8kp"},highlights:{defaultMessage:"Highlight Videos",id:"J4ZW4MNVky"},moreAboutNfl:{defaultMessage:"More about the NFL",id:"JGDrER55OW"},pregameHighlights:{defaultMessage:"Pregame Highlights",id:"pTASonM2gu"},gameHighlights:{defaultMessage:"Game Highlights",id:"nX0XrAiLIA"},final:{defaultMessage:"Final",id:"6/JzkWi0di"},videos:{defaultMessage:"Videos",id:"4XfMuxy3FO"},playerPhotos:{defaultMessage:"{player} Photos",id:"YRfYXYpNfE"},noInjuries:{defaultMessage:"No Team Injuries",id:"9D6SP/NB3G"},seasonLeaders:{defaultMessage:"Season Leaders",id:"lT3vL7pgxM"},gameLeaders:{defaultMessage:"Game Leaders",id:"BpPX7CGEMm"},bettingOdds:{defaultMessage:"Betting Odds",id:"taELAJbik0"},teamComparisons:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},seasonComparisons:{defaultMessage:"Season Comparison",id:"1fVXZNAk6A"},seasonPerformance:{defaultMessage:"Season Performance",id:"+XGEnxB3qU"},injuries:{defaultMessage:"Injuries",id:"+9VW01o/qa"},nextGame:{defaultMessage:"Next Game",id:"GHv/zzzbyP"},gameWinnerOdds:{defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"},offense:{defaultMessage:"Offense",id:"gkhnHmdS3n"},pointsPerGame:{defaultMessage:"Points Per Game",id:"oiTKA0iiEO"},totalYardsPerGame:{defaultMessage:"Total Yards Per Game",id:"1hUUAbKwNU"},passingYardsPerGame:{defaultMessage:"Passing Yards Per Game",id:"NZ1ECBKywu"},rushingYardsPerGame:{defaultMessage:"Rushing Yards Per Game",id:"XaZf8sSKrF"},thirdDownConversionRate:{defaultMessage:"Third Down Conversion Rate",id:"ffvMztEyfa"},redZoneEfficiency:{defaultMessage:"Red Zone Efficiency",id:"KD1EYvEBXL"},freeThrowsMade:{defaultMessage:"Free Throws Made",id:"qngxYnoujX"},fieldGoalsMade:{defaultMessage:"Field Goals Made",id:"8hkrjZ6IYu"},turnovers:{defaultMessage:"Turnovers",id:"ix10Ldc+00"},blocks:{defaultMessage:"Blocked Shots",id:"H+onZtcuVa"},steals:{defaultMessage:"Steals",id:"6WYTxwolV8"},threePointFieldGoalsMade:{defaultMessage:"Three Point Field Goals Made",id:"sHR4TS9YOq"},defense:{defaultMessage:"Defense",id:"7Y+mK49r3z"},pointsAllowed:{defaultMessage:"Points Allowed",id:"oIj9CdpmXY"},turnoverDiff:{defaultMessage:"Turnover Diff",id:"XAiSFr028u"},pointsAllowedPerGame:{defaultMessage:"Points Allowed Per Game",id:"crP3Q4G1sg"},assistsPerGame:{defaultMessage:"Assists Per Game",id:"iVrCmaL1xp"},reboundsPerGame:{defaultMessage:"Rebounds Per Game",id:"luHpkidK/P"},fieldGoalPercentage:{defaultMessage:"Field Goal Percentage",id:"eFfteQzdQj"},blocksPerGame:{defaultMessage:"Blocks Per Game",id:"GZdk7v9wsc"},stealsPerGame:{defaultMessage:"Steals Per Game",id:"AsfNOOP1Pv"},threePointPercentage:{defaultMessage:"Three Point Percentage",id:"47T2zZRSFt"},freeThrowPercentage:{defaultMessage:"Free Throw Percentage",id:"/G3PY4IYf7"},yardsAllowedPerGame:{defaultMessage:"Yards Allowed Per Game",id:"B15PuOjR7R"},passingYardsAllowed:{defaultMessage:"Passing Yards Allowed",id:"0HGZ3V81cB"},rushingYardsAllowed:{defaultMessage:"Rushing Yards Allowed",id:"ftA+LXAEQL"},firstDowns:{defaultMessage:"First Downs",id:"aHqkLRqHjr"},penalties:{defaultMessage:"Penalties",id:"fa38C8rLbM"},penaltyYards:{defaultMessage:"Penalty Yards",id:"ZC7MShyuR1"},possessionMinutes:{defaultMessage:"Possession Minutes",id:"khpuL1ieoV"},fumblesLost:{defaultMessage:"Fumbles Lost",id:"IzuROyqz+7"},interceptionsThrown:{defaultMessage:"Interceptions Thrown",id:"tmQq6pHbYi"},other:{defaultMessage:"Other",id:"/VnDMl81rh"},totalYards:{defaultMessage:"Total Yards",id:"veZmYTt6MN"},points:{defaultMessage:"Points",id:"P0PLlQxVoe"},turnoversPerGame:{defaultMessage:"Turnovers Per Game",id:"uTgBwtAPGV"},foulsPerGame:{defaultMessage:"Fouls Per Game",id:"SMqdG+QmGB"},penaltiesPerGame:{defaultMessage:"Penalties Per Game",id:"9wKTlQSR/j"},penaltyYardsPerGame:{defaultMessage:"Penalty Yards Per Game",id:"Jm5WpbiViO"},gamePreview:{defaultMessage:"Game Preview",id:"GvobedfNcN"},gameSummary:{defaultMessage:"Game Summary",id:"+eeGQlcxzW"},gameLive:{defaultMessage:"LIVE",id:"UqyNCCygYW"},carries:{defaultMessage:"{value} carries",id:"rq9+96YlFa"},receptions:{defaultMessage:"{value} rec",id:"sTvPmiSZD7"},pointsStat:{defaultMessage:"{value} points",id:"UrDn6NGZfb"},reboundsStat:{defaultMessage:"{value} rebounds",id:"9vdJ9I7bdt"},assists:{defaultMessage:"Assists",id:"PqEAty/m8X"},rebounds:{defaultMessage:"Rebounds",id:"VXRs2esXLO"},assistsStat:{defaultMessage:"{value} assists",id:"bWLYwKNgJ3"},passingYards:{defaultMessage:"Passing Yards",id:"aQGqkCWSsl"},rushingYards:{defaultMessage:"Rushing Yards",id:"MpZ23vuQex"},receivingYards:{defaultMessage:"Receiving Yards",id:"GbfiEHr37J"},bettingOddsSpread:{defaultMessage:"Spread",id:"B7hDsYrvQe"},bettingOddsTotal:{defaultMessage:"Total",id:"MJ2jZQxQnT"},bettingOddsMoneyline:{defaultMessage:"Money Line",id:"kW0GAibgTH"},injuryReport:{defaultMessage:"Injury Report",id:"/YN/gLAPJU"},player:{defaultMessage:"Player",id:"1AGL1rdLFR"},position:{defaultMessage:"Position",id:"U6qGuOVs+L"},injury:{defaultMessage:"Injury",id:"PQiOxuIu/I"},status:{defaultMessage:"Status",id:"tzMNF3jWoU"},noRelatedGames:{defaultMessage:"No related games",id:"Ot5mpNSKsp"},teamComparison:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},noUpdatesAvailable:{defaultMessage:"No updates available",id:"0Pg/1iJOgA"},halftime:{defaultMessage:"Halftime",id:"iC0AL294Dr"},viewMatchDetails:{defaultMessage:"View Game Details",id:"jBJqA9z9lD"},viewStandings:{defaultMessage:"View Standings",id:"oaPWiK0oYi"},followGameLive:{defaultMessage:"Follow Game Live",id:"CWFVI1BPrZ"},latestNews:{defaultMessage:"Latest News",id:"BlFeZAX10O"},imageSource:{defaultMessage:"Image source: {source}",id:"O/d/1HvfyG"},week:{defaultMessage:"Week {week}",id:"RE27WbGe9C"},total:{defaultMessage:"T",id:"sjlqAC/nrs"},team:{defaultMessage:"Team",id:"wsUmh9XWBm"},sources:{defaultMessage:"Data: Stats Perform  Player Photos: Associated Press",id:"g0CN3T/ISr"},nflSeason:{defaultMessage:"{year} NFL Season",id:"n6vqth75CA"},nbaSeason:{defaultMessage:"{year} NBA Season",id:"rrCa+R0f7X"},undrafted:{defaultMessage:"Undrafted",id:"ZpiNk0Z5Np"},pre:{defaultMessage:"Pre",id:"hMX10Ja0Xm"},preseason:{defaultMessage:"Preseason",id:"HENGOVahPR"},regularSeason:{defaultMessage:"Regular Season",id:"Ea9LD9vfyQ"},postSeason:{defaultMessage:"Postseason",id:"xvhy/ycHzu"},proBowl:{defaultMessage:"Pro Bowl",id:"pxho4sLngT"},wildCardPlayoff:{defaultMessage:"Wild Card Playoff",id:"EvhXzrm4Ix"},divisionalPlayoff:{defaultMessage:"Divisional Playoff",id:"p1LmAErYhB"},conferenceChampionship:{defaultMessage:"Conference Championship",id:"AVW9uMIxMK"},superBowl:{defaultMessage:"Super Bowl",id:"khEvs6DTrv"},relatedGames:{defaultMessage:"Related Games",id:"Vii6YKE9t9"},noEvents:{defaultMessage:"No events",id:"xPFOlw/kys"},showAllTeams:{defaultMessage:"Show all teams",id:"k112pFsCZU"},tba:{defaultMessage:"TBA",id:"ZfAWFLTzx/"},live:{defaultMessage:"Live",id:"Dn82ALx/+V"},standings:{defaultMessage:"Standings",id:"o2v7SB+ObO"},schedule:{defaultMessage:"Schedule",id:"hGQqkWwmJD"},wins:{defaultMessage:"Wins",id:"f++h1REg9b"},losses:{defaultMessage:"Losses",id:"eQJCl5DaWL"},ties:{defaultMessage:"Ties",id:"LYMVZdnuVv"},winPct:{defaultMessage:"Win Pct",id:"sHcBpWJlFR"},pointsFor:{defaultMessage:"PF",id:"zG5bX7TOdX"},pointsAgainst:{defaultMessage:"PA",id:"+09k0C5AlI"},streak:{defaultMessage:"Str",id:"/K3fzWE90S"},teamSchedule:{defaultMessage:"{year} {team} Schedule",id:"1Z4UTJhHPZ"},home:{defaultMessage:"Home",id:"ejEGdxSUGs"},away:{defaultMessage:"Away",id:"0JXAskjV4d"},previous:{defaultMessage:"Previous",id:"JJNc3cbYIJ"},upcoming:{defaultMessage:"Upcoming",id:"6/aEFZbs2i"},relatedTeams:{defaultMessage:"Related Teams",id:"ZzOufqyGoL"},seasonStats:{defaultMessage:"{year} Season Stats",id:"0p+BU5Jj9p"},coachName:{defaultMessage:"Coach",id:"uQg6UcdK4Y"},diff:{defaultMessage:"Diff",id:"Fm3StihZV6"},teams:{defaultMessage:"Teams",id:"DNeuzb5ky2"},seasonHighlights:{defaultMessage:"Season Highlights",id:"u0NXd7YWeO"},playByPlay:{defaultMessage:"Play by Play",id:"g2y6uMg3RU"},playSummary:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"},activeDrive:{defaultMessage:"Active Drive",id:"9WRCeRXYnG"},drive:{defaultMessage:"Drive",id:"1YAWJ379IQ"},gameDown:{defaultMessage:"{down} Down",id:"D6NiYuphxA"},noLeader:{defaultMessage:"No Leader",id:"nEuoHaJ7ix"},endOfPeriod:{defaultMessage:"End of Quarter",id:"tY+g5ifXSh"},playSubtitle:{defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},downloadIosNotificationCta:{defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"},downloadIosNotificationCtaSub:{defaultMessage:"Scan the QR code to download the app",id:"1j+FmhPZ8J"},iosNotificationsCta:{defaultMessage:"Turn on live game updates",id:"B3DARItQiv"},iosNotificationsCtaOff:{defaultMessage:"Turn off live game updates",id:"MJ3BTMxxFR"},iosNotificationsCtaSub:{defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"},iosNotificationsCtaSubOff:{defaultMessage:"You are subscribed to live game alerts.",id:"ESQg4GtLBi"},moreGames:{defaultMessage:"More Games",id:"ssuX7Q5/hn"},goals:{defaultMessage:"Goals",id:"XHLYdJ4a0Y"},shots:{defaultMessage:"Shots",id:"MtAfOi/9Z4"},shotsOnTarget:{defaultMessage:"Shots on Target",id:"XypPx7GnSa"},fouls:{defaultMessage:"Fouls",id:"ULgxB5+kkl"},yellowCards:{defaultMessage:"Yellow Cards",id:"OgfXSatXn2"},redCards:{defaultMessage:"Red Cards",id:"iM3q/GTmBa"},corners:{defaultMessage:"Corners",id:"SG1mA2ViLF"},saves:{defaultMessage:"Saves",id:"OXuG5Tbo0I"},passes:{defaultMessage:"Passes",id:"zt/qs3N6e3"},pointsWon:{defaultMessage:"Points Won",id:"XinSz02Vcr"},totalWinners:{defaultMessage:"Winners",id:"upRjwyuG/1"},forehandWinners:{defaultMessage:"Forehand Winners",id:"dhq2amJ4Pc"},backhandWinners:{defaultMessage:"Backhand Winners",id:"7LkIR0bV+s"},aces:{defaultMessage:"Aces",id:"sZJa/S3ekv"},doubleFaults:{defaultMessage:"Double Faults",id:"+3VTXdG9VS"},firstServePercentage:{defaultMessage:"First Serve %",id:"L5NV6vruFx"},firstServePointsWonPercentage:{defaultMessage:"First Serve Points Won %",id:"QOFjHS/pnz"},secondServePointsWonPercentage:{defaultMessage:"Second Serve Points Won %",id:"GfQX2xkNys"},breakpointsWon:{defaultMessage:"Break Points Won",id:"vuAxPAew9k"},totalUnforcedErrors:{defaultMessage:"Unforced Errors",id:"4F6jzAUiDp"}}),qNe=(e,t,n)=>{if(!t)return"";const r=K7t[t];return r?e(r,n):""};function Y7t(e,t){const{$t:n}=Z();if(t){if(e==="nfl")switch(t){case 19:return"Wildcard Round";case 20:return"Divisional Round";case 21:return"Conference Round";case 22:return"Super Bowl";default:return n({defaultMessage:"Week {week}",id:"RE27WbGe9C"},{week:t})}return n({defaultMessage:"Week {week}",id:"RE27WbGe9C"},{week:t})}}function Q7t(e,t){return V9t(e.event.teams,e.brands,t).map(s=>{const a=D9t(s.teamId,e);return{...s,winProbability:a?.probability??0}})}function KNe({event:e,league:t}){const{$t:n,formatNumber:r}=Z(),s=H7t(e?.event),{isMobileStyle:a}=Ce(),i=s?a?s:n({defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},{network:s}):"",l=qNe(n,t),c=z7t(e.event),u=G7t(e.event),{locale:d}=Z(),[m,p]=f.useState(!1),{temperature:h,weatherCondition:g}=q7t(e.weather,m),y=h?.degrees?r(h?.degrees,{style:"unit",unit:m?"celsius":"fahrenheit"}):"",[x,v]=Q7t(e,t),b=Y7t(t,e.event.week),_=e.event.eventRound?.name||null;return{whereToWatch:i,league:t,gameVenue:c,gameLocation:u,roundName:_,locale:d,celcius:m,setCelcius:p,weatherCondition:g,degrees:y,team1:x,team2:v,weekLabel:b,leagueName:l}}const YNe=({event:e,final:t,className:n,isLive:r})=>{const{$t:s}=Z(),{locale:a}=Z(),{isMobileStyle:i}=Ce(),l=W7t(e);if(!l)return null;const c=l.year===new Date().getFullYear(),u=GNe(e.eventStatus,e.scheduledPeriods),d=p5(new Date(l.full))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):new Date(l.full).toLocaleString(a,{weekday:c||i?void 0:"short",month:i?"numeric":"short",day:"numeric",year:c?void 0:"numeric"}),m=e?.scheduledPeriods==2?`H${e.eventStatus?.period}`:`Q${e.eventStatus?.period}`;return o.jsxs(H,{className:V("gap-xs p-sm md:px-sm flex flex-1 flex-col items-center justify-center md:gap-0",n),children:[!r&&o.jsx(F,{variant:"smallBold",className:"text-center leading-tight",children:d}),r?o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs(Ru,{className:"gap-xs text-super",children:[o.jsx(Vr,{id:"period",children:o.jsx(F,{variant:"smallBold",color:"super",className:"text-center uppercase leading-tight",children:u?s({defaultMessage:"Halftime",id:"iC0AL294Dr"}):m})}),!u&&o.jsx(Vr,{id:"time",children:o.jsxs(F,{variant:"smallBold",color:"super",className:"text-center",children:[e.eventStatus.minutes,":",e.eventStatus.seconds?.toString()?.padStart?.(2,"0")]})})]}),o.jsx(QNe,{})]}):o.jsx(F,{color:"light",variant:i?"tiny":"small",className:"text-center",children:t?s({defaultMessage:"Final",id:"6/JzkWi0di"}):l.full&&!e.isTba?new Date(l.full).toLocaleTimeString(a,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):"TBA"})]})},QNe=f.memo(({className:e})=>{const[t,n]=f.useState(!1);return f.useEffect(()=>{const r=setInterval(()=>{n(s=>!s)},1500);return()=>clearInterval(r)},[]),o.jsx(ve.div,{className:V("h-0.5 w-16 overflow-hidden rounded-full md:w-20",e),children:o.jsx("div",{className:V("-mx-5 flex h-full",{"justify-end":t},{"justify-start":!t}),children:o.jsx(ve.div,{className:V("bg-super h-full w-6 rounded-full"),layout:"position",transition:{duration:1.5,ease:an}})})})});QNe.displayName="LiveIndicator";const xpn=({seriesEvents:e,league:t,eventId:n,gameLabel:r})=>{const{isMobileStyle:s}=Ce(),{inApp:a}=wl(),i=Ut(),l=_t(),{$t:c}=Z(),u=c({defaultMessage:"Game",id:"Am8glJTtny"}),d=r??u,m=f.useMemo(()=>!e?.length||!t?[]:e.map((g,y)=>{const x=g.eventId===n,v=M$({href:`/sports/${t}/events/${g.eventId}`,inApp:a,queryParams:i});return{type:"default",text:`${d} ${y+1}`,onClick:()=>{!x&&v&&l.push(v)},active:x}}),[e,t,l,n,d,a,i]);if(!e?.length)return null;const p=n?e.findIndex(g=>g.eventId===n):0,h=n?p+1:1;return o.jsx(sn,{items:m,isMobileStyle:s,menuItemClassName:"items-center",children:o.jsx(pe,{size:"small",chevron:!0,text:`${d} ${h}`})})},XNe=({title:e,gameVenue:t,gameLocation:n,roundName:r,setCelcius:s,weatherCondition:a,degrees:i,whereToWatch:l,weekLabel:c,isFinal:u})=>{const{locale:d}=Z(),m=a&&i,p=l&&!u||c;return o.jsxs(H,{className:"gap-md p-md flex items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[o.jsx(F,{variant:"baseSemi",className:"leading-tight",children:e}),p&&o.jsxs(Ru,{className:"gap-xs text-quiet",children:[l&&!u&&o.jsx(Vr,{id:"watch",children:o.jsxs(F,{variant:"tiny",color:"light",className:"gap-xs flex truncate whitespace-nowrap",children:[o.jsx(Xue,{size:14,className:"mb-xs"}),l]})}),c&&o.jsx(Vr,{id:"week",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-sm flex items-center truncate whitespace-nowrap",children:c})})]})]}),o.jsxs("button",{className:"flex min-w-0 flex-col items-end",onClick:()=>s(h=>!h),children:[o.jsx(F,{variant:"tiny",color:"light",className:"w-full min-w-0 truncate whitespace-nowrap text-end",children:t}),m?o.jsxs(Ru,{className:"gap-xs text-quiet text-xs",children:[d.startsWith("en-")&&a&&o.jsx(Vr,{id:"condition",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-xs flex items-center whitespace-nowrap",children:a})}),i&&o.jsx(Vr,{id:"temperature",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-xs flex items-center",children:i})})]}):o.jsx(F,{variant:"tiny",color:"light",className:"w-full min-w-0 truncate whitespace-nowrap text-end",children:n}),r&&o.jsx(F,{variant:"tiny",color:"light",className:"w-full min-w-0 truncate whitespace-nowrap text-end",children:r})]})]})},X7t=Yt("BlazeSDKContext",{blazeSDK:null,isBlazeSDKReady:!1}),Z7t=()=>f.useContext(X7t);function J7t(e,t){const n=e.Theme(t?"row-rectangle":"row-rectangle-horizontal");return n.layoutStyle.borderRadius="5px",n.layoutStyle.statusLiveStyle.isVisible=!1,n.layoutStyle.statusLiveUnreadStyle.isVisible=!1,n.layoutStyle.statusReadStyle.isVisible=!1,n.layoutStyle.statusUnreadStyle.isVisible=!1,n.playerStyle.titleFont="var(--font-fk-grotesk-neue)",n.playerStyle.publishedDateFont="var(--font-fk-grotesk-neue)",n.layoutStyle.labelStyle.font="var(--font-fk-grotesk-neue)",n.layoutStyle.labelStyle.fontSize=".75rem",n.playerStyle.iconsButton=[{value:"MUTE_UNMUTE",isVisible:!0},{value:"EXIT_PLAYER",isVisible:!0}],n}function eDt(e,t){return Rk(t)?e.LabelBuilder().singleLabel(t[0]):e.LabelBuilder().mustInclude(t?.join?.(" , "))}function tDt(e,{isMobile:t,labels:n,maxItems:r,onData:s}){const a=e.DataSourceBuilder().labels({labels:eDt(e,n),maxItems:r,orderType:"RecentlyUpdatedFirst"}),i=J7t(e,t);e.WidgetRowView("stories-container",{dataSource:a,theme:i,contentType:"story",delegates:{[e.Delegations.onWidgetDataLoadCompleted]:l=>{s?.({detail:l.detail,error:null})},[e.Delegations.onErrorThrown]:l=>{s?.({error:l,detail:null})}}})}function nDt({labels:e,maxItems:t,onData:n,style:r,className:s}){const{isMobileStyle:a}=Ce(),{blazeSDK:i,isBlazeSDKReady:l}=Z7t(),c=f.useRef(!1);return f.useEffect(()=>{if(!(!l||c.current))try{tDt(i,{isMobile:a,labels:e,maxItems:t,onData:n}),c.current=!0}catch(u){n?.({error:u,detail:null})}},[i,l,a,t,n,c]),o.jsx("div",{id:"stories-container",className:V("overrides [&_blaze-widget-layout]:p-0",s),style:r},a?"m":"d")}async function rDt({url:e}){const{default:t}=await Q(async()=>{const{default:r}=await import("./qrcode-DzQwd33t.js").then(s=>s.q);return{default:r}},__vite__mapDeps([125,1])),n=t(0,"M");return n.addData(e.toString()),n.make(),n.createSvgTag(2,0)}async function sDt({deviceId:e,liveEventId:t,reason:n}){const r=await ae.GET("/rest/live-events/subscription",n,{params:{query:{device_id:e,live_event_id:t}}});return r.error?(ne.error(`Failed to get subscription status: ${e}`),!1):r.data?.subscribed??!1}async function aDt({apns:e}){const t=Qk({type:"pplx.sports.notifications",data:{apns:e}});return await new Promise(n=>setTimeout(n,500)),t||ne.error("Failed to subscribe user to event."),t}async function iDt({liveEventId:e,deviceId:t,apns:n}){try{const{error:r}=await ae.DELETE("/rest/live-events/subscription","sports-ios-notification-sub-unsubscribe",{params:{query:{device_id:t,live_event_id:e}}});if(Qk({type:"pplx.sports.notifications.unsubscribe",data:{apns:n}}),r)throw new Ie("API_CLIENTS_ERROR",{cause:r});return!0}catch(r){return ne.error(r),!1}}const ZNe=(e,t)=>["events/subscription",e,t];function oDt({apns:e,liveEventId:t,deviceId:n}){const r=xt(),s=ZNe(n,t);return St({mutationFn:async a=>a.subscribe?aDt({apns:e}):await iDt({liveEventId:t,deviceId:n,apns:e}),onMutate:async a=>{await r.cancelQueries({queryKey:s});const i=r.getQueryData(s);return r.setQueryData(s,a),{prevState:i}},onError:(a,i,l)=>{r.setQueryData(s,l?.prevState)},onSettled:()=>{r.invalidateQueries({queryKey:s})}})}const lDt=({apns:e,deviceId:t})=>{const n="sports-ios-notification-sub",r=e.attributes?.live_event_id,{trackEvent:s}=je(),{data:a}=We({queryKey:ZNe(t,r),queryFn:()=>sDt({deviceId:t,liveEventId:r,reason:n}),staleTime:0}),{mutate:i,isPending:l}=oDt({apns:e,liveEventId:r,deviceId:t}),c=f.useRef(null);return s5(c,()=>{s("live event subscribe toggle impression",{deviceId:t,liveEventId:r,subscribed:!!a})},{threshold:.5}),o.jsx("div",{ref:c,className:"gap-x-sm flex items-center pl-4",children:o.jsx(Ji,{active:!!a,onChange:()=>i({subscribe:!a}),disabled:l})})},cDt=({url:e})=>{const[t,n]=f.useState("");return f.useEffect(()=>{rDt({url:e}).then(n).catch(ne.error)},[e]),t?o.jsx(H,{variant:"background",className:"p-xs shadow-subtle aspect-square w-full rounded border",children:o.jsx("div",{className:"[&_path]:fill-foreground [&_rect]:fill-inverse flex items-center justify-center [&_svg]:h-auto [&_svg]:w-full",dangerouslySetInnerHTML:{__html:t}})}):o.jsx(wn,{className:"bg-subtler block aspect-square w-full rounded"})},QH=({title:e,subtitle:t="",children:n,className:r,expandedCta:s=!1})=>o.jsxs(H,{className:V("mx-md gap-sm md:-mt-md md:px-md grid border-t",r),children:[o.jsxs(H,{className:"gap-md flex min-h-[50px] items-center justify-between",children:[o.jsxs(H,{children:[o.jsx(F,{variant:"smallBold",children:e}),o.jsx(F,{variant:"small",color:"light",children:t})]}),n]}),s&&o.jsx(uDt,{})]}),uDt=()=>{const{isMobileStyle:e}=Ce(),{actions:t,isSportsIosCtaDismissed:n}=_n();return o.jsx(o.Fragment,{children:!n&&e&&o.jsxs(H,{className:"relative block overflow-hidden rounded","aria-hidden":"true",children:[o.jsx(H,{className:"p-sm absolute right-0 top-0",children:o.jsx("button",{onClick:()=>t.setIsSportsIosCtaDismissed(!0),children:o.jsx(It,{color:"white"})})}),o.jsx("img",{className:"max-h-[200px] w-full object-cover object-[0_90%]",src:"https://r2cdn.perplexity.ai/images/ios-live-game-alerts-promo.jpg",alt:""})]})})},dDt={SportsEventAttributes:"2.37.1",SportsIndividualEventAttributes:"2.45.0"};function JNe({apns:e,containerClassName:t,title:n,subtitle:r}){const{$t:s}=Z(),{device:{isAndroid:a}}=Lt(),{inApp:i,appVersion:l,deviceId:c}=wl(),{handleAppDownloadClicked:u}=Ep("sports-ios-notification-sub"),{isMobileStyle:d}=Ce();if(a||!e)return null;if(n=n||s({defaultMessage:"Turn on live game updates",id:"B3DARItQiv"}),r=r||s({defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"}),i){const m=dDt[e.attributesType];return m?ZFe(l,m)?o.jsx(mDt,{containerClassName:t,onClick:u}):!e||!c?null:o.jsx(QH,{title:n,subtitle:r,className:t,children:o.jsx(f.Suspense,{children:o.jsx(lDt,{apns:e,deviceId:c})})}):null}return d?o.jsx(fDt,{containerClassName:t,onClick:u}):null}const fDt=({containerClassName:e,onClick:t})=>{const{$t:n}=Z();return o.jsx(QH,{title:n({defaultMessage:"Download the app to get live updates during the event",id:"vBmN5Ou5qa"}),className:e,children:o.jsx(pe,{size:"small",pill:!0,variant:"primary",icon:s_,text:n({defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:t})})},mDt=({containerClassName:e,onClick:t})=>{const{$t:n}=Z();return o.jsx(QH,{title:n({defaultMessage:"Update the app to follow the event live",id:"DKTCeuOgpP"}),className:e,children:o.jsx(pe,{size:"small",pill:!0,variant:"primary",icon:s_,text:n({defaultMessage:"Update App",id:"NEMhhhqxf3"}),onClick:t})})};function vpn({apns:e}){const{$t:t}=Z(),{downloadAppLink:n}=Ep("sports-ios-notification-sub"),{isMobileStyle:r}=Ce(),{actions:s,isSportsIosCtaDismissed:a}=_n(),i=f.useCallback(()=>{s.setIsSportsIosCtaDismissed(!0)},[s]);return a||r||!e?null:o.jsxs(H,{variant:"raised",className:"ml-sm mt-md p-md shadow-subtle relative flex max-w-[160px] flex-col items-center rounded-xl border",children:[o.jsx("div",{className:"mb-sm flex w-full justify-center",children:o.jsx(cDt,{url:n})}),o.jsx(F,{variant:"smallBold",className:"text-center leading-tight",children:t({defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"})}),o.jsx(Te,{size:"tiny",pill:!0,icon:It,extraCSS:"!absolute -top-0.5 opacity-50 hover:opacity-100 -right-0.5",onClick:i,variant:"noBackground"}),o.jsxs(H,{className:"mt-sm px-sm gap-xs mx-auto inline-flex items-center justify-center rounded-full border py-1",children:[o.jsx(Nd,{size:12,className:"text-quiet"}),o.jsxs("div",{className:"flex gap-px",children:[o.jsx(F,{variant:"smallCaps",color:"light",className:"whitespace-nowrap text-center",children:"4.9"}),o.jsx(F,{variant:"smallCaps",color:"ultraLight",className:"whitespace-nowrap text-center",children:""}),o.jsx(F,{variant:"smallCaps",color:"light",className:"text-center",children:"100k+"})]})]})]})}function pDt({team1:e,team2:t}){const{$t:n}=Z(),[r,s]=f.useState(!1),{colorScheme:a}=Jr(),i=f.useRef(null);bH({ref:i,onInView:()=>{s(!0)}});const l=Ci(.16,1,.3,1),{locale:c}=Z(),u=ck(e.color,a),d=ck(t.color,a);return o.jsxs("div",{className:"gap-sm px-md pb-md mx-auto flex flex-col items-center",ref:i,children:[o.jsx(wn,{className:"w-full shrink-0",active:!r,children:o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:V("relative flex h-2 w-full shrink-0 justify-between overflow-hidden rounded-full duration-150",{"bg-subtle":!r}),children:[o.jsx(ve.div,{className:"absolute inset-y-0 left-0 h-full rounded-full",style:{background:t.winProbability?d:"#00000010",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"},animate:{width:r?`calc(${t.winProbability}%)`:0,left:r?`calc(${e.winProbability}% + 1px)`:0},transition:{ease:l,duration:.5}}),o.jsx(ve.div,{className:"relative h-full rounded-full",style:{background:e.winProbability?u:"#00000010",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"},animate:{width:r?`calc(${e.winProbability}% - 1px)`:0},transition:{ease:l,duration:.5}})]}),o.jsx("div",{className:"bg-base from-subtler to-subtler p-two absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r",children:o.jsx("div",{className:"bg-inverse/70 h-4 w-[1.5px] rounded-full"})})]})}),o.jsxs("div",{className:"grid w-full grid-cols-3",children:[o.jsx(F,{variant:"small",className:"text-left",children:o.jsx(JL,{value:ky(e.winProbability,c),digitClassName:"font-mono",className:"inline-flex"})}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"mt-px text-center",children:n({defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"})}),o.jsx(F,{variant:"small",className:"text-right",children:o.jsx(JL,{value:ky(t.winProbability,c),digitClassName:"font-mono",className:"inline-flex"})})]})]})}const hDt=({width:e,height:t,fraction:n,className:r,colors:s,onAnimationEnd:a,onArcSelect:i,onArcDeselect:l,selectedArc:c,animate:u})=>{const m=Math.PI*2*(1-n),[p,h]=f.useState(!1),[g,y]=f.useState(!1);f.useEffect(()=>{p&&g&&a?.()},[p,g,a]);const x=b=>{i?.(b)},v=()=>{l?.()};return o.jsx("svg",{width:e,height:t,viewBox:`0 0 ${e} ${t}`,className:r,children:o.jsxs(ba,{top:t/2,left:e/2,children:[o.jsx(ioe,{startAngle:0,endAngle:m,outerRadius:e/2,innerRadius:e/2-(c===0?12:10),padAngle:.04,cornerRadius:999,fill:s[1],onAnimationEnd:()=>h(!0),onMouseEnter:()=>x(0),onMouseLeave:v,animationEnded:p&&g,className:c===1?"opacity-20":void 0,animate:u}),o.jsx(ioe,{startAngle:m,endAngle:Math.PI*2,padAngle:.02,outerRadius:e/2,innerRadius:e/2-(c===1?12:10),cornerRadius:999,fill:s[0],onAnimationEnd:()=>y(!0),onMouseEnter:()=>x(1),onMouseLeave:v,animationEnded:p&&g,className:c===0?"opacity-20":void 0,animate:u})]})})},gDt=vu(jCe),ioe=({startAngle:e,endAngle:t,onAnimationEnd:n,animationEnded:r,className:s,animate:a,...i})=>{const l=W$({to:{startAngle:a?e:Math.PI*2,endAngle:a?t:Math.PI*2},from:{startAngle:Math.PI*2,endAngle:Math.PI*2},delay:200,onRest:m=>{m.finished===!0&&n?.()}}),{colorScheme:c,isColorSchemeReady:u}=Jr({addSecondPass:!0}),d=u&&c==="dark"?"stroke-white/5":void 0;return o.jsx(gDt,{...i,startAngle:a?l.startAngle:0,endAngle:a?l.endAngle:0,className:V(d,r?"duration-200 ease-out":"",s)})},yDt=({className:e,team1:t,team2:n,size:r=150})=>{const[s,a]=f.useState(!1),[i,l]=f.useState(!1),[c,u]=f.useState(null),d=f.useRef(null),m=f.useRef(null),p="duration-200",h=f.useRef(null),[g,y]=f.useState(!1),{locale:x}=Z(),{isMobileStyle:v}=Ce(),b=f.useMemo(()=>[t.winProbability?t.color:"#00000010",n.winProbability?n.color:"#00000010"],[t,n]);bH({ref:h,onInView:()=>{a(!0),fY(Math.max(t.winProbability-30,0),t.winProbability,{duration:2,ease:"easeOut",onUpdate:S=>{d.current&&(d.current.textContent=ky(S,x))}}),fY(Math.max(n.winProbability-20,0),n.winProbability,{duration:2,ease:"easeOut",onUpdate:S=>{m.current&&(m.current.textContent=ky(S,x))}}),y(!0)}});const _=S=>{u(S)},w=()=>{u(null)},C=Math.abs(t.winProbability/100);return o.jsx("div",{className:e,ref:h,children:o.jsxs("div",{className:"gap-sm md:gap-md isolate grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[o.jsx(ooe,{innerRef:d,show:s,textBlockVariant:v?"smallBold":"baseSemi",className:V("translate-x-md self-start text-right !delay-0 !ease-out md:translate-x-0 md:self-center",p,{"scale-110":c===1,"opacity-20":c===0}),onMouseEnter:()=>_(1),onMouseLeave:w}),o.jsxs("div",{className:"relative",style:{width:r,height:r},children:[o.jsx(hDt,{height:r,width:r,fraction:C,animate:g,className:"relative z-[2] size-full",colors:b,onAnimationEnd:()=>l(!0),onArcSelect:S=>{u(S)},onArcDeselect:()=>u(null),selectedArc:c}),o.jsx(wn,{active:!s,className:"absolute inset-0 z-[1]",children:o.jsx("div",{className:V("border-subtlest absolute inset-0 rounded-full border-[10px]",p,{"opacity-0":s})})}),o.jsx("div",{className:V("absolute inset-0 z-[1] rounded-full opacity-10 blur-md dark:opacity-20",p,{"!opacity-0":!i}),style:{backgroundImage:`conic-gradient(${t.color} 0deg, ${n.color} 10deg, ${n.color} ${(1-C)*360-10}deg, ${t.color} ${(1-C)*360}deg)`,maskImage:"radial-gradient(transparent, black)"}}),o.jsx("div",{className:"absolute inset-0 z-[3] flex items-center justify-center",children:o.jsxs("div",{className:"gap-sm flex size-full items-center justify-center",children:[o.jsx("div",{onMouseEnter:()=>_(1),onMouseLeave:w,className:"flex size-full items-center justify-end",children:o.jsx(Ls,{color:t.color,logo:t.logo,includeStripe:!1,size:"medium",className:V("pointer-events-auto ease-out",p,c===1?"scale-110":void 0,c===0?"opacity-20":void 0)})}),o.jsx(H,{className:"h-lg hidden border-l md:block"}),o.jsx("div",{onMouseEnter:()=>_(0),onMouseLeave:w,className:"flex size-full items-center justify-start",children:o.jsx(Ls,{color:n.color,logo:n.logo,includeStripe:!1,size:"medium",className:V("pointer-events-auto ease-out",p,c===0?"scale-110":void 0,c===1?"opacity-20":void 0)})})]})})]}),o.jsx(ooe,{innerRef:m,show:s,textBlockVariant:v?"smallBold":"baseSemi",className:V("-translate-x-md self-end !delay-0 !ease-out md:-translate-x-0 md:self-center",p,{"scale-110":c===0,"opacity-20":c===1}),onMouseEnter:()=>_(0),onMouseLeave:w})]})})},ooe=({innerRef:e,show:t,className:n,textBlockVariant:r="section-title",...s})=>{const{locale:a}=Z();return o.jsx("div",{className:V("flex-1 cursor-default",{"translate-y-2 opacity-0":!t},n),...s,children:o.jsxs(F,{variant:r,className:V("relative !font-mono"),children:[o.jsx("span",{ref:e,className:"absolute inset-0",children:ky(0,a)}),o.jsx("span",{className:"opacity-0",children:ky(100,a)})]})})},xDt=({watchlistType:e,identifier:t,category:n,modalOrigin:r,loginPrompt:s,reason:a})=>{const{$t:i}=Z(),l=xt(),c=lt(),{openModal:u}=wt(),d=f.useRef(!1),[m,p]=f.useState(!1),[h,g]=f.useState(!1),[y,x]=f.useState(!1),{data:v,isLoading:b}=gV({watchlistType:e,reason:a}),{mutate:_}=zve({watchlistType:e,queryClient:l,reason:a}),{mutate:w}=Gve({watchlistType:e,queryClient:l,reason:a}),C=f.useCallback(S=>{const{invalidateOnSuccess:E=!0}=S??{};if(g(!1),x(!1),!c){const M=i({defaultMessage:"Sign in to follow your interests",id:"ebRSvhaBXI"});u("loginModal",{pitchMessage:{title:s||M},origin:r});return}m?(w({identifier:t,category:n}),x(!0)):(_({identifier:t,category:n}),g(!0)),p(!m),E&&l.invalidateQueries({queryKey:[ty]})},[i,_,n,t,m,c,s,r,u,l,w]);return f.useEffect(()=>{if(!d.current&&!b&&v){d.current=!0;const S=M=>{const k=M.identifier===t;return n?k&&M.category===n:k},E=v.some(S);p(E)}},[b,v,t,n]),f.useMemo(()=>({isFollowed:m,toggleFollow:C,showFollowToast:h,showUnfollowToast:y,setShowFollowToast:g,setShowUnfollowToast:x,isLoadingSubscriptions:b}),[m,b,h,y,C])},e4e=R.memo(({isFollowed:e,toggleFollow:t,iconOnly:n=!1,size:r="small",selectedButtonClassName:s,unselectedButtonClassName:a,tooltip:i,variant:l})=>{const c=Z(),{isMobileStyle:u}=Ce();return o.jsx(Je,{mode:"wait",children:e?o.jsx(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:an},children:o.jsx(pe,{variant:l??"primaryGhost",pill:!0,size:r,text:u||n?void 0:c.formatMessage({defaultMessage:"Following",id:"cPIKU2QdyN"}),onClick:t,extraCSS:s,toolTip:i,icon:Nd})},"confirmed"):o.jsx(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:an},children:o.jsx(pe,{pill:!0,variant:l,icon:ur,size:r,text:u||n?void 0:c.formatMessage({defaultMessage:"Follow",id:"ieGrWod3CN"}),onClick:t,extraCSS:a,toolTip:i})},"follow")})});e4e.displayName="FollowButton";const vDt=({team:e,size:t,variant:n,league:r="nfl"})=>{const[s,a]=f.useState(0),i=f.useMemo(()=>{switch(t){case"large":return s>=1280?64:50;case"medium":default:return 32;case"small":return 20}},[t,s]),l=()=>{a(window.innerWidth)};f.useEffect(()=>(window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)),[]),f.useEffect(()=>{a(window.innerWidth)},[]);const c=6,u=32,d=u/2,m=Math.sin(Math.PI/u),p=i*m,[h,g]=f.useState(!1),[y,x]=f.useState(0),v=1600,b=n==="angled-first"?20:n==="angled-last"?-20:0;f.useEffect(()=>{h&&(x(w=>w+(n==="angled-last"?-360:360)*2),setTimeout(()=>{g(!1)},v))},[h,n]);const _=()=>{g(!0)};return o.jsxs(ve.div,{onMouseEnter:_,transition:{ease:va,duration:1},className:V("wrapper transition-opacity duration-150",{"opacity-0":s===0}),style:{width:i,height:i},children:[o.jsx("div",{className:"shadow"}),o.jsxs(ve.div,{className:V("coin size-full"),initial:{rotateY:"0deg"},animate:{rotateY:`${y+b}deg`},transition:{rotateY:{ease:GD,duration:v/1e3}},children:[o.jsx("div",{className:"front flex items-center justify-center bg-white",style:{width:i,height:i,transform:`translateZ(${c/2}px)`},children:o.jsx(Ls,{color:e.color,logo:e.logo,size:t})}),o.jsx("div",{className:"back border-subtler flex items-center justify-center border bg-white dark:border-transparent",style:{width:i,height:i,transform:`translateZ(${c/-2}px) rotateY(180deg)`},children:r==="nfl"?o.jsx(bDt,{className:"h-auto w-2/5 opacity-40 grayscale"}):o.jsx(_Dt,{className:"h-[70%] w-auto opacity-40 grayscale"})}),o.jsx("div",{className:"side",style:{transform:`translateX(${i*.5-c/2}px)`},children:Array.from({length:d}).map((w,C)=>o.jsxs("div",{className:"spoke",style:{width:c,height:i,transform:`rotateY(90deg) rotateX(calc((180deg / ${d}) * ${C+1}))`},children:[o.jsx("div",{className:"facet",style:{height:p,width:c,transform:`rotateX(calc(((180deg - (360deg / ${u})) / 2)))`}}),o.jsx("div",{className:"facet",style:{height:p,width:c,transform:`rotateX(calc(((180deg - (360deg / ${u})) / 2)))`}})]},C))})]})]})},bDt=({className:e})=>o.jsx("img",{alt:"",className:e,src:"https://upload.wikimedia.org/wikipedia/en/a/a2/National_Football_League_logo.svg"}),_Dt=({className:e})=>o.jsx("img",{alt:"",className:e,src:"https://upload.wikimedia.org/wikipedia/en/0/03/National_Basketball_Association_logo.svg"}),bpn=({eventId:e,league:t,children:n,...r})=>e?o.jsx(Xu,{...r,href:`/sports/${t}/events/${e}`,children:n}):o.jsx(o.Fragment,{children:n}),wDt=({teamId:e,league:t,children:n,...r})=>t==="ncaam"||t==="ncaaw"||t==="championsleague"||t==="wnba"||t==="atp"||t==="wta"?o.jsx(F,{children:n}):o.jsx(Xu,{...r,href:`/sports/${t}/teams/${e}`,className:"cursor-pointer duration-150 hover:opacity-60",children:n}),_pn=({playerId:e,league:t,children:n,...r})=>t==="ncaam"||t==="ncaaw"||t==="wnba"||t==="atp"||t==="wta"?o.jsx(F,{children:n}):o.jsx(Xu,{...r,href:`/sports/${t}/players/${e}`,children:n}),e7=R.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=Pn,icon:a,...i})=>{const[l,c]=f.useState(t),u=f.useRef(null),{$t:d}=Z();f.useEffect(()=>{c(t)},[t]);const m=f.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),p=f.useCallback(h=>{h?.stopPropagation(),c(!1),s(),m()},[s,m]);return f.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{p()},n*1e3)),()=>{m()}),[l,n,t,s,p,m]),o.jsx(pf,{children:o.jsx(Je,{children:l&&o.jsx(ve.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:no,...i,children:o.jsxs(H,{variant:"raised",className:V("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&o.jsx("div",{className:"p-sm bg-subtler dark:bg-subtle my-[12px] flex aspect-square items-center justify-center rounded-md",children:o.jsx(le,{icon:a,className:"text-quiet",size:"md"})}),o.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[o.jsx(F,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),o.jsxs(H,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[o.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60"}),o.jsx(H,{className:"border-t"}),o.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:p,extraCSS:"!px-[12px] flex-1 hover:opacity-60"})]})]})]})},"toast")})})});e7.displayName="FollowConfirmationToast";const pk=({team:e,metadata:t,className:n,logoClassName:r,textClassName:s,nameClassName:a,size:i="large",coinLogoProps:l,hasPosession:c,posessionIndicatorClassName:u,league:d,position:m})=>{const p="team-info",{isMobileStyle:h}=Ce(),g=Z(),y=_t(),x=Gu(),{inApp:v}=wl(),{isFollowed:b,toggleFollow:_,showFollowToast:w,showUnfollowToast:C,setShowFollowToast:S,setShowUnfollowToast:E,isLoadingSubscriptions:M}=xDt({watchlistType:"SPORTS",identifier:e.teamId.toString(),category:d.toLowerCase(),modalOrigin:De.SPORTS_WATCHLIST,loginPrompt:"Sign in to follow your teams",reason:p});return o.jsxs("div",{className:V("gap-sm flex min-w-0 flex-col items-center",n),children:[o.jsx(e7,{message:g.formatMessage({defaultMessage:"Added {team} to your watchlist",id:"ASZzl0rkyl"},{team:e.nickname}),isVisible:w,onSettingsClick:()=>{y.push(`${x}/personalize?watchlistModal=sports`)},timeout:5,onTimeout:()=>S(!1)}),o.jsx(e7,{message:g.formatMessage({defaultMessage:"Removed {team} from your watchlist",id:"9NeRSAm+wb"},{team:e.nickname}),isVisible:C,onSettingsClick:()=>{y.push(`${x}/personalize?watchlistModal=sports`)},timeout:5,onTimeout:()=>E(!1)}),o.jsxs("div",{className:"relative shrink-0",children:[l?o.jsx(vDt,{...l,team:e,size:i,league:d}):o.jsx(Ls,{className:V("shrink-0",r),logo:e.logo,color:e.color,size:i}),!M&&!v&&o.jsx("div",{className:V("absolute bottom-1/2",m==="left"?"-translate-x-xs right-full":"translate-x-xs left-full"),children:o.jsx(e4e,{isFollowed:b,toggleFollow:_,size:"tiny",iconOnly:!0,selectedButtonClassName:"!bg-inverse/5 !border-transparent !text-foreground scale-[0.85]",unselectedButtonClassName:"!bg-transparent border-subtlest !text-quiet border scale-[0.85]",tooltip:b?g.formatMessage({defaultMessage:"Following",id:"cPIKU2QdyN"}):g.formatMessage({defaultMessage:"Follow Team",id:"QrB7VHb46Y"})})})]}),o.jsxs("div",{className:V("flex flex-col items-center",s),children:[o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:V("-translate-x-xs text-super absolute right-full top-1/2 -translate-y-1/2 text-base",u),children:c&&o.jsx(wD,{size:h?12:16,className:"relative"})}),o.jsx(wDt,{teamId:e.teamId,league:d,children:o.jsxs("div",{className:"gap-sm flex items-center",children:[e.seed&&o.jsx(F,{variant:"tinyRegular",color:"light",children:e.seed}),o.jsx(F,{variant:"baseSemi",className:V("truncate xl:!text-lg",a),children:e.nickname})]})})]}),t&&o.jsx(F,{variant:"smallCaps",color:"light",className:"text-center",children:t})]})]})},wpn=({event:e,showWsc:t,onWscData:n,league:r})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),{whereToWatch:l,gameLocation:c,gameVenue:u,setCelcius:d,weatherCondition:m,degrees:p,team1:h,team2:g,weekLabel:y,roundName:x}=KNe({event:e,league:r});f.useEffect(()=>{const b=new ResizeObserver(()=>{i(window.innerWidth<1e3)});return b.observe(document.body),()=>{b.disconnect()}},[]);const v=(h?.winProbability??0)>0||(g?.winProbability??0)>0;return o.jsxs(H,{variant:"raised",className:"relative rounded-xl border",children:[o.jsx(XNe,{title:s({defaultMessage:"Game Preview",id:"GvobedfNcN"}),gameLocation:c,gameVenue:u,roundName:x,setCelcius:d,weatherCondition:m??"",degrees:p,whereToWatch:l,weekLabel:y,isFinal:dp(e.event)}),o.jsx(H,{className:"mx-md border-t"}),o.jsx(H,{children:o.jsxs("div",{className:"gap-xs p-md md:gap-md grid grid-cols-3",children:[o.jsx("div",{className:"gap-lg flex items-center justify-center",children:h&&o.jsx(pk,{team:h,league:r,metadata:rk(h.record),position:"left"})}),o.jsx(YNe,{event:e.event}),o.jsx("div",{className:"gap-lg flex items-center justify-center",children:g&&o.jsx(pk,{team:g,league:r,metadata:rk(g.record),position:"right"})})]})}),o.jsx(CDt,{showWsc:t,predictionExists:v,narrowWindow:a,team1:h,team2:g,wsc:e.wsc,onWscData:n}),o.jsx(JNe,{apns:e.apns})]})};function CDt({predictionExists:e,showWsc:t,narrowWindow:n,team1:r,team2:s,wsc:a,onWscData:i}){const{$t:l}=Z();return!r||!s?null:t?o.jsxs("div",{className:"gap-md md:pb-md grid grid-cols-2 md:gap-0",children:[e&&o.jsxs("div",{className:"gap-md p-md md:gap-sm md:p-lg md:pb-md flex flex-col-reverse items-center md:flex-col",children:[o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsx(yDt,{size:n?115:140,team1:r,team2:s})}),o.jsx(F,{color:"light",variant:"tiny",children:l({defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"})})]}),t&&o.jsx(t4e,{wsc:a,onWscData:i})]}):e?o.jsx(H,{className:"md:mx-md pt-md border-t",children:o.jsx(pDt,{team1:r,team2:s})}):null}const Cpn=({title:e,subtitle:t,children:n})=>o.jsxs(H,{className:"gap-md flex flex-col",children:[o.jsxs(H,{className:"px-md py-sm flex items-center justify-between border-b",children:[e&&o.jsx(F,{variant:"baseSemi",children:e}),t&&o.jsx(F,{variant:"smallCaps",color:"light",className:"gap-xs flex items-center",children:t})]}),o.jsx("div",{className:"gap-md px-md pb-md flex flex-col",children:n})]});function t4e({wsc:e,onWscData:t,wscTitle:n,includeLabel:r=!0}){const{$t:s}=Z(),a=e?.labels,i=f.useRef(null),[l,c]=f.useState({width:0,height:0}),{isMobileStyle:u}=Ce(),d=n||s({defaultMessage:"Pregame Highlights",id:"pTASonM2gu"}),m=e?.labels?.length>0;return f.useEffect(()=>{const p=new ResizeObserver(()=>{c({width:i.current?.clientWidth||0,height:i.current?.clientHeight||0})});return p.observe(document.body),()=>{p.disconnect()}},[]),m?o.jsxs(H,{className:"gap-md p-md md:gap-sm md:p-lg md:pb-md flex flex-col-reverse items-center justify-center md:flex-col md:border-l",children:[o.jsx("div",{className:"flex w-full flex-1 items-center justify-center",ref:i,children:o.jsx("div",{className:"flex aspect-video h-full items-center justify-center",children:l.width>0?o.jsx(nDt,{labels:a,onData:t,style:{width:u?void 0:l.width,height:u?l.height:void 0},className:"rounded shadow-md duration-200 ease-in-out hover:scale-[1.02]"}):o.jsx(wn,{className:"bg-subtle size-full self-stretch rounded-md"})})}),r&&o.jsx(F,{variant:"tiny",color:"light",className:"text-center",children:d})]}):null}const Spn=({event:e,onWscData:t,showWsc:n,league:r})=>{const{$t:s}=Z(),{isMobileStyle:a}=Ce(),{gameVenue:i,setCelcius:l,weatherCondition:c,degrees:u,team1:d,team2:m,weekLabel:p,whereToWatch:h,gameLocation:g,roundName:y}=KNe({event:e,league:r}),x=[d?.winner?d.color:"transparent","transparent",m?.winner?m.color:"transparent"],v=Vx(e.event);return o.jsxs(un,{className:"overflow-hidden",children:[!v&&o.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-r opacity-10 dark:opacity-20",style:{background:`linear-gradient(100deg, ${x.join(" , ")})`}}),o.jsx(XNe,{title:s(v?{defaultMessage:"LIVE",id:"UqyNCCygYW"}:{defaultMessage:"Game Summary",id:"+eeGQlcxzW"}),gameVenue:i,roundName:y,setCelcius:l,weatherCondition:c??"",degrees:u,weekLabel:p,whereToWatch:h,gameLocation:g,isFinal:dp(e.event)}),o.jsx(H,{className:"mx-md border-t"}),o.jsx(H,{children:o.jsxs("div",{className:"gap-xs p-md md:gap-md relative grid grid-cols-[1fr,1fr,1fr] overflow-hidden md:grid-cols-[1fr,3fr,1fr]",children:[o.jsxs("div",{className:"gap-md flex min-w-0 flex-col items-center justify-center md:flex-row",children:[o.jsx("div",{className:"block md:hidden",children:d&&o.jsx(qS,{team:d,isLive:v,position:"left"})}),d&&o.jsx(pk,{team:d,metadata:rk(d.record),hasPosession:v&&d.teamId===e.event.eventStatus.teamPossessionId,league:r,position:"left"})]}),o.jsxs("div",{className:"gap-sm flex items-center md:gap-0",children:[o.jsx("div",{className:"flex-1 items-center justify-start md:flex",children:d&&o.jsx(qS,{team:d,isLive:v,position:"left"})}),o.jsx(YNe,{event:e.event,final:dp(e.event),isLive:v}),o.jsx("div",{className:"flex-1 items-center justify-end md:flex",children:m&&o.jsx(qS,{team:m,isLive:v,position:"right"})})]}),o.jsxs("div",{className:"gap-md flex min-w-0 flex-col items-center justify-center md:flex-row",children:[o.jsx("div",{className:"block md:hidden",children:m&&o.jsx(qS,{team:m,isLive:v,position:"right"})}),m&&o.jsx(pk,{team:m,metadata:rk(m.record),hasPosession:v&&m.teamId===e.event.eventStatus.teamPossessionId,league:r,position:"right"})]})]})}),o.jsx(H,{className:"mx-md border-t"}),o.jsxs("div",{className:V("md:pb-md grid",{"grid-cols-[65%,35%]":n}),children:[o.jsx("div",{className:"py-sm md:p-md flex w-full flex-1 items-center justify-center md:pb-0",children:o.jsx(SDt,{event:e,isLive:v})}),n&&o.jsx(t4e,{wsc:e.wsc,onWscData:t,wscTitle:s({defaultMessage:"Game Highlights",id:"nX0XrAiLIA"}),includeLabel:!a})]}),v&&o.jsx(JNe,{apns:e.apns})]})},qS=({team:e,isLive:t,position:n})=>o.jsxs(F,{variant:"page-title",color:e.winner||t?void 0:"light",className:"relative",children:[o.jsx(JL,{value:String(e.score),digitClassName:"font-mono"}),e.winner&&!t&&o.jsx(t7,{className:V("absolute top-1/2 -translate-y-1/2",{"-left-sm -translate-x-full rotate-180":n==="right","-right-sm translate-x-full":n==="left"})})]}),t7=({className:e})=>o.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),n4e="text-right ml-4",r4e="text-left",oR=({children:e,right:t,light:n,bold:r})=>o.jsx(H,{as:"th",className:"border-b border-dashed",children:o.jsx(F,{variant:"smallCaps",color:n?"light":void 0,className:V("pb-sm",{[n4e]:t,[r4e]:!t}),children:o.jsx("span",{className:r?"font-semibold":"",children:e})})}),lR=({children:e,right:t,bold:n,light:r,className:s})=>o.jsx("td",{children:o.jsx(F,{variant:n?"smallBold":"small",color:r?"light":void 0,className:V("pt-xs",{[n4e]:t,[r4e]:!t},s),children:e})});function SDt({event:e,isLive:t}){const{$t:n}=Z(),{locale:r}=Z(),{isMobileStyle:s}=Ce(),a=e.event.scheduledPeriods??4,i=e.event.eventStatus.period&&e.event.eventStatus.period>a?e.event.eventStatus.period:a,l=Aw(e.event.teams);return o.jsxs("table",{className:"p-md w-full border-separate",cellPadding:0,cellSpacing:0,children:[o.jsx("colgroup",{children:o.jsx("col",{className:"w-full"})}),o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx(oR,{light:!0,children:n({defaultMessage:"Team",id:"wsUmh9XWBm"})}),Array.from({length:i}).map((c,u)=>o.jsx(oR,{right:!0,light:!0,children:u<a?(u+1).toLocaleString(r):u===a?"OT":`${u-a+1}OT`},u)),o.jsx(oR,{right:!0,bold:!0,children:n({defaultMessage:"T",id:"sjlqAC/nrs"})})]})}),o.jsx("tbody",{children:l.map(({location:c,nickname:u,teamId:d,abbreviation:m,score:p,linescores:h})=>{const g=Object.fromEntries(h.map(({period:y,score:x})=>[y,x]));return o.jsxs("tr",{children:[o.jsxs(lR,{bold:!0,className:"relative",children:[t&&d===e.event.eventStatus.teamPossessionId&&o.jsx("span",{className:"-translate-x-xs pt-xs absolute right-full top-0 flex h-[1lh] items-center",children:o.jsx("span",{className:"size-xs bg-inverse inline-flex translate-y-px rounded-full"})}),o.jsx("span",{className:s?"uppercase":"",children:s?m:`${c} ${u}`})]}),Array.from({length:i}).map((y,x)=>o.jsx(lR,{right:!0,light:!0,children:o.jsx("span",{className:g[x+1]!==void 0?"":"opacity-50",children:g[x+1]??""})},x)),o.jsx(lR,{bold:!0,right:!0,children:p??""})]},u)})})]})}const s4e=e=>!!e.extra.team_1_competitor_types?.map(n=>n.type).includes("team");function Epn({event:e}){const t=e.event.extra,n=s4e(e.event),r=e.event.status==="live";return o.jsx("div",{className:"px-md flex w-full flex-col pb-3 pt-2",children:o.jsxs("div",{className:"gap-lg relative flex w-full items-center",children:[o.jsx("div",{className:"gap-sm flex flex-1",children:o.jsxs("div",{className:"flex flex-1 flex-col sm:gap-3",children:[o.jsx(coe,{team:e.event.team_1,isDoubles:!!n,teamCompetitorTypes:t?.team_1_competitor_types,brands:e.brands}),o.jsx("div",{className:"bg-subtle my-1.5 h-px w-full sm:hidden"}),o.jsx(coe,{team:e.event.team_2,isDoubles:!!n,teamCompetitorTypes:t?.team_2_competitor_types,brands:e.brands})]})}),o.jsx("div",{className:"flex h-full items-center justify-end",children:o.jsxs("div",{className:"gap-x-md relative grid h-full auto-cols-auto grid-flow-col",children:[o.jsx(yNe,{event:e.event,team1:e.event.team_1,team2:e.event.team_2,isLive:r}),(e.event.team_1.won||e.event.team_2.won)&&o.jsx(TDt,{event:e})]})})]})})}const loe=(e,t={includeFirstInitial:!0})=>{const n=e.trim().split(/\s+/);if(n.length===0)return"";const[r,...s]=n,a=t.includeFirstInitial&&r?r[0]?.toUpperCase()+".":"";return s.length>0?`${a}${a?" ":""}${s.join(" ")}`:a.trim()},EDt=(e,t={includeFirstInitial:!0})=>{try{const n=e.split(" / ");if(n.length!==2)return e;const[r="",s=""]=n;return`${loe(r,t)} / ${loe(s,t)}`}catch{return e}};function coe({team:e,isDoubles:t,teamCompetitorTypes:n,brands:r}){const{isMobileStyle:s}=Ce(),a=e.emphasis,i=t?o.jsx(o.Fragment,{children:EDt(e.title??"",{includeFirstInitial:!0})}):s?e.abbreviation??e.title:e.title;return o.jsx("div",{className:"relative flex items-center",children:o.jsxs("div",{className:V("relative flex items-center",{"gap-md":t,"gap-sm":!t}),children:[t?o.jsx(kDt,{competitorTypes:n,brands:r}):e.img&&e.color&&o.jsx(Ls,{logo:e.img,color:e.color,size:"small"}),e.seed&&o.jsx(F,{variant:"tinyRegular",color:"light",children:e.seed}),o.jsxs(F,{variant:"base",className:"font-regular max-sm:text-sm",children:[i,a&&" "]})]})})}const MDt="polygon(0 0, 100% 0, 100% calc(100% - 7px), calc(100% - 12px) calc(100% - 7px), calc(100% - 12px) 100%, 0 100%)",kDt=({competitorTypes:e,brands:t,className:n,topFlagClass:r})=>{const s=e?.filter(i=>i.type==="player").map(i=>t.find(c=>c.teamId===i.id));if(!s)return null;const a='after:content-[" "] after:absolute after:inset-0 after:border after:border-black/10';return o.jsxs("div",{className:V("-translate-y-three grid grid-cols-1 grid-rows-1 place-items-center",n),children:[o.jsx(Ls,{logo:s[0]?.logo??"",color:s[0]?.color??"",size:"tiny",className:V(a,"relative col-start-1 row-start-1 !h-auto"),style:{clipPath:MDt}}),o.jsx(Ls,{logo:s[1]?.logo??"",color:s[1]?.color??"",size:"tiny",className:V(a,"col-start-1 row-start-1 !h-auto translate-x-[6px] translate-y-[6px]",r)})]})},TDt=({event:e})=>o.jsxs("div",{className:"-right-md gap-sm absolute grid h-full grid-rows-2",children:[o.jsx("div",{className:"flex items-center",children:e.event.team_1.won&&o.jsx(t7,{className:"shrink-0"})}),o.jsx("div",{className:"flex items-center",children:e.event.team_2.won&&o.jsx(t7,{className:"shrink-0"})})]}),a4e=({event:e,subtitles:t,headshots:n})=>{const{locale:r}=Z(),s=f.useMemo(()=>{if(!e.datetime)return null;const m=new Date(e.datetime);return isNaN(m.getTime())?null:m.toLocaleTimeString(r,{hour:"numeric",minute:"numeric",hour12:!0})},[e.datetime,r]),a=e.status==="live",i=e.status==="final",l=e.datetime&&new Date(e.datetime)>new Date,c=e.team_1.won||e.team_2.won,{isMobileStyle:u}=Ce(),d=s4e(e);return o.jsxs(H,{className:"group relative",children:[o.jsx(H,{className:"bg-subtler duration-quick absolute inset-0 opacity-0 transition-opacity group-hover:opacity-50",variant:"subtle"}),o.jsxs(Xu,{href:`/sports/atp/events/${e.id}`,className:V("p-md gap-y-md relative grid w-full flex-col",{"gap-y-sm":u}),children:[o.jsxs("div",{className:"gap-md flex items-center justify-between",children:[o.jsx(F,{variant:u?"tinyRegular":"small",color:"light",children:e.title[0]}),l?o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(F,{variant:u?"tinyRegular":"small",color:"light",children:s}),o.jsx(QTe,{className:"-mr-0.5"})]}):a?o.jsx(Ux,{className:"-mr-0.5",includeDot:!0}):i&&o.jsx(iN,{className:"-mr-0.5"})]}),o.jsxs(H,{className:"gap-lg flex w-full items-center",children:[o.jsx("div",{className:"gap-sm flex flex-1",children:o.jsxs("div",{className:V("flex flex-1 flex-col gap-[12px]",{"gap-sm":u}),children:[o.jsx(uoe,{team:e.team_1,headshotImageUrl:n?.team1??null,anyWinner:c,subtitle:t?.team1,isDoubles:d,serving:e.team_1.emphasis,isLive:a}),o.jsx(uoe,{team:e.team_2,headshotImageUrl:n?.team2??null,anyWinner:c,subtitle:t?.team2,isDoubles:d,serving:e.team_2.emphasis,isLive:a})]})}),o.jsx("div",{className:"flex h-full items-center justify-end",children:o.jsx(yNe,{event:e,team1:e.team_1,team2:e.team_2,isLive:a})})]})]})]})},uoe=({team:e,headshotImageUrl:t,anyWinner:n,subtitle:r,isDoubles:s,serving:a,isLive:i})=>{const l=e.won,{isMobileStyle:c}=Ce();return o.jsxs("div",{className:V("gap-sm flex items-center",{"opacity-30 grayscale":n&&!l}),children:[o.jsx(zLt,{headshotImageUrl:t??void 0,flagUrl:e.img??void 0,name:e.title??"",isCompositeFlag:s}),o.jsxs("div",{children:[o.jsxs(F,{variant:c?"smallBold":"baseSemi",className:"gap-xs flex items-center",children:[e.title,l&&o.jsx(H,{variant:"superLight",className:"p-xs ml-auto inline-flex aspect-square rounded-full",children:o.jsx(Wk,{size:12,className:"text-super"})}),a&&i&&o.jsx(le,{icon:X7e,size:14,className:"text-super"})]}),typeof r=="string"?o.jsx(F,{variant:"micro",color:"light",className:"-mt-0.5",children:r}):r]})]})},doe=e=>e.toISOString().split("T")[0];function NDt({events:e,players:t}){const n=f.useMemo(()=>e.reduce((l,c)=>{let u="";if(c.datetime){const d=new Date(c.datetime),m=d.getFullYear(),p=String(d.getMonth()+1).padStart(2,"0"),h=String(d.getDate()).padStart(2,"0");u=`${m}-${p}-${h}`}return l[u]=l[u]||[],l[u]?.push(c),l},{}),[e]),r=f.useMemo(()=>{const l=new Date,c=doe(l),u=Object.keys(n);return u.length===0?c:u.reduce((d,m)=>{const p=new Date(m+"T00:00:00"),h=new Date(d+"T00:00:00"),g=Math.abs(p.getTime()-l.getTime()),y=Math.abs(h.getTime()-l.getTime());return g<y?m:d})},[n]),[s,a]=f.useState(new Date(r+"T00:00:00")),i=n[doe(s)??""];return!i||i?.length===0?null:o.jsxs(H,{className:"mt-lg",children:[o.jsx(B7t,{selectedDate:s,setSelectedDate:a,eventsByDay:n}),o.jsx(un,{className:"overflow-hidden",children:o.jsx("div",{className:"grid",children:o.jsx(jDt,{events:i??[],players:t})})})]})}const jDt=({events:e,players:t})=>{const{locale:n}=Z(),r=f.useCallback(a=>{if(!a)return null;const i=new Date(a);if(isNaN(i.getTime()))return null;const l=new Date,c=i.getFullYear()!==l.getFullYear();return i.toLocaleDateString(n,{month:"short",day:"numeric",...c?{year:"numeric"}:{}})},[n]),{isMobileStyle:s}=Ce();return o.jsxs("div",{className:"grid",children:[o.jsxs(H,{className:"px-md py-sm gap-sm flex w-full flex-row items-center justify-between",variant:"subtler",children:[o.jsx(F,{variant:s?"tiny":"smallBold",children:r(e[0]?.datetime)}),o.jsx(F,{variant:s?"tinyRegular":"small",color:"light",children:e[0]?.title[1]})]}),o.jsx("div",{className:"grid divide-y",children:e.map(a=>o.jsx(ADt,{event:a,players:t},a.id))})]})},ADt=({event:e,players:t})=>{const{europe:n,world:r}=Uw(),s={team1:o.jsx(F,{variant:"micro",color:"light",className:"-mt-0.5",style:{color:n},children:"Team Europe"}),team2:o.jsx(F,{variant:"micro",color:"light",className:"-mt-0.5",style:{color:r},children:"Team World"})},a=t.world.concat(t.europe),i=a.find(u=>u.teamId===e.team_1.id),l=a.find(u=>u.teamId===e.team_2.id),c={team1:i?.logo_secondary??null,team2:l?.logo_secondary??null};return o.jsx(a4e,{event:e,subtitles:s,headshots:c})},IDt=async(e,t)=>{if(!t)return null;const n=await ae.POST("/rest/sports/{league}/widget","sports-widget",{body:t,params:{path:{league:e}}});if(n?.error)throw new Ie("API_CLIENTS_ERROR",{cause:n.error,details:t});return n.data},RDt=({data:e})=>{const{data:t}=We({...Hb,queryKey:["/sports/widget",e.events.map(r=>r.id).join(",")],queryFn:()=>IDt(e.league,e.debug_fn_args),placeholderData:mf,refetchInterval:3e4}),n=t||e;return n?.object!==e.object?null:o.jsx(aNe,{canonicalPageLink:n?.canonical_pages?.[0]?.url_web,children:o.jsx("div",{className:"divide-y overflow-hidden",children:n?.events?.map(r=>o.jsx(a4e,{event:r},r.id))})})},gv=R.memo(({data:e})=>Qr(e).with({object:"SportsEventsWidget"},t=>t.league==="atp"||t.league==="wta"?o.jsx(RDt,{data:t}):o.jsx(dLt,{widget:t})).with({object:"SportsStandingsWidget"},t=>o.jsx(HLt,{widgetData:t})).with({object:"SportsIndvScheduleWidget"},t=>o.jsx(ILt,{widgetData:t})).with({object:"SportsIndvEventsWidget"},t=>o.jsx(NLt,{widgetData:t})).exhaustive());gv.displayName="SportsWidget";function PDt({csvString:e,filename:t="perplexity.csv"}){if(typeof window>"u")throw new Error("Attempting to download a CSV file in a server context.");try{const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(n){throw n}}function i4e(){return f.useCallback(e=>{PDt(e)},[])}var cR,foe;function ODt(){if(foe)return cR;foe=1;var e=typeof Element<"u",t=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,i){if(a===i)return!0;if(a&&i&&typeof a=="object"&&typeof i=="object"){if(a.constructor!==i.constructor)return!1;var l,c,u;if(Array.isArray(a)){if(l=a.length,l!=i.length)return!1;for(c=l;c--!==0;)if(!s(a[c],i[c]))return!1;return!0}var d;if(t&&a instanceof Map&&i instanceof Map){if(a.size!==i.size)return!1;for(d=a.entries();!(c=d.next()).done;)if(!i.has(c.value[0]))return!1;for(d=a.entries();!(c=d.next()).done;)if(!s(c.value[1],i.get(c.value[0])))return!1;return!0}if(n&&a instanceof Set&&i instanceof Set){if(a.size!==i.size)return!1;for(d=a.entries();!(c=d.next()).done;)if(!i.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(i)){if(l=a.length,l!=i.length)return!1;for(c=l;c--!==0;)if(a[c]!==i[c])return!1;return!0}if(a.constructor===RegExp)return a.source===i.source&&a.flags===i.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof i.valueOf=="function")return a.valueOf()===i.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof i.toString=="function")return a.toString()===i.toString();if(u=Object.keys(a),l=u.length,l!==Object.keys(i).length)return!1;for(c=l;c--!==0;)if(!Object.prototype.hasOwnProperty.call(i,u[c]))return!1;if(e&&a instanceof Element)return!1;for(c=l;c--!==0;)if(!((u[c]==="_owner"||u[c]==="__v"||u[c]==="__o")&&a.$$typeof)&&!s(a[u[c]],i[u[c]]))return!1;return!0}return a!==a&&i!==i}return cR=function(i,l){try{return s(i,l)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},cR}var LDt=ODt();const DDt=Ka(LDt),o4e=R.memo(({domain:e,url:t,suffix:n,overflowCount:r,...s})=>{if(!t&&!e)return null;const a=e||I_(t).replace(/^[a-z]{1,2}\./i,""),i=n?`${a}.${n}`:a,l=r&&r>0?o.jsxs("span",{className:"opacity-50",children:["+",r]}):void 0;return o.jsx(hc,{label:i,accessory:l,truncate:!0,...s})});o4e.displayName="CitationDomainBubble";const l4e=R.memo(function({href:t,overflowCount:n,getAttachmentUrl:r,onCitationClick:s,...a}){const[i,l]=f.useState(!1),[c,u]=f.useState(null),d=f.useCallback(async y=>{if(s?.(y),y?.defaultPrevented||!t||!r)return;const x=await r(t);hi(t)&&(u(x),l(!0))},[s,r,t]),m=n&&n>0?o.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0,p=f.useCallback(()=>l(!1),[]),h=f.useMemo(()=>({src:c??void 0}),[c]);return P_(t||"")?o.jsx(hc,{accessory:m,icon:Nue,className:"cursor-pointer",truncate:!0,onClick:d,...a}):o.jsxs(o.Fragment,{children:[o.jsx(hc,{accessory:m,icon:Fk,className:"cursor-pointer",truncate:!0,onClick:d,...a}),c&&o.jsx(px,{isOpen:i,onClose:p,imgProps:h})]})});l4e.displayName="FileCitationBubble";const c4e=R.memo(({children:e,webResults:t,citationGroup:n,contentProps:r,hideHoverCard:s=!1,trackEvent:a,getAttachmentUrl:i,openMemorySearchHistoryModal:l,onCitationClick:c,forceExternalHandler:u})=>{const[d,m]=f.useState(!1),[p,h]=f.useState(!1),[g,y]=f.useState(null),[x,v]=f.useState(!1),[b,_]=f.useState(null),w=Gy(),C=Z(),{isMobileStyle:S}=Ce(),E=f.useCallback(()=>v(!1),[]),M=f.useMemo(()=>({src:b??void 0}),[b]),k=f.useMemo(()=>t.every(O=>O.is_conversation_history),[t]),N=f.useCallback(()=>{if(k)return C.formatMessage({defaultMessage:"Library",id:"StcK672jB9"});switch(n.category){case"memory":return C.formatMessage({defaultMessage:"Memory",id:"dVx3yznM2C"});case"attachment":return C.formatMessage({defaultMessage:"Attachments",id:"Vlx13nOMtX"});case"youtube":return C.formatMessage({defaultMessage:"YouTube",id:"zuA3BgDC6u"});default:return C.formatMessage({defaultMessage:"Sources",id:"fhwTpAcBLC"})}},[n.category,k,C]),P=f.useCallback(O=>async A=>{if(A.preventDefault(),O.is_conversation_history||O.is_memory)if(c){c(O,A);return}else if(l){l(O);return}else{console.warn("Memory/conversation history modal handler not provided");return}if(O.url?Cp(O.url):null){y(O),h(!0),m(!1);return}const T=O.is_attachment||!1,I=hi(O.url);if(T&&I&&i){const U=await i(O.url);_(U),v(!0),m(!1);return}if(T&&dx(O)&&i){const U=await i(O.url);window.open(U,"_blank");return}if(a&&O.url&&a("click citation",{source:"grouped_hovercard",citation_url:O.url}),u&&c){c(O,A);return}ZB(O)&&window.open(O.url,"_blank")},[c,l,a,i,u]),L=f.useCallback(O=>{const A=O.is_memory?o.jsx(le,{icon:sc,size:"sm"}):O.is_conversation_history?o.jsx(le,{icon:bp,size:"sm"}):o.jsx(eo.Icon,{url:O.url,isAttachment:O.is_attachment||!1,connectionType:O.meta_data?.connection_type}),j=O.meta_data?.connection_type,T=j==="WILEY"?"Wiley":j||O.is_memory||O.is_conversation_history?O.name:void 0,I=O.is_memory?O.snippet:O.name;return o.jsxs("div",{className:"hover:bg-subtler relative flex min-w-0 cursor-pointer select-none items-start gap-3 rounded-lg px-2 py-1.5 align-top",children:[o.jsx("span",{className:"mt-two shrink-0",children:A}),o.jsxs("span",{className:V("flex min-w-0 select-none",{"gap-two flex-col items-start":O.is_memory,"gap-xs items-center":!O.is_memory}),children:[I&&o.jsx(F,{className:V("min-w-0 shrink",{"truncate text-ellipsis":!O.is_memory},{"line-clamp-2":O.is_memory}),variant:"small",as:"span",children:I}),!k&&o.jsx(F,{variant:"tinyMono",color:"light",className:"shrink-0",children:o.jsx(eo.Source,{url:O.url,source:T,isAttachment:O.is_attachment||!1,connectionType:O.meta_data?.connection_type,isMemory:O.is_memory||!1,isConversationHistory:O.is_conversation_history||!1})})]})]})},[k]);return o.jsxs(o.Fragment,{children:[g&&g.url&&o.jsx(U_,{isOpen:p,name:g.name,setisOpen:h,url:g.url}),b&&o.jsx(px,{isOpen:x,onClose:E,imgProps:M}),o.jsxs(zH,{onOpenChange:O=>{m(s?!1:O)},open:d,openDelay:0,closeDelay:S?0:200,children:[o.jsx(GH,{asChild:!0,onPointerDown:O=>{(S||O.pointerType==="touch")&&m(!0)},children:e}),o.jsx(qH,{children:o.jsx(KH,{className:V({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!w}),side:"bottom",sideOffset:8,collisionPadding:S?8:10,align:S?"center":"start",...r,children:o.jsxs("div",{className:V("bg-base dark:border-subtler rounded-xl border pt-3 shadow-lg",{"w-96":!S,"w-[calc(100vw-16px)]":S}),children:[o.jsxs("div",{className:"gap-two flex px-5 pb-2 pt-1",children:[o.jsx(F,{variant:"tinyMono",children:N()}),o.jsx(F,{variant:"tinyMono",as:"span",color:"light",className:"mx-two",children:""}),o.jsx(F,{variant:"tinyMono",color:"light",children:n.totalCount||t.length})]}),o.jsx("div",{className:"max-h-60 overflow-y-auto px-3 pb-3 [scrollbar-gutter:stable]",children:o.jsx("div",{className:"space-y-px",children:t.map((O,A)=>o.jsx(Ye,{className:"block",href:O.url||"#",target:"_blank",rel:"noopener nofollow",onClick:P(O),children:L(O)},O.url||A))})})]})})})]})]})});c4e.displayName="GroupedCitationHoverCard";const u4e=R.memo(({ytID:e,timestamp:t,overflowCount:n,...r})=>{const[s,a]=f.useState(!1),i=f.useCallback(()=>a(!0),[]),l=n&&n>0?o.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0;return o.jsxs(o.Fragment,{children:[o.jsx(hc,{label:"youtube",accessory:l,icon:Zue,onClick:i,className:"cursor-pointer",...r}),e&&o.jsx(U_,{url:`https://www.youtube.com/watch?v=${e}`,name:"",isOpen:s,setisOpen:a,timestamp:t})]})});u4e.displayName="YoutubeCitationBubble";const d4e="_entity_chip",n7="pplx-entity-id";function FDt(e){const t=e.match(/^pplx:\/\/entity_chip\/(?<id>.+)$/);if(!(!t||!t.groups?.id))return t.groups.id}var ci;(function(e){e.YOUTUBE="youtube",e.FILE="file",e.MEMORY="memory",e.CONVERSATION_HISTORY="conversation_history",e.WEB="web",e.NUMBERED="numbered"})(ci||(ci={}));function UDt(e){if(e){if(e.is_memory)return sc;if(e.is_conversation_history)return bp}}function BDt(e){const{ytID:t,isMobileStyle:n,isFile:r,isMemory:s,isConversationHistory:a,enableCitationGrouping:i}=e;return t&&!n?ci.YOUTUBE:r?ci.FILE:i?s?ci.MEMORY:a?ci.CONVERSATION_HISTORY:ci.WEB:ci.NUMBERED}function VDt(e){const t=e.indexOf("&t=");return t!==-1?e.substring(t+3):void 0}function $Dt({count:e}){return!e||e<=0?null:o.jsxs("span",{className:"pl-two opacity-50",children:["+",e]})}const XH=R.memo(e=>{const{str:t,href:n,className:r,trackEvent:s,isFile:a,isDownloadable:i,citationSize:l,onCitationClick:c,getAttachmentUrl:u,isMemory:d,isConversationHistory:m,citationGroup:p,enableCitationGrouping:h,citationDomain:g,fileName:y,webResult:x,ref:v,forceExternalHandler:b,..._}=e,{isMobileStyle:w}=Ce(),C=Cm.test(t),S=f.useCallback(()=>{s?.("click citation",{source:"inline",citation_url:n})},[n,s]),E=f.useMemo(()=>{const U=p?.overflowCount;return!U||U<=0?null:o.jsx($Dt,{count:U})},[p?.overflowCount]);if(!C)return o.jsx("span",{children:t});const M=VDt(n),k=Cp(n),N=t.replace(/\[|\]|,.*$/g,""),L=!!(n&&!d&&!m&&(!(k||i)||w)),O=BDt({ytID:k,isMobileStyle:w,isFile:a,isMemory:d,isConversationHistory:m,enableCitationGrouping:h}),A=h&&p&&p.citations.length>1,j=w&&A,T=!L||j||b?"onClick":"external";let I;switch(O){case ci.YOUTUBE:I=k&&o.jsx(u4e,{...!h&&{label:N},ytID:k,overflowCount:p?.overflowCount??0,timestamp:M,size:l});break;case ci.FILE:I=o.jsx(l4e,{label:h?y??N:N,overflowCount:p?.overflowCount??0,size:l,href:n,getAttachmentUrl:i?u:void 0,onCitationClick:c});break;case ci.NUMBERED:{const U=UDt(x);I=U?o.jsx(hc,{label:N,icon:U,size:l,onClick:c,href:n,linkBehavior:T,trackEvent:s}):o.jsx(dN,{label:N,size:l,onClick:c,href:n,linkBehavior:T,trackEvent:s});break}case ci.MEMORY:I=o.jsx(hc,{label:x?.name.toLocaleLowerCase(),icon:sc,accessory:E,size:l,truncate:!0,onClick:c,linkBehavior:"onClick"});break;case ci.CONVERSATION_HISTORY:I=o.jsx(hc,{label:"library",icon:bp,accessory:E,size:l,truncate:!1,onClick:c,linkBehavior:"onClick"});break;case ci.WEB:default:I=o.jsx(o4e,{domain:g,url:n,overflowCount:p?.overflowCount??0,size:l,href:n,linkBehavior:T,trackEvent:s,onClick:j||b?c:S})}return o.jsx("span",{className:V(r,"citation inline"),ref:v,..._,children:I})});XH.displayName="MdStringToLink";const WDt=function(t){const{ref:n,...r}=t,{anchor:s,className:a,...i}=r,l=d=>{const m=document.getElementById(d);m&&m.scrollIntoView({behavior:"smooth"})},c=s.replace(/\[|\]/g,""),u=f.useCallback(()=>l(`#search${s}`),[s]);return o.jsx(Ye,{href:`#search${s}`,onClick:u,className:a,ref:n,...i,children:o.jsx(dN,{label:c})})},HDt=e=>{const{hideHoverCard:t=!1,trackEvent:n,citationSize:r,onCitationClick:s,getAttachmentUrl:a,enableCitationGrouping:i=!1,webResults:l=[],EntityChipComponent:c,inlineTokenAnnotationsLookup:u,forceExternalHandler:d}=e;return R.memo(p=>{const{className:h,href:g,title:y,children:x,target:v="_blank",node:b,ref:_,...w}=p,C=b?.data?.webResult,S=C?.is_attachment??!1,E=b?.data?.webResultCitation,M=C?.is_memory??!1,k=C?.is_conversation_history??!1,{$t:N}=Z(),P=i&&b?.data?b.data.citationGroup:void 0,{isMobileStyle:L}=Ce(),O=f.useCallback(D=>{if(P&&P.citations.length>1&&L){D?.preventDefault();return}if(i&&P&&P.citations.length>0&&(C?.is_memory||C?.is_conversation_history)){const z=P.citations[0],$=l?.[z-1];$&&s&&s($,D)}else C&&s&&s(C,D)},[C,P,L]),A=f.useMemo(()=>{if(!b||!u||!(n7 in b.properties))return;const D=b.properties[n7];if(typeof D!="string")return;const W=u[D];if(W&&W.annotation_type===LY.FINANCE){const z=W.data;return z?.symbol?{id:W.id,annotation_type:W.annotation_type,symbol:z.symbol,quoteUrl:z.quote_url||""}:void 0}},[b]),j=f.useCallback(()=>{n&&A&&n("click entity chip",{type:A.annotation_type,symbol:A.symbol})},[A]),T=f.useMemo(()=>({side:"bottom"}),[]),I=f.useMemo(()=>C?{onClick(D){n&&n("click citation",{source:"inline hoverCard",citation_url:C.url}),O(D)}}:void 0,[C,O]),U=f.useMemo(()=>({color:"light"}),[]);let B;switch(y){case"_citation":{if(P?.isHidden)return null;B=o.jsx(XH,{isMemory:M,isConversationHistory:k,onCitationClick:O,className:h,str:R.Children.toArray(x).join(""),href:g,rel:"nofollow noopener",trackEvent:n,isFile:S,isDownloadable:C?dx(C):!1,citationSize:r,getAttachmentUrl:a,citationGroup:P,enableCitationGrouping:i,citationDomain:C?.meta_data?.citation_domain_name,fileName:C?.name,webResult:C,ref:_,forceExternalHandler:d});break}case"_anchor_citation":{B=o.jsx(WDt,{anchor:R.Children.toArray(x).join(""),className:h,ref:_,...w});break}case d4e:return!A||!c?null:o.jsx(c,{type:LY.FINANCE,data:A,className:h,onClick:j,ref:_});default:B=o.jsx(Ye,{href:g,target:v,title:y,rel:"nofollow noopener",className:V(h,"hover:text-super hover:decoration-super break-words underline decoration-from-font underline-offset-1 transition-all duration-300"),ref:_,...w,children:x})}if(C){if(i&&P&&P.citations.length>1){const W=P.citations.map(z=>l[z-1]).filter(z=>z!==void 0);return o.jsx(c4e,{webResults:W,citationGroup:P,hideHoverCard:t,trackEvent:n,getAttachmentUrl:a,onCitationClick:s,contentProps:T,forceExternalHandler:d,children:B})}return o.jsx(Fw,{hideHoverCard:t,contentProps:T,linkProps:I,result:C,trackEvent:n,timestampComponent:g5.isRecentlyTrending(C)?o.jsx(h5,{recentlyUpdatedLabel:N({defaultMessage:"Just now",description:"Label for recently updated content",id:"FlgDFQFpF1"}),timestamp:C.meta_data?.published_date,timestampProps:U,children:"Updated"}):null,webResultCitation:E,getAttachmentUrl:a,children:B})}return B},DDt)},f4e=R.memo(({status:e})=>o.jsx(F,{as:"span",variant:"smallBold",color:e?"super":"light",children:o.jsx(le,{icon:e?Ar:It,size:"md"})}));f4e.displayName="BoolCell";const m4e=R.memo(({url:e})=>o.jsx(Ye,{href:e,target:"_blank",rel:"noopener",className:"top-xs relative inline-block transition-opacity duration-300 hover:opacity-50",children:o.jsx(eo,{color:"light",variant:"tiny",url:e,isAttachment:!1})}));m4e.displayName="LinkCell";const Y2=R.memo(({text:e})=>o.jsx(F,{as:"span",variant:"tiny",className:"text-pretty break-words font-normal",children:e}));Y2.displayName="TextCell";const fN=function(e){if(e==null)return KDt;if(typeof e=="function")return mN(e);if(typeof e=="object")return Array.isArray(e)?zDt(e):GDt(e);if(typeof e=="string")return qDt(e);throw new Error("Expected function, string, or object as test")};function zDt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=fN(e[n]);return mN(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function GDt(e){const t=e;return mN(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function qDt(e){return mN(t);function t(n){return n&&n.type===e}}function mN(e){return t;function t(n,r,s){return!!(YDt(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function KDt(){return!0}function YDt(e){return e!==null&&typeof e=="object"&&"type"in e}const p4e=[],fp=!0,r7=!1,Wa="skip";function h4e(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=fN(s),i=r?-1:1;l(e,void 0,[])();function l(c,u,d){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const h=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})}return p;function p(){let h=p4e,g,y,x;if((!t||a(c,u,d[d.length-1]||void 0))&&(h=QDt(n(c,d)),h[0]===r7))return h;if("children"in c&&c.children){const v=c;if(v.children&&h[0]!==Wa)for(y=(r?v.children.length:-1)+i,x=d.concat(v);y>-1&&y<v.children.length;){const b=v.children[y];if(g=l(b,y,x)(),g[0]===r7)return g;y=typeof g[1]=="number"?g[1]:y+i}}return h}}}function QDt(e){return Array.isArray(e)?e:typeof e=="number"?[fp,e]:e==null?p4e:[e]}function nr(e,t,n,r){let s,a,i;typeof t=="function"&&typeof n!="function"?(a=void 0,i=t,s=n):(a=t,i=n,s=r),h4e(e,a,l,s);function l(c,u){const d=u[u.length-1],m=d?d.children.indexOf(c):void 0;return i(c,m,d)}}class s7{static stringArrayToCSV(t){return t.map(this.escapeCSVString).join(",")}static escapeCSVString(t){return`"${t.replace(/"/g,'""')}"`}static tableCellToText(t){const n=[];let r="";return nr(t,[{type:"text"},{tagName:"br"},{tagName:"a"}],s=>{if(s.type==="element"&&s.tagName==="br"){n.push(`
`);return}s.type==="element"&&s.tagName==="a"&&s.properties?.href&&(r=String(s.properties.href)),s.type==="text"&&n.push(s.value.trim())}),r||n.join("")}static tableToCSV(t){if(t.tagName!=="table")throw new Error("Attempting to convert node of wrong tagName to CSV from 'table'");try{const n=[];let r="";return nr(t,{tagName:"thead"},s=>{const a=[];nr(s,{tagName:"th"},i=>{const l=this.tableCellToText(i);a.push(l)}),n.push(this.stringArrayToCSV(a)),r+=a.join("-").replace(/[^a-z0-9\\-]/gi,"")}),nr(t,{tagName:"tbody"},s=>{nr(s,{tagName:"tr"},a=>{const i=[];nr(a,{tagName:"td"},l=>{const c=this.tableCellToText(l);i.push(c)}),n.push(this.stringArrayToCSV(i))})}),{csvString:n.join(`
`),filename:r}}catch(n){throw new Error(`Error attempting to convert table node to CSV string: ${n}`)}}}const g4e=R.memo(({tableData:e,citationOffset:t})=>{const{$t:n}=Z(),{trackEvent:r}=je(),{data:s,column_metadata:a,search_results:i}=e,l=f.useMemo(()=>a.reduce((g,{name:y,display_name:x})=>(g[y]=x,g),{}),[a]),c=f.useMemo(()=>a.reduce((g,{name:y,display_format:x})=>(g[y]=x,g),{}),[a]),u=f.useCallback((g,y)=>g.value===null&&y.value===null?0:g.value===null?-1:y.value===null?1:typeof g.value=="string"?String(g.value).localeCompare(String(y.value)):Number(g.value)-Number(y.value),[]),d=f.useCallback(({data:g,id:y,...x})=>{const v=c[y],b=g[y]?.citation_index??null,_=b!==null?i[b]:null,w=_?.is_attachment??!1,C=g[y]?.value;let S=o.jsx(Y2,{text:String(C)});return v==="url"&&(S=o.jsx(m4e,{url:String(C)})),v==="boolean"&&(S=o.jsx(f4e,{status:!!C})),v==="long_text"&&(S=o.jsx(Y2,{text:String(C)})),v==="date"&&(S=o.jsx(Y2,{text:String(C)})),C===null?o.jsx("td",{...x,children:o.jsx(F,{variant:"tiny",color:"ultraLight",children:o.jsx(le,{icon:Hk,size:"xs"})})}):o.jsxs("td",{...x,children:[o.jsx("span",{children:S}),v!=="url"&&_&&_.url&&b!==null&&o.jsx(Fw,{result:_,children:o.jsx(XH,{str:`[${b+t+1}]`,href:_.url,isFile:w,isDownloadable:dx(_),className:V("citation ml-xs inline")})})]})},[i,c,t]),m=f.useMemo(()=>a.map(({name:g})=>({name:g,label:l[g],sortable:!0,resizable:!0})),[a,l]),p=i4e(),h=f.useCallback(()=>{const g=a.reduce((b,_)=>(b.push(_.name),b),[]).join("-"),y=a.map(({display_name:b})=>s7.escapeCSVString(b)).join(","),x=s.map(b=>a.map(({name:_})=>s7.escapeCSVString(String(b[_]?.value))).join(",")),v=[y,...x].join(`
`);return r("clicked download table as csv",{source:"widget"}),p({csvString:v,filename:g})},[a,s,p,r]);return o.jsx(Ho,{widgetType:"table",widgetName:"table",widgetSize:"full",children:o.jsxs(H,{variant:"subtler",className:"px-md pb-xs rounded-lg",children:[o.jsx(ONe,{data:s,columns:m,RowCell:d,compareFunction:u}),o.jsx(H,{className:"border-subtlest py-sm flex justify-end border-t",children:o.jsx(Te,{icon:vp,variant:"super",onClick:h,pill:!0,size:"tiny",text:n({defaultMessage:"Export CSV",id:"TE51b7zSWC"}),toolTip:n({defaultMessage:"Download Table as CSV",id:"X3dYB0f+/Q"})})})]})})});g4e.displayName="TableWidget";const y4e=f.memo(({children:e,defaultExpanded:t=!1,title:n})=>{const{$t:r}=Z(),[s,a]=f.useState(t),i=f.useCallback(()=>{a(c=>!c)},[]),l=f.useMemo(()=>s?Bn:Zn,[s]);return o.jsx(na,{className:"overflow-hidden",transition:{duration:.3,ease:an},children:o.jsxs("div",{children:[o.jsx(pe,{variant:"common",text:n??r({defaultMessage:"Advanced",id:"3Rx6Qo1x+1"}),onClick:i,size:"tiny",icon:l,noPadding:!0,extraCSS:"!bg-transparent hover:!bg-subtler"}),o.jsx(is,{children:s&&o.jsx("div",{className:"pt-2",children:e})})]})})});y4e.displayName="AutomationAdvancedSection";const XDt=[{value:"ONCE",label:"Once"},{value:"DAILY",label:"Daily"},{value:"WEEKLY",label:"Weekly"},{value:"WEEKDAYS",label:"Every weekday"},{value:"MONTHLY",label:"Monthly"},{value:"YEARLY",label:"Yearly"}],ZDt=[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"2",label:"Tuesday"},{value:"3",label:"Wednesday"},{value:"4",label:"Thursday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}],JDt=[...Array(31)].map((e,t)=>({value:String(t+1),label:String(t+1)})),eFt=[{value:"0",label:"January"},{value:"1",label:"February"},{value:"2",label:"March"},{value:"3",label:"April"},{value:"4",label:"May"},{value:"5",label:"June"},{value:"6",label:"July"},{value:"7",label:"August"},{value:"8",label:"September"},{value:"9",label:"October"},{value:"10",label:"November"},{value:"11",label:"December"}];var $t=function(){return $t=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},$t.apply(this,arguments)};function tFt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function x4e(e,t,n){for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Bw(e){return e.mode==="multiple"}function Vw(e){return e.mode==="range"}function pN(e){return e.mode==="single"}var nFt={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function rFt(e,t){return Hu(e,"LLLL y",t)}function sFt(e,t){return Hu(e,"d",t)}function aFt(e,t){return Hu(e,"LLLL",t)}function iFt(e){return"".concat(e)}function oFt(e,t){return Hu(e,"cccccc",t)}function lFt(e,t){return Hu(e,"yyyy",t)}var cFt=Object.freeze({__proto__:null,formatCaption:rFt,formatDay:sFt,formatMonthCaption:aFt,formatWeekNumber:iFt,formatWeekdayName:oFt,formatYearCaption:lFt}),uFt=function(e,t,n){return Hu(e,"do MMMM (EEEE)",n)},dFt=function(){return"Month: "},fFt=function(){return"Go to next month"},mFt=function(){return"Go to previous month"},pFt=function(e,t){return Hu(e,"cccc",t)},hFt=function(e){return"Week n. ".concat(e)},gFt=function(){return"Year: "},yFt=Object.freeze({__proto__:null,labelDay:uFt,labelMonthDropdown:dFt,labelNext:fFt,labelPrevious:mFt,labelWeekNumber:hFt,labelWeekday:pFt,labelYearDropdown:gFt});function xFt(){var e="buttons",t=nFt,n=Khe,r={},s={},a=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:cFt,labels:yFt,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:i,today:l,mode:"default"}}function vFt(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,a=e.fromDate,i=e.toDate;return r?a=vi(r):t&&(a=new Date(t,0,1)),s?i=O3(s):n&&(i=new Date(n,11,31)),{fromDate:a?Kd(a):void 0,toDate:i?Kd(i):void 0}}var v4e=f.createContext(void 0);function bFt(e){var t,n=e.initialProps,r=xFt(),s=vFt(n),a=s.fromDate,i=s.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!a||!i)&&(l="buttons");var c;(pN(n)||Bw(n)||Vw(n))&&(c=n.onSelect);var u=$t($t($t({},r),n),{captionLayout:l,classNames:$t($t({},r.classNames),n.classNames),components:$t({},n.components),formatters:$t($t({},r.formatters),n.formatters),fromDate:a,labels:$t($t({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:$t($t({},r.modifiers),n.modifiers),modifiersClassNames:$t($t({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:$t($t({},r.styles),n.styles),toDate:i});return R.createElement(v4e.Provider,{value:u},e.children)}function Mr(){var e=f.useContext(v4e);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function b4e(e){var t=Mr(),n=t.locale,r=t.classNames,s=t.styles,a=t.formatters.formatCaption;return R.createElement("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id},a(e.displayMonth,{locale:n}))}function _Ft(e){return R.createElement("svg",$t({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e),R.createElement("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"}))}function _4e(e){var t,n,r=e.onChange,s=e.value,a=e.children,i=e.caption,l=e.className,c=e.style,u=Mr(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:_Ft;return R.createElement("div",{className:l,style:c},R.createElement("span",{className:u.classNames.vhidden},e["aria-label"]),R.createElement("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r},a),R.createElement("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true"},i,R.createElement(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})))}function wFt(e){var t,n=Mr(),r=n.fromDate,s=n.toDate,a=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return R.createElement(R.Fragment,null);if(!s)return R.createElement(R.Fragment,null);var m=[];if(Zhe(r,s))for(var p=vi(r),h=r.getMonth();h<=s.getMonth();h++)m.push(dj(p,h));else for(var p=vi(new Date),h=0;h<=11;h++)m.push(dj(p,h));var g=function(x){var v=Number(x.target.value),b=dj(vi(e.displayMonth),v);e.onChange(b)},y=(t=u?.Dropdown)!==null&&t!==void 0?t:_4e;return R.createElement(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i})},m.map(function(x){return R.createElement("option",{key:x.getMonth(),value:x.getMonth()},l(x,{locale:i}))}))}function CFt(e){var t,n=e.displayMonth,r=Mr(),s=r.fromDate,a=r.toDate,i=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!s)return R.createElement(R.Fragment,null);if(!a)return R.createElement(R.Fragment,null);for(var h=s.getFullYear(),g=a.getFullYear(),y=h;y<=g;y++)p.push(bQ(oQe(new Date),y));var x=function(b){var _=bQ(vi(n),Number(b.target.value));e.onChange(_)},v=(t=u?.Dropdown)!==null&&t!==void 0?t:_4e;return R.createElement(v,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:d(n,{locale:i})},p.map(function(b){return R.createElement("option",{key:b.getFullYear(),value:b.getFullYear()},d(b,{locale:i}))}))}function SFt(e,t){var n=f.useState(e),r=n[0],s=n[1],a=t===void 0?r:t;return[a,s]}function EFt(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,a=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(a&&Kg(a,s)<0){var u=-1*(c-1);s=dl(a,u)}return i&&Kg(s,i)<0&&(s=i),vi(s)}function MFt(){var e=Mr(),t=EFt(e),n=SFt(t,e.month),r=n[0],s=n[1],a=function(i){var l;if(!e.disableNavigation){var c=vi(i);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,a]}function kFt(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=vi(e),a=vi(dl(s,r)),i=Kg(a,s),l=[],c=0;c<i;c++){var u=dl(s,c);l.push(u)}return n&&(l=l.reverse()),l}function TFt(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,i=r?a:1,l=vi(e);if(!n)return dl(l,i);var c=Kg(n,e);if(!(c<a))return dl(l,i)}}function NFt(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,i=r?a:1,l=vi(e);if(!n)return dl(l,-i);var c=Kg(l,n);if(!(c<=0))return dl(l,-i)}}var w4e=f.createContext(void 0);function jFt(e){var t=Mr(),n=MFt(),r=n[0],s=n[1],a=kFt(r,t),i=TFt(r,t),l=NFt(r,t),c=function(m){return a.some(function(p){return SU(m,p)})},u=function(m,p){c(m)||(p&&Qhe(m,p)?s(dl(m,1+t.numberOfMonths*-1)):s(m))},d={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return R.createElement(w4e.Provider,{value:d},e.children)}function $w(){var e=f.useContext(w4e);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function moe(e){var t,n=Mr(),r=n.classNames,s=n.styles,a=n.components,i=$w().goToMonth,l=function(d){i(d)},c=(t=a?.CaptionLabel)!==null&&t!==void 0?t:b4e,u=R.createElement(c,{id:e.id,displayMonth:e.displayMonth});return R.createElement("div",{className:r.caption_dropdowns,style:s.caption_dropdowns},R.createElement("div",{className:r.vhidden},u),R.createElement(wFt,{onChange:l,displayMonth:e.displayMonth}),R.createElement(CFt,{onChange:l,displayMonth:e.displayMonth}))}function AFt(e){return R.createElement("svg",$t({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),R.createElement("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"}))}function IFt(e){return R.createElement("svg",$t({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),R.createElement("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"}))}var hk=f.forwardRef(function(e,t){var n=Mr(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];e.className&&a.push(e.className);var i=a.join(" "),l=$t($t({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),R.createElement("button",$t({},e,{ref:t,type:"button",className:i,style:l}))});function RFt(e){var t,n,r=Mr(),s=r.dir,a=r.locale,i=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return R.createElement(R.Fragment,null);var p=u(e.previousMonth,{locale:a}),h=[i.nav_button,i.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:a}),y=[i.nav_button,i.nav_button_next].join(" "),x=(t=m?.IconRight)!==null&&t!==void 0?t:IFt,v=(n=m?.IconLeft)!==null&&n!==void 0?n:AFt;return R.createElement("div",{className:i.nav,style:l.nav},!e.hidePrevious&&R.createElement(hk,{name:"previous-month","aria-label":p,className:h,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick},s==="rtl"?R.createElement(x,{className:i.nav_icon,style:l.nav_icon}):R.createElement(v,{className:i.nav_icon,style:l.nav_icon})),!e.hideNext&&R.createElement(hk,{name:"next-month","aria-label":g,className:y,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick},s==="rtl"?R.createElement(v,{className:i.nav_icon,style:l.nav_icon}):R.createElement(x,{className:i.nav_icon,style:l.nav_icon})))}function poe(e){var t=Mr().numberOfMonths,n=$w(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(g){return SU(e.displayMonth,g)}),c=l===0,u=l===i.length-1,d=t>1&&(c||!u),m=t>1&&(u||!c),p=function(){r&&a(r)},h=function(){s&&a(s)};return R.createElement(RFt,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:h})}function PFt(e){var t,n=Mr(),r=n.classNames,s=n.disableNavigation,a=n.styles,i=n.captionLayout,l=n.components,c=(t=l?.CaptionLabel)!==null&&t!==void 0?t:b4e,u;return s?u=R.createElement(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?u=R.createElement(moe,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?u=R.createElement(R.Fragment,null,R.createElement(moe,{displayMonth:e.displayMonth,id:e.id}),R.createElement(poe,{displayMonth:e.displayMonth,id:e.id})):u=R.createElement(R.Fragment,null,R.createElement(c,{id:e.id,displayMonth:e.displayMonth}),R.createElement(poe,{displayMonth:e.displayMonth,id:e.id})),R.createElement("div",{className:r.caption,style:a.caption},u)}function OFt(e){var t=Mr(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?R.createElement("tfoot",{className:s,style:r.tfoot},R.createElement("tr",null,R.createElement("td",{colSpan:8},n))):R.createElement(R.Fragment,null)}function LFt(e,t,n){for(var r=n?Wm(new Date):xc(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var i=Ks(r,a);s.push(i)}return s}function DFt(){var e=Mr(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,a=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=LFt(s,a,i);return R.createElement("tr",{style:n.head_row,className:t.head_row},r&&R.createElement("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,m){return R.createElement("th",{key:m,scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:s})},l(d,{locale:s}))}))}function FFt(){var e,t=Mr(),n=t.classNames,r=t.styles,s=t.components,a=(e=s?.HeadRow)!==null&&e!==void 0?e:DFt;return R.createElement("thead",{style:r.head,className:n.head},R.createElement(a,null))}function UFt(e){var t=Mr(),n=t.locale,r=t.formatters.formatDay;return R.createElement(R.Fragment,null,r(e.date,{locale:n}))}var ZH=f.createContext(void 0);function BFt(e){if(!Bw(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return R.createElement(ZH.Provider,{value:t},e.children)}return R.createElement(VFt,{initialProps:e.initialProps,children:e.children})}function VFt(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,a=t.max,i=function(u,d,m){var p,h;(p=t.onDayClick)===null||p===void 0||p.call(t,u,d,m);var g=!!(d.selected&&s&&r?.length===s);if(!g){var y=!!(!d.selected&&a&&r?.length===a);if(!y){var x=r?x4e([],r):[];if(d.selected){var v=x.findIndex(function(b){return Ys(u,b)});x.splice(v,1)}else x.push(u);(h=t.onSelect)===null||h===void 0||h.call(t,x,u,d,m)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=a&&r.length>a-1,m=r.some(function(p){return Ys(p,u)});return!!(d&&!m)});var c={selected:r,onDayClick:i,modifiers:l};return R.createElement(ZH.Provider,{value:c},n)}function JH(){var e=f.useContext(ZH);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function $Ft(e,t){var n=t||{},r=n.from,s=n.to;if(!r)return{from:e,to:void 0};if(!s&&Ys(r,e))return{from:r,to:e};if(!s&&Qhe(e,r))return{from:e,to:r};if(!s)return{from:r,to:e};if(!(Ys(s,e)&&Ys(r,e))){if(Ys(s,e))return{from:s,to:void 0};if(!Ys(r,e))return Yhe(r,e)?{from:e,to:s}:{from:r,to:e}}}var ez=f.createContext(void 0);function WFt(e){if(!Vw(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return R.createElement(ez.Provider,{value:t},e.children)}return R.createElement(HFt,{initialProps:e.initialProps,children:e.children})}function HFt(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},a=s.from,i=s.to,l=t.min,c=t.max,u=function(h,g,y){var x,v;(x=t.onDayClick)===null||x===void 0||x.call(t,h,g,y);var b=$Ft(h,r);(v=t.onSelect)===null||v===void 0||v.call(t,b,h,g,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a&&(d.range_start=[a],i?(d.range_end=[i],Ys(a,i)||(d.range_middle=[{after:a,before:i}])):d.range_end=[a]),l&&(a&&!i&&d.disabled.push({after:h8(a,l-1),before:Ks(a,l-1)}),a&&i&&d.disabled.push({after:a,before:Ks(a,l-1)})),c&&(a&&!i&&(d.disabled.push({before:Ks(a,-c+1)}),d.disabled.push({after:Ks(a,c-1)})),a&&i)){var m=Zl(i,a)+1,p=c-m;d.disabled.push({before:h8(a,p)}),d.disabled.push({after:Ks(i,p)})}return R.createElement(ez.Provider,{value:{selected:r,onDayClick:u,modifiers:d}},n)}function tz(){var e=f.useContext(ez);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Q2(e){return Array.isArray(e)?x4e([],e):e!==void 0?[e]:[]}function zFt(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=Q2(s)}),t}var bl;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(bl||(bl={}));var GFt=bl.Selected,qc=bl.Disabled,qFt=bl.Hidden,KFt=bl.Today,uR=bl.RangeEnd,dR=bl.RangeMiddle,fR=bl.RangeStart,YFt=bl.Outside;function QFt(e,t,n){var r,s=(r={},r[GFt]=Q2(e.selected),r[qc]=Q2(e.disabled),r[qFt]=Q2(e.hidden),r[KFt]=[e.today],r[uR]=[],r[dR]=[],r[fR]=[],r[YFt]=[],r);return e.fromDate&&s[qc].push({before:e.fromDate}),e.toDate&&s[qc].push({after:e.toDate}),Bw(e)?s[qc]=s[qc].concat(t.modifiers[qc]):Vw(e)&&(s[qc]=s[qc].concat(n.modifiers[qc]),s[fR]=n.modifiers[fR],s[dR]=n.modifiers[dR],s[uR]=n.modifiers[uR]),s}var C4e=f.createContext(void 0);function XFt(e){var t=Mr(),n=JH(),r=tz(),s=QFt(t,n,r),a=zFt(t.modifiers),i=$t($t({},s),a);return R.createElement(C4e.Provider,{value:i},e.children)}function S4e(){var e=f.useContext(C4e);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function ZFt(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function JFt(e){return!!(e&&typeof e=="object"&&"from"in e)}function eUt(e){return!!(e&&typeof e=="object"&&"after"in e)}function tUt(e){return!!(e&&typeof e=="object"&&"before"in e)}function nUt(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function rUt(e,t){var n,r=t.from,s=t.to;if(!r)return!1;if(!s&&Ys(r,e))return!0;if(!s)return!1;var a=Zl(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var i=Zl(e,r)>=0&&Zl(s,e)>=0;return i}function sUt(e){return bU(e)}function aUt(e){return Array.isArray(e)&&e.every(bU)}function iUt(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(sUt(n))return Ys(e,n);if(aUt(n))return n.includes(e);if(JFt(n))return rUt(e,n);if(nUt(n))return n.dayOfWeek.includes(e.getDay());if(ZFt(n)){var r=Zl(n.before,e),s=Zl(n.after,e),a=r>0,i=s<0,l=Yhe(n.before,n.after);return l?i&&a:a||i}return eUt(n)?Zl(e,n.after)>0:tUt(n)?Zl(n.before,e)>0:typeof n=="function"?n(e):!1})}function nz(e,t,n){var r=Object.keys(t).reduce(function(a,i){var l=t[i];return iUt(e,l)&&a.push(i),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!SU(e,n)&&(s.outside=!0),s}function oUt(e,t){for(var n=vi(e[0]),r=O3(e[e.length-1]),s,a,i=n;i<=r;){var l=nz(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Ks(i,1);continue}if(l.selected)return i;l.today&&!a&&(a=i),s||(s=i),i=Ks(i,1)}return a||s}var lUt=365;function E4e(e,t){var n=t.moveBy,r=t.direction,s=t.context,a=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,m=s.locale,p={day:Ks,week:ME,month:dl,year:$Ye,startOfWeek:function(x){return s.ISOWeek?Wm(x):xc(x,{locale:m,weekStartsOn:c})},endOfWeek:function(x){return s.ISOWeek?Hhe(x):CU(x,{locale:m,weekStartsOn:c})}},h=p[n](e,r==="after"?1:-1);r==="before"&&u?h=WYe([u,h]):r==="after"&&d&&(h=HYe([d,h]));var g=!0;if(a){var y=nz(h,a);g=!y.disabled&&!y.hidden}return g?h:l.count>lUt?l.lastFocused:E4e(h,{moveBy:n,direction:r,context:s,modifiers:a,retry:$t($t({},l),{count:l.count+1})})}var M4e=f.createContext(void 0);function cUt(e){var t=$w(),n=S4e(),r=f.useState(),s=r[0],a=r[1],i=f.useState(),l=i[0],c=i[1],u=oUt(t.displayMonths,n),d=s??(l&&t.isDateDisplayed(l))?l:u,m=function(){c(s),a(void 0)},p=function(x){a(x)},h=Mr(),g=function(x,v){if(s){var b=E4e(s,{moveBy:x,direction:v,context:h,modifiers:n});Ys(s,b)||(t.goToDate(b,s),p(b))}},y={focusedDay:s,focusTarget:d,blur:m,focus:p,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return R.createElement(M4e.Provider,{value:y},e.children)}function rz(){var e=f.useContext(M4e);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function uUt(e,t){var n=S4e(),r=nz(e,n,t);return r}var sz=f.createContext(void 0);function dUt(e){if(!pN(e.initialProps)){var t={selected:void 0};return R.createElement(sz.Provider,{value:t},e.children)}return R.createElement(fUt,{initialProps:e.initialProps,children:e.children})}function fUt(e){var t=e.initialProps,n=e.children,r=function(a,i,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,i,l),i.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,a,i,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,a,a,i,l)},s={selected:t.selected,onDayClick:r};return R.createElement(sz.Provider,{value:s},n)}function k4e(){var e=f.useContext(sz);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function mUt(e,t){var n=Mr(),r=k4e(),s=JH(),a=tz(),i=rz(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,m=i.blur,p=i.focus,h=i.focusMonthBefore,g=i.focusMonthAfter,y=i.focusYearBefore,x=i.focusYearAfter,v=i.focusStartOfWeek,b=i.focusEndOfWeek,_=function(I){var U,B,D,W;pN(n)?(U=r.onDayClick)===null||U===void 0||U.call(r,e,t,I):Bw(n)?(B=s.onDayClick)===null||B===void 0||B.call(s,e,t,I):Vw(n)?(D=a.onDayClick)===null||D===void 0||D.call(a,e,t,I):(W=n.onDayClick)===null||W===void 0||W.call(n,e,t,I)},w=function(I){var U;p(e),(U=n.onDayFocus)===null||U===void 0||U.call(n,e,t,I)},C=function(I){var U;m(),(U=n.onDayBlur)===null||U===void 0||U.call(n,e,t,I)},S=function(I){var U;(U=n.onDayMouseEnter)===null||U===void 0||U.call(n,e,t,I)},E=function(I){var U;(U=n.onDayMouseLeave)===null||U===void 0||U.call(n,e,t,I)},M=function(I){var U;(U=n.onDayPointerEnter)===null||U===void 0||U.call(n,e,t,I)},k=function(I){var U;(U=n.onDayPointerLeave)===null||U===void 0||U.call(n,e,t,I)},N=function(I){var U;(U=n.onDayTouchCancel)===null||U===void 0||U.call(n,e,t,I)},P=function(I){var U;(U=n.onDayTouchEnd)===null||U===void 0||U.call(n,e,t,I)},L=function(I){var U;(U=n.onDayTouchMove)===null||U===void 0||U.call(n,e,t,I)},O=function(I){var U;(U=n.onDayTouchStart)===null||U===void 0||U.call(n,e,t,I)},A=function(I){var U;(U=n.onDayKeyUp)===null||U===void 0||U.call(n,e,t,I)},j=function(I){var U;switch(I.key){case"ArrowLeft":I.preventDefault(),I.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":I.preventDefault(),I.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":I.preventDefault(),I.stopPropagation(),u();break;case"ArrowUp":I.preventDefault(),I.stopPropagation(),d();break;case"PageUp":I.preventDefault(),I.stopPropagation(),I.shiftKey?y():h();break;case"PageDown":I.preventDefault(),I.stopPropagation(),I.shiftKey?x():g();break;case"Home":I.preventDefault(),I.stopPropagation(),v();break;case"End":I.preventDefault(),I.stopPropagation(),b();break}(U=n.onDayKeyDown)===null||U===void 0||U.call(n,e,t,I)},T={onClick:_,onFocus:w,onBlur:C,onKeyDown:j,onKeyUp:A,onMouseEnter:S,onMouseLeave:E,onPointerEnter:M,onPointerLeave:k,onTouchCancel:N,onTouchEnd:P,onTouchMove:L,onTouchStart:O};return T}function pUt(){var e=Mr(),t=k4e(),n=JH(),r=tz(),s=pN(e)?t.selected:Bw(e)?n.selected:Vw(e)?r.selected:void 0;return s}function hUt(e){return Object.values(bl).includes(e)}function gUt(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(hUt(r)){var a=e.classNames["day_".concat(r)];a&&n.push(a)}}),n}function yUt(e,t){var n=$t({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=$t($t({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function xUt(e,t,n){var r,s,a,i=Mr(),l=rz(),c=uUt(e,t),u=mUt(e,c),d=pUt(),m=!!(i.onDayClick||i.mode!=="default");f.useEffect(function(){var S;c.outside||l.focusedDay&&m&&Ys(l.focusedDay,e)&&((S=n.current)===null||S===void 0||S.focus())},[l.focusedDay,e,n,m,c.outside]);var p=gUt(i,c).join(" "),h=yUt(i,c),g=!!(c.outside&&!i.showOutsideDays||c.hidden),y=(a=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:UFt,x=R.createElement(y,{date:e,displayMonth:t,activeModifiers:c}),v={style:h,className:p,children:x,role:"gridcell"},b=l.focusTarget&&Ys(l.focusTarget,e)&&!c.outside,_=l.focusedDay&&Ys(l.focusedDay,e),w=$t($t($t({},v),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||b?0:-1,r)),u),C={isButton:m,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:w,divProps:v};return C}function vUt(e){var t=f.useRef(null),n=xUt(e.date,e.displayMonth,t);return n.isHidden?R.createElement("div",{role:"gridcell"}):n.isButton?R.createElement(hk,$t({name:"day",ref:t},n.buttonProps)):R.createElement("div",$t({},n.divProps))}function bUt(e){var t=e.number,n=e.dates,r=Mr(),s=r.onWeekNumberClick,a=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!s)return R.createElement("span",{className:i.weeknumber,style:a.weeknumber},d);var m=c(Number(t),{locale:l}),p=function(h){s(t,n,h)};return R.createElement(hk,{name:"week-number","aria-label":m,className:i.weeknumber,style:a.weeknumber,onClick:p},d)}function _Ut(e){var t,n,r=Mr(),s=r.styles,a=r.classNames,i=r.showWeekNumber,l=r.components,c=(t=l?.Day)!==null&&t!==void 0?t:vUt,u=(n=l?.WeekNumber)!==null&&n!==void 0?n:bUt,d;return i&&(d=R.createElement("td",{className:a.cell,style:s.cell},R.createElement(u,{number:e.weekNumber,dates:e.dates}))),R.createElement("tr",{className:a.row,style:s.row},d,e.dates.map(function(m){return R.createElement("td",{className:a.cell,style:s.cell,key:fXe(m),role:"presentation"},R.createElement(c,{displayMonth:e.displayMonth,date:m}))}))}function hoe(e,t,n){for(var r=n?.ISOWeek?Hhe(t):CU(t,n),s=n?.ISOWeek?Wm(e):xc(e,n),a=Zl(r,s),i=[],l=0;l<=a;l++)i.push(Ks(s,l));var c=i.reduce(function(u,d){var m=n?.ISOWeek?uXe(d):gXe(d,n),p=u.find(function(h){return h.weekNumber===m});return p?(p.dates.push(d),u):(u.push({weekNumber:m,dates:[d]}),u)},[]);return c}function wUt(e,t){var n=hoe(vi(e),O3(e),t);if(t?.useFixedWeeks){var r=xXe(e,t);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],i=ME(a,6-r),l=hoe(ME(a,1),i,t);n.push.apply(n,l)}}return n}function CUt(e){var t,n,r,s=Mr(),a=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,m=s.weekStartsOn,p=s.firstWeekContainsDate,h=s.ISOWeek,g=wUt(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:h,locale:a,weekStartsOn:m,firstWeekContainsDate:p}),y=(t=d?.Head)!==null&&t!==void 0?t:FFt,x=(n=d?.Row)!==null&&n!==void 0?n:_Ut,v=(r=d?.Footer)!==null&&r!==void 0?r:OFt;return R.createElement("table",{className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"]},!c&&R.createElement(y,null),R.createElement("tbody",{className:i.tbody,style:l.tbody,role:"rowgroup"},g.map(function(b){return R.createElement(x,{displayMonth:e.displayMonth,key:b.weekNumber,dates:b.dates,weekNumber:b.weekNumber})})),R.createElement(v,{displayMonth:e.displayMonth}))}function SUt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var EUt=SUt()?f.useLayoutEffect:f.useEffect,mR=!1,MUt=0;function goe(){return"react-day-picker-".concat(++MUt)}function kUt(e){var t,n=e??(mR?goe():null),r=f.useState(n),s=r[0],a=r[1];return EUt(function(){s===null&&a(goe())},[]),f.useEffect(function(){mR===!1&&(mR=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function TUt(e){var t,n,r=Mr(),s=r.dir,a=r.classNames,i=r.styles,l=r.components,c=$w().displayMonths,u=kUt(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=[a.month],m=i.month,p=e.displayIndex===0,h=e.displayIndex===c.length-1,g=!p&&!h;s==="rtl"&&(t=[p,h],h=t[0],p=t[1]),p&&(d.push(a.caption_start),m=$t($t({},m),i.caption_start)),h&&(d.push(a.caption_end),m=$t($t({},m),i.caption_end)),g&&(d.push(a.caption_between),m=$t($t({},m),i.caption_between));var y=(n=l?.Caption)!==null&&n!==void 0?n:PFt;return R.createElement("div",{key:e.displayIndex,className:d.join(" "),style:m},R.createElement(y,{id:u,displayMonth:e.displayMonth}),R.createElement(CUt,{"aria-labelledby":u,displayMonth:e.displayMonth}))}function NUt(e){var t=e.initialProps,n=Mr(),r=rz(),s=$w(),a=f.useState(!1),i=a[0],l=a[1];f.useEffect(function(){n.initialFocus&&r.focusTarget&&(i||(r.focus(r.focusTarget),l(!0)))},[n.initialFocus,i,r.focus,r.focusTarget,r]);var c=[n.classNames.root,n.className];n.numberOfMonths>1&&c.push(n.classNames.multiple_months),n.showWeekNumber&&c.push(n.classNames.with_weeknumber);var u=$t($t({},n.styles.root),n.style),d=Object.keys(t).filter(function(m){return m.startsWith("data-")}).reduce(function(m,p){var h;return $t($t({},m),(h={},h[p]=t[p],h))},{});return R.createElement("div",$t({className:c.join(" "),style:u,dir:n.dir,id:n.id},d),R.createElement("div",{className:n.classNames.months,style:n.styles.months},s.displayMonths.map(function(m,p){return R.createElement(TUt,{key:p,displayIndex:p,displayMonth:m})})))}function jUt(e){var t=e.children,n=tFt(e,["children"]);return R.createElement(bFt,{initialProps:n},R.createElement(jFt,null,R.createElement(dUt,{initialProps:n},R.createElement(BFt,{initialProps:n},R.createElement(WFt,{initialProps:n},R.createElement(XFt,null,R.createElement(cUt,null,t)))))))}function AUt(e){return R.createElement(jUt,$t({},e),R.createElement(NUt,{initialProps:e}))}const T4e=R.memo(({className:e,showOutsideDays:t=!0,...n})=>{const r=R.useMemo(()=>({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-between relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 p-0 rounded hover:bg-subtle flex items-center justify-center bg-subtler [&_*]:fill-quiet",table:"w-full border-collapse",head_row:"flex",head_cell:"text-quiet rounded-md w-8 font-normal text-sm font-mono",row:"flex w-full mt-1",cell:V("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected].day-range-end)]:rounded-r-full",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-full [&:has([aria-selected])]:bg-superBG [&:has(>.day-range-start)]:rounded-l-full first:[&:has([aria-selected])]:rounded-l-full last:[&:has([aria-selected])]:rounded-r-full":"[&:has([aria-selected])]:rounded-md"),day:V("size-8 p-0 font-normal select-none aria-selected:opacity-100 flex items-center justify-center rounded-full hover:bg-subtler cursor-pointer"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:V(n.mode==="range"?"[&.day-range-start]:!bg-super [&.day-range-start]:!text-inverse [&.day-range-start]:hover:!bg-super [&.day-range-end]:!bg-super [&.day-range-end]:!text-inverse [&.day-range-end]:hover:!bg-super":"!bg-super !text-inverse hover:!bg-super"),day_today:"bg-superBG text-super hover:bg-superBG",day_outside:"day-outside text-quiet aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-quiet opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...V}),[n.mode]),s=f.useMemo(()=>({IconLeft:({className:a,...i})=>o.jsx(le,{icon:hp,className:a,size:"sm",...i}),IconRight:({className:a,...i})=>o.jsx(le,{icon:Zn,className:a,size:"sm",...i})}),[]);return o.jsx(AUt,{showOutsideDays:t,className:V("p-3 font-sans text-base",e),classNames:r,components:s,...n})});T4e.displayName="Calendar";var hN="Popover",[N4e,Mpn]=Mi(hN,[Yy]),Ww=Yy(),[IUt,Tf]=N4e(hN),j4e=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,l=Ww(t),c=f.useRef(null),[u,d]=f.useState(!1),[m,p]=Cl({prop:r,defaultProp:s??!1,onChange:a,caller:hN});return o.jsx(RF,{...l,children:o.jsx(IUt,{scope:t,contentId:ig(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:i,children:n})})};j4e.displayName=hN;var A4e="PopoverAnchor",RUt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Tf(A4e,n),a=Ww(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(i(),()=>l()),[i,l]),o.jsx(o3,{...a,...r,ref:t})});RUt.displayName=A4e;var I4e="PopoverTrigger",R4e=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Tf(I4e,n),a=Ww(n),i=Hn(t,s.triggerRef),l=o.jsx(mn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":F4e(s.open),...r,ref:i,onClick:Wt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(o3,{asChild:!0,...a,children:l})});R4e.displayName=I4e;var az="PopoverPortal",[PUt,OUt]=N4e(az,{forceMount:void 0}),P4e=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=Tf(az,t);return o.jsx(PUt,{scope:t,forceMount:n,children:o.jsx(wa,{present:n||a.open,children:o.jsx(x_,{asChild:!0,container:s,children:r})})})};P4e.displayName=az;var Ty="PopoverContent",O4e=f.forwardRef((e,t)=>{const n=OUt(Ty,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=Tf(Ty,e.__scopePopover);return o.jsx(wa,{present:r||a.open,children:a.modal?o.jsx(DUt,{...s,ref:t}):o.jsx(FUt,{...s,ref:t})})});O4e.displayName=Ty;var LUt=A1("PopoverContent.RemoveScroll"),DUt=f.forwardRef((e,t)=>{const n=Tf(Ty,e.__scopePopover),r=f.useRef(null),s=Hn(t,r),a=f.useRef(!1);return f.useEffect(()=>{const i=r.current;if(i)return yhe(i)},[]),o.jsx(iU,{as:LUt,allowPinchZoom:!0,children:o.jsx(L4e,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,i=>{i.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Wt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),FUt=f.forwardRef((e,t)=>{const n=Tf(Ty,e.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(L4e,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;n.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),L4e=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...m}=e,p=Tf(Ty,n),h=Ww(n);return ihe(),o.jsx(sU,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(g_,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:o.jsx(PF,{"data-state":F4e(p.open),role:"dialog",id:p.contentId,...h,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),D4e="PopoverClose",UUt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Tf(D4e,n);return o.jsx(mn.button,{type:"button",...r,ref:t,onClick:Wt(e.onClick,()=>s.onOpenChange(!1))})});UUt.displayName=D4e;var BUt="PopoverArrow",VUt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Ww(n);return o.jsx(OF,{...s,...r,ref:t})});VUt.displayName=BUt;function F4e(e){return e?"open":"closed"}var $Ut=j4e,WUt=R4e,HUt=P4e,zUt=O4e;const iz=R.memo(e=>{const{children:t,content:n,disableAnimation:r,isOpen:s,onClose:a,onOpen:i,contentClassName:l}=e;return o.jsxs($Ut,{open:s,onOpenChange:c=>{c?i?.():a?.()},children:[o.jsx(WUt,{asChild:!0,children:t}),o.jsx(HUt,{children:o.jsx(zUt,{asChild:!0,sideOffset:4,side:"bottom",align:"start",children:o.jsx(H,{variant:"background",className:V("p-xs relative rounded-lg border shadow-sm",{"data-close:zoom-out-95 data-close:fade-out data-close:animate-out":!r,"data-open:duration-150 data-open:ease-in-out data-open:animate-in data-open:fade-in data-open:zoom-in-95":!r},l),children:n})})})]})});iz.displayName="Popover";const GUt=e=>e.toLocaleDateString();function gk({value:e,onChange:t,placeholder:n="Select date",formatDate:r=GUt,showIcon:s=!0,buttonClassName:a,variant:i="default",trailingIcon:l,fromDate:c,endDate:u}){const[d,m]=f.useState(!1),p=()=>{m(!d)},h=x=>{t(x),m(!1)},g=f.useMemo(()=>{const x=new Date;return x.setHours(0,0,0,0),x},[]),y=(()=>{switch(i){case"subtle":return"bg-subtle";case"default":return"bg-subtler";default:Kt(i)}})();return o.jsx("div",{className:"relative size-full",children:o.jsx(iz,{isOpen:d,onOpen:()=>m(!0),onClose:()=>m(!1),placement:"bottom-start",content:o.jsx(T4e,{mode:"single",selected:e,onSelect:h,disabled:[{before:c??g,after:u}],fromDate:c??g}),children:o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>p(),className:V(y,"flex cursor-pointer items-center justify-between rounded-lg px-4 font-sans","hover:border-subtler focus:border-subtler border border-transparent","transition-colors duration-200 ease-out","size-full","outline-none focus:outline-none focus:ring-0",a),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[s&&o.jsx(n_,{size:16,className:"text-foreground"}),o.jsx("span",{className:"text-foreground text-sm",children:e?r(e):n})]}),l]})})})}const yoe=({hour:e,minute:t})=>`${e%12||12}:${t.toString().padStart(2,"0")} ${e>=12?"PM":"AM"}`,xoe=e=>{const t=e.trim().match(/^((?:0?[1-9]|1[0-2])):([0-5]\d)\s*([ap]m)$/i);if(!t||t.length!==4)return null;const n=parseInt(t[1]??"",10),r=parseInt(t[2]??"",10);if(isNaN(n)||isNaN(r))return null;const s=t[3]?.toLowerCase();return s==="pm"&&n!==12?{hour:n+12,minute:r}:s==="am"&&n===12?{hour:0,minute:r}:{hour:n,minute:r}},qUt=(e,t)=>e.hour===t.hour&&e.minute===t.minute,KUt=Array.from({length:48},(e,t)=>({hour:Math.floor(t/2),minute:t%2*30}));function YUt({value:e,onChange:t,placeholder:n="Select time",variant:r="default",withIcon:s}){const[a,i]=f.useState(""),[l,c]=f.useState(!1),u=f.useRef(null),d=a.trim()!==""&&!xoe(a),m=f.useRef(null),p=e?yoe(e):n,h=f.useMemo(()=>KUt.map(C=>({key:`${C.hour}:${C.minute}`,label:yoe(C),value:C})),[]),g=f.useCallback(C=>{C&&l&&e&&m.current&&m.current?.scrollIntoView({behavior:"instant",block:"start"})},[l,e]),y=()=>{const C=xoe(a);C&&t(C),i("")},x=C=>{t(C),i(""),c(!1)},v=()=>{c(!l)},b=()=>{c(!l),setTimeout(()=>{u.current&&u.current.focus()},0)},_=(()=>{switch(r){case"subtle":return"bg-subtle";case"default":return"bg-subtler";default:Kt(r)}})(),w=f.useMemo(()=>o.jsx(le,{icon:_p,size:"sm"}),[]);return o.jsx("div",{className:"relative size-full",children:o.jsx(iz,{contentClassName:"rounded-xl min-w-[var(--radix-popper-anchor-width)]",isOpen:l,onOpen:()=>c(!0),onClose:()=>c(!1),placement:"bottom-start",matchTargetWidth:!0,content:o.jsx("div",{ref:g,className:"p-xs scrollbar-subtle max-h-64 overflow-y-auto",children:h.map(C=>o.jsx("div",{ref:e&&qUt(C.value,e)?m:null,role:"button",tabIndex:0,onClick:()=>x(C.value),className:V("px-sm text-foreground cursor-pointer rounded-lg py-1.5","hover:bg-subtler"),children:o.jsx(F,{variant:"extraSmall",children:C.label})},C.key))}),children:o.jsxs("div",{role:"button",tabIndex:0,onClick:v,className:V(_,"text-foreground flex size-full cursor-pointer items-center gap-2 rounded-lg px-4 font-sans","border transition-colors duration-200 ease-out","outline-none focus:outline-none focus:ring-0","hover:border-subtler focus-within:border-subtler border-transparent",{"!border-negative":d}),children:[s&&w,o.jsx("input",{ref:u,type:"text",value:a||p,placeholder:n,onChange:C=>i(C.target.value),onBlur:y,onClick:b,className:"w-full bg-transparent text-sm focus:outline-none"}),o.jsx(le,{size:"xs",icon:Bn,className:"right-sm pointer-events-none absolute text-inherit opacity-50"})]})})})}const Ny=f.memo(({children:e})=>o.jsx("div",{className:"min-w-0 flex-1 rounded-md",children:e}));Ny.displayName="InputWrapper";const yv=f.memo(({options:e,value:t,onChange:n,isMobileStyle:r,variant:s="default"})=>{const a=Z(),i=f.useMemo(()=>e.map(p=>({type:"default",text:p.label,onClick:()=>n(p.value),active:p.value===t,role:"menuitemradio"})),[n,e,t]),c=f.useMemo(()=>e.find(p=>p.value===t),[e,t])?.label||a.formatMessage({defaultMessage:"Select...",id:"724CrE1YuG"}),u=f.useMemo(()=>({className:"w-full"}),[]),d=f.useMemo(()=>({matchTargetWidth:!0,avoidPositionCollisions:!1}),[]),m=(()=>{switch(s){case"subtle":return"";case"default":return"!bg-subtler";default:Kt(s)}})();return o.jsx(Ny,{children:o.jsx(sn,{items:i,isMobileStyle:r,placement:"bottom",contentClassName:"w-full",boxProps:u,popoverProps:d,children:o.jsx(pe,{text:c,extraCSS:V("px-4 size-full !h-10 border-0 !outline-none !justify-start font-normal",m),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Bn})})})});yv.displayName="FormSelect";const oz=f.memo(({schedule:e,onScheduleChange:t,variant:n="default"})=>{const{formatMessage:r}=Z(),{isMobileStyle:s}=Ce(),a=f.useMemo(()=>new Date(e.year,e.month,e.day,e.hour,e.minute),[e.year,e.month,e.day,e.hour,e.minute]),{kind:i}=e,l=i==="ONCE",c=i==="WEEKLY",u=i==="MONTHLY"||i==="YEARLY",d=i==="YEARLY",m=f.useCallback(b=>{t({kind:b})},[t]),p=f.useCallback(b=>{t({dayOfWeek:parseInt(b,10)})},[t]),h=f.useCallback(b=>{t({month:parseInt(b,10)})},[t]),g=f.useCallback(b=>{t({day:parseInt(b,10)})},[t]),y=f.useCallback(b=>{b&&t({day:b.getDate(),month:b.getMonth(),year:b.getFullYear()})},[t]),x=f.useCallback(b=>{t({hour:b.hour,minute:b.minute})},[t]),v=f.useMemo(()=>({hour:e.hour,minute:e.minute}),[e.hour,e.minute]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:r({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}),o.jsxs("div",{className:"flex h-10 flex-wrap gap-3",children:[o.jsx(yv,{options:XDt,value:e.kind,onChange:m,isMobileStyle:s,variant:n}),c&&o.jsx(yv,{options:ZDt,value:String(e.dayOfWeek),onChange:p,isMobileStyle:s,variant:n}),d&&o.jsx(yv,{options:eFt,value:String(e.month),onChange:h,isMobileStyle:s,variant:n}),u&&o.jsx(yv,{options:JDt,value:String(e.day),onChange:g,isMobileStyle:s,variant:n}),l&&o.jsx(Ny,{children:o.jsx(gk,{value:a,onChange:y,variant:n})}),o.jsx(Ny,{children:o.jsx(YUt,{value:v,onChange:x,variant:n})})]})]})});oz.displayName="ScheduleSelect";const QUt=pt({selectModel:{defaultMessage:"Select model...",id:"XZsGHYyuKM"}}),XUt=({selectedModel:e,onModelChange:t,variant:n="default"})=>{const r="task-modal-model-selector",s=e||de.PRO,{$t:a}=Z(),{isMobileStyle:i}=Ce(),{isSearchModelReasoningToggleEnabled:l}=lH(),{selectOptions:c}=dke({reason:r,selectedSearchMode:ce.SEARCH,currentModel:s,onModelSelect:g=>{t?.(g)}}),{menuItems:u}=mke({searchMode:ce.SEARCH,currentModel:s,onModelSelect:g=>{t?.(g)}}),d=f.useMemo(()=>c.map(g=>({type:"default",text:g.label,onClick:()=>t?.(g.value),active:g.value===s})),[c,s,t]),m=f.useMemo(()=>l?u:d,[l,u,d]),p=qr[s].name||QUt.selectModel,h=(()=>{switch(n){case"subtle":return"bg-subtle";case"default":return"!bg-subtler";default:Kt(n)}})();return o.jsx(sn,{items:m,isMobileStyle:i,placement:"bottom",contentClassName:"w-full",boxProps:{className:"w-full"},popoverProps:{matchTargetWidth:!0,avoidPositionCollisions:!1},children:o.jsx(pe,{text:a(p),extraCSS:V("px-4 size-full !h-10 border-0 !outline-none !justify-start font-normal",h),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Bn})})};function ZUt(e,t){if(e.includes(t)){let n=e.filter(r=>r!==t);return t==="web"&&e.includes("crunchbase")&&(n=n.filter(r=>r!=="crunchbase")),n}else{const n=[...e];return t==="crunchbase"&&!n.includes("web")&&n.push("web"),n.push(t),n}}function JUt({sources:e,onChange:t,variant:n="default"}){const[r,s]=f.useState(!1),a=f.useCallback(i=>{const l=ZUt(e,i);t(l)},[t,e]);return o.jsx(uH,{isOpen:r,onOpen:()=>s(!0),onClose:()=>s(!1),selectedSources:e,onSourcesChange:a,variant:"button",buttonVariant:n,hiddenSources:[ql.org,ql.google_drive,ql.onedrive,ql.sharepoint,ql.my_files],allowCometRestrictions:!1})}const gN=f.memo(({searchModel:e,onSearchModelChange:t,sources:n,onSourcesChange:r,variant:s="default"})=>{const a=Si[e]??ce.SEARCH,{hasActiveSubscription:i}=Et();return o.jsx("div",{className:"flex w-full flex-col gap-2",children:o.jsxs("div",{className:"flex gap-3",children:[i&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(he,{defaultMessage:"Mode",id:"mrOnjMzgC4"})}),o.jsx("div",{className:"h-full w-fit",children:o.jsx(oH,{value:e,onChange:t,layoutKey:"task-modal",className:"h-full",variant:s,buttonSize:"regular"})})]}),i&&a===ce.SEARCH&&o.jsxs("div",{className:"flex min-w-[100px] flex-1 flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(he,{defaultMessage:"Model",id:"rhSI1/3g21"})}),o.jsx(Ny,{children:o.jsx(XUt,{selectedModel:e,onModelChange:t,variant:s})})]}),i&&o.jsxs("div",{className:"flex min-w-[100px] flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(he,{defaultMessage:"Sources",id:"fhwTpAcBLC"})}),o.jsx(Ny,{children:o.jsx(JUt,{sources:n,onChange:r,variant:s})})]})]})})});gN.displayName="QuerySearchConfigurationSelector";const U4e=f.memo(({query:e,onQueryChange:t})=>{const{$t:n}=Z(),{hasActiveSubscription:r}=Et(),s=f.useCallback(l=>{t({...e,searchModel:l})},[t,e]),a=f.useCallback(l=>{t({...e,sources:l})},[t,e]);if(!r)return null;const i=n({defaultMessage:"Model options",id:"ObVxV7yacw"});return o.jsx(y4e,{title:i,children:o.jsx(gN,{searchModel:e.searchModel,onSearchModelChange:s,sources:e.sources??w_(),onSourcesChange:a,variant:"subtle"})})});U4e.displayName="ScheduledAutomationAdvancedConfiguration";const B4e=f.memo(({trigger:e,query:t,onQueryChange:n})=>{switch(e.type){case dt.SCHEDULED:return o.jsx(U4e,{query:t,onQueryChange:n});case dt.PRICE_ALERT:case dt.SHORTCUT:return null;default:Kt(e)}});B4e.displayName="AutomationAdvancedSettingsConfiguration";const V4e=f.memo(({expiryDate:e,onExpiryDateChange:t,schedule:n})=>{const{$t:r}=Z(),s=f.useCallback(l=>{l.stopPropagation(),t(null)},[t]),a=f.useMemo(()=>o.jsx(pe,{type:"button",onClick:s,icon:It,size:"tiny",variant:"common"}),[s]),i=f.useMemo(()=>{if(e===null)return;const l=n?IU(n):void 0;return l?Ks(l,1):void 0},[e,n]);return o.jsx(gk,{value:e===null?void 0:e,onChange:t,buttonClassName:"w-full py-sm bg-subtle",trailingIcon:a,fromDate:i,placeholder:r({defaultMessage:"None selected",id:"7MYtB45RD0"})})});V4e.displayName="AutomationExpiryDatePicker";const $4e=f.memo(({defaultExpiryDate:e,expiryDate:t,onExpiryDateChange:n,schedule:r})=>{const s=f.useCallback(a=>{n?.(a)},[n]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(he,{defaultMessage:"Expiration date",id:"CICBj0Td+l"})}),o.jsx(V4e,{expiryDate:t||e,onExpiryDateChange:s,schedule:r})]})});$4e.displayName="ExpiryDateSection";const W4e=f.memo(({trigger:e,onTriggerChange:t})=>{const n=f.useCallback(r=>{e.type===dt.SCHEDULED&&t({...e,type:dt.SCHEDULED,expiryDate:r})},[t,e]);switch(e.type){case dt.SCHEDULED:return e.schedule.kind!=="ONCE"?o.jsx($4e,{defaultExpiryDate:e.defaultExpiryDate,expiryDate:e.expiryDate,onExpiryDateChange:n,schedule:e.schedule}):null;case dt.PRICE_ALERT:case dt.SHORTCUT:return null;default:Kt(e)}});W4e.displayName="AutomationExpiryDateConfiguration";const eBt=({options:e,selectedValues:t,onSelectionChange:n,placeholder:r="Select options...",disabled:s=!1})=>{const a=Z(),{isMobileStyle:i}=Ce(),[l,c]=f.useState(!1),u=f.useCallback(x=>{const b=t.includes(x)?t.filter(_=>_!==x):[...t,x];n(b)},[t,n]),d=f.useMemo(()=>e.map(x=>{const v=t.includes(x.value);return{type:"multiSelect",text:x.label,onClick:()=>{u(x.value)},selected:v,iconVariant:"check",disableActiveStyles:!0}}),[e,t,u]),m=f.useMemo(()=>{if(t.length===0)return r;const x=t.map(v=>e.find(b=>b.value===v)?.label).filter(Boolean);return new Intl.ListFormat(a.locale,{style:"long",type:"conjunction"}).format(x)},[t,e,r,a.locale]),p=f.useCallback(()=>c(!0),[]),h=f.useCallback(()=>c(!1),[]),g=f.useMemo(()=>({className:"w-[180px]"}),[]),y=f.useMemo(()=>({matchTargetWidth:!1,avoidPositionCollisions:!1}),[]);return o.jsx(sn,{isOpen:l,onOpen:p,onClose:h,items:d,isMobileStyle:i,placement:"bottom-end",contentClassName:"w-full",boxProps:g,popoverProps:y,disabled:s,alwaysShowChildren:!0,children:o.jsx(pe,{text:m,extraCSS:V("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal"),textClassName:"text-left text-foreground text-sm font-normal truncate",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Bn,disabled:s})})},H4e=(e,t)=>{const{value:n,loading:r}=Dt({flag:"app-notifications",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},z4e=f.memo(({notificationSettings:e,onNotificationSettingsChange:t,disabled:n})=>{const{$t:r}=wde(),{variation:s,loading:a}=H4e(!1),i=f.useMemo(()=>{const u=[];return s&&!a&&u.push({value:"in_app",label:r({defaultMessage:"In-app",id:"E7zWOQXV+k"})}),u.push({value:"email",label:r({defaultMessage:"Email",id:"sy+pv5U9ls"})},{value:"push",label:r({defaultMessage:"Mobile",id:"GWtmtuCmOx"})}),u},[r,s,a]),l=f.useMemo(()=>{const u=[];return s&&!a&&e.should_send_in_app&&u.push("in_app"),e.should_send_email&&u.push("email"),e.should_send_push&&u.push("push"),u},[e,s,a]),c=f.useCallback(u=>{t({should_send_email:u.includes("email"),should_send_push:u.includes("push"),should_send_in_app:u.includes("in_app")})},[t]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(he,{defaultMessage:"Notification platform",id:"L9evilaxeT"})}),o.jsx(eBt,{options:i,selectedValues:l,onSelectionChange:c,placeholder:r({defaultMessage:"Select platform",id:"Gl5w1+hLYC"}),disabled:n})]})});z4e.displayName="AutomationNotificationConfiguration";const ui=`
`;function G4e({baseInstructions:e,additionalInstructions:t}){let n=e+ui;return t&&(n+=t),n}function voe({prompt:e,baseInstructions:t}){if(!e||!t)return"";const n=e.replace(/\\n/g,ui),r=t.replace(/\\n/g,ui),s=r+ui;if(n.startsWith(s))return n.slice(s.length);if(n.startsWith(r)){const l=n.slice(r.length);if(l.startsWith(ui))return l.slice(ui.length);if(l.trim()==="")return""}return n.startsWith(r)?"":n}function tBt(e){const t=e.split(ui),n=t[0]||"",r=t.length>1?t.slice(1).join(ui):"";return{baseInstructions:n,additionalInstructions:r}}function nBt(e,t){let n=e;for(const[r,s]of Object.entries(t))n=n.replaceAll(r,s);return n}function boe({rawInstructions:e,symbol:t,quoteName:n="",eventValue:r,direction:s}){return nBt(e,{"\\\\n":`
`,"{symbol}":t,"{quoteName}":n,"{{event_value}}":r,"{{direction}}":s})}function q4e({prompt:e,symbol:t,quoteName:n=""}){if(!t||!e)return"";let r=e;r.startsWith('"')&&r.endsWith('"')&&(r=r.slice(1,-1));const s="Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.",a="Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.";let i=r;if(i.startsWith(s+ui))i=i.slice((s+ui).length);else if(i.startsWith(a+ui))i=i.slice((a+ui).length);else if(i===s||i===a)return"";if(i.includes(ui)){const l=i.split(ui);i=l[l.length-1]??i}return i}function a7({selectedSymbol:e,symbol:t,quote:n,isLoading:r=!1,alertType:s,priceValue:a,percentValue:i,currencySymbol:l,$t:c}){const u=e??t,d=n?.name?` (${n.name})`:"",m=f.useMemo(()=>s==="price"?rBt({symbol:u,quoteName:d,priceValue:a,currencySymbol:l,$t:c}):sBt({symbol:u,quoteName:d,percentValue:i,$t:c}),[s,u,d,a,l,c,i]),p=f.useMemo(()=>!u||!n?"":s==="price"?yN({symbol:u,quoteName:d}):xN({symbol:u,quoteName:d}),[u,n,s,d]),h=!r&&n?.name;return f.useMemo(()=>({shouldShowDisplayInstructions:h,displayInstructions:m,baseInstructions:p,effectiveSymbol:u,quoteName:d}),[p,m,u,d,h])}function yN({symbol:e,quoteName:t,$t:n}){return n?n({id:"0J1c9pn78+",defaultMessage:"Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent '{{direction}}' to '{{event_value}}'. Contextualize this price movement within the last few weeks of price movement and investor narrative."},{symbol:e||"",quoteName:t||""}):`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function xN({symbol:e,quoteName:t,$t:n}){return n?n({id:"9XAm3nfaVB",defaultMessage:"Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent '{{event_value}}%' '{{direction}}'. Contextualize this price movement within the last few weeks of price movement and investor narrative."},{symbol:e||"",quoteName:t||""}):`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function rBt({symbol:e,quoteName:t,priceValue:n,currencySymbol:r,$t:s}){if(!e)return s({id:"39tYCstx5d",defaultMessage:"Explain the factors driving the latest movement of this asset, including its recent rise/fall. Contextualize this price movement within the last few weeks of price movement and investor narrative."});const a=n&&n!=="$"?s({defaultMessage:" to {currencySymbol}{priceValue}",id:"zSy/VeEpR9"},{priceValue:n,currencySymbol:r}):"",i=s({defaultMessage:"rise/fall",id:"+dqzTFX/gy"});return yN({symbol:e,quoteName:t,$t:s}).replace(" to {{event_value}}",a).replace("{{direction}}",i)}function sBt({symbol:e,quoteName:t,percentValue:n,$t:r}){if(!e)return r({id:"pP0ylRs8IX",defaultMessage:"Explain the factors driving the latest movement of this asset, including its recent increase/decrease. Contextualize this price movement within the last few weeks of price movement and investor narrative."});const s=r({id:"QBY86oKDNP",defaultMessage:"increase/decrease"});return xN({symbol:e,quoteName:t,$t:r}).replace(" {{event_value}}%",n?` ${parseFloat(n).toFixed(2)}%`:"").replace("{{direction}}",s)}const rf=1e9,sf=-1e9;function i7({symbol:e,alertType:t,priceValue:n,priceThreshold:r,percentValue:s,positiveSelected:a=!0,negativeSelected:i=!0,baseInstructions:l,additionalInstructions:c=""}){let u,d="";if(t==="price"){if(!n||!r)return null;const p=parseFloat(n.replace(/[^0-9.]/g,""));if(isNaN(p))return null;u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_TARGET",value_lower_bound:r==="below"?p:sf,value_upper_bound:r==="above"?p:rf},d=`Alert when ${e} is ${r} ${n}`}else if(t==="movement"){if(!s)return null;const p=parseFloat(s);if(isNaN(p))return null;a&&i?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-p,value_upper_bound:p},d=`Alert when ${e} moves +${s}% or -${s}% in a day`):a?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:sf,value_upper_bound:p},d=`Alert when ${e} moves +${s}% in a day`):i&&(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-p,value_upper_bound:rf},d=`Alert when ${e} moves -${s}% in a day.`)}if(!u)return null;const m=G4e({baseInstructions:l,additionalInstructions:c});return{task_name:d,prompt:m,event_subscription:u,model_preference:"turbo"}}const vN="5";function o7(e){const t={selectedSymbol:e.symbol,additionalInstructions:"",selectedOption:"price",priceValue:"",percentValue:"",positiveSelected:!0,negativeSelected:!0};switch(e.alertType){case Xr.TARGET_PRICE:return{...t,selectedOption:"price",priceValue:e.price===0?"":e.price.toString()};case Xr.MOVEMENT_AMOUNT:{const n=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==rf/100,r=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==sf/100;let s="";return n?s=(e.percentageDecimalUpperBound*100).toFixed(2):r&&(s=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2)),s?{...t,selectedOption:"movement",percentValue:s,positiveSelected:n,negativeSelected:r}:{...t,selectedOption:"movement",percentValue:vN,positiveSelected:!0,negativeSelected:!0}}default:Kt(e)}}function aBt(e){switch(e.selectedOption){case"price":{const t=parseFloat(e.priceValue.replace(/[^0-9.]/g,""));return{type:dt.PRICE_ALERT,alertType:Xr.TARGET_PRICE,symbol:e.selectedSymbol??"",price:t||0,currency:"usd"}}case"movement":{const n=(parseFloat(e.percentValue)||0)/100;let r=0,s=0;return e.positiveSelected&&e.negativeSelected?(r=n,s=-n):e.positiveSelected?r=n:e.negativeSelected&&(s=-n),{type:dt.PRICE_ALERT,alertType:Xr.MOVEMENT_AMOUNT,symbol:e.selectedSymbol??"",percentageDecimalUpperBound:r,percentageDecimalLowerBound:s}}default:Kt(e.selectedOption)}}function iBt({trigger:e,onTriggerChange:t}){const[n,r]=f.useState(()=>o7(e)),s=f.useMemo(()=>e.alertType===Xr.TARGET_PRICE?`${e.symbol}-${e.alertType}-${e.price}`:`${e.symbol}-${e.alertType}-${e.percentageDecimalUpperBound}-${e.percentageDecimalLowerBound}`,[e]),a=f.useRef(s);f.useEffect(()=>{s!==a.current&&(r(o7(e)),a.current=s)},[s,e]);const i=f.useCallback(y=>{const x=aBt(y);t(x)},[t]),l=f.useCallback(y=>{r(x=>{const v=y(x);return i(v),v})},[i]),c=f.useCallback(y=>{l(x=>({...x,selectedSymbol:y}))},[l]),u=f.useCallback((y,x="")=>{l(v=>{switch(y){case"price":return{...v,selectedOption:y,priceValue:x};case"movement":return{...v,selectedOption:y,percentValue:vN,positiveSelected:!0,negativeSelected:!0};default:Kt(y)}})},[l]),d=f.useCallback(y=>{l(x=>({...x,priceValue:typeof y=="function"?y(x.priceValue):y}))},[l]),m=f.useCallback(y=>{l(x=>({...x,percentValue:typeof y=="function"?y(x.percentValue):y}))},[l]),p=f.useCallback(y=>{l(x=>({...x,positiveSelected:y}))},[l]),h=f.useCallback(y=>{l(x=>({...x,negativeSelected:y}))},[l]),g=f.useCallback(y=>{r(x=>({...x,additionalInstructions:y}))},[]);return f.useMemo(()=>({formState:n,onSymbolChange:c,onOptionChange:u,onPriceValueChange:d,onPercentValueChange:m,onPositiveChange:p,onNegativeChange:h,onAdditionalInstructionsChange:g}),[n,c,u,d,m,p,h,g])}const Hw=({symbol:e,enabled:t=!!e,onInitialSuccess:n})=>{const r=f.useRef(!1),s=We({enabled:t&&!!e,queryKey:mb({symbol:e}),queryFn:()=>Zd({symbol:e}),refetchInterval:5*1e3});return f.useEffect(()=>{s.isSuccess&&s.data&&!r.current&&n&&(r.current=!0,n(s.data))},[s.isSuccess,s.data,n]),s},oBt=async({query:e,locale:t,reason:n})=>{try{const{data:r,error:s}=await ae.GET("/rest/autosuggest/finance/tasks-autosuggest",n,{params:{query:{query:e}},headers:{"accept-language":t}});if(s)throw new Ie("API_CLIENTS_ERROR",{message:"Failed to get finance tasks suggestions",cause:s});return"results"in r?r.results:[]}catch(r){return ne.error(r),[]}},K4e="[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent",lBt=e=>/^(\d+(\.\d{0,2})?|\.\d{1,2})$/.test(e),cBt=e=>/^(\d+(\.\d{0,1})?|\.\d{0,1})$/.test(e),bN=(e,t)=>{try{return new Intl.NumberFormat(t,{style:"currency",currency:e.toUpperCase(),currencyDisplay:"symbol"}).format(0).replace(/[0-9.,\s]/g,"").trim()||"$"}catch{return"$"}},uBt=({currentPrice:e,value:t,onChange:n,variant:r="default",currency:s="USD"})=>{const{isMobileUserAgent:a}=Ce(),{locale:i,$t:l}=Z(),c=f.useMemo(()=>bN(s,i),[s,i]),u=f.useMemo(()=>e?.toLocaleString(i,{style:"currency",currency:s.toUpperCase()}),[e,i,s]),d=f.useCallback(y=>{n(x=>{if(y===c)return y;const v=y.replace(c,"");return lBt(v)||y===""?c+v:x})},[n,c]),m=f.useCallback(()=>{t===""&&n(c)},[n,t,c]),p=f.useCallback(()=>{t===c&&n("")},[n,t,c]),h=(()=>{switch(r){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"subtle":return"bg-subtle [&_textarea]:bg-subtle";default:Kt(r)}})(),g=V(K4e,h);return o.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[o.jsx(F,{variant:"tiny",color:"light",children:u?l({id:"74LVOPcS2E",defaultMessage:"Target Price (currently {formattedPrice})"},{formattedPrice:u}):l({id:"xPMPP84OOV",defaultMessage:"Target Price"})}),o.jsx("div",{className:"gap-sm flex items-stretch",children:o.jsx(Wr,{placeholder:c,className:V(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:a,value:t,onChange:d,onFocus:m,onBlur:p,disable1pass:!0,colorVariant:r})})]})},dBt=({value:e,onChange:t,positiveSelected:n,onPositiveChange:r,negativeSelected:s,onNegativeChange:a,variant:i="default"})=>{const{isMobileUserAgent:l}=Ce(),{$t:c}=Z(),u=f.useCallback(()=>{a(!s)},[s,a]),d=f.useCallback(()=>{r(!n)},[r,n]),m=f.useCallback(y=>{t(x=>cBt(y)||y===""?y:x)},[t]),p=f.useMemo(()=>({delayDuration:100}),[]),h=(()=>{switch(i){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"subtle":return"bg-subtle [&_textarea]:bg-subtle";default:Kt(i)}})(),g=V(K4e,h);return o.jsx("div",{className:"gap-md flex flex-col",children:o.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[o.jsx(F,{variant:"tiny",color:"light",children:c({id:"agMnIX4PMS",defaultMessage:"Movement Amount (%)"})}),o.jsxs("div",{className:"gap-md flex h-full items-center",children:[o.jsxs("div",{className:"gap-sm flex h-full items-center",children:[o.jsx(pe,{variant:s?"primaryGhost":"border",size:"small",onClick:u,pill:!0,icon:Hk,toolTip:c({id:"M9L9vXrgoN",defaultMessage:"Negative Movement"}),tooltipProps:p}),o.jsx(pe,{variant:n?"primaryGhost":"border",size:"small",onClick:d,pill:!0,icon:ur,toolTip:c({id:"iFYP+IX00i",defaultMessage:"Positive Movement"}),tooltipProps:p})]}),o.jsx(Wr,{className:V(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:l,value:e,onChange:m,disable1pass:!0,colorVariant:i})]})]})})},lz=R.memo(e=>{const{selectedSymbol:t,selectedOption:n,onSymbolChange:r,onOptionChange:s,showSymbolInput:a=!0,currentPrice:i,priceValue:l,onPriceValueChange:c,percentValue:u,onPercentValueChange:d,positiveSelected:m,onPositiveChange:p,negativeSelected:h,onNegativeChange:g,externalInputValue:y,variant:x,colorVariant:v="default",currency:b,isAssetSelected:_=!0}=e,w=()=>{switch(x){case"full":return{additionalInstructions:e.additionalInstructions,onAdditionalInstructionsChange:e.onAdditionalInstructionsChange,displayPriceInstructions:e.displayPriceInstructions,displayMovementInstructions:e.displayMovementInstructions};case"trigger":return{additionalInstructions:"",onAdditionalInstructionsChange:()=>{},displayPriceInstructions:void 0,displayMovementInstructions:void 0};default:return Kt(x)}},{additionalInstructions:C,onAdditionalInstructionsChange:S,displayPriceInstructions:E,displayMovementInstructions:M}=w(),{isMobileUserAgent:k}=Ce(),{$t:N,locale:P}=Z(),[L,O]=f.useState(!1),[A,j]=f.useState(0),[T,I]=f.useState(""),[U,B]=f.useState([]),D=f.useRef(null),W=xt(),z=f.useRef(T);z.current=T,f.useEffect(()=>{I(y??"")},[y]),f.useEffect(()=>{if(b&&l){const _e=bN(b.toUpperCase(),P);if(/^\d+(\.\d+)?$/.test(l)){c(_e+l);return}const Ne=l.replace(/[^0-9.]/g,"");l.replace(/[0-9.]/g,"").trim()!==_e&&Ne&&c(_e+Ne)}},[b,P,l,c]);const $=f.useMemo(()=>[{label:N({id:"xPMPP84OOV",defaultMessage:"Target Price"}),value:"price"},{label:N({id:"24152tl1L3",defaultMessage:"Movement Amount"}),value:"movement"}].map(be=>({label:be.label,value:be.value,children:o.jsx("div",{className:"w-full flex-1",children:o.jsx(iH,{label:be.label,isActiveOption:n===be.value})})})),[n,N]),X=f.useCallback(async _e=>{const Ne=(await W.fetchQuery({queryKey:["finance-tasks-autosuggest",_e],queryFn:()=>oBt({query:_e,reason:"finance-add-alert"}),staleTime:0})).map(Ee=>({query:Ee.title??"",title:Ee.title??"",image:Ee.image??"",imageDark:Ee.image_dark??"",description:Ee.description??"",identifier:Ee.title??""}));B(Ne)},[W]),q=Js(X,100,{leading:!0,trailing:!0}),Y=f.useCallback(_e=>{q(_e)},[q]),G=f.useCallback(()=>{O(!0),j(-1),Y(z.current)},[Y]),J=f.useCallback(()=>{O(!1)},[]),K=f.useCallback(_e=>{const be=_e;I(be),Y(be),be.trim()===""&&(r(null),c(""),d(""))},[Y,r,c,d]),te=f.useCallback(_e=>{r(_e.identifier??null),I(_e.title??""),O(!1),D.current?.blur()},[r]),re=Dke({userInputQuery:T,suggestionsDisabled:!L||U.length===0,suggestions:U,focusedIndex:A,setFocusedIndex:j,onChange:_e=>{I(_e)},handleSuggestionSubmission:te,inputRef:D}),se=f.useCallback(_e=>{s(_e)},[s]),me=f.useCallback(_e=>{S?.(_e)},[S]),oe=V("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-subtle p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":L&&U.length>0}),ge=f.useMemo(()=>({image:_e,imageDark:be,alt:Ne})=>o.jsx(v5,{image:_e,imageDark:be,alt:Ne,watchlistType:"FINANCE",className:"bg-subtler mr-sm !size-8 rounded",imageClassName:"inset-xs"}),[]),xe=({onClear:_e})=>o.jsx(Te,{icon:It,size:"tiny",pill:!0,onClick:_e}),ye=f.useMemo(()=>({RightIconComponent:()=>null,LeftIconComponent:ge}),[ge]);return o.jsxs("div",{className:"flex flex-col gap-3",children:[a&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",children:o.jsx(he,{defaultMessage:"Find a stock, token, or fund...",id:"DTOgClV6qi"})}),o.jsx(gx,{isOpen:L&&U.length>0,suggestedQueries:U,focusedIndex:A,setFocusedIndex:j,handlePasteQuery:Pn,handleSubmit:te,value:T,components:ye,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Wr,{autoFocus:!t,onFocus:G,onBlur:J,onKeyDown:re,className:oe,pill:!1,ref:D,isMobileUserAgent:k,placeholder:N({defaultMessage:"Search for any asset",id:"BeYic/1TvC"}),value:T,onChange:K,ClearIcon:xe,colorVariant:v})})]}),o.jsxs("div",{className:V("flex flex-col gap-3 sm:flex-row",!_&&"pointer-events-none opacity-50"),children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",children:o.jsx(he,{defaultMessage:"Alert criteria",id:"h44KqVtM6/"})}),o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:o.jsx(aH,{layoutKey:"task",options:$,value:n,onValueChange:se,className:"p-three inline-flex",variant:v})})]}),o.jsxs("div",{className:"gap-md flex flex-col",children:[n==="price"&&o.jsx(uBt,{currentPrice:i,value:l,onChange:c,variant:v,currency:b}),n==="movement"&&o.jsx(dBt,{value:u,onChange:d,positiveSelected:m,onPositiveChange:p,negativeSelected:h,onNegativeChange:g,variant:v})]})]}),x==="full"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(F,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:N({id:"qax5d8pQCh",defaultMessage:"Default Query"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(F,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:n==="price"?E:M})})]}),o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(F,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:N({id:"QFuOkrgHHJ",defaultMessage:"Additional Instructions (optional)"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(qa,{value:C,onChange:me,isMobileUserAgent:k,isMobileStyle:!1,minRows:3,placeholder:N({id:"DtwY5RHKrT",defaultMessage:"Check news and social media sentiment to assess consensus or controversy"})})})]})]})]})});lz.displayName="FinanceAlertForm";const Y4e=f.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s="default",disabled:a})=>{const{isMobileUserAgent:i}=Ce(),{$t:l,locale:c}=Z(),u=o7(e),{selectedSymbol:d,priceValue:m,percentValue:p}=u,{data:h,isLoading:g}=Hw({symbol:u.selectedSymbol}),y=e.alertType===Xr.TARGET_PRICE?"price":"movement",x=h?.currency?bN(h?.currency,c):"$",{displayInstructions:v}=a7({selectedSymbol:d,quote:h,isLoading:g,alertType:y,priceValue:m,percentValue:p,currencySymbol:x,$t:l});return o.jsxs("div",{className:V("gap-md flex flex-col",a&&"pointer-events-none opacity-50"),children:[o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(F,{variant:"tiny",color:"light",className:"flex shrink-0 items-center",children:o.jsx(he,{defaultMessage:"Default query",id:"7SalR4PwjB"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(F,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:v})})]}),o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(F,{variant:"tiny",color:"light",className:"flex shrink-0 items-center",children:o.jsx(he,{defaultMessage:"Additional Instructions (optional)",id:"QFuOkrgHHJ"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(qa,{value:t,onChange:n,isMobileUserAgent:i,isMobileStyle:!1,minRows:3,maxLength:Vpe,className:V("[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent","w-full"),placeholder:"Check news and social media sentiment to assess consensus or controversy",variant:s,disabled:a})})]}),r&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(cf,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:r})]})]})});Y4e.displayName="PriceAlertQueryPromptInput";const Q4e=f.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s,disabled:a})=>{const{data:i}=Hw({symbol:e.symbol}),l=f.useMemo(()=>{if(!e.symbol)return"";const d=i?.name?` (${i.name})`:"";return e.alertType===Xr.TARGET_PRICE?yN({symbol:e.symbol,quoteName:d}):xN({symbol:e.symbol,quoteName:d})},[e.symbol,e.alertType,i?.name]),c=f.useMemo(()=>{const d=i?.name?` (${i.name})`:"";return q4e({prompt:t,symbol:e.symbol,quoteName:d})},[t,e.symbol,i?.name]),u=d=>{const m=G4e({baseInstructions:l,additionalInstructions:d});n(m)};return o.jsx(Y4e,{trigger:e,prompt:c,onPromptChange:u,error:r,variant:s,disabled:a})});Q4e.displayName="PriceAlertPromptWrapper";const _N=f.memo(({trigger:e,prompt:t,onPromptChange:n,placeholder:r,error:s,variant:a="default",disabled:i})=>{const{isMobileUserAgent:l}=Ce(),c=(()=>{switch(a){case"default":return"bg-subtler [&_textarea]:bg-transparent";case"subtle":return"bg-subtle [&_textarea]:bg-transparent";default:Kt(a)}})();switch(e.type){case dt.SCHEDULED:case dt.SHORTCUT:return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(he,{defaultMessage:"Instructions",id:"sV2v5LjRpX"})}),o.jsx(qa,{placeholder:r,value:t,onChange:n,isMobileUserAgent:l,isMobileStyle:!1,minRows:3,maxLength:Vpe,allowEnterNewlines:!0,className:V("hover:!border-subtler focus-within:!border-subtler !border !border-transparent",c),variant:a,disabled:i}),s&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(cf,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:s})]})]});case dt.PRICE_ALERT:return o.jsx(Q4e,{trigger:e,prompt:t,onPromptChange:n,error:s,variant:a,disabled:i});default:Kt(e)}});_N.displayName="QueryPromptInput";const X4e=f.memo(({trigger:e,query:t,onQueryChange:n})=>{const{$t:r}=Z(),s=f.useCallback(c=>{n({...t,prompt:c})},[n,t]),a=f.useCallback(c=>{n({...t,searchModel:c})},[n,t]),i=f.useCallback(c=>{n({...t,sources:c})},[n,t]),l=f.useMemo(()=>{switch(e.type){case dt.SCHEDULED:return null;case dt.PRICE_ALERT:return null;case dt.SHORTCUT:return o.jsx(gN,{searchModel:t.searchModel,onSearchModelChange:a,sources:t.sources??w_(),onSourcesChange:i,variant:"subtle"});default:Kt(e)}},[a,i,t.searchModel,t.sources,e]);return e.type===dt.PRICE_ALERT?null:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx(_N,{trigger:e,prompt:t.prompt,placeholder:r({defaultMessage:"Describe what you want to automate",id:"79ZUaZU8Ho"}),onPromptChange:s,variant:"subtle"}),l]})});X4e.displayName="AutomationQueryConfiguration";const Z4e=f.memo(({trigger:e,onTriggerChange:t,isEditing:n,defaultTargetPriceValue:r})=>{const{formState:s,onSymbolChange:a,onOptionChange:i,onPriceValueChange:l,onPercentValueChange:c,onPositiveChange:u,onNegativeChange:d}=iBt({trigger:e,onTriggerChange:t}),m=f.useCallback(x=>r||(x.price?fBt(x.price):""),[r]),p=f.useCallback(x=>{switch(s.selectedOption){case"price":{if(x&&!s.priceValue){const v=m(x);v&&l(v)}break}case"movement":break;default:Kt(s.selectedOption)}},[s.priceValue,s.selectedOption,m,l]),{data:h}=Hw({symbol:s.selectedSymbol,onInitialSuccess:p}),g=f.useCallback(x=>{let v="";switch(x){case"price":{v=s.priceValue,h&&(v=m(h));break}case"movement":break;default:Kt(x)}i(x,v)},[s.priceValue,m,i,h]),y=!!e.symbol&&e.symbol.trim()!=="";return o.jsx("div",{children:o.jsx(lz,{variant:"trigger",externalInputValue:s.selectedSymbol??void 0,selectedSymbol:s.selectedSymbol,selectedOption:s.selectedOption,onSymbolChange:a,onOptionChange:g,showSymbolInput:!n,currentPrice:h?.price,priceValue:s.priceValue,onPriceValueChange:l,percentValue:s.percentValue,onPercentValueChange:c,positiveSelected:s.positiveSelected,onPositiveChange:u,negativeSelected:s.negativeSelected,onNegativeChange:d,colorVariant:"subtle",currency:h?.currency??void 0,isAssetSelected:y})})});Z4e.displayName="PriceAlertTriggerConfiguration";function fBt(e){return(e*(1+parseInt(vN,10)/100)).toFixed(2)}const l7=f.memo(({trigger:e,onTriggerChange:t})=>{const n=f.useMemo(()=>e?.schedule??Vs(),[e?.schedule]),r=f.useCallback(s=>{t({type:dt.SCHEDULED,...e,schedule:{...n,...s}})},[t,n,e]);return o.jsx(oz,{schedule:n,onScheduleChange:r,variant:"subtle"})});l7.displayName="ScheduledAutomationTriggerConfiguration";const J4e=f.memo(()=>o.jsx("div",{children:"Shortcut Trigger Configuration"}));J4e.displayName="ShortcutTriggerAutomationConfiguration";const eje=f.memo(({trigger:e,onTriggerChange:t,isEditing:n=!1,defaultTargetPriceValue:r})=>{if(!e)return o.jsx(l7,{trigger:null,onTriggerChange:t});switch(e.type){case dt.SCHEDULED:return o.jsx(l7,{trigger:e,onTriggerChange:t});case dt.PRICE_ALERT:return o.jsx(Z4e,{trigger:e,onTriggerChange:t,isEditing:n,defaultTargetPriceValue:r});case dt.SHORTCUT:return o.jsx(J4e,{});default:Kt(e)}});eje.displayName="AutomationTriggerConfiguration";const mBt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"tasks-notification-settings-enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},wN=f.memo(({configuration:e,onConfigurationChange:t,errorMessage:n,onError:r})=>{const s=!!e.id,a=f.useCallback(m=>{let p=e.query;switch(m.type){case dt.PRICE_ALERT:{p={...e.query,prompt:e.query.prompt};break}case dt.SCHEDULED:case dt.SHORTCUT:break;default:Kt(m)}const h={...e,trigger:m,query:p};r?.(null),t(h)},[e,t,r]),i=f.useCallback(m=>{const p={...e,query:m};t(p)},[e,t]),l=f.useCallback(m=>{const p={...e,notificationSettings:m};t(p)},[e,t]),{variation:c,loading:u}=mBt(!0),d=e.trigger.type===dt.PRICE_ALERT&&(!e.trigger.symbol||e.trigger.symbol.trim()==="");return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(X4e,{trigger:e.trigger,query:e.query,onQueryChange:i}),o.jsx(eje,{trigger:e.trigger,onTriggerChange:a,isEditing:s,defaultTargetPriceValue:e.defaultTargetPriceValue}),o.jsx(W4e,{trigger:e.trigger,onTriggerChange:a}),!u&&c&&o.jsx(z4e,{notificationSettings:e.notificationSettings??gf,onNotificationSettingsChange:l,disabled:d}),e.trigger.type===dt.PRICE_ALERT&&o.jsx("div",{className:"flex flex-col gap-2",children:o.jsx(_N,{trigger:e.trigger,prompt:e.query.prompt,onPromptChange:m=>i({...e.query,prompt:m}),variant:"subtle",disabled:d})}),o.jsx(B4e,{trigger:e.trigger,query:e.query,onQueryChange:i}),n&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(cf,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:n})]})]})});wN.displayName="AutomationConfiguration";function pBt(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,schedule:Dv(e.schedule),task_name:"",expiry_date:dge(e.expiryDate??e.defaultExpiryDate),notification_settings:n}}function hBt(e,t){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,task_name:e.shortcut,schedule:{rrule:"",start_at:"",tzid:""}}}function tje({trigger:e,query:t,quote:n}){const{symbol:r}=e,s=n?.name?` (${n.name})`:void 0;switch(e.alertType){case Xr.TARGET_PRICE:{const a=n?.price||0,i=yN({symbol:r,quoteName:s}),l=e.price>a?"above":"below",c=boe({rawInstructions:i,symbol:r,quoteName:s||"",eventValue:`$${e.price}`,direction:l}),u=voe({prompt:t.prompt,baseInstructions:c});return i7({symbol:r,alertType:"price",priceValue:`$${e.price}`,priceThreshold:l,baseInstructions:c,additionalInstructions:u})}case Xr.MOVEMENT_AMOUNT:{const a=xN({symbol:r,quoteName:s}),i=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==rf/100,l=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==sf/100;let c,u;i&&l?(c=(e.percentageDecimalUpperBound*100).toFixed(2),u="increase or decrease"):i?(c=(e.percentageDecimalUpperBound*100).toFixed(2),u="increase"):l?(c=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2),u="decrease"):(c="0.00",u="change");const d=boe({rawInstructions:a,symbol:r,quoteName:s||"",eventValue:c,direction:u}),m=voe({prompt:t.prompt,baseInstructions:d});return i7({symbol:r,alertType:"movement",percentValue:c,positiveSelected:i,negativeSelected:l,baseInstructions:d,additionalInstructions:m})}default:Kt(e)}}function gBt(e,t,n,r){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,schedule:Dv(e.schedule),expiry_date:dge(e.expiryDate??e.defaultExpiryDate),clear_expiry:e.expiryDate===null?!0:void 0,notification_settings:r}}function yBt(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,task_name:e.shortcut}}function xBt({trigger:e,query:t,status:n,quote:r}){const s=tje({trigger:e,query:t,quote:r});return s?{task_name:s.task_name,prompt:s.prompt,event_subscription:s.event_subscription,model_preference:s.model_preference,status:n==="COMPLETED"?"PAUSED":n}:null}function nje({onCreateSuccess:e,onCreateError:t,onUpdateSuccess:n,onUpdateError:r,onDeleteSuccess:s,onDeleteError:a}={}){const{$t:i}=Z(),l=xt(),c=St({mutationFn:p=>mvt({payload:p,reason:"finance-add-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:b2()}),e?.()},onError:p=>t?.(p)}),u=St({mutationFn:({taskId:p,payload:h})=>pvt({taskId:p,payload:h,reason:"finance-edit-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:b2()}),n?.()},onError:p=>{if(p instanceof Error)switch(p.name){case"TimeoutError":r?.({detail:i({defaultMessage:"Network Timeout",id:"Z+mLGQc4GD"})});break;default:ne.error(`Unknown error occured: ${p.name}`),r?.({detail:i({defaultMessage:"Unknown error occurred",id:"y1q3uzCFY6"})})}else r?.(p)}}),d=St({mutationFn:p=>L_e({taskId:p,reason:"finance-delete-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:b2()}),s?.()},onError:()=>a?.()}),m=c.isPending||u.isPending||d.isPending;return f.useMemo(()=>({createMutation:c,updateMutation:u,deleteMutation:d,isMutationLoading:m}),[c,u,d,m])}const vBt=()=>{const{formatMessage:e}=Z();return{getErrorMessage:n=>{switch(n?.detail?.error_code){case ute.TASK_LIMIT_EXCEEDED:return e({defaultMessage:"You have reached the maximum of number of active tasks of this type for your subscription level.",id:"3H43PMJpfD"});case ute.SHORTCUT_NAME_ALREADY_EXISTS:return e({defaultMessage:"A shortcut with this name already exists. Please choose a different name.",id:"GpnXJDWEkN"});default:return e({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"})}}}},bBt={settings_create:!0,settings_edit:!0,settings_suggest:!0,settings_primer:!0,task_widget:!0,discover_task_widget:!0,thread_dropdown:!0,typeahead_create:!0,notifications_panel:!0,router:!0};function c7(e){return e in bBt}const _Bt={settings_create:!0,settings_edit:!0,settings_suggest:!0,finance_home_page:!0,finance_asset_page:!0};function _oe(e){return e in _Bt}const wBt={settings_create:!0,settings_edit:!0,typeahead_create:!0,thread_create:!0,suggestions_dropdown:!0,notifications_panel:!0,typeahead_edit:!0,shortcut_widget:!0,settings_paste:!0,try_assistant_suggestions:!0,thread_upsell_create:!0};function woe(e){return e in wBt}const CBt={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0,skipped:!0};function rje(e){return e in CBt}const SBt={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0,skipped:!0};function EBt(e){return e in SBt}const MBt={created:!0,updated:!0,deleted:!0,copied:!0,skipped:!0};function kBt(e){return e in MBt}function sje({reason:e,source:t,onSuccess:n,onError:r}){const s=xt(),{trackEvent:a}=je(),{getErrorMessage:i}=vBt(),l=f.useCallback((g,y)=>{s.invalidateQueries({queryKey:b2()}),y&&s.invalidateQueries({queryKey:qU(y)}),n?.(g)},[s,n]),c=f.useCallback((g,y)=>{c7(t)&&rje(g)&&a("task modal action",{source:t,action:g}),l(g,y)},[t,a,l]),u=St({mutationFn:g=>fvt({payload:g,reason:e}),onSuccess:g=>c("created",g.task_id),onError:g=>r(i(g))}),d=St({mutationFn:({id:g,payload:y})=>m9({taskId:g,payload:y,reason:e}),onSuccess:g=>c("updated",g.task.task_id),onError:g=>r(i(g))}),m=St({mutationFn:({id:g,newStatus:y})=>m9({taskId:g,payload:{status:y},reason:e}),onSuccess:g=>{c(g.task.status==="PAUSED"?"paused":"resumed",g.task.task_id)},onError:g=>r(i(g))}),p=St({mutationFn:g=>L_e({taskId:g,reason:e}),onSuccess:()=>c("deleted"),onError:g=>r(i(g))}),h=u.isPending||d.isPending||m.isPending||p.isPending;return{createMutation:u,updateMutation:d,toggleMutation:m,deleteMutation:p,isMutationLoading:h,invalidateAndClose:l}}function TBt({initialConfiguration:e,isModalOpened:t,reason:n,source:r,onSuccess:s,onError:a}){const{$t:i}=Z(),{hasActiveSubscription:l}=Et(),[c,u]=f.useState(RU(e??L3(l))),d=f.useCallback(M=>{u(M)},[]),m=(()=>{switch(c.trigger.type){case dt.PRICE_ALERT:return c.trigger.symbol;case dt.SCHEDULED:case dt.SHORTCUT:return null;default:Kt(c.trigger)}})(),{data:p,isLoading:h}=Hw({symbol:m,enabled:!!m&&t}),g=sje({reason:n,source:r,onSuccess:s,onError:a}),y=nje({onCreateSuccess:()=>s("created"),onCreateError:M=>a(`Failed to create price alert - ${M.detail}`),onUpdateSuccess:()=>s("updated"),onUpdateError:M=>a(`Failed to update price alert - ${M.detail}`),onDeleteSuccess:()=>s("deleted"),onDeleteError:()=>a("Failed to delete price alert")}),x=h||g.isMutationLoading||y.isMutationLoading,v=f.useCallback(M=>{const k=M?{...c,...M}:c;if(k.id)switch(k.trigger.type){case dt.SCHEDULED:g.updateMutation.mutate({id:k.id,payload:gBt(k.trigger,k.query,k.status,k.notificationSettings)});break;case dt.PRICE_ALERT:{const N=xBt({trigger:k.trigger,query:k.query,status:k.status,quote:p});N?y.updateMutation.mutate({taskId:k.id,payload:N}):a(i({defaultMessage:"Failed to update price alert payload - Missing inputs",id:"293dgMfZdE"}));break}case dt.SHORTCUT:g.updateMutation.mutate({id:k.id,payload:yBt(k.trigger,k.query,k.status)});break;default:Kt(k.trigger)}else switch(k.trigger.type){case dt.SCHEDULED:g.createMutation.mutate(pBt(k.trigger,k.query,k.notificationSettings??gf));break;case dt.PRICE_ALERT:{const N=tje({trigger:k.trigger,query:k.query,quote:p});N?y.createMutation.mutate(N):a(i({defaultMessage:"Failed to create price alert payload - Missing inputs",id:"Fimh9vZMY/"}));break}case dt.SHORTCUT:g.createMutation.mutate(hBt(k.trigger,k.query));break;default:Kt(k.trigger)}},[c,g.updateMutation,g.createMutation,p,y.updateMutation,y.createMutation,a,i]),b=f.useCallback(()=>{v()},[v]),_=f.useCallback(M=>{if(!c.id)return;v({status:M?"ACTIVE":"PAUSED"})},[c.id,v]),w=f.useCallback(()=>{if(c.id)switch(c.trigger.type){case dt.SCHEDULED:g.deleteMutation.mutate(c.id);break;case dt.PRICE_ALERT:y.deleteMutation.mutate(c.id);break;case dt.SHORTCUT:g.deleteMutation.mutate(c.id);break;default:Kt(c.trigger)}},[c.id,c.trigger,y.deleteMutation,g.deleteMutation]),C=aje({isLoading:x,currentConfiguration:c}),S=f.useMemo(()=>{switch(c.trigger.type){case dt.SCHEDULED:case dt.SHORTCUT:return;case dt.PRICE_ALERT:return C?i({defaultMessage:"Select stock, token or fund to begin",id:"x/nyvvB4aQ"}):void 0;default:Kt(c.trigger)}},[i,c.trigger,C]),E=c.status==="ACTIVE";return{currentConfiguration:c,setCurrentConfiguration:d,onClickSave:b,onClickToggle:_,onClickDelete:w,isEnabled:E,isLoading:x,isSaveDisabled:C,saveButtonTooltipText:S}}function aje({isLoading:e,currentConfiguration:t}){if(e)return!0;switch(t.trigger.type){case dt.SCHEDULED:case dt.SHORTCUT:return!t.query.prompt;case dt.PRICE_ALERT:{const n=t.trigger;if(!n.symbol||n.symbol.trim()==="")return!0;switch(n.alertType){case Xr.TARGET_PRICE:if(!n.price||n.price<=0)return!0;break;case Xr.MOVEMENT_AMOUNT:{const r=n.percentageDecimalLowerBound!==sf/100&&n.percentageDecimalLowerBound!==0;if(!(n.percentageDecimalUpperBound!==rf/100&&n.percentageDecimalUpperBound!==0)&&!r)return!0;break}default:Kt(n)}break}default:Kt(t.trigger)}return!1}const NBt=(e,t)=>{if(!e?.id)return!1;const{status:n,...r}=e,{status:s,...a}=t;return ys(r,a)&&n!==s},CN=f.memo(({open:e,onClose:t,initialConfiguration:n,onSave:r,source:s,trackEvent:a,errorMessage:i})=>{const l=wde(),{$t:c}=l,u="automation-modal",[d,m]=f.useState(!1),[p,h]=f.useState(null),[g,y]=f.useState(!1),x=f.useCallback(()=>{h(null),t()},[t]),{currentConfiguration:v,setCurrentConfiguration:b,onClickSave:_,onClickDelete:w,isLoading:C,isSaveDisabled:S,saveButtonTooltipText:E}=TBt({initialConfiguration:n,isModalOpened:e,reason:u,source:s,onSuccess:O=>{let A=O;O==="updated"&&NBt(n,v)&&(A=v.status==="PAUSED"?"paused":"resumed"),r?.(A),x(),m(A)},onError:h});f.useEffect(()=>{e&&(c7(s)?a?.("task modal opened",{source:s}):_oe(s)?a?.("price alert modal opened",{source:s}):woe(s)&&a?.("shortcut modal opened",{source:s}))},[e,s,a]);const M=f.useMemo(()=>{const O=[];return v.id&&O.push({text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),variant:"rejecter",onClick:w,disabled:C}),O.push({text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:x}),O.push({text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:_,disabled:S,tooltipText:E}),O},[c,v.id,C,S,w,_,x,E]),k=f.useCallback(O=>{const A=O?"ACTIVE":"PAUSED",j=A==="PAUSED"?"paused":"resumed";switch(b({...v,status:A}),v.trigger.type){case dt.SCHEDULED:c7(s)&&rje(j)&&a?.("task modal action",{source:s,action:j});break;case dt.PRICE_ALERT:_oe(s)&&EBt(j)&&a?.("price alert modal action",{source:s,action:j});break;case dt.SHORTCUT:woe(s)&&kBt(j)&&a?.("shortcut modal action",{source:s,action:j});break;default:Kt(v.trigger)}},[v,b,s,a]),N=f.useMemo(()=>{if(!v.id||v.trigger.type===dt.PRICE_ALERT)return null;const O=v.status!=="PAUSED";return o.jsx(Ji,{active:O,text:O?"Active":"Paused",onChange:k,disabled:C,testId:"automation-status-switch"})},[v.id,v.status,v.trigger.type,k,C]),P=f.useCallback(O=>{const A=RU(O);b(A)},[b]),L=f.useCallback(()=>{m(!1)},[]);return f.useEffect(()=>{n&&!g&&e&&(P(n),y(!0))},[P,g,n,e]),f.useEffect(()=>{e||y(!1)},[e]),o.jsxs(o.Fragment,{children:[o.jsx(on,{isOpen:e,onClose:x,title:HZe({intl:l,triggerType:v.trigger.type}),titleTextVariant:"base",footerContent:N,actionList:M,footerClassname:"!pt-4",wrapperClassname:"!w-full",children:o.jsx(wN,{configuration:v,onConfigurationChange:P,errorMessage:(i||p)??void 0,onError:h})}),o.jsx(Xd,{message:d?zZe({intl:l,triggerType:v.trigger.type,actionPerformed:d}):"",variant:"success",isVisible:!!d,handleClose:L})]})});CN.displayName="AutomationModal";const jBt=Object.freeze(Object.defineProperty({__proto__:null,AutomationModal:CN},Symbol.toStringTag,{value:"Module"})),ije=(e,t)=>{const{value:n,loading:r}=Dt({flag:"tasks-price-alerts-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},SN=(e,t)=>{const{value:n,loading:r}=Dt({flag:"tasks-settings-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},ABt=(e,t)=>{const n={selectedOption:"price",priceValue:"",percentValue:vN,positiveSelected:!0,negativeSelected:!0,additionalInstructions:"",selectedSymbol:t??null,inputValue:t??""};if(!e)return n;const{subscription:r,prompt:s}=e,a=r?q4e({prompt:s,symbol:r.event_entity}):tBt(s).additionalInstructions,i={...n,additionalInstructions:a};if(!r)return i;const{event_type:l,value_lower_bound:c,value_upper_bound:u,event_entity:d}=r;if(i.selectedSymbol=d??null,i.inputValue=d??"",l==="STOCK_PRICE_TARGET")i.selectedOption="price",u&&u!==rf?i.priceValue=`$${u}`:c&&c!==sf&&(i.priceValue=`$${c}`);else if(l==="STOCK_PRICE_MOVEMENT"){i.selectedOption="movement";const m=u!=null&&u!==rf,p=c!=null&&c!==sf;i.positiveSelected=m,i.negativeSelected=p,m?i.percentValue=`${u}`:p&&(i.percentValue=`${Math.abs(c)}`)}return i},oje=R.memo(({symbol:e,buttonProps:t,watchlistAddedForSymbol:n,modalOpenedSource:r})=>{const{trackEvent:s}=je(),a=f.useMemo(()=>{try{return decodeURIComponent(e.toUpperCase())}catch{return e.toUpperCase()}},[e]),{data:i,isLoading:l}=We({queryKey:["getFinanceTicker",a],queryFn:()=>hvt({ticker:a,reason:"finance-ticker-supported-check"}),staleTime:1/0}),[c,u]=f.useState(!1),{isMobileStyle:d}=Ce(),{$t:m}=Z(),p=!!i?.supported,h=!!(i?.supported&&n),g=n?`finance-alert-watchlist-${a}`:"finance-alert-page-visit",y=(p||h)&&!c,{variation:x,loading:v}=SN(!1),{variation:b,loading:_}=ije(!1),w=f.useCallback(()=>u(!1),[]),C=f.useCallback(()=>{s("price alert modal opened",{source:r}),u(!0)},[r,s]);return l||!i?.supported||v||_?null:o.jsxs(o.Fragment,{children:[o.jsx(BT,{cueKey:g,title:m({defaultMessage:"Set an alert for {ticker}",id:"bb+ueMBxHa"},{ticker:a}),enabled:y,placement:"bottom",size:"sm",children:o.jsx(pe,{text:d?void 0:m({id:"hrmMcFoV7/",defaultMessage:"Price Alert"}),size:"small",variant:"border",icon:ede,onClick:C,...t})},g),x&&b?o.jsx(CN,{open:c,onClose:w,source:"settings_create",initialConfiguration:gge({symbol:e})}):o.jsx(EN,{isOpen:c,onClose:w,symbol:a})]})});oje.displayName="FinanceAddAlertIfSupported";const EN=R.memo(({isOpen:e,onClose:t,symbol:n,task:r})=>{const s=_t(),{deprecatedOpenToast:a}=Mn(),i=!!r,[l,c]=f.useState(null),[u,d]=f.useState("price"),{isMobileStyle:m}=Ce(),[p,h]=f.useState(""),{$t:g}=Z(),[y,x]=f.useState(n??null),[v,b]=f.useState(!1),{data:_}=We({queryKey:mb({symbol:y}),queryFn:()=>Zd({symbol:y}),enabled:!!y&&e,refetchInterval:5*1e3}),[w,C]=f.useState(""),[S,E]=f.useState(""),[M,k]=f.useState(!0),[N,P]=f.useState(!0),L=f.useMemo(()=>{if(u!=="price"||!_?.price)return;const re=parseFloat(w.replace(/[^0-9.]/g,""));if(!(isNaN(re)||re===_.price))return re>_.price?"above":"below"},[w,_?.price,u]),O=f.useCallback(()=>{b(!1),x(n??null)},[n]),{createMutation:A,updateMutation:j,deleteMutation:T}=nje({onCreateSuccess:()=>{t(),b(!1),O(),a(g({defaultMessage:"Price alert created",id:"YccmIRCItP"}),"success",3,void 0,g({defaultMessage:"Manage Alerts",id:"t6akfMv9BC"}),()=>{s.push("/account/tasks?tab=alerts")})},onCreateError:()=>{a(g({defaultMessage:"Failed to create price alert",id:"vkLT4iLR3O"}),"error",3,g({defaultMessage:"Please try again",id:"fHqssj/1KO"})),b(!1)},onUpdateSuccess:()=>{t(),b(!1),O(),a(g({defaultMessage:"Price alert updated",id:"wTPvmuiyuE"}),"success",3,void 0,g({defaultMessage:"Manage Alerts",id:"t6akfMv9BC"}),()=>{s.push("/account/tasks?tab=alerts")})},onUpdateError:()=>{a(g({defaultMessage:"Failed to update price alert",id:"Fpz5cXYABV"}),"error",3,g({defaultMessage:"Please try again",id:"fHqssj/1KO"})),b(!1)},onDeleteSuccess:()=>{t()}}),I=f.useCallback(()=>{t(),O()},[t,O]),U=f.useCallback(()=>{r&&T.mutate(r.id)},[r,T]),B=a7({selectedSymbol:y,symbol:n,quote:_,alertType:"price",priceValue:w,$t:g}),D=a7({selectedSymbol:y,symbol:n,quote:_,alertType:"movement",percentValue:S,$t:g}),W=B.baseInstructions,z=B.displayInstructions,$=D.baseInstructions,X=D.displayInstructions;f.useEffect(()=>{if(e){const re=ABt(r,n);c(re),d(re.selectedOption),C(re.priceValue),E(re.percentValue),k(re.positiveSelected),P(re.negativeSelected),h(re.additionalInstructions),x(re.selectedSymbol)}else c(null),O()},[e,r,n,O]);const{locale:q}=Z();f.useEffect(()=>{if(i&&_?.currency&&w&&w.startsWith("$")){const re=bN(_.currency,q);re!=="$"&&C(w.replace("$",re))}},[i,_?.currency,q,w]);const Y=f.useCallback(()=>{b(!0);const re=y??n;if(!re){b(!1);return}const me=i7({symbol:re,alertType:u,priceValue:w,priceThreshold:L,percentValue:S,positiveSelected:M,negativeSelected:N,baseInstructions:u==="price"?W:$,additionalInstructions:p});if(!me){b(!1);return}i&&r?j.mutate({taskId:r.id,payload:me}):A.mutate(me)},[i,r,y,n,u,w,L,S,M,N,p,W,$,A,j]),G=f.useMemo(()=>{if(!i||!l)return!0;const re={selectedOption:u,priceValue:w,percentValue:S,positiveSelected:M,negativeSelected:N,additionalInstructions:p,selectedSymbol:y},{inputValue:se,...me}=l;return!ys(re,me)},[i,l,u,w,S,M,N,p,y]),J=f.useMemo(()=>{const re=w.replace(/[^0-9.]/g,""),se=S.replace("%","");return u==="price"?!y||!re||!L:!y||!se},[y,u,w,S,L]),K=f.useMemo(()=>J||!G,[J,G]),te=f.useMemo(()=>[{text:g({id:"47FYwba+bI",defaultMessage:"Cancel"}),onClick:I,variant:"border"},{text:g(i?{id:"KjhtiKJItq",defaultMessage:"Edit Alert"}:{id:"KHrQobwBBl",defaultMessage:"Add Alert"}),onClick:Y,variant:"primary",disabled:i?K:J,isLoading:v}],[Y,g,J,v,I,i,K]);return o.jsxs(on,{isOpen:e,onClose:t,title:g({id:"hrmMcFoV7/",defaultMessage:"Price Alert"}),variant:m?"bottom-sheet":"default",children:[o.jsx("div",{className:"gap-md flex min-h-[60vh] flex-col md:min-h-0",children:o.jsx(lz,{variant:"full",selectedSymbol:y,selectedOption:u,onSymbolChange:x,onOptionChange:d,showSymbolInput:!i,currentPrice:_?.price,priceValue:w,onPriceValueChange:C,percentValue:S,onPercentValueChange:E,positiveSelected:M,onPositiveChange:k,negativeSelected:N,onNegativeChange:P,additionalInstructions:p,onAdditionalInstructionsChange:h,displayPriceInstructions:z,displayMovementInstructions:X,externalInputValue:l?.inputValue,currency:_?.currency??void 0})}),o.jsxs("div",{className:"mt-md flex w-full items-center justify-between",children:[o.jsx("div",{children:i&&o.jsx(pe,{text:g({id:"K3r6DQW7h+",defaultMessage:"Delete"}),variant:"border",onClick:U,isLoading:T.isPending})}),o.jsx("div",{className:"gap-sm md:-mb-md flex items-center",children:te.map(re=>o.jsx(pe,{text:re.text,onClick:re.onClick,variant:re.variant,disabled:re.disabled,isLoading:re.isLoading},re.text))})]})]})});EN.displayName="FinanceAlertModal";const IBt=Object.freeze(Object.defineProperty({__proto__:null,FinanceAddAlertIfSupported:oje,FinanceAlertModal:EN},Symbol.toStringTag,{value:"Module"})),Bp=(e,t)=>{const{value:n,loading:r}=Dt({flag:"tasks-automations-rename",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},lje=R.memo(({isOpened:e,onOpen:t,onClose:n,onEdit:r})=>{const s=Z(),a=_t(),{isMobileStyle:i}=Ce(),{variation:l,loading:c}=Bp(!1),u=f.useMemo(()=>[{type:"default",text:s.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),onClick:r,testId:"task-widget-edit"},{type:"default",text:l?s.formatMessage({defaultMessage:"View Automations",id:"ykWUMgOBHX"}):s.formatMessage({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),rightElement:o.jsx("div",{className:"flex items-center",children:o.jsx(Zn,{size:16})}),onClick:()=>{a.push("/account/tasks")},testId:"task-widget-view-tasks"}],[s,r,l,a]);return c?null:o.jsx(sn,{placement:"bottom-start",items:u,onOpen:t,onClose:n,isMobileStyle:i,children:o.jsx(Te,{size:"tiny",icon:Pue,extraCSS:V("",{"!text-foreground !bg-subtle":e})})})});lje.displayName="TaskWidgetMenu";const RBt=e=>({id:e.id,title:e.title,prompt:e.prompt,schedule:PE(e.scheduleInfo),searchModel:e.searchModel,sources:e.sources||["web"]}),Coe=(e={})=>e.prefill?e.prefill:e.initial?RBt(e.initial):{...LZe(),searchModel:de.PRO},xv=({text:e,onClick:t,variant:n="secondary",disabled:r=!1})=>o.jsx(pe,{text:e,onClick:t,disabled:r,testId:`task-modal-${e.toLowerCase()}-button`,variant:n==="secondary"?"common":"inverted",extraCSS:V("min-w-[100px]")}),PBt=(e,t)=>e.schedule.kind==="ONCE"&&new Date(e.schedule.year,e.schedule.month,e.schedule.day,e.schedule.hour,e.schedule.minute)<=new Date(Date.now())?{ok:!1,message:t({defaultMessage:"Please schedule this task for a future time.",id:"loBg9tvLRE"})}:{ok:!0};function cz({open:e,onClose:t,onSuccess:n,initial:r,prefill:s,errorMessage:a,source:i}){const l="task-modal",{formatMessage:c}=Z(),{trackEvent:u}=je(),{configuredModel:d}=rr();f.useEffect(()=>{e&&u("task modal opened",{source:i})},[e,i,u]);const[m,p]=f.useState(a),{createMutation:h,updateMutation:g,deleteMutation:y,isMutationLoading:x,invalidateAndClose:v}=sje({reason:l,source:i,onSuccess:f.useCallback(j=>{n?.(j),t?.()},[n,t]),onError:p}),b=f.useRef(r?QG(r):void 0);f.useEffect(()=>{e&&(b.current=r?QG(r):void 0)},[e,r]);const[_,w]=f.useState(()=>Coe({initial:r,prefill:s})),C=f.useMemo(()=>Si[_.searchModel]??ce.SEARCH,[_.searchModel]);f.useEffect(()=>{p(e?a:void 0)},[e,a]),f.useEffect(()=>{e&&w(Coe({initial:r,prefill:s}))},[e,r,s,d]),f.useEffect(()=>{const j=ou(C);w(T=>({...T,searchModel:j}))},[C]);const S=!!b.current,E=b.current?.status==="PAUSED",M=b.current?.status==="COMPLETED",k=j=>w(T=>({...T,...j})),N=j=>w(T=>({...T,schedule:{...T.schedule,...j}})),P=()=>{p(void 0);const j=PBt(_,c);if(!j.ok){p(j.message);return}S?g.mutate({id:b.current.id,payload:{task_name:_.title,prompt:_.prompt,schedule:Dv(_.schedule),status:"ACTIVE",model_preference:_.searchModel,sources:_.sources}},{onSuccess:()=>{u("task modal action",{source:i,action:"updated"}),v("updated",b.current.id)}}):h.mutate({task_id:_.id,task_name:_.title,prompt:_.prompt,schedule:Dv(_.schedule),model_preference:_.searchModel,sources:_.sources},{onSuccess:()=>{u("task modal action",{source:i,action:"created"})}})},L=f.useMemo(()=>{if(!S)return!0;const j=_.prompt!==b.current?.prompt,T=b.current.scheduleInfo,I=Dv(_.schedule),U=!ys(I.rrule,T.rrule)||!ys(I.tzid,T.tzid),B=_.schedule.kind==="ONCE"&&I.start_at!==T.start_at,D=_.searchModel!==b.current?.searchModel,W=!ys(_.sources||["web"],b.current?.sources||["web"]);return j||(U||B||D)||W},[S,_,b]),{variation:O,loading:A}=Bp(!1);return A?null:o.jsx(on,{isOpen:e,onClose:t,title:c(O?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),titleTextVariant:"base",modalContentClassname:"!pb-4 md:!pb-4",children:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx(_N,{trigger:{type:dt.SCHEDULED,schedule:_.schedule},prompt:_.prompt,onPromptChange:j=>k({prompt:j}),error:m}),o.jsx(oz,{schedule:_.schedule,onScheduleChange:N}),o.jsx(gN,{searchModel:_.searchModel,onSearchModelChange:j=>k({searchModel:j}),sources:_.sources||["web"],onSourcesChange:j=>k({sources:j})}),o.jsxs(H,{variant:"background",className:"mt-md pt-md -mx-md px-md flex items-center justify-between border-t",children:[S&&o.jsxs("div",{className:"flex gap-4",children:[!M&&o.jsx(xv,{text:c(E?{defaultMessage:"Resume",id:"3y9DGgura7"}:{defaultMessage:"Pause",id:"tFFMkFDBMO"}),onClick:()=>g.mutate({id:b.current.id,payload:{status:E?"ACTIVE":"PAUSED"}},{onSuccess:()=>{const j=E?"resumed":"paused";u("task modal action",{source:i,action:j}),v(j,b.current.id)}}),disabled:x}),o.jsx(xv,{text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>y.mutate(b.current.id),disabled:x})]}),o.jsxs("div",{className:"ml-auto flex gap-4",children:[o.jsx(xv,{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:()=>t?.()}),o.jsx(xv,{text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",disabled:x||!_.prompt||!L,onClick:P})]})]})]})})}const OBt=Object.freeze(Object.defineProperty({__proto__:null,FormButton:xv,default:cz},Symbol.toStringTag,{value:"Module"}));var Soe={};const LBt=()=>o.jsxs(wn,{className:"flex w-full items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"bg-subtle size-4 shrink-0 rounded"}),o.jsx("div",{className:"bg-subtle h-4 w-32 rounded"})]}),o.jsx("div",{className:"bg-subtle h-4 w-20 rounded"})]}),cje=R.memo(({data:e})=>{const{$t:t}=Z(),{suggested_prompt:n,suggested_schedule:r,widget_uuid:s}=e,a=f.useMemo(()=>({id:s,title:"",prompt:n,schedule:r?PE(r):Vs(),searchModel:de.PRO}),[n,r,s]),i=Jn(),l=f.useCallback(()=>{if(!Soe.NEXT_PUBLIC_IS_SIDECAR_BUILD)throw new Error("handleOpenTaskFromSidecar can only be called in sidecar mode");i.openTab({url:`${window.location.origin}${nn.Tasks.href}`})},[i]),[c,u]=f.useState(!1),[d,m]=f.useState(!1),[p,h]=f.useState(!1),[g,y]=f.useState(null),[x,v]=f.useState(!1);f.useEffect(()=>{if(!g)return;const D=setTimeout(()=>{y(null)},2e3);return()=>clearTimeout(D)},[g]);const b=Z(),{data:_,isLoading:w}=We({queryKey:qU(s),queryFn:()=>L5({taskId:s,reason:"task-widget"})}),C=f.useCallback(()=>{_?.type==="ALERT"&&_?.subscription?h(!0):m(!0)},[_]),S=f.useMemo(()=>{if(!_)return null;if(_.type==="ALERT"&&_.subscription)return LYe({..._.subscription,event_type:_.subscription.event_type},b);const D=PE(_.scheduleInfo);return{kind:DZe(D.kind,b),friendly:PZe(D,b),isRecurring:D.kind!=="ONCE"}},[_,b]),E=f.useMemo(()=>{if(!_)return"";if(_.type==="ALERT"&&_.subscription){const{subscription:D}=_,W=D.event_entity||"",z=D.event_type==="STOCK_PRICE_TARGET",$=D.event_type==="STOCK_PRICE_MOVEMENT";if(z){const X=D.value_upper_bound||D.value_lower_bound;if(X)return`${W} reaches $${X}`}else if($){const X=D.value_upper_bound||0,q=D.value_lower_bound||0,Y=X>0,G=q<0;if(Y&&G)return`${W} moves ${X}%`;if(Y)return`${W} rises ${X}%`;if(G)return`${W} falls ${Math.abs(q)}%`}return`Price alert for ${W}`}return _.prompt},[_]),M=f.useMemo(()=>{if(!g)return null;const D=g==="created"?o.jsx(he,{defaultMessage:"Task created",id:"991WgJt61N"}):g==="updated"?o.jsx(he,{defaultMessage:"Task updated",id:"sQGGdcVjgL"}):g==="deleted"?o.jsx(he,{defaultMessage:"Task deleted",id:"kGP3l1jr/4"}):g==="paused"?o.jsx(he,{defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}):o.jsx(he,{defaultMessage:"Task resumed",id:"fqAqWnF85q"});return o.jsx(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:an},children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ha,{className:"text-super",size:16}),o.jsx(F,{variant:"small",color:"super",className:"truncate",children:D})]})},"confirmed")},[g]),{variation:k,loading:N}=Bp(!1),P=f.useCallback(()=>{v(!1)},[]),L=f.useCallback(()=>v(!0),[]),O=f.useMemo(()=>t(k?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),[t,k]),A=f.useMemo(()=>o.jsx(ur,{size:12}),[]),j=f.useCallback(()=>{m(!1),v(!1)},[]),T=f.useCallback(()=>{h(!1),v(!1)},[]),I=f.useCallback(D=>{m(!1),v(!1),y(D)},[]),U=f.useCallback(()=>{u(!0)},[]),B=f.useCallback(()=>{u(!1)},[]);return N?null:o.jsx(Ho,{widgetType:"task",widgetName:"task",widgetSize:"mini",children:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-subtler border-subtlest p-md group relative flex h-14 items-center justify-between gap-2 rounded-xl border transition-transform duration-200 hover:scale-[1.01] hover:transform",onMouseEnter:L,onMouseLeave:P,children:o.jsx(Je,{mode:"wait",children:w?o.jsx(LBt,{}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex min-w-0 shrink items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:_?.type==="ALERT"&&_?.subscription?o.jsx(ede,{size:16,className:"text-quiet shrink-0"}):o.jsx(_p,{size:16,className:"text-quiet shrink-0"})}),o.jsx("div",{className:"flex w-full min-w-0 flex-col items-start",children:_?o.jsx(F,{variant:"small",color:"default",className:"w-full truncate",children:E}):o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"small",color:"default",className:"w-full truncate",children:n}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"truncate",children:o.jsx(he,{defaultMessage:"Create a task to get this sent automatically.",id:"1AmBIpC9N9"})})]})})]}),Soe.NEXT_PUBLIC_IS_SIDECAR_BUILD?o.jsx(Te,{size:"tiny",icon:Vu,onClick:l}):o.jsx(Je,{mode:"wait",children:M||(S?o.jsx("div",{className:"flex min-w-0 shrink-0 items-center gap-1.5",children:(x||c)&&_?o.jsx(lje,{isOpened:c,onOpen:U,onClose:B,onEdit:C}):o.jsxs(o.Fragment,{children:[S.isRecurring&&o.jsx(Z7e,{size:16,className:"shrink-0"}),o.jsx(F,{className:"truncate",variant:"small",children:S.kind}),o.jsx(F,{className:"truncate",variant:"small",color:"light",children:S.friendly})]})}):o.jsx(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:an},children:o.jsx(pe,{text:O,leadingComponent:A,size:"small",onClick:C})},"default"))})]})})}),o.jsx(bc,{children:o.jsx(cz,{source:"task_widget",open:d,prefill:_?void 0:a,initial:_??void 0,onClose:j,onSuccess:I})}),_&&o.jsx(EN,{isOpen:p,onClose:T,task:_,symbol:_.subscription?.event_entity})]})})});cje.displayName="TaskWidget";const uje=R.memo(e=>{const{data:t}=e,{menuItems:n}=Dx();return o.jsx(Ho,{widgetType:"time",widgetName:"time",widgetSize:"full",children:o.jsxs(H,{className:"flex w-full",children:[o.jsx(F,{children:o.jsx(H,{className:"mr-md pr-md border-r font-mono text-4xl",children:t.time})}),o.jsxs("div",{children:[o.jsx(F,{variant:"smallBold",children:t.date}),o.jsx(F,{variant:"small",color:"light",children:t.location?`${t.location}`:null})]}),n&&n.length>0&&o.jsx("div",{className:"-mr-sm -mt-sm flex grow justify-end",children:o.jsx("div",{children:o.jsx(br.Menu,{menuItems:n})})})]})})});uje.displayName="TimeWidget";const dje=R.memo(e=>{const{data:t}=e,{duration_seconds:n}=t,{menuItems:r}=Dx(),{result:s}=ln(),a=s?.uuid,i=f.useMemo(()=>`timer_widget_state_${a}_${n}`,[a,n]),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[m,p]=f.useState(null),[h,g]=f.useState(n*1e3),[y,x]=f.useState(!0),[v,b]=f.useState(!1),_=f.useRef(void 0),w=f.useRef(void 0),C=f.useRef(!1),S=f.useRef(null);f.useEffect(()=>{if(!a)return;const A=Oe.getItem(i);if(A)try{const j=JSON.parse(A),T=Date.now();if(j.status==="expired"){d(!0),g(0),p(null);return}if(j.pausedAt&&j.remainingMillis!==void 0)c(!0),g(j.remainingMillis),p(null);else if(j.endTime){const I=j.endTime-T;if(I>0)p(j.endTime),g(I),c(!1);else{g(0),p(null),d(!0);const U={status:"expired",endTime:0,remainingMillis:0};Oe.setItem(i,JSON.stringify(U))}}}catch{Oe.removeItem(i)}else{const j=Date.now()+n*1e3;p(j),c(!1)}},[i,n,a]),f.useEffect(()=>{if(!a||u)return;const A=l?{status:"paused",endTime:0,pausedAt:Date.now(),remainingMillis:h}:{status:"running",endTime:m||Date.now()+h};Oe.setItem(i,JSON.stringify(A))},[h,l,m,i,u,a]);const E=f.useCallback(()=>{if(C.current||u)return;C.current=!0,g(0),p(null),d(!0),b(!0);const A={status:"expired",endTime:0,remainingMillis:0};Oe.setItem(i,JSON.stringify(A)),!y&&S.current&&S.current.play().catch(()=>{})},[i,u,y]),M=f.useCallback(()=>{if(!l&&m){const A=Date.now(),j=m-A;j>0?(g(j),_.current=requestAnimationFrame(M)):E()}},[l,m,E]);f.useEffect(()=>{if(!l&&m&&h>0&&!u){_.current=requestAnimationFrame(M);const A=m-Date.now();A>0&&(w.current=window.setTimeout(E,A))}return()=>{_.current&&cancelAnimationFrame(_.current),w.current&&clearTimeout(w.current)}},[l,m,h,u,M,E]),f.useEffect(()=>{const A=()=>{if(!document.hidden&&!l&&m){const j=Date.now(),T=m-j;T>0?g(T):E()}};return document.addEventListener("visibilitychange",A),()=>{document.removeEventListener("visibilitychange",A)}},[l,m,E]);const k=f.useCallback(()=>{if(!u)if(l){const A=Date.now()+h;p(A),c(!1)}else c(!0),p(null)},[u,l,h]),N=f.useCallback(()=>{_.current&&(cancelAnimationFrame(_.current),_.current=void 0),w.current&&(clearTimeout(w.current),w.current=void 0),C.current=!1;const A=Date.now()+n*1e3;d(!1),c(!1),g(n*1e3),p(A)},[n]),P=f.useCallback(()=>{x(A=>!A)},[]),L=f.useCallback(()=>{b(!1),S.current&&(S.current.pause(),S.current.currentTime=0)},[]),O=f.useMemo(()=>{const A=Math.ceil(h/1e3),j=Math.floor(A/3600),T=Math.floor(A%3600/60),I=Math.floor(A%60),U=T.toString().padStart(2,"0"),B=I.toString().padStart(2,"0");return j>0?`${j}:${U}:${B}`:`${U}:${B}`},[h]);return o.jsx(Ho,{widgetType:"timer",widgetName:"timer",widgetSize:"full",children:o.jsxs(H,{className:V("relative flex transition-all duration-200",{"hover:scale-[1.01]":v}),children:[v&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"-m-md absolute inset-0 z-20 cursor-pointer rounded-xl",onClick:L,title:"Click anywhere to stop alarm","aria-label":"Stop alarm"}),o.jsx("div",{className:"-m-md to-attention/20 from-negative/20 absolute inset-0 animate-pulse rounded-xl bg-gradient-to-br"})]}),o.jsxs("div",{className:"relative z-10 flex w-full items-center",children:[o.jsxs(H,{className:"gap-sm flex items-center",children:[o.jsx(pe,{variant:"primaryGhost",size:"small",onClick:k,icon:l?Aue:jue,disabled:u,pill:!0}),o.jsx(pe,{variant:"primaryGhost",size:"small",onClick:N,icon:J7e,"aria-label":"Restart timer",disabled:v,pill:!0})]}),o.jsx(F,{className:"flex-1",children:o.jsx(H,{className:`pl-lg font-mono text-2xl ${v?"text-negative":""}`,children:O})}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(BT,{cueKey:`timer-unmute-${a}`,title:"Tap to unmute",enabled:y&&!u,placement:"top",sideOffset:8,variant:"common",size:"xs",children:o.jsx(pe,{variant:"primaryGhost",size:"small",onClick:P,icon:y?Iue:Rue,disabled:u,pill:!0})}),r&&r.length>0&&o.jsx(br.Menu,{menuItems:r})]})]}),o.jsx("audio",{ref:S,src:"https://r2cdn.perplexity.ai/Hole_In_One.wav?v=1",preload:"auto",style:{display:"none"},loop:!0})]})})});dje.displayName="TimerWidget";function fje(){const[e,t]=f.useState(!1),n=Tp(),r=f.useCallback(s=>{rn(KQ,s.toString()),t(s)},[t]);return f.useEffect(()=>{const s=Fn(KQ);t(s==="true"||s===void 0&&n!=="US")},[n]),f.useMemo(()=>({prefersMetric:e,setPrefersMetric:r}),[e,r])}const mje=R.memo(({day:e,icon:t,high:n,low:r,selected:s})=>o.jsxs("div",{className:"relative col-span-1",children:[s&&o.jsx("div",{className:"-inset-sm right-md absolute",children:o.jsx("div",{className:"absolute inset-0 rounded-md bg-white opacity-10"})}),o.jsxs("div",{className:"relative flex flex-col items-start",children:[o.jsx(F,{color:"white",children:o.jsx(le,{icon:t,size:"xl",className:"mb-xs -ml-two"})}),o.jsx(F,{variant:"smallBold",color:"white",children:e}),o.jsxs("div",{className:"mt-xs gap-x-xs flex",children:[o.jsx(F,{variant:"smallCaps",color:"white",className:"gap-x-two flex",children:o.jsxs("span",{children:[n,""]})}),o.jsx(F,{variant:"smallCaps",color:"white",className:"gap-x-two flex opacity-75",children:o.jsxs("span",{children:[r,""]})})]})]})]}));mje.displayName="ForecastItem";const Eoe=e=>e.time,Moe=e=>e.temp,DBt="white",koe="white",pR="rgba(255, 255, 255, 0.5)",Toe="rgba(255, 255, 255, 0.3)",Noe="font-mono text-[11px]",$0={top:30,right:0,bottom:5,left:0},FBt=100,UBt=35,BBt=40,uz=130,pje=R.memo(({forecast:e,activeDay:t,isMetric:n})=>{const{locale:r}=Z(),s=f.useMemo(()=>e.map(S=>S?.hour?.map(E=>({time:new Date(E.time),temp:n?E.temp_c:E.temp_f}))),[e,n]),a=f.useMemo(()=>gi(s.flat(),Moe),[s]),i=f.useMemo(()=>s[t]??[],[t,s]),l=f.useRef(null),{width:c,height:u}=RH(l),d=c/FBt,{xRange:m,yRange:p}=Mw({width:c,height:u,margin:$0,maxYLabelWidth:UBt}),h=f.useMemo(()=>Rp({range:m,domain:gi(i,Eoe),round:!0}),[i,m]),g=u/BBt,y=f.useMemo(()=>ef({range:p,domain:a,nice:!0,round:!0}),[p,a]),x=f.useMemo(()=>Qu().x(S=>h(Eoe(S))).y(S=>y(Moe(S))).curve(R_t),[h,y]),v=f.useMemo(()=>x(i),[x,i]),b=f.useCallback(S=>`${S}`,[]),_=f.useCallback(S=>typeof S=="number"?S.toString():S.toLocaleString(r,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00",""),[r]),w=f.useCallback((S,E,M)=>({className:Noe,fill:koe,dx:E===0?"-0.3em":E===M.length-1?"0.3em":"0",dy:"0.3em",textAnchor:E===0?"start":E===M.length-1?"end":"middle"}),[]),C=f.useMemo(()=>({className:Noe,textAnchor:"start",dx:"0.75em",dy:"-0.5em",fill:koe}),[]);return o.jsx("div",{className:"relative",ref:l,style:{height:uz},children:o.jsxs(Bx,{width:c,height:u,children:[o.jsx(nf,{orientation:Fa.bottom,scale:h,top:u,stroke:pR,hideAxisLine:!0,numTicks:d,tickStroke:Toe,tickLabelProps:w,tickFormat:_}),o.jsx(nf,{orientation:Fa.left,left:$0.left,hideAxisLine:!0,tickFormat:b,scale:y,stroke:pR,tickStroke:Toe,hideTicks:!0,tickLabelProps:C,numTicks:g}),o.jsx(Up,{left:$0.left,scale:y,width:c-$0.right-$0.left*2,strokeDasharray:"2,2",stroke:pR,pointerEvents:"none",numTicks:g}),o.jsx("path",{d:v,stroke:DBt,strokeWidth:2,fill:"none",strokeLinecap:"round",shapeRendering:"geometricPrecision"})]})})});pje.displayName="HourlyTemperature";const VBt=Object.freeze(Object.defineProperty({__proto__:null,HOURLY_TEMPERATURE_HEIGHT:uz,HourlyTemperature:pje},Symbol.toStringTag,{value:"Module"})),$Bt=we(async()=>{const{HourlyTemperature:e}=await Q(async()=>{const{HourlyTemperature:t}=await Promise.resolve().then(()=>VBt);return{HourlyTemperature:t}},void 0);return{default:e}},{loading:()=>o.jsx("div",{style:{height:uz}})}),hje=R.memo(e=>{const{$t:t}=Z(),{prefersMetric:n,setPrefersMetric:r}=fje(),s=n,[a,i]=f.useState(0),[l,c]=f.useState(!1),u=e,{menuItems:d}=Dx(),{openModal:m}=wt(),{permissionStatus:p}=mx(),{submitQuery:h}=ta(),{trackEvent:g}=je(),{locale:y}=Z(),{value:x}=r5({flag:"weather-provider",defaultValue:"weatherapi",subjectType:"visitor_id"}),v=f.useCallback(()=>{g("precise location modal opened",{origin:"weather_widget"}),m("locationPermissionModal",{onPermissionGranted:N=>{c(!1);const P=Ei();h({rawQuery:"weather",copilotOverride:!1,attachments:[],collection:null,newFrontendContextUUID:P,promptSource:"device_location_request",querySource:"device_location_request",deviceLocation:{latitude:N.coords.latitude,longitude:N.coords.longitude},shouldRedirectToBackendUUID:!0})},origin:"weather_widget"})},[g,m,h]);f.useEffect(()=>{p!==void 0&&p!=="granted"&&c(!0)},[p]);const b=f.useCallback(()=>{window.open(u.url||"https://www.accuweather.com/","_blank")},[u.url]);if(!u||!u.current||!u.location)return null;const{current:_,location:w,forecast:C}=u,S=C[0],E=_.condition?.icon,M=Ik(gT,E)?Nb[E]:i_,k="col-span-1";return o.jsx(Ho,{widgetType:"weather",widgetName:"weather_forecast",widgetSize:"full",children:o.jsxs(H,{className:"p-md relative select-none",children:[o.jsx(IM,{variant:a===0?_.condition?.icon||"clear-day":C[a]?.icon||"clear-day"}),o.jsxs(H,{className:"gap-md relative flex flex-col drop-shadow-sm",children:[o.jsxs("div",{className:"gap-x-lg flex",children:[o.jsx(H,{className:k,children:o.jsx("div",{className:"flex h-full items-center",children:o.jsxs(F,{className:"gap-x-md flex items-center",color:"white",children:[o.jsx(le,{icon:M,size:40,className:"-mt-xs -ml-two"}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("div",{className:"font-mono text-4xl",children:o.jsx(No,{value:s?_.temp_c??0:_.temp_f??0,suffix:""})}),o.jsxs("div",{className:"ml-xs mt-two flex",children:[o.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer appearance-none",children:o.jsx(F,{color:"white",className:s?"opacity-60":void 0,children:o.jsx("div",{className:"font-mono",children:"F"})})}),o.jsx("button",{onClick:()=>r(!0),className:"ml-xs cursor-pointer appearance-none",children:o.jsx(F,{color:"white",className:s?void 0:"opacity-60",children:o.jsx("div",{className:"font-mono",children:"C"})})})]})]})]})})}),o.jsxs(H,{className:k,children:[_.condition&&o.jsx(F,{variant:"section-title",color:"white",children:_.condition.text}),o.jsx("div",{className:"gap-x-sm flex",children:o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(F,{variant:"smallCaps",color:"white",children:o.jsx(No,{value:s?S?.maxtemp_c??0:S?.maxtemp_f??0,suffix:""})}),o.jsx(F,{variant:"smallCaps",className:"flex opacity-70",color:"white",children:o.jsx(No,{value:s?S?.mintemp_c??0:S?.mintemp_f??0,suffix:""})})]})})]})]}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsxs(H,{className:"flex flex-col items-start justify-center",children:[o.jsx("div",{className:"gap-sm relative flex items-center",children:o.jsxs(Ru,{className:"gap-xs text-xs text-white",children:[o.jsx(Vr,{id:"location-name",children:o.jsxs(F,{variant:"smallBold",className:"text-right",color:"white",children:[w.name,w.is_usa?w.region?`, ${w.region}`:"":`, ${w.country}`]})}),l&&o.jsx(Vr,{id:"precise",children:o.jsx(Te,{onClick:v,size:"small",extraCSS:"!text-white hover:underline hover:opacity-100 !p-0 !h-0 decoration-white/50 decoration-offset-[4px] opacity-70 !font-normal",pill:!0,variant:"noBackground",text:t({defaultMessage:"Use precise location",id:"Si49wMl5CP"})})})]})}),w.localtime&&o.jsx(F,{variant:"tiny",color:"white",className:"opacity-75",children:$ot(w.localtime,y)})]}),d&&d?.length>0&&o.jsx("div",{className:"absolute right-0 top-0",children:o.jsx(br.Menu,{buttonClass:"!text-white opacity-40 hover:opacity-100 hover:!bg-white/10",menuItems:d})})]})]}),o.jsx(H,{className:"mt-xl relative grid grid-cols-3 gap-x-4 gap-y-6 drop-shadow-sm md:grid-cols-6 md:gap-0",children:C.map((N,P)=>o.jsx("button",{onClick:()=>i(P),className:P!==a?"duration-150 hover:opacity-70 active:scale-[0.98]":"",children:o.jsx(mje,{day:qB(N.dow??"",y),high:(s?N.maxtemp_c:N.maxtemp_f)??0,low:(s?N.mintemp_c:N.mintemp_f)??0,icon:Nb[N.icon],selected:a===P})},P))}),o.jsx(H,{className:"mt-sm",children:o.jsx($Bt,{forecast:C,activeDay:a,isMetric:s})}),x==="accuweather"&&o.jsx(H,{className:"mt-lg flex cursor-pointer justify-end",onClick:b,children:o.jsxs(F,{variant:"micro",color:"white",className:"mt-xs gap-xs -mb-sm -mr-xs flex items-center opacity-65 hover:opacity-40",children:["The AccuWeather",o.jsx("sup",{className:"-ml-xs",children:""})," Forecast",o.jsx(le,{icon:xa,size:"xs"})]})})]})})});hje.displayName="WeatherWidget";const gje=()=>null,WBt=we(()=>Q(()=>import("./index-CS1gb-Pa.js"),__vite__mapDeps([126,3,1,4,6,5])),{loading:()=>o.jsx(gje,{})}),HBt=we(async()=>{const{CharityWidget:e}=await Q(async()=>{const{CharityWidget:t}=await import("./CharityWidget-DPsbT5Cm.js");return{CharityWidget:t}},__vite__mapDeps([127,3,1,4,112,113,114,115,5,6]));return{default:e}},{loading:()=>o.jsx(gje,{})}),yje=R.memo(({widgetData:e,menuItems:t,tableCitationOffset:n})=>{const r=Sw(e);return r?Qr(r).with({object:"CalculatorWidget"},s=>o.jsx(br,{menuItems:t,children:o.jsx(b5e,{...s})})).with({object:"FinanceWidget"},()=>null).with({object:"CrunchbaseWidget"},s=>o.jsx(br,{menuItems:t,variant:"noChrome",children:o.jsx(WBt,{...s})})).with({object:"PlaceWidget"},()=>null).with({object:"ShopifyWidget"},()=>null).with({object:"JobsWidget"},()=>null).with({object:"TimeWidget"},s=>o.jsx(br,{menuItems:t,children:o.jsx(uje,{...s})})).with({object:"TimerWidget"},s=>o.jsx(br,{menuItems:t,children:o.jsx(dje,{...s})})).with({object:"CurrencyExchangeWidget"},s=>o.jsx(br,{menuItems:t,className:"overflow-hidden !p-0",variant:"noChrome",children:o.jsx(yTe,{...s})})).with({object:"WeatherWidget"},s=>o.jsx(br,{menuItems:t,variant:"noChrome",children:o.jsx(hje,{...s})})).with({object:"TableWidget"},s=>o.jsx(br,{menuItems:t,variant:"noChrome",children:o.jsx(g4e,{tableData:s,citationOffset:n??0})})).with({object:"SportsEventsWidget"},s=>o.jsx(gv,{data:s})).with({object:"SportsIndvScheduleWidget"},s=>o.jsx(gv,{data:s})).with({object:"SportsStandingsWidget"},s=>o.jsx(gv,{data:s})).with({object:"SportsIndvEventsWidget"},s=>o.jsx(gv,{data:s})).with({object:"FlightStatusWidget"},s=>o.jsx(CTe,{data:s})).with({object:"CharityWidget"},s=>o.jsx(br,{menuItems:t,variant:"noChrome",children:o.jsx(HBt,{...s})})).with({object:"TaskWidget"},s=>o.jsx(cje,{data:s})).with({object:"GenericFallbackWidget"},s=>o.jsx(ETe,{...s})).otherwise(()=>(ne.warn(new Error(`No PanelComponent found for livePanelType: ${r.object}`),{widgetData:e}),null)):null});yje.displayName="LivePanel";const xje=R.memo(({name:e,title:t,values:n,onEntityClick:r})=>{const{inFlight:s}=Ht(),a=f.useCallback(c=>{s||r(c)},[s,r]),i=V("underline-offset-2 cursor-pointer decoration-subtler hover:text-super hover:decoration-super group transition-colors duration-200 ease-in-out",{underline:!s}),l=f.useCallback(({content:c,href:u})=>{const d=u||(c.startsWith("http://")||c.startsWith("https://")?c:`https://${c}`);return o.jsxs(Ye,{href:d,target:"_blank",rel:"noopener",className:i,children:[c,o.jsx(F,{className:"ml-xs inline",color:"light",variant:"tiny",children:o.jsx(le,{icon:_1,size:"xs"})})]})},[i]);return o.jsx(br.Item,{name:e,title:t,value:n.map((c,u)=>o.jsx(vje,{attributeValue:c,index:u,totalValues:n.length,entityStyling:i,handleEntityClick:a,renderLink:l},`${c.id}-${u}`))},e)});xje.displayName="WikiPanelItem";const vje=R.memo(({attributeValue:e,index:t,totalValues:n,entityStyling:r,handleEntityClick:s,renderLink:a})=>{const i=f.useMemo(()=>()=>o.jsx("div",{children:e.value}),[e.value]),l=f.useCallback(()=>s(e.value),[e.value,s]),c=f.useMemo(()=>o.jsxs(Pr,{fallback:i,children:[e.value&&o.jsx(o.Fragment,{children:e.clickable_entity?o.jsx("span",{className:r,onClick:l,children:e.value}):e.value}),e.detail&&o.jsxs("span",{className:"text-quiet ml-1",children:["(",e.source?a({content:e.detail,href:e.source}):e.detail,")"]})]}),[e.clickable_entity,e.detail,e.source,e.value,r,i,l,a]);return o.jsxs("span",{children:[c,t<n-1&&", "]})});vje.displayName="RenderedValueFactory";const joe=0,bje=R.memo(({data:e,isReadonly:t,submit:n,entryUUID:r})=>{const{$t:s}=Z(),{title:a,subtitle:i,attributes:l,image_url:c,source_url:u}=e,{trackEvent:d}=je(),{firstResult:{frontend_context_uuid:m}={}}=Ht(),p=_t(),h=l.length,[g,y]=f.useState(h),x=g===h,v=l.length>2,{menuItems:b}=Dx(),_=f.useCallback(()=>{d("click toggle on knowledge card",{newState:x?"collapsed":"expanded",entryUUID:r??"",type:e.type,id:e.source_url,name:e.title}),y(k=>k===joe?h:joe)},[d,x,h,r,e]),[w,{height:C}]=vc(),S=t,E=Ei(),M=f.useCallback(k=>{if(d("knowledge card link clicked",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title,label:"attributes",value:k}),n({fork:S,rawQuery:k,collection:null,newFrontendContextUUID:S?E:null,existingFrontendContextUUID:S?void 0:m,promptSource:"user",querySource:"entity_link"}),S){const N=new URLSearchParams({q:k,newFrontendContextUUID:E}),P=new URL(window.location.href);P.pathname="search/new",P.search=N.toString();const L=P.toString();p.push(L)}},[n,S,E,m,p,r,e,d]);return f.useEffect(()=>{d("knowledge card shown",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title})},[]),o.jsx("div",{className:"relative",children:o.jsx(ve.div,{animate:C>0?{height:C}:{},transition:{type:"spring",bounce:.2,duration:.2},className:"overflow-hidden",children:o.jsxs("div",{ref:w,className:"gap-md relative flex flex-col",children:[o.jsx("div",{className:"flex items-end justify-between",children:o.jsx(br.Title,{title:a,subtitle:i,image_url:c,href:u,links:e.links,entryUUID:r??"",data:e,children:o.jsx("div",{className:"flex items-start",children:o.jsx("div",{className:"gap-sm flex items-center",children:b&&b?.length>0&&o.jsx(br.Menu,{menuItems:b,buttonClass:"opacity-0 pointer-events-none"})})})})}),x&&o.jsx("div",{className:"gap-sm border-subtlest pt-md md:gap-x-md grid grid-cols-[auto,1fr] border-t",children:l.slice(0,g).map(k=>o.jsx(xje,{name:k.key,title:k.title,values:k.values,onEntityClick:M},k.key))}),o.jsx("div",{children:v&&o.jsx("div",{className:"flex justify-end",children:o.jsx(pe,{variant:"border",fullWidth:!0,text:s(x?{defaultMessage:"Less",id:"mFYgAXM/x4"}:{defaultMessage:"More",id:"I5NMJ8llIi"}),size:"tiny",pill:!0,onClick:_,icon:x?Vy:Bn,extraCSS:"pl-xs w-[76px]"})})})]})})})});bje.displayName="WikiPanel";function zBt(e){if(!e||!e.card_type)return null;const{primaryLink:t,otherLinks:n}=e.links.reduce((s,a)=>(a.type==="PRIMARY"&&!s.primaryLink?s.primaryLink=a:s.otherLinks.push(a),s),{primaryLink:null,otherLinks:[]}),r=e?.media_items?.[0]?.image??e?.image_urls?.[0]??"";return{source_url:t?.url??"",image_url:r,title:e?.title??"",subtitle:e.description??"",attributes:e.attributes??[],type:e.card_type,links:n}}const _je=R.memo(({knowledgePanelData:e,isReadonly:t,submit:n,menuItems:r,entryUUID:s,className:a})=>{const i=f.useMemo(()=>e?zBt(e):null,[e]);return i?o.jsx(br,{menuItems:r,className:a,children:o.jsx(bje,{data:i,submit:n,isReadonly:t,entryUUID:s??""})}):null});_je.displayName="StaticPanel";function u7(e){return e&&"is_widget"in e&&e.is_widget===!0}function GBt(e){return e&&"card_type"in e}function Aoe(e){return"is_code_interpreter"in e&&e.is_code_interpreter===!0&&e.is_image}const wje=R.memo(({data:e,submit:t,isReadonly:n=!1,menuItems:r,tableCitationOffset:s,entryUUID:a})=>o.jsxs(o.Fragment,{children:[!Aoe(e)&&u7(e)&&o.jsx(yje,{widgetData:e,menuItems:r??fe,tableCitationOffset:s}),GBt(e)&&o.jsx(_je,{knowledgePanelData:e,summaryData:null,submit:t,isReadonly:n,menuItems:r??fe,entryUUID:a??""}),Aoe(e)&&o.jsx(t3e,{graphData:e})]}));wje.displayName="ThreadEntryPanel";const zw=({reason:e})=>{const t=xt(),{searchTerm:n}=UB(),r=[zm,{search_term:n??""}],s=Ngt(),a=Hge(),i=Oo(),{mutate:l}=St({mutationKey:["removeWidget"],mutationFn:async({entryUUID:m,data:p})=>u7(p)?Trt({backendUUID:m,url:p.url,rwToken:i,reason:e}):Promise.resolve(),onMutate:async({entryUUID:m,data:p})=>{await t.cancelQueries({queryKey:["results"]}),a(m,h=>u7(p)?{...h,widget_data:h.widget_data?.filter(g=>g.url!==p.url)}:h)}}),{mutate:c}=St({mutationFn:async m=>{try{await ae.DELETE("/rest/thread/delete_all_threads",e,{body:{delete_all:m==="all"},timeoutMs:0})}catch(p){ne.error(p)}},onMutate:async m=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:xn});const p=t.getQueryData(r),h=t.getQueryData(xn);return m==="all"?(t.setQueryData(xn,g=>{const y=g.pages.map(x=>x.map(v=>({...v,thread_count:0})));return{...g,pages:y}}),t.setQueryData(r,g=>({...g,pages:[]}))):m==="standalone"&&t.setQueryData(r,g=>({...g,pages:g.pages.map(y=>y.filter(x=>x.collection?.uuid))})),{previousThreads:p,previousCollections:h}},onSettled:(m,p,h,g)=>{p?(t.setQueryData(r,g?.previousThreads),t.setQueryData(xn,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:xn}),t.invalidateQueries({queryKey:[du]}),t.invalidateQueries({queryKey:[z2]}),s())}}),{mutate:u}=St({mutationFn:async({entryUUID:m,callback:p})=>{p?.(),await krt({entryUUID:m,rwToken:i,callback:p,reason:e})},onMutate:async({entryUUID:m,collectionSlug:p})=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:xn});const h=t.getQueryData(r),g=t.getQueryData(xn);return t.setQueryData(r,y=>{y=y||{pages:[],pageParams:[]};const x=y.pages.map(v=>v.filter(b=>b.uuid!==m));return{...y,pages:x}}),p&&(t.setQueryData(xn,y=>{y=y||{pages:[],pageParams:[]};const x=y.pages.map(v=>v.map(b=>b.slug===p?{...b,thread_count:b.thread_count-1}:b));return{...y,pages:x}}),t.setQueryData([du,{collection_slug:p.slice(-22)}],y=>{y=y||{pages:[],pageParams:[]};const x=y.pages.map(v=>v.filter(b=>b.uuid!==m));return{...y,pages:x}})),{previousThreads:h,previousCollections:g}},onSettled:(m,p,{entryUUID:h},g)=>{p?(t.setQueryData(r,g?.previousThreads),t.setQueryData(xn,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:xn}),t.invalidateQueries({queryKey:[du]}),t.invalidateQueries({queryKey:[z2]}),s(h))}}),{mutate:d}=St({mutationFn:async({entryUUIDs:m,callback:p})=>{p?.(),await Mrt({entryUUIDs:m,rwToken:i,reason:e})},onMutate:async({entryUUIDs:m})=>{await t.cancelQueries({queryKey:r});const p=t.getQueryData(r),h=t.getQueryData(xn);return t.setQueryData(r,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(x=>x.filter(v=>!m.includes(v.uuid)));return{...g,pages:y}}),{previousThreads:p,previousCollections:h}},onSettled:(m,p,{entryUUIDs:h},g)=>{p?t.setQueryData(r,g?.previousThreads):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:[z2]}),h.forEach(y=>s(y)))}});return f.useMemo(()=>({removeWidgetFromEntry:l,deleteAllThreads:c,deleteThread:u,deleteThreads:d}),[c,u,d,l])};function qBt({queryKey:e,pageSize:t,fetchFn:n,autoFetch:r,nextPageAccessor:s,initialData:a,args:i}){const l=f.useMemo(()=>i||[],[i]),c=f.useCallback(async({pageParam:u=1})=>{(!u||u<1)&&(u=1);const m={offset:(u-1)*t,...l};return n(m)},[l,n,t]);return $u({enabled:r,queryKey:e,queryFn:c,placeholderData:mf,refetchOnReconnect:"always",networkMode:"offlineFirst",initialData:a,initialPageParam:1,getNextPageParam:(u,d)=>s(u,d)})}const KBt=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,dz=(e,t,n,r,s)=>{const a=xt(),{searchTerm:i}=UB(),l=f.useMemo(()=>({search_term:i,with_temporary_threads:t,ascending:r,query_source_filter:n,thread_type_filter:s}),[i,t,r,n,s]),c=f.useCallback(async x=>xge({timeoutMs:5e3,paginationParams:x,ascending:r,reason:e}),[r,e]),u=qBt({queryKey:[zm,l],pageSize:yge,fetchFn:c,autoFetch:!0,nextPageAccessor:KBt,args:l}),d=f.useCallback(()=>{a.invalidateQueries({queryKey:[zm,l]})},[a,l]),m=u.data?.pageParams?.length??1,p=u.data?.pages??[],h=p.flat(),g=p[p.length-1]?.[0]?.has_next_page,y=f.useMemo(()=>({currentPage:m,hasNextPage:!!g,hasPreviousPage:m>1,getNextPage:()=>u.fetchNextPage(),getPreviousPage:()=>u.fetchPreviousPage()}),[g,m,u]);return f.useMemo(()=>({...u,data:h,paginationInfo:y,invalidateThreadsQuery:d}),[y,u,h,d])};function YBt({reason:e}){const t=xt();return f.useCallback(()=>{t.prefetchInfiniteQuery({queryKey:[zm,{search_term:""}],initialPageParam:0,queryFn:()=>xge({timeoutMs:5e3,paginationParams:{offset:0},reason:e})})},[t,e])}const Cje="fetch_bookmarks";async function QBt({reason:e}){try{return await(await Er({urlPath:"/rest/collections/list_bookmarks",reason:e})).json()||[]}catch(t){return ne.error("Failed to get bookmarks.",t),[]}}const XBt=({reason:e,enabled:t=!0})=>{const{isIncognito:n}=Qa({reason:e}),{session:r}=Nt(),s=r?.user?.email,{data:a,refetch:i,isLoading:l}=We({queryKey:[Cje,s],queryFn:async()=>s?await QBt({reason:e}):[],enabled:t&&!n&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!0,placeholderData:null});return f.useMemo(()=>!s||n?{data:null,isLoading:!1,refetch:Pn}:{data:a,isLoading:l,refetch:i},[a,s,n,l,i])},ZBt=()=>{const e=xt();return f.useCallback(()=>{e.invalidateQueries({queryKey:[Cje]})},[e])};function JBt({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const i=a.threadId,c=n.find(u=>u.id===i)?.entryIds?.[0];if(c&&i){const u=r[c];return u?{id:i,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source,streamCreatedAt:u.stream_created_at,streamId:a.id,frontendContextUUID:u.frontend_context_uuid}:void 0}else return{id:"",slug:void 0,title:a.placeholderChunk?.query_str??"",rwToken:null,lastUpdated:null,contextUUID:null,collectionInfo:null,displayModel:null,entryUUID:null,socialInfo:null,focus:null,mode:null,source:null,streamCreatedAt:new Date().toISOString(),streamId:a.id,frontendContextUUID:a.placeholderChunk?.frontend_context_uuid}}).filter(s=>s!=null)}function eVt({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const i=a.threadId;if(!i)return;const c=n.find(d=>d.id===i)?.entryIds?.[0];if(!c)return;const u=r[c];if(u)return{id:i,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source,streamCreatedAt:u.stream_created_at}}).filter(s=>s!=null)}function tVt(){const e=ki(),{activeStreams:t,streams:n,threads:r,entries:s}=e.getState();return f.useMemo(()=>{const a=eVt({activeStreams:t,streams:n,threads:r,entries:s}),i=new Set;return a.filter(l=>!l.slug||i.has(l.slug)?!1:(i.add(l.slug),!0))},[t,n,r,s])}function Sje({reason:e}){const{data:t,isLoading:n}=FAt({reason:e}),r=tVt();return f.useMemo(()=>({isLoading:n,data:[...r.filter(s=>!t.some(a=>a.link.split("/").pop()===s.slug)).filter(s=>!t.some(a=>a.uuid===s.id)).filter(s=>s.slug!==null).map(s=>({uuid:s.id,variant:"thread",link:`/search/${s.slug}`,title:s.title??"",isStreaming:!0,unread:!1})),...t]}),[t,r,n])}const nVt="fetch_sidebar_hubs",d7=["SIDEBAR_FINANCE","SIDEBAR_SHOPPING","SIDEBAR_TRAVEL","SIDEBAR_ACADEMIC","SIDEBAR_SPORTS"],Ioe=(e,t)=>t?.sidebar_hubs.includes(e)??!1,f7=[nVt];async function rVt({reason:e}){try{return(await ae.GET("/rest/user/get_user_sidebar_hubs",e)).data||{sidebar_hubs:fe}}catch(t){return ne.error("Failed to get sidebar hubs.",t),{sidebar_hubs:fe}}}const Eje=({reason:e})=>{const{data:t,refetch:n,isLoading:r}=We({queryKey:f7,queryFn:()=>rVt({reason:e})});return f.useMemo(()=>({data:t,isLoading:r,refetch:n}),[t,r,n])},sVt=({reason:e})=>{const{actions:t}=_n(),{data:n}=Eje({reason:e});f.useEffect(()=>{if(!n)return;const r=d7.filter(s=>!n.sidebar_hubs.includes(s));t.setSidebarHiddenHubs(r)},[n,t])},Mje=({reason:e})=>{const t=xt(),{actions:n,sidebarHiddenHubs:r}=_n(),s=f.useCallback(async i=>{try{return await ae.POST("/rest/user/subscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:i}}}),t.invalidateQueries({queryKey:f7}),n.setSidebarHiddenHubs(r.filter(l=>l!==i)),!0}catch{return!1}},[t,n,r,e]),a=f.useCallback(async i=>{try{return await ae.POST("/rest/user/unsubscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:i}}}),t.invalidateQueries({queryKey:f7}),n.setSidebarHiddenHubs([...r,i]),!0}catch{return!1}},[t,n,r,e]);return f.useMemo(()=>({subscribeToHub:s,unsubscribeFromHub:a}),[s,a])},W0=e=>{const t=e?.split("/").slice(1);return ya(t)?["finance"].includes(t[0])?"finance":["travel"].includes(t[0])?"travel":["shopping"].includes(t[0])?"shopping":["academic"].includes(t[0])?"academic":["sports"].includes(t[0])?"sports":null:null},aVt=()=>{const{$t:e}=Z();return[{id:"SIDEBAR_FINANCE",name:e({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:r_},{id:"SIDEBAR_TRAVEL",name:e({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:tde},{id:"SIDEBAR_SHOPPING",name:e({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:nde},{id:"SIDEBAR_ACADEMIC",name:e({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:pD},{id:"SIDEBAR_SPORTS",name:e({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:rde}]},iVt=({isOpen:e,onClose:t,availableHubs:n})=>{const r="home-sidebar-configure-overlay",s=aVt(),{data:a}=Eje({reason:r}),{subscribeToHub:i,unsubscribeFromHub:l}=Mje({reason:r}),{$t:c}=Z(),u=f.useMemo(()=>s.filter(d=>n.includes(d.id)),[n,s]);return o.jsxs(on,{title:c({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),isOpen:e,onClose:t,variant:"default",children:[o.jsx(F,{variant:"base",color:"light",className:"mb-sm",children:c({defaultMessage:"Select the items that appear in your sidebar.",id:"I+JwmwJnZQ"})}),o.jsx(H,{className:"mb-[-24px] flex flex-col divide-y",children:u.map(d=>o.jsx(oVt,{hub:d,enabled:Ioe(d.id,a),onToggle:()=>{Ioe(d.id,a)?l(d.id):i(d.id)}},d.id))})]})},oVt=({hub:e,enabled:t,onToggle:n})=>o.jsxs("div",{className:"flex h-12 items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(le,{icon:e.icon,size:"base"}),o.jsx(F,{variant:"baseSemi",children:e.name})]}),o.jsx(Ji,{active:t,onChange:n})]}),kje=R.memo(({item:{title:e,link:t},position:n})=>{const{trackEvent:r}=je(),{setMobileSidebarOpen:s}=Yu(),a=f.useCallback(()=>{s(!1),r("click recent collection",{title:e,link:t,position:n})},[t,n,s,e,r]);return o.jsx(Ye,{href:t,className:"group block cursor-pointer",onClick:a,children:o.jsx(H,{className:"p-xs rounded",bgHover:"subtle",children:o.jsx(F,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:o.jsx("div",{className:"flex w-full items-center",children:o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:e})})})})})});kje.displayName="CollectionHistoryItem";const Tje=({show:e,data:t,type:n,HistoryComponent:r,wrapperClassName:s,id:a})=>{const i="recent-items",{isIncognito:l}=Qa({reason:i}),c=(u,d="")=>"link"in u?u.link+d:"uuid"in u?u.uuid+d:"slug"in u?u.slug+d:d;return!e||!t?.length?null:o.jsx("div",{className:"group/history",children:o.jsx(Je,{initial:!1,mode:"wait",children:l?o.jsx(m7,{className:"px-sm",direction:"in",children:o.jsx(H,{className:"mx-md mb-lg mt-sm p-md rounded-md border border-dashed",children:o.jsx(F,{color:"ultraLight",variant:"tiny",className:"gap-sm flex flex-col items-start text-left",children:o.jsx("span",{children:n==="thread"?o.jsx(he,{defaultMessage:"Library disabled while incognito",id:"OUt8F76OaH"}):o.jsx(he,{defaultMessage:"Spaces disabled while incognito",id:"kdu3grXdAD"})})})})},"empty"):o.jsx(m7,{direction:"out",children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,className:V("mb-md mt-xs space-y-xs border-subtlest pr-sm dark:border-subtle relative ml-[26px] border-l pl-[14px] duration-200",s),children:o.jsx(jc,{children:o.jsx(Je,{initial:!1,mode:"popLayout",children:t.map((u,d)=>o.jsx(ve.div,{layout:"position",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:0},transition:{ease:an,duration:.3},children:o.jsx(r,{item:u,position:d})},c(u,a)))})})})},"history")})})},zb=f.memo(Tje);Tje.displayName="RecentItems";const m7=f.memo(({children:e,className:t,direction:n})=>o.jsx(ve.div,{initial:{x:n==="in"?20:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:n==="in"?20:-20,opacity:0,transition:{ease:Ci(.7,0,.84,0),duration:.1}},transition:{x:{ease:Ci(.16,1,.3,1),duration:.2},opacity:{ease:va,duration:.15}},className:t,children:e}));m7.displayName="SlideItem";const Nje=R.memo(({item:{variant:e,title:t,link:n},position:r})=>{const{trackEvent:s}=je(),{setMobileSidebarOpen:a}=Yu(),{actualQuery:i}=Iu(t),l=i||t,c=f.useCallback(()=>{a(!1),s("click recent thread",{title:t,link:n,variant:e,position:r})},[n,r,a,t,s,e]);return o.jsx(Ye,{href:n,className:"group block cursor-pointer",onClick:c,children:o.jsx(H,{className:"p-xs rounded",bgHover:"subtle",children:o.jsx(F,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:o.jsxs("div",{className:"flex w-full items-center",children:[o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:l}),o.jsx(le,{icon:e==="article"?sde:RD,size:"sm",className:"min-w-0 shrink basis-0 scale-90 opacity-0 duration-300 ease-out group-hover:block group-hover:shrink-0 group-hover:basis-auto group-hover:scale-100 group-hover:opacity-100"})]})})})})});Nje.displayName="ThreadHistoryItem";const MN=R.memo(({vertical:e=!0,size:t,collapsed:n,actionList:r,...s})=>o.jsx(Dw,{layout:n?"center":"left",size:t,iconOnly:n,vertical:e,actionList:r??fe,indicatorPos:n?"right":"none",fillSpace:!0,...s}));MN.displayName="SiteTabs";const jje=f.memo(({vertical:e=!0,size:t,collapsed:n,incognito:r,animationId:s})=>{const a="ask-site-tabs",{$t:i}=Z(),l=lt(),{isMobileStyle:c}=Ce(),{trackEvent:u}=je(),{allowArticleCreation:d}=Sa({reason:a}),m=Ft(),{openVisitorLoginUpsell:p}=gr({enabled:!l}),{shouldShowLossAversionModal:h,handleOpenLossAversion:g}=vx(),{data:y}=u0e({reason:a}),{data:x}=Sje({reason:a}),{setMobileSidebarOpen:v}=Yu(),b=f.useCallback(M=>{v(!1),h&&(M.preventDefault(),g({args:{origin:De.DISCOVER_BUTTON}}))},[h,g,v]),_=f.useCallback(()=>{u("spaces click",{}),v(!1),l||p({title:i({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:De.SPACES_PAGE})},[u,l,p,i,v]),w=f.useCallback(()=>{u("library click",{}),v(!1),l||p({title:i({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:De.LIBRARY_PAGE})},[u,l,p,i,v]),C=f.useCallback(()=>{u("finance click",{}),v(!1)},[v,u]),S=f.useCallback(()=>{v(!1)},[v]),E=f.useMemo(()=>{const M=[{icon:ade,text:i({defaultMessage:"Home",id:"ejEGdxSUGs"}),href:"/",show:!0,active:m==="/",ariaLabel:i({defaultMessage:"Home",id:"ejEGdxSUGs"}),testId:"home-tab",onClick:S,tooltip:n?i({defaultMessage:"Home",id:"ejEGdxSUGs"}):void 0},{icon:ide,text:i({defaultMessage:"Discover",id:"cE4HfwyEyr"}),show:!0,active:m?.startsWith("/discover"),ariaLabel:i({defaultMessage:"Discover",id:"cE4HfwyEyr"}),testId:"discover-tab",href:h?void 0:"/discover",onClick:b,tooltip:n?i({defaultMessage:"Discover",id:"cE4HfwyEyr"}):void 0},{icon:yi,text:i({defaultMessage:"Spaces",id:"ZMoczsYew9"}),href:l?"/spaces":void 0,onClick:_,show:!0,active:m?.startsWith("/spaces"),ariaLabel:i({defaultMessage:"Spaces",id:"ZMoczsYew9"}),testId:"spaces-tab",tooltip:n?i({defaultMessage:"Spaces",id:"ZMoczsYew9"}):void 0,children:!n&&l&&o.jsx(zb,{show:!0,data:y,type:"collection",HistoryComponent:kje})},{icon:eDe,text:i({defaultMessage:"Library",id:"StcK672jB9"}),href:l?"/library":void 0,onClick:w,show:!0,testId:"library-tab",trailingComponent:!r&&d&&!n?o.jsx(fz,{}):void 0,active:m?.startsWith("/library"),ariaLabel:i({defaultMessage:"Library",id:"StcK672jB9"}),tooltip:n?i({defaultMessage:"Library",id:"StcK672jB9"}):void 0,children:!n&&l&&o.jsx(zb,{show:!0,data:x,type:"thread",HistoryComponent:Nje})},{icon:r_,text:i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),show:!0,active:m?.startsWith("/finance"),ariaLabel:i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),testId:"finance-tab",href:"/finance",onClick:C,tooltip:n?i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}):void 0}];return n&&M.push({icon:Cu,text:i({defaultMessage:"Sign in",id:"SQJto27U8S"}),onClick:()=>{u("login click",{}),p({origin:De.LOGIN_BUTTON})},show:!l,active:m?.startsWith("/login"),testId:"sign-in-tab",ariaLabel:"Sign in",tooltip:n?i({defaultMessage:"Sign In",id:"Ub+AGcdPg6"}):void 0}),M},[m,n,i,l,r,d,b,C,_,w,u,p,y,x,h,S]);return o.jsx(MN,{isMobileStyle:c,size:t,vertical:e,collapsed:n,actionList:E,layoutGroupId:s})});jje.displayName="AskSiteTabs";const fz=f.memo(({defaultHidden:e=!0,buttonClassName:t})=>{const{$t:n}=Z(),[r,s]=f.useState(!1),{openModal:a}=wt(),{trackEvent:i}=je(),l=_t(),c=lt(),u=x=>{x.preventDefault(),x.stopPropagation(),s(!r)},d=()=>{s(!1)},m=()=>{s(!0)},p=f.useCallback(x=>{x.stopPropagation(),c?l.push("/page/new"):a("loginModal",{pitchMessage:{title:n({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:De.ARTICLE_NEW}),x.preventDefault()},[l,c,n,a]),h=f.useCallback(x=>{x.preventDefault(),x.stopPropagation(),i("new thread click on threads page",{}),l.push("/",void 0,"New thread (library)")},[i,l]),g=f.useMemo(()=>[{type:"default",text:n({defaultMessage:"Thread",id:"6dmn4mbc3j"}),icon:RD,onClick:h,testId:"library-dropdown-new-thread"},{type:"default",text:n({defaultMessage:"Page",id:"wFmAFCPAci"}),icon:sde,onClick:p,testId:"library-dropdown-new-page"}],[h,p,n]),y=xx();return o.jsx("div",{className:"ltr:-mr-sm rtl:-ml-sm flex w-full flex-1 justify-end",children:o.jsx(sn,{placement:y?"left":"right",items:g,isMobileStyle:!1,onClose:d,onOpen:m,isOpen:r,children:o.jsx(H,{onClick:u,"data-testid":"library-add-button",className:V("text-foreground flex h-[24px] w-[27px] items-center justify-center rounded-md duration-150 hover:bg-black/5 dark:hover:bg-white/5",{"opacity-0 group-hover/button:opacity-100":e,"!text-foreground !bg-black/5 !opacity-100 dark:!bg-white/5":r},t),children:o.jsx(le,{icon:ur,size:14})})})})});fz.displayName="LibraryDropdown";const Roe=(e,t)=>t?t===e.link:!1,Aje=R.memo(({item:e,position:t,onDeleteClick:n,sidebarOpen:r})=>{const{trackEvent:s}=je(),a=Ft(),{title:i,link:l,variant:c,isStreaming:u,unread:d}=e,m=c==="thread",{actualQuery:p}=Iu(i),h=p||i,{$t:g}=Z(),y=f.useCallback(()=>{s("click recent thread",{title:i,link:l,variant:c,position:t})},[l,t,i,s,c]),x=f.useMemo(()=>[{text:g({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:m?"Thread":"Page"}),icon:Vd,onClick:v=>{v.stopPropagation(),n(e)},type:"default"}],[g,m,e,n]);return o.jsx(qs,{id:`SIDEBAR_THREAD_${e.uuid}`,href:l,text:h,fadeOut:!0,onClick:y,sidebarOpen:r,selected:Roe(e,a),menuItems:x,testId:`thread-title-${h}`,loading:u,accessory:d&&!Roe(e,a)?o.jsx("div",{className:"bg-super size-1.5 rounded-full"}):null})});Aje.displayName="ThreadHistoryItemV2";const lVt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"sports-landing-page",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Poe=10,cVt=({isOpen:e,onCreateClick:t,onDeleteThreadOrBookmark:n,isConfiguring:r,setIsConfiguring:s})=>{const a="home-sidebar",{data:i,isLoading:l}=Sje({reason:a}),{data:c,refetch:u}=XBt({reason:a,enabled:e}),{sidebarHiddenHubs:d}=_n(),{unsubscribeFromHub:m}=Mje({reason:a}),{bookmarks:p,bookmarks_collection_slug:h,bookmarks_collection_uuid:g}=c||{},x=Tp()==="US",{variation:v}=lVt(!1),b=YBt({reason:a}),{deleteThread:_}=zw({reason:a}),{trackEvent:w}=je(),{$t:C}=Z(),S=lt(),{openVisitorLoginUpsell:E}=gr({enabled:!S}),M=_t(),k=Ft(),{removeThreadFromCollection:N}=cx({reason:a});sVt({reason:a});const[P,L]=f.useState([]),[O,A]=f.useState([]),j=f.useMemo(()=>p?.filter(K=>!P.includes(K))??[],[p,P]),T=f.useMemo(()=>i?.filter(K=>!O.includes(K))??[],[i,O]),I=f.useCallback(K=>{const te=g;n(),w("unbookmark item from sidebar",{collectionUUID:te}),L(re=>[...re,K]),N({entryUUID:K.uuid,oldCollectionUUID:te,callback:()=>{u()}})},[N,u,n,g,w]),U=f.useCallback(K=>{n(),w("delete thread from sidebar",{entryUUID:K.uuid}),A(te=>[...te,K]),L(te=>[...te,{uuid:K.uuid,mode:K.variant==="article"?"article":"thread",title:K.title,slug:K.link}]),_({entryUUID:K.uuid,callback:()=>{K.link===k&&M.push("/")}})},[k,M,_,n,w]),B=f.useCallback(K=>{n(),L(te=>[...te,K]),A(te=>[...te,{uuid:K.uuid,link:K.slug,variant:K.mode==="article"?"article":"thread",title:K.title}]),w("delete bookmark from sidebar",{entryUUID:K.uuid}),_({entryUUID:K.uuid,callback:()=>{K.slug===k?.replace("/search/","").replace("/page/","")&&M.push("/")}})},[n,w,k,M,_]),D=f.useCallback(K=>{m(K)},[m]),W=f.useMemo(()=>({text:C({defaultMessage:"Hide from sidebar",id:"bt2xOtkULy"}),icon:It,type:"default",size:Qt.small,show:!0}),[C]),z=f.useMemo(()=>[{...W,onClick:K=>{K.stopPropagation(),D("SIDEBAR_FINANCE")}}],[D,W]),$=f.useMemo(()=>[{...W,onClick:K=>{K.stopPropagation(),D("SIDEBAR_TRAVEL")}}],[D,W]),X=f.useMemo(()=>[{...W,onClick:K=>{K.stopPropagation(),D("SIDEBAR_SHOPPING")}}],[D,W]),q=f.useMemo(()=>[{...W,onClick:K=>{K.stopPropagation(),D("SIDEBAR_ACADEMIC")}}],[D,W]),Y=f.useMemo(()=>[{...W,onClick:K=>{K.stopPropagation(),D("SIDEBAR_SPORTS")}}],[D,W]),G=f.useMemo(()=>x?d7:d7.filter(K=>K!=="SIDEBAR_SHOPPING"),[x]),J=f.useMemo(()=>S?G.filter(K=>!d.includes(K)):G,[d,S,G]);return o.jsxs("div",{className:"flex flex-col gap-[12px]",children:[J.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs(Ub,{children:[J.includes("SIDEBAR_FINANCE")&&o.jsx(qs,{id:"SIDEBAR_FINANCE",href:"/finance",text:C({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:r_,selected:W0(k)==="finance",menuItems:S?z:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"finance"})}}),J.includes("SIDEBAR_TRAVEL")&&o.jsx(qs,{id:"SIDEBAR_TRAVEL",href:"/travel",text:C({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:tde,selected:W0(k)==="travel",menuItems:S?$:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"travel"})}}),J.includes("SIDEBAR_SHOPPING")&&o.jsx(qs,{id:"SIDEBAR_SHOPPING",href:"/shopping",text:C({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:nde,selected:W0(k)==="shopping",menuItems:S?X:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"shopping"})}}),J.includes("SIDEBAR_ACADEMIC")&&o.jsx(qs,{id:"SIDEBAR_ACADEMIC",href:"/academic",text:C({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:pD,selected:W0(k)==="academic",menuItems:S?q:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"academic"})}}),J.includes("SIDEBAR_SPORTS")&&v&&o.jsx(qs,{id:"SIDEBAR_SPORTS",href:"/sports",text:C({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:rde,selected:W0(k)==="sports",menuItems:S?Y:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"sports"})}})]}),o.jsx(Bb,{})]}),o.jsx(Cy,{href:"/library",onClick:K=>{S||(K.preventDefault(),E({title:C({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:De.LIBRARY_PAGE}))},onMouseOver:b,text:C({defaultMessage:"Library",id:"StcK672jB9"}),className:"-mb-xs",testId:"library-button",accessory:i&&e&&T.length>0?o.jsx(fz,{defaultHidden:!1,buttonClassName:"text-quiet hover:text-foreground duration-150"}):o.jsx("div",{className:"size-[24px]"})}),l?null:T.length===0?o.jsx(qs,{id:"SIDEBAR_CREATE_THREAD",icon:ur,href:"/",text:C({defaultMessage:"Create a Thread",id:"6naN9kZFw2"}),deemphasized:!0,onClick:()=>{const K=document.getElementById("ask-input");K&&(K.focus(),t())},sidebarOpen:e}):o.jsx(zb,{show:!0,data:T,type:"thread",HistoryComponent:({item:K,position:te})=>o.jsx(Aje,{item:K,position:te,onDeleteClick:U,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-threads"}),T?.length>=Poe&&o.jsx(xL,{href:"/library",text:C({defaultMessage:"View All",id:"wbcwKddwLa"}),onMouseOver:b}),S&&c!==null&&o.jsx(o.Fragment,{children:j.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(Bb,{}),o.jsx(Cy,{href:h?`/spaces/${h}`:void 0,text:C({defaultMessage:"Bookmarks",id:"nGBrvwYczX"}),className:"-mb-xs",testId:"bookmarks-button"}),o.jsx(zb,{show:!0,data:j,type:"thread",HistoryComponent:({item:K})=>o.jsx(uVt,{item:K,onRemoveClick:I,onDeleteClick:B,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-bookmarks"}),j.length>=Poe&&h&&o.jsx(xL,{href:`/spaces/${h}`,text:C({defaultMessage:"View All",id:"wbcwKddwLa"})})]})}),o.jsx(iVt,{isOpen:r,onClose:()=>s(!1),availableHubs:G})]})},uVt=({item:e,onRemoveClick:t,onDeleteClick:n,sidebarOpen:r})=>{const s=e.mode==="article",i=`/${s?"page":"search"}/${e.slug}`,l=Ft(),{$t:c}=Z();return o.jsx(qs,{id:`SIDEBAR_BOOKMARK_${e.uuid}`,href:i,text:e.title||e.slug,fadeOut:!0,selected:i===l,sidebarOpen:r,testId:`thread-title-${e.title||e.slug}`,menuItems:[{text:c({defaultMessage:"Remove Bookmark",id:"RokVj/Gv4U"}),icon:tDe,onClick:u=>{u.stopPropagation(),t(e)},type:"default"},{text:c({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:s?"Page":"Thread"}),icon:Vd,onClick:u=>{u.stopPropagation(),n(e)},type:"default"}]})},mz=R.memo(({showAvatar:e,showCreatorLabel:t,showEdit:n,isCurrentUser:r=!0,textClassName:s="",textColor:a,textVariant:i="smallBold",username:l,image:c,anon:u,avatarSize:d="small",isAlwaysEditing:m=!1,onButtonClick:p=Pn,className:h})=>{const{$t:g}=Z(),{update:y}=Nt(),{session:x}=Nt(),[v,b]=R.useState(m),[_,w]=R.useState(l??(r?x?.user?.username:"Anonymous")),[C,S]=R.useState(),{isMobileUserAgent:E}=Ce(),M=async()=>fetch("/api/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:_})}),{mutate:k,isPending:N}=St({mutationFn:M,onSuccess:j=>{j.json().then(T=>{if(j.status!==200){S(T.message);return}b(!1),S(void 0),y(),p()})}});f.useEffect(()=>{w(l??(r?x?.user?.username:"Anonymous"))},[l,r,x?.user?.username]);const P=f.useCallback(()=>b(!0),[]),L=f.useCallback(()=>k(),[k]),O=f.useCallback(()=>{w(x?.user?.username??""),m||b(!1),p()},[m,p,x?.user?.username]),A=f.useMemo(()=>x?o.jsxs("div",{className:"ml-sm mt-sm gap-x-sm flex items-center",children:[o.jsx(pe,{text:g({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:_===x.user.username||_===""||N?"common":"primary",size:"small",disabled:_===x.user.username||_===""||N,onClick:L}),o.jsx(pe,{text:g({defaultMessage:"Cancel",id:"47FYwba+bI"}),size:"small",disabled:N,onClick:O})]}):null,[g,O,L,N,x,_]);return o.jsxs("div",{className:V("gap-x-xs relative flex items-center",h),children:[e&&o.jsx(Pt,{size:d,anon:u,user:c??(r?x?.user.image??void 0:void 0)}),v?o.jsx(Wr,{isMobileUserAgent:E,value:_,disabled:N,errorText:C??(_===""?g({id:"ekGO8lFf3J",defaultMessage:"Username cannot be empty"}):""),onChange:w,className:"md:min-w-[300px]",inlineEditBlock:A,errorPlacement:wm.LABEL,wrapperClassName:"w-full",pill:!1}):o.jsx(F,{variant:i,color:a,className:V("line-clamp-1 break-all",s),children:u?"Anonymous":_}),t&&o.jsx(H,{variant:"subtler",className:"px-sm py-xs rounded-full",children:o.jsx(F,{variant:"tiny",color:"light",className:s,children:g({id:"tWkQ2JF/jQ",defaultMessage:"Author"})})}),n&&!v&&o.jsx(Te,{pill:!0,size:"small",icon:Vu,onClick:P})]})});mz.displayName="Username";const Ije=({session:e,onClick:t})=>{const n="sidebar-incognito-menu",{$t:r}=Z(),{isIncognito:s,incognitoType:a}=Qa({reason:n}),{actions:i}=_n(),{hasAccessToProFeatures:l,isPro:c,isMax:u}=Et(),d=f.useCallback(()=>{i.setIsIncognito(!1),t()},[i,t]),m=f.useCallback(()=>{i.setIsIncognito(!0),t()},[i,t]);return o.jsxs("div",{className:"flex flex-col items-stretch",children:[o.jsx(Ooe,{onClick:d,icon:o.jsx("div",{className:`relative inline-flex ${l?"-top-two":""}`,children:o.jsx(Pt,{size:"medium",user:e?.user?.image,showProBadge:c,showMaxBadge:u,className:"!text-inverse",showBackground:!1})}),label:o.jsx("div",{className:"gap-sm flex items-center",children:o.jsx(mz,{username:e?.user?.username})}),selected:!s},"user"),o.jsx(Ooe,{onClick:m,icon:o.jsx(Ef,{inverse:!0,incognitoType:a}),label:a===Qd.GOVERNMENT?o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx(F,{variant:"smallBold",children:r({defaultMessage:"Government",id:"bh4rlKfcgE"})}),o.jsx(F,{variant:"micro",color:"light",children:r({defaultMessage:"Zero Data Usage",id:"JHS3rmaYsL"})})]}):r({defaultMessage:"Incognito",id:"Sp8UUpZ0at"}),selected:s,showTooltip:!0,incognitoType:a},"incognito")]})},Ooe=({onClick:e,label:t,selected:n,icon:r,showTooltip:s,incognitoType:a})=>{const{$t:i}=Z(),{isGovernmentRequestOrigin:l}=ls(),{device:{isMacOS:c}}=Lt();return o.jsxs(H,{as:"button",bgHover:"subtler",className:"gap-sm p-sm pr-md flex items-center rounded-md active:scale-[.98]",onClick:e,children:[r,typeof t=="string"?o.jsx(F,{variant:"smallBold",children:t}):t,o.jsx("div",{className:"flex-1"}),n?o.jsx("span",{className:"text-super",children:o.jsx(le,{icon:Ar,size:"sm"})}):s&&o.jsx(En,{className:"max-w-[280px]",tooltipText:a===Qd.GOVERNMENT?i({defaultMessage:"Zero Data Usage active",id:"9i8r+oh3pt"}):i({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:l?void 0:c?["",";"]:["ctrl",";"],tooltipLayout:"right",asChild:!0,children:o.jsx(F,{color:"light",className:"opacity-50 duration-150 hover:opacity-100",children:o.jsx(le,{icon:Fue,size:"sm"})})})]})},Rje=R.memo(({backgroundVariant:e="subtler"})=>o.jsx(H,{variant:e,className:"inline-flex h-5 items-center rounded px-[6px] py-px",children:o.jsx(F,{color:"light",variant:"micro",className:"translate-y-half uppercase tracking-wider",children:o.jsx(he,{defaultMessage:"Beta",id:"riw/yc06Nq"})})}));Rje.displayName="BetaBadge";const Pje=R.memo(()=>o.jsx("div",{className:"bg-super dark inline-flex h-5 items-center justify-center rounded px-[6px] py-px",children:o.jsx(F,{color:"white",variant:"tinyRegular",children:o.jsx(he,{defaultMessage:"New",id:"bW7B87wFFp"})})}));Pje.displayName="NewBadge";const kpn=({children:e,card:t=!0,title:n,id:r})=>o.jsxs("div",{id:r,children:[n&&o.jsx(F,{variant:"baseSemi",className:"pl-sm",children:n}),o.jsx(H,{variant:t?"subtler":void 0,className:V("mb-lg mt-sm divide-y",{"px-md py-sm rounded-lg":t}),children:e})]}),dVt=({children:e,title:t,noPadding:n=!1,subTitle:r,cta:s,titleAccessory:a})=>o.jsxs("div",{className:"pb-md flex flex-col",children:[o.jsx(H,{className:"pb-md flex flex-col gap-1 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:"baseSemi",children:t}),a]}),r&&o.jsx(F,{variant:"tinyRegular",color:"light",children:r})]}),s&&s]})}),o.jsx("div",{className:V("gap-md flex flex-col",{"py-md":!n}),children:e})]}),hR=({label:e,value:t,valueColor:n="light",cta:r,shouldWrapInMobile:s=!0})=>o.jsxs("div",{className:V("gap-md flex justify-between sm:flex-row sm:flex-nowrap sm:items-center",s&&"flex-col flex-wrap"),children:[o.jsxs("div",{children:[e&&o.jsx(F,{variant:"small",children:e}),t&&o.jsx(F,{variant:"tinyRegular",color:n,children:t})]}),o.jsx("div",{children:r})]}),fVt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"new-memory-v2-overview-page",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},mVt={memory_enabled:!1,conversation_history_enabled:!1,citations_enabled:!1},pVt=()=>{const{value:e}=Dt({flag:"memory-search-beta",defaultValue:!1,subjectType:"user_nextauth_id"});return e},Oje=({reason:e})=>{const{isEnterprise:t}=kn({reason:e}),{value:n,loading:r}=Dt({flag:"memory-experiment",defaultValue:!1,extraAttributes:{isEnterprise:t??!1},subjectType:"user_nextauth_id"}),{value:s,loading:a}=qu({flag:"memory-search-history",defaultValue:mVt,extraAttributes:{isEnterprise:t??!1,dependent_flag:"memory-experiment",variation_served:n},subjectType:"user_nextauth_id"});return a||r?!1:"memory_enabled"in s&&"conversation_history_enabled"in s&&"citations_enabled"in s?s?.memory_enabled&&s?.conversation_history_enabled&&s?.citations_enabled:!1},Tpn=()=>{const e="personal-search-settings-main",t=pVt(),{$t:n}=Z(),r=xt(),s=W_e({reason:e}),{openModal:a}=wt(),{trackEvent:i}=je(),l=Ut(),c=_t(),{session:u}=Nt(),{variation:d}=fVt(!1,{userEmail:u?.user?.email??""});f.useEffect(()=>{l?.get("modal")==="memory"&&a("memoryListModal",{isMemoryEnabled:!0})},[]);const{mutate:m,isPending:p}=St({mutationFn:b=>gX({type:"memory",value:b,reason:e}),onSuccess:b=>{b&&r.setQueryData(P8(),b)}}),{mutate:h,isPending:g}=St({mutationFn:b=>gX({type:"searchHistory",value:b,reason:e}),onSuccess:b=>{b&&r.setQueryData(P8(),b)}}),y=f.useCallback(b=>{m(b),i("toggle memory",{memoryToggleState:b?"on":"off"})},[m,i]),x=f.useCallback(b=>{h(b),i("toggle search history",{searchHistoryToggleState:b?"on":"off"})},[h,i]),v=f.useCallback(()=>{d?c.push("/account/personalize/memories"):(i("viewed memory list modal"),a("memoryListModal",{isMemoryEnabled:!0}))},[d,a,c,i]);return o.jsxs(dVt,{title:n({defaultMessage:"Memory",id:"dVx3yznM2C"}),titleAccessory:t?o.jsx(Rje,{}):o.jsx(Pje,{}),children:[o.jsx(hR,{label:n({defaultMessage:"Reference search library",id:"SwsY8rd34h"}),value:n({defaultMessage:"Let Perplexity use previous searches when answering.",id:"ex3azVKEwb"}),cta:o.jsx(Ji,{active:s.use_search_history===null?!0:s.use_search_history??!1,onChange:x,disabled:g})}),o.jsx(hR,{label:n({defaultMessage:"Reference saved memories",id:"jT78QtuUtA"}),value:o.jsx("div",{className:"flex flex-col",children:o.jsx(F,{className:"inline",variant:"tinyRegular",color:"light",children:o.jsx(he,{defaultMessage:"Let Perplexity save and use memories when answering. Incognito searches are never stored. ",id:"B53ddA1KtU"})})}),cta:o.jsx(Ji,{active:s.use_memory??!1,onChange:y,disabled:p})}),o.jsx(hR,{label:o.jsx("div",{className:"gap-sm flex items-center",children:o.jsx(F,{variant:"small",children:n({defaultMessage:"Edit your saved memories",id:"xuzqKrNHGC"})})}),cta:o.jsx(pe,{extraCSS:"w-fit",variant:"border",size:"small",text:n({defaultMessage:"Manage",id:"0AzlrbMWV9"}),trailingComponent:o.jsx(Zn,{size:16}),onClick:v})})]})},po="default",Lje=({trigger:e,popoverPlacement:t="top-start"})=>{const[n,r]=f.useState(!1),s=lt(),a=fw(),{isMaxUpsellEnabled:i}=Ku(),l=Oje({reason:"sidebar-bottom-popover"}),c=co(),u=f.useRef($U().sidebar),{openVisitorLoginUpsell:d}=gr({enabled:!s}),{device:{isWindowsApp:m}}=Lt(),{isGovernmentRequestOrigin:p}=ls(),h=P1e(),{isEnterpriseMax:g}=Et(),{$t:y}=Z(),x=Y8(),[v,b]=f.useState(m),[_,w]=f.useState(!1),{keysRequiringRerender:C,removeKeyRequiringRerender:S}=yf(),E=l&&!u.current&&gye(),M=Xet(),{variation:k,loading:N}=Bp(!1);f.useEffect(()=>{!u.current&&n&&Qet("sidebar",!0)},[n]);const P=f.useMemo(()=>[{icon:pP,show:!0,text:y({defaultMessage:"Account",id:"TwyMauNL3r"}),type:po,href:nn.Account.href,target:"_self",testId:"sidebar-my-account"},{icon:cE,show:!0,text:y({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),type:po,href:nn.Preferences.href,target:"_self",testId:"sidebar-preferences"},{icon:xue,show:!0,text:y({defaultMessage:"Personalization",id:"FAejG+JVWn"}),type:po,href:nn.Personalize.href,target:"_self",testId:"sidebar-personalize",...E&&{rightElement:o.jsx(le,{icon:rq,color:"currentColor",className:"text-super"})}},{icon:gp,show:!0,text:y({defaultMessage:"Assistant",id:"wSAvhubuX6"}),type:po,href:nn.Assistant.href,target:"_self",testId:"sidebar-assistant"},{icon:Dk,show:a,text:y({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),type:po,href:nn.Shortcuts.href,target:"_self",testId:"sidebar-shortcuts"},{icon:Om,text:y(k?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),type:po,href:nn.Tasks.href,target:"_self",testId:"sidebar-tasks",...!M&&{rightElement:o.jsx(le,{icon:rq,color:"currentColor",className:"text-super"})}},{icon:yp,show:!0,text:y({defaultMessage:"Notifications",id:"NAidKbB0vi"}),type:po,href:nn.Notifications.href,target:"_self",testId:"sidebar-notifications"},{icon:o_,show:!0,text:y({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),type:po,href:nn.Connectors.href,target:"_self",testId:"sidebar-connectors"},{icon:Sue,show:!0,text:y({defaultMessage:"API",id:"xwEc8KM8zK"}),type:po,href:nn.API.href,target:"_self",testId:"sidebar-api"},{icon:bue,show:!0,text:y({defaultMessage:"Pro Perks",id:"x69637XBwS"}),type:po,href:nn.ProPerks.href,target:"_self",testId:"sidebar-pro-perks"},{icon:ode,show:!0,text:y({defaultMessage:"All settings",id:"IzEySeOy5/"}),type:po,href:nn.Account.href,target:"_self",testId:"sidebar-settings"},{type:"separator",show:i&&!g,className:"!border-b-subtlest !border-b !-mx-1 mb-1"},{icon:nDe,show:i&&!g,text:y({defaultMessage:"View plans",id:"EaucLAoHiC"}),type:po,onClick:()=>{c({origin:De.SIDEBAR_BOTTOM_POPOVER,pitchMessage:{title:y({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}})},testId:"sidebar-view-plans"}],[y,E,a,k,M,i,c,g]);f.useEffect(()=>{C.includes("sidebar-sign-in-button")&&b(!0),S("sidebar-sign-in-button")},[S,C]),f.useEffect(()=>{x||b(!0)},[x]),f.useEffect(()=>{!h&&p&&b(!0)},[h,p]),f.useEffect(()=>{requestAnimationFrame(()=>{w(!0)})},[]);const{trackEvent:L}=je();return!s&&!v||N?null:s?o.jsx(sn,{placement:t,items:P,footer:o.jsx(hVt,{handleClick:()=>r(!1)}),isMobileStyle:!1,isOpen:n,onOpen:()=>r(!0),onClose:()=>r(!1),menuItemClassName:"gap-md",wrapperClassName:"inline-flex",children:o.jsx("div",{onClick:()=>r(!n),className:"inline-flex w-full","data-testid":"sidebar-popover-trigger-signed-in",children:e(n)})}):o.jsx("div",{className:"relative inline-flex justify-center duration-150 hover:opacity-80",children:o.jsxs(ve.button,{initial:_?{opacity:0,scale:.5}:void 0,animate:_?{opacity:1,scale:1}:void 0,className:"inline-flex appearance-none flex-col items-center justify-center",onClick:()=>{L("sidebar sign in button clicked"),d({origin:De.SIGNUP_BUTTON})},children:[o.jsx("div",{className:"p-1",children:o.jsx(H,{variant:"super",className:"flex size-8 items-center justify-center rounded-full",children:o.jsx(pP,{className:"text-inverse size-5"})})}),o.jsx(F,{variant:"tinyRegular",className:"text-center",color:"super",children:y({defaultMessage:"Sign In",id:"Ub+AGcdPg6"})})]})})},hVt=({handleClick:e})=>{const{session:t}=Nt();return o.jsx("div",{className:"border-subtlest w-full border-t pt-1",children:t&&o.jsx(Ije,{session:t,onClick:e})})},Dje=({showBottomLabels:e})=>{const t="sidebar-v2-account-menu",{$t:n}=Z(),{isIncognito:r,incognitoType:s}=Qa({reason:t}),{session:a}=Nt(),{isPro:i,isMax:l,hasAccessToProFeatures:c}=Et(),u=Oje({reason:t}),d=$U().sidebar,m=u&&!d&&gye(),p=f.useCallback(h=>o.jsx(En,{showTooltip:!!a?.user?.username&&!e,tooltipText:n({defaultMessage:"Account & Settings",id:"zWaEuojd3m"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:o.jsxs("div",{className:"gap-xs group flex w-full cursor-pointer flex-col items-center",children:[o.jsxs("div",{className:"duration-quick relative select-none group-hover:opacity-80",children:[r?o.jsx(Ef,{inverse:!0,incognitoType:s}):o.jsx(Pt,{size:"medium",showProBadge:i,showMaxBadge:l,badgeProps:{show:m,className:"bg-super border-subtlest"},user:a?.user?.image}),o.jsx(Bn,{className:V("text-quietest group-hover:text-quiet duration-quick absolute right-0 top-1/2 size-3 -translate-y-1/2 translate-x-[calc(100%+2px)]",{"!text-quiet -translate-y-[calc(50%-2px)]":h})})]}),e&&o.jsx(F,{variant:"micro",color:"light",className:V("px-xs w-full truncate text-center",{"mt-two":c}),children:n({defaultMessage:"Account",id:"TwyMauNL3r"})})]})}),[e,a?.user?.username,n,r,i,l,a?.user?.image,m,c,s]);return o.jsx(Lje,{trigger:p})};Dje.displayName="SidebarAccountMenu";const Loe="#FF3B30",kN=R.memo(({variant:e})=>e==="iconOnly"?o.jsx("div",{className:"bg-base from-subtler to-subtler p-two absolute -right-2.5 -top-2.5 rounded-full bg-gradient-to-r",children:o.jsx("div",{className:"size-2 rounded-full",style:{backgroundColor:Loe}})}):o.jsx("div",{className:"absolute -right-1 -top-1 size-2 rounded-full",style:{backgroundColor:Loe}}));kN.displayName="NotificationBadge";const pz=R.memo(({text:e,variant:t})=>{const{openModal:n}=wt(),{trackEvent:r}=je(),[s,a]=f.useState(!1),i=lD();f.useEffect(()=>{a(i>5&&!Pg())},[i]);const l=f.useCallback(()=>{Ak(),r("homepage footer download menu opened",{}),n("platformOptionsModal")},[n,r]),c=f.useMemo(()=>o.jsxs("div",{className:"relative ml-auto",children:[o.jsx(le,{icon:vp,className:"size-4"}),s&&o.jsx(kN,{variant:t})]}),[s,t]);return o.jsx(pe,{size:"small",text:t==="iconOnly"?void 0:e,trailingComponent:c,pill:t==="iconOnly",fullWidth:t!=="iconOnly",onClick:l})});pz.displayName="SideDownloadPrompt";const gVt=()=>{const{$t:e}=Z();return o.jsx(En,{tooltipText:e({defaultMessage:"Download",id:"5q3qC0sC3r"}),className:"inline-flex",tooltipLayout:"right",asChild:!0,children:o.jsxs("div",{className:"gap-xs flex flex-col items-center [@media(max-height:680px)]:hidden",children:[o.jsx(pz,{variant:"iconOnly"}),o.jsx(F,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Install",id:"ubmFc8rrea"})})]})})},Fje=()=>{const e="sidebar-v2-enterprise-menu",{$t:t}=Z(),{organization:n}=kn({reason:e}),r=Gu();return o.jsx(En,{tooltipText:n?.display_name,tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:o.jsx(Ye,{href:`${r}/org`,className:"duration-quick flex select-none justify-center hover:opacity-80",children:n?.logo?o.jsx(Pt,{size:"medium",user:n?.logo,altText:"Logo"}):o.jsx(pe,{ariaLabel:t({defaultMessage:"Organization settings",id:"8JjaslSBQx"}),icon:io,pill:!0,size:"small",variant:"inverted"})})})};Fje.displayName="SidebarV2EnterpriseMenu";const yVt="gov_free_year",gR="gov",xVt=()=>{const e="sidebar-gov-badge",{isGovernmentRequestOrigin:t}=ls(),{$t:n}=Z(),r=lt(),{hasAccessToProFeatures:s}=Et(),a=N1e({reason:e}),i=_t(),[l,c]=f.useState(!1),[u,d]=f.useState(!1),{shouldShow:m}=sH({cueKey:"gov-badge",impressionsLimit:3,enabled:!0}),h=a.campaignId===yVt&&!s,g=r&&h,y=m&&!l?!0:void 0,x=f.useCallback(()=>{c(!0)},[]),v=f.useCallback(async()=>{if(!u){d(!0);try{const b=await g1e({reason:"sidebar-gov-badge-activation"});if(b?.status==="success")i.push(`/join/p/${gR}/welcome`);else{const _=b?.error_code||"UNKNOWN_ERROR";i.push(`/join/p/${gR}?error=${_}`)}}catch{i.push(`/join/p/${gR}?error=UNKNOWN_ERROR`)}finally{d(!1)}}},[i,u]);return t?o.jsx(lo,{hoverOpen:y?void 0:!0,isOpen:y,onClose:x,sideOffset:5,forceDarkMode:!0,content:o.jsxs("div",{className:"gap-md p-sm max-w-sideBarWidthXL flex flex-col",children:[o.jsx("img",{src:"/static/images/us-gov.png",alt:"GOV",className:"h-14 w-full rounded-md object-cover"}),o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",className:"mb-1 leading-tight",children:n({defaultMessage:"Thank you for your service!",id:"VZuM94AjHT"})}),o.jsx(F,{variant:"small",className:"leading-snug",color:"light",children:n(g?{defaultMessage:"Government users get Pro, premium models, and zero data usage.",id:"RgHwMywuQP"}:r?{defaultMessage:"Government users get premium models and zero data usage.",id:"FacxoKMcak"}:{defaultMessage:"Government visitors get premium models and zero data usage.",id:"gG23ZhCcKn"})})]}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[g&&o.jsx(pe,{variant:"primary",size:"small",text:n(u?{defaultMessage:"Activating...",id:"Hg2ZHpJ5KZ"}:{defaultMessage:"Activate Pro",id:"MCY2gI+lUl"}),onClick:v,disabled:u}),o.jsx(pe,{variant:"common",size:"small",text:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),onClick:()=>window.open("https://www.perplexity.ai/hub/blog/introducing-perplexity-for-government","_blank")})]})]}),arrowClassName:"!fill-inverse [&>path:last-of-type]:stroke-borderMain/50",placement:"right",childrenClassName:"inline-flex mt-sm items-center justify-center",children:o.jsxs(H,{variant:"textColor",className:"px-sm gap-xs ring-subtlest relative flex cursor-pointer items-center justify-center rounded py-1 ring-1",children:[o.jsx(dy,{countryCode:"US",className:"relative w-3.5"}),o.jsx(F,{variant:"tiny",color:"defaultInverted",className:"-translate-y-half relative !font-mono",children:"GOV"})]})}):null},Uje=f.memo(({isOpen:e,children:t,title:n,onPin:r,pinned:s,canPin:a,onMouseEnter:i,onMouseLeave:l,accessory:c,actions:u,appContentWrapperRef:d})=>{const{$t:m}=Z(),p=f.useMemo(()=>Uy(g=>{d.current?.contains(g.target)&&(window.removeEventListener("mousemove",p),e&&l())},100,{leading:!0,trailing:!0}),[l,d,e]);f.useEffect(()=>{e&&!s?window.addEventListener("mousemove",p):window.removeEventListener("mousemove",p)},[e,s,p]),xf(()=>{window.removeEventListener("mousemove",p)});const h=xx();return o.jsx("div",{className:"group/sidebar-menu pointer-events-none absolute inset-y-0 start-0 overflow-hidden ltr:-translate-x-px rtl:translate-x-px",style:{width:JE+(s?0:16)+Kh},children:o.jsxs(H,{className:V("inset-y-0 border-transparent duration-100 dark:border-transparent","end-md absolute start-0 flex flex-col border-e pe-[20px]",{"erp-tab:pt-two pt-[10px]":s,"ease-inCubic pointer-events-none opacity-0 ltr:-translate-x-[4%] rtl:translate-x-[4%]":!e&&!s,"!border-subtlest ease-outCubic shadow-xl":e&&!s,"pointer-events-auto":e||s}),variant:"underlay",onMouseEnter:i,onMouseLeave:l,style:{paddingLeft:h?void 0:Kh+12,paddingRight:h?Kh+12:void 0,width:JE+Kh},children:[!s&&e&&o.jsx("div",{className:"absolute inset-y-0 -end-[24px] start-0"}),o.jsxs(H,{className:"group/sidebar-menu-header relative mb-[12px] flex min-h-0 items-center justify-between border-b py-[12px]",children:[u&&e?o.jsx(sn,{items:u,isMobileStyle:!1,placement:"bottom-start",children:o.jsxs(F,{variant:"smallBold",className:"group relative cursor-pointer select-none",children:[o.jsx("span",{className:"bg-subtle -inset-x-sm -inset-y-xs absolute rounded-md opacity-0 duration-100 group-hover:opacity-100"}),o.jsxs("span",{className:"gap-xs relative flex items-center",children:[n,o.jsx(Bn,{className:"text-quietest group-hover:text-quiet size-4 opacity-0 duration-100 group-hover/sidebar-menu-header:opacity-100"})]})]})}):o.jsx(F,{variant:"smallBold",children:n}),o.jsxs("div",{className:"flex min-h-[24px] items-center",children:[o.jsx(Je,{initial:!1,children:c&&o.jsx(ve.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:c})}),a&&o.jsx(Te,{size:"tiny",icon:s?rDe:sDe,onClick:r,extraCSS:"!-me-sm",toolTip:m(s?{defaultMessage:"Unpin Sidebar",id:"0ms2vDE7D8"}:{defaultMessage:"Pin Sidebar",id:"rPlnyNxMsY"}),tooltipLayout:"bottom",testId:"sidebar-pin-sidebar"})]})]}),o.jsx(Je,{initial:!1,mode:"popLayout",children:o.jsx(ve.div,{initial:{opacity:0,x:h?10:-10},animate:{opacity:1,x:0},exit:{opacity:0},transition:{duration:.1,ease:an},className:"relative flex min-h-0 flex-1 flex-col",children:o.jsx("div",{className:"scrollbar-subtle mx-[-12px] mt-[-12px] flex min-h-0 flex-1 overflow-y-auto overflow-x-hidden p-[12px]",children:o.jsx("div",{className:"w-full",children:t})})},n)})]})})});Uje.displayName="SidebarMenu";const vVt=(e,t)=>{const{value:n,loading:r}=Dt({flag:"app-notifications-polling",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},bVt=jXe(5),Bje=({reason:e})=>{const{variation:t}=vVt(!1),n=We({queryKey:ktt(),queryFn:async()=>(await ae.GET("/rest/notifications/in-app/unread-count",e)).data.unread_count,staleTime:1e3*60*5,refetchInterval:()=>t?bVt:!1});return f.useMemo(()=>{const{data:r,...s}=n;return{count:r??0,...s}},[n])},_Vt=e=>typeof e=="object"&&e!==null&&"pages"in e&&Array.isArray(e.pages)&&e.pages.every(t=>"has_more"in t&&typeof t.has_more=="boolean"&&"next_cursor"in t&&(typeof t.next_cursor=="string"||t.next_cursor===null)&&"notifications"in t&&Array.isArray(t.notifications)&&t.notifications.every(n=>typeof n=="object"&&n!==null&&"notification_id"in n&&typeof n.notification_id=="string"&&"type"in n&&typeof n.type=="string"&&"is_read"in n&&typeof n.is_read=="boolean")),wVt=({enabled:e=!0,reason:t})=>{const n=$u({enabled:e,queryKey:yd(),queryFn:async({pageParam:h})=>(await ae.GET("/rest/notifications/in-app",t,{params:{query:{cursor:h}}})).data,getNextPageParam:h=>!h||h.notifications.length===0?null:h.next_cursor,initialPageParam:""}),{data:r,error:s,isError:a,refetch:i,isLoading:l,isFetching:c,hasNextPage:u,fetchNextPage:d,isFetchingNextPage:m}=n,p=f.useMemo(()=>r?.pages.flatMap(h=>h?.notifications??[])??[],[r]);return f.useMemo(()=>({refetch:i,error:s,isError:a,isLoading:l,isFetching:c,fetchNextPage:d,isFetchingNextPage:m,hasNextPage:u,notifications:p}),[i,s,a,p,u,d,m,l,c])};function TN({reason:e}){const t=xt(),n=St({mutationFn:i=>ae.POST("/rest/notifications/in-app/bulk-read",e,{body:{notification_ids:i?.notificationIds}}),onMutate:()=>{t.setQueryData(yd(),i=>_Vt(i)?{...i,pages:i?.pages.map(l=>({...l,notifications:l.notifications.map(c=>({...c,is_read:!0}))}))}:i)},onSuccess:()=>{t.invalidateQueries({queryKey:yd()})}}),r=St({mutationFn:i=>ae.POST("/rest/notifications/in-app/{notification_id}/read",e,{params:{path:{notification_id:i.notificationId}}}),onSuccess:()=>{t.invalidateQueries({queryKey:yd()})}}),s=St({mutationFn:i=>ae.DELETE("/rest/notifications/in-app/bulk-delete",e,{body:{notification_ids:[i.notificationId]}}),onSuccess:()=>{t.invalidateQueries({queryKey:yd()})}}),a=St({mutationFn:()=>ae.DELETE("/rest/notifications/in-app/read",e),onSuccess:()=>{t.invalidateQueries({queryKey:yd()})}});return f.useMemo(()=>({markAllAsRead:n,markAsRead:r,markAsDeleted:s,markAllReadAsDeleted:a}),[n,r,s,a])}const Vje=Yt("SidebarNotificationsContext",null),CVt=({children:e})=>{const t="sidebar-notifications-provider",{openModal:n}=wt(),[r,s]=f.useState(!1),[a,i]=f.useState(null),[l,c]=f.useState(null),{markAllAsRead:u}=TN({reason:t}),d=f.useMemo(()=>a===null&&l===null,[a,l]),m=f.useCallback(x=>l===x,[l]),p=f.useCallback(()=>{s(!0)},[]),h=f.useCallback(()=>{d&&(s(!1),u.mutate())},[d,u]),g=f.useCallback(()=>{s(!r)},[r]),y=f.useCallback((x,v)=>{i(x),n(x,{...v,onClose:(...b)=>{v?.onClose?.(...b),i(null)}})},[n]);return o.jsx(Vje.Provider,{value:{isOpen:r,isMenuOpen:m,setOpenMenu:c,open:p,close:h,toggle:g,openModal:y},children:e})},Ju=()=>{const e=f.useContext(Vje);if(!e)throw new Error("useSidebarNotifications must be used within a SidebarNotificationsProvider");return e},$je=({visible:e})=>e?o.jsx(H,{variant:"underlay",className:"p-two rounded-full",children:o.jsx(H,{variant:"super",className:V("group-hover:ring-subtlest pointer-events-none size-2 rounded-full opacity-0 ring-2 ring-transparent transition-opacity duration-300",{"opacity-100":e})})}):null,Wje=()=>{const{$t:e}=Z(),{trackEvent:t}=je(),{toggle:n,isOpen:r}=Ju(),{count:s}=Bje({reason:"SidebarNotificationsButton"}),a=f.useCallback(()=>{r||t("inbox opened",{unreadCount:s}),n()},[r,t,s,n]);return o.jsx("div",{className:"-mb-xs flex w-full flex-col items-center justify-center",children:o.jsx("div",{className:"flex flex-col items-center justify-center",children:o.jsx(En,{tooltipText:e({defaultMessage:"Notifications",id:"NAidKbB0vi"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:16,asChild:!0,children:o.jsxs("div",{className:"group relative size-9 rounded-full",children:[o.jsx(Te,{icon:yp,onClick:a,pill:!0,extraCSS:"!size-full dark:!text-foreground dark:[&_svg]:opacity-[0.55] dark:group-hover:[&_svg]:opacity-100 dark:[&_svg]:duration-normal",testId:"sidebar-new-thread",size:"large"}),o.jsx(Hje,{})]})})})})};Wje.displayName="SidebarNotificationsButton";const Hje=()=>{const{count:e,refetch:t}=Bje({reason:"SidebarNotificationsButtonCounter"}),{isOpen:n}=Ju(),r=f.useRef(null),[s,a]=f.useState(null);return f.useEffect(()=>{if(n){a(!1),r.current&&clearTimeout(r.current);return}return a(i=>i===null?e>0:(r.current=setTimeout(()=>{a(e>0)},1e3),i)),()=>{r.current&&clearTimeout(r.current)}},[e,n]),f.useEffect(()=>{n&&t()},[n,t]),o.jsx("div",{className:"right-xs top-xs pointer-events-none absolute -translate-x-px translate-y-px",children:o.jsx($je,{visible:!!s})})};Hje.displayName="SidebarNotificationsButtonCounter";function p7({menuId:e,items:t,menu:n,children:r,onClose:s,onOpen:a}){const i=Ca(),{isMenuOpen:l,setOpenMenu:c}=Ju(),u=f.useCallback(()=>{c(e),a?.()},[e,c,a]),d=f.useCallback(()=>{l(e)&&c(null)},[e,c,l]);return f.useEffect(()=>{l(e)||s?.()},[l,e,s]),n?n({onOpen:u,onClose:d}):o.jsx(sn,{isOpen:l(e),items:t??[],isMobileStyle:i,boxProps:{className:"shrink-0"},onOpen:u,onClose:d,children:r??o.jsx(Te,{size:"tiny",icon:$d})})}const SVt=e=>[e.deleteNotification],zje=({notification:e,focused:t,onOpen:n,onClose:r,getMenuItems:s=SVt})=>{const{$t:a}=Z(),{markAsDeleted:i}=TN({reason:"SidebarNotificationsListItemMenu"}),l=f.useMemo(()=>({type:"default",text:a({defaultMessage:"Delete notification",id:"+Nk8iq3V1o"}),icon:Vd,onClick:()=>{i.mutate({notificationId:e.notification_id})}}),[i,a,e.notification_id]),c=f.useMemo(()=>s({deleteNotification:l}),[s,l]);return o.jsx("div",{className:V("pointer-events-auto col-start-1 row-start-1 flex items-center justify-center justify-self-end opacity-0 group-hover/notification-list-item:opacity-100",{"opacity-100":t}),children:o.jsx(p7,{menuId:e.notification_id,items:c,onOpen:n,onClose:r})})};zje.displayName="SidebarNotificationsListItemMenu";const EVt=(e,t)=>{const r=Date.now()-t,s=Math.floor(r/6e4),a=Math.floor(s/60);return s<1?e.formatNumber(1,{style:"unit",unit:"minute",unitDisplay:"narrow"}):s<60?e.formatNumber(s,{style:"unit",unit:"minute",unitDisplay:"narrow"}):EU(new Date(t))?e.formatNumber(a,{style:"unit",unit:"hour"}):kXe(new Date(t))?e.formatDate(new Date(t),{month:"short",day:"numeric"}):e.formatDate(new Date(t),{year:"numeric",month:"short",day:"numeric"})},MVt=({notification:e,className:t,focused:n})=>{const r=Z(),s=f.useMemo(()=>EVt(r,e.created_at_ms),[r,e.created_at_ms]);return o.jsxs("div",{className:V("col-start-1 row-start-1 flex items-center justify-end gap-1 text-nowrap group-hover/notification-list-item:opacity-0",t,{"opacity-0":n}),children:[o.jsx(F,{variant:"tinyRegular",color:"light",children:s}),o.jsx($je,{visible:!e.is_read})]})},$x=({notification:e,getMenuItems:t,children:n})=>{const[r,s]=f.useState(!1),[a,i]=f.useState(!1),l=f.useCallback(()=>{s(!0)},[]),c=f.useCallback(()=>{s(!1)},[]);return o.jsxs(H,{variant:r||a?"subtler":"transparent",className:"group/notification-list-item grid grid-cols-[1fr_max-content] grid-rows-1 gap-2 rounded-lg p-2",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[o.jsx(Gje,{notification:e,className:"col-span-full row-start-1",children:n}),o.jsxs("div",{className:"col-start-2 row-start-1 grid grid-cols-1 grid-rows-1 items-center",children:[o.jsx(MVt,{notification:e,focused:r}),o.jsx(zje,{notification:e,focused:r,getMenuItems:t,onOpen:l,onClose:c})]})]})};$x.displayName="SidebarNotificationsListItemContainer";const Gje=({notification:e,className:t,children:n})=>{const{close:r}=Ju(),{trackEvent:s}=je(),{markAsRead:a}=TN({reason:"SidebarNotificationsListItemContainer"}),i=f.useCallback(c=>{s("inbox notification clicked",{notificationId:e.notification_id,notificationType:e.type,wasUnread:!e.is_read,deeplinkPath:e.deeplink_path||void 0}),!(c.metaKey||c.ctrlKey)&&e.deeplink_path&&r(),!e.is_read&&a.mutate({notificationId:e.notification_id})},[s,e.notification_id,e.type,e.is_read,e.deeplink_path,r,a]),l=f.useMemo(()=>V("grid gap-2 text-left grid-cols-subgrid",t),[t]);return e.deeplink_path?o.jsx(Ye,{href:e.deeplink_path,className:l,onClick:i,children:o.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})}):o.jsx("button",{type:"button",className:l,onClick:i,children:o.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})})};Gje.displayName="SidebarNotificationsListItemAction";const Wx=({title:e})=>o.jsx(F,{variant:"small",className:"line-clamp-1 text-left",children:e});Wx.displayName="SidebarNotificationsListItemTitle";const Hx=({primaryIcon:e,secondaryIcon:t})=>o.jsxs("div",{className:"relative flex size-9 shrink-0 items-center",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-full",children:o.jsx(le,{icon:e,size:"md"})}),o.jsx("div",{className:"bg-base absolute bottom-0 right-0 flex size-4 items-center justify-center rounded-full",children:o.jsx(le,{icon:t,size:"xs"})})]});Hx.displayName="SidebarNotificationsListItemIcon";const Gw=({items:e})=>{const t=o.jsx("span",{className:"mx-1 inline-block size-0.5 shrink-0 -translate-y-0.5 bg-current"});return o.jsx(F,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate",children:e.map((n,r)=>o.jsxs(f.Fragment,{children:[r>0&&t,n]},r))})};Gw.displayName="SidebarNotificationsListItemMeta";const kVt=({notification:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=Mn(),{openModal:r}=Ju(),s=f.useCallback(a=>[{type:"default",text:t({defaultMessage:"Edit alert",id:"84mzvWHJ9O"}),icon:Vu,onClick:async()=>{const l=await L5({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});if(!l){n(t({defaultMessage:"Can not edit alert. Alert has been deleted.",id:"ZXF6i2Ca2v"}),"error");return}r("financeAlertModal",{task:l})}},a.deleteNotification],[t,e.metadata.task_id,r,n]);return o.jsxs($x,{notification:e,getMenuItems:s,children:[o.jsx(Hx,{primaryIcon:r_,secondaryIcon:yp}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(Wx,{title:e.title}),o.jsx(Gw,{items:[t({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),e.body]})]})]})},TVt=({notification:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=Mn(),{openModal:r}=Ju(),s=_t(),{variation:a,loading:i}=SN(!1),l=f.useMemo(()=>kU(e.metadata.model_preference)??de.DEFAULT,[e.metadata.model_preference]),c=Jhe(l),u=f.useCallback(async h=>{const g=await L5({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});return g||(n(h,"error"),null)},[e.metadata.task_id,n]),d=f.useCallback(async()=>{const h=await u(t({defaultMessage:"Can not edit task. Task has been deleted.",id:"AsFehDyYGj"}));if(!h)return;const g=y=>{y==="updated"&&n(t({defaultMessage:"Task edited",id:"18F/N84T3b"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))};!i&&a?r("automationModal",{initial:h,source:"notifications_panel",initialConfiguration:hge({selectedTask:h}),onSuccess:g}):r("scheduledTaskModal",{initial:h,source:"notifications_panel",onSuccess:g})},[u,r,a,i,n,t,s]),m=f.useCallback(async()=>{const h=await u(t({defaultMessage:"Can not turn off task. Task has been deleted.",id:"GqnRiHY3AK"}));if(h)try{await m9({taskId:h.id,payload:{status:"PAUSED"},reason:"SidebarNotificationsListItemScheduledTaskComplete"}),n(t({defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))}catch(g){ne.error(g),n(t({defaultMessage:"Failed to turn off task",id:"0sPa5XFHCj"}),"error")}},[u,n,t,s]),p=f.useCallback(h=>{const g={type:"default",text:t({defaultMessage:"Turn off task",id:"+H7RughJHn"}),icon:aDe,onClick:m},y={type:"default",text:t({defaultMessage:"Edit task",id:"dsTLW1Kx6B"}),icon:Vu,onClick:d};return[g,y,h.deleteNotification]},[t,m,d]);return o.jsxs($x,{notification:e,getMenuItems:p,children:[o.jsx(Hx,{primaryIcon:c,secondaryIcon:n_}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(Wx,{title:e.title}),o.jsx(Gw,{items:[t(gs[MU(l)].name),e.body]})]})]})},NVt=({notification:e})=>{const{$t:t}=Z(),n=f.useMemo(()=>kU(e.metadata.model_preference)??de.DEFAULT,[e.metadata.model_preference]),r=f.useMemo(()=>MU(n),[n]),s=Jhe(n);return o.jsxs($x,{notification:e,children:[o.jsx(Hx,{primaryIcon:s,secondaryIcon:Ar}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(Wx,{title:e.title}),o.jsx(Gw,{items:[t(gs[r].name),e.body]})]})]})},qje=({notification:e})=>{switch(e.type){case"SCHEDULED_TASK_COMPLETE":return o.jsx(TVt,{notification:e});case"THREAD_COMPLETE":return o.jsx(NVt,{notification:e});case"FINANCE_ALERT":return o.jsx(kVt,{notification:e});case"ORG_INVITATION":return o.jsx(Kje,{notification:e});default:return o.jsx(jVt,{notification:e})}},jVt=({notification:e})=>o.jsxs($x,{notification:e,children:[o.jsx(Hx,{primaryIcon:yp,secondaryIcon:Ar}),o.jsxs("div",{className:"flex flex-1 flex-col",children:[o.jsx(Wx,{title:e.title}),o.jsx(F,{variant:"tiny",color:"light",className:"line-clamp-1",children:e.body})]})]});qje.displayName="SidebarNotificationsListItem";const Kje=f.memo(({notification:e})=>{const{$t:t}=Z(),n=f.useCallback(s=>[{type:"default",text:t({defaultMessage:"View invite",id:"TDWT6zhMKG"}),icon:gp,onClick:()=>{e.deeplink_path&&(window.location.href=e.deeplink_path)}},s.deleteNotification],[t,e.deeplink_path]),r=f.useMemo(()=>[e.body],[e.body]);return o.jsxs($x,{notification:e,getMenuItems:n,children:[o.jsx(Hx,{primaryIcon:io,secondaryIcon:Cu}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(Wx,{title:e.title}),o.jsx(Gw,{items:r})]})]})});Kje.displayName="SidebarNotificationsListItemOrgInvitation";const Yje=()=>{const{isOpen:e}=Ju(),{notifications:t,refetch:n,isError:r,isLoading:s,isFetching:a,hasNextPage:i,fetchNextPage:l,isFetchingNextPage:c}=wVt({enabled:e,reason:"SidebarNotificationsList"}),u=xt(),{ref:d,isIntersecting:m}=J0e({threshold:.5});f.useEffect(()=>{m&&i&&!c&&l()},[m,i,c,l]);const p=f.useCallback(()=>{u.setQueryData(yd(),h=>{if(!(!h||h.pages.length===0))return{pages:[h.pages[0]],pageParams:[h.pageParams[0]]}})},[u]);return f.useEffect(()=>{e&&(p(),n())},[e,p,n]),s||r&&a?o.jsx("div",{className:"flex items-center justify-center p-4",children:o.jsx(Zr,{size:16})}):r?o.jsx(IVt,{refetch:n}):t.length===0?o.jsx(AVt,{}):o.jsxs("div",{className:"scrollbar-subtle pt-xs overflow-y-auto",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[t.map(h=>o.jsx(qje,{notification:h},h.notification_id)),c&&o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(Zr,{size:16})})]}),o.jsx("div",{ref:d})]})};Yje.displayName="SidebarNotificationsList";const AVt=()=>{const{$t:e}=Z();return o.jsxs(F,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 p-4 opacity-70",children:[o.jsx(le,{icon:iDe,size:"2xl"}),o.jsx("span",{className:"w-36 text-center",children:e({defaultMessage:"Your notifications will appear here",id:"byRgJ1ceG3"})})]})},IVt=({refetch:e})=>{const{$t:t}=Z();return o.jsxs(F,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 pb-4",children:[o.jsx(le,{icon:jD,size:"2xl",className:"opacity-70"}),o.jsx("span",{className:"mb-2 w-40 text-center opacity-70",children:t({defaultMessage:"There was an error loading your notifications",id:"CSvXfEOB3Y"})}),o.jsx(pe,{size:"small",variant:"border",text:t({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:()=>{e()}})]})};function RVt({source:e,onOpen:t,onClose:n,openModal:r,children:s}){const{$t:a}=Z(),i=Ca(),{openModal:l}=wt(),{hasActiveSubscription:c}=Et(),{variation:u,loading:d}=SN(!1),{variation:m,loading:p}=ije(!1),h=r??l,g=[{type:"default",text:a({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:Om,onClick:()=>{!d&&u?h("automationModal",{source:e,initialConfiguration:L3(c)}):h("scheduledTaskModal",{source:e})}},{type:"default",text:a({defaultMessage:"Price alert",id:"XMapyUiPpV"}),icon:yp,onClick:()=>{!p&&m?h("automationModal",{source:e,initialConfiguration:gge()}):h("financeAlertModal",{})}}];return o.jsx(sn,{items:g,isMobileStyle:i,boxProps:{className:"shrink-0"},onOpen:t,onClose:n,children:s??o.jsx(pe,{variant:"border",size:"small",icon:ur})})}const PVt="notifications-panel-header-menu",OVt="notifications-panel-header-create-task-menu",Qje=()=>{const{$t:e}=Z(),{openModal:t}=Ju(),{markAllReadAsDeleted:n}=TN({reason:"SidebarNotificationsPanelHeader"}),r=[{type:"default",text:e({defaultMessage:"Delete all read",id:"CpNQrgahgD"}),icon:Vd,onClick:()=>{n.mutate()}}];return o.jsxs(H,{className:"gap-md px-sm pt-xs pb-sm -mx-xs flex items-center justify-between border-b",children:[o.jsx("div",{className:"ml-xs flex items-center gap-1",children:o.jsx(F,{variant:"smallBold",children:e({defaultMessage:"Notifications",id:"NAidKbB0vi"})})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(p7,{menuId:PVt,items:r}),o.jsx(p7,{menuId:OVt,menu:({onOpen:s,onClose:a})=>o.jsx(RVt,{source:"notifications_panel",onOpen:s,onClose:a,openModal:t,children:o.jsx(Te,{size:"tiny",icon:Om,toolTip:e({defaultMessage:"Schedule a notification",id:"7Zbhtucuv7"})})})})]})]})};Qje.displayName="SidebarNotificationsPanelHeader";const Xje=({ref:e})=>o.jsx("div",{ref:e,className:"group/sidebar-notifications max-h-[50vh] w-[400px]",children:o.jsxs("div",{className:"grid h-full grid-cols-1 grid-rows-[min-content_1fr]",children:[o.jsx(Qje,{}),o.jsx(Yje,{})]})});Xje.displayName="SidebarNotifications";const Zje=({ref:e})=>{const{variation:t,loading:n}=H4e(!1),r=lt(),{isOpen:s,close:a}=Ju(),i=xx();return n||!t||!r?null:o.jsx("div",{className:"relative flex flex-col items-center justify-center",children:o.jsx(lo,{isOpen:s,onClose:a,placement:i?"top-end":"top-start",content:o.jsx(Xje,{ref:e}),contentClassName:"inline-flex",childrenClassName:"inline-flex w-full",sideOffset:5,children:o.jsx(Wje,{})})})};Zje.displayName="SidebarNotifications";const Jje=f.memo(({icon:e,selected:t,hovered:n,iconSize:r=24,showBadge:s=!1,className:a})=>o.jsxs(H,{className:"grid size-[40px] place-items-center",children:[o.jsx(H,{variant:"subtle",className:V("size-[90%] rounded-md duration-100 [grid-area:1/-1] group-hover:opacity-100",{"opacity-0":!t&&!n},a)}),o.jsxs("div",{className:"relative [grid-area:1/-1]",children:[o.jsx(le,{icon:e,size:r,className:V("duration-100 group-hover:scale-110",{"text-foreground":t,"text-quiet":!t,"scale-110":t||n})}),s&&o.jsx(kN,{variant:"iconOnly"})]})]}));Jje.displayName="SidebarTabButton";const eAe=f.memo(({icon:e,title:t,selected:n,hovered:r,href:s,onHover:a,onLeave:i,onClick:l,showBadge:c=!1})=>o.jsxs(Ye,{href:s,"data-testid":`sidebar-${t.toLowerCase()}`,className:"p-sm group flex w-full flex-col items-center justify-center gap-0.5",onMouseEnter:a,onMouseLeave:i,onClick:l,children:[o.jsx(Jje,{icon:e,selected:n,hovered:r,showBadge:c}),o.jsx(F,{variant:"micro",color:n?"default":"light",className:V("line-clamp-2 w-full text-ellipsis text-center leading-[1.1]",{"font-medium":n}),children:t})]}));eAe.displayName="SidebarTab";const tAe=()=>{const{$t:e}=Z(),{trackEvent:t}=je(),n=co(),{shouldShow:r,setReachedImpressions:s}=sH({cueKey:"sidebar-upgrade-badge",impressionsLimit:10,enabled:!0}),a=f.useCallback(()=>{t("sidebar pro upsell clicked"),s(),n({origin:De.SIDEBAR_PRO_UPSELL})},[t,s,n]);return o.jsxs("button",{className:"gap-xs group inline-flex appearance-none flex-col items-center [@media(max-height:680px)]:hidden",onClick:a,"data-testid":"sidebar-upgrade-button",children:[o.jsx(H,{variant:"subtle",className:"flex size-8 items-center justify-center rounded-full duration-100 group-hover:opacity-80",children:o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"size-4"}),r&&o.jsx(kN,{variant:"iconOnly"})]})}),o.jsx(F,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})]})};tAe.displayName="SidebarUpgradeButton";const LVt=({category:e})=>{const{$t:t}=Z();let n="/spaces";return e==="invited"?n="/spaces#invites":e==="organization"?n="/spaces#organization":(e==="private"||e==="saved"||e==="shared")&&(n="/spaces#my-spaces"),o.jsx(Ye,{href:n,className:"m-0 w-full border-none bg-transparent p-0 text-left no-underline",children:o.jsx(F,{variant:"tinyRegular",color:"light",className:"duration-200 hover:opacity-60",children:t({defaultMessage:"View All",id:"wbcwKddwLa"})})})},nAe=R.memo(({item:{title:e,slug:t,emoji:n},sidebarOpen:r})=>{const{setMobileSidebarOpen:s}=Yu(),a=Ft(),i=`/spaces/${t}`,l=f.useCallback(()=>{s(!1)},[s]);return o.jsx(qs,{id:`SIDEBAR_SPACE_${t}`,href:i,text:e,fadeOut:!0,selected:a===i,sidebarOpen:r,onClick:l,icon:n?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(vf,{unified:n,size:"tiny"})}):o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(le,{icon:yi,className:"text-quiet size-4 shrink-0"})})})});nAe.displayName="SpaceHistoryItem";const Doe={organization:{defaultMessage:"Organization",id:"K56Dims7Up"},private:{defaultMessage:"Private",id:"viXE3205/2"},shared:{defaultMessage:"Shared",id:"kWI6zXRaHY"},saved:{defaultMessage:"Saved",id:"fsB/4pdUqN"},invited:{defaultMessage:"Invites",id:"Wy+IdbkBFc"}},DVt={organization:"/spaces#organization",private:"/spaces#my-spaces",shared:"/spaces#my-spaces",saved:"/spaces#my-spaces",invited:"/spaces#invites"};function FVt({category:e,accessory:t,sidebarOpen:n,isLastCategory:r}){const s="spaces-sidebar-section",{$t:a}=Z(),{data:i,isLoading:l}=wit({category:e,reason:s}),c=f.useMemo(()=>i?.pages.flatMap(u=>u).filter(u=>u!==void 0)??fe,[i?.pages]);return l||c.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx(Cy,{href:DVt[e]||"/spaces",text:a(Doe[e]||Doe.private),accessory:t}),o.jsx(zb,{show:!0,data:c,type:"space_navbar_item",HistoryComponent:({item:u,position:d})=>o.jsx(nAe,{item:u,position:d,sidebarOpen:n}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5"}),c[c.length-1]?.has_next_page&&o.jsx(LVt,{category:e}),!r&&o.jsx(Bb,{})]})}const rAe=R.memo(({item:{title:e,slug:t,emoji:n,user_permission:r},sidebarOpen:s})=>{const{setMobileSidebarOpen:a}=Yu(),i=`/spaces/${t}`,l=f.useCallback(()=>{a(!1)},[a]),c=Jg(r),u=Ft();return o.jsx(qs,{id:`SIDEBAR_COLLECTION_${t}`,href:i,text:e,fadeOut:!0,selected:u===i,sidebarOpen:s,onClick:l,icon:c?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(le,{icon:PD,className:"text-quiet size-4 shrink-0"})}):n?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(vf,{unified:n,size:"tiny"})}):o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(le,{icon:yi,className:"text-quiet size-4 shrink-0"})})})});rAe.displayName="CollectionHistoryItemV2";const Foe="pb-lg flex flex-col gap-[12px]",sAe=f.memo(({sidebarOpen:e})=>{const t="spaces-sidebar",{data:n,isLoading:r}=_it({reason:t}),s=lt(),{$t:a}=Z(),i=_l(),{openModal:l}=wt(),c=YB(),u=Array.isArray(i?.slug)?i.slug[0]:i?.slug,{collection:d}=Oc({collectionSlug:u,reason:t}),{handleCreateNewSpace:m}=KB(),{templateSpace:p}=m0e({collectionSlug:u??"",reason:t}),h=f.useCallback(()=>{l("spaceCreate",{existingCollection:null,onCreate:null})},[l]),g=f.useCallback(()=>{c?m():h()},[c,m,h]),{openVisitorLoginUpsell:y}=gr({enabled:!s}),v=!(n!==void 0&&((n.organization_spaces?.length??0)>0||(n.saved_spaces?.length??0)>0||(n.private_spaces?.length??0)>0||(n.invited_spaces?.length??0)>0||(n.shared_spaces?.length??0)>0)),b=uJ.filter(_=>{const w=(()=>{switch(_){case"private":return n?.private_spaces;case"shared":return n?.shared_spaces;case"saved":return n?.saved_spaces;case"organization":return n?.organization_spaces;case"invited":return n?.invited_spaces;default:return[]}})();return w&&w.length>0});return v?o.jsxs("div",{className:Foe,children:[o.jsx(qs,{id:"SIDEBAR_WELCOME",href:"/spaces/templates",text:a({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),icon:o.jsx(le,{icon:yi,size:"sm"}),sidebarOpen:e}),r?o.jsx(XM,{}):o.jsx(qs,{id:"SIDEBAR_CREATE_SPACE",icon:ur,onClick:_=>{s?(_.preventDefault(),g()):(_.preventDefault(),y({title:a({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:De.SPACES_PAGE}))},text:a({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),deemphasized:!0,testId:"create-space-button",sidebarOpen:e})]}):o.jsxs("div",{className:Foe,children:[o.jsxs(Ub,{children:[o.jsx(qs,{id:"SIDEBAR_TEMPLATES",href:"/spaces/templates",text:a({defaultMessage:"Templates",id:"A3ptulOTB3"}),icon:o.jsx(le,{icon:oDe}),sidebarOpen:e}),!!p&&d&&o.jsx(rAe,{item:d,position:0,sidebarOpen:e}),o.jsx(qs,{id:"SIDEBAR_CREATE_SPACE",onClick:g,text:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:ur,sidebarOpen:e,testId:"create-space-button"})]}),o.jsx(Bb,{}),r?o.jsx(XM,{}):uJ.map(_=>o.jsx(FVt,{category:_,sidebarOpen:e,accessory:_==="private"?o.jsx(Te,{toolTip:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:ur,size:"tiny",extraCSS:"-mr-sm",onClick:g,testId:"create-space-button"}):void 0,isLastCategory:_===b[b.length-1]},_))]})});sAe.displayName="SpacesSidebar";const aAe=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[s,a]=f.useState(""),i=f.useCallback(()=>{r(!0),setTimeout(()=>{r(!1)},2e3)},[]),l=f.useCallback(()=>{a("Brandmark copied to clipboard"),t(!1),i()},[i]),c=f.useCallback(()=>{a("Logo copied to clipboard"),t(!1),i()},[i]),u=f.useCallback(()=>{a("Brand kit downloading..."),t(!1),i()},[i]),d=f.useCallback(()=>{t(!1)},[]);return f.useMemo(()=>({toastCopy:s,toastVisible:n,isBrandDropdownOpen:e,setBrandDropdownOpen:t,handleBrandCopy:l,handleLogoCopy:c,handleDownload:u,handlePopoverClose:d}),[l,u,c,d,e,s,n])},UVt=we(()=>Q(()=>import("./BrandPopoverContent-D_L9MV1u.js"),__vite__mapDeps([128,3,1,5,6,4])),{loading:()=>o.jsx("div",{className:"w-[200px]",children:o.jsxs(H,{className:"gap-sm p-sm flex flex-col",children:[o.jsx(To,{noLines:!0,size:"tiny"}),o.jsx(To,{noLines:!0,size:"tiny"}),o.jsx(To,{noLines:!0,size:"tiny"})]})})}),BVt=R.memo(()=>o.jsx("svg",{className:"h-auto w-[14px]",width:"278",height:"330",viewBox:"0 0 278 330",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126.99 83.0617L37.008 0.156738V98.524H0V240.866H37.11V329.64L126.99 250.476V325.948H150.506V249.154L241.005 328.664V240.866H278V98.524H240.891V0.156755L150.506 83.4328V4.1913H126.99V83.0617ZM109.019 121.826L37.088 187.144V217.564H23.5159V121.826H109.019ZM151.01 137.113L217.396 197.396V240.866H217.489V276.862L151.01 218.454V137.113ZM241.005 186.421L169.711 121.826H254.484V217.564H241.005V186.421ZM60.625 197.477L126.99 137.199V219.3L60.625 277.752V197.477ZM168.661 98.524L217.375 53.6415V98.524H168.661ZM60.524 53.6416L109.238 98.524H60.524V53.6416Z",fill:"currentColor"})}));BVt.displayName="Brandmark";const hz=R.memo(({children:e,onLogoCopy:t,onBrandmarkCopy:n,onDownload:r,...s})=>{const a=f.useMemo(()=>o.jsx(UVt,{onLogoCopy:t,onBrandmarkCopy:n,onDownload:r}),[n,r,t]);return o.jsx(lo,{content:a,placement:"right-start",...s,children:e})});hz.displayName="BrandPopover";const VVt=()=>{const{isMax:e}=Et(),{isEnterprise:t,isFetching:n}=H3({reason:"sidebar-v2"}),s=lt()&&!n&&!t;return f.useMemo(()=>s&&!e,[e,s])},$Vt=e=>{switch(e?.split("/").slice(1)?.[0]??""){case"":case"search":case"page":return"home";case"spaces":case"collections":return"spaces";case"discover":return"discover";default:return"home"}},iAe=f.memo(({appContentWrapperRef:e,minimalMode:t})=>{const n="sidebar-v2",[r,s]=f.useState(null),a=Ft(),i=f.useRef(null),l=f.useRef(null),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),m=f.useRef(null),{isSidebarPinned:p,actions:h}=_n(),{isIncognito:g}=Qa({reason:n}),y=f.useRef(null),[x,v]=f.useState(null),[b,_]=f.useState(!1),w=_t(),C=lt(),{openVisitorLoginUpsell:S}=gr({enabled:!C}),E=AAt({reason:n}),k=Ut()?.get("spaces_created")==="true",N=f.useRef(null),P=f.useRef(null),[L,O]=f.useState(!1),[A,j]=f.useState(!1),T=p&&!t,{setBrandDropdownOpen:I,handleBrandCopy:U,handleDownload:B,handleLogoCopy:D,isBrandDropdownOpen:W,handlePopoverClose:z,toastCopy:$,toastVisible:X}=aAe(),q=pn(),{device:{isWindowsApp:Y}}=Lt(),{handleShowPanel:G}=kp(),{shouldShowLossAversionModal:J,handleOpenLossAversion:K}=vx(),{isEnterprise:te}=H3({reason:"sidebar-v2"}),re=Ve=>{Ve.button===2&&(Ve.preventDefault(),I(!0))},se=Ve=>{l.current=setTimeout(()=>{s(Ve)},100),i.current&&clearTimeout(i.current),d.current&&clearTimeout(d.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},me=x||$Vt(a),{$t:oe}=Z(),ge=()=>{l.current&&clearTimeout(l.current),i.current=setTimeout(()=>{s(null)},500)},xe=()=>{h.setIsSidebarPinned(!p)},ye=f.useCallback(()=>{s(null),_(!1)},[s,_]),_e=()=>{i.current&&clearTimeout(i.current),d.current&&clearTimeout(d.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},be=()=>{l.current&&clearTimeout(l.current),c.current=setTimeout(()=>{s(null)},150),d.current=setTimeout(()=>{_(!1)},150)},Ne=f.useMemo(()=>{if(r||b){const Ve=r??me;return y.current=Ve,Ve}return y.current&&!T?(setTimeout(()=>{y.current=null},500),y.current):T||b?me:"home"},[r,me,T,b]),Ee=f.useCallback(()=>{if(ye(),Y)G();else if(J)K({args:{callback:()=>{w.push("/")},origin:De.NEW_THREAD_BUTTON}});else{w.push("/");const Ve=document.getElementById("ask-input");Ve&&Ve.focus()}},[J,K,w,Y,G,ye]);f.useEffect(()=>{v(null)},[a]);const Re=r!==null||T||b,Ae=f.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{ye()},1e3)},[ye]),st=f.useMemo(()=>[{id:"home",title:oe({defaultMessage:"Home",id:"ejEGdxSUGs"}),icon:ade,menuComponent:o.jsx(cVt,{isOpen:Re,onCreateClick:ye,onDeleteThreadOrBookmark:Ae,isConfiguring:A,setIsConfiguring:j}),href:"/",actions:[{text:oe({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),onClick:()=>{j(!0)},show:!0,type:"default",size:Qt.small,icon:cE}]},{id:"discover",title:oe({defaultMessage:"Discover",id:"cE4HfwyEyr"}),icon:ide,accessoryIcon:cE,accessoryClick:Ve=>{C?O(!0):(Ve.preventDefault(),S({title:oe({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:De.DISCOVER_TOPICS}))},accessoryTooltip:oe({defaultMessage:"Personalize Discover",id:"d0oRgWBA8Q"}),href:"/discover",menuComponent:o.jsx(Qke,{isConfiguring:L,setConfiguring:O,sidebarOpen:Re})},{id:"spaces",title:oe({defaultMessage:"Spaces",id:"ZMoczsYew9"}),icon:yi,menuComponent:o.jsx(sAe,{sidebarOpen:Re}),href:E,requireLogin:!0,showBadge:k}],[L,O,oe,C,S,Re,ye,Ae,A,j,E,k]),it=f.useMemo(()=>st.find(Ve=>Ve.id===Ne),[Ne,st]),Se=Ve=>{const Le=N.current&&N.current.contains(Ve.target);if(Le){ke();return}P.current&&P.current.contains(Ve.target)&&!Le&&ue(Ve)},ue=Ve=>{d.current&&clearTimeout(d.current),!(N.current&&N.current.contains(Ve.target))&&(u.current=setTimeout(()=>{_(!0)},100),m.current&&clearTimeout(m.current))},ke=()=>{u.current&&clearTimeout(u.current),d.current=setTimeout(()=>{_(!1)},100)},et=f.useCallback(Ve=>{(Ve.metaKey||Ve.ctrlKey)&&Ve.key===";"&&(Ve.preventDefault(),h.setIsIncognito(!g))},[h,g]);f.useEffect(()=>(document.addEventListener("keydown",et),()=>{document.removeEventListener("keydown",et)}),[et]);const Ge=VVt(),ft=!t&&!Y&&!q&&C,Qe=xx();return o.jsx(WVt,{isOpen:Re,children:o.jsxs(H,{variant:"transparent",className:V("group/sidebar relative z-10 hidden min-h-0 flex-none flex-row-reverse md:flex",{"duration-100":t}),children:[t&&o.jsx(H,{variant:"background",className:"absolute inset-y-0 -right-px left-0"}),o.jsx(Uje,{isOpen:Re,title:it?.title??"closed",onPin:xe,pinned:T,onMouseEnter:_e,onMouseLeave:be,appContentWrapperRef:e,actions:it?.actions,canPin:!t,accessory:it?.accessoryIcon&&o.jsx(Te,{icon:it.accessoryIcon,onClick:it.accessoryClick,size:"tiny",toolTip:it.accessoryTooltip,tooltipLayout:"bottom"}),children:it?.menuComponent}),o.jsxs(H,{ref:P,variant:"transparent",style:{width:Kh},className:"py-md scrollbar-none relative flex h-full flex-col items-center overflow-y-auto overflow-x-hidden",children:[o.jsx(hz,{onLogoCopy:D,onBrandmarkCopy:U,onDownload:B,onClose:z,isOpen:W,children:o.jsx(Ye,{href:"/",className:V("mt-xs active:ease-outExpo block duration-100 ease-out active:scale-[0.97]",{"opacity-50 duration-100":t,"!opacity-100":t&&Re}),onContextMenu:re,children:o.jsx(za,{variant:"mark",size:"small",includeEffects:!0})})}),o.jsxs("div",{onMouseEnter:t?ue:void 0,onMouseOver:t?Se:void 0,onMouseLeave:t?ke:void 0,className:V("pt-sm relative flex w-full flex-1 flex-col items-center",{"opacity-0 transition-opacity duration-100":t,"opacity-100":t&&Re}),children:[o.jsx(pe,{icon:ur,onClick:Ee,pill:!0,extraCSS:"my-lg hover:scale-105",toolTip:oe({defaultMessage:"New Thread",id:"76XSxT3hV8"}),tooltipLayout:Qe?"left":"right",testId:"sidebar-new-thread"}),o.jsx("div",{className:"pb-xl w-full",onMouseEnter:t?void 0:ue,onMouseOver:t?void 0:Se,onMouseLeave:t?void 0:ke,children:st.map(Ve=>o.jsx(eAe,{icon:Ve.icon,title:Ve.title,selected:me===Ve.id,hovered:r===Ve.id,href:Ve.href,onHover:()=>se(Ve.id),onLeave:ge,showBadge:Ve.showBadge,onClick:Le=>{Ve.requireLogin&&!C?(Le.preventDefault(),S({title:oe({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:De.SPACES_PAGE})):v(Ve.id)}},Ve.id))})]}),o.jsxs("div",{className:"pb-sm gap-md mt-auto flex w-full min-w-0 flex-col items-center justify-center [&>*]:w-full",children:[o.jsx(Zje,{ref:N}),o.jsx(xVt,{}),o.jsx(Dje,{showBottomLabels:Ge}),te&&o.jsx(Fje,{}),Ge&&o.jsx(tAe,{}),Ge&&ft&&o.jsx(gVt,{})]})]}),o.jsx(Xd,{message:$,variant:"success",isVisible:X,timeout:2})]})})});iAe.displayName="SidebarV2";const oAe=Yt("SidebarDesktopContext",void 0),WVt=({children:e,isOpen:t})=>{const[n,r]=f.useState(null),s=f.useCallback(a=>{r(a)},[]);return f.useEffect(()=>{t||r(null)},[t]),o.jsx(oAe.Provider,{value:{openDropdownId:n,setOpenDropdownId:s},children:e})},HVt=()=>{const e=f.useContext(oAe);if(!e)throw new Error("useSidebarDesktop must be used within a SidebarDesktopProvider");return e},lAe=R.memo(({collapsed:e})=>{const{$t:t}=Z(),{device:{isMacOS:n,isWindowsApp:r}}=Lt(),{handleShowPanel:s}=kp(),{shouldShowLossAversionModal:a,handleOpenLossAversion:i}=vx(),l=_t(),c=i9(h=>h.globalShortcuts[Tr.NEW_THREAD]),u=n?Yn.MACOS:Yn.WINDOWS,d=f.useMemo(()=>c[u],[u,c]),m=f.useMemo(()=>d.map(h=>Xnt(h)),[d]),p=f.useCallback(()=>{r?s():a?i({args:{callback:()=>{l.push("/",void 0,"New thread loss aversion")},origin:De.NEW_THREAD_BUTTON}}):l.push("/",void 0,"New thread button")},[r,a,s,i,l]);return o.jsx("div",{onClick:p,className:e?"-mb-sm py-lg":"pt-sm",children:e?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(pe,{tooltipLayout:"right",icon:ur,pill:!0,toolTip:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})})}):o.jsx("div",{className:"ml-xs",children:o.jsxs(H,{variant:"background",className:"mx-md py-sm pl-md pr-sm hover:ring-super group flex flex-none cursor-pointer select-none items-center justify-between rounded-full border ring-1 ring-transparent transition duration-200",children:[o.jsx(F,{variant:"smallBold",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})}),o.jsx(F,{variant:"tiny",color:"light",className:"flex items-center gap-0 whitespace-nowrap",children:m.map(h=>o.jsx(H,{className:V("flex items-center justify-center rounded border font-mono",{"text-xs":h!=="","px-xs h-4 min-w-4":m.length<=2,"px-xs h-3.5 min-w-3.5":m.length===3}),children:h},h))})]})})})});lAe.displayName="NewThreadButton";const zVt=({isEnterprise:e})=>{const t="enterprise-or-social",{$t:n}=Z(),{organization:r,isLoading:s}=kn({reason:t}),{device:{isWindowsApp:a}}=Lt(),i=Gu();return s&&!a?o.jsx(wn,{className:"p-sm divide-subtlest border-subtlest ring-subtlest h-14 border-t",children:o.jsx("div",{className:"bg-subtle h-8 w-full rounded-md"})}):o.jsxs("div",{className:e||!a?"h-14 items-stretch":"",children:[e&&o.jsx(H,{className:"p-sm h-full border-t",children:o.jsx(Ye,{href:e?`${i}/org`:"",children:o.jsxs(H,{className:"gap-sm p-sm flex cursor-pointer items-center rounded-full",bgHover:"subtle",children:[r?.logo?o.jsx(Pt,{size:"small",user:r?.logo,altText:"Logo"}):o.jsx(F,{children:o.jsx(le,{icon:io})}),o.jsx(F,{variant:"smallBold",className:"line-clamp-1 grow",children:r?.display_name})]})})}),!e&&!a&&o.jsx(H,{className:"p-sm border-t",children:o.jsx(pz,{text:n({defaultMessage:"Download",id:"5q3qC0sC3r"})})})]})},GVt=({children:e})=>{const[t,n]=f.useState(!1),{session:r}=Nt(),s=()=>{n(!1)};return o.jsx(lo,{childrenClassName:"inline-flex min-w-0",placement:"top-start",isOpen:t,onOpen:()=>{n(!0)},onClose:()=>{n(!1)},content:o.jsx(Ije,{session:r,onClick:s}),children:e})};function qVt({reason:e}){const{organization:t}=kn({reason:e}),n=t?.uuid??"",{value:r}=Dt({flag:"org-connectors-blocklist",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}});return r}const KVt=({reason:e})=>{const{organization:t}=kn({reason:e}),n=t?.settings?.disabled_connectors,r=n?.includes(Ot.GOOGLE_DRIVE)&&n?.includes(Ot.ONEDRIVE)&&n?.includes(Ot.SHAREPOINT);return f.useMemo(()=>({allFileConnectorsDisabled:r,disabledConnectors:n}),[r,n])},YVt=({imageProps:e,title:t,description:n,buttonText:r,buttonVariant:s,onClick:a,onDismiss:i,useBackgroundImage:l=!1,buttonSize:c="small"})=>{const{image:u,imageAlt:d,imageHeight:m,imageWidth:p,imageClassName:h,imageIsRoundedFull:g}=e;return o.jsx("div",{className:"m-1",children:o.jsxs(H,{variant:l?"subtle":"background",className:V("relative",l?"mx-md p-md animate-in fade-in rounded-[12px] border duration-300 ease-out":"mx-sm rounded-lg p-[10px]"),children:[l&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:Hqe,alt:YY,className:"absolute inset-0 rounded-[12px] object-cover dark:hidden"}),o.jsx("img",{src:zqe,alt:YY,className:"light:hidden absolute inset-0 rounded-[12px] object-cover"})]}),o.jsx("img",{src:u,alt:d,className:V("mb-md",g?"rounded-full":"rounded",h),height:m,width:p}),o.jsx(F,{variant:"smallBold",className:"mb-xs text-center",children:t}),o.jsx(F,{color:"light",variant:"small",className:"mb-md text-center leading-tight",children:n}),o.jsx("div",{className:"w-full",children:o.jsx(pe,{fullWidth:!0,text:r,variant:s,size:c,onClick:a})}),i&&o.jsx("div",{className:"right-xs top-xs absolute",children:o.jsx(Te,{icon:It,size:"small",onClick:i})})]})})},cAe=R.memo(()=>{const e=Z(),{trackEvent:t}=je(),n=_t(),{actions:r}=_n(),s=Gu(),a=f.useCallback(()=>{r.setIsSidebarConnectorsAdDismissed(!0),t("sidebar connectors upsell clicked",{}),n.push(`${s}/connectors`)},[r,t,n,s]),i=f.useCallback(()=>{t("sidebar connectors upsell dismissed",{}),r.setIsSidebarConnectorsAdDismissed(!0)},[r,t]),l=f.useMemo(()=>({image:Yqe,imageAlt:"Sidebar connectors showcase image",imageHeight:128,imageWidth:128,imageClassName:"mx-auto mt-md"}),[]);return o.jsx(YVt,{imageProps:l,title:e.formatMessage({defaultMessage:"Connect your files",id:"tQyDiwqfQw"}),description:"",buttonText:e.formatMessage({defaultMessage:"Get started",id:"/aBLH2Kytu"}),buttonVariant:"primary",buttonSize:"regular",onClick:a,onDismiss:i,useBackgroundImage:!0})});cAe.displayName="SidebarConnectorsAd";const QVt=()=>{const{$t:e}=Z(),{actions:t}=_n(),{isEnterpriseAdDismissed:n}=_n(),{handleSidebarAdClick:r}=_V();return n?null:o.jsxs(H,{className:"px-md pb-sm",children:[o.jsxs("div",{className:"gap-x-xs flex items-center justify-between",children:[o.jsx(F,{variant:"smallBold",className:"inline",children:o.jsx(Ye,{onClick:r,className:"hover:text-super duration-300",children:e({defaultMessage:"Invite your teammates",id:"P1ZqgVAx88"})})}),o.jsx("div",{className:"-mr-sm",children:o.jsx(Te,{ariaLabel:e({defaultMessage:"Close",id:"rbrahOGMC3"}),icon:It,size:"small",pill:!0,onClick:()=>t.setIsEnterpriseAdDismissed(!0)})})]}),o.jsx(F,{color:"light",variant:"small",className:"-mt-xs",children:e({defaultMessage:"Want to use Perplexity with your team or business?",id:"6vISFfmj6M"})}),o.jsx("div",{className:"mt-sm gap-x-sm flex",children:o.jsx(pe,{size:"small",onClick:r,fullWidth:!0,chevron:!0,chevronIcon:Zn,text:e({defaultMessage:"Learn More",id:"7DIW6+rckr"})})})]})},XVt=()=>{const e="subs-ad",[t,n]=f.useState(!1),{hasActiveSubscription:r}=Et(),{trackEvent:s}=je(),[a,i]=f.useState({bannerTitleText:"",bannerBodyText:"",bannerButtonText:"",buttonVariant:"tonal"}),{value:l}=qu({flag:"pro-upsell-banner-customization-flag",subjectType:"user_nextauth_id",defaultValue:{bannerTitleText:"",bannerBodyText:"",bannerButtonText:"",buttonVariant:"tonal"}});if(f.useEffect(()=>{(async()=>{const p=await i1e({originalContent:l,keysToTranslate:["bannerTitleText","bannerBodyText","bannerButtonText"],reason:e});i(p),n(!0)})()},[l]),f.useEffect(()=>{r||s("sidebar pro upsell viewed",{})},[r,s]),r)return null;const{bannerTitleText:c,bannerBodyText:u,bannerButtonText:d}=a;return!t||!c||!u||!d?null:o.jsxs(H,{className:"px-md pb-sm animate-in fade-in duration-200",children:[o.jsx("div",{children:o.jsx(F,{variant:"smallBold",className:"inline",children:o.jsx(Ye,{href:"/pro",className:"hover:text-super duration-300",children:c})})}),o.jsx(F,{color:"light",variant:"small",children:u}),o.jsx("div",{className:"mt-xs",children:o.jsx(Q1e,{text:d,origin:De.LEFT_HAND_NAV,variant:l.buttonVariant})})]})},ZVt=()=>{const e="sidebar-ads",{hasAccessToProFeatures:t}=Et(),{isEnterprise:n,orgUser:r,isLoading:s}=kn({reason:e}),a=r?.role==="MEMBER",i=lt(),{hasLoadedSettings:l}=Sa({reason:e}),{isSidebarConnectorsAdDismissed:c}=_n(),u=qVt({reason:e}),{allFileConnectorsDisabled:d}=KVt({reason:e});if(s||!l)return null;const m=i&&!a,p=!n&&!s&&t;return n&&t&&!s&&!c&&!u&&!d?o.jsx(cAe,{}):!m&&!p?null:o.jsxs(o.Fragment,{children:[m&&o.jsx(XVt,{}),p&&o.jsx(QVt,{})]})},JVt="pplx.first-purchase-tooltip",e$t=()=>{const e="collapsed-bottom-items",t=lt(),{organization:n,isEnterprise:r}=kn({reason:e}),{isIncognito:s,incognitoType:a}=Qa({reason:e}),i=Gu();return o.jsx(o.Fragment,{children:t&&o.jsxs(H,{className:"mb-md gap-sm pt-sm flex flex-col items-center justify-center border-t",children:[o.jsx(Lje,{trigger:()=>o.jsx(t$t,{isIncognito:s,incognitoType:a})}),r&&o.jsx(H,{className:"px-two pb-sm pt-md flex justify-center border-t",children:o.jsx(Ye,{href:`${i}/org`,children:n?.logo?o.jsx(Pt,{size:"medium",user:n?.logo,altText:"Logo"}):o.jsx(pe,{ariaLabel:"Organization settings",pill:!0,size:"small",variant:"inverted",icon:gP})})})]})})},t$t=({isIncognito:e,incognitoType:t})=>{const{session:n}=Nt(),{isMax:r,isPro:s,hasAccessToProFeatures:a}=Et();return o.jsx(H,{as:"button",bgHover:"subtle",className:"my-xs gap-x-sm relative flex items-center justify-between rounded-full",children:o.jsx("div",{className:"flex items-center gap-px",children:o.jsxs("div",{className:"p-xs relative flex",children:[e?o.jsx("div",{className:"w-[32px]",children:o.jsx(Ef,{inverse:!0,incognitoType:t})}):o.jsx(Pt,{size:"medium",user:n?.user?.image,showProBadge:s,showMaxBadge:r}),!a&&o.jsx(F,{color:"ultraLight",className:"bg-subtler -translate-y-two p-two absolute bottom-0 right-20 inline-flex translate-x-[4px] rounded-full",children:o.jsx(le,{icon:Bn,size:"xs"})})]})})})},n$t=()=>{const e="uncollapsed-bottom-items",{$t:t}=Z(),{isPro:n,isMax:r}=Et(),{isEnterprise:s}=kn({reason:e}),a=lt(),{session:i,status:l}=Nt(),{isIncognito:c,incognitoType:u}=Qa({reason:e}),d=_t(),{isMobileStyle:m}=Ce(),[p,,h]=rV(JVt,null);f.useEffect(()=>{p&&setTimeout(()=>{h()},5e3)},[h,p]);const g=$rt(),y=()=>{p&&h(),d.push(g)};return l==="loading"&&o.jsx("div",{className:"p-5",children:o.jsx(H,{variant:"background",className:"h-[20px] w-full rounded-full"})}),o.jsxs("div",{className:"gap-md flex flex-col",children:[o.jsx("div",{className:"hidden md:[@media(min-height:670px)]:block",children:o.jsx("div",{className:"opacity-0 transition-opacity duration-300 ease-in-out [@media(min-height:700px)]:opacity-100",children:o.jsx(ZVt,{})})}),o.jsxs("div",{children:[a&&o.jsx("div",{children:o.jsx(H,{className:"py-sm w-full border-t md:mb-0",children:o.jsxs(H,{className:"mx-sm gap-xs flex items-center justify-between",children:[o.jsx(GVt,{children:o.jsxs(H,{variant:"subtler",bgHover:"subtle",className:V("gap-sm pr-sm inline-flex w-full cursor-pointer select-none items-center justify-start rounded-full p-1 transition !duration-150",{"!bg-inverse":c}),children:[c?o.jsxs(o.Fragment,{children:[o.jsx(Ef,{incognitoType:u}),o.jsx(F,{variant:"smallBold",className:"!text-inverse truncate",children:t({defaultMessage:"Incognito",id:"Sp8UUpZ0at"})})]}):o.jsxs(o.Fragment,{children:[o.jsx(Pt,{size:"medium",showProBadge:n,showMaxBadge:r,user:i?.user?.image}),o.jsx(mz,{username:i?.user?.username})]}),o.jsx("span",{className:V("text-inverse relative top-px opacity-50",{"!text-quiet !opacity-100":!c}),children:o.jsx(le,{icon:Bn,size:"sm"})})]})}),o.jsx(r$t,{text:t({defaultMessage:"Track purchase status in settings",id:"dt0t5ILzKX"}),open:!!p,children:o.jsx(Te,{ariaLabel:t({defaultMessage:"Settings",id:"D3idYvSLF9"}),pill:!0,icon:ode,onClick:y,size:"small",extraCSS:"aspect-square min-h-[unset] shrink-0 h-[32px] -mr-xs"})})]})})}),!m&&o.jsx(zVt,{isEnterprise:!!s})]})]})},r$t=({children:e,text:t,open:n})=>o.jsx(En,{bodyClassName:"!bg-super !p-md",bodyTextClassName:"!text-base !text-white",tooltipText:t,arrowClassName:"!fill-super !w-4 translate-x-[1px] !h-auto",open:n,asChild:!0,children:e}),s$t=()=>{const e="sidebar-bottom",{$t:t}=Z(),{isIncognito:n}=Qa({reason:e}),{isCollapsed:r,actions:s}=_n(),{isMobileStyle:a}=Ce(),i=r&&!a,l=f.useCallback(c=>{(c.metaKey||c.ctrlKey)&&c.key===";"&&(c.preventDefault(),s.setIsIncognito(!n))},[s,n]);return f.useEffect(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}),[l]),o.jsxs("div",{className:V("flex flex-col",{"items-center justify-center":i}),children:[i&&o.jsx("div",{className:"pb-md flex items-center justify-center",children:o.jsx(pe,{pill:!0,ariaLabel:"Expand sidebar",icon:lDe,onClick:()=>s.setIsCollapsed(!1),toolTip:t({defaultMessage:"Expand",id:"0oLj/toqZk"}),tooltipLayout:"right"})}),i?o.jsx(e$t,{}):o.jsx(n$t,{})]})},a$t=()=>{const{$t:e}=Z(),{setBrandDropdownOpen:t,handleBrandCopy:n,handleDownload:r,handleLogoCopy:s,isBrandDropdownOpen:a,handlePopoverClose:i,toastCopy:l,toastVisible:c}=aAe(),{isCollapsed:u,actions:d}=_n(),{isMobileUserAgent:m}=Ce(),{setMobileSidebarOpen:p}=Yu(),{isMobileStyle:h}=Ce(),g=_=>{_.button===2&&(_.preventDefault(),t(!0))},y=()=>{p(!1),b.push("/")},x=()=>{p(!1)},v=u&&!h,b=_t();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`my-sm md:my-md flex items-center ${v?"justify-center":"justify-between"}`,children:[o.jsx(hz,{onBrandmarkCopy:n,onLogoCopy:s,onDownload:r,isOpen:a,onClose:i,children:o.jsx(Ye,{"aria-label":"Perplexity",href:"/",className:"block",onContextMenu:g,onClick:x,children:v?o.jsx(za,{includeEffects:!0,size:"md",variant:"mark"}):o.jsx("div",{className:"ml-xs pl-md pr-sm pt-xs",children:o.jsx(za,{includeEffects:!0,color:"mixed",isPro:!0,size:"small"})})})}),!v&&!m&&o.jsx("div",{className:"mr-xs pt-two",children:o.jsx(Te,{ariaLabel:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),icon:cDe,size:"small",pill:!0,onClick:()=>{p(!1),d.setIsCollapsed(!0)},toolTip:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),tooltipLayout:"bottom"})}),m&&o.jsx("div",{className:"mr-xs pt-two",children:o.jsx(Te,{icon:ur,pill:!0,onClick:y})})]}),o.jsx(Xd,{message:l,variant:"success",isVisible:c,timeout:2})]})},i$t=(e,t)=>e&&!t?"w-collapsedSideBarWidth":"w-sideBarWidth",uAe=f.memo(()=>{const e="sidebar",{$t:t}=Z(),n=lt(),{trackEvent:r}=je(),{isCollapsed:s}=_n(),{isIncognito:a}=Qa({reason:e}),{openVisitorLoginUpsell:i}=gr({enabled:!n}),{setMobileSidebarOpen:l}=Yu(),{isMobileStyle:c}=Ce(),u=i$t(s,c),d=s&&!c;return o.jsx("div",{"data-testid":E0e.SIDEBAR,className:V("group/bar isolate h-full shrink-0 transition-all duration-300 ease-in-out md:hidden md:h-auto",u),children:o.jsx(H,{className:V("h-full transition-all duration-300 ease-in-out",u),children:o.jsxs("div",{className:V("flex h-full min-h-0 flex-1 flex-col"),children:[o.jsx(a$t,{}),!c&&o.jsx(lAe,{collapsed:s}),o.jsx("div",{className:"pt-md scrollbar min-h-0 flex-1 overflow-y-auto overflow-x-hidden",children:o.jsx(jje,{collapsed:d,incognito:a,animationId:"sidebar-tabs"})}),!n&&!d&&o.jsx("div",{className:"m-md md:mb-lg",children:o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(pe,{variant:"primary",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Sign Up",id:"39AHJmowNE"}),onClick:()=>{l(!1),r("signup click",{}),i({origin:De.SIGNUP_BUTTON})}}),o.jsx(pe,{variant:"common",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Log in",id:"odXlk858Gb"}),onClick:()=>{l(!1),r("login click",{}),i({origin:De.LOGIN_BUTTON})}})]})}),n||d?o.jsx(s$t,{}):null]})})})});uAe.displayName="SidebarMobile";const o$t=({appContentWrapperRef:e,minimalMode:t})=>{const{isMobileStyle:n}=Ce({evaluateOnInit:!0});return n?o.jsx(uAe,{}):o.jsx(CVt,{children:o.jsx(iAe,{minimalMode:t,appContentWrapperRef:e})})};function l$t({children:e}){const t=f.useRef(null),n=Ft(),r=f.useMemo(()=>n?.startsWith("/b/"),[n]),s=f.useMemo(()=>n?.startsWith("/b/zen")||n?.startsWith("/b/try-assistant"),[n]);return o.jsx(Mmt,{children:o.jsx(LGe,{children:o.jsx(Gke,{children:o.jsxs(jc,{children:[!s&&o.jsx(kmt,{children:o.jsx(o$t,{minimalMode:r,appContentWrapperRef:t})}),o.jsxs(Tmt,{hasSidebar:!s,ref:t,children:[e,o.jsx(Hke,{})]})]})})})})}const c$t=["header","ask-input","mini-graphs","watchlist","market-summary","financial-profile"],Npn=["ask-input","mini-graphs","watchlist","financial-profile"],u$t=["header","schedule","standings"],d$t=["header","bracket"],Uoe=["ask-input"],f$t=["thread-title"],m$t=["ask-input","article-list"],Boe=["topic-list"],gz=R.memo(function(){const t="stripe-wrapper",n=Ut(),r=n?.get("stripe_checkout"),s=n?.get("referral_status");return f.useLayoutEffect(()=>{(r||s)&&xB({reason:t})},[r,s]),null});gz.displayName="StripeStatusRefresher";const dAe=R.memo(e=>{const t=e.metadata?.title||"Perplexity";return f.useEffect(()=>{const n=document.head?document.head.getElementsByTagName("title"):document.getElementsByTagName("title");for(const r of n)r.textContent=t},[t]),null});dAe.displayName="DocumentTitle";function fAe({href:e=Emt()}){const{isMobileStyle:t}=Ce();return t?o.jsx(Te,{icon:xD,href:e,extraCSS:"mt-sm -ml-sm",pill:!0}):o.jsxs(Ye,{href:e,className:"gap-xs hover:bg-subtle px-sm py-xs pl-xs -ml-xs -mt-xs group flex items-center rounded-md duration-150",children:[o.jsx(le,{icon:hp,size:"sm",className:"text-quiet group-hover:text-foreground duration-150"}),o.jsx(F,{variant:"small",color:"light",className:"group-hover:!text-foreground duration-150",children:o.jsx(he,{defaultMessage:"Back",id:"cyR7KhiuaU"})})]})}const p$t=()=>{const{isMobileStyle:e}=Ce(),t=Ft();return e&&t!==Rn?o.jsx(fAe,{href:Rn}):null},yR="selectedApiGroupId",KS=["selected-api-group"],yk=()=>["api-groups"],h$t=async({reason:e})=>await p1e({reason:e}),g$t=async({name:e,address:t,description:n,contactInfo:r,reason:s})=>m1e({displayName:e,address:t,description:n,contactInfo:r,reason:s}),mAe=({reason:e})=>{const t=xt(),{data:n,isLoading:r,isFetching:s,isFetched:a,error:i,refetch:l}=We({queryKey:yk(),queryFn:()=>h$t({reason:e})}),{mutateAsync:c,isPending:u,error:d}=St({mutationFn:g$t,onSuccess:()=>{t.invalidateQueries({queryKey:yk()})}});return f.useMemo(()=>({groups:n??fe,isLoading:r,isFetching:s,isFetched:a,error:i,refetch:l,createGroup:c,isCreating:u,createError:d}),[d,c,i,n,u,a,s,r,l])},pAe=({reason:e})=>{const t=xt(),{data:n,isFetched:r,isLoading:s,isFetching:a,error:i,refetch:l}=We({queryKey:yk(),queryFn:async()=>{const{getAPIGroupsV2:h}=await Q(async()=>{const{getAPIGroupsV2:g}=await Promise.resolve().then(()=>pee);return{getAPIGroupsV2:g}},void 0);return h({reason:e})}}),{mutateAsync:c,isPending:u,error:d}=St({mutationFn:async({name:h,address:g,description:y,contactInfo:x,reason:v})=>{const{createApiGroupV2:b}=await Q(async()=>{const{createApiGroupV2:_}=await Promise.resolve().then(()=>pee);return{createApiGroupV2:_}},void 0);return b({displayName:h,address:g,description:y,contactInfo:x,reason:v})},onSuccess:()=>{t.invalidateQueries({queryKey:yk()})}}),{data:m}=We({queryKey:KS,queryFn:async()=>null,enabled:!0,staleTime:1/0,gcTime:1/0});f.useEffect(()=>{const h=n??[];if(!(!r||h.length===0)&&m==null){const g=Oe.getItem(yR),y=h.find(x=>x.api_org_id===g);if(y)t.setQueryData(KS,y);else if(ya(h)){const x=h[0];Oe.setItem(yR,x?.api_org_id),t.setQueryData(KS,x)}}},[n,r,t,m]);const p=f.useCallback(h=>{h&&(Oe.setItem(yR,h.api_org_id),t.setQueryData(KS,h),t.invalidateQueries({predicate:g=>g.queryKey.includes(h.api_org_id)}))},[t]);return f.useMemo(()=>({group:m??null,isFetched:r,isLoading:s,isFetching:a,error:i,refetch:l,createGroup:c,isCreating:u,createError:d,setSelectedGroup:p}),[d,c,i,r,a,s,u,l,m,p])},y$t=async({orgId:e,reason:t})=>await h1e({orgId:e,reason:t}),x$t=e=>["selected-api-groups","customer-info",e??"no-group-id"],v$t=({reason:e})=>{const t=xt(),{group:n}=pAe({reason:e}),r=x$t(n?.api_org_id),s=We({queryKey:r,queryFn:()=>y$t({orgId:n?.api_org_id,reason:e})}),a=f.useCallback(i=>{const l=()=>{t.invalidateQueries({queryKey:r})};i&&i>0?setTimeout(l,i):l()},[t,r]);return f.useMemo(()=>({...s,apiOrganization:s?.data?.apiOrganization,customerInfo:s?.data?.customerInfo,hasDefaultPaymentMethod:s?.data?.hasDefaultPaymentMethod??!1,taxInfo:s?.data?.taxInfo,invalidateCustomerInfo:a,isMember:s?.data?.apiOrganization?.user_role==="MEMBER",isAdmin:s?.data?.apiOrganization?.user_role==="ADMIN"}),[a,s])},ir=(e,t)=>t===e,b$t=(e,t)=>{const{value:n,loading:r}=Dt({flag:"account-settings-api-playground",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function _$t(){const{value:e}=r5({flag:"sonar-file-search-gate",defaultValue:"disabled",subjectType:"visitor_id"});return e==="enabled"}const hAe=()=>{const e="api-settings",{groups:t}=mAe({reason:e}),{customerInfo:n,isAdmin:r,isLoading:s}=v$t({reason:e}),a=n?.customer_portal_url||"",{group:i,setSelectedGroup:l,isLoading:c}=pAe({reason:e}),u=Z(),d=Ft(),m=_t(),[p,h]=f.useState(!1),{isMobileStyle:g}=Ce(),y=_$t(),{variation:x}=b$t(!1),v=f.useMemo(()=>({title:u.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),tabs:{isMobileStyle:!1,actionList:[{text:u.formatMessage({defaultMessage:"API group",id:"vzhpEeLnGg"}),...ra.APIGroup,active:ir(ra.APIGroup.href,d)},{text:u.formatMessage({defaultMessage:"API members",id:"9T3yfgfdEe"}),...ra.APIMembers,active:ir(ra.APIMembers.href,d)},{text:u.formatMessage({defaultMessage:"API billing",id:"kq1Eo7ekVC"}),...ra.APIBilling,active:ir(ra.APIBilling.href,d),show:r},{text:u.formatMessage({defaultMessage:"Usage metrics",id:"rmhlHSzjT6"}),...ra.UsageMetrics,trailingComponent:ra.UsageMetrics.trailingComponent,show:!!a&&r,onClick:()=>{window.open(a,"_blank","noopener,noreferrer")}},{text:u.formatMessage({defaultMessage:"Account limits",id:"4Krk/t2RZ4"}),...ra.AccountLimits,active:ir(ra.AccountLimits.href,d),show:!1},{text:u.formatMessage({defaultMessage:"API keys",id:"yOFPA6eD9X"}),...ra.APIKeys,active:ir(ra.APIKeys.href,d)},{text:u.formatMessage({defaultMessage:"API files",id:"B/bk1JrYzU"}),...ra.APIFiles,active:!!d?.startsWith(ra.APIFiles.href),show:y},{text:u.formatMessage({defaultMessage:"API playground",id:"GWFtC6WH+w"}),...ra.APIPlayground,active:ir(ra.APIPlayground.href,d),show:x}]}}),[u,d,r,a,y,x]),b=t.map(M=>({type:"default",text:M.display_name||M.api_org_id,onClick:()=>{m.push("/account/api/group"),l(M),h(!1)},selected:i?.api_org_id===M.api_org_id,active:i?.api_org_id===M.api_org_id})),_={type:"default",text:"New API Group",leftElement:o.jsx(ur,{size:16}),onClick:()=>{m.push("/account/api/group?create=true"),h(!1)}},w={type:"separator",show:t.length>0},C=[...b,w,_],S=()=>{h(!p)},E=!c&&(!!i||t.length===0);return t&&t.length>0?o.jsxs("div",{className:"flex flex-col",children:[o.jsxs(H,{className:"flex items-center justify-between gap-3 px-3 py-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:g?"small":"tinyRegular",color:"light",children:v.title}),o.jsx("div",{className:"size-2.5",children:s&&o.jsx(Zr,{size:10})})]}),E&&o.jsx(sn,{items:C,isMobileStyle:!1,isOpen:p,onOpen:S,onClose:()=>h(!1),wrapperClassName:"min-w-0",children:o.jsx(pe,{size:"tiny",text:i?.display_name||i?.api_org_id||"Select API Group",variant:"border",chevron:!0,extraCSS:"max-w-full min-w-0"})})]}),!s&&o.jsx(MN,{fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${v.title}`,collapsed:!1,size:g?"regular":"small",isNewRedesign:!0,...v.tabs})]}):null},yz=()=>{const{session:e}=Nt();return $r({flag:"api-groups-and-settings-enabled",defaultValue:!0,extraAttributes:{organizationUUID:e?.user?.org_uuid??"none"}})},gAe=({reason:e})=>{const{groups:t}=mAe({reason:e}),n=Z(),r=Ft(),{value:s}=yz();return f.useMemo(()=>({text:n.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),...nn.API,show:s&&t.length<1,href:`${Rn}/api/group?create=true`,active:ir(nn.API.href,r)}),[n,r,t.length,s])},qw=({title:e,tabs:t,shouldRenderInMobile:n})=>{const{isMobileStyle:r}=Ce();return o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{className:"px-3 py-2",variant:r?"small":"tinyRegular",color:"light",children:e}),o.jsx(MN,{isMobileStyle:n,fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${e}`,collapsed:!1,size:r?"regular":"small",isNewRedesign:!0,...t})]},e)},w$t=()=>{const e="consumer-workspace-settings",t=Z(),n=gAe({reason:e}),{handleSettingsHeaderAdClick:r}=_V(),s=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Workspace",id:"rOZptgrtp0"}),tabs:{isMobileStyle:!1,actionList:[n,{text:t.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),...nn.Enterprise,onClick:r,href:void 0,active:!1}]}}),[t,n,r]);return s?.tabs?.actionList?.some(i=>i.show)??!1?o.jsx(qw,{title:s.title,tabs:s.tabs,shouldRenderInMobile:!1}):null},C$t=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const s=Z(),a=Ft(),i=Ca(),l=f.useMemo(()=>({title:s.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),tabs:{isMobileStyle:!1,actionList:[{text:s.formatMessage({defaultMessage:"Organization",id:"K56Dims7Up"}),active:ir(ni.Organization.href,a),...ni.Organization},{text:s.formatMessage({defaultMessage:"Members",id:"+a+2ugZ5sB"}),active:ir(ni.Members.href,a),...ni.Members,show:t},{text:s.formatMessage({defaultMessage:"User access",id:"a0UwG9o6Tr"}),active:ir(ni["User access"].href,a),...ni["User access"],show:e},{text:s.formatMessage({defaultMessage:"Permissions",id:"SFuk1vRI4X"}),active:ir(ni.Permissions.href,a),...ni.Permissions,show:e},{text:s.formatMessage({defaultMessage:"Insights",id:"xK7rmdSjmz"}),active:ir(ni.Insights.href,a),...ni.Insights,show:r},{text:s.formatMessage({defaultMessage:"Org Connectors",id:"FVJIMTlwBP"}),active:ir(ni["Org Connectors"].href,a),...ni["Org Connectors"],show:e},{text:s.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),active:ir(ni["Org Imports"].href,a),...ni["Org Imports"],show:n&&!i}]}}),[s,a,e,t,n,i,r]);return o.jsx(qw,{title:l.title,tabs:l.tabs,shouldRenderInMobile:!1})},S$t=()=>{const e="enterprise-workspace-settings",t=Z(),n=gAe({reason:e}),r=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Developers",id:"aMWgjX56nj"}),tabs:{isMobileStyle:!1,actionList:[n]}}),[t,n]);return r?.tabs?.actionList?.some(a=>a.show)??!1?o.jsx(qw,{title:r.title,tabs:r.tabs,shouldRenderInMobile:!1}):null};function E$t({reason:e}){const{value:t}=S3e(),{locale:n}=Z(),r=new Intl.Locale(n),{uuid:s}=Att({reason:e}),{value:a,loading:i}=$r({flag:"can-book-hotels",defaultValue:!1,extraAttributes:{cfLanguage:r.language,appApiVersion:Sl,dependent_flag:"canonical-hotel-pages-enabled",variation_served:t,orgUUID:s??""}});return f.useMemo(()=>({initialized:!i,value:a}),[i,a])}const M$t=()=>{const{session:e}=Nt(),{value:t,loading:n}=$r({flag:"shopping-enabled",defaultValue:!1,extraAttributes:{orgUUID:e?.user?.org_uuid??""}});return f.useMemo(()=>!n&&t,[n,t])},yAe=()=>{const e="purchase-settings",t=Z(),n=Ft(),{value:r,initialized:s}=E$t({reason:e}),a=r&&s,i=M$t(),l=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Transactions",id:"/jJLYymnae"}),tabs:{isMobileStyle:!1,actionList:[{text:t.formatMessage({defaultMessage:"Purchases",id:"abfoNg9A1k"}),active:ir(nn.Products.href,n),...nn.Products,show:i},{text:t.formatMessage({defaultMessage:"Reservations",id:"PnzGcgLznk"}),...nn.Reservations,active:ir(nn.Reservations.href,n),show:a}]}}),[t,n,i,a]);return f.useMemo(()=>l.tabs.actionList.some(u=>u.show),[l.tabs.actionList])?o.jsx(qw,{title:l.title,tabs:l.tabs,shouldRenderInMobile:!1}):null},k$t=(e,t)=>{const{value:n,loading:r}=Dt({flag:"site-specific-prompt-teachers",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},xAe=()=>{const e="base-user-settings",{$t:t}=Z(),n=Ft(),{isEnterprise:r,organization:s}=kn({reason:e}),a=Ca(),{value:i}=Dt({flag:"pro-perks-settings-flag",defaultValue:!1,subjectType:"user_nextauth_id",extraAttributes:{isEnterprise:r??!1,orgUUID:s?.uuid??""}}),{variation:l,loading:c}=Bp(!1),{variation:u}=k$t(!1),d=fw(),m=f.useMemo(()=>({title:t({defaultMessage:"Account",id:"TwyMauNL3r"}),tabs:{isMobileStyle:!1,actionList:[{text:t({defaultMessage:"Account",id:"TwyMauNL3r"}),active:ir(nn.Account.href,n),...nn.Account},{text:t({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),...nn.Preferences,active:ir(nn.Preferences.href,n)},{text:t({defaultMessage:"Personalization",id:"FAejG+JVWn"}),...nn.Personalize,active:ir(nn.Personalize.href,n)},{text:t({defaultMessage:"Assistant",id:"wSAvhubuX6"}),...nn.Assistant,active:ir(nn.Assistant.href,n)},{text:t({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),...nn.Shortcuts,active:ir(nn.Shortcuts.href,n),show:d},{text:t({defaultMessage:"Site-Specific Instructions",id:"yhS5llp8gM"}),...nn.SiteInstructions,active:ir(nn.SiteInstructions.href,n),show:u},{text:t(l?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),...nn.Tasks,href:nn.Tasks.href,active:ir(nn.Tasks.href,n)},{text:t({defaultMessage:"Notifications",id:"NAidKbB0vi"}),...nn.Notifications,active:ir(nn.Notifications.href,n)},{text:t({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),...nn.Connectors,active:ir(nn.Connectors.href,n)},{text:t({defaultMessage:"Files",id:"m4vqJl0/FT"}),...nn.Imports,active:ir(nn.Imports.href,n),show:r&&!a},...i?[{text:t({defaultMessage:"Pro Perks",id:"x69637XBwS"}),active:ir(nn.ProPerks.href,n),...nn.ProPerks}]:[]]}}),[t,n,d,u,l,r,a,i]);return c?null:o.jsx(qw,{title:m.title,tabs:m.tabs,shouldRenderInMobile:!1})},T$t=()=>{const{value:e}=yz();return o.jsxs(o.Fragment,{children:[o.jsx(xAe,{}),o.jsx(yAe,{}),o.jsx(w$t,{}),e&&o.jsx(hAe,{})]})},N$t=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const{value:s}=yz();return o.jsxs(o.Fragment,{children:[o.jsx(xAe,{}),o.jsx(yAe,{}),o.jsx(S$t,{}),s&&o.jsx(hAe,{}),o.jsx(C$t,{isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})]})},vAe=R.memo(function({shouldRenderInMobile:t=!1,isMobileStyle:n=!1}){const{isEnterprisePro:r,isEnterpriseMax:s}=Et(),a=kn({reason:"settings-sidebar"}),i=a.isEnterprise??!1,l=a.orgUser?.role==="ADMIN",c=l||(a?.organization?.settings?.member_invites_allowed??!1),u=l||(a?.organization?.settings?.members_can_modify_org_files??!1),{value:d}=Dt({flag:"enterprise-insights",subjectType:"user_nextauth_id",defaultValue:!1}),{value:m}=Dt({flag:"enterprise-premium-secure",subjectType:"user_nextauth_id",defaultValue:!1}),{value:p}=Dt({flag:"enterprise-insights-special-access",subjectType:"user_nextauth_id",defaultValue:!1}),h=(r||s)&&l&&(d&&m||p),g=V("flex flex-col gap-2 -mx-sm md:mx-0",{"border-r py-4 w-sideBarWidth":!t});return n&&!t?null:o.jsxs(H,{className:g,children:[o.jsx("div",{className:"mb-3 ml-2 flex md:px-2",children:o.jsx(fAe,{})}),o.jsx("div",{className:"scrollbar-subtle overflow-y-auto md:px-2",children:i?o.jsx(N$t,{isEnterpriseAdmin:l,showMembersTab:c,showOrgFilesTab:u,showInsightsTab:h}):o.jsx(T$t,{})})]})});vAe.displayName="SettingsSidebar";const xR={apiPlaygroundTitle:ee({id:"qqVf+xnImI",defaultMessage:"Sign in to manage to see the API playground"}),proPerksTitle:ee({id:"UfIxhPDVtn",defaultMessage:"Sign in to Perplexity to see available Perks"}),defaultAccountTitle:ee({id:"ZEOKCVFSgA",defaultMessage:"Sign in to manage your account"})},j$t=(e,t)=>t(e==="/account/api/playground/search"?xR.apiPlaygroundTitle:e==="/account/pro-perks"?xR.proPerksTitle:xR.defaultAccountTitle),A$t=()=>{const e=_t(),t=Ft(),{$t:n}=Z(),{openVisitorLoginUpsell:r}=gr({enabled:!0});return f.useEffect(()=>{const s=j$t(t,n);r({title:s,origin:De.SETTINGS,closeCallback:()=>{e.push("/")}})},[r,e,t,n]),null};function I$t(){return o.jsx("div",{children:o.jsx(H,{className:"mx-auto size-full max-w-screen-md",variant:"background",children:o.jsxs(wn,{className:"mt-lg gap-lg flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs(F,{variant:"baseSemi",className:"ml-sm relative",children:["",o.jsx(YS,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),o.jsx(YS,{className:"h-[170px] rounded-md"})]}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs(F,{variant:"baseSemi",className:"ml-sm relative",children:["",o.jsx(YS,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),o.jsx(YS,{className:"h-[170px] rounded-md"})]})]})})})}const YS=({className:e})=>o.jsx("div",{className:V("bg-subtler rounded-full",e)}),bAe=R.memo(({children:e,childrenWidth:t})=>{const{session:n,status:r}=Nt(),{isMobileStyle:s}=Ce();return r==="loading"?o.jsx(I$t,{}):n?.user?o.jsxs(o.Fragment,{children:[o.jsx(gz,{}),o.jsxs("div",{className:"grid h-screen grid-cols-1 grid-rows-[min-content_1fr] gap-2 p-2",children:[o.jsx("div",{className:"flex w-full flex-col",children:o.jsx(I1e,{})}),o.jsxs(H,{variant:"background",className:"flex min-h-0 rounded-md border",children:[o.jsx(vAe,{shouldRenderInMobile:!1,isMobileStyle:s}),o.jsxs(W_,{childrenWidth:t,children:[o.jsx(p$t,{}),o.jsx("div",{className:"md:p-md md:pt-xl",children:e})]})]})]})]}):o.jsx(A$t,{})});bAe.displayName="SettingsDevLayout";const xz=R.memo(()=>o.jsxs(o.Fragment,{children:[o.jsx("script",{id:"reddit-pixel-script",src:"/pixel/reddit.js",async:!0}),o.jsx("script",{id:"facebook-pixel-script",src:"/pixel/meta.js",async:!0}),o.jsx("script",{id:"podscribe-pixel-script",src:"/pixel/podscribe.js",async:!0}),o.jsx("script",{id:"amazon-twitch-pixel-script",src:"/pixel/amazon.js",async:!0})]}));xz.displayName="AfterInteractivePixels";const vz=ex("HomepageComponentsContext",e=>Po(t=>({homepageTitle:e?.homepageTitle||"",actions:{onHomepageTitleChange:n=>{t({homepageTitle:n})}}}))),R$t=vz.Provider,P$t=vz.useSelector,O$t=vz.useTrackedState,L$t=()=>P$t(e=>e.actions),D$t=O$t,F$t={hidden:{},visible:{transition:{staggerChildren:.025}}},U$t={hidden:{opacity:0},visible:{opacity:1,transition:{type:"tween",duration:.3}},exit:{opacity:0,transition:{duration:.05}}},_Ae=R.memo(()=>{const{homepageTitle:e}=D$t(),t=f.useRef(!0),[n,r]=f.useState(!0),{hasAccessToProFeatures:s,isPro:a,isMax:i,isEnterprise:l}=Et(),c=Ds(),{isMobileStyle:u}=Ce(),d=f.useMemo(()=>{const m=e.split(" ");return m.map((p,h)=>h===m.length-1?p:`${p} `)},[e]);return f.useEffect(()=>{if(c){if(t.current){t.current=!1;return}r(!1)}},[e,c]),o.jsx("div",{className:"mb-lg bottom-0 flex w-full items-center justify-center pb-3 text-center md:absolute",children:o.jsx(Je,{mode:"wait",children:n&&!u?o.jsx(ve.div,{initial:{opacity:1},exit:{opacity:0,transition:{duration:.2}},children:o.jsx(za,{variant:"text",isPro:a,isMax:i,isEnterprise:l,size:s?"xl":"large"})}):o.jsx(ve.span,{variants:F$t,initial:n?!1:"hidden",animate:"visible",exit:"hidden","aria-hidden":"true",className:"inline-block",children:o.jsx(F,{children:o.jsx("span",{className:"font-display inline-block text-3xl md:text-4xl","aria-label":e,children:d.map((m,p)=>o.jsx(ve.span,{variants:U$t,className:"inline-block",style:{whiteSpace:"pre"},children:m},`${m}-${p}`))})})},e)})})});_Ae.displayName="HomepageTitle";const Ch=["SMALL","MEDIUM","LARGE"],wAe=R.memo(({widget:e,size:t})=>{const n=Ch.includes(t)?"linear-gradient(to bottom, black, transparent)":"linear-gradient(to right, transparent, black 50%)",r="absolute inset-0 size-full object-cover object-center",s=f.useMemo(()=>o.jsxs("div",{className:"relative h-full",children:[o.jsx("img",{src:e.image_url_light,className:V(r,"block dark:hidden"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}}),o.jsx("img",{src:e.image_url_dark,className:V(r,"hidden dark:block"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}})]}),[r,e.image_url_dark,e.image_url_light,e.title,n]),a=f.useMemo(()=>o.jsx("div",{className:"p-sm flex h-full flex-col justify-center",children:o.jsxs("div",{className:"gap-2xs p-xs flex flex-col items-start",children:[o.jsx(F,{className:"line-clamp-2 text-ellipsis leading-tight",variant:Ch.includes(t)?"tinyRegular":"small",color:Ch.includes(t)?"white":void 0,children:e.title}),o.jsx(F,{className:V("line-clamp-2 text-ellipsis leading-tight",{"text-white/70":Ch.includes(t)}),variant:"tiny",color:"light",children:o.jsx("span",{className:"font-normal",children:e.text})})]})}),[t,e.title,e.text]);return o.jsx("div",{className:V("relative size-full",{"bg-inverse dark:bg-subtler":Ch.includes(t)}),children:Ch.includes(t)?o.jsxs(o.Fragment,{children:[s,o.jsx("div",{className:"absolute inset-x-0 bottom-0",children:a})]}):o.jsxs("div",{className:"grid h-full grid-cols-3 grid-rows-1",children:[o.jsx("div",{className:"col-span-2",children:o.jsx("div",{className:"flex h-full flex-row items-center",children:a})}),o.jsx("div",{className:"col-span-1",children:s})]})})});wAe.displayName="AnnouncementHomepageWidget";const CAe=R.memo(({widget:e,size:t})=>{const{colorScheme:n}=Jr(),r=t=="LARGE"?"grid grid-rows-3":"flex flex-row items-center",s=t=="LARGE"?"row-span-1":"",a=t=="LARGE"?"row-span-3":"",i=f.useMemo(()=>o.jsx("div",{className:V("relative",a),children:o.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,className:"size-full object-cover",alt:e.title,style:{maskImage:"linear-gradient(to bottom, black 75%, transparent)"}})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),l=f.useMemo(()=>o.jsx("div",{className:V(a,"pl-[12px]"),children:o.jsx("div",{className:"relative size-[40px] overflow-hidden rounded-md",children:o.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,alt:e.title,className:"size-full object-cover"})})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),c=f.useMemo(()=>o.jsx("div",{className:V("p-sm flex h-full flex-col justify-center",s,t!=="LARGE"&&"pt-sm"),children:o.jsx(F,{className:"px-xs line-clamp-2 text-ellipsis leading-tight",variant:"tinyRegular",children:e.title})}),[t,s,e.title]);return o.jsx("div",{className:V("size-full",r),children:t=="LARGE"?o.jsxs(o.Fragment,{children:[i,c]}):o.jsxs(o.Fragment,{children:[l,c]})})});CAe.displayName="DiscoverHomepageWidget";const NN=({onRequest:e,onSuccess:t,onError:n,origin:r})=>{const{$t:s}=Z(),{trackEvent:a}=je();return f.useCallback(()=>{e?.(),navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{t(i),a("precise location granted",{origin:r})},i=>{let l;switch(i.code){case i.PERMISSION_DENIED:n(s({defaultMessage:"Looks like permission was denied. Please allow location access in your browser site settings.",id:"9P7nG1a2Cl"})),l="permission_denied";break;case i.POSITION_UNAVAILABLE:n(s({defaultMessage:"Unable to determine your location. Please try again.",id:"VLgkyqQ5LO"})),l="position_unavailable";break;case i.TIMEOUT:n(s({defaultMessage:"Request timed out. Please try again.",id:"VIQi5rKvh3"})),l="timeout";break;default:n(s({defaultMessage:"An error occurred while getting your location. Please try again.",id:"oOu0W+N9Re"})),l="unsupported"}a("precise location modal denied",{origin:r,reason:l})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(n(s({defaultMessage:"Location services are not supported by your browser.",id:"1eN9TO+Fjt"})),a("precise location modal denied",{origin:r,reason:"unsupported"}))},[s,n,t,e,r,a])},SAe=R.memo(({isOpen:e,onClose:t,onPermissionGranted:n,origin:r})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),[l,c]=f.useState(null),u=NN({onSuccess:g=>{n(g),i(!1),c(null),t()},onError:g=>{i(!1),c(g)},origin:r}),d=f.useCallback(()=>{i(!0),c(null),u()},[u]),{colorScheme:m}=Jr(),{isMobileStyle:p}=Ce(),h=f.useMemo(()=>[{text:s({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,disabled:a},{text:s({defaultMessage:"Allow",id:"y/bmsG8rnv"}),onClick:d,isLoading:a,variant:"primary",disabled:a}],[s,d,a,t]);return o.jsx(on,{isOpen:e,onClose:t,variant:p?"bottom-sheet":"small",actionList:h,children:o.jsxs(H,{className:"flex flex-col",children:[o.jsx("div",{className:"-mt-md mb-md bg-subtler flex h-24 w-full items-center justify-center overflow-hidden rounded-md bg-cover bg-center",style:{backgroundImage:m==="dark"?"url('/static/images/location-share-dialog-map-dark.jpg')":"url('/static/images/location-share-dialog-map.jpg')"},children:o.jsxs(H,{className:"size-xl relative flex items-center justify-center rounded-full border",children:[o.jsx(H,{className:"absolute left-1/2 top-1/2 size-full -translate-x-1/2 -translate-y-1/2 rounded-full",variant:"super"}),o.jsx(H,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[140%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-20"}),o.jsx(H,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[180%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-10"}),o.jsx(H,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[220%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-5"}),o.jsx(le,{icon:lde,size:"lg",className:"text-inverse relative"})]})}),o.jsx(F,{variant:"section-title",className:"text-center",children:s({defaultMessage:"Enable Precise Location",id:"/JAfaukfkx"})}),o.jsx(F,{variant:"small",color:"light",className:"text-center",children:s({defaultMessage:"To provide you with accurate local weather information, Perplexity needs access to your device location.",id:"0A/wGwJkVw"})}),l&&o.jsx(H,{className:"mt-md",children:o.jsx(F,{variant:"smallBold",color:"red",className:"text-center",children:l})})]})})});SAe.displayName="LocationPermissionModal";const B$t=Object.freeze(Object.defineProperty({__proto__:null,LocationPermissionModal:SAe,useRequestLocation:NN},Symbol.toStringTag,{value:"Module"})),EAe=R.memo(({setShowCTA:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=Mn(),r=xt(),s=f.useCallback(()=>{r.invalidateQueries({queryKey:[yV]}),e(!1)},[r,e]),i=NN({onSuccess:s,onError:c=>{n(c,"error",5)},origin:"homepage_weather"}),l=f.useCallback(()=>{i()},[i]);return o.jsxs(ve.div,{whileTap:{scale:.98,transition:{ease:an,duration:.15}},className:"bg-subtle flex w-full cursor-pointer flex-row items-center justify-center rounded-full p-3",onClick:l,children:[o.jsx(le,{icon:lde,size:"sm",className:"text-foreground relative"}),o.jsx(F,{variant:"smallBold",color:"default",className:"ml-2",children:t({defaultMessage:"Use precise location",id:"Si49wMl5CP"})})]})});EAe.displayName="EnableLocationCTA";const MAe=R.memo(({widget:e,size:t})=>{const n="leading-none",r=e.profiles[0]?.image,s=e.profiles[0]?.displayName??e.profiles[0]?.symbol,a=e.profiles[0]?.companyName,i=e.quotes[0]?.price,l=e.profiles[0]?.currency,c=e.quotes[0]?.changesPercentage,u=(c??0)>0,{locale:d}=Z(),m=f.useMemo(()=>V({"!text-[#20808D] dark:!text-[#1FB8CD]":u,"!text-[#A84B2F] dark:!text-[#9C4153]":!u}),[u]),p=f.useMemo(()=>i?i>=1e5?(i/1e3).toLocaleString(d,{minimumFractionDigits:2,maximumFractionDigits:2})+"k":i.toLocaleString(d,{minimumFractionDigits:2,maximumFractionDigits:2}):"",[i,d]),h=f.useMemo(()=>c?`${u?"+":""}${c?.toFixed(2)}%`:"",[c,u]),g=f.useMemo(()=>t==="MEDIUM"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-xs flex items-center",children:[r&&o.jsx("img",{src:r??"",alt:a??"",className:"-mt-two size-[16px] rounded-sm"}),o.jsx(F,{variant:"tinyRegular",color:"light",className:n,children:s})]}),o.jsxs("div",{className:"gap-sm flex flex-row items-baseline",children:[o.jsxs(F,{variant:"tinyRegular",className:n,children:[l==="USD"?"$":"",p,l!=="USD"&&o.jsxs("span",{className:"text-quiet text-[11px]",children:[" ",l]})]}),o.jsx(F,{variant:"tinyRegular",className:V(n,m,"ml-auto"),children:h})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"tinyRegular",className:n,children:s}),o.jsx(F,{variant:"tinyRegular",className:n,children:p}),o.jsx(F,{variant:"tinyRegular",className:m,children:h})]}),[h,m,a,l,r,p,t,s]),y=f.useMemo(()=>o.jsx("div",{className:V("bg-subtle flex items-center justify-center rounded-full",{"size-[18px]":t==="SMALL","size-[20px]":t!=="SMALL"}),children:o.jsx(le,{icon:u?_D:cde,className:m,size:"xs"})}),[u,t,m]);return o.jsxs("div",{className:V("p-sm flex h-full flex-row items-center",{"py-sm":t==="SMALL"}),children:[o.jsx("div",{className:V("pl-xs flex flex-col",t==="MEDIUM"?"gap-sm":"gap-xs"),children:g}),o.jsx("div",{className:V("ml-auto",{"mr-sm":t==="MEDIUM"}),children:y})]})});MAe.displayName="FinanceHomepageWidget";const V$t={SMALL:"col-span-1 row-span-1",MEDIUM:"col-span-2 row-span-1",LARGE:"col-span-2 row-span-2",ROW:"col-span-6 row-span-1"},$$t=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="comet"),W$t=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="project"),h7=e=>e.type==="QUERY"&&e.educational_type==="primer",kAe={Ask:Hs,"Email & Communication Management":gp,"Finance & Budgeting":_ue,"Work & Research":Vue,"Shopping & Deals":xP,"Social & Personal Life":Bue,"Time Management & Productivity":n_,"Travel & Events":Uk,Research:Hs,"Current Events":uf,Recommend:yP,Travel:dDe,Shopping:xP,Finance:uDe,Sports:c2,Local:dde,"Make a plan":_De,Analyze:bDe,Summarize:vDe,"Fact Check":gue,Learn:xDe,Health:bP,"What is Perplexity":zue,Troubleshoot:ude,Compare:sq,Parenting:yDe,Create:df,Study:x1,"Get a job":gDe,Flashcards:hDe,"Practice test":Bk,Law:sq,Technology:pDe,Science:mDe,Humanities:fDe},bz=R.memo(({widget:e,showPadding:t=!0,restrictTwoRows:n=!0,tooltipText:r,icon:s})=>{const a=t?"px-sm py-xs":"",i=t?"p-xs":"",l=f.useMemo(()=>({lineHeight:1.3}),[]);return o.jsx("div",{className:`relative h-full ${a}`,children:o.jsx("div",{className:`flex h-full flex-col ${i}`,children:o.jsxs("div",{className:"flex grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-6 shrink-0 items-center justify-center rounded-md",children:o.jsx(le,{icon:(s||kAe[e.prompt])??Hs,color:"#8D9191",size:"sm"})}),r?o.jsx(En,{tooltipText:r,asChild:!0,children:o.jsx(F,{className:V("text-ellipsis",{"line-clamp-2":n}),variant:"tinyRegular",style:l,children:e.query})}):o.jsx(F,{className:V("text-ellipsis text-pretty",{"line-clamp-2":n}),variant:"tinyRegular",style:l,children:e.query})]})})})});bz.displayName="QueryHomepageWidget";const TAe=ve.create(Ye),H$t={suggested:uf,trending:fde},NAe=R.memo(({prompt:e})=>{switch(e){case"suggested":return o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(he,{defaultMessage:"Suggested",id:"a0lFbMbzyl"})});case"trending":return o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(he,{defaultMessage:"Trending",id:"ll/ufR0/ED"})});default:return o.jsx(F,{variant:"tinyRegular",color:"light",children:"Ask"})}});NAe.displayName="WidgetTitle";const jAe=R.memo(({widget:e,onQueryClick:t,onQueryHover:n})=>{const{queries:r}=e,s=Rk(r),a=V("px-[12px] pt-[12px]"),i=e.prompt.toLowerCase(),l=H$t[i];return o.jsxs("div",{className:a,children:[o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(le,{icon:l,color:"#8D9191",size:"sm"}),o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(NAe,{prompt:i})})]}),o.jsx("div",{children:s?o.jsx(g7,{query:r[0],restrictTwoRows:!1,onQueryClick:t,onQueryHover:n,widget:e},r[0]):o.jsx("div",{children:r.map(c=>o.jsx(g7,{query:c,onQueryClick:t,onQueryHover:n,widget:e},c))})})]})});jAe.displayName="MultiQueryHomepageWidget";const g7=R.memo(({query:e,restrictTwoRows:t,onQueryClick:n,onQueryHover:r,widget:s})=>{const a=f.useMemo(()=>({query:e,prompt:s.prompt}),[e,s]),i=f.useMemo(()=>({opacity:.5}),[]),l=f.useMemo(()=>({opacity:1}),[]),c=f.useMemo(()=>({opacity:.75,transition:{duration:.15,ease:va}}),[]);return o.jsx(TAe,{href:`/search/new?q=${e}&source=homepage_widget`,initial:i,animate:l,whileHover:c,children:o.jsx("div",{className:"mt-4",onClick:u=>{u.preventDefault(),n(e)},onMouseEnter:()=>r(e),children:o.jsx(bz,{widget:a,size:"MEDIUM",showPadding:!1,restrictTwoRows:t})})})});g7.displayName="MotionLinkFactory";const AAe=R.memo(({widget:e,onClick:t,onMouseEnter:n,index:r=0,buttonClassName:s})=>o.jsx("div",{onMouseEnter:n,children:o.jsx(Je,{children:o.jsx(ve.div,{initial:{opacity:0,scale:.7,y:14},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.7},transition:{delay:r*.025,duration:.3,type:"spring",stiffness:400,damping:30},children:o.jsx(pe,{variant:"border",size:"small",text:e.query,icon:kAe[e.prompt]??Hs,onClick:t,extraCSS:s},e.query)},e.uuid)})}));AAe.displayName="QueryPrimerHomepageWidget";const IAe=R.memo(({widget:e})=>{const t=f.useMemo(()=>({lineHeight:1.3}),[]);return o.jsxs("div",{className:"flex size-full grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle ml-3 flex size-[40px] shrink-0 items-center justify-center rounded-md",children:e.icon_url?o.jsx(Ss,{src:e.icon_url,alt:e.prompt,includeLightBoxModal:!1}):o.jsx(le,{icon:Hs,color:"#8D9191",size:"sm"})}),o.jsxs("div",{className:"my-auto mr-1 flex flex-col overflow-hidden",children:[o.jsx(F,{variant:"tiny",children:e.prompt}),o.jsx(F,{className:V("line-clamp-2 text-ellipsis text-pretty"),variant:"tinyRegular",style:t,children:e.query})]})]})});IAe.displayName="QueryProjectHomepageWidget";const RAe=R.memo(({widget:e})=>{const t=f.useMemo(()=>({lineHeight:1.3}),[]);return o.jsx("div",{className:"px-sm py-xs relative h-full",children:o.jsx("div",{className:"p-xs flex h-full flex-col",children:o.jsxs("div",{className:"flex grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-8 shrink-0 items-center justify-center rounded-md",children:o.jsx(vf,{unified:e.emoji,size:"small"})}),o.jsx(F,{className:"line-clamp-2 text-ellipsis text-pretty",variant:"tinyRegular",style:t,children:e.title})]})})})});RAe.displayName="SpaceHomepageWidget";const jpn=({event:e})=>{const[t,n]=f.useState("scoring"),{$t:r}=Z(),s=Aw(e.event.teams),a=e.event.pbp,i=Vx(e.event),l=f.useMemo(()=>a.reduce((c,u)=>(c[u.period]||(c[u.period]=[]),c[u.period]?.push(u),c),{}),[a]);return o.jsx(H,{variant:"subtler",className:"rounded-md",children:o.jsx(oN,{title:t==="all"?"Play-by-Play":"Scoring Plays",titleClassName:"!py-0",trailing:o.jsx(Dw,{size:"small",actionList:[{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),show:!0,onClick:()=>n("scoring"),active:t==="scoring"},{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),show:!0,onClick:()=>n("all"),active:t==="all"}],layoutGroupId:"nfl-play-summary-tab-bar",layout:"right"}),children:o.jsx("div",{className:"-my-md",children:o.jsx(z$t,{plays:l,teams:s,brands:e.brands,drives:e.event.driveChart,mode:t,isLive:i})})})})},z$t=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a})=>{const i=a?[...Object.keys(e)].reverse():Object.keys(e);return o.jsx("div",{children:i.map(l=>o.jsx("div",{children:o.jsx(G$t,{plays:e[parseInt(l)]??fe,teams:t,brands:n,drives:r,mode:s,isLive:a,period:parseInt(l)})},l+s))})},G$t=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a,period:i})=>{const[l,c]=f.useState(!1),u=f.useMemo(()=>Object.values(e).flat().reduce((p,h)=>(p[h.driveId]||(p[h.driveId]=[]),p[h.driveId]?.push(h),p),{}),[e]),d=()=>{c(!0)};return!Object.keys(u).some(p=>r.find(h=>h.driveId===parseInt(p))?.driveStats.isScoringDrive==="true")&&s==="scoring"?null:o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"smallCaps",color:"light",className:"-mx-md bg-subtle p-xs px-md",children:_z(i,{asOrdinal:!0})}),o.jsx("div",{className:V("group/plays flex flex-col",{"flex-col-reverse":a}),children:Object.keys(u).map(p=>{const h=r.find(g=>g.driveId===parseInt(p));return s==="scoring"&&h?.driveStats.isScoringDrive==="false"?null:o.jsx(Q$t,{brands:n,teams:t,plays:u[parseInt(p)]??fe,drives:r,isLive:a,period:i,onExpand:d,hasExpanded:l},p)})})]})},q$t=e=>{if(!e)return;const t=+e.driveStats.timeOfPossession.seconds;return t<10?`${e.driveStats.timeOfPossession.minutes}:0${t}`:`${e.driveStats.timeOfPossession.minutes}:${t}`},K$t=e=>e?e.driveEnd.playType.playTypeId===20:!1,Y$t=e=>e?e.driveEnd.gameClock.minutes!==null:!1,Q$t=({brands:e,teams:t,plays:n,drives:r,isLive:s,period:a,onExpand:i,hasExpanded:l})=>{const{$t:c}=Z(),u=r.find(v=>v.driveId===n[0]?.driveId),d=Y$t(u),[m,p]=f.useState(!1),h=Ey(u?.teamId??n[0]?.endPossession.teamId??"",e,"nfl"),g=f.useMemo(()=>{const v=q$t(u);return c({defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},{count:u?.driveStats.plays,yards:u?.driveStats.yards,duration:v})},[c,u]),y=f.useMemo(()=>u?.driveEnd.period&&u.driveEnd.period!==a?c({defaultMessage:"End of Quarter",id:"tY+g5ifXSh"}):u?.driveEnd.driveChartPlayName??c({defaultMessage:"Active Drive",id:"9WRCeRXYnG"}),[c,u,a]),x=K$t(u)?Ey(t.find(v=>v.teamId!==h.teamId)?.teamId??h.teamId,e,"nfl"):h;return f.useEffect(()=>{s&&!d&&!l&&!m&&p(!0)},[]),f.useEffect(()=>{d&&!l&&p(!1)},[d,l]),o.jsxs(H,{className:V("py-sm relative border-b",{"!border-transparent":m},{"first:border-b-0":s},{"last:border-b-0":!s}),children:[o.jsx("div",{className:V("-inset-x-md bg-subtler absolute inset-y-0 duration-200",{"opacity-0":!m})}),u&&u.driveEnd.period>a&&o.jsx("div",{className:V("bg-inverse/25 w-two absolute left-[calc(12px-1px)]",{"top-lg bottom-0":!s,"h-lg top-0":s})}),u&&u.driveStart.period<a&&o.jsx("div",{className:V("bg-inverse/25 w-two absolute left-[calc(12px-1px)]",{"h-lg top-0":!s,"top-lg bottom-0":s})}),o.jsxs("div",{className:"gap-md relative flex cursor-pointer items-center",onClick:()=>{p(!m),i()},children:[o.jsx(Ls,{size:"small",logo:x.logo,color:x.color,className:"!border-subtlest relative"}),o.jsxs("div",{className:"flex-1",children:[o.jsx(F,{variant:"smallBold",children:o.jsx("span",{className:"uppercase",children:y})}),o.jsx(F,{variant:"tiny",color:"light",children:g})]}),o.jsxs("div",{className:"gap-lg grid grid-cols-2",children:[t[0]&&o.jsx(Voe,{team:t[0],score:n[n.length-1]?.awayScoreAfter??0,didScore:(n[n.length-1]?.awayScoreAfter??0)>(n[0]?.awayScoreBefore??0)}),t[1]&&o.jsx(Voe,{team:t[1],score:n[n.length-1]?.homeScoreAfter??0,didScore:(n[n.length-1]?.homeScoreAfter??0)>(n[0]?.homeScoreBefore??0)})]}),o.jsx(F,{variant:"small",className:"flex items-center",children:o.jsx(le,{icon:m?Vy:Bn,size:"sm",className:"text-quiet"})})]}),o.jsx(na,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:an},children:m&&o.jsx(is,{className:"w-full",initial:{opacity:0,y:-5},animate:{opacity:1,y:0,transition:{duration:.2,ease:an,delay:.05}},exit:{opacity:0,y:-5,transition:{duration:.2,ease:an}},children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:(s?[...n].reverse():n).map(v=>o.jsx(Z$t,{play:v},v.playId))})})})]})},Voe=({team:e,score:t,didScore:n})=>o.jsxs("div",{children:[o.jsx(F,{variant:"small",color:"light",className:"text-right uppercase",children:e.abbreviation}),o.jsxs(F,{variant:"small",className:"text-right align-baseline",color:n?"super":void 0,children:[n&&o.jsx(le,{icon:mde,className:"mr-xs inline-block size-2"}),o.jsx("span",{className:"font-mono",children:t})]})]}),X$t=e=>{const t=e.match(/([A-Za-z]+)(\d+)/);if(!t)return e;const[n,r,s]=t;return`${r} ${s}`},_z=(e,t)=>[1,2,3,4].includes(e)?t?.asOrdinal?eNe(e):`Q${e}`:"OT",Z$t=({play:e})=>o.jsxs(ve.div,{layout:"position",initial:{opacity:0},animate:{opacity:1},className:"gap-md group flex w-full",children:[o.jsx("div",{className:"w-[24px] shrink-0"}),o.jsx(H,{className:"gap-md py-sm group-last:-mb-sm flex flex-1 border-b group-last:border-b-0",children:o.jsxs("div",{children:[o.jsxs(F,{variant:"small",children:[e.down&&e.distance&&`${eNe(e.down)} & ${e.distance} at `,o.jsx("span",{className:"uppercase",children:X$t(e.yardLine)})]}),o.jsxs(F,{variant:"small",color:"light",children:["(",e.time," - ",_z(e.period),") ",e.playText]})]})})]});function Apn({event:e,brands:t,isLive:n}){const{$t:r}=Z(),[s,a]=f.useState(!1),[i,l]=f.useState("all"),c=f.useMemo(()=>e.pbp.filter(d=>i==="all"?$oe(d):$oe(d)&&eWt(d)).reduce((d,m)=>(d[m.period]=d[m.period]||[],d[m.period]?.push(m),d),{}),[e?.pbp,i]),u=f.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>l("all"),show:!0,active:i==="all"},{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),onClick:()=>l("scoring"),show:!0,active:i==="scoring"}],[i,r]);return o.jsxs(o.Fragment,{children:[o.jsx(H,{variant:"subtler",className:"rounded-md",children:o.jsx(oN,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:o.jsx("div",{className:"-mb-sm",children:o.jsx(Dw,{actionList:u,layoutGroupId:"nba-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:o.jsx("div",{className:"-my-md",children:o.jsx(wz,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:n,brands:t,inModal:!1})})})}),s&&o.jsx(tWt,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:n})]})}const wz=f.memo(({plays:e,event:t,onViewAll:n,playsToRender:r=1/0,reverse:s=!1,brands:a,inModal:i=!1})=>{const{$t:l}=Z(),c=Aw(t.teams),u=s?[...Object.keys(e)].reverse():Object.keys(e),d=f.useMemo(()=>{let m=r;return o.jsxs(H,{children:[u.map(p=>{let h=0;const g=e[p]?.length??0;return m<=0?null:(m<g?(h=m,m=0):(h=g,m-=g),o.jsx(J$t,{plays:e[p]??fe,playsToRender:h,teamsSorted:c,period:p,reverse:s,brands:a},p))}),!i&&n&&o.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:o.jsx(Te,{variant:"super",chevron:!0,chevronIcon:Zn,text:l({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:n})})]})},[e,r,c,s,i,n,l,u,a]);return i?d:o.jsx(na,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:an},children:o.jsx(is,{children:d})})});wz.displayName="PlaysByPeriod";function J$t({plays:e,playsToRender:t,teamsSorted:n,period:r,reverse:s,brands:a}){const i=f.useMemo(()=>s?[...e].reverse():e,[e,s]),l=Ds();return o.jsxs(H,{children:[t>0&&o.jsx("div",{children:o.jsxs(H,{variant:"subtle",className:V("-mx-md px-md py-sm flex items-center justify-between"),children:[o.jsx(F,{variant:"smallCaps",color:"light",children:_z(parseInt(r))}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(Hoe,{team:n[0]?.abbreviation??""}),o.jsx(Hoe,{team:n[1]?.abbreviation??""})]})]})}),o.jsx(jc,{children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:i.slice(0,t).map((c,u)=>{const d=i[u-(s?-1:1)]?.visitorScore??0,m=i[u-(s?-1:1)]?.homeScore??0;return o.jsx(OAe,{play:c,previousHomeScore:m,previousVisitorScore:d,brands:a,parentHasMounted:l},c.playId)})})})]})}function PAe(e){const t=e?.minutes||0,n=Math.ceil(e.seconds??0)?.toString().padStart(2,"0")||"00";return`${`${t}:`}${n}`}const $oe=e=>e.playText!=="Starting Lineup",eWt=e=>e.playEvent.playEventId===3||e.playEvent.playEventId===1,OAe=f.memo(({play:e,previousHomeScore:t,previousVisitorScore:n,brands:r,parentHasMounted:s})=>{const a=f.useRef(!s),i=t!==void 0&&t!==e.homeScore,l=n!==void 0&&n!==e.visitorScore,c=i||l,u=Ey(e.teamId,r,"nba"),{colorScheme:d}=Jr(),m=ck(u.color,d);return o.jsxs(ve.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:a.current?void 0:{opacity:0},animate:a.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:an},opacity:{duration:.2,ease:va}},layout:"position",children:[c&&o.jsx("div",{className:"w-xs absolute inset-y-1 left-1 rounded-full opacity-50",style:{backgroundColor:m}}),!a.current&&o.jsx(ve.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:va,delay:.2}}),o.jsxs("div",{className:"gap-md relative flex items-center",children:[o.jsx(Ls,{logo:u.logo,color:u.color,size:"small",includeStripe:!1}),o.jsxs("div",{className:"gap-xs flex flex-1 flex-col items-start",children:[o.jsx(F,{variant:"smallCaps",color:"light",children:PAe(e.time)}),o.jsx(F,{variant:"small",children:e.playText})]}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(Woe,{score:e.visitorScore,didScore:l}),o.jsx(Woe,{score:e.homeScore,didScore:i})]})]})]})});OAe.displayName="Play";const Woe=({score:e,didScore:t})=>o.jsxs(F,{variant:"small",className:"relative w-[40px] text-right align-baseline",color:t?"super":void 0,children:[t&&o.jsx(le,{icon:mde,className:"mr-xs inline-block size-2"}),o.jsx("span",{className:"font-mono",children:e})]}),Hoe=({team:e})=>o.jsx(F,{variant:"smallCaps",className:"w-[40px] shrink-0 text-right",children:e}),tWt=({plays:e,isOpen:t,onClose:n,event:r,brands:s,reverse:a})=>{const{isMobileStyle:i}=Ce();return o.jsx(on,{isOpen:t,onClose:n,variant:i?"bottom-sheet":"side-sheet",children:o.jsx("div",{className:"min-h-full",children:o.jsx(wz,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})})},LAe=R.memo(({widget:e})=>{const{data:t}=e;return t.event_status.eventStatusId===2||t.event_status.eventStatusId===4?o.jsx(FAe,{widget:e}):o.jsx(DAe,{widget:e})});LAe.displayName="SportsHomepageWidget";const DAe=R.memo(({widget:e})=>{const{$t:t}=Z(),{data:n}=e,{away_team:r,home_team:s}=n,{locale:a}=Z(),i=f.useMemo(()=>{const l=new Date(n.start_date);return p5(l)?`${l.toLocaleString(a,{hour:"numeric",minute:"2-digit"})}, ${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}`:l.toLocaleString(a,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},[n,a,t]);return o.jsxs("div",{className:V("py-sm flex h-full flex-col items-center justify-center px-[12px]"),children:[o.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[o.jsx("div",{className:"flex items-center justify-start",children:o.jsx(Ls,{logo:r.logo,color:r.color,size:"small"})}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(F,{variant:"tinyRegular",className:"truncate",children:i})}),o.jsx("div",{className:"flex items-center justify-end",children:o.jsx(Ls,{logo:s.logo,color:s.color,size:"small"})})]}),o.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(F,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),o.jsx("div",{className:"px-2",children:o.jsx(F,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:"vs"})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(F,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});DAe.displayName="PreviewContent";const FAe=R.memo(({widget:e})=>{const{$t:t}=Z(),{data:n}=e,{away_team:r,home_team:s,event_status:a,league:i}=n,{minutes:l,seconds:c}=a,u=a.eventStatusId===2,d=a.eventStatusId===4,m=qNe(t,i.toLowerCase()),p=d?t({defaultMessage:"Final",id:"6/JzkWi0di"}):l!=null&&c!=null?PAe({minutes:l,seconds:c}):null,h=d||!a.period?null:`Q${a.period}`,y=GNe(a)?t({defaultMessage:"Halftime",id:"iC0AL294Dr"}):d?t({defaultMessage:"Final",id:"6/JzkWi0di"}):h&&p?`${h} ${p}`:"";return o.jsxs("div",{className:V("p-sm flex h-full flex-col items-center justify-center"),children:[o.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[o.jsxs("div",{className:"flex items-center justify-start",children:[o.jsx(Ls,{logo:r.logo,color:r.color,size:"small"}),r.score!==void 0&&o.jsxs("div",{className:"ml-sm flex flex-col items-center justify-center",children:[o.jsx(F,{variant:r.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:r.score}),r.sub_score&&o.jsx(F,{variant:"tinyRegular",color:"light",className:"truncate",children:r.sub_score})]})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(F,{variant:"tinyRegular",className:"truncate",children:y})}),o.jsxs("div",{className:"flex items-center justify-end",children:[s.score!==void 0&&o.jsxs("div",{className:"mr-sm flex flex-col items-center",children:[o.jsx(F,{variant:s.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:s.score}),s.sub_score&&o.jsx(F,{variant:"tinyRegular",color:"light",className:"truncate",children:s.sub_score})]}),o.jsx(Ls,{logo:s.logo,color:s.color,size:"small"})]})]}),o.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(F,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),o.jsx("div",{className:"px-2",children:u?o.jsx(UAe,{}):d&&o.jsx(F,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:m})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(F,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});FAe.displayName="SummaryContent";const UAe=R.memo(()=>o.jsx(F,{variant:"tinyRegular",color:"super",className:"bg-super/10 truncate rounded-full px-2 py-0.5 leading-tight",children:"Live"}));UAe.displayName="LiveIndicator";const nWt={SPORTS:CDe,FINANCE:wDe},rWt="#8D9191",sWt=({watchlistType:e})=>{const t=nWt[e];return o.jsx(le,{icon:t,color:rWt})},BAe=R.memo(({widget:e})=>{const{$t:t}=Z(),n=e.watchlist_type.toLowerCase(),r=t(Vv[n].title),s=t(Vv[n].widgetDescription);return o.jsxs("div",{className:"flex h-full flex-col items-start justify-between p-[12px]",children:[o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(sWt,{watchlistType:e.watchlist_type}),o.jsx(F,{variant:"tinyRegular",color:"light",children:r})]}),o.jsx("div",{children:o.jsx(F,{variant:"tinyRegular",children:s})})]})});BAe.displayName="WatchlistWidget";const VAe=R.memo(({location:e,forecast:t,prefersMetric:n})=>{const r="leading-none line-clamp-1",{$t:s}=Z(),a=n?t?.[0]?.maxtemp_c:t?.[0]?.maxtemp_f,i=n?t?.[0]?.mintemp_c:t?.[0]?.mintemp_f,l=s({defaultMessage:"H: {high} L: {low}",id:"JyTe6EoY40"},{high:a,low:i});return f.useMemo(()=>o.jsxs("div",{className:"mt-sm gap-sm flex flex-row items-baseline justify-between",children:[o.jsx(F,{variant:"tinyRegular",className:r,color:"light",children:e?.name}),o.jsx(F,{variant:"tinyRegular",className:V(r,"min-w-max"),color:"ultraLight",children:l})]}),[l,e?.name,r])});VAe.displayName="WeatherBottomSection";const aWt=({icon:e})=>{const t=Ik(gT,e)?Nb[e]:i_;return o.jsx(le,{icon:t,size:"md",className:"self-start"})},$Ae=R.memo(({forecast:e,prefersMetric:t})=>{const{locale:n}=Z(),r="row-span-3",s="leading-none line-clamp-1";return o.jsx("div",{className:V(r,"mt-sm flex flex-grow justify-between"),children:e?.slice(0,5).map((a,i)=>{const l=t?a.maxtemp_c:a.maxtemp_f;return o.jsxs(ve.div,{className:"gap-xs flex flex-col items-start",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.025*i,ease:fi},children:[o.jsx(F,{className:"leading-none",children:o.jsx(aWt,{icon:a.icon})}),o.jsxs(F,{variant:"tinyRegular",className:V(s,"mt-xs"),children:[l,""]}),o.jsx(F,{variant:"tinyRegular",className:s,color:"light",children:qB(a.dow??"",n)})]},a.dow)})})});$Ae.displayName="WeatherForecast";const iWt=({icon:e})=>{const t=Ik(gT,e)?Nb[e]:i_;return o.jsx(le,{icon:t,size:"md",className:"-mt-two mr-xs self-start"})},WAe=R.memo(({current:e,prefersMetric:t,setPrefersMetric:n})=>{const r="leading-none line-clamp-1",s=t?e?.temp_c:e?.temp_f,a=e?.condition?.text??"Sunny";return o.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[o.jsx(F,{variant:"base",className:V(r,"min-w-max"),children:o.jsxs("div",{className:"gap-xs flex flex-row items-center justify-center",children:[o.jsx("div",{children:o.jsx(iWt,{icon:e?.condition?.icon})}),o.jsx(F,{variant:"base",className:"tabular-nums",children:o.jsx(No,{value:s??0,suffix:""})}),o.jsxs("div",{className:"flex",children:[o.jsx("button",{onClick:()=>n(!1),className:"cursor-pointer appearance-none",children:o.jsx(F,{variant:"tiny",color:t?"light":"default",className:V("transition-opacity",t?"opacity-50 hover:opacity-70":"opacity-100"),children:"F"})}),o.jsx(F,{variant:"tiny",color:"light",className:"opacity-50",children:"/"}),o.jsx("button",{onClick:()=>n(!0),className:"cursor-pointer appearance-none",children:o.jsx(F,{variant:"tiny",color:t?"default":"light",className:V("transition-opacity",t?"opacity-100":"opacity-50 hover:opacity-70"),children:"C"})})]})]})}),o.jsx(F,{variant:"tinyRegular",color:"light",className:r,children:a})]})});WAe.displayName="WeatherTopSection";const HAe=R.memo(({data:e,isLoading:t,error:n,size:r="LARGE"})=>{const{prefersMetric:s,setPrefersMetric:a}=fje();return t?o.jsx(zAe,{size:r}):n||!e?o.jsx(GAe,{}):o.jsx(Cz,{data:e,size:r,prefersMetric:s,setPrefersMetric:a})});HAe.displayName="WeatherDisplay";const Cz=R.memo(({data:e,prefersMetric:t,setPrefersMetric:n,size:r="LARGE"})=>{const{current:s,location:a,forecast:i}=e;return o.jsxs(ve.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)",transition:{opacity:{ease:fi,duration:.4},filter:{ease:fi,duration:.4}}},exit:{opacity:0,filter:"blur(2px)",transition:{opacity:{ease:fi,duration:.3},filter:{ease:fi,duration:.3}}},className:V("gap-sm grid size-full",r==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[o.jsx(WAe,{current:s,prefersMetric:t,setPrefersMetric:n}),o.jsx(VAe,{location:a,forecast:i,prefersMetric:t}),r==="LARGE"&&o.jsx($Ae,{forecast:i,prefersMetric:t})]},"success")});Cz.displayName="WeatherInner";const oWt={action:{type:"CREATE_THREAD",query:"weather",prefer_pro:!1},uuid:"123",type:"WEATHER",current:{temp_c:20,temp_f:68,condition:{text:"Sunny",icon:"sun",code:"sun"}},location:{name:"San Francisco",region:"California",country:"USA"},forecast:[],is_metric_preferred:!1},zAe=R.memo(({size:e="LARGE"})=>{const t=f.useCallback(()=>{},[]);return o.jsxs(wn,{className:V("relative"),children:[o.jsx("div",{className:"invisible",children:o.jsx(Cz,{data:oWt,size:e,prefersMetric:!0,setPrefersMetric:t})}),o.jsxs("div",{className:V("gap-sm absolute inset-0 grid size-full",e==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle size-4 rounded-full"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-12 rounded"})]}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-4 w-20 rounded"})]}),o.jsxs("div",{className:"gap-sm flex flex-row items-baseline justify-between",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-16 rounded"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-14 rounded"})]}),e==="LARGE"&&o.jsx("div",{className:V("row-span-3 flex flex-grow justify-between"),children:[1,2,3,4,5].map(n=>o.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle size-4 rounded-full"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle mt-xs h-3 w-6 rounded"}),o.jsx(H,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-8 rounded"})]},n))})]})]})});zAe.displayName="WeatherSkeleton";const GAe=R.memo(()=>o.jsx("div",{className:"gap-sm py-md flex size-full flex-col items-center justify-center",children:o.jsxs("div",{className:"gap-xs flex flex-col items-center text-center",children:[o.jsx(le,{icon:$ue,size:"lg",className:"opacity-50"}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"mt-sm leading-tight",children:o.jsx(he,{defaultMessage:"Unable to load weather",id:"uwWuSjxDbt"})}),o.jsx(F,{variant:"tinyRegular",color:"ultraLight",className:"leading-tight",children:o.jsx(he,{defaultMessage:"Please try again later",id:"aoWE202GwV"})})]})}));GAe.displayName="WeatherError";const qAe=R.memo(({widget:e,setShowCTA:t,size:n})=>{const{location:r,permissionStatus:s}=mx(),a=r?.latitude??null,i=r?.longitude??null,{locale:l}=Z(),{data:c,isLoading:u,error:d}=We({queryKey:[yV,a,i].map(String),queryFn:()=>s1e({locale:l,location:r,reason:"weather-homepage-widget"})??e,initialData:e,refetchInterval:1e3*60*5,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0});return f.useEffect(()=>{s!==void 0&&s!=="granted"&&t(!0)},[s,t]),o.jsx("div",{className:"px-sm pt-xs",children:o.jsx(HAe,{data:c,isLoading:u,error:d,size:n})})});qAe.displayName="WeatherHomepageWidget";const zoe=e=>Qr(e).with({type:"ANNOUNCEMENT"},()=>"announcement").with({type:"DISCOVER"},()=>"discover_single_page").with({type:"QUERY"},t=>t.prompt.toLowerCase()).with({type:"WEATHER"},()=>"weather_current").with({type:"FINANCE"},()=>"finance_ticker").with({type:"SPORTS"},()=>"sports_game").with({type:"WATCHLIST"},()=>"watchlist").with({type:"MULTIQUERY"},t=>(t.prompt??"Ask").toLowerCase()).with({type:"SPACE"},t=>t.title.toLowerCase()).exhaustive(),lWt=(e,t,n,r="home")=>{const{trackEvent:s}=je(),[a,i]=f.useState(!1),l=f.useMemo(()=>{const x=Qr(e).with({type:"ANNOUNCEMENT"},b=>({title:b.title,text:b.text,variant:b.variant})).with({type:"DISCOVER"},b=>({title:b.title})).with({type:"QUERY"},b=>({prompt:b.prompt,query:b.query,uuid:b.uuid,educational_type:b.educational_type})).with({type:"WEATHER"},b=>({location:b.location.name})).with({type:"FINANCE"},b=>({ticker:b.quotes[0]?.symbol,is_implicit:b.is_implicit??!1})).with({type:"WATCHLIST"},b=>({type:b.watchlist_type})).with({type:"SPACE"},b=>({title:b.title})).otherwise(()=>({})),v=e.action.type==="MULTIQUERY"?e.action.actions.map(b=>({...b,type:b.type.toLowerCase()})):{...e.action,type:e.action.type.toLowerCase()};return{widgetType:e.type.toLowerCase(),widgetName:zoe(e),widgetCTA:v,widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontendUUID:n,metadata:x,uuid:e.uuid}},[e,t,n,r]),c=f.useCallback(()=>{a||(s("widget viewed",l),i(!0))},[l,s,a]),u=f.useCallback(()=>{s("widget selected",l)},[l,s]),d=f.useCallback(()=>{s("widget dismissed",l)},[l,s]),m=f.useCallback(()=>{s("widget hovered",l)},[l,s]),p=f.useCallback(x=>{if(e.type!=="MULTIQUERY")return;const v=e.action.actions.find(b=>b.query===x);if(v)return{widgetType:e.type.toLowerCase(),widgetName:zoe(e),widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontentUUID:n,metadata:{prompt:e.prompt,query:v.query,uuid:v.uuid??null}}},[e,t,n,r]),h=f.useCallback(x=>{const v=p(x);v&&s("widget selected",v)},[p,s]),g=f.useCallback(x=>{const v=p(x);v&&s("widget hovered",v)},[p,s]),y=f.useCallback(x=>{const v=p(x);v&&s("widget viewed",v)},[p,s]);return f.useMemo(()=>({trackView:c,trackClick:u,trackDismiss:d,trackHover:m,trackMultiQueryClick:h,trackMultiQueryHover:g,trackMultiQueryView:y}),[u,d,m,h,g,y,c])},cWt=()=>{const{submitQuery:e}=ta(),t=_t(),{openModal:n}=wt(),r=g2e(),{device:{isWindowsApp:s}}=Lt(),{setUserInput:a,setShouldTriggerFocus:i}=z_(),{blankStateSuggestions:l}=ea(),{setSuggestions:c}=to(),u=Xa(),{onHomepageTitleChange:d}=L$t(),{setFileUploadUpsellTooltipOpen:m}=to(),{deprecatedOpenToast:p}=Mn(),h=lt(),{hasAccessToProFeatures:g}=Et(),{session:y}=Nt(),x=y?.user?.email??"",{isStudent:v}=c5({email:x,reason:"study-mode-access"}),_=NN({onSuccess:Pn,onError:T=>{p(T,"error",5)},origin:"homepage_primer"}),w=f.useCallback(T=>{const I=Ei();e({rawQuery:T.query,copilotOverride:T.prefer_pro,attachments:T.attachments,collection:null,newFrontendContextUUID:I,promptSource:"homepage_widget",querySource:"homepage_widget",sourcesOverride:["web"],modelPreferenceOverride:T.prefer_pro?"pplx_pro":"turbo",shouldRedirectToBackendUUID:!0})},[e]),C=f.useCallback(T=>{a(T.input_prefix),i(!0),T.suggestions&&T.suggestions.length>0?c(T.suggestions.map(({query:I,submission_query:U})=>({query:I,submission_query:U??void 0}))):T.suggestions&&T.suggestions.length===0&&l[u]&&c(l[u]),T.homepage_tagline&&d(T.homepage_tagline),T.trigger_location_prompt&&_(),T.trigger_file_tooltip&&m(!0),T.trigger_deep_research&&h&&r(de.ALPHA,ce.RESEARCH),T.trigger_labs&&h&&g&&r(de.BETA,ce.STUDIO),T.trigger_study_mode&&h&&v&&r(de.STUDY,ce.STUDY)},[a,i,h,c,l,d,_,m,r,u,g,v]),S=f.useCallback((T,I)=>{const U=T.find(B=>B.query===I);U&&w(U)},[w]),E=f.useCallback(T=>{t.push(`/page/${T.page_slug}`)},[t]),M=f.useCallback(T=>{s?qE(T):window.open(T,"_blank")},[s]),k=f.useCallback((T,I)=>{const U=T.should_interpolate_template&&I?G0e(T.permalink,I):T.permalink;M(U)},[M]),N=f.useCallback(T=>{s?qE(T.permalink):t.push(T.permalink)},[t,s]),P=f.useCallback(()=>{t.push("/pro")},[t]),L=f.useCallback(T=>{T.deep_research?r(de.ALPHA):r(de.PRO)},[r]),O=f.useCallback(T=>{n("watchlistModal",{origin:"home",watchlistType:T.watchlist_type})},[n]),A=f.useCallback(T=>{n("spaceCreate",{existingCollection:null,onCreate:null,content:{title:T.space_title??void 0,description:T.space_description??void 0,instructions:T.space_instructions??void 0,emoji:T.space_emoji??void 0}})},[n]),j=f.useCallback(T=>{T.modal_name&&n(T.modal_name)},[n]);return f.useMemo(()=>({createThreadAction:w,populateInputAction:C,multiQueryCreateThreadAction:S,openPageAction:E,openExternalUrlAction:k,openInternalUrlAction:N,openPaywallAction:P,enableProAction:L,openWatchlistModalAction:O,createSpaceAction:A,openModalAction:j}),[A,w,L,S,k,N,j,E,P,O,C])},uWt=e=>["ANNOUNCEMENT","QUERY"].includes(e.type),KAe=R.memo(({onClick:e,onMouseEnter:t,href:n,className:r,children:s,disableHoverAnimation:a=!1})=>{const i=n?TAe:ve.div,l=f.useMemo(()=>({opacity:.5}),[]),c=f.useMemo(()=>({opacity:1}),[]),u=f.useMemo(()=>({scale:.98,transition:{ease:an,duration:.15}}),[]),d=f.useMemo(()=>({scale:{ease:an,duration:.3},opacity:{ease:fi,duration:.3}}),[]);return o.jsx(i,{initial:l,animate:c,whileHover:a?void 0:{opacity:.75,transition:{duration:.15,ease:va}},whileTap:u,transition:d,className:V(r,a?"":"cursor-pointer"),href:n,onClick:e,onMouseEnter:t,children:o.jsx(H,{variant:"subtler",className:"relative size-full select-none overflow-hidden rounded-lg",children:s})})});KAe.displayName="AnimatedWidgetContainer";const YAe=R.memo(({widget:e,size:t,position:n,frontendSessionUUID:r,widgetLocation:s="home"})=>{const a="homepage-widget-base",[i,l]=f.useState(!1),[c,u]=f.useState(!1),d=lt(),{showSuggestDropdown:m}=ea(),{trackView:p,trackHover:h,trackClick:g,trackDismiss:y,trackMultiQueryClick:x,trackMultiQueryHover:v,trackMultiQueryView:b}=lWt(e,n,r,s),{createThreadAction:_,openPageAction:w,openExternalUrlAction:C,openInternalUrlAction:S,openPaywallAction:E,enableProAction:M,openWatchlistModalAction:k,multiQueryCreateThreadAction:N,populateInputAction:P,createSpaceAction:L,openModalAction:O}=cWt(),{mutate:A}=dft({widget:e,reason:a}),j=oo(),{session:T}=Nt(),I=f.useMemo(()=>({email:T?.user?.email??"",deviceId:j?.device_id??"",browserVersion:j?.browser_version??"",osName:void 0??""}),[T?.user?.email,j?.device_id,j?.browser_version]),B=(Y=>Qr(Y).with({type:"CREATE_THREAD"},G=>`/search/new?q=${G.query}&source=homepage_widget`).with({type:"OPEN_PAGE"},G=>`/page/${G.page_slug}`).with({type:"EXTERNAL_URL"},G=>G.should_interpolate_template?G0e(G.permalink,I):G.permalink).with({type:"INTERNAL_URL"},G=>G.permalink).otherwise(()=>{}))(e.action),D=f.useRef(!1);f.useEffect(()=>{if(!D.current){if(e.type!=="MULTIQUERY")p();else for(const Y of e.queries)b(Y);D.current=!0}},[p,e,b]);const W=h7(e),z=f.useCallback(Y=>{B&&Y.preventDefault(),Qr(e.action).with({type:"CREATE_THREAD"},G=>{_(G)}).with({type:"OPEN_PAGE"},G=>w(G)).with({type:"EXTERNAL_URL"},G=>C(G,I)).with({type:"PAYWALL"},E).with({type:"INTERNAL_URL"},G=>S(G)).with({type:"ENABLE_PRO"},G=>M(G)).with({type:"OPEN_WATCHLIST_MODAL"},G=>k(G)).with({type:"MULTIQUERY"},()=>{}).with({type:"POPULATE_INPUT"},G=>{P(G)}).with({type:"CREATE_SPACE"},G=>{L(G)}).with({type:"OPEN_MODAL"},G=>{O(G)}).exhaustive(),uWt(e)&&e.dismissable&&d&&(A(),y()),e.type!=="MULTIQUERY"&&g()},[B,e,E,d,_,w,C,I,S,M,k,L,P,A,y,g,O]),$=f.useCallback(()=>{e.type!=="MULTIQUERY"&&h()},[e.type,h]),X=f.useMemo(()=>Qr(e).with({type:"ANNOUNCEMENT"},Y=>o.jsx(wAe,{widget:Y,size:t})).with({type:"DISCOVER"},Y=>o.jsx(CAe,{widget:Y,size:t})).with({type:"QUERY",educational_type:"primer"},Y=>o.jsx(AAe,{widget:Y,onClick:z,onMouseEnter:$,index:n})).with({type:"QUERY",educational_type:"project"},Y=>o.jsx(IAe,{widget:Y})).with({type:"QUERY"},Y=>o.jsx(bz,{widget:Y,size:t})).with({type:"WEATHER"},Y=>o.jsx(qAe,{widget:Y,setShowCTA:u,size:t})).with({type:"FINANCE"},Y=>o.jsx(MAe,{widget:Y,size:t})).with({type:"SPORTS"},Y=>o.jsx(LAe,{widget:Y,size:t})).with({type:"WATCHLIST"},Y=>o.jsx(BAe,{widget:Y,size:t})).with({type:"SPACE"},Y=>o.jsx(RAe,{widget:Y,size:t})).with({type:"MULTIQUERY"},Y=>o.jsx(jAe,{widget:Y,onQueryClick:G=>{N(Y.action.actions,G),x(G)},onQueryHover:G=>v(G)})).otherwise(()=>(ne.error(new Error(`No HomepageWidget found for type: ${e.type}`)),null)),[e,t,z,$,n,N,x,v]),q=f.useMemo(()=>Qr(e.type).with("WEATHER",()=>o.jsx(EAe,{setShowCTA:u})).otherwise(()=>null),[e.type]);return!X||m?null:o.jsxs("div",{className:V("relative",V$t[t]),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[W?X:o.jsx(KAe,{href:B,onClick:z,onMouseEnter:$,className:"size-full",disableHoverAnimation:e.type==="MULTIQUERY",children:X}),o.jsx(Je,{children:c&&i&&o.jsx(ve.div,{initial:{opacity:.5},animate:{opacity:1},exit:{opacity:0},transition:{scale:{ease:an,duration:.2},opacity:{ease:fi,duration:.2}},className:V("bg-subtler absolute inset-0 flex justify-center rounded-lg p-[12px]",t==="LARGE"?"items-end":"items-center"),children:q})})]})});YAe.displayName="HomepageWidgetBase";let Goe=1234567;function dWt(e){e!==void 0&&(Goe=e);let t=Goe+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}const fWt=5,QAe=f.memo(({children:e})=>o.jsx("div",{className:"gap-sm grid grid-cols-6",style:{gridTemplateRows:"repeat(auto-fit, 64px)",gridAutoRows:"64px"},children:e}));QAe.displayName="GridContainer";const mWt=({children:e})=>o.jsx("div",{className:"gap-sm flex h-[32px] flex-row flex-wrap justify-center overflow-hidden",children:e});var af;(function(e){e[e.Comet=0]="Comet",e[e.Project=1]="Project"})(af||(af={}));const pWt=e=>{switch(e){case af.Comet:return o.jsx(he,{defaultMessage:"See what Comet can do",id:"TO5vylizup"});case af.Project:return o.jsx(he,{defaultMessage:"Projects created with Perplexity",id:"6XX3tVQOXy"})}},hWt=e=>{switch(e){case af.Comet:return o.jsx(wi,{size:16});case af.Project:return o.jsx(Pk,{size:16})}},gWt=({variant:e,children:t})=>{const n=xt(),{$t:r}=Z(),s=f.useCallback(()=>{n.invalidateQueries({queryKey:[ty]})},[n]);return e?o.jsxs("div",{children:[o.jsxs("div",{className:"gap-sm pb-sm flex items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-row items-center",children:[o.jsx(F,{variant:"smallBold",color:"super",children:hWt(e)}),o.jsx(F,{variant:"smallBold",color:"light",children:pWt(e)})]}),o.jsx("div",{children:o.jsx(Te,{size:"tiny",onClick:s,text:r({defaultMessage:"See more",id:"yoLwRWw99S"}),icon:gD})})]}),t]}):t},XAe=f.memo(({widgets:e,widgetLocation:t="home"})=>{const n=f.useMemo(()=>Ei(),[]),r=_ct(),s=e.length>0;f.useEffect(()=>{s&&r("web.frontend.homepage_widgets_ttv")},[r,s]);const{flexWidgets:a,gridWidgets:i,headingVariant:l}=f.useMemo(()=>{const d=e.filter(h7).sort((h,g)=>dWt(h.seed)-.5).slice(0,fWt),m=e.filter(h=>!h7(h)),p=$$t(e)?af.Comet:W$t(e)?af.Project:void 0;return{flexWidgets:d,gridWidgets:m,headingVariant:p}},[e]),c=f.useCallback(u=>u.map((d,m)=>o.jsx(YAe,{widget:d,size:d.size??"MEDIUM",position:m,frontendSessionUUID:n,widgetLocation:t},d.uuid)),[n,t]);return o.jsx(Je,{initial:!1,children:o.jsx(gWt,{variant:l,children:o.jsxs("div",{className:"gap-md grid grid-cols-1",children:[a.length>0&&o.jsx(mWt,{children:c(a)}),i.length>0&&o.jsx(QAe,{children:c(i)})]})})})});XAe.displayName="WidgetsClient";const ZAe=f.memo(()=>{const e="homepage-widgets-wrapper",{locale:t}=Z(),n=lt(),r=f.useMemo(()=>{if(!n)return lft(pn(),lD(),t)},[n,t]),s=Xa(),a=f.useMemo(()=>s!==ce.STUDIO?{}:{searchMode:ce.STUDIO},[s]),{data:i}=We({queryKey:[ty],queryFn:()=>cft({urlPath:r,params:a,reason:e}),gcTime:1/0}),l=xt(),c=f.useRef(!1);return f.useEffect(()=>{if(!c.current){c.current=!0;return}l.invalidateQueries({queryKey:[ty]})},[l,a]),i?o.jsx(XAe,{widgets:i}):null});ZAe.displayName="HomepageWidgetsWrapper";const JAe=f.memo(()=>{const{isHomepageWidgetsDisabled:e}=_n();return e?null:o.jsx(Pr,{children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(ZAe,{})})})});JAe.displayName="HomepageWidgets";const yWt=()=>{const e=f.useRef(!1),t=Ds(),n=lt(),{openVisitorLoginUpsell:r}=gr({enabled:!n}),{data:s}=bV({enabled:t&&!e.current}),a=L_(s??void 0);f.useEffect(()=>{e.current||t&&s&&s.app_location===nu.MODAL&&(a(),e.current=!0)},[t,n,r,s,a])},vR=pt({[Lqe]:{id:"Sj7bs8Ti07",defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro"},[Dqe]:{id:"8MOEZchxNH",defaultMessage:"Sign in with your USC email to unlock one month free of Perplexity Pro"},[Fqe]:{id:"4d/Zn7HZQx",defaultMessage:"Sign in with your UC Berkeley email to unlock one month free of Perplexity Pro"},[Uqe]:{id:"DXeXI7X4DZ",defaultMessage:"Sign in with your IITM email to unlock one year free of Perplexity Pro"},[Bqe]:{id:"sBfq8LkRp0",defaultMessage:"Sign in with your ac.kr email to unlock one year free of Perplexity Pro"}}),xWt=()=>{const e=Ut(),{$t:t}=Z(),{openModal:n}=wt(),r=co(),{device:{userAgent:s}}=Lt(),[a,i]=f.useState(!1),l=lt(),{trackEvent:c}=je(),{openVisitorLoginImageUpsell:u}=gr({enabled:!0});f.useEffect(()=>{if(typeof window>"u")return;const d=e?.get(Oqe),m=[];if(e?.get(zY)&&(m.push(zY),n("onboardingModal",{userAgent:s})),e?.get(GY)&&(m.push(GY),c("default search extension uninstalled",{isBrowserExtension:!0})),e?.get(KY)&&(m.push(KY),r({origin:De.MAX_URL_PAYWALL,pitchMessage:{title:t({defaultMessage:"Introducing Perplexity Max",id:"v1bpoVO4Rq"}),description:t({defaultMessage:"Maximize your curiosity with unlimited access to Perplexity Labs",id:"AX3/N9NedQ"})}})),d&&ttt(d),!a&&(e?.get(Pqe)||d&&vR[d])){if(l)return;i(!0);const p=d&&vR[d]?t(vR[d]):t({defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro",id:"Sj7bs8Ti07"});u({origin:De.BACK_TO_SCHOOL,title:p,image:$qe,imageAlt:Wqe,loginButtonsStyle:"highlightBackToSchool"})}if(m.length>0){const p=Array.from(e?.entries()??[]).filter(([g])=>!m.includes(g)),h=new URLSearchParams;p.forEach(([g,y])=>{h.set(g,y)}),yx(Object.fromEntries(p))}},[e,n,r,s,a,l,t,c,u])},vWt=()=>{const e=lt(),{openModal:t}=wt(),{$t:n}=Z(),{openVisitorLoginUpsell:r}=gr({enabled:!0}),s=f.useCallback(a=>{if(ne.info("Thread access not allowed",{uuidOrSlug:a,isUserLoggedIn:e}),e)t("requestAccessModal",{uuidOrSlug:a});else{const i=`${window.location.origin}/search/${a}`;r({origin:De.REQUEST_ACCESS_LOGIN_GATE,title:n({defaultMessage:"This thread is private",id:"PX12OU86rT"}),description:n({defaultMessage:"Sign in if you are the owner of this thread, or to request access",id:"/A9MF2B0ub"}),sheetModalVariant:"centered-sheet",overrideRedirectUrl:i})}},[n,e,t,r]);return f.useMemo(()=>({handleRequestAccess:s}),[s])};function e6e(){const{isSplashPageDismissed:e}=_n(),t=Wet(),{isMobileUserAgent:n}=Ce(),r=lt(),s=Ft(),a=Ut(),i=zB(),l=s==="/"&&(a===null||a.size===0);return!(!n||r||e||!l||t||i||Pg())}const bWt="https://services.sheerid.com/verify",_Wt="681d40e03e7a8077098cb1b6",wWt="685b438c24925a24c23ef56f",CWt="68a6465511f17709c2395bc2",SWt="68a6466f11f17709c2395d7c",qoe={prod:{student:_Wt,educator:CWt},test:{student:wWt,educator:SWt}},EWt="referral_code",t6e="externalUserId",MWt="sheerid_url",kWt="country",TWt="locale",NWt="verificationId",Koe="https://services.sheerid.com",jWt={en:"en-US",es:"es-ES",bn:"bn-IN",hi:"hi-IN"};function AWt(e){const t=e?new Intl.Locale(e).language:null;return t?jWt[t]||t:null}function Ipn(e){const{verificationType:t,userId:n,referralCode:r,hostname:s,countryCode:a,locale:i}=e,l=i?AWt(i):null,d=(!s||qbe(s)||Vbe(s)?qoe.prod:qoe.test)[t],m=new URL(`${bWt}/${d}/`);return m.searchParams.set(t6e,n),a&&m.searchParams.set(kWt,a),l&&m.searchParams.set(TWt,l),r&&m.searchParams.set(EWt,r),m}const IWt=e=>{if(e==="pro"||e==="max")return e},n6e=({confirmationRedirectsToHomepage:e}={})=>{const t=Ut(),n=t?.get("stripe_checkout"),r=t?.get("upsell"),s=t?.get("flow_type"),a=t?.get("upgrade_max"),i=t?.get("subscription_tier"),l=co(),{openModal:c}=wt(),{formatMessage:u}=Z(),{session:d}=Nt(),m=d?.user?.id,p=t?.get(t6e),h=t?.get(NWt),g=t?.get(MWt),y=f.useCallback(()=>{const E=s??"unknown",M=a==="success",k=IWt(i);c("subSuccessModal",{flowType:E,upgradeMax:M,subscriptionTier:k,confirmationRedirectsToHomepage:e})},[s,c,a,i,e]),x=f.useCallback(({isTasksAutomationsRenameEnabled:E})=>{Zet(!0),l({origin:De.TASKS_PAGE,pitchMessage:E?{title:u({defaultMessage:"Want to use Perplexity Automations?",id:"uujTvYgZRp"}),description:u({defaultMessage:"Upgrade to Pro to create and manage automations.",id:"9vQrVenMdj"})}:{title:u({defaultMessage:"Want to use Perplexity Tasks?",id:"u3CPeNV09q"}),description:u({defaultMessage:"Upgrade to Pro to create and manage tasks.",id:"oUsys+n/zQ"})}})},[u,l]),v=f.useCallback(E=>{c("referralSuccessModal",{monthsAwarded:E})},[c]),b=f.useCallback(async()=>{const E=await plt({verificationId:h,reason:"referral-success-modal"});v(E.months_awarded)},[h,v]),_=f.useCallback(()=>{const E=setTimeout(()=>{c("referralErrorModal",null)},1e3);return()=>clearTimeout(E)},[c]),w=f.useCallback(()=>{if(g)try{const E=new URL(g.toString());E.hostname===new URL(Koe).hostname&&E.protocol===new URL(Koe).protocol&&c("sheerIdRedirectModal",{sheerIdUrl:E.toString()})}catch{ne.warn("Invalid SheerId redirect URL",{sheerIdRedirectParam:g})}},[c,g]),{variation:C,loading:S}=Bp(!1);f.useEffect(()=>{(n==="success"||a==="success")&&y(),r==="tasks"&&(S||x({isTasksAutomationsRenameEnabled:C})),g&&w(),h&&(!!p&&!!h&&p===m?b():_())},[m,n,r,p,h,g,a,y,x,v,_,w,b,C,S])},r6e=R.memo(({dismiss:e})=>{const t=V_({origin:"mweb-splash"}),n=f.useMemo(()=>o.jsx(he,{id:"Wpt2mdD04V",defaultMessage:"Chat now"}),[]);return o.jsxs("div",{className:V("p-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:It,extraCSS:"text-foreground md:hover:text-quiet ",onClick:e})}),o.jsx(w5,{}),o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"aspect-square size-20 overflow-hidden rounded-full shadow-lg",children:o.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),o.jsxs("div",{className:V("flex flex-col items-center"),children:[o.jsx(F,{variant:"entry-title",color:"default",textCenter:!0,children:o.jsx(he,{id:"2WQt3MyLfa",defaultMessage:"Ask anything, anywhere"})}),o.jsx(F,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:o.jsx(he,{id:"ZTpOAItHHA",defaultMessage:"We're on WhatsApp"})}),o.jsx(F,{variant:"smallMono",color:"super",textCenter:!0,className:"mt-4",children:o.jsx(he,{id:"b0JEE9uTQq",defaultMessage:"+1 (833) 436-3285"})})]})]}),o.jsx("div",{className:"flex w-full flex-col items-center",children:o.jsx(pe,{variant:"inverted",size:"large",onClick:t,icon:ED,text:n})})]})});r6e.displayName="WhatsAppInterstitial";const RWt=1;function PWt({}){const[e,t]=f.useState(!1),{actions:n}=_n(),{trackEvent:r}=je(),{$t:s}=Z(),a=()=>{t(!1),n.setIsSplashPageDismissed(!0,RWt),r("mweb splash page dismissed",{}),document.head.querySelector("[name='theme-color']")?.remove()},{mwebUpsellWhatsApp:i,loadingMwebUpsellWhatsApp:l}=$_();f.useEffect(()=>{l||t(!0)},[l]);const c=f.useMemo(()=>({title_1:s({defaultMessage:"Start searching with AI",id:"xADWoMp8Ck"}),subtext_1:s({defaultMessage:"It's better in the app.",id:"E7ck+HTwLo"}),button_text:s({defaultMessage:"Download now",id:"OmsvLbYdpQ"}),button_link:"http://perplexity.ai/download"}),[s]);return o.jsx("div",{className:V("bg-base fixed inset-0 flex size-full flex-grow flex-col md:hidden"),children:o.jsx(hU,{open:e,children:o.jsx(gU,{children:o.jsxs(I3,{children:[o.jsxs(LF,{children:[o.jsx(R3,{children:s({defaultMessage:"Know it all",id:"F6NJO530sQ"})}),o.jsx(yU,{children:s({defaultMessage:"Search and discover with AI",id:"ydYv4/6Poi"})})]}),o.jsx("div",{className:V("bg-base fixed inset-0 flex size-full flex-grow flex-col","z-10"),children:i?o.jsx(r6e,{dismiss:a}):o.jsx(S1e,{dismiss:a,campaignData:c,translated:!0})})]})})})})}function OWt({}){return e6e()?o.jsx(PWt,{}):null}const LWt=({reason:e})=>{const t=xt(),n=Ut(),r=n?.get("stripe_checkout"),s=n?.get("is_enterprise")==="true",{trackEvent:a}=je(),i=r!=null,l=r==="success";f.useEffect(()=>{i&&s&&(async()=>{try{const[u,d]=await Promise.all([l?t.fetchQuery({queryKey:["refresh-org-subscription-status"],queryFn:()=>xye({reason:e})}):null,t.fetchQuery({queryKey:["user-org-data"],queryFn:()=>V3({reason:e})})]),m=d?.organization?.uuid;m!=null&&m!==void 0&&a("org payment portal returned",{stripeResult:r??"",orgUUID:m??"",source:n?.get("origin")??""})}catch(u){ne.log("Failed to refresh org subscription:",u)}})()},[])};var Qo={};const DWt=pt({threadAccessNotAllowed:{defaultMessage:"Cannot view this thread.",id:"PWzBFTUMYQ"},threadExpired:{defaultMessage:"This thread is expired and cannot be viewed.",id:"kxDY3MhDfI"},invalidThread:{defaultMessage:"This thread does not exist.",id:"mTtce3cuRp"},threadStreamError:{defaultMessage:"Unable to start thread.",id:"d3yfUXi5SD"},pageAccessNotAllowed:{defaultMessage:"Cannot view this page.",id:"2AsVl5rMny"},spaceAccessNotAllowed:{defaultMessage:"Cannot view this Space.",id:"kUZg0JvZI+"},subscriptionAlreadyActive:{defaultMessage:"Unable to apply discount code to an active subscription.",id:"o2MqqftZuL"},unableToGrantAccess:{defaultMessage:"Unable to make this thread shareable, ensure you are logged in as the owner of the thread.",id:"F8a+v/zyZO"},collectionAccessNotAllowed:{defaultMessage:"Cannot view this collection.",id:"miGPZEm/qm"},invalidCollection:{defaultMessage:"This collection does not exist.",id:"IKZz6s6MYd"}}),FWt=we(async()=>{const{CDN:e}=await Q(async()=>{const{CDN:t}=await import("./cdn-CgsX5lp-.js");return{CDN:t}},__vite__mapDeps([129,3,1,6,5,4]));return{default:e,critical:!0}}),s6e=R.memo(function(){const t="home-ask-input",[n,r,s]=F5({csrRedirect:!0}),{isMobileStyle:a}=Ce(),{currentOpenedModal:i}=wt(),l=Ut(),c=e6e(),d=f.useMemo(()=>l?.get("openSearchModeSelector"),[l])==="true",{mentionTypeaheadOptions:m,inputPlaceholder:p,onTriggerTypeahead:h}=xT({reason:t,isLazy:!0});return o.jsxs(o.Fragment,{children:[o.jsx(Cw,{...s,value:n,json:r,querySource:"home",autofocus:!a&&i===null&&!c&&!d,initialLayout:Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD?"compact":"expanded",minRows:Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD?1:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD,autosuggestionsEnabled:!Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD,dropdownPlacement:Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"top":"bottom",dropdownClassName:Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"shadow-[0_-30px_30px_oklch(var(--background-base-color))]":void 0,useLexical:!0,mentionTypeaheadOptions:m,placeholder:p??s.placeholder,onTriggerTypeahead:h,layoutKey:"home-ask-input",disableModeSelector:!!Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD}),o.jsx(FWt,{})]})});s6e.displayName="HomeAskInput";const a6e=R.memo(function(){const{$t:t}=Z(),{hasAccessToProFeatures:n}=Et(),r=lt(),{actions:{clearCurrentStreamId:s,clearCurrentThreadId:a}}=Ht(),{device:{isIOS:i},env:{isLocalhost:l}}=Lt(),{isMobileUserAgent:c,isMobileStyle:u}=Ce(),[d,m]=f.useState(null),{openModal:p}=wt(),{handleRequestAccess:h}=vWt(),{trackEvent:g}=je(),y=Ut(),{mwebUpsellWhatsApp:x,loadingMwebUpsellWhatsApp:v}=$_(),{handleAppDownloadClicked:b}=Ep("mobile-header"),_=V_({origin:"mobile-header"});yWt();const w=pn(),{openVisitorLoginUpsell:C}=gr({enabled:!0}),S=f.useRef(null),E=f.useMemo(()=>y?.get("error"),[y]),M=f.useMemo(()=>y?.get("id"),[y]),k=_n(),N=f.useRef(!1),P=f.useMemo(()=>!!(y?.get(Ic)||y?.get(Vqe)==="deep_research"),[y]);n6e({confirmationRedirectsToHomepage:!0}),LWt({reason:"search-inner-home"}),xWt(),f.useEffect(()=>{s(),a()},[s,a]),f.useEffect(()=>{N.current||k.welcomeBackGateImpressions>=XF||w||r||c||l||cD()&&uD()&&(C({origin:De.WELCOME_BACK,title:t({defaultMessage:"Welcome back!",id:"0MXX5Bf7Ca"}),description:t({defaultMessage:"Log in to continue your journey.",id:"lSkVbenSxm"}),sheetModalVariant:"centered-sheet"}),N.current=!0,k.actions.setWelcomeBackGateImpressions(k.welcomeBackGateImpressions+1))},[w,l,c,r,p,t,k.welcomeBackGateImpressions,k.actions,C]),f.useEffect(()=>{if(E){const j=E,T=M;j===Sm.ThreadAccessNotAllowed&&T?h(T):(ne.info("Error redirect",{errorQueryParam:E}),m(t(DWt[j]))),Gft()}},[E,h,M,p,t]);const L=f.useCallback(()=>{if(x){_();return}g("app download button clicked",{origin:"mobile-header"}),b()},[b,_,x,g]),O=f.useMemo(()=>({homepageTitle:t({defaultMessage:"What do you want to know?",id:"CMjGvpa5Fr"})}),[t]),A=f.useMemo(()=>x?ED:i?s_:SD,[x,i]);return o.jsxs(o.Fragment,{children:[o.jsx(W_,{childrenWidth:Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD?"none":"default",mobileHeader:!1,children:o.jsxs("div",{className:"erp-sidecar:px-md sm:px-md md:px-lg isolate mx-auto size-full sm:max-w-screen-md",children:[o.jsxs("div",{className:"relative flex h-full flex-col",children:[o.jsxs(H,{className:"py-md h-headerHeight flex items-center justify-between border-b md:hidden",children:[o.jsxs("div",{className:"gap-x-xs -ml-sm flex items-center",children:[o.jsx(wV,{}),o.jsx(za,{color:"mixed",isPro:n,size:"small"})]}),o.jsx("div",{className:"gap-x-sm flex items-center",children:c&&!v&&o.jsx(_c,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(pe,{size:"small",icon:A,text:t(x?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),pill:!0,variant:"primary",onClick:L})})})})]}),o.jsx(R$t,{initialValue:O,children:o.jsxs(H,{className:V("static w-full grow flex-col items-center justify-center md:mt-0 md:flex","z-10"),ref:S,children:[o.jsx("div",{className:"px-md relative flex size-full flex-col justify-center md:h-auto md:px-0",children:o.jsx(_Ae,{})}),o.jsxs(bc,{children:[o.jsx("div",{className:V("w-full",{"bottom-md absolute":!!Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD||u,"bottom-md mb-md animate-in fade-in fill-mode-both slide-in-from-bottom absolute delay-200 duration-300 ease-in-out":!!Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD}),children:o.jsx(s6e,{})}),c?null:o.jsx("div",{className:"relative w-full",children:o.jsx("div",{className:"mt-lg absolute w-full",children:o.jsx(JAe,{})})})]})]})})]}),o.jsx(Xd,{isVisible:d!=null,variant:"error",message:d,timeout:7})]})}),P&&o.jsx(xz,{}),!Qo.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(_c,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:o.jsx(OWt,{})})]})});a6e.displayName="Home";const UWt={activeStreamingThreads:[],entries:{},refreshState:()=>{},queuedThreadParams:[],enqueueThreadParams:()=>{},cancelQueuedThread:()=>{},recentlyBlockedEntries:[],recentlyCompletedEntries:[],handleStreamCompletion:()=>{},removeRecentlyBlockedEntry:()=>{},isDragging:!1,setIsDragging:()=>{}},i6e=Yt("MissionControlContext",UWt),BWt=({children:e})=>{const{session:t}=Nt(),n=f.useMemo(()=>{switch(t?.user.subscription_tier){case"max":return 10;case"pro":return 5;default:return 3}},[t?.user.subscription_tier]),r=ki(),{trackEvent:s}=je(),{submitQuery:a}=ta(),{data:i=[]}=dz("mission_control_active",void 0,void 0,!1,void 0),[l,c]=f.useState([]),[u,d]=f.useState([]),[m,p]=f.useState([]),[h,g]=f.useState(!1),y=O=>{O?.status===Xn.BLOCKED?d(A=>A.some(T=>T.message.backend_uuid===O.backend_uuid)?A:[...A,{message:O}]):O?.status===Xn.COMPLETED&&(d(A=>A.filter(j=>j.message.backend_uuid!==O.backend_uuid&&!i.some(T=>T.context_uuid===j.message.context_uuid))),p(A=>{const j=A.some(I=>I.message.backend_uuid===O.backend_uuid),T=A.filter(I=>!i.some(U=>U.context_uuid===I.message.context_uuid));return j?T:[...T,{message:O}]}))},x=O=>{d(A=>A.filter(j=>j.message.backend_uuid!==O))},[v,b]=f.useState(()=>r.getState()),_=f.useCallback(()=>{b(r.getState())},[r]);f.useEffect(()=>r.subscribe(A=>{b(A)}),[r]);const{activeStreams:w,streams:C,threads:S,entries:E}=v,M=f.useMemo(()=>JBt({activeStreams:w,streams:C,threads:S,entries:E}),[w,C,S,E]),k=f.useCallback(O=>{const A=O.newFrontendContextUUID||Ir();a({newFrontendContextUUID:A,rawQuery:O.query,attachments:O.attachments,promptSource:"user",querySource:"mission-control",mentions:O.mentions,collection:null,cometIsMissionControl:!0,maxAssistantEnabled:O.maxAssistantEnabled}),s("mission control query submitted",{frontendContextUUID:A,numberOfActiveThreads:M.length+1})},[a,s,M.length]);f.useEffect(()=>{if(M.length<n&&ya(l)){const O=l[0];c(A=>A.slice(1)),k(O)}},[M.length,k,l,n]);const N=f.useCallback(O=>{if(M.length<n)k(O);else{const A=Ir();c(j=>(s("mission control query enqueued",{frontendContextUUID:A,numberOfActiveThreads:M.length,numberOfQueuedThreads:j.length+1}),j.concat([{...O,newFrontendContextUUID:A}])))}},[M.length,k,s,n]),L={activeStreamingThreads:M,entries:E,refreshState:_,queuedThreadParams:l,enqueueThreadParams:N,cancelQueuedThread:O=>{c(A=>A.filter(j=>j.newFrontendContextUUID!==O))},recentlyBlockedEntries:u,recentlyCompletedEntries:m,handleStreamCompletion:y,removeRecentlyBlockedEntry:x,isDragging:h,setIsDragging:g};return o.jsx(i6e.Provider,{value:L,children:e})},jN=()=>{const e=f.useContext(i6e);if(!e)throw new Error("useUserInput must be used within UserInputProvider");return e},o6e=R.memo(({needsAttentionFilter:e=!1,onNeedsAttentionFilterChange:t,needsAttentionCount:n=0})=>{const{$t:r}=Z(),s=r({defaultMessage:"Background Assistants",id:"UmjY7aC43f"}),a=r({defaultMessage:"Monitor and collaborate with your active assistants",id:"AGtMyJq7fo"}),i=r({defaultMessage:"Unread",id:"jabB4CFkPh"});return o.jsxs("div",{className:"px-md md:px-lg gap-sm flex flex-col justify-between sm:flex-row md:flex md:items-center",children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx(le,{icon:Yue,size:"xl"}),o.jsxs("div",{children:[o.jsx(F,{variant:"page-title",children:s}),o.jsx(F,{variant:"base",color:"light",children:a})]})]}),t&&n>0&&o.jsx(Ji,{text:`${i} (${n})`,active:e,onChange:t})]})});o6e.displayName="MissionControlHeader";const VWt="mission-control-reconnect",$Wt=20,l6e=[{query:"Check Amazon wishlist book price, using my browser, add to cart if under $15"},{query:"Book 4.5+ star Austin restaurant for 2 using my browser at 7pm tomorrow"},{query:"Find weekend Airbnbs under $200/night using my browser within 3 hours drive"},{query:"Compare Tokyo flights next month using my browser, email me best options"}],c6e=f.memo(({placeholder:e,suggestions:t})=>{const{enqueueThreadParams:n}=jN(),[r,s,{onChange:a,onSubmit:i}]=GV({onSubmit:n}),l="mission-control-input",{setSuggestions:c,setBlankStateSuggestions:u}=to(),d=Xa(),[m,p]=f.useState(d),{mentionTypeaheadOptions:h,onTriggerTypeahead:g}=xT({reason:l,isLazy:!0});f.useEffect(()=>{u(t,ce.SEARCH)},[u,t]),f.useEffect(()=>{m!==d&&(p(d),r.length===0&&d===ce.SEARCH&&c(t))},[r,d,m,c,t]);const y=f.useCallback(()=>{r.length===0&&d===ce.SEARCH&&c(t)},[r,c,d,t]),x=f.useCallback(v=>{i({...v,maxAssistantEnabled:!0}),c([])},[i,c]);return o.jsx(Cw,{value:r,json:s,onChange:a,onSubmit:x,onClick:y,placeholder:e,disableInput:!1,className:"relative w-full transition-none",hasShadow:!0,autosuggestionsEnabled:!0,querySource:"mission-control",isMissionControl:!0,showFileUpload:!0,useLexical:!0,showSearchModeSelector:!1,showModelSelector:!1,mentionTypeaheadOptions:h,onTriggerTypeahead:g,layoutKey:"mission-control-input",initializeAttachmentsFromLastResult:!0,minRows:2})});c6e.displayName="MissionControlInput";const WWt=({suggestion:e,onClick:t})=>o.jsx(un,{shadow:!0,className:"aspect-square w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:()=>t(e),children:o.jsx(wn,{hoverOnly:!0,className:"size-full",children:o.jsx(H,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:o.jsxs("div",{className:"flex size-full flex-col p-3",children:[o.jsx(F,{color:"super",children:o.jsx(le,{icon:wi,size:"lg"})}),o.jsx(F,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance",children:e})]})})})}),u6e=()=>{const{$t:e}=Z(),{enqueueThreadParams:t}=jN(),n=r=>{t({query:r,maxAssistantEnabled:!0})};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"gap-sm grid w-full grid-cols-4",children:l6e.map((r,s)=>o.jsx(WWt,{suggestion:r.query,onClick:n},s))}),o.jsx(H,{className:"gap-md relative divide-y overflow-hidden rounded-xl border",variant:"raised",children:o.jsx("div",{className:"space-y-md flex w-full flex-col items-center justify-center p-10",children:o.jsxs("div",{className:"space-y-xs text-center",children:[o.jsx(F,{variant:"section-title",children:e({id:"aojEGT2eHI",defaultMessage:"No activity yet"})}),o.jsx(F,{variant:"small",color:"light",children:e({id:"524FDhfuRR",defaultMessage:"Ask your Assistant to handle any taskor several at once. Check here for updates or your input is needed."})})]})})})]})};u6e.displayName="MissionControlEmpty";const d6e=R.memo(({items:e})=>e.length===0?o.jsx(u6e,{}):o.jsx("div",{className:"flex flex-col divide-y",children:e.map(t=>t.item)}));d6e.displayName="MissionControlItemList";const AN=()=>{const{value:e}=$r({flag:"labs-side-canvas",defaultValue:!1});return e},HWt=e=>e?e.filter(t=>t.image_mode_block).flatMap(t=>t.image_mode_block.media_items??fe):fe,zWt=e=>e?e.filter(t=>t.video_mode_block).flatMap(t=>t.video_mode_block.media_items??fe):fe,GWt=e=>e?e.filter(t=>t.shopping_mode_block).flatMap(t=>t.shopping_mode_block.shopping_widgets??fe):fe,qWt=e=>e?e.filter(t=>t.jobs_mode_block).flatMap(t=>t.jobs_mode_block.jobs_blocks??fe):fe,KWt=e=>e?e.filter(t=>t.maps_mode_block).flatMap(t=>t.maps_mode_block.places??fe):fe,YWt=e=>{const t=(e??fe).filter(i=>i.sources_mode_block).flatMap(i=>i.sources_mode_block),n=t.at(-1),r=new Set,s=[];for(const i of t)for(const l of i.web_results)r.has(l.url)||(s.push(l),r.add(l.url));const a=n?.result_count??0;return{count:Math.max(s.length,a),progress:n?.progress,results:s,rows:n?.rows}},f6e=e=>e?e.filter(t=>t.assets_mode_block).flatMap(t=>t.assets_mode_block.assets??fe):fe,Aa={default:"d",shopping:"s",jobs:"j",hotels:"h",places:"p",images:"i",videos:"v",sources:"r",assets:"a",apps:"c",tasks:"t",search:"se",chat:"ch",study:"st"},Yoe=e=>Object.entries(Aa).find(([t,n])=>n===e)?.[0],IN=(e,t)=>{const r=new URLSearchParams(t?.toString()).get(e.toString());if(r)return typeof r=="string"?Yoe(r):Array.isArray(r)?Yoe(r[0]):void 0},QWt=e=>e==="default"||e==="sources",XWt=e=>Qr(e).with("default",()=>"default").with("shopping",()=>"wide").with("jobs",()=>"wide").with("hotels",()=>"full").with("places",()=>"full").with("images",()=>"full").with("videos",()=>"full").with("sources",()=>"default").with("assets",()=>"full").with("apps",()=>"full").with("tasks",()=>"default").with("search",()=>"default").otherwise(()=>"default"),bR=e=>({mode:e,width:XWt(e)}),ZWt=()=>{const e=Ut();return f.useCallback(t=>IN(t,e),[e])},JWt=()=>{const e=Ut(),t=Ft(),n=_t();return f.useCallback((r,s)=>{if(IN(r,e)===s)return;const a=new URLSearchParams(e?.toString());a.set(r.toString(),Aa[s]),n.replace(`${t}?${a.toString()}`)},[t,n,e])},eHt=({items:e,inFlight:t,inFlightLatest:n,rwToken:r,contentHasMounted:s,hasHeader:a=!0})=>{const{scrollContainerRef:i}=Za(),l=Ds(),c=f.useMemo(()=>{if(typeof window>"u")return 0;const b=a?getComputedStyle(document.documentElement).getPropertyValue("--header-height"):"0";return parseInt(b)},[a]),u=f.useRef(!0),d=f.useMemo(()=>!r&&e.every(b=>!vn.isStatusPending(b)),[e,r]),m=f.useMemo(()=>e.some(b=>vn.isStatusPending(b)),[e]),p=f.useRef({}),h=f.useRef({});f.useEffect(()=>()=>{p.current={},h.current={}},[]);const g=f.useCallback((b,{smooth:_=!0,anchor:w=!1}={smooth:!0,anchor:!1})=>{const C=typeof b=="number"?p.current?.[b]?.current:h.current?.[b]?.current;if(C){const S=C.getBoundingClientRect().top,E=i?.current?.scrollTop??0,M=S+E-c;if(M+E>document.body.scrollHeight&&w){const k=i?.current?.scrollHeight??0,N=i?.current?.clientHeight??0,P=k-N-.1;requestAnimationFrame(()=>i?.current?.scrollTo({top:P,behavior:_?"smooth":"auto"}))}else i?.current?.scrollTo({top:M,behavior:_?"smooth":"auto"})}},[i,c]),y=f.useCallback(()=>{g(e.length-1)},[g,e.length]);f.useEffect(()=>{const b={...p.current},_={};e.forEach((C,S)=>{const E=S,M=C.backend_uuid;if(M)if(!b[E]||!b[E].current){const k=R.createRef();b[E]=k,_[M]=k}else _[M]=b[E]});const w=e.length;Object.keys(b).forEach(C=>{Number(C)>=w&&delete b[Number(C)]}),h.current=_,p.current=b},[e.length,m]);const x=e.at(-1)?.query_source==="edit";f.useEffect(()=>{if(e.length<=1||!l||!s)return;const b=window.location.hash;if(b&&!t&&u.current){try{const _=b.slice(1);_.length>3?g(_,{smooth:!1}):g(Number(_),{smooth:!1})}catch(_){ne.error(_)}return}n&&!x&&g(e.length-1,{anchor:!0})},[t,n,d,e.length,l,g,s,x]);const v=p.current;return f.useMemo(()=>({refs:v,scrollToLatestItem:y,scrollToListItem:g}),[v,y,g])},m6e=Yt("ScrollToEntityContext",{refs:{},scrollToListItem:()=>{},setContentHasMounted:()=>{},contentHasMounted:!1}),p6e=R.memo(({children:e})=>{const t=Oo(),{results:n=[],inFlight:r,inFlightLatest:s}=Ht(),[a,i]=f.useState(!1),{isMobileStyle:l}=Ce(),c=f.useMemo(()=>G_e(n).map(p=>p.length?p[0]:void 0).filter(p=>p!==void 0),[n]),{refs:u,scrollToListItem:d}=eHt({items:c,inFlight:r,inFlightLatest:s,rwToken:t,contentHasMounted:a,hasHeader:l});return o.jsx(m6e.Provider,{value:{scrollToListItem:d,refs:u,setContentHasMounted:i,contentHasMounted:a},children:e})});p6e.displayName="ScrollToThreadEntryProvider";const RN=()=>{const e=f.useContext(m6e);if(!e)throw new Error("useScrollToEntity must be used within ScrollToEntityContext");return e},h6e=Yt("SearchPageContext",{activeMode:"default",setActiveMode:()=>{},activeEntryIdx:0,pinnedEntryIdx:-1,viewTitle:null,setViewTitle:()=>{}}),Kw=()=>{const e=f.useContext(h6e);if(!e)throw new Error("useSearchPage must be used within an SearchPageProvider");return e},g6e=R.memo(({children:e})=>{const t=ZWt(),[n,r]=f.useState(t(0)??"default"),[s,a]=f.useState(0),[i,l]=f.useState(-1),[c,u]=f.useState(null),{refs:d}=RN(),m=_t(),{scrollContainerRef:p}=Za(),h=f.useCallback(()=>{if(Object.keys(d).length===0||!p.current)return;const g=p.current.clientHeight,y=p.current.scrollTop;if(y===0){a(0),l(-1);return}const x=y+g/2;let v=s,b=-1,_=1/0;Object.entries(d).forEach(([w,C])=>{if(C.current){const S=C.current.getBoundingClientRect(),E=S.top+y+S.height/2,M=Math.abs(E-x);S.top<-100&&S.bottom>100&&(b=parseInt(w)),M<_&&(_=M,v=parseInt(w))}}),a(v),l(b)},[d,a,p,s,l]);return f.useEffect(()=>{if(!p?.current)return;const g=p.current,y=Uy(h,50,{leading:!1,trailing:!0});return g.addEventListener("scroll",y),h(),()=>{g.removeEventListener("scroll",y),y.cancel()}},[h,p]),f.useEffect(()=>{u(null)},[m]),o.jsx(h6e.Provider,{value:{activeMode:n,setActiveMode:r,activeEntryIdx:s,pinnedEntryIdx:i,viewTitle:c,setViewTitle:u},children:e})});g6e.displayName="SearchPageProvider";const tHt=({idx:e,searchParams:t,blocks:n})=>Po()((r,s)=>({answerModeActionList:[],currentModeData:bR(IN(e,t)??"default"),...x6e(n),actions:{updateCurrentMode:a=>{const i=s(),l=i.defaultModeOverride&&a==="default"?i.defaultModeOverride:a;r({currentModeData:bR(l)})},setOverrideMode:a=>{const i=a;r({defaultModeOverride:i,currentModeData:bR(i??"default")})}}})),{Context:nHt,useTrackedState:rHt}=C_("AnswerModeContext"),y6e=Yt("AnswerModeApiContext",void 0),sHt=({children:e,scrollToListItem:t})=>{const n=Ut(),{setActiveMode:r,activeEntryIdx:s}=Kw(),{idx:a,result:{backend_uuid:i,context_uuid:l}}=ln(),{actions:{updateCurrentMode:c,setOverrideMode:u},currentModeData:d}=Nf(),m=JWt(),{trackEvent:p}=je(),h=f.useCallback(y=>{y!==d.mode&&(m(a,y),c(y),s===a&&r(y),requestAnimationFrame(()=>{t(a,{smooth:!0})}),p("answer mode tab selected",{answerMode:y,entryUUID:i,contextUUID:l}))},[d.mode,m,a,c,s,p,i,l,r,t]);f.useEffect(()=>{s===a&&r(d.mode)},[s,a,r,d.mode]),f.useEffect(()=>{const y=IN(a,n);y&&h(y)},[a,h,n]);const g=f.useMemo(()=>({updateCurrentMode:x=>{h(x)},setOverrideMode:u}),[h,u]);return o.jsx(y6e.Provider,{value:g,children:e})};function x6e(e){const t=HWt(e),n=zWt(e),r=GWt(e),s=qWt(e),a=KWt(e),i=YWt(e),l=f6e(e);return{images:t,videos:n,shopping:r,jobs:s,places:a,sources:i,assets:l}}const Sz=R.memo(({children:e,scrollToListItem:t})=>{const{$t:n}=Z(),r=Ut(),{idx:s,searchMode:a,hasAnswer:i,researchPlan:l,reasoningPlan:c,showAgentWorkflow:u,result:{answer_modes:d,blocks:m,attachments:p,read_write_token:h},isLastResult:g,hasSources:y}=ln(),x=AN(),v=pn(),[b]=f.useState(()=>tHt({idx:s,searchParams:r,blocks:m}));f.useEffect(()=>{m||ne.error("No blocks found for entry",m)},[m]),f.useEffect(()=>{const E=b.getState(),{images:M,videos:k,shopping:N,jobs:P,places:L,sources:O,assets:A}=x6e(m),j=ys(E.images,M)?E.images:M,T=ys(E.videos,k)?E.videos:k,I=ys(E.shopping,N)?E.shopping:N,U=ys(E.jobs,P)?E.jobs:P,B=ys(E.places,L)?E.places:L,D=ys(E.sources,O)?E.sources:O,W=ys(E.assets,A)?E.assets:A;(j!==E.images||T!==E.videos||I!==E.shopping||U!==E.jobs||B!==E.places||D!==E.sources||W!==E.assets)&&b.setState({images:j,videos:T,shopping:I,jobs:U,places:B,sources:D,assets:W})},[m,b]);const _=b.getState().sources,w=f.useMemo(()=>({[yn.SHOPPING]:{text:n({defaultMessage:"Shopping",id:"my1MLnIMoS"}),show:!0,icon:MDe,id:Aa.shopping,mode:"shopping",testId:Ta.ANSWER_MODE_TABS.SHOPPING},[yn.JOBS]:{text:n({defaultMessage:"Jobs",id:"9AcATFXaoo"}),show:!0,icon:EDe,id:Aa.jobs,mode:"jobs",testId:Ta.ANSWER_MODE_TABS.JOBS},[yn.HOTELS]:{text:n({defaultMessage:"Hotels",id:"+dqK4hw0if"}),show:!0,icon:io,id:Aa.hotels,mode:"hotels",testId:Ta.ANSWER_MODE_TABS.HOTELS},[yn.MAPS]:{text:n({defaultMessage:"Places",id:"QQInFSbbwr"}),show:!0,icon:$k,id:Aa.places,mode:"places",testId:Ta.ANSWER_MODE_TABS.PLACES},[yn.IMAGE]:{text:n({defaultMessage:"Images",id:"Fip4H8CuWD"}),show:!0,icon:df,id:Aa.images,mode:"images",testId:Ta.ANSWER_MODE_TABS.IMAGES},[yn.VIDEO]:{text:n({defaultMessage:"Videos",id:"4XfMuxy3FO"}),show:!0,icon:Jue,id:Aa.videos,mode:"videos",testId:Ta.ANSWER_MODE_TABS.VIDEOS},[yn.SOURCES]:{text:n({defaultMessage:"Sources",id:"fhwTpAcBLC"}),show:!0,icon:Lm,id:Aa.sources,mode:"sources",testId:Ta.ANSWER_MODE_TABS.SOURCES,count:_.count||p?.length||0,disabled:_.progress!==Qc.DONE&&!p?.length},[yn.ASSETS]:{text:n({defaultMessage:"Assets",id:"d1uESJO+TH"}),show:!0,icon:SDe,id:Aa.assets,mode:"assets",testId:Ta.ANSWER_MODE_TABS.ASSETS},[yn.APPS]:{text:n({defaultMessage:"App",id:"2rUVsUf259"}),show:!x,icon:OD,id:Aa.apps,mode:"apps",testId:Ta.ANSWER_MODE_TABS.APPS},[yn.TASKS]:{text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),show:!0,icon:aq,id:Aa.tasks,mode:"tasks",testId:Ta.ANSWER_MODE_TABS.TASKS},[yn.SEARCH]:{text:n({defaultMessage:"Search",id:"xmcVZ0BU63"}),show:!!h&&g&&!y,icon:Hs,id:Aa.search,mode:"search",testId:Ta.ANSWER_MODE_TABS.SEARCH},[yn.CHAT]:{text:n({defaultMessage:"Chat",id:"WTrOy36sdu"}),show:!!h&&g,icon:CD,id:Aa.chat,mode:"chat",testId:Ta.ANSWER_MODE_TABS.CHAT}}),[n,p?.length,_.count,_.progress,h,g,y,x]),C=f.useMemo(()=>n(v?{defaultMessage:"Assistant",id:"wSAvhubuX6"}:{defaultMessage:"Answer",id:"DwjT1HpUgU"}),[n,v]),S=f.useMemo(()=>{switch(a){case ce.SEARCH:return v?wi:void 0;case ce.STUDIO:case ce.RESEARCH:return;default:return Yg[a]}},[v,a]);return f.useEffect(()=>{const E=d?.map(L=>Qr(L.answer_mode_type).with(yn.SHOPPING,()=>w[yn.SHOPPING]).with(yn.JOBS,()=>w[yn.JOBS]).with(yn.HOTELS,()=>w[yn.HOTELS]).with(yn.MAPS,()=>w[yn.MAPS]).with(yn.IMAGE,()=>w[yn.IMAGE]).with(yn.VIDEO,()=>w[yn.VIDEO]).with(yn.SOURCES,()=>w[yn.SOURCES]).with(yn.ASSETS,()=>w[yn.ASSETS]).with(yn.APPS,()=>w[yn.APPS]).with(yn.TASKS,()=>w[yn.TASKS]).with(yn.SEARCH,()=>w[yn.SEARCH]).with(yn.CHAT,()=>w[yn.CHAT]).otherwise(O=>(ne.warn("Unsupported Answer Mode",{mode:O.valueOf()}),null))).filter(L=>!!L),M=[{text:a===ce.SEARCH?C:n(gs[a].name),icon:S,id:"d",mode:"default",testId:Ta.ANSWER_MODE_TABS.ANSWER(a)},...(E??[]).filter(L=>(L.mode!=="tasks"||i)&&(L.show===void 0||L.show===!0))],k=M.some(L=>L.mode==="tasks"),N=(l?.goals?.length??0)+(c?.goals?.length?c.goals.length-1:0);!k&&N>0&&!u&&i&&M.push({text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),icon:aq,id:Aa.tasks,mode:"tasks",testId:Ta.ANSWER_MODE_TABS.TASKS});const P=b.getState();ys(P.answerModeActionList,M)||b.setState({answerModeActionList:M})},[n,d,i,w,c?.goals?.length,l?.goals?.length,a,v,C,S,u,b]),o.jsx(nHt.Provider,{value:b,children:o.jsx(sHt,{scrollToListItem:t,children:e})})});Sz.displayName="AnswerModeProvider";const Nf=rHt,PN=()=>{const e=f.useContext(y6e);if(!e)throw new Error("useAnswerModeApi must be used within an AnswerModeProvider");return e},vv=R.memo(({title:e,footer:t,onClick:n,state:r,isSelected:s=!1,entryUUID:a,invalidateThreadsQuery:i,queuedId:l,onCancelQueued:c,firstAnswer:u,customIcon:d,customDescription:m,customActions:p})=>{const h=f.useMemo(()=>{if(m)return m;switch(r){case"queued":return"Queued";case"in-progress":return"In progress";case"action-required":return"Action required";case"completed-unread":case"completed-read":{if(!u)return"";const x=bxe(u);return x||""}default:return""}},[r,m,u]),g=f.useMemo(()=>{if(d)return d;switch(r){case"queued":return o.jsx(Zr,{size:16,className:"text-quietest"});case"in-progress":return o.jsx(Zr,{size:16,className:"text-super"});case"action-required":return o.jsx(kDe,{size:20,className:"text-attention"});case"completed-unread":return o.jsx(Ha,{size:20,className:"text-positive"});case"completed-read":return o.jsx(AD,{size:20,className:"text-quietest"});default:return null}},[r,d]),y=f.useMemo(()=>{if(p)return p;switch(r){case"queued":return!l||!c?[]:[{icon:b1,label:"Cancel",onClick:x=>{x.stopPropagation(),c(l)}}];case"in-progress":case"action-required":return a?[{icon:b1,label:"Stop",onClick:async x=>{x.stopPropagation();try{await Au({entryUUID:a,reason:"mission-control-terminate"}),i?.()}catch(v){ne.error("Failed to terminate entry:",v)}}}]:[];default:return[]}},[r,a,i,p,l,c]);return o.jsx(H,{onClick:n,className:`gap-md group relative cursor-pointer overflow-hidden transition-all duration-300 ease-in-out ${s?"ring-subtler !bg-raised -mx-md px-md my-4 !border-transparent shadow-lg ring-1 first:mt-0 last:mb-0 md:rounded-2xl":""}`,children:o.jsxs("div",{className:"gap-md py-md group relative flex",children:[g&&o.jsx("div",{className:"mt-[13px] flex size-5 flex-shrink-0 items-center justify-center",children:g}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"gap-md flex",children:[o.jsxs("div",{className:"space-y-2xs flex-1",children:[o.jsx(F,{variant:"baseSemi",className:"group-hover:text-super line-clamp-2 overflow-hidden text-pretty",children:e}),o.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${s&&(r==="completed-unread"||r==="completed-read")?"max-h-20":"max-h-5"}`,children:o.jsx(F,{variant:"small",color:"light",className:`${s&&(r==="completed-unread"||r==="completed-read")?"line-clamp-4":"line-clamp-1"}`,children:h||"Answer skipped."})})]}),y.length>0&&o.jsx("div",{className:"gap-xs flex items-center",children:y.map((x,v)=>o.jsx(pe,{variant:"common",size:"small",pill:!0,icon:x.icon,onClick:b=>{b.stopPropagation(),x.onClick(b)},toolTip:x.label,tooltipLayout:"top"},v))})]}),o.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${t&&s?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:o.jsx("div",{className:"overflow-hidden",children:o.jsx("div",{onClick:x=>x.stopPropagation(),className:"mt-md",children:t})})})]})]})})});vv.displayName="MissionControlItem";const Qoe="/static/images/agent-favicons/gmail.svg",aHt="/static/images/data-connectors/microsoft/outlook-avatar.svg",Ag={click:{message:ee({defaultMessage:"Clicking",id:"n43/KMHgLD"}),icon:ODe},paused:{message:ee({defaultMessage:"Paused",id:"C2iTEHtK//"}),icon:PDe},fill:{message:ee({defaultMessage:"Filling out a form",id:"5i0X5DesMM"}),icon:RDe},search:{message:ee({defaultMessage:"Searching",id:"IfE0if3ytt"}),icon:Hs},navigate:{message:ee({defaultMessage:"Navigating",id:"3O6LMNhb0M"}),icon:dde},press_key:{message:ee({defaultMessage:"Pressing key",id:"R6bmgzv6Xs"}),icon:u2},scroll_page:{message:ee({defaultMessage:"Scrolling",id:"/UUUqdefcb"}),icon:IDe},reasoning:{message:ee({defaultMessage:"Reasoning",id:"Aw3qRf7hyO"}),icon:sc},considering_clarification:{message:ee({defaultMessage:"Considering your clarification",id:"xvwGmM2LU3"}),icon:sc},working:{message:ee({defaultMessage:"Working",id:"gAR0atqpRn"}),icon:ADe},finished:{message:ee({defaultMessage:"Done",id:"JXdbo8Vnlw"}),icon:Ar},reading:{message:ee({defaultMessage:"Reading",id:"MOK/yKIpYX"}),icon:Fi},reading_browser:{message:ee({defaultMessage:"Reviewing your tabs and browser history",id:"P+tFAY9IRT"}),icon:Fi},getting_source:{message:ee({defaultMessage:"Getting source",id:"Z1eFpRpq7v"}),icon:Fi},getting_sources:{message:ee({defaultMessage:"Getting sources",id:"Jv/OJ6AjyO"}),icon:Fi},reviewing_source:{message:ee({defaultMessage:"Reviewing source",id:"ymFEF2YHhs"}),icon:Fi},reviewing_sources:{message:ee({defaultMessage:"Reviewing sources",id:"/NZJDBzKok"}),icon:Fi},reviewing_memory:{message:ee({defaultMessage:"Reviewing memory",id:"piUVOodSmM"}),icon:Fi},reviewing_memories:{message:ee({defaultMessage:"Reviewing memories",id:"VgUfUXIIey"}),icon:Fi},reviewing_conversation_history:{message:ee({defaultMessage:"Reviewing past queries",id:"RfG7EQT3IO"}),icon:Fi},reading_tabs:{message:ee({defaultMessage:"Reviewing your tabs",id:"cE3TzCT3eK"}),icon:Fi},building_app:{message:ee({defaultMessage:"Building application",id:"qK6gEQyvil"}),icon:iq},creating_chart:{message:ee({defaultMessage:"Creating chart",id:"yc5YxtS5VS"}),icon:_P},creating_pdf:{message:ee({defaultMessage:"Creating PDF",id:"NcD2ia4Hrn"}),icon:Dm},creating_docx:{message:ee({defaultMessage:"Creating DOCX",id:"GIUtasyzkA"}),icon:zk},creating_xlsx:{message:ee({defaultMessage:"Creating XLSX",id:"ZyT2MB8/KD"}),icon:t_},thinking:{message:ee({defaultMessage:"Thinking",id:"AHQWDTo4+e"}),icon:sc},reading_history:{message:ee({defaultMessage:"Reviewing your browser history",id:"7cZkJ7qeNW"}),icon:t4},searching_browser:{message:ee({defaultMessage:"Searching your browser",id:"i91D1hXua6"}),icon:t4},searching_open_tabs:{message:ee({defaultMessage:"Searching open tabs",id:"xHbSQOjdLq"}),icon:jDe},opening_tab:{message:ee({defaultMessage:"Opening tab",id:"ySnoI+lduZ"}),icon:CP},closing_tabs:{message:ee({defaultMessage:"Closing your tabs",id:"2KnXtfjRKV"}),icon:wP},searching_gmail:{message:ee({defaultMessage:"Searching your email",id:"X1ami4cm1T"}),icon:n4},emailing:{message:ee({defaultMessage:"Emailing",id:"QRygokyD+u"}),icon:n4},searching_calendar:{message:ee({defaultMessage:"Searching your calendar",id:"nH9G8cL0Ys"}),icon:r4},conclusion:{message:ee({defaultMessage:"Wrapping up",id:"DN3hjkyzeT"}),icon:null},generating_images:{message:ee({defaultMessage:"Generating",id:"NAZfqr2apb"}),icon:pde},presenting_images:{message:ee({defaultMessage:"Presenting",id:"BlxYo7+tmK"}),icon:kue},grouping_tabs:{message:ee({defaultMessage:"Grouping tabs",id:"Fg6l7eg2HV"}),icon:NDe},ungrouping_tabs:{message:ee({defaultMessage:"Ungrouping tab groups",id:"dbpFCBu2NQ"}),icon:TDe},searching_tab_groups:{message:ee({defaultMessage:"Searching tab groups",id:"V+4/ioYMPd"}),icon:Hs},getting_freebusy:{message:ee({defaultMessage:"Checking availability",id:"ZamRNp2QgI"}),icon:r4},getting_user_info:{message:ee({defaultMessage:"Searching your contacts",id:"gPpZJKZdnL"}),icon:rm},found_contacts:{message:ee({defaultMessage:"Found contacts",id:"2zmZgbYnmk"}),icon:rm},no_contacts_found:{message:ee({defaultMessage:"No contacts found",id:"JhY7bAH15Y"}),icon:rm},selecting_contacts:{message:ee({defaultMessage:"Selecting contacts",id:"OQhQc1Jomc"}),icon:rm},getting_contact_details:{message:ee({defaultMessage:"Getting contact details",id:"p391mWkGfv"}),icon:rm},scheduling:{message:ee({defaultMessage:"Scheduling",id:"5lQx5rgTEW"}),icon:oq},scheduled:{message:ee({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:oq},reading_events:{message:ee({defaultMessage:"Getting event details",id:"0QgD+ftRet"}),icon:r4},reading_emails:{message:ee({defaultMessage:"Reviewing emails",id:"f/yAuwo+Vl"}),icon:n4},OPEN_TAB:{message:ee({defaultMessage:"Open tabs",id:"KO2pxljl8b"}),icon:CP},RECENTLY_CLOSED_TAB:{message:ee({defaultMessage:"Recently closed tabs",id:"GrcBtKIzPh"}),icon:wP},BROWSER_HISTORY:{message:ee({defaultMessage:"Browser history",id:"DtBSny6kw5"}),icon:t4},MCP_TOOL:{message:ee({defaultMessage:"Connecting to {appName}",id:"w+iLkzBJV0"}),icon:iq},searching_flights:{message:ee({defaultMessage:"Searching flights",id:"9+i0zI94jg"}),icon:Hs},reviewing_booking_options:{message:ee({defaultMessage:"Reviewing options",id:"hEF13crkAK"}),icon:Hs},looking_for_booking_options:{message:ee({defaultMessage:"Looking for booking options",id:"KIKXHtHJvz"}),icon:Hs},redirecting_to_booking:{message:ee({defaultMessage:"Redirecting to booking site",id:"y/a1lYMfGW"}),icon:Hs},setting_up_price_alert_automation:{message:ee({defaultMessage:"Setting up PriceAlertAutomation",id:"+7IqVk27BT"}),icon:_P}},jy={initial:{opacity:0,position:"absolute",width:"100%"},animate:{opacity:1,position:"relative",transition:{opacity:{duration:.3}}},exit:{opacity:0,position:"absolute",width:"100%",transition:{opacity:{duration:.3}}}},gm=R.memo(e=>{const{isFinished:t,className:n,count:r,showAnimation:s,isPaused:a,...i}=e,l=Z(),c=e.action?Ag[e.action]?l.formatMessage(Ag[e.action].message):"":e.title,u=e.action?Ag[e.action]?.icon:e.icon,d=t||a;return o.jsx(Je,{mode:"popLayout",children:o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:s?0:.2,ease:"easeInOut"},className:V("gap-sm group flex cursor-pointer flex-col",n),children:o.jsxs(F,{variant:"tinyRegular",color:t?"light":"super",className:"flex items-center gap-1 py-1.5",children:[u&&o.jsx(le,{icon:u,size:"2xs",className:"-mt-px opacity-80"}),o.jsxs(wn,{variant:"super",active:!d,as:"span",speed:"slow",children:[c,r!==void 0&&r>0&&`  ${r}`]})]})},i.key)})});gm.displayName="StepActionLabel";const Ws=R.memo(({icon:e,text:t,favicon:n,className:r,iconClassName:s,url:a})=>{const i=o.jsx(H,{variant:"subtler",className:V("py-xs inline-block rounded-lg px-2",{"hover:bg-super group cursor-pointer":a},r),children:o.jsxs(F,{variant:"tinyMono",className:V("gap-x-xs flex pb-px !text-[0.68rem] leading-4",{"group-hover:text-inverse dark:group-hover:text-inverse":a}),children:[(n||e)&&o.jsx("div",{className:"h-4 pt-px",children:n?o.jsx("img",{src:n,alt:t,className:"size-[14px]"}):e?o.jsx(le,{icon:e,size:"xs",className:s}):null}),o.jsx("p",{className:"px-two",children:t})]})});return a?o.jsx(Ye,{href:a,target:"_blank",rel:"noopener",children:i}):i});Ws.displayName="BotLabel";const iHt=()=>{const e=xt(),t=$3(),n=f.useMemo(()=>e.getQueryData(t),[e,t]),{connectors:r}=Sa({reason:"useHasUnauthenticatedGmailGcal"});return f.useMemo(()=>{const s=!!r?.connectors.find(a=>a.name==="gcal"&&(!a.connected||a.has_required_scopes===!1));return!(!n||!s)},[n,r])},v6e=()=>{const{session:e}=Nt(),{firstResult:{author_username:t}={},inFlight:n}=Ht();return e?.user?.username===t||n};var oHt={};const lHt=({position:e,inFlight:t,isLastResult:n,upsellInformation:r,backendUuid:s})=>{const[a,i]=f.useState(!1),[l,c]=f.useState(null),u=pn(),d=oHt.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":u?"search_results_page":void 0,{trackEventOnce:m,trackEvent:p}=je(),h=v6e(),g=iHt(),{subscriptionTier:y}=Et(),{isDefaultBrowser:x}=m2e(),v=f.useMemo(()=>{if(a||!r||e==="top"&&r.app_location!=="IN_THREAD"||e==="bottom"&&r.app_location!=="IN_THREAD_BOTTOM"||e==="input"&&r.app_location!=="IN_THREAD_INPUT"||e==="connector_auth"&&r.app_location!=="UPSELL_APP_LOCATION_UNSPECIFIED")return!1;const w=s;return!(!w||w===l||!n&&(!r.is_persistent||e==="input"||e==="router_steps"||e==="connector_auth")||e==="bottom"&&t||r.is_persistent&&(!h||r.name==="gmail_gcal_connector"&&!g||r.name==="comet_set_default_browser"&&x!==!1))},[a,r,e,s,l,n,t,h,g,x]);f.useEffect(()=>{if(!v||!r)return;const w=s;c(w),i(!0),m("thread upsell banner viewed",{entryUUID:w,upsellType:r.upsell_type,upsellName:r.name,cometSurface:d,subscriptionTier:y})},[s,v,m,r,d,y]);const b=f.useCallback(({hideBanner:w=!0}={})=>{w&&i(!1);const C=r,S=s;if(S&&C?.upsell_type){p("thread upsell banner dismissed",{entryUUID:S,upsellType:C.upsell_type,upsellName:C.name,cometSurface:d,subscriptionTier:y});const E=C.cta==="SHORTCUT_MODAL"?C.cta_information?.recommended_shortcut?.name:void 0;d5(C.name,E)}},[s,p,r,d,y]),_=f.useCallback(()=>{i(!1)},[]);return f.useMemo(()=>({show:a,handleDismiss:b,handleHide:_}),[b,a,_])},cHt=({icon_reference:e,icon_image:t})=>{if(t)return o.jsx(H,{variant:"subtle",className:"p-xs rounded-md border",children:o.jsx("img",{src:t.url,alt:t.alt,width:40,height:40,className:"rounded"})});const n={pro:o.jsx(le,{icon:su.pro,size:"lg"}),collection:o.jsx(le,{icon:su.collection,size:"lg"}),gmail_gcal:o.jsx(H,{variant:"subtle",className:"p-xs rounded-md border",children:o.jsx("img",{src:w3,alt:"Gmail Gcal Upsell Banner",width:40,height:40})}),research:o.jsx(le,{icon:su.research,size:"lg"}),labs:o.jsx(le,{icon:su.labs,size:"lg"}),max:o.jsx(VB,{width:"w-8"}),shortcut:o.jsx(le,{icon:Dk,size:"lg"}),comet_login:o.jsx(H,{variant:"super",className:"p-xs rounded-md border",children:o.jsx(F,{color:"defaultInverted",children:o.jsx(wi,{size:24})})})};return e==="comet_download"?null:n[e||""]||o.jsx(le,{icon:su.pro,size:"lg"})},zx=R.memo(({position:e,upsellInformation:t,inFlight:n,isLastResult:r,backendUuid:s,animateExpand:a=!0,hideOnAccept:i=!0,hideOnReject:l=!0,isSkipping:c=!1,onAccept:u,onReject:d,className:m})=>{const{$t:p}=Z(),{show:h,handleDismiss:g,handleHide:y}=lHt({position:e,inFlight:n,isLastResult:r,upsellInformation:t,backendUuid:s}),x=f.useCallback(()=>{g({hideBanner:l}),d?.()},[g,d,l]),v=f.useCallback(()=>{g({hideBanner:i}),u?.()},[g,u,i]),_=Ut()?.get("handle_upsell");f.useEffect(()=>{if(h&&_){const E=new URLSearchParams(window.location.search);E.delete("handle_upsell");const M=Object.fromEntries(E.entries());yx(M),v()}},[v,h,_]);const w=lt();if(!h||!t||w&&t.upsell_type===o8.LOGIN)return null;const C=cHt(t),S=e==="router_steps"||e==="connector_auth";return o.jsx(Je,{children:o.jsx(ve.div,{initial:a?{height:0}:{opacity:0},animate:a?{height:"auto"}:{opacity:1},exit:a?{height:0}:{opacity:0},transition:{duration:.2},children:o.jsx("div",{className:"bg-base",children:o.jsxs(H,{variant:t.background_super?"superLight":"subtler",className:V("gap-sm mb-md p-md md:gap-md relative flex w-full flex-col items-center rounded-md md:flex-row",{"rounded-xl shadow-xl ring-1":e==="input"||e==="router_steps"},m),children:[o.jsx("div",{className:"right-md top-md absolute z-10 md:hidden",children:o.jsx(Te,{icon:It,size:"small",onClick:x,noPadding:!0})}),C&&o.jsx(F,{color:"default",className:"mr-sm hidden md:block",children:C}),o.jsxs("div",{className:"md:mr-sm relative flex w-full flex-col",children:[o.jsx(F,{variant:"smallBold",className:V("mr-lg md:mr-0",{"line-clamp-2":t.upsell_type===o8.CREATE_SHORTCUT}),children:t.title}),o.jsx(F,{variant:"small",color:"light",className:"mb-0 font-normal leading-[1.3]",children:t.description})]}),o.jsxs("div",{className:"md:gap-sm flex size-full items-end justify-end md:w-auto md:flex-row md:items-center",children:[S&&o.jsx(Te,{text:p({defaultMessage:"Skip",id:"/4tOwTiCH6"}),size:"small",onClick:x,variant:"common",isLoading:c}),t.button_text&&o.jsx(f5,{upsellInformation:t,inFlight:n,position:e,hideUpsell:y}),!S&&o.jsx("div",{className:"mt-sm hidden md:block",children:o.jsx(Te,{icon:It,size:"small",onClick:x,noPadding:!0})})]})]})})})})});zx.displayName="ThreadUpsell";const uHt=()=>{const{$t:e}=Z();return f.useMemo(()=>({success:e({defaultMessage:"Success",id:"xrKHS6mnOh"}),couldNotFinish:e({defaultMessage:"Could not finish",id:"Sz8oY2B0GK"}),allEmail:e({defaultMessage:"All Emails",id:"xe3SFk3aV+"}),allTabs:e({defaultMessage:"All tabs",id:"vYBCIf+wNz"}),failedClosedTabs:e({defaultMessage:"Could not close tabs",id:"hjoQ7gU34V"}),results:e({defaultMessage:"Results",id:"yaMHMBMsQ7"}),continue:e({defaultMessage:"Continue",id:"acrOozm08x"}),skip:e({defaultMessage:"Skip",id:"/4tOwTiCH6"}),foundInfo:e({defaultMessage:"Details retrieved",id:"YCMMMHEIKw"}),allTabGroups:e({defaultMessage:"All tab groups",id:"YL1jEopcqf"}),gmailNotAuthenticated:e({defaultMessage:"Gmail not connected",id:"Zj8MiXlulR"}),googleCalendarNotAuthenticated:e({defaultMessage:"Google Calendar not connected",id:"PH33AilmeW"}),matchesFound:t=>t===0?e({defaultMessage:"No matches found",id:"KeJh7yZCu8"}):e({defaultMessage:"{count, plural, one {One match found} other {# matches found}}",id:"ji6QO7fi7u"},{count:t}),emailsFound:t=>t===0?e({defaultMessage:"No emails found",id:"suW4stNi19"}):e({defaultMessage:"{count, plural, one {# email} other {# emails}}",id:"Rh0ulH+p+5"},{count:t}),eventsFound:t=>t===0?e({defaultMessage:"No events found",id:"GDgEmCHaVM"}):e({defaultMessage:"{count, plural, one {# event} other {# events}}",id:"HhJ8RP7qsx"},{count:t}),availableTimesFound:t=>t===0?e({defaultMessage:"No available times found",id:"2jnY2Ky2Nv"}):e({defaultMessage:"{count, plural, one {# available time} other {# available times}}",id:"5yH+BVFO1f"},{count:t}),selectedContacts:t=>e({defaultMessage:"Selected {count, plural, one {# contact} other {# contacts}}",id:"4kDAeuSFTs"},{count:t}),skippedContacts:e({defaultMessage:"Skipped selecting contacts",id:"IXqYGlHPpF"}),noAvailabilityFound:e({defaultMessage:"No availability",id:"x2vleFRn/L"})}),[e])},dHt=async(e,t)=>{try{return await ae.POST("/rest/sse/handle_perplexity_blocking_clarifying_answers","blocking-clarifying-questions",{body:{result:{tool_uuid:t,answers:e}}})}catch(n){ne.log(n);return}},fHt=()=>St({mutationFn:({answers:e,toolUuid:t})=>dHt(e,t)}),mHt=async(e,t,n)=>{const r=await ae.POST("/rest/sse/handle_tool_user_approval_response","mcp-tool-user-approval",{body:{result:{uuid:e,allow_tool_call:t,user_revision:n}}});if(r.error)throw r.error;return r},pHt=()=>St({mutationFn:({uuid:e,allowToolCall:t,userRevision:n})=>mHt(e,t,n)}),b6e=R.memo(e=>{const{questions:t,answers:n,toolUuid:r,isFinished:s}=e,{$t:a}=Z(),{isMobileStyle:i,isMobileUserAgent:l}=Ce(),{mutate:c,isSuccess:u}=fHt(),[d,m]=f.useState(()=>n.length===0||n.length!==t.length?t.map(()=>""):[...n]),p=f.useCallback((g,y)=>{m(x=>{const v=[...x];return v[g]=y,v})},[]),h=f.useCallback(()=>{c({answers:d,toolUuid:r})},[d,r,c]);return t.length===0?null:o.jsxs(H,{variant:"subtler",className:"p-md rounded-md",children:[t.map((g,y)=>o.jsx(_6e,{question:g,index:y,value:d[y]??"",onChange:p,isMobileStyle:i,isMobileUserAgent:l,isDisabled:u||s},y)),o.jsx(pe,{extraCSS:"!px-lg mt-md",variant:"primary",text:a({defaultMessage:"Submit",id:"wSZR47Y5kj"}),onClick:h,disabled:s||u,type:"submit"})]})});b6e.displayName="BlockingClarifyingQuestions";const _6e=R.memo(({question:e,index:t,value:n,onChange:r,isMobileStyle:s,isMobileUserAgent:a,isDisabled:i})=>{const l=f.useCallback(c=>{r(t,c)},[t,r]);return o.jsxs(H,{className:"gap-sm mt-md flex flex-col",children:[o.jsx(F,{variant:"small",children:e}),o.jsx(qa,{value:n,onChange:l,isMobileStyle:s,isMobileUserAgent:a,disabled:i})]},t)});_6e.displayName="QuestionInput";const w6e=R.memo(({mediaItems:e,className:t})=>{const n=e?.[e?.length-1],r=n?.media_item,s=r?.image||r?.thumbnail,a=f.useMemo(()=>({url:r?.url,name:r?.name}),[r?.name,r?.url]);return n?o.jsxs("div",{className:V("@xs:px-md @xs:pb-md px-sm pb-sm relative flex flex-col gap-1.5",t),children:[o.jsx(Je,{mode:"wait",children:o.jsx(ve.div,{className:"after:ring-subtler @xs:w-20 md:@xs:w-60 relative overflow-hidden rounded after:pointer-events-none after:absolute after:inset-0 after:rounded-md after:ring-1 after:ring-inset after:ring-opacity-50 md:w-full dark:after:ring-0",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1,ease:"easeOut"},children:o.jsx(Ss,{src:r?.thumbnail,lightboxSrc:s,alt:r?.name,origin:a,includeLightBoxModal:!0,rounded:!0,imageClassName:"object-cover w-full text-[0] dark:mix-blend-normal",containerClassName:"h-full w-full",maskClassName:"bg-subtler"})},r?.thumbnail)}),r?.url&&o.jsx("div",{children:o.jsx(Ye,{href:r?.url,target:"_blank",children:o.jsx(Te,{icon:xa,variant:"common",size:"tiny",text:"Open page",extraCSS:"group",iconClassName:"group-hover:text-super",textClassName:"group-hover:text-super font-normal",noPadding:!0})})})]}):null});w6e.displayName="StepCardMedia";const Ez=f.memo(({count:e,className:t})=>o.jsx(H,{className:V("flex select-none items-center pt-px text-center font-mono text-xs tabular-nums leading-none",t),as:"span",children:o.jsx(No,{value:e})}));Ez.displayName="AnimatedCounter";const Gx=R.memo(({favicon:e,description:t,descriptionClassName:n,title:r,descriptionFooter:s,count:a,url:i,media:l,children:c,className:u,showMedia:d=!0,onClick:m,isMissionControlSummary:p,accessory:h})=>{const g=d&&l&&l.length>0;return o.jsxs(H,{variant:"raised",className:V("@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm",u),onClick:m,children:[h&&o.jsx("div",{className:"absolute right-2 top-2",children:h}),(r||e)&&o.jsxs("div",{className:V("@xs:px-md px-sm @xs:pt-3 @xs:gap-3 gap-sm flex min-w-0 items-center pt-2"),children:[i&&e?o.jsx(Ye,{href:i,target:"_blank",rel:"noopener",className:"@xs:size-4 inline-flex size-3 shrink-0 items-center justify-center overflow-hidden rounded",children:e}):e,o.jsxs("div",{className:"@xs:text-sm flex min-w-0 flex-1 items-baseline text-xs",children:[r&&o.jsx("div",{className:"relative flex min-w-0 flex-1",children:o.jsx(F,{variant:"tiny",className:"@xs:text-sm min-w-0 flex-1 truncate",children:r})}),a&&o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("span",{className:"px-xs ml-px leading-none opacity-35",children:""}),o.jsx(Ez,{count:a,className:"opacity-65"})]})]})]}),o.jsxs("div",{className:"@xs:gap-sm @xs:flex-row flex flex-col gap-0",children:[o.jsxs("div",{className:"flex min-w-0 grow flex-col gap-1.5",children:[t&&o.jsx(o.Fragment,{children:p?o.jsx(C6e,{description:t}):o.jsx(F,{variant:"tinyRegular",className:V("px-md @xs:text-sm text-pretty",e?"@xs:ml-7 ml-4":void 0,n),children:t})}),s&&o.jsx("div",{className:"px-md @xs:ml-7 ml-4",children:s}),c]}),g&&o.jsx(w6e,{mediaItems:l})]})]})});Gx.displayName="StepCard";const C6e=R.memo(({description:e})=>{const[t,n]=f.useState(!1),{$t:r}=Z(),s=f.useCallback(a=>{a.stopPropagation(),n(!t)},[t]);return o.jsxs(F,{variant:"tinyRegular",className:V("px-md mb-sm @xs:text-sm @xs:ml-7 relative ml-4 line-clamp-2 text-pretty",t&&"line-clamp-none"),children:[o.jsxs("span",{className:V("relative",{"select-none":!t}),children:[e,t&&o.jsxs(F,{inline:!0,variant:"tinyRegular",color:"light",className:"hover:text-super inline-flex select-none items-center opacity-0 group-hover/step-card:opacity-100",onClick:s,children:["",r({id:"mFYgAXM/x4",defaultMessage:"Less"}),o.jsx(le,{icon:Vy,size:"xs"})]})]}),!t&&o.jsxs(o.Fragment,{children:[o.jsx(H,{className:"absolute inset-0",variant:"raised",style:{maskImage:"linear-gradient(to bottom, transparent 0%, black 100%)"}}),o.jsxs(F,{variant:"tinyRegular",color:"light",className:"right-md hover:text-super bg-raised pl-xs absolute bottom-0 hidden translate-x-2 select-none items-center group-hover/step-card:inline-flex",onClick:s,children:[r({id:"I5NMJ8llIi",defaultMessage:"More"}),o.jsx(le,{icon:Bn,size:"xs"})]})]})]})});C6e.displayName="ExpandableDescription";const QS=20,hHt=220,X2=R.memo(({position:e,opacity:t,height:n,offset:r=0})=>o.jsx("div",{className:`dark:from-offset pointer-events-none absolute inset-x-0 from-white to-white/0 dark:to-transparent ${e==="top"?"bg-gradient-to-b":"bottom-0 bg-gradient-to-t"} z-20 backdrop-blur-[0.25px] transition-opacity duration-150`,style:{opacity:t,height:n??(e==="top"?24:16),top:e==="top"?`${r}px`:void 0}}));X2.displayName="ScrollGradient";const Yw=R.memo(({children:e,className:t,scrollContainerClassName:n,maxHeight:r=hHt,showTopGradient:s=!0,showBottomGradient:a=!0,autoScroll:i=!0,topGradientOffset:l=0})=>{const c=f.useRef(null),[u,d]=f.useState(1),[m,p]=f.useState(0),h=f.useCallback(()=>{const g=c.current;if(!g)return;const y=Math.abs(g.scrollTop),x=Math.max(0,g.scrollHeight-g.clientHeight);i?(d(Math.min(1,Math.max(0,x-y)/QS)),p(Math.min(1,y/QS))):(d(Math.min(1,y/QS)),p(Math.min(1,Math.max(0,x-y)/QS)))},[i]);return f.useEffect(()=>{h(),p(1)},[h]),f.useEffect(()=>{const g=c.current;if(g)return g.addEventListener("scroll",h),()=>g.removeEventListener("scroll",h)},[h]),f.useEffect(()=>{h();const g=c.current;if(!g)return;const y=new MutationObserver(h);return y.observe(g,{childList:!0,subtree:!0,characterData:!0}),()=>y.disconnect()},[e,h]),o.jsxs(H,{className:V("relative",t),children:[s&&o.jsxs(o.Fragment,{children:[o.jsx(X2,{position:"top",opacity:u,offset:l}),o.jsx(X2,{position:"top",opacity:u,height:6,offset:l})]}),o.jsx("div",{ref:c,className:V(i?"flex-col-reverse":"flex-col","scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable]",n),style:{maxHeight:r},children:e}),a&&o.jsx(X2,{position:"bottom",opacity:m})]})});Yw.displayName="StepCardScrollableContent";const S6e=R.memo(({form_items:e,taskUuid:t})=>{const n=e?.[0]?.text_area_item,r=n?.placeholder,s=n?.text,[a,i]=f.useState(r||""),l="agent-form",c=f.useCallback(async h=>{try{await ae.POST("/rest/browser/agent_confirmation",l,{body:{task_uuid:t,status:h,message:a},backOffTime:100,numRetries:2,headers:{"Content-Type":"application/json"}})}catch(g){ne.error("Error sending agent confirmation",g)}},[t,a,l]),{$t:u}=Z(),d=f.useCallback(h=>{da.isEnterKeyWithoutShift(h)&&c("accept")},[c]),m=f.useCallback(h=>{h.stopPropagation(),c("accept")},[c]),p=f.useCallback(h=>{h.stopPropagation(),c("reject")},[c]);return o.jsxs(H,{className:"flex flex-col gap-3",children:[o.jsx(F,{color:"light",variant:"small",children:s}),o.jsx(qa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:r,value:a,onChange:i,onKeyDown:d}),o.jsxs("div",{className:"gap-sm py-sm flex items-center",children:[o.jsx(pe,{size:"small",variant:"inverted",text:u({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit",disabled:!1,onClick:m}),o.jsx(Te,{size:"small",text:u({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:p})]})]})});S6e.displayName="AgentForm";const gHt=1e3,E6e=R.memo(({message:e,isFinished:t,isPaused:n,isPendingClarification:r})=>{const[s,a]=f.useState(!1),i=f.useRef(e.thought||""),[l,c]=f.useState("working");f.useEffect(()=>{if(t){a(!1);return}e.thought!==i.current&&(i.current=e.thought,a(!1));const m=setTimeout(()=>{!t&&!e.action&&a(!0)},gHt);return()=>clearTimeout(m)},[e.thought,e.action,t]);const u=!e.action&&!e.thought&&e.url;return f.useEffect(()=>{let m="working";t?m="finished":n?m="paused":r?m="considering_clarification":u?m="reasoning":s&&!e.action?m="working":e.action&&e.action in Ag&&(m=e.action),c(m)},[t,u,s,e.action,n,r]),!t&&(r||e.action||u||s&&!e.action)&&o.jsx(gm,{action:l,isFinished:t,isPaused:n,className:"pl-8"})});E6e.displayName="AgentStatusManager";var yHt={};const M6e=R.memo(({citationUrl:e})=>{const t=f.useCallback(()=>{window.open(e,"_blank","noopener,noreferrer")},[e]);return o.jsx(hc,{icon:xa,iconClassName:"-ml-px",className:"animate-in fade-in duration-150",size:"extraSmall",textColor:"light",iconOnly:!0,tooltip:"Open page",onClick:t})});M6e.displayName="ExternalCitationBubble";const k6e=R.memo(({message:e,task:t})=>{const n=e.url||t.start_url,r=e.url?o.jsx(M6e,{citationUrl:n}):null;return o.jsx(is,{children:e.thought&&o.jsxs("div",{className:"pl-xs flex gap-3",children:[o.jsx(F,{color:"light",variant:"small",className:"size-4 py-1.5",children:r}),o.jsx(F,{color:"light",variant:"small",className:"py-1.5",children:e.thought})]})})});k6e.displayName="MessageItem";const T6e=R.memo(({task:e,isFinished:t,isPaused:n})=>{const r=e.agent_messages[e.agent_messages.length-1];return o.jsx(Yw,{children:o.jsxs(na,{mode:"sync",initial:!1,children:[e.agent_messages.length>0&&e.agent_messages.map((s,a)=>o.jsx(is,{children:o.jsx(k6e,{message:s,task:e})},a)),o.jsx(is,{children:o.jsx("div",{children:o.jsx(E6e,{message:e.agent_messages.length>0?r:{action:"working",thought:"",url:"",answer:"",uuid:"",value:""},isFinished:t||e.clarification_status==="STOPPED_TASK",isPaused:n,isPendingClarification:e.clarification_status==="PENDING"})})})]})})});T6e.displayName="ScrollableContent";const N6e=R.memo(({lastMessage:e,taskUuid:t})=>e.form?o.jsx("div",{className:"px-md py-sm ml-7",children:o.jsx(S6e,{form_items:e.form.form_items,taskUuid:t})}):null);N6e.displayName="FormContent";const y7=R.memo(({task:e,isFinished:t,index:n,isMissionControl:r})=>{const s=e.agent_messages[e.agent_messages.length-1],a=s?.form,i=e.uuid,{taskScreenshots:{[i]:l},tasksState:{[i]:{is_paused:c=!1}={}},taskTabs:u}=cs(),{$t:d}=Z(),m=Jn(),{result:p}=ln(),h=f.useMemo(()=>u?.some(E=>E.taskUuid===i)??!1,[u,i]),g=f.useMemo(()=>l?[{media_item:{thumbnail:l,image:l,name:d({defaultMessage:"Screenshot",id:"9a+SKtXKhe"})},task_uuid:i,message_uuid:""}]:fe,[d,l,i]),y=f.useMemo(()=>o.jsx(pl,{domain:e.start_url}),[e.start_url]),x=f.useMemo(()=>e.agent_messages.filter(M=>M.screenshot).map(M=>({media_item:{thumbnail:M.screenshot,image:M.screenshot,name:d({defaultMessage:"Screenshot",id:"9a+SKtXKhe"})},task_uuid:e.uuid,message_uuid:""})),[d,e.uuid,e.agent_messages]),v=f.useMemo(()=>a?fe:e.media&&e.media.length?e.media:x.length?x:g,[a,x,g,e.media]),b=f.useCallback(async E=>{if(!(t&&r&&!h)){if(E.stopPropagation(),t)if(r){if(!h)return}else return;yHt.NEXT_PUBLIC_IS_SIDECAR_BUILD?await m.makeTaskVisible(i):await m.moveThreadToSidecar({activeTaskUuid:i,isMissionControl:r,entryId:p?.backend_uuid,reason:"move-browser-step"})}},[m,i,t,r,h,p?.backend_uuid]),_=r&&t,w=e.clarification_status,C=E=>{switch(E){case"UPDATED_TASK":return d({defaultMessage:"Updated per your clarification",id:"UmUpwNXXy9"});case"STOPPED_TASK":return d({defaultMessage:"Stopped per your clarification",id:"Uura7/Ftc2"});default:return""}},S=w&&w!=="PENDING"?o.jsxs(F,{variant:"tinyRegular",className:"gap-xs py-xs text-super flex",children:[o.jsx(le,{icon:hde,size:"xs"}),o.jsx("span",{className:"text-pretty",children:C(w)})]}):null;return o.jsx(Gx,{favicon:y,title:I_(e.start_url),accessory:h&&_?o.jsx(le,{icon:xa,size:"xs",className:"group-hover/step-card:text-super opacity-60 group-hover/step-card:opacity-100"}):void 0,media:v,description:e.task,descriptionFooter:S,showMedia:!a,onClick:b,className:V("border transition-colors duration-150 hover:!transition-none",h&&"hover:border-super/75 group/step-card cursor-pointer"),isMissionControlSummary:_,children:_?null:a&&s&&!t?o.jsx(N6e,{lastMessage:s,taskUuid:e.uuid}):o.jsx(T6e,{task:e,isFinished:t,isPaused:c})},n)});y7.displayName="TaskStep";const j6e=R.memo(({step:e,isFinished:t,isMissionControl:n})=>o.jsx(xHt,{tasks:e.content.tasks,isMissionControl:n,isFinished:t})),xHt=({tasks:e,isMissionControl:t,isFinished:n})=>t&&n&&e.length>1?o.jsx("div",{className:"-mx-sm",children:o.jsx(fl,{orientation:"horizontal",viewportClassName:"px-sm",showScrollIndicator:!1,children:o.jsxs(H,{className:"gap-sm flex flex-row",children:[e.map((s,a)=>o.jsx("div",{className:"w-3/4 shrink-0",children:o.jsx(y7,{task:s,isFinished:n,index:a,isMissionControl:t})},a)),o.jsx("div",{className:"w-px shrink-0"})]})})}):o.jsx(H,{className:"gap-y-md flex flex-col",children:e.map((s,a)=>o.jsx(y7,{task:s,isFinished:n,index:a,isMissionControl:t},a))});j6e.displayName="BrowserStep";const A6e=R.memo(({disabled:e,onClick:t})=>o.jsx(pe,{disabled:e,onClick:t,icon:hp,variant:"common",size:"small"}));A6e.displayName="CardPaginationPrevious";const I6e=R.memo(({disabled:e,onClick:t})=>o.jsx(pe,{disabled:e,onClick:t,icon:Zn,variant:"common",size:"small"}));I6e.displayName="CardPaginationNext";const Rpn=e=>[...e].sort((t,n)=>{const r=new Date(t.start_date_time||"").getTime(),s=new Date(n.start_date_time||"").getTime();return r-s}),Ppn=e=>{if(e.length<=1)return!1;const t=new Date(e[0]?.start_date_time||""),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return e.some(r=>{const s=new Date(r.start_date_time||"");return new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime()!==n})},vHt={"#AC725E":"#79554B","#D06B64":"#E67399","#F83A22":"#D50000","#FA573C":"#F4511E","#FF7537":"#EF6C00","#FFAD46":"#F09300","#42D692":"#009688","#16A765":"#0B8043","#7BD148":"#7CB342","#B3DC6C":"#C0CA33","#FBE983":"#E4C441","#FAD165":"#F6BF26","#92E1C0":"#039BE5","#9FE1E7":"#4285F4","#9FC6E7":"#3F51B5","#4986E7":"#7986CB","#9A9CFF":"#B39DDB","#C2C2C2":"#616161","#CABDBF":"#A79B8E","#CCA6AC":"#AD1457","#F691B2":"#D81B60","#CD74E6":"#8E24AA","#A47AE2":"#7B1FA2"},bHt="#039BE5",R6e=e=>vHt[e.toUpperCase()]??bHt,P6e=e=>{const t=e.replace("#",""),n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),s=parseInt(t.substring(4,6),16),a=m=>{const p=m/255;return p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)},i=a(n),l=a(r),c=a(s),u=.2126*i+.7152*l+.0722*c,d=(Math.max(u,1)+.05)/(Math.min(u,1)+.05);return d>=7?"AAA":d>=4.5?"AA":d>=3?"A":"Fail"},_Ht=e=>typeof e=="string"?{email:e,response_status:void 0,photo_url:void 0,display_name:void 0}:{email:e.email,response_status:e.response_status,photo_url:e.photo_url,display_name:e.display_name},Xoe=e=>e?e.map(_Ht):[],wHt=e=>{if(!e||e.trim()==="")return"";const t=e.trim().split(/\s+/);return Rk(t)?t[0].charAt(0).toUpperCase():((t[0]?.charAt(0)??"")+(t[t.length-1]?.charAt(0)??"")).toUpperCase()},Mz=(e,t)=>t.formatDate(e,{timeZoneName:"short"}).split(", ").pop()||"",CHt=()=>Intl.DateTimeFormat().resolvedOptions().timeZone.split("/").pop()?.replace(/_/g," ")||"",SHt=(e,t)=>t.formatDate(e,{timeZoneName:"shortOffset"}).split(", ").pop()||"",EHt=()=>{const{formatDate:e}=Z(),t=f.useCallback((s,a=!0)=>e(s,{month:"long",day:"numeric",...a&&{year:"numeric"}}),[e]),n=f.useCallback(s=>e(s,{weekday:"long",month:"long",day:"numeric"}),[e]),r=f.useCallback(s=>e(s,{weekday:"short",month:"long",day:"numeric"}),[e]);return f.useMemo(()=>({formatEventDate:t,formatEventDay:n,formatEventDayShort:r}),[t,n,r])},c1=R.memo(({startDate:e,endDate:t,isAllDay:n,showDate:r=!1,includeYear:s=!0})=>{const{$t:a}=Z();if(n){const i=a({defaultMessage:"All day",id:"Vob6h4Xsl3"});return r?o.jsxs(o.Fragment,{children:[o.jsx(s4,{from:e,to:e,...s&&{year:"numeric"},month:"long",day:"numeric"}),", ",i]}):o.jsx(o.Fragment,{children:i})}return r?o.jsx(s4,{from:e,to:t,...s&&{year:"numeric"},month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):o.jsx(s4,{from:e,to:t,hour:"numeric",minute:"2-digit",timeZoneName:"short"})});c1.displayName="EventTimeRange";const of=R.memo(({oldText:e,newText:t,isDeletion:n=!1})=>!e&&!t?null:n&&(e||t)?o.jsx(F,{as:"span",color:"ultraLight",className:"line-through",children:e||t}):!e&&t?o.jsx(F,{as:"span",color:"default",className:"bg-[#facc15]/25",children:t}):!t&&e?e:e&&t&&e===t?o.jsx(F,{as:"span",color:"default",children:e}):e&&t&&e!==t?o.jsxs(o.Fragment,{children:[o.jsx(F,{as:"span",color:"ultraLight",className:"line-through",children:e}),"",o.jsx(F,{as:"span",color:"default",className:"bg-[#facc15]/25",children:t})]}):null);of.displayName="DiffedText";const Hi=R.memo(({children:e,icon:t,alignCenter:n=!1,iconSize:r="sm"})=>o.jsxs("div",{className:V("flex flex-row items-start gap-3",{"items-center":n}),children:[o.jsx(le,{icon:t,size:r,className:"mt-px shrink-0"}),o.jsx("div",{className:"min-w-0 flex-1",children:e})]}));Hi.displayName="EventAttribute";const O6e=R.memo(({attendee:e,showRsvp:t=!1})=>o.jsxs("div",{className:"relative w-5",children:[e.photo_url?o.jsx(un,{fullBleed:!0,className:"absolute inset-0 mt-px size-5 overflow-hidden !rounded-full",children:o.jsx("img",{src:e.photo_url,className:"size-full object-cover",alt:e.display_name||e.email||""})}):o.jsx(H,{variant:"subtle",className:"absolute inset-0 mt-px flex size-5 items-center justify-center rounded-full",children:o.jsx(F,{variant:"tinyMono",color:"light",className:"translate-y-half",children:wHt(e.display_name||e.email||"")})}),t&&(e.response_status==="accepted"||e.response_status==="declined")&&o.jsx(H,{variant:"background",className:"p-two absolute bottom-[-4px] right-[-4px] z-10 rounded-full",children:o.jsx(F,{color:e.response_status==="accepted"?"super":e.response_status==="declined"?"red":"light",className:V("bg-base border-subtlest flex size-3 items-center justify-center rounded-full border",{"!bg-super/20 !border-super/10 border":e.response_status==="accepted","!bg-negative/20 !border-negative/10":e.response_status==="declined"}),children:o.jsx(le,{icon:e.response_status==="accepted"?Ar:e.response_status==="declined"?It:Gue,size:"2xs",stroke:2.125})})})]}));O6e.displayName="AttendeeAvatar";const L6e=R.memo(({attendees:e,newAttendees:t,truncateAttendees:n,showRsvp:r=!1,isDeletion:s=!1})=>{const[a,i]=f.useState(!1),c=Xoe(e).filter(g=>!g.email?.includes("@resource.calendar.google"));let u;t&&(u=Xoe(t).filter(y=>!y.email?.includes("@resource.calendar.google")));const d=(g,y)=>{const x=g?.map(v=>{let b;return y?b=y?.find(_=>_.email===v.email)??{email:" ",response_status:void 0,photo_url:void 0,display_name:" "}:b=v,{oldValue:v,newValue:b}})??[];return y&&(g?y.filter(b=>!g.some(_=>_.email===b.email)):y).forEach(b=>{x.push({oldValue:void 0,newValue:b})}),x},m=u||c,p=d(c,u),h=f.useCallback(()=>i(!a),[a]);return o.jsxs("div",{className:"min-w-0",children:[(()=>{const g=m?.length??0;return o.jsx(F,{variant:"small",color:g>0?"default":"light",className:s?"line-through":"",children:g>0?`${g} ${g===1?"Guest":"Guests"}`:"No Guests"})})(),p&&p.length>0&&o.jsxs("div",{className:"gap-sm my-sm flex flex-col",children:[p.slice(0,n&&!a?n:void 0).map(g=>o.jsxs("div",{className:"gap-sm flex flex-row",children:[o.jsx(O6e,{attendee:g.newValue,showRsvp:r}),o.jsx(F,{variant:"small",color:"default",className:"line-clamp-1 text-ellipsis break-all",children:o.jsx(of,{oldText:g.oldValue?.display_name||g.oldValue?.email,newText:g.newValue?.display_name||g.newValue?.email,isDeletion:s})})]},g.oldValue?.email??g.newValue?.email)),n&&p.length>n&&o.jsx(F,{as:"button",variant:"small",color:"default",className:"w-fit text-left hover:underline",onClick:h,children:a?"Show less":"Show all"})]})]})});L6e.displayName="AttendeeList";const D6e=R.memo(({videoEntryPoint:e,isDeletion:t})=>{const{$t:n}=Z(),r=f.useCallback(()=>window.open(e?.uri,"_blank","noopener,noreferrer"),[e?.uri]);return!e||t?null:o.jsx(Hi,{icon:LD,alignCenter:!0,children:o.jsx(pe,{variant:"primary",pill:!0,text:n({defaultMessage:"Join Meeting",id:"HK25u5mIfw"}),onClick:r,size:"small"})})});D6e.displayName="EventVideoEntry";const F6e=R.memo(({location:e,newLocation:t,isDeletion:n=!1})=>e?o.jsx(Hi,{icon:$k,children:o.jsx(F,{variant:"small",color:"light",className:"line-clamp-1",children:o.jsx(of,{oldText:e,newText:t,isDeletion:n})})}):null);F6e.displayName="EventLocation";const U6e=R.memo(({description:e,newDescription:t,isDeletion:n=!1})=>{const[r,s]=f.useState(!1),a=f.useCallback(()=>s(!r),[r]);return e?o.jsx(Hi,{icon:gde,children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"small",className:V("break-words",{"line-clamp-2":!r}),children:o.jsx(of,{oldText:e,newText:t,isDeletion:n})}),e.length>150&&o.jsx(F,{as:"button",variant:"small",color:"default",className:"mt-1 w-fit text-left hover:underline",onClick:a,children:r?"Show less":"Show more"})]})}):null});U6e.displayName="EventDescription";const B6e=R.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l=!1})=>{const c=Z(),u=s&&n?n:e,d=s&&r?r:t,m=s?s.is_all_day||!1:a;return o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(F,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(of,{oldText:i(e),newText:s&&n?i(n):void 0,isDeletion:l})}),o.jsx(F,{variant:"small",color:"light",children:o.jsxs("span",{className:l?"line-through":"",children:[o.jsx(c1,{startDate:u,endDate:d,isAllDay:m}),!m&&` (${Mz(u,c)})`]})})]})});B6e.displayName="SingleDayDisplay";const V6e=R.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,formatEventDayShort:a,isDeletion:i=!1})=>{const l=Z(),c=s&&r?r:t,u=s&&s.is_all_day||!1;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(F,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(of,{oldText:a(e),newText:s&&n?a(n):void 0,isDeletion:i})}),o.jsx(F,{variant:"small",color:"light",children:o.jsx("span",{className:i?"line-through":"",children:!s?.is_all_day&&o.jsx(EP,{value:s&&n?n:e,hour:"numeric",minute:"2-digit"})})})]}),o.jsx(F,{color:"light",className:"pt-two flex justify-center",children:o.jsx(le,{icon:a_,size:"sm"})}),o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(F,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(of,{oldText:a(t),newText:s&&r?a(r):void 0,isDeletion:i})}),o.jsx(F,{variant:"small",color:"light",children:o.jsx("span",{className:i?"line-through":"",children:!u&&o.jsxs(o.Fragment,{children:[o.jsx(EP,{value:c,hour:"numeric",minute:"2-digit"}),` (${Mz(c,l)})`]})})})]})]})});V6e.displayName="MultiDayDisplay";const $6e=R.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l=!1})=>{const c=vut(e,t);return o.jsx(Hi,{icon:_p,children:o.jsxs("div",{className:"gap-sm flex",children:[c&&o.jsx(B6e,{startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l}),!c&&o.jsx(V6e,{startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,formatEventDayShort:i,isDeletion:l})]})})});$6e.displayName="EventDateDisplay";const MHt=R.memo(({startDate:e,newStartDate:t})=>{const n=Z();if(!e)return null;const r=t||e,s=SHt(r,n),a=CHt(),i=Mz(r,n);return o.jsx(Hi,{icon:uf,alignCenter:!0,children:o.jsxs("div",{children:[o.jsxs(F,{as:"span",variant:"small",color:"light",children:[s," "]}),o.jsx(F,{as:"span",variant:"small",children:a}),o.jsxs(F,{as:"span",variant:"small",color:"light",children:[" ","(",i,")"]})]})})});MHt.displayName="EventTimezone";const W6e=R.memo(({event:e,newEvent:t,className:n,truncateAttendees:r,showRsvp:s=!1,action:a})=>{const{start_date_time:i,end_date_time:l,attendees:c,description:u,location:d,conference_data:m,is_all_day:p}=e,h=a==="DELETE",{formatEventDayShort:g}=EHt(),y=f.useMemo(()=>new Date(i||""),[i]),x=f.useMemo(()=>new Date(l||""),[l]),v=f.useMemo(()=>{if(t&&t.start_date_time)return new Date(t.start_date_time||"")},[t]),b=f.useMemo(()=>{if(t&&t.end_date_time)return new Date(t.end_date_time||"")},[t]),_=m?.entry_points?.find(w=>w.entry_point_type==="video");return o.jsxs("div",{className:V("gap-md flex h-full flex-col",n),children:[o.jsx($6e,{startDate:y,endDate:x,newStartDateObj:v,newEndDateObj:b,newEvent:t,is_all_day:p??!1,formatEventDayShort:g,isDeletion:h}),o.jsx(D6e,{videoEntryPoint:_,isDeletion:h}),o.jsx(F6e,{location:d,newLocation:t?.location,isDeletion:h}),o.jsx(U6e,{description:u,newDescription:t?.description,isDeletion:h}),o.jsx(Hi,{icon:Cu,children:o.jsx(L6e,{attendees:c,newAttendees:t?.attendees,truncateAttendees:r,showRsvp:s,isDeletion:h})})]})});W6e.displayName="EventDetails";const Zoe=e=>e?e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",Joe="border-subtler bg-subtler text-foreground focus:border-super !h-9 rounded-lg border px-3 py-1 text-sm focus:outline-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden bg-transparent",ele="data-[state=closed]:border-subtler data-[state=open]:border-super data-[state=open]:hover:border-super !px-3 !h-9 bg-transparent",H6e=f.memo(({startDateTime:e,endDateTime:t,onStartDateChange:n,onEndDateChange:r,onStartTimeChange:s,onEndTimeChange:a})=>{const{$t:i}=Z(),l=f.useMemo(()=>e?new Date(e):void 0,[e]),c=f.useMemo(()=>t?new Date(t):void 0,[t]),u=f.useCallback(x=>{if(!x)return;const v=new Date(l||"");if(!isNaN(v.getTime())){if(v.setDate(x.getDate()),v.setMonth(x.getMonth()),v.setFullYear(x.getFullYear()),c&&c.getTime()<v.getTime()){const b=new Date(v.getTime());b.setHours(c.getHours()),b.setMinutes(c.getMinutes()),b.setSeconds(c.getSeconds()),r(b)}n(v)}},[l,c,n,r]),d=f.useCallback(x=>{if(!x)return;const v=new Date(c||"");isNaN(v.getTime())||(v.setDate(x.getDate()),v.setMonth(x.getMonth()),v.setFullYear(x.getFullYear()),l&&v<l&&n(v),r(v))},[l,c,n,r]),m=f.useCallback(x=>{s(x)},[s]),p=f.useCallback(x=>{if(!l)return;const[v,b]=x.split(":").map(Number);if(v===void 0||b===void 0)return;const _=new Date(l);isNaN(_.getTime())||(_.setHours(v),_.setMinutes(b),!isNaN(_.getTime())&&(c&&_.getTime()>c.getTime()&&r(_),n(_)))},[l,c,n,r]),h=f.useCallback(x=>{a(x)},[a]),g=f.useCallback(x=>{if(!c)return;const[v,b]=x.split(":").map(Number);if(v===void 0||b===void 0)return;const _=new Date(c);isNaN(_.getTime())||(_.setHours(v),_.setMinutes(b),!isNaN(_.getTime())&&(l&&_.getTime()<l.getTime()&&n(_),r(_)))},[l,c,n,r]),y=f.useCallback(x=>x.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),[]);return o.jsxs("div",{className:"flex flex-col items-center gap-2 md:flex-row",children:[o.jsxs("div",{className:"flex w-full items-center gap-2",children:[o.jsx(gk,{buttonClassName:ele,value:l,onChange:u,placeholder:i({defaultMessage:"Select start date",id:"oUUhTXC2Mx"}),formatDate:y,showIcon:!1}),o.jsx("input",{type:"time",value:Zoe(l),onChange:x=>m(x.target.value),onBlur:x=>p(x.target.value),className:Joe})]}),o.jsx("span",{className:"text-quieter mx-1 text-sm",children:i({defaultMessage:"to",id:"NLeFGnA9M4"})}),o.jsxs("div",{className:"flex w-full items-center gap-2",children:[o.jsx("input",{type:"time",value:Zoe(c),onChange:x=>h(x.target.value),onBlur:x=>g(x.target.value),className:Joe}),o.jsx(gk,{buttonClassName:ele,value:c,onChange:d,placeholder:i({defaultMessage:"Select end date",id:"0A4/NpHFx/"}),formatDate:y,showIcon:!1})]})]})});H6e.displayName="CalendarTimeEditable";const xk=R.memo(({id:e,label:t,extraCSS:n,options:r,activeKey:s,onOptionChange:a,isDisabled:i=!1,testId:l,defaultOption:c,icon:u,...d})=>{c&&(r=[{label:c,value:""}].concat(r));const m=p=>{a(c&&p===""?null:p)};return o.jsxs("div",{children:[o.jsx(z3,{withMargin:!1,label:t}),o.jsx(F,{variant:"small",className:t&&"mt-sm",children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("select",{"data-testid":l,id:e,onChange:p=>m(p.target.value),value:s??"",className:V("border-subtler bg-base p-sm pr-lg outline-super ring-subtler dark:border-subtle dark:bg-subtler dark:ring-subtle w-full appearance-none rounded border transition duration-300 focus:outline-none",{"cursor-pointer hover:ring-1":!i,"pl-lg":u},n),disabled:i,...d,children:r.map(p=>o.jsx("option",{value:p.value,className:"pl-sm",children:p.label},p.value))}),u&&o.jsx("div",{className:"left-sm absolute",children:u}),o.jsx(F,{color:"light",variant:"small",className:"right-sm pointer-events-none absolute",children:o.jsx(le,{icon:Bn,size:"md"})})]})})]})});xk.displayName="Select";const Z2={frequency:"WEEKLY",endType:"never",interval:"1"},kHt=["DAILY","WEEKLY","MONTHLY","YEARLY"],XS=pt({day:{id:"ruG8dNqKt0",defaultMessage:"{count, plural, one {Day} other {Days}}"},week:{id:"cR0w/cReH+",defaultMessage:"{count, plural, one {Week} other {Weeks}}"},month:{id:"svowrjAWNi",defaultMessage:"{count, plural, one {Month} other {Months}}"},year:{id:"OPfd4WaWUE",defaultMessage:"{count, plural, one {Year} other {Years}}"}}),THt=e=>[{label:e({defaultMessage:"Daily",id:"zxvhnETmn2"}),value:"DAILY"},{label:e({defaultMessage:"Weekly",id:"/clOBUs/wZ"}),value:"WEEKLY"},{label:e({defaultMessage:"Monthly",id:"wYsv4ZHu+B"}),value:"MONTHLY"},{label:e({defaultMessage:"Yearly",id:"dqD39hnoA/"}),value:"YEARLY"}],NHt=e=>[{label:e({defaultMessage:"Never",id:"du1laW45Py"}),value:"never"},{label:e({defaultMessage:"After",id:"4X+U8o+ztO"}),value:"after"}],jHt=e=>[{label:e({defaultMessage:"Mo",id:"EIk6EqFZZN"}),value:"MO"},{label:e({defaultMessage:"Tu",id:"dswupo3WZd"}),value:"TU"},{label:e({defaultMessage:"We",id:"p02wWlGXK3"}),value:"WE"},{label:e({defaultMessage:"Th",id:"Ee4Ne0CnpN"}),value:"TH"},{label:e({defaultMessage:"Fr",id:"pCVXo8kVuW"}),value:"FR"},{label:e({defaultMessage:"Sa",id:"QJaSgEWRy1"}),value:"SA"},{label:e({defaultMessage:"Su",id:"n4xx4rvq9+"}),value:"SU"}],AHt=e=>{try{let t=`RRULE:FREQ=${e.frequency}`;return e.interval&&e.interval!=="1"&&(t+=`;INTERVAL=${e.interval}`),e.byDay&&e.byDay.length>0&&(t+=`;BYDAY=${e.byDay.join(",")}`),e.endType==="after"&&e.count&&(t+=`;COUNT=${e.count}`),t}catch{return null}},IHt=e=>{try{if(!e.startsWith("RRULE:"))return null;const n=e.substring(6).split(";"),r=Z2;for(const s of n){const[a,i]=s.split("=");switch(a){case"FREQ":kHt.includes(i)&&(r.frequency=i);break;case"INTERVAL":r.interval=i;break;case"BYDAY":r.byDay=i?.split(",");break;case"COUNT":r.count=i,r.endType="after";break}}return r}catch{return null}},RHt=e=>{if(!e.frequency||e.frequency==="WEEKLY"&&(!e.byDay||e.byDay.length===0))return!1;if(e.interval){const t=parseInt(e.interval,10);if(isNaN(t)||t<1)return!1}if(e.endType==="after"){if(!e.count)return!1;const t=parseInt(e.count,10);if(isNaN(t)||t<1)return!1}return!0},PHt=(e,t)=>({MO:t({defaultMessage:"Mon",id:"T8JZHei06V"}),TU:t({defaultMessage:"Tue",id:"C4ENlvYIEr"}),WE:t({defaultMessage:"Wed",id:"2NqUghZFW1"}),TH:t({defaultMessage:"Thu",id:"FC0AP4JIua"}),FR:t({defaultMessage:"Fri",id:"hFYE2MSlqH"}),SA:t({defaultMessage:"Sat",id:"3Hv4FbI9Kl"}),SU:t({defaultMessage:"Sun",id:"1Aday2s3it"})})[e]||e,z6e=f.memo(({value:e,onChange:t})=>{const{$t:n}=Z(),[r,s]=f.useState(!1),[a,i]=f.useState(Z2);f.useEffect(()=>{if(ya(e)&&!r){const x=IHt(e[0]);x&&(i(x),s(!0))}},[e,r]);const l=f.useMemo(()=>THt(n),[n]),c=f.useMemo(()=>NHt(n),[n]),u=f.useMemo(()=>jHt(n),[n]),d=parseInt(a.interval||"1",10),m={DAILY:n(XS.day,{count:d}),WEEKLY:n(XS.week,{count:d}),MONTHLY:n(XS.month,{count:d}),YEARLY:n(XS.year,{count:d})},p=x=>{if(RHt(x)){const v=AHt(x);v&&t([v])}},h=x=>{const v={...a,...x};i(v),p(v)},g=x=>{const v=a.byDay||[],b=v.includes(x)?v.filter(w=>w!==x):[...v,x],_={...a,byDay:b};i(_),p(_)},y=()=>{s(!1),i(Z2),t([])};return o.jsxs(H,{className:"space-y-1 pl-1",children:[!r&&e.length===0&&o.jsx(H,{className:"flex items-center justify-between pl-1",children:o.jsx(Te,{onClick:()=>{s(!0),i(Z2)},noPadding:!0,variant:"noBackground",text:n({defaultMessage:"Repeat",id:"tw5j2+ZRIB"}),leadingComponent:o.jsx(ur,{size:16}),size:"tiny"})}),r&&o.jsxs(H,{className:"flex flex-col gap-2 rounded",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-quieter whitespace-nowrap pr-1 text-xs",children:n({defaultMessage:"Every",id:"JE2YVbgaBx"})}),o.jsx(Wr,{pill:!1,isMobileUserAgent:!1,min:1,max:99,type:"number",value:a.interval?.toString()||"1",onChange:x=>h({interval:x}),className:"focus:!border-super !w-16 rounded-lg !px-3 focus:!ring-transparent"}),o.jsx(xk,{id:"frequency-select",activeKey:a.frequency||"WEEKLY",options:l.map(x=>({...x,label:m[x.value]})),onOptionChange:x=>h({frequency:x}),extraCSS:"rounded-lg"}),o.jsx("span",{className:"text-quieter whitespace-nowrap pl-2 pr-1 text-xs",children:n({defaultMessage:"Ends",id:"04xGLEkMMo"})}),o.jsx(xk,{id:"end-type-select",activeKey:a.endType||"never",options:c,onOptionChange:x=>h({endType:x,count:x==="after"?"1":void 0}),extraCSS:"rounded-lg w-full"}),a.endType==="after"&&o.jsxs(o.Fragment,{children:[o.jsx(Wr,{pill:!1,isMobileUserAgent:!1,min:1,max:99,type:"number",value:a.count||"1",onChange:x=>h({count:x}),className:"focus:!border-super !w-16 rounded-lg !px-3 focus:!ring-transparent"}),o.jsx("span",{className:"text-quieter pr-sm whitespace-nowrap text-xs",children:a.count==="1"?n({defaultMessage:"time",id:"nTBG1bRQLC"}):n({defaultMessage:"times",id:"KSQJ7UVwln"})})]}),o.jsx(pe,{onClick:y,text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",extraCSS:"px-3 py-1 text-xs ml-auto"})]}),a.frequency==="WEEKLY"&&o.jsxs(H,{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-quieter w-9 whitespace-nowrap text-xs",children:n({defaultMessage:"On",id:"Zh+5A6yahu"})}),o.jsx("div",{className:"flex gap-2",children:u.map(x=>o.jsx(pe,{onClick:()=>g(x.value),text:x.label,size:"tiny",pill:!0,variant:a.byDay?.includes(x.value)?"inverted":"common",ariaLabel:n({defaultMessage:"Toggle {day}",id:"i/JqE0BlGw"},{day:PHt(x.value,n)}),noPadding:!0,extraCSS:"w-8 h-8 !p-0 !text-2xs"},x.value))})]})]})]})});z6e.displayName="RecurrenceEditor";const G6e=R.memo(({tag:e,onDelete:t,onClick:n,onMouseDown:r,className:s,testId:a,selected:i=!1,disabled:l=!1})=>{const{$t:c}=Z(),u=f.useCallback(p=>{p.stopPropagation(),t?.(e)},[t,e]),d=f.useCallback(p=>{p.stopPropagation(),n?.(e,{shiftKey:p.shiftKey,metaKey:p.metaKey,ctrlKey:p.ctrlKey})},[n,e]),m=t&&!l;return o.jsxs("span",{className:"relative flex h-6",children:[o.jsx(H,{className:V("h-full rounded-lg border px-2 text-sm",{"pr-[24px]":m},{"cursor-default":l},s),variant:i?"superBorder":"subtler","data-test-id":a,onClick:l?void 0:d,onMouseDown:l?void 0:r,as:"button",bgHover:l?void 0:"subtle",children:o.jsx(F,{variant:"small",children:e.label})}),m&&o.jsx(H,{variant:"transparent",onClick:u,tabIndex:0,"aria-label":c({defaultMessage:"Remove",id:"G/yZLul6P1"}),as:"button",bgHover:"subtle",className:"top-three right-three absolute rounded-md p-0.5",children:o.jsx(le,{icon:It,size:"xs"})})]})});G6e.displayName="EditableTag";function OHt(e,t=!0){const n=f.useRef(null);return f.useEffect(()=>{if(!t)return;const r=s=>{n.current&&!n.current.contains(s.target)&&e()};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[t,e]),n}const LHt=async(e,t)=>{if(!t){await x7(e);return}try{const n=new Blob([t],{type:"text/html"}),r=new Blob([e],{type:"text/plain"});await navigator.clipboard.write([new ClipboardItem({"text/html":n,"text/plain":r})])}catch{await x7(e)}},x7=async e=>{try{await navigator.clipboard.writeText(e)}catch{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},kz=R.memo(({tags:e,limit:t=1/0,isMobileUserAgent:n,onAdd:r,onDelete:s,validator:a,placeholder:i,disabled:l=!1,testId:c,children:u,className:d,tagClassName:m,inputClassName:p,placeholderOnFocusOnly:h=!1})=>{const[g,y]=f.useState(""),[x,v]=f.useState(!1),[b,_]=f.useState([]),w=f.useRef(null),C=OHt(()=>{_([])}),S=f.useCallback(()=>{const j=g.trim();if(j===""||e.find(T=>T.value===j))return!1;if(a){const T=a(j);if(typeof T=="string"||!T)return!1}return y(""),r([j]),!0},[g,r,e,a]);f.useEffect(()=>{b.length>0&&C.current&&C.current.focus()},[b,C]);const E=f.useCallback(j=>{if((j.metaKey||j.ctrlKey)&&j.key==="a"&&g){j.stopPropagation();return}if(j.key==="Enter"||j.key==="Tab"||j.key===" "||j.key===","||j.key===";"){if(!S())return;j.preventDefault(),v(!0);return}if(j.key==="Escape"){y(""),v(!1);return}if(j.key==="Backspace"){if(b.length>0)return;if(!g&&!b.length){j.stopPropagation(),j.preventDefault();const T=e[e.length-1];T&&_([T.value]),v(!1)}return}if((j.key==="ArrowLeft"||j.key==="ArrowRight")&&!g){if(j.preventDefault(),j.stopPropagation(),j.key==="ArrowLeft"&&e.length>0){const T=e[e.length-1];T&&(_([T.value]),v(!1))}return}},[S,b,g,e]),M=(j,T)=>{_(I=>{const U=T.shiftKey,B=T.metaKey,D=T.ctrlKey;return B||D?I.includes(j.value)?I.filter(W=>W!==j.value):[...I,j.value]:U?I.includes(j.value)?I:[...I,j.value]:I.includes(j.value)?I.filter(W=>W!==j.value):[j.value]})},k=j=>{s([j.value]),_(T=>T.filter(I=>I!==j.value)),v(!0)},N=f.useCallback(j=>{j.preventDefault()},[]),P=f.useCallback(()=>{g.trim()!==""&&!S()||v(!1)},[g,S]),L=f.useCallback(()=>{x7(b.join(","))},[b]),O=f.useCallback(j=>{const{metaKey:T,ctrlKey:I,key:U}=j;if((T||I)&&U==="a"){if(x&&g)return;j.preventDefault(),_(e.map(B=>B.value)),x&&v(!1);return}if((T||I)&&U==="c"&&b.length>0){j.preventDefault(),L();return}if((T||I)&&U==="x"&&b.length>0){j.preventDefault(),L();const B=[...b];_([]),s(B),v(!0);return}if(U==="Backspace"&&b.length>0&&!g){j.preventDefault();const B=[...b];_([]),s(B),v(!0);return}if(U==="ArrowLeft"||U==="ArrowRight"){if(document.activeElement===w.current?.element())return;j.preventDefault();const D=U==="ArrowLeft",W=U==="ArrowRight",z=$=>{const X=e[$];X&&_([X.value])};if(b.length===0)e.length>0&&z(D?e.length-1:0);else{const $=b.map(X=>e.findIndex(q=>q.value===X)).filter(X=>X!==-1).sort((X,q)=>X-q);if($.length>0){const X=D?$[0]:$[$.length-1];if(X!==void 0)if(W&&X===e.length-1)_([]),v(!0);else{const q=D?Math.max(0,X-1):Math.min(e.length-1,X+1);z(q)}}}return}},[b,s,e,x,g,L]),A=f.useCallback(j=>{const I=j.clipboardData.getData("text").split(/[,;\n\t]+/).map(U=>U.trim()).filter(Boolean);if(I.length>1){const U=[];if(I.forEach(B=>{a?a(B)===!0&&U.push(B):U.push(B)}),U.length>0)j.preventDefault(),j.stopPropagation(),r(U);else return}},[a,r]);return o.jsxs("div",{ref:C,tabIndex:0,className:V("flex min-h-10 w-full flex-row flex-wrap items-center gap-1 py-2 focus:outline-none",d),"data-test-id":c,onKeyDown:O,onPointerDown:j=>{x&&j.target===C.current&&j.preventDefault()},onClick:j=>{x||(j.stopPropagation(),j.preventDefault(),!l&&e.length<t&&(_([]),v(!0)))},children:[e.map(j=>o.jsx(G6e,{tag:j,className:m,selected:b.includes(j.value),onDelete:k,onClick:M,onMouseDown:N,disabled:l},j.value)),!l&&e.length<t&&(h?x:x||e.length===0)&&o.jsx("div",{className:"min-w-40 flex-1",children:o.jsx(Wr,{ref:w,name:"tag",placeholder:i,autoFocus:!0,className:V("h-6 w-full !rounded-none border-none !bg-transparent !p-0 focus:border-none focus:!ring-0",p),size:"sm",pill:!1,isMobileUserAgent:n,value:g,onBlur:P,onChange:y,onKeyDown:E,onPaste:A})}),u]})});kz.displayName="EditableTagInput";const v7=f.memo(({event:e,newEvent:t,onEventChange:n,isEditable:r=!0,truncateAttendees:s,noWrapper:a=!1,action:i})=>{const{$t:l}=Z(),[c,u]=f.useState({event_id:e.event_id,title:e.title,start_date_time:e.start_date_time,end_date_time:e.end_date_time,attendees:e.attendees?.map(k=>({email:k.email,optional:k.optional})),organizer:e.organizer,description:e.description,location:e.location,link:e.link,calendar_color:e.calendar_color,event_color:e.event_color,conference_data:e.conference_data,creator:e.creator,html_description:e.html_description,is_all_day:e.is_all_day,recurrence:e.recurrence?.map(k=>k.toString())}),d=f.useRef(null);f.useEffect(()=>{n?.(c)},[c,n]);const m=f.useCallback(k=>{k&&u(N=>({...N,start_date_time:k.toISOString()}))},[]),p=f.useCallback(k=>{k&&u(N=>({...N,end_date_time:k.toISOString()}))},[]),h=f.useCallback(k=>{u(N=>{const P=new Date(N.start_date_time||""),[L,O]=k.split(":").map(Number);return L===void 0||O===void 0||(P.setHours(L),P.setMinutes(O),isNaN(P.getTime()))?N:{...N,start_date_time:P.toISOString()}})},[]),g=f.useCallback(k=>{u(N=>{const P=new Date(N.end_date_time||""),[L,O]=k.split(":").map(Number);return L===void 0||O===void 0||(P.setHours(L),P.setMinutes(O),isNaN(P.getTime()))?N:{...N,end_date_time:P.toISOString()}})},[]),y=(k,N,P)=>{u(L=>{const O=[...L.attendees||[]];switch(k){case"add":O.some(A=>A.email===N)||O.push({email:N});break;case"delete":return{...L,attendees:O.filter(A=>A.email!==N)};case"edit":return{...L,attendees:O.map(A=>A.email===N?{...A,email:P}:A)}}return{...L,attendees:O}})},x=R6e(e?.calendar_color?.background??"#AC725E"),v=P6e(x),b=f.useCallback(k=>u(N=>({...N,title:k})),[]),_=f.useCallback(k=>{k.forEach(N=>y("add",N))},[]),w=f.useCallback(k=>{k.forEach(N=>y("delete",N))},[]),C=f.useCallback(k=>u(N=>({...N,location:k})),[]),S=f.useCallback(k=>{u(N=>({...N,recurrence:k}))},[]),E=f.useCallback(k=>{const N=k==="google_meet";u(P=>({...P,conference_data:N?{conference_id:Ir(),entry_points:[],solution:{name:"Google Meet",icon_uri:"",key_type:"hangoutsMeet"}}:void 0}))},[]),M=f.useMemo(()=>[{label:l({defaultMessage:"Google Meet",id:"crZ+Bimh7N"}),value:"google_meet"},{label:l({defaultMessage:"No video conferencing",id:"PYY40S2Jrm"}),value:"none"}],[l]);if(!r){const{title:k}=e;if((!e.attendees||e.attendees.length==0)&&!e.start_date_time&&!e.end_date_time&&!e.title)return null;const N=o.jsxs("div",{className:"gap-md relative flex",children:[o.jsx("div",{className:V("inset-y-xs absolute left-0 w-1 shrink-0 self-stretch rounded-full",{"brightness-[0.8]":v==="Fail"}),style:{backgroundColor:x}}),o.jsxs("div",{className:"gap-md flex flex-col pl-5",children:[o.jsx(of,{oldText:k,newText:t?.title??void 0,isDeletion:i==="DELETE"}),o.jsx(W6e,{event:e,newEvent:t,action:i,truncateAttendees:s})]})]});return a?o.jsx("div",{className:"p-md relative overflow-hidden",children:N}):o.jsx(un,{fullBleed:!0,className:"p-md relative overflow-hidden",roundedClass:"rounded-md",children:N})}return o.jsxs(un,{fullBleed:!0,className:"relative flex flex-col gap-4 overflow-hidden px-8 py-2",roundedClass:"rounded-md",fullBleedBorderClassname:"border-none",children:[o.jsx("div",{className:"shrink-none left-xs absolute bottom-2 top-2 w-1.5 self-stretch rounded-full"+(v==="Fail"?" brightness-[0.8]":""),style:{backgroundColor:x}}),o.jsx(Wr,{size:"md",type:"text",value:c.title||"",pill:!1,onChange:b,className:"border-subtler text-foreground w-full rounded-none rounded-t-md border-x-0 border-b border-t-0 pb-2 pl-0 pr-4 font-medium shadow-none focus:!outline-none focus:!ring-0",placeholder:l({defaultMessage:"Add title",id:"k09nVJqic1"}),isMobileUserAgent:!1}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(Hi,{icon:_p,alignCenter:!0,iconSize:"sm",children:o.jsx(H6e,{startDateTime:c.start_date_time,endDateTime:c.end_date_time,onStartDateChange:m,onEndDateChange:p,onStartTimeChange:h,onEndTimeChange:g})}),o.jsx(Hi,{icon:LDe,iconSize:"sm",children:o.jsx(z6e,{value:c.recurrence||[],onChange:S})}),o.jsx(Hi,{icon:Cu,iconSize:"sm",alignCenter:!0,children:o.jsx("div",{className:V("border-subtler text-foreground focus-within:border-super w-full rounded-lg border px-2",{"!px-3":!c.attendees?.length}),children:o.jsx(kz,{tags:(c.attendees??[]).map(k=>k.email?{label:k.email,value:k.email}:void 0).filter(k=>k!==void 0),isMobileUserAgent:!1,onAdd:_,onDelete:w,validator:Mht,placeholder:l({defaultMessage:"Add guests",id:"pP5ifNp+MS"})})})}),o.jsx(Hi,{icon:$k,iconSize:"sm",alignCenter:!0,children:o.jsx(Wr,{pill:!1,type:"text",value:c.location||"",onChange:C,placeholder:l({defaultMessage:"Add rooms or location",id:"bb7ELr4Sk+"}),className:"focus:!border-super rounded-lg !px-3 focus:!ring-transparent",isMobileUserAgent:!1})}),o.jsx(Hi,{icon:LD,iconSize:"sm",alignCenter:!0,children:o.jsx(xk,{id:"video-conferencing-select",activeKey:c.conference_data?"google_meet":"none",options:M,onOptionChange:E,extraCSS:"rounded-lg pl-3 [&+div]:right-3"})}),o.jsx(Hi,{icon:gde,iconSize:"sm",children:o.jsx(PT,{wrapperClass:"bg-transparent focus-within:!border-super rounded-md px-3 py-2 text-sm focus-within:!ring-transparent",inputRef:d,children:o.jsx(OT,{value:c.description||"",onChange:k=>u(N=>({...N,description:k})),placeholder:l({defaultMessage:"Add a description",id:"bocXKEDBwm"}),minRows:4,isMobileStyle:!1,isMobileUserAgent:!1,ref:d})})})]})]})});v7.displayName="CalendarEventLarge";var eg;(function(e){e.CREATED="CREATED",e.UPDATED="UPDATED",e.DELETED="DELETED",e.REJECTED="REJECTED"})(eg||(eg={}));const q6e=R.memo(({operation:e,isShowEditableComponentsEnabled:t,buttonVariant:n,buttonText:r,onConfirm:s,onSkip:a})=>{const{$t:i}=Z(),[l,c]=f.useState();f.useEffect(()=>{c(void 0)},[e]);const u=f.useMemo(()=>{if(e?.update){const y=e.update.event,x=e.update.new_event;return y&&x?{...y,...Object.fromEntries(Object.entries(x).filter(([b,_])=>_!==null))}:x||y}return e?.add?.event||e?.delete?.event},[e]),d=f.useCallback(y=>{c(y)},[]),m=f.useCallback(y=>[{...e,...y&&{...e.add&&{add:{event:y}},...e.update&&{update:{event:y}},...e.delete&&{delete:{event:y,delete_scope:e.delete?.delete_scope}}},status:y.status.toUpperCase()}],[e]),p=f.useCallback((y,x)=>{const v=x||{...l||u,status:y};return{confirmed:!0,operations:v?m(v):[]}},[l,u,m]),h=f.useCallback(()=>{let y=eg.CREATED;e.update?y=eg.UPDATED:e.delete&&(y=eg.DELETED),s(p(y))},[p,s,e]),g=f.useCallback(()=>{a(p(eg.REJECTED))},[p,a]);return o.jsxs(o.Fragment,{children:[u&&e.delete&&o.jsx(H,{className:"px-sm mb-sm",children:o.jsx(v7,{event:u,newEvent:e.update?.new_event,isEditable:!1})}),u&&!e.delete&&o.jsx(H,{className:"px-md py-sm",children:o.jsx(v7,{event:u,newEvent:e.update?.new_event,onEventChange:d,isEditable:t})}),o.jsx("form",{onSubmit:y=>{y.preventDefault(),h()},children:o.jsx(H,{className:"px-md py-sm gap-4 border-t pt-4",children:o.jsx("div",{className:"gap-sm flex items-center justify-between",children:o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(pe,{size:"small",variant:n,text:r,type:"submit"}),o.jsx(Te,{size:"small",text:i({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:g})]})})})})]})});q6e.displayName="CalendarOperationItem";function DHt(){const{value:e}=$r({flag:"show-editable-calendar-components",defaultValue:!1});return e}const FHt=({result:e,isDeleteOperation:t})=>{const{$t:n}=Z();return e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ha,{size:14,className:"shrink-0 text-[#16a34a]",title:"Confirmed"}),o.jsx("span",{className:"text-xs font-medium leading-none text-[#16a34a]",children:n(t?{defaultMessage:"Deleted",id:"KQvWvDRI1B"}:{defaultMessage:"Accepted",id:"aFyFm0PsCy"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(It,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:n({defaultMessage:"Skipped",id:"djZCU5enGS"})})]}):null},K6e=R.memo(({calendarOperations:e,sendStepResult:t,isFinished:n})=>{const r="calendar-operation-step",[s,a]=f.useState(n??!1),{$t:i}=Z(),l=DHt(),[c,u]=f.useState(0),[d,m]=f.useState(()=>Array(e.length).fill(null)),p=f.useRef(!1),h=f.useMemo(()=>e[c],[e,c]),g=f.useMemo(()=>h?.delete?.event?"rejected":"inverted",[h?.delete?.event]),y=f.useMemo(()=>h?h.delete?.event?i({defaultMessage:"Delete",id:"K3r6DQW7h+"}):i({defaultMessage:"Schedule",id:"hGQqkWwmJD"}):i({defaultMessage:"Schedule",id:"hGQqkWwmJD"}),[h,i]),x=e.length>1,v=f.useMemo(()=>({position:"absolute",bottom:16,right:16,zIndex:10}),[]),b=f.useCallback(()=>{u(S=>Math.max(S-1,0))},[]),_=f.useCallback(()=>{u(S=>Math.min(S+1,e.length-1))},[e.length]),w=f.useCallback(S=>{m(E=>{const M=[...E];M[c]=S;const k=M.findIndex(P=>P===null);if(M.every(P=>P!==null)&&!p.current){p.current=!0;const P=M.map(L=>L?.operations).filter(L=>Array.isArray(L)).flat();P.length>0?t({confirmed:!0,operations:P},r,!1):t({confirmed:!1},r,!1),a(!0)}else k!==-1&&u(k);return M})},[c,t,r]),C=f.useCallback(S=>{w(S)},[w]);return s?o.jsx(Ws,{icon:Ha,iconClassName:"text-super",text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):h?o.jsxs(H,{variant:"raised",className:"py-sm relative rounded-lg border",children:[o.jsx(q6e,{operation:JSON.parse(JSON.stringify(h)),isShowEditableComponentsEnabled:l,buttonVariant:g,buttonText:y,onConfirm:w,onSkip:C},`operation-${c}`),x&&o.jsxs(H,{style:v,className:"flex items-center gap-4",children:[o.jsx(FHt,{result:d[c]??null,isDeleteOperation:!!h?.delete?.event}),o.jsxs("span",{className:"text-xs font-medium",children:[o.jsx("span",{className:"text-foreground",children:c+1}),o.jsxs("span",{children:[" of ",e.length]})]}),o.jsxs(H,{className:"flex gap-2",children:[o.jsx(A6e,{disabled:c===0,onClick:b}),o.jsx(I6e,{disabled:c===e.length-1,onClick:_})]})]})]}):o.jsx(H,{variant:"raised",className:"py-sm relative rounded-lg border",children:o.jsx("div",{className:"p-4 text-center",children:i({defaultMessage:"No calendar operation available",id:"Hm6yv1Uz2P"})})})});K6e.displayName="CalendarOperationStep";const H0=.03,UHt=3,Vp=R.memo(({items:e,initialDisplayCount:t=UHt,stepDelay:n=H0,isFinished:r=!1,vertical:s=!1,truncate:a=!0,onCountChange:i})=>{const[l,c]=f.useState([]),[u,d]=f.useState(!1),m=f.useRef(null),p=f.useRef(!0),h=f.useRef(r),g=f.useRef(0);f.useEffect(()=>()=>{m.current&&clearTimeout(m.current)},[]),f.useEffect(()=>{if(i){const S=a&&(n!==H0?r&&l.length<e.length:l.length<e.length)?e.length:l.length;i(S)}},[l.length,e.length,r,n,a,i]),f.useEffect(()=>{const w=a?t:e.length;if(p.current)if(p.current=!1,e.length>0)if(r){const S=Math.min(w,e.length);c(e.slice(0,S)),g.current=S}else c([e[0]]),g.current=1;else c([]),g.current=0;if(u){c(e),g.current=e.length;return}if(r&&!h.current&&(m.current&&(clearTimeout(m.current),m.current=null),c(()=>{const S=Math.min(w,e.length),E=e.slice(0,S);return g.current=E.length,E})),h.current=r,m.current&&(clearTimeout(m.current),m.current=null),g.current>=w||g.current>=e.length)return;const C=()=>{let S=0;if(c(E=>E.length<e.length&&E.length<w?(S=E.length+1,g.current=S,[...E,e[E.length]]):(S=E.length,g.current=S,E)),S<e.length&&S<w){const E=r?H0:n;m.current=setTimeout(C,E*1e3)}};if(g.current>0){const S=r?H0:n;m.current=setTimeout(C,S*1e3)}else e.length>0&&(c([e[0]]),g.current=1)},[e,t,n,r,u,a]);const y={initial:{opacity:0,x:-3},animate:{opacity:1,x:0}},x=()=>{d(!0)},b=a&&(n!==H0?r&&l.length<e.length:l.length<e.length),_=f.useCallback(w=>{w.stopPropagation(),x()},[]);return o.jsxs("div",{className:`flex items-center ${s?"flex-col items-start gap-px":"gap-sm flex-wrap"}`,children:[l.map((w,C)=>o.jsx(ve.div,{className:s?"w-full":"inline-flex",variants:y,initial:"initial",animate:"animate",transition:{duration:.1,ease:va},children:w},C)),b&&o.jsx(H,{variant:"subtler",bgHover:"subtle",className:"py-xs cursor-pointer rounded-lg px-2.5",onClick:_,children:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:o.jsx(he,{defaultMessage:"+{count} more",id:"/zFGgPmQSV",values:{count:e.length-l.length}})})})]})});Vp.displayName="ResultsRenderer";const Ia=R.memo(({queries:e,icon:t=Hs,stepDelay:n,isFinished:r,initialDisplayCount:s=12,enableQueryLinks:a=!1})=>{const i=e.map((l,c)=>o.jsx(Ws,{icon:t,text:l,url:a?`/search/new?q=${encodeURIComponent(l)}`:void 0},c));return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(Vp,{items:i,initialDisplayCount:s,stepDelay:n,isFinished:r})})});Ia.displayName="SearchWebStep";const Y6e=R.memo(({operations:e})=>{const{$t:t,formatMessage:n}=Z(),r=f.useMemo(()=>{const i={created:0,updated:0,deleted:0,rejected:0};return e.forEach(l=>{switch(l.status?.toUpperCase()){case"CREATED":i.created++;break;case"UPDATED":i.updated++;break;case"DELETED":i.deleted++;break;case"REJECTED":i.rejected++;break}}),i},[e]),s=f.useMemo(()=>{const i=[];return r.created>0&&i.push({count:r.created,label:t({defaultMessage:"Created",id:"ORGv1Q6rL/"})}),r.updated>0&&i.push({count:r.updated,label:t({defaultMessage:"Updated",id:"xrk6zgu9jU"})}),r.deleted>0&&i.push({count:r.deleted,label:t({defaultMessage:"Deleted",id:"KQvWvDRI1B"})}),r.rejected>0&&i.push({count:r.rejected,label:t({defaultMessage:"Rejected",id:"5qaD7sDVxu"})}),i},[r,t]),a=f.useMemo(()=>s.length===0?[]:[s.map(i=>n({defaultMessage:"{count} {status}",id:"e6QlErEcyz"},{count:i.count,status:i.label})).join(", ")],[s,n]);return a.length===0?null:o.jsx(Ia,{icon:n_,queries:a})});Y6e.displayName="CalendarStatusSummary";const Q6e=R.memo(({step:e})=>{const t=e.content.clarification;return t?o.jsx("div",{className:"gap-sm flex flex-row",children:o.jsx(Ws,{icon:DDe,text:t})}):null});Q6e.displayName="ClarificationStep";var Gb;(function(e){e.Preview="preview",e.Assets="assets"})(Gb||(Gb={}));function Opn(){return{loading:!1,activeTab:Gb.Preview}}const Lpn=(e,t)=>Qr(t).with({type:"setLoading"},({loading:n,assetType:r})=>({...e,loading:n,loadingAssetType:r})).with({type:"setAsset"},({asset:n,result:r})=>({...e,asset:n,assetResult:r})).with({type:"setTab"},({tab:n})=>({...e,activeTab:n})).exhaustive(),BHt=we(async()=>{const{SideCanvasViewer:e}=await Q(async()=>{const{SideCanvasViewer:t}=await import("./SideCanvasViewer-CM_HORwV.js");return{SideCanvasViewer:t}},__vite__mapDeps([130,3,1,4,131,5,64,6,66,63,65]));return{default:e}}),X6e=Yt("CanvasContext",{openCanvas:()=>{},closeCanvas:()=>{},isCanvasOpen:!1,doCanvasAction:()=>{},setCanvasDispatch:()=>{},setCanvasState:()=>{}}),Tz=()=>{const e=f.useContext(X6e),t=AN();return f.useMemo(()=>({...e,canUseCanvas:t}),[t,e])},Z6e=R.memo(({children:e})=>{const[t,n]=f.useState(!1),r=f.useRef(void 0),[s,a]=f.useState(),i=f.useCallback(()=>{n(!0)},[]),l=f.useCallback(()=>{n(!1),r.current=void 0},[]),c=f.useRef([]),u=f.useCallback(p=>{r.current?r.current(p):c.current.push(p)},[]),d=f.useCallback(p=>{r.current=p,c.current.length>0&&p&&(c.current.forEach(h=>p(h)),c.current=[])},[]),m=f.useMemo(()=>({openCanvas:i,closeCanvas:l,isCanvasOpen:t,setCanvasDispatch:d,doCanvasAction:u,canvasState:s,setCanvasState:a}),[i,l,t,d,u,s]);return o.jsxs(X6e.Provider,{value:m,children:[e,o.jsx(Je,{children:t&&o.jsx(BHt,{})})]})});Z6e.displayName="CanvasStateProvider";const VHt=e=>{const t=e.asset_type;return t!==Mt.QUIZ&&t!==Mt.FLASHCARD},Dpn=e=>f.useMemo(()=>{if(!e)return{app:null,pdfAsset:null,docxAsset:null,codeFileAsset:null,chartAsset:null,xlsxAsset:null,pdfFileData:null,assetType:null,assetUuid:null};const t=e.pdf_file||null,n=t?{url:t.url,name:t.name||"Document"}:null;return{app:e.app||null,pdfAsset:t,docxAsset:e.docx_file||null,codeFileAsset:e.code_file||null,chartAsset:e.chart||null,xlsxAsset:e.xlsx_file||null,pdfFileData:n,assetType:e.asset_type,assetUuid:e.uuid}},[e]),Fpn=e=>e.app!==null,Upn=e=>e.docxAsset===null&&e.pdfFileData!==null,Bpn=e=>e.docxAsset!==null,Vpn=e=>e.xlsxAsset!==null,$pn=e=>e.codeFileAsset!==null,Wpn=e=>e.chartAsset!==null,Hpn=e=>e?e.asset_type===Mt.GENERATED_IMAGE&&e.generated_image!==null:!1,zpn=e=>e?e.asset_type===Mt.GENERATED_VIDEO&&e.generated_video!==null:!1,Gpn=e=>e?e.asset_type===Mt.CODE_ASSET&&e.code!==null:!1,qpn=e=>e?e.asset_type===Mt.APP||e.asset_type===Mt.PDF_FILE||e.asset_type===Mt.DOCX_FILE||e.asset_type===Mt.XLSX_FILE||e.asset_type===Mt.CHART||e.asset_type===Mt.CODE_FILE||e.asset_type===Mt.SLIDES:!1,$Ht=e=>{const{$t:t}=Z();return Qr(e?.asset_type).with(Mt.CODE_ASSET,()=>({description:t({defaultMessage:"Programming",id:"4MsdoHG9QN"}),title:t({defaultMessage:"Python",id:"/Z1NW3qKj6"}),Icon:Lg})).with(Mt.CHART,()=>({description:t({defaultMessage:"Code Interpreter Graph",id:"F3E5l9GC7U"}),title:t({defaultMessage:"Chart",id:"nFVuBOECC+"}),Icon:_P})).with(Mt.CODE_FILE,()=>({description:t({defaultMessage:"Generated File",id:"x6KEQZ7oaM"}),title:e?.code_file?.name??"",Icon:wu})).with(Mt.APP,()=>({description:t({defaultMessage:"Generated App",id:"t7mMyC1O7+"}),title:e?.app?.name??"",Icon:OD})).with(Mt.SLIDES,()=>({description:t({defaultMessage:"Presentation",id:"7zHbpiyvPE"}),title:e?.app?.name??"",Icon:yde})).with(Mt.GENERATED_IMAGE,()=>({description:"",title:t({defaultMessage:"Generated Image",id:"Kt4lbw5KkH"}),Icon:FDe})).with(Mt.GENERATED_VIDEO,()=>({description:"",title:t({defaultMessage:"Generated Video",id:"Gh4spqP8w0"}),Icon:LD})).with(Mt.PDF_FILE,()=>({description:t({defaultMessage:"PDF Document",id:"Idloyb3SW4"}),title:e?.pdf_file?.name??t({defaultMessage:"PDF Document",id:"Idloyb3SW4"}),Icon:Dm})).with(Mt.DOCX_FILE,()=>({description:t({defaultMessage:"Word Document",id:"q+bgjo7qbJ"}),title:e?.docx_file?.name??"",Icon:zk})).with(Mt.XLSX_FILE,()=>({description:t({defaultMessage:"Excel Spreadsheet",id:"eMPZOuxga0"}),title:e?.xlsx_file?.name??"",Icon:t_})).otherwise(()=>({description:"",title:t({defaultMessage:"Generated Asset",id:"Kc1J25+bKt"}),Icon:wu}))};var vr="-ms-",u1="-moz-",$n="-webkit-",J6e="comm",ON="rule",Nz="decl",WHt="@import",eIe="@keyframes",HHt="@layer",tIe=Math.abs,jz=String.fromCharCode,b7=Object.assign;function zHt(e,t){return Ts(e,0)^45?(((t<<2^Ts(e,0))<<2^Ts(e,1))<<2^Ts(e,2))<<2^Ts(e,3):0}function nIe(e){return e.trim()}function tu(e,t){return(e=t.exec(e))?e[0]:e}function cn(e,t,n){return e.replace(t,n)}function J2(e,t,n){return e.indexOf(t,n)}function Ts(e,t){return e.charCodeAt(t)|0}function Ay(e,t,n){return e.slice(t,n)}function Gl(e){return e.length}function rIe(e){return e.length}function bv(e,t){return t.push(e),e}function GHt(e,t){return e.map(t).join("")}function tle(e,t){return e.filter(function(n){return!tu(n,t)})}var LN=1,Iy=1,sIe=0,Ro=0,ss=0,qx="";function DN(e,t,n,r,s,a,i,l){return{value:e,root:t,parent:n,type:r,props:s,children:a,line:LN,column:Iy,length:i,return:"",siblings:l}}function fd(e,t){return b7(DN("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Sh(e){for(;e.root;)e=fd(e.root,{children:[e]});bv(e,e.siblings)}function qHt(){return ss}function KHt(){return ss=Ro>0?Ts(qx,--Ro):0,Iy--,ss===10&&(Iy=1,LN--),ss}function ol(){return ss=Ro<sIe?Ts(qx,Ro++):0,Iy++,ss===10&&(Iy=1,LN++),ss}function Am(){return Ts(qx,Ro)}function eE(){return Ro}function FN(e,t){return Ay(qx,e,t)}function _7(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function YHt(e){return LN=Iy=1,sIe=Gl(qx=e),Ro=0,[]}function QHt(e){return qx="",e}function _R(e){return nIe(FN(Ro-1,w7(e===91?e+2:e===40?e+1:e)))}function XHt(e){for(;(ss=Am())&&ss<33;)ol();return _7(e)>2||_7(ss)>3?"":" "}function ZHt(e,t){for(;--t&&ol()&&!(ss<48||ss>102||ss>57&&ss<65||ss>70&&ss<97););return FN(e,eE()+(t<6&&Am()==32&&ol()==32))}function w7(e){for(;ol();)switch(ss){case e:return Ro;case 34:case 39:e!==34&&e!==39&&w7(ss);break;case 40:e===41&&w7(e);break;case 92:ol();break}return Ro}function JHt(e,t){for(;ol()&&e+ss!==57;)if(e+ss===84&&Am()===47)break;return"/*"+FN(t,Ro-1)+"*"+jz(e===47?e:ol())}function ezt(e){for(;!_7(Am());)ol();return FN(e,Ro)}function tzt(e){return QHt(tE("",null,null,null,[""],e=YHt(e),0,[0],e))}function tE(e,t,n,r,s,a,i,l,c){for(var u=0,d=0,m=i,p=0,h=0,g=0,y=1,x=1,v=1,b=0,_="",w=s,C=a,S=r,E=_;x;)switch(g=b,b=ol()){case 40:if(g!=108&&Ts(E,m-1)==58){J2(E+=cn(_R(b),"&","&\f"),"&\f",tIe(u?l[u-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:E+=_R(b);break;case 9:case 10:case 13:case 32:E+=XHt(g);break;case 92:E+=ZHt(eE()-1,7);continue;case 47:switch(Am()){case 42:case 47:bv(nzt(JHt(ol(),eE()),t,n,c),c);break;default:E+="/"}break;case 123*y:l[u++]=Gl(E)*v;case 125*y:case 59:case 0:switch(b){case 0:case 125:x=0;case 59+d:v==-1&&(E=cn(E,/\f/g,"")),h>0&&Gl(E)-m&&bv(h>32?rle(E+";",r,n,m-1,c):rle(cn(E," ","")+";",r,n,m-2,c),c);break;case 59:E+=";";default:if(bv(S=nle(E,t,n,u,d,s,l,_,w=[],C=[],m,a),a),b===123)if(d===0)tE(E,t,S,S,w,a,m,l,C);else switch(p===99&&Ts(E,3)===110?100:p){case 100:case 108:case 109:case 115:tE(e,S,S,r&&bv(nle(e,S,S,0,0,s,l,_,s,w=[],m,C),C),s,C,m,l,r?w:C);break;default:tE(E,S,S,S,[""],C,0,l,C)}}u=d=h=0,y=v=1,_=E="",m=i;break;case 58:m=1+Gl(E),h=g;default:if(y<1){if(b==123)--y;else if(b==125&&y++==0&&KHt()==125)continue}switch(E+=jz(b),b*y){case 38:v=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(Gl(E)-1)*v,v=1;break;case 64:Am()===45&&(E+=_R(ol())),p=Am(),d=m=Gl(_=E+=ezt(eE())),b++;break;case 45:g===45&&Gl(E)==2&&(y=0)}}return a}function nle(e,t,n,r,s,a,i,l,c,u,d,m){for(var p=s-1,h=s===0?a:[""],g=rIe(h),y=0,x=0,v=0;y<r;++y)for(var b=0,_=Ay(e,p+1,p=tIe(x=i[y])),w=e;b<g;++b)(w=nIe(x>0?h[b]+" "+_:cn(_,/&\f/g,h[b])))&&(c[v++]=w);return DN(e,t,n,s===0?ON:l,c,u,d,m)}function nzt(e,t,n,r){return DN(e,t,n,J6e,jz(qHt()),Ay(e,2,-2),0,r)}function rle(e,t,n,r,s){return DN(e,t,n,Nz,Ay(e,0,r),Ay(e,r+1,-1),r,s)}function aIe(e,t,n){switch(zHt(e,t)){case 5103:return $n+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $n+e+e;case 4789:return u1+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $n+e+u1+e+vr+e+e;case 5936:switch(Ts(e,t+11)){case 114:return $n+e+vr+cn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $n+e+vr+cn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $n+e+vr+cn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return $n+e+vr+e+e;case 6165:return $n+e+vr+"flex-"+e+e;case 5187:return $n+e+cn(e,/(\w+).+(:[^]+)/,$n+"box-$1$2"+vr+"flex-$1$2")+e;case 5443:return $n+e+vr+"flex-item-"+cn(e,/flex-|-self/g,"")+(tu(e,/flex-|baseline/)?"":vr+"grid-row-"+cn(e,/flex-|-self/g,""))+e;case 4675:return $n+e+vr+"flex-line-pack"+cn(e,/align-content|flex-|-self/g,"")+e;case 5548:return $n+e+vr+cn(e,"shrink","negative")+e;case 5292:return $n+e+vr+cn(e,"basis","preferred-size")+e;case 6060:return $n+"box-"+cn(e,"-grow","")+$n+e+vr+cn(e,"grow","positive")+e;case 4554:return $n+cn(e,/([^-])(transform)/g,"$1"+$n+"$2")+e;case 6187:return cn(cn(cn(e,/(zoom-|grab)/,$n+"$1"),/(image-set)/,$n+"$1"),e,"")+e;case 5495:case 3959:return cn(e,/(image-set\([^]*)/,$n+"$1$`$1");case 4968:return cn(cn(e,/(.+:)(flex-)?(.*)/,$n+"box-pack:$3"+vr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$n+e+e;case 4200:if(!tu(e,/flex-|baseline/))return vr+"grid-column-align"+Ay(e,t)+e;break;case 2592:case 3360:return vr+cn(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(r,s){return t=s,tu(r.props,/grid-\w+-end/)})?~J2(e+(n=n[t].value),"span",0)?e:vr+cn(e,"-start","")+e+vr+"grid-row-span:"+(~J2(n,"span",0)?tu(n,/\d+/):+tu(n,/\d+/)-+tu(e,/\d+/))+";":vr+cn(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(r){return tu(r.props,/grid-\w+-start/)})?e:vr+cn(cn(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return cn(e,/(.+)-inline(.+)/,$n+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Gl(e)-1-t>6)switch(Ts(e,t+1)){case 109:if(Ts(e,t+4)!==45)break;case 102:return cn(e,/(.+:)(.+)-([^]+)/,"$1"+$n+"$2-$3$1"+u1+(Ts(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~J2(e,"stretch",0)?aIe(cn(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return cn(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,s,a,i,l,c,u){return vr+s+":"+a+u+(i?vr+s+"-span:"+(l?c:+c-+a)+u:"")+e});case 4949:if(Ts(e,t+6)===121)return cn(e,":",":"+$n)+e;break;case 6444:switch(Ts(e,Ts(e,14)===45?18:11)){case 120:return cn(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+$n+(Ts(e,14)===45?"inline-":"")+"box$3$1"+$n+"$2$3$1"+vr+"$2box$3")+e;case 100:return cn(e,":",":"+vr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return cn(e,"scroll-","scroll-snap-")+e}return e}function vk(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function rzt(e,t,n,r){switch(e.type){case HHt:if(e.children.length)break;case WHt:case Nz:return e.return=e.return||e.value;case J6e:return"";case eIe:return e.return=e.value+"{"+vk(e.children,r)+"}";case ON:if(!Gl(e.value=e.props.join(",")))return""}return Gl(n=vk(e.children,r))?e.return=e.value+"{"+n+"}":""}function szt(e){var t=rIe(e);return function(n,r,s,a){for(var i="",l=0;l<t;l++)i+=e[l](n,r,s,a)||"";return i}}function azt(e){return function(t){t.root||(t=t.return)&&e(t)}}function izt(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Nz:e.return=aIe(e.value,e.length,n);return;case eIe:return vk([fd(e,{value:cn(e.value,"@","@"+$n)})],r);case ON:if(e.length)return GHt(n=e.props,function(s){switch(tu(s,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Sh(fd(e,{props:[cn(s,/:(read-\w+)/,":"+u1+"$1")]})),Sh(fd(e,{props:[s]})),b7(e,{props:tle(n,r)});break;case"::placeholder":Sh(fd(e,{props:[cn(s,/:(plac\w+)/,":"+$n+"input-$1")]})),Sh(fd(e,{props:[cn(s,/:(plac\w+)/,":"+u1+"$1")]})),Sh(fd(e,{props:[cn(s,/:(plac\w+)/,vr+"input-$1")]})),Sh(fd(e,{props:[s]})),b7(e,{props:tle(n,r)});break}return""})}}var ozt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ui={},Ry=typeof process<"u"&&Ui!==void 0&&(Ui.REACT_APP_SC_ATTR||Ui.SC_ATTR)||"data-styled",iIe="active",oIe="data-styled-version",UN="6.1.15",Az=`/*!sc*/
`,bk=typeof window<"u"&&"HTMLElement"in window,lzt=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Ui!==void 0&&Ui.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Ui.REACT_APP_SC_DISABLE_SPEEDY!==""?Ui.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Ui.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Ui!==void 0&&Ui.SC_DISABLE_SPEEDY!==void 0&&Ui.SC_DISABLE_SPEEDY!==""&&Ui.SC_DISABLE_SPEEDY!=="false"&&Ui.SC_DISABLE_SPEEDY),BN=Object.freeze([]),Py=Object.freeze({});function lIe(e,t,n){return n===void 0&&(n=Py),e.theme!==n.theme&&e.theme||t||n.theme}var cIe=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),czt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,uzt=/(^-|-$)/g;function sle(e){return e.replace(czt,"-").replace(uzt,"")}var dzt=/(a)(d)/gi,ZS=52,ale=function(e){return String.fromCharCode(e+(e>25?39:97))};function C7(e){var t,n="";for(t=Math.abs(e);t>ZS;t=t/ZS|0)n=ale(t%ZS)+n;return(ale(t%ZS)+n).replace(dzt,"$1-$2")}var wR,uIe=5381,tg=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},dIe=function(e){return tg(uIe,e)};function fzt(e){return C7(dIe(e)>>>0)}function fIe(e){return e.displayName||e.name||"Component"}function CR(e){return typeof e=="string"&&!0}var mIe=typeof Symbol=="function"&&Symbol.for,pIe=mIe?Symbol.for("react.memo"):60115,mzt=mIe?Symbol.for("react.forward_ref"):60112,pzt={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hzt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},hIe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gzt=((wR={})[mzt]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wR[pIe]=hIe,wR);function ile(e){return("type"in(t=e)&&t.type.$$typeof)===pIe?hIe:"$$typeof"in e?gzt[e.$$typeof]:pzt;var t}var yzt=Object.defineProperty,xzt=Object.getOwnPropertyNames,ole=Object.getOwnPropertySymbols,vzt=Object.getOwnPropertyDescriptor,bzt=Object.getPrototypeOf,lle=Object.prototype;function Iz(e,t,n){if(typeof t!="string"){if(lle){var r=bzt(t);r&&r!==lle&&Iz(e,r,n)}var s=xzt(t);ole&&(s=s.concat(ole(t)));for(var a=ile(e),i=ile(t),l=0;l<s.length;++l){var c=s[l];if(!(c in hzt||n&&n[c]||i&&c in i||a&&c in a)){var u=vzt(t,c);try{yzt(e,c,u)}catch{}}}}return e}function Oy(e){return typeof e=="function"}function Rz(e){return typeof e=="object"&&"styledComponentId"in e}function ym(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function cle(e,t){if(e.length===0)return"";for(var n=e[0],r=1;r<e.length;r++)n+=e[r];return n}function qb(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function S7(e,t,n){if(n===void 0&&(n=!1),!n&&!qb(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=S7(e[r],t[r]);else if(qb(t))for(var r in t)e[r]=S7(e[r],t[r]);return e}function Pz(e,t){Object.defineProperty(e,"toString",{value:t})}function Qw(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var _zt=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var n=0,r=0;r<t;r++)n+=this.groupSizes[r];return n},e.prototype.insertRules=function(t,n){if(t>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,a=s;t>=a;)if((a<<=1)<0)throw Qw(16,"".concat(t));this.groupSizes=new Uint32Array(a),this.groupSizes.set(r),this.length=a;for(var i=s;i<a;i++)this.groupSizes[i]=0}for(var l=this.indexOfGroup(t+1),c=(i=0,n.length);i<c;i++)this.tag.insertRule(l,n[i])&&(this.groupSizes[t]++,l++)},e.prototype.clearGroup=function(t){if(t<this.length){var n=this.groupSizes[t],r=this.indexOfGroup(t),s=r+n;this.groupSizes[t]=0;for(var a=r;a<s;a++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(t){var n="";if(t>=this.length||this.groupSizes[t]===0)return n;for(var r=this.groupSizes[t],s=this.indexOfGroup(t),a=s+r,i=s;i<a;i++)n+="".concat(this.tag.getRule(i)).concat(Az);return n},e}(),nE=new Map,_k=new Map,rE=1,JS=function(e){if(nE.has(e))return nE.get(e);for(;_k.has(rE);)rE++;var t=rE++;return nE.set(e,t),_k.set(t,e),t},wzt=function(e,t){rE=t+1,nE.set(e,t),_k.set(t,e)},Czt="style[".concat(Ry,"][").concat(oIe,'="').concat(UN,'"]'),Szt=new RegExp("^".concat(Ry,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ezt=function(e,t,n){for(var r,s=n.split(","),a=0,i=s.length;a<i;a++)(r=s[a])&&e.registerName(t,r)},Mzt=function(e,t){for(var n,r=((n=t.textContent)!==null&&n!==void 0?n:"").split(Az),s=[],a=0,i=r.length;a<i;a++){var l=r[a].trim();if(l){var c=l.match(Szt);if(c){var u=0|parseInt(c[1],10),d=c[2];u!==0&&(wzt(d,u),Ezt(e,d,c[3]),e.getTag().insertRules(u,s)),s.length=0}else s.push(l)}}},ule=function(e){for(var t=document.querySelectorAll(Czt),n=0,r=t.length;n<r;n++){var s=t[n];s&&s.getAttribute(Ry)!==iIe&&(Mzt(e,s),s.parentNode&&s.parentNode.removeChild(s))}};function kzt(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var gIe=function(e){var t=document.head,n=e||t,r=document.createElement("style"),s=function(l){var c=Array.from(l.querySelectorAll("style[".concat(Ry,"]")));return c[c.length-1]}(n),a=s!==void 0?s.nextSibling:null;r.setAttribute(Ry,iIe),r.setAttribute(oIe,UN);var i=kzt();return i&&r.setAttribute("nonce",i),n.insertBefore(r,a),r},Tzt=function(){function e(t){this.element=gIe(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,s=0,a=r.length;s<a;s++){var i=r[s];if(i.ownerNode===n)return i}throw Qw(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,n){try{return this.sheet.insertRule(n,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var n=this.sheet.cssRules[t];return n&&n.cssText?n.cssText:""},e}(),Nzt=function(){function e(t){this.element=gIe(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,n){if(t<=this.length&&t>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),jzt=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,n){return t<=this.length&&(this.rules.splice(t,0,n),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),dle=bk,Azt={isServer:!bk,useCSSOMInjection:!lzt},yIe=function(){function e(t,n,r){t===void 0&&(t=Py),n===void 0&&(n={});var s=this;this.options=Gi(Gi({},Azt),t),this.gs=n,this.names=new Map(r),this.server=!!t.isServer,!this.server&&bk&&dle&&(dle=!1,ule(this)),Pz(this,function(){return function(a){for(var i=a.getTag(),l=i.length,c="",u=function(m){var p=function(v){return _k.get(v)}(m);if(p===void 0)return"continue";var h=a.names.get(p),g=i.getGroup(m);if(h===void 0||!h.size||g.length===0)return"continue";var y="".concat(Ry,".g").concat(m,'[id="').concat(p,'"]'),x="";h!==void 0&&h.forEach(function(v){v.length>0&&(x+="".concat(v,","))}),c+="".concat(g).concat(y,'{content:"').concat(x,'"}').concat(Az)},d=0;d<l;d++)u(d);return c}(s)})}return e.registerId=function(t){return JS(t)},e.prototype.rehydrate=function(){!this.server&&bk&&ule(this)},e.prototype.reconstructWithOptions=function(t,n){return n===void 0&&(n=!0),new e(Gi(Gi({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(n){var r=n.useCSSOMInjection,s=n.target;return n.isServer?new jzt(s):r?new Tzt(s):new Nzt(s)}(this.options),new _zt(t)));var t},e.prototype.hasNameForId=function(t,n){return this.names.has(t)&&this.names.get(t).has(n)},e.prototype.registerName=function(t,n){if(JS(t),this.names.has(t))this.names.get(t).add(n);else{var r=new Set;r.add(n),this.names.set(t,r)}},e.prototype.insertRules=function(t,n,r){this.registerName(t,n),this.getTag().insertRules(JS(t),r)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(JS(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Izt=/&/g,Rzt=/^\s*\/\/.*$/gm;function xIe(e,t){return e.map(function(n){return n.type==="rule"&&(n.value="".concat(t," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(t," ")),n.props=n.props.map(function(r){return"".concat(t," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=xIe(n.children,t)),n})}function Pzt(e){var t,n,r,s=Py,a=s.options,i=a===void 0?Py:a,l=s.plugins,c=l===void 0?BN:l,u=function(p,h,g){return g.startsWith(n)&&g.endsWith(n)&&g.replaceAll(n,"").length>0?".".concat(t):p},d=c.slice();d.push(function(p){p.type===ON&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(Izt,n).replace(r,u))}),i.prefix&&d.push(izt),d.push(rzt);var m=function(p,h,g,y){h===void 0&&(h=""),g===void 0&&(g=""),y===void 0&&(y="&"),t=y,n=h,r=new RegExp("\\".concat(n,"\\b"),"g");var x=p.replace(Rzt,""),v=tzt(g||h?"".concat(g," ").concat(h," { ").concat(x," }"):x);i.namespace&&(v=xIe(v,i.namespace));var b=[];return vk(v,szt(d.concat(azt(function(_){return b.push(_)})))),b};return m.hash=c.length?c.reduce(function(p,h){return h.name||Qw(15),tg(p,h.name)},uIe).toString():"",m}var Ozt=new yIe,E7=Pzt(),vIe=R.createContext({shouldForwardProp:void 0,styleSheet:Ozt,stylis:E7});vIe.Consumer;R.createContext(void 0);function fle(){return f.useContext(vIe)}var Lzt=function(){function e(t,n){var r=this;this.inject=function(s,a){a===void 0&&(a=E7);var i=r.name+a.hash;s.hasNameForId(r.id,i)||s.insertRules(r.id,i,a(r.rules,i,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=n,Pz(this,function(){throw Qw(12,String(r.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=E7),this.name+t.hash},e}(),Dzt=function(e){return e>="A"&&e<="Z"};function mle(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(n===1&&r==="-"&&e[0]==="-")return e;Dzt(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var bIe=function(e){return e==null||e===!1||e===""},_Ie=function(e){var t,n,r=[];for(var s in e){var a=e[s];e.hasOwnProperty(s)&&!bIe(a)&&(Array.isArray(a)&&a.isCss||Oy(a)?r.push("".concat(mle(s),":"),a,";"):qb(a)?r.push.apply(r,lE(lE(["".concat(s," {")],_Ie(a),!1),["}"],!1)):r.push("".concat(mle(s),": ").concat((t=s,(n=a)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||t in ozt||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Im(e,t,n,r){if(bIe(e))return[];if(Rz(e))return[".".concat(e.styledComponentId)];if(Oy(e)){if(!Oy(a=e)||a.prototype&&a.prototype.isReactComponent||!t)return[e];var s=e(t);return Im(s,t,n,r)}var a;return e instanceof Lzt?n?(e.inject(n,r),[e.getName(r)]):[e]:qb(e)?_Ie(e):Array.isArray(e)?Array.prototype.concat.apply(BN,e.map(function(i){return Im(i,t,n,r)})):[e.toString()]}function Fzt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Oy(n)&&!Rz(n))return!1}return!0}var Uzt=dIe(UN),Bzt=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&Fzt(t),this.componentId=n,this.baseHash=tg(Uzt,n),this.baseStyle=r,yIe.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))s=ym(s,this.staticRulesId);else{var a=cle(Im(this.rules,t,n,r)),i=C7(tg(this.baseHash,a)>>>0);if(!n.hasNameForId(this.componentId,i)){var l=r(a,".".concat(i),void 0,this.componentId);n.insertRules(this.componentId,i,l)}s=ym(s,i),this.staticRulesId=i}else{for(var c=tg(this.baseHash,r.hash),u="",d=0;d<this.rules.length;d++){var m=this.rules[d];if(typeof m=="string")u+=m;else if(m){var p=cle(Im(m,t,n,r));c=tg(c,p+d),u+=p}}if(u){var h=C7(c>>>0);n.hasNameForId(this.componentId,h)||n.insertRules(this.componentId,h,r(u,".".concat(h),void 0,this.componentId)),s=ym(s,h)}}return s},e}(),Oz=R.createContext(void 0);Oz.Consumer;var SR={};function Vzt(e,t,n){var r=Rz(e),s=e,a=!CR(e),i=t.attrs,l=i===void 0?BN:i,c=t.componentId,u=c===void 0?function(w,C){var S=typeof w!="string"?"sc":sle(w);SR[S]=(SR[S]||0)+1;var E="".concat(S,"-").concat(fzt(UN+S+SR[S]));return C?"".concat(C,"-").concat(E):E}(t.displayName,t.parentComponentId):c,d=t.displayName,m=d===void 0?function(w){return CR(w)?"styled.".concat(w):"Styled(".concat(fIe(w),")")}(e):d,p=t.displayName&&t.componentId?"".concat(sle(t.displayName),"-").concat(t.componentId):t.componentId||u,h=r&&s.attrs?s.attrs.concat(l).filter(Boolean):l,g=t.shouldForwardProp;if(r&&s.shouldForwardProp){var y=s.shouldForwardProp;if(t.shouldForwardProp){var x=t.shouldForwardProp;g=function(w,C){return y(w,C)&&x(w,C)}}else g=y}var v=new Bzt(n,p,r?s.componentStyle:void 0);function b(w,C){return function(S,E,M){var k=S.attrs,N=S.componentStyle,P=S.defaultProps,L=S.foldedComponentIds,O=S.styledComponentId,A=S.target,j=R.useContext(Oz),T=fle(),I=S.shouldForwardProp||T.shouldForwardProp,U=lIe(E,j,P)||Py,B=function(q,Y,G){for(var J,K=Gi(Gi({},Y),{className:void 0,theme:G}),te=0;te<q.length;te+=1){var re=Oy(J=q[te])?J(K):J;for(var se in re)K[se]=se==="className"?ym(K[se],re[se]):se==="style"?Gi(Gi({},K[se]),re[se]):re[se]}return Y.className&&(K.className=ym(K.className,Y.className)),K}(k,E,U),D=B.as||A,W={};for(var z in B)B[z]===void 0||z[0]==="$"||z==="as"||z==="theme"&&B.theme===U||(z==="forwardedAs"?W.as=B.forwardedAs:I&&!I(z,D)||(W[z]=B[z]));var $=function(q,Y){var G=fle(),J=q.generateAndInjectStyles(Y,G.styleSheet,G.stylis);return J}(N,B),X=ym(L,O);return $&&(X+=" "+$),B.className&&(X+=" "+B.className),W[CR(D)&&!cIe.has(D)?"class":"className"]=X,M&&(W.ref=M),f.createElement(D,W)}(_,w,C)}b.displayName=m;var _=R.forwardRef(b);return _.attrs=h,_.componentStyle=v,_.displayName=m,_.shouldForwardProp=g,_.foldedComponentIds=r?ym(s.foldedComponentIds,s.styledComponentId):"",_.styledComponentId=p,_.target=r?s.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(w){this._foldedDefaultProps=r?function(C){for(var S=[],E=1;E<arguments.length;E++)S[E-1]=arguments[E];for(var M=0,k=S;M<k.length;M++)S7(C,k[M],!0);return C}({},s.defaultProps,w):w}}),Pz(_,function(){return".".concat(_.styledComponentId)}),a&&Iz(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function ple(e,t){for(var n=[e[0]],r=0,s=t.length;r<s;r+=1)n.push(t[r],e[r+1]);return n}var hle=function(e){return Object.assign(e,{isCss:!0})};function $zt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Oy(e)||qb(e))return hle(Im(ple(BN,lE([e],t,!0))));var r=e;return t.length===0&&r.length===1&&typeof r[0]=="string"?Im(r):hle(Im(ple(r,t)))}function M7(e,t,n){if(n===void 0&&(n=Py),!t)throw Qw(1,t);var r=function(s){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];return e(t,n,$zt.apply(void 0,lE([s],a,!1)))};return r.attrs=function(s){return M7(e,t,Gi(Gi({},n),{attrs:Array.prototype.concat(n.attrs,s).filter(Boolean)}))},r.withConfig=function(s){return M7(e,t,Gi(Gi({},n),s))},r}var wIe=function(e){return M7(Vzt,e)},VN=wIe;cIe.forEach(function(e){VN[e]=wIe(e)});function Wzt(e){var t=R.forwardRef(function(n,r){var s=lIe(n,R.useContext(Oz),e.defaultProps);return R.createElement(e,Gi({},n,{theme:s,ref:r}))});return t.displayName="WithTheme(".concat(fIe(e),")"),Iz(t,e)}function Hzt(e,t){if(e==null)return{};var n,r,s=Tye(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function zzt(e){if(Array.isArray(e))return m8(e)}function Gzt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qzt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k7(e){return zzt(e)||Gzt(e)||bXe(e)||qzt()}function gle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ng(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gle(Object(n),!0).forEach(function(r){Xc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gle(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kzt(e){var t=e.length;if(t===0||t===1)return e;if(t===2)return[e[0],e[1],"".concat(e[0],".").concat(e[1]),"".concat(e[1],".").concat(e[0])];if(t===3)return[e[0],e[1],e[2],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0])];if(t>=4)return[e[0],e[1],e[2],e[3],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[2],".").concat(e[3]),"".concat(e[3],".").concat(e[0]),"".concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[0]),"".concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[3],".").concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[2],".").concat(e[1],".").concat(e[0])]}var ER={};function Yzt(e){if(e.length===0||e.length===1)return e;var t=e.join(".");return ER[t]||(ER[t]=Kzt(e)),ER[t]}function Qzt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.filter(function(a){return a!=="token"}),s=Yzt(r);return s.reduce(function(a,i){return ng(ng({},a),n[i])},t)}function yle(e){return e.join(" ")}function Xzt(e,t){var n=0;return function(r){return n+=1,r.map(function(s,a){return CIe({node:s,stylesheet:e,useInlineStyles:t,key:"code-segment-".concat(n,"-").concat(a)})})}}function CIe(e){var t=e.node,n=e.stylesheet,r=e.style,s=r===void 0?{}:r,a=e.useInlineStyles,i=e.key,l=t.properties,c=t.type,u=t.tagName,d=t.value;if(c==="text")return d;if(u){var m=Xzt(n,a),p;if(!a)p=ng(ng({},l),{},{className:yle(l.className)});else{var h=Object.keys(n).reduce(function(v,b){return b.split(".").forEach(function(_){v.includes(_)||v.push(_)}),v},[]),g=l.className&&l.className.includes("token")?["token"]:[],y=l.className&&g.concat(l.className.filter(function(v){return!h.includes(v)}));p=ng(ng({},l),{},{className:yle(y)||void 0,style:Qzt(l.className,Object.assign({},l.style,s),n)})}var x=m(t.children);return R.createElement(u,rb({key:i},p),x)}}const Zzt=function(e,t){var n=e.listLanguages();return n.indexOf(t)!==-1};var Jzt=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function xle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xle(Object(n),!0).forEach(function(r){Xc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xle(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var eGt=/\n/g;function tGt(e){return e.match(eGt)}function nGt(e){var t=e.lines,n=e.startingLineNumber,r=e.style;return t.map(function(s,a){var i=a+n;return R.createElement("span",{key:"line-".concat(a),className:"react-syntax-highlighter-line-number",style:typeof r=="function"?r(i):r},"".concat(i,`
`))})}function rGt(e){var t=e.codeString,n=e.codeStyle,r=e.containerStyle,s=r===void 0?{float:"left",paddingRight:"10px"}:r,a=e.numberStyle,i=a===void 0?{}:a,l=e.startingLineNumber;return R.createElement("code",{style:Object.assign({},n,s)},nGt({lines:t.replace(/\n$/,"").split(`
`),style:i,startingLineNumber:l}))}function sGt(e){return"".concat(e.toString().length,".25em")}function SIe(e,t){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(e),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:t},children:[{type:"text",value:e}]}}function EIe(e,t,n){var r={display:"inline-block",minWidth:sGt(n),paddingRight:"1em",textAlign:"right",userSelect:"none"},s=typeof e=="function"?e(t):e,a=kd(kd({},r),s);return a}function sE(e){var t=e.children,n=e.lineNumber,r=e.lineNumberStyle,s=e.largestLineNumber,a=e.showInlineLineNumbers,i=e.lineProps,l=i===void 0?{}:i,c=e.className,u=c===void 0?[]:c,d=e.showLineNumbers,m=e.wrapLongLines,p=e.wrapLines,h=p===void 0?!1:p,g=h?kd({},typeof l=="function"?l(n):l):{};if(g.className=g.className?[].concat(k7(g.className.trim().split(/\s+/)),k7(u)):u,n&&a){var y=EIe(r,n,s);t.unshift(SIe(n,y))}return m&d&&(g.style=kd({display:"flex"},g.style)),{type:"element",tagName:"span",properties:g,children:t}}function MIe(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=0;r<e.length;r++){var s=e[r];if(s.type==="text")n.push(sE({children:[s],className:k7(new Set(t))}));else if(s.children){var a=t.concat(s.properties.className);MIe(s.children,a).forEach(function(i){return n.push(i)})}}return n}function aGt(e,t,n,r,s,a,i,l,c){var u,d=MIe(e.value),m=[],p=-1,h=0;function g(C,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return sE({children:C,lineNumber:S,lineNumberStyle:l,largestLineNumber:i,showInlineLineNumbers:s,lineProps:n,className:E,showLineNumbers:r,wrapLongLines:c,wrapLines:t})}function y(C,S){if(r&&S&&s){var E=EIe(l,S,i);C.unshift(SIe(S,E))}return C}function x(C,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return t||E.length>0?g(C,S,E):y(C,S)}for(var v=function(){var S=d[h],E=S.children[0].value,M=tGt(E);if(M){var k=E.split(`
`);k.forEach(function(N,P){var L=r&&m.length+a,O={type:"text",value:"".concat(N,`
`)};if(P===0){var A=d.slice(p+1,h).concat(sE({children:[O],className:S.properties.className})),j=x(A,L);m.push(j)}else if(P===k.length-1){var T=d[h+1]&&d[h+1].children&&d[h+1].children[0],I={type:"text",value:"".concat(N)};if(T){var U=sE({children:[I],className:S.properties.className});d.splice(h+1,0,U)}else{var B=[I],D=x(B,L,S.properties.className);m.push(D)}}else{var W=[O],z=x(W,L,S.properties.className);m.push(z)}}),p=h}h++};h<d.length;)v();if(p!==d.length-1){var b=d.slice(p+1,d.length);if(b&&b.length){var _=r&&m.length+a,w=x(b,_);m.push(w)}}return t?m:(u=[]).concat.apply(u,m)}function iGt(e){var t=e.rows,n=e.stylesheet,r=e.useInlineStyles;return t.map(function(s,a){return CIe({node:s,stylesheet:n,useInlineStyles:r,key:"code-segement".concat(a)})})}function kIe(e){return e&&typeof e.highlightAuto<"u"}function oGt(e){var t=e.astGenerator,n=e.language,r=e.code,s=e.defaultCodeValue;if(kIe(t)){var a=Zzt(t,n);return n==="text"?{value:s,language:"text"}:a?t.highlight(n,r):t.highlightAuto(r)}try{return n&&n!=="text"?{value:t.highlight(r,n)}:{value:s}}catch{return{value:s}}}function lGt(e,t){return function(r){var s=r.language,a=r.children,i=r.style,l=i===void 0?t:i,c=r.customStyle,u=c===void 0?{}:c,d=r.codeTagProps,m=d===void 0?{className:s?"language-".concat(s):void 0,style:kd(kd({},l['code[class*="language-"]']),l['code[class*="language-'.concat(s,'"]')])}:d,p=r.useInlineStyles,h=p===void 0?!0:p,g=r.showLineNumbers,y=g===void 0?!1:g,x=r.showInlineLineNumbers,v=x===void 0?!0:x,b=r.startingLineNumber,_=b===void 0?1:b,w=r.lineNumberContainerStyle,C=r.lineNumberStyle,S=C===void 0?{}:C,E=r.wrapLines,M=r.wrapLongLines,k=M===void 0?!1:M,N=r.lineProps,P=N===void 0?{}:N,L=r.renderer,O=r.PreTag,A=O===void 0?"pre":O,j=r.CodeTag,T=j===void 0?"code":j,I=r.code,U=I===void 0?(Array.isArray(a)?a[0]:a)||"":I,B=r.astGenerator,D=Hzt(r,Jzt);B=B||e;var W=y?R.createElement(rGt,{containerStyle:w,codeStyle:m.style||{},numberStyle:S,startingLineNumber:_,codeString:U}):null,z=l.hljs||l['pre[class*="language-"]']||{backgroundColor:"#fff"},$=kIe(B)?"hljs":"prismjs",X=h?Object.assign({},D,{style:Object.assign({},z,u)}):Object.assign({},D,{className:D.className?"".concat($," ").concat(D.className):$,style:Object.assign({},u)});if(k?m.style=kd({whiteSpace:"pre-wrap"},m.style):m.style=kd({whiteSpace:"pre"},m.style),!B)return R.createElement(A,X,W,R.createElement(T,m,U));(E===void 0&&L||k)&&(E=!0),L=L||iGt;var q=[{type:"text",value:U}],Y=oGt({astGenerator:B,language:s,code:U,defaultCodeValue:q});Y.language===null&&(Y.value=q);var G=Y.value.length;G===1&&Y.value[0].type==="text"&&(G=Y.value[0].value.split(`
`).length);var J=G+_,K=aGt(Y,E,P,y,v,_,J,S,k);return R.createElement(A,X,R.createElement(T,m,!v&&W,L({rows:K,stylesheet:l,useInlineStyles:h})))}}function vle(e,t,n,r,s,a,i){try{var l=e[a](i),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,s)}function TIe(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var a=e.apply(t,n);function i(c){vle(a,r,s,i,l,"next",c)}function l(c){vle(a,r,s,i,l,"throw",c)}i(void 0)})}}function T7(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */T7=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(T,I,U){T[I]=U.value},a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(T,I,U){return Object.defineProperty(T,I,{value:U,enumerable:!0,configurable:!0,writable:!0}),T[I]}try{u({},"")}catch{u=function(U,B,D){return U[B]=D}}function d(T,I,U,B){var D=I&&I.prototype instanceof v?I:v,W=Object.create(D.prototype),z=new A(B||[]);return s(W,"_invoke",{value:N(T,U,z)}),W}function m(T,I,U){try{return{type:"normal",arg:T.call(I,U)}}catch(B){return{type:"throw",arg:B}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",g="executing",y="completed",x={};function v(){}function b(){}function _(){}var w={};u(w,i,function(){return this});var C=Object.getPrototypeOf,S=C&&C(C(j([])));S&&S!==n&&r.call(S,i)&&(w=S);var E=_.prototype=v.prototype=Object.create(w);function M(T){["next","throw","return"].forEach(function(I){u(T,I,function(U){return this._invoke(I,U)})})}function k(T,I){function U(D,W,z,$){var X=m(T[D],T,W);if(X.type!=="throw"){var q=X.arg,Y=q.value;return Y&&Ga(Y)=="object"&&r.call(Y,"__await")?I.resolve(Y.__await).then(function(G){U("next",G,z,$)},function(G){U("throw",G,z,$)}):I.resolve(Y).then(function(G){q.value=G,z(q)},function(G){return U("throw",G,z,$)})}$(X.arg)}var B;s(this,"_invoke",{value:function(W,z){function $(){return new I(function(X,q){U(W,z,X,q)})}return B=B?B.then($,$):$()}})}function N(T,I,U){var B=p;return function(D,W){if(B===g)throw Error("Generator is already running");if(B===y){if(D==="throw")throw W;return{value:e,done:!0}}for(U.method=D,U.arg=W;;){var z=U.delegate;if(z){var $=P(z,U);if($){if($===x)continue;return $}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(B===p)throw B=y,U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);B=g;var X=m(T,I,U);if(X.type==="normal"){if(B=U.done?y:h,X.arg===x)continue;return{value:X.arg,done:U.done}}X.type==="throw"&&(B=y,U.method="throw",U.arg=X.arg)}}}function P(T,I){var U=I.method,B=T.iterator[U];if(B===e)return I.delegate=null,U==="throw"&&T.iterator.return&&(I.method="return",I.arg=e,P(T,I),I.method==="throw")||U!=="return"&&(I.method="throw",I.arg=new TypeError("The iterator does not provide a '"+U+"' method")),x;var D=m(B,T.iterator,I.arg);if(D.type==="throw")return I.method="throw",I.arg=D.arg,I.delegate=null,x;var W=D.arg;return W?W.done?(I[T.resultName]=W.value,I.next=T.nextLoc,I.method!=="return"&&(I.method="next",I.arg=e),I.delegate=null,x):W:(I.method="throw",I.arg=new TypeError("iterator result is not an object"),I.delegate=null,x)}function L(T){var I={tryLoc:T[0]};1 in T&&(I.catchLoc=T[1]),2 in T&&(I.finallyLoc=T[2],I.afterLoc=T[3]),this.tryEntries.push(I)}function O(T){var I=T.completion||{};I.type="normal",delete I.arg,T.completion=I}function A(T){this.tryEntries=[{tryLoc:"root"}],T.forEach(L,this),this.reset(!0)}function j(T){if(T||T===""){var I=T[i];if(I)return I.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length)){var U=-1,B=function D(){for(;++U<T.length;)if(r.call(T,U))return D.value=T[U],D.done=!1,D;return D.value=e,D.done=!0,D};return B.next=B}}throw new TypeError(Ga(T)+" is not iterable")}return b.prototype=_,s(E,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(T){var I=typeof T=="function"&&T.constructor;return!!I&&(I===b||(I.displayName||I.name)==="GeneratorFunction")},t.mark=function(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,_):(T.__proto__=_,u(T,c,"GeneratorFunction")),T.prototype=Object.create(E),T},t.awrap=function(T){return{__await:T}},M(k.prototype),u(k.prototype,l,function(){return this}),t.AsyncIterator=k,t.async=function(T,I,U,B,D){D===void 0&&(D=Promise);var W=new k(d(T,I,U,B),D);return t.isGeneratorFunction(I)?W:W.next().then(function(z){return z.done?z.value:W.next()})},M(E),u(E,c,"Generator"),u(E,i,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(T){var I=Object(T),U=[];for(var B in I)U.push(B);return U.reverse(),function D(){for(;U.length;){var W=U.pop();if(W in I)return D.value=W,D.done=!1,D}return D.done=!0,D}},t.values=j,A.prototype={constructor:A,reset:function(I){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!I)for(var U in this)U.charAt(0)==="t"&&r.call(this,U)&&!isNaN(+U.slice(1))&&(this[U]=e)},stop:function(){this.done=!0;var I=this.tryEntries[0].completion;if(I.type==="throw")throw I.arg;return this.rval},dispatchException:function(I){if(this.done)throw I;var U=this;function B(q,Y){return z.type="throw",z.arg=I,U.next=q,Y&&(U.method="next",U.arg=e),!!Y}for(var D=this.tryEntries.length-1;D>=0;--D){var W=this.tryEntries[D],z=W.completion;if(W.tryLoc==="root")return B("end");if(W.tryLoc<=this.prev){var $=r.call(W,"catchLoc"),X=r.call(W,"finallyLoc");if($&&X){if(this.prev<W.catchLoc)return B(W.catchLoc,!0);if(this.prev<W.finallyLoc)return B(W.finallyLoc)}else if($){if(this.prev<W.catchLoc)return B(W.catchLoc,!0)}else{if(!X)throw Error("try statement without catch or finally");if(this.prev<W.finallyLoc)return B(W.finallyLoc)}}}},abrupt:function(I,U){for(var B=this.tryEntries.length-1;B>=0;--B){var D=this.tryEntries[B];if(D.tryLoc<=this.prev&&r.call(D,"finallyLoc")&&this.prev<D.finallyLoc){var W=D;break}}W&&(I==="break"||I==="continue")&&W.tryLoc<=U&&U<=W.finallyLoc&&(W=null);var z=W?W.completion:{};return z.type=I,z.arg=U,W?(this.method="next",this.next=W.finallyLoc,x):this.complete(z)},complete:function(I,U){if(I.type==="throw")throw I.arg;return I.type==="break"||I.type==="continue"?this.next=I.arg:I.type==="return"?(this.rval=this.arg=I.arg,this.method="return",this.next="end"):I.type==="normal"&&U&&(this.next=U),x},finish:function(I){for(var U=this.tryEntries.length-1;U>=0;--U){var B=this.tryEntries[U];if(B.finallyLoc===I)return this.complete(B.completion,B.afterLoc),O(B),x}},catch:function(I){for(var U=this.tryEntries.length-1;U>=0;--U){var B=this.tryEntries[U];if(B.tryLoc===I){var D=B.completion;if(D.type==="throw"){var W=D.arg;O(B)}return W}}throw Error("illegal catch attempt")},delegateYield:function(I,U,B){return this.delegate={iterator:j(I),resultName:U,nextLoc:B},this.method==="next"&&(this.arg=e),x}},t}function cGt(e,t,n){return t=NE(t),CXe(e,NIe()?Reflect.construct(t,n||[],NE(e).constructor):t.apply(e,n))}function NIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NIe=function(){return!!e})()}const uGt=function(e){var t,n=e.loader,r=e.isLanguageRegistered,s=e.registerLanguage,a=e.languageLoaders,i=e.noAsyncLoadingLanguages,l=function(c){function u(){return SXe(this,u),cGt(this,u,arguments)}return wXe(u,c),MXe(u,[{key:"componentDidUpdate",value:function(){!u.isRegistered(this.props.language)&&a&&this.loadLanguage()}},{key:"componentDidMount",value:function(){var m=this;u.astGeneratorPromise||u.loadAstGenerator(),u.astGenerator||u.astGeneratorPromise.then(function(){m.forceUpdate()}),!u.isRegistered(this.props.language)&&a&&this.loadLanguage()}},{key:"loadLanguage",value:function(){var m=this,p=this.props.language;p!=="text"&&u.loadLanguage(p).then(function(){return m.forceUpdate()}).catch(function(){})}},{key:"normalizeLanguage",value:function(m){return u.isSupportedLanguage(m)?m:"text"}},{key:"render",value:function(){return R.createElement(u.highlightInstance,rb({},this.props,{language:this.normalizeLanguage(this.props.language),astGenerator:u.astGenerator}))}}],[{key:"preload",value:function(){return u.loadAstGenerator()}},{key:"loadLanguage",value:function(){var d=TIe(T7().mark(function p(h){var g;return T7().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(g=a[h],typeof g!="function"){x.next=5;break}return x.abrupt("return",g(u.registerLanguage));case 5:throw new Error("Language ".concat(h," not supported"));case 6:case"end":return x.stop()}},p)}));function m(p){return d.apply(this,arguments)}return m}()},{key:"isSupportedLanguage",value:function(m){return u.isRegistered(m)||typeof a[m]=="function"}},{key:"loadAstGenerator",value:function(){return u.astGeneratorPromise=n().then(function(m){u.astGenerator=m,s&&u.languages.forEach(function(p,h){return s(m,h,p)})}),u.astGeneratorPromise}}])}(R.PureComponent);return t=l,Xc(l,"astGenerator",null),Xc(l,"highlightInstance",lGt(null,{})),Xc(l,"astGeneratorPromise",null),Xc(l,"languages",new Map),Xc(l,"supportedLanguages",e.supportedLanguages||Object.keys(a||{})),Xc(l,"isRegistered",function(c){if(i)return!0;if(!s)throw new Error("Current syntax highlighter doesn't support registration of languages");return t.astGenerator?r(t.astGenerator,c):t.languages.has(c)}),Xc(l,"registerLanguage",function(c,u){if(!s)throw new Error("Current syntax highlighter doesn't support registration of languages");if(t.astGenerator)return s(t.astGenerator,c,u);t.languages.set(c,u)}),l};function N7(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */N7=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(T,I,U){T[I]=U.value},a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(T,I,U){return Object.defineProperty(T,I,{value:U,enumerable:!0,configurable:!0,writable:!0}),T[I]}try{u({},"")}catch{u=function(U,B,D){return U[B]=D}}function d(T,I,U,B){var D=I&&I.prototype instanceof v?I:v,W=Object.create(D.prototype),z=new A(B||[]);return s(W,"_invoke",{value:N(T,U,z)}),W}function m(T,I,U){try{return{type:"normal",arg:T.call(I,U)}}catch(B){return{type:"throw",arg:B}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",g="executing",y="completed",x={};function v(){}function b(){}function _(){}var w={};u(w,i,function(){return this});var C=Object.getPrototypeOf,S=C&&C(C(j([])));S&&S!==n&&r.call(S,i)&&(w=S);var E=_.prototype=v.prototype=Object.create(w);function M(T){["next","throw","return"].forEach(function(I){u(T,I,function(U){return this._invoke(I,U)})})}function k(T,I){function U(D,W,z,$){var X=m(T[D],T,W);if(X.type!=="throw"){var q=X.arg,Y=q.value;return Y&&Ga(Y)=="object"&&r.call(Y,"__await")?I.resolve(Y.__await).then(function(G){U("next",G,z,$)},function(G){U("throw",G,z,$)}):I.resolve(Y).then(function(G){q.value=G,z(q)},function(G){return U("throw",G,z,$)})}$(X.arg)}var B;s(this,"_invoke",{value:function(W,z){function $(){return new I(function(X,q){U(W,z,X,q)})}return B=B?B.then($,$):$()}})}function N(T,I,U){var B=p;return function(D,W){if(B===g)throw Error("Generator is already running");if(B===y){if(D==="throw")throw W;return{value:e,done:!0}}for(U.method=D,U.arg=W;;){var z=U.delegate;if(z){var $=P(z,U);if($){if($===x)continue;return $}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(B===p)throw B=y,U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);B=g;var X=m(T,I,U);if(X.type==="normal"){if(B=U.done?y:h,X.arg===x)continue;return{value:X.arg,done:U.done}}X.type==="throw"&&(B=y,U.method="throw",U.arg=X.arg)}}}function P(T,I){var U=I.method,B=T.iterator[U];if(B===e)return I.delegate=null,U==="throw"&&T.iterator.return&&(I.method="return",I.arg=e,P(T,I),I.method==="throw")||U!=="return"&&(I.method="throw",I.arg=new TypeError("The iterator does not provide a '"+U+"' method")),x;var D=m(B,T.iterator,I.arg);if(D.type==="throw")return I.method="throw",I.arg=D.arg,I.delegate=null,x;var W=D.arg;return W?W.done?(I[T.resultName]=W.value,I.next=T.nextLoc,I.method!=="return"&&(I.method="next",I.arg=e),I.delegate=null,x):W:(I.method="throw",I.arg=new TypeError("iterator result is not an object"),I.delegate=null,x)}function L(T){var I={tryLoc:T[0]};1 in T&&(I.catchLoc=T[1]),2 in T&&(I.finallyLoc=T[2],I.afterLoc=T[3]),this.tryEntries.push(I)}function O(T){var I=T.completion||{};I.type="normal",delete I.arg,T.completion=I}function A(T){this.tryEntries=[{tryLoc:"root"}],T.forEach(L,this),this.reset(!0)}function j(T){if(T||T===""){var I=T[i];if(I)return I.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length)){var U=-1,B=function D(){for(;++U<T.length;)if(r.call(T,U))return D.value=T[U],D.done=!1,D;return D.value=e,D.done=!0,D};return B.next=B}}throw new TypeError(Ga(T)+" is not iterable")}return b.prototype=_,s(E,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(T){var I=typeof T=="function"&&T.constructor;return!!I&&(I===b||(I.displayName||I.name)==="GeneratorFunction")},t.mark=function(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,_):(T.__proto__=_,u(T,c,"GeneratorFunction")),T.prototype=Object.create(E),T},t.awrap=function(T){return{__await:T}},M(k.prototype),u(k.prototype,l,function(){return this}),t.AsyncIterator=k,t.async=function(T,I,U,B,D){D===void 0&&(D=Promise);var W=new k(d(T,I,U,B),D);return t.isGeneratorFunction(I)?W:W.next().then(function(z){return z.done?z.value:W.next()})},M(E),u(E,c,"Generator"),u(E,i,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(T){var I=Object(T),U=[];for(var B in I)U.push(B);return U.reverse(),function D(){for(;U.length;){var W=U.pop();if(W in I)return D.value=W,D.done=!1,D}return D.done=!0,D}},t.values=j,A.prototype={constructor:A,reset:function(I){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!I)for(var U in this)U.charAt(0)==="t"&&r.call(this,U)&&!isNaN(+U.slice(1))&&(this[U]=e)},stop:function(){this.done=!0;var I=this.tryEntries[0].completion;if(I.type==="throw")throw I.arg;return this.rval},dispatchException:function(I){if(this.done)throw I;var U=this;function B(q,Y){return z.type="throw",z.arg=I,U.next=q,Y&&(U.method="next",U.arg=e),!!Y}for(var D=this.tryEntries.length-1;D>=0;--D){var W=this.tryEntries[D],z=W.completion;if(W.tryLoc==="root")return B("end");if(W.tryLoc<=this.prev){var $=r.call(W,"catchLoc"),X=r.call(W,"finallyLoc");if($&&X){if(this.prev<W.catchLoc)return B(W.catchLoc,!0);if(this.prev<W.finallyLoc)return B(W.finallyLoc)}else if($){if(this.prev<W.catchLoc)return B(W.catchLoc,!0)}else{if(!X)throw Error("try statement without catch or finally");if(this.prev<W.finallyLoc)return B(W.finallyLoc)}}}},abrupt:function(I,U){for(var B=this.tryEntries.length-1;B>=0;--B){var D=this.tryEntries[B];if(D.tryLoc<=this.prev&&r.call(D,"finallyLoc")&&this.prev<D.finallyLoc){var W=D;break}}W&&(I==="break"||I==="continue")&&W.tryLoc<=U&&U<=W.finallyLoc&&(W=null);var z=W?W.completion:{};return z.type=I,z.arg=U,W?(this.method="next",this.next=W.finallyLoc,x):this.complete(z)},complete:function(I,U){if(I.type==="throw")throw I.arg;return I.type==="break"||I.type==="continue"?this.next=I.arg:I.type==="return"?(this.rval=this.arg=I.arg,this.method="return",this.next="end"):I.type==="normal"&&U&&(this.next=U),x},finish:function(I){for(var U=this.tryEntries.length-1;U>=0;--U){var B=this.tryEntries[U];if(B.finallyLoc===I)return this.complete(B.completion,B.afterLoc),O(B),x}},catch:function(I){for(var U=this.tryEntries.length-1;U>=0;--U){var B=this.tryEntries[U];if(B.tryLoc===I){var D=B.completion;if(D.type==="throw"){var W=D.arg;O(B)}return W}}throw Error("illegal catch attempt")},delegateYield:function(I,U,B){return this.delegate={iterator:j(I),resultName:U,nextLoc:B},this.method==="next"&&(this.arg=e),x}},t}const ie=function(e,t){return function(){var n=TIe(N7().mark(function r(s){var a;return N7().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t();case 2:a=l.sent,s(e,a.default||a);case 4:case"end":return l.stop()}},r)}));return function(r){return n.apply(this,arguments)}}()},dGt={abap:ie("abap",function(){return Q(()=>import("./abap-xXO2ZNBr.js").then(e=>e.a),__vite__mapDeps([132,1]))}),abnf:ie("abnf",function(){return Q(()=>import("./abnf-Cpr-RfZc.js").then(e=>e.a),__vite__mapDeps([133,1]))}),actionscript:ie("actionscript",function(){return Q(()=>import("./actionscript-7IoedjRX.js").then(e=>e.a),__vite__mapDeps([134,1]))}),ada:ie("ada",function(){return Q(()=>import("./ada-DvJpapMr.js").then(e=>e.a),__vite__mapDeps([135,1]))}),agda:ie("agda",function(){return Q(()=>import("./agda-CXQhj6q_.js").then(e=>e.a),__vite__mapDeps([136,1]))}),al:ie("al",function(){return Q(()=>import("./al-Dn94UNn4.js").then(e=>e.a),__vite__mapDeps([137,1]))}),antlr4:ie("antlr4",function(){return Q(()=>import("./antlr4-D_WJe1oO.js").then(e=>e.a),__vite__mapDeps([138,1]))}),apacheconf:ie("apacheconf",function(){return Q(()=>import("./apacheconf-BxdI37fF.js").then(e=>e.a),__vite__mapDeps([139,1]))}),apex:ie("apex",function(){return Q(()=>import("./apex-DSxd3UGl.js").then(e=>e.a),__vite__mapDeps([140,1,141]))}),apl:ie("apl",function(){return Q(()=>import("./apl-BhX0_fkh.js").then(e=>e.a),__vite__mapDeps([142,1]))}),applescript:ie("applescript",function(){return Q(()=>import("./applescript-mDtPbSw7.js").then(e=>e.a),__vite__mapDeps([143,1]))}),aql:ie("aql",function(){return Q(()=>import("./aql-CCmuoNOQ.js").then(e=>e.a),__vite__mapDeps([144,1]))}),arduino:ie("arduino",function(){return Q(()=>import("./arduino-BOTCtVXt.js").then(e=>e.a),__vite__mapDeps([145,1,146,147]))}),arff:ie("arff",function(){return Q(()=>import("./arff-LHIGEhob.js").then(e=>e.a),__vite__mapDeps([148,1]))}),asciidoc:ie("asciidoc",function(){return Q(()=>import("./asciidoc-DUL3t6uM.js").then(e=>e.a),__vite__mapDeps([149,1]))}),asm6502:ie("asm6502",function(){return Q(()=>import("./asm6502-B_69y3yN.js").then(e=>e.a),__vite__mapDeps([150,1]))}),asmatmel:ie("asmatmel",function(){return Q(()=>import("./asmatmel-LW8Eoafy.js").then(e=>e.a),__vite__mapDeps([151,1]))}),aspnet:ie("aspnet",function(){return Q(()=>import("./aspnet-3TSffHQD.js").then(e=>e.a),__vite__mapDeps([152,1,153]))}),autohotkey:ie("autohotkey",function(){return Q(()=>import("./autohotkey-DDP9Pz17.js").then(e=>e.a),__vite__mapDeps([154,1]))}),autoit:ie("autoit",function(){return Q(()=>import("./autoit-B6rX58wf.js").then(e=>e.a),__vite__mapDeps([155,1]))}),avisynth:ie("avisynth",function(){return Q(()=>import("./avisynth-Dm_4mu0N.js").then(e=>e.a),__vite__mapDeps([156,1]))}),avroIdl:ie("avroIdl",function(){return Q(()=>import("./avro-idl-UlEGCRi0.js").then(e=>e.a),__vite__mapDeps([157,1]))}),bash:ie("bash",function(){return Q(()=>import("./bash-BDr8_71o.js").then(e=>e.b),__vite__mapDeps([158,1,159]))}),basic:ie("basic",function(){return Q(()=>import("./basic-BBt5kyDw.js").then(e=>e.b),__vite__mapDeps([160,1,161]))}),batch:ie("batch",function(){return Q(()=>import("./batch-Cj3BSbMY.js").then(e=>e.b),__vite__mapDeps([162,1]))}),bbcode:ie("bbcode",function(){return Q(()=>import("./bbcode-DpxtQw0_.js").then(e=>e.b),__vite__mapDeps([163,1]))}),bicep:ie("bicep",function(){return Q(()=>import("./bicep-CmgEE0U9.js").then(e=>e.b),__vite__mapDeps([164,1]))}),birb:ie("birb",function(){return Q(()=>import("./birb-Dars3CuK.js").then(e=>e.b),__vite__mapDeps([165,1]))}),bison:ie("bison",function(){return Q(()=>import("./bison-DX1VDlfk.js").then(e=>e.b),__vite__mapDeps([166,1,147]))}),bnf:ie("bnf",function(){return Q(()=>import("./bnf-B6-zmMw4.js").then(e=>e.b),__vite__mapDeps([167,1]))}),brainfuck:ie("brainfuck",function(){return Q(()=>import("./brainfuck-EZxQTWZ8.js").then(e=>e.b),__vite__mapDeps([168,1]))}),brightscript:ie("brightscript",function(){return Q(()=>import("./brightscript-MwC7Espe.js").then(e=>e.b),__vite__mapDeps([169,1]))}),bro:ie("bro",function(){return Q(()=>import("./bro-JV1z53-B.js").then(e=>e.b),__vite__mapDeps([170,1]))}),bsl:ie("bsl",function(){return Q(()=>import("./bsl-Cd53xDCy.js").then(e=>e.b),__vite__mapDeps([171,1]))}),c:ie("c",function(){return Q(()=>import("./c-CxGDiPNH.js").then(e=>e.c),__vite__mapDeps([172,1,147]))}),cfscript:ie("cfscript",function(){return Q(()=>import("./cfscript-B9mkrBpQ.js").then(e=>e.c),__vite__mapDeps([173,1]))}),chaiscript:ie("chaiscript",function(){return Q(()=>import("./chaiscript-Dof1nfTW.js").then(e=>e.c),__vite__mapDeps([174,1,146,147]))}),cil:ie("cil",function(){return Q(()=>import("./cil-Bn3Q2E1W.js").then(e=>e.c),__vite__mapDeps([175,1]))}),clike:ie("clike",function(){return Q(()=>import("./clike-DDqLwGhR.js").then(e=>e.c),__vite__mapDeps([176,1,177]))}),clojure:ie("clojure",function(){return Q(()=>import("./clojure-C8Cgr9xq.js").then(e=>e.c),__vite__mapDeps([178,1]))}),cmake:ie("cmake",function(){return Q(()=>import("./cmake-BO229LM_.js").then(e=>e.c),__vite__mapDeps([179,1]))}),cobol:ie("cobol",function(){return Q(()=>import("./cobol-ncmGEesi.js").then(e=>e.c),__vite__mapDeps([180,1]))}),coffeescript:ie("coffeescript",function(){return Q(()=>import("./coffeescript-D_XUmKs0.js").then(e=>e.c),__vite__mapDeps([181,1]))}),concurnas:ie("concurnas",function(){return Q(()=>import("./concurnas-TfeVZMOZ.js").then(e=>e.c),__vite__mapDeps([182,1]))}),coq:ie("coq",function(){return Q(()=>import("./coq-B5z9RsQ6.js").then(e=>e.c),__vite__mapDeps([183,1]))}),cpp:ie("cpp",function(){return Q(()=>import("./cpp-Chcfrze0.js").then(e=>e.c),__vite__mapDeps([184,1,146,147]))}),crystal:ie("crystal",function(){return Q(()=>import("./crystal-Dynhbd61.js").then(e=>e.c),__vite__mapDeps([185,1,186]))}),csharp:ie("csharp",function(){return Q(()=>import("./csharp-BhqpJkpq.js").then(e=>e.c),__vite__mapDeps([187,1,153]))}),cshtml:ie("cshtml",function(){return Q(()=>import("./cshtml-BWGfxKn4.js").then(e=>e.c),__vite__mapDeps([188,1,153]))}),csp:ie("csp",function(){return Q(()=>import("./csp-BoPMW3Ei.js").then(e=>e.c),__vite__mapDeps([189,1]))}),cssExtras:ie("cssExtras",function(){return Q(()=>import("./css-extras-Hsmrym8x.js").then(e=>e.c),__vite__mapDeps([190,1]))}),css:ie("css",function(){return Q(()=>import("./css-DY8FYVYE.js").then(e=>e.c),__vite__mapDeps([191,1,192]))}),csv:ie("csv",function(){return Q(()=>import("./csv-C7m4DnSA.js").then(e=>e.c),__vite__mapDeps([193,1]))}),cypher:ie("cypher",function(){return Q(()=>import("./cypher-l75AB8hd.js").then(e=>e.c),__vite__mapDeps([194,1]))}),d:ie("d",function(){return Q(()=>import("./d-CDO8utOJ.js").then(e=>e.d),__vite__mapDeps([195,1]))}),dart:ie("dart",function(){return Q(()=>import("./dart-PPmz7K9W.js").then(e=>e.d),__vite__mapDeps([196,1]))}),dataweave:ie("dataweave",function(){return Q(()=>import("./dataweave-DSq9Bs2g.js").then(e=>e.d),__vite__mapDeps([197,1]))}),dax:ie("dax",function(){return Q(()=>import("./dax-Ql7iF31E.js").then(e=>e.d),__vite__mapDeps([198,1]))}),dhall:ie("dhall",function(){return Q(()=>import("./dhall-D8AlcFmH.js").then(e=>e.d),__vite__mapDeps([199,1]))}),diff:ie("diff",function(){return Q(()=>import("./diff-DxjKD27r.js").then(e=>e.d),__vite__mapDeps([200,1]))}),django:ie("django",function(){return Q(()=>import("./django-DdNzo2Lw.js").then(e=>e.d),__vite__mapDeps([201,1,202]))}),dnsZoneFile:ie("dnsZoneFile",function(){return Q(()=>import("./dns-zone-file-CPg1_KvB.js").then(e=>e.d),__vite__mapDeps([203,1]))}),docker:ie("docker",function(){return Q(()=>import("./docker-CVuCFm8y.js").then(e=>e.d),__vite__mapDeps([204,1]))}),dot:ie("dot",function(){return Q(()=>import("./dot-Cv30q0-0.js").then(e=>e.d),__vite__mapDeps([205,1]))}),ebnf:ie("ebnf",function(){return Q(()=>import("./ebnf-D4d3p3sx.js").then(e=>e.e),__vite__mapDeps([206,1]))}),editorconfig:ie("editorconfig",function(){return Q(()=>import("./editorconfig-svCLfWhT.js").then(e=>e.e),__vite__mapDeps([207,1]))}),eiffel:ie("eiffel",function(){return Q(()=>import("./eiffel-DhOhlUP9.js").then(e=>e.e),__vite__mapDeps([208,1]))}),ejs:ie("ejs",function(){return Q(()=>import("./ejs-CuszUXEo.js").then(e=>e.e),__vite__mapDeps([209,1,202]))}),elixir:ie("elixir",function(){return Q(()=>import("./elixir-CZtOXY6s.js").then(e=>e.e),__vite__mapDeps([210,1]))}),elm:ie("elm",function(){return Q(()=>import("./elm-BcYqZUmH.js").then(e=>e.e),__vite__mapDeps([211,1]))}),erb:ie("erb",function(){return Q(()=>import("./erb-D4Jx3m2Q.js").then(e=>e.e),__vite__mapDeps([212,1,186,202]))}),erlang:ie("erlang",function(){return Q(()=>import("./erlang-Bs9TEZ3l.js").then(e=>e.e),__vite__mapDeps([213,1]))}),etlua:ie("etlua",function(){return Q(()=>import("./etlua-C0lc7-1S.js").then(e=>e.e),__vite__mapDeps([214,1,215,202]))}),excelFormula:ie("excelFormula",function(){return Q(()=>import("./excel-formula-CzIhBLjN.js").then(e=>e.e),__vite__mapDeps([216,1]))}),factor:ie("factor",function(){return Q(()=>import("./factor-WaebLdn4.js").then(e=>e.f),__vite__mapDeps([217,1]))}),falselang:ie("falselang",function(){return Q(()=>import("./false-ShlVddT_.js").then(e=>e._),__vite__mapDeps([218,1]))}),firestoreSecurityRules:ie("firestoreSecurityRules",function(){return Q(()=>import("./firestore-security-rules-4moqVYWI.js").then(e=>e.f),__vite__mapDeps([219,1]))}),flow:ie("flow",function(){return Q(()=>import("./flow-CXLXbYk5.js").then(e=>e.f),__vite__mapDeps([220,1]))}),fortran:ie("fortran",function(){return Q(()=>import("./fortran-BND3_knE.js").then(e=>e.f),__vite__mapDeps([221,1]))}),fsharp:ie("fsharp",function(){return Q(()=>import("./fsharp-BFha84XY.js").then(e=>e.f),__vite__mapDeps([222,1]))}),ftl:ie("ftl",function(){return Q(()=>import("./ftl-GB7jbcGS.js").then(e=>e.f),__vite__mapDeps([223,1,202]))}),gap:ie("gap",function(){return Q(()=>import("./gap-Dpz_lRLC.js").then(e=>e.g),__vite__mapDeps([224,1]))}),gcode:ie("gcode",function(){return Q(()=>import("./gcode-C7ldqsmu.js").then(e=>e.g),__vite__mapDeps([225,1]))}),gdscript:ie("gdscript",function(){return Q(()=>import("./gdscript-B9Bfhib1.js").then(e=>e.g),__vite__mapDeps([226,1]))}),gedcom:ie("gedcom",function(){return Q(()=>import("./gedcom-btzlAVde.js").then(e=>e.g),__vite__mapDeps([227,1]))}),gherkin:ie("gherkin",function(){return Q(()=>import("./gherkin-DXkOYSMV.js").then(e=>e.g),__vite__mapDeps([228,1]))}),git:ie("git",function(){return Q(()=>import("./git-Bi1kQND6.js").then(e=>e.g),__vite__mapDeps([229,1]))}),glsl:ie("glsl",function(){return Q(()=>import("./glsl-BYO0fWe4.js").then(e=>e.g),__vite__mapDeps([230,1,147]))}),gml:ie("gml",function(){return Q(()=>import("./gml-Dcj75dEM.js").then(e=>e.g),__vite__mapDeps([231,1]))}),gn:ie("gn",function(){return Q(()=>import("./gn-C5jCMEGg.js").then(e=>e.g),__vite__mapDeps([232,1]))}),goModule:ie("goModule",function(){return Q(()=>import("./go-module-DS88Hgar.js").then(e=>e.g),__vite__mapDeps([233,1]))}),go:ie("go",function(){return Q(()=>import("./go-Bb8GlO4U.js").then(e=>e.g),__vite__mapDeps([234,1]))}),graphql:ie("graphql",function(){return Q(()=>import("./graphql-BqELzFSN.js").then(e=>e.g),__vite__mapDeps([235,1]))}),groovy:ie("groovy",function(){return Q(()=>import("./groovy-CZHQRD2T.js").then(e=>e.g),__vite__mapDeps([236,1]))}),haml:ie("haml",function(){return Q(()=>import("./haml-D4Cu9GWy.js").then(e=>e.h),__vite__mapDeps([237,1,186]))}),handlebars:ie("handlebars",function(){return Q(()=>import("./handlebars-C4Zm0IB3.js").then(e=>e.h),__vite__mapDeps([238,1,202]))}),haskell:ie("haskell",function(){return Q(()=>import("./haskell-qrj8ifSK.js").then(e=>e.h),__vite__mapDeps([239,1,240]))}),haxe:ie("haxe",function(){return Q(()=>import("./haxe-ChRoPNLt.js").then(e=>e.h),__vite__mapDeps([241,1]))}),hcl:ie("hcl",function(){return Q(()=>import("./hcl-DW5WNCe3.js").then(e=>e.h),__vite__mapDeps([242,1]))}),hlsl:ie("hlsl",function(){return Q(()=>import("./hlsl-BedTSN1F.js").then(e=>e.h),__vite__mapDeps([243,1,147]))}),hoon:ie("hoon",function(){return Q(()=>import("./hoon-BwAkIC7V.js").then(e=>e.h),__vite__mapDeps([244,1]))}),hpkp:ie("hpkp",function(){return Q(()=>import("./hpkp-KfxxGNng.js").then(e=>e.h),__vite__mapDeps([245,1]))}),hsts:ie("hsts",function(){return Q(()=>import("./hsts-BSN3uVd1.js").then(e=>e.h),__vite__mapDeps([246,1]))}),http:ie("http",function(){return Q(()=>import("./http-FRE2So_Y.js").then(e=>e.h),__vite__mapDeps([247,1]))}),ichigojam:ie("ichigojam",function(){return Q(()=>import("./ichigojam-68yjR9qP.js").then(e=>e.i),__vite__mapDeps([248,1]))}),icon:ie("icon",function(){return Q(()=>import("./icon-DMVM2VVb.js").then(e=>e.i),__vite__mapDeps([249,1]))}),icuMessageFormat:ie("icuMessageFormat",function(){return Q(()=>import("./icu-message-format-D6wK9nFS.js").then(e=>e.i),__vite__mapDeps([250,1]))}),idris:ie("idris",function(){return Q(()=>import("./idris-DVPeRJob.js").then(e=>e.i),__vite__mapDeps([251,1,240]))}),iecst:ie("iecst",function(){return Q(()=>import("./iecst-CVU0L1v2.js").then(e=>e.i),__vite__mapDeps([252,1]))}),ignore:ie("ignore",function(){return Q(()=>import("./ignore-CWbAeMHy.js").then(e=>e.i),__vite__mapDeps([253,1]))}),inform7:ie("inform7",function(){return Q(()=>import("./inform7-D7YCc5AS.js").then(e=>e.i),__vite__mapDeps([254,1]))}),ini:ie("ini",function(){return Q(()=>import("./ini-DTjpb4oT.js").then(e=>e.i),__vite__mapDeps([255,1]))}),io:ie("io",function(){return Q(()=>import("./io-DyJVvRKM.js").then(e=>e.i),__vite__mapDeps([256,1]))}),j:ie("j",function(){return Q(()=>import("./j-B1KsJ8Lh.js").then(e=>e.j),__vite__mapDeps([257,1]))}),java:ie("java",function(){return Q(()=>import("./java-C8KDVoMm.js").then(e=>e.j),__vite__mapDeps([258,1,259]))}),javadoc:ie("javadoc",function(){return Q(()=>import("./javadoc-Be5z3uxJ.js").then(e=>e.j),__vite__mapDeps([260,1,259,261]))}),javadoclike:ie("javadoclike",function(){return Q(()=>import("./javadoclike-AcPh5e5A.js").then(e=>e.j),__vite__mapDeps([262,1,261]))}),javascript:ie("javascript",function(){return Q(()=>import("./javascript-C1hWj-gL.js").then(e=>e.j),__vite__mapDeps([263,1,264]))}),javastacktrace:ie("javastacktrace",function(){return Q(()=>import("./javastacktrace-l5DDWqnd.js").then(e=>e.j),__vite__mapDeps([265,1]))}),jexl:ie("jexl",function(){return Q(()=>import("./jexl-CPewgw8R.js").then(e=>e.j),__vite__mapDeps([266,1]))}),jolie:ie("jolie",function(){return Q(()=>import("./jolie-oDW4xHAj.js").then(e=>e.j),__vite__mapDeps([267,1]))}),jq:ie("jq",function(){return Q(()=>import("./jq-DCybKO55.js").then(e=>e.j),__vite__mapDeps([268,1]))}),jsExtras:ie("jsExtras",function(){return Q(()=>import("./js-extras-Dt3p3jFp.js").then(e=>e.j),__vite__mapDeps([269,1]))}),jsTemplates:ie("jsTemplates",function(){return Q(()=>import("./js-templates-C36cwUgG.js").then(e=>e.j),__vite__mapDeps([270,1]))}),jsdoc:ie("jsdoc",function(){return Q(()=>import("./jsdoc-D9b2eQCX.js").then(e=>e.j),__vite__mapDeps([271,1,261,272]))}),json:ie("json",function(){return Q(()=>import("./json-DxuiKECE.js").then(e=>e.j),__vite__mapDeps([273,1,274]))}),json5:ie("json5",function(){return Q(()=>import("./json5-xjq_y-Ab.js").then(e=>e.j),__vite__mapDeps([275,1,274]))}),jsonp:ie("jsonp",function(){return Q(()=>import("./jsonp-O-R2QEUD.js").then(e=>e.j),__vite__mapDeps([276,1,274]))}),jsstacktrace:ie("jsstacktrace",function(){return Q(()=>import("./jsstacktrace-AwxS9N4y.js").then(e=>e.j),__vite__mapDeps([277,1]))}),jsx:ie("jsx",function(){return Q(()=>import("./jsx-oDQJXXbV.js").then(e=>e.j),__vite__mapDeps([278,1,279]))}),julia:ie("julia",function(){return Q(()=>import("./julia-CSbapaXD.js").then(e=>e.j),__vite__mapDeps([280,1]))}),keepalived:ie("keepalived",function(){return Q(()=>import("./keepalived-QNLh4sKY.js").then(e=>e.k),__vite__mapDeps([281,1]))}),keyman:ie("keyman",function(){return Q(()=>import("./keyman-Dekq-H3g.js").then(e=>e.k),__vite__mapDeps([282,1]))}),kotlin:ie("kotlin",function(){return Q(()=>import("./kotlin-luLWldVW.js").then(e=>e.k),__vite__mapDeps([283,1]))}),kumir:ie("kumir",function(){return Q(()=>import("./kumir-gJ2eR1Bt.js").then(e=>e.k),__vite__mapDeps([284,1]))}),kusto:ie("kusto",function(){return Q(()=>import("./kusto-B8-0f2WS.js").then(e=>e.k),__vite__mapDeps([285,1]))}),latex:ie("latex",function(){return Q(()=>import("./latex-naZEwrIf.js").then(e=>e.l),__vite__mapDeps([286,1]))}),latte:ie("latte",function(){return Q(()=>import("./latte-CuYvwG6d.js").then(e=>e.l),__vite__mapDeps([287,1,202,288]))}),less:ie("less",function(){return Q(()=>import("./less-IPZUooSX.js").then(e=>e.l),__vite__mapDeps([289,1]))}),lilypond:ie("lilypond",function(){return Q(()=>import("./lilypond-Ca27w2l1.js").then(e=>e.l),__vite__mapDeps([290,1,291]))}),liquid:ie("liquid",function(){return Q(()=>import("./liquid-CqfwnlE8.js").then(e=>e.l),__vite__mapDeps([292,1,202]))}),lisp:ie("lisp",function(){return Q(()=>import("./lisp-DS6a9sOI.js").then(e=>e.l),__vite__mapDeps([293,1]))}),livescript:ie("livescript",function(){return Q(()=>import("./livescript-BtvwBPLA.js").then(e=>e.l),__vite__mapDeps([294,1]))}),llvm:ie("llvm",function(){return Q(()=>import("./llvm-DJuz_f_4.js").then(e=>e.l),__vite__mapDeps([295,1]))}),log:ie("log",function(){return Q(()=>import("./log-vpDuJ6s7.js").then(e=>e.l),__vite__mapDeps([296,1]))}),lolcode:ie("lolcode",function(){return Q(()=>import("./lolcode-D7zlseNY.js").then(e=>e.l),__vite__mapDeps([297,1]))}),lua:ie("lua",function(){return Q(()=>import("./lua-CrdnDpZs.js").then(e=>e.l),__vite__mapDeps([298,1,215]))}),magma:ie("magma",function(){return Q(()=>import("./magma-CXc54FID.js").then(e=>e.m),__vite__mapDeps([299,1]))}),makefile:ie("makefile",function(){return Q(()=>import("./makefile-TgER5D3-.js").then(e=>e.m),__vite__mapDeps([300,1]))}),markdown:ie("markdown",function(){return Q(()=>import("./markdown-BBUfvsG3.js").then(e=>e.m),__vite__mapDeps([301,1]))}),markupTemplating:ie("markupTemplating",function(){return Q(()=>import("./markup-templating-DkjQpHey.js").then(e=>e.m),__vite__mapDeps([302,1,202]))}),markup:ie("markup",function(){return Q(()=>import("./markup-DvUfpNsN.js").then(e=>e.m),__vite__mapDeps([303,1,304]))}),matlab:ie("matlab",function(){return Q(()=>import("./matlab-D8KyOrZZ.js").then(e=>e.m),__vite__mapDeps([305,1]))}),maxscript:ie("maxscript",function(){return Q(()=>import("./maxscript-BLMZLNdj.js").then(e=>e.m),__vite__mapDeps([306,1]))}),mel:ie("mel",function(){return Q(()=>import("./mel-Ck2zZU6-.js").then(e=>e.m),__vite__mapDeps([307,1]))}),mermaid:ie("mermaid",function(){return Q(()=>import("./mermaid-BbVwv4sI.js").then(e=>e.m),__vite__mapDeps([308,1]))}),mizar:ie("mizar",function(){return Q(()=>import("./mizar-C5pIb6PU.js").then(e=>e.m),__vite__mapDeps([309,1]))}),mongodb:ie("mongodb",function(){return Q(()=>import("./mongodb-BP-_FLZQ.js").then(e=>e.m),__vite__mapDeps([310,1]))}),monkey:ie("monkey",function(){return Q(()=>import("./monkey-CJMClX9N.js").then(e=>e.m),__vite__mapDeps([311,1]))}),moonscript:ie("moonscript",function(){return Q(()=>import("./moonscript-B3F4_gd_.js").then(e=>e.m),__vite__mapDeps([312,1]))}),n1ql:ie("n1ql",function(){return Q(()=>import("./n1ql-DEwy8oY_.js").then(e=>e.n),__vite__mapDeps([313,1]))}),n4js:ie("n4js",function(){return Q(()=>import("./n4js-DosTxUWO.js").then(e=>e.n),__vite__mapDeps([314,1]))}),nand2tetrisHdl:ie("nand2tetrisHdl",function(){return Q(()=>import("./nand2tetris-hdl-BaEjoK_-.js").then(e=>e.n),__vite__mapDeps([315,1]))}),naniscript:ie("naniscript",function(){return Q(()=>import("./naniscript-CwUM2gJ6.js").then(e=>e.n),__vite__mapDeps([316,1]))}),nasm:ie("nasm",function(){return Q(()=>import("./nasm-BBm4hQNa.js").then(e=>e.n),__vite__mapDeps([317,1]))}),neon:ie("neon",function(){return Q(()=>import("./neon-D7ky2QYE.js").then(e=>e.n),__vite__mapDeps([318,1]))}),nevod:ie("nevod",function(){return Q(()=>import("./nevod-ytlw2XDY.js").then(e=>e.n),__vite__mapDeps([319,1]))}),nginx:ie("nginx",function(){return Q(()=>import("./nginx-BAoSqL21.js").then(e=>e.n),__vite__mapDeps([320,1]))}),nim:ie("nim",function(){return Q(()=>import("./nim-vhNCNa0d.js").then(e=>e.n),__vite__mapDeps([321,1]))}),nix:ie("nix",function(){return Q(()=>import("./nix-UkDV490L.js").then(e=>e.n),__vite__mapDeps([322,1]))}),nsis:ie("nsis",function(){return Q(()=>import("./nsis-CB_gSgbd.js").then(e=>e.n),__vite__mapDeps([323,1]))}),objectivec:ie("objectivec",function(){return Q(()=>import("./objectivec-COnIeXKs.js").then(e=>e.o),__vite__mapDeps([324,1,147]))}),ocaml:ie("ocaml",function(){return Q(()=>import("./ocaml-p7XlZdCt.js").then(e=>e.o),__vite__mapDeps([325,1]))}),opencl:ie("opencl",function(){return Q(()=>import("./opencl-DpkpHOKT.js").then(e=>e.o),__vite__mapDeps([326,1,147]))}),openqasm:ie("openqasm",function(){return Q(()=>import("./openqasm-BUO-RrFI.js").then(e=>e.o),__vite__mapDeps([327,1]))}),oz:ie("oz",function(){return Q(()=>import("./oz-BKi7Vu9u.js").then(e=>e.o),__vite__mapDeps([328,1]))}),parigp:ie("parigp",function(){return Q(()=>import("./parigp-Q2v1bPZv.js").then(e=>e.p),__vite__mapDeps([329,1]))}),parser:ie("parser",function(){return Q(()=>import("./parser-CuIfV_M8.js").then(e=>e.p),__vite__mapDeps([330,1]))}),pascal:ie("pascal",function(){return Q(()=>import("./pascal-BiB8a1yc.js").then(e=>e.p),__vite__mapDeps([331,1]))}),pascaligo:ie("pascaligo",function(){return Q(()=>import("./pascaligo-Bbe6k1sN.js").then(e=>e.p),__vite__mapDeps([332,1]))}),pcaxis:ie("pcaxis",function(){return Q(()=>import("./pcaxis-Cjwjh94y.js").then(e=>e.p),__vite__mapDeps([333,1]))}),peoplecode:ie("peoplecode",function(){return Q(()=>import("./peoplecode-hzUErX2R.js").then(e=>e.p),__vite__mapDeps([334,1]))}),perl:ie("perl",function(){return Q(()=>import("./perl-B1D9cLJK.js").then(e=>e.p),__vite__mapDeps([335,1]))}),phpExtras:ie("phpExtras",function(){return Q(()=>import("./php-extras-CZ7KxjqE.js").then(e=>e.p),__vite__mapDeps([336,1,288,202]))}),php:ie("php",function(){return Q(()=>import("./php-Dk7MEIvs.js").then(e=>e.p),__vite__mapDeps([337,1,288,202]))}),phpdoc:ie("phpdoc",function(){return Q(()=>import("./phpdoc-FxciP3cA.js").then(e=>e.p),__vite__mapDeps([338,1,288,202,261]))}),plsql:ie("plsql",function(){return Q(()=>import("./plsql-DvVXY7wu.js").then(e=>e.p),__vite__mapDeps([339,1,141]))}),powerquery:ie("powerquery",function(){return Q(()=>import("./powerquery-Btcc8rhQ.js").then(e=>e.p),__vite__mapDeps([340,1]))}),powershell:ie("powershell",function(){return Q(()=>import("./powershell-AWIxkKNB.js").then(e=>e.p),__vite__mapDeps([341,1]))}),processing:ie("processing",function(){return Q(()=>import("./processing-B76ABtt6.js").then(e=>e.p),__vite__mapDeps([342,1]))}),prolog:ie("prolog",function(){return Q(()=>import("./prolog-BkajrflI.js").then(e=>e.p),__vite__mapDeps([343,1]))}),promql:ie("promql",function(){return Q(()=>import("./promql-NkmAc1R6.js").then(e=>e.p),__vite__mapDeps([344,1]))}),properties:ie("properties",function(){return Q(()=>import("./properties-Xjh-xSf6.js").then(e=>e.p),__vite__mapDeps([345,1]))}),protobuf:ie("protobuf",function(){return Q(()=>import("./protobuf-BI4CAp9r.js").then(e=>e.p),__vite__mapDeps([346,1]))}),psl:ie("psl",function(){return Q(()=>import("./psl-aZe3ORrd.js").then(e=>e.p),__vite__mapDeps([347,1]))}),pug:ie("pug",function(){return Q(()=>import("./pug-CoMAP1Jj.js").then(e=>e.p),__vite__mapDeps([348,1]))}),puppet:ie("puppet",function(){return Q(()=>import("./puppet-D22HavK3.js").then(e=>e.p),__vite__mapDeps([349,1]))}),pure:ie("pure",function(){return Q(()=>import("./pure-BCQxrhr5.js").then(e=>e.p),__vite__mapDeps([350,1]))}),purebasic:ie("purebasic",function(){return Q(()=>import("./purebasic-CS3SBoo5.js").then(e=>e.p),__vite__mapDeps([351,1]))}),purescript:ie("purescript",function(){return Q(()=>import("./purescript-kPZQhZXw.js").then(e=>e.p),__vite__mapDeps([352,1,240]))}),python:ie("python",function(){return Q(()=>import("./python-dI9O2OOO.js").then(e=>e.p),__vite__mapDeps([353,1]))}),q:ie("q",function(){return Q(()=>import("./q-BM_OsTRZ.js").then(e=>e.q),__vite__mapDeps([354,1]))}),qml:ie("qml",function(){return Q(()=>import("./qml-6uNzUUZ_.js").then(e=>e.q),__vite__mapDeps([355,1]))}),qore:ie("qore",function(){return Q(()=>import("./qore-CT2dtVvu.js").then(e=>e.q),__vite__mapDeps([356,1]))}),qsharp:ie("qsharp",function(){return Q(()=>import("./qsharp-CUW6Vzvu.js").then(e=>e.q),__vite__mapDeps([357,1]))}),r:ie("r",function(){return Q(()=>import("./r-CxoAQyfy.js").then(e=>e.r),__vite__mapDeps([358,1]))}),racket:ie("racket",function(){return Q(()=>import("./racket-Ce6iEwSg.js").then(e=>e.r),__vite__mapDeps([359,1,291]))}),reason:ie("reason",function(){return Q(()=>import("./reason-C3OtRNQn.js").then(e=>e.r),__vite__mapDeps([360,1]))}),regex:ie("regex",function(){return Q(()=>import("./regex-24inC6Mm.js").then(e=>e.r),__vite__mapDeps([361,1]))}),rego:ie("rego",function(){return Q(()=>import("./rego-DIGNi3rm.js").then(e=>e.r),__vite__mapDeps([362,1]))}),renpy:ie("renpy",function(){return Q(()=>import("./renpy-2_7A_zWP.js").then(e=>e.r),__vite__mapDeps([363,1]))}),rest:ie("rest",function(){return Q(()=>import("./rest-DhkPHUyy.js").then(e=>e.r),__vite__mapDeps([364,1]))}),rip:ie("rip",function(){return Q(()=>import("./rip-NrUmeF-B.js").then(e=>e.r),__vite__mapDeps([365,1]))}),roboconf:ie("roboconf",function(){return Q(()=>import("./roboconf-BemhCpww.js").then(e=>e.r),__vite__mapDeps([366,1]))}),robotframework:ie("robotframework",function(){return Q(()=>import("./robotframework-53wxIqzy.js").then(e=>e.r),__vite__mapDeps([367,1]))}),ruby:ie("ruby",function(){return Q(()=>import("./ruby-C6pGL11I.js").then(e=>e.r),__vite__mapDeps([368,1,186]))}),rust:ie("rust",function(){return Q(()=>import("./rust-BHPZBpz7.js").then(e=>e.r),__vite__mapDeps([369,1]))}),sas:ie("sas",function(){return Q(()=>import("./sas-yB8mv_pf.js").then(e=>e.s),__vite__mapDeps([370,1]))}),sass:ie("sass",function(){return Q(()=>import("./sass-DgOtzGEh.js").then(e=>e.s),__vite__mapDeps([371,1]))}),scala:ie("scala",function(){return Q(()=>import("./scala-c85IbDKx.js").then(e=>e.s),__vite__mapDeps([372,1,259]))}),scheme:ie("scheme",function(){return Q(()=>import("./scheme-DujsssZ_.js").then(e=>e.s),__vite__mapDeps([373,1,291]))}),scss:ie("scss",function(){return Q(()=>import("./scss-N9CyGJ1A.js").then(e=>e.s),__vite__mapDeps([374,1]))}),shellSession:ie("shellSession",function(){return Q(()=>import("./shell-session-CfJU-2jh.js").then(e=>e.s),__vite__mapDeps([375,1,159]))}),smali:ie("smali",function(){return Q(()=>import("./smali-7KK8MopY.js").then(e=>e.s),__vite__mapDeps([376,1]))}),smalltalk:ie("smalltalk",function(){return Q(()=>import("./smalltalk-DJTW1rgy.js").then(e=>e.s),__vite__mapDeps([377,1]))}),smarty:ie("smarty",function(){return Q(()=>import("./smarty-CswuHGTf.js").then(e=>e.s),__vite__mapDeps([378,1,202]))}),sml:ie("sml",function(){return Q(()=>import("./sml-4a7AgiKJ.js").then(e=>e.s),__vite__mapDeps([379,1]))}),solidity:ie("solidity",function(){return Q(()=>import("./solidity-DEN_xXGX.js").then(e=>e.s),__vite__mapDeps([380,1]))}),solutionFile:ie("solutionFile",function(){return Q(()=>import("./solution-file-DWy8oS52.js").then(e=>e.s),__vite__mapDeps([381,1]))}),soy:ie("soy",function(){return Q(()=>import("./soy-BX0S4Ybl.js").then(e=>e.s),__vite__mapDeps([382,1,202]))}),sparql:ie("sparql",function(){return Q(()=>import("./sparql-B-dncyn2.js").then(e=>e.s),__vite__mapDeps([383,1,384]))}),splunkSpl:ie("splunkSpl",function(){return Q(()=>import("./splunk-spl-BL9M6RFD.js").then(e=>e.s),__vite__mapDeps([385,1]))}),sqf:ie("sqf",function(){return Q(()=>import("./sqf-B-w3EaXj.js").then(e=>e.s),__vite__mapDeps([386,1]))}),sql:ie("sql",function(){return Q(()=>import("./sql-CSwhl0T2.js").then(e=>e.s),__vite__mapDeps([387,1,141]))}),squirrel:ie("squirrel",function(){return Q(()=>import("./squirrel-C5_0fEts.js").then(e=>e.s),__vite__mapDeps([388,1]))}),stan:ie("stan",function(){return Q(()=>import("./stan-BkKsrDj5.js").then(e=>e.s),__vite__mapDeps([389,1]))}),stylus:ie("stylus",function(){return Q(()=>import("./stylus-2Q_1bI5O.js").then(e=>e.s),__vite__mapDeps([390,1]))}),swift:ie("swift",function(){return Q(()=>import("./swift-d0VCk99T.js").then(e=>e.s),__vite__mapDeps([391,1]))}),systemd:ie("systemd",function(){return Q(()=>import("./systemd-B69haCtV.js").then(e=>e.s),__vite__mapDeps([392,1]))}),t4Cs:ie("t4Cs",function(){return Q(()=>import("./t4-cs-CLTzhrWu.js").then(e=>e.t),__vite__mapDeps([393,1,394,153]))}),t4Templating:ie("t4Templating",function(){return Q(()=>import("./t4-templating-CInlPI0-.js").then(e=>e.t),__vite__mapDeps([395,1,394]))}),t4Vb:ie("t4Vb",function(){return Q(()=>import("./t4-vb-CEKPTSWr.js").then(e=>e.t),__vite__mapDeps([396,1,394,397,161]))}),tap:ie("tap",function(){return Q(()=>import("./tap-3j2EobdJ.js").then(e=>e.t),__vite__mapDeps([398,1,399]))}),tcl:ie("tcl",function(){return Q(()=>import("./tcl-zimK4Rb-.js").then(e=>e.t),__vite__mapDeps([400,1]))}),textile:ie("textile",function(){return Q(()=>import("./textile-7onSDWIs.js").then(e=>e.t),__vite__mapDeps([401,1]))}),toml:ie("toml",function(){return Q(()=>import("./toml-B0WKHIUt.js").then(e=>e.t),__vite__mapDeps([402,1]))}),tremor:ie("tremor",function(){return Q(()=>import("./tremor-DTcir1gV.js").then(e=>e.t),__vite__mapDeps([403,1]))}),tsx:ie("tsx",function(){return Q(()=>import("./tsx-C2pKQQQ0.js").then(e=>e.t),__vite__mapDeps([404,1,279,272]))}),tt2:ie("tt2",function(){return Q(()=>import("./tt2-C4s6UOud.js").then(e=>e.t),__vite__mapDeps([405,1,202]))}),turtle:ie("turtle",function(){return Q(()=>import("./turtle-BYwbX2lo.js").then(e=>e.t),__vite__mapDeps([406,1,384]))}),twig:ie("twig",function(){return Q(()=>import("./twig-DALNrbqc.js").then(e=>e.t),__vite__mapDeps([407,1,202]))}),typescript:ie("typescript",function(){return Q(()=>import("./typescript-hEHsyI9-.js").then(e=>e.t),__vite__mapDeps([408,1,272]))}),typoscript:ie("typoscript",function(){return Q(()=>import("./typoscript-C_RZnLUi.js").then(e=>e.t),__vite__mapDeps([409,1]))}),unrealscript:ie("unrealscript",function(){return Q(()=>import("./unrealscript-DO0UKSEs.js").then(e=>e.u),__vite__mapDeps([410,1]))}),uorazor:ie("uorazor",function(){return Q(()=>import("./uorazor-Cw2oyUim.js").then(e=>e.u),__vite__mapDeps([411,1]))}),uri:ie("uri",function(){return Q(()=>import("./uri-Cla3Mizl.js").then(e=>e.u),__vite__mapDeps([412,1]))}),v:ie("v",function(){return Q(()=>import("./v-BsukdtQB.js").then(e=>e.v),__vite__mapDeps([413,1]))}),vala:ie("vala",function(){return Q(()=>import("./vala-C185s0T4.js").then(e=>e.v),__vite__mapDeps([414,1]))}),vbnet:ie("vbnet",function(){return Q(()=>import("./vbnet-CJSJpYVN.js").then(e=>e.v),__vite__mapDeps([415,1,397,161]))}),velocity:ie("velocity",function(){return Q(()=>import("./velocity-CyQirldx.js").then(e=>e.v),__vite__mapDeps([416,1]))}),verilog:ie("verilog",function(){return Q(()=>import("./verilog-DM4rVBaH.js").then(e=>e.v),__vite__mapDeps([417,1]))}),vhdl:ie("vhdl",function(){return Q(()=>import("./vhdl-B2ul-nke.js").then(e=>e.v),__vite__mapDeps([418,1]))}),vim:ie("vim",function(){return Q(()=>import("./vim-D2bsD5Qn.js").then(e=>e.v),__vite__mapDeps([419,1]))}),visualBasic:ie("visualBasic",function(){return Q(()=>import("./visual-basic-DNYvyv_b.js").then(e=>e.v),__vite__mapDeps([420,1]))}),warpscript:ie("warpscript",function(){return Q(()=>import("./warpscript-DjoJn5rp.js").then(e=>e.w),__vite__mapDeps([421,1]))}),wasm:ie("wasm",function(){return Q(()=>import("./wasm-BbdpnjqR.js").then(e=>e.w),__vite__mapDeps([422,1]))}),webIdl:ie("webIdl",function(){return Q(()=>import("./web-idl-BniNXYF8.js").then(e=>e.w),__vite__mapDeps([423,1]))}),wiki:ie("wiki",function(){return Q(()=>import("./wiki-mlk-5nnD.js").then(e=>e.w),__vite__mapDeps([424,1]))}),wolfram:ie("wolfram",function(){return Q(()=>import("./wolfram-qZAo5rwv.js").then(e=>e.w),__vite__mapDeps([425,1]))}),wren:ie("wren",function(){return Q(()=>import("./wren-BqEZDn1c.js").then(e=>e.w),__vite__mapDeps([426,1]))}),xeora:ie("xeora",function(){return Q(()=>import("./xeora-Cnf6lXKg.js").then(e=>e.x),__vite__mapDeps([427,1]))}),xmlDoc:ie("xmlDoc",function(){return Q(()=>import("./xml-doc-Bt7GfDs3.js").then(e=>e.x),__vite__mapDeps([428,1]))}),xojo:ie("xojo",function(){return Q(()=>import("./xojo-DJ-XOrAn.js").then(e=>e.x),__vite__mapDeps([429,1]))}),xquery:ie("xquery",function(){return Q(()=>import("./xquery-DijxsTGH.js").then(e=>e.x),__vite__mapDeps([430,1]))}),yaml:ie("yaml",function(){return Q(()=>import("./yaml-uyIc--AI.js").then(e=>e.y),__vite__mapDeps([431,1,399]))}),yang:ie("yang",function(){return Q(()=>import("./yang-BSK0EYb5.js").then(e=>e.y),__vite__mapDeps([432,1]))}),zig:ie("zig",function(){return Q(()=>import("./zig-C5U7OOzb.js").then(e=>e.z),__vite__mapDeps([433,1]))})},fGt=uGt({loader:function(){return Q(()=>import("./core-Ce8M0wN-.js").then(t=>t.c),__vite__mapDeps([434,1,304,192,177,264])).then(function(t){return t.default||t})},isLanguageRegistered:function(t,n){return t.registered(n)},languageLoaders:dGt,registerLanguage:function(t,n,r){return t.register(r)}}),mGt="light";function pGt(e){return{mode:mGt,...e?.theme}}function Nn(e){var t=e;return function(n){var r=pGt(n);let s=r.mode;return t[s]}}const hGt=e=>{const t={theme:e};return{lineNumberColor:Nn({light:"#383a42",dark:"#abb2bf"})(t),lineNumberBgColor:Nn({light:"#fafafa",dark:"#282c34"})(t),backgroundColor:Nn({light:"#fafafa",dark:"#282c34"})(t),textColor:Nn({light:"#383a42",dark:"#abb2bf"})(t),substringColor:Nn({light:"#e45649",dark:"#e06c75"})(t),keywordColor:Nn({light:"#a626a4",dark:"#c678dd"})(t),attributeColor:Nn({light:"#50a14f",dark:"#98c379"})(t),selectorAttributeColor:Nn({light:"#e45649",dark:"#e06c75"})(t),docTagColor:Nn({light:"#a626a4",dark:"#c678dd"})(t),nameColor:Nn({light:"#e45649",dark:"#e06c75"})(t),builtInColor:Nn({light:"#c18401",dark:"#e6c07b"})(t),literalColor:Nn({light:"#0184bb",dark:"#56b6c2"})(t),bulletColor:Nn({light:"#4078f2",dark:"#61aeee"})(t),codeColor:Nn({light:"#383a42",dark:"#abb2bf"})(t),additionColor:Nn({light:"#50a14f",dark:"#98c379"})(t),regexpColor:Nn({light:"#50a14f",dark:"#98c379"})(t),symbolColor:Nn({light:"#4078f2",dark:"#61aeee"})(t),variableColor:Nn({light:"#986801",dark:"#d19a66"})(t),templateVariableColor:Nn({light:"#986801",dark:"#d19a66"})(t),linkColor:Nn({light:"#4078f2",dark:"#61aeee"})(t),selectorClassColor:Nn({light:"#986801",dark:"#d19a66"})(t),typeColor:Nn({light:"#986801",dark:"#d19a66"})(t),stringColor:Nn({light:"#50a14f",dark:"#98c379"})(t),selectorIdColor:Nn({light:"#4078f2",dark:"#61aeee"})(t),quoteColor:Nn({light:"#a0a1a7",dark:"#5c6370"})(t),templateTagColor:Nn({light:"#383a42",dark:"#abb2bf"})(t),deletionColor:Nn({light:"#e45649",dark:"#e06c75"})(t),titleColor:Nn({light:"#4078f2",dark:"#61aeee"})(t),sectionColor:Nn({light:"#e45649",dark:"#e06c75"})(t),commentColor:Nn({light:"#a0a1a7",dark:"#5c6370"})(t),metaKeywordColor:Nn({light:"#383a42",dark:"#abb2bf"})(t),metaColor:Nn({light:"#4078f2",dark:"#61aeee"})(t),functionColor:Nn({light:"#383a42",dark:"#abb2bf"})(t),numberColor:Nn({light:"#986801",dark:"#d19a66"})(t)}},wk="inherit",Lz="inherit",gGt={fontSize:Lz,fontFamily:wk,lineHeight:20/12,padding:8},yGt=e=>({fontSize:Lz,lineHeight:20/14,color:e.lineNumberColor,backgroundColor:e.lineNumberBgColor,flexShrink:0,padding:8,textAlign:"right",userSelect:"none"}),jIe=e=>({key:{color:e.keywordColor,fontWeight:"bolder"},keyword:{color:e.keywordColor,fontWeight:"bolder"},"attr-name":{color:e.attributeColor},selector:{color:e.selectorTagColor},comment:{color:e.commentColor,fontFamily:wk,fontStyle:"italic"},"block-comment":{color:e.commentColor,fontFamily:wk,fontStyle:"italic"},"function-name":{color:e.sectionColor},"class-name":{color:e.sectionColor},doctype:{color:e.docTagColor},substr:{color:e.substringColor},namespace:{color:e.nameColor},builtin:{color:e.builtInColor},entity:{color:e.literalColor},bullet:{color:e.bulletColor},code:{color:e.codeColor},addition:{color:e.additionColor},regex:{color:e.regexpColor},symbol:{color:e.symbolColor},variable:{color:e.variableColor},url:{color:e.linkColor},"selector-attr":{color:e.selectorAttributeColor},"selector-pseudo":{color:e.selectorPseudoColor},type:{color:e.typeColor},string:{color:e.stringColor},quote:{color:e.quoteColor},tag:{color:e.templateTagColor},deletion:{color:e.deletionColor},title:{color:e.titleColor},section:{color:e.sectionColor},"meta-keyword":{color:e.metaKeywordColor},meta:{color:e.metaColor},italic:{fontStyle:"italic"},bold:{fontWeight:"bolder"},function:{color:e.functionColor},number:{color:e.numberColor}}),AIe=e=>({fontSize:Lz,fontFamily:wk,background:e.backgroundColor,color:e.textColor,borderRadius:3,display:"flex",lineHeight:20/14,overflowX:"auto",whiteSpace:"pre"}),xGt=e=>({'pre[class*="language-"]':AIe(e),...jIe(e)}),vGt=e=>({'pre[class*="language-"]':{...AIe(e),padding:"2px 4px",display:"inline",whiteSpace:"pre-wrap"},...jIe(e)});function IIe(e={mode:"light"}){const t={...hGt(e),...e};return{lineNumberContainerStyle:yGt(t),codeBlockStyle:xGt(t),inlineCodeStyle:vGt(t),codeContainerStyle:gGt}}const bGt=Object.freeze([{name:"PHP",alias:["php","php3","php4","php5"],value:"php"},{name:"Java",alias:["java"],value:"java"},{name:"CSharp",alias:["csharp","c#","cs"],value:"csharp"},{name:"Python",alias:["python","py"],value:"python"},{name:"JavaScript",alias:["javascript","js"],value:"javascript"},{name:"XML",alias:["xml"],value:"xml"},{name:"HTML",alias:["html","htm"],value:"markup"},{name:"C++",alias:["c++","cpp","clike"],value:"cpp"},{name:"Ruby",alias:["ruby","rb","duby"],value:"ruby"},{name:"Objective-C",alias:["objective-c","objectivec","obj-c","objc"],value:"objectivec"},{name:"C",alias:["c"],value:"cpp"},{name:"Swift",alias:["swift"],value:"swift"},{name:"TeX",alias:["tex","latex"],value:"tex"},{name:"Shell",alias:["shell","sh","ksh","zsh"],value:"bash"},{name:"Scala",alias:["scala"],value:"scala"},{name:"Go",alias:["go"],value:"go"},{name:"ActionScript",alias:["actionscript","actionscript3","as"],value:"actionscript"},{name:"ColdFusion",alias:["coldfusion"],value:"xml"},{name:"JavaFX",alias:["javafx","jfx"],value:"java"},{name:"VbNet",alias:["vbnet","vb.net"],value:"vbnet"},{name:"JSON",alias:["json"],value:"json"},{name:"MATLAB",alias:["matlab"],value:"matlab"},{name:"Groovy",alias:["groovy"],value:"groovy"},{name:"SQL",alias:["sql","postgresql","postgres","plpgsql","psql","postgresql-console","postgres-console","tsql","t-sql","mysql","sqlite"],value:"sql"},{name:"R",alias:["r"],value:"r"},{name:"Perl",alias:["perl","pl"],value:"perl"},{name:"Lua",alias:["lua"],value:"lua"},{name:"Delphi",alias:["delphi","pas","pascal","objectpascal"],value:"delphi"},{name:"XML",alias:["xml"],value:"xml"},{name:"TypeScript",alias:["typescript","ts","tsx"],value:"typescript"},{name:"CoffeeScript",alias:["coffeescript","coffee-script","coffee"],value:"coffeescript"},{name:"Haskell",alias:["haskell","hs"],value:"haskell"},{name:"Puppet",alias:["puppet"],value:"puppet"},{name:"Arduino",alias:["arduino"],value:"arduino"},{name:"Fortran",alias:["fortran"],value:"fortran"},{name:"Erlang",alias:["erlang","erl"],value:"erlang"},{name:"PowerShell",alias:["powershell","posh","ps1","psm1"],value:"powershell"},{name:"Haxe",alias:["haxe","hx","hxsl"],value:"haxe"},{name:"Elixir",alias:["elixir","ex","exs"],value:"elixir"},{name:"Verilog",alias:["verilog","v"],value:"verilog"},{name:"Rust",alias:["rust"],value:"rust"},{name:"VHDL",alias:["vhdl"],value:"vhdl"},{name:"Sass",alias:["sass"],value:"less"},{name:"OCaml",alias:["ocaml"],value:"ocaml"},{name:"Dart",alias:["dart"],value:"dart"},{name:"CSS",alias:["css"],value:"css"},{name:"reStructuredText",alias:["restructuredtext","rst","rest"],value:"rest"},{name:"ObjectPascal",alias:["objectpascal"],value:"delphi"},{name:"Kotlin",alias:["kotlin"],value:"kotlin"},{name:"D",alias:["d"],value:"d"},{name:"Octave",alias:["octave"],value:"matlab"},{name:"QML",alias:["qbs","qml"],value:"qml"},{name:"Prolog",alias:["prolog"],value:"prolog"},{name:"FoxPro",alias:["foxpro","vfp","clipper","xbase"],value:"vbnet"},{name:"Scheme",alias:["scheme","scm"],value:"scheme"},{name:"CUDA",alias:["cuda","cu"],value:"cpp"},{name:"Julia",alias:["julia","jl"],value:"julia"},{name:"Racket",alias:["racket","rkt"],value:"lisp"},{name:"Ada",alias:["ada","ada95","ada2005"],value:"ada"},{name:"Tcl",alias:["tcl"],value:"tcl"},{name:"Mathematica",alias:["mathematica","mma","nb"],value:"mathematica"},{name:"Autoit",alias:["autoit"],value:"autoit"},{name:"StandardML",alias:["standardmL","sml","standardml"],value:"sml"},{name:"Objective-J",alias:["objective-j","objectivej","obj-j","objj"],value:"objectivec"},{name:"Smalltalk",alias:["smalltalk","squeak","st"],value:"smalltalk"},{name:"Vala",alias:["vala","vapi"],value:"vala"},{name:"ABAP",alias:["abap"],value:"sql"},{name:"LiveScript",alias:["livescript","live-script"],value:"livescript"},{name:"XQuery",alias:["xquery","xqy","xq","xql","xqm"],value:"xquery"},{name:"PlainText",alias:["text","plaintext"],value:"text"},{name:"Yaml",alias:["yaml","yml"],value:"yaml"},{name:"GraphQL",alias:["graphql","gql"],value:"graphql"}]),_Gt=e=>{if(!e)return"";const t=bGt.find(n=>n.name===e||n.alias.includes(e));return t?t.value:e||"text"};class RIe extends f.PureComponent{constructor(){super(...arguments),this._isMounted=!1}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}getLineOpacity(t){if(!this.props.highlight)return 1;const n=this.props.highlight.split(",").map(r=>{if(r.indexOf("-")>0){const[s,a]=r.split("-").map(Number).sort();return Array(a+1).fill(void 0).map((i,l)=>l).slice(s,a+1)}return Number(r)}).reduce((r,s)=>r.concat(s),[]);return n.length===0||n.includes(t)?1:.3}render(){const{inlineCodeStyle:t}=IIe(this.props.theme),r={language:_Gt(this.props.language),PreTag:this.props.preTag,style:this.props.codeStyle||t,showLineNumbers:this.props.showLineNumbers,startingLineNumber:this.props.startingLineNumber,codeTagProps:this.props.codeTagProps,wrapLongLines:this.props.wrapLongLines};return R.createElement(fGt,Object.assign({},r,{wrapLines:!!this.props.highlight,customStyle:this.props.customStyle,lineProps:s=>({style:{opacity:this.getLineOpacity(s),...this.props.lineNumberContainerStyle}})}),this.props.text)}}RIe.defaultProps={theme:{},showLineNumbers:!1,wrapLongLines:!1,startingLineNumber:1,lineNumberContainerStyle:{},codeTagProps:{},preTag:"span",highlight:"",customStyle:{}};const PIe="text";let Dz=class extends f.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.handleCopy=t=>{const n=t.nativeEvent.clipboardData;if(n){t.preventDefault();const r=window.getSelection();if(r===null)return;const s=r.toString(),a=`<!doctype html><html><head></head><body><pre>${s}</pre></body></html>`;n.clearData(),n.setData("text/html",a),n.setData("text/plain",s)}}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){var t,n,r,s;const{lineNumberContainerStyle:a,codeBlockStyle:i,codeContainerStyle:l}=IIe(this.props.theme),c={language:this.props.language||PIe,codeStyle:{...i,...(t=this.props)===null||t===void 0?void 0:t.codeBlockStyle},customStyle:(n=this.props)===null||n===void 0?void 0:n.customStyle,showLineNumbers:this.props.showLineNumbers,startingLineNumber:this.props.startingLineNumber,codeTagProps:{style:{...l,...(r=this.props)===null||r===void 0?void 0:r.codeContainerStyle}},lineNumberContainerStyle:{...a,...(s=this.props)===null||s===void 0?void 0:s.lineNumberContainerStyle},text:this.props.text.toString(),highlight:this.props.highlight,wrapLongLines:this.props.wrapLongLines};return R.createElement(RIe,Object.assign({},c))}};Dz.displayName="CodeBlock";Dz.defaultProps={text:"",showLineNumbers:!0,wrapLongLines:!1,startingLineNumber:1,language:PIe,theme:{},highlight:"",lineNumberContainerStyle:{},customStyle:{},codeBlockStyle:{}};var wGt=Wzt(Dz);VN.button`
  position: absolute;
  top: 0.5em;
  right: 0.75em;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  background: ${e=>e.theme.backgroundColor};
  margin-top: 0.15rem;
  border-radius: 0.25rem;
  max-height: 2rem;
  max-width: 2rem;
  padding: 0.25rem;
  &:hover {
    opacity: ${e=>e.copied?1:.5};
  }
  &:focus {
    outline: none;
    opacity: 1;
  }
  .icon {
    width: 1rem;
    height: 1rem;
  }
`;VN.div`
  position: relative;
  background: ${e=>e.theme.backgroundColor};
  border-radius: 0.25rem;
  padding: ${e=>e.codeBlock?"0.25rem 0.5rem 0.25rem 0.25rem":"0.25rem"};
`;VN.div`
    position: relative;
    width: ${({width:e})=>e||"auto"};
    max-width: 100%;
    padding: 8pt;
    padding-right: calc(2 * 16pt);
    color: ${({style:e})=>e.color};
    background-color: ${({style:e})=>e.bgColor};
    border: 1px solid ${({style:e})=>e.border};
    border-radius: 5px;
  pre {
    margin: 0;
    padding: 0;
    border: none;
    background-color: transparent;
    color: ${({style:e})=>e.color};
    font-size: 0.8125rem;
  }
  pre::before {
    content: '$ ';
    user-select: none;
  }
  pre :global(*) {
    margin: 0;
    padding: 0;
    font-size: inherit;
    color: inherit;
  }
  .copy {
    position: absolute;
    right: 0;
    top: -2px;
    transform: translateY(50%);
    background-color: ${({style:e})=>e.bgColor};
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: calc(2 * 16pt);
    color: inherit;
    transition: opacity 0.2s ease 0s;
    border-radius: 5px;
    cursor: pointer;
    user-select: none;
  }
  .copy:hover {
    opacity: 0.7;
  }
`;var CGt={lineNumberColor:"#c5c8c6",lineNumberBgColor:"#1d1f21",backgroundColor:"#1d1f21",textColor:"#c5c8c6",substringColor:"#c5c8c6",keywordColor:"#b294bb",attributeColor:"#f0c674",selectorAttributeColor:"#b294bb",docTagColor:"#c5c8c6",nameColor:"#cc6666",builtInColor:"#de935f",literalColor:"#de935f",bulletColor:"#b5bd68",codeColor:"#c5c8c6",additionColor:"#b5bd68",regexpColor:"#cc6666",symbolColor:"#b5bd68",variableColor:"#cc6666",templateVariableColor:"#cc6666",linkColor:"#de935f",selectorClassColor:"#cc6666",typeColor:"#de935f",stringColor:"#b5bd68",selectorIdColor:"#cc6666",quoteColor:"#969896",templateTagColor:"#c5c8c6",deletionColor:"#cc6666",titleColor:"#81a2be",sectionColor:"#81a2be",commentColor:"#969896",metaKeywordColor:"#c5c8c6",metaColor:"#de935f",functionColor:"#c5c8c6",numberColor:"#de935f"},SGt={lineNumberColor:"#4d4d4c",lineNumberBgColor:"white",backgroundColor:"white",textColor:"#4d4d4c",substringColor:"#4d4d4c",keywordColor:"#8959a8",attributeColor:"#eab700",selectorAttributeColor:"#8959a8",docTagColor:"#4d4d4c",nameColor:"#c82829",builtInColor:"#f5871f",literalColor:"#f5871f",bulletColor:"#718c00",codeColor:"#4d4d4c",additionColor:"#718c00",regexpColor:"#c82829",symbolColor:"#718c00",variableColor:"#c82829",templateVariableColor:"#c82829",linkColor:"#f5871f",selectorClassColor:"#c82829",typeColor:"#f5871f",stringColor:"#718c00",selectorIdColor:"#c82829",quoteColor:"#8e908c",templateTagColor:"#4d4d4c",deletionColor:"#c82829",titleColor:"#4271ae",sectionColor:"#4271ae",commentColor:"#8e908c",metaKeywordColor:"#4d4d4c",metaColor:"#f5871f",functionColor:"#4d4d4c",numberColor:"#f5871f"};const lf=R.memo(e=>{const{children:t,className:n,codeBlockProps:r,hideTools:s,trackEvent:a,...i}=e,{language:l="text",showLineNumbers:c,text:u,theme:d,wrapLongLines:m,...p}=r,{colorScheme:h}=Jr({addSecondPass:!0}),g=f.useMemo(()=>{let C;return d?C=d:(C=h==="dark"?CGt:SGt,C.backgroundColor="transparent",C.lineNumberBgColor="transparent"),C},[h,d]),y=V("codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded font-mono text-sm font-normal",n),x=f.useCallback(()=>{navigator.clipboard.writeText(String(t)),a?.("click code block copy",{language:l??"text"})},[t,l,a]),v=f.useMemo(()=>({scrollbarWidth:"thin"}),[]),[b,_]=f.useState(!!(m??l==="text")),w=f.useCallback(()=>{_(C=>{const S=!C;return a?.("click code block wrap toggle",{wrap:S}),S})},[a]);return o.jsxs("div",{className:y,...i,children:[o.jsx("div",{className:"translate-y-xs -translate-x-xs bottom-xl mb-xl sticky top-0 flex h-0 items-start justify-end",children:!s&&o.jsxs(o.Fragment,{children:[o.jsx(Te,{icon:b?UDe:BDe,size:"small",pill:!0,onClick:w,testId:"toggle-wrap-code-button",ariaLabel:b?"Unwrap":"Wrap"}),o.jsx(Te,{icon:DD,size:"small",pill:!0,clickFeedback:!0,onClick:x,testId:"copy-code-button",ariaLabel:"Copy"})]})}),o.jsxs("div",{className:"-mt-xl",children:[l&&!s&&o.jsx("div",{children:o.jsx("div",{"data-testid":"code-language-indicator",className:"text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-[3px] font-thin",children:l})}),o.jsx("div",{className:"pr-lg",children:o.jsx(wGt,{as:void 0,forwardedAs:void 0,language:l,showLineNumbers:!1,text:String(t),theme:g,customStyle:v,wrapLongLines:b,...p})})]})]})});lf.displayName="CodeBlock";const OIe=R.memo(({step:e,action:t})=>{const{$t:n}=Z(),[r,s]=f.useState(!1),{final:a,status:i,script:l,output:c,stdout:u}=e.content,d=!a,m=i==="generating"||i==="executing",p=f.useCallback(()=>{s(x=>!x)},[]),h=u&&c?u+`
`+c:u||c||"",g=f.useMemo(()=>({language:"python"}),[]),y=!!l;return o.jsxs("div",{children:[o.jsx(pe,{onClick:p,text:t,icon:VDe,isLoading:d,size:"tiny",pill:!0,chevron:y,chevronIcon:r?Vy:Bn}),o.jsx(Je,{children:r&&y&&o.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1,transition:{ease:"easeIn",duration:.15}},className:"mb-sm space-y-sm",children:[o.jsx(lf,{className:"text-xs",codeBlockProps:g,children:l}),!m&&o.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1,transition:{ease:"easeIn",duration:.15}},children:[o.jsx(F,{variant:"tiny",color:"light",children:n(h?{defaultMessage:"Output",id:"fio5opLcOZ"}:{defaultMessage:"This code did not produce an output",id:"UgqMuAXFKs"})}),i!=="error"&&h&&o.jsx(lf,{className:V("scrollbar-subtle max-h-[220px] overflow-y-auto text-xs",i==="success"),codeBlockProps:g,children:h})]})]})})]})});OIe.displayName="CodeStep";const LIe=R.memo(({asset:e})=>{const{result:{backend_uuid:t,context_uuid:n},result:r}=ln(),{closeModal:s,openModal:a}=wt(),{updateCurrentMode:i}=PN(),l=AN(),{openCanvas:c,doCanvasAction:u}=Tz(),{trackEvent:d}=je(),m=f.useCallback(async()=>{if(l&&VHt(e)){s(),c(),u({type:"setAsset",asset:e,result:r}),u({type:"setTab",tab:Gb.Preview}),d("canvas opened",{source:"click",contextUUID:n,entryUUID:t,contentType:e.asset_type,assetUUID:e.uuid});return}e.asset_type===Mt.APP||e.asset_type===Mt.SLIDES?(s(),i("apps")):a("searchStepsAssetsModal",{backendUUID:e.backend_uuid??t,assetUUID:e.uuid,answerMode:"tasks"})},[l,e,s,c,u,r,d,n,t,i,a]),{title:p,description:h,Icon:g}=$Ht(e);return o.jsxs(H,{onClick:m,role:"button",tabIndex:0,variant:u3.subtler,className:"flex w-fit items-center rounded-lg p-1.5",children:[o.jsx(H,{variant:"super",className:"m-1 flex size-8 items-center justify-center rounded-md p-2",children:o.jsx(g,{color:"background",size:16})}),o.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[o.jsx(F,{variant:"small",color:"default",className:"!font-display !text-[0.8125rem] font-medium",children:p}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"!font-display !text-[0.6875rem] leading-none",children:h})]})]})},({asset:e,...t},{asset:n,...r})=>Pa(t,r)&&ys(e,n));LIe.displayName="AssetToken";const DIe=R.memo(({step:e,action:t})=>{const{final:n,file_name:r,page_count:s,word_count:a}=e.content,i=!n;let l=t;return r&&n&&(l=r,s!=null?(l+=` (${s} pages`,a!=null&&(l+=`, ${a} words`),l+=")"):a!=null&&(l+=` (${a} words)`)),o.jsx(pe,{text:t,icon:zk,isLoading:i,size:"tiny",pill:!0,toolTip:l,tooltipLayout:"top"})});DIe.displayName="DocxStep";const FIe=R.memo(({status:e})=>{const{$t:t}=Z();let n=Ha,r=t({defaultMessage:"Done",id:"JXdbo8Vnlw"});switch(e){case"SENT":n=Ha,r=t({defaultMessage:"Email sent",id:"as7ksh6tP3"});break;case"FORWARDED":n=$De,r=t({defaultMessage:"Email forwarded",id:"QUWo2L2sfE"});break;case"REJECTED":n=It,r=t({defaultMessage:"Email rejected",id:"+469cQAaqI"});break;default:n=Ha,r=t({defaultMessage:"Done",id:"JXdbo8Vnlw"});break}return o.jsx(Ws,{icon:n,iconClassName:"text-super",text:r})});FIe.displayName="EmailStatusStep";const UIe=R.memo(({onClick:e,urls:t})=>{const n=f.useMemo(()=>t.map(r=>o.jsx(BIe,{url:r,onClick:e},r)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(Vp,{items:n,initialDisplayCount:1})})});UIe.displayName="GeneratedImageResultsStep";const BIe=R.memo(({url:e,onClick:t})=>{const n=f.useCallback(()=>{t?.(e)},[e,t]);return o.jsx(Ye,{className:"block",href:e,target:"_blank",rel:"noopener nofollow",onClick:n,children:o.jsx(H,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(eo,{variant:"tinyMono",className:"!text-[0.7rem]",url:e,isAttachment:!1,connectionType:Ot.GENERATED_IMAGE,source:"Generated Image"})})},e)});BIe.displayName="LinkFactory";const VIe=R.memo(({onClick:e,urls:t})=>{const n=f.useMemo(()=>t.map(r=>o.jsx($Ie,{url:r,onClick:e},r)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(Vp,{items:n,initialDisplayCount:1})})});VIe.displayName="GeneratedVideoResultsStep";const $Ie=R.memo(({url:e,onClick:t})=>{const n=f.useCallback(()=>{t?.(e)},[e,t]);return o.jsx(Ye,{className:"block",href:e,target:"_blank",rel:"noopener nofollow",onClick:n,children:o.jsx(H,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(eo,{variant:"tinyMono",className:"!text-[0.7rem]",url:e,isAttachment:!1,connectionType:Ot.GENERATED_VIDEO,source:"Generated Video"})})},e)});$Ie.displayName="LinkFactory";const j7=R.memo(({color:e,title:t})=>{const n="bg-[#13343B] dark:bg-[#F5F5F5]",s=(a=>a?{red:"bg-[#C0152F] dark:bg-[#FF5459]",maroon:"bg-[#944454] dark:bg-[#B3C901]",orange:"bg-[#DB7100] dark:bg-[#FFAB44]",teal:"bg-[#21808D] dark:bg-[#32B8C6]",grey:n,brown:"bg-[#A84B2F] dark:bg-[#E68161]",green:"bg-[#848456] dark:bg-[#B4B662]",gold:"bg-[#D39900] dark:bg-[#F0B435]",purple:"bg-[#865D95] dark:bg-[#C48ED8]",blue:"bg-[#19789E] dark:bg-[#54B4E3]"}[a]??n:n)(e);return o.jsx("div",{className:V("py-xs w-fit rounded-md px-2.5",s),children:o.jsx(F,{className:"translate-y-half",variant:"tiny",color:"defaultInverted",children:t})})});j7.displayName="GroupingTabsStep";const e2=(e,t)=>{if(typeof e=="object"&&e!==null&&t in e){const n=e[t];return typeof n=="string"?n:void 0}},EGt=(e,t)=>{if(e.step_type!=="MCP_TOOL_INPUT"||t.step_type!=="MCP_TOOL_OUTPUT")return!1;const n=e2(e.content,"goal_id"),r=e2(t.content,"goal_id");if(n&&r)return n===r;const s=e2(e.content,"tool_name"),a=e2(t.content,"tool_name");return!!(s&&a&&s===a)},Ypn=e=>{if(!e?.length)return[];if(!e.some(s=>s.step_type==="MCP_TOOL_INPUT"||s.step_type==="MCP_TOOL_OUTPUT"))return e;let n=-1;return e.reduce((s,a,i)=>{if(i<=n||a.step_type==="MCP_TOOL_OUTPUT")return s;const l=e[i+1];return a.step_type==="MCP_TOOL_INPUT"&&l&&EGt(a,l)?(s.push({...a,mcp_tool_output_content:l.content}),n=i+1,s):(s.push({...a}),s)},[])},WIe=e=>{switch(e){case"Notion":return __;case"Linear":return U1;case"GitHub":return M3;case"Asana":return H1;case"Atlassian":return k3;case"Slack":return B1;case"Wiley":return Nu;default:return null}};function Qpn(e){const t=[],n=String(e||"");let r=n.indexOf(","),s=0,a=!1;for(;!a;){r===-1&&(r=n.length,a=!0);const i=n.slice(s,r).trim();(i||!a)&&t.push(i),s=r+1,r=n.indexOf(",",s)}return t}function MGt(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const kGt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TGt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,NGt={};function ble(e,t){return(NGt.jsx?TGt:kGt).test(e)}const jGt=/[ \t\n\f\r]/g;function AGt(e){return typeof e=="object"?e.type==="text"?_le(e.value):!1:_le(e)}function _le(e){return e.replace(jGt,"")===""}class Xw{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Xw.prototype.normal={};Xw.prototype.property={};Xw.prototype.space=void 0;function HIe(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Xw(n,r,t)}function A7(e){return e.toLowerCase()}class Ti{constructor(t,n){this.attribute=n,this.property=t}}Ti.prototype.attribute="";Ti.prototype.booleanish=!1;Ti.prototype.boolean=!1;Ti.prototype.commaOrSpaceSeparated=!1;Ti.prototype.commaSeparated=!1;Ti.prototype.defined=!1;Ti.prototype.mustUseProperty=!1;Ti.prototype.number=!1;Ti.prototype.overloadedBoolean=!1;Ti.prototype.property="";Ti.prototype.spaceSeparated=!1;Ti.prototype.space=void 0;let IGt=0;const tn=$p(),ts=$p(),zIe=$p(),qe=$p(),fr=$p(),Ig=$p(),Di=$p();function $p(){return 2**++IGt}const I7=Object.freeze(Object.defineProperty({__proto__:null,boolean:tn,booleanish:ts,commaOrSpaceSeparated:Di,commaSeparated:Ig,number:qe,overloadedBoolean:zIe,spaceSeparated:fr},Symbol.toStringTag,{value:"Module"})),MR=Object.keys(I7);class Fz extends Ti{constructor(t,n,r,s){let a=-1;if(super(t,n),wle(this,"space",s),typeof r=="number")for(;++a<MR.length;){const i=MR[a];wle(this,MR[a],(r&I7[i])===I7[i])}}}Fz.prototype.defined=!0;function wle(e,t,n){n&&(e[t]=n)}function Kx(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new Fz(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[A7(r)]=r,n[A7(a.attribute)]=r}return new Xw(t,n,e.space)}const GIe=Kx({properties:{ariaActiveDescendant:null,ariaAtomic:ts,ariaAutoComplete:null,ariaBusy:ts,ariaChecked:ts,ariaColCount:qe,ariaColIndex:qe,ariaColSpan:qe,ariaControls:fr,ariaCurrent:null,ariaDescribedBy:fr,ariaDetails:null,ariaDisabled:ts,ariaDropEffect:fr,ariaErrorMessage:null,ariaExpanded:ts,ariaFlowTo:fr,ariaGrabbed:ts,ariaHasPopup:null,ariaHidden:ts,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fr,ariaLevel:qe,ariaLive:null,ariaModal:ts,ariaMultiLine:ts,ariaMultiSelectable:ts,ariaOrientation:null,ariaOwns:fr,ariaPlaceholder:null,ariaPosInSet:qe,ariaPressed:ts,ariaReadOnly:ts,ariaRelevant:null,ariaRequired:ts,ariaRoleDescription:fr,ariaRowCount:qe,ariaRowIndex:qe,ariaRowSpan:qe,ariaSelected:ts,ariaSetSize:qe,ariaSort:null,ariaValueMax:qe,ariaValueMin:qe,ariaValueNow:qe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function qIe(e,t){return t in e?e[t]:t}function KIe(e,t){return qIe(e,t.toLowerCase())}const RGt=Kx({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ig,acceptCharset:fr,accessKey:fr,action:null,allow:null,allowFullScreen:tn,allowPaymentRequest:tn,allowUserMedia:tn,alt:null,as:null,async:tn,autoCapitalize:null,autoComplete:fr,autoFocus:tn,autoPlay:tn,blocking:fr,capture:null,charSet:null,checked:tn,cite:null,className:fr,cols:qe,colSpan:null,content:null,contentEditable:ts,controls:tn,controlsList:fr,coords:qe|Ig,crossOrigin:null,data:null,dateTime:null,decoding:null,default:tn,defer:tn,dir:null,dirName:null,disabled:tn,download:zIe,draggable:ts,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:tn,formTarget:null,headers:fr,height:qe,hidden:tn,high:qe,href:null,hrefLang:null,htmlFor:fr,httpEquiv:fr,id:null,imageSizes:null,imageSrcSet:null,inert:tn,inputMode:null,integrity:null,is:null,isMap:tn,itemId:null,itemProp:fr,itemRef:fr,itemScope:tn,itemType:fr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:tn,low:qe,manifest:null,max:null,maxLength:qe,media:null,method:null,min:null,minLength:qe,multiple:tn,muted:tn,name:null,nonce:null,noModule:tn,noValidate:tn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:tn,optimum:qe,pattern:null,ping:fr,placeholder:null,playsInline:tn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:tn,referrerPolicy:null,rel:fr,required:tn,reversed:tn,rows:qe,rowSpan:qe,sandbox:fr,scope:null,scoped:tn,seamless:tn,selected:tn,shadowRootClonable:tn,shadowRootDelegatesFocus:tn,shadowRootMode:null,shape:null,size:qe,sizes:null,slot:null,span:qe,spellCheck:ts,src:null,srcDoc:null,srcLang:null,srcSet:null,start:qe,step:null,style:null,tabIndex:qe,target:null,title:null,translate:null,type:null,typeMustMatch:tn,useMap:null,value:ts,width:qe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fr,axis:null,background:null,bgColor:null,border:qe,borderColor:null,bottomMargin:qe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:tn,declare:tn,event:null,face:null,frame:null,frameBorder:null,hSpace:qe,leftMargin:qe,link:null,longDesc:null,lowSrc:null,marginHeight:qe,marginWidth:qe,noResize:tn,noHref:tn,noShade:tn,noWrap:tn,object:null,profile:null,prompt:null,rev:null,rightMargin:qe,rules:null,scheme:null,scrolling:ts,standby:null,summary:null,text:null,topMargin:qe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:qe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:tn,disableRemotePlayback:tn,prefix:null,property:null,results:qe,security:null,unselectable:null},space:"html",transform:KIe}),PGt=Kx({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Di,accentHeight:qe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:qe,amplitude:qe,arabicForm:null,ascent:qe,attributeName:null,attributeType:null,azimuth:qe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:qe,by:null,calcMode:null,capHeight:qe,className:fr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:qe,diffuseConstant:qe,direction:null,display:null,dur:null,divisor:qe,dominantBaseline:null,download:tn,dx:null,dy:null,edgeMode:null,editable:null,elevation:qe,enableBackground:null,end:null,event:null,exponent:qe,externalResourcesRequired:null,fill:null,fillOpacity:qe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ig,g2:Ig,glyphName:Ig,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:qe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:qe,horizOriginX:qe,horizOriginY:qe,id:null,ideographic:qe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:qe,k:qe,k1:qe,k2:qe,k3:qe,k4:qe,kernelMatrix:Di,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:qe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:qe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:qe,overlineThickness:qe,paintOrder:null,panose1:null,path:null,pathLength:qe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:qe,pointsAtY:qe,pointsAtZ:qe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Di,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Di,rev:Di,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Di,requiredFeatures:Di,requiredFonts:Di,requiredFormats:Di,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:qe,specularExponent:qe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:qe,strikethroughThickness:qe,string:null,stroke:null,strokeDashArray:Di,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:qe,strokeOpacity:qe,strokeWidth:null,style:null,surfaceScale:qe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Di,tabIndex:qe,tableValues:null,target:null,targetX:qe,targetY:qe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Di,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:qe,underlineThickness:qe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:qe,values:null,vAlphabetic:qe,vMathematical:qe,vectorEffect:null,vHanging:qe,vIdeographic:qe,version:null,vertAdvY:qe,vertOriginX:qe,vertOriginY:qe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:qe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:qIe}),YIe=Kx({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),QIe=Kx({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:KIe}),XIe=Kx({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),OGt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},LGt=/[A-Z]/g,Cle=/-[a-z]/g,DGt=/^data[-\w.:]+$/i;function FGt(e,t){const n=A7(t);let r=t,s=Ti;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&DGt.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Cle,BGt);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Cle.test(a)){let i=a.replace(LGt,UGt);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}s=Fz}return new s(r,t)}function UGt(e){return"-"+e.toLowerCase()}function BGt(e){return e.charAt(1).toUpperCase()}const VGt=HIe([GIe,RGt,YIe,QIe,XIe],"html"),Uz=HIe([GIe,PGt,YIe,QIe,XIe],"svg");function $Gt(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function WGt(e){return e.join(" ").trim()}var Eh={},kR,Sle;function HGt(){if(Sle)return kR;Sle=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,i=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,u="/",d="*",m="",p="comment",h="declaration";kR=function(y,x){if(typeof y!="string")throw new TypeError("First argument must be a string");if(!y)return[];x=x||{};var v=1,b=1;function _(O){var A=O.match(t);A&&(v+=A.length);var j=O.lastIndexOf(c);b=~j?O.length-j:b+O.length}function w(){var O={line:v,column:b};return function(A){return A.position=new C(O),M(),A}}function C(O){this.start=O,this.end={line:v,column:b},this.source=x.source}C.prototype.content=y;function S(O){var A=new Error(x.source+":"+v+":"+b+": "+O);if(A.reason=O,A.filename=x.source,A.line=v,A.column=b,A.source=y,!x.silent)throw A}function E(O){var A=O.exec(y);if(A){var j=A[0];return _(j),y=y.slice(j.length),A}}function M(){E(n)}function k(O){var A;for(O=O||[];A=N();)A!==!1&&O.push(A);return O}function N(){var O=w();if(!(u!=y.charAt(0)||d!=y.charAt(1))){for(var A=2;m!=y.charAt(A)&&(d!=y.charAt(A)||u!=y.charAt(A+1));)++A;if(A+=2,m===y.charAt(A-1))return S("End of comment missing");var j=y.slice(2,A-2);return b+=2,_(j),y=y.slice(A),b+=2,O({type:p,comment:j})}}function P(){var O=w(),A=E(r);if(A){if(N(),!E(s))return S("property missing ':'");var j=E(a),T=O({type:h,property:g(A[0].replace(e,m)),value:j?g(j[0].replace(e,m)):m});return E(i),T}}function L(){var O=[];k(O);for(var A;A=P();)A!==!1&&(O.push(A),k(O));return O}return M(),L()};function g(y){return y?y.replace(l,m):m}return kR}var Ele;function zGt(){if(Ele)return Eh;Ele=1;var e=Eh&&Eh.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.default=n;var t=e(HGt());function n(r,s){var a=null;if(!r||typeof r!="string")return a;var i=(0,t.default)(r),l=typeof s=="function";return i.forEach(function(c){if(c.type==="declaration"){var u=c.property,d=c.value;l?s(u,d,c):d&&(a=a||{},a[u]=d)}}),a}return Eh}var z0={},Mle;function GGt(){if(Mle)return z0;Mle=1,Object.defineProperty(z0,"__esModule",{value:!0}),z0.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(u){return!u||n.test(u)||e.test(u)},i=function(u,d){return d.toUpperCase()},l=function(u,d){return"".concat(d,"-")},c=function(u,d){return d===void 0&&(d={}),a(u)?u:(u=u.toLowerCase(),d.reactCompat?u=u.replace(s,l):u=u.replace(r,l),u.replace(t,i))};return z0.camelCase=c,z0}var G0,kle;function qGt(){if(kle)return G0;kle=1;var e=G0&&G0.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e(zGt()),n=GGt();function r(s,a){var i={};return!s||typeof s!="string"||(0,t.default)(s,function(l,c){l&&c&&(i[(0,n.camelCase)(l,a)]=c)}),i}return r.default=r,G0=r,G0}var KGt=qGt();const YGt=Ka(KGt),ZIe=JIe("end"),Bz=JIe("start");function JIe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function QGt(e){const t=Bz(e),n=ZIe(e);if(t&&n)return{start:t,end:n}}function d1(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Tle(e.position):"start"in e||"end"in e?Tle(e):"line"in e||"column"in e?R7(e):""}function R7(e){return Nle(e&&e.line)+":"+Nle(e&&e.column)}function Tle(e){return R7(e&&e.start)+"-"+R7(e&&e.end)}function Nle(e){return e&&typeof e=="number"?e:1}class Ea extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},i=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(i=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=l?l.line:void 0,this.name=d1(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=i&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ea.prototype.file="";Ea.prototype.name="";Ea.prototype.reason="";Ea.prototype.message="";Ea.prototype.stack="";Ea.prototype.column=void 0;Ea.prototype.line=void 0;Ea.prototype.ancestors=void 0;Ea.prototype.cause=void 0;Ea.prototype.fatal=void 0;Ea.prototype.place=void 0;Ea.prototype.ruleId=void 0;Ea.prototype.source=void 0;const Vz={}.hasOwnProperty,XGt=new Map,ZGt=/[A-Z]/g,JGt=new Set(["table","tbody","thead","tfoot","tr"]),eqt=new Set(["td","th"]),eRe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function tqt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=cqt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=lqt(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Uz:VGt,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=tRe(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function tRe(e,t,n){if(t.type==="element")return nqt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return rqt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return aqt(e,t,n);if(t.type==="mdxjsEsm")return sqt(e,t);if(t.type==="root")return iqt(e,t,n);if(t.type==="text")return oqt(e,t)}function nqt(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Uz,e.schema=s),e.ancestors.push(t);const a=rRe(e,t.tagName,!1),i=uqt(e,t);let l=Wz(e,t);return JGt.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!AGt(c):!0})),nRe(e,i,a,t),$z(i,l),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}function rqt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Kb(e,t.position)}function sqt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Kb(e,t.position)}function aqt(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Uz,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:rRe(e,t.name,!0),i=dqt(e,t),l=Wz(e,t);return nRe(e,i,a,t),$z(i,l),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}function iqt(e,t,n){const r={};return $z(r,Wz(e,t)),e.create(t,e.Fragment,r,n)}function oqt(e,t){return t.value}function nRe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function $z(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function lqt(e,t,n){return r;function r(s,a,i,l){const u=Array.isArray(i.children)?n:t;return l?u(a,i,l):u(a,i)}}function cqt(e,t){return n;function n(r,s,a,i){const l=Array.isArray(a.children),c=Bz(r);return t(s,a,i,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function uqt(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&Vz.call(t.properties,s)){const a=fqt(e,s,t.properties[s]);if(a){const[i,l]=a;e.tableCellAlignToStyle&&i==="align"&&typeof l=="string"&&eqt.has(t.tagName)?r=l:n[i]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function dqt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const i=a.expression;i.type;const l=i.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Kb(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else Kb(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Wz(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:XGt;for(;++r<t.children.length;){const a=t.children[r];let i;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const u=s.get(c)||0;i=c+"-"+u,s.set(c,u+1)}}const l=tRe(e,a,i);l!==void 0&&n.push(l)}return n}function fqt(e,t,n){const r=FGt(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?MGt(n):WGt(n)),r.property==="style"){let s=typeof n=="object"?n:mqt(e,String(n));return e.stylePropertyNameCase==="css"&&(s=pqt(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?OGt[r.property]||r.property:r.attribute,n]}}function mqt(e,t){try{return YGt(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Ea("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=eRe+"#cannot-parse-style-attribute",s}}function rRe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,i;for(;++a<s.length;){const l=ble(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};i=i?{type:"MemberExpression",object:i,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=i}else r=ble(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return Vz.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Kb(e)}function Kb(e,t){const n=new Ea("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=eRe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pqt(e){const t={};let n;for(n in e)Vz.call(e,n)&&(t[hqt(n)]=e[n]);return t}function hqt(e){let t=e.replace(ZGt,gqt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function gqt(e){return"-"+e.toLowerCase()}const TR={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},yqt={};function Hz(e,t){const n=yqt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sRe(e,r,s)}function sRe(e,t,n){if(xqt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return jle(e.children,t,n)}return Array.isArray(e)?jle(e,t,n):""}function jle(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=sRe(e[s],t,n);return r.join("")}function xqt(e){return!!(e&&typeof e=="object")}const Ale=document.createElement("i");function zz(e){const t="&"+e+";";Ale.innerHTML=t;const n=Ale.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Zi(e,t,n,r){const s=e.length;let a=0,i;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function Co(e,t){return e.length>0?(Zi(e,e.length,0,t),e):t}const Ile={}.hasOwnProperty;function aRe(e){const t={};let n=-1;for(;++n<e.length;)vqt(t,e[n]);return t}function vqt(e,t){let n;for(n in t){const s=(Ile.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let i;if(a)for(i in a){Ile.call(s,i)||(s[i]=[]);const l=a[i];bqt(s[i],Array.isArray(l)?l:l?[l]:[])}}}function bqt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Zi(e,0,0,r)}function iRe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ll(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ua=jf(/[A-Za-z]/),pa=jf(/[\dA-Za-z]/),_qt=jf(/[#-'*+\--9=?A-Z^-~]/);function Ck(e){return e!==null&&(e<32||e===127)}const P7=jf(/\d/),wqt=jf(/[\dA-Fa-f]/),Cqt=jf(/[!-/:-@[-`{-~]/);function kt(e){return e!==null&&e<-2}function dr(e){return e!==null&&(e<0||e===32)}function bn(e){return e===-2||e===-1||e===32}const $N=jf(new RegExp("\\p{P}|\\p{S}","u")),mp=jf(/\s/);function jf(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Yx(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let i="";if(a===37&&pa(e.charCodeAt(n+1))&&pa(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(i=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(i=String.fromCharCode(a,l),s=1):i=""}else i=String.fromCharCode(a);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function fn(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return i;function i(c){return bn(c)?(e.enter(n),l(c)):t(c)}function l(c){return bn(c)&&a++<s?(e.consume(c),l):(e.exit(n),t(c))}}const Sqt={tokenize:Eqt};function Eqt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),fn(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,i(l)}function i(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return kt(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),i)}}const Mqt={tokenize:kqt},Rle={tokenize:Tqt};function kqt(e){const t=this,n=[];let r=0,s,a,i;return l;function l(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,c,u)(_)}return u(_)}function c(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&b();const w=t.events.length;let C=w,S;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){S=t.events[C][1].end;break}v(r);let E=w;for(;E<t.events.length;)t.events[E][1].end={...S},E++;return Zi(t.events,C+1,0,t.events.slice(w)),t.events.length=E,u(_)}return l(_)}function u(_){if(r===n.length){if(!s)return p(_);if(s.currentConstruct&&s.currentConstruct.concrete)return g(_);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Rle,d,m)(_)}function d(_){return s&&b(),v(r),p(_)}function m(_){return t.parser.lazy[t.now().line]=r!==n.length,i=t.now().offset,g(_)}function p(_){return t.containerState={},e.attempt(Rle,h,g)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),p(_)}function g(_){if(_===null){s&&b(),v(0),e.consume(_);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),y(_)}function y(_){if(_===null){x(e.exit("chunkFlow"),!0),v(0),e.consume(_);return}return kt(_)?(e.consume(_),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(_),y)}function x(_,w){const C=t.sliceStream(_);if(w&&C.push(null),_.previous=a,a&&(a.next=_),a=_,s.defineSkip(_.start),s.write(C),t.parser.lazy[_.start.line]){let S=s.events.length;for(;S--;)if(s.events[S][1].start.offset<i&&(!s.events[S][1].end||s.events[S][1].end.offset>i))return;const E=t.events.length;let M=E,k,N;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){if(k){N=t.events[M][1].end;break}k=!0}for(v(r),S=E;S<t.events.length;)t.events[S][1].end={...N},S++;Zi(t.events,M+1,0,t.events.slice(E)),t.events.length=S}}function v(_){let w=n.length;for(;w-- >_;){const C=n[w];t.containerState=C[1],C[0].exit.call(t,e)}n.length=_}function b(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function Tqt(e,t,n){return fn(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ly(e){if(e===null||dr(e)||mp(e))return 1;if($N(e))return 2}function WN(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const O7={name:"attention",resolveAll:Nqt,tokenize:jqt};function Nqt(e,t){let n=-1,r,s,a,i,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},p={...e[n][1].start};Ple(m,-c),Ple(p,c),i={type:c>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:p},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...i.start},end:{...l.end}},e[r][1].end={...i.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Co(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Co(u,[["enter",s,t],["enter",i,t],["exit",i,t],["enter",a,t]]),u=Co(u,WN(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Co(u,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=Co(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Zi(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function jqt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ly(r);let a;return i;function i(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Ly(c),m=!d||d===2&&s||n.includes(c),p=!s||s===2&&d||n.includes(r);return u._open=!!(a===42?m:m&&(s||!p)),u._close=!!(a===42?p:p&&(d||!m)),t(c)}}function Ple(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Aqt={name:"autolink",tokenize:Iqt};function Iqt(e,t,n){let r=0;return s;function s(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(h){return Ua(h)?(e.consume(h),i):h===64?n(h):u(h)}function i(h){return h===43||h===45||h===46||pa(h)?(r=1,l(h)):u(h)}function l(h){return h===58?(e.consume(h),r=0,c):(h===43||h===45||h===46||pa(h))&&r++<32?(e.consume(h),l):(r=0,u(h))}function c(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Ck(h)?n(h):(e.consume(h),c)}function u(h){return h===64?(e.consume(h),d):_qt(h)?(e.consume(h),u):n(h)}function d(h){return pa(h)?m(h):n(h)}function m(h){return h===46?(e.consume(h),r=0,d):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):p(h)}function p(h){if((h===45||pa(h))&&r++<63){const g=h===45?p:m;return e.consume(h),g}return n(h)}}const Zw={partial:!0,tokenize:Rqt};function Rqt(e,t,n){return r;function r(a){return bn(a)?fn(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||kt(a)?t(a):n(a)}}const oRe={continuation:{tokenize:Oqt},exit:Lqt,name:"blockQuote",tokenize:Pqt};function Pqt(e,t,n){const r=this;return s;function s(i){if(i===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(i),e.exit("blockQuoteMarker"),a}return n(i)}function a(i){return bn(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}function Oqt(e,t,n){const r=this;return s;function s(i){return bn(i)?fn(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):a(i)}function a(i){return e.attempt(oRe,t,n)(i)}}function Lqt(e){e.exit("blockQuote")}const lRe={name:"characterEscape",tokenize:Dqt};function Dqt(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return Cqt(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const cRe={name:"characterReference",tokenize:Fqt};function Fqt(e,t,n){const r=this;let s=0,a,i;return l;function l(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),c}function c(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),a=31,i=pa,d(m))}function u(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,i=wqt,d):(e.enter("characterReferenceValue"),a=7,i=P7,d(m))}function d(m){if(m===59&&s){const p=e.exit("characterReferenceValue");return i===pa&&!zz(r.sliceSerialize(p))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return i(m)&&s++<a?(e.consume(m),d):n(m)}}const Ole={partial:!0,tokenize:Bqt},Lle={concrete:!0,name:"codeFenced",tokenize:Uqt};function Uqt(e,t,n){const r=this,s={partial:!0,tokenize:C};let a=0,i=0,l;return c;function c(S){return u(S)}function u(S){const E=r.events[r.events.length-1];return a=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,l=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(S)}function d(S){return S===l?(i++,e.consume(S),d):i<3?n(S):(e.exit("codeFencedFenceSequence"),bn(S)?fn(e,m,"whitespace")(S):m(S))}function m(S){return S===null||kt(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Ole,y,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||kt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(S)):bn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),fn(e,h,"whitespace")(S)):S===96&&S===l?n(S):(e.consume(S),p)}function h(S){return S===null||kt(S)?m(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||kt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(S)):S===96&&S===l?n(S):(e.consume(S),g)}function y(S){return e.attempt(s,w,x)(S)}function x(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),v}function v(S){return a>0&&bn(S)?fn(e,b,"linePrefix",a+1)(S):b(S)}function b(S){return S===null||kt(S)?e.check(Ole,y,w)(S):(e.enter("codeFlowValue"),_(S))}function _(S){return S===null||kt(S)?(e.exit("codeFlowValue"),b(S)):(e.consume(S),_)}function w(S){return e.exit("codeFenced"),t(S)}function C(S,E,M){let k=0;return N;function N(j){return S.enter("lineEnding"),S.consume(j),S.exit("lineEnding"),P}function P(j){return S.enter("codeFencedFence"),bn(j)?fn(S,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):L(j)}function L(j){return j===l?(S.enter("codeFencedFenceSequence"),O(j)):M(j)}function O(j){return j===l?(k++,S.consume(j),O):k>=i?(S.exit("codeFencedFenceSequence"),bn(j)?fn(S,A,"whitespace")(j):A(j)):M(j)}function A(j){return j===null||kt(j)?(S.exit("codeFencedFence"),E(j)):M(j)}}}function Bqt(e,t,n){const r=this;return s;function s(i){return i===null?n(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),a)}function a(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}const NR={name:"codeIndented",tokenize:$qt},Vqt={partial:!0,tokenize:Wqt};function $qt(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),fn(e,a,"linePrefix",5)(u)}function a(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?i(u):n(u)}function i(u){return u===null?c(u):kt(u)?e.attempt(Vqt,i,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||kt(u)?(e.exit("codeFlowValue"),i(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function Wqt(e,t,n){const r=this;return s;function s(i){return r.parser.lazy[r.now().line]?n(i):kt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s):fn(e,a,"linePrefix",5)(i)}function a(i){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(i):kt(i)?s(i):n(i)}}const Hqt={name:"codeText",previous:Gqt,resolve:zqt,tokenize:qqt};function zqt(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function Gqt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qqt(e,t,n){let r=0,s,a;return i;function i(m){return e.enter("codeText"),e.enter("codeTextSequence"),l(m)}function l(m){return m===96?(e.consume(m),r++,l):(e.exit("codeTextSequence"),c(m))}function c(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),c):m===96?(a=e.enter("codeTextSequence"),s=0,d(m)):kt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(m))}function u(m){return m===null||m===32||m===96||kt(m)?(e.exit("codeTextData"),c(m)):(e.consume(m),u)}function d(m){return m===96?(e.consume(m),s++,d):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(a.type="codeTextData",u(m))}}class Kqt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&q0(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),q0(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),q0(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);q0(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);q0(this.left,n.reverse())}}}function q0(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function uRe(e){const t={};let n=-1,r,s,a,i,l,c,u;const d=new Kqt(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Yqt(d,n)),n=t[n],u=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(i=d.get(a),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank")i[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),i[1].type="lineEnding",s=a);else if(!(i[1].type==="linePrefix"||i[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return Zi(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function Yqt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const l=i.events,c=[],u={};let d,m,p=-1,h=n,g=0,y=0;const x=[y];for(;h;){for(;e.get(++s)[1]!==h;);a.push(s),h._tokenizer||(d=r.sliceStream(h),h.next||d.push(null),m&&i.defineSkip(h.start),h._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(d),h._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),m=h,h=h.next}for(h=n;++p<l.length;)l[p][0]==="exit"&&l[p-1][0]==="enter"&&l[p][1].type===l[p-1][1].type&&l[p][1].start.line!==l[p][1].end.line&&(y=p+1,x.push(y),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(i.events=[],h?(h._tokenizer=void 0,h.previous=void 0):x.pop(),p=x.length;p--;){const v=l.slice(x[p],x[p+1]),b=a.pop();c.push([b,b+v.length-1]),e.splice(b,2,v)}for(c.reverse(),p=-1;++p<c.length;)u[g+c[p][0]]=g+c[p][1],g+=c[p][1]-c[p][0]-1;return u}const Qqt={resolve:Zqt,tokenize:Jqt},Xqt={partial:!0,tokenize:eKt};function Zqt(e){return uRe(e),e}function Jqt(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?a(l):kt(l)?e.check(Xqt,i,a)(l):(e.consume(l),s)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function i(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function eKt(e,t,n){const r=this;return s;function s(i){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),fn(e,a,"linePrefix")}function a(i){if(i===null||kt(i))return n(i);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}function dRe(e,t,n,r,s,a,i,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return m;function m(v){return v===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(v),e.exit(a),p):v===null||v===32||v===41||Ck(v)?n(v):(e.enter(r),e.enter(i),e.enter(l),e.enter("chunkString",{contentType:"string"}),y(v))}function p(v){return v===62?(e.enter(a),e.consume(v),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(l),p(v)):v===null||v===60||kt(v)?n(v):(e.consume(v),v===92?g:h)}function g(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function y(v){return!d&&(v===null||v===41||dr(v))?(e.exit("chunkString"),e.exit(l),e.exit(i),e.exit(r),t(v)):d<u&&v===40?(e.consume(v),d++,y):v===41?(e.consume(v),d--,y):v===null||v===32||v===40||Ck(v)?n(v):(e.consume(v),v===92?x:y)}function x(v){return v===40||v===41||v===92?(e.consume(v),y):y(v)}}function fRe(e,t,n,r,s,a){const i=this;let l=0,c;return u;function u(h){return e.enter(r),e.enter(s),e.consume(h),e.exit(s),e.enter(a),d}function d(h){return l>999||h===null||h===91||h===93&&!c||h===94&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(h):h===93?(e.exit(a),e.enter(s),e.consume(h),e.exit(s),e.exit(r),t):kt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),m(h))}function m(h){return h===null||h===91||h===93||kt(h)||l++>999?(e.exit("chunkString"),d(h)):(e.consume(h),c||(c=!bn(h)),h===92?p:m)}function p(h){return h===91||h===92||h===93?(e.consume(h),l++,m):m(h)}}function mRe(e,t,n,r,s,a){let i;return l;function l(p){return p===34||p===39||p===40?(e.enter(r),e.enter(s),e.consume(p),e.exit(s),i=p===40?41:p,c):n(p)}function c(p){return p===i?(e.enter(s),e.consume(p),e.exit(s),e.exit(r),t):(e.enter(a),u(p))}function u(p){return p===i?(e.exit(a),c(i)):p===null?n(p):kt(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),fn(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===i||p===null||kt(p)?(e.exit("chunkString"),u(p)):(e.consume(p),p===92?m:d)}function m(p){return p===i||p===92?(e.consume(p),d):d(p)}}function f1(e,t){let n;return r;function r(s){return kt(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):bn(s)?fn(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const tKt={name:"definition",tokenize:rKt},nKt={partial:!0,tokenize:sKt};function rKt(e,t,n){const r=this;let s;return a;function a(h){return e.enter("definition"),i(h)}function i(h){return fRe.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function l(h){return s=ll(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),c):n(h)}function c(h){return dr(h)?f1(e,u)(h):u(h)}function u(h){return dRe(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function d(h){return e.attempt(nKt,m,m)(h)}function m(h){return bn(h)?fn(e,p,"whitespace")(h):p(h)}function p(h){return h===null||kt(h)?(e.exit("definition"),r.parser.defined.push(s),t(h)):n(h)}}function sKt(e,t,n){return r;function r(l){return dr(l)?f1(e,s)(l):n(l)}function s(l){return mRe(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return bn(l)?fn(e,i,"whitespace")(l):i(l)}function i(l){return l===null||kt(l)?t(l):n(l)}}const aKt={name:"hardBreakEscape",tokenize:iKt};function iKt(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return kt(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const oKt={name:"headingAtx",resolve:lKt,tokenize:cKt};function lKt(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Zi(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function cKt(e,t,n){let r=0;return s;function s(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),i(d)}function i(d){return d===35&&r++<6?(e.consume(d),i):d===null||dr(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||kt(d)?(e.exit("atxHeading"),t(d)):bn(d)?fn(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||dr(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const uKt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Dle=["pre","script","style","textarea"],dKt={concrete:!0,name:"htmlFlow",resolveTo:pKt,tokenize:hKt},fKt={partial:!0,tokenize:yKt},mKt={partial:!0,tokenize:gKt};function pKt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function hKt(e,t,n){const r=this;let s,a,i,l,c;return u;function u($){return d($)}function d($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),m}function m($){return $===33?(e.consume($),p):$===47?(e.consume($),a=!0,y):$===63?(e.consume($),s=3,r.interrupt?t:D):Ua($)?(e.consume($),i=String.fromCharCode($),x):n($)}function p($){return $===45?(e.consume($),s=2,h):$===91?(e.consume($),s=5,l=0,g):Ua($)?(e.consume($),s=4,r.interrupt?t:D):n($)}function h($){return $===45?(e.consume($),r.interrupt?t:D):n($)}function g($){const X="CDATA[";return $===X.charCodeAt(l++)?(e.consume($),l===X.length?r.interrupt?t:L:g):n($)}function y($){return Ua($)?(e.consume($),i=String.fromCharCode($),x):n($)}function x($){if($===null||$===47||$===62||dr($)){const X=$===47,q=i.toLowerCase();return!X&&!a&&Dle.includes(q)?(s=1,r.interrupt?t($):L($)):uKt.includes(i.toLowerCase())?(s=6,X?(e.consume($),v):r.interrupt?t($):L($)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n($):a?b($):_($))}return $===45||pa($)?(e.consume($),i+=String.fromCharCode($),x):n($)}function v($){return $===62?(e.consume($),r.interrupt?t:L):n($)}function b($){return bn($)?(e.consume($),b):N($)}function _($){return $===47?(e.consume($),N):$===58||$===95||Ua($)?(e.consume($),w):bn($)?(e.consume($),_):N($)}function w($){return $===45||$===46||$===58||$===95||pa($)?(e.consume($),w):C($)}function C($){return $===61?(e.consume($),S):bn($)?(e.consume($),C):_($)}function S($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),c=$,E):bn($)?(e.consume($),S):M($)}function E($){return $===c?(e.consume($),c=null,k):$===null||kt($)?n($):(e.consume($),E)}function M($){return $===null||$===34||$===39||$===47||$===60||$===61||$===62||$===96||dr($)?C($):(e.consume($),M)}function k($){return $===47||$===62||bn($)?_($):n($)}function N($){return $===62?(e.consume($),P):n($)}function P($){return $===null||kt($)?L($):bn($)?(e.consume($),P):n($)}function L($){return $===45&&s===2?(e.consume($),T):$===60&&s===1?(e.consume($),I):$===62&&s===4?(e.consume($),W):$===63&&s===3?(e.consume($),D):$===93&&s===5?(e.consume($),B):kt($)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(fKt,z,O)($)):$===null||kt($)?(e.exit("htmlFlowData"),O($)):(e.consume($),L)}function O($){return e.check(mKt,A,z)($)}function A($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),j}function j($){return $===null||kt($)?O($):(e.enter("htmlFlowData"),L($))}function T($){return $===45?(e.consume($),D):L($)}function I($){return $===47?(e.consume($),i="",U):L($)}function U($){if($===62){const X=i.toLowerCase();return Dle.includes(X)?(e.consume($),W):L($)}return Ua($)&&i.length<8?(e.consume($),i+=String.fromCharCode($),U):L($)}function B($){return $===93?(e.consume($),D):L($)}function D($){return $===62?(e.consume($),W):$===45&&s===2?(e.consume($),D):L($)}function W($){return $===null||kt($)?(e.exit("htmlFlowData"),z($)):(e.consume($),W)}function z($){return e.exit("htmlFlow"),t($)}}function gKt(e,t,n){const r=this;return s;function s(i){return kt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),a):n(i)}function a(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function yKt(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Zw,t,n)}}const xKt={name:"htmlText",tokenize:vKt};function vKt(e,t,n){const r=this;let s,a,i;return l;function l(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),c}function c(D){return D===33?(e.consume(D),u):D===47?(e.consume(D),C):D===63?(e.consume(D),_):Ua(D)?(e.consume(D),M):n(D)}function u(D){return D===45?(e.consume(D),d):D===91?(e.consume(D),a=0,g):Ua(D)?(e.consume(D),b):n(D)}function d(D){return D===45?(e.consume(D),h):n(D)}function m(D){return D===null?n(D):D===45?(e.consume(D),p):kt(D)?(i=m,I(D)):(e.consume(D),m)}function p(D){return D===45?(e.consume(D),h):m(D)}function h(D){return D===62?T(D):D===45?p(D):m(D)}function g(D){const W="CDATA[";return D===W.charCodeAt(a++)?(e.consume(D),a===W.length?y:g):n(D)}function y(D){return D===null?n(D):D===93?(e.consume(D),x):kt(D)?(i=y,I(D)):(e.consume(D),y)}function x(D){return D===93?(e.consume(D),v):y(D)}function v(D){return D===62?T(D):D===93?(e.consume(D),v):y(D)}function b(D){return D===null||D===62?T(D):kt(D)?(i=b,I(D)):(e.consume(D),b)}function _(D){return D===null?n(D):D===63?(e.consume(D),w):kt(D)?(i=_,I(D)):(e.consume(D),_)}function w(D){return D===62?T(D):_(D)}function C(D){return Ua(D)?(e.consume(D),S):n(D)}function S(D){return D===45||pa(D)?(e.consume(D),S):E(D)}function E(D){return kt(D)?(i=E,I(D)):bn(D)?(e.consume(D),E):T(D)}function M(D){return D===45||pa(D)?(e.consume(D),M):D===47||D===62||dr(D)?k(D):n(D)}function k(D){return D===47?(e.consume(D),T):D===58||D===95||Ua(D)?(e.consume(D),N):kt(D)?(i=k,I(D)):bn(D)?(e.consume(D),k):T(D)}function N(D){return D===45||D===46||D===58||D===95||pa(D)?(e.consume(D),N):P(D)}function P(D){return D===61?(e.consume(D),L):kt(D)?(i=P,I(D)):bn(D)?(e.consume(D),P):k(D)}function L(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),s=D,O):kt(D)?(i=L,I(D)):bn(D)?(e.consume(D),L):(e.consume(D),A)}function O(D){return D===s?(e.consume(D),s=void 0,j):D===null?n(D):kt(D)?(i=O,I(D)):(e.consume(D),O)}function A(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||dr(D)?k(D):(e.consume(D),A)}function j(D){return D===47||D===62||dr(D)?k(D):n(D)}function T(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function I(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),U}function U(D){return bn(D)?fn(e,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):B(D)}function B(D){return e.enter("htmlTextData"),i(D)}}const Gz={name:"labelEnd",resolveAll:CKt,resolveTo:SKt,tokenize:EKt},bKt={tokenize:MKt},_Kt={tokenize:kKt},wKt={tokenize:TKt};function CKt(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Zi(e,0,e.length,n),e}function SKt(e,t){let n=e.length,r=0,s,a,i,l;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(i){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(i=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[a][1].start},end:{...e[i][1].end}},d={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[i-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Co(l,e.slice(a+1,a+r+3)),l=Co(l,[["enter",d,t]]),l=Co(l,WN(t.parser.constructs.insideSpan.null,e.slice(a+r+4,i-3),t)),l=Co(l,[["exit",d,t],e[i-2],e[i-1],["exit",u,t]]),l=Co(l,e.slice(i+1)),l=Co(l,[["exit",c,t]]),Zi(e,a,e.length,l),e}function EKt(e,t,n){const r=this;let s=r.events.length,a,i;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return l;function l(p){return a?a._inactive?m(p):(i=r.parser.defined.includes(ll(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),c):n(p)}function c(p){return p===40?e.attempt(bKt,d,i?d:m)(p):p===91?e.attempt(_Kt,d,i?u:m)(p):i?d(p):m(p)}function u(p){return e.attempt(wKt,d,m)(p)}function d(p){return t(p)}function m(p){return a._balanced=!0,n(p)}}function MKt(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),s}function s(m){return dr(m)?f1(e,a)(m):a(m)}function a(m){return m===41?d(m):dRe(e,i,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function i(m){return dr(m)?f1(e,c)(m):d(m)}function l(m){return n(m)}function c(m){return m===34||m===39||m===40?mRe(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):d(m)}function u(m){return dr(m)?f1(e,d)(m):d(m)}function d(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function kKt(e,t,n){const r=this;return s;function s(l){return fRe.call(r,e,a,i,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(ll(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function i(l){return n(l)}}function TKt(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const NKt={name:"labelStartImage",resolveAll:Gz.resolveAll,tokenize:jKt};function jKt(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),i):n(l)}function i(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const AKt={name:"labelStartLink",resolveAll:Gz.resolveAll,tokenize:IKt};function IKt(e,t,n){const r=this;return s;function s(i){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(i),e.exit("labelMarker"),e.exit("labelLink"),a}function a(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):t(i)}}const jR={name:"lineEnding",tokenize:RKt};function RKt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),fn(e,t,"linePrefix")}}const aE={name:"thematicBreak",tokenize:PKt};function PKt(e,t,n){let r=0,s;return a;function a(u){return e.enter("thematicBreak"),i(u)}function i(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||kt(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),bn(u)?fn(e,l,"whitespace")(u):l(u))}}const si={continuation:{tokenize:FKt},exit:BKt,name:"list",tokenize:DKt},OKt={partial:!0,tokenize:VKt},LKt={partial:!0,tokenize:UKt};function DKt(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,i=0;return l;function l(h){const g=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:P7(h)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(aE,n,u)(h):u(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(h)}return n(h)}function c(h){return P7(h)&&++i<10?(e.consume(h),c):(!r.interrupt||i<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),u(h)):n(h)}function u(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(Zw,r.interrupt?n:d,e.attempt(OKt,p,m))}function d(h){return r.containerState.initialBlankLine=!0,a++,p(h)}function m(h){return bn(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),p):n(h)}function p(h){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function FKt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Zw,s,a);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,fn(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!bn(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(LKt,t,i)(l))}function i(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,fn(e,e.attempt(si,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function UKt(e,t,n){const r=this;return fn(e,s,"listItemIndent",r.containerState.size+1);function s(a){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(a):n(a)}}function BKt(e){e.exit(this.containerState.type)}function VKt(e,t,n){const r=this;return fn(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const i=r.events[r.events.length-1];return!bn(a)&&i&&i[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const Fle={name:"setextUnderline",resolveTo:$Kt,tokenize:WKt};function $Kt(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const i={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",i,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=i,e.push(["exit",i,t]),e}function WKt(e,t,n){const r=this;let s;return a;function a(u){let d=r.events.length,m;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){m=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),s=u,i(u)):n(u)}function i(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),bn(u)?fn(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||kt(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const HKt={tokenize:zKt};function zKt(e){const t=this,n=e.attempt(Zw,r,e.attempt(this.parser.constructs.flowInitial,s,fn(e,e.attempt(this.parser.constructs.flow,s,e.attempt(Qqt,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const GKt={resolveAll:hRe()},qKt=pRe("string"),KKt=pRe("text");function pRe(e){return{resolveAll:hRe(e==="text"?YKt:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,i,l);return i;function i(d){return u(d)?a(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),a(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const m=s[d];let p=-1;if(m)for(;++p<m.length;){const h=m[p];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function hRe(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function YKt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,i=-1,l=0,c;for(;a--;){const u=s[a];if(typeof u=="string"){for(i=u.length;u.charCodeAt(i-1)===32;)l++,i--;if(i)break;i=-1}else if(u===-2)c=!0,l++;else if(u!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?i:r.start._bufferIndex+i,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const QKt={42:si,43:si,45:si,48:si,49:si,50:si,51:si,52:si,53:si,54:si,55:si,56:si,57:si,62:oRe},XKt={91:tKt},ZKt={[-2]:NR,[-1]:NR,32:NR},JKt={35:oKt,42:aE,45:[Fle,aE],60:dKt,61:Fle,95:aE,96:Lle,126:Lle},eYt={38:cRe,92:lRe},tYt={[-5]:jR,[-4]:jR,[-3]:jR,33:NKt,38:cRe,42:O7,60:[Aqt,xKt],91:AKt,92:[aKt,lRe],93:Gz,95:O7,96:Hqt},nYt={null:[O7,GKt]},rYt={null:[42,95]},sYt={null:[]},aYt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:rYt,contentInitial:XKt,disable:sYt,document:QKt,flow:JKt,flowInitial:ZKt,insideSpan:nYt,string:eYt,text:tYt},Symbol.toStringTag,{value:"Module"}));function iYt(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let i=[],l=[];const c={attempt:E(C),check:E(S),consume:b,enter:_,exit:w,interrupt:E(S,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:g,parser:e,previous:null,sliceSerialize:p,sliceStream:h,write:m};let d=t.tokenize.call(u,c);return t.resolveAll&&a.push(t),u;function m(P){return i=Co(i,P),x(),i[i.length-1]!==null?[]:(M(t,0),u.events=WN(a,u.events,u),u.events)}function p(P,L){return lYt(h(P),L)}function h(P){return oYt(i,P)}function g(){const{_bufferIndex:P,_index:L,line:O,column:A,offset:j}=r;return{_bufferIndex:P,_index:L,line:O,column:A,offset:j}}function y(P){s[P.line]=P.column,N()}function x(){let P;for(;r._index<i.length;){const L=i[r._index];if(typeof L=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<L.length;)v(L.charCodeAt(r._bufferIndex));else v(L)}}function v(P){d=d(P)}function b(P){kt(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,N()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function _(P,L){const O=L||{};return O.type=P,O.start=g(),u.events.push(["enter",O,u]),l.push(O),O}function w(P){const L=l.pop();return L.end=g(),u.events.push(["exit",L,u]),L}function C(P,L){M(P,L.from)}function S(P,L){L.restore()}function E(P,L){return O;function O(A,j,T){let I,U,B,D;return Array.isArray(A)?z(A):"tokenize"in A?z([A]):W(A);function W(Y){return G;function G(J){const K=J!==null&&Y[J],te=J!==null&&Y.null,re=[...Array.isArray(K)?K:K?[K]:[],...Array.isArray(te)?te:te?[te]:[]];return z(re)(J)}}function z(Y){return I=Y,U=0,Y.length===0?T:$(Y[U])}function $(Y){return G;function G(J){return D=k(),B=Y,Y.partial||(u.currentConstruct=Y),Y.name&&u.parser.constructs.disable.null.includes(Y.name)?q():Y.tokenize.call(L?Object.assign(Object.create(u),L):u,c,X,q)(J)}}function X(Y){return P(B,D),j}function q(Y){return D.restore(),++U<I.length?$(I[U]):T}}}function M(P,L){P.resolveAll&&!a.includes(P)&&a.push(P),P.resolve&&Zi(u.events,L,u.events.length-L,P.resolve(u.events.slice(L),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function k(){const P=g(),L=u.previous,O=u.currentConstruct,A=u.events.length,j=Array.from(l);return{from:A,restore:T};function T(){r=P,u.previous=L,u.currentConstruct=O,u.events.length=A,l=j,N()}}function N(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function oYt(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let i;if(n===s)i=[e[n].slice(r,a)];else{if(i=e.slice(n,s),r>-1){const l=i[0];typeof l=="string"?i[0]=l.slice(r):i.shift()}a>0&&i.push(e[s].slice(0,a))}return i}function lYt(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let i;if(typeof a=="string")i=a;else switch(a){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=t?" ":"	";break}case-1:{if(!t&&s)continue;i=" ";break}default:i=String.fromCharCode(a)}s=a===-2,r.push(i)}return r.join("")}function cYt(e){const r={constructs:aRe([aYt,...(e||{}).extensions||[]]),content:s(Sqt),defined:[],document:s(Mqt),flow:s(HKt),lazy:{},string:s(qKt),text:s(KKt)};return r;function s(a){return i;function i(l){return iYt(r,a,l)}}}function uYt(e){for(;!uRe(e););return e}const Ule=/[\0\t\n\r]/g;function dYt(){let e=1,t="",n=!0,r;return s;function s(a,i,l){const c=[];let u,d,m,p,h;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(i||void 0).decode(a)),m=0,t="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(Ule.lastIndex=m,u=Ule.exec(a),p=u&&u.index!==void 0?u.index:a.length,h=a.charCodeAt(p),!u){t=a.slice(m);break}if(h===10&&m===p&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),m<p&&(c.push(a.slice(m,p)),e+=p-m),h){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}m=p+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const fYt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function mYt(e){return e.replace(fYt,pYt)}function pYt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return iRe(n.slice(a?2:1),a?16:10)}return zz(n)||e}const gRe={}.hasOwnProperty;function hYt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),gYt(n)(uYt(cYt(n).document().write(dYt()(e,t,!0))))}function gYt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(be),autolinkProtocol:k,autolinkEmail:k,atxHeading:a(ge),blockQuote:a(te),characterEscape:k,characterReference:k,codeFenced:a(re),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:a(re,i),codeText:a(se,i),codeTextData:k,data:k,codeFlowValue:k,definition:a(me),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:a(oe),hardBreakEscape:a(xe),hardBreakTrailing:a(xe),htmlFlow:a(ye,i),htmlFlowData:k,htmlText:a(ye,i),htmlTextData:k,image:a(_e),label:i,link:a(be),listItem:a(Ee),listItemValue:p,listOrdered:a(Ne,m),listUnordered:a(Ne),paragraph:a(Re),reference:$,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:a(ge),strong:a(Ae),thematicBreak:a(it)},exit:{atxHeading:c(),atxHeadingSequence:C,autolink:c(),autolinkEmail:K,autolinkProtocol:J,blockQuote:c(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:q,characterReferenceMarkerNumeric:q,characterReferenceValue:Y,characterReference:G,codeFenced:c(x),codeFencedFence:y,codeFencedFenceInfo:h,codeFencedFenceMeta:g,codeFlowValue:N,codeIndented:c(v),codeText:c(j),codeTextData:N,data:N,definition:c(),definitionDestinationString:w,definitionLabelString:b,definitionTitleString:_,emphasis:c(),hardBreakEscape:c(L),hardBreakTrailing:c(L),htmlFlow:c(O),htmlFlowData:N,htmlText:c(A),htmlTextData:N,image:c(I),label:B,labelText:U,lineEnding:P,link:c(T),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:X,resourceDestinationString:D,resourceTitleString:W,resource:z,setextHeading:c(M),setextHeadingLineSequence:E,setextHeadingText:S,strong:c(),thematicBreak:c()}};yRe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Se){let ue={type:"root",children:[]};const ke={stack:[ue],tokenStack:[],config:t,enter:l,exit:u,buffer:i,resume:d,data:n},et=[];let Ge=-1;for(;++Ge<Se.length;)if(Se[Ge][1].type==="listOrdered"||Se[Ge][1].type==="listUnordered")if(Se[Ge][0]==="enter")et.push(Ge);else{const ft=et.pop();Ge=s(Se,ft,Ge)}for(Ge=-1;++Ge<Se.length;){const ft=t[Se[Ge][0]];gRe.call(ft,Se[Ge][1].type)&&ft[Se[Ge][1].type].call(Object.assign({sliceSerialize:Se[Ge][2].sliceSerialize},ke),Se[Ge][1])}if(ke.tokenStack.length>0){const ft=ke.tokenStack[ke.tokenStack.length-1];(ft[1]||Ble).call(ke,void 0,ft[0])}for(ue.position={start:ld(Se.length>0?Se[0][1].start:{line:1,column:1,offset:0}),end:ld(Se.length>0?Se[Se.length-2][1].end:{line:1,column:1,offset:0})},Ge=-1;++Ge<t.transforms.length;)ue=t.transforms[Ge](ue)||ue;return ue}function s(Se,ue,ke){let et=ue-1,Ge=-1,ft=!1,Qe,Ve,Le,ot;for(;++et<=ke;){const vt=Se[et];switch(vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{vt[0]==="enter"?Ge++:Ge--,ot=void 0;break}case"lineEndingBlank":{vt[0]==="enter"&&(Qe&&!ot&&!Ge&&!Le&&(Le=et),ot=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ot=void 0}if(!Ge&&vt[0]==="enter"&&vt[1].type==="listItemPrefix"||Ge===-1&&vt[0]==="exit"&&(vt[1].type==="listUnordered"||vt[1].type==="listOrdered")){if(Qe){let Rt=et;for(Ve=void 0;Rt--;){const jt=Se[Rt];if(jt[1].type==="lineEnding"||jt[1].type==="lineEndingBlank"){if(jt[0]==="exit")continue;Ve&&(Se[Ve][1].type="lineEndingBlank",ft=!0),jt[1].type="lineEnding",Ve=Rt}else if(!(jt[1].type==="linePrefix"||jt[1].type==="blockQuotePrefix"||jt[1].type==="blockQuotePrefixWhitespace"||jt[1].type==="blockQuoteMarker"||jt[1].type==="listItemIndent"))break}Le&&(!Ve||Le<Ve)&&(Qe._spread=!0),Qe.end=Object.assign({},Ve?Se[Ve][1].start:vt[1].end),Se.splice(Ve||et,0,["exit",Qe,vt[2]]),et++,ke++}if(vt[1].type==="listItemPrefix"){const Rt={type:"listItem",_spread:!1,start:Object.assign({},vt[1].start),end:void 0};Qe=Rt,Se.splice(et,0,["enter",Rt,vt[2]]),et++,ke++,Le=void 0,ot=!0}}}return Se[ue][1]._spread=ft,ke}function a(Se,ue){return ke;function ke(et){l.call(this,Se(et),et),ue&&ue.call(this,et)}}function i(){this.stack.push({type:"fragment",children:[]})}function l(Se,ue,ke){this.stack[this.stack.length-1].children.push(Se),this.stack.push(Se),this.tokenStack.push([ue,ke||void 0]),Se.position={start:ld(ue.start),end:void 0}}function c(Se){return ue;function ue(ke){Se&&Se.call(this,ke),u.call(this,ke)}}function u(Se,ue){const ke=this.stack.pop(),et=this.tokenStack.pop();if(et)et[0].type!==Se.type&&(ue?ue.call(this,Se,et[0]):(et[1]||Ble).call(this,Se,et[0]));else throw new Error("Cannot close `"+Se.type+"` ("+d1({start:Se.start,end:Se.end})+"): its not open");ke.position.end=ld(Se.end)}function d(){return Hz(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function p(Se){if(this.data.expectingFirstListItemValue){const ue=this.stack[this.stack.length-2];ue.start=Number.parseInt(this.sliceSerialize(Se),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.lang=Se}function g(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.meta=Se}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Se.replace(/(\r?\n|\r)$/g,"")}function b(Se){const ue=this.resume(),ke=this.stack[this.stack.length-1];ke.label=ue,ke.identifier=ll(this.sliceSerialize(Se)).toLowerCase()}function _(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.title=Se}function w(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.url=Se}function C(Se){const ue=this.stack[this.stack.length-1];if(!ue.depth){const ke=this.sliceSerialize(Se).length;ue.depth=ke}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function E(Se){const ue=this.stack[this.stack.length-1];ue.depth=this.sliceSerialize(Se).codePointAt(0)===61?1:2}function M(){this.data.setextHeadingSlurpLineEnding=void 0}function k(Se){const ke=this.stack[this.stack.length-1].children;let et=ke[ke.length-1];(!et||et.type!=="text")&&(et=st(),et.position={start:ld(Se.start),end:void 0},ke.push(et)),this.stack.push(et)}function N(Se){const ue=this.stack.pop();ue.value+=this.sliceSerialize(Se),ue.position.end=ld(Se.end)}function P(Se){const ue=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ke=ue.children[ue.children.length-1];ke.position.end=ld(Se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ue.type)&&(k.call(this,Se),N.call(this,Se))}function L(){this.data.atHardBreak=!0}function O(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Se}function A(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Se}function j(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Se}function T(){const Se=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";Se.type+="Reference",Se.referenceType=ue,delete Se.url,delete Se.title}else delete Se.identifier,delete Se.label;this.data.referenceType=void 0}function I(){const Se=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";Se.type+="Reference",Se.referenceType=ue,delete Se.url,delete Se.title}else delete Se.identifier,delete Se.label;this.data.referenceType=void 0}function U(Se){const ue=this.sliceSerialize(Se),ke=this.stack[this.stack.length-2];ke.label=mYt(ue),ke.identifier=ll(ue).toLowerCase()}function B(){const Se=this.stack[this.stack.length-1],ue=this.resume(),ke=this.stack[this.stack.length-1];if(this.data.inReference=!0,ke.type==="link"){const et=Se.children;ke.children=et}else ke.alt=ue}function D(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.url=Se}function W(){const Se=this.resume(),ue=this.stack[this.stack.length-1];ue.title=Se}function z(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function X(Se){const ue=this.resume(),ke=this.stack[this.stack.length-1];ke.label=ue,ke.identifier=ll(this.sliceSerialize(Se)).toLowerCase(),this.data.referenceType="full"}function q(Se){this.data.characterReferenceType=Se.type}function Y(Se){const ue=this.sliceSerialize(Se),ke=this.data.characterReferenceType;let et;ke?(et=iRe(ue,ke==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):et=zz(ue);const Ge=this.stack[this.stack.length-1];Ge.value+=et}function G(Se){const ue=this.stack.pop();ue.position.end=ld(Se.end)}function J(Se){N.call(this,Se);const ue=this.stack[this.stack.length-1];ue.url=this.sliceSerialize(Se)}function K(Se){N.call(this,Se);const ue=this.stack[this.stack.length-1];ue.url="mailto:"+this.sliceSerialize(Se)}function te(){return{type:"blockquote",children:[]}}function re(){return{type:"code",lang:null,meta:null,value:""}}function se(){return{type:"inlineCode",value:""}}function me(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function oe(){return{type:"emphasis",children:[]}}function ge(){return{type:"heading",depth:0,children:[]}}function xe(){return{type:"break"}}function ye(){return{type:"html",value:""}}function _e(){return{type:"image",title:null,url:"",alt:null}}function be(){return{type:"link",title:null,url:"",children:[]}}function Ne(Se){return{type:"list",ordered:Se.type==="listOrdered",start:null,spread:Se._spread,children:[]}}function Ee(Se){return{type:"listItem",spread:Se._spread,checked:null,children:[]}}function Re(){return{type:"paragraph",children:[]}}function Ae(){return{type:"strong",children:[]}}function st(){return{type:"text",value:""}}function it(){return{type:"thematicBreak"}}}function ld(e){return{line:e.line,column:e.column,offset:e.offset}}function yRe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?yRe(e,r):yYt(e,r)}}function yYt(e,t){let n;for(n in t)if(gRe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Ble(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+d1({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+d1({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+d1({start:t.start,end:t.end})+") is still open")}function xYt(e){const t=this;t.parser=n;function n(r){return hYt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function vYt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function bYt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function _Yt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function wYt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function CYt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function SYt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Yx(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let i,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function EYt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function MYt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function xRe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&i.type==="text"?i.value+=r:s.push({type:"text",value:r}),s}function kYt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return xRe(e,t);const s={src:Yx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function TYt(e,t){const n={src:Yx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function NYt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function jYt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return xRe(e,t);const s={href:Yx(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function AYt(e,t){const n={href:Yx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function IYt(e,t,n){const r=e.all(t),s=n?RYt(n):vRe(t),a={},i=[];if(typeof t.checked=="boolean"){const d=r[0];let m;d&&d.type==="element"&&d.tagName==="p"?m=d:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&i.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?i.push(...d.children):i.push(d)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&i.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:i};return e.patch(t,u),e.applyData(t,u)}function RYt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=vRe(n[r])}return t}function vRe(e){const t=e.spread;return t??e.children.length>1}function PYt(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const i=r[s];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function OYt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function LYt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function DYt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function FYt(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],i),s.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=Bz(t.children[1]),c=ZIe(t.children[t.children.length-1]);l&&c&&(i.position={start:l,end:c}),s.push(i)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function UYt(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,l=i?i.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const m=t.children[c],p={},h=i?i[c]:void 0;h&&(p.align=h);let g={type:"element",tagName:a,properties:p,children:[]};m&&(g.children=e.all(m),e.patch(m,g),g=e.applyData(m,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function BYt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Vle=9,$le=32;function VYt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(Wle(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(Wle(t.slice(s),s>0,!1)),a.join("")}function Wle(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===Vle||a===$le;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===Vle||a===$le;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function $Yt(e,t){const n={type:"text",value:VYt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function WYt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const HYt={blockquote:vYt,break:bYt,code:_Yt,delete:wYt,emphasis:CYt,footnoteReference:SYt,heading:EYt,html:MYt,imageReference:kYt,image:TYt,inlineCode:NYt,linkReference:jYt,link:AYt,listItem:IYt,list:PYt,paragraph:OYt,root:LYt,strong:DYt,table:FYt,tableCell:BYt,tableRow:UYt,text:$Yt,thematicBreak:WYt,toml:t2,yaml:t2,definition:t2,footnoteDefinition:t2};function t2(){}const bRe=-1,HN=0,m1=1,Sk=2,qz=3,Kz=4,Yz=5,Qz=6,_Re=7,wRe=8,Hle=typeof self=="object"?self:globalThis,zYt=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,i]=t[s];switch(a){case HN:case bRe:return n(i,s);case m1:{const l=n([],s);for(const c of i)l.push(r(c));return l}case Sk:{const l=n({},s);for(const[c,u]of i)l[r(c)]=r(u);return l}case qz:return n(new Date(i),s);case Kz:{const{source:l,flags:c}=i;return n(new RegExp(l,c),s)}case Yz:{const l=n(new Map,s);for(const[c,u]of i)l.set(r(c),r(u));return l}case Qz:{const l=n(new Set,s);for(const c of i)l.add(r(c));return l}case _Re:{const{name:l,message:c}=i;return n(new Hle[l](c),s)}case wRe:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:l}=new Uint8Array(i);return n(new DataView(l),i)}}return n(new Hle[a](i),s)};return r},zle=e=>zYt(new Map,e)(0),Mh="",{toString:GYt}={},{keys:qYt}=Object,K0=e=>{const t=typeof e;if(t!=="object"||!e)return[HN,t];const n=GYt.call(e).slice(8,-1);switch(n){case"Array":return[m1,Mh];case"Object":return[Sk,Mh];case"Date":return[qz,Mh];case"RegExp":return[Kz,Mh];case"Map":return[Yz,Mh];case"Set":return[Qz,Mh];case"DataView":return[m1,n]}return n.includes("Array")?[m1,n]:n.includes("Error")?[_Re,n]:[Sk,n]},n2=([e,t])=>e===HN&&(t==="function"||t==="symbol"),KYt=(e,t,n,r)=>{const s=(i,l)=>{const c=r.push(i)-1;return n.set(l,c),c},a=i=>{if(n.has(i))return n.get(i);let[l,c]=K0(i);switch(l){case HN:{let d=i;switch(c){case"bigint":l=wRe,d=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([bRe],i)}return s([l,d],i)}case m1:{if(c){let p=i;return c==="DataView"?p=new Uint8Array(i.buffer):c==="ArrayBuffer"&&(p=new Uint8Array(i)),s([c,[...p]],i)}const d=[],m=s([l,d],i);for(const p of i)d.push(a(p));return m}case Sk:{if(c)switch(c){case"BigInt":return s([c,i.toString()],i);case"Boolean":case"Number":case"String":return s([c,i.valueOf()],i)}if(t&&"toJSON"in i)return a(i.toJSON());const d=[],m=s([l,d],i);for(const p of qYt(i))(e||!n2(K0(i[p])))&&d.push([a(p),a(i[p])]);return m}case qz:return s([l,i.toISOString()],i);case Kz:{const{source:d,flags:m}=i;return s([l,{source:d,flags:m}],i)}case Yz:{const d=[],m=s([l,d],i);for(const[p,h]of i)(e||!(n2(K0(p))||n2(K0(h))))&&d.push([a(p),a(h)]);return m}case Qz:{const d=[],m=s([l,d],i);for(const p of i)(e||!n2(K0(p)))&&d.push(a(p));return m}}const{message:u}=i;return s([l,{name:c,message:u}],i)};return a},Gle=(e,{json:t,lossy:n}={})=>{const r=[];return KYt(!(t||n),!!t,new Map,r)(e),r},Rm=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?zle(Gle(e,t)):structuredClone(e):(e,t)=>zle(Gle(e,t));function YYt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function QYt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function XYt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||YYt,r=e.options.footnoteBackLabel||QYt,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),m=String(u.identifier).toUpperCase(),p=Yx(m.toLowerCase());let h=0;const g=[],y=e.footnoteCounts.get(m);for(;y!==void 0&&++h<=y;){g.length>0&&g.push({type:"text",value:" "});let b=typeof n=="string"?n:n(c,h);typeof b=="string"&&(b={type:"text",value:b}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+p+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const x=d[d.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const b=x.children[x.children.length-1];b&&b.type==="text"?b.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...g)}else d.push(...g);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+p},children:e.wrap(d,!0)};e.patch(u,v),l.push(v)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Rm(i),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const L7={}.hasOwnProperty,ZYt={};function JYt(e,t){const n=t||ZYt,r=new Map,s=new Map,a=new Map,i={...HYt,...n.handlers},l={all:u,applyData:tQt,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:i,one:c,options:n,patch:eQt,wrap:rQt};return nr(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const m=d.type==="definition"?r:s,p=String(d.identifier).toUpperCase();m.has(p)||m.set(p,d)}}),l;function c(d,m){const p=d.type,h=l.handlers[p];if(L7.call(l.handlers,p)&&h)return h(l,d,m);if(l.options.passThrough&&l.options.passThrough.includes(p)){if("children"in d){const{children:y,...x}=d,v=Rm(x);return v.children=l.all(d),v}return Rm(d)}return(l.options.unknownHandler||nQt)(l,d,m)}function u(d){const m=[];if("children"in d){const p=d.children;let h=-1;for(;++h<p.length;){const g=l.one(p[h],d);if(g){if(h&&p[h-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=qle(g.value)),!Array.isArray(g)&&g.type==="element")){const y=g.children[0];y&&y.type==="text"&&(y.value=qle(y.value))}Array.isArray(g)?m.push(...g):m.push(g)}}}return m}}function eQt(e,t){e.position&&(t.position=QGt(e))}function tQt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const i="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:i}}n.type==="element"&&a&&Object.assign(n.properties,Rm(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function nQt(e,t){const n=t.data||{},r="value"in t&&!(L7.call(n,"hProperties")||L7.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function rQt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function qle(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Kle(e,t){const n=JYt(e,t),r=n.one(e,void 0),s=XYt(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function sQt(e,t){return e&&"run"in e?async function(n,r){const s=Kle(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Kle(n,{file:r,...e||t})}}function Yle(e){if(e)throw e}var AR,Qle;function aQt(){if(Qle)return AR;Qle=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(u){return typeof Array.isArray=="function"?Array.isArray(u):t.call(u)==="[object Array]"},a=function(u){if(!u||t.call(u)!=="[object Object]")return!1;var d=e.call(u,"constructor"),m=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!d&&!m)return!1;var p;for(p in u);return typeof p>"u"||e.call(u,p)},i=function(u,d){n&&d.name==="__proto__"?n(u,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):u[d.name]=d.newValue},l=function(u,d){if(d==="__proto__")if(e.call(u,d)){if(r)return r(u,d).value}else return;return u[d]};return AR=function c(){var u,d,m,p,h,g,y=arguments[0],x=1,v=arguments.length,b=!1;for(typeof y=="boolean"&&(b=y,y=arguments[1]||{},x=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});x<v;++x)if(u=arguments[x],u!=null)for(d in u)m=l(y,d),p=l(u,d),y!==p&&(b&&p&&(a(p)||(h=s(p)))?(h?(h=!1,g=m&&s(m)?m:[]):g=m&&a(m)?m:{},i(y,{name:d,newValue:c(b,g,p)})):typeof p<"u"&&i(y,{name:d,newValue:p}));return y},AR}var iQt=aQt();const IR=Ka(iQt);function D7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function oQt(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const i=s.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);l(null,...s);function l(c,...u){const d=e[++a];let m=-1;if(c){i(c);return}for(;++m<s.length;)(u[m]===null||u[m]===void 0)&&(u[m]=s[m]);s=u,d?lQt(d,l)(...u):i(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function lQt(e,t){let n;return r;function r(...i){const l=e.length>i.length;let c;l&&i.push(s);try{c=e.apply(this,i)}catch(u){const d=u;if(l&&n)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,s):c instanceof Error?s(c):a(c))}function s(i,...l){n||(n=!0,t(i,...l))}function a(i){s(null,i)}}const $l={basename:cQt,dirname:uQt,extname:dQt,join:fQt,sep:"/"};function cQt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Jw(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let i=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else i<0&&(a=!0,i=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=i));return n===r?r=i:r<0&&(r=e.length),e.slice(n,r)}function uQt(e){if(Jw(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function dQt(e){Jw(e);let t=e.length,n=-1,r=0,s=-1,a=0,i;for(;t--;){const l=e.codePointAt(t);if(l===47){if(i){r=t+1;break}continue}n<0&&(i=!0,n=t+1),l===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function fQt(...e){let t=-1,n;for(;++t<e.length;)Jw(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":mQt(n)}function mQt(e){Jw(e);const t=e.codePointAt(0)===47;let n=pQt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function pQt(e,t){let n="",r=0,s=-1,a=0,i=-1,l,c;for(;++i<=e.length;){if(i<e.length)l=e.codePointAt(i);else{if(l===47)break;l=47}if(l===47){if(!(s===i-1||a===1))if(s!==i-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=i,a=0;continue}}else if(n.length>0){n="",r=0,s=i,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,i):n=e.slice(s+1,i),r=i-s-1;s=i,a=0}else l===46&&a>-1?a++:a=-1}return n}function Jw(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const hQt={cwd:gQt};function gQt(){return"/"}function F7(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function yQt(e){if(typeof e=="string")e=new URL(e);else if(!F7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return xQt(e)}function xQt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const RR=["history","path","basename","stem","extname","dirname"];class CRe{constructor(t){let n;t?F7(t)?n={path:t}:typeof t=="string"||vQt(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":hQt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<RR.length;){const a=RR[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)RR.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?$l.basename(this.path):void 0}set basename(t){OR(t,"basename"),PR(t,"basename"),this.path=$l.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?$l.dirname(this.path):void 0}set dirname(t){Xle(this.basename,"dirname"),this.path=$l.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?$l.extname(this.path):void 0}set extname(t){if(PR(t,"extname"),Xle(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=$l.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){F7(t)&&(t=yQt(t)),OR(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?$l.basename(this.path,this.extname):void 0}set stem(t){OR(t,"stem"),PR(t,"stem"),this.path=$l.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Ea(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function PR(e,t){if(e&&e.includes($l.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+$l.sep+"`")}function OR(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Xle(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function vQt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const bQt=function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},_Qt={}.hasOwnProperty;class Xz extends bQt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=oQt()}copy(){const t=new Xz;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(IR(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(FR("data",this.frozen),this.namespace[t]=n,this):_Qt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(FR("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=r2(t),r=this.parser||this.Parser;return LR("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),LR("process",this.parser||this.Parser),DR("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,i){const l=r2(t),c=r.parse(l);r.run(c,l,function(d,m,p){if(d||!m||!p)return u(d);const h=m,g=r.stringify(h,p);SQt(g)?p.value=g:p.result=g,u(d,p)});function u(d,m){d||!m?i(d):a?a(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),LR("processSync",this.parser||this.Parser),DR("processSync",this.compiler||this.Compiler),this.process(t,s),Jle("processSync","process",n),r;function s(a,i){n=!0,Yle(a),r=i}}run(t,n,r){Zle(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(i,l){const c=r2(n);s.run(t,c,u);function u(d,m,p){const h=m||t;d?l(d):i?i(h):r(void 0,h,p)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),Jle("runSync","run",r),s;function a(i,l){Yle(i),s=l,r=!0}}stringify(t,n){this.freeze();const r=r2(n),s=this.compiler||this.Compiler;return DR("stringify",s),Zle(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(FR("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):i(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...m]=u;c(d,m)}else i(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function i(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=IR(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const m=u[d];a(m)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let m=-1,p=-1;for(;++m<r.length;)if(r[m][0]===u){p=m;break}if(p===-1)r.push([u,...d]);else if(d.length>0){let[h,...g]=d;const y=r[p][1];D7(y)&&D7(h)&&(h=IR(!0,y,h)),r[p]=[u,h,...g]}}}}const wQt=new Xz().freeze();function LR(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function DR(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function FR(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Zle(e){if(!D7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Jle(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function r2(e){return CQt(e)?e:new CRe(e)}function CQt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function SQt(e){return typeof e=="string"||EQt(e)}function EQt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const MQt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",ece=[],tce={allowDangerousHtml:!0},kQt=/^(https?|ircs?|mailto|xmpp)$/i,TQt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function NQt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",s=e.className,a=e.components,i=e.disallowedElements,l=e.rehypePlugins||ece,c=e.remarkPlugins||ece,u=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...tce}:tce,d=e.skipHtml,m=e.unwrapDisallowed,p=e.urlTransform||jQt,h=wQt().use(xYt).use(c).use(sQt,u).use(l),g=new CRe;typeof r=="string"&&(g.value=r);for(const b of TQt)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+MQt+b.id,void 0);const y=h.parse(g);let x=h.runSync(y,g);return s&&(x={type:"element",tagName:"div",properties:{className:s},children:x.type==="root"?x.children:[x]}),nr(x,v),tqt(x,{Fragment:o.Fragment,components:a,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function v(b,_,w){if(b.type==="raw"&&w&&typeof _=="number")return d?w.children.splice(_,1):w.children[_]={type:"text",value:b.value},_;if(b.type==="element"){let C;for(C in TR)if(Object.hasOwn(TR,C)&&Object.hasOwn(b.properties,C)){const S=b.properties[C],E=TR[C];(E===null||E.includes(b.tagName))&&(b.properties[C]=p(String(S||""),C,b))}}if(b.type==="element"){let C=t?!t.includes(b.tagName):i?i.includes(b.tagName):!1;if(!C&&n&&typeof _=="number"&&(C=!n(b,_,w)),C&&w&&typeof _=="number")return m&&b.children?w.children.splice(_,1,...b.children):w.children.splice(_,1),_}}}function jQt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||kQt.test(e.slice(0,t))?e:""}const nce=4e3,AQt=e=>{const t=e.image_width,n=e.image_height;return!t||!n?!0:t<=nce&&n<=nce},Zz=R.memo(({item:e,onClick:t,alt:n})=>{const[r,s]=f.useState(!1),a=f.useMemo(()=>AQt(e)&&e.image||e.thumbnail,[e]),i=f.useCallback(()=>{s(!0)},[]);if(f.useEffect(()=>{s(!1)},[e]),!a||r){const l=a?"Failed to load image":"Image not available";return o.jsx("div",{className:"relative cursor-pointer",onClick:t,children:o.jsx("div",{className:"bg-subtler flex h-48 w-full items-center justify-center rounded-lg",children:o.jsxs("div",{className:"text-center",children:[o.jsx(le,{icon:df,size:"xl",className:"mx-auto mb-2 opacity-50"}),o.jsx(F,{variant:"small",color:"light",children:l})]})})})}return o.jsx("div",{className:"relative cursor-pointer",onClick:t,children:o.jsx("img",{src:a,alt:n||e.name||e.author_name||"Image",className:"h-48 w-full rounded-lg object-cover transition-opacity hover:opacity-90",onError:i,loading:"lazy"})})});Zz.displayName="MainImage";const SRe=R.memo(({item:e,index:t,isSelected:n,onClick:r})=>{const[s,a]=f.useState(!1),i=e.thumbnail||e.image,l=f.useCallback(()=>{a(!0)},[]);return f.useEffect(()=>{a(!1)},[e.thumbnail,e.image]),o.jsx("div",{className:V("flex-shrink-0 cursor-pointer transition-all",n?"ring-super rounded-md ring-2":"hover:opacity-75"),onClick:r,children:i&&!s?o.jsx("img",{src:i,alt:e.name||e.author_name||`Image ${t+1}`,className:"h-12 w-16 rounded-md object-cover",onError:l}):o.jsx("div",{className:"bg-subtler flex h-12 w-16 items-center justify-center rounded-md",children:o.jsx(le,{icon:df,size:"xs",className:"opacity-50"})})})});SRe.displayName="ThumbnailImage";const ERe=R.memo(({item:e,onClick:t})=>o.jsxs("div",{children:[o.jsx("div",{className:"mb-3",children:o.jsx(Zz,{item:e,onClick:t})}),o.jsx(Jz,{item:e})]}));ERe.displayName="SingleImageDisplay";const MRe=R.memo(({items:e,selectedIndex:t,onImageSelect:n,onImageClick:r})=>{const s=f.useCallback(()=>{r(t)},[r,t]),a=f.useCallback(()=>{const m=t>0?t-1:e.length-1;n(m)},[t,e.length,n]),i=f.useCallback(()=>{const m=t<e.length-1?t+1:0;n(m)},[t,e.length,n]),l=f.useCallback(m=>{m.key==="ArrowLeft"?(m.preventDefault(),a()):m.key==="ArrowRight"&&(m.preventDefault(),i())},[a,i]),c=f.useCallback(m=>{m.stopPropagation(),a()},[a]),u=f.useCallback(m=>{m.stopPropagation(),i()},[i]),d=e[t];return o.jsxs("div",{onKeyDownCapture:l,tabIndex:0,children:[o.jsxs("div",{className:"relative mb-3",children:[o.jsx(Zz,{item:d,onClick:s,alt:d.name||d.author_name||`Image ${t+1}`}),e.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute left-1 top-1/2 -translate-y-1/2 rounded-full",children:o.jsx(pe,{onClick:c,pill:!0,icon:hp,size:"small"})}),o.jsx("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 rounded-full",children:o.jsx(pe,{onClick:u,pill:!0,icon:Zn,size:"small"})})]})]}),o.jsx("div",{className:"mb-3",children:o.jsx("div",{className:"flex gap-2 overflow-x-auto p-1 pb-2 [scrollbar-width:thin]",children:e.map((m,p)=>o.jsx(SRe,{item:m,index:p,isSelected:t===p,onClick:()=>n(p)},p))})}),o.jsx(Jz,{item:d,index:t})]})});MRe.displayName="MultipleImagesDisplay";const Jz=R.memo(({item:e,index:t})=>{const n=e.name||e.author_name||(t!==void 0?`Image ${t+1}`:"Image");return e.url?o.jsxs("div",{className:"mt-2 flex flex-col gap-1",children:[o.jsx(Ye,{href:e.url,target:"_blank",rel:"noopener nofollow",className:"hover:text-super cursor-pointer transition-colors",children:o.jsx(F,{variant:"small",className:"line-clamp-3 font-medium leading-tight",children:n})}),o.jsx(Ye,{href:e.url,target:"_blank",rel:"noopener nofollow",className:"hover:text-super cursor-pointer transition-colors",children:o.jsx(F,{variant:"tiny",color:"light",className:"hover:text-super line-clamp-1",children:o.jsx("span",{className:"truncate font-mono",children:ha(e.url)})})})]}):o.jsxs("div",{className:"mt-2 flex flex-col gap-1",children:[o.jsx(F,{variant:"small",className:"line-clamp-3 font-medium leading-tight",children:n}),e.author_name&&e.author_name!==n&&o.jsxs(F,{variant:"tiny",color:"light",className:"line-clamp-1",children:[o.jsx("span",{children:"by"}),"",o.jsx("span",{className:"font-medium",children:e.author_name})]})]})});Jz.displayName="ImageCaption";const kRe=R.memo(({mediaItem:e,allMediaItems:t,className:n="",size:r="default",trackEvent:s,overflowCount:a})=>{const i=f.useMemo(()=>(t||[e]).filter(M=>M.image||M.thumbnail),[t,e]),{label:l,isTruncated:c}=f.useMemo(()=>{if(e.url){const E=I_(e.url),M=E.split("."),k=M.length>1?M.slice(-2).join("."):E,N=k.length>12;return{label:N?k.slice(0,12):k,isTruncated:N}}return{label:"image",isTruncated:!1}},[e.url]),u=a&&a>0?o.jsxs("span",{className:"opacity-50",children:["+",a]}):void 0,[d,m]=f.useState(!1),p=Gy(),{isMobileStyle:h}=Ce(),[g,y]=f.useState(!1),[x,v]=f.useState(0),b=f.useMemo(()=>({src:i[x]?.image||i[x]?.thumbnail,alt:i[x]?.name||i[x]?.author_name||`Image ${x+1}`}),[i,x]),_=f.useCallback(E=>{v(E)},[]),w=f.useCallback(E=>{v(E),y(!0),m(!1)},[]),C=f.useCallback(()=>{y(!1)},[]),S=f.useCallback(()=>{w(0)},[w]);return i.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx(px,{isOpen:g,onClose:C,imgProps:b}),o.jsx("span",{className:"ml-0.5 inline-block",children:o.jsxs(zH,{onOpenChange:E=>{m(E)},open:d,openDelay:200,closeDelay:200,children:[o.jsx(GH,{asChild:!0,onPointerDown:E=>{(h||E.pointerType==="touch")&&m(!0)},children:o.jsx(F,{as:"span",color:"default",className:V("relative -mt-px select-none whitespace-nowrap",{"-top-px":r==="default","-top-[3px] leading-none":r==="small","-top-two leading-none":r==="extraSmall"}),children:o.jsxs(H,{as:"span",variant:"subtle",className:V("text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums",{"py-[0.1875rem] leading-snug":r==="default","py-[0.175rem] leading-none":r==="small","py-[0.125rem] leading-none":r==="extraSmall"},"px-[0.3rem]","[@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white"),children:[o.jsx(le,{icon:df,size:"2xs",className:V("mr-xs -mt-px inline-block align-middle opacity-80")}),o.jsx("span",{className:V("relative -mt-px inline-block align-middle",{"max-w-[25ch] overflow-hidden":c}),style:c?{maskImage:"linear-gradient(to right, black 70%, transparent 100%)"}:{},children:l}),!!u&&o.jsx("span",{className:"ml-xs -mt-px mr-px inline-block align-middle",children:u})]})})}),o.jsx(qH,{children:o.jsx(KH,{className:V("[&>*]:!shadow-none [&]:!shadow-none",{"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!p}),side:"bottom",sideOffset:8,collisionPadding:h?8:10,align:h?"center":"start",children:o.jsx("div",{className:V("bg-base border-subtler max-h-[80vh] overflow-y-auto rounded-xl border pt-3",{"w-80 max-w-80":!h,"w-[calc(100vw-16px)] max-w-sm":h}),children:o.jsx("div",{className:"px-3 pb-3",children:i.length===1?o.jsx(ERe,{item:i[0],onClick:S}):o.jsx(MRe,{items:i,selectedIndex:x,onImageSelect:_,onImageClick:w})})})})})]})})]})});kRe.displayName="ImageCitationTooltip";const TRe=R.memo(({node:e,...t})=>o.jsx("button",{...t}));TRe.displayName="Button";const IQt={abap:"abap",actionscript:"actionscript",ada:"ada",arduino:"arduino",autoit:"autoit",bash:"bash",c:"c",clojure:"clojure",coffeescript:"coffeescript",cpp:"cpp",csharp:"csharp",css:"css",cuda:"cuda",d:"d",dart:"dart",delphi:"delphi",elixir:"elixir",erlang:"erlang",fortran:"fortran",foxpro:"foxpro",fsharp:"fsharp",go:"go",graphql:"graphql",gql:"gql",groovy:"groovy",haskell:"haskell",haxe:"haxe",html:"xml",java:"java",javascript:"javascript",json:"json",julia:"julia",jsx:"jsx",js:"js",kotlin:"kotlin",latex:"tex",lisp:"lisp",livescript:"livescript",lua:"lua",markup:"markup",mathematica:"mathematica",makefile:"makefile",matlab:"matlab",objectivec:"objectivec","objective-c":"objectivec","objective-j":"objectivec",objectpascal:"delphi",ocaml:"ocaml",octave:"matlab",perl:"perl",php:"php",powershell:"powershell",prolog:"prolog",puppet:"puppet",python:"python",qml:"qml",r:"r",racket:"lisp",restructuredtext:"rest",rest:"rest",ruby:"ruby",rust:"rust",sass:"less",less:"less",scala:"scala",scheme:"scheme",shell:"shell",smalltalk:"smalltalk",sql:"sql",standardml:"sml",sml:"sml",swift:"swift",tcl:"tcl",tex:"tex",text:"text",tsx:"tsx",ts:"ts",typescript:"typescript",vala:"vala",vbnet:"vbnet",verilog:"verilog",vhdl:"vhdl",xml:"xml",xquery:"xquery"},RQt=e=>{const{trackEvent:t}=e;return R.memo(({inline:r,className:s,children:a,node:i,...l})=>{const c=s?.replace("language-","")||"",u=f.useMemo(()=>({language:IQt?.[c]}),[c]);return r?o.jsx("code",{children:a}):o.jsx(lf,{className:"bg-subtler",codeBlockProps:u,trackEvent:t,...l,children:a})})},NRe=e=>{try{if(typeof e=="string")return e.toLowerCase().replace(/ /g,"-").replace(/[^a-z0-9-]/g,"").slice(0,50).replace(/^-+|-+$/g,"")}catch{}return""},eG="mb-2 mt-4",PQt=R.memo(({node:e,level:t,...n})=>{const r=NRe(n.children);return o.jsx("h1",{className:`font-display first:mt-xs ${eG} font-semimedium text-lg leading-[1.5em] lg:text-xl`,id:r,...n})}),OQt=R.memo(({node:e,level:t,...n})=>{const r=NRe(n.children);return o.jsx("h2",{className:`${eG} font-display font-semimedium text-base first:mt-0 md:text-lg [hr+&]:mt-4`,id:r,...n})}),LQt=R.memo(({node:e,level:t,...n})=>o.jsx("h2",{className:`${eG} font-display font-semimedium text-base first:mt-0`,...n})),jRe=R.memo(e=>o.jsx("hr",{className:"bg-subtle h-px border-0",...e}));jRe.displayName="Hr";const ARe=R.memo(({className:e,src:t,alt:n,node:r,...s})=>o.jsx("img",{className:e+" rounded-lg",src:t,alt:n,...s}));ARe.displayName="MarkdownImage";const IRe=R.memo(({node:e,depth:t,children:n,ordered:r,...s})=>o.jsx("ol",{className:V("marker:text-quiet list-decimal",{"pl-8":t===0}),...s,children:n}));IRe.displayName="MdOrderedList";const RRe=R.memo(({node:e,depth:t,children:n,ordered:r,...s})=>o.jsx("ul",{className:V("marker:text-quiet list-disc",{"pl-8":t===0}),...s,children:n}));RRe.displayName="MdUnorderedList";const PRe=R.memo(({className:e,children:t,ordered:n,node:r,...s})=>{const a=`py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&>p]:pt-0 [&>p]:mb-2 [&>p]:my-0 ${e||""}`.trim();return o.jsx("li",{...s,className:a,children:t})});PRe.displayName="ListItem";const ORe=R.memo(({node:e,className:t,children:n,...r})=>o.jsx("p",{className:V("my-2 [&+p]:mt-4 [&_strong:has(+br)]:inline-block [&_strong:has(+br)]:pb-2",t),...r,children:n}));ORe.displayName="Paragraph";const DQt=e=>R.memo(({children:n,node:r,...s})=>o.jsx("div",{className:V("w-full",{"md:max-w-[90vw]":!e}),children:o.jsx("pre",{className:"not-prose w-full rounded font-mono text-sm font-extralight",...s,children:n})})),rce=e=>{const t=[];let n="";nr(e,[{type:"text"},{tagName:"br"},{tagName:"a"}],s=>{if(s.type==="element"&&s.tagName==="br"){t.push(`
`);return}s.type==="element"&&s.tagName==="a"&&s.properties?.href&&(n=String(s.properties.href)),s.type==="text"&&t.push(s.value.trim())});const r=t.join("");return r?r.replace(/\s*\[\d+\]\s*/g," ").replace(/[ \t]+/g," ").trim():n},FQt=e=>{if(e.tagName!=="table")return{success:!1,error:{type:"INVALID_TABLE",message:"Invalid node: expected table element"}};let t=[];const n=[];nr(e,{tagName:"thead"},a=>{const i=[];nr(a,{tagName:"th"},l=>{const c=rce(l);i.push(c)}),n.push({cells:i,isHeader:!0}),t=i.map(l=>l.length)}),nr(e,{tagName:"tbody"},a=>{nr(a,{tagName:"tr"},i=>{const l=[];nr(i,{tagName:"td"},c=>{const u=rce(c);l.push(u)}),l.forEach((c,u)=>{u>=t.length?t.push(c.length):t[u]=Math.max(t[u]??0,c.length)}),n.push({cells:l,isHeader:!1})})});const r=UQt(n);return{success:!0,data:{plainText:BQt(n,t),htmlText:r}}},sce=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,n=>t[n]||n)},UQt=e=>{const{headerRows:t,bodyRows:n}=e.reduce((u,d)=>(d.isHeader?u.headerRows.push(d):u.bodyRows.push(d),u),{headerRows:[],bodyRows:[]}),r="border-collapse: collapse; width: 100%; font-family: Arial, sans-serif;",s="border: 1px solid #ddd; padding: 8px; text-align: left;",a=`${s} background-color: #f2f2f2; font-weight: bold;`,i=t.length>0?`<thead>${t.map(u=>`<tr>${u.cells.map(d=>`<th style="${a}">${sce(d)}</th>`).join("")}
          </tr>`).join("")}
        </thead>`:"",l=n.length>0?`<tbody>
          ${n.map(u=>`<tr>${u.cells.map(d=>`<td style="${s}">${sce(d)}</td>`).join("")}
            </tr>`).join("")}
        </tbody>`:"";return`<table style="${r}">${i}${l}</table>`},BQt=(e,t)=>{const n=[];return e.forEach((r,s)=>{const a=[];for(let i=0;i<t.length;i++){const l=r.cells[i]||"";a.push(l.padEnd(t[i]??0))}if(n.push(a.join("  |  ")),r.isHeader&&s===0){const i=t.map(l=>"-".repeat(l)).join("--+--");n.push(i)}}),n.join(`
`)},LRe=R.memo(function(t){const{isDisabled:n,tableNode:r,trackEvent:s}=t,{$t:a}=Z(),[i,l]=f.useState(!1),{openToast:c}=Mn(),u=f.useCallback(async()=>{l(!0);try{const d=FQt(r);if(!d.success){g1.error("Failed to convert table to clipboard format:",d.error.message),c({message:a({defaultMessage:"Failed to copy table",id:"6PLluVvMhZ"}),description:a({defaultMessage:"Table format is invalid",id:"LSnhEoAVyJ"}),variant:"error"});return}const{plainText:m,htmlText:p}=d.data;await LHt(m,p),s?.("clicked copy table",{source:"markdown"}),c({message:a({defaultMessage:"Table copied to clipboard",id:"cPHpHA3m/M"}),variant:"success"})}catch(d){g1.error("Failed to copy rich text:",d),c({message:a({defaultMessage:"Failed to copy table to clipboard",id:"GqiB7jDhXC"}),variant:"error"})}finally{l(!1)}},[a,c,r,s]);return o.jsx(ve.div,{className:"flex",animate:{opacity:n?0:1},children:o.jsx(Te,{disabled:n||i,icon:DD,onClick:u,size:"small",clickFeedback:!0,toolTip:a({defaultMessage:"Copy table",id:"uU7t5KxHne"}),variant:"noBackground",extraCSS:"aspect-square"})})});LRe.displayName="CopyTableButton";const DRe=R.memo(function(t){const{isFinal:n,tableNode:r,trackEvent:s}=t,a=i4e(),{$t:i}=Z(),l=f.useCallback(()=>{const c=s7.tableToCSV(r);a(c),s?.("clicked download table as csv",{source:"markdown"})},[a,r,s]);return o.jsx(ve.div,{className:"flex",animate:{opacity:n?1:0},children:o.jsx(Te,{disabled:!n,icon:vp,onClick:l,size:"small",toolTip:i({defaultMessage:"Download CSV",id:"fBhctxdFka"}),variant:"noBackground",extraCSS:"aspect-square"})})});DRe.displayName="DownloadTableAsCSV";const VQt=e=>{const{embedded:t,isCSVDownloadEnabled:n=!1,isSaveTableAsFileEnabled:r=!1,isCopyTableToClipboardEnabled:s=!1,isFinal:a=!0,trackEvent:i}=e;return R.memo(({node:c,...u})=>{const d=(n||r)&&a;return o.jsxs("div",{className:"group relative",children:[o.jsx(H,{className:V("w-full overflow-x-auto",{"md:max-w-[90vw]":!t}),children:o.jsx("table",{className:"border-subtler my-[1em] w-full table-auto border-separate border-spacing-0 border-l border-t",...u})}),d&&o.jsxs("div",{className:V("bg-base border-subtler shadow-subtle pointer-coarse:opacity-100 right-xs absolute bottom-0 flex rounded-lg border opacity-0 transition-opacity group-hover:opacity-100","[&>*:not(:first-child)]:border-subtle [&>*:not(:first-child)]:border-l"),children:[r&&e.saveTableAsFile&&o.jsx(e.saveTableAsFile,{isFinal:a,tableNode:c,trackEvent:i}),s&&o.jsx(LRe,{isDisabled:!a,tableNode:c,trackEvent:i}),n&&o.jsx(DRe,{isFinal:a,tableNode:c,trackEvent:i})]})]})})},FRe=R.memo(({node:e,isHeader:t,...n})=>o.jsx("td",{className:"px-sm border-subtler min-w-[48px] break-normal border-b border-r",...n}));FRe.displayName="TableCell";const URe=R.memo(({node:e,...t})=>o.jsx("thead",{className:"bg-subtler",...t}));URe.displayName="TableHeader";const BRe=R.memo(({node:e,...t})=>o.jsx("th",{className:"border-subtler p-sm break-normal border-b border-r text-left align-top",...t}));BRe.displayName="TableHeaderCell";const $Qt=/^<br\s?\/?>$/,WQt=()=>e=>{nr(e,"raw",(t,n,r)=>{n!=null&&$Qt.test(t.value)&&r&&(r.children[n]={type:"element",tagName:"br",position:t.position,properties:{},children:[]})})},VRe=e=>e.type=="element"&&e.tagName=="span"&&e.properties?.className=="whitespace-nowrap"&&e.children.length==2,HQt=e=>VRe(e)?e.children[0]:e,zQt=()=>e=>{nr(e,{tagName:"a"},(t,n,r)=>{if(t.properties?.title!="_citation"||n===null)return Wa;const s=n!=null?r?.children[n+1]:void 0;if(s?.type!="text"||s.value.charAt(0)!=".")return Wa;t.properties.className=(t.properties.className||"")+" mr-[2px]",r&&n!=null&&(r.children[n]={type:"element",tagName:"span",properties:{className:"whitespace-nowrap"},children:[t,{type:"text",value:"."}]}),s.value=s.value.slice(1)})};function GQt(e){try{const t=JSON.parse(e);return t&&typeof t=="object"&&Array.isArray(t.citations)?{success:!0,group:{category:t.category||"web",overflowCount:Number(t.overflowCount)||0,citations:t.citations,isGrouped:t.overflowCount>0,totalCount:t.citations.length,isHidden:!!t.isHidden}}:{success:!1}}catch{return{success:!1}}}const qQt=(e,t)=>function(n){let r=0;nr(n,"element",s=>{const a=VRe(s)?HQt(s):s;if(a.tagName!=="a")return fp;const[i]=a.children;if(i&&i.type==="text"){const l=yB(i.value,e);if(l){const c=t.find(d=>d.index===r),u=a.data||{};if(a.data=u,u.webResult=l,u.webResultCitation=c,a.properties&&typeof a.properties=="object"&&a.properties?.dataCitationGroup){const d=a.properties.dataCitationGroup;if(d.startsWith("{")&&d.endsWith("}")){const m=GQt(d);m.success&&(u.citationGroup=m.group)}}return r+=1,Wa}}return Wa})},KQt=e=>t=>{if(!e?.length)return;const n=e[0],r=[];e.length===1?r.push({mediaItem:n,overflowCount:0}):e.length>1&&r.push({mediaItem:n,overflowCount:e.length-1});const s=r.map(({mediaItem:l,overflowCount:c})=>({type:"element",tagName:"span",properties:{className:["select-none","ml-1","inline","align-baseline"]},children:[{type:"text",value:(d=>d.url?I_(d.url):d.name||"img")(l)}],data:{mediaItem:l,allMediaItems:e,isImageCitation:!0,component:"ImageCitation",citationType:"image",overflowCount:c}})),i=(l=>{const c=l.children.slice().reverse().find(d=>d.type==="element"&&(d.tagName==="ul"||d.tagName==="ol"));if(c){const d=c.children.slice().reverse().find(m=>m.type==="element"&&m.tagName==="li");if(d){const m=d.children.slice().reverse().find(p=>p.type==="element"&&p.tagName==="p");return m||d}}const u=l.children.slice().reverse().find(d=>d.type==="element"&&d.tagName==="p");return u||null})(t);i?i.children.push(...s):t.children.push({type:"element",tagName:"span",properties:{className:["inline-flex","flex-wrap"]},children:s})},YQt=()=>function(e){nr(e,"element",function(t,n,r){if(t.tagName!=="code")return;const s=!(r&&r.tagName==="pre");t.data||(t.data={}),t.properties||(t.properties={}),t.properties.inline=s})},QQt=()=>{const e=(t,n)=>{for(let r=t;r<n.children.length;r++)if(n.children[r].type=="element")return n.children[r];return null};return t=>{nr(t,{tagName:"p"},(n,r,s)=>{if(n.data??={},r!=null&&s){const a=e(r+1,s);n.data.nextIsParagraph=!!a&&a.type!=="comment"&&a.type!=="text"&&a.type!=="raw"&&a.type!=="link"&&a.type!=="break"&&a?.tagName=="p"}return Wa})}},XQt="pplx://action/",ZQt="pplx-href",JQt=()=>e=>{nr(e,"element",t=>{if(t.tagName!=="a")return fp;const n=t?.properties?.href?.toString()??"";if(!n.startsWith(XQt))return fp;const r=t;return r.tagName="button",r.properties={...r.properties,[ZQt]:n,href:void 0,type:"button"},Wa})},eXt="pplx://entity_chip/",$Re=()=>e=>{nr(e,"element",t=>{if(t.tagName!=="a")return fp;const n=t?.properties?.href?.toString()??"";if(!n.startsWith(eXt))return fp;const r=FDt(n);if(!r)return Wa;const s=t,a=s.properties?.className,i=Array.isArray(a)?a:[a].filter(Boolean);return s.properties={...s.properties,className:[...i,"entity-chip"],[n7]:r,title:d4e},Wa})},tXt=()=>e=>{nr(e,"text",(t,n,r)=>(t.value===""&&n!=null&&r?.children.splice(n,1),Wa))},UR=/[\t ]*(?:\r?\n|\r)/g,nXt=()=>e=>{nr(e,"text",(t,n,r)=>{const s=[];let a=0;const i=t.position?.start.offset??0;UR.lastIndex=0;let l=UR.exec(t.value);for(;l;){const c=l.index;if(a!==c){const u={start:{line:1,column:1,offset:a+i},end:{line:1,column:1,offset:c+i}};s.push({type:"text",value:t.value.slice(a,c),position:u})}s.push({type:"break"}),a=c+l[0].length,l=UR.exec(t.value)}if(s.length>0&&r&&typeof n=="number"){if(a<t.value.length){const c={start:{line:1,column:1,offset:a+i},end:{line:1,column:1,offset:t.value.length-a+i}};s.push({type:"text",value:t.value.slice(a),position:c})}return r.children.splice(n,1,...s),n+s.length}})},rXt=e=>{let t=0;return r=>{const s=[];for(;e.length;){const a=e.shift();if(t+=a.length,t>=r){s.push(a.slice(0,a.length+r-t));const i=a.slice(a.length+r-t);i&&(e.unshift(i),t-=i.length);break}s.push(a)}return s}},sXt=e=>typeof e=="object"&&"text"in e,WRe=(e,t,n,r,s,a,i)=>{let l=a||0;const c=t.map(u=>{const d=typeof u=="string"?u:u.text,m={start:{line:1,column:1,offset:l},end:{line:1,column:1,offset:l+d.length}};if(l+=d.length,e(d)){let p="#";return i&&(p=i(d)??""),{type:"link",url:p,title:s,children:[{type:"text",value:d,position:m}],...sXt(u)&&u.metadata?.citationGroup&&{data:{citationGroup:u.metadata.citationGroup,hProperties:{dataCitationGroup:JSON.stringify(u.metadata.citationGroup)}}}}}return{type:"text",value:d,position:m}});return r.children.splice(n,1,...c),n+c.length},ace=(e,t)=>({offset:(e.offset??0)+(t.offset??0),line:e.line+t.line-1,column:e.line==1?e.column+t.column-1:e.column}),aXt=(e,t,n=2)=>{n<0||e.position&&(e.position.start=ace(e.position.start,t),e.position.end=ace(e.position.end,t),e.children?.forEach(r=>aXt(r,t,n-1)))},iXt=(e={})=>{let{chunks:t}=e;return n=>{if(!Array.isArray(t))return;t=t.slice();const r=rXt(t);nr(n,"text",(s,a,i)=>{if(!s.position||s.position.start.offset==null||s.position.end.offset==null||!i)return fp;r(s.position.start.offset);const l=r(s.position.end.offset);return WRe(()=>!1,l,a,i,"",s.position.start.offset)})}},oXt=(e,t)=>{const n=e[0]??"",r=parseInt(n.replace(/[[\]]/g,""),10),s=yB(n,t);return{citation:n,number:r,webResult:s,groupCategory:lXt(s),startIndex:e.index,endIndex:e.index+n.length}},lXt=e=>e?e.is_memory?"memory":e.is_attachment?"attachment":e.url&&Cp(e.url)?"youtube":"web":"web",cXt=e=>{if(e.length===0)return[];const t=e[0],n=[];let r=[t];for(let s=1;s<e.length;s++){const a=e[s],i=r[r.length-1];a.startIndex===i.endIndex?r.push(a):(n.push(r),r=[a])}return n.push(r),n.flatMap(uXt)},uXt=e=>{if(e.length<=1)return e;const t=e.reduce((n,r)=>{const s=r.groupCategory==="conversation_history"?"web":r.groupCategory;return n.has(s)?n.get(s).members.push(r):n.set(s,{representative:r,members:[r]}),n},new Map);return e.map(n=>{const r=n.groupCategory==="conversation_history"?"web":n.groupCategory,s=t.get(r),a=n===s.representative;return{...n,groupMetadata:{isGroupRepresentative:a,groupCategory:n.groupCategory,groupSize:a?s.members.length:1,groupCitations:s.members.map(i=>i.number)}}})},dXt=(e,t)=>{const n=[];let r=0;for(const s of t){const a=!s.groupMetadata||s.groupMetadata.isGroupRepresentative;if(s.startIndex>r){const i=e.slice(r,s.startIndex);i&&n.push(i)}n.push({text:s.citation,metadata:{citationGroup:{category:s.groupCategory,overflowCount:s.groupMetadata&&a?s.groupMetadata.groupSize-1:0,citations:s.groupMetadata?s.groupMetadata.groupCitations:[s.number],isHidden:s.groupMetadata&&!a}}}),r=s.endIndex}if(r<e.length){const s=e.slice(r);s&&n.push(s)}return n},ice=(e={})=>{let{web_results:t,isAnchorLink:n,enableGrouping:r=!1}=e;t=Array.isArray(t)?t:[];const s=(l,c,u,d,m)=>WRe(p=>typeof p=="string"?m?.has(p)??Cm.test(p):p.text?Cm.test(p.text):!1,l,c,u,n?"_anchor_citation":"_citation",d,p=>{const h=typeof p=="string"?p:p.text;return yB(h,t)?.url??""}),a=(l,c)=>{if(c.length===0)return[l];const u=[];let d=0;for(const m of c)m.index>d&&u.push(l.slice(d,m.index)),u.push(m[0]),d=m.index+m[0].length;return d<l.length&&u.push(l.slice(d)),u.filter(Boolean)},i=new WeakSet;return l=>{nr(l,"text",(c,u,d)=>{if(!d||u==null||i.has(c))return Wa;i.add(c);const m=[...c.value.matchAll(new RegExp(Cm,"g"))];if(m.length===0)return Wa;const p=new Set(m.map(g=>g[0]));if(d?.type==="link"&&c.value==d.url){const g=a(c.value,m);return d.url=g[0],Wa}if(r){const g=m.map(v=>oXt(v,t)),y=cXt(g),x=dXt(c.value,y);return s(x,u,d,c.position?.start.offset,p)}const h=a(c.value,m);return s(h,u,d,c.position?.start.offset,p)})}},oce=()=>e=>{nr(e,"list",t=>{t.spread=!0})},fXt=new RegExp('(?<![[\\]<>()`])(https?:\\/\\/[^\\s[\\]<>()"`]+)(?:\\[\\d+\\])+',"g"),mXt=/\[(https?:\/\/[^\s[\]<>()"`]+)\](?!\()/g,pXt=/\*\*(https?:\/\/[^\s*<>()"`]+)\*\*/g,hXt=new RegExp(gB.source+"|"+vxe.source,"g"),gXt=(e,t)=>{if(typeof e!="string")return e;const n=e.replace(fXt,(r,s)=>`<${s}>${r.slice(s.length)}`).replace(mXt,(r,s)=>`[${s}](${s})`).replace(pXt,(r,s)=>`[**${s}**](${s})`);return t?n:n.replace(hXt,"")};function yXt(e,t){return function(...r){const s=e(...r);return function(a,i){try{return s(a,i)}catch(l){l.message.startsWith("KaTeX parse error")}return a}}}const HRe=function(e){if(e==null)return bXt;if(typeof e=="string")return vXt(e);if(typeof e=="object")return xXt(e);if(typeof e=="function")return tG(e);throw new Error("Expected function, string, or array as `test`")};function xXt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=HRe(e[n]);return tG(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function vXt(e){return tG(t);function t(n){return n.tagName===e}}function tG(e){return t;function t(n,r,s){return!!(_Xt(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function bXt(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function _Xt(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const wXt=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,CXt=/^[a-zA-Z]:\\/;function SXt(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return CXt.test(e)?!1:wXt.test(e)}const EXt=["http","https"],MXt=["nofollow"],kXt={};function TXt(e){const t=e||kXt,n=t.protocols||EXt,r=HRe(t.test);return function(s){nr(s,"element",function(a,i,l){if(a.tagName==="a"&&typeof a.properties.href=="string"&&r(a,i,l)){const c=a.properties.href;if(SXt(c)?n.includes(c.slice(0,c.indexOf(":"))):c.startsWith("//")){const u=Y0(t.content,a),d=u&&!Array.isArray(u)?[u]:u,m=Y0(t.rel,a)||MXt,p=typeof m=="string"?$Gt(m):m,h=Y0(t.target,a),g=Y0(t.properties,a);if(g&&Object.assign(a.properties,Rm(g)),p.length>0&&(a.properties.rel=[...p]),h&&(a.properties.target=h),d){const y=Y0(t.contentProperties,a)||{};a.children.push({type:"element",tagName:"span",properties:Rm(y),children:Rm(d)})}}}})}}function Y0(e,t){return typeof e=="function"?e(t):e}function lce(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function NXt(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function jXt(e,t,n){const s=fN((n||{}).ignore||[]),a=AXt(t);let i=-1;for(;++i<a.length;)h4e(e,"text",l);function l(u,d){let m=-1,p;for(;++m<d.length;){const h=d[m],g=p?p.children:void 0;if(s(h,g?g.indexOf(h):void 0,p))return;p=h}if(p)return c(u,d)}function c(u,d){const m=d[d.length-1],p=a[i][0],h=a[i][1];let g=0;const x=m.children.indexOf(u);let v=!1,b=[];p.lastIndex=0;let _=p.exec(u.value);for(;_;){const w=_.index,C={index:_.index,input:_.input,stack:[...d,u]};let S=h(..._,C);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?p.lastIndex=w+1:(g!==w&&b.push({type:"text",value:u.value.slice(g,w)}),Array.isArray(S)?b.push(...S):S&&b.push(S),g=w+_[0].length,v=!0),!p.global)break;_=p.exec(u.value)}return v?(g<u.value.length&&b.push({type:"text",value:u.value.slice(g)}),m.children.splice(x,1,...b)):b=[u],x+b.length}}function AXt(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([IXt(s[0]),RXt(s[1])])}return t}function IXt(e){return typeof e=="string"?new RegExp(NXt(e),"g"):e}function RXt(e){return typeof e=="function"?e:function(){return e}}const BR="phrasing",VR=["autolink","link","image","label"];function PXt(){return{transforms:[VXt],enter:{literalAutolink:LXt,literalAutolinkEmail:$R,literalAutolinkHttp:$R,literalAutolinkWww:$R},exit:{literalAutolink:BXt,literalAutolinkEmail:UXt,literalAutolinkHttp:DXt,literalAutolinkWww:FXt}}}function OXt(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:BR,notInConstruct:VR},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:BR,notInConstruct:VR},{character:":",before:"[ps]",after:"\\/",inConstruct:BR,notInConstruct:VR}]}}function LXt(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function $R(e){this.config.enter.autolinkProtocol.call(this,e)}function DXt(e){this.config.exit.autolinkProtocol.call(this,e)}function FXt(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function UXt(e){this.config.exit.autolinkEmail.call(this,e)}function BXt(e){this.exit(e)}function VXt(e){jXt(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,$Xt],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),WXt]],{ignore:["link","linkReference"]})}function $Xt(e,t,n,r,s){let a="";if(!zRe(s)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!HXt(n)))return!1;const i=zXt(n+r);if(!i[0])return!1;const l={type:"link",title:null,url:a+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[l,{type:"text",value:i[1]}]:l}function WXt(e,t,n,r){return!zRe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function HXt(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function zXt(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=lce(e,"(");let a=lce(e,")");for(;r!==-1&&s>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}function zRe(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||mp(n)||$N(n))&&(!t||n!==47)}GRe.peek=eZt;function GXt(){this.buffer()}function qXt(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function KXt(){this.buffer()}function YXt(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function QXt(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ll(this.sliceSerialize(e)).toLowerCase(),n.label=t}function XXt(e){this.exit(e)}function ZXt(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ll(this.sliceSerialize(e)).toLowerCase(),n.label=t}function JXt(e){this.exit(e)}function eZt(){return"["}function GRe(e,t,n,r){const s=n.createTracker(r);let a=s.move("[^");const i=n.enter("footnoteReference"),l=n.enter("reference");return a+=s.move(n.safe(n.associationId(e),{after:"]",before:a})),l(),i(),a+=s.move("]"),a}function tZt(){return{enter:{gfmFootnoteCallString:GXt,gfmFootnoteCall:qXt,gfmFootnoteDefinitionLabelString:KXt,gfmFootnoteDefinition:YXt},exit:{gfmFootnoteCallString:QXt,gfmFootnoteCall:XXt,gfmFootnoteDefinitionLabelString:ZXt,gfmFootnoteDefinition:JXt}}}function nZt(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:GRe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,i){const l=a.createTracker(i);let c=l.move("[^");const u=a.enter("footnoteDefinition"),d=a.enter("label");return c+=l.move(a.safe(a.associationId(r),{before:c,after:"]"})),d(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+a.indentLines(a.containerFlow(r,l.current()),t?qRe:rZt))),u(),c}}function rZt(e,t,n){return t===0?e:qRe(e,t,n)}function qRe(e,t,n){return(n?"":"    ")+e}const sZt=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];KRe.peek=cZt;function aZt(){return{canContainEols:["delete"],enter:{strikethrough:oZt},exit:{strikethrough:lZt}}}function iZt(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:sZt}],handlers:{delete:KRe}}}function oZt(e){this.enter({type:"delete",children:[]},e)}function lZt(e){this.exit(e)}function KRe(e,t,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let i=s.move("~~");return i+=n.containerPhrasing(e,{...s.current(),before:i,after:"~"}),i+=s.move("~~"),a(),i}function cZt(){return"~"}function uZt(e){return e.length}function dZt(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||uZt,a=[],i=[],l=[],c=[];let u=0,d=-1;for(;++d<e.length;){const y=[],x=[];let v=-1;for(e[d].length>u&&(u=e[d].length);++v<e[d].length;){const b=fZt(e[d][v]);if(n.alignDelimiters!==!1){const _=s(b);x[v]=_,(c[v]===void 0||_>c[v])&&(c[v]=_)}y.push(b)}i[d]=y,l[d]=x}let m=-1;if(typeof r=="object"&&"length"in r)for(;++m<u;)a[m]=cce(r[m]);else{const y=cce(r);for(;++m<u;)a[m]=y}m=-1;const p=[],h=[];for(;++m<u;){const y=a[m];let x="",v="";y===99?(x=":",v=":"):y===108?x=":":y===114&&(v=":");let b=n.alignDelimiters===!1?1:Math.max(1,c[m]-x.length-v.length);const _=x+"-".repeat(b)+v;n.alignDelimiters!==!1&&(b=x.length+b+v.length,b>c[m]&&(c[m]=b),h[m]=b),p[m]=_}i.splice(1,0,p),l.splice(1,0,h),d=-1;const g=[];for(;++d<i.length;){const y=i[d],x=l[d];m=-1;const v=[];for(;++m<u;){const b=y[m]||"";let _="",w="";if(n.alignDelimiters!==!1){const C=c[m]-(x[m]||0),S=a[m];S===114?_=" ".repeat(C):S===99?C%2?(_=" ".repeat(C/2+.5),w=" ".repeat(C/2-.5)):(_=" ".repeat(C/2),w=_):w=" ".repeat(C)}n.delimiterStart!==!1&&!m&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||m)&&v.push(" "),n.alignDelimiters!==!1&&v.push(_),v.push(b),n.alignDelimiters!==!1&&v.push(w),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||m!==u-1)&&v.push("|")}g.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return g.join(`
`)}function fZt(e){return e==null?"":String(e)}function cce(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function mZt(e,t,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const i=n.indentLines(n.containerFlow(e,a.current()),pZt);return s(),i}function pZt(e,t,n){return">"+(n?"":" ")+e}function hZt(e,t){return uce(e,t.inConstruct,!0)&&!uce(e,t.notInConstruct,!1)}function uce(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function dce(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&hZt(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function YRe(e,t){const n=String(e);let r=n.indexOf(t),s=r,a=0,i=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>i&&(i=a):a=1,s=r+t.length,r=n.indexOf(t,s);return i}function gZt(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function yZt(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function xZt(e,t,n,r){const s=yZt(n),a=e.value||"",i=s==="`"?"GraveAccent":"Tilde";if(gZt(e,n)){const m=n.enter("codeIndented"),p=n.indentLines(a,vZt);return m(),p}const l=n.createTracker(r),c=s.repeat(Math.max(YRe(a,s)+1,3)),u=n.enter("codeFenced");let d=l.move(c);if(e.lang){const m=n.enter(`codeFencedLang${i}`);d+=l.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...l.current()})),m()}if(e.lang&&e.meta){const m=n.enter(`codeFencedMeta${i}`);d+=l.move(" "),d+=l.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...l.current()})),m()}return d+=l.move(`
`),a&&(d+=l.move(a+`
`)),d+=l.move(c),u(),d}function vZt(e,t,n){return(n?"":"    ")+e}function nG(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function bZt(e,t,n,r){const s=nG(n),a=s==='"'?"Quote":"Apostrophe",i=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${a}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),i(),u}function _Zt(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Yb(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Ek(e,t,n){const r=Ly(e),s=Ly(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}QRe.peek=wZt;function QRe(e,t,n,r){const s=_Zt(n),a=n.enter("emphasis"),i=n.createTracker(r),l=i.move(s);let c=i.move(n.containerPhrasing(e,{after:s,before:l,...i.current()}));const u=c.charCodeAt(0),d=Ek(r.before.charCodeAt(r.before.length-1),u,s);d.inside&&(c=Yb(u)+c.slice(1));const m=c.charCodeAt(c.length-1),p=Ek(r.after.charCodeAt(0),m,s);p.inside&&(c=c.slice(0,-1)+Yb(m));const h=i.move(s);return a(),n.attentionEncodeSurroundingInfo={after:p.outside,before:d.outside},l+c+h}function wZt(e,t,n){return n.options.emphasis||"*"}function CZt(e,t){let n=!1;return nr(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,r7}),!!((!e.depth||e.depth<3)&&Hz(e)&&(t.options.setext||n))}function SZt(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(CZt(e,n)){const d=n.enter("headingSetext"),m=n.enter("phrasing"),p=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return m(),d(),p+`
`+(s===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const i="#".repeat(s),l=n.enter("headingAtx"),c=n.enter("phrasing");a.move(i+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(u)&&(u=Yb(u.charCodeAt(0))+u.slice(1)),u=u?i+" "+u:i,n.options.closeAtx&&(u+=" "+i),c(),l(),u}XRe.peek=EZt;function XRe(e){return e.value||""}function EZt(){return"<"}ZRe.peek=MZt;function ZRe(e,t,n,r){const s=nG(n),a=s==='"'?"Quote":"Apostrophe",i=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${a}`),u+=c.move(" "+s),u+=c.move(n.safe(e.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),u+=c.move(")"),i(),u}function MZt(){return"!"}JRe.peek=kZt;function JRe(e,t,n,r){const s=e.referenceType,a=n.enter("imageReference");let i=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),i();const d=n.stack;n.stack=[],i=n.enter("reference");const m=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return i(),n.stack=d,a(),s==="full"||!u||u!==m?c+=l.move(m+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function kZt(){return"!"}ePe.peek=TZt;function ePe(e,t,n){let r=e.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const i=n.unsafe[a],l=n.compilePattern(i);let c;if(i.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return s+r+s}function TZt(){return"`"}function tPe(e,t){const n=Hz(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}nPe.peek=NZt;function nPe(e,t,n,r){const s=nG(n),a=s==='"'?"Quote":"Apostrophe",i=n.createTracker(r);let l,c;if(tPe(e,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let m=i.move("<");return m+=i.move(n.containerPhrasing(e,{before:m,after:">",...i.current()})),m+=i.move(">"),l(),n.stack=d,m}l=n.enter("link"),c=n.enter("label");let u=i.move("[");return u+=i.move(n.containerPhrasing(e,{before:u,after:"](",...i.current()})),u+=i.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=i.move("<"),u+=i.move(n.safe(e.url,{before:u,after:">",...i.current()})),u+=i.move(">")):(c=n.enter("destinationRaw"),u+=i.move(n.safe(e.url,{before:u,after:e.title?" ":")",...i.current()}))),c(),e.title&&(c=n.enter(`title${a}`),u+=i.move(" "+s),u+=i.move(n.safe(e.title,{before:u,after:s,...i.current()})),u+=i.move(s),c()),u+=i.move(")"),l(),u}function NZt(e,t,n){return tPe(e,n)?"<":"["}rPe.peek=jZt;function rPe(e,t,n,r){const s=e.referenceType,a=n.enter("linkReference");let i=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),i();const d=n.stack;n.stack=[],i=n.enter("reference");const m=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return i(),n.stack=d,a(),s==="full"||!u||u!==m?c+=l.move(m+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function jZt(){return"["}function rG(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function AZt(e){const t=rG(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function IZt(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function sPe(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function RZt(e,t,n,r){const s=n.enter("list"),a=n.bulletCurrent;let i=e.ordered?IZt(n):rG(n);const l=e.ordered?i==="."?")":".":AZt(n);let c=t&&n.bulletLastUsed?i===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((i==="*"||i==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),sPe(n)===i&&d){let m=-1;for(;++m<e.children.length;){const p=e.children[m];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(i=l),n.bulletCurrent=i;const u=n.containerFlow(e,r);return n.bulletLastUsed=i,n.bulletCurrent=a,s(),u}function PZt(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function OZt(e,t,n,r){const s=PZt(n);let a=n.bulletCurrent||rG(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let i=a.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(i=Math.ceil(i/4)*4);const l=n.createTracker(r);l.move(a+" ".repeat(i-a.length)),l.shift(i);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),d);return c(),u;function d(m,p,h){return p?(h?"":" ".repeat(i))+m:(h?a:a+" ".repeat(i-a.length))+m}}function LZt(e,t,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),i=n.containerPhrasing(e,r);return a(),s(),i}const DZt=fN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function FZt(e,t,n,r){return(e.children.some(function(i){return DZt(i)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function UZt(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}aPe.peek=BZt;function aPe(e,t,n,r){const s=UZt(n),a=n.enter("strong"),i=n.createTracker(r),l=i.move(s+s);let c=i.move(n.containerPhrasing(e,{after:s,before:l,...i.current()}));const u=c.charCodeAt(0),d=Ek(r.before.charCodeAt(r.before.length-1),u,s);d.inside&&(c=Yb(u)+c.slice(1));const m=c.charCodeAt(c.length-1),p=Ek(r.after.charCodeAt(0),m,s);p.inside&&(c=c.slice(0,-1)+Yb(m));const h=i.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:p.outside,before:d.outside},l+c+h}function BZt(e,t,n){return n.options.strong||"*"}function VZt(e,t,n,r){return n.safe(e.value,r)}function $Zt(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function WZt(e,t,n){const r=(sPe(n)+(n.options.ruleSpaces?" ":"")).repeat($Zt(n));return n.options.ruleSpaces?r.slice(0,-1):r}const iPe={blockquote:mZt,break:dce,code:xZt,definition:bZt,emphasis:QRe,hardBreak:dce,heading:SZt,html:XRe,image:ZRe,imageReference:JRe,inlineCode:ePe,link:nPe,linkReference:rPe,list:RZt,listItem:OZt,paragraph:LZt,root:FZt,strong:aPe,text:VZt,thematicBreak:WZt};function HZt(){return{enter:{table:zZt,tableData:fce,tableHeader:fce,tableRow:qZt},exit:{codeText:KZt,table:GZt,tableData:WR,tableHeader:WR,tableRow:WR}}}function zZt(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function GZt(e){this.exit(e),this.data.inTable=void 0}function qZt(e){this.enter({type:"tableRow",children:[]},e)}function WR(e){this.exit(e)}function fce(e){this.enter({type:"tableCell",children:[]},e)}function KZt(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,YZt));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function YZt(e,t){return t==="|"?t:e}function QZt(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:i,tableCell:c,tableRow:l}};function i(h,g,y,x){return u(d(h,y,x),h.align)}function l(h,g,y,x){const v=m(h,y,x),b=u([v]);return b.slice(0,b.indexOf(`
`))}function c(h,g,y,x){const v=y.enter("tableCell"),b=y.enter("phrasing"),_=y.containerPhrasing(h,{...x,before:a,after:a});return b(),v(),_}function u(h,g){return dZt(h,{align:g,alignDelimiters:r,padding:n,stringLength:s})}function d(h,g,y){const x=h.children;let v=-1;const b=[],_=g.enter("table");for(;++v<x.length;)b[v]=m(x[v],g,y);return _(),b}function m(h,g,y){const x=h.children;let v=-1;const b=[],_=g.enter("tableRow");for(;++v<x.length;)b[v]=c(x[v],h,g,y);return _(),b}function p(h,g,y){let x=iPe.inlineCode(h,g,y);return y.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function XZt(){return{exit:{taskListCheckValueChecked:mce,taskListCheckValueUnchecked:mce,paragraph:JZt}}}function ZZt(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:eJt}}}function mce(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function JZt(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let a=-1,i;for(;++a<s.length;){const l=s[a];if(l.type==="paragraph"){i=l;break}}i===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function eJt(e,t,n,r){const s=e.children[0],a=typeof e.checked=="boolean"&&s&&s.type==="paragraph",i="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);a&&l.move(i);let c=iPe.listItem(e,t,n,{...r,...l.current()});return a&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(d){return d+i}}function tJt(){return[PXt(),tZt(),aZt(),HZt(),XZt()]}function nJt(e){return{extensions:[OXt(),nZt(e),iZt(),QZt(e),ZZt()]}}const rJt={tokenize:cJt,partial:!0},oPe={tokenize:uJt,partial:!0},lPe={tokenize:dJt,partial:!0},cPe={tokenize:fJt,partial:!0},sJt={tokenize:mJt,partial:!0},uPe={name:"wwwAutolink",tokenize:oJt,previous:fPe},dPe={name:"protocolAutolink",tokenize:lJt,previous:mPe},ed={name:"emailAutolink",tokenize:iJt,previous:pPe},Dc={};function aJt(){return{text:Dc}}let Kf=48;for(;Kf<123;)Dc[Kf]=ed,Kf++,Kf===58?Kf=65:Kf===91&&(Kf=97);Dc[43]=ed;Dc[45]=ed;Dc[46]=ed;Dc[95]=ed;Dc[72]=[ed,dPe];Dc[104]=[ed,dPe];Dc[87]=[ed,uPe];Dc[119]=[ed,uPe];function iJt(e,t,n){const r=this;let s,a;return i;function i(m){return!U7(m)||!pPe.call(r,r.previous)||sG(r.events)?n(m):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(m))}function l(m){return U7(m)?(e.consume(m),l):m===64?(e.consume(m),c):n(m)}function c(m){return m===46?e.check(sJt,d,u)(m):m===45||m===95||pa(m)?(a=!0,e.consume(m),c):d(m)}function u(m){return e.consume(m),s=!0,c}function d(m){return a&&s&&Ua(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(m)):n(m)}}function oJt(e,t,n){const r=this;return s;function s(i){return i!==87&&i!==119||!fPe.call(r,r.previous)||sG(r.events)?n(i):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(rJt,e.attempt(oPe,e.attempt(lPe,a),n),n)(i))}function a(i){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(i)}}function lJt(e,t,n){const r=this;let s="",a=!1;return i;function i(m){return(m===72||m===104)&&mPe.call(r,r.previous)&&!sG(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(m),e.consume(m),l):n(m)}function l(m){if(Ua(m)&&s.length<5)return s+=String.fromCodePoint(m),e.consume(m),l;if(m===58){const p=s.toLowerCase();if(p==="http"||p==="https")return e.consume(m),c}return n(m)}function c(m){return m===47?(e.consume(m),a?u:(a=!0,c)):n(m)}function u(m){return m===null||Ck(m)||dr(m)||mp(m)||$N(m)?n(m):e.attempt(oPe,e.attempt(lPe,d),n)(m)}function d(m){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(m)}}function cJt(e,t,n){let r=0;return s;function s(i){return(i===87||i===119)&&r<3?(r++,e.consume(i),s):i===46&&r===3?(e.consume(i),a):n(i)}function a(i){return i===null?n(i):t(i)}}function uJt(e,t,n){let r,s,a;return i;function i(u){return u===46||u===95?e.check(cPe,c,l)(u):u===null||dr(u)||mp(u)||u!==45&&$N(u)?c(u):(a=!0,e.consume(u),i)}function l(u){return u===95?r=!0:(s=r,r=void 0),e.consume(u),i}function c(u){return s||r||!a?n(u):t(u)}}function dJt(e,t){let n=0,r=0;return s;function s(i){return i===40?(n++,e.consume(i),s):i===41&&r<n?a(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?e.check(cPe,t,a)(i):i===null||dr(i)||mp(i)?t(i):(e.consume(i),s)}function a(i){return i===41&&r++,e.consume(i),s}}function fJt(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),a):l===93?(e.consume(l),s):l===60||l===null||dr(l)||mp(l)?t(l):n(l)}function s(l){return l===null||l===40||l===91||dr(l)||mp(l)?t(l):r(l)}function a(l){return Ua(l)?i(l):n(l)}function i(l){return l===59?(e.consume(l),r):Ua(l)?(e.consume(l),i):n(l)}}function mJt(e,t,n){return r;function r(a){return e.consume(a),s}function s(a){return pa(a)?n(a):t(a)}}function fPe(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||dr(e)}function mPe(e){return!Ua(e)}function pPe(e){return!(e===47||U7(e))}function U7(e){return e===43||e===45||e===46||e===95||pa(e)}function sG(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const pJt={tokenize:wJt,partial:!0};function hJt(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:vJt,continuation:{tokenize:bJt},exit:_Jt}},text:{91:{name:"gfmFootnoteCall",tokenize:xJt},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:gJt,resolveTo:yJt}}}}function gJt(e,t,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;s--;){const c=r.events[s][1];if(c.type==="labelImage"){i=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!i||!i._balanced)return n(c);const u=ll(r.sliceSerialize({start:i.end,end:r.now()}));return u.codePointAt(0)!==94||!a.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function yJt(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function xJt(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,i;return l;function l(m){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),c}function c(m){return m!==94?n(m):(e.enter("gfmFootnoteCallMarker"),e.consume(m),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(m){if(a>999||m===93&&!i||m===null||m===91||dr(m))return n(m);if(m===93){e.exit("chunkString");const p=e.exit("gfmFootnoteCallString");return s.includes(ll(r.sliceSerialize(p)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(m)}return dr(m)||(i=!0),a++,e.consume(m),m===92?d:u}function d(m){return m===91||m===92||m===93?(e.consume(m),a++,u):u(m)}}function vJt(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,i=0,l;return c;function c(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(g)}function d(g){if(i>999||g===93&&!l||g===null||g===91||dr(g))return n(g);if(g===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return a=ll(r.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return dr(g)||(l=!0),i++,e.consume(g),g===92?m:d}function m(g){return g===91||g===92||g===93?(e.consume(g),i++,d):d(g)}function p(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),s.includes(a)||s.push(a),fn(e,h,"gfmFootnoteDefinitionWhitespace")):n(g)}function h(g){return t(g)}}function bJt(e,t,n){return e.check(Zw,t,e.attempt(pJt,t,n))}function _Jt(e){e.exit("gfmFootnoteDefinition")}function wJt(e,t,n){const r=this;return fn(e,s,"gfmFootnoteDefinitionIndent",5);function s(a){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?t(a):n(a)}}function CJt(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(i,l){let c=-1;for(;++c<i.length;)if(i[c][0]==="enter"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._close){let u=c;for(;u--;)if(i[u][0]==="exit"&&i[u][1].type==="strikethroughSequenceTemporary"&&i[u][1]._open&&i[c][1].end.offset-i[c][1].start.offset===i[u][1].end.offset-i[u][1].start.offset){i[c][1].type="strikethroughSequence",i[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},i[u][1].start),end:Object.assign({},i[c][1].end)},m={type:"strikethroughText",start:Object.assign({},i[u][1].end),end:Object.assign({},i[c][1].start)},p=[["enter",d,l],["enter",i[u][1],l],["exit",i[u][1],l],["enter",m,l]],h=l.parser.constructs.insideSpan.null;h&&Zi(p,p.length,0,WN(h,i.slice(u+1,c),l)),Zi(p,p.length,0,[["exit",m,l],["enter",i[c][1],l],["exit",i[c][1],l],["exit",d,l]]),Zi(i,u-1,c-u+3,p),c=u+p.length-2;break}}for(c=-1;++c<i.length;)i[c][1].type==="strikethroughSequenceTemporary"&&(i[c][1].type="data");return i}function a(i,l,c){const u=this.previous,d=this.events;let m=0;return p;function p(g){return u===126&&d[d.length-1][1].type!=="characterEscape"?c(g):(i.enter("strikethroughSequenceTemporary"),h(g))}function h(g){const y=Ly(u);if(g===126)return m>1?c(g):(i.consume(g),m++,h);if(m<2&&!n)return c(g);const x=i.exit("strikethroughSequenceTemporary"),v=Ly(g);return x._open=!v||v===2&&!!y,x._close=!y||y===2&&!!v,l(g)}}}class SJt{constructor(){this.map=[]}add(t,n,r){EJt(this,t,n,r)}consume(t){if(this.map.sort(function(a,i){return a[0]-i[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const a of s)t.push(a);s=r.pop()}this.map.length=0}}function EJt(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function MJt(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function kJt(){return{flow:{null:{name:"table",tokenize:TJt,resolveAll:NJt}}}}function TJt(e,t,n){const r=this;let s=0,a=0,i;return l;function l(N){let P=r.events.length-1;for(;P>-1;){const A=r.events[P][1].type;if(A==="lineEnding"||A==="linePrefix")P--;else break}const L=P>-1?r.events[P][1].type:null,O=L==="tableHead"||L==="tableRow"?S:c;return O===S&&r.parser.lazy[r.now().line]?n(N):O(N)}function c(N){return e.enter("tableHead"),e.enter("tableRow"),u(N)}function u(N){return N===124||(i=!0,a+=1),d(N)}function d(N){return N===null?n(N):kt(N)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),h):n(N):bn(N)?fn(e,d,"whitespace")(N):(a+=1,i&&(i=!1,s+=1),N===124?(e.enter("tableCellDivider"),e.consume(N),e.exit("tableCellDivider"),i=!0,d):(e.enter("data"),m(N)))}function m(N){return N===null||N===124||dr(N)?(e.exit("data"),d(N)):(e.consume(N),N===92?p:m)}function p(N){return N===92||N===124?(e.consume(N),m):m(N)}function h(N){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(N):(e.enter("tableDelimiterRow"),i=!1,bn(N)?fn(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):g(N))}function g(N){return N===45||N===58?x(N):N===124?(i=!0,e.enter("tableCellDivider"),e.consume(N),e.exit("tableCellDivider"),y):C(N)}function y(N){return bn(N)?fn(e,x,"whitespace")(N):x(N)}function x(N){return N===58?(a+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(N),e.exit("tableDelimiterMarker"),v):N===45?(a+=1,v(N)):N===null||kt(N)?w(N):C(N)}function v(N){return N===45?(e.enter("tableDelimiterFiller"),b(N)):C(N)}function b(N){return N===45?(e.consume(N),b):N===58?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(N),e.exit("tableDelimiterMarker"),_):(e.exit("tableDelimiterFiller"),_(N))}function _(N){return bn(N)?fn(e,w,"whitespace")(N):w(N)}function w(N){return N===124?g(N):N===null||kt(N)?!i||s!==a?C(N):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(N)):C(N)}function C(N){return n(N)}function S(N){return e.enter("tableRow"),E(N)}function E(N){return N===124?(e.enter("tableCellDivider"),e.consume(N),e.exit("tableCellDivider"),E):N===null||kt(N)?(e.exit("tableRow"),t(N)):bn(N)?fn(e,E,"whitespace")(N):(e.enter("data"),M(N))}function M(N){return N===null||N===124||dr(N)?(e.exit("data"),E(N)):(e.consume(N),N===92?k:M)}function k(N){return N===92||N===124?(e.consume(N),M):M(N)}}function NJt(e,t){let n=-1,r=!0,s=0,a=[0,0,0,0],i=[0,0,0,0],l=!1,c=0,u,d,m;const p=new SJt;for(;++n<e.length;){const h=e[n],g=h[1];h[0]==="enter"?g.type==="tableHead"?(l=!1,c!==0&&(pce(p,t,c,u,d),d=void 0,c=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},p.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,m=void 0,a=[0,0,0,0],i=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},p.add(n,0,[["enter",d,t]])),s=g.type==="tableDelimiterRow"?2:d?3:1):s&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(a[1]!==0&&(i[0]=i[1],m=s2(p,t,a,s,void 0,m),a=[0,0,0,0]),i[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(i[0]=i[1],m=s2(p,t,a,s,void 0,m)),a=i,i=[a[1],n,0,0])):g.type==="tableHead"?(l=!0,c=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(c=n,a[1]!==0?(i[0]=i[1],m=s2(p,t,a,s,n,m)):i[1]!==0&&(m=s2(p,t,i,s,n,m)),s=0):s&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(i[3]=n)}for(c!==0&&pce(p,t,c,u,d),p.consume(t.events),n=-1;++n<t.events.length;){const h=t.events[n];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=MJt(t.events,n))}return e}function s2(e,t,n,r,s,a){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(a.end=Object.assign({},Fh(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const c=Fh(t.events,n[1]);if(a={type:i,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const u=Fh(t.events,n[2]),d=Fh(t.events,n[3]),m={type:l,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",m,t]]),r!==2){const p=t.events[n[2]],h=t.events[n[3]];if(p[1].end=Object.assign({},h[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,y=n[3]-n[2]-1;e.add(g,y,[])}}e.add(n[3]+1,0,[["exit",m,t]])}return s!==void 0&&(a.end=Object.assign({},Fh(t.events,s)),e.add(s,0,[["exit",a,t]]),a=void 0),a}function pce(e,t,n,r,s){const a=[],i=Fh(t.events,n);s&&(s.end=Object.assign({},i),a.push(["exit",s,t])),r.end=Object.assign({},i),a.push(["exit",r,t]),e.add(n+1,0,a)}function Fh(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const jJt={name:"tasklistCheck",tokenize:IJt};function AJt(){return{text:{91:jJt}}}function IJt(e,t,n){const r=this;return s;function s(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),a)}function a(c){return dr(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),i):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),i):n(c)}function i(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return kt(c)?t(c):bn(c)?e.check({tokenize:RJt},t,n)(c):n(c)}}function RJt(e,t,n){return fn(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function PJt(e){return aRe([aJt(),hJt(),CJt(e),kJt(),AJt()])}const OJt={};function LJt(e){const t=this,n=e||OJt,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(PJt(n)),a.push(tJt()),i.push(nJt(n))}function DJt(){return{enter:{mathFlow:e,mathFlowFenceMeta:t,mathText:a},exit:{mathFlow:s,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:l,mathText:i,mathTextData:l}};function e(c){const u={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[u]}},c)}function t(){this.buffer()}function n(){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,u.meta=c}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function s(c){const u=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),d=this.stack[this.stack.length-1];d.type,this.exit(c),d.value=u;const m=d.data.hChildren[0];m.type,m.tagName,m.children.push({type:"text",value:u}),this.data.mathFlowInside=void 0}function a(c){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},c),this.buffer()}function i(c){const u=this.resume(),d=this.stack[this.stack.length-1];d.type,this.exit(c),d.value=u,d.data.hChildren.push({type:"text",value:u})}function l(c){this.config.enter.data.call(this,c),this.config.exit.data.call(this,c)}}function FJt(e){let t=(e||{}).singleDollarTextMath;return t==null&&(t=!0),r.peek=s,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(a,i,l,c){const u=a.value||"",d=l.createTracker(c),m="$".repeat(Math.max(YRe(u,"$")+1,2)),p=l.enter("mathFlow");let h=d.move(m);if(a.meta){const g=l.enter("mathFlowMeta");h+=d.move(l.safe(a.meta,{after:`
`,before:h,encode:["$"],...d.current()})),g()}return h+=d.move(`
`),u&&(h+=d.move(u+`
`)),h+=d.move(m),p(),h}function r(a,i,l){let c=a.value||"",u=1;for(t||u++;new RegExp("(^|[^$])"+"\\$".repeat(u)+"([^$]|$)").test(c);)u++;const d="$".repeat(u);/[^ \r\n]/.test(c)&&(/^[ \r\n]/.test(c)&&/[ \r\n]$/.test(c)||/^\$|\$$/.test(c))&&(c=" "+c+" ");let m=-1;for(;++m<l.unsafe.length;){const p=l.unsafe[m];if(!p.atBreak)continue;const h=l.compilePattern(p);let g;for(;g=h.exec(c);){let y=g.index;c.codePointAt(y)===10&&c.codePointAt(y-1)===13&&y--,c=c.slice(0,y)+" "+c.slice(g.index+1)}}return d+c+d}function s(){return"$"}}const UJt={tokenize:BJt,concrete:!0,name:"mathFlow"},hce={tokenize:VJt,partial:!0};function BJt(e,t,n){const r=this,s=r.events[r.events.length-1],a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0;let i=0;return l;function l(b){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),c(b)}function c(b){return b===36?(e.consume(b),i++,c):i<2?n(b):(e.exit("mathFlowFenceSequence"),fn(e,u,"whitespace")(b))}function u(b){return b===null||kt(b)?m(b):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(b))}function d(b){return b===null||kt(b)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),m(b)):b===36?n(b):(e.consume(b),d)}function m(b){return e.exit("mathFlowFence"),r.interrupt?t(b):e.attempt(hce,p,x)(b)}function p(b){return e.attempt({tokenize:v,partial:!0},x,h)(b)}function h(b){return(a?fn(e,g,"linePrefix",a+1):g)(b)}function g(b){return b===null?x(b):kt(b)?e.attempt(hce,p,x)(b):(e.enter("mathFlowValue"),y(b))}function y(b){return b===null||kt(b)?(e.exit("mathFlowValue"),g(b)):(e.consume(b),y)}function x(b){return e.exit("mathFlow"),t(b)}function v(b,_,w){let C=0;return fn(b,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function S(k){return b.enter("mathFlowFence"),b.enter("mathFlowFenceSequence"),E(k)}function E(k){return k===36?(C++,b.consume(k),E):C<i?w(k):(b.exit("mathFlowFenceSequence"),fn(b,M,"whitespace")(k))}function M(k){return k===null||kt(k)?(b.exit("mathFlowFence"),_(k)):w(k)}}}function VJt(e,t,n){const r=this;return s;function s(i){return i===null?t(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),a)}function a(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function $Jt(e){let n=(e||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:WJt,previous:HJt,name:"mathText"};function r(s,a,i){let l=0,c,u;return d;function d(y){return s.enter("mathText"),s.enter("mathTextSequence"),m(y)}function m(y){return y===36?(s.consume(y),l++,m):l<2&&!n?i(y):(s.exit("mathTextSequence"),p(y))}function p(y){return y===null?i(y):y===36?(u=s.enter("mathTextSequence"),c=0,g(y)):y===32?(s.enter("space"),s.consume(y),s.exit("space"),p):kt(y)?(s.enter("lineEnding"),s.consume(y),s.exit("lineEnding"),p):(s.enter("mathTextData"),h(y))}function h(y){return y===null||y===32||y===36||kt(y)?(s.exit("mathTextData"),p(y)):(s.consume(y),h)}function g(y){return y===36?(s.consume(y),c++,g):c===l?(s.exit("mathTextSequence"),s.exit("mathText"),a(y)):(u.type="mathTextData",h(y))}}}function WJt(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="mathTextData"){e[t][1].type="mathTextPadding",e[n][1].type="mathTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="mathTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function HJt(e){return e!==36||this.events[this.events.length-1][1].type==="characterEscape"}function zJt(e){return{flow:{36:UJt},text:{36:$Jt(e)}}}const GJt={};function qJt(e){const t=this,n=e||GJt,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(zJt(n)),a.push(DJt()),i.push(FJt(n))}const gce=[nXt,[TXt,{target:"_blank"}],[LJt,{singleTilde:!1}],[qJt,{singleDollarTextMath:!1}]],yce={rehypePostParagraphBreaks:QQt,rehypeInlineCode:YQt,rehypeBreaks:WQt,rehypePeriodWrap:zQt,rehypePPLXEntityLinks:$Re};let a2=null,iE=null;async function KJt(e){return a2||(a2=Q(async()=>{const{default:t}=await import("./index-DI_kragw.js");return{default:t}},__vite__mapDeps([435,6,3,1,5,4])).then(({default:t})=>{const n=e?[yXt(t),{throwOnError:!0}]:[t,{throwOnError:!1}];return iE=n,n}),a2)}const YJt=({final:e,renderFollowUps:t,renderCitations:n,webResults:r,webResultCitations:s,imageCitations:a,inlineTokenAnnotations:i})=>{const[l,c]=f.useState(iE?{...yce,rehypeKatex:iE}:yce);return f.useEffect(()=>{iE||KJt(e).then(d=>{c(m=>({...m,rehypeKatex:d}))})},[e]),f.useMemo(()=>[...Object.values({...l,rehypePPLXActionLinks:t?JQt:null,rehypeCitations:n?[qQt,r,s??[]]:null,rehypeImageCitations:a?.length?[KQt,a]:null,rehypePPLXEntityLinks:Object.keys(i??{}).length>0?$Re:null}).filter(d=>d!==null),tXt],[l,t,n,r,s,a,i])};function HR(e,t){const{animateIn:n=!0,once:r=!0}=t??{},{device:{isIOS:s}}=Lt(),a=!s&&n,i=f.useMemo(()=>a?c=>{const u=wp(!0),d={...c,className:V(c.className,{"animate-in fade-in-25 duration-700":!(r&&u)})};return o.jsx(e,{...d})}:void 0,[e,r,a]);return!a||!i?e:i}const QJt="prose text-pretty dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium",XJt=f.memo(IRe),ZJt=f.memo(RRe),JJt=f.memo(URe),een=f.memo(FRe),ten=f.memo(BRe),nen=f.memo(PQt),ren=f.memo(OQt),i2=f.memo(LQt),sen=f.memo(jRe),aen=e=>e.reduce((t,n)=>(t[n.id]=n,t),{}),ien=({str:e,chunks:t,final:n=!1,webResults:r,inlineTokenAnnotations:s,embedded:a=!1,wrapInParent:i=!0,animateIn:l=!1,isAnchorLink:c=!1,testId:u,trackEvent:d,renderCitations:m=!0,enableCitationGrouping:p=!1,experiments:h={},markdownComponents:g={},citationSize:y="default",renderFollowUps:x=!0,webResultCitations:v,imageCitations:b,saveTableAsFile:_,onCitationClick:w,getAttachmentUrl:C,forceExternalHandler:S})=>{const{Paragraph:E=ORe,ListItem:M=PRe,Button:k=TRe,EntityChip:N}=g,{hideHoverCard:P,isDownloadTableAsCSVEnabled:L,isSaveTableAsFileEnabled:O,isCopyTableToClipboardEnabled:A}=h,j=f.useMemo(()=>{let oe;return ge=>(Pa(oe,ge,Pa)||(oe=ge),oe)},[]),T=f.useMemo(()=>{let oe;return ge=>(Pa(oe,ge,Pa)||(oe=ge),oe)},[]),I=f.useMemo(()=>{let oe;return ge=>(Pa(oe,ge,Pa)||(oe=ge),oe)},[]),U=f.useMemo(()=>{let oe;return ge=>{const xe=aen(ge??[]);return Pa(oe,xe,Pa)||(oe=xe),oe}},[]),B=j(r),D=T(v),W=I(t),z=U(s),$=f.useMemo(()=>n?gce.concat([m&&[ice,{web_results:B,isAnchorLink:c,enableGrouping:p}],oce].filter(Boolean)):gce.concat([m&&[ice,{web_results:B,isAnchorLink:c,enableGrouping:p}],[iXt,{chunks:W}],oce].filter(Boolean)),[n,m,B,c,W,p]),X=YJt({final:n,renderFollowUps:x,renderCitations:m,webResults:B,webResultCitations:D,imageCitations:b,inlineTokenAnnotations:z}),q=HR(E,{animateIn:l,once:!1}),Y=HR(M,{animateIn:l,once:!1}),G=HR(ARe,{animateIn:l}),J=f.useMemo(()=>VQt({embedded:a,isCSVDownloadEnabled:L,isSaveTableAsFileEnabled:O,isCopyTableToClipboardEnabled:A,isFinal:n,trackEvent:d,saveTableAsFile:_}),[a,L,O,A,n,d,_]),K=f.useMemo(()=>RQt({trackEvent:d}),[d]),te=f.useMemo(()=>HDt({hideHoverCard:P,trackEvent:d,citationSize:y,onCitationClick:w,getAttachmentUrl:C,enableCitationGrouping:p,webResults:B,inlineTokenAnnotationsLookup:z,EntityChipComponent:N,forceExternalHandler:S}),[P,d,y,w,C,p,B,z,N,S]),re=f.useMemo(()=>({children:ge,className:xe,node:ye,..._e})=>ye?.data?.isImageCitation&&ye?.data?.component==="ImageCitation"?o.jsx(kRe,{mediaItem:ye.data.mediaItem,allMediaItems:ye.data.allMediaItems,overflowCount:ye.data.overflowCount||0,className:Array.isArray(xe)?xe.join(" "):xe}):o.jsx("span",{className:Array.isArray(xe)?xe.join(" "):xe,..._e,children:ge}),[]),se=f.useMemo(()=>DQt(a),[a]),me=f.useMemo(()=>({p:q,ol:XJt,hr:sen,ul:ZJt,li:Y,table:J,thead:JJt,td:een,th:ten,pre:se,code:K,img:G,a:te,h1:nen,h2:ren,h3:i2,h4:i2,h5:i2,h6:i2,button:k,span:re}),[q,Y,J,K,te,G,se,k,re]);return o.jsx(Pr,{fallback:null,children:o.jsx(NQt,{className:i?QJt:void 0,remarkPlugins:$,rehypePlugins:X,unwrapDisallowed:!0,components:me,"data-test-id":u,children:gXt(e,m)})})},B7=R.memo(ien,({webResults:e,chunks:t,...n},{webResults:r,chunks:s,...a})=>Pa(n,a)&&Pa(e,r,Pa)&&Pa(t,s,Pa));B7.displayName="MarkdownRenderer";const oen=async({uuid:e,content:t,isError:n=!1})=>{await ae.POST("/rest/sse/perplexity_mcp_response","local-mcp-step",{body:{result:{content:t,is_error:n,uuid:e}}})},hPe=R.memo(e=>{const{step:t,server:n,isFinished:r}=e,{$t:s}=Z(),[a,i]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState(!1),m=Jn(),{mcpTools:p,installedDxts:h,actions:g,mcpToolsSettings:y}=cs(),{data:x}=vke(),{tool_id:v,tool_name:b,tool_args:_}=t.content,w=t.mcp_tool_output_content,C=n.name,E=f.useMemo(()=>p?.[C]?.find(({id:z})=>z===v)?.tool,[C,p,v])?.description,M=f.useMemo(()=>!C||!b?!1:(y?.[C]??{})[b]?.executePermissions==="allow-always",[C,b,y]),k=!r&&!w&&!u,N=k&&!M,P=f.useMemo(()=>{if(!E)return"";const z=E.split(`
`);return!(z.length>3)||a?E:z.slice(0,3).join(`
`)+"..."},[E,a]),L=f.useCallback(z=>{try{if(typeof z=="string")try{const $=JSON.parse(z);return`\`\`\`json
${JSON.stringify($,null,2)}
\`\`\``}catch{return z}return`\`\`\`json
${JSON.stringify(z,null,2)}
\`\`\``}catch{return String(z)}},[]),O=f.useCallback(async z=>{if(t.uuid){c(!0),d(!0),i(!1);try{await oen({...z,uuid:t.uuid})}finally{c(!1)}}},[t.uuid]),A=f.useCallback(async()=>{if(!(!C||!b||!t.uuid)){c(!0),d(!0);try{const z=await m.callMcpTool({mcpServerName:C,toolName:b,toolArgs:_},{step_uuid:t.uuid});await O({content:z.content.map($=>$.text).filter(Boolean).join(`

`)})}catch(z){await O({content:`The MCP tool call failed: ${z instanceof Error?z.message:"Unknown error"}`,isError:!0})}finally{c(!1)}}},[m,O,C,b,_,t.uuid]),j=f.useCallback(()=>{A()},[A]),T=f.useCallback(()=>{!C||!b||(g.setMcpToolExecutePermissions(C,b,"allow-always"),A())},[A,C,b,g]),I=f.useCallback(()=>{O({content:'The MCP tool call was rejected by the user (refer to them as "you" or use the appropriate equivalent in their language when mentioning this)'})},[O]),U=f.useCallback(()=>{i(z=>!z)},[]);f.useEffect(()=>{k&&M&&A()},[k,M,A]);const B=f.useMemo(()=>Upe(h,n),[h,n]),D=B?.display_name??B?.name??C,W=f.useMemo(()=>bke(x,n),[x,n]);return o.jsx(H,{variant:"background",className:"rounded-lg border p-4",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(H,{className:"text-super flex size-12 items-center justify-center rounded-lg",children:o.jsx(xke,{serverName:D,iconUrl:W,size:"xl"})}),o.jsxs("div",{className:"min-w-0 flex-1 flex-col",children:[o.jsx(F,{variant:"base",className:"font-medium",children:r?o.jsx(he,{defaultMessage:'Perplexity asked to use a tool from "{mcpServerName}" MCP-server',id:"gNLYcmUanW",values:{mcpServerName:D}}):o.jsx(he,{defaultMessage:'Allow Perplexity to use a tool from "{mcpServerName}" MCP-server?',id:"Bi84hx6i2G",values:{mcpServerName:D}})}),o.jsxs(H,{className:"mb-5 mt-3 overflow-hidden rounded-lg border p-3",children:[o.jsxs("div",{className:"flex cursor-pointer items-center justify-between",onClick:U,children:[o.jsxs("div",{className:"flex-1",children:[o.jsx(F,{variant:"smallMono",className:"font-medium",children:b}),o.jsx(F,{variant:"tinyMono",color:"light",className:"mt-1",children:P})]}),o.jsx(Zn,{size:20,className:`text-quiet ml-3 shrink-0 transition-transform ${a?"rotate-90":""}`})]}),a&&o.jsxs(H,{className:"mt-3 overflow-hidden",noBorder:!1,children:[o.jsxs(H,{className:"overflow-hidden rounded p-4",variant:"subtler",children:[o.jsx(F,{variant:"micro",className:"mb-2 font-bold",children:o.jsx(he,{defaultMessage:"Request",id:"p1P+hQq6tY"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsx("div",{className:"min-w-0 text-sm",children:o.jsx(B7,{str:L(_),final:!0,renderCitations:!1,embedded:!0,wrapInParent:!1})})})]}),w&&o.jsxs(H,{variant:"subtler",className:"mt-3 overflow-hidden rounded p-4",children:[o.jsx(F,{variant:"micro",className:V("mb-2 font-bold",w.status!=="success"&&"text-negative"),children:w.status==="success"?o.jsx(he,{defaultMessage:"Response",id:"MgdnPiJHcj"}):o.jsx(he,{defaultMessage:"Error",id:"KN7zKn8z4F"})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsx("div",{className:"min-w-0 text-sm",children:o.jsx(B7,{str:L(w.content),final:!0,renderCitations:!1,embedded:!0,wrapInParent:!1})})})]})]})]}),N&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pe,{variant:"primary",size:"small",disabled:l,text:s({defaultMessage:"Allow once",id:"O2tb5KUxpc"}),onClick:j}),o.jsx(pe,{variant:"primary",size:"small",disabled:l,text:s({defaultMessage:"Allow always",id:"F8zkKBCp6U"}),onClick:T})]}),o.jsx(Te,{size:"small",disabled:l,text:s({defaultMessage:"Reject",id:"VzIOKf1uNn"}),onClick:I})]})]})]})})});hPe.displayName="LocalMcpStep";const gPe=R.memo(({step:e,isFinished:t})=>{const{$t:n}=Z(),[r,s]=f.useState(!1),{isMobileStyle:a,isMobileUserAgent:i}=Ce(),[l,c]=f.useState(!1),[u,d]=f.useState(""),[m,p]=f.useState(null),h=pHt(),g=e.content.tool_input_summary||n({defaultMessage:"This tool will perform an action",id:"m3EA/HeMzd"}),y=e.content,x=e.mcp_tool_output_content,v=y.request_user_approval?.uuid,b=h.isPending,_=b||t||!!m,w=y.logo_url||WIe(y.app||""),C=y.app||"",S=f.useCallback(()=>{p(null)},[]),E=f.useCallback(P=>{if(v){if(P==="MODIFY"){c(!0);return}p(P),h.mutate({uuid:v,allowToolCall:P},{onError:()=>{S()}})}},[v,h,S]),M=f.useCallback(()=>{!v||!u.trim()||(p("MODIFY"),h.mutate({uuid:v,allowToolCall:"MODIFY",userRevision:u},{onError:()=>{S()}}))},[v,u,h,S]),k=f.useCallback(()=>{c(!1),d(""),p(null)},[]),N=f.useCallback(()=>s(P=>!P),[]);return o.jsxs(H,{className:"p-sm group-hover:bg-background grid grid-cols-[max-content_1fr] gap-x-2 gap-y-1 rounded-lg border pb-7 pl-4",variant:"raised",children:[o.jsxs("div",{className:"col-span-full grid cursor-pointer grid-cols-subgrid items-center",onClick:N,children:[w&&o.jsx("img",{src:w,alt:`${y.app} Logo`,className:"size-4 rounded object-cover"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:"smallBold",children:C}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx(Te,{size:"small",pill:!0,icon:r?Bn:Zn})})]})]}),o.jsxs("div",{className:"col-start-2 col-end-3 flex min-w-0 flex-col",children:[o.jsx(F,{variant:"small",className:"text-pretty sm:pr-8",children:g}),o.jsx(SPe,{isExpanded:r,mcpContent:y,mcpOutputContent:x}),o.jsx(na,{mode:"popLayout",initial:!1,transition:{duration:.2,ease:an},children:l&&o.jsx(is,{children:o.jsx(qa,{value:u,onChange:d,placeholder:n({defaultMessage:"What would you like to change?",id:"VkWAi878bt"}),isMobileStyle:a,isMobileUserAgent:i,disabled:b,minRows:3,className:"mt-4"})})}),o.jsx(H,{className:"mt-4 flex items-center gap-2",children:l?o.jsxs(o.Fragment,{children:[o.jsx(pe,{variant:"inverted",size:"small",text:n({defaultMessage:"Continue",id:"acrOozm08x"}),onClick:M,disabled:_||!u.trim()}),o.jsx(pe,{variant:"border",size:"small",text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:k,disabled:b,extraCSS:"bg-transparent"})]}):o.jsxs(o.Fragment,{children:[o.jsx(pe,{variant:"inverted",size:"small",text:n({defaultMessage:"Approve",id:"WCaf5CZSTt"}),onClick:()=>E("ALLOW"),disabled:_}),o.jsx(pe,{variant:"common",size:"small",text:n({defaultMessage:"Refine",id:"EBZvikr2Av"}),onClick:()=>E("MODIFY"),disabled:_}),o.jsx(pe,{variant:"border",size:"small",text:n({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:()=>E("DENY"),disabled:_,extraCSS:"ml-auto border-none bg-transparent mr-2"})]})})]})]})});gPe.displayName="McpToolApprovalStep";const len=e=>e?e.toLowerCase().replace(/[\s-]/g,"_").replace(/([a-z])([A-Z])/g,"$1_$2").replace(/^_+|_+$/g,"").replace(/_+/g,"_"):"",yPe=R.memo(({tool_logo_url:e,app:t,merge_extra_args:n,step_uuid:r,backend_uuid:s})=>{const{$t:a}=Z(),i=len(t||""),l=f.useCallback(async()=>{await vye({uuid:r,success:!1,reason:"User skipped authentication"})},[r]),c=f.useMemo(()=>({name:"mcp_connector_auth",upsell_type:"CONNECT_TO_CONNECTOR",app_location:"UPSELL_APP_LOCATION_UNSPECIFIED",title:a({defaultMessage:"Connect your {appName} account",id:"YPjv1DRLLL"},{appName:i}),description:a({defaultMessage:"Connect your {appName} account to get started",id:"MtMLxu8Eaj"},{appName:i}),cta:"MERGE_AUTH_CONNECTOR",icon_reference:i,...e&&{icon_image:{url:e,alt:i}},button_color:"INVERTED",button_text:"Connect",cta_information:{merge_auth_token:n?.auth_info?.auth_token,merge_auth_callback_uuid:r},show_in_comet:!0,is_persistent:!0,backend_uuid:s,image_asset:"",image_asset_low_res:"",image_asset_dark:"",image_asset_low_res_dark:"",background_super:!1}),[i,s,e,a,n?.auth_info?.auth_token,r]);return o.jsx(zx,{position:"router_steps",upsellInformation:c,backendUuid:s,isLastResult:!0,hideOnAccept:!1,hideOnReject:!1,onReject:l})});yPe.displayName="UnauthenticatedMcpToolInput";const cen={language:"json"},xPe=R.memo(e=>{const{tool_args:t,tool_name:n}=e,[r,s]=f.useState(!1),a=f.useCallback(()=>s(i=>!i),[]);return o.jsx(H,{className:"border-subtlest p-sm rounded-lg border",children:!!(t&&typeof t=="object"&&t!==null)&&o.jsxs(H,{className:"border-subtlest p-sm rounded-lg border",children:[o.jsxs(H,{className:"flex items-center justify-between",children:[o.jsx(F,{variant:"smallMono",children:n}),o.jsx(Te,{size:"small",icon:r?Bn:Zn,onClick:a})]}),o.jsx(na,{mode:"popLayout",transition:{duration:.2,ease:an},children:r&&o.jsx(is,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:an},children:o.jsxs(H,{className:"mt-sm rounded-lg",variant:"subtler",children:[o.jsx(F,{variant:"tiny",className:"p-md pb-0",children:o.jsx(he,{defaultMessage:"Request",id:"p1P+hQq6tY"})}),o.jsx(lf,{className:"scrollbar-subtle my-0 max-h-[200px] overflow-y-auto text-xs",codeBlockProps:cen,hideTools:!0,children:t&&typeof t=="object"?JSON.stringify(t):"No instructions"})]})})})]})})});xPe.displayName="AuthenticatedMcpToolInput";const vPe=R.memo(e=>{const{authenticated:t}=e;return t?o.jsx(xPe,{...e}):o.jsx(yPe,{...e})});vPe.displayName="McpToolInput";const uen=(e,t)=>{const{value:n,loading:r}=Dt({flag:"comet-mcp-enabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},den=()=>{const{variation:e}=uen(!1),{mcpStdioServers:t}=cs();return pi()&&e&&t!==void 0};function bPe(e){return JSON.stringify(e,null,2)}const _Pe=(e,t=1e4,{showTruncationIndicator:n=!0,format:r=!1}={})=>{if(e.length<=t)return r?wPe(e):e;let s=t;const a=Math.max(0,t-100);for(let c=t-1;c>=a;c--){const u=e[c];if(u===","||u===`
`||u===" "||u==="	"){s=c;break}}const i=e.substring(0,s).trim(),l=r?fen(e,i):i;if(n){const c=`

// Content truncated at ${s} characters (original: ${e.length} chars)`;return l+c}return l};function wPe(e){try{return bPe(JSON.parse(e))}catch{return e}}function fen(e,t){const n=wPe(e),r=t.replace(/\s/g,"").length;let s=0,a=n;for(let l=0;l<n.length;l++)/\s/.test(n[l]??"")||(s++,s===r&&(a=n.substring(0,l+1)));const i=t.at(-1);for(let l=a.length-1;l>=0;l--)if(a[l]===i){a=a.substring(0,l+1);break}return a}const xce={language:"json"},zR=2e3,CPe=R.memo(({step:e,isFinished:t})=>{const{lastResult:n}=Ht(),{submitQuery:r}=ta(),s=e.content,a=e.mcp_tool_output_content,[i,l]=f.useState(!1),c=f.useMemo(()=>!!a?.should_rerun_query,[a]),u=f.useCallback(async()=>{n?.query_str&&(await Au({entryUUID:n.backend_uuid,reason:"mcp-tool-output-merge-api"}),r({rawQuery:n.query_str,existingEntryUUID:n.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:n.frontend_context_uuid,promptSource:"user",querySource:"mcp-tool-input",attachments:[],modelPreferenceOverride:"pplx_pro",sourcesOverride:OE(n.sources?.sources)}))},[r,n]);f.useEffect(()=>{c&&u()},[u,c]);const d=f.useCallback(()=>l(v=>!v),[]),m=cs(),p=den(),h=f.useMemo(()=>!p||s.mcp_server_type!=="MCP_SERVER_TYPE_LOCAL"||!s.app?null:m.mcpStdioServers?.find(v=>v.name===s.app),[p,s.mcp_server_type,s.app,m.mcpStdioServers]);if(h)return o.jsx(hPe,{server:h,step:e,isFinished:t});if(s.request_user_approval?.request_user_approval===!0)return o.jsx(gPe,{step:e,isFinished:t});if(s.authenticated===void 0||s.authenticated===null)return null;const g=s.authenticated===!0,y=s.logo_url||WIe(s.app||""),x=s.app||"";return g?o.jsxs(H,{className:"p-sm hover:bg-raised grid grid-cols-[max-content_1fr] gap-x-2 rounded-lg border pl-4",variant:i?"raised":void 0,children:[o.jsxs("div",{className:"col-span-full grid cursor-pointer grid-cols-subgrid items-center",onClick:d,children:[y&&o.jsx("img",{src:y,alt:`${s.app} Logo`,className:"size-4 rounded object-cover"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:"smallBold",children:x}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx(Te,{size:"small",pill:!0,icon:i?Bn:Zn})})]})]}),o.jsx("div",{className:"col-start-2 col-end-3 min-w-0",children:o.jsx(SPe,{isExpanded:i,mcpContent:s,mcpOutputContent:a})})]}):o.jsx(vPe,{...s,step_uuid:e.uuid??"",backend_uuid:n?.backend_uuid??"",authenticated:g,tool_args:s.tool_args,tool_logo_url:y??void 0})}),SPe=({isExpanded:e,mcpContent:t,mcpOutputContent:n})=>{const{formatNumber:r}=Z(),s=f.useMemo(()=>n?.content?_Pe(n.content,zR,{showTruncationIndicator:!1,format:!0}):"",[n?.content]);return o.jsx(na,{mode:"popLayout",initial:!1,transition:{duration:.2,ease:an},children:e&&o.jsx(is,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:an},children:o.jsx("div",{className:"mt-sm",children:o.jsx(Yw,{maxHeight:400,autoScroll:!1,scrollContainerClassName:"scrollbar-subtle !pl-0",showTopGradient:!1,showBottomGradient:!1,children:o.jsxs("div",{className:"flex flex-col gap-2 pt-1",children:[o.jsx(F,{variant:"tinyMono",children:t.tool_name}),!!(t.tool_args&&typeof t.tool_args=="object"&&t.tool_args!==null)&&o.jsxs(H,{className:"rounded-lg",variant:"subtler",children:[o.jsx(F,{variant:"tiny",className:"p-md pb-0",children:o.jsx(he,{defaultMessage:"Request",id:"J+m4xH5bwC",description:"Request"})}),o.jsx(lf,{className:"p-sm !my-0 pt-0 text-xs",codeBlockProps:xce,hideTools:!0,children:t.tool_args&&typeof t.tool_args=="object"?bPe(t.tool_args):"No instructions"})]}),n&&o.jsxs(H,{className:"rounded-lg",variant:"subtler",children:[o.jsx(F,{variant:"tiny",className:"p-md pb-0",children:o.jsx(he,{defaultMessage:"Response",id:"UC/2Eq4W+h",description:"Response"})}),o.jsx(lf,{className:"p-sm !my-0 pt-0 text-xs",codeBlockProps:xce,hideTools:!0,children:s}),n.content&&n.content.length>zR&&o.jsx("div",{className:"bg-subtler flex items-center justify-center rounded-b p-2",children:o.jsx(F,{variant:"tiny",color:"light",children:o.jsx(he,{defaultMessage:"Content truncated at {truncatedSize} (original size: {originalSize})",id:"ipA00V5aGw",values:{truncatedSize:r(zR/1024,{maximumFractionDigits:0,style:"unit",unit:"kilobyte",unitDisplay:"narrow"}),originalSize:r(n.content.length/1024,{maximumFractionDigits:0,style:"unit",unit:"kilobyte",unitDisplay:"narrow"})}})})})]})]})})})})})};CPe.displayName="McpInputOutputStep";const men={language:"json"},GR=2e3,EPe=R.memo(e=>{const{content:t,shouldRerunQuery:n=!1}=e,{lastResult:r}=Ht(),{submitQuery:s}=ta(),a=f.useMemo(()=>_Pe(t,GR),[t]),i=f.useCallback(async()=>{r?.query_str&&(await Au({entryUUID:r.backend_uuid,reason:"mcp-tool-output-merge-api"}),s({rawQuery:r.query_str,existingEntryUUID:r.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:r.frontend_context_uuid,promptSource:"user",querySource:"mcp-tool-input",attachments:[],modelPreferenceOverride:"pplx_pro"}))},[s,r]);return f.useEffect(()=>{n&&i()},[i,n]),o.jsx(H,{className:"border-subtlest p-sm rounded-lg border",children:o.jsxs(H,{className:"flex flex-col rounded-lg",variant:"subtler",children:[o.jsx(F,{variant:"tiny",className:"p-md pb-0",children:o.jsx(he,{defaultMessage:"Response",id:"MgdnPiJHcj"})}),o.jsx(lf,{className:"scrollbar-subtle my-0 max-h-[200px] overflow-y-auto text-xs",codeBlockProps:men,hideTools:!0,children:a}),t.length>GR&&o.jsx("div",{className:"bg-subtler flex items-center justify-center rounded-b",children:o.jsxs(F,{variant:"tiny",color:"light",children:["Content truncated at ",Math.round(GR/1024),"KB (original size: ",Math.round(t.length/1024),"KB)"]})})]})})});EPe.displayName="McpToolOutput";const MPe=R.memo(({step:e,action:t})=>{const{final:n}=e.content,r=!n;return o.jsx(pe,{text:t,icon:Dm,isLoading:r,size:"tiny",pill:!0})});MPe.displayName="PdfStep";const vce=["start","end"],kPe=R.memo(({attachments:e,attachmentProcessingProgress:t})=>{const{$t:n}=Z(),s=e.filter(m=>Em(m)).length+t.length,a=e.length+vce.length,i=Math.min(s/a*100,100),l=t.filter(m=>!m.success),c=f.useMemo(()=>!!t.filter(m=>m.file_url==="end").length,[t]),u=f.useCallback(m=>{const p=u5(m.file_url??"");let h;switch(m.error_code){case"token_limit_exceeded":h=n({defaultMessage:"{filename} exceeds the model's token limit.",id:"60iyTByOrX"},{filename:p});break;case"file_type_not_supported":h=n({defaultMessage:"{filename} is of an unsupported file type. It will not be included in the results.",id:"sB9AI6thAL"},{filename:p});break;case"no_data_received":h=n({defaultMessage:"{filename} has timed out.",id:"/wyRgEWdz7"},{filename:p});break;default:h=n({defaultMessage:"{filename} could not be read. It will not be included in the results.",id:"7w0MjjvHs3"},{filename:p});break}return h},[n]),d=f.useMemo(()=>{const m=l.map((h,g)=>o.jsx(V7,{icon:cf,text:u(h)},g)),p=o.jsx(V7,{icon:Ar,text:n({defaultMessage:"Successfully read {numAttachments} attached files.",id:"5VxFwE1ux3"},{numAttachments:s-l.length-vce.length})});return[...m,...c?[p]:[]]},[l,n,s,c,u]);return o.jsx(Gx,{className:"pt-md pb-xs px-xs !border-[#32B8C6]",children:o.jsx(Yw,{maxHeight:250,autoScroll:!1,children:o.jsxs("div",{className:"pr-md gap-x-md flex w-full",children:[o.jsx(F,{className:"bg-super flex size-8 flex-none items-center justify-center rounded-md border-[0.75px] border-[#05FFFF]/20 shadow-[0px_1px_4px_0px_rgba(0,0,0,0.24)]",children:o.jsx(le,{icon:Fk,size:"md",className:"text-inverse"})}),o.jsxs("div",{className:"gap-y-xs flex grow flex-col",children:[o.jsx(F,{variant:"smallBold",children:n({defaultMessage:"Reading {numAttachments} attached {numAttachments, plural, one {file} other {files}}",id:"BqiTCbmvgp"},{numAttachments:e.length})}),o.jsx("div",{className:"h-2 w-full rounded-[37px] bg-[#60584D]/[0.06]",children:o.jsx("div",{className:"h-2 rounded-[37px] bg-[#32B8C6] transition-all duration-300",style:{width:`${i}%`}})}),o.jsxs("div",{className:"pt-xs",children:[o.jsx(Vp,{items:d,vertical:!0,truncate:!1}),!c&&o.jsx(wn,{variant:"super",active:!c,as:"span",className:"pt-xs",children:o.jsx(F,{variant:"small",color:"super",children:n({defaultMessage:"Reading...",id:"IvE1kfOWAz"})})})]})]})]})})})});kPe.displayName="PendingFilesStep";const V7=R.memo(({icon:e,text:t})=>o.jsxs("div",{className:"py-xs gap-x-sm flex",children:[o.jsx(F,{className:"flex items-center justify-center",children:o.jsx(le,{icon:e,size:"sm"})}),o.jsx(F,{variant:"small",color:"light",children:t})]}));V7.displayName="PendingFilesItem";const TPe=R.memo(({user:e,onRemove:t})=>{const n=f.useCallback(()=>{t(e)},[t,e]);return o.jsxs("div",{className:"border-subtlest gap-two pr-three flex h-8 items-center justify-between rounded-lg border pl-1.5 font-sans shadow-sm",children:[o.jsxs("div",{className:"gap-xs px-xs flex min-w-0 flex-row text-left",children:[o.jsx(F,{variant:"small",as:"span",children:e.display_name}),o.jsx(F,{variant:"small",color:"light",className:"truncate",as:"span",children:e.email_address})]}),o.jsx(Te,{variant:"common",size:"tiny",onClick:n,icon:It,extraCSS:"rounded-md","aria-label":`Remove ${e.display_name}`})]})});TPe.displayName="UserPill";const NPe=R.memo(({goalId:e,foundUsers:t,names:n,sendStepResult:r})=>{const{$t:s}=Z(),[a,i]=f.useState([]),l=f.useRef(null);f.useEffect(()=>{l.current&&l.current.focus()},[]);const c=f.useCallback(y=>{const x=y.map(v=>({...v,selected:!0}));i(x)},[]),u=f.useCallback(async()=>{await r({goal_id:e,selected_users:a,submitted:!0},"User selected contacts and clicked continue",!1)},[e,a,r]),d=f.useCallback(y=>{da.isEnterKeyWithoutShift(y.nativeEvent)&&a.length>0&&(y.preventDefault(),u())},[a.length,u]),m=f.useMemo(()=>({chooseContacts:s({defaultMessage:"Confirm or change contacts",id:"j4L7Bt/R+D"}),moreContacts:s({defaultMessage:"More contacts...",id:"XqmjEIgTyk"}),pickContacts:s({defaultMessage:"Pick contacts...",id:"dAWwl8XInO"}),continue:s({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),skip:s({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[s]),p=f.useMemo(()=>(t??[]).map(y=>({type:"default",text:y.display_name??"",description:y.email_address??"",active:a.some(x=>x.email_address===y.email_address),preserveRightElementSpace:!0,onClick:()=>{const x=a.some(v=>v.email_address===y.email_address);c(x?a.filter(v=>v.email_address!==y.email_address):[...a,y])}})),[t,a,c]);f.useEffect(()=>{if(t&&t.length>0&&a.length===0){const y=t.filter(x=>x.selected);if(y.length>0)c(y);else{const x=Math.min(n?.length||1,t.length);c(t.slice(0,x))}}},[t]);const h=f.useCallback(y=>{c(a.filter(x=>x.email_address!==y.email_address))},[a,c]),g=f.useCallback(async()=>{await r({goal_id:e,selected_users:t,submitted:!1},"User clicked skip",!1)},[t,e,r]);return o.jsxs(un,{ref:l,className:"py-2 pt-4 outline-none",onKeyDown:d,tabIndex:0,children:[o.jsxs("div",{className:"gap-md flex flex-col px-4",children:[o.jsx(F,{variant:"smallBold",children:m.chooseContacts}),o.jsxs("div",{className:"gap-sm flex flex-wrap items-stretch",children:[a.map(y=>o.jsx(TPe,{user:y,onRemove:h},y.email_address)),a.length<(t?.length??0)&&o.jsx(sn,{items:p,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(pe,{variant:"border",size:"small",icon:ur,"aria-label":a.length===0?m.moreContacts:m.pickContacts})})]})]}),o.jsxs("div",{className:"gap-sm mt-4 flex items-center px-4 py-2",children:[o.jsx(pe,{size:"small",variant:"inverted",text:m.continue,disabled:a.length===0,onClick:u}),o.jsx(Te,{size:"small",text:m.skip,onClick:g})]})]})});NPe.displayName="PickContactsStep";const jPe=R.memo(({stepUUID:e,goalId:t,foundBookingOptions:n,isSubmitted:r})=>{const{$t:s}=Z(),[a,i]=f.useState(n?.[0]),[l,c]=f.useState(0),u=f.useRef(null),d=f.useRef([]),m=f.useMemo(()=>({title:s({defaultMessage:"Choose booking options",id:"5yyo9+Yhan"}),description:s({defaultMessage:"Select your preferred booking provider",id:"gnnwIHEPAG"}),continue:s({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),confirmed:s({defaultMessage:"Confirmed",id:"dX7+RvbH/9"}),skip:s({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[s]),p=f.useCallback(async()=>{await X1({stepUUID:e,result:{goal_id:t,selected_booking_options:a,submitted:!0},reason:"User selected booking and clicked continue"})},[e,t,a]),h=f.useCallback(async()=>{await X1({stepUUID:e,result:{goal_id:t,selected_booking_options:void 0,submitted:!1},reason:"User clicked skip"})},[t,e]),g=f.useCallback(v=>{i(v)},[]),y=f.useCallback(v=>{c(v)},[]),x=f.useCallback((v,b)=>{d.current[b]=v},[]);return f.useEffect(()=>{if(!n?.length||r)return;const v=_=>{const w=C=>{_.preventDefault(),c(S=>{const E=C==="down"?Math.min(S+1,n.length-1):Math.max(S-1,0);return d.current[E]?.focus(),E})};switch(_.key){case"ArrowDown":w("down");break;case"ArrowUp":w("up");break;case"Enter":case" ":_.preventDefault(),l>=0&&l<n.length&&i(n[l]);break}},b=u.current;if(b)return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)},[n,l,r]),o.jsxs(Gx,{className:"pb-2 outline-none",title:m.title,description:m.description,descriptionClassName:"text-quiet",children:[o.jsx("div",{className:"gap-md mt-md flex flex-col px-4",children:o.jsx("div",{ref:u,className:"gap-xs flex flex-col",tabIndex:-1,role:"listbox","aria-label":"Booking options",children:(n??[]).map((v,b)=>{const _=a===v,w=V("group flex w-full items-center rounded-none border outline-none transition-[border-color,border-radius,box-shadow] duration-200 hover:transition-none",!r&&"cursor-pointer","border-t-subtlest border-x-transparent","last:border-b-subtlest [&:not(:last-child)]:border-b-transparent",_&&["!border-super/75 dark:bg-black bg-gradient-to-r from-super/25 to-super/25 !rounded-lg shadow-sm"],!_&&!r&&["hover:!border-subtlest hover:bg-subtler hover:rounded-lg","focus-visible:!border-subtlest focus-visible:bg-subtler focus-visible:rounded-lg"],!r&&'[&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:border-t-transparent [&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:transition-none');return o.jsx("div",{ref:C=>x(C,b),tabIndex:r?-1:0,role:"option","aria-selected":_,"data-selected":_,className:w,onClick:()=>!r&&g(v),onFocus:()=>!r&&y(b),children:o.jsxs("div",{className:"flex w-full items-center justify-between px-5 py-4",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[v?.together?.airline_logos?.[0]&&o.jsx("img",{src:v.together.airline_logos[0],alt:"airline logo",className:"-mt-two size-6 rounded object-contain"}),o.jsx("div",{className:"flex flex-col items-start gap-px",children:o.jsxs(F,{variant:"baseSemi",children:[v?.together?.book_with||"Flight",v?.together?.option_title?` (${v.together.option_title})`:""]})})]}),v?.together?.price&&o.jsxs(F,{variant:"baseSemi",className:"font-bold",children:["$",v.together.price]})]})},b)})})}),o.jsxs("div",{className:"gap-sm mt-sm flex items-center px-4 py-2",children:[o.jsx(pe,{size:"small",variant:"inverted",text:r?m.confirmed:m.continue,icon:r?Ar:void 0,disabled:!a||r,onClick:p}),o.jsx(Te,{size:"small",text:m.skip,disabled:r,onClick:h})]})]})});jPe.displayName="PickFlightsBookingStep";const bce={weekday:"short",month:"short",day:"numeric",year:"numeric"},pen={hour:"numeric",minute:"2-digit",hour12:!0},$7="en-US",_ce=e=>{if(!e)return"00:00 AM";try{return new Date(e).toLocaleTimeString($7,pen).toUpperCase()}catch{return"00:00 AM"}},hen=e=>{if(!e)return"";const t=Math.floor(e/60),n=e%60;return`${t}h ${n}m`},gen=e=>{if(!e||e.length===0)return"Nonstop";const t=e.length;return`${t} Stop${t>1?"s":""}`},wce=e=>{if(!e||e.length===0)return null;if(e.length===1){const t=e[0]?.duration||0,n=Math.floor(t/60),r=t%60;return`${n}h ${r}m ${e[0]?.id}`}return e.map(t=>t.id).join(", ")},yen=(e,t,n)=>{if(!e)return"";const s=new Date(e).toLocaleDateString($7,bce);if(n==="ROUND_TRIP"&&t){const l=new Date(t).toLocaleDateString($7,bce);return`  ${s}  ${l}`}return`  ${s}`},APe=R.memo(({flight:e,index:t,isSelected:n,isSubmitted:r,onSelect:s,onFocus:a,setRef:i})=>{const l=e.flights?.[0]?.departure_airport?.time,c=e.flights?.[e.flights.length-1]?.arrival_airport?.time,u=e.flights?.[0]?.departure_airport?.id||"XXX",d=e.flights?.[e.flights.length-1]?.arrival_airport?.id||"XXX",m=e.flights?.[0]?.airline,p=V("group flex w-full items-center rounded-none border outline-none transition-[border-color,border-radius,box-shadow] duration-200 hover:transition-none",!r&&"cursor-pointer","border-t-subtlest border-x-transparent","last:border-b-subtlest [&:not(:last-child)]:border-b-transparent",n&&["!border-super/75 dark:bg-black bg-gradient-to-r from-super/25 to-super/25 !rounded-lg shadow-sm"],!n&&!r&&["hover:!border-subtlest hover:bg-subtler hover:rounded-lg","focus-visible:!border-subtlest focus-visible:bg-subtler focus-visible:rounded-lg"],!r&&'[&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:border-t-transparent [&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:transition-none');return o.jsx("div",{ref:h=>i(h,t),tabIndex:r?-1:0,role:"option","aria-selected":n,"data-selected":n,className:p,onClick:()=>!r&&s(e),onFocus:()=>!r&&a(t),children:o.jsxs("div",{className:"grid w-full grid-cols-[auto_1fr_88px_88px_88px] items-start gap-6 px-5 py-4",children:[o.jsx("div",{className:"pt-two flex self-stretch",children:e.airline_logo&&o.jsx("img",{src:e.airline_logo,alt:"airline logo",className:"size-10 rounded object-contain"})}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(F,{variant:"baseSemi",children:_ce(l)}),o.jsx("span",{className:"text-quieter px-1",children:""}),o.jsx(F,{variant:"baseSemi",children:_ce(c)})]}),m&&o.jsx(F,{variant:"tinyMono",color:"light",children:m})]}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsx(F,{variant:"baseSemi",children:hen(e.total_duration)}),o.jsxs(F,{variant:"tinyMono",color:"light",children:[u,"",d]})]}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsx(F,{variant:"baseSemi",children:gen(e.layovers)}),wce(e.layovers)&&o.jsx(F,{variant:"tinyMono",color:"light",children:wce(e.layovers)})]}),o.jsxs("div",{className:"flex flex-col items-end justify-end gap-px",children:[e.price&&o.jsxs(F,{variant:"baseSemi",className:"font-bold",children:["$",e.price]}),o.jsx(F,{variant:"tinyMono",color:"light",children:e.type})]})]})},`flight-${t}`)});APe.displayName="FlightCard";const IPe=R.memo(({stepUUID:e,goalId:t,foundFlights:n,isSubmitted:r,outboundDate:s,returnDate:a,flightType:i})=>{const{$t:l}=Z(),[c,u]=f.useState(n?.length>0?0:-1),[d,m]=f.useState(0),p=f.useRef(null),h=f.useRef([]),g=f.useMemo(()=>yen(s,a,i),[s,a,i]),y=f.useMemo(()=>({title:l({defaultMessage:"Top departing flights",id:"tHwLRV4b68"})+g,description:l({defaultMessage:"Ranked by price and convenience. Prices include taxes and fees for one adult.",id:"cAxRMXuRMO"}),continue:l({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),confirmed:l({defaultMessage:"Confirmed",id:"dX7+RvbH/9"}),skip:l({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[l,g]),x=f.useCallback(async()=>{const C=c>=0&&n?n[c]:void 0;await X1({stepUUID:e,result:{goal_id:t,selected_flight:C,submitted:!0},reason:"User selected flight and clicked continue"})},[e,t,c,n]),v=f.useCallback(async()=>{await X1({stepUUID:e,result:{goal_id:t,selected_flight:void 0,submitted:!1},reason:"User clicked skip"})},[t,e]),b=f.useCallback(C=>{const S=n?.findIndex(E=>E===C)??-1;u(S)},[n]),_=f.useCallback(C=>{m(C)},[]),w=f.useCallback((C,S)=>{h.current[S]=C},[]);return f.useEffect(()=>{if(!n?.length||r)return;const C=E=>{const M=k=>{E.preventDefault(),m(N=>{const P=k==="down"?Math.min(N+1,n.length-1):Math.max(N-1,0);return h.current[P]?.focus(),P})};switch(E.key){case"ArrowDown":M("down");break;case"ArrowUp":M("up");break;case"Enter":case" ":E.preventDefault(),d>=0&&d<n.length&&u(d);break}},S=p.current;if(S)return S.addEventListener("keydown",C),()=>S.removeEventListener("keydown",C)},[n,d,r]),o.jsxs(Gx,{className:"pb-2 outline-none",title:y.title,description:y.description,descriptionClassName:"text-quiet",children:[o.jsx("div",{className:"gap-md mt-md flex flex-col px-4",children:o.jsx("div",{ref:p,className:"gap-xs flex flex-col",tabIndex:-1,role:"listbox","aria-label":"Flight options",children:(n??[]).map((C,S)=>o.jsx(APe,{flight:C,index:S,isSelected:c===S,isSubmitted:r,onSelect:b,onFocus:_,setRef:w},S))})}),o.jsxs("div",{className:"gap-sm mt-sm flex items-center px-4 py-2",children:[o.jsx(pe,{size:"small",variant:"inverted",text:r?y.confirmed:y.continue,icon:r?Ar:void 0,disabled:c<0||r,onClick:x}),o.jsx(Te,{size:"small",text:y.skip,disabled:r,onClick:v})]})]})});IPe.displayName="PickFlightsSearchStep";const RPe=({onSkip:e,onConfirm:t,disabled:n=!1,isLoading:r=!1,result:s=null,buttonText:a,loadingText:i})=>{const{$t:l}=Z();return s!==null?o.jsx(H,{className:"bg-base border-t pt-4",children:o.jsx("div",{className:"text-quiet text-sm",children:s?.confirmed===!0?l({defaultMessage:"Task will be created",id:"+A0SHGFNa7"}):l({defaultMessage:"Task was skipped",id:"uRAWVsTn39"})})}):o.jsx(H,{className:"bg-base border-t pt-4",children:o.jsx("div",{className:"flex items-center justify-between gap-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pe,{size:"small",variant:"primary",text:r?i||l({defaultMessage:"Creating...",id:"mRL9Vh/e/Z"}):a||l({defaultMessage:"Create Task",id:"4+iiEILSrA"}),onClick:t,disabled:n||r}),o.jsx(Te,{size:"small",text:l({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:e,disabled:n||r})]})})})},Cce="usd";function o2(e){return e!=null&&e!==rf&&e!==sf&&e!==f8&&e!==-1&&Math.abs(e)!==f8}function xen(e,t){const n=t.target_price!=null,r=t.movement_percent!=null,s=t.target_price?.toString(),a={query:{prompt:e.prompt||"",searchModel:e.model_preference||de.DEFAULT},status:"ACTIVE",notificationSettings:gf,defaultTargetPriceValue:s};if(n)return{...a,trigger:{type:dt.PRICE_ALERT,alertType:Xr.TARGET_PRICE,price:t.target_price,currency:Cce,symbol:t.ticker_symbol}};if(r){const i=t.movement_percent/100;return{...a,trigger:{type:dt.PRICE_ALERT,alertType:Xr.MOVEMENT_AMOUNT,percentageDecimalLowerBound:t.negative_direction?-i:0,percentageDecimalUpperBound:t.positive_direction?i:0,symbol:t.ticker_symbol}}}else return{...a,trigger:{type:dt.PRICE_ALERT,alertType:Xr.TARGET_PRICE,price:0,currency:Cce,symbol:t.ticker_symbol}}}const ven=({result:e})=>e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ha,{size:14,className:"text-super shrink-0",title:"Confirmed"}),o.jsx("span",{className:"text-super text-xs font-medium leading-none",children:o.jsx(he,{defaultMessage:"Alert confirmed",id:"0wByyMUPxz"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(It,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:o.jsx(he,{defaultMessage:"Alert skipped",id:"AYQONqG1U3"})})]}):null,PPe=R.memo(({sendStepResult:e,taskAction:t,priceAlertData:n,stepUUID:r,isFinished:s=!1})=>{const{$t:a}=Z(),{trackEvent:i}=je(),l="settings_create",[c,u]=f.useState(()=>xen(t,n)),[d,m]=f.useState(null),[p,h]=f.useState(null),[g,y]=f.useState(null),x=f.useRef(!1),v="price_alert_operation";f.useEffect(()=>{(async()=>{if(!n.ticker_symbol||s){h(!0);return}try{await Zd({symbol:n.ticker_symbol})===null?(h(!1),e({confirmed:!1,user_input:a({defaultMessage:'The stock symbol "{symbol}" could not be found. Please verify the ticker symbol is correct.',id:"yWihQJNDOI"},{symbol:n.ticker_symbol})},v,!1)):h(!0)}catch(M){ne.error("Failed to validate ticker",{ticker:n.ticker_symbol,error:M}),h(!1),e({confirmed:!1,user_input:a({defaultMessage:'Unable to validate the stock symbol "{symbol}" due to a network error. Please try again.',id:"C0nM7QfjoN"},{symbol:n.ticker_symbol})},v,!1)}})()},[n.ticker_symbol]),f.useEffect(()=>{t&&!s&&p===!0&&!x.current&&(i("price alert modal opened",{source:l}),x.current=!0)},[p]),f.useEffect(()=>{(async()=>{if(n.ticker_symbol&&p===!0&&c.trigger.type===dt.PRICE_ALERT)try{const M=await mbt(n.ticker_symbol);u(k=>({...k,trigger:{...k.trigger,currency:M}}))}catch(M){ne.warn("Failed to fetch currency for ticker",{ticker:n.ticker_symbol,error:M})}})()},[n.ticker_symbol,p,c.trigger.type]);const b=f.useMemo(()=>a({defaultMessage:"Create Price Alert",id:"WY6/zFtq4x"}),[a]),_=f.useCallback(E=>{m(E),E.confirmed?(i("price alert modal action",{source:l,action:"created"}),e({confirmed:!0,task_action:E.task_action},v,!1)):(i("price alert modal action",{source:l,action:"deleted"}),e({confirmed:!1},v,!1))},[e,v,i,l]),w=f.useCallback(()=>{m({confirmed:!1}),i("price alert modal action",{source:l,action:"skipped"}),e({confirmed:!1},v,!1)},[i,l,e,v]),C=f.useCallback(()=>{const E=c.trigger;let M={task_name:`Price Alert: ${n.ticker_symbol}`,prompt:c.query?.prompt,model_preference:c.query?.searchModel||de.DEFAULT,schedule:void 0,expiry_date:void 0,event_entity:n.ticker_symbol};switch(E.alertType){case Xr.TARGET_PRICE:{M={...M,event_type:"STOCK_PRICE_TARGET",target_price:E.price,current_price:n.current_price};break}case Xr.MOVEMENT_AMOUNT:{const k=E.percentageDecimalUpperBound,N=E.percentageDecimalLowerBound;M={...M,event_type:"STOCK_PRICE_MOVEMENT",upper_bound:k&&k>0?k*100:void 0,lower_bound:N&&N<0?N*100:void 0};break}default:Kt(E)}_({confirmed:!0,task_action:M})},[c,_,n]),S=f.useMemo(()=>s?!0:aje({isLoading:!1,currentConfiguration:c}),[c,s]);return!t||!n?null:s?o.jsx(Ws,{icon:Ha,iconClassName:"text-super",text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):p===null||p===!1?null:o.jsxs("div",{className:"bg-subtler border-subtlest transform rounded-xl border transition-transform duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between rounded-t-lg px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:o.jsx(fde,{size:16,className:"text-quiet"})}),o.jsx("h3",{className:"text-foreground text-sm font-medium",children:b})]}),o.jsx(ven,{result:d})]}),o.jsx("div",{className:"p-4",children:o.jsx(bc,{children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(wN,{configuration:c,onConfigurationChange:u,errorMessage:g??void 0,onError:y}),g&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(cf,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:g})]}),o.jsx(RPe,{onSkip:w,onConfirm:C,disabled:S,result:d,buttonText:b})]})})})]})});PPe.displayName="PriceAlertOperationStep";const ben=e=>{const[t,n]=f.useState([]),r=f.useRef(e);f.useEffect(()=>{r.current=e},[e]);const s=f.useCallback((l,c)=>{n(u=>{const d=[...u];return d[l]=c,d})},[]),a=f.useMemo(()=>new Map,[]);f.useEffect(()=>{const l=t.reduce((c,u)=>c+u,0);l>0&&r.current?.(l)},[t]);const i=f.useCallback(l=>(a.has(l)||a.set(l,c=>{s(l,c)}),a.get(l)),[a,s]);return f.useMemo(()=>({groupCounts:t,handleGroupCountChange:s,getGroupHandler:i}),[t,s,i])},OPe=R.memo(({result:e,textClassName:t})=>{const n=f.useMemo(()=>e.start?new Date(e.start):null,[e.start]),r=f.useMemo(()=>e.end?new Date(e.end):null,[e.end]),s=e.is_all_day===!0,a=R6e(e.calendar_color?.background||"oklch(var(--super-color))"),i=P6e(a),l=f.useMemo(()=>r?new Date(r.getTime()-24*60*60*1e3):null,[r]),c=()=>n?s?(r?Math.round((r.getTime()-n.getTime())/864e5):1)<=1?o.jsx(c1,{startDate:n,endDate:n,isAllDay:!0,showDate:!0,includeYear:!1}):o.jsx(c1,{startDate:n,endDate:l,isAllDay:!0,showDate:!0,includeYear:!1}):o.jsx(c1,{startDate:n,endDate:r||n,isAllDay:!1,showDate:!0,includeYear:!1}):null;return o.jsx("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer gap-3 rounded-lg px-2 py-1.5",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("div",{className:"py-xs relative w-1",children:o.jsx("div",{className:V("inset-y-two absolute w-1 shrink-0 self-stretch rounded-full",{"brightness-[0.8]":i==="Fail"}),style:{backgroundColor:a}})}),o.jsxs("div",{className:"gap-two flex min-w-0 flex-1 flex-col",children:[o.jsx("div",{className:"flex min-w-0 items-center justify-between gap-2",children:e.title&&o.jsx(F,{variant:"smallBold",className:"shrink-0",as:"span",children:e.title})}),o.jsx("div",{className:"flex min-w-0 items-center gap-2",children:n&&o.jsx(F,{className:V("min-w-0 shrink text-ellipsis",t),variant:"tinyMono",color:"light",as:"span",children:c()})})]})]})})});OPe.displayName="CalendarResult";const _en=e=>{const t=e.match(/^(.+?)\s*<(.+)>$/);return t?t[1]?.trim().replace(/^["']|["']$/g,"")||t[2]?.trim()||"":e.trim().replace(/^["']|["']$/g,"")},wen=e=>e==="GCAL"?{src:Qoe,alt:"Gmail"}:e==="OUTLOOK"?{src:aHt,alt:"Outlook"}:{src:Qoe,alt:"Gmail"},Cen=e=>{const t=Date.now(),n=new Date(e),r=t-n.getTime();if(r<0)return"";const s=1e3*60,a=s*60,i=a*24,l=i*7,c=i*30,u=i*365;return r<s?"1m":r<a?`${Math.floor(r/s)}m`:r<i?`${Math.floor(r/a)}h`:r<l?`${Math.floor(r/i)}d`:r<c?`${Math.floor(r/l)}w`:r<u?`${Math.floor(r/c)}mo`:`${Math.floor(r/u)}y`},LPe=R.memo(({result:e,textClassName:t,icon:n})=>{const r=wen(e.connection_type),s=n?o.jsx(le,{icon:n,size:"xs"}):o.jsx("img",{src:r.src,alt:r.alt,className:"size-[16px]"}),a=e.date?Cen(e.date):null;return o.jsxs("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("span",{className:"mt-two shrink-0",children:s}),o.jsxs("div",{className:"gap-two flex min-w-0 flex-1 flex-col",children:[o.jsx("div",{className:"flex min-w-0 items-center justify-between gap-2",children:e.sender&&o.jsx(F,{variant:"smallBold",className:"shrink-0",as:"span",children:_en(e.sender)})}),o.jsx("div",{className:"flex min-w-0 items-center gap-2",children:e.subject&&o.jsx(F,{className:V("min-w-0 shrink text-ellipsis font-medium",t),variant:"small",as:"span",children:e.subject})}),o.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[e.snippet&&o.jsx(F,{variant:"tinyMono",className:"min-w-0 shrink truncate",color:"light",as:"span",children:e.snippet}),a&&o.jsx(F,{variant:"tinyMono",className:"shrink-0 text-right",color:"light",as:"span",children:a})]})]})]})});LPe.displayName="EmailSearchResult";const DPe=R.memo(({result:e,textClassName:t,icon:n})=>{const r=n?o.jsx(le,{icon:n,size:"xs"}):o.jsx(le,{icon:Cu,size:"xs"}),s=("display_name"in e?e.display_name:void 0)||("name"in e?e.name:void 0)||"",a=("email_address"in e?e.email_address:void 0)||("url"in e?e.url:void 0)||"";return o.jsxs("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer items-center gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("span",{className:"shrink-0",children:r}),o.jsxs("span",{className:"gap-xs flex min-w-0 items-center",children:[s&&o.jsx(F,{className:V("min-w-0 shrink text-ellipsis",t),variant:"small",as:"span",children:s||(a?a.split("@")[0]:"")}),a&&o.jsx(F,{variant:"tinyMono",className:"mt-px min-w-0 shrink truncate",color:"light",as:"span",children:a})]})]})});DPe.displayName="UserInfoSearchResult";const FPe=R.memo(({result:e,textClassName:t,icon:n})=>{const r=XB(e.url),s=ixe(e,r),a=n?o.jsx(le,{icon:n,size:"xs"}):o.jsx(eo.Icon,{url:e.url,isAttachment:e.is_attachment||!1,connectionType:r,isMemory:e.is_memory||!1,isConversationHistory:e.is_conversation_history||!1,isClientContext:e.is_client_context||!1,isInlineAttachment:!1}),i=e.url?o.jsx(eo.Source,{url:e.url,source:s,isAttachment:e.is_attachment||!1,connectionType:r,isMemory:e.is_memory||!1,isConversationHistory:e.is_conversation_history||!1,snippet:e.snippet}):null,l=e.is_memory?e.snippet:e.name;return o.jsxs("div",{className:"hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("div",{className:"mt-two shrink-0",children:a}),o.jsxs("div",{className:"gap-xs flex min-w-0 flex-1 items-center",children:[o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l&&o.jsx(F,{className:V("min-w-0 shrink text-ellipsis",t),variant:"small",as:"span",children:l}),e.is_conversation_history&&o.jsx(F,{variant:"tinyMono",color:"light",className:"pt-two line-clamp-1",children:e.snippet})]}),!e.is_conversation_history&&o.jsx(F,{variant:"tinyMono",className:V("mt-px shrink-0 lowercase"),color:"light",as:"span",children:i})]})]})});FPe.displayName="WebSearchResult";const aG=()=>{const{openModal:e}=wt(),{trackEvent:t}=je();return f.useCallback(r=>{if(D_(r))return;const s=Vve(r);e("memorySearchHistoryModal",s);const a=s.type,i=s.memoryKey,l=s.entryUuid;t("viewed memory search history modal",{type:a,...a==="memory"&&{memory_key:i},...a==="conversation_history"&&{entry_uuid:l}})},[e,t])},Sen=({heading:e,groupIndex:t})=>o.jsxs(o.Fragment,{children:[t>0&&o.jsx("div",{className:"border-subtlest border-b"}),o.jsx(H,{variant:"raised",className:"-mx-xs pl-sm pb-sm sticky top-0 z-30 flex items-center gap-3 pt-3",children:o.jsx(F,{variant:"tinyMono",children:e})})]}),md=R.memo(({onClick:e,stepDelay:t,isFinished:n,results:r,textClassName:s,groupBy:a,onCountChange:i,icon:l,resultType:c="web",maxHeight:u=250})=>{const{getGroupHandler:d}=ben(i),m=Jn(),p=aG(),h=f.useCallback(x=>{(x.is_memory||x.is_conversation_history)&&p(x)},[p]),g=f.useCallback(x=>v=>{if("is_conversation_history"in x){if(x.is_conversation_history||x.is_memory){v.preventDefault(),h(x);return}if(x.is_attachment||x.is_memory)return v.preventDefault();o5(v)&&(v.preventDefault(),m.openTab({url:x.url,tabId:x.tab_id}))}if(c==="email"||c==="calendar"){if(e){v.preventDefault();const _="url"in x?x.url:"";e(_||"")}return}const b="url"in x?x.url:"";e?.(b||"")},[m,e,c,h]);if(!r||r.length===0)return null;let y=[];if(a){const x=r,v=new Map;x.forEach(w=>{const C=w.category;v.has(C)||v.set(C,[]),v.get(C).push(w)});const b={open_tab:{heading:"Opened tabs",icon:o.jsx(le,{icon:CP})},closed_tab:{heading:"Recently closed tabs",icon:o.jsx(le,{icon:wP})},history:{heading:"Browser history",icon:o.jsx(le,{icon:WDe})}},_=v.size>1;y=Array.from(v.entries()).map(([w,C])=>{const S=b[w];return{heading:_?S?.heading||w:void 0,icon:_?S?.icon:void 0,results:C}})}else r.length>0&&r[0]&&"results"in r[0]?y=r.map(b=>({heading:b.heading,results:b.results})):y=[{results:[...r]}];return o.jsx(Gx,{children:o.jsx(Yw,{maxHeight:u,autoScroll:!1,topGradientOffset:y.length>1?36:0,scrollContainerClassName:y.length===1?"pt-sm":void 0,children:o.jsx("div",{className:"flex flex-col gap-px",children:y.map((x,v)=>{const b=x.results.map((w,C)=>{const S="url"in w?w.url:"",E=()=>{const M={result:w,textClassName:typeof s=="function"?s(w):s,icon:l};switch(c){case"web":return o.jsx(FPe,{...M});case"userinfo":return o.jsx(DPe,{...M});case"email":return o.jsx(LPe,{...M});case"calendar":return o.jsx(OPe,{...M});default:return null}};return o.jsx(Ye,{className:"-ml-xs block",href:S||"#",target:"_blank",rel:"noopener nofollow",onClick:g(w),children:E()},`${v}-${S||C}-${C}`)}),_=d(v);return o.jsxs("div",{className:"mb-sm last:mb-0",children:[x.heading&&y.length>1&&o.jsx(Sen,{heading:x.heading,groupIndex:v}),o.jsx(Vp,{items:b,stepDelay:t,isFinished:n,vertical:!0,truncate:!1,onCountChange:_})]},v)})})})})});md.displayName="SearchResultsListStep";const rg=R.memo(({result:e,onClick:t,visualStyle:n,showName:r,className:s})=>{const a=Jn(),i=XB(e.url),l=ixe(e,i),c=aG(),u=f.useCallback(()=>{(e.is_memory||e.is_conversation_history)&&c(e)},[c,e]),d=f.useCallback(m=>{if(e.is_conversation_history||e.is_memory){m.preventDefault(),u();return}if(e.is_attachment||e.is_memory)return m.preventDefault();o5(m)&&(m.preventDefault(),a.openTab({url:e.url,tabId:e.tab_id})),t?.(e.url)},[a,t,e.is_attachment,e.is_memory,e.tab_id,e.url,u,e.is_conversation_history]);return o.jsx(Ye,{className:V("inline-block max-w-full",s),href:e.url,target:"_blank",rel:"noopener nofollow",onClick:d,children:o.jsx(H,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(eo,{variant:"tinyMono",className:V("!text-[0.7rem]",{"!line-through":n==="closedTab"}),url:e.url,name:r?e.name:void 0,isAttachment:e.is_attachment,connectionType:i,source:l,isMemory:e.is_memory,isConversationHistory:e.is_conversation_history})})})});rg.displayName="SearchResultBubble";const Een=R.memo(({onClick:e,webResults:t,initialDisplayCount:n=12,stepDelay:r,isFinished:s=!1})=>{const a=f.useMemo(()=>t.map(i=>o.jsx(UPe,{result:i,onClick:e},i.url)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(Vp,{items:a,initialDisplayCount:n,stepDelay:r,isFinished:s})})});Een.displayName="SearchResultsStep";const UPe=R.memo(({result:e,onClick:t})=>{const n=Jn(),r=f.useMemo(()=>({onClick(s){o5(s)&&(s.preventDefault(),n.openTab({url:e.url,tabId:e.tab_id}))}}),[n,e.tab_id,e.url]);return o.jsx(Fw,{result:e,linkProps:r,children:o.jsx(rg,{result:e,onClick:t})},e.url)});UPe.displayName="CitationHoverCardFactory";const Men=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9-]*\.)+[A-Z]{2,}$/i;function BPe(e){return typeof e!="string"?!1:Men.test(e)}const qR=({label:e,tags:t,onAdd:n,onDelete:r,isMobileUserAgent:s=!1,children:a,placeholder:i})=>o.jsxs("div",{className:"border-subtlest flex min-h-10 flex-1 items-center border-b p-0 px-2",children:[o.jsx(F,{variant:"small",color:"light",className:"w-10 min-w-[32px] select-none",children:e}),o.jsx("div",{className:"flex-1",children:o.jsx(kz,{tags:t,isMobileUserAgent:s,onAdd:n,onDelete:r,placeholder:i,validator:BPe,placeholderOnFocusOnly:!0})}),a]}),VPe=R.memo(({email:e,onChange:t,onSend:n})=>{const r=e?.cc??[],s=e?.bcc??[],a=e?.to??[],[i,l]=f.useState(r.length>0),[c,u]=f.useState(s.length>0),{isMobileUserAgent:d}=Ce(),m=()=>{(!r||r.length===0)&&(!s||s.length===0)&&(l(!1),u(!1))},{$t:p}=Z(),h={to:p({defaultMessage:"To",id:"9j3hXO4Ojb"}),cc:p({defaultMessage:"Cc",id:"J1CYkLdqdy"}),bcc:p({defaultMessage:"Bcc",id:"qLl3P2UOlZ"}),addRecipient:p({defaultMessage:"Add recipient",id:"o2g2HQVmtC"}),subject:p({defaultMessage:"Subject",id:"LLtKhppiyE"}),writeMessage:p({defaultMessage:"Write your message...",id:"yoP6t+NY/q"})},g=f.useCallback((C,S)=>{t({...e,[C]:S})},[e,t]),y=f.useCallback(C=>({onAdd:M=>{const k=e?.[C]??[],N=M.filter(P=>BPe(P)&&!k.includes(P));N.length>0&&g(C,[...k,...N])},onDelete:M=>{const k=e?.[C]??[];g(C,k.filter(N=>!M.includes(N)))}}),[e,g]),x=y("to"),v=y("cc"),b=y("bcc"),_=f.useCallback(C=>g("subject",C),[g]),w=f.useCallback(C=>g("body",C.target.value),[g]);return o.jsxs("div",{className:"dark:bg-subtler flex w-full flex-col",children:[o.jsx(qR,{label:h.to,tags:a.map(C=>({label:C,value:C})),onAdd:x.onAdd,onDelete:x.onDelete,isMobileUserAgent:d,placeholder:h.addRecipient,children:o.jsxs("div",{className:"gap-two ml-2 flex",children:[!i&&o.jsx("button",{type:"button",className:"hover:bg-subtler text-quiet rounded-lg px-2 py-1 font-sans text-sm",onClick:()=>l(!0),children:h.cc}),!c&&o.jsx("button",{type:"button",className:"hover:bg-subtler text-quiet rounded-lg px-2 py-1 font-sans text-sm",onClick:()=>u(!0),children:h.bcc})]})}),i&&o.jsx(qR,{label:h.cc,tags:r.map(C=>({label:C,value:C})),onAdd:v.onAdd,onDelete:v.onDelete,isMobileUserAgent:d,placeholder:h.addRecipient}),c&&o.jsx(qR,{label:h.bcc,tags:s.map(C=>({label:C,value:C})),onAdd:b.onAdd,onDelete:b.onDelete,isMobileUserAgent:d,placeholder:h.addRecipient}),o.jsx(Wr,{isMobileUserAgent:d,name:"subject-input",type:"text",value:e?.subject,onChange:_,placeholder:h.subject,className:"border-subtlest text-foreground min-h-10 w-full !rounded-none border-0 border-b !bg-transparent !p-2 focus:outline-none focus:!ring-0","aria-label":h.subject}),o.jsx("textarea",{name:"body",value:e?.body,onChange:w,placeholder:h.writeMessage,rows:8,className:"text-foreground placeholder:text-quieter min-h-[180px] w-full resize-none border-0 bg-transparent p-2 font-sans text-sm shadow-none focus:outline-none focus:ring-0","aria-label":h.writeMessage,onFocus:m})]})});VPe.displayName="EmailCard";const $Pe=R.memo(({emailAction:e,sendStepResult:t,isFinished:n})=>{const r="send-email-step",[s,a]=f.useState(n??!1),i=f.useMemo(()=>{if(e?.send)return e.send.email;if(e?.forward)return e.forward.email},[e]),[l,c]=f.useState(i),{$t:u}=Z(),d=f.useMemo(()=>!!(l?.to&&l.to.length===0),[l]),m=f.useMemo(()=>u({defaultMessage:"Send",id:"9WRlF4R2gm"}),[u]),[p,h]=f.useState(""),[g,y]=f.useState(!1),x=f.useCallback(()=>{a(!0),t({confirmed:!1},r,!1)},[t,r]),v=f.useCallback((E,M)=>{!E&&(!M||!M.trim())||(a(!0),t({confirmed:E,...M&&{user_input:M.trim()},...l&&{email:l}},r,!1),!E&&M&&(y(!1),h("")))},[t,r,l]),b=f.useCallback(()=>v(!0),[v]),_=f.useCallback(()=>v(!1,p),[v,p]),w=f.useCallback(E=>{da.isEnterKeyWithoutShift(E)&&(E.preventDefault(),_())},[_]),C=f.useCallback(()=>{y(!1),h("")},[]),S=f.useCallback(E=>{E.preventDefault(),y(!0)},[]);return s?o.jsx(Ws,{icon:Ha,iconClassName:"text-super",text:u({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsxs(H,{variant:"raised",className:"rounded-lg border",children:[l&&o.jsx(H,{children:o.jsx(VPe,{email:l,onChange:c})}),g&&o.jsxs("form",{onSubmit:_,children:[o.jsx(H,{className:"px-md py-sm gap-4 border-t",children:o.jsx(qa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:u({defaultMessage:"What would you like to change about this email?",id:"lrZrku1OFD"}),value:p,onChange:h,onKeyDown:w,minRows:3,className:"mt-sm !pl-3",autoFocus:!0})}),o.jsxs("div",{className:"gap-sm p-md pt-sm flex items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(pe,{size:"small",variant:"inverted",text:u({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit"}),o.jsx(Te,{variant:"negative",size:"small",text:u({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:C})]}),o.jsx(Te,{size:"small",text:u({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:x})]})]}),!g&&o.jsx("form",{onSubmit:b,children:o.jsxs("div",{className:"gap-sm p-md flex items-center justify-between border-t",children:[o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(pe,{size:"small",variant:"inverted",text:m,type:"submit",disabled:d}),o.jsx(pe,{size:"small",variant:"common",text:u({defaultMessage:"Refine email",id:"xTUBb7cWyO"}),onClick:S})]}),o.jsx(Te,{size:"small",text:u({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:x})]})})]})});$Pe.displayName="SendEmailStep";const ken=({result:e})=>{const{$t:t}=Z();return e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ha,{size:14,className:"shrink-0 text-[#16a34a]",title:"Confirmed"}),o.jsx("span",{className:"text-xs font-medium leading-none text-[#16a34a] dark:text-[#4ade80]",children:t({defaultMessage:"Task confirmed",id:"oLLCmoruP6"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(It,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:t({defaultMessage:"Task skipped",id:"uMaJWuUUvD"})})]}):null},WPe=R.memo(({sendStepResult:e,taskAction:t,stepUUID:n,isFinished:r=!1})=>{const{$t:s}=Z(),{trackEvent:a}=je(),i="router",l=f.useMemo(()=>{const w=t.expiry_date?new Date(t.expiry_date):void 0;return{trigger:{type:dt.SCHEDULED,schedule:Nen(t.schedule),expiryDate:w},query:{prompt:t.prompt||"",searchModel:t.model_preference||de.DEFAULT},status:"ACTIVE",notificationSettings:gf}},[t]),[c,u]=f.useState(RU(l??L3())),[d,m]=f.useState(null),[p,h]=f.useState(null),g="task_operation";f.useEffect(()=>{t&&!r&&a("task modal opened",{source:i})},[t,r,a,i]),ne.error("TaskOperationStep rendered",{stepUUID:n,hasTaskAction:!!t,isFinished:r,taskAction:t,taskActionType:typeof t,taskActionKeys:t?Object.keys(t):[],source:i});const y=f.useMemo(()=>s({defaultMessage:"Create Task",id:"4+iiEILSrA"}),[s]),x=f.useCallback(w=>{m(w),w.confirmed?(a("task modal action",{source:i,action:"created"}),e({confirmed:!0,task_action:w.task_action},g,!1)):(a("task modal action",{source:i,action:"deleted"}),e({confirmed:!1},g,!1))},[e,g,a]),v=f.useCallback(()=>{x({confirmed:!1})},[x]),b=f.useCallback(()=>{const w={task_name:c.query?.prompt||"Untitled Task",prompt:c.query?.prompt,model_preference:c.query?.searchModel||de.DEFAULT,schedule:c.trigger.type===dt.SCHEDULED?Ten(c.trigger.schedule):void 0,expiry_date:t.expiry_date};x({confirmed:!0,task_action:w})},[c,x,t.expiry_date]),_=f.useCallback(w=>{u(w)},[]);return t?r?o.jsx(Ws,{icon:Ha,iconClassName:"text-super",text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsxs("div",{className:"bg-subtler border-subtlest transform overflow-hidden rounded-xl border transition-transform duration-200",children:[o.jsxs("div",{className:"bg-subtler border-subtler flex items-center justify-between border-b px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:o.jsx(_p,{size:16,className:"text-quiet"})}),o.jsx("h3",{className:"text-foreground text-sm font-medium",children:y})]}),o.jsx(ken,{result:d})]}),o.jsx("div",{className:"bg-base p-4",children:o.jsx(bc,{children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(wN,{configuration:c,onConfigurationChange:_}),p&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(cf,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:p})]}),o.jsx(RPe,{onSkip:v,onConfirm:b,disabled:r,result:d})]})})})]}):(ne.error("TaskOperationStep received null/undefined taskAction - will not render",{stepUUID:n,taskAction:t,isFinished:r,source:i}),null)});WPe.displayName="TaskOperationStep";function Ten(e){const t=`${e.hour.toString().padStart(2,"0")}:${e.minute.toString().padStart(2,"0")}`;switch(e.kind){case"ONCE":return{one_time:{datetime:new Date(e.year,e.month,e.day,e.hour,e.minute).toISOString()}};case"DAILY":return{daily:{time:t}};case"WEEKLY":return{weekly:{time:t,day_of_week:(e.dayOfWeek+6)%7}};case"MONTHLY":return{monthly:{time:t,day_of_month:e.day}};case"YEARLY":return{yearly:{time:t,day_of_month:e.day,month_of_year:e.month+1}};case"WEEKDAYS":return{weekdays:{time:t}};default:return{daily:{time:t}}}}function Nen(e){if(!e)return Vs();if(e.one_time){const t=e.one_time.datetime;if(!t)return Vs();const n=new Date(t);return{kind:"ONCE",minute:n.getMinutes(),hour:n.getHours(),day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),dayOfWeek:n.getDay()}}else if(e.daily){const t=e.daily.time;if(!t)return Vs();const[n="",r=""]=t.split(":"),s=parseInt(n,10),a=parseInt(r,10);if(isNaN(s)||isNaN(a))return Vs();const i=new Date;return{kind:"DAILY",minute:a,hour:s,day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),dayOfWeek:i.getDay()}}else if(e.weekly){const t=e.weekly.time,n=e.weekly.day_of_week;if(!t||n==null)return Vs();const[r="",s=""]=t.split(":"),a=parseInt(r,10),i=parseInt(s,10);if(isNaN(a)||isNaN(i))return Vs();const l=(n+1)%7,c=new Date;return{kind:"WEEKLY",minute:i,hour:a,day:c.getDate(),month:c.getMonth(),year:c.getFullYear(),dayOfWeek:l}}else if(e.monthly){const t=e.monthly.time,n=e.monthly.day_of_month;if(!t||n==null)return Vs();const[r="",s=""]=t.split(":"),a=parseInt(r,10),i=parseInt(s,10);if(isNaN(a)||isNaN(i))return Vs();const l=new Date;return{kind:"MONTHLY",minute:i,hour:a,day:n,month:l.getMonth(),year:l.getFullYear(),dayOfWeek:l.getDay()}}else if(e.yearly){const t=e.yearly.time,n=e.yearly.month_of_year,r=e.yearly.day_of_month;if(!t||n==null||r==null)return Vs();const[s="",a=""]=t.split(":"),i=parseInt(s,10),l=parseInt(a,10);if(isNaN(i)||isNaN(l))return Vs();const c=new Date;return{kind:"YEARLY",minute:l,hour:i,day:r,month:n-1,year:c.getFullYear(),dayOfWeek:c.getDay()}}else if(e.weekdays){const t=e.weekdays.time;if(!t)return Vs();const[n="",r=""]=t.split(":"),s=parseInt(n,10),a=parseInt(r,10);if(isNaN(s)||isNaN(a))return Vs();const i=new Date;return{kind:"WEEKDAYS",minute:a,hour:s,day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),dayOfWeek:i.getDay()}}return Vs()}const W7=R.memo(({question:e,sendStepResult:t,isFinished:n})=>{const r="user-clarification-step",[s,a]=f.useState(n??!1),[i,l]=f.useState(""),{$t:c}=Z(),u=f.useCallback(()=>{a(!0),t({confirmed:!1,user_input:i.length>0?i:"The user chose to confirm with the information provided"},r,!1)},[i,t]),d=f.useCallback(()=>{a(!0),t({confirmed:!1},r,!1)},[t]),m=f.useCallback(p=>{da.isEnterKeyWithoutShift(p)&&(p.preventDefault(),u())},[u]);return s?o.jsx(Ws,{icon:Ha,iconClassName:"text-super",text:c({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsx(H,{variant:"raised",className:"py-sm rounded-lg border",children:o.jsxs("form",{onSubmit:u,children:[e&&o.jsxs("div",{className:"px-md pt-sm",children:[o.jsx(F,{variant:"small",children:e}),o.jsx("div",{className:"gap-sm mt-3 flex items-center",children:o.jsx("div",{className:"grow",children:o.jsx(qa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:c({defaultMessage:"Add details",id:"GTIJ9uAEMf"}),value:i,onChange:l,onKeyDown:m,minRows:3,className:"!pl-3",autoFocus:!0})})})]}),o.jsxs("div",{className:"gap-sm px-md py-sm mt-4 flex items-center",children:[o.jsx(pe,{size:"small",variant:"inverted",text:c({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit"}),o.jsx(Te,{size:"small",text:c({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:d})]})]})})});W7.displayName="UserClarificationStep";const HPe=R.memo(({step:e,action:t})=>{const{final:n,file_name:r,sheet_count:s,row_count:a}=e.content,i=!n;let l=t;return r&&n&&(l=r,s!=null?(l+=` (${s} sheets`,a!=null&&(l+=`, ${a} rows`),l+=")"):a!=null&&(l+=` (${a} rows)`)),o.jsx(pe,{text:t,icon:t_,isLoading:i,size:"tiny",pill:!0,toolTip:l,tooltipLayout:"top"})});HPe.displayName="XlsxStep";const jen=e=>e.toLowerCase().replace(/_/g," ").replace(/^\w/,t=>t.toUpperCase()),Aen={FINANCE:"FINANCE"},Ien={STOCK_PRICE_MOVEMENT:"STOCK_PRICE_MOVEMENT"},Mk=e=>{const{searchMode:t,hasAnswer:n,result:r}=ln(),{submitQuery:s}=ta(),a=t===ce.STUDIO,{$t:i}=Z(),{step:l,onStepClick:c,isFinished:u,stepDelay:d,motionProps:m,isNested:p=!1,showAllNestedSteps:h=!0,isMissionControl:g=!1}=e,[y,x]=f.useState(void 0),v=`resuming-step:${e.step.uuid??""}`,[b,_]=f.useState(()=>{try{return Oe.getItem(v)==="1"}catch{return!1}});f.useEffect(()=>{try{_(Oe.getItem(v)==="1")}catch{_(!1)}},[v]);const w=f.useCallback(async(G,J,K=!1)=>{l.uuid&&await X1({contextUUID:r?.context_uuid,stepUUID:l.uuid,result:G,reason:J}).then(te=>{if(te&&!K){Oe.setItem(v,"1"),_(!0);const re=r?{...r,status:"RESUMING"}:void 0;s({rawQuery:r?.query_str??"",existingEntryUUID:r?.backend_uuid,existingFrontendContextUUID:r?.context_uuid,frontendUUID:r?.frontend_uuid,promptSource:"user",resumingQuery:!0,resumeFromUuid:l.uuid,resumeFromPlaceholder:re,collection:null,newFrontendContextUUID:null})}})},[l.uuid,s,r,v]),C=f.useCallback(async()=>{await w({confirmed:!0},"thread-upsell-accepted",!0)},[w]),S=f.useCallback(async()=>{await w({confirmed:!1},"thread-upsell-dismissed",!0)},[w]),E=(G,J)=>{const K=Ag[G]?.message;return K?J?i(K,J):i(K):""},M=G=>{const J=[];let K=0;for(;K<G.length;){const te=G[K],re=G[K+1];te?.step_type==="GET_FREEBUSY_RESPONSE"?K+=1:te?.step_type==="GET_FREEBUSY"&&re?.step_type==="GET_FREEBUSY_RESPONSE"?(J.push({...te,get_free_busy_response_content:re.get_free_busy_response_content,originalEndIndex:K+1}),K+=2):(J.push({...te,originalEndIndex:K}),K+=1)}return J},k=G=>G.map((J,K)=>({...J,originalEndIndex:K})),N=uHt(),P=l.assets&&l.assets.length>0?o.jsx("div",{className:"gap-sm my-sm flex flex-row flex-wrap",children:l.assets.map(G=>o.jsx(LIe,{asset:G},G.uuid))}):null,L=l.step_type,O=l.content.should_show_upsell??!1,A=l.content.upsell_information,j=o.jsx(zx,{position:"router_steps",upsellInformation:A,inFlight:!u,stepUUID:l.uuid,backendUuid:A?.backend_uuid,isLastResult:!0,onAccept:C,onReject:S}),I=(()=>{switch(L){case"SEARCH_WEB":return{title:E("search"),content:o.jsx(Ia,{queries:l.content.queries.map(G=>G.query),stepDelay:a?2:void 0,isFinished:u})};case"SEARCH_RESULTS":{let J=function(te){return te.length===0?"reviewing_sources":te.every(re=>re.is_memory)?G.length===1?"reviewing_memory":"reviewing_memories":te.every(re=>re.is_conversation_history)?"reviewing_conversation_history":G.length===1?"reviewing_source":"reviewing_sources"};const G=l.content.web_results;return{title:E(J(G)),count:G.length>1?y:void 0,content:G.length===0?o.jsx(Ws,{icon:lq,text:i({defaultMessage:"No sources found",id:"yWSiuEkfbY"})}):Rk(G)?o.jsx(rg,{result:G[0],showName:!0,onClick:c}):o.jsx(md,{onClick:c,results:G,stepDelay:a?2:void 0,isFinished:u,onCountChange:x})}}case"ENTROPY_REQUEST":return{content:o.jsx(j6e,{step:l,isFinished:u??!1,isMissionControl:g})};case"CODE":return{content:!P&&o.jsx(OIe,{action:E("working"),step:l})};case"PDF":return{content:!P&&o.jsx(MPe,{action:E("creating_pdf"),step:l})};case"DOCX":return{content:!P&&o.jsx(DIe,{action:E("creating_docx"),step:l})};case"XLSX":return{content:!P&&o.jsx(HPe,{action:E("creating_xlsx"),step:l})};case"CREATE_APP_RESULT":return{content:null};case"CREATE_CLIENT_APP":return{title:E("building_app"),content:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.caption})};case"CREATE_CHART":return{title:E("creating_chart"),content:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.caption})};case"GET_URL_CONTENT":{const G=l.content.pages;return{title:E(G.length>1?"getting_sources":"getting_source"),count:G.length>1?y:void 0,content:G.length===0?o.jsx(Ws,{icon:qDe,text:i({defaultMessage:"No content found",id:"JlMgLJz0nd"})}):o.jsx("div",{className:"flex flex-wrap gap-2",children:G.map((J,K)=>o.jsx(rg,{result:{name:"",snippet:"",is_attachment:!1,url:J.url},showName:!1,onClick:c},J.url||K))})}}case"CLARIFYING_QUESTIONS_OUTPUT":return l.content.clarification?{content:o.jsx(Q6e,{step:l})}:null;case"THOUGHT":return{title:E("thinking"),content:o.jsx(H,{variant:"subtler",className:"py-xs inline-block rounded-lg px-2.5",children:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.thought})})};case"URL_NAVIGATE":return{title:E("navigate"),content:o.jsx(Ia,{queries:l.content.urls})};case"BROWSER_OPEN_TAB_RESULTS":return{title:E("opening_tab"),content:o.jsx(rg,{result:{name:l.content.tab.title,url:l.content.tab.url,snippet:"",is_attachment:!1,is_client_context:!0,tab_id:l.content.tab.id},showName:!0,onClick:c})};case"BROWSER_CLOSE_TABS_RESULTS":{const G=l.content.tabs;return{title:E("closing_tabs"),content:G.length===0?o.jsx(Ia,{queries:[N.failedClosedTabs],icon:uq}):o.jsx(md,{results:G.map(J=>({name:J.title,url:J.url,snippet:"",is_attachment:!1})),textClassName:J=>{const K="url"in J&&J.url,te="name"in J&&J.name;return K||te?"opacity-65 line-through":""}})}}case"READ_GMAIL":case"READ_EMAIL":{const G=l.content.queries?.length?l.content.queries:[N.allEmail];return{title:E("searching_gmail"),content:o.jsx(Ia,{queries:G,icon:Sv})}}case"READ_GMAIL_RESPONSE":case"READ_EMAIL_RESPONSE":{const G=l.content;return{title:G?.authenticated?G?.count===0?N.emailsFound(0):E("reading_emails"):N.gmailNotAuthenticated,content:G.authenticated&&G.count>0&&G.results?o.jsx(md,{results:G.results,resultType:"email",onClick:c,stepDelay:d,isFinished:u,maxHeight:400}):null}}case"READ_CALENDAR":return{title:E("searching_calendar"),content:o.jsx(Ia,{queries:l.content.queries??[],icon:Sv})};case"READ_CALENDAR_RESPONSE":return{title:l.content.authenticated?l.content.count===0?N.eventsFound(0):E("reading_events"):N.googleCalendarNotAuthenticated,content:l.content.authenticated&&(l.content.count??0)>0&&l.content.results?o.jsx(md,{results:l.content.results,resultType:"calendar",onClick:c,stepDelay:d,isFinished:u,maxHeight:400}):null};case"UPDATE_CALENDAR":return{title:E("scheduling"),isFinished:!0,content:l.content?.clarification?o.jsx(W7,{isFinished:b,question:l.content.clarification,sendStepResult:w}):l.content?.operations?o.jsx(K6e,{isFinished:b,calendarOperations:l.content.operations,sendStepResult:w}):null};case"UPDATE_CALENDAR_RESPONSE":return{title:E("scheduling"),isFinished:!0,content:(()=>{const G=l.content?.operations;return!G||G.length===0?o.jsx(Ws,{icon:Ha,iconClassName:"text-super",text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsx(Y6e,{operations:G})})()};case"CREATE_TASKS":{const J=l.content?.task_action;if(!J)return null;if(J.event_group===Aen.FINANCE&&J.event_type&&J.event_entity){const K={ticker_symbol:J.event_entity,target_price:J.target_price,current_price:J.current_price,...J.event_type===Ien.STOCK_PRICE_MOVEMENT&&{movement_percent:o2(J.upper_bound)?J.upper_bound:o2(J.lower_bound)?Math.abs(J.lower_bound):void 0,positive_direction:o2(J.upper_bound),negative_direction:o2(J.lower_bound)}};return{title:i({defaultMessage:"Setting up price alert",id:"JGiR4/dpaV"}),isFinished:!0,content:o.jsx(PPe,{taskAction:J,priceAlertData:K,stepUUID:l.uuid??"",isFinished:u||b,sendStepResult:w})}}return{title:E("scheduling"),isFinished:!0,content:o.jsx(WPe,{taskAction:J,stepUUID:l.uuid??"",isFinished:u||b,sendStepResult:w})}}case"CREATE_TASKS_RESPONSE":return{title:E("scheduled"),isFinished:!0,content:o.jsx(Ws,{icon:Ha,iconClassName:"text-super",text:"Done"})};case"SEND_GMAIL":case"SEND_EMAIL":return n?null:{title:E("emailing"),content:l.content?.clarification?o.jsx(W7,{isFinished:b,question:l.content.clarification,sendStepResult:w}):l.content?o.jsx($Pe,{isFinished:b,emailAction:l.content.action,sendStepResult:w}):null};case"SEND_GMAIL_RESPONSE":case"SEND_EMAIL_RESPONSE":return{title:E("emailing"),isFinished:!0,content:o.jsx(FIe,{status:l.content?.status})};case"EMAIL_CALENDAR_AGENT_RESPONSE":case"GMAIL_GCAL_AGENT_RESPONSE":return{title:l.content.authenticated?void 0:N.gmailNotAuthenticated,content:null};case"EMAIL_CALENDAR_AGENT":case"GMAIL_GCAL_AGENT":{const G=M(l.content.steps??[]),J=h?G:G.slice(-1);return{content:o.jsx(o.Fragment,{children:J.map(K=>{const te={step_type:K.step_type||"EMAIL_CALENDAR_AGENT",content:K.step_type==="GET_FREEBUSY"&&K.get_free_busy_response_content?{...K.get_free_busy_content,...K.get_free_busy_response_content}:K.get_free_busy_content??K.get_user_info_content??K.get_user_info_response_content??K.send_email_content??K.update_calendar_content??K.update_calendar_response_content??K.send_email_response_content??K.get_free_busy_response_content??K.read_calendar_content??K.read_calendar_response_content??K.read_email_content??K.read_email_response_content??{},uuid:K.uuid||"",assets:void 0},re=h?u||K.originalEndIndex<(l.content.steps?.length??0)-1:u;return o.jsx(Mk,{step:te,isFinished:re,isNested:p,onStepClick:c,showAllNestedSteps:h},K.uuid)})}),skipWrapper:!0}}case"FLIGHTS_SEARCH":{const G=l.content;if(!G)return null;const J=G.found_flights,K=J&&J.length>0,te=G.submitted;return{title:E("searching_flights"),isFinished:K,content:K&&!te?o.jsx(IPe,{stepUUID:l.uuid??"",goalId:G.goal_id??"",foundFlights:G.found_flights,isSubmitted:te??!1,outboundDate:G.outbound_date,returnDate:G.return_date,flightType:G.flight_type}):null}}case"FLIGHTS_SEARCH_RESPONSE":{const{selected_flight:G,submitted:J}=l.content??{},K=E("looking_for_booking_options"),te=G?.flights?.map(be=>be.airline).filter(Boolean).join(", ")||"",re=G?.flights?.[0]?.departure_airport?.id||"",se=G?.flights?.[G.flights.length-1]?.arrival_airport?.id||"",me=G?.total_duration||0,oe=Math.floor(me/60),ge=me%60,xe=oe>0?`${oe}h ${ge}min`:`${ge}min`;let ye=re;if(G?.flights&&G.flights.length>1)for(let be=1;be<G.flights.length;be++){const Ne=G.flights[be]?.departure_airport?.id;Ne&&Ne!==ye.split(" -> ").pop()&&(ye+=` -> ${Ne}`)}ye+=` -> ${se}`;const _e=`${te} (${ye}): ${xe}`;return J&&G?{title:K,isFinished:u||n,content:o.jsx(Ia,{queries:[_e],icon:GDe})}:null}case"FLIGHTS_BOOKING":{const G=l.content;if(!G)return null;const J=G.found_booking_options,K=J&&J.length>0,te=G.submitted;return{title:E("reviewing_booking_options"),isFinished:K,content:K?o.jsx(jPe,{stepUUID:l.uuid??"",goalId:G.goal_id??"",foundBookingOptions:G.found_booking_options,isSubmitted:te??!1}):null}}case"FLIGHTS_BOOKING_RESPONSE":{const{selected_booking_options:G,submitted:J}=l.content??{},K=E("redirecting_to_booking");return J&&G?{title:K,isFinished:u||n,content:(()=>{const te=re=>{const se=[];return re.together?.book_with?se.push(re.together.book_with):(re.departing?.book_with&&se.push(`Departing: ${re.departing.book_with}`),re.returning?.book_with&&se.push(`Returning: ${re.returning.book_with}`)),se.join(" | ")||"Booking options"};return o.jsx(Ia,{queries:[te(G)],icon:zDe})})()}:null}case"FLIGHTS_AGENT":{const G=k(l.content.steps??[]),J=h?G:G.slice(-1);return{content:o.jsx(o.Fragment,{children:J.map(K=>{const te={step_type:K.step_type||"FLIGHTS_AGENT",content:K.browser_open_tab_content??K.browser_open_tab_results_content??K.flights_search_content??K.flights_booking_content??K.flights_search_response_content??K.flights_booking_response_content??{},uuid:K.uuid||"",assets:void 0},re=h?u||K.originalEndIndex<(l.content.steps?.length??0)-1:u;return o.jsx(Mk,{step:te,isFinished:re,isNested:p,onStepClick:c,showAllNestedSteps:h},K.uuid)})}),skipWrapper:!0}}case"TERMINATE":return{title:E("conclusion"),content:l.content.reason?o.jsx(H,{variant:"subtler",className:"py-xs inline-block rounded-lg px-2.5",children:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.reason})}):null};case"GENERATE_IMAGE":return{title:E("generating_images"),content:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.prompt})};case"GENERATE_IMAGE_RESULTS":return{title:E("presenting_images"),content:!P&&o.jsx(UIe,{urls:l.content.image_results.map(G=>G.url)})};case"GENERATE_VIDEO":return{title:E("generating_images"),content:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.prompt})};case"GENERATE_VIDEO_RESULTS":return{title:E("presenting_images"),content:!P&&o.jsx(VIe,{urls:l.content.video_results.map(G=>G.url??""),onClick:c})};case"BROWSER_GROUP_TABS":return{title:E("grouping_tabs"),content:l.content.payloads?.length>0?o.jsx("div",{className:"gap-sm flex flex-row flex-wrap",children:l.content.payloads.map((G,J)=>o.jsx(j7,{color:G.color,title:G.title??""},J))}):null};case"BROWSER_GROUP_TABS_RESULTS":return{content:l.content.success?null:o.jsx(Ws,{icon:uq,text:N.couldNotFinish})};case"BROWSER_UNGROUP":return{title:E("ungrouping_tabs"),content:l.content.payload?.groups_metadata&&l.content.payload.groups_metadata.length>0?(()=>{const G=l.content.payload.groups_metadata.map((J,K)=>({name:J.title||`Group ${K+1}`,url:"",source:J.title||`Group ${K+1}`}));return G.length===1?o.jsx(Ia,{queries:l.content.payload.groups_metadata.map(J=>J.title||"Unnamed Group"),initialDisplayCount:3,icon:cq}):o.jsx(md,{results:G,icon:cq,textClassName:"opacity-65 line-through decoration-subtle"})})():null};case"BROWSER_SEARCH_TAB_GROUPS":return{title:E("searching_tab_groups"),content:o.jsx(Ia,{queries:l.content.payload?.queries?.length?l.content.payload.queries:[N.allTabGroups],icon:Sv})};case"BROWSER_SEARCH_TAB_GROUPS_RESULT":return{title:E("reading"),content:l.content.results.length>0?o.jsx("div",{className:"gap-sm flex flex-row flex-wrap",children:l.content.results.map((G,J)=>o.jsx(j7,{color:G.color,title:G.title??""},J))}):null};case"GET_USER_INFO":{const G=l.content;if(!G||!G.names)return null;const J=G.found_users,K=J&&J.length>0,te=G.submitted;return{title:K&&!te?void 0:E("getting_user_info"),content:K&&!te?o.jsx(NPe,{goalId:G.goal_id??"",foundUsers:G.found_users,names:G.names,sendStepResult:w}):o.jsx(Ia,{queries:G.names,icon:y1})}}case"GET_USER_INFO_RESPONSE":{const{submitted:G,selected_users:J}=l.content??{},K=J?.some(te=>te.selected===!0);return G&&J?{title:J?.some(te=>te.selected===!0)?E("selecting_contacts"):E("getting_contact_details"),content:J.length===0?o.jsx(Ia,{queries:[E("no_contacts_found")],icon:HDe}):J.length===1?o.jsx(Ia,{queries:J.map(te=>`${te.display_name||""} ${te.email_address?`(${te.email_address})`:""}`.trim()),icon:rm}):o.jsx(md,{results:J.map(te=>({...te,url:te.email_address?`mailto:${te.email_address}`:void 0})),icon:rm,resultType:"userinfo",textClassName:te=>{const re="email_address"in te?te.email_address:void 0,se=J?.find(me=>me.email_address===re);return K&&se?.selected===!1?"opacity-65 line-through decoration-subtle":""}})}:null}case"GET_FREEBUSY":{const G=l.content;return{title:E("getting_freebusy"),content:(()=>{const J=G.free_busy_response?.available_periods?.length??0;let K,te;return!G.authenticated&&u?(K=N.googleCalendarNotAuthenticated,te=dC):J===0&&u?(K=N.noAvailabilityFound,te=dC):J>0&&(K=N.availableTimesFound(J),te=dq),K?o.jsx(Ws,{text:K,icon:te}):null})()}}case"GET_FREEBUSY_RESPONSE":return{title:E("getting_freebusy"),content:(()=>{const G=l.content.free_busy_response?.available_periods?.length??0;let J,K;return!l.content.authenticated&&u?(J=N.googleCalendarNotAuthenticated,K=dC):G===0&&u?(J=N.noAvailabilityFound,K=dC):G>0&&(J=N.availableTimesFound(G),K=dq),J?o.jsx(Ws,{text:J,icon:K}):null})()};case"PENDING_FILES":return{content:o.jsx(kPe,{attachments:l.content.attachments,attachmentProcessingProgress:l.content.attachmentProcessingProgress})};case"SEARCH_BROWSER":{const G=l.content.queries?.filter(K=>K!=null&&K.trim()!=="")||[],J=G.length>0?G:l.content.browser_content_sources?.map(K=>K in Ag?E(K):jen(K))||[];return{title:E("searching_browser"),content:o.jsx(Ia,{queries:J,isFinished:u})}}case"SEARCH_BROWSER_RESULTS":return{title:E("reading_browser"),count:y,content:(()=>{const{open_tabs:G,recently_closed_tabs:J,history:K}=l.content,te=(G?.length||0)+(J?.length||0)+(K?.length||0);if(te===0)return o.jsx(Ws,{icon:lq,text:i({defaultMessage:"No sources found",id:"yWSiuEkfbY"})});if(te===1){const se=G?.[0]||J?.[0]||K?.[0];return o.jsx(rg,{result:{...se},showName:!0,onClick:c})}const re=[];return G&&G.length>0&&re.push(...G.map(se=>({...se,category:"open_tab"}))),J&&J.length>0&&re.push(...J.map(se=>({...se,category:"closed_tab"}))),K&&K.length>0&&re.push(...K.map(se=>({...se,category:"history"}))),o.jsx(md,{onClick:c,results:re,groupBy:"category",stepDelay:a?2:void 0,isFinished:u,onCountChange:x})})()};case"MCP_TOOL_INPUT":{const G=l.content;if("authenticated"in G&&(G.authenticated===void 0||G.authenticated===null))return null;let J=i({id:"bTDpQ+Tk24",defaultMessage:"external service"});return G.mcp_server_type==="MCP_SERVER_TYPE_LOCAL"?J=i({id:"0asQ8snMnq",defaultMessage:"local MCP"}):G?.app&&(J=G.app),{title:E("MCP_TOOL",{appName:J}),content:o.jsx(CPe,{step:l,isFinished:u})}}case"MCP_TOOL_OUTPUT":{const G=l.content;return{title:E("MCP_TOOL"),content:o.jsx(EPe,{content:G.content||"",shouldRerunQuery:!!G.should_rerun_query})}}case"BLOCKING_CLARIFYING_QUESTIONS":{const G=l.content.clarifying_questions||[],J=l.content.clarifying_answers||[];return{title:"Additional Information Needed",content:o.jsx(b6e,{questions:G,toolUuid:l.uuid,isFinished:u,answers:J})}}default:return null}})();if(!I)return g?o.jsx(gm,{title:E("working"),showAnimation:!0,className:"mt-sm"}):null;if(I.skipWrapper)return O&&A?o.jsxs(o.Fragment,{children:[j,I.content]}):L==="GMAIL_GCAL_AGENT"&&l.content.steps?.length===0&&g?o.jsx(gm,{title:E("working"),showAnimation:!0,className:"mt-sm"}):I.content;const{title:U,content:B,count:D,isFinished:W}=I,z=O&&A?!0:W??(u||b)??!1,$={key:l.uuid,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-1.5"},X={...$,...m,className:m?.className?`${$.className} ${m.className}`:$.className},{key:q,...Y}=X;return o.jsxs(ve.div,{...b?{}:Y,children:[U&&o.jsx(gm,{title:U,isFinished:z,className:"mb-two",count:D,showAnimation:b}),!U&&g&&!z&&L!=="ENTROPY_REQUEST"&&o.jsx(gm,{title:E("working"),showAnimation:!0,className:"mb-two"}),O&&A?j:B,P]},q)};Mk.displayName="StepRenderer";function Ren({step:e,isFinished:t=!1}){const{$t:n}=Z();switch(e.step_type){case"INITIAL_QUERY":return o.jsx(gm,{title:n({id:"8ZN5O/Kt3k",defaultMessage:"Starting up"}),showAnimation:!0,className:"mt-sm"});default:return o.jsx(Mk,{step:e,isFinished:t,isMissionControl:!0})}}function Pen(e){return e&&typeof e=="object"&&"entryUUID"in e&&"displayModel"in e}var Oen={};const Len=({activeStreamingThreads:e,blockedThreads:t,entries:n,initiallyLoadedBlockedEntries:r,recentlyBlockedEntries:s,recentlyCompletedEntries:a,queuedThreadParams:i,selectedItemId:l,onItemSelect:c})=>{const u=Z(),{$t:d}=u,{cancelQueuedThread:m}=jN(),p=d({id:"I90sbWU03C",defaultMessage:"just now"}),[h,g]=f.useState(void 0),{taskTabs:y}=cs(),x=Jn(),{trackEvent:v}=je(),b=f.useCallback(({thread:O,taskUUID:A,threadUUID:j,threadActive:T,date:I})=>{const U=I?F_(u,I,{style:"narrow"}):p,B=y?.some(z=>z.taskUuid===A)??!1,D="context_uuid"in O?O.context_uuid:O.contextUUID||"",W="frontend_context_uuid"in O?O.frontend_context_uuid||"":"frontendContextUUID"in O&&O.frontendContextUUID||"";return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-quiet text-xs",children:U}),o.jsxs("div",{children:[o.jsx(Te,{text:"Open full thread",icon:_1,size:"small",onClick:z=>{z.stopPropagation(),window.open(`/search/${O.slug}`,"_blank"),v("mission control open full thread clicked",{contextUUID:D,frontendContextUUID:W})}}),A&&j&&o.jsx(Te,{text:"Switch to tab",icon:_1,size:"small",variant:"super",disabled:!B&&!T,toolTip:!B&&!T?"Tab no longer available":void 0,onClick:async z=>{z.stopPropagation(),Oen.NEXT_PUBLIC_IS_SIDECAR_BUILD?await x.makeTaskVisible(A):await x.moveThreadToSidecar({activeTaskUuid:A,isMissionControl:!0,entryId:j,reason:"move-browser-step"}),v("mission control switch to tab clicked",{contextUUID:D,frontendContextUUID:W})}})]})]})},[u,p,y,x,v]),_=f.useCallback(({stepRenderer:O,thread:A,taskUUID:j,date:T})=>{const I="contextUUID"in A?A.contextUUID:"context_uuid"in A?A.context_uuid:void 0;return o.jsxs("div",{className:"space-y-md",children:[O,o.jsx(b,{thread:A,threadUUID:I,taskUUID:j,threadActive:!0,date:T})]})},[b]),{data:w=[],invalidateThreadsQuery:C}=dz("mission_control_active",void 0,void 0,!1,void 0),S=w.filter(O=>O.is_mission_control||O.is_personal_intent),E=f.useCallback(O=>{if(O)return!O.endsWith("Z")&&!O.includes("+")?O+"Z":O},[]),M=O=>{const A=mv(O?.blocks||[]),j=A.length>0?A[A.length-1]:null;let T=!1;return j?.step_type==="ENTROPY_REQUEST"&&j.content.tasks.forEach(I=>{I.agent_messages.length>0&&(T=I.agent_messages[I.agent_messages.length-1]?.form!==void 0)}),T},k=f.useCallback(async(O,A,j)=>{if(O===j)return;const I=await Q1({slugOrUUID:A,reason:"mission-control-completed-thread-entry"});if(!I?.entries||I.entries.length==0)return;const U=I.entries[I.entries.length-1];if(!U)return;const D=(U&&U.blocks?mv(U.blocks):[]).filter($=>$.step_type==="ENTROPY_REQUEST");if(D.length==0)return;const W=D[D.length-1]?.content.tasks;if(!W||W.length==0)return;const z=W[W.length-1]?.uuid;z&&g({frontendContextUUID:j,taskUUID:z})},[]),N=f.useCallback(async O=>{if(!(!O.unread||!O.context_uuid)){ne.log("Marking thread as viewed (via selection click):",{contextUUID:O.context_uuid,title:O.title,unread:O.unread});try{await pB({contextUUID:O.context_uuid,reason:"mark thread as viewed in mission control on expand"}),ne.log("Thread marked as viewed successfully (via selection click):",{contextUUID:O.context_uuid,title:O.title}),C()}catch(A){ne.error("Failed to mark thread as viewed (via selection click):",{contextUUID:O.context_uuid,title:O.title,error:A})}}},[C]),P=f.useCallback((O,A,j=!1,T)=>{const I=mv(O?.blocks||[]),U=I.length>0?I[I.length-1]:null,B=O?.status==="COMPLETED",D=Pen(A)?A.streamCreatedAt||(A.lastUpdated?A.lastUpdated:null):A.stream_created_at?A.stream_created_at:A.last_query_datetime,W=A.title||O?.query_str||"New task";if(!O)return o.jsx(vv,{title:W,state:j?"action-required":"in-progress",footer:o.jsx(_,{thread:A,date:D}),isSelected:l===T,onClick:()=>c?.(T)},T);const $=(O.blocks?mv(O.blocks):[]).filter(X=>X.step_type==="ENTROPY_REQUEST").flatMap(X=>X.content?.tasks||[]).map(X=>X.uuid).filter(X=>X)[0];return o.jsx(EH,{idx:0,result:O,inFlight:!B,isLastResult:!0,isFirstResult:!0,submitQuery:Pn,children:o.jsx(Sz,{scrollToListItem:Pn,children:o.jsx(vv,{title:W,state:j?"action-required":"in-progress",entryUUID:O?.backend_uuid,invalidateThreadsQuery:C,footer:o.jsx(_,{thread:A,date:D,taskUUID:$,stepRenderer:U&&O?o.jsx(Ren,{step:U,isFinished:B}):null}),isSelected:l===T,onClick:()=>c?.(T)})})},T)},[C,l,c,_]);return{allItems:f.useMemo(()=>{const O=[];return i.forEach((j,T)=>{const I=j.query||"New task",U=j.newFrontendContextUUID||`queued-${T}`;O.push({id:U,timestamp:void 0,item:o.jsx(vv,{title:I,state:"queued",queuedId:U,onCancelQueued:m,isSelected:l===U,onClick:()=>c?.(U)},U),type:"queued"})}),e.forEach(j=>{if(j.frontendContextUUID){const T=Object.values(n).find(U=>U.uuid===j.entryUUID),I=T?M(T):!1;O.push({id:j.id,timestamp:E(j.streamCreatedAt||j.lastUpdated),item:P(T||null,j,I,j.frontendContextUUID||""),type:"active"})}}),t.forEach(j=>{if(e.find(U=>U.contextUUID===j.context_uuid))return;const I=Object.values(n).find(U=>U.context_uuid===j.context_uuid)||r.find(U=>U.context_uuid===j.context_uuid);!I||I.status!==Xn.BLOCKED||O.push({id:j.context_uuid,timestamp:E(j.stream_created_at||j.last_query_datetime),item:P(I,j,!0,j.frontend_context_uuid||""),type:"blocked"})}),s.forEach(j=>{const{message:T}=j,I=!t.find(D=>D.context_uuid===T.context_uuid),U=!e.find(D=>D.contextUUID===T.context_uuid),B=!S.find(D=>D.context_uuid===T.context_uuid);if(I&&U&&B&&T.status===Xn.BLOCKED){const D={context_uuid:T.context_uuid,uuid:T.backend_uuid,title:T.query_str||"New task",last_query_datetime:T.updated_datetime||new Date().toISOString(),slug:T.thread_url_slug,display_model:T.display_model,stream_created_at:T.stream_created_at};O.push({id:T.context_uuid,timestamp:E(D.stream_created_at||D.last_query_datetime),item:P(T,D,!0,T.frontend_context_uuid),type:"recently_blocked"})}}),S.forEach(j=>{j.status==="PENDING"||j.status==="BLOCKED"||O.push({id:j.uuid,timestamp:E(j.last_query_datetime),item:o.jsx(vv,{title:j.title||d({id:"2hlqlNseec",defaultMessage:"Completed task"}),state:j.unread?"completed-unread":"completed-read",firstAnswer:j.first_answer,footer:o.jsx(b,{thread:j,taskUUID:h?.frontendContextUUID===j.frontend_context_uuid?h?.taskUUID:void 0,threadUUID:j.uuid,date:E(j.last_query_datetime)}),isSelected:l===j.frontend_context_uuid,onClick:async()=>{c?.(j.frontend_context_uuid||""),await Promise.all([k(l,j.uuid,j.frontend_context_uuid),N(j)])}},j.uuid),type:j.unread?"completed_unread":"completed_read"})}),a.forEach(j=>{const{message:T}=j,I=!S.find(B=>B.context_uuid===T.context_uuid),U=!e.find(B=>B.contextUUID===T.context_uuid);if(I&&U&&T.status===Xn.COMPLETED){const B={context_uuid:T.context_uuid,uuid:T.backend_uuid,title:T.query_str||"New task",last_query_datetime:T.updated_datetime||new Date().toISOString(),slug:T.thread_url_slug,display_model:T.display_model,stream_created_at:T.stream_created_at};O.push({id:T.context_uuid,timestamp:E(B.stream_created_at||B.last_query_datetime),item:P(T,B,!1,T.frontend_context_uuid),type:"completed_unread"})}}),{items:O.sort((j,T)=>j.timestamp===null&&T.timestamp===null?0:j.timestamp===null?-1:T.timestamp===null?1:new Date(T.timestamp||"").getTime()-new Date(j.timestamp||"").getTime()).slice(0,$Wt)}},[i,e,t,n,r,s,a,S,E,P,m,d,l,c,b,N,k,h]).items,invalidateThreadsQuery:C}},Den=()=>{const e=BU();return{reconnectInProgressStreams:f.useCallback(async(n,r)=>{if(!n||n.length===0)return;const s=n.filter(i=>i.status==="PENDING"),a=[];for(const i of s)try{const l=await Q1({slugOrUUID:i.uuid,reason:"mission-control-get-thread-details"});if(l?.entries?.length&&l.entries.length>0){const c=l.entries[l.entries.length-1];c?.reconnectable&&(e(c.backend_uuid),a.push(c))}}catch(l){ne.debug(l)}r(a)},[e])}},Fen=5e3,zPe=({needsAttentionFilter:e=!1,onNeedsAttentionCountChange:t})=>{const n=Jn(),[r,s]=f.useState(null),a=f.useCallback(D=>{s(W=>W===D?null:D)},[]),i=f.useCallback(async()=>{n.getTaskTabs()},[n]),l=f.useCallback(D=>{n.sendMissionControlStatus({num_threads_active:D.numThreadsActive,num_threads_blocked:D.numThreadsBlocked,num_threads_for_review:D.numThreadsForReview})},[n]),c=Wge(),{activeStreamingThreads:u,entries:d,refreshState:m,recentlyBlockedEntries:p,recentlyCompletedEntries:h,handleStreamCompletion:g,queuedThreadParams:y}=jN(),{data:x=[],isLoading:v,invalidateThreadsQuery:b}=dz(VWt,void 0,void 0,!1,void 0),_=f.useMemo(()=>x.filter(D=>D.is_mission_control||D.is_personal_intent),[x]),w=f.useMemo(()=>_.filter(D=>D.status===Xn.BLOCKED),[_]),C=f.useMemo(()=>_?.filter(D=>D.unread&&D.status!=="PENDING"&&D.status!=="BLOCKED"),[_]),{reconnectInProgressStreams:S}=Den(),E=BU(),M=f.useRef(!1),[k,N]=f.useState([]),P=f.useRef(null),{sendNotification:L}=NV({windowsAppOnly:!1}),{$t:O}=Z();f.useEffect(()=>mKe({callback:async W=>{for(const z of W)if(!z.cometIsMissionControl&&z.isPersonalIntent){const $=await Q1({slugOrUUID:z.entryUUID,reason:"mission-control-get-thread-details"});if($?.entries?.length&&$.entries.length>0){const X=$.entries[$.entries.length-1];X?.reconnectable&&(E(z.entryUUID),c([X]))}}},reason:"stream thread creation events"}),[E,c]),_.length>0&&!M.current&&(M.current=!0,S(_,c).then(()=>{m()}),(async()=>(await Promise.all(w.map(async z=>{try{const $=await Q1({slugOrUUID:z.uuid,reason:"mission-control-get-blocked-thread-details"});return $?.entries?.length&&$.entries.length>0?$?.entries[$.entries.length-1]:void 0}catch($){ne.debug(`Failed to fetch blocked thread details for ${z.uuid}:`,$);return}}))).filter(z=>z!==void 0))().then(W=>N(W))),f.useLayoutEffect(()=>hs.on("completed",({message:W})=>{document.visibilityState!=="visible"&&L({title:"Your background task is completed",body:W?.thread_title,onClick:async()=>{window.focus(),W?.frontend_context_uuid&&(s(W.frontend_context_uuid),await pB({contextUUID:W.context_uuid,reason:"mark thread as viewed in mission control on notification click"}),b())}}),W&&g(W)}),[g,L,b]),f.useEffect(()=>{const D=()=>{document.hidden||i()};return document.addEventListener("visibilitychange",D),()=>{document.removeEventListener("visibilitychange",D)}},[i]),f.useEffect(()=>(P.current&&clearInterval(P.current),i(),P.current=setInterval(i,1e4),()=>{P.current&&(clearInterval(P.current),P.current=null)}),[i]),f.useEffect(()=>{v||l({numThreadsActive:u.length,numThreadsBlocked:w.length,numThreadsForReview:C.length})},[l,v,u.length,w.length,C.length]);const[A,j]=f.useState(!1);f.useEffect(()=>{const D=setTimeout(()=>{j(!0)},Fen);return()=>clearTimeout(D)},[]);const T=f.useMemo(()=>{const D=_.filter(z=>z.status===Xn.PENDING);return A?!1:D.length>0&&u.length===0||u.filter(z=>!z.frontendContextUUID?.length).length>0},[_,u,A]),{allItems:I}=Len({activeStreamingThreads:u,blockedThreads:w,entries:d,initiallyLoadedBlockedEntries:k,recentlyBlockedEntries:p,recentlyCompletedEntries:h,queuedThreadParams:y,selectedItemId:r,onItemSelect:a}),U=f.useMemo(()=>I.filter(D=>D.type==="blocked"||D.type==="recently_blocked"||D.type==="completed_unread"),[I]),B=e&&U.length>0?U:I;return f.useEffect(()=>{t?.(U.length)},[U.length,t]),o.jsx(bc,{children:o.jsxs("div",{className:"px-md md:px-lg py-ml space-y-ml",children:[o.jsx(c6e,{placeholder:O({defaultMessage:"Ask anything",id:"AUouhaZgFv"}),suggestions:I.length===0?[]:l6e}),(A||!v&&!T)&&o.jsx(d6e,{items:B}),!A&&(v||T)&&o.jsx("div",{className:"py-lg text-center",children:o.jsx(F,{variant:"small",color:"light",children:"Loading tasks..."})}),o.jsx("div",{className:"py-md flex w-full items-center justify-center",children:o.jsx(pe,{variant:"border",size:"small",text:"View past threads in Library",extraCSS:"!bg-transparent",href:"/library"})})]})})};zPe.displayName="MissionControlMain";const GPe=R.memo(()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(0);return o.jsx("div",{className:"py-lg min-h-0 overflow-auto",children:o.jsxs("div",{className:"m-auto max-w-screen-md",children:[o.jsx(o6e,{needsAttentionFilter:e,onNeedsAttentionFilterChange:t,needsAttentionCount:n}),o.jsx(zPe,{needsAttentionFilter:e,onNeedsAttentionCountChange:r})]})})});GPe.displayName="MissionControlPage";const qPe=R.memo(()=>o.jsx(Cit,{children:o.jsx(BWt,{children:o.jsx(GPe,{})})}));qPe.displayName="MissionControlPageComponent";const Uen=(e,t,n)=>{const r=f.useRef(!1),{submitQuery:s}=ta(),a=_t(),i=X0e(),{env:{isLocalhost:l}}=Lt();f.useLayoutEffect(()=>{l||(r.current=!1)},[t,l]),f.useLayoutEffect(()=>{const u=new URL(window.location.href).searchParams,d=u.get("copilot"),m=u.get("pro"),p=u.get("q"),h=u.get("utm_source"),g=u.get("in_page"),y=u.get("attachments"),x=u.get("tabs"),v=u.get("nav_suggestions"),b=u.get("sources"),_=u.get("pc"),w=u.get("pt");_&&Jet(_),w&&stt(w);const C=u.get("qabi")??void 0,S=y?.replace(/[[\]]/g,"").split(","),E=u.get("newFrontendContextUUID"),M=[];if(x)try{const k=JSON.parse(x);if(Array.isArray(k))for(const N of k)M.push({type:"tab",id:N,url:""})}catch(k){ne.error("Failed to parse tabsParam:",k)}if(e&&p&&!E&&!r.current){const k=Array.isArray(p)?p[0]:p,N=u.get("source");if(k==="pending")return;s({rawQuery:k,copilotOverride:d==="true"||m==="true"||B0e(h??void 0),collection:null,newFrontendContextUUID:Ir(),frontendUUID:t,attachments:S,inPage:g??void 0,promptSource:N==="homepage_widget"?"homepage_widget":"user",querySource:N==="homepage_widget"?"homepage_widget":"default_search",utmSource:h??void 0,quickActionButtonId:C,isNavSuggestionsDisabled:v==="false",modelPreferenceOverride:de.DEFAULT,shouldRedirectToBackendUUID:!1,mentions:M,sourcesOverride:b?dgt(b?.split(",")):void 0,shouldUsePageStartTime:!0,onThreadSlugReceived:P=>{a.replace(`/search/${P}`,"Omni search query")}}),r.current=!0,rLe()}},[e,s,t,i,a,n])},KPe=R.memo(({children:e})=>{const{results:t}=Ht(),n=f.useMemo(()=>{const r=[];return t.map(s=>{s.widget_data?.map(a=>{k6t(a)&&r.push(a)})}),r},[t]);return o.jsx(o3e,{entities:n,children:e})});KPe.displayName="ScrollToWidgetWrapper";const Ben=we(async()=>{const{SidePDFViewer:e}=await Q(async()=>{const{SidePDFViewer:t}=await import("./SidePDFViewer-CWh5C5zO.js");return{SidePDFViewer:t}},__vite__mapDeps([436,3,1,66,4,6,5]));return{default:e}}),Ven=Yt("FileViewerContext",{openFile:()=>{},closeViewer:()=>{},doViewerAction:()=>{},isViewerOpen:!1,setViewerDispatch:()=>{}}),YPe=R.memo(({children:e})=>{const[t,n]=f.useState(),[r,s]=f.useState(),a=f.useRef(void 0),i=f.useCallback(p=>{n(p)},[n]),l=f.useCallback(()=>{n(void 0),s(void 0),a.current=void 0},[n,s]),c=f.useRef([]),u=f.useCallback(p=>{a.current?a.current(p):c.current.push(p)},[]),d=f.useCallback(p=>{s(()=>p),a.current=p,c.current.length>0&&p&&(c.current.forEach(h=>p(h)),c.current=[])},[s]),m=f.useMemo(()=>({openFile:i,closeViewer:l,doViewerAction:u,isViewerOpen:!!r,setViewerDispatch:d}),[i,l,u,r,d]);return o.jsxs(Ven.Provider,{value:m,children:[e,t&&o.jsx(Ben,{file:t})]})});YPe.displayName="FileViewerStateProvider";const $en=(e,t)=>{const{value:n,loading:r}=Dt({flag:"enable-comet-clarifying-commands",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Wen=(e,t,n)=>{const r=Ake(),{variation:s}=$en(!1),{addClarification:a}=mH(),{trackEventOnce:i}=je(),l=n?.length??0,c=n?.filter(g=>g.markdown_block).length??0,u=f.useMemo(()=>{if(!n)return!1;const g=n.find(v=>v.intended_usage==="pro_search_steps");if(!g?.plan_block?.steps)return!1;const y=g.plan_block.steps;return y[y.length-1]?.step_type==="ENTROPY_REQUEST"},[n]),d=f.useMemo(()=>u?s:r?Yr(t?.display_model)===ce.RESEARCH||Yr(t?.display_model)===ce.STUDIO:!1,[r,u,s,t?.display_model]),m=f.useMemo(()=>d&&!t?.reasoning_plan&&l>0&&c===0,[t?.reasoning_plan,l,c,d]),p=f.useMemo(()=>!m||!d||!n?null:{clarificationQuestion:"Add details or clarifications",isDefaultClarification:!0,clarificationCount:0},[m,d,n]),h=f.useCallback((g,y,x)=>{const b={uuid:Ir(),clarification_type:"FREEFORM_CLARIFICATION",freeform_clarification:{text:x.query,question:"Add details or clarifications",attachments:x.attachments??[]}};gKe({entryUUID:g,clarification:b,reason:e}),a({content:b.freeform_clarification?.text??x.query,UUID:b.uuid,entryUUID:g,question:p?.clarificationQuestion??void 0}),p&&i("clarifying query submitted",{entry_uuid:g,context_uuid:y,query:x.query,attachments:x.attachments})},[a,p,e,i]);return{shouldAcceptClarification:m,handleSubmitClarification:h,clarificationData:p}},Hen=({scrollbarSize:e})=>{const[t,n]=f.useState({height:void 0,width:void 0}),r=f.useRef(null);return f.useEffect(()=>{const s=()=>(r.current==null&&(r.current=document.createElement("div"),r.current.classList.add("scrollbar-thin"),r.current.style.width="99px",r.current.style.height="99px",r.current.style.overflow="scroll",r.current.style.position="absolute",r.current.style.top="-9999px",r.current.setAttribute("aria-hidden","true"),r.current.setAttribute("role","presentation")),r.current),a=()=>{const{offsetHeight:c,clientHeight:u,offsetWidth:d,clientWidth:m}=s(),p=c-u,h=d-m;n(g=>{const{height:y,width:x}=g;return y!==p||x!==h?{height:p,width:h}:g})},i=Js(a,100);window.addEventListener("resize",i),document.body.appendChild(s()),a();const l=s();return()=>{i.cancel(),window.removeEventListener("resize",i),document.body.removeChild(l)}},[e]),t},zen=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),{scrollContainerRef:s}=Za(),{scrollToListItem:a}=RN(),{resultsLength:i}=Ht(),l=f.useRef(!1),c=f.useCallback(()=>{a(i-1)},[a,i]),u=f.useCallback(()=>{if(!s.current)return;const d=s.current,m=d.scrollHeight>d.clientHeight,p=AM(d),h=i>1;p?l.current=!0:l.current&&(r(!1),l.current=!1),t(m&&!p&&h)},[s,i]);return f.useEffect(()=>{const d=s.current;if(!d)return;const m=Js(u,100);u();const p=setTimeout(u,200);return d.addEventListener("scroll",m),window.addEventListener("resize",m),()=>{d.removeEventListener("scroll",m),window.removeEventListener("resize",m),m.cancel(),clearTimeout(p)}},[s,u]),f.useEffect(()=>{if(i<=1)return;u();const d=setTimeout(u,300);return r(!1),l.current=!1,()=>clearTimeout(d)},[i,u]),f.useMemo(()=>({showScrollButton:e,hasScrolled:n,setHasScrolled:r,scrollToLatestItem:c}),[n,c,e])},Gen=90,QPe=R.memo(({submitWillFork:e})=>{const{$t:t}=Z(),n=_t(),[r,s]=f.useState(!1),{resultsLength:a}=Ht(),{isMobileStyle:i}=Ce(),{shouldShowLossAversionModal:l,handleOpenLossAversion:c}=vx(),u=f.useCallback(()=>{n.push("/")},[n]),d=f.useCallback(h=>{h.preventDefault(),l?c({args:{callback:u,origin:De.NEW_THREAD_BUTTON}}):u()},[l,c,u]),m=f.useCallback(()=>{s(!0)},[]),p=f.useMemo(()=>a>=Gen&&!r&&!e,[a,r,e]);return o.jsx(Je,{children:p&&o.jsxs(ve.div,{className:"bg-subtler gap-sm py-sm relative z-0 mx-4 flex items-center justify-between rounded-t-lg px-3 shadow-md",role:"alert",initial:{y:"110%"},animate:{y:0},exit:{y:"110%"},transition:{duration:.4,ease:[.16,1,.3,1]},children:[o.jsxs(F,{color:"light",className:"flex items-center gap-2",children:[o.jsx(le,{icon:cf,className:"text-caution shrink-0"}),o.jsx("span",{className:"font-sans text-xs",children:i?o.jsx(he,{defaultMessage:"Thread too long. Start new one.",id:"wzstV6j0EL"}):o.jsx(he,{defaultMessage:"Thread is getting long. Start a new one for better answers.",id:"X7d6hUix4z"})})]}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(Te,{variant:"primary",size:"tiny",onClick:d,text:t({defaultMessage:"Start new thread",id:"jsMJO4IUTY"})}),o.jsx(Te,{size:"tiny",onClick:m,pill:!0,icon:It})]})]},"thread-capacity-warning")})});QPe.displayName="ThreadCapacityWarning";const XPe=R.memo(({showStopButton:e,onStopButtonClick:t,clarificationData:n,upsellInformation:r,idx:s,inFlightEntryUUID:a,inFlight:i,isLastResult:l,...c})=>{const{currentOpenedModal:u}=wt(),{isMobileUserAgent:d}=Ce(),m=!!n?.clarificationQuestion,[p,h]=f.useState(a);return f.useEffect(()=>{a&&h(a)},[a]),o.jsx("div",{className:"w-full",children:o.jsxs(bc,{children:[o.jsx(zx,{position:"input",idx:s,upsellInformation:r,inFlight:i,isLastResult:l,backendUuid:p,animateExpand:!1}),o.jsx(Cw,{hasShadow:!0,isHighlighted:m,showFileUpload:!0,initializeAttachmentsFromLastResult:!0,autofocus:u===null&&!d,querySource:c.submitWillFork?"fork":"followup",showStopButton:e,onStopButtonClick:t,initialLayout:d?"compact":"expanded",minRows:1,className:"bg-base shadow-[0_1px_8px_2px_oklch(var(--foreground-color)/0.1),0_36px_16px_36px_oklch(var(--background-base-color))] dark:shadow-[0_4px_12px_rgba(0,0,0,0.12),0_32px_16px_36px_oklch(var(--dark-background-base-color))]",...c})]})})});XPe.displayName="ThreadInput";var Sce={};const ZPe=R.memo(({ref:e})=>{const t="thread-floating-footer",{$t:n}=Z(),r=ki(),a=Ut()?.get("q"),i=lt(),{inFlightEntry:{backend_uuid:l,blocks:c,context_uuid:u}={},inFlight:d,lastResult:m,resultsLength:p,firstResult:{frontend_context_uuid:h,collection_info:g,parent_info:y}={}}=Ht(),x=c?.length??0,v=kf(),b=h,{activeMode:_}=Kw(),{width:w}=Hen({scrollbarSize:"thin"}),C=!!Sce.NEXT_PUBLIC_IS_SIDECAR_BUILD,{mentionTypeaheadOptions:S,onTriggerTypeahead:E}=xT({reason:t,variants:["tab","shortcut"]}),{submitQuery:M}=ta(),{specialCapabilities:k}=ls(),{showScrollButton:N,hasScrolled:P,setHasScrolled:L,scrollToLatestItem:O}=zen(),{isMobileUserAgent:A}=Ce(),{shouldAcceptClarification:j,handleSubmitClarification:T,clarificationData:I}=Wen(t,m,c),U=f.useMemo(()=>{try{return d&&x>0}catch(K){throw ne.error("Unable to parse non-Pro search inFlightEntry.",K),K}},[d,x]),B=f.useMemo(()=>m?.upsell_information,[m?.upsell_information]),D=f.useCallback(K=>{const te=v,re=Ei();l&&j&&(T(l,u,K),Y.setUserInput("")),!d&&M({fork:te,rawQuery:K.query,copilotOverride:i||k.unlimitedProSearch?void 0:!1,attachments:K.attachments,collection:g??null,newFrontendContextUUID:te?re:null,existingFrontendContextUUID:te?void 0:b,promptSource:"user",querySource:"followup",timeFromFirstType:K.timeFromFirstType,shouldRedirectToBackendUUID:te,...K.side_by_side_metadata&&{side_by_side_metadata:K.side_by_side_metadata},mentions:K.mentions})},[v,l,j,d,M,i,g,b,y]),W=q_e({handleSubmitQuery:D,isHomepage:!1,contextUuid:b||"",disableSideBySide:!!y}),z=f.useRef(!1),$=f.useCallback(K=>{z.current||(z.current=!0,setTimeout(()=>z.current=!1,zV),W(K))},[W]);f.useEffect(()=>{j&&(z.current=!1)},[j]);const[X,q,Y]=GV({onSubmit:$}),G=f.useCallback(()=>{if(l){const K=r.getState().entries,re=K[l]?.side_by_side_metadata?.sibling_uuid;re?Object.values(K).forEach(se=>{se.side_by_side_metadata?.sibling_uuid===re&&se.status==="PENDING"&&se.backend_uuid&&Au({entryUUID:se.backend_uuid,reason:t})}):Au({entryUUID:l,reason:t})}},[l,r]);f.useEffect(()=>{a!==null&&a!==""&&Y.setUserInput("")},[a]);const J=f.useCallback(()=>{O(),L(!0)},[O,L]);return o.jsx(H,{className:V("erp-sidecar:fixed erp-sidecar:w-full bottom-safeAreaInsetBottom p-md pointer-events-none absolute z-10"),style:C?void 0:{width:`calc(100% - ${w??0}px)`},ref:e,children:o.jsx("div",{className:"max-w-threadContentWidth mx-auto",children:o.jsx("div",{className:"pointer-events-auto",children:QWt(_)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"pointer-events-none h-0",children:o.jsx(Je,{initial:!1,children:N&&!P&&o.jsx(ve.div,{className:"flex justify-center",layout:"position",initial:{opacity:0,y:"0%"},animate:{opacity:1,y:"-100%"},exit:{opacity:0,y:"0%"},transition:{opacity:{duration:.2,ease:"easeInOut"},y:{duration:.2,ease:"easeInOut"}},children:o.jsx(pe,{size:"small",variant:"border",icon:cde,layout:"center",pill:!0,onClick:J,toolTip:n({defaultMessage:"Scroll to latest",id:"E6r0bc1I6z"}),extraCSS:"!bg-base shadow-subtle mb-2 pointer-events-auto"})},"scroll-button")})}),o.jsx(QPe,{submitWillFork:v}),o.jsx("div",{children:f.createElement(XPe,{...Y,key:"ask-input",value:X,json:q,isFollowUp:!0,disableSubmission:d&&!j,placeholder:n(j?{defaultMessage:"Add details or clarifications...",id:"RkaMsxpXoz"}:{defaultMessage:"Ask a follow-up",id:"dxepjFd+cI"}),showSources:!0,useThreadSources:!0,submitWillFork:v,showStopButton:U,inFlightEntryUUID:l,contextUUID:u,onStopButtonClick:G,useLexical:!0,mentionTypeaheadOptions:S,onTriggerTypeahead:E,dropdownPlacement:Sce.NEXT_PUBLIC_IS_SIDECAR_BUILD?"top":void 0,clarificationData:I??void 0,showSearchModeSelector:!j,showModelSelector:!j&&!A,showFileUpload:!U||j,upsellInformation:B,idx:p-1,inFlight:d,isLastResult:!0})})]})})})})});ZPe.displayName="ThreadFloatingFooter";const qen=()=>{const e=f.useRef(!1),{results:t,lastResult:n}=Ht(),r=Ds(),s=lt(),{openVisitorLoginUpsell:a}=gr({enabled:!s}),i=L_(n?.upsell_information);f.useEffect(()=>{e.current||r&&t.length>=1&&n&&n.upsell_information?.app_location===nu.MODAL&&(i(),e.current=!0)},[r,s,a,t.length,n,i])},Ken=()=>{const e=lt(),{isMobileUserAgent:t}=Ce(),{firstResult:{author_username:n}={}}=Ht(),{openInstallUpsell:r}=A0e(),{shareGateImpressions:s,actions:a}=_n(),i=f.useRef(!1),l=Ut(),c=l?.get("installGate"),u=l?.get("q");f.useEffect(()=>{i.current||e||t&&(!n&&!u||Pg()||cD()||uD()||c==="true"&&(s>=XF||(r({origin:De.SHARED_THREAD_INSTALL_GATE,sheetModalVariant:"inset-centered-sheet"}),a.setShareGateImpressions(s+1),i.current=!0)))},[a,n,t,u,c,e,r,s])},Yen=()=>{const{device:{isMetaBrowser:e,isIOS:t,isAndroid:n}}=Lt();return f.useCallback(()=>{if(!e||typeof window>"u")return;const s=window.location.href;let a;t?a=s.replace(/^https?:\/\//,"x-safari-https://"):n&&(a=`intent://${s.replace(/^https?:\/\//,"")}#Intent;scheme=https;package=com.android.chrome;end`),a&&ml(a,"Redirecting to native browser")},[e,t,n])},Qen=(e,t)=>e?"full-sheet-blurred":t==="delayed"?"bottom-sheet-gradient":"centered-sheet",Xen=()=>{const{$t:e}=Z(),t=lt(),{isMobileUserAgent:n}=Ce(),{firstResult:{author_username:r}={}}=Ht(),{openVisitorLoginUpsell:s}=gr({enabled:!0}),{shareGateImpressions:a,actions:i}=_n(),l=f.useRef(!1),c=Ut(),{scrollContainerRef:u}=Za(),[d,m]=f.useState(!1),p=Yen(),h=c?.get("visitorGate"),g=c?.get("q");f.useEffect(()=>{const y=u.current;if(y)return y.addEventListener("scroll",()=>{m(AM(y))}),()=>{y.removeEventListener("scroll",()=>{m(AM(y))})}},[u]),f.useEffect(()=>{l.current||t||!r&&!g||cD()||uD()||a>=XF||h==="false"||h==="delayed"&&!d||!h&&!(!n&&!g)||(p(),s({origin:De.SHARED_THREAD_LOGIN_GATE,description:"",title:e({defaultMessage:"Instant answers at your fingertips",id:"NFjQpck2Ql"}),sheetModalVariant:Qen(n,h),overrideMobileVariant:!0}),i.setShareGateImpressions(a+1),l.current=!0)},[n,t,s,e,a,i,d,h,c,r,p,g])};function Zen({entropyBrowser:e,isSidecar:t,scrollContainerRef:n}){const r=Ft(),s=f.useCallback(a=>{n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:a})},[n]);f.useEffect(()=>{if(!(!e||!t))return e.subscribeQuickActionButtonFired(()=>{s("smooth")})},[e,t,s]),f.useEffect(()=>{t&&setTimeout(s,0,"instant")},[r,t,s])}var Jen={};const etn=({reason:e})=>{const{DEFAULT_SOURCES:t}=H_({reason:e}),{setSources:n,setIsCopilot:r,gpt4Limit:s}=rr(),a=Ds(),{trackEvent:i}=je(),{lossAversionStatus:l,setLossAversionStatus:c,unsetLossAversion:u}=MV(),d=lt(),{results:m,lastResult:p,firstResult:{author_id:h,author_username:g,context_uuid:y,query_source:x,sources:{sources:v}={}}={}}=Ht(),b=Oo(),_=Ut(),w=f.useRef(!1),{pinnedEntryIdx:C,setViewTitle:S}=Kw(),{formatMessage:E}=Z(),{openVisitorLoginUpsell:M}=gr({enabled:!d}),{scrollContainerRef:k}=Za(),N=Jn();return Xen(),Ken(),qen(),Zen({scrollContainerRef:k,isSidecar:!!Jen.NEXT_PUBLIC_IS_SIDECAR_BUILD,entropyBrowser:N}),f.useEffect(()=>{const P=vn.isSourceListType(v)?v:[...t];n(P);const L=m.some(O=>vn.isCopilotMode(O))&&!!s&&s>0;r(L)},[]),f.useEffect(()=>{if(!w.current&&a&&m.length>=1&&p&&vn.isStatusCompleted(p)&&h&&g){const P=_?.get("utm_source")??void 0;i("thread viewed",{authorId:h,authorUsername:g,isThreadCreator:!!b,contextUUID:y,viewSource:P}),y&&pB({contextUUID:y,reason:e}),x==="perplexity_tasks"&&i("task thread viewed",{contextUUID:y}),w.current=!0}},[i,a,h,g,y,p,m.length,_,b,d,M,E,e,x]),f.useEffect(()=>{l!=="cooldown"&&(!d&&!l&&b?c("allowed"):b||u())},[d,l,b,c,u]),f.useEffect(()=>{S(C===-1?null:RT(m[C]?.query_str)??"")},[C,S,m]),xf(()=>{l==="allowed"&&u()}),null},Xpn=async({request:e,reason:t})=>{const n=await ae.POST("/rest/media/search-videos-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:en.MEDIUM}),{media_items:r=[]}=n.data??{};return{media_items:r}},Zpn=async({request:e,reason:t})=>{const n=await ae.POST("/rest/media/search-images-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:en.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},Jpn=async({request:e,reason:t})=>{const n=await ae.POST("/rest/media/search-images-and-videos",t,{body:{query:e.query,entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:en.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},ttn=async({request:e,reason:t})=>{const n=await ae.POST("/rest/media/create-image-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,image_style:e.image_style,custom_instructions:e.custom_instructions},timeoutMs:en.EXREMELY_HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},ntn=async({request:e,reason:t})=>{const n=await ae.POST("/rest/media/get-image-gen-subject",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:en.HIGH}),{subject:r=""}=n.data??{};return{subject:r}},rtn=(e,t,n)=>{if(e.backend_uuid!==t)return e;const r=e.blocks??[],s=r.findIndex(u=>u.image_mode_block);if(s===-1)return e;const a=r[s]?.image_mode_block;if(!a)return e;const i=[...r],l=[...n,...a.media_items],c={...a,media_items:l};return i[s]&&(i[s]={...i[s],image_mode_block:c}),{...e,blocks:i}},JPe=({reason:e})=>{const{decrementCreateLimit:t}=rr(),{trackEvent:n}=je(),{$t:r}=Z(),s=Oo(),a=co(),i=Hge(),{mutate:l}=St({mutationFn:async u=>{try{return await ntn({request:u,reason:e})}catch(d){return ne.error("Failed to get image generation subject",d),{subject:""}}}}),c=f.useCallback(async({entryUUID:u,imageStyle:d,customInstructions:m=null,setIsLoadingGeneratedImage:p,onSuccessCallback:h,onFailureCallback:g})=>{n("generate image button clicked",{entryUUID:u,queryStr:m??""}),p(!0);try{const y=await ttn({request:{entry_uuid:u,read_write_token:s??null,image_style:d,custom_instructions:m},reason:e}),{media_items:x}=y;i(u,v=>rtn(v,u,x)),t(),h()}catch(y){y instanceof Error&&y.message==="Pro feature"?a({redirectUrl:"",pitchMessage:{title:"Generate DALL-E images with Pro",description:"Upgrade to Pro to generate DALL-E images"},origin:De.GENERATE_IMAGE}):y instanceof Error&&y.message==="Moderation"?g(r({defaultMessage:"Failed due to moderation. Please try a different query",id:"ChRyieNjo/"})):g(r({defaultMessage:"Failed to generate image",id:"mVJ5f5LkYT"}))}finally{p(!1)}},[n,s,i,t,a,r,e]);return f.useMemo(()=>({onGenerateImageClick:c,getImageGenSubjectMutation:l}),[l,c])},stn=({root:e})=>{const t=f.useRef(null),[n,r]=f.useState(!1),[s,a]=f.useState(!1),i=f.useCallback(l=>{l?(t.current=l,r(!0)):(r(!1),t.current=null)},[]);return f.useEffect(()=>{if(!t.current||!n)return;const l=new IntersectionObserver(([c])=>{c&&a(c.intersectionRatio<1)},{threshold:[1],root:e,rootMargin:"-1px 9999px 9999px 9999px"});return l.observe(t.current),()=>l.disconnect()},[e,n]),f.useMemo(()=>({ref:i,isSticky:s}),[s,i])},Ece=150,Mce=500,e8e=R.memo(({entry:e,imageGenSubject:t,setImageGenSubject:n,onSubmit:r})=>{const s="generate-image-custom-input",{$t:a}=Z(),{isMobileStyle:i,isMobileUserAgent:l}=Ce(),[c,u]=f.useState(!1),[d,m]=f.useState(""),[p,h]=f.useState(t),{getImageGenSubjectMutation:g}=JPe({reason:s}),y=d.length>0?d+`. The subject is:
`+p:p,x=d.length===0&&p.length===0||d.length>Ece||p.length>Mce;f.useEffect(()=>{t===""&&(async()=>(u(!0),await g({entry_uuid:e.entryUUID,read_write_token:null},{onSuccess:_=>{n(_.subject),h(_.subject)},onSettled:()=>{u(!1)}})))()},[t,g,e.entryUUID,n]);const v=f.useCallback(()=>r(y),[y,r]);return c?o.jsx(To,{}):o.jsxs("div",{children:[o.jsx(qa,{className:"mb-sm",isMobileUserAgent:l,isMobileStyle:i,onChange:m,value:d,label:a({defaultMessage:"Style",id:"7mL9QEUFav"}),placeholder:a({defaultMessage:"Use detailed brush strokes.",id:"FqRwHGXuKd"}),maxLength:Ece}),o.jsx(qa,{isMobileUserAgent:l,isMobileStyle:i,onChange:h,label:a({defaultMessage:"Subject",id:"LLtKhppiyE"}),value:p,maxLength:Mce}),o.jsx("div",{className:"mt-md flex",children:o.jsx(pe,{text:a({defaultMessage:"Submit",id:"wSZR47Y5kj"}),disabled:x,variant:"primary",onClick:v})})]})});e8e.displayName="GenerateImageCustomInput";var sg;(function(e){e.PAINTING="PAINTING",e.PHOTOGRAPH="PHOTOGRAPH",e.ILLUSTRATION="ILLUSTRATION",e.DIAGRAM="DIAGRAM"})(sg||(sg={}));const _v=R.memo(({icon:e,text:t,onClick:n})=>o.jsxs(H,{variant:"subtler",bgHover:"subtle",className:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border",onClick:n,children:[o.jsx(le,{icon:e,size:"lg",className:"mb-sm"}),o.jsx(F,{variant:"smallBold",children:t})]}));_v.displayName="StyleChoice";const t8e=R.memo(({onStyleChoiceClick:e})=>{const t=f.useCallback(()=>e(sg.PAINTING),[e]),n=f.useCallback(()=>e(sg.PHOTOGRAPH),[e]),r=f.useCallback(()=>e(sg.ILLUSTRATION),[e]),s=f.useCallback(()=>e(sg.DIAGRAM),[e]);return o.jsxs(H,{className:"gap-sm grid grid-cols-2",children:[o.jsx(_v,{icon:Que,onClick:t,text:"Painting"}),o.jsx(_v,{icon:bD,onClick:n,text:"Photograph"}),o.jsx(_v,{icon:Bk,onClick:r,text:"Illustration"}),o.jsx(_v,{icon:KDe,onClick:s,text:"Diagram"})]})});t8e.displayName="GenerateImageTemplates";const n8e=R.memo(({icon:e,text:t,subtitle:n,onClick:r,hideOnClick:s=!0,disabled:a=!1,...i})=>{const[l,c]=f.useState(!0),u=f.useCallback(()=>{!a&&r&&r(),!a&&s&&c(!1)},[a,s,r]);return l?o.jsx(H,{bgHover:a?void 0:"subtler",className:V("mb-sm px-md py-sm w-full select-none rounded-md border border-dashed",{"cursor-pointer":!a,"opacity-75":a}),onClick:u,...i,children:o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsxs(F,{variant:"smallBold",className:"gap-x-sm flex items-center",children:[o.jsx(le,{icon:e,size:"md"}),o.jsxs("div",{children:[o.jsx("div",{children:t}),n&&o.jsx(F,{variant:"tiny",color:"light",children:n})]})]}),o.jsx(F,{color:"super",children:o.jsx(le,{icon:ur})})]})}):null});n8e.displayName="ThreadEntryAccessoryButton";const r8e=R.memo(({icon:e,message:t,variant:n="good",actionList:r,title:s,dismissable:a,onDismiss:i,size:l="regular",pointerVariant:c="none",testId:u,isMobileStyle:d,className:m})=>{const p=r&&r.length>0&&o.jsx("div",{className:"gap-x-sm flex",children:r?.map((y,x)=>y.visible?y.items&&y.items.length>0?o.jsx(sn,{isMobileStyle:d,items:y.items,children:o.jsx(pe,{size:Qt.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,debounce:y.debounce})},y.text??x):o.jsx("div",{className:"relative flex h-full items-center",children:o.jsx(pe,{size:Qt.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,toolTip:y.tooltip,tooltipLayout:"bottom",disabled:y.disabled,isLoading:y.isLoading,debounce:y.debounce})},y.text??x):o.jsx(R.Fragment,{},x))}),h=f.useMemo(()=>V({"text-foreground":n==="good","text-caution":n==="warning"}),[n]),g=f.useMemo(()=>{if(n==="good")return"super";if(n==="warning")return"red";if(n==="info")return"textColor"},[n]);return t==null?null:o.jsxs("div",{"data-testid":u,children:[c!=="none"&&o.jsx("div",{className:V("mt-sm px-md flex",{"justify-start":c==="left","justify-end":c==="right"||c==="landing-page-right","pr-[75px]":c==="landing-page-right"}),children:o.jsx("div",{className:"relative h-4 w-6 overflow-hidden",children:o.jsx("div",{className:"bg-subtler size-4 origin-bottom-left rotate-45"})})}),o.jsxs(H,{variant:"subtler",className:V("gap-sm relative flex flex-col items-center justify-between rounded-lg md:flex-row",{"p-sm":l==="small","p-md":l==="regular"},m),children:[a&&o.jsx("div",{className:"right-xs top-xs absolute",children:o.jsx(Te,{"aria-label":"Dismiss",icon:It,size:"small",onClick:i})}),o.jsx("div",{children:o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx(H,{variant:g,className:"flex size-11 shrink-0 items-center justify-center rounded-full",children:o.jsx(F,{variant:l==="regular"?"baseSemi":"smallBold",color:n==="warning"?"white":"defaultInverted",children:e&&o.jsx(le,{icon:e})})}),o.jsxs("div",{children:[o.jsx(F,{variant:s&&l==="regular"?"baseSemi":"smallBold",className:h,children:s||t}),s&&t&&o.jsx(F,{variant:l==="regular"?"base":"small",children:t})]})]})}),p]})]})});r8e.displayName="Banner";const kce={page:"page-title",section:"section-title",subsection:"baseSemi"},atn={page:"lg",section:"base",subsection:"md"},itn=({icon:e,variant:t})=>o.jsx(le,{icon:e,size:atn[t]}),s8e=R.memo(({title:e,icon:t,subtitle:n,actionList:r,search:s,variant:a="page",noBorder:i=!1,center:l="md",testId:c,isMobileStyle:u,leadingComponent:d,trailingComponent:m})=>{const p=r&&r.length>0&&o.jsx("div",{className:"gap-x-sm flex",children:r?.map((g,y)=>g.visible?g.items&&g.items.length>0?o.jsx(sn,{isMobileStyle:u,items:g.items,children:o.jsx(pe,{testId:c,size:g.size??Qt.small,text:g.text,variant:g.variant,icon:g.icon,onClick:g.onClick,debounce:g.debounce})},g.text??y):o.jsx("div",{className:"relative flex h-full items-center",children:o.jsx(Te,{testId:c,size:g.size??Qt.small,text:g.text,variant:g.variant,icon:g.icon,onClick:g.onClick,toolTip:g.tooltip,tooltipLayout:"bottom",disabled:g.disabled,debounce:g.debounce,isLoading:g.isLoading})},g.text??y):o.jsx(R.Fragment,{},y))}),h=o.jsxs("div",{children:[o.jsxs("div",{className:"gap-x-sm flex items-center",children:[t&&o.jsx(F,{variant:kce[a]??"section-title",children:o.jsx(itn,{icon:t,variant:a})}),o.jsx(F,{variant:kce[a]??"section-title",children:e})]}),n&&o.jsx(F,{variant:a==="page"?"base":"small",color:"light",className:"mt-sm",children:n})]});return o.jsx(H,{variant:"background",className:V({"sticky top-0 z-[5] flex items-center rounded-t-xl":a==="page","border-b":!i,"h-headerHeight":a==="page"&&!s,"pt-md md:pb-md":a==="page"&&s}),children:o.jsx(H,{className:V("w-full",{"px-sm md:px-lg mx-auto max-w-screen-md":a==="page"&&l==="md","max-w-threadWidth px-md md:px-lg mx-auto":a==="page"&&l==="lg"}),children:o.jsxs(H,{variant:"background",className:V("gap-md flex flex-col md:flex-row md:items-center md:justify-between",{"h-14":!s&&a==="section"}),children:[o.jsxs("div",{className:"md:hidden",children:[o.jsxs("div",{className:"gap-xs flex w-full shrink-0 items-center",children:[d,o.jsxs("div",{className:"gap-sm flex w-full justify-between",children:[h,p]})]}),s&&o.jsx("div",{className:"mt-md w-full max-w-md",children:s})]}),o.jsxs("div",{className:"gap-sm hidden grow items-center justify-between md:flex",children:[h,o.jsxs("div",{className:"gap-sm flex grow items-center justify-end",children:[p,s&&o.jsx("div",{className:"max-w-md grow",children:s})]}),m]})]})})})});s8e.displayName="Header";const a8e=R.memo(({userCreateLimit:e,onGenerateClick:t,isDisabled:n,entry:r,btnText:s,buttonComponent:a})=>{const{$t:i}=Z(),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[m,p]=f.useState(""),[h,g]=f.useState(""),y=lt(),{hasAccessToProFeatures:x}=Et(),{isMobileStyle:v,isMobileUserAgent:b}=Ce(),{openVisitorLoginUpsell:_}=gr({enabled:!y}),{trackEvent:w}=je(),C=co(),S=x&&e===0,E=x&&e<10;let M=pde;x?S&&(M=Og):M=vD;const k=f.useCallback(T=>{d(!1),w("generate image style clicked",{entryUUID:r.entryUUID,style:T}),t({style:T,customInstructions:null,onFailure:I=>p(I)})},[r.entryUUID,t,w]),N=f.useCallback(T=>{d(!1),c(!1),t({style:"custom",customInstructions:T,onFailure:I=>p(I)}),w("click image gen custom prompt submit",{prompt:T})},[t,w]),P=f.useCallback(()=>{y?x?d(!0):C({redirectUrl:"",pitchMessage:{title:i({defaultMessage:"Generate images with {pro}",id:"lRrjmenIbD"},{pro:"Pro"}),description:i({defaultMessage:"Visualize your answers with images",id:"mmH7FzyH04"})},origin:De.GENERATE_IMAGE}):_({title:i({defaultMessage:"Sign in to generate images",id:"rH/ZsL5HtP"}),origin:De.GENERATE_IMAGE}),w("generate image button clicked",{entryUUID:r.entryUUID,queryStr:r.entryTitle})},[r.entryTitle,r.entryUUID,y,x,_,C,i,w]),L=f.useCallback(()=>c(T=>!T),[]),O=f.useMemo(()=>[{icon:ude,tooltipLayout:"right",tooltip:i({defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}),pill:!0,visible:!0,variant:l?"primary":"common",onClick:L}],[i,l,L]),A=f.useMemo(()=>o.jsxs("div",{className:"space-y-md p-sm pt-0",children:[o.jsx(s8e,{title:i(l?{defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}:{defaultMessage:"Choose a style",id:"AU4HcqqKpC"}),variant:"section",isMobileStyle:v,actionList:O}),!l&&o.jsx(t8e,{onStyleChoiceClick:k}),l&&o.jsx(e8e,{entry:r,imageGenSubject:h,setImageGenSubject:g,onSubmit:N})]}),[i,k,N,O,r,h,v,l]),j=f.useCallback(()=>{d(!1),c(!1)},[]);return m!==""?o.jsx(r8e,{isMobileStyle:v,message:m,icon:YDe}):o.jsx(WT,{isMobileStyle:v,isOpen:u,onClose:j,content:A,children:o.jsx(En,{isMobileUserAgent:b,tooltipText:i({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:e}),tooltipLayout:"bottom",showTooltip:E,asChild:!0,children:a?a({onClick:P,isRateLimitReached:S,isDisabled:n,buttonIcon:M,text:s}):o.jsx(n8e,{text:s,subtitle:S?i({defaultMessage:"Limit reached. Come back soon.",id:"LPlQBHfRcL"}):void 0,disabled:S||n,icon:M,hideOnClick:!1,onClick:P},"imageGenerate")})})});a8e.displayName="GenerateImageButton";const ho=f.memo(({children:e,id:t})=>{const n={hidden:{opacity:0},visible:{opacity:1}};return o.jsx(ve.div,{className:"relative",variants:n,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1,ease:"easeInOut"},children:e},t)});ho.displayName="AnswerModeContainer";const otn=({durationMinutes:e,enabled:t=!0,maxProgress:n=95})=>{const[r,s]=f.useState(2),[a,i]=f.useState(e*60),l=f.useRef(void 0),c=f.useRef(void 0),u=f.useCallback(()=>{if(!t)return;l.current&&clearTimeout(l.current);const d=Math.random()*1500+500;l.current=setTimeout(()=>{const m=Date.now(),p=(m-(c.current??m))/1e3,h=e*60,g=Math.min(p/h*100,n),y=1+Math.random()*2,x=Math.random()*4-2;let v=r+y+x;const b=Math.min(g+10,n);v=Math.min(v,b),v=Math.max(r,Math.min(v,n)),s(v);const _=v/p,C=(n-v)/_,S=Math.max(0,Math.min(C,h-p));i(Math.round(S)),v<n&&u()},d)},[t,e,n,r]);return f.useEffect(()=>{if(!t){s(2),i(e*60);return}return c.current=Date.now(),u(),()=>{l.current&&clearTimeout(l.current)}},[t,e,u]),f.useEffect(()=>{t&&(s(2),i(e*60),c.current=Date.now())},[t,e]),f.useMemo(()=>({percentCompleted:Math.round(r),percentRemaining:Math.round(100-r),estimatedSecondsRemaining:a}),[r,a])},i8e=({researchPlan:e,reasoningPlan:t,blocks:n,hasAnswer:r,isProReasoningMode:s,displayModel:a})=>{const i=t?.goals?.slice(1)??fe,l=a===de.O3_PRO,c=otn({durationMinutes:5,enabled:l&&!r,maxProgress:95}),u=f.useMemo(()=>!e||r||s&&i.length>0,[e,r,s,i.length]),d=f.useMemo(()=>!t&&!s||!!t?.final,[t,s]),m=r&&d&&u,p=f.useMemo(()=>d?null:t?.goals[t.goals.length-1],[t,d]),h=f.useMemo(()=>{if(l&&!r)return c;let g=0,y=0;if(Array.isArray(n)){for(const v of n)if(v.intended_usage==="plan"&&v.plan_block){const b=v.plan_block;b.eta_seconds_remaining!==void 0&&(g=b.eta_seconds_remaining),b.pct_complete!==void 0&&(y=b.pct_complete)}}const x=y||2;return{estimatedSecondsRemaining:g,percentCompleted:x,percentRemaining:100-x}},[n,l,r,c]);return f.useMemo(()=>({reasoningGoals:i,isResearchPlanFinished:u,isReasoningPlanFinished:d,isAllPlansFinished:m,activeReasoningGoal:p,...h}),[i,u,d,m,p,h])},H7=R.memo(({onClick:e})=>{const[t,n]=f.useState(!1),r=f.useCallback(()=>{n(!0),e()},[e]),{searchMode:s}=ln(),a=f.useMemo(()=>o.jsx(he,{defaultMessage:"Skip remaining steps",id:"nWmXYwgk8a"}),[]);return o.jsx(F,{color:"light",variant:"small",className:"text-pretty",children:o.jsx("div",{className:"relative min-h-[20px] w-full",children:t?o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:jy,children:o.jsx(wn,{variant:"super",as:"div",className:"px-sm flex h-6 items-center",children:s===ce.STUDIO?o.jsx(he,{defaultMessage:"Creating",id:"rQUSqe6JcA"}):o.jsx(he,{defaultMessage:"Answer",id:"4hkQO/op5u"})})},"skipping-message"):o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:jy,children:o.jsx(pe,{size:"tiny",onClick:r,variant:"common",icon:QDe,extraCSS:V("rounded-lg"),text:a})},"skip-button")})})});H7.displayName="FastAnswerButton";const o8e=R.memo(()=>{const{trackEvent:e}=je(),{$t:t}=Z(),{permission:n,requestPermission:r}=NV({windowsAppOnly:!1}),s=f.useCallback(async()=>{try{e("permission notifications requested",{origin:"pro_reasoning_status_updater"}),await r()?e("permission notifications granted",{origin:"pro_reasoning_status_updater"}):e("permission notifications not granted",{origin:"pro_reasoning_status_updater"})}catch(i){ne.error("Error requesting notification permission:",i)}},[e,r]),a=Qr(n).with("default",()=>({variant:"primaryGhost",text:t({id:"ipGe+BIJx7",defaultMessage:"Notify me"}),icon:yp})).with("granted",()=>({variant:"border",text:t({id:"V52jNnY+6M",defaultMessage:"Enabled"}),icon:XDe,toolTip:t({id:"ktmy4MhbQv",defaultMessage:"We'll notify you when done."}),extraCSS:"!pointer-events-none border-none !bg-transparent"})).otherwise(()=>({variant:"border",icon:ZDe,toolTip:t({id:"D0ozicKDgX",defaultMessage:"Notifications blocked. Please check browser settings."}),extraCSS:"!pointer-events-none border-none !bg-transparent"}));return o.jsx(pe,{size:"tiny",onClick:s,...a,extraCSS:V("rounded-lg",a.extraCSS)})});o8e.displayName="NotificationButton";const l8e=R.memo(({estimatedSecsRemaining:e,placeholderMessage:t="Creating a plan",resultType:n="project"})=>{const{formatNumber:r,formatMessage:s}=Z();return o.jsx(F,{variant:"small",color:"light",className:"text-pretty",children:o.jsx("div",{className:"relative min-h-[20px] w-full",children:o.jsx(Je,{mode:"sync",initial:!1,children:e?o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:jy,children:o.jsx(he,{defaultMessage:"{time} left to gather sources and create your {resultType}.",id:"AhSqF1URDZ",values:{time:o.jsx(F,{inline:!0,variant:"smallBold",as:"span",children:Math.round(e/60)===1?s({defaultMessage:"A minute",id:"X4ic2xRHa2"}):r(Math.round(e/60),{style:"unit",unit:"minute",unitDisplay:"long"})}),resultType:s(n==="project"?{defaultMessage:"project",id:"RbFAl7UGmp"}:{defaultMessage:"report",id:"TmfXGUz23p"})}})},"time-remaining"):o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:jy,children:o.jsx(wn,{variant:"super",as:"span",children:t})},"creating-plan")})})})});l8e.displayName="TimeRemaining";const zN=R.memo(({estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:n,resultType:r,showAnimatePresence:s=!0,wrapperClassName:a="relative min-h-[20px] w-full"})=>{const i=!t||t<95?o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:jy,children:o.jsx(l8e,{estimatedSecsRemaining:e,placeholderMessage:n,resultType:r})},"time-remaining"):o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:jy,children:o.jsx(F,{color:"light",variant:"small",className:"text-pretty",children:o.jsx(wn,{variant:"super",as:"span",children:o.jsx(he,{defaultMessage:"Finishing up...",id:"JUr8ErKBCt"})})})},"finishing-message");return s?o.jsx("div",{className:a,children:o.jsx(Je,{mode:"sync",initial:!1,children:i})}):i});zN.displayName="ProgressMessage";const c8e=R.memo(({percentCompleted:e})=>o.jsx("div",{className:"gap-two relative flex w-full flex-col",children:o.jsx(zN,{percentCompleted:e,placeholderMessage:"Reasoning with o3-pro"})}));c8e.displayName="O3Message";const u8e=R.memo(({percentCompleted:e=1,className:t,showPlayHead:n=!0})=>o.jsx("div",{className:V("pb-xs relative w-full flex-col",t),children:o.jsxs("div",{className:"bg-subtle h-xs relative left-0 top-0 flex w-full rounded-full",children:[o.jsx("div",{className:"bg-super shadow-super/15 left-0 top-0 h-full rounded-full shadow-[0_0_2px_1px] transition-[width] duration-200 ease-in-out",style:{width:`${e}%`}}),n&&o.jsx("div",{className:"bg-super -ml-two -mt-two shadow-super/50 size-sm rounded-full shadow-[0_0_5px_1px,-4px_0_3px_-2px]"})]})}));u8e.displayName="ProgressBar";const d8e=R.memo(({searchMode:e,estimatedSecondsRemaining:t,percentCompleted:n})=>o.jsx("div",{className:"gap-two relative flex w-full flex-col",children:o.jsx(F,{color:"light",variant:"small",className:"text-pretty",children:e===ce.RESEARCH&&o.jsx(zN,{estimatedSecsRemaining:t,percentCompleted:n,placeholderMessage:"It takes a few minutes to gather sources and create your report.",resultType:"report",showAnimatePresence:!1,wrapperClassName:""})})}));d8e.displayName="ResearchMessage";const f8e=R.memo(({estimatedSecsRemaining:e,percentCompleted:t})=>o.jsx("div",{className:"gap-two pb-xs relative flex w-full flex-col",children:o.jsx(zN,{estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:"Creating a plan"})}));f8e.displayName="StudioMessage";const iG=R.memo(({className:e,style:t,skipSearchEnabled:n,onSkipSearch:r})=>{const{searchMode:s,researchPlan:a,reasoningPlan:i,steps:l,hasAnswer:c,isProReasoningMode:u,result:{backend_uuid:d,blocks:m,display_model:p}}=ln(),{estimatedSecondsRemaining:h,percentCompleted:g,percentRemaining:y}=i8e({researchPlan:a,reasoningPlan:i,blocks:m,hasAnswer:c,isProReasoningMode:u??!1,displayModel:p}),x=Math.min(g,95),v=p===de.O3_PRO,b=s===ce.RESEARCH||s===ce.STUDIO||v,_=l.some(w=>w.step_type==="ENTROPY_REQUEST");return b?o.jsxs(ve.div,{initial:{opacity:0,y:-4},className:e,style:t,animate:{opacity:1,y:0,transition:{ease:Jd,duration:.2,delay:.05}},exit:{opacity:0,y:-4,transition:{ease:Jd,duration:.5}},children:[o.jsxs(H,{variant:"subtler",className:V(v?"py-md rounded-xl border px-6 shadow-sm":"pb-md rounded-xl border px-6 pt-5 shadow-sm","flex flex-col gap-3"),children:[o.jsxs(H,{className:V("gap-sm flex flex-row items-start"),children:[o.jsx("div",{className:"gap-sm pt-two relative flex grow",children:s===ce.RESEARCH?o.jsx(d8e,{searchMode:s,estimatedSecondsRemaining:h,percentCompleted:x}):v?o.jsx(c8e,{percentCompleted:x}):o.jsx(f8e,{estimatedSecsRemaining:h,percentRemaining:y,percentCompleted:x,backendUuid:d})}),o.jsxs("div",{className:"gap-sm flex items-start",children:[n&&r&&!v&&o.jsx(H7,{onClick:r}),!v&&o.jsx(o8e,{})]})]}),o.jsx(u8e,{percentCompleted:x,className:"my-1.5"})]}),o.jsx("div",{className:"from-base via-base absolute top-full h-5 w-full bg-gradient-to-b from-0% via-[calc(100%_-_12px)] to-transparent to-100% backdrop-blur-[0.25px]"})]},"progress-banner"):_&&n&&r?o.jsxs("div",{className:e,children:[o.jsx(H7,{onClick:r}),o.jsx("div",{className:"from-base via-base absolute top-full h-5 w-full bg-gradient-to-b from-0% via-[calc(100%_-_12px)] to-transparent to-100% backdrop-blur-[0.25px]"})]}):null});iG.displayName="ProgressBanner";const oG=f.memo(()=>o.jsxs(wn,{className:"gap-md flex flex-col",children:[o.jsx(oE,{}),o.jsx(oE,{}),o.jsx(oE,{})]}));oG.displayName="AnswerModeLoader";const oE=f.memo(()=>o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(H,{variant:"subtler",className:"size-32 shrink-0 rounded-md"}),o.jsxs("div",{className:"gap-sm flex w-full flex-col",children:[o.jsx(H,{variant:"subtler",className:"h-4 w-full rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]})]}));oE.displayName="Item";const m8e=f.memo(()=>{const{searchMode:e,inFlight:t}=ln(),n=e==ce.STUDIO;return o.jsxs("div",{children:[n&&t&&o.jsx(iG,{}),o.jsxs(wn,{className:V("gap-md flex",{"max-w-threadContentWidth mx-auto":!n}),children:[n&&o.jsxs("div",{className:"gap-md flex w-[30%] flex-col",children:[o.jsx(H,{variant:"subtler",className:"h-4 w-1/2 rounded-full"}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(H,{variant:"subtler",className:"size-3.5 rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(H,{variant:"subtler",className:"size-3.5 rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]})]}),o.jsxs("div",{className:"gap-sm flex w-[70%] flex-col",children:[o.jsx(H,{variant:"subtler",className:"h-4 w-[70%] rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-4/5 rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-4 w-1/2 rounded-full"})]})]})]})});m8e.displayName="TasksModeLoader";const Rg=R.memo(({...e})=>o.jsx(ve.div,{className:"ml-auto flex items-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:o.jsx(Te,{...e,extraCSS:"!py-md [&_*]:!font-regular hover:!bg-subtler shrink-0 whitespace-nowrap rounded-md",size:"tiny"})}));Rg.displayName="AnswerModeTabsAccessory";function ltn(){const e=yT(),t=jx(),n=f.useRef(!1);let r,s="",a=!1;try{const i=ln();s=i.result?.uuid??"",r=i.result?.classifier_results,a=i.isEntryInFlight??!1}catch{}f.useEffect(()=>{s&&n.current&&(n.current=!1)},[s]),f.useEffect(()=>{const i=r?.mhe_predictions?.study_intent===!0,l=e(de.STUDY);i&&l&&a&&!n.current&&s&&(n.current=!0,t(de.STUDY,ce.STUDY))},[r,e,t,s,a])}const ctn=({trackEvent:e,entryUUID:t,frontendContextUUID:n,contextUUID:r})=>f.useCallback((s,a)=>{e(s,{entryUUID:t,frontendContextUUID:n,contextUUID:r,...a})},[t,n,r,e]),utn=({webResults:e})=>Po(t=>({isShowing:!1,webResults:e,actions:{hide:()=>t({isShowing:!1}),show:n=>t({...n,isShowing:!0})}})),{Context:dtn,useTrackedState:ftn}=C_("SourcesListContext"),p8e=f.memo(({children:e,webResults:t})=>{const[n]=R.useState(()=>utn({webResults:t}));return f.useEffect(()=>{n.setState({webResults:t})},[t,n]),o.jsx(dtn.Provider,{value:n,children:e})});p8e.displayName="SourcesListProvider";const mtn=ftn,h8e=({webResults:e,navigationResults:t=[],isStudyMode:n=!1})=>{if(!e)return{dedupedWebResults:[],hasSufficientTrendingRatio:!1,trendingResults:[],trendingResultsWithImages:[]};const r=g5.dedupWebResults(e,t,n),s=r.filter(u=>u.meta_data?.client==="trending"),i=r.slice(0,10).filter(u=>u.meta_data?.client==="trending"),l=i.length>=3,c=i.filter(u=>u.meta_data?.images?.[0]);return{dedupedWebResults:r,hasSufficientTrendingRatio:l,trendingResults:s,trendingResultsWithImages:c}},ptn=({webResults:e,navigationResults:t=[],isStudyMode:n=!1,isMobileStyle:r})=>{if(!r||!e)return!1;const{hasSufficientTrendingRatio:s,trendingResultsWithImages:a}=h8e({webResults:e,navigationResults:t,isStudyMode:n});return s&&a.length>=3},g8e=R.memo(({urlData:e,handleClick:t,...n})=>{const r=f.useMemo(()=>{const{url:p,snippet:h}=e;if("title"in e){const y=e;return{url:p,title:y.title,snippet:h,domain:y.domain||ha(p)}}return{url:p,title:e.name,snippet:h,domain:ha(p)}},[e]),{url:s,title:a,snippet:i,domain:l}=r,c=f.useMemo(()=>l.replace(/^www\./,"").split(".")[0],[l]),u=f.useMemo(()=>R_(s),[s]),d=f.useMemo(()=>p=>()=>{},[]),m=t||d;return o.jsx("div",{className:"p-md border-t-subtlest last:border-b-subtlest -mx-4 flex grow flex-col border-t px-4 last:border-b [&:only-child]:border-0",children:o.jsxs(Ye,{className:"gap-sm border-t-subtlest group flex cursor-pointer flex-col items-stretch",href:s,target:"_self",onClick:m(s,"primaryLink"),rel:"noopener",...n,children:[o.jsxs("div",{className:"flex h-7 items-center gap-2",children:[o.jsx(pl,{size:30,domain:u,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"small",className:"line-clamp-1",children:c}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:s})]})]}),o.jsxs("div",{children:[o.jsx(F,{className:"line-clamp-1",variant:"baseSemi",color:"super",children:a}),o.jsx(F,{variant:"small",color:"light",className:"line-clamp-2",children:i})]})]},s)})});g8e.displayName="MobileUrlCard";const Yf={lastEntryUUID:null,loggedUrls:new Set,seenEntries:new Set};function htn(e){if(e)return[{...e,url:e?.url,title:e?.name,snippet:e?.snippet,sitelinks:e?.sitelinks?.slice(),site_name:e?.meta_data?.domain_name||e?.meta_data?.citation_domain_name}]}const GN=R.memo(({navigationResult:e,trackEvent:t,queryString:n,entryUUID:r,frontendUUID:s,onClick:a,showSiteLinks:i=!1,showNewMobileCard:l=!1,...c})=>{const{url:u,title:d,snippet:m,sitelinks:p,position:h,source:g,client_request_timestamp:y,unstable_server_request_timestamp:x,is_cached:v,is_comet_navigation:b,site_name:_}=e,{isMobileStyle:w}=Ce(),C=f.useMemo(()=>R_(u),[u]),S=f.useMemo(()=>K8(u),[u]);f.useEffect(()=>{if(!r||!u)return;const M=Yf.seenEntries.has(r);Yf.lastEntryUUID!==r&&(Yf.lastEntryUUID=r,Yf.loggedUrls.clear()),Yf.loggedUrls.has(u)||(Yf.loggedUrls.add(u),Yf.seenEntries.add(r),t("navigational source viewed",{query:n,url:u,title:d,...i&&{subLinks:p},position:h,source:g,is_comet_navigation:b,frontendUUID:s,...typeof y=="number"&&!M&&{renderTimeMs:performance.now()-y},...typeof x=="number"&&!M&&{unstableRenderTimeMs:performance.now()-x},isCached:v}))},[r,u,n]);const E=f.useCallback((M,k)=>N=>{t("click citation",{source:"navigationalCard",navigationalLinkType:k,citation_url:M,is_comet_navigation:b,frontendUUID:s}),a?.(N)},[b,t,a,s]);return w&&l?o.jsx(g8e,{urlData:e,handleClick:E,...c}):o.jsx("div",{className:"gap-sm flex",children:o.jsx("div",{className:"grow",children:o.jsxs(H,{variant:"transparent",className:"flex grow flex-col rounded-lg",children:[o.jsx(Ye,{className:"group flex cursor-pointer items-stretch",href:u,target:"_self",onClick:E(u,"primaryLink"),rel:"noopener",...c,children:o.jsxs(H,{className:"pr-md group",children:[o.jsxs("div",{className:"mb-xs gap-sm flex items-center",children:[o.jsx(pl,{size:28,domain:C,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex flex-col",children:[_&&o.jsx(F,{variant:"tiny",className:"line-clamp-1 break-all",children:_}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1 break-all",children:S})]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"baseSemi",color:"super",className:"decoration-1 underline-offset-1 group-hover:underline",children:d}),o.jsx(F,{variant:"small",color:"light",className:"mb-two line-clamp-2",children:m})]})]})},u),p&&p.length>0&&i&&o.jsx(F,{variant:"small",color:"light",className:"pt-two pb-sm",children:o.jsx(Ru,{className:"flex-wrap",children:p.map(M=>o.jsx(Vr,{id:M.url,children:o.jsx(Ye,{className:"group flex cursor-pointer items-stretch",href:M.url,onClick:E(M.url,"siteLink"),rel:"noopener",...c,children:o.jsx(F,{variant:"small",color:"super",className:V("decoration-1 underline-offset-1 group-hover:underline"),children:M.title})})},M.url))})})]})})})});GN.displayName="CitationNavigationalCard";const gtn=({entry:e,webResults:t,showSourcesSidebar:n,submit:r,allowedNavResultsCount:s,isFirstResult:a,enableMobileCalculations:i=!1,...l})=>{const{trackEvent:c}=je(),{trackEvent:u}=hx(),{openModal:d}=wt(),m=Oo(),p=mtn(),{isMobileStyle:h}=Ce(),g=f.useMemo(()=>"searchMode"in l&&l.searchMode===ce.SEARCH,[l]),y=f.useMemo(()=>t?.filter(T=>T.is_navigational)?.flatMap(T=>htn(T)||[]),[t]),{data:x}=_et(e?.query_str??""),v=f.useMemo(()=>x?.navigation_results?.map(T=>({...T,is_cached:!0}))??y?.map(T=>({...T,is_cached:!1})),[x,y]),b=f.useMemo(()=>v?.slice(0,s),[v,s]),_=b?.length&&a&&!g,w=f.useMemo(()=>vn.isPerplexityMessage(e)?e?.display_model==="pplx_study"||e?.classifier_results?.mhe_predictions?.study_intent:!1,[e]),C=f.useMemo(()=>h8e({webResults:t,navigationResults:b,isStudyMode:w}),[t,b,w]),{dedupedWebResults:S,hasSufficientTrendingRatio:E,trendingResults:M,trendingResultsWithImages:k}=C,N=f.useMemo(()=>!i||!h?[]:k,[i,h,k]),P=f.useMemo(()=>i?h&&E&&k.length>=3:!1,[i,h,E,k.length]),L=f.useMemo(()=>vn.isPerplexityMessage(e)?e?.blocks?.some(T=>T.intended_usage==="answer_media_items"):!1,[e]),O=f.useMemo(()=>!_&&!L&&E,[_,L,E]),A=f.useCallback(()=>{if(e?.backend_uuid){const T=n?"sidebar":"modal";u("click view sources button",{entryUUID:e.backend_uuid,type:p.isShowing?void 0:T})}n?p.actions.show({webResults:t}):d("citationListModal",{webResults:t,entry:e,submit:m?r:void 0})},[e?.backend_uuid,d,m,n,p.isShowing,p.actions.hide,r,u,t?.length]),j=ctn({trackEvent:c,entryUUID:e?.backend_uuid,frontendContextUUID:e?.uuid,contextUUID:e?.context_uuid});return f.useMemo(()=>({isNavigationalLayout:_,navigationResults:b,trackCitationClickEvent:j,handleViewAllClick:A,dedupedWebResults:S,isTrendingLayout:O,trendingResults:M,trendingResultsWithImages:N,showTrendingInMobile:P}),[S,A,_,O,b,P,j,M,N])},y8e=({target:e,entryUUID:t,frontendContextUUID:n,targetVisibilityPortionThreshold:r=.5,hasLLMToken:s})=>{const a=f.useRef(null),i=f.useRef(null),l=f.useRef(!1),{trackEvent:c}=je(),{result:u}=ln(),d=f.useRef(u);f.useEffect(()=>{d.current=u},[u]);const m=f.useCallback(()=>{if(a.current){const h=Math.round(performance.now()-a.current);c("thread entry exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:h}),a.current=null}if(i.current){const h=d.current;h&&Yr(h.display_model)==ce.STUDIO&&vn.isStatusPending(h)&&c("answer processing exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:Math.round(performance.now()-i.current)}),i.current=null}},[c,t,n]),p=f.useCallback(()=>{s&&(a.current=performance.now()),i.current||(i.current=performance.now())},[s]);return f.useEffect(()=>{const h=new IntersectionObserver(y=>{y.forEach(x=>{l.current=x.isIntersecting,x.isIntersecting&&document.visibilityState==="visible"?p():m()})},{threshold:r}),g=e.current;return g&&h.observe(g),()=>{g&&h.unobserve(g),m()}},[e,r,p,m]),f.useEffect(()=>{const h=()=>{document.visibilityState==="hidden"?m():document.visibilityState==="visible"&&l.current&&p()};return document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h)}},[p,m]),f.useEffect(()=>{const h=()=>{l.current&&a.current&&m()};return window.addEventListener("beforeunload",h),()=>{window.removeEventListener("beforeunload",h)}},[m]),null},x8e=R.memo(({navigationResult:e,trackEvent:t})=>{const{url:n,snippet:r,domain:s,sitelinks:a=[],site_name:i}=e,l=f.useMemo(()=>(s||ha(n)).replace(/\.[^.]*$/,""),[s,n]),c=f.useMemo(()=>R_(n),[n]),{$t:u}=Z(),d=f.useCallback(m=>{t("click citation",{type:"primaryLink",...e})},[t,e]);return o.jsxs(H,{className:"p-md border-subtler mb-md rounded-xl border",variant:"subtler",children:[o.jsxs(Ye,{className:"gap-sm border-t-subtlest group flex cursor-pointer flex-col items-stretch",href:n,target:"_self",onClick:d,rel:"noopener",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pl,{size:32,domain:c,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"smallBold",className:"line-clamp-1 break-words",children:i??l}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1 break-words",children:n})]})]}),o.jsx("div",{children:o.jsx(F,{variant:"small",className:"line-clamp-2 break-words",children:r})})]},n),o.jsx("div",{className:"mt-sm",children:a.map(m=>o.jsx("div",{className:"border-subtler px-two py-md flex items-center border-t",children:o.jsx(Ye,{href:m.url,children:o.jsx(F,{variant:"smallBold",className:"line-clamp-2",children:m.title})})},m.url))}),o.jsx("div",{className:"mt-sm",children:o.jsx(Ye,{href:n,target:"_blank",rel:"noopener",children:o.jsx(pe,{variant:"common",fullWidthMobile:!0,text:u({id:"hqHEPnjKO/",defaultMessage:"Visit {domain}"},{domain:z0e(n)})})})})]})});x8e.displayName="MobilePrimaryNavResultCard";const lG=R.memo(({navigationResult:e,trackEvent:t})=>{const{isMobileStyle:n}=Ce();return n?o.jsx(x8e,{navigationResult:e,trackEvent:t}):o.jsx(v8e,{navigationResult:e,trackEvent:t})}),v8e=R.memo(({navigationResult:e,trackEvent:t})=>{const{sitelinks:n=fe}=e;return o.jsxs("div",{children:[o.jsx(GN,{navigationResult:e,trackEvent:t,queryString:"",entryUUID:""}),n.length>0&&o.jsx("div",{className:"gap-x-lg border-subtler pl-md mt-md mb-sm grid grid-cols-2 items-stretch border-l",children:n.map(r=>o.jsxs(Ye,{href:r.url,target:"_self",className:"py-sm flex h-full flex-col justify-start",children:[o.jsx(F,{variant:"smallBold",className:"line-clamp-2 break-words hover:underline",color:"super",children:r.title}),o.jsx(F,{variant:"small",className:"line-clamp-1 break-words",color:"light",children:r?.snippet??""})]},r.url))})]})});v8e.displayName="DesktopPrimaryNavResultCard";lG.displayName="PrimaryNavResultCard";const b8e=(e,t,n)=>{const r=e?.sitelinks??fe;return n?t===0&&r.length>0:t===0&&r.length>0&&r.every(s=>!!s?.snippet)},_8e=f.memo(({navResult:e,index:t,isPrimaryCardEnabled:n,trackCitationClickEvent:r,queryStr:s,entryUUID:a,frontendUUID:i,showSiteLinks:l})=>{const{isMobileStyle:c}=Ce();return n&&b8e(e,t,c)?o.jsx(lG,{navigationResult:e,trackEvent:r}):o.jsx(GN,{navigationResult:e,trackEvent:r,queryString:s,entryUUID:a,frontendUUID:i,showSiteLinks:l,showNewMobileCard:c})});_8e.displayName="RedesignedNavResultListItem";const cG=(e,t)=>{const{value:n,loading:r}=qu({flag:"web-navigation-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},w8e=(e,t)=>{const{value:n,loading:r}=Dt({flag:"web-site-links-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},C8e={"nav-card":!1,"nav-links-bottom-position":!1,"news-carousel":!1,"primary-card":!1},z7=f.memo(({navResults:e,queryStr:t,querySource:n,backendUUID:r,frontendUUID:s,trackCitationClickEvent:a,onMount:i})=>{const{isMobileStyle:l}=Ce(),{variation:c,loading:u}=cG(C8e),d=c["nav-card"],m=typeof c["primary-card"]=="boolean"?c["primary-card"]:!1,{variation:p}=w8e(!1);f.useEffect(()=>{i?.()},[i]);const h=f.useCallback((g,y)=>{a(g,y);const x=n==="default_search",v=y.is_comet_navigation;!(g==="click citation")||!x||!v||jo("web.frontend.omnisearch_nav_results_clicked")},[a,n]);return u?null:d?o.jsx(S8e,{navResults:e,queryStr:t,backendUUID:r,frontendUUID:s,trackCitationClickEvent:a,isPrimaryCardEnabled:m}):o.jsx(H,{"data-testid":"old-navigation-list",className:"flex flex-col gap-4",children:e.map((g,y)=>m&&b8e(g,y,l)?o.jsx(lG,{navigationResult:g,trackEvent:h},g.url):o.jsx(GN,{navigationResult:g,trackEvent:h,queryString:t,entryUUID:r??"",frontendUUID:s,showSiteLinks:p,showNewMobileCard:!1},g.url))})});z7.displayName="NavigationResultList";const ytn=7,S8e=f.memo(({navResults:e,queryStr:t,backendUUID:n,frontendUUID:r,trackCitationClickEvent:s,isPrimaryCardEnabled:a})=>{const{webResults:i,hasAnswer:l}=ln(),{isMobileStyle:c}=Ce(),{variation:u}=w8e(!1),{$t:d}=Z(),{updateCurrentMode:m}=PN(),[p,h]=f.useState("none"),g=f.useMemo(()=>g5.dedupWebResults(i,e,!1),[i,e]),y=f.useMemo(()=>e.length<3?[]:g.slice(0,ytn).map((M,k)=>({url:M.url,title:M.name,snippet:M.snippet||"",domain:M.url?new URL(M.url).hostname:void 0,position:e.length+k,source:"default_search",is_comet_navigation:!1})),[g,e]),x=f.useMemo(()=>p==="none"?"collapsed":l&&y.length>0?"expanded":"loading",[p,l,y.length]),v=f.useMemo(()=>x==="collapsed"?e:[...e,...y],[e,y,x]),b=v.length>e.length,_=l?b?y.length<g.length:y.length>0:e.length>=3,w=d(b?{defaultMessage:"See all results",id:"DQlyy2kiD5"}:{defaultMessage:"See more results",id:"N/NQ07tu+u"}),C=f.useCallback(()=>{if(b){m("sources");return}h("clicked")},[b,m]),S=f.useMemo(()=>o.jsx(le,{icon:a_,size:"xs"}),[]),E=x==="loading"&&!b;return o.jsxs(H,{"data-testid":"redesigned-navigation-list",className:"flex flex-col",children:[o.jsx("div",{className:"flex flex-col sm:gap-4",children:v.map((M,k)=>o.jsx(_8e,{navResult:M,index:k,isPrimaryCardEnabled:a,trackCitationClickEvent:s,queryStr:t,entryUUID:n??"",frontendUUID:r??"",showSiteLinks:u},M.url))}),_&&o.jsx("div",{className:"pt-md",children:c?o.jsx(pe,{fullWidth:!0,variant:"common",onClick:C,text:w,isLoading:E,testId:"view-more-button"}):o.jsxs("div",{className:"flex items-center",children:[o.jsx(pe,{size:"small",variant:"border",onClick:C,text:w,trailingComponent:b?S:void 0,isLoading:E,testId:"view-more-button"}),o.jsx("div",{className:"bg-subtle h-px flex-1"})]})})]})});S8e.displayName="RedesignedNavigationResultList";const xtn=({data:e})=>{const{inFlight:t,result:{context_uuid:n,backend_uuid:r},result:s}=ln(),{openCanvas:a,doCanvasAction:i,isCanvasOpen:l,canvasState:c}=Tz(),{trackEvent:u}=je(),d=f.useRef(void 0),m=f.useRef(void 0);return f.useEffect(()=>{t&&e.should_auto_open&&a()},[t,e.should_auto_open,a]),f.useEffect(()=>{if(!t)return;const p={progress:e.progress,assetType:e.expected_asset_type};(d.current?.progress!==p.progress||d.current?.assetType!==p.assetType)&&(i({type:"setLoading",loading:e.progress===Qc.IN_PROGRESS,assetType:e.expected_asset_type}),d.current=p)},[e.expected_asset_type,e.progress,i,t]),f.useEffect(()=>{if(!e.asset||!t)return;const p=e.asset.uuid;m.current!==p&&(!(l&&c?.asset)&&(i({type:"setAsset",asset:e.asset,result:s}),u("canvas opened",{source:"auto",contextUUID:n,entryUUID:r,contentType:e.asset.asset_type,assetUUID:e.asset.uuid})),m.current=p)},[e.asset,i,t,s,l,c?.asset,u,n,r]),null},vtn=()=>{const{blocksByIntendedUsage:{canvas_mode:e}}=ln();if(AN())return e?.canvas_block};var btn={};const _tn=({hasSources:e,hasFastWidget:t,showAgentWorkflow:n,shouldShowNavResults:r,hasMediaOnlyLayout:s,isMobileStyle:a,isEntryInFlight:i,isMobileTrendingLayout:l})=>f.useMemo(()=>{const c=!!btn.NEXT_PUBLIC_IS_SIDECAR_BUILD,u=a&&!c,d=e&&!t&&!n&&!r&&!s;return c?{showSourcesAtTop:d,showSourcesAtBottom:!1}:{showSourcesAtTop:d&&!u||d&&l&&u,showSourcesAtBottom:d&&u&&!i&&!l}},[e,t,n,r,s,a,i,l]),E8e=R.memo(({onClick:e,didSelectAnswer:t,onDismiss:n})=>{const{isMobileStyle:r}=Ce(),[s,a]=f.useState(!1),{$t:i}=Z(),l=f.useCallback(()=>{a(!0),n()},[n]);return r||s?null:o.jsx("div",{children:o.jsx(H,{variant:"superLight",className:"p-md gap-sm flex items-center justify-between rounded-md",children:t?o.jsxs("div",{className:"gap-sm flex w-full items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(le,{icon:JDe,size:"lg",className:"text-super"}),o.jsx(F,{color:"super",variant:"smallBold",children:i({defaultMessage:"Thank you! Your feedback helps improve answers for everyone.",id:"jfIf25t1OU"})})]}),o.jsx(Te,{variant:"noHover",icon:It,pill:!0,size:"small",extraCSS:"!text-super",onClick:l})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(F,{color:"super",variant:"smallBold",children:i({defaultMessage:"Help improve our product",id:"A7lIeL4dUS"})}),o.jsx(F,{color:"super",variant:"small",children:i({defaultMessage:"We made two versions of this answer. Which do you prefer?",id:"GT2t8+NleA"})})]}),o.jsx(pe,{variant:"primary",size:"small",text:i({defaultMessage:"Compare",id:"493J7RI1tF"}),onClick:e})]})})})});E8e.displayName="AnswerComparisonBanner";const wtn=we(async()=>{const{MarkSpinner:e}=await Q(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>lTe);return{MarkSpinner:t}},void 0);return{default:e}}),Ctn=R.memo(({title:e,titleIcon:t,titleAccessory:n,titleUrl:r,showPplxMark:s,queryStr:a,loading:i,className:l="mb-sm"})=>{const{trackEvent:c}=je(),[u,d]=f.useState(!1),m=f.useCallback(()=>{r!=null&&(c("click result entry header",{query:a}),window.open(r,"_blank")?.focus())},[c,a,r]);return o.jsxs("div",{className:V("flex w-full items-center justify-between",l),children:[o.jsx("div",{onClick:m,className:V({"cursor-pointer":r!=null}),children:o.jsxs("div",{color:"super",className:"space-x-sm flex items-center",children:[(s||t)&&o.jsx(F,{variant:"section-title",as:"div",children:s?o.jsx("div",{className:"relative -top-px flex w-[24px] transform-gpu items-center justify-center",onClick:()=>{d(!0),setTimeout(()=>{d(!1)},0)},children:o.jsx(wtn,{size:24,shouldAnimate:i||u})}):t&&o.jsx("div",{className:"w-[24px]",children:o.jsx(le,{icon:t,size:"lg"})})}),o.jsx(F,{variant:"section-title",as:"div",children:e})]})}),n]})});Ctn.displayName="ThreadEntryHeader";const M8e=R.memo(({header:e,children:t})=>o.jsxs(H,{children:[e&&o.jsx(H,{variant:"background",className:V("flex","items-center","justify-between"),children:e}),t]}));M8e.displayName="ThreadEntrySection";const Stn=e=>{try{return JSON.parse(e)}catch{return null}},k8e=R.memo(({title:e,description:t,className:n="",role:r,retryFn:s,...a})=>{const{$t:i}=Z(),l=i({defaultMessage:"Please try again later.",id:"EjH+J3uOTD"}),c=f.useMemo(()=>Stn(t??""),[t]);return c&&(console.warn("Tried to pass a JSON error description"),console.warn(c)),o.jsxs("div",{className:`gap-md bg-caution py-sm px-md mt-4 flex items-center rounded-lg text-left font-sans text-white ${n}`,role:"alert",...a,children:[o.jsx(le,{icon:jD}),o.jsxs("div",{className:"flex grow flex-col",children:[o.jsx("p",{className:"font-medium",children:e||i({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}),o.jsx("p",{children:c?l:t})]}),s&&o.jsx(Te,{noXPadding:!0,text:i({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:s,textClassName:"text-white"})]})});k8e.displayName="QueryError";const qN=R.memo(({fullWidth:e,retryFn:t,className:n,errorCode:r})=>{const{$t:s}=Z(),a=f.useCallback(()=>{d3("error retry")},[]),i=(()=>{switch(r){case"FETCHER_SSE_OFFLINE_ERROR":return s({defaultMessage:"Unstable internet, check your connection",id:"vbFcV2WAsH"});default:return s({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}})();return o.jsx("div",{className:V("max-w-threadContentWidth mx-auto",{"w-full":e},n),children:o.jsx(k8e,{className:V("mx-md md:mx-0",{"bg-super":r==="FETCHER_SSE_OFFLINE_ERROR"}),title:i,retryFn:t??a})})});qN.displayName="QueryErrorFallback";var Etn={};const Mtn=we(async()=>{const{ConnectorAuthorizationPrompt:e}=await Q(async()=>{const{ConnectorAuthorizationPrompt:t}=await import("./ConnectorAuthorizationPrompt-KkaiPjBy.js");return{ConnectorAuthorizationPrompt:t}},__vite__mapDeps([437,3,1,4,6,5]));return{default:e}}),ktn=we(async()=>{const{AgentWorkflow:e}=await Q(async()=>{const{AgentWorkflow:t}=await import("./AgentWorkflow-DM54QpJ1.js");return{AgentWorkflow:t}},__vite__mapDeps([438,3,1,4,5,439,17,6]));return{default:e}}),Ttn=we(async()=>{const{ThreadEntryFooter:e}=await Q(async()=>{const{ThreadEntryFooter:t}=await import("./ThreadEntryFooter-l3_pXUqp.js");return{ThreadEntryFooter:t}},__vite__mapDeps([440,3,1,4,5,441,63,442,54,6,72,443,37,439,17,444,48,445,446,447,448,449,27,450,451,452,453,454,455,456]));return{default:e}}),Ntn=we(async()=>{const{RelatedContent:e}=await Q(async()=>{const{RelatedContent:t}=await import("./Related-BG3S7pZe.js");return{RelatedContent:t}},__vite__mapDeps([457,3,1,4,458,459,114,115,5,460,455,6]));return{default:e}}),jtn=we(async()=>{const{StudyModeRelated:e}=await Q(async()=>{const{StudyModeRelated:t}=await import("./StudyModeRelated-Bicio9gU.js");return{StudyModeRelated:t}},__vite__mapDeps([461,3,1,4,459,114,115,5,6]));return{default:e}}),Atn=we(async()=>{const{MapsPreview:e}=await Q(async()=>{const{MapsPreview:t}=await import("./MapsPreview-B4miSUlT.js");return{MapsPreview:t}},__vite__mapDeps([462,3,1,4,442,54,6,72,5,443,37,36]));return{default:e}}),Itn=we(async()=>{const{ThreadContentResponse:e}=await Q(async()=>{const{ThreadContentResponse:t}=await import("./ThreadContentResponse-BVYUhvqy.js");return{ThreadContentResponse:t}},__vite__mapDeps([463,3,1,4,117,6,441,63,442,54,72,5,443,37,439,17,444,48,445,446,447,448,449,27,450,451,452,453,454]));return{default:e}}),Rtn=we(async()=>{const{SourcesModePreviewRow:e}=await Q(async()=>{const{SourcesModePreviewRow:t}=await import("./SourcesModePreview-qI9ULXjL.js");return{SourcesModePreviewRow:t}},__vite__mapDeps([464,3,1,116,4,117,5,6]));return{default:e}}),Ptn=we(async()=>Q(()=>import("./AnswerComparisonModal-BBIXZpQA.js"),__vite__mapDeps([465,3,1,4,463,117,6,441,63,442,54,72,5,443,37,439,17,444,48,445,446,447,448,449,27,450,451,452,453,454,124]))),Otn=we(async()=>{const{MobileCitationList:e}=await Q(async()=>{const{MobileCitationList:t}=await import("./MobileCitationList-DnKLPJji.js");return{MobileCitationList:t}},__vite__mapDeps([466,3,1,6,5,4]));return{default:e}}),Ltn={"nav-card":!1,"nav-links-bottom-position":!1,"news-carousel":!1,"primary-card":!1},T8e=R.memo(({submitQuery:e,shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,deleteLastResult:s,setQuote:a,shouldShowNavResults:i,shouldShowRelatedContent:l=!0,sbsEntriesGroup:c,bottomNavResults:u})=>{const d="thread-content",{$t:m}=Z(),{isMobileStyle:p}=Ce(),{trackEvent:h}=je(),{session:g}=Nt(),{removeWidgetFromEntry:y}=zw({reason:d}),{result:x,widgetData:v,isEntryInFlight:b,response:_,hasLLMToken:w,isAnswerSkipped:C,steps:S,isPending:E,hasMediaOnlyLayout:M,showAgentWorkflow:k,isFinalStep:N,sportsWidgetData:P,weatherWidgetData:L,timeWidgetData:O,timerWidgetData:A,calculatorWidgetData:j,currencyExchangeWidgetData:T,flightStatusWidgetData:I,highPriorityWidgets:U,lowPriorityWidgets:B,taskWidgetData:D,hasFastWidget:W,isLastResult:z,idx:$,hasAnswer:X,hasSources:q,hasWebResults:Y,mapsPreviewData:G}=ln(),{variation:J,loading:K}=cG(Ltn),te=f.useMemo(()=>Etn.NEXT_PUBLIC_IS_SIDECAR_BUILD||!J["news-carousel"]||b?!1:ptn({webResults:_?.web_results,navigationResults:void 0,isStudyMode:x?.display_model==="pplx_study"||x?.classifier_results?.mhe_predictions?.study_intent,isMobileStyle:p}),[b,_?.web_results,x?.display_model,x?.classifier_results?.mhe_predictions?.study_intent,p,J]),re=kf(),se=oet(),me=U3(),oe=v6e(),ge=f.useRef(null),xe=f.useMemo(()=>{const bt=x?.side_by_side_metadata?.selection_status;return bt===el.SELECTED||bt===el.TIE},[x?.side_by_side_metadata?.selection_status]),ye=f.useMemo(()=>c.length<1?[]:[...c].sort((bt,zr)=>bt.backend_uuid.slice(-8).localeCompare(zr.backend_uuid.slice(-8),void 0,{sensitivity:"base"})),[c]),{trackJudgment:_e,trackBannerExposure:be,trackSBSExposure:Ne}=Evt({results:ye,session:g,trackEvent:h}),Ee=f.useMemo(()=>{const bt=x?.side_by_side_metadata?.sibling_uuid;return bt?Oe.getItem(`sbs-banner-dismissed-${bt}`)==="true":!1},[x?.side_by_side_metadata?.sibling_uuid]),Re=f.useMemo(()=>c.length>1,[c]),Ae=f.useMemo(()=>x?.side_by_side_metadata?.sibling_uuid,[x]),st=f.useMemo(()=>x?.display_model==="pplx_study"||x?.classifier_results?.mhe_predictions?.study_intent,[x?.display_model,x?.classifier_results?.mhe_predictions?.study_intent]),it=f.useMemo(()=>oe?!Ee&&(xe||Re&&X):!1,[Ee,oe,Re,xe,X]),Se=f.useCallback(()=>{Ae&&Oe.setItem(`sbs-banner-dismissed-${Ae}`,"true")},[Ae]);f.useEffect(()=>{it&&be()},[it,be]);const[ue,ke]=f.useState(!1),et=f.useMemo(()=>ye.map(bt=>vn.parseAskTextField(bt)??void 0).filter(bt=>bt!==void 0),[ye]),Ge=f.useCallback(async bt=>{try{_e(bt);const zr=ye[0]?.side_by_side_metadata?.sibling_uuid;await Dvt(bt,ye,zr,me),ke(!1)}catch(zr){ne.error("Failed to process answer selection:",zr)}},[ye,me,_e]),ft=f.useCallback(()=>{ke(!0),Ne()},[Ne]),Qe=f.useMemo(()=>c.some(bt=>vn.isStatusPending(bt)),[c]),Ve=f.useMemo(()=>{if(!x?.query_str)return"";const{actualQuery:bt}=Iu(x.query_str);return bt||""},[x?.query_str]),Le=f.useCallback(()=>ke(!1),[]),{standardWidgetData:ot,codeInterpreterImages:vt}=v.reduce((bt,zr)=>(zr.is_code_interpreter&&zr.is_image?bt.codeInterpreterImages.push(zr):bt.standardWidgetData.push(zr),bt),{standardWidgetData:[],codeInterpreterImages:[]}),Rt=f.useMemo(()=>vt.length>0,[vt]),jt=f.useMemo(()=>!Rt&&ot.length>0,[Rt,ot]),dn=f.useMemo(()=>!p,[p]),On=f.useCallback(bt=>{x?.frontend_context_uuid&&x?.backend_uuid&&(y({entryUUID:x.backend_uuid,data:bt}),h("remove widget",{url:"url"in bt?bt.url:bt?.links?.[0]?.url??"",entryUUID:x.backend_uuid,source:"thread"}))},[y,x.backend_uuid,h,x.frontend_context_uuid]),yr=f.useCallback((bt,zr,zo,Uc,Gp)=>{const ji=Gp||("url"in bt?bt.url:bt?.links?.[0]?.url??"");return o.jsx(wje,{data:bt,submit:e,isReadonly:zr,menuItems:zr||b?[]:[{type:"default",text:m({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:uE,onClick:()=>zo&&zo(bt)}],inFlight:b,entryUUID:x?.backend_uuid??null,tableCitationOffset:Uc},ji)},[b,e,m,x?.backend_uuid]),Ke=f.useCallback((bt,zr,zo)=>{const Uc={name:`${zr}-widget`,snippet:"",timestamp:"",url:"",meta_data:bt,is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""};return yr(Uc,re,On,_?.web_results?.length,zo)},[On,re,_?.web_results?.length,yr]),Xe=f.useCallback(bt=>yr(bt,re,On,_?.web_results?.length),[On,re,_?.web_results?.length,yr]),gt=f.useCallback(bt=>Ke(bt,"sports"),[Ke]),zt=f.useCallback(bt=>Ke(bt,"weather"),[Ke]),hn=f.useCallback(bt=>Ke(bt,"time"),[Ke]),zn=f.useCallback(bt=>Ke(bt,"timer"),[Ke]),Me=f.useCallback(bt=>Ke(bt,"currency_exchange"),[Ke]),Ze=f.useCallback(bt=>Ke(bt,"calculator"),[Ke]),$e=f.useCallback(bt=>Ke(bt,"flight-status"),[Ke]),at=f.useCallback(bt=>Ke(bt,"task","task"),[Ke]),ut=f.useRef(null),{hasAccessToProFeatures:Bt}=Et();y8e({entryUUID:x?.backend_uuid??"",target:ut,targetVisibilityPortionThreshold:.3,frontendContextUUID:x?.frontend_context_uuid??"",hasLLMToken:w});const gn=Jn(),{showSourcesAtTop:Gn,showSourcesAtBottom:Zt}=_tn({hasSources:q,hasFastWidget:W,showAgentWorkflow:k,shouldShowNavResults:i,hasMediaOnlyLayout:M,isMobileStyle:p,isEntryInFlight:b,isMobileTrendingLayout:te}),Hr=vtn(),Ni=$ge(x?.frontend_uuid),td=det(x?.backend_uuid),fo=vn.isStatusFailed(x),Al=fo&&x.reconnectable&&Ni;f.useEffect(()=>{gn.maybeSendSearchResult(_,S,E)},[E,Y,_,gn,S]);const Wp=f.useCallback(()=>{se(x.backend_uuid??"")},[x.backend_uuid,se]),Hp=f.useMemo(()=>R.memo(()=>{throw new Abe("STREAM_FAILED_CHUNK_ERROR")}),[]),zp=f.useMemo(()=>()=>o.jsx(qN,{retryFn:Wp,errorCode:td?.code}),[Wp,td?.code]);return o.jsxs(o.Fragment,{children:[it&&o.jsx(E8e,{onClick:ft,didSelectAnswer:xe,onDismiss:Se}),x?.connector_auth_info&&o.jsx(Mtn,{connectorAuthInfo:x.connector_auth_info,isLastResult:z,backendUuid:x?.backend_uuid,inFlight:b}),Gn&&!K&&o.jsx(Rtn,{}),k&&!C&&o.jsx(ktn,{autoScroll:z}),Hr&&b&&o.jsx(xtn,{data:Hr}),o.jsxs("div",{className:"gap-y-lg mt-3 flex flex-col first:mt-0",children:[(M||C||!k&&(N||W))&&o.jsx(M8e,{children:o.jsxs("div",{className:"gap-y-sm md:gap-y-md flex flex-col",children:[Rt&&vt.map(bt=>o.jsx("div",{children:yr(bt,re)},bt.url)),jt&&U.map(Xe),L&&zt(L),O&&hn(O),A&&zn(A),T&&Me(T),j&&Ze(j),I&&$e(I),P&&gt(P),jt&&B.map(Xe),G&&G.place_widgets.length>0&&o.jsx(Atn,{placeWidgets:G.place_widgets}),o.jsx(Itn,{submitQuery:e,setQuote:a,markdownRef:ge}),Bt&&oe&&D&&at(D),Zt&&!K&&o.jsx(Otn,{webResults:_?.web_results??tpe}),o.jsx(Ttn,{submitQuery:e,deleteLastResult:s,showSourcesSidebar:dn,markdownRef:ge}),u,o.jsx(_c,{isSamsungBrowser:!0,children:o.jsx(zx,{position:"bottom",idx:$,upsellInformation:x?.upsell_information,backendUuid:x?.backend_uuid,isLastResult:z,inFlight:b})})]})}),fo&&!Al&&o.jsx(Pr,{fallback:zp,children:o.jsx(Hp,{})}),l&&!st&&o.jsx(Ntn,{shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,submitQuery:e}),st&&o.jsx(jtn,{onClick:e})]}),Re&&o.jsx(Ptn,{isOpen:ue,onClose:Le,responses:et,queryStr:Ve,onSelectAnswer:Ge,isAnyEntryPending:Qe})]})});T8e.displayName="LowerPriorityThreadContent";const Dtn=e=>{const{result:{classifier_results:t,query_source:n}}=ln(),r=v5e(),{classifierResults:s}=cs(),a=t,i=typeof a<"u",l=s[e],c=typeof l<"u",u=n==="default_search";return f.useEffect(()=>{u&&(i&&r("web.frontend.browser.mhe_loaded_ms"),c&&r("web.frontend.browser.mhe_extension_loaded_ms"))},[i,c,u,r]),l??a},Ftn=e=>{if(!e)return"hidden";const t=e.mhe_predictions;return t?.nav_intent?"top":e.personal_search||e.image_generation||t?.personal_search||t?.skip_search||t?.image_generation_intent||t?.time_widget||t?.weather_widget||t?.calculator_widget?"hidden":t?.sports_intent||t?.places_search_intent||t?.shopping_intent||t?.movie_lists_intent||t?.finance_widget_gating||e.widget_type==="FINANCE"?"bottom":"top"},Utn=({classifierResults:e,resultStatus:t})=>{const n=typeof e>"u",{variation:r,loading:s}=cG(C8e),a=pn()&&!!r["nav-links-bottom-position"],i=a?Ftn(e):"top",l=f.useMemo(()=>n||Object.keys(e??{}).length===0&&t==="COMPLETED"||s?!0:a?i==="hidden":!!(e?.personal_search||e?.skip_search||e?.hide_nav||e?.image_generation||e?.time_widget),[a,i,n,e,t,s]),c=f.useMemo(()=>!n,[n]),u=f.useMemo(()=>a?i:"top",[a,i]);return f.useMemo(()=>({shouldHideNavResults:l,classificationsLoaded:c,navResultsPosition:u}),[l,c,u])};var Btn={};const Tce=3,Vtn=we(async()=>{const{ThreadEntryDebugTiming:e}=await Q(async()=>{const{ThreadEntryDebugTiming:t}=await import("./ThreadEntryDebugTiming-MUqRESRr.js");return{ThreadEntryDebugTiming:t}},__vite__mapDeps([467,3,1,4,101,5,6]));return{default:e}}),N8e=R.memo(({sbsEntriesGroup:e,submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:i})=>{const{isMobileStyle:l}=Ce(),c=xt(),u=v5e(),{isEntryInFlight:d,result:m,response:p,hasLLMToken:h,searchMode:g,isFirstResult:y,webResults:x,steps:v,isPending:b,actions:{handleSourcesCuration:_}}=ln();ltn();const w=X0e(),C=f.useMemo(()=>{if(!m?.query_str)return"";const{actualQuery:ge}=Iu(m.query_str);return ge||""},[m?.query_str]),S=f.useMemo(()=>!l,[l]),E=f.useRef(null);y8e({entryUUID:m?.backend_uuid??"",target:E,targetVisibilityPortionThreshold:.3,frontendContextUUID:m?.frontend_context_uuid??"",hasLLMToken:h});const{trackCitationClickEvent:M,navigationResults:k}=gtn({allowedNavResultsCount:Tce,entry:m,webResults:x,showSourcesSidebar:S,submit:_,searchMode:g,isFirstResult:y}),N=pn(),{openModal:P}=wt(),L=Jn(),{navigationResults:O,pendingTasks:A,navigationMeta:j}=cs(),T=m?.frontend_uuid,I=O[T??""]??fe,U=$ge(T),B=Dtn(T??""),D=f.useMemo(()=>I.length>0,[I]),W=f.useMemo(()=>N&&(I.length||U)?I:k||fe,[N,I,k,U]),z=f.useMemo(()=>W?{serverRequestTimestamp:c.getQueryData(["serverRequestTimestamp",m?.query_str??void 0,m?.uuid??void 0])}:{serverRequestTimestamp:void 0},[c,m?.query_str,W,m?.uuid]),$=f.useMemo(()=>W?.slice(0,Math.max(Tce,I?.length??0))?.map((ge,xe)=>({...ge,position:xe,source:z.serverRequestTimestamp?"default_search":"client_search",client_request_timestamp:w(),unstable_server_request_timestamp:z.serverRequestTimestamp||void 0,sitelinks:ge.sitelinks?.map((ye,_e)=>({url:ye.url,title:ye.title,position:_e,snippet:ye?.snippet??""})),is_comet_navigation:D})),[w,W,I?.length,z.serverRequestTimestamp,D]),X=f.useMemo(()=>!!x&&x.length>0,[x]),q=f.useMemo(()=>m?.search_focus==="writing",[m?.search_focus]),Y=f.useMemo(()=>m?.display_model==="pplx_study"||B?.mhe_predictions?.study_intent,[m?.display_model,B?.mhe_predictions?.study_intent]),{shouldHideNavResults:G,navResultsPosition:J}=Utn({classifierResults:B,resultStatus:m?.status??""}),K=f.useMemo(()=>!Btn.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!G&&$&&$.length>0&&m.attachments?.length===0&&!q&&g===ce.SEARCH&&!Y,[G,$,m.attachments?.length,q,g,Y]),te=f.useMemo(()=>K&&J==="top",[K,J]),re=f.useMemo(()=>K&&J==="bottom"&&!d,[K,J,d]);f.useEffect(()=>{L.maybeSendSearchResult(p,v,b)},[b,X,p,L,v]);const se=f.useCallback(()=>{D&&(m?.query_source==="default_search"?u("web.frontend.omnisearch_nav_results_shown",{omnisearch:w()!==0}):u("web.frontend.nav_results_shown"))},[D,m?.query_source,u,w]),me=f.useMemo(()=>re?o.jsx(z7,{navResults:$,queryStr:C,querySource:m?.query_source,backendUUID:m?.backend_uuid,frontendUUID:m?.frontend_uuid,trackCitationClickEvent:M,onMount:se}):null,[re,$,C,m?.query_source,m?.backend_uuid,m?.frontend_uuid,M,se]),oe=f.useCallback(()=>{P("bugReportModal",null)},[P]);return o.jsxs("div",{className:"gap-y-sm flex flex-col",ref:E,children:[o.jsx(Vtn,{backend_uuid:m?.backend_uuid,frontend_uuid:m?.frontend_uuid,frontend_context_uuid:m?.frontend_context_uuid,debug_data:m?.debug_data,pendingTasks:A,navigationMeta:j,onBugReportClick:oe}),te&&o.jsx(z7,{navResults:$,queryStr:C,querySource:m?.query_source,backendUUID:m?.backend_uuid,frontendUUID:m?.frontend_uuid,trackCitationClickEvent:M,onMount:se}),o.jsx(T8e,{submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:i,shouldShowNavResults:K,sbsEntriesGroup:e,bottomNavResults:me})]})});N8e.displayName="ThreadContent";const $tn=({hasPendingFiles:e,attachments:t=fe,attachment_processing_progress:n=fe})=>{const{$t:r}=Z(),s=f.useMemo(()=>e?[{description:r({defaultMessage:"Processing attachments...",id:"nCVqMMwJ07"}),final:!1,id:"pending-files-goal",steps:[{step_type:"PENDING_FILES",content:{attachments:t,attachmentProcessingProgress:n},uuid:"pending-files-step"}]}]:[],[r,n,t,e]),a=f.useMemo(()=>!e||n.some(l=>l.file_url==="end"),[n,e]),i=f.useMemo(()=>a?null:s.length>0?s[0]:null,[a,s]);return f.useMemo(()=>({pendingFilesGoals:s,activePendingFileGoal:i,isFileProcessingDone:a}),[s,i,a])},Wtn=({isAllPlansFinished:e,researchPlan:t,reasoningGoals:n,isStudio:r,hasPendingFiles:s,displayModel:a})=>{const i=f.useMemo(()=>a===de.O3_PRO||r?!1:!(e||t||n.length>0||s),[a,r,e,t,n.length,s]);return f.useMemo(()=>({shouldShowPlaceholderGoal:i}),[i])},Htn=({researchPlan:e,steps:t,searchMode:n,isResearchPlanFinished:r,backendUUID:s})=>{const a=n===ce.RESEARCH,i=n===ce.STUDIO,l=ztn({backendUUID:s,steps:t,isResearchPlanFinished:r}),c=f.useMemo(()=>{if(!e)return{};if(e.goals.length===1){const m=e.goals[0];return m?{[m.id]:{...m,steps:t.filter(p=>p.step_type!=="INITIAL_QUERY"&&p.step_type!=="TERMINATE")}}:{}}return e.goals.reduce((m,p)=>{const h={...p,steps:t.filter(g=>"goal_id"in g.content?g.content.goal_id===p.id&&g.step_type!=="INITIAL_QUERY"&&g.step_type!=="TERMINATE":!1)};return m[h.id]=h,m},{})},[e,t]),u=f.useMemo(()=>{const m=Object.keys(c);if(m.length===0)return null;const p=t.at(-1),h=m.at(-1);return h?((a||i)&&p?.step_type!=="TERMINATE",c[h]):null},[c,t,a,i]),d=f.useMemo(()=>[...Object.values(c),...l],[c,l]);return f.useMemo(()=>({activeResearchGoal:u,researchGoals:d}),[u,d])},ztn=({backendUUID:e,steps:t,isResearchPlanFinished:n})=>{const r=Z(),{pendingClarifications:s,clearClarifications:a}=mH(),i=f.useMemo(()=>{if(n||!e)return[];const l=new Set(t.map(d=>d.uuid)),c=new Set;return t.forEach(d=>{d.step_type==="CLARIFYING_QUESTIONS_OUTPUT"&&d.content?.clarification&&c.add(d.content.clarification)}),s.filter(d=>d.entryUUID===e&&!l.has(d.UUID)&&!c.has(d.content)).map((d,m)=>({description:d.question??r.formatMessage({defaultMessage:"I'll consider the details you added.",id:"46H8Trfeps"}),final:!1,id:`c-${m}`,steps:[{content:{goal_id:`c-${m}`,clarification:d.content,question:d.question},step_type:"CLARIFYING_QUESTIONS_OUTPUT",uuid:d.UUID}]}))},[r,s,e,n,t]);return f.useEffect(()=>{n&&s.length&&a()},[a,n,s]),i},Gtn=()=>{const{results:e}=Ht(),t=f.useMemo(()=>!e||e.length===0?[]:e.map(s=>({result:s,assets:f6e(s?.blocks??[])})),[e]),n=f.useMemo(()=>t.flatMap(({assets:s})=>s),[t]),r=n.length>0;return{resultAssets:t,allAssets:n,hasAssets:r}},qtn=()=>{const{allAssets:e}=Gtn(),t=f.useMemo(()=>{const r=new Map,s=new Map,a=new Map;e.forEach(u=>{const d=u.version_info?.[0];d?.artifact_id&&(r.set(d.artifact_id,u),d.parent_artifact_id!==null&&d.parent_artifact_id!==void 0&&(s.set(d.artifact_id,d.parent_artifact_id),a.has(d.parent_artifact_id)||a.set(d.parent_artifact_id,new Set),a.get(d.parent_artifact_id)?.add(d.artifact_id)))});const i=new Set;r.forEach((u,d)=>{const m=s.get(d);(m===void 0||!r.has(m))&&i.add(d)});const l=[],c=new Set;return i.forEach(u=>{if(c.has(u))return;const d=[],m=[];let p=u;for(;p!==void 0&&!c.has(p);){d.push(p),c.add(p);const h=r.get(p);h&&m.push(h);const g=a.get(p);p=g?Array.from(g)[0]:void 0}d.length>0&&l.push({chainId:`chain-${u}`,assets:m,artifactIds:d})}),l},[e]),n=f.useMemo(()=>r=>{if(!r||!r.version_info?.[0]?.artifact_id)return null;const s=r.version_info[0].artifact_id;return t.find(i=>i.artifactIds.includes(s))||null},[t]);return{versioningChains:t,getChainForAsset:n,totalChains:t.length,hasVersioningChains:t.length>0}},Ktn=({onExit:e})=>{const t=f.useRef(e);t.current=e,f.useEffect(()=>{const n=performance.now();return()=>{const r=Math.round(performance.now()-n);t.current(r)}},[])};function Ytn(e,t,n){const r=new Blob([n],{type:"text/plain"});uG(e,t,r)}function uG(e,t,n){const r=document.createElement("a"),s=URL.createObjectURL(n);r.href=s,r.download=t,e.appendChild(r),r.click(),URL.revokeObjectURL(s),e.removeChild(r)}const Qtn=new Set(["markdown","md"]);function j8e(e){if(e?.asset_type==Mt.CODE_FILE&&e.code_file?.url&&Qtn.has(e.code_file.name.split(".").at(-1)))return{filenamePrefix:e.code_file.name.slice(0,e.code_file.name.lastIndexOf(".")),url:e.code_file.url}}function ehn(e){return j8e(e)!==void 0}function Xtn(e){return!!(e?.asset_type===Mt.SLIDES&&e.app?.url&&e.app.name)}function Ztn(e){if(e)return e.find(t=>t.asset_type===Mt.CODE_FILE&&t.code_file?.name?.endsWith(".pptx"))}function Jtn(e){return Ztn(e)?.code_file?.url}function thn(e){return e?.asset_type?[Mt.GENERATED_IMAGE,Mt.CHART,Mt.CODE_FILE,Mt.CODE_ASSET].includes(e.asset_type):!1}function enn(e){return e?.asset_type?[Mt.CHART,Mt.GENERATED_IMAGE,Mt.GENERATED_VIDEO,Mt.PDF_FILE].includes(e.asset_type):!1}function nhn({asset:e,reason:t}){const n=f.useCallback(async(r,s)=>{const a=j8e(e);if(!a)return;const{filenamePrefix:i,url:l}=a,c=i+"."+r,u=await iut({request:{filename:c,format:r,url:l},reason:t});uG(s||document.body,c,u)},[e,t]);return f.useMemo(()=>({exportAsset:n}),[n])}function tnn({reason:e,entryUUID:t}){const[n,r]=f.useState(!1),s=f.useCallback(async a=>{r(!0);try{const i=await out({request:{entry_uuid:t},reason:e});uG(a||document.body,"exported-assets.zip",i)}finally{r(!1)}},[t,e]);return f.useMemo(()=>({exportAllAssets:s,isExporting:n}),[s,n])}function nnn({asset:e,reason:t,answerMode:n,context:r,entryUUID:s}){const{downloadS3Asset:a,downloadImageAsset:i,downloadMediaAsset:l}=lve({reason:t}),{trackEvent:c}=je(),u=f.useCallback(async d=>{if(e)if(r==="canvas"?c("canvas content downloaded",{contentType:e.asset_type,entryUUID:s,assetUUID:e.uuid}):n&&c("generated asset downloaded",{assetType:e.asset_type,answerMode:n,entryUUID:s,reason:t}),e.asset_type===Mt.GENERATED_IMAGE)e.generated_image?.url&&await i(e.generated_image.url,"generated-image.png",d||document.body);else if(e.asset_type===Mt.GENERATED_VIDEO)e.generated_video?.url&&await l(e.generated_video.url,"generated-video.mp4",d||document.body);else for(const m of e.download_info)m.url?await a({url:m.url,filename:m.filename}):m.text_content&&Ytn(d||document.body,m.filename,m.text_content)},[e,r,n,c,s,t,i,l,a]);return f.useMemo(()=>({downloadAsset:u}),[u])}var im;(function(e){e[e.UNCOPIED=0]="UNCOPIED",e[e.COPYING=1]="COPYING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED"})(im||(im={}));var om;(function(e){e[e.UNLINKED=0]="UNLINKED",e[e.LINKING=1]="LINKING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED"})(om||(om={}));function rhn({asset:e,reason:t}){const[n,r]=f.useState(im.UNCOPIED),{$t:s}=Z(),{deprecatedOpenToast:a}=Mn(),i=f.useCallback(async()=>{if(e){r(im.COPYING);try{await rnn({asset:e,reason:t}),a(s({defaultMessage:"Copied to the clipboard!",id:"WWy0tPuRW8"}),"success",3),r(im.SUCCEEDED)}catch{a(s({defaultMessage:"Failed to copy the asset",id:"HHPhgIZj9h"}),"error",3),r(im.FAILED)}setTimeout(()=>r(im.UNCOPIED),2e3)}},[s,a,r,e,t]);return f.useMemo(()=>({copyStatus:n,copyAsset:i}),[n,i])}function shn({asset:e}){const[t,n]=f.useState(om.UNLINKED),{$t:r}=Z(),{deprecatedOpenToast:s}=Mn(),a=f.useCallback(async()=>{if(!(!e||!enn(e))){n(om.LINKING);try{let i;if(e.asset_type===Mt.CHART&&e.chart?.url)i=e.chart.url;else if(e.asset_type===Mt.GENERATED_IMAGE&&e.generated_image?.url)i=e.generated_image.url;else if(e.asset_type===Mt.GENERATED_VIDEO&&e.generated_video?.url)i=e.generated_video.url;else if(e.asset_type===Mt.PDF_FILE&&e.pdf_file?.url)i=e.pdf_file.url;else throw new Error("Asset is not linkable or URL not found");await navigator.clipboard.writeText(i),s(r({defaultMessage:"Link copied to clipboard!",id:"PsDXPeXpVG"}),"success",3),n(om.SUCCEEDED)}catch{s(r({defaultMessage:"Failed to copy link",id:"ruCwQMVFzJ"}),"error",3),n(om.FAILED)}setTimeout(()=>n(om.UNLINKED),2e3)}},[e,r,s]);return f.useMemo(()=>({linkStatus:t,linkAsset:a}),[t,a])}async function rnn({asset:e,reason:t}){let n;if(e.asset_type==Mt.CODE_ASSET)n={"text/plain":e.code?.script??""};else if(e.asset_type==Mt.CHART&&e.chart?.url){const s=await Ih({request:{url:e.chart.url,filename:"chart.png"},reason:t});n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==Mt.CODE_FILE&&e.code_file?.url){const s=await Ih({request:{url:e.code_file.url,filename:e.code_file.name},reason:t});n={"text/plain":await(await fetch(s)).text()}}else if(e.asset_type==Mt.GENERATED_IMAGE&&e.generated_image?.url){const s=e.generated_image.url;n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==Mt.GENERATED_VIDEO&&e.generated_video?.url){const s=e.generated_video.url;n={"video/mp4":await(await fetch(s,{mode:"cors",cache:"no-cache"})).blob()}}else if(e.asset_type==Mt.PDF_FILE&&e.pdf_file?.url){const s=await Ih({request:{url:e.pdf_file.url,filename:e.pdf_file.name},reason:t});n={"application/pdf":await(await fetch(s)).blob()}}else if(e.asset_type==Mt.DOCX_FILE&&e.docx_file?.url){const s=await Ih({request:{url:e.docx_file.url,filename:e.docx_file.name},reason:t});n={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":await(await fetch(s)).blob()}}else if(e.asset_type==Mt.XLSX_FILE&&e.xlsx_file?.url){const s=await Ih({request:{url:e.xlsx_file.url,filename:e.xlsx_file.name},reason:t});n={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":await(await fetch(s)).blob()}}if(!n)throw new Error("Failed to find anything to copy");const r=new ClipboardItem(n);await navigator.clipboard.write([r])}const Nce=ee({defaultMessage:"Download as PDF",id:"camH0DLf91"}),jce=ee({defaultMessage:"Download as PPTX",id:"MbQGjmBtrT"}),dG=93,A8e=R.memo(()=>{const{assets:e}=Nf(),{result:{backend_uuid:t,frontend_context_uuid:n}}=ln(),{trackEvent:r}=je();return Ktn({onExit:a=>{r("answer mode tab exited",{answerMode:"apps",entryUUID:t,contextUUID:n,durationMs:a})}}),f.useMemo(()=>{let a=null;for(let i=e.length;i>=0;i--){const l=e[i];if(a=Qr(l).with({asset_type:Mt.APP,app:yu.nonNullable},({app:c})=>o.jsx(G7,{app:c})).with({asset_type:Mt.SLIDES,app:yu.nonNullable},({app:c})=>o.jsx(G7,{app:c})).otherwise(()=>null),a)break}return a},[e])});A8e.displayName="AppsMode";const fG=R.memo(({url:e,height:t,iframeRef:n})=>K0e(e)?null:o.jsx("div",{className:"scrollbar-subtle size-full",children:o.jsx("iframe",{ref:n,src:e,title:"Embedded App",sandbox:"allow-scripts allow-popups allow-popups-to-escape-sandbox allow-forms",referrerPolicy:"no-referrer",width:"100%",height:t?`${t}px`:"100%",loading:"eager",style:{colorScheme:"normal"}})}));fG.displayName="AppAssetIframe";const G7=R.memo(({app:e})=>{const t=f.useRef(null),{scrollContainerRef:n}=Za(),r=(n.current?.clientHeight??1e3)-dG,s=f.useMemo(()=>Js((a,i)=>{a.scrollIntoView({behavior:"smooth",block:"end"}),i&&(i.style.overflowY="hidden",i.style.overflowX="hidden")},100,{leading:!1,trailing:!0}),[]);return f.useEffect(()=>{const a=()=>{const i=document.activeElement,l=n.current;i===t.current&&i&&l?s(i,l):l&&l.style.overflowY==="hidden"&&(l.style.overflowY="auto",l.style.overflowX="auto")};return window.addEventListener("focus",a,!0),window.addEventListener("blur",a,!0),()=>{window.removeEventListener("focus",a,!0),window.removeEventListener("blur",a,!0)}},[s,n]),o.jsx("div",{className:"-mx-4 -mt-4",children:o.jsx(fG,{url:e.url,height:r,iframeRef:t})})});G7.displayName="AppAsset";const snn=e=>{const t=f.useRef(null),[n,r]=f.useState(1),s=f.useRef(null),a=f.useCallback(i=>{if(s.current&&(s.current.disconnect(),s.current=null),t.current=i,!i)return;const l=u=>{const d=u[0]?.contentRect.width??e,m=Math.min(1,d/e);r(m)};l([{contentRect:{width:i.clientWidth}}]);const c=new ResizeObserver(l);c.observe(i),s.current=c},[e]);return xf(()=>{s.current&&s.current.disconnect()}),f.useMemo(()=>({scale:n,containerRef:a}),[n,a])},I8e=R.memo(({app:e,entryUuid:t,assetUUID:n,asset:r})=>{const[s,a]=f.useState(!1),i=1200,{scale:l,containerRef:c}=snn(i),{$t:u}=Z(),{trackEvent:d}=je(),{assets:m}=Nf(),{getChainForAsset:p}=qtn();iV({assetType:Mt.APP,entryUUID:t,answerMode:"search",reason:"apps-mode"});const h=f.useCallback(()=>{const T=new URL(window.location.href);T.pathname=`/apps/${t}`,window.open(T.toString(),"_blank","noopener,noreferrer")},[t]),g=f.useMemo(()=>({height:`${i*(9/16)*l}px`}),[l]),{result:{context_uuid:y,backend_uuid:x},result:v}=ln(),{canUseCanvas:b,openCanvas:_,isCanvasOpen:w,doCanvasAction:C,canvasState:S,closeCanvas:E}=Tz(),M=f.useCallback(T=>{w&&S?.asset?.uuid===n?E():(_(),C({type:"setAsset",asset:r,result:v}),C({type:"setTab",tab:Gb.Preview}),d("canvas opened",{source:"click",contextUUID:y,entryUUID:x,contentType:r.asset_type,assetUUID:r.uuid})),T.preventDefault()},[r,C,_,v,w,S?.asset?.uuid,n,E,d,y,x]),k=Jtn(m),N=Xtn(r),P=f.useMemo(()=>{const T=p(r);if(!T||!r.version_info?.[0]?.artifact_id)return 1;const I=r.version_info[0].artifact_id,U=T.artifactIds.indexOf(I);return U===-1?1:U+1},[r,p]),L=f.useMemo(()=>K0e(e.url)?null:o.jsx("iframe",{src:e.url,title:"Embedded App",sandbox:"allow-scripts allow-popups allow-popups-to-escape-sandbox allow-forms",referrerPolicy:"no-referrer",width:`${i}px`,height:`${i*(9/16)}px`,loading:"eager",className:"absolute left-0 top-0 origin-top-left",onLoad:()=>{a(!0)},style:{colorScheme:"normal",transform:`scale(${l})`}}),[e.url,l]),O=f.useCallback(()=>{d("generated asset downloaded",{assetType:Mt.CODE_FILE,answerMode:"apps",entryUUID:t,reason:"powerpoint-export"})},[t,d]),A=f.useCallback(()=>{d("generated asset downloaded",{assetType:Mt.SLIDES,answerMode:"apps",entryUUID:t,reason:"pdf-export"})},[t,d]),j=f.useMemo(()=>{const T=p(r);return T?.assets.length&&T.assets.length>1},[r,p]);return o.jsxs("div",{className:"flex flex-col gap-3",children:[b?o.jsx(R8e,{app:e,preview:L,iframeLoaded:s,containerRef:c,onClick:M,isOpen:w&&S?.asset?.uuid===n,isSlidesAsset:N,versionNumber:P,hasMultipleVersions:!!j}):o.jsx(H,{className:"relative aspect-video w-full overflow-hidden rounded-lg border shadow-sm",style:g,variant:"raised",as:"figure",ref:c,children:L}),!b&&o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(Ye,{href:"#",onClick:h,"aria-label":u({defaultMessage:"View full screen",id:"nnujdEvOPI"}),className:"text-quiet hover:text-super inline-flex items-center gap-1.5 text-xs font-normal transition-opacity",children:[o.jsx(le,{icon:xde,size:"xs",className:"-mt-px"}),u({defaultMessage:"View full screen",id:"nnujdEvOPI"})]}),k&&o.jsxs(Ye,{href:k,download:!0,onClick:O,"aria-label":u(jce),className:"text-quiet hover:text-super inline-flex cursor-pointer items-center gap-1.5 text-xs font-normal transition-opacity",children:[o.jsx(le,{icon:Vk,size:"xs",className:"-mt-px"}),o.jsx(he,{...jce})]}),N&&o.jsxs(Ye,{href:`${e.url}?print=1`,target:"slidesPrintWindow",onClick:A,"aria-label":u(Nce),className:"text-quiet hover:text-super inline-flex items-center gap-1.5 text-xs font-normal transition-opacity",children:[o.jsx(le,{icon:Dm,size:"xs",className:"-mt-px"}),o.jsx(he,{...Nce})]})]})]})},({app:e,...t},{app:n,...r})=>Pa(t,r)&&ys(e,n)),R8e=R.memo(({app:e,preview:t,containerRef:n,onClick:r,isOpen:s,iframeLoaded:a,isSlidesAsset:i,versionNumber:l,hasMultipleVersions:c})=>{const{$t:u}=Z(),{isMobileStyle:d}=Ce();return o.jsxs(H,{variant:"subtler",className:`gap-md p-md duration-quick group relative flex items-center overflow-hidden rounded-xl border pl-[20px] ${s?"!border-super":""}`,children:[o.jsx(H,{variant:"super",className:"flex size-12 shrink-0 items-center justify-center rounded-md",children:o.jsx(le,{icon:i?yde:OD,size:"lg",className:"text-inverse"})}),o.jsxs("div",{className:"flex min-w-0 flex-col gap-0.5",children:[o.jsx(F,{variant:d?"smallBold":"baseSemi",className:"line-clamp-2 leading-tight",children:e.description}),o.jsx(F,{variant:d?"tiny":"small",color:"light",children:s?u({defaultMessage:"Currently viewing",id:"k6ckn3i+Al"}):`${u(i?{defaultMessage:"Presentation",id:"7zHbpiyvPE"}:{defaultMessage:"Generated App",id:"t7mMyC1O7+"})}${c?`  v${l}`:""}  ${u({defaultMessage:"Click to preview",id:"nkNy+5FSdw"})}`})]}),o.jsx("div",{className:"pointer-events-none -mb-7 ml-auto hidden min-w-0 shrink-0 md:block",children:o.jsx("div",{className:"duration-normal aspect-video w-44 ease-in-out group-hover:-translate-y-1",children:o.jsx(H,{className:V("relative size-full overflow-hidden rounded-lg border shadow-sm",{hidden:!a}),variant:"raised",as:"figure",ref:n,children:t})})}),o.jsx("button",{className:"absolute inset-0 cursor-pointer appearance-none",onClick:r})]})});R8e.displayName="AppCard";I8e.displayName="ResponsiveAppAsset";const ann=Object.freeze(Object.defineProperty({__proto__:null,ANSWER_MODE_TABS_HEIGHT:dG,AppAssetIframe:fG,AppsMode:A8e,ResponsiveAppAsset:I8e},Symbol.toStringTag,{value:"Module"})),inn=(e,t,n=!1)=>{const[r,s]=f.useState(!1),[a,i]=f.useState(!1),l=f.useContext(CV),c=f.useRef(l?.scrollContainerRef?.current??null),u=f.useCallback(()=>{if(!n)return;const d=e?.current;d&&(r||(i(!0),d.scrollTo({top:d.scrollHeight,behavior:"smooth"}),setTimeout(()=>{i(!1)},500)))},[n,e,r]);return f.useEffect(()=>{const d=m=>{const p=c?.current;m&&p&&setTimeout(function h(g=0,y=0){const x=m.getBoundingClientRect().top;if(g!==x&&y<100){setTimeout(()=>h(x,++y),20);return}const v=p.scrollTop??0,b=x+v-dG;requestAnimationFrame(()=>p.scrollTo({top:b,behavior:"smooth"}))},20)};t&&setTimeout(()=>{const m=document.getElementById(t);if(m){const p=m.closest(".group\\/goal");p&&d(p)}},150)},[t]),f.useEffect(()=>{const d=()=>{const p=e?.current;if(!p||a)return;const h=p.scrollHeight-p.scrollTop<=p.clientHeight+10;s(!h)},m=e?.current;if(m)return m.addEventListener("scroll",d),()=>m.removeEventListener("scroll",d)},[e,a]),f.useMemo(()=>({handleAnimationComplete:u}),[u])},ahn=(e,t,n,r,s)=>e.map((a,i)=>{const l=t?.id===a.id,c=t&&e.indexOf(t)>e.indexOf(a)||n;let u="planned";return c?u="finished":l&&(u="loading"),{...a,key:`${r}-${a.id?a.id+"-":""}${i}`,id:a.id??`${r}-${i}`,status:u,planType:r,animateEntry:!(i===0&&s.skipFirstAnimation)&&!c,web_results:s.web_results,isFinalGoal:!1,title:a?.description??s.$t({defaultMessage:"Thinking",id:"P1QHV0AhYD"})}}),onn=({researchPlan:e,steps:t,reasoningPlan:n,isProReasoningMode:r,hasAnswer:s,searchMode:a,focusStepUUID:i,autoScroll:l=!1})=>{const{askInputReasoningMode:c}=rr(),{scrollContainerRef:u}=Za(),{result:{backend_uuid:d,blocks:m,attachments:p,attachment_processing_progress:h,display_model:g},isAnswerSkipped:y,hasPendingFiles:x}=ln(),v=typeof r=="boolean"?r:c,b=i8e({researchPlan:e,reasoningPlan:n,blocks:m??[],hasAnswer:s,isProReasoningMode:v,displayModel:g}),_=Htn({researchPlan:e,steps:t??[],searchMode:a,isResearchPlanFinished:b.isResearchPlanFinished,backendUUID:d??""}),w=$tn({hasPendingFiles:x,attachments:p,attachment_processing_progress:h}),C=Wtn({isAllPlansFinished:b.isAllPlansFinished,researchPlan:e,reasoningGoals:b.reasoningGoals,isStudio:a===ce.STUDIO,hasPendingFiles:x,displayModel:g}),S=inn(u,i,l);return f.useMemo(()=>({...b,..._,...C,...S,...w,isProReasoningMode:v,searchMode:a,isAnswerSkipped:y}),[b,_,C,S,w,v,a,y])};function P8e({entryUUID:e,reason:t,callback:n}){const[r,s]=f.useState(!1),a=f.useRef(!1),{inFlight:i}=Ht();return f.useEffect(()=>{!i&&a.current&&(a.current=!1,s(!1),n())},[i,n]),{terminateEntry:()=>{a.current=!0,s(!0),Au({entryUUID:e,reason:t})},isTerminating:r}}const lnn=(e,t)=>{const{value:n,loading:r}=Dt({flag:"generative-refinement",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function cnn(){const{result:e,refinementFiltersData:t,selectedRefinementQuery:n,selectedFilterIds:r,actions:{setSelectedRefinementQuery:s,setSelectedFilterIds:a},submitQuery:i,result:{query_str:l}}=ln(),{trackEvent:c}=je(),{currentModeData:{mode:u}}=Nf(),{variation:d,loading:m}=lnn(!1),p=t?.refinement_filters,h=f.useMemo(()=>t?.original_query??l??"",[t?.original_query,l]),g=f.useMemo(()=>r.map(P=>p?.find(L=>L.id===P)?.label).filter(P=>!!P),[r,p]),y=f.useCallback(P=>{c("refinement filter clicked",{filters:p?.filter(L=>L.id===P),answerMode:u})},[p,u,c]),x=f.useCallback(()=>{c("refinement filters reset",{answerMode:u})},[u,c]),v=f.useCallback(()=>{c("refinement filters applied",{answerMode:u,filters:p?.filter(P=>r.includes(P.id))})},[u,c,p,r]),[b,_]=f.useState(!1),w=f.useCallback(P=>{const L=r.includes(P);let O;L?O=r.filter(A=>A!==P):O=[...r,P],a(O),y(P)},[r,a,y]),C=f.useCallback(()=>{s(h),a([]),x()},[a,s,h,x]),S=f.useCallback(()=>{i({rawQuery:h,existingEntryUUID:e.backend_uuid,newFrontendContextUUID:null,collection:null,promptSource:"user",querySource:"refinement-pill",refinementFiltersMetadata:{refinement_filters:p,selected_filter_ids:[],original_query:h}}),x()},[e.backend_uuid,p,h,i,x]),E=f.useCallback(()=>{s(null),a([...t?.selected_filter_ids??[]])},[s,a,t]),M=f.useCallback(async()=>{if(g.length===0)return h;_(!0);try{const P=await iAt({query:h,keywords:g,reason:"refinement-query"});return P||g.join(" ")+" "+h}catch{return g.join(" ")+" "+h}finally{_(!1)}},[g,h]),k=f.useCallback(async()=>{const P=await M();s(P),P&&(i({rawQuery:P,existingEntryUUID:e.backend_uuid,newFrontendContextUUID:null,collection:null,promptSource:"user",querySource:"refinement-pill",refinementFiltersMetadata:{refinement_filters:p,selected_filter_ids:r,original_query:h}}),v())},[M,s,i,e.backend_uuid,p,r,h,v]),N=f.useCallback(async()=>{const P=await M();s(P),v()},[M,s,v]);return{refinementFilters:d&&!m?p:null,selectedRefinementQuery:n,selectedFilterIds:r,handleFilterClickAnswerMode:w,handleResetClickAnswerMode:C,handleResetClickDefaultMode:S,handleApplyClickDefaultMode:k,handleApplyClickAnswerMode:N,isRefinementLoading:b,handleResetToOriginalState:E,originalQuery:h}}const q7=f.memo(({title:e,filters:t,selectedFilterIds:n,onFilterClick:r,isOpen:s,onToggle:a,useCheckboxes:i=!1})=>o.jsxs(H,{className:"cursor-pointer border-b",children:[o.jsxs(H,{onClick:a,className:"p-md group flex w-full cursor-pointer items-center",children:[o.jsx("div",{className:"flex-1",children:o.jsx(F,{variant:"smallBold",children:e})}),o.jsx("div",{className:"pl-md",children:o.jsx(ve.div,{animate:{rotate:s?180:0},transition:{duration:.2,ease:an},className:"text-quiet group-hover:text-foreground",style:{transformOrigin:"center"},children:o.jsx(Bn,{size:18,strokeWidth:2.5})})})]}),o.jsx(na,{transition:{duration:.2,ease:an},children:s&&o.jsx(is,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:an},children:o.jsx("div",{className:"px-md pb-md",children:i?o.jsx("div",{className:"gap-xs flex flex-col",children:t.map(l=>o.jsxs("div",{className:"py-xs flex cursor-pointer items-center justify-between",onClick:()=>r(l.id),children:[o.jsx(F,{variant:"small",children:l.label}),o.jsx(B_,{checked:n?.includes(l.id)??!1,toggleChecked:()=>r(l.id),variant:"small"})]},l.id))}):o.jsx("div",{className:"gap-sm flex flex-wrap",children:t.map(l=>o.jsx(pe,{text:l.label,size:"small",variant:n?.includes(l.id)?"common":"border",onClick:()=>r(l.id),extraCSS:"flex-shrink-0"},l.id))})})})})]}));q7.displayName="FilterSection";const O8e=f.memo(({refinementFilters:e,handleFilterClick:t,selectedFilterIds:n,isOpen:r,setIsOpen:s,handleResetClick:a,handleApplyClick:i,isLoading:l=!1})=>{const{isMobileStyle:c}=Ce(),{$t:u}=Z(),d=f.useMemo(()=>e?.filter(b=>b.refinement_filter_type==="DYNAMIC")??[],[e]),m=f.useMemo(()=>{const b={};return e?.filter(_=>_.refinement_filter_type==="STATIC").forEach(_=>{const w=_.category||"Other";b[w]||(b[w]=[]),b[w].push(_)}),b},[e]),[p,h]=f.useState(()=>{const b={"Quick filters":!0};return d.some(w=>n?.includes(w.id))&&(b["Quick filters"]=!0),Object.entries(m).forEach(([w,C])=>{const S=C.some(E=>n?.includes(E.id));b[w]=S}),b}),g=f.useCallback(b=>{h(_=>({..._,[b]:!_[b]}))},[]),y=f.useCallback(()=>{s(!1)},[s]),x=f.useCallback(()=>g("Quick filters"),[g]);return f.useMemo(()=>d.length>0||Object.keys(m).length>0,[d,m])?o.jsx(on,{modalContentClassname:"!py-0 mb-0 min-h-0 px-0",modalClassname:V("[&_>div]:min-h-0",!c&&"!w-[300px] !min-w-[300px]"),isOpen:r,onClose:y,variant:c?"bottom-sheet":"side-sheet",includeBlur:!1,removeScroll:!1,transparent:!0,renderCloseButton:!1,headerClassname:"hidden",children:o.jsxs("div",{className:"-mx-md flex min-h-0 flex-1 flex-col",children:[o.jsxs(H,{className:"p-md flex items-center justify-between border-b",children:[o.jsx(F,{variant:"smallBold",children:u({defaultMessage:"Filters",id:"zSOvI0LO0n"})}),o.jsx("button",{onClick:y,className:"text-quiet hover:text-foreground cursor-pointer",children:o.jsx(le,{icon:It,size:"md"})})]}),o.jsxs("div",{className:"scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:[d.length>0&&o.jsx(q7,{title:"Recommended",filters:d,selectedFilterIds:n,onFilterClick:t,isOpen:p["Quick filters"]??!0,onToggle:x}),Object.entries(m).map(([b,_])=>o.jsx(q7,{title:b,filters:_,selectedFilterIds:n,onFilterClick:t,isOpen:p[b]??!1,onToggle:()=>g(b),useCheckboxes:!0},b))]}),o.jsxs("div",{className:"gap-md p-md flex pb-0",children:[o.jsx(pe,{text:u({defaultMessage:"Reset",id:"jm/spnRSn+"}),size:"regular",variant:"common",onClick:a,extraCSS:"flex-1"}),o.jsx(pe,{text:u({defaultMessage:"Apply",id:"EWw/tKINJT"}),size:"regular",variant:"primary",onClick:i,extraCSS:"flex-1",disabled:l,isLoading:l})]})]})}):null});O8e.displayName="RefinementSidePanel";const unn=10,dnn=async({request:e,reason:t})=>{if(e.page&&e.page>unn)throw new Error("Max search results page number is too large");return(await ae.POST("/rest/sources/search",t,{body:{entry_uuid:e.entry_uuid,limit:e.limit,page:e.page??null},timeoutMs:en.MEDIUM})).data},fnn=({reason:e})=>{const{mutate:t,data:n,isPending:r}=St({mutationFn:async s=>(await dnn({request:s,reason:e})).results});return f.useMemo(()=>({isSearchResultsLoading:r,searchResults:n,fetchSearch:t}),[t,r,n])};function L8e(){const{value:e}=Dt({flag:"move-citations-to-paragraph-end",subjectType:"visitor_id",defaultValue:!0});return e}typeof globalThis<"u"&&(globalThis.__useMoveCitationsToParagraphEnd=L8e);const D8e=R.memo(({webResult:e,citationIndex:t,isRelatedResult:n,linkOnClick:r,imageToShow:s})=>{const{$t:a,formatDate:i}=Z(),l=f.useMemo(()=>ha(e.url),[e.url]),c=f.useMemo(()=>R_(e.url),[e.url]),u=e.is_client_context,d=pn(),m=f.useMemo(()=>e.meta_data?.domain_name??l.replace(/\.[^.]*$/,""),[l,e.meta_data?.domain_name]),p=hi(e.url),h=W0e(e),g=e.meta_data?.connection_type,y=L8e(),x=e.meta_data?.repo_type,v=!u||d,b=m5(e),_=xut(e),w=D_(e),C=()=>x=="COLLECTION"?a({defaultMessage:"Space Context",id:"wGTk8CFt1g"}):x=="USER"?a({defaultMessage:"My Files",id:"AjhJXSvkRs"}):x=="ORG"?a({defaultMessage:"Org Files",id:"DaFSYzpM1Q"}):a({defaultMessage:"Attachment",id:"eLCAEP8LHj"}),S=()=>e.meta_data?.repo_type=="COLLECTION"?a({defaultMessage:"File",id:"gyrIElu9qY"}):e.meta_data?.connection_type?frt(e.meta_data.connection_type):a({defaultMessage:"Local upload",id:"fscjAJoLwa"}),E=f.useMemo(()=>o.jsx(Pt,{size:"tiny",showBackground:!1,rounded:!1,user:Bi(g)??void 0}),[g]);let M=null,k="",N=null;if(p||h||g&&g!==Ot.WILEY)M=o.jsx("div",{className:"bg-subtler flex size-7 items-center justify-center rounded-full",children:g?o.jsx(le,{icon:Mue,size:"xl",badge:E}):o.jsx(le,{icon:wu,className:"size-md",size:"xl"})}),N=o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:S()}),k=C();else if(b&&!w)M=o.jsx("div",{className:"bg-subtle flex size-7 items-center justify-center rounded-full",children:o.jsx(le,{size:"xl",icon:e.is_memory?sc:bp})}),N=o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:e.timestamp&&i(e.timestamp,{dateStyle:"long"})}),k=e?.is_memory?a({defaultMessage:"Memory",id:"dVx3yznM2C"}):a({defaultMessage:"Library",id:"StcK672jB9"});else{const P=g===Ot.WILEY?Nu:void 0;M=o.jsx(pl,{size:28,domain:c,className:"size-full rounded-full",overrideIconUrl:P}),k=m,N=w?o.jsxs("div",{className:"gap-xs -ml-two flex flex-row items-center",children:[o.jsx(F,{variant:"tiny",color:"super",className:"-translate-y-px",children:o.jsx(le,{size:"xs",icon:y1})}),o.jsx(F,{variant:"tinyRegular",color:"super",className:"line-clamp-1",children:o.jsx(he,{defaultMessage:"Personal Search",id:"TZougEncQH",description:"subtitle"})})]}):o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:ict(z0e(e.url))})}return o.jsx("div",{className:"gap-md relative items-start",children:o.jsxs("div",{className:"gap-lg relative flex w-full flex-row items-center lg:pl-0",children:[o.jsxs("div",{className:"grow",children:[o.jsxs(Ye,{href:e.url,className:V("group/source flex flex-1 flex-col gap-1",{"cursor-pointer":!p&&v}),onClick:r,children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[o.jsx("div",{className:"size-7 shrink-0",children:M}),o.jsxs("div",{className:"flex flex-1 flex-col",children:[o.jsx("div",{className:"flex flex-row items-center gap-1.5",children:o.jsxs(F,{variant:"tiny",className:"line-clamp-1",children:[!n&&t&&!y?t+". ":null,k]})}),N]}),b&&o.jsx(F,{variant:"tiny",color:"light",children:o.jsx(le,{size:"xs",icon:y1})})]}),_?null:o.jsx(F,{variant:"baseSemi",color:"super",className:V("line-clamp-1 transition-colors duration-300",{"group-hover/source:text-super":!p&&v}),children:e.name})]}),o.jsx(F,{variant:"small",color:"light",className:V("line-clamp-3 whitespace-pre-wrap",{"pt-2":_}),children:e.meta_data?.generated_file_description??e.meta_data?.description??e.snippet})]}),s&&o.jsxs(Ye,{href:e.url,className:"relative ml-auto hidden aspect-square h-fit w-20 shrink-0 cursor-pointer overflow-hidden rounded-md sm:block",onClick:r,children:[o.jsx(Ss,{src:s,alt:"image",containerClassName:"absolute inset-0",imageClassName:"absolute inset-0 object-cover object-center w-full h-full",includeLightBoxModal:!1}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})]})})});D8e.displayName="PrimitiveSourcesRow";const mG=R.memo(({webResult:e,citationIndex:t,isRelatedResult:n})=>{const r="sources-row",{result:{backend_uuid:s,context_uuid:a,frontend_context_uuid:i}}=ln(),l=Jn(),c=pn(),u=hi(e.url),{trackEvent:d}=je(),m=f.useCallback((C,S)=>{c&&l.openTab({url:C,tabId:S})},[c,l]),{mutate:p}=p0e({reason:r,onSuccess:c?m:void 0}),h=aG(),g=m5(e),y=D_(e),{getImageDownloadUrl:x}=eW({reason:r}),[v,b]=f.useState(null);f.useEffect(()=>{v===null&&(async()=>{if(!u){b(e.url);return}if(JB(e.url)){b(e.url);return}try{const S=await x({url:e.url,thread_id:s});b(S)}catch(S){ne.error(`Failed to fetch image source ${S}`),b(e.url)}})()},[x,s,e,u,v]),f.useEffect(()=>{d("source card viewed",{citation_url:e.url,position:t,title:e.name,contextUUID:a,frontendContextUUID:i,entryUUID:s,source:n?"sourcesTabViewMore":"sourcesTab"})},[e,d,t,n,a,i,s]);const _=f.useCallback(C=>{try{const E=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":n?"sourcesTabViewMore":"sourcesTab",M=Vve(e),{type:k,memoryKey:N}=M;d("click citation",{citation_url:e.url,contextUUID:a,frontendContextUUID:i,entryUUID:s,isMemory:e.is_memory,isConversationHistory:e.is_conversation_history,source:E,...k==="memory"&&{memory_key:N}})}catch(E){ne.error("Failed to send click citation event:",E)}if(g&&!y){C.preventDefault(),h(e);return}if(dx(e)){C.preventDefault(),p({file_url:e.url});return}if(o5(C)){C.preventDefault(),l.openTab({url:e.url,tabId:e.tab_id});return}},[g,e,n,d,a,i,s,h,l,p,y]),w=f.useMemo(()=>{if(u)return v;if(typeof e.meta_data?.image_url=="string")return e.meta_data.image_url;if(typeof e.meta_data?.images?.[0]=="string")return e.meta_data.images[0];if(typeof e.meta_data?.images?.[0]?.src=="string")return e.meta_data.images[0].src},[u,e,v]);return o.jsx(D8e,{webResult:e,citationIndex:t,isRelatedResult:n,linkOnClick:_,imageToShow:w})});mG.displayName="SourcesRow";var mnn={};const pnn=10,hnn=pn(),F8e=R.memo(()=>{const e="sources-mode",{$t:t}=Z(),n=U8e({dedupeAttachments:!0}),{isEntryInFlight:r,result:s}=ln(),{fetchSearch:a,isSearchResultsLoading:i}=fnn({reason:e}),[l,c]=f.useState(1),[u,d]=f.useState([]),m=lt(),{openModal:p}=wt(),h=f.useCallback(()=>{const x=l+1;a({entry_uuid:s.backend_uuid??"",limit:pnn,page:x},{onSuccess:v=>{d([...u,...v]),c(x)}})},[l,a,u,s.backend_uuid]),g=f.useCallback(()=>{if(!m){p("loginModal",{origin:De.SOURCES_VIEW_MORE});return}h()},[h,m,p]),y=!hnn&&!mnn.NEXT_PUBLIC_IS_SIDECAR_BUILD;return o.jsxs("div",{children:[o.jsx(Uh,{heading:n.selectedSources?.length>0?t({defaultMessage:"Attached",id:"2IacYt8NB7"}):void 0,sources:n.attachedSources}),o.jsx(Uh,{heading:n.attachedSources?.length>0?t({defaultMessage:"Sourced",id:"P5KqlvUgRC"}):void 0,sources:n.selectedSources}),o.jsx(Uh,{heading:t({defaultMessage:"Reviewed",id:"wiy+GNv+BV"}),sources:n.reviewedSources}),o.jsx(Uh,{heading:t({defaultMessage:"Reviewing",id:"L+ISAVX7+d"}),sources:n.reviewingSources,shimmer:!0}),o.jsx(Uh,{sources:n.unsortedSources}),y&&o.jsxs(Je,{mode:"wait",children:[l===1&&o.jsx(ve.div,{animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:no,className:"mt-md flex w-full items-center justify-center",children:o.jsx(pe,{variant:"common",isLoading:i||r,disabled:i||r,size:"small",text:t({defaultMessage:"View More",id:"QQSdHPJWXu"}),onClick:g,pill:!0})},"masher"),u.length>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"my-md md:mt-lg relative md:ml-0",children:[o.jsx("hr",{className:"bg-subtle absolute top-1/2 h-px w-full border-0"}),o.jsx(F,{variant:"tiny",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:t({defaultMessage:"More Results",id:"7S7CM3eEfJ"})})]}),o.jsx(H,{className:"py-sm flex flex-col gap-4",children:u.map((x,v)=>o.jsx(mG,{webResult:x,citationIndex:v,isRelatedResult:!0},x.url))})]}):null]})]})});F8e.displayName="SourcesMode";const Uh=R.memo(({sources:e,heading:t,shimmer:n=!1})=>e.length===0?null:o.jsxs("div",{className:"my-md md:mt-lg group first:mt-0",children:[t?o.jsxs("div",{className:"mb-md relative",children:[o.jsx("hr",{className:"bg-subtle absolute top-1/2 h-px w-full border-0 group-first:hidden"}),o.jsx("div",{className:"bg-base",children:o.jsx(F,{variant:"tiny",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:o.jsx(wn,{variant:"super",active:n,as:"span",children:t})})})]}):null,o.jsx(H,{className:"flex flex-col gap-4",children:e.map(r=>o.jsx(mG,{webResult:r.web_result,citationIndex:r.citation},r.web_result?.url))})]}));Uh.displayName="SourcesModeSection";const U8e=({dedupeAttachments:e=!1})=>{const{result:t,blocksByIntendedUsage:{sources_answer_mode:n}}=ln(),r=gnn({attachments:t.attachments??fe});return f.useMemo(()=>{const s=new Map,a=[];for(const m of n?.sources_mode_block?.rows??[]){const p=m.web_result?.is_attachment&&!H0e(m.web_result);if(p&&a.push(m),!p||!e){const h=s.get(m.status)??[];h.push(m),s.set(m.status,h)}}const i=s.get(_C.SELECTED)??fe,l=s.get(_C.REVIEWED)??fe,c=s.get(_C.REVIEWING)??fe,u=s.get(_C.UNSORTED)??fe;a.length===0&&r.length>0&&a.push(...r);const d=[...i,...l,...c,...u].slice(0,3)?.map(m=>m.web_result?.url??"");return{attachedSources:a,selectedSources:i,reviewedSources:l,reviewingSources:c,unsortedSources:u,topSources:d}},[e,r,n?.sources_mode_block?.rows])},gnn=({attachments:e})=>e.map(t=>({web_result:{name:u5(t),url:t,is_attachment:!0,is_image:hi(t),is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!1,sitelinks:[],snippet:"",timestamp:"",meta_data:{},inline_entity_id:""},status:"UNKNOWN",citation:0})),B8e=f.memo(({...e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:1152,height:24,viewBox:"0 0 1152 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.75,...e,children:[o.jsx("path",{strokeOpacity:.2,d:"M9.056 19.122c-1.794.845-3.353 1.105-4.315.598-2.092-1.105-.533-5.471 3.47-9.734.39-.416.793-.82 1.196-1.21m5.563-3.911c1.781-.845 3.34-1.105 4.289-.598 2.092 1.105.533 5.47-3.47 9.734-.386.411-.784.81-1.196 1.196m4.536-.247c.845 1.794 1.105 3.353.598 4.315-1.105 2.092-5.471.533-9.734-3.47-.416-.39-.819-.793-1.209-1.196M4.871 9.024c-.845-1.781-1.105-3.34-.598-4.29 1.105-2.091 5.471-.532 9.734 3.47.412.386.81.785 1.196 1.197"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M13.306 12a1.3 1.3 0 1 0-2.6 0 1.3 1.3 0 0 0 2.6 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M33.057 19.12c-1.793.846-3.352 1.106-4.314.599-2.092-1.105-.533-5.471 3.469-9.733.388-.412.787-.815 1.195-1.208m5.562-3.912c1.78-.845 3.339-1.104 4.288-.598 2.092 1.104.533 5.47-3.469 9.733-.385.411-.784.81-1.195 1.195m4.534-.246c.845 1.793 1.105 3.352.598 4.314-1.104 2.092-5.47.533-9.733-3.47a35.174 35.174 0 0 1-1.208-1.194m-3.911-5.576c-.845-1.78-1.105-3.34-.598-4.288 1.104-2.092 5.471-.533 9.733 3.469.416.39.819.793 1.195 1.195"}),o.jsx("path",{strokeLinejoin:"round",d:"M28.873 9.024c-.404-.852-.674-1.653-.791-2.361"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M37.31 12a1.303 1.303 0 1 0-2.605-.001 1.303 1.303 0 0 0 2.605 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M57.058 19.117c-1.792.844-3.351 1.104-4.312.597-2.091-1.104-.532-5.468 3.468-9.727.389-.412.787-.815 1.195-1.208m5.559-3.909c1.779-.844 3.338-1.104 4.286-.597 2.091 1.104.532 5.468-3.468 9.727-.39.416-.792.818-1.195 1.195m4.532-.247c.844 1.792 1.104 3.351.597 4.312-1.104 2.091-5.468.532-9.727-3.468a34.994 34.994 0 0 1-1.208-1.195m-3.908-5.57c-.844-1.78-1.104-3.339-.597-4.287 1.104-2.09 5.468-.532 9.727 3.468.416.39.818.792 1.195 1.195"}),o.jsx("path",{strokeLinejoin:"round",d:"M52.877 9.026c-.844-1.779-1.104-3.338-.597-4.286.084-.16.188-.298.308-.416"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M61.32 12a1.313 1.313 0 1 0-2.626 0 1.313 1.313 0 0 0 2.626 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M81.061 19.111c-1.791.843-3.348 1.103-4.308.597-2.089-1.103-.532-5.463 3.465-9.719.388-.412.786-.814 1.194-1.207m5.553-3.906c1.778-.843 3.335-1.103 4.282-.597 2.089 1.103.532 5.463-3.465 9.72-.389.414-.791.817-1.194 1.193m4.529-.246c.843 1.791 1.103 3.348.597 4.308-1.103 2.09-5.463.532-9.719-3.465a35.026 35.026 0 0 1-1.207-1.194M76.883 9.03c-.843-1.778-1.103-3.335-.597-4.282 1.103-2.089 5.463-.532 9.719 3.465.41.385.81.783 1.194 1.194"}),o.jsx("path",{strokeLinejoin:"round",d:"M76.883 9.029c-.843-1.778-1.103-3.335-.597-4.282.44-.833 1.398-1.086 2.661-.836"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M85.337 12a1.33 1.33 0 1 0-2.661 0 1.33 1.33 0 0 0 2.661 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M105.064 19.102c-1.789.842-3.344 1.102-4.303.596-2.087-1.102-.531-5.456 3.46-9.707.387-.411.785-.813 1.192-1.205m5.548-3.901c1.776-.842 3.331-1.102 4.277-.596 2.087 1.102.531 5.456-3.461 9.707-.389.415-.791.817-1.192 1.192m4.524-.246c.842 1.789 1.102 3.344.596 4.303-1.102 2.087-5.456.531-9.707-3.461a34.803 34.803 0 0 1-1.205-1.192m-3.902-5.56c-.842-1.776-1.102-3.331-.596-4.277 1.102-2.087 5.456-.531 9.707 3.46.41.384.808.782 1.192 1.192"}),o.jsx("path",{strokeLinejoin:"round",d:"M100.891 9.032c-.842-1.776-1.102-3.331-.596-4.277.684-1.296 2.624-1.187 5.014.038"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M109.36 12a1.354 1.354 0 1 0-2.707 0 1.354 1.354 0 0 0 2.707 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M129.069 19.092c-1.786.841-3.339 1.1-4.296.595-2.083-1.1-.531-5.448 3.455-9.693.388-.414.789-.815 1.191-1.204m5.538-3.895c1.773-.841 3.326-1.1 4.271-.595 2.083 1.1.531 5.448-3.455 9.693-.388.414-.789.815-1.191 1.191m4.516-.246c.841 1.786 1.1 3.339.595 4.296-1.1 2.083-5.448.531-9.693-3.455a34.726 34.726 0 0 1-1.204-1.191m-3.894-5.551c-.841-1.773-1.1-3.326-.595-4.271 1.1-2.084 5.448-.531 9.693 3.455.41.384.807.781 1.191 1.191"}),o.jsx("path",{strokeLinejoin:"round",d:"M124.902 9.037c-.841-1.773-1.1-3.326-.595-4.271.871-1.651 3.781-1.02 7.063 1.296"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M133.389 12a1.383 1.383 0 1 0-2.766 0 1.383 1.383 0 0 0 2.766 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M153.074 19.079c-1.783.84-3.333 1.098-4.289.594-2.08-1.098-.53-5.438 3.449-9.676.388-.413.788-.814 1.188-1.201m5.53-3.888c1.77-.84 3.32-1.098 4.263-.594 2.08 1.098.53 5.438-3.449 9.676-.383.409-.779.805-1.188 1.188m4.508-.246c.84 1.783 1.098 3.333.594 4.289-1.098 2.08-5.438.53-9.676-3.45a35.478 35.478 0 0 1-1.201-1.187m-3.888-5.542c-.84-1.77-1.098-3.32-.594-4.263 1.098-2.08 5.438-.53 9.676 3.449.413.388.814.788 1.188 1.188"}),o.jsx("path",{strokeLinejoin:"round",d:"M148.915 9.042c-.84-1.77-1.098-3.32-.594-4.263 1.043-1.976 5.013-.675 9.04 2.87"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M157.424 12a1.42 1.42 0 0 0-2.419-1.001 1.42 1.42 0 0 0-.416 1.001 1.42 1.42 0 0 0 2.419 1.002 1.42 1.42 0 0 0 .416-1.002Z"}),o.jsx("path",{strokeOpacity:.2,d:"M177.08 19.065c-1.779.838-3.326 1.096-4.28.593-2.076-1.096-.529-5.427 3.442-9.656.387-.413.786-.812 1.186-1.199m5.518-3.88c1.766-.839 3.313-1.097 4.254-.594 2.076 1.096.529 5.427-3.442 9.656-.382.408-.778.804-1.186 1.186m4.499-.245c.838 1.78 1.096 3.326.593 4.28-1.096 2.076-5.427.53-9.656-3.442a35.011 35.011 0 0 1-1.199-1.186"}),o.jsx("path",{strokeOpacity:.2,d:"M172.929 9.048c-.838-1.766-1.096-3.313-.593-4.254 1.096-2.076 5.427-.529 9.656 3.442.408.382.804.778 1.186 1.186"}),o.jsx("path",{strokeLinejoin:"round",d:"M172.929 9.048c-.838-1.766-1.096-3.313-.593-4.254 1.096-2.076 5.427-.529 9.656 3.442.408.382.804.778 1.186 1.186"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M181.463 12a1.457 1.457 0 1 0-2.913 0 1.457 1.457 0 0 0 2.913 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M201.087 19.049c-1.775.836-3.319 1.093-4.27.592-2.071-1.093-.527-5.415 3.434-9.634.385-.408.779-.807 1.183-1.196m5.505-3.873c1.762-.836 3.306-1.093 4.245-.592 2.071 1.093.527 5.415-3.434 9.634-.381.407-.776.802-1.183 1.183m4.488-.243c.836 1.775 1.093 3.319.592 4.27-1.093 2.071-5.415.527-9.634-3.434-.408-.385-.807-.78-1.196-1.183"}),o.jsx("path",{d:"M211.055 14.92c.615 1.305.916 2.484.834 3.396"}),o.jsx("path",{strokeOpacity:.2,d:"M196.945 9.054c-.836-1.762-1.093-3.306-.592-4.245 1.093-2.071 5.415-.527 9.634 3.434.412.386.81.785 1.183 1.183"}),o.jsx("path",{strokeLinejoin:"round",d:"M197.355 3.996c1.797-.552 5.248 1.07 8.632 4.248l1.183 1.183"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M205.507 12a1.507 1.507 0 0 0-.439-1.06 1.51 1.51 0 0 0-1.061-.44 1.5 1.5 0 1 0 1.5 1.5Z"}),o.jsx("path",{strokeOpacity:.2,d:"M225.094 19.032c-1.771.834-3.311 1.091-4.26.59-2.066-1.09-.526-5.402 3.426-9.61.385-.412.783-.809 1.18-1.194m5.492-3.863c1.758-.834 3.298-1.09 4.234-.59 2.066 1.091.526 5.402-3.426 9.611-.381.406-.774.8-1.18 1.181m4.478-.244c.834 1.771 1.091 3.31.59 4.26-1.091 2.066-5.402.526-9.611-3.426a34.75 34.75 0 0 1-1.193-1.18"}),o.jsx("path",{d:"M235.038 14.913c.834 1.771 1.091 3.31.59 4.26-.385.73-1.173 1.01-2.216.892"}),o.jsx("path",{strokeOpacity:.2,d:"M220.962 9.062c-.834-1.758-1.091-3.298-.59-4.234 1.091-2.066 5.402-.526 9.611 3.426.406.38.8.774 1.181 1.18"}),o.jsx("path",{strokeLinejoin:"round",d:"M226.732 5.678a23.344 23.344 0 0 1 3.25 2.576l1.181 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M229.554 12a1.547 1.547 0 1 0-3.095.001 1.547 1.547 0 0 0 3.095 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M249.101 19.013c-1.766.832-3.302 1.088-4.249.59-2.061-1.089-.525-5.389 3.417-9.587.384-.41.781-.806 1.177-1.19"}),o.jsx("path",{d:"m247.027 11.438 1.242-1.422 1.177-1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M254.925 4.973c1.753-.832 3.289-1.088 4.224-.589 2.061 1.088.525 5.388-3.417 9.586-.379.405-.772.798-1.177 1.177m4.465-.242c.832 1.766 1.088 3.302.589 4.25-1.088 2.06-5.388.524-9.586-3.418a34.575 34.575 0 0 1-1.19-1.177"}),o.jsx("path",{d:"M259.02 14.905c.832 1.766 1.088 3.302.589 4.25-.724 1.37-2.869 1.15-5.46-.313"}),o.jsx("path",{strokeOpacity:.2,d:"M244.98 9.07c-.832-1.754-1.088-3.29-.589-4.225 1.088-2.06 5.388-.525 9.586 3.417.41.384.806.781 1.177 1.177"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M253.603 12a1.596 1.596 0 1 0-3.192 0 1.596 1.596 0 0 0 3.192 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M273.109 18.995c-1.762.83-3.293 1.085-4.238.587-2.055-1.085-.523-5.374 3.408-9.561.383-.408.779-.804 1.174-1.187"}),o.jsx("path",{d:"M269.182 14.137c.734-1.301 1.781-2.714 3.097-4.115l1.174-1.187"}),o.jsx("path",{strokeOpacity:.2,d:"M278.917 4.992c1.749-.83 3.28-1.085 4.212-.587 2.055 1.085.523 5.374-3.408 9.56-.383.409-.779.805-1.174 1.175m4.454-.242c.83 1.762 1.085 3.293.587 4.238-1.085 2.055-5.374.523-9.561-3.408a34.4 34.4 0 0 1-1.187-1.174"}),o.jsx("path",{d:"M283.001 14.898c.83 1.762 1.085 3.293.587 4.238-.962 1.823-4.446.824-8.143-2.17"}),o.jsx("path",{strokeOpacity:.2,d:"M268.999 9.077c-.83-1.75-1.085-3.281-.587-4.212 1.085-2.055 5.374-.523 9.561 3.408.404.378.795.77 1.174 1.174"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M277.654 12a1.654 1.654 0 0 0-1.647-1.647A1.65 1.65 0 0 0 274.359 12a1.654 1.654 0 0 0 1.647 1.647A1.649 1.649 0 0 0 277.654 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M297.117 18.976c-1.757.828-3.284 1.082-4.226.586-2.05-1.082-.522-5.359 3.399-9.535.38-.404.771-.799 1.17-1.184"}),o.jsx("path",{d:"M292.005 17.363c.214-1.894 1.749-4.636 4.284-7.336l1.171-1.184"}),o.jsx("path",{strokeOpacity:.2,d:"M302.909 5.01c1.744-.826 3.272-1.081 4.201-.585 2.05 1.082.522 5.359-3.399 9.535-.382.407-.776.802-1.171 1.17"}),o.jsx("path",{strokeOpacity:.2,d:"M306.982 14.89c.828 1.757 1.082 3.284.586 4.226-1.082 2.05-5.359.522-9.535-3.4a35.405 35.405 0 0 1-1.184-1.17"}),o.jsx("path",{d:"M306.982 14.89c.828 1.757 1.082 3.284.586 4.226-1.082 2.05-5.359.522-9.535-3.4a35.405 35.405 0 0 1-1.184-1.17"}),o.jsx("path",{strokeOpacity:.2,d:"M293.017 9.085c-.827-1.744-1.082-3.272-.586-4.2 1.082-2.05 5.359-.523 9.535 3.398.403.378.794.768 1.171 1.171"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M301.705 12a1.697 1.697 0 1 0-3.395 0 1.697 1.697 0 0 0 3.395 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M321.124 18.957c-1.752.825-3.276 1.08-4.215.584-2.044-1.079-.521-5.345 3.39-9.509.381-.406.774-.8 1.168-1.18"}),o.jsx("path",{d:"M317.773 19.781a2.28 2.28 0 0 1-.863-.239c-2.044-1.079-.521-5.345 3.39-9.509.381-.406.774-.8 1.168-1.18"}),o.jsx("path",{strokeOpacity:.2,d:"M326.901 5.03c1.739-.825 3.263-1.079 4.19-.584 2.044 1.079.52 5.345-3.39 9.509-.381.406-.774.8-1.168 1.168m4.431-.241c.825 1.752 1.079 3.276.584 4.215-1.079 2.044-5.345.52-9.509-3.39-.403-.38-.797-.77-1.181-1.168"}),o.jsx("path",{d:"M330.572 19.896c-1.77.557-5.185-1.044-8.534-4.189l-1.181-1.168"}),o.jsx("path",{strokeOpacity:.2,d:"M317.036 9.093c-.825-1.739-1.079-3.263-.584-4.19 1.079-2.044 5.345-.521 9.509 3.39.402.377.791.766 1.168 1.168"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M325.757 12a1.747 1.747 0 0 0-1.75-1.75 1.749 1.749 0 1 0 1.75 1.75Z"}),o.jsx("path",{strokeOpacity:.2,d:"M345.132 18.94c-1.747.822-3.267 1.075-4.204.582-2.039-1.076-.519-5.33 3.381-9.484a34.14 34.14 0 0 1 1.165-1.178"}),o.jsx("path",{d:"M345.132 18.94c-1.747.822-3.267 1.075-4.204.582-2.039-1.076-.519-5.33 3.381-9.484a34.14 34.14 0 0 1 1.165-1.178"}),o.jsx("path",{strokeOpacity:.2,d:"M350.894 5.048c1.735-.823 3.254-1.076 4.179-.582 2.039 1.076.519 5.331-3.381 9.484-.376.401-.764.79-1.165 1.165m4.419-.24c.823 1.746 1.076 3.266.582 4.203-1.076 2.04-5.331.52-9.484-3.38-.405-.38-.798-.773-1.178-1.166"}),o.jsx("path",{d:"M349.253 18.24a23.063 23.063 0 0 1-3.209-2.543l-1.178-1.165"}),o.jsx("path",{strokeOpacity:.2,d:"M341.054 9.1c-.823-1.735-1.076-3.254-.582-4.179 1.076-2.039 5.331-.519 9.484 3.381.405.38.798.772 1.165 1.165"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M349.807 12a1.802 1.802 0 0 0-1.8-1.8 1.802 1.802 0 0 0-1.273 3.073A1.802 1.802 0 0 0 349.807 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M369.139 18.922c-1.743.821-3.259 1.074-4.193.581-2.034-1.074-.518-5.318 3.372-9.46.378-.402.765-.794 1.162-1.176"}),o.jsx("path",{d:"M369.139 18.922c-1.743.821-3.259 1.074-4.193.581-1.504-.794-1.067-3.32.836-6.259"}),o.jsx("path",{strokeOpacity:.2,d:"M374.886 5.065c1.73-.82 3.246-1.074 4.168-.58 2.034 1.073.518 5.317-3.373 9.46-.379.403-.77.795-1.162 1.161"}),o.jsx("path",{d:"m376.909 12.54-1.227 1.405-1.162 1.162"}),o.jsx("path",{strokeOpacity:.2,d:"M378.928 14.867c.821 1.743 1.074 3.259.581 4.193-1.074 2.034-5.318.518-9.46-3.373a34.866 34.866 0 0 1-1.175-1.162m-3.802-5.417c-.821-1.73-1.074-3.246-.581-4.168 1.074-2.034 5.318-.518 9.46 3.372.4.375.787.762 1.162 1.162"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M373.854 12a1.849 1.849 0 0 0-1.848-1.848A1.847 1.847 0 1 0 373.854 12Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M393.146 18.905c-1.739.819-3.251 1.071-4.184.58-2.029-1.071-.517-5.305 3.364-9.438.377-.4.763-.79 1.159-1.172"}),o.jsx("path",{strokeWidth:1.697,d:"M393.146 18.905c-1.739.82-3.251 1.071-4.184.58a1.594 1.594 0 0 1-.793-.969"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M398.879 5.082c1.726-.819 3.238-1.07 4.158-.58 2.029 1.071.517 5.305-3.365 9.438-.378.403-.769.794-1.159 1.16"}),o.jsx("path",{strokeWidth:1.697,d:"M402.728 9.883c-.724 1.283-1.757 2.676-3.055 4.058l-1.159 1.159"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M402.912 14.86c.819 1.739 1.071 3.25.58 4.184-1.071 2.029-5.305.517-9.438-3.365a34.687 34.687 0 0 1-1.172-1.16m-3.794-5.405c-.819-1.726-1.071-3.238-.58-4.158 1.071-2.03 5.305-.517 9.438 3.364.399.374.785.76 1.159 1.159"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M397.899 12a1.893 1.893 0 1 0-3.786 0 1.893 1.893 0 0 0 3.786 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.693,d:"M417.152 18.89c-1.735.817-3.244 1.069-4.174.578-2.024-1.07-.516-5.293 3.357-9.417l1.157-1.17m5.381-3.784c1.723-.817 3.231-1.07 4.149-.578 2.024 1.069.515 5.293-3.357 9.417l-1.157 1.157"}),o.jsx("path",{strokeWidth:1.693,d:"M427.895 6.699c-.215 1.87-1.73 4.574-4.23 7.237l-1.157 1.157"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.693,d:"M426.897 14.854c.817 1.735 1.069 3.244.578 4.174-1.069 2.024-5.293.515-9.417-3.357l-1.169-1.157m-3.785-5.393c-.817-1.723-1.069-3.231-.578-4.15 1.069-2.023 5.293-.515 9.417 3.358l1.157 1.157"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M421.941 12a1.934 1.934 0 1 0-3.868 0 1.934 1.934 0 0 0 3.868 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.69,d:"M441.158 18.876c-1.732.816-3.238 1.067-4.166.577-2.02-1.067-.514-5.283 3.351-9.399l1.154-1.167m5.37-3.776c1.719-.816 3.225-1.067 4.141-.577 2.02 1.067.514 5.283-3.351 9.399l-1.154 1.154"}),o.jsx("path",{strokeWidth:1.69,d:"M450.174 4.298a2.2 2.2 0 0 1 .834.235c2.02 1.067.514 5.283-3.351 9.399l-1.154 1.154"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.69,d:"M450.883 14.849c.816 1.732 1.067 3.237.577 4.166-1.067 2.02-5.283.514-9.399-3.351l-1.167-1.154m-3.777-5.384c-.816-1.72-1.067-3.225-.577-4.141 1.067-2.02 5.283-.514 9.399 3.35l1.154 1.155"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M445.978 12a1.973 1.973 0 0 0-1.971-1.971 1.972 1.972 0 1 0 1.971 1.97Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M465.163 18.865c-1.729.814-3.232 1.065-4.159.576-2.017-1.065-.514-5.274 3.345-9.383l1.153-1.165M470.863 5.122c1.716-.814 3.219-1.065 4.134-.576 2.017 1.065.514 5.274-3.345 9.383l-1.152 1.153"}),o.jsx("path",{strokeWidth:1.687,d:"M470.863 5.122c1.716-.814 3.219-1.065 4.134-.576 2.017 1.065.514 5.274-3.345 9.383l-1.152 1.153"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M474.871 14.844c.814 1.729 1.065 3.232.576 4.159-1.065 2.017-5.274.514-9.383-3.345l-1.164-1.153m-3.771-5.374c-.814-1.716-1.065-3.22-.576-4.134 1.065-2.017 5.274-.514 9.383 3.345l1.153 1.152"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M470.01 12a2.003 2.003 0 1 0-4.007 0 2.003 2.003 0 0 0 4.007 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.684,d:"M489.167 18.855c-1.726.813-3.227 1.063-4.153.575-2.014-1.063-.513-5.266 3.34-9.37l1.151-1.162m5.353-3.766c1.714-.813 3.215-1.063 4.128-.575 2.014 1.063.513 5.266-3.34 9.369l-1.151 1.15"}),o.jsx("path",{strokeWidth:1.684,d:"M494.858 5.132c1.714-.813 3.215-1.063 4.128-.575 1.49.786 1.056 3.29-.829 6.2"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.684,d:"M498.861 14.84c.813 1.726 1.063 3.227.575 4.153-1.063 2.014-5.266.513-9.369-3.34l-1.163-1.151m-3.765-5.367c-.813-1.714-1.063-3.215-.575-4.128 1.063-2.014 5.266-.513 9.369 3.34l1.151 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M494.037 12a2.03 2.03 0 1 0-4.06 0 2.03 2.03 0 0 0 4.06 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.682,d:"M513.17 18.847c-1.724.812-3.224 1.062-4.148.575-2.012-1.062-.512-5.26 3.336-9.359l1.15-1.162m5.347-3.761c1.712-.812 3.211-1.062 4.123-.575 2.012 1.062.512 5.26-3.336 9.359l-1.149 1.15"}),o.jsx("path",{strokeWidth:1.682,d:"M518.855 5.14c1.712-.812 3.211-1.062 4.123-.575.398.21.659.543.791.974"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.682,d:"M522.854 14.836c.812 1.724 1.062 3.224.575 4.148-1.062 2.012-5.26.512-9.359-3.336l-1.162-1.149m-3.762-5.36c-.812-1.712-1.062-3.21-.575-4.123 1.062-2.012 5.26-.512 9.359 3.336l1.15 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M518.058 12a2.05 2.05 0 1 0-4.1 0 2.05 2.05 0 0 0 4.1 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.681,d:"M537.172 18.841c-1.723.812-3.221 1.061-4.145.574-2.01-1.06-.512-5.256 3.333-9.35l1.149-1.162m5.344-3.757c1.71-.812 3.209-1.06 4.12-.574 2.01 1.061.512 5.256-3.334 9.351l-1.149 1.15m4.358-.239c.812 1.723 1.061 3.221.574 4.145-1.061 2.01-5.256.512-9.351-3.334l-1.161-1.148m-3.758-5.356c-.812-1.71-1.061-3.209-.574-4.12 1.061-2.01 5.256-.512 9.351 3.333l1.149 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M542.074 12a2.066 2.066 0 1 0-4.135 0 2.066 2.066 0 1 0 4.134 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M561.174 18.838c-1.722.811-3.219 1.061-4.143.574-2.009-1.06-.512-5.254 3.332-9.347l1.148-1.16m5.34-3.756c1.71-.81 3.207-1.06 4.118-.574 2.009 1.061.512 5.253-3.332 9.346l-1.148 1.148m4.356-.236c.811 1.722 1.061 3.22.574 4.143-1.061 2.01-5.253.512-9.346-3.332l-1.161-1.148m-3.757-5.354c-.811-1.71-1.061-3.207-.574-4.118 1.061-2.009 5.253-.512 9.346 3.332l1.148 1.148"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M566.083 12a2.075 2.075 0 1 0-4.153 0 2.076 2.076 0 0 0 4.152 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M585.174 18.837c-1.722.811-3.219 1.061-4.142.574-2.009-1.06-.512-5.253 3.331-9.345l1.148-1.16m5.34-3.756c1.709-.81 3.206-1.06 4.117-.574 2.009 1.061.511 5.253-3.331 9.345l-1.148 1.148m4.354-.237c.811 1.722 1.061 3.22.574 4.142-1.06 2.01-5.253.511-9.345-3.33l-1.16-1.149m-3.755-5.352c-.811-1.709-1.061-3.206-.574-4.117 1.061-2.009 5.253-.512 9.345 3.331l1.148 1.148"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M590.086 12a2.08 2.08 0 1 0-4.159 0 2.08 2.08 0 0 0 4.159 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M609.174 18.838c-1.722.811-3.22 1.061-4.143.574-2.009-1.06-.512-5.254 3.332-9.347l1.147-1.16m5.341-3.756c1.71-.81 3.207-1.06 4.118-.574 2.009 1.061.512 5.254-3.332 9.347l-1.147 1.148m4.355-.237c.811 1.722 1.061 3.22.574 4.143-1.061 2.01-5.254.512-9.347-3.332l-1.161-1.148m-3.756-5.354c-.811-1.71-1.061-3.207-.574-4.118 1.061-2.009 5.254-.512 9.347 3.332l1.148 1.148"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.68,d:"M605.155 9.142c-.599-1.262-.891-2.408-.808-3.288"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M614.082 12a2.075 2.075 0 1 0-4.153-.001 2.075 2.075 0 0 0 4.154 0h-.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.681,d:"M633.172 18.842c-1.723.812-3.221 1.061-4.145.574-2.01-1.06-.512-5.257 3.334-9.352l1.149-1.16m5.343-3.759c1.711-.812 3.209-1.06 4.12-.574 2.01 1.061.512 5.256-3.334 9.352l-1.149 1.15m4.358-.239c.812 1.723 1.061 3.221.574 4.145-1.061 2.01-5.256.512-9.352-3.334l-1.16-1.148m-3.758-5.356c-.812-1.71-1.062-3.209-.575-4.12 1.061-2.01 5.256-.513 9.352 3.333l1.149 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.681,d:"M629.152 9.141c-.812-1.71-1.062-3.209-.575-4.12.376-.713 1.146-.985 2.165-.868"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M638.072 12a2.066 2.066 0 1 0-4.134 0 2.066 2.066 0 0 0 4.135 0h-.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.683,d:"M657.169 18.848c-1.725.812-3.224 1.062-4.149.575-2.012-1.062-.512-5.26 3.337-9.36l1.15-1.163m5.349-3.76c1.712-.813 3.212-1.063 4.124-.576 2.012 1.062.512 5.261-3.337 9.36l-1.15 1.15m4.362-.237c.812 1.725 1.062 3.224.575 4.15-1.062 2.011-5.261.511-9.36-3.338l-1.162-1.15m-3.763-5.36c-.812-1.713-1.062-3.213-.575-4.125 1.062-2.012 5.261-.512 9.36 3.337l1.15 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.683,d:"M653.145 9.138c-.812-1.712-1.062-3.212-.575-4.124.707-1.339 2.804-1.123 5.336.307"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M662.055 12a2.05 2.05 0 1 0-4.099 0 2.05 2.05 0 0 0 4.099 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.685,d:"M681.166 18.857c-1.727.813-3.228 1.064-4.154.576-2.014-1.064-.513-5.268 3.341-9.372l1.151-1.164m5.355-3.767c1.714-.813 3.216-1.064 4.129-.576 2.014 1.064.513 5.268-3.341 9.372l-1.151 1.15m4.367-.236c.813 1.727 1.064 3.228.576 4.154-1.063 2.014-5.268.513-9.372-3.341l-1.164-1.151m-3.766-5.367c-.813-1.714-1.064-3.216-.576-4.13 1.064-2.014 5.268-.512 9.372 3.342l1.151 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.685,d:"M677.137 9.135c-.813-1.714-1.064-3.216-.576-4.13.943-1.786 4.357-.807 7.98 2.126"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M686.032 12a2.026 2.026 0 1 0-4.051 0 2.026 2.026 0 0 0 4.051 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M705.162 18.867c-1.729.815-3.233 1.065-4.161.577-2.018-1.065-.514-5.276 3.346-9.386l1.153-1.166m5.364-3.772c1.717-.815 3.221-1.065 4.136-.576 2.018 1.065.514 5.276-3.346 9.386l-1.154 1.153m4.374-.238c.815 1.729 1.065 3.233.576 4.16-1.065 2.019-5.276.515-9.386-3.345l-1.165-1.153"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M701.126 9.13c-.815-1.717-1.065-3.221-.576-4.136 1.065-2.018 5.276-.514 9.386 3.346l1.153 1.153"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.687,d:"M701.126 9.13c-.815-1.717-1.065-3.221-.576-4.136 1.065-2.018 5.276-.514 9.386 3.346l1.153 1.153"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M710.003 12a1.996 1.996 0 1 0-3.99 0 1.996 1.996 0 0 0 3.989 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.691,d:"M729.156 18.88c-1.733.816-3.239 1.067-4.168.578-2.021-1.067-.515-5.286 3.352-9.404l1.155-1.168m5.374-3.779c1.72-.816 3.227-1.067 4.143-.578 2.021 1.067.515 5.286-3.352 9.404l-1.155 1.155m4.381-.238c.816 1.733 1.067 3.24.577 4.168-1.067 2.021-5.286.515-9.404-3.352l-1.168-1.155"}),o.jsx("path",{strokeWidth:1.691,d:"M738.886 14.85c.6 1.273.894 2.425.814 3.314"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.691,d:"M725.114 9.125c-.816-1.72-1.067-3.227-.578-4.143 1.067-2.02 5.286-.515 9.404 3.352l1.155 1.155"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.691,d:"m724.498 5.058.038-.076c1.067-2.02 5.286-.515 9.404 3.352l1.155 1.155"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M733.968 12a1.962 1.962 0 1 0-3.925 0 1.962 1.962 0 0 0 3.925 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.694,d:"M753.15 18.894c-1.736.818-3.246 1.07-4.177.58-2.026-1.07-.516-5.298 3.359-9.424.377-.399.763-.79 1.158-1.17m5.385-3.787c1.724-.818 3.233-1.069 4.152-.579 2.026 1.07.516 5.297-3.359 9.423-.377.403-.767.793-1.157 1.157m4.39-.238c.818 1.736 1.069 3.246.579 4.177-1.069 2.026-5.297.516-9.423-3.359a32.793 32.793 0 0 1-1.17-1.157"}),o.jsx("path",{strokeWidth:1.694,d:"M762.901 14.856c.818 1.736 1.069 3.246.579 4.177-.378.716-1.15.99-2.173.875"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.694,d:"M749.099 9.12c-.818-1.725-1.069-3.234-.579-4.153 1.069-2.026 5.297-.516 9.423 3.36.403.376.793.766 1.158 1.156"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.694,d:"M752.189 4.471c1.687.625 3.733 1.956 5.755 3.855l1.158 1.157"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M757.929 12a1.922 1.922 0 1 0-3.844 0 1.922 1.922 0 0 0 3.844 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.698,d:"M777.144 18.91c-1.74.82-3.253 1.072-4.187.58-2.03-1.072-.517-5.31 3.367-9.445a33.81 33.81 0 0 1 1.16-1.173m5.397-3.795c1.728-.82 3.241-1.072 4.161-.58 2.03 1.072.517 5.309-3.367 9.445-.374.4-.761.786-1.16 1.16m4.402-.24c.82 1.74 1.072 3.254.58 4.188-1.072 2.03-5.309.517-9.445-3.367-.4-.377-.791-.764-1.173-1.16"}),o.jsx("path",{strokeWidth:1.698,d:"M786.917 14.863c.82 1.74 1.072 3.253.58 4.187-.713 1.35-2.827 1.133-5.38-.307"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.698,d:"M773.083 9.112c-.82-1.728-1.072-3.241-.58-4.161 1.072-2.03 5.309-.517 9.445 3.367.399.374.786.76 1.16 1.16"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.698,d:"M779.866 6.564a24.528 24.528 0 0 1 2.082 1.754l1.16 1.16"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M781.885 12a1.877 1.877 0 0 0-1.879-1.879 1.88 1.88 0 0 0-1.878 1.88 1.877 1.877 0 0 0 1.879 1.878A1.88 1.88 0 0 0 781.885 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M801.137 18.927c-1.745.822-3.262 1.075-4.197.582-2.035-1.075-.518-5.322 3.375-9.468.378-.401.766-.793 1.163-1.176m5.411-3.805c1.732-.822 3.249-1.075 4.172-.582 2.035 1.075.518 5.322-3.375 9.468-.375.4-.763.788-1.163 1.163m4.411-.239c.822 1.745 1.075 3.261.581 4.197-1.074 2.035-5.322.518-9.468-3.375a33.941 33.941 0 0 1-1.176-1.163"}),o.jsx("path",{d:"M810.934 14.87c.822 1.745 1.075 3.261.581 4.197-.953 1.805-4.403.816-8.064-2.149"}),o.jsx("path",{strokeOpacity:.2,d:"M797.066 9.105c-.822-1.732-1.075-3.249-.582-4.172 1.075-2.035 5.322-.518 9.468 3.375.405.379.796.771 1.163 1.163"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M805.839 12a1.834 1.834 0 0 0-1.131-1.693A1.832 1.832 0 1 0 805.839 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M825.129 18.945c-1.749.824-3.27 1.077-4.208.583-2.041-1.077-.52-5.336 3.384-9.493a34.18 34.18 0 0 1 1.166-1.179"}),o.jsx("path",{d:"m823.076 11.443 1.23-1.408 1.166-1.179"}),o.jsx("path",{strokeOpacity:.2,d:"M830.896 5.042c1.736-.824 3.257-1.077 4.183-.583 2.041 1.077.52 5.336-3.384 9.493-.38.406-.773.799-1.166 1.166"}),o.jsx("path",{strokeOpacity:.2,d:"M834.952 14.877c.824 1.749 1.077 3.27.583 4.208-1.077 2.04-5.336.52-9.493-3.384-.406-.38-.798-.773-1.179-1.166"}),o.jsx("path",{d:"M834.952 14.877c.824 1.749 1.077 3.27.583 4.208-1.077 2.04-5.336.52-9.493-3.384-.406-.38-.798-.773-1.179-1.166"}),o.jsx("path",{strokeOpacity:.2,d:"M821.048 9.098c-.824-1.736-1.077-3.257-.583-4.183 1.077-2.041 5.336-.52 9.493 3.384.401.376.79.765 1.166 1.166"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M829.789 12a1.783 1.783 0 1 0-3.565 0 1.783 1.783 0 0 0 3.565 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M849.122 18.964c-1.754.826-3.279 1.08-4.219.585-2.046-1.08-.521-5.35 3.393-9.519.38-.403.77-.797 1.169-1.182"}),o.jsx("path",{d:"M845.212 14.127c.73-1.295 1.773-2.702 3.083-4.097l1.169-1.182"}),o.jsx("path",{strokeOpacity:.2,d:"M854.904 5.023c1.741-.826 3.266-1.08 4.194-.585 2.046 1.08.521 5.35-3.393 9.518a25.57 25.57 0 0 1-1.169 1.17m4.434-.24c.826 1.753 1.08 3.278.585 4.218-1.08 2.046-5.35.521-9.518-3.393a33.472 33.472 0 0 1-1.182-1.169"}),o.jsx("path",{d:"m859.6 19.014-.045.09c-1.08 2.046-5.35.521-9.518-3.393a33.472 33.472 0 0 1-1.182-1.169"}),o.jsx("path",{strokeOpacity:.2,d:"M845.03 9.09c-.826-1.741-1.08-3.266-.585-4.194 1.08-2.046 5.35-.521 9.518 3.393.407.381.801.775 1.169 1.169"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M853.738 12a1.735 1.735 0 0 0-1.732-1.732 1.733 1.733 0 0 0-1.225 2.957A1.734 1.734 0 0 0 853.738 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M873.114 18.983c-1.758.828-3.288 1.083-4.231.586-2.052-1.083-.522-5.365 3.402-9.544.382-.408.777-.803 1.172-1.185"}),o.jsx("path",{d:"M867.997 17.368c.214-1.896 1.75-4.64 4.288-7.343l1.173-1.185"}),o.jsx("path",{strokeOpacity:.2,d:"M878.912 5.004c1.746-.828 3.275-1.083 4.205-.586 2.052 1.083.522 5.365-3.402 9.544-.378.404-.769.794-1.172 1.172m4.446-.24c.828 1.757 1.083 3.287.586 4.23-1.083 2.052-5.365.522-9.544-3.402-.404-.38-.8-.772-1.185-1.172"}),o.jsx("path",{d:"M879.868 19.628c-1.71-.632-3.786-1.98-5.836-3.907l-1.185-1.172"}),o.jsx("path",{strokeOpacity:.2,d:"M869.011 9.082c-.828-1.746-1.083-3.275-.586-4.205 1.083-2.052 5.365-.522 9.544 3.402.408.382.803.777 1.172 1.172"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M877.687 12a1.681 1.681 0 1 0-3.362 0 1.681 1.681 0 0 0 3.362 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M897.106 19.002c-1.763.831-3.296 1.086-4.242.588-2.057-1.086-.524-5.379 3.411-9.57a33.84 33.84 0 0 1 1.175-1.188"}),o.jsx("path",{d:"M893.733 19.83a2.31 2.31 0 0 1-.869-.24c-2.057-1.087-.524-5.38 3.411-9.57.383-.41.779-.806 1.175-1.189"}),o.jsx("path",{strokeOpacity:.2,d:"M902.92 4.985c1.75-.83 3.284-1.086 4.216-.588 2.057 1.086.524 5.38-3.411 9.57-.383.41-.779.805-1.175 1.175m4.458-.242c.831 1.763 1.086 3.296.588 4.242-1.086 2.057-5.379.524-9.57-3.41a35.38 35.38 0 0 1-1.188-1.176"}),o.jsx("path",{d:"M900.135 17.508a25.007 25.007 0 0 1-2.109-1.777l-1.188-1.175"}),o.jsx("path",{strokeOpacity:.2,d:"M892.992 9.074c-.83-1.75-1.086-3.284-.588-4.216 1.086-2.057 5.379-.524 9.57 3.411.409.383.805.779 1.175 1.175"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M901.636 12a1.63 1.63 0 1 0-3.26.001 1.63 1.63 0 0 0 3.26 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M921.099 19.02c-1.768.833-3.305 1.09-4.253.59-2.062-1.09-.525-5.394 3.42-9.596.384-.41.781-.807 1.179-1.19"}),o.jsx("path",{d:"M921.098 19.02c-1.768.833-3.305 1.09-4.253.59-2.062-1.09-.525-5.394 3.42-9.596.384-.41.781-.807 1.179-1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M926.927 4.967c1.755-.833 3.292-1.089 4.227-.589 2.062 1.09.525 5.393-3.42 9.595-.384.41-.781.807-1.178 1.18m4.47-.245c.833 1.768 1.089 3.305.589 4.253-1.089 2.062-5.393.525-9.595-3.42a34.634 34.634 0 0 1-1.191-1.178m-3.855-5.497c-.833-1.755-1.089-3.292-.589-4.227 1.089-2.062 5.393-.525 9.595 3.42.406.38.799.773 1.179 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M925.586 12a1.58 1.58 0 1 0-3.158.002 1.58 1.58 0 0 0 3.158-.002Z"}),o.jsx("path",{strokeOpacity:.2,d:"M945.091 19.037c-1.772.835-3.313 1.092-4.264.59-2.068-1.091-.527-5.406 3.429-9.618a34.92 34.92 0 0 1 1.181-1.194"}),o.jsx("path",{d:"M945.091 19.037c-1.772.835-3.313 1.092-4.264.59-1.529-.806-1.085-3.376.85-6.363"}),o.jsx("path",{strokeOpacity:.2,d:"M950.934 4.95c1.759-.835 3.3-1.092 4.238-.591 2.068 1.092.526 5.407-3.429 9.619-.385.41-.783.809-1.181 1.18"}),o.jsx("path",{d:"m952.991 12.549-1.248 1.428-1.181 1.18"}),o.jsx("path",{strokeOpacity:.2,d:"M955.044 14.915c.835 1.772 1.092 3.313.591 4.264-1.091 2.068-5.406.526-9.619-3.43a33.582 33.582 0 0 1-1.194-1.18m-3.866-5.51c-.835-1.76-1.092-3.3-.591-4.238 1.092-2.068 5.407-.527 9.619 3.429.411.385.809.783 1.181 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M949.538 12a1.531 1.531 0 1 0-3.062 0 1.531 1.531 0 0 0 3.062 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M969.084 19.054c-1.776.837-3.321 1.094-4.274.592-2.072-1.094-.528-5.419 3.437-9.64.385-.41.78-.809 1.184-1.198"}),o.jsx("path",{d:"M969.084 19.054c-1.776.837-3.321 1.094-4.274.592a1.625 1.625 0 0 1-.81-.989"}),o.jsx("path",{strokeOpacity:.2,d:"M974.941 4.933c1.763-.837 3.308-1.094 4.248-.592 2.072 1.094.528 5.419-3.437 9.64-.386.413-.785.812-1.184 1.185"}),o.jsx("path",{d:"M978.873 9.837c-.74 1.31-1.795 2.733-3.12 4.145l-1.184 1.184"}),o.jsx("path",{strokeOpacity:.2,d:"M979.06 14.922c.837 1.776 1.094 3.321.592 4.274-1.094 2.072-5.419.528-9.641-3.437-.409-.385-.808-.78-1.197-1.184m-3.874-5.523c-.837-1.763-1.094-3.308-.592-4.248 1.094-2.072 5.419-.528 9.641 3.437.408.382.802.777 1.184 1.184"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M973.493 12a1.486 1.486 0 1 0-2.97 0 1.486 1.486 0 0 0 2.969 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,d:"M993.078 19.07c-1.78.838-3.328 1.095-4.283.592-2.077-1.096-.529-5.43 3.444-9.662.387-.413.787-.813 1.187-1.2m5.522-3.882c1.772-.838 3.312-1.096 4.262-.593 2.07 1.096.52 5.431-3.449 9.662-.383.409-.778.804-1.187 1.187"}),o.jsx("path",{d:"M1004.1 6.562c-.22 1.919-1.78 4.693-4.34 7.424l-1.187 1.187"}),o.jsx("path",{strokeOpacity:.2,d:"M1003.07 14.928c.84 1.78 1.1 3.328.6 4.283-1.1 2.077-5.433.53-9.664-3.444a34.504 34.504 0 0 1-1.2-1.187m-3.881-5.534c-.838-1.767-1.096-3.315-.593-4.257 1.096-2.077 5.431-.529 9.662 3.444.408.383.804.779 1.186 1.187"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M997.451 12a1.445 1.445 0 1 0-2.89 0 1.445 1.445 0 0 0 2.89 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1017.07 19.082c-1.78.84-3.33 1.099-4.29.595-2.08-1.1-.53-5.441 3.45-9.68.39-.41.79-.811 1.19-1.202m5.53-3.89c1.77-.84 3.32-1.1 4.27-.595 2.08 1.099.53 5.44-3.45 9.68-.39.409-.78.806-1.19 1.189"}),o.jsx("path",{d:"M1026.36 4.068c.32.03.61.11.86.242 2.08 1.099.53 5.44-3.45 9.68-.39.409-.78.806-1.19 1.189"}),o.jsx("path",{strokeOpacity:.2,d:"M1027.09 14.934c.84 1.784 1.1 3.334.59 4.29-1.1 2.082-5.44.53-9.68-3.45-.41-.387-.81-.783-1.2-1.19m-3.89-5.544c-.84-1.771-1.1-3.322-.59-4.265 1.09-2.081 5.44-.53 9.68 3.45.41.389.81.789 1.18 1.19"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1021.41 12c0-.373-.14-.731-.41-.995a1.397 1.397 0 0 0-.99-.413c-.38 0-.73.15-1 .413-.26.264-.41.622-.41.995s.15.73.41.995c.27.264.62.412 1 .413.37-.001.73-.15.99-.413.27-.264.41-.622.41-.995Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1041.07 19.094c-1.79.842-3.34 1.1-4.3.596-2.08-1.1-.53-5.45 3.46-9.696.38-.41.78-.812 1.19-1.204M1046.96 4.893c1.77-.841 3.33-1.1 4.27-.595 2.08 1.1.53 5.45-3.46 9.696-.38.414-.79.816-1.19 1.19"}),o.jsx("path",{d:"M1046.96 4.893c1.77-.841 3.33-1.1 4.27-.595 2.08 1.1.53 5.45-3.46 9.696-.38.414-.79.816-1.19 1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M1051.1 14.939c.84 1.787 1.1 3.34.6 4.298-1.1 2.084-5.45.531-9.7-3.457-.41-.388-.82-.79-1.2-1.191m-3.9-5.554c-.84-1.774-1.1-3.327-.6-4.272 1.1-2.084 5.45-.531 9.7 3.457.41.384.81.781 1.19 1.191"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1045.38 12c0-.76-.61-1.376-1.37-1.376-.76 0-1.38.616-1.38 1.376 0 .76.62 1.376 1.38 1.376.76 0 1.37-.616 1.37-1.376Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1065.06 19.104c-1.78.843-3.34 1.102-4.3.596-2.09-1.102-.53-5.458 3.46-9.71.39-.411.79-.813 1.19-1.206m5.55-3.9c1.78-.844 3.33-1.103 4.28-.597 2.09 1.102.53 5.458-3.46 9.71-.39.41-.78.809-1.19 1.193"}),o.jsx("path",{d:"M1070.96 4.883c1.78-.843 3.33-1.102 4.28-.596 1.54.815 1.09 3.41-.86 6.426"}),o.jsx("path",{strokeOpacity:.2,d:"M1075.11 14.943c.84 1.79 1.1 3.345.6 4.304-1.11 2.087-5.46.531-9.71-3.46a34.38 34.38 0 0 1-1.21-1.194m-3.9-5.562c-.84-1.776-1.1-3.33-.6-4.278 1.1-2.087 5.46-.532 9.71 3.461.41.385.81.783 1.2 1.193"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1069.35 12c0-.358-.14-.7-.39-.954a1.35 1.35 0 0 0-1.91 0c-.25.254-.39.596-.39.954s.14.7.39.954c.26.252.6.395.96.395.35 0 .7-.143.95-.396s.39-.596.39-.953Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1089.06 19.112c-1.79.844-3.35 1.103-4.31.597-2.09-1.103-.53-5.464 3.47-9.72.39-.412.78-.814 1.19-1.207m5.55-3.907c1.78-.844 3.34-1.103 4.29-.597 2.09 1.103.53 5.464-3.47 9.72-.38.41-.78.809-1.19 1.194"}),o.jsx("path",{d:"M1094.97 4.875c1.77-.844 3.33-1.103 4.28-.597.41.218.68.564.82 1.011"}),o.jsx("path",{strokeOpacity:.2,d:"M1099.12 14.946c.84 1.791 1.1 3.348.6 4.31-1.11 2.088-5.47.531-9.72-3.466-.42-.388-.82-.786-1.21-1.194m-3.91-5.568c-.84-1.778-1.1-3.335-.59-4.283 1.1-2.089 5.46-.532 9.72 3.465.41.39.81.792 1.19 1.194"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1093.33 12c0-.352-.14-.69-.39-.938a1.3 1.3 0 0 0-.93-.39c-.36 0-.69.14-.94.39a1.324 1.324 0 0 0 0 1.876c.25.248.59.388.94.389.35 0 .69-.141.93-.39.25-.248.39-.585.39-.937Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1113.06 19.117c-1.79.844-3.35 1.104-4.31.598-2.1-1.104-.54-5.468 3.46-9.728.39-.416.8-.818 1.2-1.208m5.56-3.91c1.78-.843 3.34-1.103 4.28-.596 2.09 1.104.54 5.468-3.46 9.728-.39.411-.79.81-1.2 1.195m4.53-.248c.85 1.792 1.11 3.35.6 4.312-1.1 2.09-5.47.532-9.73-3.468-.41-.389-.81-.787-1.21-1.195m-3.9-5.571c-.85-1.78-1.11-3.338-.6-4.286 1.1-2.091 5.47-.533 9.73 3.468.41.39.81.792 1.19 1.195"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1117.32 12a1.3 1.3 0 0 0-.39-.928 1.28 1.28 0 0 0-.92-.384c-.35 0-.68.138-.93.384s-.38.58-.38.928c0 .348.13.682.38.928s.58.384.93.384c.35 0 .68-.138.92-.384a1.3 1.3 0 0 0 .39-.928Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1137.06 19.12c-1.8.846-3.36 1.106-4.32.599-2.09-1.105-.53-5.471 3.47-9.733.39-.412.79-.815 1.2-1.208m5.56-3.912c1.78-.845 3.34-1.105 4.29-.598 2.09 1.105.53 5.47-3.47 9.733-.39.411-.79.81-1.2 1.196m4.54-.247c.84 1.793 1.1 3.352.59 4.314-1.1 2.092-5.47.533-9.73-3.47-.41-.389-.81-.787-1.21-1.195m-3.91-5.575c-.84-1.78-1.1-3.34-.6-4.288 1.11-2.092 5.48-.533 9.74 3.469.41.385.81.784 1.19 1.195"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1141.31 12a1.3 1.3 0 0 0-1.3-1.303c-.72 0-1.31.583-1.31 1.303s.59 1.303 1.31 1.303a1.3 1.3 0 0 0 1.3-1.303Z"})]}));B8e.displayName="Sequence";const V8e=f.memo(({...e})=>o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(6.02816 14.5018)",d:"M3.02816 4.6202C1.23465 5.465 -0.32491 5.7249 -1.28665 5.2181C-3.37906 4.1134 -1.8195 -0.2534 2.18339 -4.51623C2.57328 -4.93212 2.97617 -5.33501 3.37906 -5.7249"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(17.9719 9.47869)",d:"M-3.00215 -4.61371C-1.22165 -5.45848 0.33785 -5.7184 1.28665 -5.21154C3.37905 -4.10685 1.81945 0.259935 -2.18345 4.52271C-2.57335 4.93861 -2.97615 5.3415 -3.37905 5.7184"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(14.5083 17.9783)",d:"M4.6202 -3.02815C5.465 -1.23465 5.72491 0.32485 5.21801 1.28665C4.11341 3.37905 -0.253395 1.81945 -4.51624 -2.18345C-4.93213 -2.57335 -5.33501 -2.97625 -5.72491 -3.37905"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(9.4852 6.02166)",d:"M-4.61371 3.00217C-5.45848 1.22166 -5.71841 -0.3379 -5.21154 -1.28664C-4.10685 -3.37906 0.259935 -1.81949 4.52271 2.1834C4.93861 2.57329 5.3415 2.97618 5.7184 3.37906"}),o.jsx("path",{fill:"currentColor",transform:"translate(12.0065 12)",d:"M1.29965 5e-05C1.29965 -0.71775 0.71785 -1.29965 5e-05 -1.29965C-0.71775 -1.29965 -1.29965 -0.71775 -1.29965 5e-05C-1.29965 0.71785 -0.71775 1.29965 5e-05 1.29965C0.71785 1.29965 1.29965 0.71785 1.29965 5e-05Z"})]}));V8e.displayName="DeepResearchStatic";const $8e=f.memo(({size:e=32,shouldAnimate:t=!0,className:n})=>{const{_shouldAnimate:r,sequenceProps:s,staticProps:a}=DH({shouldAnimate:t,animationDuration:3,animationName:"animate-deepResearchIndicator"});return o.jsx(tN,{size:e,className:n,children:r?o.jsx(B8e,{...s}):o.jsx(V8e,{...a})})});$8e.displayName="DeepResearchLoader";const W8e=f.memo(e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:936,height:24,viewBox:"0 0 936 24",...e,children:[o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M9.537 14.568a6.162 6.162 0 0 1-3.695-5.64A6.16 6.16 0 0 1 12 2.77a6.16 6.16 0 0 1 6.158 6.157 6.162 6.162 0 0 1-3.695 5.64v3.597H9.537v3.066h4.926"}),o.jsx("path",{fill:"currentColor",fillOpacity:.2,d:"M13.312 8.927a1.3 1.3 0 1 0-2.6 0 1.3 1.3 0 0 0 2.6 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M33.538 14.567a6.16 6.16 0 0 1-3.694-5.639A6.158 6.158 0 0 1 36 2.772a6.158 6.158 0 0 1 6.156 6.156 6.16 6.16 0 0 1-3.694 5.64v3.594h-4.924v3.066h4.924"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M35.874 21.227h2.59"}),o.jsx("path",{fill:"currentColor",fillOpacity:.204,d:"M37.317 8.928a1.305 1.305 0 1 0-2.61 0 1.305 1.305 0 0 0 2.61 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.748,d:"M57.54 14.565a6.156 6.156 0 0 1-3.69-5.634A6.153 6.153 0 0 1 60 2.78a6.153 6.153 0 0 1 6.15 6.15 6.156 6.156 0 0 1-3.69 5.635v3.592h-4.92v3.063h4.92"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.748,d:"M57.54 20.968v.252h4.92"}),o.jsx("path",{fill:"currentColor",fillOpacity:.22,d:"M61.332 8.93a1.32 1.32 0 1 0-2.64 0 1.32 1.32 0 0 0 2.64 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.746,d:"M81.543 14.561a6.147 6.147 0 0 1-3.686-5.626A6.145 6.145 0 0 1 84 2.792a6.145 6.145 0 0 1 6.143 6.143 6.147 6.147 0 0 1-3.686 5.626v3.587h-4.914v3.06h4.914"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.746,d:"M81.543 18.373v2.835h4.914"}),o.jsx("path",{fill:"currentColor",fillOpacity:.247,d:"M85.357 8.935a1.344 1.344 0 1 0-2.689 0 1.344 1.344 0 0 0 2.689 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.743,d:"M105.547 14.556a6.136 6.136 0 0 1-3.678-5.616A6.134 6.134 0 0 1 108 2.809a6.133 6.133 0 0 1 6.131 6.131 6.136 6.136 0 0 1-3.678 5.616v3.581h-4.906v3.053h4.906"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.743,d:"M107.901 18.137h-2.354v3.054h4.906"}),o.jsx("path",{fill:"currentColor",fillOpacity:.282,d:"M109.39 8.94a1.378 1.378 0 1 0-2.755.001 1.378 1.378 0 0 0 2.755 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.739,d:"M129.553 14.55a6.122 6.122 0 0 1-3.67-5.603A6.12 6.12 0 0 1 132 2.83a6.12 6.12 0 0 1 6.118 6.117 6.123 6.123 0 0 1-3.671 5.604v3.572h-4.894v3.047h4.894"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.739,d:"m134.447 18.122-4.894.001v3.047h4.894"}),o.jsx("path",{fill:"currentColor",fillOpacity:.325,d:"M133.43 8.947a1.418 1.418 0 1 0-2.836 0 1.418 1.418 0 0 0 2.836 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.734,d:"M153.56 14.544a6.106 6.106 0 0 1-3.661-5.59 6.103 6.103 0 0 1 6.101-6.1 6.103 6.103 0 0 1 6.101 6.1 6.106 6.106 0 0 1-3.66 5.59v3.563h-4.881v3.038h4.881"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.734,d:"M158.441 15.511v2.596h-4.881v3.038h4.881"}),o.jsx("path",{fill:"currentColor",fillOpacity:.376,d:"M157.477 8.955a1.465 1.465 0 1 0-2.93 0 1.465 1.465 0 0 0 2.93 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.729,d:"M177.567 14.536a6.088 6.088 0 0 1-3.65-5.572A6.085 6.085 0 0 1 180 2.88a6.085 6.085 0 0 1 6.083 6.084 6.087 6.087 0 0 1-3.65 5.572v3.553h-4.866v3.029h4.866"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.729,d:"M183.809 13.7a6.066 6.066 0 0 1-1.376.836v3.552h-4.866v3.03h4.866"}),o.jsx("path",{fill:"currentColor",fillOpacity:.435,d:"M181.529 8.964a1.517 1.517 0 1 0-3.034 0 1.517 1.517 0 0 0 3.034 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.723,d:"M201.575 14.528a6.068 6.068 0 0 1-3.639-5.555A6.066 6.066 0 0 1 204 2.91a6.066 6.066 0 0 1 6.064 6.064 6.069 6.069 0 0 1-3.638 5.555v3.54h-4.851v3.02h4.851"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.723,d:"M209.405 11.72a6.103 6.103 0 0 1-2.979 2.807v3.542h-4.851v3.02h4.851"}),o.jsx("path",{fill:"currentColor",fillOpacity:.494,d:"M205.585 8.973a1.573 1.573 0 1 0-3.145 0 1.573 1.573 0 0 0 3.145 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.718,d:"M225.583 14.519a6.048 6.048 0 0 1-3.627-5.536A6.046 6.046 0 0 1 228 2.939a6.046 6.046 0 0 1 6.044 6.044 6.049 6.049 0 0 1-3.626 5.536v3.53h-4.835v3.01h4.835"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.718,d:"M234.039 9.24a6.052 6.052 0 0 1-3.621 5.279v3.53h-4.835v3.01h4.835"}),o.jsx("path",{fill:"currentColor",fillOpacity:.561,d:"M229.642 8.983a1.63 1.63 0 1 0-3.259-.001 1.63 1.63 0 0 0 3.259 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.712,d:"M249.591 14.51a6.028 6.028 0 0 1-3.614-5.517A6.025 6.025 0 0 1 252 2.969a6.026 6.026 0 0 1 6.024 6.024c0 2.47-1.494 4.59-3.614 5.517v3.518h-4.819v3h4.819"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.712,d:"M257.578 6.715a6.028 6.028 0 0 1-3.168 7.795v3.518h-4.819v3h4.819"}),o.jsx("path",{fill:"currentColor",fillOpacity:.627,d:"M253.7 8.993a1.688 1.688 0 1 0-3.376 0 1.688 1.688 0 0 0 3.376 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.706,d:"M273.599 14.502a6.008 6.008 0 0 1-3.602-5.5A6.005 6.005 0 0 1 276 3a6.006 6.006 0 0 1 6.004 6.003 6.008 6.008 0 0 1-3.602 5.5v3.506h-4.803v2.99h4.803"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.706,d:"M280.14 4.656a5.987 5.987 0 0 1 1.864 4.346 6.008 6.008 0 0 1-3.602 5.5v3.505h-4.803v2.99h4.803"}),o.jsx("path",{fill:"currentColor",fillOpacity:.69,d:"M277.756 9.003a1.744 1.744 0 1 0-3.488 0 1.744 1.744 0 0 0 3.488 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.701,d:"M297.607 14.494a5.989 5.989 0 0 1-3.591-5.482A5.987 5.987 0 0 1 300 3.027a5.987 5.987 0 0 1 5.985 5.985 5.989 5.989 0 0 1-3.591 5.482v3.494h-4.787v2.98h4.787"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.701,d:"M301.994 3.368a5.99 5.99 0 0 1 3.991 5.644 5.988 5.988 0 0 1-3.591 5.482v3.495h-4.787v2.98h4.787"}),o.jsx("path",{fill:"currentColor",fillOpacity:.753,d:"M301.809 9.012a1.797 1.797 0 1 0-3.594 0 1.797 1.797 0 0 0 3.594 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.696,d:"M321.614 14.486a5.97 5.97 0 0 1-3.58-5.465A5.969 5.969 0 0 1 324 3.054a5.969 5.969 0 0 1 5.967 5.967 5.97 5.97 0 0 1-3.58 5.465v3.485h-4.773v2.971h4.773"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.696,d:"M323.448 3.079a5.969 5.969 0 0 1 6.519 5.942 5.972 5.972 0 0 1-3.58 5.465v3.485h-4.773v2.971h4.773"}),o.jsx("path",{fill:"currentColor",fillOpacity:.812,d:"M325.857 9.02a1.845 1.845 0 1 0-3.69 0 1.845 1.845 0 0 0 3.69 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.691,d:"M345.62 14.48a5.956 5.956 0 0 1-3.571-5.452A5.953 5.953 0 0 1 348 3.077a5.954 5.954 0 0 1 5.952 5.95 5.956 5.956 0 0 1-3.571 5.452v3.476h-4.761v2.963h4.761"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.691,d:"M345.067 3.85a5.954 5.954 0 0 1 8.885 5.178 5.956 5.956 0 0 1-3.571 5.451v3.476h-4.761v2.963h4.761"}),o.jsx("path",{fill:"currentColor",fillOpacity:.867,d:"M349.901 9.028a1.889 1.889 0 1 0-3.778.001 1.889 1.889 0 0 0 3.778-.001Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.688,d:"M369.625 14.473a5.942 5.942 0 0 1-3.562-5.439A5.94 5.94 0 0 1 372 3.097a5.94 5.94 0 0 1 5.938 5.937 5.941 5.941 0 0 1-3.563 5.44v3.467h-4.75v2.957h4.75"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.688,d:"M367.206 5.532A5.93 5.93 0 0 1 372 3.097a5.94 5.94 0 0 1 5.938 5.937 5.942 5.942 0 0 1-3.562 5.44v3.467h-4.751v2.957h4.751"}),o.jsx("path",{fill:"currentColor",fillOpacity:.91,d:"M373.937 9.034a1.924 1.924 0 1 0-3.849 0 1.924 1.924 0 0 0 3.849 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.684,d:"M393.63 14.469a5.93 5.93 0 0 1-3.556-5.43A5.929 5.929 0 0 1 396 3.114a5.929 5.929 0 0 1 5.927 5.927c0 2.43-1.47 4.516-3.556 5.429v3.46h-4.741v2.952h4.741"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.684,d:"M390.203 7.805a5.93 5.93 0 0 1 5.798-4.692 5.929 5.929 0 0 1 5.926 5.927c0 2.43-1.47 4.516-3.556 5.429v3.46h-4.741v2.952h4.741"}),o.jsx("path",{fill:"currentColor",fillOpacity:.949,d:"M397.967 9.04a1.955 1.955 0 1 0-3.91 0 1.955 1.955 0 0 0 3.91 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.682,d:"M417.633 14.465a5.924 5.924 0 0 1-3.551-5.421 5.92 5.92 0 0 1 5.919-5.919 5.92 5.92 0 0 1 5.918 5.919 5.924 5.924 0 0 1-3.551 5.421v3.457h-4.735v2.947h4.735"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.682,d:"M414.232 10.37a5.92 5.92 0 0 1 5.769-7.245 5.92 5.92 0 0 1 5.918 5.919 5.924 5.924 0 0 1-3.551 5.421v3.457h-4.735v2.947h4.735"}),o.jsx("path",{fill:"currentColor",fillOpacity:.976,d:"M421.989 9.044a1.977 1.977 0 1 0-3.954 0 1.977 1.977 0 0 0 3.954 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.681,d:"M441.635 14.463a5.917 5.917 0 0 1-3.548-5.417A5.915 5.915 0 0 1 444 3.133a5.916 5.916 0 0 1 5.914 5.913 5.919 5.919 0 0 1-3.548 5.417v3.454h-4.731v2.945h4.731"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.681,d:"M439.286 12.61a5.874 5.874 0 0 1-1.199-3.564A5.915 5.915 0 0 1 444 3.133a5.916 5.916 0 0 1 5.914 5.913 5.919 5.919 0 0 1-3.548 5.417v3.454h-4.731v2.945h4.731"}),o.jsx("path",{fill:"currentColor",fillOpacity:.992,d:"M446.003 9.046a1.99 1.99 0 1 0-3.981 0 1.99 1.99 0 0 0 3.981 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.68,d:"M465.636 14.463a5.916 5.916 0 0 1-3.547-5.415 5.913 5.913 0 0 1 5.912-5.912 5.913 5.913 0 0 1 5.911 5.912 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.729v2.944h4.729"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M465.181 14.24a5.913 5.913 0 0 1-3.092-5.192 5.913 5.913 0 0 1 5.912-5.912 5.913 5.913 0 0 1 5.911 5.912 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.729v2.944h4.729"}),o.jsx("path",{fill:"currentColor",d:"M470.009 9.047a1.997 1.997 0 1 0-3.994 0 1.997 1.997 0 0 0 3.994 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.68,d:"M489.636 14.463a5.916 5.916 0 0 1-3.548-5.416 5.915 5.915 0 0 1 5.913-5.913 5.915 5.915 0 0 1 5.912 5.913 5.917 5.917 0 0 1-3.547 5.415v3.453h-4.73v2.945h4.73"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M489.636 14.463a5.916 5.916 0 0 1-3.548-5.416 5.915 5.915 0 0 1 5.913-5.913 5.915 5.915 0 0 1 5.912 5.913 5.917 5.917 0 0 1-3.547 5.415v3.453h-4.73v2.945h2.078"}),o.jsx("path",{fill:"currentColor",fillOpacity:.996,d:"M494.006 9.047a1.994 1.994 0 1 0-3.988 0 1.994 1.994 0 0 0 3.988 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.682,d:"M513.634 14.465a5.92 5.92 0 0 1-3.55-5.42 5.919 5.919 0 0 1 5.917-5.917 5.918 5.918 0 0 1 5.916 5.917 5.92 5.92 0 0 1-3.55 5.42v3.455h-4.733v2.946h4.733"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.682,d:"M513.634 14.465a5.92 5.92 0 0 1-3.55-5.42 5.919 5.919 0 0 1 5.917-5.917 5.918 5.918 0 0 1 5.916 5.917 5.92 5.92 0 0 1-3.55 5.42v3.455h-4.733v1.71"}),o.jsx("path",{fill:"currentColor",fillOpacity:.984,d:"M517.994 9.045a1.982 1.982 0 1 0-3.963 0 1.982 1.982 0 0 0 3.963 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.684,d:"M537.631 14.468a5.928 5.928 0 0 1-3.555-5.427 5.927 5.927 0 0 1 5.925-5.924 5.926 5.926 0 0 1 5.924 5.924 5.928 5.928 0 0 1-3.555 5.427v3.46h-4.739v2.95h4.739"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.684,d:"M537.631 14.468a5.928 5.928 0 0 1-3.555-5.427 5.927 5.927 0 0 1 5.925-5.924 5.926 5.926 0 0 1 5.924 5.924 5.928 5.928 0 0 1-3.555 5.427v3.46h-3.129"}),o.jsx("path",{fill:"currentColor",fillOpacity:.961,d:"M541.974 9.04a1.961 1.961 0 1 0-3.923.001 1.961 1.961 0 0 0 3.923 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.687,d:"M561.626 14.472a5.94 5.94 0 0 1-3.561-5.436A5.937 5.937 0 0 1 564 3.1a5.937 5.937 0 0 1 5.936 5.935 5.94 5.94 0 0 1-3.562 5.436v3.466h-4.748v2.956h4.748"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.687,d:"M561.626 14.472a5.94 5.94 0 0 1-3.561-5.436A5.937 5.937 0 0 1 564 3.1a5.937 5.937 0 0 1 5.936 5.935 5.94 5.94 0 0 1-3.562 5.436v3.416"}),o.jsx("path",{fill:"currentColor",fillOpacity:.925,d:"M565.945 9.036a1.932 1.932 0 1 0-3.865 0 1.932 1.932 0 0 0 3.865 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.691,d:"M585.621 14.478a5.953 5.953 0 0 1-3.569-5.448A5.95 5.95 0 0 1 588 3.08a5.95 5.95 0 0 1 5.949 5.949 5.953 5.953 0 0 1-3.569 5.448v3.474h-4.759v2.963h4.759"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.691,d:"M585.621 14.478a5.953 5.953 0 0 1-3.569-5.448A5.95 5.95 0 0 1 588 3.08a5.95 5.95 0 0 1 5.949 5.949 5.952 5.952 0 0 1-3.519 5.426"}),o.jsx("path",{fill:"currentColor",fillOpacity:.882,d:"M589.908 9.03a1.896 1.896 0 1 0-3.792 0 1.896 1.896 0 0 0 3.792 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.695,d:"M609.615 14.485a5.968 5.968 0 0 1-3.579-5.463A5.966 5.966 0 0 1 612 3.058a5.967 5.967 0 0 1 5.965 5.964 5.968 5.968 0 0 1-3.579 5.463v3.483h-4.771v2.97h4.771"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.695,d:"M609.615 14.485a5.968 5.968 0 0 1-3.579-5.463A5.966 5.966 0 0 1 612 3.058a5.967 5.967 0 0 1 5.965 5.964c0 1.21-.363 2.335-.983 3.275"}),o.jsx("path",{fill:"currentColor",fillOpacity:.835,d:"M613.865 9.022a1.853 1.853 0 1 0-3.706 0 1.853 1.853 0 0 0 3.706 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.7,d:"M633.608 14.493a5.987 5.987 0 0 1-3.59-5.48A5.984 5.984 0 0 1 636 3.031a5.984 5.984 0 0 1 5.982 5.982 5.986 5.986 0 0 1-3.589 5.48v3.493h-4.785v2.98h4.785"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.7,d:"M633.608 14.493a5.987 5.987 0 0 1-3.59-5.48A5.984 5.984 0 0 1 636 3.031a5.984 5.984 0 0 1 5.982 5.982v.078"}),o.jsx("path",{fill:"currentColor",fillOpacity:.776,d:"M637.816 9.013a1.804 1.804 0 1 0-3.608 0 1.804 1.804 0 0 0 3.608 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.706,d:"M657.6 14.5a6.005 6.005 0 0 1-3.601-5.496A6.004 6.004 0 0 1 660 3.002a6.003 6.003 0 0 1 6.001 6.002 6.006 6.006 0 0 1-3.6 5.497v3.504H657.6v2.989h4.801"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.706,d:"M657.6 14.5a6.005 6.005 0 0 1-3.601-5.496A6.004 6.004 0 0 1 660 3.002a5.999 5.999 0 0 1 5.101 2.84"}),o.jsx("path",{fill:"currentColor",fillOpacity:.718,d:"M661.762 9.003a1.75 1.75 0 1 0-3.5 0 1.75 1.75 0 0 0 3.5 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.711,d:"M681.592 14.51a6.025 6.025 0 0 1-3.613-5.516A6.024 6.024 0 0 1 684 2.973a6.023 6.023 0 0 1 6.021 6.02 6.026 6.026 0 0 1-3.612 5.516v3.517h-4.817v2.998h4.817"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.711,d:"M681.592 14.51a6.025 6.025 0 0 1-3.613-5.516 6.024 6.024 0 0 1 8.647-5.42"}),o.jsx("path",{fill:"currentColor",fillOpacity:.651,d:"M685.706 8.994a1.694 1.694 0 1 0-3.387 0 1.694 1.694 0 0 0 3.387 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.717,d:"M705.584 14.518a6.045 6.045 0 0 1-3.625-5.534A6.043 6.043 0 0 1 708 2.942a6.044 6.044 0 0 1 6.042 6.042 6.047 6.047 0 0 1-3.625 5.534v3.528h-4.833v3.009h4.833"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.717,d:"M705.584 14.518a6.045 6.045 0 0 1-3.625-5.534 6.045 6.045 0 0 1 5.308-5.997"}),o.jsx("path",{fill:"currentColor",fillOpacity:.588,d:"M709.649 8.984a1.637 1.637 0 1 0-3.273 0 1.637 1.637 0 0 0 3.273 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.723,d:"M729.576 14.527a6.066 6.066 0 0 1-3.637-5.553A6.063 6.063 0 0 1 732 2.913a6.064 6.064 0 0 1 6.062 6.061 6.067 6.067 0 0 1-3.637 5.553v3.54h-4.849v3.018h4.849"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.723,d:"M729.576 14.527a6.066 6.066 0 0 1-3.637-5.553c0-1.89.867-3.58 2.225-4.692"}),o.jsx("path",{fill:"currentColor",fillOpacity:.522,d:"M733.592 8.974a1.58 1.58 0 1 0-3.159 0 1.58 1.58 0 0 0 3.159 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.728,d:"M753.568 14.535a6.085 6.085 0 0 1-3.649-5.57A6.084 6.084 0 0 1 756 2.884a6.083 6.083 0 0 1 6.081 6.08 6.086 6.086 0 0 1-3.648 5.57v3.552h-4.865v3.028h4.865"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.728,d:"M753.568 14.535a6.085 6.085 0 0 1-3.336-7.5"}),o.jsx("path",{fill:"currentColor",fillOpacity:.459,d:"M757.536 8.965a1.524 1.524 0 1 0-3.048 0 1.524 1.524 0 0 0 3.048 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.733,d:"M777.561 14.543a6.104 6.104 0 0 1-3.66-5.587A6.101 6.101 0 0 1 780 2.857a6.1 6.1 0 0 1 6.099 6.1c0 2.5-1.513 4.646-3.659 5.586v3.561h-4.879v3.037h4.879"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.733,d:"M777.561 14.543a6.12 6.12 0 0 1-3.464-4.052"}),o.jsx("path",{fill:"currentColor",fillOpacity:.4,d:"M781.485 8.956a1.472 1.472 0 1 0-2.945 0 1.472 1.472 0 0 0 2.945 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.738,d:"M801.554 14.55a6.12 6.12 0 0 1-3.669-5.602A6.117 6.117 0 0 1 804 2.833a6.117 6.117 0 0 1 6.115 6.115 6.12 6.12 0 0 1-3.669 5.601v3.572h-4.892v3.045h4.892"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.738,d:"M801.554 14.55a6.124 6.124 0 0 1-1.733-1.144"}),o.jsx("path",{fill:"currentColor",fillOpacity:.345,d:"M805.438 8.948a1.426 1.426 0 1 0-2.851 0 1.426 1.426 0 0 0 2.851 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.742,d:"M825.549 14.555a6.133 6.133 0 0 1-3.678-5.614A6.131 6.131 0 0 1 828 2.812a6.131 6.131 0 0 1 6.129 6.13c0 2.512-1.52 4.67-3.677 5.613v3.58h-4.903v3.051h4.903"}),o.jsx("path",{fill:"currentColor",fillOpacity:.298,d:"M829.397 8.942a1.385 1.385 0 1 0-2.77 0 1.385 1.385 0 0 0 2.77 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.745,d:"M849.544 14.56a6.145 6.145 0 0 1-3.684-5.624c0-3.39 2.751-6.14 6.14-6.14s6.14 2.75 6.14 6.14a6.145 6.145 0 0 1-3.684 5.624v3.586h-4.912v3.058h4.912"}),o.jsx("path",{fill:"currentColor",fillOpacity:.259,d:"M853.364 8.936a1.352 1.352 0 1 0-2.703 0 1.352 1.352 0 0 0 2.703 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.748,d:"M873.541 14.564a6.153 6.153 0 0 1-3.69-5.632A6.151 6.151 0 0 1 876 2.782a6.151 6.151 0 0 1 6.149 6.15 6.154 6.154 0 0 1-3.689 5.632v3.59h-4.919v3.063h4.919"}),o.jsx("path",{fill:"currentColor",fillOpacity:.231,d:"M877.338 8.931a1.326 1.326 0 1 0-2.651 0 1.326 1.326 0 0 0 2.651 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.749,d:"M897.538 14.567a6.16 6.16 0 0 1-3.693-5.638A6.157 6.157 0 0 1 900 2.774a6.157 6.157 0 0 1 6.155 6.155 6.16 6.16 0 0 1-3.693 5.638v3.594h-4.924v3.065h4.924"}),o.jsx("path",{fill:"currentColor",fillOpacity:.212,d:"M901.321 8.929a1.309 1.309 0 1 0-2.618 0 1.309 1.309 0 0 0 2.618 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M921.537 14.568a6.162 6.162 0 0 1-3.694-5.64A6.16 6.16 0 0 1 924 2.77a6.16 6.16 0 0 1 6.157 6.157 6.162 6.162 0 0 1-3.694 5.64v3.596h-4.926v3.067h4.926"}),o.jsx("path",{fill:"currentColor",fillOpacity:.2,d:"M925.313 8.928a1.3 1.3 0 1 0-2.601 0 1.3 1.3 0 0 0 2.601 0Z"})]}));W8e.displayName="Sequence";const H8e=f.memo(({...e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e,children:[o.jsx("path",{d:"M-2.463 2.568a6.162 6.162 0 0 1-3.695-5.64A6.16 6.16 0 0 1 0-9.23a6.16 6.16 0 0 1 6.158 6.157 6.162 6.162 0 0 1-3.695 5.64v3.597h-4.926V9.23h4.926",style:{fill:"none",stroke:"currentColor",strokeWidth:1.75,strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2},transform:"translate(12 11.997) scale(.96001)"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M9.18 14.24a5.912 5.912 0 0 1-3.09-5.193A5.914 5.914 0 0 1 12 3.136a5.914 5.914 0 0 1 5.912 5.911 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.73v2.944h4.73"}),o.jsx("path",{fill:"currentColor",d:"M14.009 9.047a1.997 1.997 0 1 0-3.993 0 1.997 1.997 0 0 0 3.993 0z"})]}));H8e.displayName="LabsStatic";const z8e=f.memo(({size:e=32,shouldAnimate:t=!0,className:n})=>{const{_shouldAnimate:r,sequenceProps:s,staticProps:a}=DH({shouldAnimate:t,animationDuration:1.5,animationName:"animate-labsIndicator"});return o.jsx(tN,{size:e,className:n,children:r?o.jsx(W8e,{...s}):o.jsx(H8e,{...a})})});z8e.displayName="LabsLoader";const K7=f.memo(({type:e,size:t,shouldAnimate:n,className:r})=>f.useMemo(()=>{switch(e){case"research":return o.jsx($8e,{size:t,shouldAnimate:n,className:r});case"labs":return o.jsx(z8e,{size:t,shouldAnimate:n,className:r});default:return o.jsx(jw,{size:t,shouldAnimate:n,className:r})}},[e,t,n,r]));K7.displayName="SearchModeLoader";const pG=R.memo(({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:i="default"})=>{const[l,c]=f.useState(!1),u=a?l:r;return R.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:V({shimmer:u&&i==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&i==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)});pG.displayName="Shimmer";const G8e=R.memo(({count:e=3,variant:t="default",className:n})=>{const r="clip-path-small-shimmer",s="clip-path-default-shimmer",a=t==="small"?12:14;return o.jsxs(o.Fragment,{children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:s,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z",fill:"#D9D9D9"})})})}),o.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:r,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z",fill:"#D9D9D9"})})})}),o.jsx("div",{className:V("gap-xs relative flex shrink-0 items-center",n),children:o.jsx("div",{className:"ml-xs flex",children:Array.from({length:e}).map((i,l)=>o.jsx("div",{className:V("relative z-0 shrink-0",{"-ml-[5px]":t==="default"},{"-ml-xs":t==="small"}),style:{width:a,height:a,...l!==e-1?{clipPath:`url(#${t==="small"?r:s})`}:{}},children:o.jsx(pG,{as:"div",className:"bg-subtle size-full rounded-full"})},l))})})]})});G8e.displayName="CitationPileShimmer";const q8e=40,hG=(e,t)=>V("relative flex items-center gap-1.5",{"border-subtlest bg-subtler border rounded-full px-3 py-2":t,"border border-super/20 bg-super/10 dark:bg-super/10 focus:bg-super/20 focus:border-super/30 text-super":e&&t}),K8e=()=>{const{isMobileUserAgent:e}=Ce();return e?16:18},Y8e=f.memo(({modeList:e,isSticky:t,inFlight:n,hideStickyTitle:r,accessoryProps:s,accessory:a,defaultModeOverride:i,tabsPlaceholder:l})=>{const{result:{query_str:c,uuid:u,collection_info:{uuid:d}={},backend_uuid:m,context_uuid:p,frontend_context_uuid:h,display_model:g,attachments:y},selectedRefinementQuery:x,selectedFilterIds:v,userClarifications:b,editQueryValue:_}=ln(),{topSources:w}=U8e({dedupeAttachments:!1}),{submitQuery:C}=ta(),S=kf(),{isMobileStyle:E}=Ce(),{refinementFilters:M,handleResetClickAnswerMode:k,handleResetClickDefaultMode:N,handleApplyClickDefaultMode:P,handleApplyClickAnswerMode:L,handleFilterClickAnswerMode:O,isRefinementLoading:A,handleResetToOriginalState:j}=cnn(),[T,I]=f.useState(!1),U=x||c,B=f.useMemo(()=>U?RT(Iu(U,b).actualQuery):"",[U,b]),{updateCurrentMode:D}=PN(),{currentModeData:{mode:W}}=Nf(),{trackEvent:z}=je(),[$,X]=f.useState(!1),{isMax:q}=Et(),Y=pn(),{variation:G}=jke(!1),J=q&&g==="comet_max_assistant"&&Y&&G,[K,te]=f.useState(null),re=f.useCallback(be=>{const Ne=be.mode==="search";C({rawQuery:_,existingEntryUUID:m,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:S?void 0:h,promptSource:"user",querySource:Ne?"search-mode":"chat-mode",attachments:y,modelPreferenceOverride:g,...Ne?{alwaysSearchOverride:!0}:{overrideNoSearch:!0}}),te(null)},[C,_,m,S,h,y,g]),{terminateEntry:se}=P8e({entryUUID:m||"",reason:K?.mode==="search"?"search-answer-mode":"chat-answer-mode",callback:f.useCallback(()=>{K&&re(K)},[K,re])}),me=f.useCallback(be=>{j(),be.mode==="search"||be.mode==="chat"?(m&&n?(te(be),se()):re(be),z("answer mode tab selected",{answerMode:be.mode,entryUUID:m,contextUUID:p})):(D(be.mode),be.mode!=="default"&&s?.isOpen&&s.onClick())},[D,s,m,p,z,n,se,te,re,j]),oe=f.useMemo(()=>e.find(Ne=>Ne.mode==="default"),[e]),ge=f.useMemo(()=>e.filter(be=>be.mode!=="default"&&be.mode!==i),[e,i]),xe=f.useCallback(()=>{oe&&me(oe)},[me,oe]),ye=f.useCallback(be=>{W!==be.mode&&me(be)},[me,W]);f.useEffect(()=>{let be=null;const Ne=Re=>{Re.metaKey&&Re.shiftKey&&!be&&(be=setTimeout(()=>{X(!0)},500))},Ee=Re=>{(!Re.metaKey||!Re.shiftKey)&&(be&&(clearTimeout(be),be=null),X(!1))};return document.addEventListener("keydown",Ne),document.addEventListener("keyup",Ee),()=>{be&&clearTimeout(be),document.removeEventListener("keydown",Ne),document.removeEventListener("keyup",Ee)}},[]);const _e=f.useCallback(()=>{I(!0),z("refinement filters tab clicked",{answerMode:W})},[W,z]);return o.jsxs(ve.div,{layout:!0,layoutRoot:!0,"data-testid":Ta.ANSWER_MODE_TABS_ROOT,children:[!r&&o.jsx("div",{className:V("max-w-threadContentWidth mx-auto flex w-full items-end ease-out will-change-auto",{"opacity-100":t,"pointer-events-none opacity-0":!t}),style:{height:q8e},children:o.jsx(F,{variant:"section-title",className:V("erp-sidecar:line-clamp-1 hidden translate-y-px",{"@[1056px]/main:md:!line-clamp-1":!!d,"@[900px]/main:md:!line-clamp-1":!d}),children:B})}),o.jsx(H,{className:V("relative",{"border-b":!E,"pt-sm":E}),children:o.jsx("div",{className:"-mx-md px-md scrollbar-none -my-px overflow-x-auto overflow-y-hidden py-px",children:o.jsxs("div",{className:"table w-full",children:[o.jsx("div",{className:V("inset-x-sm top-md absolute bottom-0 shadow-md will-change-[opacity]",{"opacity-0":!t,"opacity-30":t})}),o.jsx(H,{variant:"background",className:"gap-xs relative",children:o.jsxs("div",{className:"relative flex gap-1.5",children:[o.jsx("div",{className:"md:max-w-threadContentWidth md:mx-auto md:w-full",children:o.jsxs("div",{className:V("grid grid-cols-1 grid-rows-1",{"-mx-0":E,"-mx-sm":!E}),children:[!oe&&o.jsx(Z8e,{}),o.jsxs("div",{className:"gap-xs relative col-start-1 row-start-1 flex",children:[oe&&o.jsx(X8e,{tab:oe,active:W===oe.mode||!!i&&W==i,onClick:xe,id:u??"",inFlight:n,testId:oe.testId,isScreenshotting:$,isCometMaxAssistantAnswer:J}),o.jsxs(Je,{initial:!1,children:[ge.map(be=>o.jsx(gG,{text:be.text,active:W===be.mode,onClick:ye,mode:be,icon:be.icon,id:u??"",count:be.count,inFlight:n,disabled:be.disabled,testId:be.testId,loading:be.loading,...be.mode==="sources"&&{sources:w}},be.text)),o.jsx("div",{className:"ml-auto",children:M&&M.length>0&&o.jsx(Q8e,{onClick:_e})})]})]}),ge.length===0&&l]})}),o.jsx("div",{className:"right-0 flex items-center md:absolute md:top-1/2 md:-translate-y-1/2",children:a})]})})]})})}),M&&M.length>0&&o.jsx(O8e,{refinementFilters:M,handleFilterClick:O,selectedFilterIds:v,isOpen:T,setIsOpen:I,handleResetClick:W==="default"?N:k,handleApplyClick:W==="default"?P:L,isLoading:A})]})});Y8e.displayName="AnswerModeTabs";const Q8e=f.memo(({onClick:e})=>{const{isMobileUserAgent:t}=Ce(),{$t:n}=Z(),{trackEventOnce:r}=je();return f.useEffect(()=>{r("refinement filters tab viewed")},[r]),o.jsxs("button",{className:V("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":t,"py-md pl-sm pr-2.5":!t}),onClick:e,type:"button","aria-label":"Filters",children:[o.jsx(H,{variant:"subtler",className:V("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),o.jsxs("div",{className:hG(!1,t),children:[o.jsx("div",{className:"relative flex h-[16px] w-auto items-center",children:o.jsx("div",{className:"flex size-[16px] items-center justify-center",children:o.jsx(le,{icon:MD,size:t?"sm":"xs",className:V("text-foreground opacity-80 duration-100 sm:block",{"group-hover:opacity-100":!t})})})}),o.jsx("div",{className:V("flex items-center",{"h-4":t}),children:o.jsx(F,{className:V("text-foreground whitespace-nowrap font-medium opacity-80 duration-150",{"text-xs":t,"text-sm":!t},!t&&"group-hover:opacity-100"),children:n({defaultMessage:"Filters",id:"zSOvI0LO0n"})})})]})]})});Q8e.displayName="FiltersTab";const X8e=f.memo(({tab:e,active:t,onClick:n,id:r,inFlight:s,testId:a,isCometMaxAssistantAnswer:i,isScreenshotting:l})=>{const{hasAnswer:c,isAnswerSkipped:u}=ln(),{isMobileUserAgent:d}=Ce(),m=f.useCallback(y=>l?"Perplexity":i?o.jsxs("div",{className:"flex items-center gap-2",children:[y,o.jsx(_w,{className:"text-max h-2.5"})]}):y,[l,i]),p=f.useMemo(()=>{switch(e.text.toLowerCase()){case"research":return"research";case"labs":return"labs";default:return"default"}},[e.text]),h=K8e(),g=V("text-foreground duration-100 group-hover:opacity-100",{"opacity-80":!t,"text-super":t&&d});return o.jsxs(ve.button,{className:V("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1":d,"py-md pl-sm pr-2.5":!d}),onClick:n,type:"button","aria-label":e.text,"data-testid":a,children:[o.jsx(H,{variant:"subtler",className:V("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),o.jsxs("div",{className:hG(t,d),children:[o.jsx("div",{className:"relative flex size-4 items-center justify-center",children:o.jsx(Je,{mode:"wait",initial:!1,children:!c&&!u?o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:e.icon?{opacity:0}:void 0,transition:{duration:.15},children:o.jsx(K7,{type:p,size:h,shouldAnimate:!0,className:g})},"spinner"):e.icon?o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:o.jsx(le,{icon:e.icon,size:d?"sm":"xs",className:g})},`icon-${e.text}`):o.jsx(ve.div,{children:o.jsx(K7,{type:p,size:h,shouldAnimate:!1,className:g})},"empty-spinner")})}),o.jsxs("div",{className:"relative",children:[o.jsx(Je,{initial:!1,mode:"wait",children:o.jsx(ve.div,{className:"absolute whitespace-nowrap",initial:c?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},exit:c?{opacity:0}:{opacity:0,y:-20},transition:{duration:l?0:c?.15:.3},children:o.jsx(F,{className:V("text-foreground whitespace-nowrap font-medium duration-150 group-hover:opacity-100",{"text-xs":d,"text-sm":!d,"opacity-80":!t,"text-super":t&&d}),children:m(e.text)})},`text-${e.text}`)}),o.jsx("div",{className:"invisible",children:o.jsx(F,{className:V("text-foreground whitespace-nowrap",{"text-xs font-medium":d,"text-sm font-[475]":!d}),children:m(e.text)})})]})]}),t&&o.jsx(yG,{id:r,inFlight:s,isScreenshotting:l})]})});X8e.displayName="StaticTabWithAnimatedContent";const Z8e=f.memo(()=>{const e=f.useMemo(()=>({mode:"default",text:"placeholder",count:0,disabled:!1,icon:void 0,loading:!1,testId:"placeholder",id:"d"}),[]);return o.jsx("div",{className:"pointer-events-none invisible col-start-1 row-start-1 opacity-0",role:"none",children:o.jsx(gG,{text:"placeholder",active:!1,onClick:Pn,mode:e,icon:void 0,id:"placeholder",count:0,inFlight:!1,disabled:!1,testId:"placeholder",loading:!1},"placeholder")})});Z8e.displayName="PlaceholderTab";const gG=f.memo(({text:e,active:t,mode:n,onClick:r,icon:s,id:a,count:i,inFlight:l,disabled:c,testId:u,loading:d,sources:m})=>{const{isMobileUserAgent:p}=Ce(),h=f.useCallback(()=>{r(n)},[r,n]),g=!p&&i!==void 0&&i>0;return o.jsxs("button",{className:V("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":p,"py-md pl-sm pr-2.5":!p}),onClick:h,type:"button","aria-label":e,disabled:c,"data-testid":u,children:[o.jsx(H,{variant:"subtler",className:V("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t&&!c&&!p})}),o.jsxs("div",{className:hG(t,p),children:[o.jsx("div",{className:"relative flex h-[16px] w-auto items-center",children:o.jsx(J8e,{icon:s,loading:d,active:t,disabled:c,mode:n,sources:m})}),o.jsxs("div",{className:V("flex items-center",{"h-4":p}),children:[o.jsx(F,{className:V("text-foreground whitespace-nowrap font-medium duration-150",{"text-xs":p,"text-sm":!p,"text-super":t&&p},!c&&!p&&"group-hover:opacity-100",c?"opacity-50":!t&&"opacity-80"),children:e}),g&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"px-xs ml-px leading-none opacity-35",children:""}),o.jsx(Ez,{count:i,className:V(c?"opacity-40":"opacity-65")})]})]})]}),t&&o.jsx(yG,{id:a,inFlight:l})]})});gG.displayName="AnswerModeTab";const yG=f.memo(({id:e,inFlight:t,isScreenshotting:n})=>{const{isMobileUserAgent:r}=Ce();return o.jsx(ve.div,{className:V("bg-inverse inset-x-sm absolute -bottom-px h-[2.5px]",{hidden:r}),transition:{duration:n?0:.1,ease:"easeOut"},layoutId:t?void 0:`answer-mode-tab-underline-${e}`})});yG.displayName="Underline";const ynn=({sources:e})=>{const{isEntryInFlight:t}=ln();return e?.length?o.jsx(YH,{sources:e,count:3,variant:"small"}):t?o.jsx(G8e,{count:3,variant:"small"}):null},J8e=({icon:e,loading:t,active:n,disabled:r,mode:s,sources:a})=>{const{isMobileUserAgent:i}=Ce(),l=K8e();return s.mode==="sources"?o.jsx("div",{className:"w-max flex-none",children:o.jsx(ynn,{sources:a})}):o.jsx("div",{className:"flex size-[16px] items-center justify-center",children:e?t?o.jsx(Zr,{size:l}):o.jsx(le,{icon:e,size:i?"sm":"xs",className:V("text-foreground duration-100 sm:block",{"group-hover:opacity-100":!r&&!i,"text-super":n&&i},r?"opacity-50":!n&&"opacity-80")}):o.jsx(jw,{size:l,shouldAnimate:!1,className:V("text-foreground duration-100",{"group-hover:opacity-100":!r&&!i,"opacity-80":!n,"text-super":n&&i})})})};J8e.displayName="AnswerModeIcon";const Y7=f.memo(({submitQuery:e,isFirstResult:t})=>{const{$t:n}=Z(),{inFlight:r,editQueryValue:s,isEditingQuery:a,isFailed:i,userClarifications:l,selectedRefinementQuery:c,result:{uuid:u,query_str:d,backend_uuid:m,frontend_context_uuid:p,display_model:h,attachments:g,side_by_side_metadata:y,user_selected_model:x,sources:v},actions:{setEditQueryValue:b,setIsEditingQuery:_}}=ln(),{results:w}=Ht(),C=kf(),S=Oo(),{trackEvent:E}=hx(),{isMobileStyle:M}=Ce(),{openModal:k}=wt(),[N,P]=f.useState(!1),L=c??d,O=f.useCallback(()=>{b(L??""),_(!1),m&&E("cancel edit query click",{entryUUID:m})},[m,L,b,_,E]),A=f.useRef(null),j="editable-thread-title",{updateCurrentMode:T}=PN();Sp("thread-title",{skip:!t}),f.useEffect(()=>{r&&_(!1)},[_,r]);const I=f.useCallback(()=>{p?(s!==L&&e({rawQuery:s,existingEntryUUID:m,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:C?void 0:p,promptSource:"user",querySource:"edit",attachments:g,modelPreferenceOverride:h,sourcesOverride:OE(v?.sources)}),_(!1),T("default")):ne.warn(new Error(`No frontend UUID for thread backendUUID=${m}`))},[m,p,C,s,L,g,v,h,e,_,T]),{terminateEntry:U,isTerminating:B}=P8e({entryUUID:m,reason:j,callback:I}),D=f.useCallback(()=>{S&&U()},[S,U]),W=f.useCallback(()=>{S&&(E("confirm edit query click",{entryUUID:m??"",newQuery:s}),p?I():ne.warn(new Error(`No frontend UUID for thread backendUUID=${m}`)))},[S,m,p,I,E,s]),z=fw(),$=f.useCallback(()=>{r?D():W()},[r,D,W]),X=f.useCallback(oe=>{da.isEnterKeyWithoutShift(oe)?(oe.preventDefault(),$()):da.isEscapeKey(oe)&&O()},[$,O]),{quote:q,actualQuery:Y}=Iu(L,l),G=f.useCallback(()=>{b(Y??""),_(!0)},[b,Y,_]),J=f.useCallback(oe=>{oe.preventDefault(),navigator.clipboard.writeText(L??"")},[L]),K=s==="",te=!!S,re=vn.hasUnspecifiedSelectionStatus(y)&&vn.hasMultipleSiblingEntries(w,y?.sibling_uuid),se=f.useMemo(()=>({maskImage:"linear-gradient(to bottom, black 50%, transparent)"}),[]),me=f.useCallback(()=>{k("taskShortcutModal",{source:"thread_create",shortcut:{prompt:L??"",searchModel:x??qV,sources:OE(v?.sources)}})},[k,L,x,v]);return o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"mb-xs group relative flex items-end gap-0.5 pt-6",children:[o.jsx("div",{className:"-inset-md absolute select-none"}),o.jsx("div",{className:"md:mr-xl min-w-0 flex-1",children:a?o.jsx(vnn,{onKeyDown:X,editQueryValue:s,setEditQueryValue:b,isEmptyQuery:K,inputRef:A}):o.jsx(t9e,{queryString:Y??"",isFirstResult:t,isFailed:i,quote:q,setInitialized:P,initialized:N},u)}),te&&o.jsx("div",{className:"absolute bottom-0 right-0 flex shrink-0",children:o.jsx("div",{"data-testid":"edit-query-button-group",className:V("bg-base mb-xs shadow-subtle border-subtlest relative flex shrink-0 flex-row rounded-[10px] border p-[1.5px] duration-150 group-hover:pointer-events-auto group-hover:opacity-100",{"pointer-events-none opacity-0":!a,"pointer-events-auto opacity-100":a||B}),children:a?M?null:o.jsxs(o.Fragment,{children:[o.jsx(pe,{toolTip:n({defaultMessage:"Save and rewrite answer",id:"J0SzInCu9R"}),icon:Ar,size:"tiny",variant:"primary",onClick:$,extraCSS:"shrink-0",testId:"confirm-edit-query-button",disabled:B,isLoading:B}),o.jsx("div",{className:"m-[1.5px] w-px border-r border-transparent"}),o.jsx(pe,{icon:It,size:"tiny",variant:"common",extraCSS:"!bg-base !text-quiet hover:!bg-subtler shrink-0",onClick:O,testId:"cancel-edit-query-button",disabled:B})]}):o.jsxs(o.Fragment,{children:[o.jsx(pe,{icon:Vu,size:"tiny",variant:"common",onClick:G,disabled:re,extraCSS:V("!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-r-[2px]"),testId:"edit-query-button",toolTip:n({defaultMessage:"Edit Query",id:"b3OoXBV5TQ"})}),o.jsx(H,{className:"m-[1.5px] w-px border-r"}),o.jsx(pe,{icon:DD,size:"tiny",variant:"common",extraCSS:V("!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-l-[2px]",{"!rounded-r-[2px]":z}),onClick:J,testId:"copy-query-button",toolTip:n({defaultMessage:"Copy Query",id:"pLS6m4WFYK"}),clickFeedback:!0}),z&&o.jsxs(o.Fragment,{children:[o.jsx(H,{className:"m-[1.5px] w-px border-r"}),o.jsx(pe,{icon:Dk,size:"tiny",variant:"common",extraCSS:"!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-l-[2px]",onClick:me,testId:"save-as-shortcut-button",toolTip:n({defaultMessage:"Save query as shortcut",id:"iOwvGHWuK/"}),clickFeedback:!0})]})]})})})]}),a&&M&&o.jsxs("div",{className:"gap-x-sm mb-sm pb-sm -inset-x-xs absolute top-full mt-[12px] flex justify-end",children:[o.jsx(H,{className:"-inset-lg -top-sm absolute",variant:"background",style:se}),o.jsx(pe,{size:"small",variant:"border",onClick:O,text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),extraCSS:"!bg-base",disabled:B}),o.jsx(pe,{size:"small",variant:"primary",onClick:$,text:n({defaultMessage:"Done",id:"JXdbo8Vnlw"}),disabled:B,isLoading:B})]})]})});Y7.displayName="EditableThreadTitle";const Q7=144,e9e=R.memo(({queryString:e="",className:t="",quote:n,isFirstResult:r,isFailed:s,setInitialized:a,initialized:i})=>{const{$t:l}=Z(),[c,u]=f.useState(!1),[d,m]=f.useState(!1),p=f.useRef(null),h=f.useMemo(()=>{const x=RT(e);return x.length<75?"entry-title-100":x.length<200?"entry-title-200":"entry-title-300"},[e]);f.useEffect(()=>{typeof window>"u"||!p.current||p.current.getBoundingClientRect().height>Q7&&!d&&m(!0)},[d,i]);const g=f.useCallback(()=>{u(!c)},[c]),y=f.useCallback(()=>{a(!0)},[a]);return o.jsxs("div",{className:"group/title relative inline-flex flex-col",children:[n&&o.jsxs(F,{variant:"small",color:"light",className:"border-super bg-subtlest px-sm mb-2 flex items-center border-l-2 py-1.5",children:[o.jsx(eFe,{size:18,className:"text-super mr-sm shrink-0 -translate-y-px rotate-180"}),o.jsx("span",{className:"line-clamp-1",children:n})]}),o.jsx("div",{className:"overflow-hidden",children:o.jsxs(xnn,{isTruncated:d,isExpanded:c,children:[o.jsx(F,{variant:h,as:r?"h1":"div",ref:p,className:V("group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word]",t),children:s?o.jsx("div",{className:"gap-x-sm flex items-center",children:o.jsx("span",{children:e?o.jsx(kk,{editQueryValue:e,disabled:!0}):l({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})})}):o.jsx(kk,{editQueryValue:e,disabled:!0,onChange:y})}),o.jsx("div",{className:V("text-inverse pointer-events-none absolute inset-x-0 bottom-0 h-1/4 transition-opacity duration-100",{"opacity-0":c}),style:{background:!c&&d?"linear-gradient(transparent, currentColor)":void 0}})]})}),d&&o.jsx("div",{className:"top-xs relative flex",children:o.jsx(Te,{size:"tiny","data-testid":"toggle-query-expand-button",extraCSS:"-mt-0.5 -ml-sm",chevron:!0,chevronIcon:c?Vy:Bn,onClick:g,text:c?l({defaultMessage:"Show less",id:"qyJtWyZ0yt"}):o.jsx(he,{defaultMessage:"Show more",id:"kgNFsmh2uY",description:"Show more of the query."})})})]})});e9e.displayName="DisplayQueryBase";const t9e=f.memo(e9e);t9e.displayName="DisplayQuery";const xnn=({children:e,isTruncated:t,isExpanded:n})=>t?o.jsx(na,{transition:{duration:.2,ease:an},initial:!1,mode:"popLayout",supportZeroHeight:!1,children:o.jsx(is,{className:"overflow-hidden",style:{maxHeight:n?void 0:Q7},children:e})}):o.jsx("div",{style:{maxHeight:Q7},children:e}),n9e=(e,t)=>{const n=RT(e);return n.length<75?V("font-display text-2xl md:text-3xl font-semimedium",{"translate-y-[1px]":!t}):n.length<200?"font-display text-xl font-medium":"font-sans font-medium"},vnn=({onKeyDown:e,editQueryValue:t,setEditQueryValue:n,isEmptyQuery:r,inputRef:s})=>{const a=f.useCallback(i=>{n(i)},[n]);return o.jsxs("div",{className:"relative w-full min-w-0",children:[o.jsx("div",{className:"-inset-y-xs -left-sm border-subtlest bg-subtlest -right-sm md:-right-md absolute rounded-md border"}),o.jsxs("div",{className:"relative grid",children:[o.jsx(kk,{onKeyDown:e,editQueryValue:t,onChange:a,inputRef:s}),o.jsx("div",{className:V("pointer-events-none col-start-1 row-start-1 opacity-0",n9e(t)),children:r?o.jsx(o.Fragment,{children:""}):o.jsx(kk,{editQueryValue:t,disabled:!0})})]})]})},kk=({onKeyDown:e=Pn,editQueryValue:t,disabled:n,onChange:r=Pn,inputRef:s})=>{const{$t:a}=Z(),{isMobileUserAgent:i}=Ce();return o.jsx("div",{className:V("text-foreground block h-auto w-full resize-none appearance-none overflow-hidden bg-transparent focus:outline-none","caret-super selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super",n9e(t,n),"[&_[contenteditable]]:!font-display [&_[contenteditable]]:!bg-transparent","[&_[contenteditable]]:max-h-none [&_[contenteditable]]:!overflow-hidden [&_[contenteditable]]:sm:max-h-none [&_[contenteditable]]:lg:max-h-none","[&_[contenteditable]+*>*]:opacity-50","[&>*]:p-0"),style:{gridArea:"1/-1"},children:o.jsx(OT,{onKeyDown:e,placeholder:a({defaultMessage:"Ask anything",id:"AUouhaZgFv"}),value:t,onChange:r,minRows:0,isMobileStyle:!1,isMobileUserAgent:i,useLexical:!0,autoFocus:!0,disableInput:n,ref:s})})},Ace="pt-headerHeight md:pt-6 erp-sidecar:pt-0 erp-mobile-sidecar:pt-0",bnn=({ref:e,compact:t,isFirstResult:n,isLastResult:r,submitQuery:s,idx:a,accessory:i})=>{const l=ln(),{result:{backend_uuid:c,upsell_information:u},isEntryInFlight:d,hasAnswer:m,showAgentWorkflow:p,isAnswerSkipped:h}=l,{isAllPlansFinished:g}=onn(l),y=f.useCallback(()=>{hKe({entryUUID:c,reason:"skip-search"})},[c]),{value:x}=Dt({flag:"skip-search-button",subjectType:"visitor_id",defaultValue:!1}),{answerModeActionList:v,currentModeData:b,defaultModeOverride:_}=Nf(),w=m||h||!r;return o.jsxs(o.Fragment,{children:[w&&o.jsx("div",{className:`max-w-threadContentWidth relative isolate z-20 mx-auto ${Ace}`,children:o.jsx("div",{className:t?"pointer-events-none opacity-0":void 0,children:o.jsx(Y7,{isFirstResult:n,submitQuery:s})})}),o.jsx(_c,{isSamsungBrowser:!0,children:o.jsx(zx,{position:"top",idx:a,upsellInformation:u,backendUuid:c,isLastResult:r,inFlight:d,className:"max-w-threadContentWidth mt-md relative z-20 mx-auto"})}),o.jsx("div",{className:V("bg-base -mx-md px-md sticky-tabs-ref erp-sidecar:sticky top-0 z-10 md:sticky",{[Ace]:!w}),style:{marginTop:w?`-${q8e}px`:void 0},children:o.jsxs("div",{className:V("mx-auto",{"max-w-threadContentWidth":b.width==="default","max-w-none":b.width==="full","max-w-threadWidth":b.width==="wide"}),children:[!w&&o.jsx("div",{className:"max-w-threadContentWidth relative isolate z-20 mx-auto",children:o.jsx(Y7,{isFirstResult:n,submitQuery:s})}),o.jsxs("div",{ref:e,className:"relative",children:[o.jsx(Y8e,{modeList:v,defaultModeOverride:_,isSticky:w&&t,hideStickyTitle:!w,inFlight:d,accessory:i}),!g&&p&&!h&&o.jsx(iG,{className:"bg-base pt-md",skipSearchEnabled:x,onSkipSearch:y})]})]})})]})},_nn=R.memo(bnn),r9e=R.memo(({submitQuery:e})=>{const t="trigger-entry-rewrite",n=Ut(),{result:{backend_uuid:r,frontend_context_uuid:s,attachments:a,display_model:i},idx:l,editQueryValue:c}=ln(),u=kf(),d=window.location.hash.slice(1),m=parseInt(d,10),p=n?.get("rw")==="true";return f.useEffect(()=>{if(!(isNaN(m)||l!==m)&&p){ny({rw:void 0});const h=()=>e({rawQuery:c,existingEntryUUID:r,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:u?void 0:s,promptSource:"user",querySource:"rewrite-url-param",attachments:a,modelPreferenceOverride:i});r?Au({entryUUID:r,reason:t}).catch(g=>{ne.error("Error terminating entry",g)}).finally(h):h()}},[p,u,e,m,l,r,c,s,a,i]),null});r9e.displayName="TriggerEntryRewrite";const s9e=R.memo(()=>o.jsx(wn,{children:o.jsx("div",{className:"gap-sm flex flex-wrap",children:Array.from({length:8}).map((e,t)=>o.jsx(a9e,{index:t},t))})}));s9e.displayName="ImagesModeLoader";const a9e=R.memo(({index:e})=>{const{isMobileStyle:t}=Ce(),{isLargeScreen:n,isXLargeScreen:r}=Pp(),s=f.useMemo(()=>t?120:r?240:n?200:180,[t,n,r]);return o.jsx("div",{className:V("bg-subtler grow basis-1/3 rounded-xl md:basis-1/4",{"w-1/2 !max-w-none":e===1}),style:{height:s}})});a9e.displayName="Item";const i9e=R.memo(()=>o.jsx(wn,{children:o.jsx(H,{variant:"subtler",className:"h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));i9e.displayName="JobsModeLoader";const xG=R.memo(()=>o.jsxs("div",{className:"gap-md @container flex w-full flex-row",children:[o.jsx("div",{className:"md:@[1458px]:w-[874px] md:@[1458px]:shrink-0 w-full md:w-3/5",children:o.jsx(l9e,{})}),o.jsx("div",{className:"@md:w-[570px] @md:@[1458px]:w-full hidden md:block",children:o.jsx(o9e,{})})]}));xG.displayName="PlacesModeLoader";const o9e=R.memo(()=>o.jsx(wn,{children:o.jsx(H,{variant:"subtler",className:"sticky h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));o9e.displayName="PlacesModeMapLoader";const l9e=R.memo(()=>o.jsx(wn,{children:o.jsx("div",{className:"gap-md grid h-[180px] grid-cols-[repeat(auto-fill,minmax(220px,1fr))] overflow-hidden [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]",children:Array.from({length:8}).map((e,t)=>o.jsx(c9e,{},t))})}));l9e.displayName="PlacesModeGridLoader";const c9e=R.memo(()=>o.jsx("div",{className:V("bg-subtler aspect-[4/3] w-full rounded-xl")}));c9e.displayName="Item";const u9e=f.memo(()=>{const{isMobileStyle:e}=Ce();return o.jsxs(wn,{className:"-mx-md pl-md md:mx-auto",children:[o.jsx("div",{className:"gap-md md:mb-lg mb-md flex auto-rows-fr grid-cols-2 overflow-hidden md:grid md:grid-cols-3",children:Array.from({length:3}).map((t,n)=>o.jsx(d9e,{},n))}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs("div",{className:"grid grid-cols-1 grid-rows-1 items-center",children:[o.jsx(F,{variant:e?"base":"section-title",className:"col-start-1 row-start-1",children:""}),o.jsx("div",{className:"bg-subtler col-start-1 row-start-1 h-3 w-32 grow rounded-full md:h-4"})]}),o.jsx("div",{className:"gap-md pr-md flex auto-rows-fr grid-cols-2 flex-col md:grid md:pr-0",children:Array.from({length:2}).map((t,n)=>o.jsx(f9e,{},n))})]})]})});u9e.displayName="ShoppingModeLoader";const d9e=f.memo(()=>o.jsx("div",{className:V("bg-subtler aspect-video h-[327px] w-[70vw] grow rounded-xl md:h-[413px] md:w-full")}));d9e.displayName="Item";const f9e=f.memo(()=>o.jsx("div",{className:"bg-subtler aspect-video h-[144px] w-full grow rounded-md"}));f9e.displayName="SmallItem";const m9e=R.memo(()=>o.jsx(wn,{children:o.jsx("div",{className:"gap-xs grid auto-cols-fr auto-rows-fr grid-cols-2 sm:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((e,t)=>o.jsx(p9e,{},t))})}));m9e.displayName="VideoModeLoader";const p9e=R.memo(()=>o.jsx("div",{className:V("bg-subtler aspect-video w-full grow rounded-md")}));p9e.displayName="Item";var wnn={};const Cnn=we(async()=>{const{ShoppingMode:e}=await Q(async()=>{const{ShoppingMode:t}=await import("./ShoppingMode-qVmJOv_2.js");return{ShoppingMode:t}},__vite__mapDeps([468,3,1,4,122,445,469,470,6,5]));return{default:e}},{loading:()=>o.jsx(u9e,{})}),Snn=we(async()=>{const{HotelsMode:e}=await Q(async()=>{const{HotelsMode:t}=await import("./HotelsMode-t9w5842o.js");return{HotelsMode:t}},__vite__mapDeps([471,3,1,442,4,54,6,72,5,443,37,472,36,473,470]));return{default:e}},{loading:()=>o.jsx(xG,{})}),Enn=we(async()=>{const{JobsMode:e}=await Q(async()=>{const{JobsMode:t}=await import("./JobsMode-CCY0-BPW.js");return{JobsMode:t}},__vite__mapDeps([474,3,1,4,5,454,6]));return{default:e}},{loading:()=>o.jsx(i9e,{})}),Mnn=we(async()=>{const{VideosMode:e}=await Q(async()=>{const{VideosMode:t}=await import("./VideosMode-BimtKs43.js");return{VideosMode:t}},__vite__mapDeps([475,3,1,4,476,113,114,115,5,470,6]));return{default:e}},{loading:()=>o.jsx(m9e,{})}),knn=we(async()=>{const{ImagesMode:e}=await Q(async()=>{const{ImagesMode:t}=await import("./ImagesMode-DM4iDxox.js");return{ImagesMode:t}},__vite__mapDeps([477,3,1,4,476,446,5,478,470,6]));return{default:e}},{loading:()=>o.jsx(s9e,{})}),Tnn=we(async()=>{const{MapsMode:e}=await Q(async()=>{const{MapsMode:t}=await import("./MapsMode-SS9_bbxU.js");return{MapsMode:t}},__vite__mapDeps([479,3,1,6,36,4,5,37,473,442,54,72,443,470]));return{default:e}},{loading:()=>o.jsx(xG,{})}),Nnn=we(async()=>{const{AssetsMode:e}=await Q(async()=>{const{AssetsMode:t}=await import("./AssetsMode-DJPaKms4.js").then(n=>n.a);return{AssetsMode:t}},__vite__mapDeps([131,3,1,4,5,64,6]));return{default:e}},{loading:()=>o.jsx(oG,{})}),jnn=we(async()=>{const{AppsMode:e}=await Q(async()=>{const{AppsMode:t}=await Promise.resolve().then(()=>ann);return{AppsMode:t}},void 0);return{default:e}},{loading:()=>o.jsx(oG,{})}),Ann=we(async()=>{const{TasksMode:e}=await Q(async()=>{const{TasksMode:t}=await import("./TasksMode-DXuRtHyA.js");return{TasksMode:t}},__vite__mapDeps([480,3,1,438,4,5,439,17,6,481]));return{default:e}},{loading:()=>o.jsx(m8e,{})}),h9e=R.memo(({isLastResult:e,isFirstResult:t,sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:i,deleteLastResult:l,setQuote:c,scrollToListItem:u,lastResultBuffer:d,idx:m})=>{const{answerModeActionList:p,currentModeData:h}=Nf(),{isMobileStyle:g}=Ce(),{result:{backend_uuid:y,context_uuid:x,attachments:v,status:b,frontend_context_uuid:_,query_str:w,parent_info:{mode:C,url_slug:S}={}},isEntryInFlight:E,webResults:M}=ln(),k=kf(),N=C&&S,[P,L]=f.useState(!1),{scrollContainerRef:O}=Za(),A=f.useRef(new Set),{trackEvent:j}=je();f.useEffect(()=>{if(!(y?.length===0||y===OU||x?.length===0))for(const X of p)A.current.has(X.mode)||(A.current.add(X.mode),j("answer mode tab viewed",{answerMode:X.mode,entryUUID:y,contextUUID:x}))},[p,j,y,x]);const{ref:T,isSticky:I}=stn({root:O.current??void 0}),U=f.useMemo(()=>g&&!wnn.NEXT_PUBLIC_IS_SIDECAR_BUILD?!1:I,[g,I]),B=f.useCallback(()=>{u(m,{smooth:!0})},[u,m]);f.useEffect(()=>{typeof window>"u"||b!=="PENDING"||B()},[E,b,B]);const D=f.useMemo(()=>({backend_uuid:y,frontend_context_uuid:_,query_str:w}),[y,_,w]),W=f.useMemo(()=>{if(h.mode!=="default")return h.mode==="images"?k?void 0:o.jsx(x9e,{result:D,setIsGeneratingImage:L,isGeneratingImage:P}):h.mode==="assets"?o.jsx(y9e,{}):h.mode==="apps"?o.jsx(g9e,{}):null},[h.mode,k,D,P]),z=v&&v.length>0,$=f.useMemo(()=>{if(e&&d)return{paddingBottom:`${d+(z?52:0)}px`}},[e,d,z]);return o.jsxs(H,{className:V({"erp-sidecar:pt-0 erp-mobile-sidecar:pt-0":t&&!N,"erp-sidecar:min-h-[var(--sidecar-content-height)] min-h-[var(--page-content-height)] md:min-h-[var(--page-content-height-without-header)]":e}),style:$,children:[o.jsx(r9e,{submitQuery:r}),o.jsx(p8e,{webResults:M,children:o.jsxs("div",{className:V("isolate mx-auto",{"px-md max-w-none":h.width==="full","max-w-threadWidth px-md md:px-lg":h.width==="wide","px-md":h.width==="default"}),children:[o.jsx(_nn,{ref:T,compact:U,isFirstResult:t,submitQuery:r,isLastResult:e,idx:m,accessory:W}),o.jsx("div",{className:V("pb-md mx-auto pt-5 md:pb-12",{"max-w-threadWidth":h.width==="wide","max-w-none":h.width==="full","max-w-threadContentWidth":h.width==="default","border-subtlest border-b":!e}),children:o.jsxs(Je,{initial:!1,children:[h.mode==="default"&&o.jsx(ho,{id:`default-mode-${_}`,children:o.jsx(N8e,{sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:i,deleteLastResult:l,setQuote:c})}),h.mode==="shopping"&&o.jsx(ho,{id:`shopping-mode-${_}`,children:o.jsx(Cnn,{})}),h.mode==="hotels"&&o.jsx(ho,{id:`hotels-mode-${_}`,children:o.jsx(Snn,{})}),h.mode==="places"&&o.jsx(ho,{id:`maps-mode-${_}`,children:o.jsx(Tnn,{})}),h.mode==="jobs"&&o.jsx(ho,{id:`jobs-mode-${_}`,children:o.jsx(Enn,{})}),h.mode==="videos"&&o.jsx(ho,{id:`videos-mode-${_}`,children:o.jsx(Mnn,{})}),h.mode==="images"&&o.jsx(ho,{id:`images-mode-${_}`,children:o.jsx(knn,{isGeneratingImage:P})}),h.mode==="sources"&&o.jsx(ho,{id:`sources-mode-${_}`,children:o.jsx(F8e,{})}),h.mode==="assets"&&o.jsx(ho,{id:`assets-mode-${_}`,children:o.jsx(Nnn,{})}),h.mode==="apps"&&o.jsx(ho,{id:`apps-mode-${_}`,children:o.jsx(jnn,{})}),h.mode==="tasks"&&o.jsx(ho,{id:`tasks-mode-${_}`,children:o.jsx(Ann,{})})]})})]})})]})});h9e.displayName="ThreadEntryInner";const g9e=R.memo(()=>{const e="apps-accessory",{$t:t}=Z(),{openModal:n}=wt(),{assets:r}=Nf(),{result:{backend_uuid:s}}=ln(),a=f.useMemo(()=>{for(let h=r.length-1;h>=0;h--){const g=r[h];if(g?.asset_type===Mt.APP)return g}},[r]);iV({assetType:Mt.APP,entryUUID:s,answerMode:"apps",reason:"apps-accessory"});const{downloadAsset:i}=nnn({asset:a,reason:e,answerMode:"apps",entryUUID:s}),l=f.useCallback(()=>{let h,g;for(let y=r.length-1;y>=0;y--){if(r[y]?.asset_type!==Mt.CODE_FILE)continue;const x=r[y];if(x?.code_file?.name==="index.html"){h=x?.uuid,g=x?.backend_uuid;break}}n("searchStepsAssetsModal",{backendUUID:g||s,assetUUID:h,answerMode:"search"})},[r,s,n]),c=f.useCallback(()=>{i()},[i]),u=f.useCallback(()=>{const h=new URL(window.location.href);h.pathname=`/apps/${s}`,window.open(h.toString(),"_blank","noopener,noreferrer")},[s]),d=f.useMemo(()=>o.jsx(le,{icon:xde,size:"xs",className:"duration-150"}),[]),m=f.useMemo(()=>o.jsx(le,{icon:Lg,size:"xs",className:"duration-150"}),[]),p=f.useMemo(()=>o.jsx(le,{icon:vp,size:"xs",className:"duration-150"}),[]);return o.jsxs("div",{className:"ml-auto flex items-center gap-1.5",children:[o.jsx(Rg,{size:"tiny",pill:!0,leadingComponent:d,onClick:u,toolTip:t({defaultMessage:"View full screen",id:"nnujdEvOPI"})}),o.jsx(Rg,{size:"tiny",pill:!0,leadingComponent:m,onClick:l,toolTip:t({defaultMessage:"View source",id:"khjKGjoVqR"})}),o.jsx(Rg,{size:"tiny",pill:!0,leadingComponent:p,onClick:c,toolTip:t({defaultMessage:"Download",id:"5q3qC0sC3r"})})]})});g9e.displayName="AppsAccessory";const y9e=R.memo(()=>{const e="assets-accessory",{$t:t}=Z(),{inFlight:n,result:{backend_uuid:r}}=ln(),{exportAllAssets:s,isExporting:a}=tnn({reason:e,entryUUID:r}),{isMobileStyle:i}=Ce(),l=f.useCallback(()=>s(),[s]);return n||i?null:o.jsx(Rg,{text:t({defaultMessage:"Download all",id:"V1UrPNM96z"}),size:"tiny",icon:tFe,onClick:l,isLoading:a,disabled:a})});y9e.displayName="AssetsAccessory";const x9e=R.memo(({result:e,setIsGeneratingImage:t,isGeneratingImage:n})=>{const r="generate-image-accessory",{createLimit:s}=Sa({reason:r}),{onGenerateImageClick:a}=JPe({reason:r}),{$t:i}=Z(),{isMobileStyle:l}=Ce(),c=f.useMemo(()=>({entryUUID:e.backend_uuid,entryTitle:e.query_str??"",frontendContextUUID:e.frontend_context_uuid??""}),[e.backend_uuid,e.frontend_context_uuid,e.query_str]),u=f.useCallback(({style:m,customInstructions:p,onFailure:h})=>a({entryUUID:e.backend_uuid,imageStyle:m,customInstructions:p,setIsLoadingGeneratedImage:t,onSuccessCallback:()=>t(!1),onFailureCallback:g=>h(g)}),[a,e.backend_uuid,t]),d=f.useCallback(({onClick:m,isRateLimitReached:p,isDisabled:h,buttonIcon:g,text:y})=>o.jsx(Rg,{text:y,size:"tiny",icon:g,onClick:m,disabled:h||p||n,extraCSS:"!py-md"}),[n]);return o.jsx(ve.div,{className:"py-sm pl-sm ml-auto",children:!l&&o.jsx(a8e,{entry:c,btnText:i(n?{defaultMessage:"Generating...",id:"A/lLjOnjl0"}:{defaultMessage:"Generate Image",id:"DjAvWI2RyU"}),userCreateLimit:s,isDisabled:!1,onGenerateClick:u,buttonComponent:d})})});x9e.displayName="GenerateImageAccessory";const v9e=f.memo(({idx:e,result:t,sbsEntriesGroup:n,isLastResult:r,isFirstResult:s,lastResultBuffer:a})=>{const{inFlight:i}=Ht(),{scrollToListItem:l}=RN(),{submitQuery:c,shouldShowProductFeedback:u,feedbackEntryUUID:d,shouldShowRecruitmentBanner:m,deleteLastResult:p,setQuote:h}=ta(),g=f.useCallback(async y=>{i||c(y)},[c,i]);return o.jsx(EH,{idx:e,result:t,inFlight:i,isLastResult:r,isFirstResult:s,scrollToListItem:l,submitQuery:g,children:o.jsx(Sz,{scrollToListItem:l,children:o.jsx(a3e,{children:o.jsx(h9e,{isLastResult:r,isFirstResult:s,sbsEntriesGroup:n,shouldShowProductFeedback:u,feedbackEntryUUID:d??"",shouldShowRecruitmentBanner:m,deleteLastResult:p,setQuote:h,submitQuery:g,scrollToListItem:l,lastResultBuffer:a,idx:e})})})})});v9e.displayName="ThreadEntry";const b9e=R.memo(({children:e,forceVisible:t=!1,unmeasuredHeight:n,rootMargin:r,threshold:s,root:a,ref:i})=>{const[l,c]=f.useState(0),[u,d]=f.useState(t),[m,p]=f.useTransition(),[h,g]=f.useState(1),y=f.useRef(0),x=f.useRef(null),v=f.useRef(null),b=f.useRef(null),_=f.useRef(null);f.useEffect(()=>{const C=x.current,S=v.current;if(!(!C||!S||t))return b.current=new ResizeObserver(([E])=>{if(!E)return;const M=E.contentRect.height,k=E.contentRect.width;p(()=>{c(N=>M||N),y.current||(y.current=k),y.current!==k&&(y.current=k,g(N=>N+1))})}),_.current=new IntersectionObserver(([E])=>{E&&p(()=>d(E.isIntersecting))},{rootMargin:r,threshold:s,root:a}),b.current?.observe(C),_.current?.observe(S),()=>{b.current?.disconnect(),_.current?.disconnect()}},[t,n,r,s,a]),f.useEffect(()=>{const C=v.current;return!C||!h||t?void 0:Inn(()=>{_.current?.unobserve(C),d(!0),requestAnimationFrame(()=>_.current?.observe(C))})},[h,t]);const w=f.useCallback(C=>{x.current=C,i instanceof Function?i(C):i&&(i.current=C)},[i]);return o.jsx("div",{style:t?void 0:{minHeight:`${l||n}px`},ref:v,children:o.jsx("div",{ref:w,children:t||u?e:null})})});b9e.displayName="LazyContainer";let Ice=Promise.resolve();const Inn=e=>{if("requestIdleCallback"in window){const t=requestIdleCallback(e);return()=>cancelIdleCallback(t)}else{let t=!1;return Ice=Ice.then(async()=>{t||(e(),await new Promise(n=>setTimeout(n,100)))}).catch(Pn),()=>t=!0}},Rce=1e3,Rnn=1,_9e=R.memo(e=>{const t="thread",{deprecatedOpenToast:n}=Mn(),{results:r}=Ht(),{setQuote:s}=ta(),{scrollContainerRef:a}=Za(),{refs:i}=RN(),l=Ft(),[c,u]=f.useState(!1),d=Z();etn({reason:t});const m=f.useMemo(()=>G_e(r?.length?r:e.placeholderResults||[]),[r,e.placeholderResults]);f.useEffect(()=>{m.some(v=>v[0]?.has_expired_attachments)&&n(d.formatMessage({id:"zR3dvwKUWo",defaultMessage:"Some files have expired. Please reupload files to continue."}),"error",3)},[m,n,d]);const p=f.useMemo(()=>{if(typeof window>"u")return-1;const x=window.location.hash.slice(1);return x?Number.isNaN(Number(x))?m?.findIndex(v=>v[0]?.backend_uuid===x):Number(x):-1},[m]),h=f.useCallback((x,v)=>{v?i[x]={current:v}:delete i[x]},[i]),g=f.useCallback((x,v)=>x===0||x===v-1||!c&&x<=p,[p,c]);f.useEffect(()=>{if(~p){const x=setTimeout(()=>{u(!0)},1e4);return()=>{clearTimeout(x)}}},[p]),f.useEffect(()=>{const x=a.current;return x&&(x.scrollTop=0),()=>{u(!1)}},[l,a]),f.useEffect(()=>()=>{s(null)},[]);const y=f.useMemo(()=>m.map((x,v)=>{const b=x[0],_=v===0,w=v===m.length-1;return b?o.jsx(w9e,{result:b,resultsGroup:x.length>1?x:fe,isLastResult:w,isFirstResult:_,lastResultBuffer:w?e.lastResultBuffer:void 0,forceVisible:g(v,m.length),idx:v,scrollContainerRef:a,setRef:h},b.uuid||b.backend_uuid):null}),[m,e.lastResultBuffer,g,a,h]);return o.jsx("div",{children:y})});_9e.displayName="Thread";const w9e=R.memo(({result:e,resultsGroup:t,isLastResult:n,isFirstResult:r,forceVisible:s,idx:a,scrollContainerRef:i,lastResultBuffer:l,setRef:c})=>{const u=e.attachments?.length>0,d=f.useMemo(()=>()=>o.jsx(qN,{className:V({"pb-threadInputHeightWithPadding":n&&!u,"pb-threadAttachmentsHeightWithPadding":n&&u})}),[u,n]),m=f.useCallback(p=>c(a,p),[a,c]);return o.jsx(Pr,{fallback:d,code:"SOMETHING_WENT_WRONG_ERROR",children:o.jsx(b9e,{forceVisible:s,unmeasuredHeight:Rce,rootMargin:`${Rce*Rnn}px 0px`,threshold:0,root:i.current,ref:m,children:o.jsx(v9e,{idx:a,result:e,sbsEntriesGroup:t,isLastResult:n,isFirstResult:r,lastResultBuffer:l})})},e.uuid||e.backend_uuid)});w9e.displayName="LazyContainerFactory";const C9e=R.memo(()=>{const{$t:e}=Z(),{firstResult:{parent_info:t}={}}=Ht();if(!t?.mode||!t?.url_slug)return null;const n=t?.mode===ug.ARTICLE?"page":"search",r=!!t?.preview_image_url;return o.jsx(Ye,{href:`/${n}/${t?.url_slug}`,children:o.jsxs(H,{variant:"background",bgHover:"subtler",className:"p-md shadow-subtle mb-sm relative mx-auto mt-[calc(var(--header-height)+var(--size-md))] flex justify-between rounded-lg border pb-[12px]",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs(F,{color:"light",variant:"tiny",className:"mb-xs gap-x-xs flex items-center",children:[o.jsx(le,{icon:o_,size:"xs"}),o.jsx("div",{children:e({defaultMessage:"Follow up to",id:"D3eCB2NeGQ"})})]}),o.jsx(F,{variant:"baseSemi",color:"light",className:"line-clamp-1 break-all",children:t?.title})]}),r&&o.jsx("div",{className:"ml-md shrink-0",children:o.jsx(Ss,{src:t?.preview_image_url,alt:t?.title||"Preview",imageClassName:"h-16 w-16 rounded object-cover",rounded:"sm",fadeIn:!1})})]})})});C9e.displayName="ParentThreadLink";const S9e=({entryUUID:e,frontendContextUUID:t,existingCollection:n,existingFirstThreadQuery:r,filterOnSearchTerm:s,reason:a})=>{const{openModal:i}=wt(),{collections:l}=$T({autoFetch:!0,reason:a}),c=f.useCallback(async()=>{!e||!t||(l?.length?i("collectionSelectModal",{entryUUID:e,currentCollection:n??null,searchTerm:s?r??"":void 0,frontendContextUUID:t}):i("spaceCreateForThread",{frontendContextUUID:t,entryUUID:e}))},[l?.length,e,t,n,r,i,s]);return f.useMemo(()=>({openAddToCollectionModal:c}),[c])};async function Pnn({contextUUID:e,title:t,rwToken:n,callback:r,reason:s}){try{const a=await ae.POST("/rest/thread/set_thread_title",s,{body:{context_uuid:e,title:t,read_write_token:n},headers:{"Content-Type":"application/json"}});r?.(a)}catch(a){r?.(a)}}function Onn(e){return ege(e)?e:de.PRO}function Lnn(e){const t=e?.filter(Jy)??fe;return t.length>0?t:[ql.web]}function Dnn(){if(typeof window>"u")throw new Error("useCreateTaskFromThread should only be used on the client");const[e,t]=f.useState(!1),[n,r]=f.useState(!1),{hasAccessToProFeatures:s}=Et(),a=_t(),{firstResult:i}=Ht(),l=vet(),c=i?.query_str||l.first_query,u=f.useMemo(()=>Onn(i?.display_model),[i?.display_model]),d=f.useMemo(()=>i?.sources?.sources?Lnn(i.sources.sources):[ql.web],[i?.sources?.sources]),m=f.useMemo(()=>s&&!!c,[s,c]),p=f.useCallback(()=>{m&&t(!0)},[m]),h=f.useCallback(()=>{t(!1)},[]),g=f.useCallback(()=>{t(!1),r(!0)},[]),y=f.useCallback(()=>{r(!1),a.push("/account/tasks")},[a]),x=f.useCallback(()=>{r(!1)},[]),v=f.useMemo(()=>{if(!c)return;const b=new Date;return{title:"",prompt:c,schedule:{kind:"DAILY",hour:b.getHours(),minute:b.getMinutes(),day:b.getDate(),month:b.getMonth(),year:b.getFullYear(),dayOfWeek:b.getDay()},searchModel:u,sources:d}},[c,u,d]);return f.useMemo(()=>({canCreateTask:m,isTaskModalOpen:e,handleCreateTask:p,handleTaskModalClose:h,handleTaskModalSuccess:g,taskPrefillData:v,showConfirmationToast:n,handleConfirmationToastSettings:y,handleConfirmationToastDismiss:x}),[m,p,h,g,e,v,n,y,x])}const Fnn=e=>{const{deprecatedOpenToast:t}=Mn(),[n,r]=f.useState(!1),s=f.useCallback(async(a,i)=>{try{r(!0),t("Exporting thread...","refresh",10);const l=await i(),c=atob(l.file_content_64),u=new Array(c.length);for(let g=0;g<c.length;g++)u[g]=c.charCodeAt(g);const d=new Uint8Array(u),m=new Blob([d],{type:`application/${a}`}),p=window.URL.createObjectURL(m),h=document.createElement("a");h.href=p,h.download=l.filename,h.style.display="none",document.body.appendChild(h),h.click(),setTimeout(()=>{document.body.removeChild(h),window.URL.revokeObjectURL(p)},1e3),t("Export succeeded","success",3)}catch{t(e,"error")}finally{r(!1)}},[t,e]);return f.useMemo(()=>({handleExport:s,isExporting:n}),[s,n])},Unn=({reason:e})=>{const n=Z().formatMessage({defaultMessage:"Failed to export answer",id:"UiPrX3hXY8"}),{handleExport:r,isExporting:s}=Fnn(n),a=f.useCallback(async(i,l)=>{await r(l,()=>vge({thread_uuid:i,format:l,reason:e}))},[r,e]);return f.useMemo(()=>({convertContent:a,isExporting:s}),[a,s])},vG=R.memo(({choices:e,...t})=>o.jsx(H,{className:"mt-sm divide-y rounded md:border",...t,children:e.map((n,r)=>n.subMenu?o.jsxs("div",{children:[f.createElement(Xg,{type:"default",...n,rounded:!1,key:r}),n.active&&n.subMenu&&o.jsx(E9e,{choices:n.subMenu})]}):f.createElement(Xg,{type:"default",...n,rounded:!1,key:r}))}));vG.displayName="RadioCard";const E9e=R.memo(({choices:e})=>o.jsx(H,{children:e.map((t,n)=>f.createElement(Xg,{type:"radio",showIconLeft:!0,selected:t.active??!1,...t,rounded:!1,key:n}))}));E9e.displayName="RadioCardSubMenu";const M9e=R.memo(({onClose:e,isOpen:t,onDelete:n,...r})=>{const{$t:s}=Z(),[a,i]=f.useState(!1),[l,c]=f.useState("all");f.useEffect(()=>{t||(i(!1),c("all"))},[t]);const u=f.useMemo(()=>[{text:s({defaultMessage:"All Threads",id:"2DJ/HRvVaR"}),label:s({defaultMessage:"All your threads will be deleted",id:"YDOzv2WOkx"}),active:l==="all",onClick:()=>{c("all")}},{text:s({defaultMessage:"Standalone Threads",id:"6HJEHjz/aG"}),label:s({defaultMessage:"Only your threads which are not part of a space will be deleted",id:"lFOvDZ2Tnp"}),active:l==="standalone",onClick:()=>{c("standalone")}}],[s,l]),d=f.useMemo(()=>[{text:"Cancel",onClick:e},{text:s(a?{defaultMessage:"Yes, Delete",id:"QEmYhzreEW"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),variant:"rejected",onClick:()=>{a?n(l):i(!0)}}],[s,l,a,e,n]);return o.jsx(on,{...r,isOpen:t,onClose:e,title:s(a?l==="all"?{defaultMessage:"Delete all threads?",id:"Kju4ObJhbP"}:{defaultMessage:"Delete standalone threads?",id:"kiKGdmk4lu"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),actionList:d,children:o.jsx("div",{children:a?o.jsx("div",{children:o.jsx(F,{children:s(l==="all"?{defaultMessage:"All your threads will be deleted. This cannot be undone.",id:"U1IQ/Dlkge"}:{defaultMessage:"Your threads which are not part of a space will be deleted. This cannot be undone.",id:"Ko7lNjweFq"})})}):o.jsx(vG,{className:"-mx-sm -my-sm border-none",choices:u})})})});M9e.displayName="DeleteThreadsModal";const Bnn=(e,t)=>{const{value:n,loading:r}=Dt({flag:"discover-early-fetch",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},k9e=R.memo(({children:e,fetchNextPage:t,hasNextPage:n,showLoadingState:r,itemsLength:s,loadingPlaceholder:a})=>{const i=f.useRef(t);i.current=t;const l=f.useRef(Js(()=>i.current(),300,{leading:!0,trailing:!1})),c=f.useRef(null),u=f.useRef(!1),d=f.useRef(null),{variation:m}=Bnn(!1);f.useEffect(()=>{if(!m||!n||s===0)return;const h=()=>{if(!c.current)return;const y=c.current.getBoundingClientRect(),x=window.innerHeight;d.current===null&&(d.current=y.top);const v=window.scrollY||window.pageYOffset,b=document.documentElement.scrollTop,_=document.body.scrollTop,w=v||b||_,C=d.current!==null&&y.top<d.current*.9;(w>100||C)&&!u.current&&(u.current=!0);const S=u.current?Math.min(x*3,1200):0;y.top<=x+S&&l.current()},g=Js(h,100);return window.addEventListener("scroll",g,!0),document.addEventListener("scroll",g,!0),h(),()=>{window.removeEventListener("scroll",g,!0),document.removeEventListener("scroll",g,!0),g.cancel()}},[n,s,m]),s5(c,l.current,{rootMargin:"50px",threshold:0});const p=a||(s===0?o.jsx(H,{className:"py-sm",children:o.jsx(To,{animateLines:!1,blockCount:12,divider:!0})}):o.jsx(H,{className:"py-md",children:o.jsx(To,{animateLines:!1,blockCount:1})}));return o.jsxs(o.Fragment,{children:[e,r&&p,s>0&&n&&o.jsx("div",{ref:c,className:"border border-transparent"})]})});k9e.displayName="LibraryItemList";const Vnn=({collectionUUID:e,reason:t})=>{const{collections:n}=$T({autoFetch:!0,reason:t});return!e||!n?null:n.find(s=>s.uuid===e)??null},T9e=R.memo(({type:e,featuredImage:t,title:n,className:r,href:s})=>{if(!t||e!==ao.DISCOVER)return null;const a=o.jsx("div",{className:V("relative size-24 flex-none overflow-hidden rounded-md",r),children:t.includes("images.unsplash.com")?o.jsx("img",{src:t,alt:n,className:"size-full object-cover object-center"}):o.jsx("img",{src:t,alt:n,sizes:"33vw",className:"object-cover object-center"})});return s?o.jsx(Ye,{href:s,children:a}):a});T9e.displayName="ThreadImage";const $nn=()=>{const{$t:e}=Z();return f.useMemo(()=>({yearAgo:e({defaultMessage:"year ago",id:"FzcTXH29w0"}),yearsAgo:e({defaultMessage:"years ago",id:"zJmD8CS6cm"}),monthAgo:e({defaultMessage:"month ago",id:"bZWV9MmB/N"}),monthsAgo:e({defaultMessage:"months ago",id:"Lui0j+6Np9"}),dayAgo:e({defaultMessage:"day ago",id:"G4Y/+2FJhb"}),daysAgo:e({defaultMessage:"days ago",id:"vEpDmSBrwP"}),hourAgo:e({defaultMessage:"hour ago",id:"7v28g+bbYy"}),hoursAgo:e({defaultMessage:"hours ago",id:"2GaNTzDbM2"}),minutesAgo:e({defaultMessage:"minutes ago",id:"9aNLtXrhB8"}),minuteAgo:e({defaultMessage:"minute ago",id:"G8L9c8oAYi"}),justNow:e({defaultMessage:"Just now",id:"bxv59Vvssz"}),justNowShort:e({defaultMessage:"Now",id:"tgvES0v2HS"})}),[e])},N9e=R.memo(({className:e})=>{const t=_t(),n=f.useCallback(()=>{t.push("/account/tasks")},[t]),{variation:r,loading:s}=Bp(!1);return s?null:o.jsxs(F,{variant:"tiny",color:"super",className:V("gap-x-xs flex flex-row items-center hover:cursor-pointer",e),onClick:n,children:[o.jsx(le,{icon:Om,size:"xs",className:"-translate-y-px"}),r?o.jsx(he,{defaultMessage:"Automation",id:"Fn4YKyl4lm"}):o.jsx(he,{defaultMessage:"Task",id:"0wJ7N+noSq"})]})});N9e.displayName="TaskIndicator";const X7=R.memo(({icon:e,count:t,textVariant:n="tiny",textColor:r="light",className:s})=>o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(F,{variant:n,color:r,className:s,children:o.jsx(le,{icon:e,size:"sm"})}),o.jsx(F,{variant:n,color:r,className:s,children:H8(t)})]}),(e,t)=>e.count===t.count&&e.icon===t.icon&&e.className===t.className),j9e=R.memo(({threadAccess:e,socialInfo:t,textVariant:n,textColor:r,className:s})=>{if(!e||!t||Itt(e))return null;const a=t.view_count??0,i=t.fork_count??0;return o.jsxs(o.Fragment,{children:[a>0&&o.jsx(X7,{icon:Lk,count:a,textColor:r,textVariant:n,className:s}),i>0&&o.jsx(X7,{icon:o_,count:i,textColor:r,textVariant:n,className:s})]})});j9e.displayName="ThreadSocial";const Wnn=we(async()=>Q(()=>import("./TimeAgoTooltip-BCCFo_sC.js"),__vite__mapDeps([454,3,1,4,5,6]))),A9e=()=>{const{$t:e}=Z(),{isEnterprise:t}=kn({reason:"temporary-thread-tooltip"});return e(t?{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, data retention policies, or organizational requirements.",id:"BJL0VPkJd3"}:{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, or data retention policies.",id:"mxG1FiTDFj"})},I9e=R.memo(({type:e,threadCount:t,threadAccess:n,lastUpdated:r,socialInfo:s,expiry:a,source:i,displayModel:l})=>{const c=$nn(),{locale:u,$t:d}=Z(),m=n?Ptt(n):null,p=Z(),h=f.useMemo(()=>{if(!a)return null;const x=a.endsWith("Z")?a:`${a}Z`,v=new Date(x);return F_(p,v,{style:"short"},1e3*60*60*24)},[a,p]),g=f.useMemo(()=>{if(!a)return null;const x=a.endsWith("Z")?a:`${a}Z`;return new Date(x).toLocaleString(u,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},[a,u]),y=A9e();return o.jsxs("div",{className:"gap-x-md flex items-center",children:[l?o.jsx(znn,{displayModel:l}):null,h&&o.jsx(En,{tooltipText:y,tooltipLayout:"right",asChild:!0,children:o.jsxs(F,{variant:"tiny",color:"light",className:"pr-sm pl-xs border-subtler flex cursor-default items-center gap-x-0.5 rounded-full border border-dashed py-0.5",children:[o.jsx(le,{icon:vde,size:"xs"}),d({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"})]})}),h?o.jsx(En,{tooltipText:g,tooltipLayout:"right",children:o.jsx(F,{variant:"tiny",color:"light",className:"cursor-default",children:d({defaultMessage:"Expires {expiry}",id:"KhQvNJGIsK"},{expiry:h})})}):r&&o.jsx(Wnn,{timestamp:r,translations:c,locale:u}),i&&i==="perplexity_tasks"&&o.jsx(N9e,{}),o.jsx(j9e,{socialInfo:s,threadAccess:n}),!!t&&t>1&&o.jsx(X7,{icon:RD,count:t}),e===ao.COLLECTION&&kye(n)&&o.jsxs(F,{className:"gap-x-xs ml-xs flex items-center",variant:"tiny",color:"light",testId:"thread-shared-indicator",children:[m&&o.jsx(le,{icon:m,size:"xs",className:"-mt-px"}),o.jsx("span",{children:d({defaultMessage:"Shared",id:"kWI6zXRaHY"})})]})]})});I9e.displayName="ThreadMetadata";const Hnn=["pplx_alpha","pplx_beta"],znn=({displayModel:e})=>{const{$t:t}=Z();if(!e||!Hnn.includes(e))return null;const n=e==="pplx_alpha"?t({defaultMessage:"Research",id:"JEe7dVso7F"}):e==="pplx_beta"?t({defaultMessage:"Labs",id:"ylFNoY79wa"}):null,r=e==="pplx_alpha"?hD:e==="pplx_beta"?Pk:null;return o.jsxs(F,{variant:"tiny",color:"light",className:"pr-sm border-subtlest flex items-center gap-x-0.5 rounded-full border py-0.5 pl-1.5",children:[r&&o.jsx(le,{icon:r,size:"xs"}),n]})},R9e=f.memo(({title:e,preview:t,threadCount:n,lastUpdated:r,href:s="/",rwToken:a,socialInfo:i,showActionMenu:l=!0,authorImage:c,threadAccess:u,type:d,featuredImage:m,entryUUID:p,contextUUID:h,collection:g,expiry:y,onRemoveExpiration:x,source:v,isIncognitoThread:b,displayModel:_,isSelectable:w,isSelected:C,onSelect:S,isStreaming:E})=>{const M="thread-item",k=Vnn({collectionUUID:g?.uuid,reason:M}),{deleteThread:N}=zw({reason:M}),{removeThreadFromCollection:P}=cx({reason:M}),{trackEvent:L}=je(),[O,A]=f.useState(!1),j=f.useCallback(async $=>{N({entryUUID:$,collectionSlug:k?.slug}),L("delete thread from history click",{entryUUID:$})},[k?.slug,N,L]),{openAddToCollectionModal:T}=S9e({entryUUID:p,existingCollection:k,reason:M,frontendContextUUID:h}),I=f.useCallback($=>{$==="add"?L("click add thread to space",{contextUUID:h,isBookmark:!1}):L("click swap thread space",{contextUUID:h,isFromBookmark:!1,collectionUUID:k?.uuid||""}),T()},[k,h,L,T]),U=f.useCallback(()=>{L("click remove thread from space",{contextUUID:h,collectionUUID:k?.uuid||"",isBookmark:!1}),P({entryUUID:p,oldCollectionUUID:k?.uuid,frontendContextUUID:h,collectionSlug:k?.slug})},[k?.uuid,k?.slug,h,p,P,L]),B=f.useCallback(()=>I("add"),[I]),D=f.useCallback(()=>I("swap"),[I]),W=f.useCallback(()=>{A(!0),D3(p,()=>{x()})},[p,x]),z=f.useCallback(()=>S?.(!C),[C,S]);return o.jsxs(H,{className:"relative",children:[o.jsx(Je,{initial:!1,children:w&&!E&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"-translate-x-sm top-md mt-three absolute right-full",children:o.jsx(B_,{checked:C??!1,toggleChecked:z})})}),o.jsxs("div",{className:"gap-x-md py-md group relative flex items-center",children:[o.jsx(T9e,{featuredImage:m,type:d,title:e,href:s}),o.jsxs("div",{className:"gap-y-sm flex w-full grow flex-col",children:[o.jsxs(H,{className:"flex justify-between",children:[o.jsx(Ye,{href:s,className:"group block overflow-x-hidden",children:o.jsxs(H,{children:[o.jsxs(ve.div,{className:"gap-x-sm flex items-center",layout:!0,layoutRoot:!0,children:[(!!c||d===ao.COLLECTION)&&o.jsx(Pt,{size:"small",user:c??void 0}),o.jsx(F,{className:"gap-sm flex grow items-center",variant:"baseSemi",children:o.jsxs(jc,{children:[o.jsx(Je,{initial:!1,children:E&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"text-super",children:o.jsx(Zr,{size:14})},"spinner")}),o.jsx(ve.div,{layout:"position",transition:{duration:.15,ease:Jd},"data-testid":`thread-title-${e}`,className:"md:group-hover:text-super line-clamp-1 w-full break-all",children:o.jsx(pG,{speed:"slow",active:!!E,children:e})},e)]})})]}),o.jsx(F,{color:"light",className:"mt-two line-clamp-2 text-balance",variant:"small",children:t})]})}),o.jsx(H,{className:V("duration-150",{"opacity-0":w,"pointer-events-none group-hover:opacity-0":w}),children:o.jsx(KN,{show:l,currentSpace:k,showConvertThreadToArticle:!1,onDelete:j,onAddToSpace:B,onSwapSpace:D,onRemoveFromSpace:U,rwToken:a,contextUUID:h,threadAccess:u,collectionSlug:g?.slug,type:d,showSaveAsFileToSpace:!1,expiry:O?void 0:y,onRemoveExpiration:O?void 0:W,buttonSize:"tiny",threadId:p,isIncognitoThread:b})})]}),o.jsx("div",{className:l?"mt-xs":"mt-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(I9e,{type:d,threadCount:n,threadAccess:u,lastUpdated:r,socialInfo:i??null,expiry:y,source:v,displayModel:_}),o.jsx("div",{className:"gap-x-xs flex items-center",children:g?.title&&d===ao.LIBRARY&&o.jsx(Ye,{href:`/spaces/${g?.slug}`,className:"block",children:o.jsx(H,{className:"px-xs rounded-full border",children:o.jsxs(F,{variant:"tiny",className:"gap-x-xs px-sm py-xs flex cursor-pointer select-none items-center transition duration-300 hover:opacity-70",testId:"thread-collection-pill",children:[o.jsx(vf,{unified:g.emoji,size:"tiny"}),o.jsx("div",{className:"line-clamp-1",children:g.title})]})})})})]})})]})]})]})});R9e.displayName="ThreadItem";var ao;(function(e){e.LIBRARY="library",e.COLLECTION="collection",e.DISCOVER="discover",e.SEARCH="search",e.INCOGNITO_SEARCH="incognitoSearch"})(ao||(ao={}));const Gnn="temporary-threads",Pce=e=>{rn(Gnn,String(e),{expires:Kr})};function qnn(e){let t;switch(e.mode){case"CONCISE":t="concise";break;case"COPILOT":t="copilot";break;case"ARTICLE":t="article";break}return{title:e.title??"",preview:"",threadCount:1,lastUpdated:e.lastUpdated??"",href:`/search/${e.slug}`,rwToken:e.rwToken??"",focus:e.focus,entryUUID:e.entryUUID??"",contextUUID:e.contextUUID??"",copilot:!1,socialInfo:e.socialInfo??null,collectionUUID:e.collectionInfo?.uuid??null,authorImage:null,featuredImage:null,thumbnailImage:null,threadAccess:null,collection:e.collectionInfo?{uuid:e.collectionInfo?.uuid??"",title:e.collectionInfo?.title??"",slug:e.collectionInfo?.slug??"",emoji:e.collectionInfo?.emoji??""}:void 0,mode:t,expiry:null,source:e.source??null,displayModel:e.displayModel,slug:e.slug??""}}const Knn=R.memo(({threads:e,fetchNextPage:t,hasNextPage:n=!1,showLoadingState:r=!1,showEmptyState:s=!1,type:a,showTemporaryThreads:i,setShowTemporaryThreads:l,searchTerm:c,invalidateThreadsQuery:u,ascending:d,setAscending:m,isFetchingNextPage:p,source:h,setSource:g,threadType:y,setThreadType:x,setDeleteModalOpen:v,deleteModalOpen:b,streamingThreads:_})=>{const{$t:w}=Z(),C=f.useMemo(()=>(e??[]).map(qrt),[e]),S=lt(),[E,M]=f.useState(!1),[k,N]=f.useState([]),{isMobileStyle:P}=Ce(),L=f.useRef(c),{deleteAllThreads:O,deleteThreads:A}=zw({reason:"threads-list"}),[j,T]=f.useState(null),I=f.useCallback(re=>{O(re),v(!1)},[O,v]),U=f.useCallback(re=>{N(se=>se.includes(re)?se.filter(me=>me!==re):[...se,re])},[]),B=f.useCallback(()=>{M(!1),N([])},[]);f.useEffect(()=>{L.current!==c&&(B(),L.current=c)},[c,B]);const D=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"Newest First",id:"dZYazP4QWO"}),onClick:()=>{m(!1),B()},show:!0,active:!d},{type:"default",text:w({defaultMessage:"Oldest First",id:"FqI37DU6LJ"}),onClick:()=>{m(!0),B()},show:!0,active:d}],[d,w,m,B]),W=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{g("all"),B()},active:h==="all"},{type:"default",text:w({defaultMessage:"Comet",id:"9WmFFQw7ns"}),onClick:()=>{g("comet"),B()},active:h==="comet"}],[h,w,g,B]),z=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{x("all"),B()},active:y==="all"},{type:"default",text:w({defaultMessage:"Research",id:"JEe7dVso7F"}),onClick:()=>{x("research"),B()},active:y==="research"},{type:"default",text:w({defaultMessage:"Labs",id:"ylFNoY79wa"}),onClick:()=>{x("labs"),B()},active:y==="labs"}],[y,w,x,B]),$=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"Show",id:"K7AkdLoAj6"}),onClick:()=>{l(!0),Pce(!0),B()},active:i},{type:"default",text:w({defaultMessage:"Hide",id:"VA/Z1SW3vH"}),onClick:()=>{l(!1),Pce(!1),B()},active:!i}],[i,w,l,B]),X=pn(),q=f.useMemo(()=>o.jsx(L9e,{}),[]),Y=f.useCallback(()=>v(!1),[v]),G=f.useCallback(()=>{A({entryUUIDs:k,callback:B})},[A,k,B]),{isIncognito:J,incognitoType:K}=Qa({reason:"threads-list"}),te=f.useMemo(()=>h!=="all"||y!=="all",[h,y]);return o.jsxs(o.Fragment,{children:[o.jsxs(k9e,{fetchNextPage:t,hasNextPage:n,showLoadingState:p||r,itemsLength:C.length,loadingPlaceholder:q,children:[J&&o.jsx("div",{"data-color-scheme":"dark",children:o.jsxs(H,{className:"mt-md p-md gap-sm flex items-center justify-start rounded-md",variant:"subtler",children:[o.jsx(Ef,{inverse:!0,incognitoType:K}),o.jsxs("div",{children:[o.jsx(F,{variant:"smallBold",color:"white",children:w({defaultMessage:"You are incognito",id:"pBm4msoyyh"})}),K===Qd.GOVERNMENT?o.jsx(F,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads will have Zero Data Usage active",id:"Yq0Q7xmZMb"})}):o.jsx(F,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads are anonymous, won't appear in your library, and expire after 24 hours.",id:"/FQ4Dx5TpY"})})]})]})}),o.jsx(H,{className:V("gap-sm pt-md flex items-center justify-between",{"bg-base pb-md -mb-md sticky top-0 z-10":!P}),variant:"background",children:o.jsxs(O9e,{children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[!P&&o.jsxs(H,{className:"pr-sm relative flex-1 shrink-0",children:[o.jsx(P9e,{selectEnabled:E,resetSelect:B,setSelectEnabled:M}),o.jsx(H,{className:"absolute right-0 top-1/2 h-5 -translate-y-1/2 border-r"})]}),X&&o.jsx(sn,{placement:"bottom-start",isMobileStyle:P,items:W,wrapperClassName:"inline-flex",onOpen:()=>T("source"),onClose:()=>T(null),isOpen:j==="source",children:o.jsx(Td,{variant:h==="all"?"border":"primary",text:h==="all"?w({defaultMessage:"Source",id:"aH4De2Y20k"}):w({defaultMessage:"Source: {comet}",id:"pAvXy3TmGv"},{comet:"Comet"})})}),o.jsx(sn,{placement:"bottom-start",isMobileStyle:P,items:z,wrapperClassName:"inline-flex",onOpen:()=>T("type"),onClose:()=>T(null),isOpen:j==="type",children:o.jsx(Td,{variant:y==="all"?"border":"primary",text:w(y==="all"?{defaultMessage:"Type",id:"+U6ozcnv4r"}:y==="research"?{defaultMessage:"Type: Research",id:"NeGk8fwf1M"}:{defaultMessage:"Type: Labs",id:"yLIVi0dTj2"})})}),o.jsx(sn,{placement:"bottom-start",isMobileStyle:P,items:$,wrapperClassName:"inline-flex",onOpen:()=>T("temporary"),onClose:()=>T(null),isOpen:j==="temporary",children:o.jsx(Td,{variant:"border",text:w(i?{defaultMessage:"Temporary Threads: Show",id:"j0VHwshtHd"}:{defaultMessage:"Temporary Threads: Hide",id:"X8Kc6bnTnf"})})})]}),o.jsx("div",{className:V("gap-sm flex items-center",{}),children:o.jsx(sn,{placement:X?"bottom-start":"bottom-end",isMobileStyle:P,wrapperClassName:"inline-flex",items:D,onOpen:()=>T("sort"),onClose:()=>T(null),isOpen:j==="sort",children:o.jsx(Td,{text:w(d?{defaultMessage:"Sort: Oldest",id:"K8y5AUAIdW"}:{defaultMessage:"Sort: Newest",id:"ouRV0Q2JpB"})})})})]})}),s&&C.length===0?o.jsxs(H,{className:"mt-xl p-xl flex flex-col items-center justify-center rounded-md",children:[o.jsx(F,{variant:"baseSemi",children:te||c?w({defaultMessage:"Nothing turned up",id:"Rn55YzpVb0"}):w({defaultMessage:"No {threads} yet",id:"5zP56HMUgk"},{threads:"Threads"})}),te||c?o.jsx(F,{variant:"small",color:"light",children:w({defaultMessage:"Try different keywords, check for typos, or adjust your filters.",id:"3DJFcRxvex"})}):o.jsx(F,{variant:"small",color:"light",children:o.jsx(he,{defaultMessage:"Try creating a <link>new Thread</link>",id:"18hNnPSiwJ",values:{link:re=>o.jsx(Ye,{className:"text-super",href:"/",children:re})}})})]}):o.jsxs("div",{className:"relative",children:[o.jsxs(H,{className:"relative divide-y",children:[_.filter(re=>!C.find(se=>se.slug===re.slug)).filter(re=>!C.find(se=>se.entryUUID===re.id)).filter(re=>re.slug!==null).map(re=>o.jsx(Z7,{thread:qnn(re),invalidateThreadsQuery:u,selectEnabled:!1,selectedThreads:k,showActionMenu:!1,handleSelect:U,type:a,isStreaming:!0},re.slug||re.entryUUID)),C.map(re=>o.jsx(Z7,{thread:re,invalidateThreadsQuery:u,selectEnabled:E,selectedThreads:k,showActionMenu:a!==ao.DISCOVER&&S,handleSelect:U,type:a},re.slug))]}),r&&o.jsx("div",{className:"bg-base absolute inset-0 opacity-50"})]})]}),o.jsx(M9e,{isOpen:b,onClose:Y,onDelete:I}),o.jsx(Je,{initial:!1,children:E&&o.jsx(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2,bounce:.2,type:"spring"},className:"bottom-md fixed inset-x-0 flex items-center justify-center",children:o.jsxs(H,{variant:"raised",className:"p-sm pl-md shadow-subtle bottom-md flex w-[400px] items-center justify-between rounded-xl border",children:[o.jsx(F,{variant:"small",color:"light",children:w({defaultMessage:"{count, plural, =0 {No Threads} one {# Thread} other {# Threads}} Selected",id:"MqdlBPNiqL"},{count:k.length})}),o.jsx(pe,{text:w({defaultMessage:"Delete {count, plural, =0 {Threads} one {# Thread} other {# Threads}}",id:"nBPaP34ufb"},{count:k.length}),variant:"rejected",size:"small",disabled:k.length===0,onClick:G})]})})})]})}),Z7=R.memo(({thread:e,invalidateThreadsQuery:t,selectEnabled:n,selectedThreads:r,handleSelect:s,type:a,showActionMenu:i,isStreaming:l})=>{const c=f.useCallback(u=>{s(e.entryUUID)},[s,e.entryUUID]);return o.jsx(R9e,{href:e.href,rwToken:e.rwToken,title:e.title,preview:e.preview??"",threadCount:e.threadCount,lastUpdated:e.lastUpdated,copilot:e.copilot,socialInfo:e.socialInfo,threadAccess:e.threadAccess??null,authorImage:e.authorImage,featuredImage:e.featuredImage??null,showActionMenu:i,type:a,entryUUID:e.entryUUID,contextUUID:e.contextUUID,collection:e.collection??null,expiry:e.expiry,onRemoveExpiration:t,source:e.source,isIncognitoThread:!1,displayModel:e.displayModel,isSelectable:n,isSelected:r.includes(e.entryUUID),onSelect:c,isStreaming:l},e.entryUUID)});Z7.displayName="ThreadItemWrapper";Knn.displayName="ThreadsList";const Td=R.memo(({text:e,variant:t="border",onClick:n,chevron:r=!0,icon:s,disabled:a,className:i})=>{const{isMobileStyle:l}=Ce();return o.jsx(pe,{variant:t,size:l?"small":"tiny",text:e,chevron:r,onClick:n,icon:s,extraCSS:V(a?"opacity-50 pointer-events-none":"",i)})});Td.displayName="FilterButton";const P9e=R.memo(({selectEnabled:e,resetSelect:t,setSelectEnabled:n})=>{const{$t:r}=Z(),s=f.useCallback(()=>{n(!e),e&&t()},[e,t,n]);return o.jsxs("div",{className:"inline-grid w-max grid-cols-1 grid-rows-1",children:[o.jsx(Td,{text:r(e?{defaultMessage:"Done",id:"JXdbo8Vnlw"}:{defaultMessage:"Select",id:"kQAf2d9u+x"}),onClick:s,chevron:!1,variant:e?"primary":"border",className:"col-start-1 row-start-1"}),o.jsx(Td,{text:r({defaultMessage:"Select",id:"kQAf2d9u+x"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1}),o.jsx(Td,{text:r({defaultMessage:"Done",id:"JXdbo8Vnlw"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1})]})});P9e.displayName="SelectButton";const O9e=R.memo(({children:e})=>{const{isMobileStyle:t}=Ce();return t?o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"-mx-md",children:o.jsx(fl,{showScrollIndicator:!1,orientation:"horizontal",children:o.jsx("div",{className:"gap-sm px-md flex items-center",children:e})})})}):o.jsx(fl,{showScrollIndicator:!1,orientation:"horizontal",children:o.jsx("div",{className:"gap-sm flex w-full items-center justify-between",children:e})})});O9e.displayName="FiltersWrapper";const L9e=R.memo(()=>o.jsxs(H,{className:"gap-x-md py-md gap-sm group relative flex flex-col items-start",children:[o.jsxs("div",{className:"gap-two flex w-full flex-col",children:[o.jsxs("div",{className:"grid items-center",children:[o.jsx(F,{variant:"baseSemi",className:"col-start-1 row-start-1",children:""}),o.jsx(H,{variant:"subtler",className:"col-start-1 row-start-1 h-4 w-[120px] rounded-full"})]}),o.jsxs("div",{className:"grid w-full items-center",children:[o.jsxs(F,{variant:"small",className:"col-start-1 row-start-1",children:["",o.jsx("br",{}),""]}),o.jsxs("div",{className:"col-start-1 row-start-1 flex w-full flex-col gap-2",children:[o.jsx(H,{variant:"subtler",className:"h-2 w-2/3 rounded-full"}),o.jsx(H,{variant:"subtler",className:"h-2 w-2/3 rounded-full"})]})]})]}),o.jsxs("div",{className:"grid items-center",children:[o.jsx(F,{variant:"tiny",className:"col-start-1 row-start-1",children:""}),o.jsx(H,{variant:"subtler",className:"col-start-1 row-start-1 h-2 w-[80px] rounded-full"})]})]}));L9e.displayName="ThreadItemSkeleton";const D9e=R.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=Pn,icon:a,...i})=>{const[l,c]=f.useState(t),u=f.useRef(null),{$t:d}=Z();f.useEffect(()=>{c(t)},[t]);const m=f.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),p=f.useCallback(()=>{c(!1),s(),m()},[s,m]);return f.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{p()},n*1e3)),()=>{m()}),[l,n,t,s,p,m]),o.jsx(pf,{children:o.jsx(Je,{children:l&&o.jsx(ve.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:no,...i,children:o.jsxs(H,{variant:"raised",className:V("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&o.jsx("div",{className:"p-sm bg-subtler dark:bg-subtle my-[12px] flex aspect-square items-center justify-center rounded-md",children:o.jsx(le,{icon:a,className:"text-quiet",size:"md"})}),o.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[o.jsx(F,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),o.jsxs(H,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[o.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-settings-button"}),o.jsx(H,{className:"border-t"}),o.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:p,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-dismiss-button"})]})]})]})},"task-creation-toast")})})});D9e.displayName="TaskCreationConfirmationToast";const KN=R.memo(({show:e,isBookmarked:t,currentSpace:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,onConvertToArticle:l,onRename:c,threadAccess:u,contextUUID:d,rwToken:m,collectionSlug:p,type:h,isConverting:g,showConvertThreadToArticle:y,className:x,firstResultBackendUUID:v,showSaveAsFileToSpace:b=!0,onBookmark:_,showBookmarkButton:w=!1,title:C,expiry:S,onRemoveExpiration:E,onOpen:M,onClose:k,buttonSize:N="small",threadId:P,isIncognitoThread:L,isNativeMobileVariant:O=!1})=>{const A="thread-overflow-dropdown",j=Z(),[T,I]=f.useState(!1),{trackEvent:U}=je(),{isMobileStyle:B}=Ce(),D=j.formatMessage({defaultMessage:"Export as PDF",id:"syduyBQ0eU"}),W=j.formatMessage({defaultMessage:"Export as Markdown",id:"d3prfCUwCt"}),z=j.formatMessage({defaultMessage:"Export as DOCX",id:"yQ3Z7H5E8P"}),[$,X]=f.useState(!1),{session:q}=Nt(),{convertContent:Y,isExporting:G}=Unn({reason:A}),{fileRepoInfo:J}=Do({reason:A}),K=J?.file_repository_type==="COLLECTION",te=!!m,re=f.useMemo(()=>({pdf:"export thread PDF clicked",md:"export thread MD clicked",docx:"export thread DOCX clicked"}),[]),{collection:se}=Oc({collectionSlug:p,reason:A}),{data:me}=TV({fileRepoInfo:J,fileName:P??"",reason:A}),{saveThreadToSpace:oe,removeThreadFromSpace:ge}=Cbe({fileRepoInfo:J,fileExists:me??!1,reason:A}),xe=f.useCallback(async ut=>{v&&(U(re[ut],{}),await Y(v,ut))},[v,re,U,Y]),ye=w&&B&&!!_,_e=n===null&&(h===ao.LIBRARY||h===ao.SEARCH)&&!!s,be=n!==null&&te&&!!a,Ne=n!==null&&!!i,{isUserAtLeastWriter:Ee}=lx({reason:A}),{onShareThreadToSpace:Re,onMakeThreadPrivate:Ae,isShareable:st}=KU({threadAccess:u,contextUUID:d,rwToken:m,collectionSlug:p,reason:A}),it=K&&Ee&&!st&&!!Re,Se=K&&Ee&&st&&!!Ae,ue=te&&!!r,ke=K&&b&&!me&&!$&&!!se&&se?.user_permission>=2,et=te&&!!E&&!!S&&!L,Ge=K&&b&&(me||$),[ft,Qe]=f.useState(!1),{canCreateTask:Ve,isTaskModalOpen:Le,handleCreateTask:ot,handleTaskModalClose:vt,handleTaskModalSuccess:Rt,taskPrefillData:jt,showConfirmationToast:dn,handleConfirmationToastSettings:On,handleConfirmationToastDismiss:yr}=Dnn(),{variation:Ke,loading:Xe}=SN(!1),gt=f.useMemo(()=>[{type:"default",icon:t?bde:PD,text:t?j.formatMessage({defaultMessage:"Bookmarked",id:"k0fraU5NBY"}):j.formatMessage({defaultMessage:"Add Bookmark",id:"Y4GyA+IDCn"}),show:ye,onClick:_},{type:"default",icon:ur,text:j.formatMessage({defaultMessage:"Add to Space",id:"nB+VQ2svMZ"}),show:_e,onClick:s,testId:"thread-add-to-space"},{type:"default",icon:nFe,text:j.formatMessage({defaultMessage:"Swap Space",id:"y3tRs6Jpig"}),show:be,onClick:a,testId:"thread-swap-space"},{type:"default",icon:It,text:j.formatMessage({defaultMessage:"Remove from Space",id:"2B71WoR6Sk"}),show:Ne,onClick:i,testId:"thread-remove-from-space"},{type:"default",icon:yi,text:j.formatMessage({defaultMessage:"Share thread with Space",id:"kynn3b03Sq"}),show:it,onClick:ut=>{ut.preventDefault(),Re()},testId:"thread-share-to-space"},{type:"default",icon:Og,text:j.formatMessage({defaultMessage:"Make thread private",id:"AIUSJMqN6C"}),show:Se,onClick:ut=>{ut.preventDefault(),Ae()},testId:"thread-make-private"},{type:"default",icon:rFe,text:j.formatMessage({defaultMessage:"Convert to Page",id:"IcFSSFTdA7"}),show:y,onClick:l,testId:"thread-article-create",disabled:g},{type:"default",icon:_de,text:j.formatMessage({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),show:et,onClick:E},{type:"default",icon:yi,text:j.formatMessage({defaultMessage:"Save as file to Space",id:"L8nSm8m8qs"}),show:ke,onClick:()=>{!v||!P||(X(!0),U("save thread to space clicked",{}),oe(v,P))},testId:"thread-save-to-space"},{type:"default",icon:Vd,text:j.formatMessage({defaultMessage:"Remove file from Space",id:"TjcTDl4lU+"}),show:Ge,onClick:async()=>{await ge(P??""),X(!1)},testId:"remove-file-from-space"},{type:"default",icon:Om,text:j.formatMessage({defaultMessage:"Create task",id:"7X1tNR2pav"}),show:Ve,onClick:ot,testId:"thread-create-task"},{type:"separator",show:(it||Se||y)&&!!v},{type:"default",icon:Dm,text:D,show:!!v,onClick:()=>xe("pdf"),disabled:G,testId:"thread-export-pdf"},{type:"default",icon:sFe,text:W,show:!!v,onClick:()=>xe("md"),disabled:G,testId:"thread-export-md"},{type:"default",icon:zk,text:z,show:!!v,onClick:()=>xe("docx"),disabled:G,testId:"thread-export-docx"},{type:"separator",show:ue&&(_e||y)},{type:"default",icon:Vd,text:j.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),show:ue,onClick:()=>Qe(!0),testId:"thread-delete"}],[_e,Ne,be,ue,g,G,y,l,v,j,D,W,z,xe,it,Re,Se,Ae,oe,P,ke,ge,Ge,U,ye,_,t,s,i,a,et,E,Ve,ot]),zt=d&&m&&q,hn=f.useCallback(()=>{I(!0),M?.()},[M]),zn=f.useCallback(()=>{I(!1),k?.()},[k]),Me=se?.user_permission&&Jg(se.user_permission),Ze=f.useMemo(()=>o.jsxs("div",{className:"flex min-h-10 flex-col justify-center",children:[o.jsxs("div",{className:"gap-x-sm group relative flex items-center justify-between py-0.5",children:[zt&&o.jsx(H,{className:"-inset-x-sm absolute -inset-y-0 rounded-lg opacity-0 transition-opacity duration-150 group-hover:opacity-100",variant:"subtler"}),o.jsx(F,{variant:"small",className:"relative line-clamp-1",color:"light",children:C}),zt&&c&&o.jsx(Te,{size:"tiny",icon:Bk,onClick:c,testId:"thread-rename",toolTip:j.formatMessage({defaultMessage:"Rename Thread",id:"4cT2c/aQya"}),extraCSS:"-mr-sm opacity-0 group-hover:opacity-100 transition-opacity duration-150"})]}),n&&!Me&&o.jsxs("div",{className:"gap-x-xs -mt-xs flex h-8 items-center",children:[o.jsx(aFe,{className:"text-quietest size-4 shrink-0 -translate-y-0.5"}),o.jsx("div",{className:"shrink-0 scale-90",children:n.emoji?o.jsx(vf,{unified:n.emoji,size:"small"}):o.jsx(yi,{size:16,className:"text-quietest shrink-0 -translate-y-0.5"})}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:n.title})]})]}),[zt,C,c,j,n,Me]),$e=f.useMemo(()=>[{text:j.formatMessage({defaultMessage:"Nevermind",id:"64sfSNetr+"}),onClick:()=>Qe(!1),testId:"thread-delete-nevermind"},{text:j.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),variant:"rejected",onClick:()=>{Qe(!1),r?.(P??"")},testId:"thread-delete-confirm"}],[j,r,P]),at=f.useCallback(()=>Qe(!1),[]);return!e||gt?.every(ut=>!ut.show)?null:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:x,children:o.jsx(sn,{items:gt,isMobileStyle:B,onOpen:hn,onClose:zn,placement:"bottom-end",header:C?Ze:void 0,children:O&&B?o.jsx(pe,{testId:"thread-dropdown-menu",size:N,icon:$d,variant:"common",pill:!0,extraCSS:V("",{"!text-foreground !bg-subtle":T})}):o.jsx(Te,{testId:"thread-dropdown-menu",size:N,icon:$d,extraCSS:V("",{"!text-foreground !bg-subtle":T})})})}),o.jsx(_5,{isOpen:ft,onClose:at,message:j.formatMessage({defaultMessage:"Delete thread",id:"2WxP2iMtPx"}),subtitle:j.formatMessage({defaultMessage:"Are you sure you want to delete this thread?",id:"9JVHvYsJ0s"}),actionList:$e}),o.jsx(bc,{children:!Xe&&Ke?o.jsx(CN,{open:Le,onClose:vt,onSave:Rt,initialConfiguration:jt?pge(jt):null,source:"thread_dropdown",trackEvent:U}):o.jsx(cz,{open:Le,onClose:vt,onSuccess:Rt,prefill:jt,source:"thread_dropdown"})}),o.jsx(D9e,{message:j.formatMessage({defaultMessage:"Created task",id:"sYXsMoH4Bc"}),isVisible:dn,onSettingsClick:On,onTimeout:yr,timeout:5,icon:Om})]})});KN.displayName="ThreadOverflowDropdown";const Ynn=({reason:e})=>{const{$t:t}=Z(),n=lt(),{firstResult:{context_uuid:r,thread_access:s=Kpe,collection_info:{slug:a}={}}={}}=Ht(),{isEnterprise:i}=kn({reason:e}),{openVisitorLoginUpsell:l}=gr({enabled:!n}),c=Oo(),{handleAccessChange:u,isShareable:d}=KU({threadAccess:s,contextUUID:r,rwToken:c,collectionSlug:a,reason:e}),m=f.useCallback(y=>{y!==s&&(n?r&&c&&u(y):l({title:t({defaultMessage:"Sign in to save private {threads}",id:"Rf9T7Whe3t"},{threads:"Threads"}),origin:De.SHARE_DROPDOWN,sheetModalVariant:"bottom-sheet-gradient"}))},[s,n,r,c,l,t,u]),p=f.useCallback(()=>{i||s===Ct.PRIVATE_READ&&n&&m(Ct.PUBLIC_READ)},[i,s,n,m]),{accessLevelMenuItems:h,selectedAccessMenuItem:g}=Mye({currentAccessLevel:s,onClick:m,isCollection:!1,isPage:!1,reason:e});return f.useMemo(()=>({rwToken:c,thread_access:s,handleShareDropdownClick:p,accessLevelMenuItems:h,selectedAccessMenuItem:g,isThreadSharable:d,context_uuid:r}),[h,r,p,d,c,g,s])},F9e=()=>{try{return Kw().activeEntryIdx}catch{return}},U9e=R.memo(({shareHref:e,shareSource:t,hasMounted:n,maybeContextUUID:r,onClick:s,...a})=>{const{$t:i}=Z(),{trackEvent:l}=hx(),{openToast:c}=Mn(),u=F9e(),d=f.useCallback(()=>{s?.(),c({message:i({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"}),variant:"success",timeout:3}),navigator.clipboard.writeText(n?YE(decodeURIComponent(e),u?.toString()):""),l("click copy link button",{contextUUID:r,source:t||"copyLinkButton"})},[s,c,i,n,e,u,l,r,t]);return o.jsx(pe,{clickFeedback:!0,size:"small",onClick:d,toolTip:i({defaultMessage:"Copy link",id:"lbr3Lq2Lnm"}),tooltipLayout:"bottom",icon:xp,variant:"primary",testId:"copy-link-button",...a})});U9e.displayName="CopyLinkButton";const Qnn=({onClick:e,size:t="small",isMobileStyle:n,isNativeMobileVariant:r,testId:s="share-button"})=>{const{$t:a}=Z();return r?o.jsx(pe,{pill:!0,onClick:e,variant:"common",size:t,icon:Cv,extraCSS:"-mr-sm",testId:s}):n?o.jsx(Te,{onClick:e,icon:Cv,variant:"common",size:t,testId:s}):o.jsx(pe,{onClick:e,variant:"primary",size:t,text:a({defaultMessage:"Share",id:"OKhRC6eWRw"}),icon:Cv,testId:s})},B9e=R.memo(({hasMounted:e,shareHref:t,EditorDropDownContent:n,onClick:r,maybeContextUUID:s,size:a="small",showCopyLinkButton:i=!0,contentWidth:l,isOpen:c,onClose:u,isNativeMobileVariant:d=!1})=>{const{isMobileStyle:m}=Ce(),{device:{isMacOS:p}}=Lt(),g=Ut()?.get("open-share"),[y,x]=f.useState(!1),v=c!==void 0,b=v?c:y;f.useEffect(()=>{g&&(r?.(),x(!0),yx({}))},[g,r]);const _=f.useCallback(()=>{r?.(),v||x(S=>!S)},[r,v]),w=f.useCallback(()=>{u?.(),v||x(!1)},[v,u]),C=f.useCallback(S=>{(p?S.metaKey&&S.shiftKey&&S.key==="c":S.ctrlKey&&S.shiftKey&&S.key==="c")&&(S.preventDefault(),_())},[p,_]);return f.useEffect(()=>(document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}),[C]),e?o.jsxs("div",{className:"gap-x-sm flex items-center",children:[!m&&i&&o.jsx(U9e,{shareHref:t,hasMounted:e,maybeContextUUID:s,onClick:r}),o.jsx(WT,{content:n,placement:"bottom-end",contentWidth:l,isMobileStyle:m,isOpen:b,onClose:w,children:o.jsx(Qnn,{onClick:_,size:a,isMobileStyle:m,isNativeMobileVariant:d,testId:"share-button"})})]}):null});B9e.displayName="ShareDropdown";const V9e=R.memo(({descriptionText:e,shareHref:t,isShareable:n,onlyOrgSharable:r,onlySpaceSharable:s,maybeContextUUID:a,hasMounted:i,icon:l})=>{const{$t:c}=Z(),u="hidden md:block",d="block md:hidden",{trackEvent:m}=hx(),h=Ut()?.get("open-share"),g=f.useCallback(()=>{document.hasFocus&&(navigator.clipboard.writeText(i?YE(decodeURIComponent(t)):""),m("click copy link button",{contextUUID:a,source:"shareThread"}))},[i,t,m,a]),y=f.useCallback(()=>{navigator.share({text:`${e} ${i?YE(decodeURIComponent(t)):""}`,title:"Perplexity AI"}),m("click mobile native share button",{})},[t,e,i,m]);return f.useEffect(()=>{i&&n&&!h&&g()},[i,n,g,h]),!i||!n?null:o.jsxs("div",{children:[o.jsx("div",{className:"mt-sm",children:o.jsxs(F,{variant:"tiny",color:"super",className:"flex",children:[o.jsx(le,{icon:Hue,className:"mr-xs",size:"xs"}),o.jsx("span",{children:c({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"})})]})}),o.jsxs("div",{className:u,children:[o.jsx(F,{variant:"baseSemi",className:"mb-sm mt-md",children:c(r?{defaultMessage:"Share this link within your Organization",id:"kjiOOzdX3d"}:s?{defaultMessage:"Share this link within your Space",id:"zAEbvlplsJ"}:{defaultMessage:"Share",id:"OKhRC6eWRw"})}),o.jsx(pe,{size:"small",fullWidth:!0,onClick:g,text:c({defaultMessage:"Copy Link",id:"u5aHb4gcxX"}),icon:xp,clickFeedback:!0,testId:"copy-link-button"})]}),o.jsx("div",{className:d,children:o.jsx("div",{className:"mt-md",children:o.jsx(pe,{variant:"primary",fullWidth:!0,text:c({defaultMessage:"Share",id:"OKhRC6eWRw"}),target:"_blank",icon:l,onClick:y})})})]})});V9e.displayName="SocialShareLinks";const $9e=R.memo(({descriptionText:e,sharableURL:t,isNativeMobileVariant:n=!1})=>{const r="share-thread-dropdown",{$t:s}=Z(),a=Ds(),{rwToken:i,thread_access:l,handleShareDropdownClick:c,accessLevelMenuItems:u,selectedAccessMenuItem:d,isThreadSharable:m,context_uuid:p}=Ynn({reason:r}),h=o.jsxs("div",{className:"p-sm gap-sm flex flex-col",children:[i!=null&&o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",children:s({defaultMessage:"Share this Thread",id:"WMdsw58EMp"})}),o.jsx(vG,{choices:u})]}),o.jsx(V9e,{descriptionText:e,shareHref:t,isShareable:m,onlyOrgSharable:l===Ct.ORG_READ,onlySpaceSharable:l===Ct.COLLECTION_READ,maybeContextUUID:p,hasMounted:a,icon:d?.icon})]});return o.jsx(B9e,{hasMounted:a,shareHref:t,EditorDropDownContent:h,icon:d?.icon,onClick:c,maybeContextUUID:p,showCopyLinkButton:!1,isNativeMobileVariant:n})});$9e.displayName="ShareThreadDropdown";const bG=f.memo(({visible:e,tweetDescriptionText:t,threadSharedSlug:n,urlSearchParams:r,isNativeMobileVariant:s=!1})=>{const a=Ds(),i=F9e(),[l,c]=f.useState("");f.useEffect(()=>{if(typeof window>"u")return;const{protocol:p,host:h}=window.location,g=`${p}//${h}/search/${n}?${r?.toString()}`;c(g)},[n,r]);const u=f.useMemo(()=>encodeURIComponent(a?YE(decodeURIComponent(l),i?.toString()):""),[a,l,i]),d=f.useMemo(()=>t!=null?`Perplexity AI: ${t}`:"Perplexity AI",[t]),m=f.useMemo(()=>V("transition-all duration-300 flex items-center gap-x-xs md:gap-x-0",{"opacity-0":!e,"opacity-100":e}),[e]);return o.jsx("div",{className:m,children:e&&o.jsx($9e,{descriptionText:d,sharableURL:u,isNativeMobileVariant:s})})});bG.displayName="ThreadShareButtons";const _G=R.memo(({isBookmarked:e,handleAddBookmark:t,handleRemoveBookmark:n,size:r="small",isNativeMobileVariant:s=!1})=>{const{$t:a}=Z(),{isMobileStyle:i}=Ce(),l={icon:e?bde:PD,size:r,testId:"article-bookmark-button",toolTip:a(e?{defaultMessage:"Bookmarked",id:"k0fraU5NBY"}:{defaultMessage:"Bookmark",id:"Rs4kCECwJ8"}),onClick:e?n:t};return s&&i?o.jsx(pe,{...l,variant:"common",pill:!0}):o.jsx(Te,{...l,variant:"common"})});_G.displayName="BookmarkButton";const W9e=R.memo(({currentTitle:e,isBookmarked:t,effectiveCollection:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,onConvertToArticle:l,onRename:c,isConverting:u,showConvertThreadToArticle:d,rwToken:m,onBookmark:p,onRemoveBookmark:h,showBookmarkButton:g,onRemoveExpiration:y,showExportButton:x})=>{const v=Ds(),b=lt(),{session:_}=Nt(),w=Ut(),{firstResult:{backend_uuid:C,status:S,context_uuid:E,privacy_state:M,thread_access:k,thread_title:N,author_image:P,thread_url_slug:L,expiry_time:O,query_str:A}={},inFlight:j}=Ht(),{isMax:T,isPro:I}=Et(),U=S===Xn.PENDING,B=M===$g.INCOGNITO;return o.jsxs("div",{className:"px-md py-sm flex h-full items-center justify-between",children:[o.jsx("div",{className:"pointer-events-auto flex min-w-0 flex-1 items-center",children:o.jsx(Pt,{user:P??(b&&j?_?.user?.image??void 0:void 0),showProBadge:I,showMaxBadge:T,size:"medium"})}),o.jsxs("div",{className:"gap-sm pointer-events-auto flex items-center",children:[g&&o.jsx(_G,{isBookmarked:t,handleAddBookmark:p,handleRemoveBookmark:h,isNativeMobileVariant:!0}),!B&&!U&&o.jsx(bG,{visible:!!L,tweetDescriptionText:N||A,threadSharedSlug:L??void 0,urlSearchParams:w,isNativeMobileVariant:!0}),o.jsx(KN,{className:"ml-sm",isNativeMobileVariant:!0,title:e,show:v&&!U,isBookmarked:t,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,currentSpace:n,onConvertToArticle:l,onRename:c,isConverting:u,showConvertThreadToArticle:d,rwToken:m??void 0,contextUUID:E,threadAccess:k,collectionSlug:n?.slug,type:B?ao.INCOGNITO_SEARCH:ao.SEARCH,firstResultBackendUUID:x?C:void 0,onBookmark:t?h:p,showBookmarkButton:!1,onRemoveExpiration:y,expiry:O,threadId:L??"",isIncognitoThread:B})]})]})});W9e.displayName="CometMobileHeader";const Xnn=e=>e&&(e.viewCount>0||e.forkCount>0),H9e=R.memo(({textVariant:e="small"})=>{const{socialStats:t,firstResult:n}=Ht(),{$t:r}=Z(),s=t&&t.viewCount>0,a=t&&t.forkCount>0;return!n?.backend_uuid||!s&&!a?null:o.jsxs(H,{className:"gap-x-sm flex items-center",children:[s&&o.jsx(En,{tooltipText:r({defaultMessage:"Views",id:"akF0LyBDxT"}),tooltipLayout:"bottom",asChild:!0,children:o.jsxs(F,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[o.jsx(Lk,{width:"1.1em",height:"1.1em",className:"-translate-y-px"}),o.jsx("span",{children:H8(t.viewCount)})]})}),a&&o.jsx(En,{tooltipText:r({defaultMessage:"Follow-ups Asked",id:"DDyRtVl03r"}),tooltipLayout:"bottom",asChild:!0,children:o.jsxs(F,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[o.jsx(o_,{width:"1.1em",height:"1.1em",className:"-translate-y-px"}),o.jsx("span",{children:H8(t.forkCount)})]})})]})});H9e.displayName="ThreadSocialData";const Znn=()=>{const{$t:e}=Z();return[{name:"google_drive",title:Hg,avatarSrc:_3},{name:"onedrive",title:Gd,avatarSrc:C3},{name:"sharepoint",title:qd,avatarSrc:S3},{name:"web",title:"Web",icon:uf},{name:"scholar",title:e({defaultMessage:"Scholar",id:"vzzehe/j6l"}),icon:v1},{name:"social",title:e({defaultMessage:"Social",id:"qOLogguG/7"}),icon:ND},{name:"edgar",title:ZF,icon:TD},{name:"wiley",title:b3,avatarSrc:Nu},{name:"crunchbase",title:v3,avatarSrc:x3},{name:"notion",title:Gg,avatarSrc:__},{name:"org",title:e({defaultMessage:"Org files",id:"iWDsD738/m"}),icon:kD},{name:"box",title:zg,avatarSrc:E3},{name:"factset",title:y3,avatarSrc:g3},{name:"gcal",title:F1,avatarSrc:w3},{name:"my_files",title:e({defaultMessage:"My files",id:"bYbrKKlKgS"}),icon:Vk},{name:"dropbox",title:ju,avatarSrc:JF}]},z9e=R.memo(({sources:e})=>{const t=Znn(),n=3,r=e.slice(n).map(s=>t.find(i=>i.name===s)?.title).join(", ");return o.jsxs("div",{className:"flex items-center",children:[e.slice(0,n).map(s=>{const a=t.find(i=>i.name===s);return a?o.jsx(G9e,{imgSrc:a.avatarSrc,icon:a.icon,title:a.title},s):null}),e.length>n&&o.jsx(wG,{tooltipText:r,children:o.jsxs(F,{variant:"micro",color:"light",className:"flex size-4 cursor-default items-center justify-center",children:["+",e.length-n]})})]})});z9e.displayName="ThreadSourcesList";const wG=R.memo(({children:e,tooltipText:t})=>o.jsx(En,{tooltipText:t,asChild:!0,tooltipLayout:"bottom",children:o.jsx(H,{variant:"subtler",className:"-ml-xs !ring-inverse relative aspect-square shrink-0 rounded-full p-0.5 ring-[1.5px] first:ml-0",children:e})}));wG.displayName="SourceIconWrapper";const G9e=R.memo(({imgSrc:e,icon:t,title:n})=>o.jsx(wG,{tooltipText:n,children:t?o.jsx(le,{icon:t,className:"text-quiet size-4"}):o.jsx("img",{src:e,alt:n,className:"size-4 rounded-full object-cover"})}));G9e.displayName="SourceIcon";const q9e=R.memo(({authorUsername:e,threadAccess:t,authorImage:n,authorId:r,isIncognitoThread:s,collection:a})=>{const i=lt(),l=!e&&!i&&!s,[c,u]=f.useState(!1),{isIncognito:d}=Qa({reason:"thread-context"}),[m,p]=f.useState(!1),{inFlight:h,firstResult:{expiry_time:g,updated_datetime:y}={}}=Ht(),x=!l,v=a?.user_permission&&Jg(a.user_permission),b=g&&E2(g)&&!s&&!a&&!m,{$t:_}=Z(),w=d&&status===Xn.PENDING?void 0:n,C=f.useCallback(()=>{u(!0)},[]),S=f.useMemo(()=>o.jsx(K9e,{authorUsername:e,authorId:r,updatedTimestamp:y??"",expiryTimestamp:g??"",threadAccess:t,isAnon:l,isIncognitoThread:s,isInFlight:h,setHasRemovedExpiration:p,hasRemovedExpiration:m}),[r,e,g,h,l,s,t,y,m]),E=f.useCallback(()=>{u(!1)},[]);return o.jsxs("div",{className:"gap-sm flex min-w-0 items-center",children:[x&&o.jsx(lo,{onOpen:C,onClose:E,content:S,placement:"bottom-start",childrenClassName:"inline-flex pb-xs -mb-xs",children:o.jsxs("div",{className:"group relative flex cursor-pointer items-center gap-0.5",children:[o.jsx(H,{variant:"transparent",className:V("group-hover:!bg-subtle -inset-three absolute rounded-full duration-150",{"!bg-subtle":c})}),o.jsxs("div",{className:"relative isolate flex items-center gap-0",children:[o.jsx(Pt,{user:w??void 0,size:"small",className:"relative z-10 select-none [&>*]:size-6"}),b&&o.jsx(H,{variant:"background",className:"p-half absolute bottom-1.5 right-0 z-20 shrink-0 translate-x-1/2 translate-y-1/2 rounded-full",children:o.jsx(H,{variant:c?"subtle":"background",className:V("group-hover:bg-subtle flex items-center justify-center rounded-full duration-150"),children:o.jsx(vde,{size:16,className:"text-quiet relative"})})})]}),!b&&o.jsx(Bn,{className:V("group-hover:text-quiet relative size-3 transition-all duration-150",{"text-quiet":c,"text-quietest":!c})})]})}),a&&!v&&o.jsx(En,{tooltipText:_({defaultMessage:"Part of the {collectionTitle} Space",id:"eNL1YKIijb"},{collectionTitle:a.title}),asChild:!0,children:o.jsx(Ye,{href:`/spaces/${a.slug}`,className:"inline-flex",children:o.jsxs(H,{variant:"background",bgHover:"subtler",className:V("pr-sm hover:ring-subtle ring-subtlest gap-xs @[1100px]/main:max-w-[80px] @[1200px]/main:max-w-[160px] py-two relative z-20 flex max-w-[80px] shrink-0 items-center justify-center rounded-full ring-1",{"pl-xs":a.emoji,"pl-two":!a.emoji}),children:[o.jsx(H,{className:"flex size-5 items-center justify-center rounded-full",variant:a.emoji?"transparent":"subtler",children:a.emoji?o.jsx(vf,{unified:a.emoji,size:"tiny"}):o.jsx(yi,{size:12,className:"text-quiet relative"})}),o.jsx(F,{variant:"tiny",color:"light",className:"min-w-0 flex-1 truncate",children:a.title})]})})})]})});q9e.displayName="ThreadAuthorInfo";const K9e=R.memo(({authorUsername:e,authorId:t,updatedTimestamp:n,expiryTimestamp:r,threadAccess:s,isAnon:a,isIncognitoThread:i,isInFlight:l,setHasRemovedExpiration:c,hasRemovedExpiration:u})=>{const{locale:d}=Z(),{session:m}=Nt(),{socialStats:p,firstResult:{sources:h,backend_uuid:g}={sources:[],backend_uuid:""}}=Ht(),y=kf(),x=n.endsWith("Z")?n:`${n}Z`,v=r.endsWith("Z")?r:`${r}Z`,b=new Date(x),_=b.toLocaleDateString(d,{year:"numeric",month:"long",day:"numeric"}),w=b.toLocaleString(d,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),C=v?new Date(v).toLocaleString(d,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",S=Z(),E=new Date(v),M=F_(S,E,{style:"short",numeric:"auto"}),k=p5(b),N=t===m?.user?.id,{$t:P}=Z(),L=h?.sources,O=L&&L.length>0&&!(L.length===1&&L[0]==="web"),A=f.useMemo(()=>o.jsx(En,{tooltipText:C,tooltipLayout:"bottom",children:M}),[C,M]),j=f.useCallback(()=>{g&&(D3(g),c(!0))},[g,c]),T=f.useMemo(()=>({delayDuration:0,offset:4}),[]),I=A9e();return o.jsxs("div",{className:"group flex flex-col divide-y",children:[i&&o.jsx(pd,{children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:"gap-xs flex items-center",children:[o.jsx("div",{className:"inline-flex opacity-70",children:o.jsx(Ef,{size:"tiny",inverse:!0})}),P({defaultMessage:"Incognito Thread",id:"0iMI59SVV3"})]})}),r&&E2(r)&&!u&&!i&&o.jsxs(pd,{children:[o.jsxs(F,{variant:"tiny",className:"flex items-center gap-0.5",children:[P({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"}),o.jsx(En,{tooltipText:I,tooltipLayout:"right",asChild:!0,delayDuration:0,children:o.jsx("span",{children:o.jsx(le,{icon:hde,size:"2xs",className:"text-quiet opacity-0 duration-150 hover:opacity-100 group-hover:opacity-60"})})})]}),!y&&o.jsx(Te,{size:"tiny",onClick:j,icon:_de,pill:!0,extraCSS:"-mr-xs",toolTip:P({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),tooltipLayout:"right",tooltipProps:T})]}),!i&&e&&o.jsx(pd,{leading:P({defaultMessage:"Created by",id:"p4mBmLaKhc"}),trailing:N?P({defaultMessage:"{author} (You)",id:"QbgjmmII2s"},{author:e}):e}),r&&E2(r)?o.jsx(pd,{leading:P({defaultMessage:"Expires",id:"xhQMeQjkbK"}),trailing:A}):o.jsx(pd,{leading:P({defaultMessage:"Last Updated",id:"EeRwjEG9ge"}),trailing:E2(n)?o.jsx(En,{tooltipText:w,tooltipLayout:"bottom",children:k?P({defaultMessage:"Today",id:"zWgbGgjUUg"}):_}):l?P({defaultMessage:"Just now",id:"bxv59Vvssz"}):"-"}),O&&o.jsx(pd,{leading:P({defaultMessage:"{n, plural, one {Source} other {Sources}}",id:"Qe5RCQLzVg"},{n:L.length}),children:o.jsx(F,{variant:"tinyRegular",children:o.jsx(z9e,{sources:L})})}),!a&&Rtt(s??0)&&!i&&Xnn(p)&&o.jsx(pd,{children:o.jsx(H9e,{textVariant:"tiny"})})]})});K9e.displayName="InfoMenu";const pd=R.memo(({leading:e,trailing:t,children:n})=>o.jsxs(H,{className:"mx-sm group/row flex h-8 items-center justify-between gap-[12px]",children:[e&&o.jsx(F,{variant:"tinyRegular",color:"light",children:e}),n,t&&o.jsx(F,{variant:"tiny",className:"text-right",children:t})]}));pd.displayName="InfoMenuRow";const Jnn="",Y9e=R.memo(({isOpen:e,onClose:t,onSave:n,defaultTitle:r})=>{const{$t:s}=Z(),[a,i]=f.useState(r??""),l=f.useCallback(()=>{n(a),t()},[a,t,n]),c=f.useRef(null),u=g=>{i(g)},d=g=>{g.key==="Enter"&&l()},m=f.useMemo(()=>[{text:s({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:l,testId:"thread-rename-save"}],[s,l]),{isMobileUserAgent:p,isMobileStyle:h}=Ce();return o.jsx(on,{isOpen:e,title:s({defaultMessage:"Edit Thread Title",id:"lv9nkrxVPt"}),onClose:t,actionList:m,children:o.jsx(PT,{size:"large",inputRef:c,children:o.jsx(OT,{isMobileUserAgent:p,isMobileStyle:h,placeholder:s({defaultMessage:"What's your Thread about?",id:"bq3jzjDvHH"}),value:a,onChange:u,autoFocus:!0,onKeyDown:d,ref:c,testId:"thread-rename-input"})})})});Y9e.displayName="ThreadTitleEditModal";const Q9e=R.memo(()=>{const e="thread-header-v2",{$t:t}=Z(),[n,r]=f.useState(!1),s=f.useRef(void 0),a=_t(),i=Ds(),l=lt(),{firstResult:{backend_uuid:c,status:u,frontend_context_uuid:d,collection_info:m,query_str:p,context_uuid:h,privacy_state:g,bookmark_state:y,thread_access:x,thread_title:v,author_username:b,author_image:_,author_id:w,thread_url_slug:C,expiry_time:S}={},inFlight:E}=Ht(),M=u===Xn.PENDING,{session:k}=Nt(),{collections:N}=$T({autoFetch:!M,reason:e}),P=Oo(),{deleteThread:L}=zw({reason:e}),{openModal:O,closeModal:A}=wt(),{openVisitorLoginUpsell:j}=gr({enabled:!l}),{removeThreadFromCollection:T,swapThreadCollection:I,firstTimeBookmark:U}=cx({reason:e}),B=ZBt(),{openAddToCollectionModal:D}=S9e({entryUUID:c,frontendContextUUID:d,existingCollection:m,existingFirstThreadQuery:p,filterOnSearchTerm:!0,reason:e}),W=YB(),{handleCreateNewSpaceForThread:z}=KB(),{trackEvent:$}=je(),{allowArticleCreation:X}=Sa({reason:e}),{isMobileStyle:q}=Ce(),Y=g===$g.INCOGNITO,G=y==="BOOKMARKED",{handleAppDownloadClicked:J}=Ep("mobile-header"),{mwebUpsellWhatsApp:K,loadingMwebUpsellWhatsApp:te}=$_(),re=V_({origin:"mobile-header"}),se=Ut(),[me,oe]=f.useState(v??p??""),ge=!M&&!Y&&c!=null;Mye({currentAccessLevel:x??Kpe,onClick:Pn,isCollection:!1,isPage:!1,reason:e}),!M&&m!==void 0&&(s.current=m);const xe=M?s.current:m;f.useEffect(()=>{me===""&&oe(v??p??"")},[v,p,me]);const ye=f.useCallback(()=>{c&&($("delete thread from search result page click",{entryUUID:c}),L({entryUUID:c,callback:()=>a.push("/",void 0,"Delete thread")}))},[L,c,a,$]),_e=f.useCallback(()=>{if(!l){j({title:t({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:De.THREAD_BOOKMARK_BUTTON,sheetModalVariant:"bottom-sheet-gradient"});return}if(G||!c)return;h&&$("click add thread to space",{contextUUID:h,isBookmark:!0});const Xe=N.find(gt=>Jg(gt.user_permission));Xe===void 0?U({entryUUID:c,frontendContextUUID:d}):I({entryUUID:c,newCollectionTitle:Xe.title,newCollectionUUID:Xe.uuid,newCollectionSlug:Xe.slug,newCollectionAccess:Xe.access,frontendContextUUID:d,newCollectionEmoji:Xe.emoji??null,currentCollectionUUID:null,existingCollectionSlug:null,closeModal:Pn,callback:()=>{B()},newCollectionUserPermission:Xe.user_permission})},[l,G,c,$,h,N,j,t,U,d,I,B]),be=f.useCallback(Xe=>{if(Xe==="add"&&h)$("click add thread to space",{contextUUID:h,isBookmark:!1});else{if(!d){ne.error("[ThreadHeader] frontendContextUUID is undefined");return}if(!c){ne.warn("[ThreadHeader] backend_uuid is undefined");return}W?z(c,d):O("collectionSelectModal",{entryUUID:c,currentCollection:xe??null,searchTerm:p,frontendContextUUID:d})}h&&$("click swap thread space",{contextUUID:h,isFromBookmark:xe?Jg(xe.user_permission):!1,collectionUUID:xe?.uuid}),l?D():j({title:t({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:De.COLLECTIONS,sheetModalVariant:"bottom-sheet-gradient"})},[$,c,xe,l,O,t,D,j,h,p,d,W,z]),Ne=f.useCallback(()=>{if(!l)O("loginModal",{pitchMessage:{title:t({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:De.THREAD_TO_ARTICLE});else{r(!0);const Xe=Ei();h&&$("click convert thread to page",{oldContextUUID:h,newFrontendContextUUID:Xe});const gt=new URLSearchParams({newFrontendContextUUID:Xe,existingResultsCacheUUID:d??"",existingContextBackendUUID:h??"",existingBackendUUID:c??"",...xe&&{collectionSlug:xe.slug}}),zt=new URL(window.location.href);zt.pathname="page/new",zt.search=gt.toString();const hn=zt.toString();a.push(hn)}},[l,O,t,h,d,c,xe,a,$]),[Ee,Re]=f.useState(!1),Ae=f.useCallback(Xe=>{const gt=xe?.uuid;if(!h||!c){ne.error("[ThreadHeader] missing frontendContextUUID or entryUUID");return}if(!gt){ne.warn("[ThreadHeader] oldCollectionUUID is undefined");return}if(!m?.uuid){ne.warn("[ThreadHeader] collectionUUID is undefined");return}$("click remove thread from space",{contextUUID:h,collectionUUID:gt,isBookmark:Xe==="remove bookmark"}),T({entryUUID:c,oldCollectionUUID:gt,callback:()=>{A(),B()},frontendContextUUID:d})},[c,A,m?.uuid,h,xe?.uuid,d,B,T,$]),st=Pnn,it=f.useCallback((Xe,gt)=>{if(!Xe||Xe===Jnn){ne.warn("Empty title callback.");return}if(!h){ne.warn("No thread UUID found.");return}if(!P){ne.warn("No write token found.");return}st({contextUUID:h,title:Xe,rwToken:P,callback:gt,reason:e})},[h,P,st]),Se=X&&!q&&!M&&!Y,ue=!M&&!Y&&i,ke=q&&!M,et=f.useCallback(Xe=>{it(Xe,()=>{Re(!1),oe(Xe)})},[it]),Ge=f.useCallback(()=>{window.document.body.click(),Re(!0)},[]),ft=f.useCallback(()=>{a.push("/",void 0,"New thread button")},[a]),Qe=f.useCallback(()=>be("add"),[be]),Ve=f.useCallback(()=>be("swap"),[be]),Le=f.useCallback(()=>Ae("remove"),[Ae]),ot=f.useCallback(()=>Ae("remove bookmark"),[Ae]),{viewTitle:vt}=Kw(),{isSidebarPinned:Rt}=_n(),jt=11,dn=f.useCallback(()=>{if(K){re();return}$("clicked open in app button in mweb thread header",{}),J()},[J,re,K,$]),On=f.useCallback(()=>{c&&D3(c)},[c]),yr=f.useCallback(()=>Re(!1),[]),Ke=Ope();return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:V("h-headerHeight bg-base pointer-events-none absolute left-0 top-0 z-10 duration-150 md:mb-0 md:rounded-t-xl md:bg-transparent",{"max-[1224px]:md:bg-base":Rt,"max-[970px]:md:bg-base":!Rt}),style:{right:q?0:jt},children:Ke?o.jsx(W9e,{currentTitle:me,isBookmarked:G,effectiveCollection:xe??null,onDelete:ye,onAddToSpace:Qe,onSwapSpace:Ve,onRemoveFromSpace:Le,onConvertToArticle:Ne,onRename:Ge,isConverting:n,showConvertThreadToArticle:Se,rwToken:P??null,onBookmark:_e,onRemoveBookmark:ot,showBookmarkButton:ue,onRemoveExpiration:On,showExportButton:ge}):o.jsxs("div",{className:"gap-x-md px-md py-sm flex h-full items-center justify-between",children:[o.jsxs("div",{className:"pointer-events-auto relative flex items-center",children:[o.jsx("div",{className:"-inset-xs absolute hidden rounded-lg backdrop-blur-sm md:block",children:o.jsx(H,{className:"rounded-inherit absolute inset-0 opacity-85",variant:"background"})}),q?o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(wV,{className:"-ml-sm"}),o.jsx(pe,{variant:"common",size:"small",icon:ur,text:t({defaultMessage:"New",id:"bW7B87wFFp"}),onClick:ft})]}):o.jsx(q9e,{authorUsername:b??null,threadAccess:x??0,authorImage:_??(l&&E?k?.user?.image??null:null),authorId:w??"",isIncognitoThread:Y,collection:xe??null,privacyState:g})]}),vt&&o.jsx("div",{className:V("fade-in animate-in hidden min-w-0 flex-1 duration-150 md:block",{"@[900px]/main:md:hidden":!xe,"@[1056px]/main:md:hidden":!!xe}),children:o.jsx(F,{className:"truncate whitespace-nowrap",variant:"baseSemi",children:vt})}),o.jsxs("div",{className:"gap-x-sm pointer-events-auto relative flex items-center",style:{marginRight:q?0:-11},children:[o.jsx("div",{className:"-inset-xs absolute hidden rounded-lg backdrop-blur-sm md:block",children:o.jsx(H,{className:"rounded-inherit absolute inset-0 opacity-85",variant:"background"})}),o.jsxs("div",{className:"relative flex items-center",onClick:Xe=>Xe.stopPropagation(),children:[o.jsx(KN,{title:me,show:i&&!M,isBookmarked:G,onDelete:ye,onAddToSpace:Qe,onSwapSpace:Ve,onRemoveFromSpace:Le,currentSpace:xe??null,onConvertToArticle:Ne,onRename:Ge,isConverting:n,showConvertThreadToArticle:Se,rwToken:P,contextUUID:h,threadAccess:x,collectionSlug:xe?.slug,type:Y?ao.INCOGNITO_SEARCH:ao.SEARCH,firstResultBackendUUID:ge?c:void 0,onBookmark:G?ot:_e,showBookmarkButton:ue,onRemoveExpiration:On,expiry:S,threadId:C??"",isIncognitoThread:Y}),ue&&!q&&o.jsx(_G,{isBookmarked:G,handleAddBookmark:_e,handleRemoveBookmark:ot})]}),!Y&&!M&&o.jsx(bG,{visible:!!C,tweetDescriptionText:v||p,threadSharedSlug:C??void 0,urlSearchParams:se}),ke&&!te&&o.jsx(_c,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(pe,{size:"small",variant:"primary",text:t(K?{defaultMessage:"Ask in WhatsApp",id:"8QxwIbOYLa"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:dn})})})]})]})}),Ee&&o.jsx(Y9e,{isOpen:Ee,onClose:yr,onSave:et,defaultTitle:me})]})});Q9e.displayName="ThreadHeaderV2";const X9e=R.memo(({children:e,className:t,innerClassName:n})=>o.jsx("div",{className:V("px-md md:px-lg",t),children:o.jsx("div",{className:V("max-w-threadContentWidth mx-auto",n),children:e})}));X9e.displayName="ThreadSectionWrapper";var Oce={};const ern=we(async()=>{const{SearchLoadingComponent:e}=await Q(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-DQmCWSyo.js");return{SearchLoadingComponent:t}},__vite__mapDeps([482,3,1,6,5,4]));return{default:e}}),Z9e=R.memo(()=>o.jsx(qN,{}));Z9e.displayName="SearchErrorFallback";const J7=R.memo(e=>{const t=Ft(),[n,{height:r}]=vc();return o.jsx(Pr,{fallback:Z9e,code:"SOMETHING_WENT_WRONG_ERROR",children:o.jsx(qAt,{children:o.jsx(p6e,{children:o.jsx(g6e,{children:o.jsxs(Z6e,{children:[o.jsxs(KPe,{children:[o.jsx(Q9e,{}),o.jsx("div",{className:"erp-sidecar:h-fit erp-sidecar:pb-0 mx-auto h-full",children:o.jsxs(H,{variant:"background",className:"relative",children:[o.jsx(X9e,{children:o.jsx(C9e,{})}),o.jsx(_9e,{...e,lastResultBuffer:r})]})})]}),o.jsx(ZPe,{ref:n},t)]})})})})})});J7.displayName="SearchContent";function trn(e){const t=Wge(),{actions:{setCurrentThreadId:n}}=Ht(),r=BU(),s=cet(),{data:a}=We({queryKey:["storedResults"],queryFn:()=>T5(),refetchOnMount:!0});f.useEffect(()=>{if(e.entries){e.entries.forEach(c=>{c.reconnectable&&!s(c.backend_uuid)&&r(c.backend_uuid)});const l=e.entries[0]?.context_uuid??Ir();n(l),t(e.entries)}},[r,e.entries,t,n,s]);const i=f.useMemo(()=>{if(e.entries?.length)return e.entries;if(e.placeholderResults?.length)return e.placeholderResults;if(e.slugOrUUID){const l=a?.find(k5(e.slugOrUUID));if(l)return[l]}return fe},[e.placeholderResults,e.slugOrUUID,e.entries,a]);return f.useMemo(()=>({placeholderResults:i}),[i])}const J9e=R.memo(e=>{const{placeholderResults:t}=trn(e);return n6e({confirmationRedirectsToHomepage:!1}),!t?.length&&e.skipLoadingUI!==!0?Oce.NEXT_PUBLIC_IS_SIDECAR_BUILD?null:o.jsx(ern,{slugOrUUID:e.slugOrUUID}):Oce.NEXT_PUBLIC_IS_SIDECAR_BUILD?o.jsx(J7,{...e,placeholderResults:t}):o.jsxs(o.Fragment,{children:[o.jsx(W_,{childrenWidth:"none",children:o.jsx(YPe,{children:o.jsx(J7,{...e,placeholderResults:t})})}),o.jsx(xz,{})]})});J9e.displayName="SearchPage";const nrn="streamId",rrn=we(async()=>{const{SearchLoadingComponent:e}=await Q(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-DQmCWSyo.js");return{SearchLoadingComponent:t}},__vite__mapDeps([482,3,1,6,5,4]));return{default:e}});function srn({active:e,query:t,copilot:n,source:r,streamId:s}){const a=f.useMemo(()=>t&&e?[EJe({query_str:t,frontend_uuid:s,query_source:r??"default_search",mode:n==="true"?"COPILOT":"CONCISE"})]:fe,[t,e,s,r,n]);return f.useMemo(()=>e?{hasFrontendUUID:!!s,placeholderResults:a}:void 0,[e,a,s])}function arn({active:e,frontendUUID:t}){const r=ki().getState().streams,a=(e?r[t]:void 0)?.placeholderChunk,i=f.useMemo(()=>a?[a]:void 0,[a]);return f.useMemo(()=>e?{skipLoadingUI:!0,placeholderResults:i}:void 0,[e,i])}function irn({active:e,slugOrUUID:t}){const n="search-components",r=_t(),s=f.useMemo(()=>k5(t),[t]),i=ki().getState().entries,l=e?Object.values(i).find(m=>m?.thread_url_slug===t||m?.backend_uuid===t):void 0,{data:c,error:u}=kgt({slugOrUUID:t,enabled:!l&&e,reason:n});f.useEffect(()=>{c?.[0]&&Sbe(c[0])},[c]);const d=f.useMemo(()=>c?.length?c:l?[l]:fe,[c,l]);return f.useEffect(()=>{if(u){const m=T5();if(m.find(s)){const h=m.filter(g=>!s(g));lb(h)}let p=null;u?.cause&&typeof u?.cause=="object"&&"error_code"in u.cause&&(u.cause.error_code===lJ?(p=Sm.ThreadAccessNotAllowed,ne.error(lJ,{error:u,slugOrUUID:t})):u.cause.error_code===ait?(p=Sm.ThreadExpired,ne.error(u?.message,{error:u,slugOrUUID:t})):(p=Sm.InvalidThread,ne.error(u?.message,{error:u,slugOrUUID:t})),r.replace(`/?error=${p}&id=${t}`,"Search error"))}},[u,t,s,r]),f.useMemo(()=>e?{entries:d,slugOrUUID:t,hasError:!!u}:void 0,[e,d,u,t])}function orn(){const{actions:{clearCurrentStreamId:e,clearCurrentThreadId:t}}=Ht(),n=typeof window<"u",r=_l(),s=!!(r?.new&&r?.uuid&&n),a=!!(r?.new&&!r?.uuid&&n),i=!!(!r?.new&&r?.uuid&&n),l=n?new URLSearchParams(window.location.search):null,c=l?.get("q")??void 0,u=l?.get("copilot")??void 0,d=l?.get("source")??void 0,m=l?.get(nrn),p=f.useMemo(()=>m??Ir(),[m]),h=arn({active:s,frontendUUID:r?.uuid??""}),g=srn({active:a,query:c,copilot:u,streamId:p,source:d}),y=irn({active:i,slugOrUUID:r?.uuid??""});return f.useEffect(()=>()=>{e(),t()},[e,t]),f.useLayoutEffect(()=>{g?.hasFrontendUUID&&(e(),t())},[e,t,g?.hasFrontendUUID]),Uen(a,p,"new-query-search-components"),f.useMemo(()=>{if(s){const x=r?.uuid;if(!x||!Sde(x))return{component:o.jsx(uu,{to:"/"})}}else if(a){if(!c||c==="pending")return{component:o.jsx(uu,{to:"/"})}}else if(i){const x=r?.uuid;if(!x||x==="undefined")return{component:o.jsx(uu,{to:"/"})};if(y?.hasError)return null}else return n?{component:o.jsx(uu,{to:c?`/search/new${window.location.search}`:"/"})}:{component:o.jsx(rrn,{})};return{props:{...h,...g,...y}}},[n,y,i,g,a,h,s,r?.uuid,c])}const eOe=R.memo(()=>{const e=orn();return e?"component"in e?e.component:o.jsx(J9e,{...e.props}):null});eOe.displayName="SearchComponents";const tOe=e=>{if(!e)return{base:void 0,symbol:void 0,tab:void 0};const t=new RegExp(N5),n=e?.match(t);return{base:n?.[1]?.replace("app",""),symbol:n?.[2],tab:n?.[3]}};async function lrn({eventId:e,league:t,reason:n}){const{error:r,data:s}=await ae.GET("/rest/sports/tennis/{league}/events/{event_id}",n,{params:{path:{event_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}async function crn({seasonId:e,league:t,reason:n}){const{error:r,data:s}=await ae.GET("/rest/sports/tennis/{league}/tournaments/{season_id}",n,{params:{path:{season_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r,details:{seasonId:e}});return s?.data}function urn(e){return e==="cricket"||e==="european_tour"||e==="f1"||e==="nba"||e==="ncaam"||e==="ncaaw"||e==="pga"||e==="soccer"||e==="wnba"||e==="mlb"}const drn=async({eventId:e,league:t,headers:n,reason:r})=>{if(!urn(t))throw new Ie("API_CLIENTS_ERROR",{message:`Invalid league: ${t}`,details:{league:t,eventId:e}});const{error:s,data:a}=await ae.GET(`/rest/sports/${t}/events/{event_id}`,r,{headers:n,timeoutMs:15e3,params:{path:{event_id:decodeURIComponent(e)}}});if(s)throw new Ie("API_CLIENTS_ERROR",{cause:s,details:{league:t,eventId:e}});try{a?.data.pplx_event&&(a.data.apns=a.data.pplx_event.apns)}catch{}return a?.data},frn=(e,t)=>[`sports/${t}/event/`,e];async function ihn({eventId:e,league:t,locale:n,reason:r}){const s={};n&&(s["accept-language"]=n);try{const{error:a,data:i}=await ae.GET("/rest/sports/{league}/events/{event_id}/hype",r,{headers:s,timeoutMs:0,params:{path:{league:t,event_id:decodeURIComponent(e)}}});if(a)throw new Ie("API_CLIENTS_ERROR",{cause:a,details:{league:t,eventId:e}});return i?.data}catch(a){return ne.error(a),null}}async function ohn({eventId:e,headers:t,reason:n}){try{const{error:r,data:s}=await ae.GET("/rest/sports/f1/live_racer",n,{headers:t,timeoutMs:0});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}catch(r){return ne.error(r),null}}async function lhn(e){const{error:t,data:n}=await ae.GET("/rest/sports/soccer/events/{event_id}","championsleague-events-event-id-client-page",{params:{path:{event_id:decodeURIComponent(e)}},timeoutMs:15e3});if(t)throw new Ie("API_CLIENTS_ERROR",{cause:t,details:{eventId:e}});return n?.data??null}async function mrn({playerId:e,reason:t}){const{error:n,data:r}=await ae.GET("/rest/sports/nba/players/{player_id}",t,{params:{path:{player_id:e}},timeoutMs:15e3});if(n)throw new Ie("API_CLIENTS_ERROR",{cause:n,details:{playerId:e}});return r?.data??null}const prn=e=>["/rest/sports/nba/players/",e];async function chn(e){const{error:t,data:n}=await ae.GET("/rest/sports/nba/players/{player_id}/bio","nba-players-player-id-bio-client-page",{params:{path:{player_id:e}},timeoutMs:15e3});if(t)throw new Ie("API_CLIENTS_ERROR",{cause:t,details:{playerId:e}});return n?.data??null}const hrn=async({teamId:e,reason:t})=>{const n=await Er({urlPath:`/rest/sports/nfl/teams/${decodeURIComponent(e)}`,timeoutMs:0,reason:t});if(!n.ok)throw ne.error(n.url,n.statusText),new Error(`Failed to fetch nfl team: ${n.statusText}`);return(await n.json()).data},grn=e=>["/sports/nfl/teams/",e],yrn=async({teamId:e,reason:t})=>{const n=await Er({urlPath:`/rest/sports/nba/teams/${decodeURIComponent(e)}`,timeoutMs:0,reason:t});if(!n.ok)throw ne.error(n.url,n.statusText),new Error(`Failed to fetch nba team: ${n.statusText}`);return(await n.json()).data},xrn=e=>["/sports/nba/teams/",e],vrn=({teamId:e,reason:t,enabled:n})=>We({queryFn:()=>yrn({teamId:e,reason:t}),queryKey:xrn(e),enabled:n}),brn=({teamId:e,reason:t,enabled:n})=>We({queryFn:()=>hrn({teamId:e,reason:t}),queryKey:grn(e),enabled:n}),_rn=({playerId:e,reason:t,enabled:n})=>We({queryFn:()=>mrn({playerId:e,reason:t}),queryKey:prn(e),enabled:n}),Lce=({seasonId:e,league:t,reason:n,enabled:r})=>We({queryFn:()=>crn({seasonId:e,league:t,reason:n}),queryKey:[`${t}/tournaments`,e],enabled:r}),Fc=({eventId:e,league:t,reason:n,staleTime:r,refetchInterval:s,enabled:a})=>We({...Hb,queryFn:()=>drn({eventId:e,league:t,reason:n}),queryKey:frn(e,t),staleTime:r,refetchInterval:s,enabled:a}),Dce=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?dp(s.state.data.event)?!1:Vx(s.state.data.event)?1e3*10:1e3*30:1e3*60}),wrn=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,enabled:r}),uhn=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,enabled:r}),Crn=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?dp(s.state.data.event)?!1:Vx(s.state.data.event)?1e3*10:1e3*30:1e3*60}),Srn=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:decodeURIComponent(e),league:t,reason:n,refetchInterval:s=>s?.state?.data?.event&&s.state.data.event.status==="live"?1e3*10:1e3*60,enabled:r}),Ern=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,refetchInterval:s=>s?.state?.data?.event?dp(s.state.data.event)?!1:Vx(s.state.data.event)?1e3*10:1e3*30:1e3*60,enabled:r}),Mrn=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,enabled:r}),krn=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:r}),Fce=({eventId:e,league:t,enabled:n,reason:r})=>We({...Hb,queryKey:[`${t}/events`,e],queryFn:()=>lrn({eventId:e,league:t,reason:r}),refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:n}),Trn=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_url?.replace("/widget",""),i=s.state?.data?.event?.refetch_interval_secs;return a&&i?1e3*i:!1},staleTime:0,enabled:r}),Nrn=({eventId:e,league:t,reason:n,enabled:r})=>Fc({eventId:e,league:t,reason:n,enabled:r}),jrn=({reason:e})=>{const t=Ut(),n=typeof t?.get("c")=="string"?t.get("c"):Array.isArray(t?.get("c"))?t.get("c")?.[0]:void 0,r=We({queryKey:Mtt(n??""),queryFn:()=>gvt({copyToken:n??"",reason:e}),enabled:!!n}),s=r.isLoading?null:r.data?.shortcut??null;return{...r,shortcut:s,copyToken:n}};var KR={},YR={},QR={},Uce;function Arn(){return Uce||(Uce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(r,s,a){const i=Reflect.get(r,s,a);return typeof i=="function"?i.bind(r):i}static set(r,s,a,i){return Reflect.set(r,s,a,i)}static has(r,s){return Reflect.has(r,s)}static deleteProperty(r,s){return Reflect.deleteProperty(r,s)}}}(QR)),QR}var Bce;function Irn(){return Bce||(Bce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,i){for(var l in i)Object.defineProperty(a,l,{enumerable:!0,get:i[l]})}t(e,{HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return r}});const n=Arn();class r extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new r}}class s extends Headers{constructor(i){super(),this.headers=new Proxy(i,{get(l,c,u){if(typeof c=="symbol")return n.ReflectAdapter.get(l,c,u);const d=c.toLowerCase(),m=Object.keys(i).find(p=>p.toLowerCase()===d);if(!(typeof m>"u"))return n.ReflectAdapter.get(l,m,u)},set(l,c,u,d){if(typeof c=="symbol")return n.ReflectAdapter.set(l,c,u,d);const m=c.toLowerCase(),p=Object.keys(i).find(h=>h.toLowerCase()===m);return n.ReflectAdapter.set(l,p??c,u,d)},has(l,c){if(typeof c=="symbol")return n.ReflectAdapter.has(l,c);const u=c.toLowerCase(),d=Object.keys(i).find(m=>m.toLowerCase()===u);return typeof d>"u"?!1:n.ReflectAdapter.has(l,d)},deleteProperty(l,c){if(typeof c=="symbol")return n.ReflectAdapter.deleteProperty(l,c);const u=c.toLowerCase(),d=Object.keys(i).find(m=>m.toLowerCase()===u);return typeof d>"u"?!0:n.ReflectAdapter.deleteProperty(l,d)}})}static seal(i){return new Proxy(i,{get(l,c,u){switch(c){case"append":case"delete":case"set":return r.callable;default:return n.ReflectAdapter.get(l,c,u)}}})}merge(i){return Array.isArray(i)?i.join(", "):i}static from(i){return i instanceof Headers?i:new s(i)}append(i,l){const c=this.headers[i];typeof c=="string"?this.headers[i]=[c,l]:Array.isArray(c)?c.push(l):this.headers[i]=l}delete(i){delete this.headers[i]}get(i){const l=this.headers[i];return typeof l<"u"?this.merge(l):null}has(i){return typeof this.headers[i]<"u"}set(i,l){this.headers[i]=l}forEach(i,l){for(const[c,u]of this.entries())i.call(l,u,c,this)}*entries(){for(const i of Object.keys(this.headers)){const l=i.toLowerCase(),c=this.get(l);yield[l,c]}}*keys(){for(const i of Object.keys(this.headers))yield i.toLowerCase()}*values(){for(const i of Object.keys(this.headers))yield this.get(i)}[Symbol.iterator](){return this.entries()}}}(YR)),YR}var XR={},Vce;function Rrn(){return Vce||(Vce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(be,Ne){for(var Ee in Ne)Object.defineProperty(be,Ee,{enumerable:!0,get:Ne[Ee]})}t(e,{ACTION_SUFFIX:function(){return m},APP_DIR_ALIAS:function(){return j},CACHE_ONE_YEAR:function(){return E},DOT_NEXT_ALIAS:function(){return O},ESLINT_DEFAULT_DIRS:function(){return oe},GSP_NO_RETURNED_VALUE:function(){return J},GSSP_COMPONENT_MEMBER_ERROR:function(){return re},GSSP_NO_RETURNED_VALUE:function(){return K},INFINITE_CACHE:function(){return M},INSTRUMENTATION_HOOK_FILENAME:function(){return P},MATCHED_PATH_HEADER:function(){return s},MIDDLEWARE_FILENAME:function(){return k},MIDDLEWARE_LOCATION_REGEXP:function(){return N},NEXT_BODY_SUFFIX:function(){return g},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return S},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return x},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return v},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return C},NEXT_CACHE_TAGS_HEADER:function(){return y},NEXT_CACHE_TAG_MAX_ITEMS:function(){return _},NEXT_CACHE_TAG_MAX_LENGTH:function(){return w},NEXT_DATA_SUFFIX:function(){return p},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return r},NEXT_META_SUFFIX:function(){return h},NEXT_QUERY_PARAM_PREFIX:function(){return n},NEXT_RESUME_HEADER:function(){return b},NON_STANDARD_NODE_ENV:function(){return se},PAGES_DIR_ALIAS:function(){return L},PRERENDER_REVALIDATE_HEADER:function(){return a},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return i},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return z},ROOT_DIR_ALIAS:function(){return A},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return W},RSC_ACTION_ENCRYPTION_ALIAS:function(){return D},RSC_ACTION_PROXY_ALIAS:function(){return U},RSC_ACTION_VALIDATE_ALIAS:function(){return I},RSC_CACHE_WRAPPER_ALIAS:function(){return B},RSC_MOD_REF_PROXY_ALIAS:function(){return T},RSC_PREFETCH_SUFFIX:function(){return l},RSC_SEGMENTS_DIR_SUFFIX:function(){return c},RSC_SEGMENT_SUFFIX:function(){return u},RSC_SUFFIX:function(){return d},SERVER_PROPS_EXPORT_ERROR:function(){return G},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return X},SERVER_PROPS_SSG_CONFLICT:function(){return q},SERVER_RUNTIME:function(){return ge},SSG_FALLBACK_EXPORT_ERROR:function(){return me},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return $},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return Y},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return te},WEBPACK_LAYERS:function(){return ye},WEBPACK_RESOURCE_QUERIES:function(){return _e}});const n="nxtP",r="nxtI",s="x-matched-path",a="x-prerender-revalidate",i="x-prerender-revalidate-if-generated",l=".prefetch.rsc",c=".segments",u=".segment.rsc",d=".rsc",m=".action",p=".json",h=".meta",g=".body",y="x-next-cache-tags",x="x-next-revalidated-tags",v="x-next-revalidate-tag-token",b="next-resume",_=128,w=256,C=1024,S="_N_T_",E=31536e3,M=4294967294,k="middleware",N=`(?:src/)?${k}`,P="instrumentation",L="private-next-pages",O="private-dot-next",A="private-next-root-dir",j="private-next-app-dir",T="private-next-rsc-mod-ref-proxy",I="private-next-rsc-action-validate",U="private-next-rsc-server-reference",B="private-next-rsc-cache-wrapper",D="private-next-rsc-action-encryption",W="private-next-rsc-action-client-wrapper",z="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",$="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",X="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",q="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",Y="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",G="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",J="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",K="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",te="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",re="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",se='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',me="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",oe=["app","pages","components","lib","src"],ge={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},xe={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},ye={...xe,GROUP:{builtinReact:[xe.reactServerComponents,xe.actionBrowser],serverOnly:[xe.reactServerComponents,xe.actionBrowser,xe.instrument,xe.middleware],neutralTarget:[xe.api],clientOnly:[xe.serverSideRendering,xe.appPagesBrowser],bundled:[xe.reactServerComponents,xe.actionBrowser,xe.serverSideRendering,xe.appPagesBrowser,xe.shared,xe.instrument,xe.middleware],appPages:[xe.reactServerComponents,xe.serverSideRendering,xe.appPagesBrowser,xe.actionBrowser]}},_e={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}}(XR)),XR}var ZR={},JR={},$ce;function nOe(){return $ce||($ce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(x,v){for(var b in v)Object.defineProperty(x,b,{enumerable:!0,get:v[b]})}t(e,{AppRenderSpan:function(){return c},AppRouteRouteHandlersSpan:function(){return m},BaseServerSpan:function(){return n},LoadComponentsSpan:function(){return r},LogSpanAllowList:function(){return y},MiddlewareSpan:function(){return h},NextNodeServerSpan:function(){return a},NextServerSpan:function(){return s},NextVanillaSpanAllowlist:function(){return g},NodeSpan:function(){return d},RenderSpan:function(){return l},ResolveMetadataSpan:function(){return p},RouterSpan:function(){return u},StartServerSpan:function(){return i}});var n=function(x){return x.handleRequest="BaseServer.handleRequest",x.run="BaseServer.run",x.pipe="BaseServer.pipe",x.getStaticHTML="BaseServer.getStaticHTML",x.render="BaseServer.render",x.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",x.renderToResponse="BaseServer.renderToResponse",x.renderToHTML="BaseServer.renderToHTML",x.renderError="BaseServer.renderError",x.renderErrorToResponse="BaseServer.renderErrorToResponse",x.renderErrorToHTML="BaseServer.renderErrorToHTML",x.render404="BaseServer.render404",x}(n||{}),r=function(x){return x.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",x.loadComponents="LoadComponents.loadComponents",x}(r||{}),s=function(x){return x.getRequestHandler="NextServer.getRequestHandler",x.getServer="NextServer.getServer",x.getServerRequestHandler="NextServer.getServerRequestHandler",x.createServer="createServer.createServer",x}(s||{}),a=function(x){return x.compression="NextNodeServer.compression",x.getBuildId="NextNodeServer.getBuildId",x.createComponentTree="NextNodeServer.createComponentTree",x.clientComponentLoading="NextNodeServer.clientComponentLoading",x.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",x.generateStaticRoutes="NextNodeServer.generateStaticRoutes",x.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",x.generatePublicRoutes="NextNodeServer.generatePublicRoutes",x.generateImageRoutes="NextNodeServer.generateImageRoutes.route",x.sendRenderResult="NextNodeServer.sendRenderResult",x.proxyRequest="NextNodeServer.proxyRequest",x.runApi="NextNodeServer.runApi",x.render="NextNodeServer.render",x.renderHTML="NextNodeServer.renderHTML",x.imageOptimizer="NextNodeServer.imageOptimizer",x.getPagePath="NextNodeServer.getPagePath",x.getRoutesManifest="NextNodeServer.getRoutesManifest",x.findPageComponents="NextNodeServer.findPageComponents",x.getFontManifest="NextNodeServer.getFontManifest",x.getServerComponentManifest="NextNodeServer.getServerComponentManifest",x.getRequestHandler="NextNodeServer.getRequestHandler",x.renderToHTML="NextNodeServer.renderToHTML",x.renderError="NextNodeServer.renderError",x.renderErrorToHTML="NextNodeServer.renderErrorToHTML",x.render404="NextNodeServer.render404",x.startResponse="NextNodeServer.startResponse",x.route="route",x.onProxyReq="onProxyReq",x.apiResolver="apiResolver",x.internalFetch="internalFetch",x}(a||{}),i=function(x){return x.startServer="startServer.startServer",x}(i||{}),l=function(x){return x.getServerSideProps="Render.getServerSideProps",x.getStaticProps="Render.getStaticProps",x.renderToString="Render.renderToString",x.renderDocument="Render.renderDocument",x.createBodyResult="Render.createBodyResult",x}(l||{}),c=function(x){return x.renderToString="AppRender.renderToString",x.renderToReadableStream="AppRender.renderToReadableStream",x.getBodyResult="AppRender.getBodyResult",x.fetch="AppRender.fetch",x}(c||{}),u=function(x){return x.executeRoute="Router.executeRoute",x}(u||{}),d=function(x){return x.runHandler="Node.runHandler",x}(d||{}),m=function(x){return x.runHandler="AppRouteRouteHandlers.runHandler",x}(m||{}),p=function(x){return x.generateMetadata="ResolveMetadata.generateMetadata",x.generateViewport="ResolveMetadata.generateViewport",x}(p||{}),h=function(x){return x.execute="Middleware.execute",x}(h||{});const g=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],y=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]}(JR)),JR}var eP={},Wce;function Prn(){return Wce||(Wce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isThenable",{enumerable:!0,get:function(){return t}});function t(n){return n!==null&&typeof n=="object"&&"then"in n&&typeof n.then=="function"}}(eP)),eP}var Orn=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},xm="1.8.0",Hce=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Lrn(e){var t=new Set([e]),n=new Set,r=e.match(Hce);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(c){return c===e};function a(l){return n.add(l),!1}function i(l){return t.add(l),!0}return function(c){if(t.has(c))return!0;if(n.has(c))return!1;var u=c.match(Hce);if(!u)return a(c);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||s.major!==d.major?a(c):s.major===0?s.minor===d.minor&&s.patch<=d.patch?i(c):a(c):s.minor<=d.minor?i(c):a(c)}}var Drn=Lrn(xm),Frn=xm.split(".")[0],Qb=Symbol.for("opentelemetry.js.api."+Frn),Xb=Orn;function eC(e,t,n,r){var s;r===void 0&&(r=!1);var a=Xb[Qb]=(s=Xb[Qb])!==null&&s!==void 0?s:{version:xm};if(!r&&a[e]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(i.stack||i.message),!1}if(a.version!==xm){var i=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+e+" does not match previously registered API v"+xm);return n.error(i.stack||i.message),!1}return a[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+xm+"."),!0}function pp(e){var t,n,r=(t=Xb[Qb])===null||t===void 0?void 0:t.version;if(!(!r||!Drn(r)))return(n=Xb[Qb])===null||n===void 0?void 0:n[e]}function tC(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+xm+".");var n=Xb[Qb];n&&delete n[e]}var Urn=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},Brn=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Vrn=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Q0("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Q0("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Q0("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Q0("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Q0("verbose",this._namespace,t)},e}();function Q0(e,t,n){var r=pp("diag");if(r)return n.unshift(t),r[e].apply(r,Brn([],Urn(n),!1))}var ii;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ii||(ii={}));function $rn(e,t){e<ii.NONE?e=ii.NONE:e>ii.ALL&&(e=ii.ALL),t=t||{};function n(r,s){var a=t[r];return typeof a=="function"&&e>=s?a.bind(t):function(){}}return{error:n("error",ii.ERROR),warn:n("warn",ii.WARN),info:n("info",ii.INFO),debug:n("debug",ii.DEBUG),verbose:n("verbose",ii.VERBOSE)}}var Wrn=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},Hrn=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},zrn="diag",Nc=function(){function e(){function t(s){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var l=pp("diag");if(l)return l[s].apply(l,Hrn([],Wrn(a),!1))}}var n=this,r=function(s,a){var i,l,c;if(a===void 0&&(a={logLevel:ii.INFO}),s===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=u.stack)!==null&&i!==void 0?i:u.message),!1}typeof a=="number"&&(a={logLevel:a});var d=pp("diag"),m=$rn((l=a.logLevel)!==null&&l!==void 0?l:ii.INFO,s);if(d&&!a.suppressOverrideMessage){var p=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),m.warn("Current logger will overwrite one already registered from "+p)}return eC("diag",m,n,!0)};n.setLogger=r,n.disable=function(){tC(zrn,n)},n.createComponentLogger=function(s){return new Vrn(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),Grn=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},qrn=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Krn=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=Grn(t,2),r=n[0],s=n[1];return[r,s]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var a=new e(this._entries);try{for(var i=qrn(r),l=i.next();!l.done;l=i.next()){var c=l.value;a._entries.delete(c)}}catch(u){t={error:u}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},e.prototype.clear=function(){return new e},e}(),Yrn=Symbol("BaggageEntryMetadata"),Qrn=Nc.instance();function Xrn(e){return e===void 0&&(e={}),new Krn(new Map(Object.entries(e)))}function Zrn(e){return typeof e!="string"&&(Qrn.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:Yrn,toString:function(){return e}}}function CG(e){return Symbol.for(e)}var Jrn=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var a=new e(n._currentContext);return a._currentContext.set(r,s),a},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e}(),rOe=new Jrn,tP=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],esn=function(){function e(){function t(r){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(console){var i=console[r];if(typeof i!="function"&&(i=console.log),typeof i=="function")return i.apply(console,s)}}}for(var n=0;n<tP.length;n++)this[tP[n].n]=t(tP[n].c)}return e}(),Qx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tsn=function(){function e(){}return e.prototype.createHistogram=function(t,n){return csn},e.prototype.createCounter=function(t,n){return lsn},e.prototype.createUpDownCounter=function(t,n){return usn},e.prototype.createObservableGauge=function(t,n){return fsn},e.prototype.createObservableCounter=function(t,n){return dsn},e.prototype.createObservableUpDownCounter=function(t,n){return msn},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),SG=function(){function e(){}return e}(),nsn=function(e){Qx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(SG),rsn=function(e){Qx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(SG),ssn=function(e){Qx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(SG),EG=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),asn=function(e){Qx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(EG),isn=function(e){Qx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(EG),osn=function(e){Qx(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(EG),sOe=new tsn,lsn=new nsn,csn=new ssn,usn=new rsn,dsn=new asn,fsn=new isn,msn=new osn;function psn(){return sOe}var eD;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(eD||(eD={}));var aOe={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},iOe={set:function(e,t,n){e!=null&&(e[t]=n)}},hsn=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},gsn=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},ysn=function(){function e(){}return e.prototype.active=function(){return rOe},e.prototype.with=function(t,n,r){for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return n.call.apply(n,gsn([r],hsn(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),xsn=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},vsn=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},nP="context",bsn=new ysn,YN=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return eC(nP,t,Nc.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return(s=this._getContextManager()).with.apply(s,vsn([t,n,r],xsn(a),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return pp(nP)||bsn},e.prototype.disable=function(){this._getContextManager().disable(),tC(nP,Nc.instance())},e}(),Tk;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Tk||(Tk={}));var MG="0000000000000000",kG="00000000000000000000000000000000",oOe={traceId:kG,spanId:MG,traceFlags:Tk.NONE},p1=function(){function e(t){t===void 0&&(t=oOe),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),TG=CG("OpenTelemetry Context Key SPAN");function NG(e){return e.getValue(TG)||void 0}function _sn(){return NG(YN.getInstance().active())}function jG(e,t){return e.setValue(TG,t)}function wsn(e){return e.deleteValue(TG)}function Csn(e,t){return jG(e,new p1(t))}function lOe(e){var t;return(t=NG(e))===null||t===void 0?void 0:t.spanContext()}var Ssn=/^([0-9a-f]{32})$/i,Esn=/^[0-9a-f]{16}$/i;function cOe(e){return Ssn.test(e)&&e!==kG}function uOe(e){return Esn.test(e)&&e!==MG}function AG(e){return cOe(e.traceId)&&uOe(e.spanId)}function Msn(e){return new p1(e)}var rP=YN.getInstance(),dOe=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=rP.active());var s=!!n?.root;if(s)return new p1;var a=r&&lOe(r);return ksn(a)&&AG(a)?new p1(a):new p1},e.prototype.startActiveSpan=function(t,n,r,s){var a,i,l;if(!(arguments.length<2)){arguments.length===2?l=n:arguments.length===3?(a=n,l=r):(a=n,i=r,l=s);var c=i??rP.active(),u=this.startSpan(t,a,c),d=jG(c,u);return rP.with(d,l,void 0,u)}},e}();function ksn(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Tsn=new dOe,fOe=function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Tsn},e}(),Nsn=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new dOe},e}(),jsn=new Nsn,tD=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new fOe(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:jsn},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e}(),nD;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(nD||(nD={}));var rD;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(rD||(rD={}));var sD;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(sD||(sD={}));var aD="[_0-9a-z-*/]",Asn="[a-z]"+aD+"{0,255}",Isn="[a-z0-9]"+aD+"{0,240}@[a-z]"+aD+"{0,13}",Rsn=new RegExp("^(?:"+Asn+"|"+Isn+")$"),Psn=/^[ -~]{0,255}[!-~]$/,Osn=/,|=/;function Lsn(e){return Rsn.test(e)}function Dsn(e){return Psn.test(e)&&!Osn.test(e)}var zce=32,Fsn=512,Gce=",",qce="=",Usn=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,n),r},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,r){return n.push(r+qce+t.get(r)),n},[]).join(Gce)},e.prototype._parse=function(t){t.length>Fsn||(this._internalState=t.split(Gce).reverse().reduce(function(n,r){var s=r.trim(),a=s.indexOf(qce);if(a!==-1){var i=s.slice(0,a),l=s.slice(a+1,r.length);Lsn(i)&&Dsn(l)&&n.set(i,l)}return n},new Map),this._internalState.size>zce&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,zce))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function Bsn(e){return new Usn(e)}var mOe=YN.getInstance(),pOe=Nc.instance(),Vsn=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return sOe},e}(),$sn=new Vsn,sP="metrics",Wsn=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return eC(sP,t,Nc.instance())},e.prototype.getMeterProvider=function(){return pp(sP)||$sn},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){tC(sP,Nc.instance())},e}(),hOe=Wsn.getInstance(),Hsn=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}(),IG=CG("OpenTelemetry Baggage Key");function gOe(e){return e.getValue(IG)||void 0}function zsn(){return gOe(YN.getInstance().active())}function Gsn(e,t){return e.setValue(IG,t)}function qsn(e){return e.deleteValue(IG)}var aP="propagation",Ksn=new Hsn,Ysn=function(){function e(){this.createBaggage=Xrn,this.getBaggage=gOe,this.getActiveBaggage=zsn,this.setBaggage=Gsn,this.deleteBaggage=qsn}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return eC(aP,t,Nc.instance())},e.prototype.inject=function(t,n,r){return r===void 0&&(r=iOe),this._getGlobalPropagator().inject(t,n,r)},e.prototype.extract=function(t,n,r){return r===void 0&&(r=aOe),this._getGlobalPropagator().extract(t,n,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){tC(aP,Nc.instance())},e.prototype._getGlobalPropagator=function(){return pp(aP)||Ksn},e}(),yOe=Ysn.getInstance(),iP="trace",Qsn=function(){function e(){this._proxyTracerProvider=new tD,this.wrapSpanContext=Msn,this.isSpanContextValid=AG,this.deleteSpan=wsn,this.getSpan=NG,this.getActiveSpan=_sn,this.getSpanContext=lOe,this.setSpan=jG,this.setSpanContext=Csn}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=eC(iP,this._proxyTracerProvider,Nc.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return pp(iP)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){tC(iP,Nc.instance()),this._proxyTracerProvider=new tD},e}(),xOe=Qsn.getInstance();const Xsn={context:mOe,diag:pOe,metrics:hOe,propagation:yOe,trace:xOe},Zsn=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:esn,get DiagLogLevel(){return ii},INVALID_SPANID:MG,INVALID_SPAN_CONTEXT:oOe,INVALID_TRACEID:kG,ProxyTracer:fOe,ProxyTracerProvider:tD,ROOT_CONTEXT:rOe,get SamplingDecision(){return nD},get SpanKind(){return rD},get SpanStatusCode(){return sD},get TraceFlags(){return Tk},get ValueType(){return eD},baggageEntryMetadataFromString:Zrn,context:mOe,createContextKey:CG,createNoopMeter:psn,createTraceState:Bsn,default:Xsn,defaultTextMapGetter:aOe,defaultTextMapSetter:iOe,diag:pOe,isSpanContextValid:AG,isValidSpanId:uOe,isValidTraceId:cOe,metrics:hOe,propagation:yOe,trace:xOe},Symbol.toStringTag,{value:"Module"})),Kce=$y(Zsn);var oP={exports:{}},Yce;function Jsn(){return Yce||(Yce=1,(()=>{var e={491:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ContextAPI=void 0;const l=i(223),c=i(172),u=i(930),d="context",m=new l.NoopContextManager;class p{constructor(){}static getInstance(){return this._instance||(this._instance=new p),this._instance}setGlobalContextManager(g){return(0,c.registerGlobal)(d,g,u.DiagAPI.instance())}active(){return this._getContextManager().active()}with(g,y,x,...v){return this._getContextManager().with(g,y,x,...v)}bind(g,y){return this._getContextManager().bind(g,y)}_getContextManager(){return(0,c.getGlobal)(d)||m}disable(){this._getContextManager().disable(),(0,c.unregisterGlobal)(d,u.DiagAPI.instance())}}a.ContextAPI=p},930:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagAPI=void 0;const l=i(56),c=i(912),u=i(957),d=i(172),m="diag";class p{constructor(){function g(v){return function(...b){const _=(0,d.getGlobal)("diag");if(_)return _[v](...b)}}const y=this,x=(v,b={logLevel:u.DiagLogLevel.INFO})=>{var _,w,C;if(v===y){const M=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return y.error((_=M.stack)!==null&&_!==void 0?_:M.message),!1}typeof b=="number"&&(b={logLevel:b});const S=(0,d.getGlobal)("diag"),E=(0,c.createLogLevelDiagLogger)((w=b.logLevel)!==null&&w!==void 0?w:u.DiagLogLevel.INFO,v);if(S&&!b.suppressOverrideMessage){const M=(C=new Error().stack)!==null&&C!==void 0?C:"<failed to generate stacktrace>";S.warn(`Current logger will be overwritten from ${M}`),E.warn(`Current logger will overwrite one already registered from ${M}`)}return(0,d.registerGlobal)("diag",E,y,!0)};y.setLogger=x,y.disable=()=>{(0,d.unregisterGlobal)(m,y)},y.createComponentLogger=v=>new l.DiagComponentLogger(v),y.verbose=g("verbose"),y.debug=g("debug"),y.info=g("info"),y.warn=g("warn"),y.error=g("error")}static instance(){return this._instance||(this._instance=new p),this._instance}}a.DiagAPI=p},653:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MetricsAPI=void 0;const l=i(660),c=i(172),u=i(930),d="metrics";class m{constructor(){}static getInstance(){return this._instance||(this._instance=new m),this._instance}setGlobalMeterProvider(h){return(0,c.registerGlobal)(d,h,u.DiagAPI.instance())}getMeterProvider(){return(0,c.getGlobal)(d)||l.NOOP_METER_PROVIDER}getMeter(h,g,y){return this.getMeterProvider().getMeter(h,g,y)}disable(){(0,c.unregisterGlobal)(d,u.DiagAPI.instance())}}a.MetricsAPI=m},181:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PropagationAPI=void 0;const l=i(172),c=i(874),u=i(194),d=i(277),m=i(369),p=i(930),h="propagation",g=new c.NoopTextMapPropagator;class y{constructor(){this.createBaggage=m.createBaggage,this.getBaggage=d.getBaggage,this.getActiveBaggage=d.getActiveBaggage,this.setBaggage=d.setBaggage,this.deleteBaggage=d.deleteBaggage}static getInstance(){return this._instance||(this._instance=new y),this._instance}setGlobalPropagator(v){return(0,l.registerGlobal)(h,v,p.DiagAPI.instance())}inject(v,b,_=u.defaultTextMapSetter){return this._getGlobalPropagator().inject(v,b,_)}extract(v,b,_=u.defaultTextMapGetter){return this._getGlobalPropagator().extract(v,b,_)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,l.unregisterGlobal)(h,p.DiagAPI.instance())}_getGlobalPropagator(){return(0,l.getGlobal)(h)||g}}a.PropagationAPI=y},997:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceAPI=void 0;const l=i(172),c=i(846),u=i(139),d=i(607),m=i(930),p="trace";class h{constructor(){this._proxyTracerProvider=new c.ProxyTracerProvider,this.wrapSpanContext=u.wrapSpanContext,this.isSpanContextValid=u.isSpanContextValid,this.deleteSpan=d.deleteSpan,this.getSpan=d.getSpan,this.getActiveSpan=d.getActiveSpan,this.getSpanContext=d.getSpanContext,this.setSpan=d.setSpan,this.setSpanContext=d.setSpanContext}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalTracerProvider(y){const x=(0,l.registerGlobal)(p,this._proxyTracerProvider,m.DiagAPI.instance());return x&&this._proxyTracerProvider.setDelegate(y),x}getTracerProvider(){return(0,l.getGlobal)(p)||this._proxyTracerProvider}getTracer(y,x){return this.getTracerProvider().getTracer(y,x)}disable(){(0,l.unregisterGlobal)(p,m.DiagAPI.instance()),this._proxyTracerProvider=new c.ProxyTracerProvider}}a.TraceAPI=h},277:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.deleteBaggage=a.setBaggage=a.getActiveBaggage=a.getBaggage=void 0;const l=i(491),u=(0,i(780).createContextKey)("OpenTelemetry Baggage Key");function d(g){return g.getValue(u)||void 0}a.getBaggage=d;function m(){return d(l.ContextAPI.getInstance().active())}a.getActiveBaggage=m;function p(g,y){return g.setValue(u,y)}a.setBaggage=p;function h(g){return g.deleteValue(u)}a.deleteBaggage=h},993:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaggageImpl=void 0;class i{constructor(c){this._entries=c?new Map(c):new Map}getEntry(c){const u=this._entries.get(c);if(u)return Object.assign({},u)}getAllEntries(){return Array.from(this._entries.entries()).map(([c,u])=>[c,u])}setEntry(c,u){const d=new i(this._entries);return d._entries.set(c,u),d}removeEntry(c){const u=new i(this._entries);return u._entries.delete(c),u}removeEntries(...c){const u=new i(this._entries);for(const d of c)u._entries.delete(d);return u}clear(){return new i}}a.BaggageImpl=i},830:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.baggageEntryMetadataSymbol=void 0,a.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.baggageEntryMetadataFromString=a.createBaggage=void 0;const l=i(930),c=i(993),u=i(830),d=l.DiagAPI.instance();function m(h={}){return new c.BaggageImpl(new Map(Object.entries(h)))}a.createBaggage=m;function p(h){return typeof h!="string"&&(d.error(`Cannot create baggage metadata from unknown type: ${typeof h}`),h=""),{__TYPE__:u.baggageEntryMetadataSymbol,toString(){return h}}}a.baggageEntryMetadataFromString=p},67:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.context=void 0;const l=i(491);a.context=l.ContextAPI.getInstance()},223:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopContextManager=void 0;const l=i(780);class c{active(){return l.ROOT_CONTEXT}with(d,m,p,...h){return m.call(p,...h)}bind(d,m){return m}enable(){return this}disable(){return this}}a.NoopContextManager=c},780:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ROOT_CONTEXT=a.createContextKey=void 0;function i(c){return Symbol.for(c)}a.createContextKey=i;class l{constructor(u){const d=this;d._currentContext=u?new Map(u):new Map,d.getValue=m=>d._currentContext.get(m),d.setValue=(m,p)=>{const h=new l(d._currentContext);return h._currentContext.set(m,p),h},d.deleteValue=m=>{const p=new l(d._currentContext);return p._currentContext.delete(m),p}}}a.ROOT_CONTEXT=new l},506:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.diag=void 0;const l=i(930);a.diag=l.DiagAPI.instance()},56:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagComponentLogger=void 0;const l=i(172);class c{constructor(m){this._namespace=m.namespace||"DiagComponentLogger"}debug(...m){return u("debug",this._namespace,m)}error(...m){return u("error",this._namespace,m)}info(...m){return u("info",this._namespace,m)}warn(...m){return u("warn",this._namespace,m)}verbose(...m){return u("verbose",this._namespace,m)}}a.DiagComponentLogger=c;function u(d,m,p){const h=(0,l.getGlobal)("diag");if(h)return p.unshift(m),h[d](...p)}},972:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagConsoleLogger=void 0;const i=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class l{constructor(){function u(d){return function(...m){if(console){let p=console[d];if(typeof p!="function"&&(p=console.log),typeof p=="function")return p.apply(console,m)}}}for(let d=0;d<i.length;d++)this[i[d].n]=u(i[d].c)}}a.DiagConsoleLogger=l},912:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createLogLevelDiagLogger=void 0;const l=i(957);function c(u,d){u<l.DiagLogLevel.NONE?u=l.DiagLogLevel.NONE:u>l.DiagLogLevel.ALL&&(u=l.DiagLogLevel.ALL),d=d||{};function m(p,h){const g=d[p];return typeof g=="function"&&u>=h?g.bind(d):function(){}}return{error:m("error",l.DiagLogLevel.ERROR),warn:m("warn",l.DiagLogLevel.WARN),info:m("info",l.DiagLogLevel.INFO),debug:m("debug",l.DiagLogLevel.DEBUG),verbose:m("verbose",l.DiagLogLevel.VERBOSE)}}a.createLogLevelDiagLogger=c},957:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagLogLevel=void 0,function(i){i[i.NONE=0]="NONE",i[i.ERROR=30]="ERROR",i[i.WARN=50]="WARN",i[i.INFO=60]="INFO",i[i.DEBUG=70]="DEBUG",i[i.VERBOSE=80]="VERBOSE",i[i.ALL=9999]="ALL"}(a.DiagLogLevel||(a.DiagLogLevel={}))},172:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.unregisterGlobal=a.getGlobal=a.registerGlobal=void 0;const l=i(200),c=i(521),u=i(130),d=c.VERSION.split(".")[0],m=Symbol.for(`opentelemetry.js.api.${d}`),p=l._globalThis;function h(x,v,b,_=!1){var w;const C=p[m]=(w=p[m])!==null&&w!==void 0?w:{version:c.VERSION};if(!_&&C[x]){const S=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${x}`);return b.error(S.stack||S.message),!1}if(C.version!==c.VERSION){const S=new Error(`@opentelemetry/api: Registration of version v${C.version} for ${x} does not match previously registered API v${c.VERSION}`);return b.error(S.stack||S.message),!1}return C[x]=v,b.debug(`@opentelemetry/api: Registered a global for ${x} v${c.VERSION}.`),!0}a.registerGlobal=h;function g(x){var v,b;const _=(v=p[m])===null||v===void 0?void 0:v.version;if(!(!_||!(0,u.isCompatible)(_)))return(b=p[m])===null||b===void 0?void 0:b[x]}a.getGlobal=g;function y(x,v){v.debug(`@opentelemetry/api: Unregistering a global for ${x} v${c.VERSION}.`);const b=p[m];b&&delete b[x]}a.unregisterGlobal=y},130:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isCompatible=a._makeCompatibilityCheck=void 0;const l=i(521),c=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function u(d){const m=new Set([d]),p=new Set,h=d.match(c);if(!h)return()=>!1;const g={major:+h[1],minor:+h[2],patch:+h[3],prerelease:h[4]};if(g.prerelease!=null)return function(b){return b===d};function y(v){return p.add(v),!1}function x(v){return m.add(v),!0}return function(b){if(m.has(b))return!0;if(p.has(b))return!1;const _=b.match(c);if(!_)return y(b);const w={major:+_[1],minor:+_[2],patch:+_[3],prerelease:_[4]};return w.prerelease!=null||g.major!==w.major?y(b):g.major===0?g.minor===w.minor&&g.patch<=w.patch?x(b):y(b):g.minor<=w.minor?x(b):y(b)}}a._makeCompatibilityCheck=u,a.isCompatible=u(l.VERSION)},886:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.metrics=void 0;const l=i(653);a.metrics=l.MetricsAPI.getInstance()},901:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ValueType=void 0,function(i){i[i.INT=0]="INT",i[i.DOUBLE=1]="DOUBLE"}(a.ValueType||(a.ValueType={}))},102:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createNoopMeter=a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=a.NOOP_OBSERVABLE_GAUGE_METRIC=a.NOOP_OBSERVABLE_COUNTER_METRIC=a.NOOP_UP_DOWN_COUNTER_METRIC=a.NOOP_HISTOGRAM_METRIC=a.NOOP_COUNTER_METRIC=a.NOOP_METER=a.NoopObservableUpDownCounterMetric=a.NoopObservableGaugeMetric=a.NoopObservableCounterMetric=a.NoopObservableMetric=a.NoopHistogramMetric=a.NoopUpDownCounterMetric=a.NoopCounterMetric=a.NoopMetric=a.NoopMeter=void 0;class i{constructor(){}createHistogram(v,b){return a.NOOP_HISTOGRAM_METRIC}createCounter(v,b){return a.NOOP_COUNTER_METRIC}createUpDownCounter(v,b){return a.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(v,b){return a.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(v,b){return a.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(v,b){return a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(v,b){}removeBatchObservableCallback(v){}}a.NoopMeter=i;class l{}a.NoopMetric=l;class c extends l{add(v,b){}}a.NoopCounterMetric=c;class u extends l{add(v,b){}}a.NoopUpDownCounterMetric=u;class d extends l{record(v,b){}}a.NoopHistogramMetric=d;class m{addCallback(v){}removeCallback(v){}}a.NoopObservableMetric=m;class p extends m{}a.NoopObservableCounterMetric=p;class h extends m{}a.NoopObservableGaugeMetric=h;class g extends m{}a.NoopObservableUpDownCounterMetric=g,a.NOOP_METER=new i,a.NOOP_COUNTER_METRIC=new c,a.NOOP_HISTOGRAM_METRIC=new d,a.NOOP_UP_DOWN_COUNTER_METRIC=new u,a.NOOP_OBSERVABLE_COUNTER_METRIC=new p,a.NOOP_OBSERVABLE_GAUGE_METRIC=new h,a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new g;function y(){return a.NOOP_METER}a.createNoopMeter=y},660:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NOOP_METER_PROVIDER=a.NoopMeterProvider=void 0;const l=i(102);class c{getMeter(d,m,p){return l.NOOP_METER}}a.NoopMeterProvider=c,a.NOOP_METER_PROVIDER=new c},200:function(s,a,i){var l=this&&this.__createBinding||(Object.create?function(u,d,m,p){p===void 0&&(p=m),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[m]}})}:function(u,d,m,p){p===void 0&&(p=m),u[p]=d[m]}),c=this&&this.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&l(d,u,m)};Object.defineProperty(a,"__esModule",{value:!0}),c(i(46),a)},651:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a._globalThis=void 0,a._globalThis=typeof globalThis=="object"?globalThis:qi},46:function(s,a,i){var l=this&&this.__createBinding||(Object.create?function(u,d,m,p){p===void 0&&(p=m),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[m]}})}:function(u,d,m,p){p===void 0&&(p=m),u[p]=d[m]}),c=this&&this.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&l(d,u,m)};Object.defineProperty(a,"__esModule",{value:!0}),c(i(651),a)},939:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.propagation=void 0;const l=i(181);a.propagation=l.PropagationAPI.getInstance()},874:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTextMapPropagator=void 0;class i{inject(c,u){}extract(c,u){return c}fields(){return[]}}a.NoopTextMapPropagator=i},194:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.defaultTextMapSetter=a.defaultTextMapGetter=void 0,a.defaultTextMapGetter={get(i,l){if(i!=null)return i[l]},keys(i){return i==null?[]:Object.keys(i)}},a.defaultTextMapSetter={set(i,l,c){i!=null&&(i[l]=c)}}},845:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.trace=void 0;const l=i(997);a.trace=l.TraceAPI.getInstance()},403:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NonRecordingSpan=void 0;const l=i(476);class c{constructor(d=l.INVALID_SPAN_CONTEXT){this._spanContext=d}spanContext(){return this._spanContext}setAttribute(d,m){return this}setAttributes(d){return this}addEvent(d,m){return this}setStatus(d){return this}updateName(d){return this}end(d){}isRecording(){return!1}recordException(d,m){}}a.NonRecordingSpan=c},614:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTracer=void 0;const l=i(491),c=i(607),u=i(403),d=i(139),m=l.ContextAPI.getInstance();class p{startSpan(y,x,v=m.active()){if(!!x?.root)return new u.NonRecordingSpan;const _=v&&(0,c.getSpanContext)(v);return h(_)&&(0,d.isSpanContextValid)(_)?new u.NonRecordingSpan(_):new u.NonRecordingSpan}startActiveSpan(y,x,v,b){let _,w,C;if(arguments.length<2)return;arguments.length===2?C=x:arguments.length===3?(_=x,C=v):(_=x,w=v,C=b);const S=w??m.active(),E=this.startSpan(y,_,S),M=(0,c.setSpan)(S,E);return m.with(M,C,void 0,E)}}a.NoopTracer=p;function h(g){return typeof g=="object"&&typeof g.spanId=="string"&&typeof g.traceId=="string"&&typeof g.traceFlags=="number"}},124:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTracerProvider=void 0;const l=i(614);class c{getTracer(d,m,p){return new l.NoopTracer}}a.NoopTracerProvider=c},125:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ProxyTracer=void 0;const l=i(614),c=new l.NoopTracer;class u{constructor(m,p,h,g){this._provider=m,this.name=p,this.version=h,this.options=g}startSpan(m,p,h){return this._getTracer().startSpan(m,p,h)}startActiveSpan(m,p,h,g){const y=this._getTracer();return Reflect.apply(y.startActiveSpan,y,arguments)}_getTracer(){if(this._delegate)return this._delegate;const m=this._provider.getDelegateTracer(this.name,this.version,this.options);return m?(this._delegate=m,this._delegate):c}}a.ProxyTracer=u},846:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ProxyTracerProvider=void 0;const l=i(125),c=i(124),u=new c.NoopTracerProvider;class d{getTracer(p,h,g){var y;return(y=this.getDelegateTracer(p,h,g))!==null&&y!==void 0?y:new l.ProxyTracer(this,p,h,g)}getDelegate(){var p;return(p=this._delegate)!==null&&p!==void 0?p:u}setDelegate(p){this._delegate=p}getDelegateTracer(p,h,g){var y;return(y=this._delegate)===null||y===void 0?void 0:y.getTracer(p,h,g)}}a.ProxyTracerProvider=d},996:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SamplingDecision=void 0,function(i){i[i.NOT_RECORD=0]="NOT_RECORD",i[i.RECORD=1]="RECORD",i[i.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(a.SamplingDecision||(a.SamplingDecision={}))},607:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSpanContext=a.setSpanContext=a.deleteSpan=a.setSpan=a.getActiveSpan=a.getSpan=void 0;const l=i(780),c=i(403),u=i(491),d=(0,l.createContextKey)("OpenTelemetry Context Key SPAN");function m(v){return v.getValue(d)||void 0}a.getSpan=m;function p(){return m(u.ContextAPI.getInstance().active())}a.getActiveSpan=p;function h(v,b){return v.setValue(d,b)}a.setSpan=h;function g(v){return v.deleteValue(d)}a.deleteSpan=g;function y(v,b){return h(v,new c.NonRecordingSpan(b))}a.setSpanContext=y;function x(v){var b;return(b=m(v))===null||b===void 0?void 0:b.spanContext()}a.getSpanContext=x},325:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceStateImpl=void 0;const l=i(564),c=32,u=512,d=",",m="=";class p{constructor(g){this._internalState=new Map,g&&this._parse(g)}set(g,y){const x=this._clone();return x._internalState.has(g)&&x._internalState.delete(g),x._internalState.set(g,y),x}unset(g){const y=this._clone();return y._internalState.delete(g),y}get(g){return this._internalState.get(g)}serialize(){return this._keys().reduce((g,y)=>(g.push(y+m+this.get(y)),g),[]).join(d)}_parse(g){g.length>u||(this._internalState=g.split(d).reverse().reduce((y,x)=>{const v=x.trim(),b=v.indexOf(m);if(b!==-1){const _=v.slice(0,b),w=v.slice(b+1,x.length);(0,l.validateKey)(_)&&(0,l.validateValue)(w)&&y.set(_,w)}return y},new Map),this._internalState.size>c&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,c))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const g=new p;return g._internalState=new Map(this._internalState),g}}a.TraceStateImpl=p},564:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateValue=a.validateKey=void 0;const i="[_0-9a-z-*/]",l=`[a-z]${i}{0,255}`,c=`[a-z0-9]${i}{0,240}@[a-z]${i}{0,13}`,u=new RegExp(`^(?:${l}|${c})$`),d=/^[ -~]{0,255}[!-~]$/,m=/,|=/;function p(g){return u.test(g)}a.validateKey=p;function h(g){return d.test(g)&&!m.test(g)}a.validateValue=h},98:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createTraceState=void 0;const l=i(325);function c(u){return new l.TraceStateImpl(u)}a.createTraceState=c},476:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.INVALID_SPAN_CONTEXT=a.INVALID_TRACEID=a.INVALID_SPANID=void 0;const l=i(475);a.INVALID_SPANID="0000000000000000",a.INVALID_TRACEID="00000000000000000000000000000000",a.INVALID_SPAN_CONTEXT={traceId:a.INVALID_TRACEID,spanId:a.INVALID_SPANID,traceFlags:l.TraceFlags.NONE}},357:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SpanKind=void 0,function(i){i[i.INTERNAL=0]="INTERNAL",i[i.SERVER=1]="SERVER",i[i.CLIENT=2]="CLIENT",i[i.PRODUCER=3]="PRODUCER",i[i.CONSUMER=4]="CONSUMER"}(a.SpanKind||(a.SpanKind={}))},139:(s,a,i)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.wrapSpanContext=a.isSpanContextValid=a.isValidSpanId=a.isValidTraceId=void 0;const l=i(476),c=i(403),u=/^([0-9a-f]{32})$/i,d=/^[0-9a-f]{16}$/i;function m(y){return u.test(y)&&y!==l.INVALID_TRACEID}a.isValidTraceId=m;function p(y){return d.test(y)&&y!==l.INVALID_SPANID}a.isValidSpanId=p;function h(y){return m(y.traceId)&&p(y.spanId)}a.isSpanContextValid=h;function g(y){return new c.NonRecordingSpan(y)}a.wrapSpanContext=g},847:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SpanStatusCode=void 0,function(i){i[i.UNSET=0]="UNSET",i[i.OK=1]="OK",i[i.ERROR=2]="ERROR"}(a.SpanStatusCode||(a.SpanStatusCode={}))},475:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceFlags=void 0,function(i){i[i.NONE=0]="NONE",i[i.SAMPLED=1]="SAMPLED"}(a.TraceFlags||(a.TraceFlags={}))},521:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VERSION=void 0,a.VERSION="1.6.0"}},t={};function n(s){var a=t[s];if(a!==void 0)return a.exports;var i=t[s]={exports:{}},l=!0;try{e[s].call(i.exports,i,i.exports,n),l=!1}finally{l&&delete t[s]}return i.exports}typeof n<"u"&&(n.ab=__dirname+"/");var r={};(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.trace=s.propagation=s.metrics=s.diag=s.context=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.createTraceState=s.TraceFlags=s.SpanStatusCode=s.SpanKind=s.SamplingDecision=s.ProxyTracerProvider=s.ProxyTracer=s.defaultTextMapSetter=s.defaultTextMapGetter=s.ValueType=s.createNoopMeter=s.DiagLogLevel=s.DiagConsoleLogger=s.ROOT_CONTEXT=s.createContextKey=s.baggageEntryMetadataFromString=void 0;var a=n(369);Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}});var i=n(780);Object.defineProperty(s,"createContextKey",{enumerable:!0,get:function(){return i.createContextKey}}),Object.defineProperty(s,"ROOT_CONTEXT",{enumerable:!0,get:function(){return i.ROOT_CONTEXT}});var l=n(972);Object.defineProperty(s,"DiagConsoleLogger",{enumerable:!0,get:function(){return l.DiagConsoleLogger}});var c=n(957);Object.defineProperty(s,"DiagLogLevel",{enumerable:!0,get:function(){return c.DiagLogLevel}});var u=n(102);Object.defineProperty(s,"createNoopMeter",{enumerable:!0,get:function(){return u.createNoopMeter}});var d=n(901);Object.defineProperty(s,"ValueType",{enumerable:!0,get:function(){return d.ValueType}});var m=n(194);Object.defineProperty(s,"defaultTextMapGetter",{enumerable:!0,get:function(){return m.defaultTextMapGetter}}),Object.defineProperty(s,"defaultTextMapSetter",{enumerable:!0,get:function(){return m.defaultTextMapSetter}});var p=n(125);Object.defineProperty(s,"ProxyTracer",{enumerable:!0,get:function(){return p.ProxyTracer}});var h=n(846);Object.defineProperty(s,"ProxyTracerProvider",{enumerable:!0,get:function(){return h.ProxyTracerProvider}});var g=n(996);Object.defineProperty(s,"SamplingDecision",{enumerable:!0,get:function(){return g.SamplingDecision}});var y=n(357);Object.defineProperty(s,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}});var x=n(847);Object.defineProperty(s,"SpanStatusCode",{enumerable:!0,get:function(){return x.SpanStatusCode}});var v=n(475);Object.defineProperty(s,"TraceFlags",{enumerable:!0,get:function(){return v.TraceFlags}});var b=n(98);Object.defineProperty(s,"createTraceState",{enumerable:!0,get:function(){return b.createTraceState}});var _=n(139);Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}});var w=n(476);Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return w.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return w.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return w.INVALID_SPAN_CONTEXT}});const C=n(67);Object.defineProperty(s,"context",{enumerable:!0,get:function(){return C.context}});const S=n(506);Object.defineProperty(s,"diag",{enumerable:!0,get:function(){return S.diag}});const E=n(886);Object.defineProperty(s,"metrics",{enumerable:!0,get:function(){return E.metrics}});const M=n(939);Object.defineProperty(s,"propagation",{enumerable:!0,get:function(){return M.propagation}});const k=n(845);Object.defineProperty(s,"trace",{enumerable:!0,get:function(){return k.trace}}),s.default={context:C.context,diag:S.diag,metrics:E.metrics,propagation:M.propagation,trace:k.trace}})(),oP.exports=r})()),oP.exports}var Qce;function ean(){return Qce||(Qce=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0});function n(S,E){for(var M in E)Object.defineProperty(S,M,{enumerable:!0,get:E[M]})}n(e,{BubbledError:function(){return p},SpanKind:function(){return d},SpanStatusCode:function(){return u},getTracer:function(){return C},isBubbledError:function(){return h}});const r=nOe(),s=Prn();let a;if(t.NEXT_RUNTIME==="edge")a=Kce;else try{a=Kce}catch{a=Jsn()}const{context:i,propagation:l,trace:c,SpanStatusCode:u,SpanKind:d,ROOT_CONTEXT:m}=a;class p extends Error{constructor(E,M){super(),this.bubble=E,this.result=M}}function h(S){return typeof S!="object"||S===null?!1:S instanceof p}const g=(S,E)=>{h(E)&&E.bubble?S.setAttribute("next.bubble",!0):(E&&S.recordException(E),S.setStatus({code:u.ERROR,message:E?.message})),S.end()},y=new Map,x=a.createContextKey("next.rootSpanId");let v=0;const b=()=>v++,_={set(S,E,M){S.push({key:E,value:M})}};class w{getTracerInstance(){return c.getTracer("next.js","0.0.1")}getContext(){return i}getTracePropagationData(){const E=i.active(),M=[];return l.inject(E,M,_),M}getActiveScopeSpan(){return c.getSpan(i?.active())}withPropagatedContext(E,M,k){const N=i.active();if(c.getSpanContext(N))return M();const P=l.extract(N,E,k);return i.with(P,M)}trace(...E){var M;const[k,N,P]=E,{fn:L,options:O}=typeof N=="function"?{fn:N,options:{}}:{fn:P,options:{...N}},A=O.spanName??k;if(!r.NextVanillaSpanAllowlist.includes(k)&&t.NEXT_OTEL_VERBOSE!=="1"||O.hideSpan)return L();let j=this.getSpanContext(O?.parentSpan??this.getActiveScopeSpan()),T=!1;j?(M=c.getSpanContext(j))!=null&&M.isRemote&&(T=!0):(j=i?.active()??m,T=!0);const I=b();return O.attributes={"next.span_name":A,"next.span_type":k,...O.attributes},i.with(j.setValue(x,I),()=>this.getTracerInstance().startActiveSpan(A,O,U=>{const B="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,D=()=>{y.delete(I),B&&t.NEXT_OTEL_PERFORMANCE_PREFIX&&r.LogSpanAllowList.includes(k||"")&&performance.measure(`${t.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(k.split(".").pop()||"").replace(/[A-Z]/g,W=>"-"+W.toLowerCase())}`,{start:B,end:performance.now()})};T&&y.set(I,new Map(Object.entries(O.attributes??{})));try{if(L.length>1)return L(U,z=>g(U,z));const W=L(U);return(0,s.isThenable)(W)?W.then(z=>(U.end(),z)).catch(z=>{throw g(U,z),z}).finally(D):(U.end(),D(),W)}catch(W){throw g(U,W),D(),W}}))}wrap(...E){const M=this,[k,N,P]=E.length===3?E:[E[0],{},E[1]];return!r.NextVanillaSpanAllowlist.includes(k)&&t.NEXT_OTEL_VERBOSE!=="1"?P:function(){let L=N;typeof L=="function"&&typeof P=="function"&&(L=L.apply(this,arguments));const O=arguments.length-1,A=arguments[O];if(typeof A=="function"){const j=M.getContext().bind(i.active(),A);return M.trace(k,L,(T,I)=>(arguments[O]=function(U){return I?.(U),j.apply(this,arguments)},P.apply(this,arguments)))}else return M.trace(k,L,()=>P.apply(this,arguments))}}startSpan(...E){const[M,k]=E,N=this.getSpanContext(k?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(M,k,N)}getSpanContext(E){return E?c.setSpan(i.active(),E):void 0}getRootSpanAttributes(){const E=i.active().getValue(x);return y.get(E)}setRootSpanAttribute(E,M){const k=i.active().getValue(x),N=y.get(k);N&&N.set(E,M)}}const C=(()=>{const S=new w;return()=>S})()}(ZR)),ZR}var lP={exports:{}},Xce;function tan(){return Xce||(Xce=1,(()=>{typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab=__dirname+"/");var e={};(()=>{var t=e;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=i,t.serialize=l;var n=decodeURIComponent,r=encodeURIComponent,s=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(u,d){if(typeof u!="string")throw new TypeError("argument str must be a string");for(var m={},p=d||{},h=u.split(s),g=p.decode||n,y=0;y<h.length;y++){var x=h[y],v=x.indexOf("=");if(!(v<0)){var b=x.substr(0,v).trim(),_=x.substr(++v,x.length).trim();_[0]=='"'&&(_=_.slice(1,-1)),m[b]==null&&(m[b]=c(_,g))}}return m}function l(u,d,m){var p=m||{},h=p.encode||r;if(typeof h!="function")throw new TypeError("option encode is invalid");if(!a.test(u))throw new TypeError("argument name is invalid");var g=h(d);if(g&&!a.test(g))throw new TypeError("argument val is invalid");var y=u+"="+g;if(p.maxAge!=null){var x=p.maxAge-0;if(isNaN(x)||!isFinite(x))throw new TypeError("option maxAge is invalid");y+="; Max-Age="+Math.floor(x)}if(p.domain){if(!a.test(p.domain))throw new TypeError("option domain is invalid");y+="; Domain="+p.domain}if(p.path){if(!a.test(p.path))throw new TypeError("option path is invalid");y+="; Path="+p.path}if(p.expires){if(typeof p.expires.toUTCString!="function")throw new TypeError("option expires is invalid");y+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(y+="; HttpOnly"),p.secure&&(y+="; Secure"),p.sameSite){var v=typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite;switch(v){case!0:y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"strict":y+="; SameSite=Strict";break;case"none":y+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return y}function c(u,d){try{return d(u)}catch{return u}}})(),lP.exports=e})()),lP.exports}var Zce;function nan(){return Zce||(Zce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,w){for(var C in w)Object.defineProperty(_,C,{enumerable:!0,get:w[C]})}t(e,{ApiError:function(){return x},COOKIE_NAME_PRERENDER_BYPASS:function(){return d},COOKIE_NAME_PRERENDER_DATA:function(){return m},RESPONSE_LIMIT_DEFAULT:function(){return p},SYMBOL_CLEARED_COOKIES:function(){return g},SYMBOL_PREVIEW_DATA:function(){return h},checkIsOnDemandRevalidate:function(){return u},clearPreviewData:function(){return y},redirect:function(){return c},sendError:function(){return v},sendStatusCode:function(){return l},setLazyProp:function(){return b},wrapApiHandler:function(){return i}});const n=Irn(),r=Rrn(),s=ean(),a=nOe();function i(_,w){return(...C)=>((0,s.getTracer)().setRootSpanAttribute("next.route",_),(0,s.getTracer)().trace(a.NodeSpan.runHandler,{spanName:`executing api route (pages) ${_}`},()=>w(...C)))}function l(_,w){return _.statusCode=w,_}function c(_,w,C){if(typeof w=="string"&&(C=w,w=307),typeof w!="number"||typeof C!="string")throw Object.defineProperty(new Error("Invalid redirect arguments. Please use a single argument URL, e.g. res.redirect('/destination') or use a status code and URL, e.g. res.redirect(307, '/destination')."),"__NEXT_ERROR_CODE",{value:"E389",enumerable:!1,configurable:!0});return _.writeHead(w,{Location:C}),_.write(C),_.end(),_}function u(_,w){const C=n.HeadersAdapter.from(_.headers),E=C.get(r.PRERENDER_REVALIDATE_HEADER)===w.previewModeId,M=C.has(r.PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER);return{isOnDemandRevalidate:E,revalidateOnlyGenerated:M}}const d="__prerender_bypass",m="__next_preview_data",p=4*1024*1024,h=Symbol(m),g=Symbol(d);function y(_,w={}){if(g in _)return _;const{serialize:C}=tan(),S=_.getHeader("Set-Cookie");return _.setHeader("Set-Cookie",[...typeof S=="string"?[S]:Array.isArray(S)?S:[],C(d,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...w.path!==void 0?{path:w.path}:void 0}),C(m,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...w.path!==void 0?{path:w.path}:void 0})]),Object.defineProperty(_,g,{value:!0,enumerable:!1}),_}class x extends Error{constructor(w,C){super(C),this.statusCode=w}}function v(_,w,C){_.statusCode=w,_.statusMessage=C,_.end(C)}function b({req:_},w,C){const S={configurable:!0,enumerable:!0},E={...S,writable:!0};Object.defineProperty(_,w,{...S,get:()=>{const M=C();return Object.defineProperty(_,w,{...E,value:M}),M},set:M=>{Object.defineProperty(_,w,{...E,value:M})}})}}(KR)),KR}var ran=nan();function san(e,t,n){if(!e)return null;const r=e.split(t);return r.length<=n?r:[r.slice(0,-1).join(t),...r.slice(-1)]}function Dy(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}const aan=async({hotelSlug:e,headers:t={},reason:n})=>{const{error:r,data:s}=await ae.GET("/rest/travel/hotels/{slug}",n,{params:{path:{slug:e}},headers:t,timeoutMs:en.HIGH});if(r)throw new Ie("API_CLIENTS_ERROR",{cause:r});return s},dhn=async({filters:e,reason:t})=>{const n=await ae.POST("/rest/travel/hotels/search-widgets",t,{body:e,timeoutMs:en.NONE});if(n.data)return{hotels:n.data.hotels,map_item:n.data.map_item};throw new Error("No hotel results returned",{cause:n.error})},fhn=async({hotelTripadvisorId:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:i}=t,l=await ae.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:[e]},stay_info:{check_in_date:Dy(r),check_out_date:Dy(s),guests:{adults:a,children:i}}},timeoutMs:en.HIGH,retries:2});return l.data?{availability:l.data.results?.find(c=>c.tripadvisor_id===e),currencyExchangeRates:l.data.currency_exchange_rates,otaOffers:l.data.ota_hotel_offers?.find(c=>c.tripadvisor_id===e),perplexityProRateInfo:l.data.perplexity_pro_rate_info}:null},mhn=async({tripadvisorIds:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:i}=t,l=await ae.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:e},stay_info:{check_in_date:Dy(r),check_out_date:Dy(s),guests:{adults:a,children:i}}},timeoutMs:en.HIGH,retries:2});return l.data?{availability:l.data.results,currencyExchangeRates:l.data.currency_exchange_rates,otaOffers:l.data.ota_hotel_offers}:null},phn=async({searchPayload:e,rate:t,paymentInfo:n,discountId:r,isProRate:s,reason:a})=>{const{checkIn:i,checkOut:l,numAdults:c,numChildren:u}=e,d=san(n.name," ",1),m=await ae.POST("/rest/travel/hotels/reservations",a,{timeoutMs:en.NONE,body:{hotel_booking:{check_in_date:Dy(i),check_out_date:Dy(l),guests:{number_of_adults:c,number_of_children:u||null,primary:{address:{street:[n.address.line1,n.address.line2].filter(p=>!!p).join(" "),city:n.address.city,state:n.address.state,country_code:n.address.country,postal_code:n.address.postal_code},email:n.email,given_name:d?.[0]??"",surname:d?.[1]??"",telephone_number:n.phone}},payment:{stripe_payment_method_id:n.stripePaymentMethodId,stripe_customer_id:n.stripeCustomerId},selfbook_rate:{...t,is_pro_rate:s},customer_loyalty_code:n.customerLoyaltyCode},discount_id:r}});if(m.data)return m.data.hotel_booking;throw new ran.ApiError(m.response.status,"Booking hotel room failed")},hhn=async({limit:e,offset:t,isCanceled:n,beforeDate:r,afterDate:s,dateOrder:a="desc",headers:i,reason:l})=>{const c=await ae.GET("/rest/travel/hotels/user/reservations",l,{params:{query:{limit:e,offset:t,is_canceled:n,before_date:r,after_date:s,date_order_by:a}},headers:i,timeoutMs:en.MEDIUM});return c.data?c.data:null},ghn=async({bookingId:e,reason:t})=>{const n=await ae.DELETE("/rest/travel/hotels/reservations/{reservation_id}",t,{params:{path:{reservation_id:e}},timeoutMs:en.HIGH});if(!n.data)throw Error("Failed to cancel booking",{cause:n.error})},yhn=async({amount:e,currency:t,paymentMethodId:n,reason:r})=>{const s=await ae.GET("/rest/travel/hotels/user/discount-offer",r,{params:{query:{base_amount_micros:e,currency_code:t,payment_method_id:n}},timeoutMs:en.HIGH});return s.data?s.data:null},xhn=async({reason:e})=>{const t=await ae.GET("/rest/stripe/get-customer-billing-info",e);return t.data?t.data:null},ian=({slug:e,reason:t,enabled:n=!!e})=>We({enabled:n,queryKey:["hotels",e],queryFn:()=>aan({hotelSlug:e,reason:t})}),oan=e=>{const t=/\[([^\]]+)\]\(pplx:\/\/action\/[^)]+\)/g;return e.replace(t,"$1")};var Nk={};const h1="Perplexity",lan="",vOe=80,bOe=160,iD="Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question.";function can(e){if(!e)return null;try{return new Date(e).toISOString().slice(0,10)}catch{return null}}const oD=({firstEntity:e,query:t,slug:n,userAgent:r})=>{if(r?A_(r):!1)return wr({title:h1,index:!1,userAgent:r});if(!e)return cP({result:"no_result",slug:n,userAgent:r}),wr({index:!1,title:t?Iu(t).actualQuery||t:void 0,userAgent:r});const a=vn.parseAskTextField(e);if(!a)return cP({result:"bad_parse",slug:n,userAgent:r}),wr({index:!1,userAgent:r});const i=uan(e);cP({result:"url_served",slug:n,userAgent:r,imageURL:i});let l=h1,c;if(kve(e)&&e.article_info?.title?(l=e.article_info.title,e?.article_info?.read_time,c=e?.author_username):e.thread_title&&e.thread_title!==lan?l=e.thread_title:e.query_str&&(l=e.query_str),l){const{actualQuery:p}=Iu(l);l=p||l,l=ey(l,vOe)}const u=a.answer?ey(a.answer,bOe):iD,d=e?.thread_url_slug?e?.mode?.toLowerCase()=="article"?`https://www.perplexity.ai/page/${e.thread_url_slug}`:`https://www.perplexity.ai/search/${e.thread_url_slug}`:void 0,m=oan(u);return wr({imageURL:i,title:l,description:m,author:c,datePublished:e?.updated_datetime,canonicalURL:d,index:e?.should_index??!1,userAgent:r})},cP=({result:e,slug:t,userAgent:n,imageURL:r})=>{const s="[trackThreadOGImageServing]";try{t!=="new"&&B3(`${s} [${t}] [${n}] ${e}: ${r}`)}catch(a){hye("[trackThreadOGImageServing] error:",{result:e,slug:t,userAgent:n,imageURL:r,err:a})}},uan=e=>{let t=dg;const n=`[getThreadOGImageURL] [${e?.thread_url_slug}]`;if(e.s3_social_preview_url&&e.s3_social_preview_url!==dg)return e.s3_social_preview_url;try{t=dg;const r=vn.isArticleMode(e);return e.thread_url_slug?r?`${Nk.NEXTAUTH_URL}/api/og/page/${e.thread_url_slug}`:`${Nk.NEXTAUTH_URL}/api/og/thread/${e.thread_url_slug}`:t}catch(r){B3(`${n} error getting thread og image url: `,r)}return t},dan=e=>{let t=dg;const n=`[getSpaceOGImageURL] [${e?.slug}]`;try{return t=e?.s3_social_preview_url??dg,e?.slug?`${Nk.NEXTAUTH_URL}/api/og/space/${e?.slug}`:t}catch(r){B3(`${n} error getting space og image url: `,r)}return t},wr=({title:e=h1,description:t=iD,imageURL:n=dg,canonicalURL:r,author:s,datePublished:a,index:i,userAgent:l})=>{try{let c=!1;typeof window>"u"&&(c=l?A_(l):!1),c&&(e=h1);const u=can(a);return r=r??"./",{metadataBase:new URL("https://www.perplexity.ai"),title:e,description:t,author:s??void 0,alternates:{canonical:r},openGraph:{url:r,images:[n],locale:"en_US",type:"website",siteName:"Perplexity AI"},twitter:{card:t?"summary_large_image":"summary",images:[n],site:"@perplexity_ai",creator:s?`@${s}`:void 0},other:{datePublished:u??""},robots:{index:i}}}catch(c){return hye("[generatePageMetadata] Error generating metadata:",c),{title:h1,description:iD,metadataBase:new URL("https://www.perplexity.ai"),robots:{index:!1}}}};function fan({collection:e,slug:t,userAgent:n}){return!t||!e||e?.status==="failed"?wr({index:!1,userAgent:n}):wr({index:!1,title:e?.title??"Perplexity AI",description:"A Space on Perplexity AI by "+e?.owner_user?.username+"  "+e?.description,imageURL:dan(e),canonicalURL:`https://www.perplexity.ai/spaces/${t}`,author:e?.owner_user?.username,datePublished:e?.updated_datetime,userAgent:n})}function Jce({articleSection:e,slug:t,userAgent:n}){return oD(!t||!e?{slug:t,userAgent:n}:{firstEntity:e,slug:t,userAgent:n})}function man({userAgent:e}){return wr({imageURL:"https://r2cdn.perplexity.ai/pplx-academic-og.png",title:"Perplexity Academic",description:"The free, AI-powered academic search engine for scholars, students, and educators. Get instant answers from research papers, peer-reviewed journal articles, theses, conference papers, technical reports, and more.",index:!0,userAgent:e})}function pan({userAgent:e}){return wr({title:"Perplexity Shopping",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-shopping-og.png",description:"Discover trending products, best deals, and trusted reviews with Perplexity Shopping  your smart companion for finding what to buy.",userAgent:e})}function han({hotelData:e,userAgent:t}){return wr(e?{title:`${e?.hotel.name} - Perplexity Travel`,imageURL:e?.hotel?.photos[0]?.image_url,description:e?.hotel.description??void 0,index:!0,userAgent:t}:{index:!1,userAgent:t})}function gan({userAgent:e}){return wr({title:"Perplexify Me",index:!0,imageURL:"https://r2cdn.perplexity.ai/poster-lab-og-image.png",description:"Generate a personalized Perplexity poster.",userAgent:e})}function yan({userAgent:e}){return wr({title:"Perplexity Discover",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-discover-og.png",description:"Stay informed on the biggest stories happening around the world across tech, finance, sports, entertainment and more with Perplexity Discover.",userAgent:e})}function xan({userAgent:e}){return wr({title:"Perplexity Travel",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-travel-og.png",description:"Explore top destinations, hidden gems, and travel tips all in one place with Perplexity Travel  your go-to for smarter, faster trip planning.",userAgent:e})}function van({$t:e}){return{title:e({defaultMessage:"Formula 1  Perplexity Sports",id:"Ktk9GJrnKB"})}}function ban({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.subtitle;return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function _an({$t:e}){return{title:e({defaultMessage:"NBA  Perplexity Sports",id:"OygSHzfDGc"})}}function wan({$t:e}){return{title:e({defaultMessage:"Perplexity Finance",id:"DhdcmgxwQc"}),description:e({defaultMessage:"Get the latest stock price, historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.",id:"NcFbXdi/CA"}),imageURL:"https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg"}}function Can({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function San({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NBA | Perplexity Sports",id:"AIPY9QcrzT"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NBA | Perplexity Sports",id:"C6OMW0nwOa"})}}function Ean({playerData:e,$t:t}){return e?{title:t({defaultMessage:"{firstName} {lastName} | NBA | Perplexity Sports",id:"cMhXouxymy"},{firstName:e.player.firstName,lastName:e.player.lastName})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function Man({$t:e}){return{title:e({defaultMessage:"NFL  Perplexity Sports",id:"El6nRJUzwb"})}}function kan({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function Tan({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NFL | Perplexity Sports",id:"Hk4RXLiB59"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NFL | Perplexity Sports",id:"7QAbUNnW6e"})}}function Nan({playerData:e,$t:t}){return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function jan({$t:e}){return{title:e({defaultMessage:"MLB  Perplexity Sports",id:"CU0tFjpqFn"})}}function Aan({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:n};const r=e.event.team_1?.title||"",s=e.event.team_2?.title||"";return{title:`${r} vs ${s}  MLB | Perplexity Sports`}}function eue({$t:e,league:t}){const n=e(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:n})}}function tue({eventData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:r};const s=e.event.team_1.title,a=e.event.team_2.title,i=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{team1} vs {team2}  {league} | Perplexity Sports",id:"d7RYhrB+bM"},{team1:s,team2:a,league:i})}}function nue({tournamentData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),s=e?.tournamentInfo?.season?.name;if(!s)return{title:r};const a=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{title}  {league} | Perplexity Sports",id:"+pm49/sORt"},{title:s,league:a})}}function Ian({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.matchStats?.matchInfo?.description,s=e?.matchStats?.matchInfo?.competition?.name;return r?{title:`${r}  ${s}`}:{title:n}}function rue({league:e,$t:t}){return{title:t({defaultMessage:"{title}  Perplexity Sports",id:"wrVvZZ22yC"},{title:e==="ncaam"?"NCAA Men's Basketball":"NCAA Women's Basketball"})}}function sue({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.event?.teams;if(r?.length!==2)return{title:n};const s=r.map(a=>a.location);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:s[0],team2:s[1]})}}function Ran({$t:e}){return{title:e({defaultMessage:"IPL  Perplexity Sports",id:"YUrNinGa6l"})}}function Pan({$t:e}){return{title:e({defaultMessage:"ICC Cricket  Perplexity Sports",id:"t+zWRM/EBt"})}}function Oan({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"PGA"})}}function Lan({eventData:e}){return{title:`${e?.event?.name||"Event"}  Perplexity Sports`}}function Dan({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"DP World Tour"})}}function Fan({eventData:e}){return{title:"Event  Perplexity Sports"}}function Uan({$t:e}){return{title:e({defaultMessage:"WNBA  Perplexity Sports",id:"xp6AiOFIGz"})}}function Ban({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function Van({$t:e}){return{title:e({defaultMessage:"Champions League  Perplexity Sports",id:"5k4cIVBqE4"})}}function $an({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.title[0];return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}const Wan=({$t:e,userAgent:t})=>wr({title:e({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),index:!0,description:"Stay updated with the latest sports news, scores, and highlights from your favorite leagues and teams.",userAgent:t}),Han="https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg",zan=e=>({title:`${e.name} Stock Price: Quote, Forecast, Splits & News (${e.symbol})`,description:`Get the latest ${e.name} stock price (${e.symbol}), historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.`}),Gan=e=>({title:`${e.name} Price: Quote, Market Cap, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, real-time quotes, market cap, historical data, charts, price predictions, and news from Perplexity Finance.`}),qan=e=>({title:`${e.name} Exchange Rate: Live Price, Chart, Forecast & News`,description:`Get the latest ${e.name} exchange rate, live price, interactive chart, historical data, and expert forecast from Perplexity Finance.`}),Kan=e=>({title:`${e.name} Price: Live Chart, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price (${e.symbol}), live charts, market trends, expert forecasts, and breaking news from Perplexity Finance.`}),Yan=e=>({title:`${e.name} Price: Quote, Forecast, Charts & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`}),Qan=e=>e.exchange==="NASDAQ"||e.exchange==="NYSE"||e.exchange==="AMEX"?zan(e):e.exchange==="CRYPTO"?Gan(e):e.exchange==="FOREX"?qan(e):e.exchange==="COMMODITY"?Kan(e):Yan(e);function Xan({pathname:e,tickerSearchData:t,userAgent:n,$t:r}){const{symbol:s,tab:a}=tOe(e);if(!s&&!a)return wan({$t:r});if(!s)return wr({index:!1,userAgent:n});const i={title:`${s} Price: Quote, Forecast, Charts & News`,description:`Get the latest ${s} price, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`,imageURL:Han,index:!0},l=t?Qan(t):{};return wr({...i,...l,userAgent:n})}function Zan({shortcut:e}){return wr(e?{index:!1,title:ey(`/${e.task_name}`,vOe),description:ey(e.prompt,bOe),imageURL:`${Nk.NEXTAUTH_URL}/api/og/shortcut/${e.task_name}`}:{index:!1,title:"Perplexity Account"})}const Jan=e=>{const t="home-metadata",{$t:n}=Z(),{device:{userAgent:r}}=Lt(),s=Ft(),a=s?.split("/").pop()??"",i=sLe(e,s??""),{route:l,params:c}=i??{},u=l,{firstResult:d}=Ht(),{collection:m}=Oc({collectionSlug:a,reason:t,enabled:u==="/spaces/:slug"}),{article:p}=c0e(),{data:h}=ian({slug:a,reason:t,enabled:u==="/hotels/:slug"}),{symbol:g}=tOe(s),{data:y}=Hw({symbol:g}),{data:x}=Srn({eventId:a,league:"f1",reason:t,enabled:u==="/sports/f1/events/:eventId"}),{data:v}=Ern({eventId:a,league:"nba",reason:t,enabled:u==="/sports/nba/events/:eventId"}),{data:b}=Mrn({eventId:a,league:"nfl",reason:t,enabled:u==="/sports/nfl/events/:eventId"}),{data:_}=Nrn({eventId:a,league:"championsleague",reason:t,enabled:u==="/sports/championsleague/events/:eventId"}),{data:w}=krn({eventId:a,league:"mlb",reason:t,enabled:u==="/sports/mlb/events/:eventId"}),{data:C}=Trn({eventId:a,league:"cricket",reason:t,enabled:u==="/sports/cricket/events/:eventId"}),{data:S}=wrn({eventId:a,league:"pga",reason:t,enabled:u==="/sports/pga/events/:eventId"}),{data:E}=Crn({eventId:a,league:"wnba",reason:t,enabled:u==="/sports/wnba/events/:eventId"}),{data:M}=Fce({eventId:a,league:"atp",reason:t,enabled:u==="/sports/atp/events/:eventId"}),{data:k}=Fce({eventId:a,league:"wta",reason:t,enabled:u==="/sports/wta/events/:eventId"}),{data:N}=Dce({eventId:a,league:"ncaam",reason:t,enabled:u==="/sports/ncaam/events/:eventId"}),{data:P}=Dce({eventId:a,league:"ncaaw",reason:t,enabled:u==="/sports/ncaaw/events/:eventId"}),{data:L}=vrn({teamId:a,reason:t,enabled:u==="/sports/nba/teams/:teamId"}),{data:O}=brn({teamId:a,reason:t,enabled:u==="/sports/nfl/teams/:teamId"}),{data:A}=_rn({playerId:Number(a),reason:t,enabled:u==="/sports/nba/players/:playerId"}),{data:j}=Lce({seasonId:a,league:"atp",reason:t,enabled:u==="/sports/atp/tournaments/:seasonId"}),{data:T}=Lce({seasonId:a,league:"wta",reason:t,enabled:u==="/sports/wta/tournaments/:seasonId"}),{data:I}=jrn({reason:t});if(!s||!u||!c)return wr({index:!0,userAgent:r});switch(u){case"/spaces/:slug":return fan({slug:c.slug,userAgent:r,collection:m});case"/page/:slug":return Jce({slug:c.slug,userAgent:r,articleSection:p?.[0]});case"/academic":return man({userAgent:r});case"/discover":case"/discover/:topic":return yan({userAgent:r});case"/shopping":return pan({userAgent:r});case"/hotels/:slug":return han({slug:c.slug??"",userAgent:r,hotelData:h});case"/perplexify_me":return gan({userAgent:r});case N5:return Xan({userAgent:r,pathname:s,tickerSearchData:y,$t:n});case"/sports/f1":return van({$t:n});case"/sports/f1/events/:eventId":return ban({eventId:c.eventId??"",eventData:x,$t:n});case"/sports/nba":return _an({$t:n});case"/sports/nba/events/:eventId":return Can({eventId:c.eventId??"",eventData:v,$t:n});case"/sports/nba/teams/:teamId":return San({teamId:c.teamId??"",teamData:L,$t:n});case"/sports/nba/players/:playerId":return Ean({playerId:c.playerId??"",playerData:A,$t:n});case"/sports/nfl":return Man({$t:n});case"/sports/nfl/events/:eventId":return kan({eventId:c.eventId??"",eventData:b,$t:n});case"/sports/nfl/teams/:teamId":return Tan({teamId:c.teamId??"",teamData:O,$t:n});case"/sports/nfl/players/:playerId":return Nan({playerId:c.playerId??"",playerData:void 0,$t:n});case"/sports/championsleague":return Van({$t:n});case"/sports/championsleague/events/:eventId":return $an({eventId:c.eventId??"",eventData:_,$t:n});case"/sports/mlb":return jan({$t:n});case"/sports/mlb/events/:eventId":return Aan({eventId:c.eventId??"",eventData:w,$t:n});case"/sports/ipl":return Ran({$t:n});case"/sports/icc":return Pan({$t:n});case"/sports/cricket/events/:eventId":case"/sports/ipl/events/:eventId":case"/sports/icc/events/:eventId":return Ian({eventId:c.eventId??"",eventData:C,$t:n});case"/sports/pga":return Oan({$t:n});case"/sports/pga/events/:eventId":return Lan({eventId:c.eventId??"",eventData:S});case"/sports/dpworldtour":return Dan({$t:n});case"/sports/dpworldtour/events/:eventId":return Fan({eventId:c.eventId??"",eventData:null});case"/sports/wnba":return Uan({$t:n});case"/sports/wnba/events/:eventId":return Ban({eventId:c.eventId??"",eventData:E,$t:n});case"/sports/ncaam":return rue({league:"ncaam",$t:n});case"/sports/ncaaw":return rue({league:"ncaaw",$t:n});case"/sports/ncaam/events/:eventId":return sue({eventId:c.eventId??"",eventData:N,$t:n});case"/sports/ncaaw/events/:eventId":return sue({eventId:c.eventId??"",eventData:P,$t:n});case"^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$":return oD({slug:c.uuid,userAgent:r,firstEntity:d});case"/discover/:topic/:slug":return Jce({slug:c.slug,userAgent:r,articleSection:p?.[0]});case"/travel":return xan({userAgent:r});case"/sports":return Wan({$t:n,userAgent:r});case"/sports/atp":return eue({league:"atp",$t:n});case"/sports/wta":return eue({league:"wta",$t:n});case"/sports/atp/events/:eventId":return tue({eventId:c.eventId??"",league:"atp",eventData:M,$t:n});case"/sports/wta/events/:eventId":return tue({eventId:c.eventId??"",league:"wta",eventData:k,$t:n});case"/sports/atp/tournaments/:seasonId":return nue({seasonId:c.seasonId??"",league:"atp",tournamentData:j,$t:n});case"/sports/wta/tournaments/:seasonId":return nue({seasonId:c.seasonId??"",league:"wta",tournamentData:T,$t:n});case"/b/home":return wr({title:"New Tab",index:!0,userAgent:r});case"/account":case"/account/details":case"/account/org/details":case"/account/org/user-access":case"/account/org/permissions":case"/account/org/insights":case"/account/org/files":case"/account/org/connectors":case"/account/org":case"/account/api/group":case"/account/api/members":case"/account/api/billing":case"/account/api/keys":case"/account/api/playground/search":case"/account/api/limits":case"/account/api/files":case"/account/api/files/:repositoryUuid":case"/account/api":case"/account/pro-perks":case"/account/pro-perks/:name":case"/account/tasks/:taskId":case"/account/tasks":case"/account/org/members":case"/account/preferences":case"/account/personalize/memories":case"/account/personalize":case"/account/assistant":case"/account/site-instructions":case"/account/notifications":case"/account/files":case"/account/connectors":return wr({title:"Perplexity Account",index:!0,userAgent:r});case"/account/shortcuts":return Zan({shortcut:I?.shortcut??void 0});case"/account/reservations":return wr({title:"Perplexity Reservations",index:!0,userAgent:r});case"/account/purchases":return wr({title:"Perplexity Purchases",index:!0,userAgent:r});case"/b/assistants":return wr({title:"Background Assistants",index:!0,userAgent:r});case"/":case"/library":case"/b/speak":case"/b/zen":case"/b/try-assistant":case"/spaces":case"/b/mission-control":case"/spaces/templates":case"/windows-app/ask/input":case void 0:return wr({index:!0,userAgent:r});default:Kt(u)}};function ein(){return pn()?o.jsx(W_,{childrenWidth:"none",mobileHeader:!1,children:o.jsx(Uke,{})}):o.jsx(uu,{to:"/"})}const tin=we(async()=>{const{CometZenMode:e}=await Q(async()=>{const{CometZenMode:t}=await import("./CometZenMode-BTO8q0ic.js");return{CometZenMode:t}},__vite__mapDeps([483,3,1,61,484,5,6,4]));return{default:e,critical:!0}},{loading:()=>o.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:o.jsx(Zr,{})})}),nin=we(async()=>{const{TryAssistantPage:e}=await Q(async()=>{const{TryAssistantPage:t}=await import("./TryAssistantPage-CA832_6H.js");return{TryAssistantPage:t}},__vite__mapDeps([485,3,1,4,6,5]));return{default:e,critical:!0}},{loading:()=>o.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:o.jsx(Zr,{})})}),rin=we(async()=>{const{VoiceToVoiceModal:e}=await Q(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-DbBF6pDF.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([60,3,1,61,4,6,5]));return{default:e,critical:!0}},{loading:()=>o.jsx(cV,{})}),sin=we(async()=>{const{default:e}=await Q(async()=>{const{default:t}=await import("./library-CDffsBfy.js");return{default:t}},__vite__mapDeps([486,3,1,4,5,6,487,488]));return{default:e,critical:!0}}),ain=we(async()=>{const{default:e}=await Q(async()=>{const{default:t}=await import("./index-DVzkneuj.js");return{default:t}},__vite__mapDeps([489,3,1,4,14,6,5,490]));return{default:e,critical:!0}}),iin=we(async()=>{const{default:e}=await Q(async()=>{const{default:t}=await import("./templates-IS6sP-ZZ.js");return{default:t}},__vite__mapDeps([491,3,1,4,5,6]));return{default:e,critical:!0}}),oin=we(async()=>{const{default:e}=await Q(async()=>{const{default:t}=await import("./slug-Cx3OxW6m.js");return{default:t}},__vite__mapDeps([492,3,1,4,6,493,5,490]));return{default:e,critical:!0}}),aue=we(async()=>{const{ArticlePageLayout:e}=await Q(async()=>{const{ArticlePageLayout:t}=await import("./slug-DYxiMDjr.js").then(n=>n.s);return{ArticlePageLayout:t}},__vite__mapDeps([494,3,1,4,6,5,495,115,454,455,14,496,116,117,484,478,456,439,17,123,488,47,48,458,459,114,453,481]));return{default:e,critical:!0}}),lin=we(async()=>{const{AcademicLandingPage:e}=await Q(async()=>{const{AcademicLandingPage:t}=await import("./academic-DBLFF22n.js");return{AcademicLandingPage:t}},__vite__mapDeps([497,3,1,4,498,451,5,6,444,48,499,448,449,27]));return{default:e,critical:!0}}),cin=we(async()=>{const{ShoppingLandingPage:e}=await Q(async()=>{const{ShoppingLandingPage:t}=await import("./shopping-BiQkFeh7.js");return{ShoppingLandingPage:t}},__vite__mapDeps([500,3,1,4,448,6,5,449,27,445,444,48,469,499,498,451]));return{default:e,critical:!0}}),uin=we(async()=>{const{HotelsSlugPage:e}=await Q(async()=>{const{HotelsSlugPage:t}=await import("./hotels-3uOk6q03.js").then(n=>n.h);return{HotelsSlugPage:t}},__vite__mapDeps([501,1,3,4,448,6,5,472,54,71,443,37,47,48,502]));return{default:e,critical:!0}}),din=we(async()=>{const{PerplexifyMeLandingPage:e}=await Q(async()=>{const{PerplexifyMeLandingPage:t}=await import("./perplexify_me-CScGGCSU.js");return{PerplexifyMeLandingPage:t}},__vite__mapDeps([503,3,1,4,448,6,5]));return{default:e,critical:!0}}),fin=we(async()=>{const{TravelIndexPage:e}=await Q(async()=>{const{TravelIndexPage:t}=await import("./travel-CO5HW2MT.js");return{TravelIndexPage:t}},__vite__mapDeps([504,3,1,4,448,6,5,449,27,499,498,451,444,48]));return{default:e,critical:!0}}),iue=we(async()=>{const{DiscoverPage:e}=await Q(async()=>{const{DiscoverPage:t}=await import("./discover-Bm8tNF1o.js");return{DiscoverPage:t}},__vite__mapDeps([505,3,1,4,448,6,5,449,27,450,495,115,454,455,487,506]));return{default:e,critical:!0}}),min=we(async()=>{const{F1MainPage:e}=await Q(async()=>{const{F1MainPage:t}=await import("./index-CSx_zpqT.js");return{F1MainPage:t}},__vite__mapDeps([507,3,1,4,508,509,6,5,510,511,448]));return{default:e,critical:!0}}),pin=we(async()=>{const{F1EventMainPage:e}=await Q(async()=>{const{F1EventMainPage:t}=await import("./events-VDzHn1We.js");return{F1EventMainPage:t}},__vite__mapDeps([512,3,1,4,6,5,508,502,511,448]));return{default:e,critical:!0}}),hin=we(async()=>{const{NBAMainPage:e}=await Q(async()=>{const{NBAMainPage:t}=await import("./index-CIVzfaG_.js");return{NBAMainPage:t}},__vite__mapDeps([513,3,1,4,514,5,515,516,517,518,519,520,6,521,510,522,511,448]));return{default:e,critical:!0}}),gin=we(async()=>{const{NBAEventMainPage:e}=await Q(async()=>{const{NBAEventMainPage:t}=await import("./events-BCuMDk_r.js");return{NBAEventMainPage:t}},__vite__mapDeps([523,3,1,4,524,6,525,526,527,528,529,522,530,531,532,533,534,502,511,448,5]));return{default:e,critical:!0}}),yin=we(async()=>{const{NBATeamMainPage:e}=await Q(async()=>{const{NBATeamMainPage:t}=await import("./teams-DPF5kIS_.js");return{NBATeamMainPage:t}},__vite__mapDeps([535,3,1,4,522,536,525,528,529,531,532,533,516,517,514,5,502,511,448,6]));return{default:e,critical:!0}}),xin=we(async()=>{const{NBAPlayerMainPage:e}=await Q(async()=>{const{NBAPlayerMainPage:t}=await import("./players-w_GDCEhq.js");return{NBAPlayerMainPage:t}},__vite__mapDeps([537,3,1,4,538,5,529,502,511,448,6]));return{default:e,critical:!0}}),vin=we(async()=>{const{NFLMainPage:e}=await Q(async()=>{const{NFLMainPage:t}=await import("./index-CvEgH3S9.js");return{NFLMainPage:t}},__vite__mapDeps([539,3,1,4,525,520,6,5,521,448]));return{default:e,critical:!0}}),bin=we(async()=>{const{NFLEventMainPage:e}=await Q(async()=>{const{NFLEventMainPage:t}=await import("./events-BMtmBUFo.js");return{NFLEventMainPage:t}},__vite__mapDeps([540,3,1,4,525,527,528,529,522,530,532,533,534,502,448,6,5]));return{default:e,critical:!0}}),_in=we(async()=>{const{NFLTeamMainPage:e}=await Q(async()=>{const{NFLTeamMainPage:t}=await import("./teams-DQHpEBLI.js");return{NFLTeamMainPage:t}},__vite__mapDeps([541,3,1,4,525,5,6,502,448]));return{default:e,critical:!0}}),win=we(async()=>{const{NFLPlayerMainPage:e}=await Q(async()=>{const{NFLPlayerMainPage:t}=await import("./players-B6ymc3k6.js");return{NFLPlayerMainPage:t}},__vite__mapDeps([542,3,1,4,536,525,538,5,529,502,511,448,6]));return{default:e,critical:!0}}),Cin=we(async()=>{const{ChampionsLeagueMainPage:e}=await Q(async()=>{const{ChampionsLeagueMainPage:t}=await import("./index-CHGCKY9a.js");return{ChampionsLeagueMainPage:t}},__vite__mapDeps([543,3,1,4,544,519,520,6,5,510,509,511,448]));return{default:e,critical:!0}}),Sin=we(async()=>{const{ChampionsLeagueEventMainPage:e}=await Q(async()=>{const{ChampionsLeagueEventMainPage:t}=await import("./events-CFUqGUMZ.js");return{ChampionsLeagueEventMainPage:t}},__vite__mapDeps([545,3,1,4,546,6,534,533,502,511,448,5]));return{default:e,critical:!0}}),Ein=we(async()=>{const{MLBMainPage:e}=await Q(async()=>{const{MLBMainPage:t}=await import("./index-BgojAbdb.js");return{MLBMainPage:t}},__vite__mapDeps([547,1,3,4,548,514,5,515,549,517,6,518,521,510,522,511,448]));return{default:e,critical:!0}}),Min=we(async()=>{const{MLBEventMainPage:e}=await Q(async()=>{const{MLBEventMainPage:t}=await import("./events-CgCHBmfH.js");return{MLBEventMainPage:t}},__vite__mapDeps([550,3,1,4,546,6,551,5,548,514,515,549,517,518,502,511,448]));return{default:e,critical:!0}}),uP=we(async()=>{const{CricketEventMainPage:e}=await Q(async()=>{const{CricketEventMainPage:t}=await import("./events-DH_aOSLe.js");return{CricketEventMainPage:t}},__vite__mapDeps([552,3,1,4,6,5,551,553,502,511,448]));return{default:e,critical:!0}}),kin=we(async()=>{const{ICCMainPage:e}=await Q(async()=>{const{ICCMainPage:t}=await import("./index-Bj5-qdFD.js");return{ICCMainPage:t}},__vite__mapDeps([554,3,1,4,514,5,518,6,553,502,511,448]));return{default:e,critical:!0}}),Tin=we(async()=>{const{IPLMainPage:e}=await Q(async()=>{const{IPLMainPage:t}=await import("./index-CMSP73GL.js");return{IPLMainPage:t}},__vite__mapDeps([555,3,1,4,514,5,518,519,520,6,521,510,522,511,448]));return{default:e,critical:!0}}),Nin=we(async()=>{const{PGAMainPage:e}=await Q(async()=>{const{PGAMainPage:t}=await import("./index-B183XTpu.js");return{PGAMainPage:t}},__vite__mapDeps([556,3,1,4,557,6,558,509,5,502,511,448]));return{default:e,critical:!0}}),jin=we(async()=>{const{PGAEventMainPage:e}=await Q(async()=>{const{PGAEventMainPage:t}=await import("./events-DSE_Kxsm.js");return{PGAEventMainPage:t}},__vite__mapDeps([559,3,1,4,557,6,502,511,448,5]));return{default:e,critical:!0}}),Ain=we(async()=>{const{EuropeanTourMainPage:e}=await Q(async()=>{const{EuropeanTourMainPage:t}=await import("./index-B183XTpu.js");return{EuropeanTourMainPage:t}},__vite__mapDeps([556,3,1,4,557,6,558,509,5,502,511,448]));return{default:e,critical:!0}}),Iin=we(async()=>{const{EuropeanTourEventMainPage:e}=await Q(async()=>{const{EuropeanTourEventMainPage:t}=await import("./events-DSE_Kxsm.js");return{EuropeanTourEventMainPage:t}},__vite__mapDeps([559,3,1,4,557,6,502,511,448,5]));return{default:e,critical:!0}}),Rin=we(async()=>{const{WNBAMainPage:e}=await Q(async()=>{const{WNBAMainPage:t}=await import("./index-BjKv-OPy.js");return{WNBAMainPage:t}},__vite__mapDeps([560,3,1,4,521,6,5,510,522,514,515,549,517,518,511,448]));return{default:e,critical:!0}}),Pin=we(async()=>{const{WNBAEventMainPage:e}=await Q(async()=>{const{WNBAEventMainPage:t}=await import("./events-DcbAwDVg.js");return{WNBAEventMainPage:t}},__vite__mapDeps([561,3,1,4,524,6,525,527,528,529,522,5,533,502,511,448]));return{default:e,critical:!0}}),Oin=we(async()=>{const{NCAAMEventMainPage:e}=await Q(async()=>{const{NCAAMEventMainPage:t}=await import("./events-BOXnhhHg.js");return{NCAAMEventMainPage:t}},__vite__mapDeps([562,3,1,4,524,6,525,526,527,528,529,522,530,531,532,533,534,502,511,448,5]));return{default:e,critical:!0}}),Lin=we(async()=>{const{NCAAWEventMainPage:e}=await Q(async()=>{const{NCAAWEventMainPage:t}=await import("./events-BOXnhhHg.js");return{NCAAWEventMainPage:t}},__vite__mapDeps([562,3,1,4,524,6,525,526,527,528,529,522,530,531,532,533,534,502,511,448,5]));return{default:e,critical:!0}}),Din=we(async()=>{const{NCAAMMainPage:e}=await Q(async()=>{const{NCAAMMainPage:t}=await import("./index-oikJ78i2.js");return{NCAAMMainPage:t}},__vite__mapDeps([563,3,1,4,544,519,520,6,5,510,502,511,448]));return{default:e,critical:!0}}),Fin=we(async()=>{const{NCAAWMainPage:e}=await Q(async()=>{const{NCAAWMainPage:t}=await import("./index-oikJ78i2.js");return{NCAAWMainPage:t}},__vite__mapDeps([563,3,1,4,544,519,520,6,5,510,502,511,448]));return{default:e,critical:!0}}),Uin=we(async()=>{const{WTAMainPage:e}=await Q(async()=>{const{WTAMainPage:t}=await import("./index-DM7_e6KQ.js");return{WTAMainPage:t}},__vite__mapDeps([564,3,1,4,565,558,509,6,5,566,502,511,448]));return{default:e,critical:!0}}),Bin=we(async()=>{const{ATPMainPage:e}=await Q(async()=>{const{ATPMainPage:t}=await import("./index-DM7_e6KQ.js");return{ATPMainPage:t}},__vite__mapDeps([564,3,1,4,565,558,509,6,5,566,502,511,448]));return{default:e,critical:!0}}),Vin=we(async()=>{const{WTAEventMainPage:e}=await Q(async()=>{const{WTAEventMainPage:t}=await import("./events-D0zRkKGA.js");return{WTAEventMainPage:t}},__vite__mapDeps([567,3,1,4,546,6,5,568,519,520,533,566,502,511,448]));return{default:e,critical:!0}}),$in=we(async()=>{const{ATPEventMainPage:e}=await Q(async()=>{const{ATPEventMainPage:t}=await import("./events-D0zRkKGA.js");return{ATPEventMainPage:t}},__vite__mapDeps([567,3,1,4,546,6,5,568,519,520,533,566,502,511,448]));return{default:e,critical:!0}}),Win=we(async()=>{const{ATPTournamentMainPage:e}=await Q(async()=>{const{ATPTournamentMainPage:t}=await import("./tournaments-yDDvtVTS.js");return{ATPTournamentMainPage:t}},__vite__mapDeps([569,3,1,4,510,6,565,568,519,520,5,566,502,511,448]));return{default:e,critical:!0}}),Hin=we(async()=>{const{WTATournamentMainPage:e}=await Q(async()=>{const{WTATournamentMainPage:t}=await import("./tournaments-yDDvtVTS.js");return{WTATournamentMainPage:t}},__vite__mapDeps([569,3,1,4,510,6,565,568,519,520,5,566,502,511,448]));return{default:e,critical:!0}}),zin=we(async()=>{const{FinanceRouter:e}=await Q(async()=>{const{FinanceRouter:t}=await import("./sub-router-D0lPqbWu.js");return{FinanceRouter:t}},__vite__mapDeps([570,3,1,4,5,447,448,6,449,27,450,451,452,571,439,17,502]));return{default:e}}),Gin=we(async()=>{const{AccountPage:e}=await Q(async()=>{const{AccountPage:t}=await import("./index-ecxH1_FJ.js");return{AccountPage:t}},__vite__mapDeps([572,3,1,6,5,4]));return{default:e,critical:!0}}),qin=we(async()=>{const{AccountDetailsPage:e}=await Q(async()=>{const{AccountDetailsPage:t}=await import("./details-BSDsL00R.js");return{AccountDetailsPage:t}},__vite__mapDeps([573,3,1,4,6,5]));return{default:e,critical:!0}}),Kin=we(async()=>{const{AccountApiGroupPage:e}=await Q(async()=>{const{AccountApiGroupPage:t}=await import("./group-AS-nnt4l.js");return{AccountApiGroupPage:t}},__vite__mapDeps([574,3,1,575,576,496,6,577,578,4,579,5,580,581,39]));return{default:e,critical:!0}}),Yin=we(async()=>{const{AccountApiMembersPage:e}=await Q(async()=>{const{AccountApiMembersPage:t}=await import("./members-XCcfJ_dG.js");return{AccountApiMembersPage:t}},__vite__mapDeps([582,3,1,575,576,496,6,4,577,578,579,5,583]));return{default:e,critical:!0}}),Qin=we(async()=>{const{AccountApiBillingPage:e}=await Q(async()=>{const{AccountApiBillingPage:t}=await import("./billing-Ch7u2V5i.js");return{AccountApiBillingPage:t}},__vite__mapDeps([584,3,1,575,576,496,6,4,452,579,5,581,39,580,578]));return{default:e,critical:!0}}),Xin=we(async()=>{const{AccountApiKeysPage:e}=await Q(async()=>{const{AccountApiKeysPage:t}=await import("./keys-2jVlOzga.js");return{AccountApiKeysPage:t}},__vite__mapDeps([585,3,1,575,576,496,6,4,579,5,577,578]));return{default:e,critical:!0}}),Zin=we(async()=>{const{AccountApiLimitsPage:e}=await Q(async()=>{const{AccountApiLimitsPage:t}=await import("./limits-Dtg9kdst.js");return{AccountApiLimitsPage:t}},__vite__mapDeps([586,3,1,575,576,496,6,4,5]));return{default:e,critical:!0}}),Jin=we(async()=>{const{AccountApiFilesPage:e}=await Q(async()=>{const{AccountApiFilesPage:t}=await import("./files-DaJwpDkM.js");return{AccountApiFilesPage:t}},__vite__mapDeps([587,3,1,575,576,496,6,4,577,578,5]));return{default:e,critical:!0}}),eon=we(async()=>{const{AccountApiFilesRepoPage:e}=await Q(async()=>{const{AccountApiFilesRepoPage:t}=await import("./files-repo-CBGbSutF.js");return{AccountApiFilesRepoPage:t}},__vite__mapDeps([588,3,1,575,576,496,6,4,578,11,5]));return{default:e,critical:!0}}),ton=we(async()=>{const{ApiIndexPage:e}=await Q(async()=>{const{ApiIndexPage:t}=await import("./index-BTD5fPDF.js");return{ApiIndexPage:t}},__vite__mapDeps([589,3,1,575,576,496,6,5,4]));return{default:e,critical:!0}}),non=we(async()=>{const{AccountProPerksPage:e}=await Q(async()=>{const{AccountProPerksPage:t}=await import("./pro-perks-Bb62U8Lh.js");return{AccountProPerksPage:t}},__vite__mapDeps([590,3,1,591,6,576,496,4,5]));return{default:e,critical:!0}}),ron=we(async()=>{const{AccountProPerksDetailPage:e}=await Q(async()=>{const{AccountProPerksDetailPage:t}=await import("./pro-perks-detail-CuRsBYae.js");return{AccountProPerksDetailPage:t}},__vite__mapDeps([592,3,1,591,6,576,496,4,5]));return{default:e,critical:!0}}),son=we(async()=>{const{OrgIndexPage:e}=await Q(async()=>{const{OrgIndexPage:t}=await import("./index-2sKHiMeh.js");return{OrgIndexPage:t}},__vite__mapDeps([593,3,1,576,496,6,594,5,4]));return{default:e,critical:!0}}),aon=we(async()=>{const{OrgDetailsPage:e}=await Q(async()=>{const{OrgDetailsPage:t}=await import("./index-DUo-uovz.js");return{OrgDetailsPage:t}},__vite__mapDeps([595,3,1,4,493,6,5,596,597,91,598,576,496,594]));return{default:e,critical:!0}}),ion=we(async()=>{const{OrgMembersPage:e}=await Q(()=>import("./members-C57UHc4q.js"),__vite__mapDeps([599,3,1,4,5,6,493,583,576,496,594]));return{default:e,critical:!0}}),oon=we(async()=>{const{OrgInsightsPage:e}=await Q(()=>import("./insights-CEW_m44B.js"),__vite__mapDeps([600,3,1,4,5,91,6,576,496,594]));return{default:e,critical:!0}}),lon=we(async()=>{const{OrgUserAccessPage:e}=await Q(()=>import("./user-access-CfbTW4Xi.js"),__vite__mapDeps([601,3,1,4,6,5,91,597,576,496,594]));return{default:e,critical:!0}}),con=we(async()=>{const{OrgPermissionsPage:e}=await Q(()=>import("./permissions-BunJPLIg.js"),__vite__mapDeps([602,3,1,4,596,6,598,576,496,594,5]));return{default:e,critical:!0}}),uon=we(async()=>{const{OrgFilesPage:e}=await Q(()=>import("./files-nIk1TzW_.js"),__vite__mapDeps([603,3,1,4,10,11,5,6,576,496,604,594]));return{default:e,critical:!0}}),don=we(async()=>{const{OrgConnectorsPage:e}=await Q(()=>import("./connectors-CHCGF9Zh.js"),__vite__mapDeps([605,3,1,576,496,6,4,5,594]));return{default:e,critical:!0}}),fon=we(async()=>{const{AccountPurchasesPage:e}=await Q(async()=>{const{AccountPurchasesPage:t}=await import("./purchases-DQSVMM2J.js");return{AccountPurchasesPage:t}},__vite__mapDeps([606,3,1,4,607,52,5,6]));return{default:e,critical:!0}}),mon=we(async()=>{const{AccountReservationsPage:e}=await Q(async()=>{const{AccountReservationsPage:t}=await import("./reservations-BNFN0Gdn.js");return{AccountReservationsPage:t}},__vite__mapDeps([608,3,1,4,607,54,55,5,6]));return{default:e,critical:!0}}),pon=we(async()=>{const{AccountTasksPage:e}=await Q(async()=>{const{AccountTasksPage:t}=await import("./index-C9by2feX.js");return{AccountTasksPage:t}},__vite__mapDeps([609,3,1,4,610,6,5,506]));return{default:e,critical:!0}}),hon=we(async()=>{const{AccountTaskDetailsPage:e}=await Q(async()=>{const{AccountTaskDetailsPage:t}=await import("./task-DUDLMrpH.js");return{AccountTaskDetailsPage:t}},__vite__mapDeps([611,3,1,4,6,5]));return{default:e,critical:!0}}),gon=we(async()=>{const{AccountShortcutsPage:e}=await Q(async()=>{const{AccountShortcutsPage:t}=await import("./shortcuts-CtHFqg6e.js");return{AccountShortcutsPage:t}},__vite__mapDeps([612,3,1,4,610,5,6]));return{default:e,critical:!0}}),yon=we(async()=>{const{AccountSiteInstructionsPage:e}=await Q(async()=>{const{AccountSiteInstructionsPage:t}=await import("./site-instructions-B2KnjdgR.js");return{AccountSiteInstructionsPage:t}},__vite__mapDeps([613,3,1,4,5,6]));return{default:e,critical:!0}}),xon=we(async()=>{const{AccountPreferencesPage:e}=await Q(async()=>{const{AccountPreferencesPage:t}=await import("./preferences-mo_HbFCH.js");return{AccountPreferencesPage:t}},__vite__mapDeps([614,3,1,4,5,6]));return{default:e,critical:!0}}),von=we(async()=>{const{AccountPersonalizePage:e}=await Q(async()=>{const{AccountPersonalizePage:t}=await import("./personalize-B84SEJoN.js");return{AccountPersonalizePage:t}},__vite__mapDeps([615,3,1,4,5,6,118]));return{default:e,critical:!0}}),bon=we(async()=>{const{AccountAssistantPage:e}=await Q(async()=>{const{AccountAssistantPage:t}=await import("./assistant-SlybqJ78.js");return{AccountAssistantPage:t}},__vite__mapDeps([616,3,1,4,5,6,77]));return{default:e,critical:!0}}),_on=we(async()=>{const{AccountPersonalizeMemoriesPage:e}=await Q(async()=>{const{AccountPersonalizeMemoriesPage:t}=await import("./memories-JERbv_n1.js");return{AccountPersonalizeMemoriesPage:t}},__vite__mapDeps([617,3,1,4,68,5,6]));return{default:e,critical:!0}}),won=we(async()=>{const{AccountNotificationsPage:e}=await Q(async()=>{const{AccountNotificationsPage:t}=await import("./notifications-C3w6JXXs.js");return{AccountNotificationsPage:t}},__vite__mapDeps([618,3,1,4,23,6,5]));return{default:e,critical:!0}}),Con=we(async()=>{const{AccountFilesPage:e}=await Q(async()=>{const{AccountFilesPage:t}=await import("./files-6dC3GK2o.js");return{AccountFilesPage:t}},__vite__mapDeps([619,3,1,4,604,10,11,5,6]));return{default:e,critical:!0}}),Son=we(async()=>{const{AccountConnectorsPage:e}=await Q(async()=>{const{AccountConnectorsPage:t}=await import("./connectors-DUYFi-kV.js");return{AccountConnectorsPage:t}},__vite__mapDeps([620,1,3,6,5,4]));return{default:e,critical:!0}}),Eon=we(async()=>{const{SportsLandingPage:e}=await Q(async()=>{const{SportsLandingPage:t}=await import("./index-BDGb-AK3.js");return{SportsLandingPage:t}},__vite__mapDeps([621,3,1,4,448,6,5,449,27,571,498,451,502]));return{default:e,critical:!0}}),Mon=we(async()=>{const{InputPage:e}=await Q(async()=>{const{InputPage:t}=await import("./ask-input-BunjU3nn.js");return{InputPage:t}},__vite__mapDeps([622,3,1,502,4,6,5]));return{default:e,critical:!0}}),kon=we(async()=>{const{AccountApiPlaygroundPage:e}=await Q(async()=>{const{AccountApiPlaygroundPage:t}=await import("./playground-CvcxwBLW.js");return{AccountApiPlaygroundPage:t}},__vite__mapDeps([623,3,1,4,5,580,6]));return{default:e,critical:!0}});function Ton(){const e=_t(),t=f.useCallback(()=>{e.push("/b/home",void 0,"voice to ntp")},[e]);return pn()?o.jsx(W_,{childrenWidth:"none",mobileHeader:!1,children:o.jsx(rin,{isOpen:!0,onClose:t})}):o.jsx(uu,{to:"/"})}function Non(){return pn()?o.jsx(tin,{}):o.jsx(uu,{to:"/"})}function oue(){const{session:e}=Nt(),{value:t,loading:n}=$r({flag:"mission-control-enabled",defaultValue:!1,extraAttributes:{userEmail:e?.user?.email??"unknown-user",subscriptionTier:e?.user.subscription_tier||""}});return n?o.jsx("div",{}):!pn()||!t?o.jsx(uu,{to:"/"}):o.jsx(qPe,{})}function jon(){return pn()?o.jsx(nin,{}):o.jsx(uu,{to:"/"})}const l2={"/library":{Component:sin,modules:fe},"^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$":{Component:eOe,modules:f$t},"/b/home":{Component:ein,modules:Uoe},"/b/speak":{Component:Ton,modules:fe},"/b/zen":{Component:Non,modules:fe},"/b/mission-control":{Component:oue,modules:fe},"/b/assistants":{Component:oue,modules:fe},"/b/try-assistant":{Component:jon,modules:fe},"/spaces/templates":{Component:iin,modules:fe},"/spaces/:slug":{Component:oin,modules:m$t},"/spaces":{Component:ain,modules:fe},"/page/:slug":{Component:aue,modules:fe},"/discover/:topic/:slug":{Component:aue,modules:fe},"/discover/:topic":{Component:iue,modules:Boe},"/discover":{Component:iue,modules:Boe},"/academic":{Component:lin,modules:fe},"/shopping":{Component:cin,modules:fe},"/hotels/:slug":{Component:uin,modules:fe},"/perplexify_me":{Component:din,modules:fe},"/sports":{Component:Eon,modules:fe},"/sports/f1/events/:eventId":{Component:pin,modules:fe},"/sports/f1":{Component:min,modules:u$t},"/sports/nba/events/:eventId":{Component:gin,modules:fe},"/sports/nba/teams/:teamId":{Component:yin,modules:fe},"/sports/nba/players/:playerId":{Component:xin,modules:fe},"/sports/nba":{Component:hin,modules:d$t},"/sports/nfl/events/:eventId":{Component:bin,modules:fe},"/sports/nfl/teams/:teamId":{Component:_in,modules:fe},"/sports/nfl/players/:playerId":{Component:win,modules:fe},"/sports/nfl":{Component:vin,modules:fe},"/sports/championsleague/events/:eventId":{Component:Sin,modules:fe},"/sports/championsleague":{Component:Cin,modules:fe},"/sports/mlb/events/:eventId":{Component:Min,modules:fe},"/sports/mlb":{Component:Ein,modules:fe},"/sports/cricket/events/:eventId":{Component:uP,modules:fe},"/sports/ipl/events/:eventId":{Component:uP,modules:fe},"/sports/icc/events/:eventId":{Component:uP,modules:fe},"/sports/ipl":{Component:Tin,modules:fe},"/sports/icc":{Component:kin,modules:fe},"/sports/pga/events/:eventId":{Component:jin,modules:fe},"/sports/pga":{Component:Nin,modules:fe},"/sports/dpworldtour/events/:eventId":{Component:Iin,modules:fe},"/sports/dpworldtour":{Component:Ain,modules:fe},"/sports/wnba/events/:eventId":{Component:Pin,modules:fe},"/sports/wnba":{Component:Rin,modules:fe},"/sports/wta":{Component:Uin,modules:fe},"/sports/atp":{Component:Bin,modules:fe},"/sports/wta/events/:eventId":{Component:Vin,modules:fe},"/sports/atp/events/:eventId":{Component:$in,modules:fe},"/sports/atp/tournaments/:seasonId":{Component:Win,modules:fe},"/sports/wta/tournaments/:seasonId":{Component:Hin,modules:fe},"/sports/ncaam/events/:eventId":{Component:Oin,modules:fe},"/sports/ncaam":{Component:Din,modules:fe},"/sports/ncaaw/events/:eventId":{Component:Lin,modules:fe},"/sports/ncaaw":{Component:Fin,modules:fe},"/travel":{Component:fin,modules:fe},[N5]:{Component:zin,modules:c$t},"/account/details":{Component:qin,modules:fe},"/account/org/details":{Component:aon,modules:fe},"/account/org/members":{Component:ion,modules:fe},"/account/org/insights":{Component:oon,modules:fe},"/account/org/user-access":{Component:lon,modules:fe},"/account/org/permissions":{Component:con,modules:fe},"/account/org/files":{Component:uon,modules:fe},"/account/org/connectors":{Component:don,modules:fe},"/account/api/group":{Component:Kin,modules:fe},"/account/api/members":{Component:Yin,modules:fe},"/account/api/billing":{Component:Qin,modules:fe},"/account/api/keys":{Component:Xin,modules:fe},"/account/api/playground/search":{Component:kon,modules:fe},"/account/api/limits":{Component:Zin,modules:fe},"/account/api/files":{Component:Jin,modules:fe},"/account/api/files/:repositoryUuid":{Component:eon,modules:fe},"/account/api":{Component:ton,modules:fe},"/account/pro-perks":{Component:non,modules:fe},"/account/pro-perks/:name":{Component:ron,modules:fe},"/account/org":{Component:son,modules:fe},"/account/purchases":{Component:fon,modules:fe},"/account/reservations":{Component:mon,modules:fe},"/account/tasks/:taskId":{Component:hon,modules:fe},"/account/tasks":{Component:pon,modules:fe},"/account/shortcuts":{Component:gon,modules:fe},"/account/site-instructions":{Component:yon,modules:fe},"/account/preferences":{Component:xon,modules:fe},"/account/personalize":{Component:von,modules:fe},"/account/assistant":{Component:bon,modules:fe},"/account/personalize/memories":{Component:_on,modules:fe},"/account/notifications":{Component:won,modules:fe},"/account/files":{Component:Con,modules:fe},"/account/connectors":{Component:Son,modules:fe},"/account":{Component:Gin,modules:fe},"/windows-app/ask/input":{Component:Mon,modules:fe},"/":{Component:a6e,modules:Uoe}},Aon=/^\/account/,Ion=/^\/windows-app/,_Oe=R.memo(function(){const t=f.useMemo(()=>Object.keys(l2),[]),n=Jan(t),r=f.useMemo(()=>Object.entries(l2).filter(([i])=>i.startsWith("/account")),[]),s=f.useMemo(()=>Object.entries(l2).filter(([i])=>i.startsWith("/windows-app")),[]),a=f.useMemo(()=>Object.entries(l2).filter(([i])=>!i.startsWith("/account")),[]);return o.jsxs(Zbe,{children:[o.jsx(gz,{}),o.jsxs(JN,{children:[o.jsx(Jp,{path:Ion,children:s.map(([i,{Component:l,modules:c}])=>o.jsx(Jp,{path:i,children:o.jsx(kA,{modules:c,children:o.jsx(l,{})})},i))}),o.jsx(Jp,{path:Aon,children:o.jsx(bAe,{children:o.jsx(JN,{children:r.map(([i,{Component:l,modules:c}])=>o.jsx(Jp,{path:i,children:o.jsx(kA,{modules:c,children:o.jsx(l,{})})},i))})})}),o.jsx(Jp,{children:o.jsx(Vke,{children:o.jsx(l$t,{children:o.jsx(JN,{children:a.map(([i,{Component:l,modules:c}])=>o.jsx(Jp,{path:i.startsWith("^")?new RegExp(i):i,children:o.jsx(kA,{modules:c,children:o.jsx(l,{})})},i))})})})})]}),o.jsx(dAe,{metadata:n})]})});_Oe.displayName="SpaEntryPoint";const Ron=document.getElementById("root"),Pon=uLe.createRoot(Ron),Oon=navigator.userAgent;function wOe(e,t){Pon.render(o.jsx(R.StrictMode,{children:o.jsx(Pr,{fallback:Fbe,children:o.jsx(Xbe,{host:window.location.hostname,userAgent:Oon,session:t??void 0,children:o.jsxs(Zgt,{isMobileUserAgent:Don,hostname:Fon??"",version:e.version,minVersion:e.minVersion??0,spaRoutes:Jgt,strictSpa:!0,idleRefresh:!1,minVersionRefresh:!0,children:[o.jsx(_Oe,{}),o.jsx(Fht,{})]})})})}))}const{config:Zb,cachedSession:jk,sessionFetchPromise:Lon}=byt();window.__PPL_CONFIG__=Zb;const Don=M0e(navigator.userAgent),Fon=window.location.host;jk&&Dbe(Zb,jk.user);wOe(Zb,jk);Lon.then(e=>{jk||Dbe(Zb,e?.user),wOe(Zb,e)});export{Hpe as $,Je as A,pe as B,pn as C,qV as D,fe as E,fmn as F,pre as G,co as H,Wr as I,hmn as J,cs as K,Ir as L,mmn as M,q3t as N,qF as O,Ue as P,Lpe as Q,mre as R,Zr as S,F as T,De as U,YF as V,h3 as W,rln as X,sln as Y,nln as Z,rb as _,Jr as a,gr as a$,Te as a0,Ope as a1,Mn as a2,xf as a3,wn as a4,Qt as a5,pl as a6,R_ as a7,on as a8,vc as a9,tVt as aA,Knn as aB,ao as aC,AN as aD,Dw as aE,odn as aF,W_ as aG,Cit as aH,Ycn as aI,Jg as aJ,vf as aK,WNe as aL,Pt as aM,$nn as aN,Ct as aO,gcn as aP,fa as aQ,cx as aR,xt as aS,CE as aT,Icn as aU,YB as aV,KB as aW,$T as aX,s5 as aY,Iun as aZ,To as a_,lt as aa,Sa as ab,wV as ac,s8e as ad,en as ae,qBt as af,rr as ag,de as ah,F_ as ai,sn as aj,UB as ak,yge as al,Dcn as am,k9e as an,F5 as ao,bc as ap,Cw as aq,Hen as ar,pi as as,_n as at,S2 as au,eut as av,Ss as aw,cve as ax,Gnn as ay,dz as az,Dt as b,Do as b$,Fe as b0,ml as b1,cun as b2,c5 as b3,kn as b4,ny as b5,Tit as b6,St as b7,xn as b8,ev as b9,U9e as bA,oun as bB,Pcn as bC,Ocn as bD,kye as bE,tit as bF,rit as bG,_5 as bH,ipe as bI,Xxe as bJ,iit as bK,Ot as bL,Iit as bM,xT as bN,to as bO,Xa as bP,lo as bQ,Ei as bR,XAe as bS,I9e as bT,qrt as bU,R9e as bV,Sp as bW,H_ as bX,m0e as bY,Qa as bZ,Sxe as b_,Ah as ba,ycn as bb,pcn as bc,Oc as bd,Dke as be,Xd as bf,gx as bg,Fx as bh,Ds as bi,YE as bj,ccn as bk,Mye as bl,vG as bm,V9e as bn,Rtt as bo,B9e as bp,hcn as bq,du as br,lun as bs,lx as bt,Mht as bu,wm as bv,wet as bw,o0e as bx,Iv as by,Ji as bz,Nt as c,aze as c$,uun as c0,ort as c1,Bi as c2,qm as c3,Ede as c4,Ef as c5,BY as c6,qa as c7,VY as c8,R$t as c9,Pln as cA,Grt as cB,za as cC,_G as cD,Efe as cE,Zcn as cF,Uun as cG,Jcn as cH,vn as cI,Cln as cJ,Sln as cK,dun as cL,S_ as cM,jd as cN,cKe as cO,QQ as cP,Tcn as cQ,C2 as cR,Ht as cS,gtn as cT,Qcn as cU,H8 as cV,xNe as cW,cze as cX,wY as cY,Gon as cZ,rze as c_,iun as ca,aun as cb,sun as cc,run as cd,c0e as ce,vcn as cf,bcn as cg,z2 as ch,Zpn as ci,ttn as cj,krt as ck,_cn as cl,wcn as cm,Vun as cn,$un as co,Ccn as cp,Scn as cq,Mcn as cr,Ecn as cs,kcn as ct,Jpn as cu,sdn as cv,Ncn as cw,Trt as cx,jcn as cy,S9e as cz,Jn as d,Wkt as d$,sze as d0,oze as d1,lze as d2,Ime as d3,da as d4,Fte as d5,PT as d6,OT as d7,B_ as d8,mz as d9,E6t as dA,YH as dB,nve as dC,p8e as dD,M8e as dE,Ctn as dF,Lun as dG,zV as dH,GV as dI,XPe as dJ,wQt as dK,xYt as dL,pH as dM,QLt as dN,bxe as dO,NRe as dP,Dun as dQ,Fun as dR,B5 as dS,hc as dT,Zd as dU,LY as dV,yB as dW,Cm as dX,an as dY,Za as dZ,$kt as d_,hx as da,r8e as db,n8e as dc,a8e as dd,yH as de,Ru as df,Vr as dg,Sun as dh,M3e as di,d6t as dj,jc as dk,Em as dl,ey as dm,U_ as dn,Bun as dp,na as dq,is as dr,L8e as ds,Sw as dt,bL as du,gH as dv,k6t as dw,ta as dx,a3e as dy,wje as dz,We as e,sTe as e$,N3 as e0,eHt as e1,YWe as e2,eun as e3,o3e as e4,vH as e5,Lln as e6,Sm as e7,Ca as e8,HU as e9,ian as eA,xB as eB,oV as eC,q8 as eD,uG as eE,OB as eF,dve as eG,N0e as eH,$r as eI,z0e as eJ,scn as eK,Qdn as eL,Xdn as eM,Zdn as eN,Jdn as eO,Zc as eP,sd as eQ,pr as eR,qke as eS,P1t as eT,IAt as eU,Jkt as eV,Z8t as eW,e9t as eX,s2e as eY,Et as eZ,Bp as e_,Xcn as ea,mf as eb,uit as ec,Zln as ed,nun as ee,Kln as ef,fit as eg,vun as eh,z_ as ei,AAe as ej,MNe as ek,un as el,xun as em,JFe as en,ndn as eo,$u as ep,bpe as eq,rdn as er,Tp as es,WT as et,bH as eu,Zie as ev,_Ne as ew,sR as ex,Tun as ey,s0e as ez,ha as f,qNe as f$,cz as f0,mx as f1,yV as f2,oft as f3,fi as f4,HAe as f5,EAe as f6,tmn as f7,n9t as f8,jB as f9,iN as fA,jH as fB,B5e as fC,fl as fD,xV as fE,Srn as fF,ihn as fG,ohn as fH,rpn as fI,vpn as fJ,JNe as fK,npn as fL,Ie as fM,ZLt as fN,Ern as fO,Aw as fP,xpn as fQ,fpn as fR,Vx as fS,Spn as fT,Apn as fU,wpn as fV,Ey as fW,rk as fX,zmn as fY,cpn as fZ,_pn as f_,J8t as fa,Kke as fb,T1t as fc,PAt as fd,LAt as fe,OAt as ff,r5 as fg,wl as fh,M$ as fi,Xu as fj,zLt as fk,XLt as fl,i7t as fm,Hb as fn,ENe as fo,VLt as fp,E7t as fq,XTe as fr,wNe as fs,W5e as ft,AH as fu,oN as fv,va as fw,jTe as fx,epn as fy,Ux as fz,O1t as g,$3e as g$,W7t as g0,dpn as g1,bpn as g2,mpn as g3,H7t as g4,vrn as g5,qOt as g6,tpn as g7,wDt as g8,Ls as g9,Ven as gA,Oun as gB,hi as gC,JB as gD,m5 as gE,Cp as gF,oct as gG,jun as gH,o5 as gI,dx as gJ,ctn as gK,Vve as gL,Fw as gM,mV as gN,g5 as gO,h5 as gP,mtn as gQ,QJt as gR,B7 as gS,gXt as gT,aXt as gU,rXt as gV,gce as gW,kf as gX,Q6 as gY,M$t as gZ,h6t as g_,_rn as ga,prn as gb,chn as gc,V9t as gd,jpn as ge,nDt as gf,fje as gg,lhn as gh,xLt as gi,iLt as gj,apn as gk,r7t as gl,Qln as gm,tx as gn,Xln as go,Uln as gp,Xg as gq,rVe as gr,p_ as gs,u_ as gt,ien as gu,Pa as gv,Pp as gw,eW as gx,p0e as gy,aG as gz,H as h,Hoe as h$,oan as h0,LHt as h1,ln as h2,$mn as h3,c8t as h4,_mt as h5,Hon as h6,ea as h7,Br as h8,PMe as h9,yx as hA,fhn as hB,T4e as hC,$Be as hD,Zmn as hE,ypn as hF,Jmn as hG,Ymn as hH,hpn as hI,dp as hJ,ppn as hK,gpn as hL,Xmn as hM,Qmn as hN,qmn as hO,$9t as hP,Kmn as hQ,Gmn as hR,No as hS,L9t as hT,PAe as hU,GNe as hV,p5 as hW,Cpn as hX,Hmn as hY,$de as hZ,Kt as h_,uH as ha,lke as hb,vAt as hc,um as hd,yAt as he,U3t as hf,P3t as hg,O3t as hh,H3t as hi,Pke as hj,ike as hk,Fke as hl,OMe as hm,Jm as hn,v5 as ho,Hge as hp,K3e as hq,_6t as hr,w6t as hs,Ta as ht,hH as hu,U3e as hv,V3e as hw,W3e as hx,Vb as hy,Dy as hz,En as i,Rje as i$,ck as i0,Woe as i1,oR as i2,lR as i3,krn as i4,WOt as i5,Trn as i6,oNe as i7,vut as i8,a7t as i9,Mfn as iA,but as iB,y9 as iC,o4e as iD,Gfn as iE,zfn as iF,x9t as iG,Lye as iH,Lfn as iI,Ofn as iJ,smn as iK,kfn as iL,Nfn as iM,Tfn as iN,Afn as iO,jfn as iP,dfn as iQ,fcn as iR,kRt as iS,Sfn as iT,Cfn as iU,ffn as iV,bfn as iW,hfn as iX,w9 as iY,Pfn as iZ,Fnn as i_,s7t as ia,e7t as ib,t7t as ic,M7t as id,k7t as ie,uhn as ig,JLt as ih,Crn as ii,Dce as ij,n7t as ik,EDt as il,loe as im,kDt as io,s4e as ip,Fce as iq,Epn as ir,lpn as is,pLt as it,spn as iu,upn as iv,Lce as iw,j7t as ix,Efn as iy,hV as iz,pf as j,gV as j$,tp as j0,Nw as j1,pfn as j2,mfn as j3,Qfn as j4,Yfn as j5,eGe as j6,qEt as j7,k$ as j8,eSe as j9,kA as jA,Npn as jB,J5e as jC,e3t as jD,SN as jE,ije as jF,CN as jG,gge as jH,EN as jI,lmn as jJ,tOe as jK,mb as jL,yfn as jM,gfn as jN,Rfn as jO,Ifn as jP,wfn as jQ,_fn as jR,lbt as jS,obt as jT,vfn as jU,xfn as jV,ufn as jW,cfn as jX,xDt as jY,e7 as jZ,e4e as j_,rT as ja,dy as jb,imn as jc,Zfn as jd,Xfn as je,emn as jf,Jfn as jg,mT as jh,ubt as ji,cbt as jj,Bfn as jk,Vfn as jl,Kfn as jm,$fn as jn,Pr as jo,omn as jp,Wfn as jq,JSe as jr,lbe as js,Hfn as jt,qfn as ju,rmn as jv,nmn as jw,Ike as jx,Dfn as jy,cmn as jz,no as k,Aft as k$,Ufn as k0,Ffn as k1,gft as k2,jct as k3,Xy as k4,zdt as k5,Gdt as k6,qdt as k7,Z8 as k8,Tde as k9,Gu as kA,cpt as kB,VA as kC,kee as kD,nM as kE,hR as kF,kht as kG,Tht as kH,Eht as kI,obe as kJ,tun as kK,$cn as kL,dVt as kM,Ku as kN,Q1e as kO,dpt as kP,n6e as kQ,jye as kR,Dht as kS,pAe as kT,yk as kU,x$t as kV,xk as kW,idn as kX,mAe as kY,v$t as kZ,yz as k_,b9 as ka,Lte as kb,ce as kc,QFe as kd,XFe as ke,oje as kf,Dbt as kg,s8t as kh,Sy as ki,RH as kj,Wmn as kk,e2e as kl,t2e as km,n2e as kn,r2e as ko,YTe as kp,Up as kq,l8t as kr,vAe as ks,i5 as kt,Oln as ku,mye as kv,KFe as kw,c_ as kx,Lcn as ky,NQt as kz,wt as l,$ln as l$,Dmt as l0,udn as l1,ldn as l2,ddn as l3,Mp as l4,hdn as l5,Wu as l6,nf as l7,Fa as l8,XT as l9,xcn as lA,grt as lB,Mqe as lC,yrt as lD,Iat as lE,Rn as lF,ncn as lG,tcn as lH,$rt as lI,omt as lJ,ZE as lK,Fln as lL,Jon as lM,al as lN,Wln as lO,zln as lP,Hln as lQ,gdn as lR,lcn as lS,_V as lT,Bln as lU,dtt as lV,utt as lW,O0e as lX,kpn as lY,z3 as lZ,Vln as l_,w$ as la,ef as lb,S$ as lc,Bx as ld,Y2t as le,TH as lf,Pw as lg,FTe as lh,Rft as li,vV as lj,mpt as lk,fpt as ll,Pft as lm,Oft as ln,I$t as lo,Lft as lp,Wcn as lq,Hcn as lr,Gy as ls,zH as lt,GH as lu,qH as lv,KH as lw,ra as lx,_$t as ly,sst as lz,ve as m,Nye as m$,Att as m0,zct as m1,iB as m2,a5 as m3,Cun as m4,tln as m5,wun as m6,AB as m7,Ad as m8,oit as m9,dt as mA,RMe as mB,oH as mC,ql as mD,hke as mE,fw as mF,HZe as mG,$dn as mH,b2 as mI,Wdn as mJ,Zet as mK,ZUt as mL,LZe as mM,pge as mN,hge as mO,L3 as mP,L5 as mQ,qU as mR,TBt as mS,wN as mT,zZe as mU,jrn as mV,K_e as mW,zcn as mX,qln as mY,Gcn as mZ,qcn as m_,$3 as ma,Acn as mb,ZF as mc,b3 as md,v3 as me,yln as mf,Nu as mg,x3 as mh,Qot as mi,M_ as mj,qun as mk,Yln as ml,_ut as mm,B3e as mn,lpe as mo,vs as mp,hhn as mq,ecn as mr,E$t as ms,Aln as mt,Iln as mu,Rln as mv,bN as mw,PE as mx,PZe as my,DZe as mz,D5 as n,GB as n$,W_e as n0,aln as n1,P8 as n2,Bcn as n3,U8 as n4,Vcn as n5,Fcn as n6,ls as n7,mit as n8,H3 as n9,lVt as nA,M5 as nB,kp as nC,not as nD,Ype as nE,d3 as nF,lf as nG,D8e as nH,tVe as nI,kfe as nJ,IVe as nK,SWe as nL,d$e as nM,BVe as nN,Q3 as nO,w3 as nP,vB as nQ,Zyt as nR,T5 as nS,k5 as nT,Q9e as nU,X9e as nV,C9e as nW,t9e as nX,pln as nY,mln as nZ,ult as n_,uat as na,Iht as nb,sWt as nc,Vv as nd,NN as ne,eln as nf,Zon as ng,Oje as nh,Tpn as ni,vme as nj,ig as nk,hU as nl,gU as nm,Nhe as nn,I3 as no,Wnt as np,jF as nq,Dme as nr,Ome as ns,Fme as nt,OHt as nu,Hun as nv,zun as nw,fVt as nx,acn as ny,C7t as nz,je as o,tdn as o$,E1e as o0,UY as o1,oln as o2,iln as o3,Clt as o4,jw as o5,N1e as o6,Ep as o7,adn as o8,hun as o9,$ft as oA,upt as oB,Elt as oC,iH as oD,aH as oE,Pdn as oF,umt as oG,d1e as oH,ydn as oI,bdn as oJ,yun as oK,plt as oL,Ree as oM,GWe as oN,rV as oO,JVt as oP,qu as oQ,Ql as oR,c6t as oS,fun as oT,L3e as oU,Oo as oV,ict as oW,jft as oX,Kun as oY,Qun as oZ,Yun as o_,imt as oa,Ic as ob,_lt as oc,kAe as od,vdn as oe,_un as of,bun as og,mun as oh,lln as oi,_ln as oj,cln as ok,uln as ol,pun as om,kdn as on,Ndn as oo,jdn as op,Cdn as oq,Rdn as or,Edn as os,Idn as ot,Adn as ou,Sdn as ov,Tdn as ow,wdn as ox,Mdn as oy,_dn as oz,Ce as p,Ipn as p$,Jun as p0,Ucn as p1,T3 as p2,edn as p3,vj as p4,pdn as p5,xft as p6,m3e as p7,m6t as p8,p6t as p9,EH as pA,Sz as pB,im as pC,PN as pD,Nf as pE,Ldn as pF,Ih as pG,tGe as pH,Nct as pI,wp as pJ,pAt as pK,J0e as pL,Gun as pM,Rv as pN,$mt as pO,cdn as pP,fdn as pQ,u1e as pR,Gln as pS,Cee as pT,gun as pU,NJ as pV,flt as pW,QB as pX,Jmt as pY,Odn as pZ,EWt as p_,fs as pa,Ci as pb,Zun as pc,Ift as pd,G2 as pe,Xun as pf,ghn as pg,T1e as ph,ggt as pi,i9 as pj,Yn as pk,rxe as pl,Tr as pm,mcn as pn,Xnt as po,cX as pp,RN as pq,mv as pr,N6t as ps,$Ht as pt,iV as pu,nnn as pv,nhn as pw,rhn as px,thn as py,ehn as pz,uAt as q,bke as q$,Koe as q0,Wft as q1,ocn as q2,Hft as q3,zft as q4,mt as q5,DYe as q6,_r as q7,At as q8,bXe as q9,EU as qA,TXe as qB,$Ye as qC,gk as qD,YUt as qE,tQe as qF,vBt as qG,Ydn as qH,zdn as qI,Si as qJ,Ett as qK,Hdn as qL,nn as qM,Gdn as qN,L_e as qO,qdn as qP,Kdn as qQ,icn as qR,Ny as qS,XUt as qT,JUt as qU,xv as qV,Jd as qW,Kxe as qX,xdn as qY,fv as qZ,vke as q_,NE as qa,CXe as qb,wXe as qc,MXe as qd,SXe as qe,Xc as qf,_Xe as qg,zYe as qh,Whe as qi,GYe as qj,Ghe as qk,TE as ql,kE as qm,gQe as qn,mQe as qo,hf as qp,Khe as qq,vQe as qr,CQe as qs,xQ as qt,wQe as qu,Ga as qv,lQe as qw,Z1 as qx,Ks as qy,Hu as qz,EAt as r,_mn as r$,Upe as r0,xke as r1,W0t as r2,pxt as r3,mxt as r4,VV as r5,m0t as r6,fb as r7,Fdn as r8,L0t as r9,z8e as rA,jAt as rB,qtn as rC,Mt as rD,VHt as rE,enn as rF,shn as rG,om as rH,Ktn as rI,Lx as rJ,Uu as rK,Smn as rL,Mc as rM,ymn as rN,xmn as rO,gmn as rP,ps as rQ,I5t as rR,R2e as rS,Q5t as rT,I2e as rU,vmn as rV,n1 as rW,Be as rX,nt as rY,Cs as rZ,bmn as r_,Bdn as ra,Udn as rb,Vdn as rc,y_e as rd,UV as re,Gtn as rf,tnn as rg,Fpn as rh,fG as ri,Bpn as rj,Vpn as rk,Upn as rl,Wpn as rm,$pn as rn,Gpn as ro,Hpn as rp,zpn as rq,Dpn as rr,lve as rs,Xtn as rt,Jtn as ru,Tz as rv,Lpn as rw,Opn as rx,Gb as ry,qpn as rz,ae as s,DDt as s$,Mmn as s0,sL as s1,Cmn as s2,wmn as s3,HTt as s4,VW as s5,jmn as s6,Nmn as s7,mL as s8,Ox as s9,Dmn as sA,s6t as sB,g6t as sC,Qon as sD,H3e as sE,cnn as sF,yn as sG,u9e as sH,Y3e as sI,dhn as sJ,Qc as sK,mhn as sL,Sl as sM,E3e as sN,S3e as sO,u6t as sP,Aun as sQ,oTe as sR,kun as sS,l9e as sT,o9e as sU,Jln as sV,Xpn as sW,Iu as sX,I_ as sY,Ddn as sZ,m8e as s_,Tmn as sa,rt as sb,bu as sc,nEe as sd,_a as se,Is as sf,HEe as sg,Wo as sh,S5t as si,Ob as sj,kc as sk,UW as sl,Rmn as sm,xMe as sn,kmn as so,BVt as sp,vve as sq,Vmn as sr,Fmn as ss,_ft as st,Lf as su,BE as sv,f3e as sw,Lmn as sx,Umn as sy,Bmn as sz,umn as t,Qpn as t$,Ypn as t0,Mk as t1,onn as t2,ahn as t3,wct as t4,Gge as t5,ONe as t6,Ho as t7,frt as t8,vye as t9,STe as tA,GT as tB,X0e as tC,zw as tD,_je as tE,Xn as tF,v7 as tG,I8e as tH,LIe as tI,Xon as tJ,Mln as tK,s7 as tL,Cxe as tM,TV as tN,Av as tO,Xf as tP,fY as tQ,ZQt as tR,Eln as tS,eo as tT,v5e as tU,Dln as tV,U8e as tW,wln as tX,g8e as tY,FGt as tZ,$Gt as t_,zx as ta,kln as tb,Tln as tc,OE as td,l5 as te,dke as tf,mke as tg,ege as th,lH as ti,gs as tj,Rcn as tk,kU as tl,Nun as tm,Eun as tn,Mun as to,R6e as tp,P6e as tq,W6e as tr,c1 as ts,Rpn as tt,Ppn as tu,pG as tv,XSe as tw,zkt as tx,Gkt as ty,SRt as tz,O_ as u,A7 as u0,VGt as u1,Uz as u2,fN as u3,HRe as u4,h4e as u5,Wa as u6,yhn as u7,xhn as u8,rcn as u9,hB as uA,xxe as uB,Vrt as uC,Wrt as uD,IB as uE,uB as uF,Fjt as uG,hln as uH,gln as uI,Gct as uJ,Ndt as uK,Run as uL,xln as uM,BJ as uN,$ct as uO,Ujt as uP,Met as uQ,Bye as uR,Zqe as uS,jn as uT,o1e as uU,lTe as uV,ipn as uW,fln as ua,dln as ub,bln as uc,vln as ud,san as ue,mdn as uf,ran as ug,phn as uh,den as ui,Ljt as uj,Ra as uk,K1 as ul,q1 as um,G1 as un,z1 as uo,Xl as up,W1 as uq,$1 as ur,V1 as us,Gg as ut,dm as uu,y3 as uv,nl as uw,Pun as ux,Hct as uy,Qxe as uz,pmn as v,dmn as w,fXe as x,X4 as y,Lt as z};
//# sourceMappingURL=index-DPcrp-Ye.js.map
